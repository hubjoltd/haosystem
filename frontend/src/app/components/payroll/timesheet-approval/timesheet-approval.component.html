<div class="attendance-payroll-approval">
  <div class="page-header">
    <div class="header-left">
      <h1>Attendance & Payroll Approval</h1>
      <p class="subtitle">Daily attendance approval and payroll processing</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-outline-primary" routerLink="/app/payroll/history">
        <i class="fas fa-history"></i> View Payroll History
      </button>
    </div>
  </div>

  <div class="message-bar" *ngIf="message" [ngClass]="messageType">
    {{ message }}
  </div>

  <div class="step-wizard-new">
    <div class="step-item" [class.active]="currentStep === 0" [class.completed]="currentStep > 0" (click)="goToStep(0)">
      <div class="step-circle">
        <i class="fas" [ngClass]="currentStep > 0 ? 'fa-check' : 'fa-clipboard-check'"></i>
      </div>
      <div class="step-line" [class.completed]="currentStep > 0"></div>
      <div class="step-text">
        <span class="step-number">Step 0:</span>
        <span class="step-title">Daily Attendance Approval</span>
      </div>
    </div>

    <div class="step-item" [class.active]="currentStep === 1" [class.completed]="currentStep > 1" (click)="goToStep(1)">
      <div class="step-circle">
        <i class="fas" [ngClass]="currentStep > 1 ? 'fa-check' : 'fa-file-alt'"></i>
      </div>
      <div class="step-line" [class.completed]="currentStep > 1"></div>
      <div class="step-text">
        <span class="step-number">Step 1:</span>
        <span class="step-title">Generate Timesheets</span>
      </div>
    </div>

    <div class="step-item" [class.active]="currentStep === 2" [class.completed]="currentStep > 2" (click)="goToStep(2)">
      <div class="step-circle">
        <i class="fas" [ngClass]="currentStep > 2 ? 'fa-check' : 'fa-dollar-sign'"></i>
      </div>
      <div class="step-line" [class.completed]="currentStep > 2"></div>
      <div class="step-text">
        <span class="step-number">Step 2:</span>
        <span class="step-title">Calculate Payroll</span>
      </div>
    </div>

    <div class="step-item" [class.active]="currentStep === 3" [class.completed]="currentStep > 3" (click)="goToStep(3)">
      <div class="step-circle">
        <i class="fas" [ngClass]="currentStep > 3 ? 'fa-check' : 'fa-cog'"></i>
      </div>
      <div class="step-line" [class.completed]="currentStep > 3"></div>
      <div class="step-text">
        <span class="step-number">Step 3:</span>
        <span class="step-title">Process Payroll</span>
      </div>
    </div>

    <div class="step-item" [class.active]="currentStep === 4" [class.completed]="currentStep > 4" (click)="goToStep(4)">
      <div class="step-circle">
        <i class="fas fa-history"></i>
      </div>
      <div class="step-text">
        <span class="step-number">Step 4:</span>
        <span class="step-title">Payroll History</span>
      </div>
    </div>
  </div>

  <!-- Step 0: Daily Attendance Approval -->
  <div class="step-content" *ngIf="currentStep === 0">
    <div class="section-box">
      <div class="viewing-header">
        <div class="date-info">
          <span class="viewing-label">Viewing:</span>
          <span class="date-text">{{ formatDateDisplay(selectedDate) }}</span>
        </div>
        <div class="date-nav-controls">
          <button class="btn btn-icon" (click)="previousDate()"><i class="fas fa-chevron-left"></i></button>
          <input type="date" [(ngModel)]="selectedDate" (change)="onDateChange()" />
          <button class="btn btn-icon" (click)="nextDate()"><i class="fas fa-chevron-right"></i></button>
        </div>
      </div>

      <div class="summary-stats-row">
        <div class="stat-box blue">
          <div class="stat-icon"><i class="fas fa-users"></i></div>
          <div class="stat-info">
            <span class="stat-label">Total Employees</span>
            <span class="stat-value">{{ totalEmployees }}</span>
          </div>
        </div>
        <div class="stat-box green">
          <div class="stat-icon"><i class="fas fa-percentage"></i></div>
          <div class="stat-info">
            <span class="stat-label">On Time Rate</span>
            <span class="stat-value">{{ getOnTimeRate() }}%</span>
          </div>
        </div>
        <div class="stat-box orange">
          <div class="stat-icon"><i class="fas fa-clock"></i></div>
          <div class="stat-info">
            <span class="stat-label">Late Arrivals</span>
            <span class="stat-value">{{ getLateArrivals() }}%</span>
          </div>
        </div>
      </div>

      <div class="sub-section">
        <h4><i class="fas fa-calendar-check"></i> Daily Attendance Review</h4>
      </div>

      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th class="checkbox-col"><input type="checkbox" [checked]="allAttendanceSelected" (change)="toggleAllAttendance()" /></th>
              <th>#</th>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>CLOCK IN</th>
              <th>CLOCK OUT</th>
              <th>HOURS</th>
              <th>STATUS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let record of attendanceRecords; let i = index">
              <td class="checkbox-col"><input type="checkbox" [checked]="isAttendanceSelected(record)" (change)="toggleAttendanceSelection(record)" /></td>
              <td>{{ i + 1 }}</td>
              <td class="emp-id">{{ record.employee?.employeeCode || 'EMP' + (i + 1) }}</td>
              <td class="emp-name">{{ record.employee?.firstName }} {{ record.employee?.lastName }}</td>
              <td>{{ record.clockIn || '-' }}</td>
              <td>{{ record.clockOut || '-' }}</td>
              <td class="hours">{{ (record.regularHours || 0).toFixed(1) }}</td>
              <td>
                <span class="status-badge" [ngClass]="getApprovalStatusClass(record.approvalStatus)">
                  {{ record.approvalStatus || 'Pending' }}
                </span>
              </td>
            </tr>
            <tr *ngIf="attendanceRecords.length === 0">
              <td colspan="8" class="no-data">
                <i class="fas fa-calendar-times"></i>
                No attendance records found for this date
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="step-actions-bar">
        <div class="left-actions">
          <span class="selected-info">{{ selectedAttendanceCount }} records selected</span>
        </div>
        <div class="right-actions">
          <button class="btn btn-success" [disabled]="selectedAttendanceCount === 0" (click)="approveSelectedAttendance()">
            <i class="fas fa-check"></i> Approve Selected
          </button>
          <button class="btn btn-primary" (click)="goToStep(1)">
            Next: Generate Timesheets <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 1: Generate Timesheet Summary -->
  <div class="step-content" *ngIf="currentStep === 1">
    <div class="section-box">
      <div class="step-header">
        <h3>Step 1: Generate Timesheet Summary</h3>
        <p class="period-info">Period: {{ generateStartDate }} - {{ generateEndDate }} ({{ getPayPeriodTypeLabel() }})</p>
      </div>

      <div class="form-grid compact">
        <div class="form-group">
          <label>Pay Period Type</label>
          <select [(ngModel)]="selectedPayPeriodType" (change)="onPayPeriodTypeChange()">
            <option value="MONTHLY">Monthly</option>
            <option value="WEEKLY">Weekly</option>
            <option value="BI_WEEKLY">Bi-Weekly</option>
            <option value="SEMI_MONTHLY">Semi-Monthly</option>
          </select>
        </div>
        <div class="form-group">
          <label>Period Start</label>
          <input type="date" [(ngModel)]="generateStartDate" />
        </div>
        <div class="form-group">
          <label>Period End</label>
          <input type="date" [(ngModel)]="generateEndDate" />
        </div>
        <div class="form-group btn-group-cell">
          <button class="btn btn-generate" (click)="generateTimesheetsForPeriod()" [disabled]="generating">
            <i class="fas fa-sync" [class.fa-spin]="generating"></i>
            {{ generating ? 'Generating...' : 'Generate' }}
          </button>
        </div>
      </div>

      <!-- Employee Selection Section -->
      <div class="employee-selection-section">
        <div class="section-header">
          <h4><i class="fas fa-users"></i> Employee Selection</h4>
          <span class="selection-info">
            {{ selectAllForTimesheet ? 'All ' + timesheetEmployees.length + ' employees' : selectedTimesheetEmployeeIds.length + ' of ' + timesheetEmployees.length + ' selected' }}
          </span>
        </div>
        
        <div class="checkbox-group">
          <label class="checkbox-label select-all">
            <input type="checkbox" [checked]="selectAllForTimesheet" (change)="toggleSelectAllForTimesheet()">
            <span>All Active Employees</span>
          </label>
        </div>
        
        <div class="employee-list-grid" *ngIf="!selectAllForTimesheet">
          <label class="checkbox-label employee-item" *ngFor="let emp of timesheetEmployees">
            <input type="checkbox" 
                   [checked]="isTimesheetEmployeeSelected(emp.id!)" 
                   (change)="toggleTimesheetEmployeeSelection(emp.id!)">
            <span class="emp-info">
              <span class="emp-name">{{ emp.firstName }} {{ emp.lastName }}</span>
              <span class="emp-code">{{ emp.employeeCode }}</span>
            </span>
          </label>
        </div>
      </div>

      <div class="table-container">
        <table class="data-table timesheet-summary-table">
          <thead>
            <tr>
              <th>S.NO</th>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>TYPE</th>
              <th>TOTAL HOURS</th>
              <th>DAYS WORKED</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let ts of filteredTimesheets; let i = index">
              <td>{{ i + 1 }}</td>
              <td class="emp-id">{{ ts.employee?.employeeCode || 'EMP00' + (i + 1) }}</td>
              <td class="emp-name">{{ getEmployeeName(ts) }}</td>
              <td>{{ ts.employee?.employmentType || 'Full-Time' }}</td>
              <td class="hours teal">{{ ts.totalHours?.toFixed(2) || '0.00' }}</td>
              <td>{{ ts.presentDays || 0 }}</td>
            </tr>
            <tr *ngIf="filteredTimesheets.length === 0">
              <td colspan="6" class="no-data">
                <i class="fas fa-file-alt"></i>
                No timesheets generated yet. Click Generate to create timesheets.
              </td>
            </tr>
          </tbody>
          <tfoot *ngIf="filteredTimesheets.length > 0">
            <tr class="totals-row">
              <td colspan="4"><strong>TOTAL</strong></td>
              <td class="teal"><strong>{{ getTimesheetTotalHours() }}h</strong></td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>

      <div class="step-actions-bar">
        <button class="btn btn-outline-secondary" (click)="goToStep(0)">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <button class="btn btn-primary" (click)="goToStep(2)">
          Next: Calculate Payroll <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Step 2: Calculate Payroll -->
  <div class="step-content" *ngIf="currentStep === 2">
    <div class="section-box">
      <div class="payroll-summary-cards">
        <div class="payroll-card green">
          <span class="card-label">Total Gross Pay</span>
          <span class="card-value">{{ formatCurrency(totalGrossPay) }}</span>
        </div>
        <div class="payroll-card red">
          <span class="card-label">Total Taxes</span>
          <span class="card-value">{{ formatCurrency(totalGrossPay * 0.22) }}</span>
        </div>
        <div class="payroll-card blue">
          <span class="card-label">Total Net Pay</span>
          <span class="card-value">{{ formatCurrency(totalNetPay) }}</span>
        </div>
        <div class="payroll-card purple">
          <span class="card-label">Employees</span>
          <span class="card-value">{{ employeesToProcess }}</span>
        </div>
      </div>

      <div class="step-header">
        <h3>Step 2: Payroll Calculation Complete</h3>
        <p class="period-info">Period: {{ generateStartDate }} - {{ generateEndDate }}</p>
      </div>

      <div class="table-container">
        <table class="data-table payroll-calc-table">
          <thead>
            <tr>
              <th>S.NO</th>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>TYPE</th>
              <th>HOURS</th>
              <th>GROSS</th>
              <th>FEDERAL</th>
              <th>STATE</th>
              <th>SOC.SEC</th>
              <th>MEDICARE</th>
              <th>TOTAL TAX</th>
              <th>NET PAY</th>
              <th>STATUS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let emp of payableEmployees; let i = index">
              <td>{{ i + 1 }}</td>
              <td class="emp-id">{{ emp.empId }}</td>
              <td class="emp-name">{{ emp.name }}</td>
              <td>{{ emp.payType }}</td>
              <td>{{ emp.hours.toFixed(2) }}</td>
              <td class="green-text">{{ formatCurrency(emp.rate) }}</td>
              <td>{{ formatCurrency(emp.rate * 0.12) }}</td>
              <td>{{ formatCurrency(emp.rate * 0.05) }}</td>
              <td>{{ formatCurrency(emp.rate * 0.062) }}</td>
              <td>{{ formatCurrency(emp.rate * 0.0145) }}</td>
              <td class="red-text">{{ formatCurrency(emp.taxes) }}</td>
              <td class="green-text">{{ formatCurrency(emp.netAmount) }}</td>
              <td>
                <span class="status-badge" [ngClass]="emp.status === 'Ready' ? 'approved' : 'pending'">
                  {{ emp.status }}
                </span>
              </td>
            </tr>
            <tr *ngIf="payableEmployees.length === 0">
              <td colspan="13" class="no-data">
                <i class="fas fa-calculator"></i>
                No payroll data. Generate timesheets first.
              </td>
            </tr>
          </tbody>
          <tfoot *ngIf="payableEmployees.length > 0">
            <tr class="totals-row">
              <td colspan="4"><strong>TOTAL</strong></td>
              <td><strong>{{ getPayableTotalHours() }}h</strong></td>
              <td class="green-text"><strong>{{ formatCurrency(totalGrossPay) }}</strong></td>
              <td colspan="4"></td>
              <td class="red-text"><strong>{{ formatCurrency(totalGrossPay * 0.22) }}</strong></td>
              <td class="green-text"><strong>{{ formatCurrency(totalNetPay) }}</strong></td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>

      <div class="step-actions-bar">
        <button class="btn btn-outline-secondary" (click)="goToStep(1)">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <button class="btn btn-primary" (click)="goToStep(3)">
          Next: Process Payroll <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Step 3: Process Payroll -->
  <div class="step-content" *ngIf="currentStep === 3">
    <div class="section-box">
      <div class="step-header">
        <h3>Step 3: Process Payroll</h3>
        <p class="period-info">Review and finalize payroll for processing</p>
      </div>

      <div class="payroll-summary-cards">
        <div class="payroll-card green">
          <span class="card-label">Total Gross Pay</span>
          <span class="card-value">{{ formatCurrency(totalGrossPay) }}</span>
        </div>
        <div class="payroll-card red">
          <span class="card-label">Total Taxes</span>
          <span class="card-value">{{ formatCurrency(totalGrossPay * 0.22) }}</span>
        </div>
        <div class="payroll-card blue">
          <span class="card-label">Total Net Pay</span>
          <span class="card-value">{{ formatCurrency(totalNetPay) }}</span>
        </div>
        <div class="payroll-card purple">
          <span class="card-label">Employees</span>
          <span class="card-value">{{ employeesToProcess }}</span>
        </div>
      </div>

      <div class="section-header process-section-header">
        <h4>Select Employees for Final Processing</h4>
        <div class="header-actions">
          <button class="btn btn-sm btn-outline" (click)="selectAllPayables()">
            {{ areAllPayablesSelected() ? 'Deselect All' : 'Select All' }}
          </button>
        </div>
      </div>

      <div class="table-container">
        <table class="data-table process-table">
          <thead>
            <tr>
              <th class="checkbox-col">
                <input type="checkbox" [checked]="areAllPayablesSelected()" (change)="selectAllPayables()" />
              </th>
              <th>S.NO</th>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>GROSS</th>
              <th>TAXES</th>
              <th>NET PAY</th>
              <th>STATUS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let emp of payableEmployees; let i = index" [class.selected]="emp.selected">
              <td class="checkbox-col">
                <input type="checkbox" [checked]="emp.selected" (change)="togglePayableSelection(emp)" />
              </td>
              <td>{{ i + 1 }}</td>
              <td class="emp-id">{{ emp.empId }}</td>
              <td class="emp-name">{{ emp.name }}</td>
              <td class="green-text">{{ formatCurrency(emp.rate) }}</td>
              <td class="red-text">{{ formatCurrency(emp.taxes) }}</td>
              <td class="green-text">{{ formatCurrency(emp.netAmount) }}</td>
              <td>
                <span class="status-badge" [ngClass]="emp.status === 'Processed' ? 'approved' : 'pending'">
                  {{ emp.status }}
                </span>
              </td>
            </tr>
            <tr *ngIf="payableEmployees.length === 0">
              <td colspan="8" class="no-data">
                <i class="fas fa-users"></i>
                No employees ready for processing
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="step-actions-bar">
        <button class="btn btn-outline-secondary" (click)="goToStep(2)">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <button class="btn btn-success" [disabled]="employeesToProcess === 0" (click)="processPayables()">
          <i class="fas fa-check-circle"></i> Process Payroll
        </button>
        <button class="btn btn-primary" (click)="goToStep(4)">
          View Payroll History <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Payroll Summary Section after processing -->
  <div class="payroll-summary-section" *ngIf="showPayrollSummary && currentStep === 3">
    <div class="section-box summary-box">
      <div class="summary-header">
        <h3><i class="fas fa-check-circle text-success"></i> Payroll Processed Successfully</h3>
        <button class="btn btn-sm btn-outline" (click)="closeSummary()">
          <i class="fas fa-times"></i> Close
        </button>
      </div>

      <div class="summary-stats">
        <div class="stat-item">
          <span class="stat-value">{{ processedSalariedEmployees.length + processedHourlyEmployees.length }}</span>
          <span class="stat-label">Employees Processed</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ formatCurrency(processedNetTotal) }}</span>
          <span class="stat-label">Net Total Amount</span>
        </div>
      </div>

      <div class="category-section" *ngIf="processedSalariedEmployees.length > 0">
        <h4><i class="fas fa-users"></i> Salaried Employees ({{ processedSalariedEmployees.length }})</h4>
        <table class="data-table summary-table">
          <thead>
            <tr>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>Basic</th>
              <th>Gross</th>
              <th>Taxes</th>
              <th>Net Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let emp of processedSalariedEmployees">
              <td class="emp-id">{{ emp.empId }}</td>
              <td class="emp-name">{{ emp.name }}</td>
              <td>{{ formatCurrency(emp.basic) }}</td>
              <td>{{ formatCurrency(emp.gross) }}</td>
              <td class="tax-col">{{ formatCurrency(emp.taxes) }}</td>
              <td class="net-amount">{{ formatCurrency(emp.netAmount) }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="category-section" *ngIf="processedHourlyEmployees.length > 0">
        <h4><i class="fas fa-clock"></i> Hourly Employees ({{ processedHourlyEmployees.length }})</h4>
        <table class="data-table summary-table">
          <thead>
            <tr>
              <th>EMP ID</th>
              <th>NAME</th>
              <th>Basic</th>
              <th>Gross</th>
              <th>Taxes</th>
              <th>Net Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let emp of processedHourlyEmployees">
              <td class="emp-id">{{ emp.empId }}</td>
              <td class="emp-name">{{ emp.name }}</td>
              <td>{{ formatCurrency(emp.basic) }}</td>
              <td>{{ formatCurrency(emp.gross) }}</td>
              <td class="tax-col">{{ formatCurrency(emp.taxes) }}</td>
              <td class="net-amount">{{ formatCurrency(emp.netAmount) }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grand-total">
        <span>Grand Total Net Amount:</span>
        <span class="total-value">{{ formatCurrency(processedNetTotal) }}</span>
      </div>
    </div>
  </div>
</div>

<!-- Generate Timesheets Modal -->
<div class="modal-overlay" *ngIf="showGenerateModal" (click)="closeGenerateModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3><i class="fas fa-sync"></i> Generate Timesheets from Attendance</h3>
      <button class="close-btn" (click)="closeGenerateModal()">&times;</button>
    </div>
    <div class="modal-body">
      <p class="info-text">
        This will generate timesheets for all active employees based on their approved attendance records
        for the selected period.
      </p>
      <div class="form-row">
        <div class="form-group">
          <label>Period Start Date *</label>
          <input type="date" [(ngModel)]="generateStartDate" required>
        </div>
        <div class="form-group">
          <label>Period End Date *</label>
          <input type="date" [(ngModel)]="generateEndDate" required>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeGenerateModal()" [disabled]="generating">Cancel</button>
      <button class="btn btn-primary" (click)="generateTimesheets()" [disabled]="generating">
        <i class="fas fa-spinner fa-spin" *ngIf="generating"></i>
        {{ generating ? 'Generating...' : 'Generate Timesheets' }}
      </button>
    </div>
  </div>
</div>

<!-- Timesheet PDF View Modal -->
<div class="modal-overlay pdf-modal-overlay" *ngIf="showTimesheetPdfModal" (click)="closeTimesheetPdfModal()">
  <div class="modal pdf-modal" (click)="$event.stopPropagation()">
    <div class="modal-header pdf-header">
      <h3><i class="fas fa-file-alt"></i> Single Employee Time Sheet</h3>
      <button class="close-btn" (click)="closeTimesheetPdfModal()">&times;</button>
    </div>
    <div class="modal-body pdf-body" *ngIf="pdfTimesheet">
      <div class="pdf-preview">
        <div class="pdf-banner">
          <h2>Single Employee Time Sheet</h2>
          <p>PayrollPro - Time & Payroll System</p>
        </div>
        
        <div class="pdf-info">
          <div class="info-row">
            <div class="info-item">
              <span class="label">EMP ID:</span>
              <span class="value">{{ pdfTimesheet.employee?.employeeCode || 'EMP' + pdfTimesheet.employeeId }}</span>
            </div>
            <div class="info-item">
              <span class="label">PERIOD:</span>
              <span class="value">{{ pdfTimesheet.periodStartDate | date:'MMM dd, yyyy' }} - {{ pdfTimesheet.periodEndDate | date:'MMM dd, yyyy' }}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-item">
              <span class="label">NAME:</span>
              <span class="value">{{ pdfTimesheet.employee?.firstName }} {{ pdfTimesheet.employee?.lastName }}</span>
            </div>
            <div class="info-item">
              <span class="label">TOTAL HOURS:</span>
              <span class="value">{{ pdfTimesheet.totalHours?.toFixed(1) || '0.0' }}h</span>
            </div>
          </div>
        </div>

        <table class="pdf-table">
          <thead>
            <tr>
              <th>DATE</th>
              <th>CLOCK IN</th>
              <th>CLOCK OUT</th>
              <th>LUNCH HOURS</th>
              <th>REG HOURS</th>
              <th>OT HOURS</th>
              <th>TOTAL HOURS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let record of pdfAttendanceRecords; let odd = odd" [class.alt-row]="odd">
              <td>{{ record.attendanceDate | date:'MM/dd/yyyy' }}</td>
              <td>{{ record.clockIn || '-' }}</td>
              <td>{{ record.clockOut || '-' }}</td>
              <td>1</td>
              <td>{{ (record.regularHours || 0).toFixed(1) }}</td>
              <td>{{ (record.overtimeHours || 0).toFixed(1) }}</td>
              <td>{{ ((record.regularHours || 0) + (record.overtimeHours || 0)).toFixed(1) }}</td>
            </tr>
            <tr *ngIf="pdfAttendanceRecords.length === 0">
              <td colspan="7" class="no-data">No attendance records found for this period</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer pdf-footer">
      <button class="btn btn-secondary" (click)="closeTimesheetPdfModal()">Close</button>
      <button class="btn btn-primary" (click)="downloadTimesheetPdf(pdfTimesheet!)">
        <i class="fas fa-download"></i> Download PDF
      </button>
    </div>
  </div>
</div>

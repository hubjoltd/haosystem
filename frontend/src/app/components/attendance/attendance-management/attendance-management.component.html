<div class="daily-attendance">
  <div class="page-header">
    <h1>Daily Attendance</h1>
    <p class="subtitle">View attendance records by date</p>
  </div>

  
  <div class="summary-cards">
    <div class="summary-card total">
      <span class="card-label">Total Employees</span>
      <span class="card-value">{{ employees.length }}</span>
    </div>
    <div class="summary-card present">
      <span class="card-label">Present</span>
      <span class="card-value">{{ countByStatus('PRESENT') + countWorking() }}</span>
    </div>
    <div class="summary-card absent">
      <span class="card-label">Absent</span>
      <span class="card-value">{{ employees.length - (countByStatus('PRESENT') + countWorking()) }}</span>
    </div>
  </div>

  <div class="attendance-table-section">
    <div class="table-header">
      <div class="date-label">
        <i class="fas fa-calendar"></i>
        <span>Attendance for {{ formatDisplayDate(selectedDate) }}</span>
      </div>
      <div class="filters">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search employee..." [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()" />
        </div>
        <input type="date" [(ngModel)]="selectedDate" (change)="onDateChange()" class="date-picker" />
      </div>
    </div>

    <div *ngIf="loading" class="loading-row">
      <i class="fas fa-spinner fa-spin"></i> Loading...
    </div>

    <table class="attendance-table" *ngIf="!loading">
      <thead>
        <tr>
          <th>Employee</th>
          <th>Clock In</th>
          <th>Clock Out</th>
          <th>Hours</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of filteredRecords">
          <td>
            <div class="employee-cell">
              <div class="avatar">{{ getInitials(record.employee) }}</div>
              <span class="name">{{ getEmployeeName(record.employee) }}</span>
            </div>
          </td>
          <td>{{ formatTime(record.clockIn) }}</td>
          <td>{{ formatTime(record.clockOut) }}</td>
          <td>{{ calculateHoursDisplay(record) }}</td>
          <td>
            <span class="status-badge" [ngClass]="getStatusBadgeClass(record)">
              {{ getDisplayStatus(record) }}
            </span>
          </td>
        </tr>
        <tr *ngIf="filteredRecords.length === 0">
          <td colspan="5" class="no-data">No attendance records found for this date</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="attendance-approval">
  <div class="page-header">
    <div class="header-left">
      <h1>Attendance Approval</h1>
      <p class="subtitle">Review and approve time entries</p>
    </div>
    <div class="header-right">
      <span class="pending-badge" *ngIf="getPendingCount() > 0">
        {{ getPendingCount() }} Pending
      </span>
    </div>
  </div>

  
  <div class="content-card">
    <div class="card-header">
      <div class="header-title">
        <i class="fas fa-clock"></i>
        <span>Time Entries</span>
      </div>
      <div class="header-actions">
        <div class="filter-group">
          <i class="fas fa-filter"></i>
          <select [(ngModel)]="filterStatus" (ngModelChange)="onFilterChange()">
            <option value="">All Status</option>
            <option value="PENDING">Pending</option>
            <option value="APPROVED">Approved</option>
            <option value="REJECTED">Rejected</option>
          </select>
        </div>
        <button class="btn-approve" 
                *ngIf="selectedIds.length > 0"
                (click)="approveSelected()" 
                [disabled]="loading">
          <i class="fas fa-check"></i> Approve ({{ selectedIds.length }})
        </button>
        <button class="btn-reject" 
                *ngIf="selectedIds.length > 0"
                (click)="rejectSelected()" 
                [disabled]="loading">
          <i class="fas fa-times"></i> Reject
        </button>
      </div>
    </div>

    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th class="checkbox-col">
              <input type="checkbox" 
                     [checked]="isAllSelected()" 
                     (change)="toggleSelectAll()" />
            </th>
            <th>Employee</th>
            <th>Date</th>
            <th>Time</th>
            <th>Hours</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of filteredRecords">
            <td class="checkbox-col">
              <input type="checkbox" 
                     [checked]="isSelected(record.id!)" 
                     (change)="toggleSelect(record.id!)" />
            </td>
            <td>
              <span class="employee-name">{{ getEmployeeName(record.employee) }}</span>
            </td>
            <td>{{ formatDate(record.attendanceDate) }}</td>
            <td>{{ formatTimeRange(record.clockIn, record.clockOut) }}</td>
            <td>{{ calculateHours(record) }}</td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(record.approvalStatus || 'PENDING')">
                {{ formatStatus(record.approvalStatus || 'PENDING') }}
              </span>
            </td>
            <td class="actions-col">
              <button class="action-btn approve" 
                      (click)="approveRecord(record.id!)" 
                      [disabled]="loading || record.approvalStatus === 'APPROVED'"
                      title="Approve">
                <i class="fas fa-check"></i>
              </button>
              <button class="action-btn reject" 
                      (click)="rejectRecord(record.id!)" 
                      [disabled]="loading || record.approvalStatus === 'REJECTED'"
                      title="Reject">
                <i class="fas fa-times"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="filteredRecords.length === 0 && !loading">
            <td colspan="7" class="no-data">
              <i class="fas fa-check-circle"></i>
              <p>No {{ filterStatus ? filterStatus.toLowerCase() : '' }} attendance records found</p>
            </td>
          </tr>
          <tr *ngIf="loading">
            <td colspan="7" class="loading-row">
              <i class="fas fa-spinner fa-spin"></i> Loading...
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

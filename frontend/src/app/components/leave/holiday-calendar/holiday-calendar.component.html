<div class="holiday-calendar-container">
  <div class="page-header">
    <div class="header-left">
      <h1><i class="fas fa-calendar-alt"></i> Holiday Calendar</h1>
      <p class="subtitle">Federal and company holidays</p>
    </div>
    <div class="header-actions">
      <select [(ngModel)]="selectedYear" (ngModelChange)="loadHolidays()">
        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
      </select>
      <button class="btn-primary" (click)="openCreateModal()">
        <i class="fas fa-plus"></i> Add Holiday
      </button>
    </div>
  </div>

  <div class="filter-tabs">
    <button class="tab" (click)="filterByType('ALL')">All</button>
    <button class="tab federal" (click)="filterByType('FEDERAL')">Federal</button>
    <button class="tab company" (click)="filterByType('COMPANY')">Company</button>
    <button class="tab optional" (click)="filterByType('OPTIONAL')">Optional</button>
  </div>

  <div class="holidays-list" *ngIf="!loading">
    <div class="holiday-card" *ngFor="let holiday of filteredHolidays" [style.border-left-color]="getTypeColor(holiday.holidayType || '')">
      <div class="holiday-date">
        <span class="day">{{ holiday.holidayDate | date:'d' }}</span>
        <span class="month">{{ holiday.holidayDate | date:'MMM' }}</span>
        <span class="weekday">{{ holiday.dayOfWeek }}</span>
      </div>
      <div class="holiday-info">
        <h3>{{ holiday.name }}</h3>
        <p *ngIf="holiday.description">{{ holiday.description }}</p>
        <div class="badges">
          <span class="type-badge" [style.background]="getTypeColor(holiday.holidayType || '')">{{ holiday.holidayType }}</span>
          <span class="badge paid" *ngIf="holiday.isPaid">Paid</span>
          <span class="badge optional" *ngIf="holiday.isOptional">Optional</span>
        </div>
      </div>
      <div class="holiday-actions">
        <button class="btn-icon" (click)="openEditModal(holiday)" title="Edit">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn-icon delete" (click)="deleteHoliday(holiday.id!)" title="Delete">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!loading && filteredHolidays.length === 0">
    <i class="fas fa-calendar-times"></i>
    <p>No holidays found for {{ selectedYear }}</p>
  </div>

  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ editMode ? 'Edit' : 'Add' }} Holiday</h2>
        <button class="btn-close" (click)="closeModal()"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Holiday Name *</label>
          <input type="text" [(ngModel)]="formData.name" placeholder="e.g., Independence Day">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Date *</label>
            <input type="date" [(ngModel)]="formData.holidayDate">
          </div>
          <div class="form-group">
            <label>Type *</label>
            <select [(ngModel)]="formData.holidayType">
              <option *ngFor="let type of holidayTypes" [value]="type.value">{{ type.label }}</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea [(ngModel)]="formData.description" rows="2" placeholder="Optional description..."></textarea>
        </div>
        <div class="form-row checkboxes">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="formData.isPaid"> Paid Holiday
          </label>
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="formData.isOptional"> Optional
          </label>
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="formData.isActive"> Active
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeModal()">Cancel</button>
        <button class="btn-primary" (click)="saveHoliday()">{{ editMode ? 'Update' : 'Create' }}</button>
      </div>
    </div>
  </div>
</div>

var iS=Object.defineProperty,rS=Object.defineProperties;var oS=Object.getOwnPropertyDescriptors;var Zs=Object.getOwnPropertySymbols;var bh=Object.prototype.hasOwnProperty,Ch=Object.prototype.propertyIsEnumerable;var yh=(n,t,e)=>t in n?iS(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,N=(n,t)=>{for(var e in t||={})bh.call(t,e)&&yh(n,e,t[e]);if(Zs)for(var e of Zs(t))Ch.call(t,e)&&yh(n,e,t[e]);return n},ce=(n,t)=>rS(n,oS(t));var Fp=(n,t)=>{var e={};for(var i in n)bh.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Zs)for(var i of Zs(n))t.indexOf(i)<0&&Ch.call(n,i)&&(e[i]=n[i]);return e};var Dt=null,Js=!1,Bp=1,aS=null,Bt=Symbol("SIGNAL");function ye(n){let t=Dt;return Dt=n,t}function el(){return Dt}var ia={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ra(n){if(Js)throw new Error("");if(Dt===null)return;Dt.consumerOnSignalRead(n);let t=Dt.producersTail;if(t!==void 0&&t.producer===n)return;let e,i=Dt.recomputing;if(i&&(e=t!==void 0?t.nextProducer:Dt.producers,e!==void 0&&e.producer===n)){Dt.producersTail=e,e.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Dt&&(!i||lS(r,Dt)))return;let s=Zr(Dt),d={producer:n,consumer:Dt,nextProducer:e,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Dt.producersTail=d,t!==void 0?t.nextProducer=d:Dt.producers=d,s&&Eh(n,d)}function xh(){Bp++}function Wp(n){if(!(Zr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Bp)){if(!n.producerMustRecompute(n)&&!nl(n)){jp(n);return}n.producerRecomputeValue(n),jp(n)}}function Up(n){if(n.consumers===void 0)return;let t=Js;Js=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||sS(i)}}finally{Js=t}}function Gp(){return Dt?.consumerAllowSignalWrites!==!1}function sS(n){n.dirty=!0,Up(n),n.consumerMarkedDirty?.(n)}function jp(n){n.dirty=!1,n.lastCleanEpoch=Bp}function oa(n){return n&&Sh(n),ye(n)}function Sh(n){n.producersTail=void 0,n.recomputing=!0}function tl(n,t){ye(t),n&&Mh(n)}function Mh(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(Zr(n))do e=qp(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function nl(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,i=t.lastReadVersion;if(i!==e.version||(Wp(e),i!==e.version))return!0}return!1}function aa(n){if(Zr(n)){let t=n.producers;for(;t!==void 0;)t=qp(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Eh(n,t){let e=n.consumersTail,i=Zr(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)Eh(r.producer,r)}function qp(n){let t=n.producer,e=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!Zr(t)){let s=t.producers;for(;s!==void 0;)s=qp(s)}return e}function Zr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Hp(n){aS?.(n)}function lS(n,t){let e=t.producersTail;if(e!==void 0){let i=t.producers;do{if(i===n)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function zp(n,t){return Object.is(n,t)}function il(n,t){let e=Object.create(cS);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(Wp(e),ra(e),e.value===Xs)throw e.error;return e.value};return i[Bt]=e,Hp(e),i}var Vp=Symbol("UNSET"),Lp=Symbol("COMPUTING"),Xs=Symbol("ERRORED"),cS=ce(N({},ia),{value:Vp,dirty:!0,error:null,equal:zp,kind:"computed",producerMustRecompute(n){return n.value===Vp||n.value===Lp},producerRecomputeValue(n){if(n.value===Lp)throw new Error("");let t=n.value;n.value=Lp;let e=oa(n),i,r=!1;try{i=n.computation(),ye(null),r=t!==Vp&&t!==Xs&&i!==Xs&&n.equal(t,i)}catch(s){i=Xs,n.error=s}finally{tl(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function dS(){throw new Error}var wh=dS;function Ih(n){wh(n)}function $p(n){wh=n}var uS=null;function Qp(n,t){let e=Object.create(rl);e.value=n,t!==void 0&&(e.equal=t);let i=()=>Ph(e);return i[Bt]=e,Hp(e),[i,d=>sa(e,d),d=>Dh(e,d)]}function Ph(n){return ra(n),n.value}function sa(n,t){Gp()||Ih(n),n.equal(n.value,t)||(n.value=t,pS(n))}function Dh(n,t){Gp()||Ih(n),sa(n,t(n.value))}var rl=ce(N({},ia),{equal:zp,value:void 0,kind:"signal"});function pS(n){n.version++,xh(),Up(n),uS?.(n)}function Kp(n){let t=ye(null);try{return n()}finally{ye(t)}}function ve(n){return typeof n=="function"}function Jr(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ol=Jr(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function cr(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var ct=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(ve(i))try{i()}catch(s){t=s instanceof ol?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{Th(s)}catch(d){t=t??[],d instanceof ol?t=[...t,...d.errors]:t.push(d)}}if(t)throw new ol(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Th(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&cr(e,t)}remove(t){let{_finalizers:e}=this;e&&cr(e,t),t instanceof n&&t._removeParent(this)}};ct.EMPTY=(()=>{let n=new ct;return n.closed=!0,n})();var Yp=ct.EMPTY;function al(n){return n instanceof ct||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function Th(n){ve(n)?n():n.unsubscribe()}var On={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xr={setTimeout(n,t,...e){let{delegate:i}=Xr;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Xr;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sl(n){Xr.setTimeout(()=>{let{onUnhandledError:t}=On;if(t)t(n);else throw n})}function la(){}var Oh=Zp("C",void 0,void 0);function kh(n){return Zp("E",void 0,n)}function Nh(n){return Zp("N",n,void 0)}function Zp(n,t,e){return{kind:n,value:t,error:e}}var dr=null;function eo(n){if(On.useDeprecatedSynchronousErrorHandling){let t=!dr;if(t&&(dr={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=dr;if(dr=null,e)throw i}}else n()}function Rh(n){On.useDeprecatedSynchronousErrorHandling&&dr&&(dr.errorThrown=!0,dr.error=n)}var ur=class extends ct{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,al(t)&&t.add(this)):this.destination=gS}static create(t,e,i){return new to(t,e,i)}next(t){this.isStopped?Xp(Nh(t),this):this._next(t)}error(t){this.isStopped?Xp(kh(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Xp(Oh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mS=Function.prototype.bind;function Jp(n,t){return mS.call(n,t)}var em=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){ll(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){ll(i)}else ll(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ll(e)}}},to=class extends ur{constructor(t,e,i){super();let r;if(ve(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&On.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Jp(t.next,s),error:t.error&&Jp(t.error,s),complete:t.complete&&Jp(t.complete,s)}):r=t}this.destination=new em(r)}};function ll(n){On.useDeprecatedSynchronousErrorHandling?Rh(n):sl(n)}function fS(n){throw n}function Xp(n,t){let{onStoppedNotification:e}=On;e&&Xr.setTimeout(()=>e(n,t))}var gS={closed:!0,next:la,error:fS,complete:la};var no=typeof Symbol=="function"&&Symbol.observable||"@@observable";function kn(n){return n}function tm(...n){return nm(n)}function nm(n){return n.length===0?kn:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Ie=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=_S(e)?e:new to(e,i,r);return eo(()=>{let{operator:d,source:u}=this;s.add(d?d.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=Ah(i),new i((r,s)=>{let d=new to({next:u=>{try{e(u)}catch(m){s(m),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[no](){return this}pipe(...e){return nm(e)(this)}toPromise(e){return e=Ah(e),new e((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return n.create=t=>new n(t),n})();function Ah(n){var t;return(t=n??On.Promise)!==null&&t!==void 0?t:Promise}function hS(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}function _S(n){return n&&n instanceof ur||hS(n)&&al(n)}function vS(n){return ve(n?.lift)}function Fe(n){return t=>{if(vS(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,t,e,i,r){return new im(n,t,e,i,r)}var im=class extends ur{constructor(t,e,i,r,s,d){super(t),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(u){try{e(u)}catch(m){t.error(m)}}:super._next,this._error=r?function(u){try{r(u)}catch(m){t.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Fh=Jr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var dt=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new cl(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Fh}next(e){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Yp:(this.currentObservers=null,s.push(e),new ct(()=>{this.currentObservers=null,cr(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new Ie;return e.source=this,e}}return n.create=(t,e)=>new cl(t,e),n})(),cl=class extends dt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:Yp}};var He=class extends dt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var rm={now(){return(rm.delegate||Date).now()},delegate:void 0};var dl=class extends ct{constructor(t,e){super()}schedule(t,e=0){return this}};var ca={setInterval(n,t,...e){let{delegate:i}=ca;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=ca;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var ul=class extends dl{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return ca.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&ca.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,cr(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var io=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};io.now=rm.now;var pl=class extends io{constructor(t,e=io.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var om=new pl(ul),Vh=om;var Kt=new Ie(n=>n.complete());function ml(n){return n&&ve(n.schedule)}function Lh(n){return n[n.length-1]}function fl(n){return ve(Lh(n))?n.pop():void 0}function Ti(n){return ml(Lh(n))?n.pop():void 0}function Bh(n,t,e,i){function r(s){return s instanceof e?s:new e(function(d){d(s)})}return new(e||(e=Promise))(function(s,d){function u(C){try{b(i.next(C))}catch(w){d(w)}}function m(C){try{b(i.throw(C))}catch(w){d(w)}}function b(C){C.done?s(C.value):r(C.value).then(u,m)}b((i=i.apply(n,t||[])).next())})}function jh(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pr(n){return this instanceof pr?(this.v=n,this):new pr(n)}function Wh(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(P){return function(k){return Promise.resolve(k).then(P,w)}}function u(P,k){i[P]&&(r[P]=function(W){return new Promise(function(z,$){s.push([P,W,z,$])>1||m(P,W)})},k&&(r[P]=k(r[P])))}function m(P,k){try{b(i[P](k))}catch(W){O(s[0][3],W)}}function b(P){P.value instanceof pr?Promise.resolve(P.value.v).then(C,w):O(s[0][2],P)}function C(P){m("next",P)}function w(P){m("throw",P)}function O(P,k){P(k),s.shift(),s.length&&m(s[0][0],s[0][1])}}function Uh(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof jh=="function"?jh(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(d){return new Promise(function(u,m){d=n[s](d),r(u,m,d.done,d.value)})}}function r(s,d,u,m){Promise.resolve(m).then(function(b){s({value:b,done:u})},d)}}var gl=n=>n&&typeof n.length=="number"&&typeof n!="function";function hl(n){return ve(n?.then)}function _l(n){return ve(n[no])}function vl(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function yl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bl=yS();function Cl(n){return ve(n?.[bl])}function xl(n){return Wh(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield pr(e.read());if(r)return yield pr(void 0);yield yield pr(i)}}finally{e.releaseLock()}})}function Sl(n){return ve(n?.getReader)}function at(n){if(n instanceof Ie)return n;if(n!=null){if(_l(n))return bS(n);if(gl(n))return CS(n);if(hl(n))return xS(n);if(vl(n))return Gh(n);if(Cl(n))return SS(n);if(Sl(n))return MS(n)}throw yl(n)}function bS(n){return new Ie(t=>{let e=n[no]();if(ve(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CS(n){return new Ie(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function xS(n){return new Ie(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,sl)})}function SS(n){return new Ie(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Gh(n){return new Ie(t=>{ES(n,t).catch(e=>t.error(e))})}function MS(n){return Gh(xl(n))}function ES(n,t){var e,i,r,s;return Bh(this,void 0,void 0,function*(){try{for(e=Uh(n);i=yield e.next(),!i.done;){let d=i.value;if(t.next(d),t.closed)return}}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function Yt(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ml(n,t=0){return Fe((e,i)=>{e.subscribe(Ve(i,r=>Yt(i,n,()=>i.next(r),t),()=>Yt(i,n,()=>i.complete(),t),r=>Yt(i,n,()=>i.error(r),t)))})}function El(n,t=0){return Fe((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function qh(n,t){return at(n).pipe(El(t),Ml(t))}function Hh(n,t){return at(n).pipe(El(t),Ml(t))}function zh(n,t){return new Ie(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function $h(n,t){return new Ie(e=>{let i;return Yt(e,t,()=>{i=n[bl](),Yt(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){e.error(d);return}s?e.complete():e.next(r)},0,!0)}),()=>ve(i?.return)&&i.return()})}function wl(n,t){if(!n)throw new Error("Iterable cannot be null");return new Ie(e=>{Yt(e,t,()=>{let i=n[Symbol.asyncIterator]();Yt(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Qh(n,t){return wl(xl(n),t)}function Kh(n,t){if(n!=null){if(_l(n))return qh(n,t);if(gl(n))return zh(n,t);if(hl(n))return Hh(n,t);if(vl(n))return wl(n,t);if(Cl(n))return $h(n,t);if(Sl(n))return Qh(n,t)}throw yl(n)}function Je(n,t){return t?Kh(n,t):at(n)}function me(...n){let t=Ti(n);return Je(n,t)}function da(n,t){let e=ve(n)?n:()=>n,i=r=>r.error(e());return new Ie(t?r=>t.schedule(i,0,r):i)}function Il(n){return!!n&&(n instanceof Ie||ve(n.lift)&&ve(n.subscribe))}var mr=Jr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Yh(n){return n instanceof Date&&!isNaN(n)}function Pe(n,t){return Fe((e,i)=>{let r=0;e.subscribe(Ve(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:wS}=Array;function IS(n,t){return wS(t)?n(...t):n(t)}function Pl(n){return Pe(t=>IS(n,t))}var{isArray:PS}=Array,{getPrototypeOf:DS,prototype:TS,keys:OS}=Object;function Dl(n){if(n.length===1){let t=n[0];if(PS(t))return{args:t,keys:null};if(kS(t)){let e=OS(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function kS(n){return n&&typeof n=="object"&&DS(n)===TS}function Tl(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function Ol(...n){let t=Ti(n),e=fl(n),{args:i,keys:r}=Dl(n);if(i.length===0)return Je([],t);let s=new Ie(NS(i,t,r?d=>Tl(r,d):kn));return e?s.pipe(Pl(e)):s}function NS(n,t,e=kn){return i=>{Zh(t,()=>{let{length:r}=n,s=new Array(r),d=r,u=r;for(let m=0;m<r;m++)Zh(t,()=>{let b=Je(n[m],t),C=!1;b.subscribe(Ve(i,w=>{s[m]=w,C||(C=!0,u--),u||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}function Zh(n,t,e){n?Yt(e,n,t):t()}function Jh(n,t,e,i,r,s,d,u){let m=[],b=0,C=0,w=!1,O=()=>{w&&!m.length&&!b&&t.complete()},P=W=>b<i?k(W):m.push(W),k=W=>{s&&t.next(W),b++;let z=!1;at(e(W,C++)).subscribe(Ve(t,$=>{r?.($),s?P($):t.next($)},()=>{z=!0},void 0,()=>{if(z)try{for(b--;m.length&&b<i;){let $=m.shift();d?Yt(t,d,()=>k($)):k($)}O()}catch($){t.error($)}}))};return n.subscribe(Ve(t,P,()=>{w=!0,O()})),()=>{u?.()}}function yt(n,t,e=1/0){return ve(t)?yt((i,r)=>Pe((s,d)=>t(i,s,r,d))(at(n(i,r))),e):(typeof t=="number"&&(e=t),Fe((i,r)=>Jh(i,r,n,e)))}function ro(n=1/0){return yt(kn,n)}function Xh(){return ro(1)}function oo(...n){return Xh()(Je(n,Ti(n)))}function ua(n){return new Ie(t=>{at(n()).subscribe(t)})}function fr(...n){let t=fl(n),{args:e,keys:i}=Dl(n),r=new Ie(s=>{let{length:d}=e;if(!d){s.complete();return}let u=new Array(d),m=d,b=d;for(let C=0;C<d;C++){let w=!1;at(e[C]).subscribe(Ve(s,O=>{w||(w=!0,b--),u[C]=O},()=>m--,void 0,()=>{(!m||!w)&&(b||s.next(i?Tl(i,u):u),s.complete())}))}});return t?r.pipe(Pl(t)):r}function e_(n=0,t,e=Vh){let i=-1;return t!=null&&(ml(t)?e=t:i=t),new Ie(r=>{let s=Yh(n)?+n-e.now():n;s<0&&(s=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function am(n=0,t=om){return n<0&&(n=0),e_(n,n,t)}function Zt(n,t){return Fe((e,i)=>{let r=0;e.subscribe(Ve(i,s=>n.call(t,s,r++)&&i.next(s)))})}function ln(n){return Fe((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Ve(e,void 0,void 0,d=>{s=at(n(d,ln(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Oi(n,t){return ve(t)?yt(n,t,1):yt(n,1)}function sm(n){return Fe((t,e)=>{let i=!1;t.subscribe(Ve(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function fi(n){return n<=0?()=>Kt:Fe((t,e)=>{let i=0;t.subscribe(Ve(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function t_(n=RS){return Fe((t,e)=>{let i=!1;t.subscribe(Ve(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function RS(){return new mr}function ao(n){return Fe((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function gi(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Zt((r,s)=>n(r,s,i)):kn,fi(1),e?sm(t):t_(()=>new mr))}function kl(n){return n<=0?()=>Kt:Fe((t,e)=>{let i=[];t.subscribe(Ve(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function pa(...n){let t=Ti(n);return Fe((e,i)=>{(t?oo(n,e,t):oo(n,e)).subscribe(i)})}function Wt(n,t){return Fe((e,i)=>{let r=null,s=0,d=!1,u=()=>d&&!r&&i.complete();e.subscribe(Ve(i,m=>{r?.unsubscribe();let b=0,C=s++;at(n(m,C)).subscribe(r=Ve(i,w=>i.next(t?t(m,w,C,b++):w),()=>{r=null,u()}))},()=>{d=!0,u()}))})}function ma(n){return Fe((t,e)=>{at(n).subscribe(Ve(e,()=>e.complete(),la)),!e.closed&&t.subscribe(e)})}function Qe(n,t,e){let i=ve(n)||t||e?{next:n,error:t,complete:e}:n;return i?Fe((r,s)=>{var d;(d=i.subscribe)===null||d===void 0||d.call(i);let u=!0;r.subscribe(Ve(s,m=>{var b;(b=i.next)===null||b===void 0||b.call(i,m),s.next(m)},()=>{var m;u=!1,(m=i.complete)===null||m===void 0||m.call(i),s.complete()},m=>{var b;u=!1,(b=i.error)===null||b===void 0||b.call(i,m),s.error(m)},()=>{var m,b;u&&((m=i.unsubscribe)===null||m===void 0||m.call(i)),(b=i.finalize)===null||b===void 0||b.call(i)}))}):kn}var lm;function Nl(){return lm}function Yn(n){let t=lm;return lm=n,t}var n_=Symbol("NotFound");function so(n){return n===n_||n?.name==="\u0275NotFound"}var Ll="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(t,e){super(vi(t,e)),this.code=t}};function VS(n){return`NG0${Math.abs(n)}`}function vi(n,t){return`${VS(n)}${t?": "+t:""}`}var xt=globalThis;function Le(n){for(let t in n)if(n[t]===Le)return t;throw Error("")}function s_(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function _i(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(_i).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function jl(n,t){return n?t?`${n} ${t}`:n:t||""}var LS=Le({__forward_ref__:Le});function qt(n){return n.__forward_ref__=qt,n.toString=function(){return _i(this())},n}function bt(n){return Sm(n)?n():n}function Sm(n){return typeof n=="function"&&n.hasOwnProperty(LS)&&n.__forward_ref__===qt}function R(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ya(n){return jS(n,Bl)}function Mm(n){return ya(n)!==null}function jS(n,t){return n.hasOwnProperty(t)&&n[t]||null}function BS(n){let t=n?.[Bl]??null;return t||null}function dm(n){return n&&n.hasOwnProperty(Al)?n[Al]:null}var Bl=Le({\u0275prov:Le}),Al=Le({\u0275inj:Le}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=R({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Em(n){return n&&!!n.\u0275providers}var wm=Le({\u0275cmp:Le}),Im=Le({\u0275dir:Le}),Pm=Le({\u0275pipe:Le}),Dm=Le({\u0275mod:Le}),ga=Le({\u0275fac:Le}),yr=Le({__NG_ELEMENT_ID__:Le}),i_=Le({__NG_ENV_ID__:Le});function Tm(n){return n[Dm]||null}function yi(n){return n[wm]||null}function Om(n){return n[Im]||null}function l_(n){return n[Pm]||null}function Jn(n){return typeof n=="string"?n:n==null?"":String(n)}function c_(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Jn(n)}var d_=Le({ngErrorCode:Le}),WS=Le({ngErrorMessage:Le}),US=Le({ngTokenPath:Le});function km(n,t){return u_("",-200,t)}function Wl(n,t){throw new F(-201,!1)}function u_(n,t,e){let i=new F(t,n);return i[d_]=t,i[WS]=n,e&&(i[US]=e),i}function GS(n){return n[d_]}var um;function p_(){return um}function Ut(n){let t=um;return um=n,t}function Nm(n,t,e){let i=ya(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(t!==void 0)return t;Wl(n,"Injector")}var qS={},gr=qS,HS="__NG_DI_FLAG__",pm=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=hr(e)||0;try{return this.injector.get(t,i&8?null:gr,i)}catch(r){if(so(r))return r;throw r}}};function zS(n,t=0){let e=Nl();if(e===void 0)throw new F(-203,!1);if(e===null)return Nm(n,void 0,t);{let i=$S(t),r=e.retrieve(n,i);if(so(r)){if(i.optional)return null;throw r}return r}}function j(n,t=0){return(p_()||zS)(bt(n),t)}function V(n,t){return j(n,hr(t))}function hr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $S(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function mm(n){let t=[];for(let e=0;e<n.length;e++){let i=bt(n[e]);if(Array.isArray(i)){if(i.length===0)throw new F(900,!1);let r,s=0;for(let d=0;d<i.length;d++){let u=i[d],m=QS(u);typeof m=="number"?m===-1?r=u.token:s|=m:r=u}t.push(j(r,s))}else t.push(j(i))}return t}function QS(n){return n[HS]}function ki(n,t){let e=n.hasOwnProperty(ga);return e?n[ga]:null}function Ul(n,t){n.forEach(e=>Array.isArray(e)?Ul(e,t):t(e))}function Rm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ba(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function m_(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function Gl(n,t,e){let i=co(n,t);return i>=0?n[i|1]=e:(i=~i,m_(n,i,t,e)),i}function ql(n,t){let e=co(n,t);if(e>=0)return n[e|1]}function co(n,t){return KS(n,t,1)}function KS(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),d=n[s<<e];if(t===d)return s<<e;d>t?r=s:i=s+1}return~(r<<e)}var Ai={},Gt=[],uo=new X(""),Am=new X("",-1),Fm=new X(""),ha=class{get(t,e=gr){if(e===gr){let r=u_("",-201);throw r.name="\u0275NotFound",r}return e}};function br(n){return{\u0275providers:n}}function f_(...n){return{\u0275providers:Vm(!0,n),\u0275fromNgModule:!0}}function Vm(n,...t){let e=[],i=new Set,r,s=d=>{e.push(d)};return Ul(t,d=>{let u=d;Fl(u,s,[],i)&&(r||=[],r.push(u))}),r!==void 0&&g_(r,s),e}function g_(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Lm(r,s=>{t(s,i)})}}function Fl(n,t,e,i){if(n=bt(n),!n)return!1;let r=null,s=dm(n),d=!s&&yi(n);if(!s&&!d){let m=n.ngModule;if(s=dm(m),s)r=m;else return!1}else{if(d&&!d.standalone)return!1;r=n}let u=i.has(r);if(d){if(u)return!1;if(i.add(r),d.dependencies){let m=typeof d.dependencies=="function"?d.dependencies():d.dependencies;for(let b of m)Fl(b,t,e,i)}}else if(s){if(s.imports!=null&&!u){i.add(r);let b;try{Ul(s.imports,C=>{Fl(C,t,e,i)&&(b||=[],b.push(C))})}finally{}b!==void 0&&g_(b,t)}if(!u){let b=ki(r)||(()=>new r);t({provide:r,useFactory:b,deps:Gt},r),t({provide:Fm,useValue:r,multi:!0},r),t({provide:uo,useValue:()=>j(r),multi:!0},r)}let m=s.providers;if(m!=null&&!u){let b=n;Lm(m,C=>{t(C,b)})}}else return!1;return r!==n&&n.providers!==void 0}function Lm(n,t){for(let e of n)Em(e)&&(e=e.\u0275providers),Array.isArray(e)?Lm(e,t):t(e)}var YS=Le({provide:String,useValue:Le});function h_(n){return n!==null&&typeof n=="object"&&YS in n}function ZS(n){return!!(n&&n.useExisting)}function JS(n){return!!(n&&n.useFactory)}function _r(n){return typeof n=="function"}function __(n){return!!n.useClass}var Ca=new X(""),Rl={},r_={},cm;function xa(){return cm===void 0&&(cm=new ha),cm}var tt=class{},vr=class extends tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,gm(t,d=>this.processProvider(d)),this.records.set(Am,lo(void 0,this)),r.has("environment")&&this.records.set(tt,lo(void 0,this));let s=this.records.get(Ca);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Fm,Gt,{self:!0}))}retrieve(t,e){let i=hr(e)||0;try{return this.get(t,gr,i)}catch(r){if(so(r))return r;throw r}}destroy(){fa(this),this._destroyed=!0;let t=ye(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(t)}}onDestroy(t){return fa(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){fa(this);let e=Yn(this),i=Ut(void 0),r;try{return t()}finally{Yn(e),Ut(i)}}get(t,e=gr,i){if(fa(this),t.hasOwnProperty(i_))return t[i_](this);let r=hr(i),s,d=Yn(this),u=Ut(void 0);try{if(!(r&4)){let b=this.records.get(t);if(b===void 0){let C=iM(t)&&ya(t);C&&this.injectableDefInScope(C)?b=lo(fm(t),Rl):b=null,this.records.set(t,b)}if(b!=null)return this.hydrate(t,b,r)}let m=r&2?xa():this.parent;return e=r&8&&e===gr?null:e,m.get(t,e)}catch(m){let b=GS(m);throw b===-200||b===-201?new F(b,null):m}finally{Ut(u),Yn(d)}}resolveInjectorInitializers(){let t=ye(null),e=Yn(this),i=Ut(void 0),r;try{let s=this.get(uo,Gt,{self:!0});for(let d of s)d()}finally{Yn(e),Ut(i),ye(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(_i(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=bt(t);let e=_r(t)?t:bt(t&&t.provide),i=eM(t);if(!_r(t)&&t.multi===!0){let r=this.records.get(e);r||(r=lo(void 0,Rl,!0),r.factory=()=>mm(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=ye(null);try{if(e.value===r_)throw km(_i(t));return e.value===Rl&&(e.value=r_,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&nM(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ye(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=bt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function fm(n){let t=ya(n),e=t!==null?t.factory:ki(n);if(e!==null)return e;if(n instanceof X)throw new F(204,!1);if(n instanceof Function)return XS(n);throw new F(204,!1)}function XS(n){if(n.length>0)throw new F(204,!1);let e=BS(n);return e!==null?()=>e.factory(n):()=>new n}function eM(n){if(h_(n))return lo(void 0,n.useValue);{let t=jm(n);return lo(t,Rl)}}function jm(n,t,e){let i;if(_r(n)){let r=bt(n);return ki(r)||fm(r)}else if(h_(n))i=()=>bt(n.useValue);else if(JS(n))i=()=>n.useFactory(...mm(n.deps||[]));else if(ZS(n))i=(r,s)=>j(bt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=bt(n&&(n.useClass||n.provide));if(tM(n))i=()=>new r(...mm(n.deps));else return ki(r)||fm(r)}return i}function fa(n){if(n.destroyed)throw new F(205,!1)}function lo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function tM(n){return!!n.deps}function nM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function iM(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function gm(n,t){for(let e of n)Array.isArray(e)?gm(e,t):e&&Em(e)?gm(e.\u0275providers,t):t(e)}function gt(n,t){let e;n instanceof vr?(fa(n),e=n):e=new pm(n);let i,r=Yn(e),s=Ut(void 0);try{return t()}finally{Yn(r),Ut(s)}}function Bm(){return p_()!==void 0||Nl()!=null}var Nn=0,he=1,ge=2,Ct=3,gn=4,hn=5,Sa=6,po=7,Ot=8,Fi=9,Xn=10,Ke=11,mo=12,Wm=13,Cr=14,_n=15,xr=16,Sr=17,Mr=18,Ma=19,Um=20,hi=21,Hl=22,Ea=23,cn=24,Er=25,wa=26,St=27,v_=1;var Vi=7,Ia=8,Pa=9,Jt=10;function ei(n){return Array.isArray(n)&&typeof n[v_]=="object"}function Rn(n){return Array.isArray(n)&&n[v_]===!0}function Gm(n){return(n.flags&4)!==0}function Li(n){return n.componentOffset>-1}function fo(n){return(n.flags&1)===1}function ti(n){return!!n.template}function go(n){return(n[ge]&512)!==0}function wr(n){return(n[ge]&256)===256}var y_="svg",b_="math";function vn(n){for(;Array.isArray(n);)n=n[Nn];return n}function qm(n,t){return vn(t[n])}function An(n,t){return vn(t[n.index])}function zl(n,t){return n.data[t]}function Hm(n,t){return n[t]}function zm(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function yn(n,t){let e=t[n];return ei(e)?e:e[Nn]}function $l(n){return(n[ge]&128)===128}function C_(n){return Rn(n[Ct])}function Da(n,t){return t==null?null:n[t]}function $m(n){n[Sr]=0}function Qm(n){n[ge]&1024||(n[ge]|=1024,$l(n)&&ho(n))}function x_(n,t){for(;n>0;)t=t[Cr],n--;return t}function Ta(n){return!!(n[ge]&9216||n[cn]?.dirty)}function Ql(n){n[Xn].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),Ta(n)&&ho(n)}function ho(n){n[Xn].changeDetectionScheduler?.notify(0);let t=Ni(n);for(;t!==null&&!(t[ge]&8192||(t[ge]|=8192,!$l(t)));)t=Ni(t)}function Km(n,t){if(wr(n))throw new F(911,!1);n[hi]===null&&(n[hi]=[]),n[hi].push(t)}function S_(n,t){if(n[hi]===null)return;let e=n[hi].indexOf(t);e!==-1&&n[hi].splice(e,1)}function Ni(n){let t=n[Ct];return Rn(t)?t[Ct]:t}function M_(n){return n[po]??=[]}function E_(n){return n.cleanup??=[]}var Ee={lFrame:B_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hm=!1;function w_(){return Ee.lFrame.elementDepthCount}function I_(){Ee.lFrame.elementDepthCount++}function P_(){Ee.lFrame.elementDepthCount--}function Kl(){return Ee.bindingsEnabled}function D_(){return Ee.skipHydrationRootTNode!==null}function T_(n){return Ee.skipHydrationRootTNode===n}function O_(){Ee.skipHydrationRootTNode=null}function Te(){return Ee.lFrame.lView}function kt(){return Ee.lFrame.tView}function h(n){return Ee.lFrame.contextLView=n,n[Ot]}function _(n){return Ee.lFrame.contextLView=null,n}function Nt(){let n=Ym();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ym(){return Ee.lFrame.currentTNode}function k_(){let n=Ee.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function _o(n,t){let e=Ee.lFrame;e.currentTNode=n,e.isParent=t}function Zm(){return Ee.lFrame.isParent}function N_(){Ee.lFrame.isParent=!1}function Jm(){return hm}function Xm(n){let t=hm;return hm=n,t}function ef(){let n=Ee.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function tf(){return Ee.lFrame.bindingIndex}function R_(n){return Ee.lFrame.bindingIndex=n}function Oa(){return Ee.lFrame.bindingIndex++}function ka(n){let t=Ee.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function A_(){return Ee.lFrame.inI18n}function F_(n,t){let e=Ee.lFrame;e.bindingIndex=e.bindingRootIndex=n,Yl(t)}function V_(){return Ee.lFrame.currentDirectiveIndex}function Yl(n){Ee.lFrame.currentDirectiveIndex=n}function L_(n){let t=Ee.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function nf(n){Ee.lFrame.currentQueryIndex=n}function rM(n){let t=n[he];return t.type===2?t.declTNode:t.type===1?n[hn]:null}function rf(n,t,e){if(e&4){let r=t,s=n;for(;r=r.parent,r===null&&!(e&1);)if(r=rM(s),r===null||(s=s[Cr],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=Ee.lFrame=j_();return i.currentTNode=t,i.lView=n,!0}function Zl(n){let t=j_(),e=n[he];Ee.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function j_(){let n=Ee.lFrame,t=n===null?null:n.child;return t===null?B_(n):t}function B_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function W_(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var of=W_;function Jl(){let n=W_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function U_(n){return(Ee.lFrame.contextLView=x_(n,Ee.lFrame.contextLView))[Ot]}function ni(){return Ee.lFrame.selectedIndex}function ji(n){Ee.lFrame.selectedIndex=n}function Xl(){let n=Ee.lFrame;return zl(n.tView,n.selectedIndex)}function G_(){return Ee.lFrame.currentNamespace}var q_=!0;function ec(){return q_}function Na(n){q_=n}function _m(n,t=null,e=null,i){let r=af(n,t,e,i);return r.resolveInjectorInitializers(),r}function af(n,t=null,e=null,i,r=new Set){let s=[e||Gt,f_(n)];return i=i||(typeof n=="object"?void 0:_i(n)),new vr(s,t||xa(),i||null,r)}var Tt=class n{static THROW_IF_NOT_FOUND=gr;static NULL=new ha;static create(t,e){if(Array.isArray(t))return _m({name:""},e,t,"");{let i=t.name??"";return _m({name:i},t.parent,t.providers,i)}}static \u0275prov=R({token:n,providedIn:"any",factory:()=>j(Am)});static __NG_ELEMENT_ID__=-1},$e=new X(""),bn=(()=>{class n{static __NG_ELEMENT_ID__=oM;static __NG_ENV_ID__=e=>e}return n})(),vm=class extends bn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return wr(this._lView)}onDestroy(t){let e=this._lView;return Km(e,t),()=>S_(e,t)}};function oM(){return new vm(Te())}var H_=!1,bi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new He(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),ym=class extends dt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Bm()&&(this.destroyRef=V(bn,{optional:!0})??void 0,this.pendingTasks=V(bi,{optional:!0})??void 0)}emit(t){let e=ye(null);try{super.next(t)}finally{ye(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),d=i;if(t&&typeof t=="object"){let m=t;r=m.next?.bind(m),s=m.error?.bind(m),d=m.complete?.bind(m)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),d&&(d=this.wrapInTimeout(d)));let u=super.subscribe({next:r,error:s,complete:d});return t instanceof ct&&t.add(u),u}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},et=ym;function Vl(...n){}function sf(n){let t,e;function i(){n=Vl;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function lf(n){return queueMicrotask(()=>n()),()=>{n=Vl}}var cf="isAngularZone",_a=cf+"_ID",aM=0,st=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new et(!1);onMicrotaskEmpty=new et(!1);onStable=new et(!1);onError=new et(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=H_}=t;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!r&&i,d.shouldCoalesceRunChangeDetection=r,d.callbackScheduled=!1,d.scheduleInRootZone=s,cM(d)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new F(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,t,sM,Vl,Vl);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},sM={};function df(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){sf(()=>{n.callbackScheduled=!1,bm(n),n.isCheckStableRunning=!0,df(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),bm(n)}function cM(n){let t=()=>{lM(n)},e=aM++;n._inner=n._inner.fork({name:"angular",properties:{[cf]:!0,[_a]:e,[_a+e]:!0},onInvokeTask:(i,r,s,d,u,m)=>{if(dM(m))return i.invokeTask(s,d,u,m);try{return o_(n),i.invokeTask(s,d,u,m)}finally{(n.shouldCoalesceEventChangeDetection&&d.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),a_(n)}},onInvoke:(i,r,s,d,u,m,b)=>{try{return o_(n),i.invoke(s,d,u,m,b)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uM(m)&&t(),a_(n)}},onHasTask:(i,r,s,d)=>{i.hasTask(s,d),r===s&&(d.change=="microTask"?(n._hasPendingMicrotasks=d.microTask,bm(n),df(n)):d.change=="macroTask"&&(n.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,r,s,d)=>(i.handleError(s,d),n.runOutsideAngular(()=>n.onError.emit(d)),!1)})}function bm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function o_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function a_(n){n._nesting--,df(n)}var va=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new et;onMicrotaskEmpty=new et;onStable=new et;onError=new et;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function dM(n){return z_(n,"__ignore_ng_zone__")}function uM(n){return z_(n,"__scheduler_tick__")}function z_(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Zn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Cn=new X("",{factory:()=>{let n=V(st),t=V(tt),e;return i=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw i}):(e??=t.get(Zn),e.handleError(i))})}}}),$_={provide:uo,useValue:()=>{let n=V(Zn,{optional:!0})},multi:!0};function xn(n,t){let[e,i,r]=Qp(n,t?.equal),s=e,d=s[Bt];return s.set=i,s.update=r,s.asReadonly=Q_.bind(s),s}function Q_(){let n=this[Bt];if(n.readonlyFn===void 0){let t=()=>this();t[Bt]=n,n.readonlyFn=t}return n.readonlyFn}var tc=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=pM}return n})();function pM(){return new tc(Te(),Nt())}var Ri=class{},Ra=new X("",{factory:()=>!0});var uf=new X(""),Aa=(()=>{class n{internalPendingTasks=V(bi);scheduler=V(Ri);errorHandler=V(Cn);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),pf=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>new Cm})}return n})(),Cm=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,i]of this.queues)e===null?t||=this.flushQueue(i):t||=e.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}},xm=class{[Bt];constructor(t){this[Bt]=t}destroy(){this[Bt].destroy()}};function ut(n){return Kp(n)}function qa(n){return{toString:n}.toString()}function Mv(n){let t=xt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function bM(n){return typeof n=="function"}function Ev(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var lc=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}},xi=(()=>{let n=()=>wv;return n.ngInherit=!0,n})();function wv(n){return n.type.prototype.ngOnChanges&&(n.setInput=xM),CM}function CM(){let n=Pv(this),t=n?.current;if(t){let e=n.previous;if(e===Ai)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function xM(n,t,e,i,r){let s=this.declaredInputs[i],d=Pv(n)||SM(n,{previous:Ai,current:null}),u=d.current||(d.current={}),m=d.previous,b=m[s];u[s]=new lc(b&&b.currentValue,e,m===Ai),Ev(n,t,r,e)}var Iv="__ngSimpleChanges__";function Pv(n){return n[Iv]||null}function SM(n,t){return n[Iv]=t}var K_=[];var Be=function(n,t=null,e){for(let i=0;i<K_.length;i++){let r=K_[i];r(n,t,e)}},Re=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Re||{});function MM(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let d=wv(t);(e.preOrderHooks??=[]).push(n,d),(e.preOrderCheckHooks??=[]).push(n,d)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function Dv(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:u,ngAfterViewInit:m,ngAfterViewChecked:b,ngOnDestroy:C}=s;d&&(n.contentHooks??=[]).push(-e,d),u&&((n.contentHooks??=[]).push(e,u),(n.contentCheckHooks??=[]).push(e,u)),m&&(n.viewHooks??=[]).push(-e,m),b&&((n.viewHooks??=[]).push(e,b),(n.viewCheckHooks??=[]).push(e,b)),C!=null&&(n.destroyHooks??=[]).push(e,C)}}function oc(n,t,e){Tv(n,t,3,e)}function ac(n,t,e,i){(n[ge]&3)===e&&Tv(n,t,e,i)}function mf(n,t){let e=n[ge];(e&3)===t&&(e&=16383,e+=1,n[ge]=e)}function Tv(n,t,e,i){let r=i!==void 0?n[Sr]&65535:0,s=i??-1,d=t.length-1,u=0;for(let m=r;m<d;m++)if(typeof t[m+1]=="number"){if(u=t[m],i!=null&&u>=i)break}else t[m]<0&&(n[Sr]+=65536),(u<s||s==-1)&&(EM(n,e,t,m),n[Sr]=(n[Sr]&4294901760)+m+2),m++}function Y_(n,t){Be(Re.LifecycleHookStart,n,t);let e=ye(null);try{t.call(n)}finally{ye(e),Be(Re.LifecycleHookEnd,n,t)}}function EM(n,t,e,i){let r=e[i]<0,s=e[i+1],d=r?-e[i]:e[i],u=n[d];r?n[ge]>>14<n[Sr]>>16&&(n[ge]&3)===t&&(n[ge]+=16384,Y_(u,s)):Y_(u,s)}var yo=-1,Pr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function wM(n){return(n.flags&8)!==0}function IM(n){return(n.flags&16)!==0}function PM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],d=e[i++],u=e[i++];n.setAttribute(t,d,u,s)}else{let s=r,d=e[++i];DM(s)?n.setProperty(t,s,d):n.setAttribute(t,s,d),i++}}return i}function Ov(n){return n===3||n===4||n===6}function DM(n){return n.charCodeAt(0)===64}function ja(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?Z_(n,e,r,null,t[++i]):Z_(n,e,r,null,null))}}return n}function Z_(n,t,e,i,r){let s=0,d=n.length;if(t===-1)d=-1;else for(;s<n.length;){let u=n[s++];if(typeof u=="number"){if(u===t){d=-1;break}else if(u>t){d=s-1;break}}}for(;s<n.length;){let u=n[s];if(typeof u=="number")break;if(u===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}d!==-1&&(n.splice(d,0,t),s=d+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function kv(n){return n!==yo}function cc(n){return n&32767}function TM(n){return n>>16}function dc(n,t){let e=TM(n),i=t;for(;e>0;)i=i[Cr],e--;return i}var Mf=!0;function uc(n){let t=Mf;return Mf=n,t}var OM=256,Nv=OM-1,Rv=5,kM=0,ii={};function NM(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(yr)&&(i=e[yr]),i==null&&(i=e[yr]=kM++);let r=i&Nv,s=1<<r;t.data[n+(r>>Rv)]|=s}function pc(n,t){let e=Av(n,t);if(e!==-1)return e;let i=t[he];i.firstCreatePass&&(n.injectorIndex=t.length,ff(i.data,n),ff(t,null),ff(i.blueprint,null));let r=Wf(n,t),s=n.injectorIndex;if(kv(r)){let d=cc(r),u=dc(r,t),m=u[he].data;for(let b=0;b<8;b++)t[s+b]=u[d+b]|m[d+b]}return t[s+8]=r,s}function ff(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Av(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Wf(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=Bv(r),i===null)return yo;if(e++,r=r[Cr],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return yo}function Ef(n,t,e){NM(n,t,e)}function RM(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let s=e[r];if(Ov(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(s===t)return e[r+1];r=r+2}}}return null}function Fv(n,t,e){if(e&8||n!==void 0)return n;Wl(t,"NodeInjector")}function Vv(n,t,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=n[Fi],s=Ut(void 0);try{return r?r.get(t,i,e&8):Nm(t,i,e&8)}finally{Ut(s)}}return Fv(i,t,e)}function Lv(n,t,e,i=0,r){if(n!==null){if(t[ge]&2048&&!(i&2)){let d=jM(n,t,e,i,ii);if(d!==ii)return d}let s=jv(n,t,e,i,ii);if(s!==ii)return s}return Vv(t,e,i,r)}function jv(n,t,e,i,r){let s=VM(e);if(typeof s=="function"){if(!rf(t,n,i))return i&1?Fv(r,e,i):Vv(t,e,i,r);try{let d;if(d=s(i),d==null&&!(i&8))Wl(e);else return d}finally{of()}}else if(typeof s=="number"){let d=null,u=Av(n,t),m=yo,b=i&1?t[_n][hn]:null;for((u===-1||i&4)&&(m=u===-1?Wf(n,t):t[u+8],m===yo||!X_(i,!1)?u=-1:(d=t[he],u=cc(m),t=dc(m,t)));u!==-1;){let C=t[he];if(J_(s,u,C.data)){let w=AM(u,t,e,d,i,b);if(w!==ii)return w}m=t[u+8],m!==yo&&X_(i,t[he].data[u+8]===b)&&J_(s,u,t)?(d=C,u=cc(m),t=dc(m,t)):u=-1}}return r}function AM(n,t,e,i,r,s){let d=t[he],u=d.data[n+8],m=i==null?Li(u)&&Mf:i!=d&&(u.type&3)!==0,b=r&1&&s===u,C=FM(u,d,e,m,b);return C!==null?mc(t,d,C,u,r):ii}function FM(n,t,e,i,r){let s=n.providerIndexes,d=t.data,u=s&1048575,m=n.directiveStart,b=n.directiveEnd,C=s>>20,w=i?u:u+C,O=r?u+C:b;for(let P=w;P<O;P++){let k=d[P];if(P<m&&e===k||P>=m&&k.type===e)return P}if(r){let P=d[m];if(P&&ti(P)&&P.type===e)return m}return null}function mc(n,t,e,i,r){let s=n[e],d=t.data;if(s instanceof Pr){let u=s;if(u.resolving){let P=c_(d[e]);throw km(P)}let m=uc(u.canSeeViewProviders);u.resolving=!0;let b=d[e].type||d[e],C,w=u.injectImpl?Ut(u.injectImpl):null,O=rf(n,i,0);try{s=n[e]=u.factory(void 0,r,d,n,i),t.firstCreatePass&&e>=i.directiveStart&&MM(e,d[e],t)}finally{w!==null&&Ut(w),uc(m),u.resolving=!1,of()}}return s}function VM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(yr)?n[yr]:void 0;return typeof t=="number"?t>=0?t&Nv:LM:t}function J_(n,t,e){let i=1<<n;return!!(e[t+(n>>Rv)]&i)}function X_(n,t){return!(n&2)&&!(n&1&&t)}var Ir=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Lv(this._tNode,this._lView,t,hr(i),e)}};function LM(){return new Ir(Nt(),Te())}function Xt(n){return qa(()=>{let t=n.prototype.constructor,e=t[ga]||wf(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[ga]||wf(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function wf(n){return Sm(n)?()=>{let t=wf(bt(n));return t&&t()}:ki(n)}function jM(n,t,e,i,r){let s=n,d=t;for(;s!==null&&d!==null&&d[ge]&2048&&!go(d);){let u=jv(s,d,e,i|2,ii);if(u!==ii)return u;let m=s.parent;if(!m){let b=d[Um];if(b){let C=b.get(e,ii,i);if(C!==ii)return C}m=Bv(d),d=d[Cr]}s=m}return r}function Bv(n){let t=n[he],e=t.type;return e===2?t.declTNode:e===1?n[hn]:null}function Ha(n){return RM(Nt(),n)}function BM(){return xc(Nt(),Te())}function xc(n,t){return new Sn(An(n,t))}var Sn=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=BM}return n})();function Wv(n){return(n.flags&128)===128}var Uf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Uf||{}),Uv=new Map,WM=0;function UM(){return WM++}function GM(n){Uv.set(n[Ma],n)}function If(n){Uv.delete(n[Ma])}var ev="__ngContext__";function bo(n,t){ei(t)?(n[ev]=t[Ma],GM(t)):n[ev]=t}function Gv(n){return Hv(n[mo])}function qv(n){return Hv(n[gn])}function Hv(n){for(;n!==null&&!Rn(n);)n=n[gn];return n}var qM;function Gf(n){qM=n}var Sc=new X("",{factory:()=>HM}),HM="ng";var Mc=new X(""),za=new X("",{providedIn:"platform",factory:()=>"unknown"}),Ec=new X(""),wc=new X("",{factory:()=>V($e).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var zv=!1,$v=new X("",{factory:()=>zv});var qf=new X("");var zM=(n,t,e,i)=>{};function $M(n,t,e,i){zM(n,t,e,i)}function Hf(n){return(n.flags&32)===32}var QM=()=>null;function Qv(n,t,e=!1){return QM(n,t,e)}function Kv(n,t){let e=n.contentQueries;if(e!==null){let i=ye(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],d=e[r+1];if(d!==-1){let u=n.data[d];nf(s),u.contentQueries(2,t[d],d)}}}finally{ye(i)}}}function Pf(n,t,e){nf(0);let i=ye(null);try{t(n,e)}finally{ye(i)}}function zf(n,t,e){if(Gm(t)){let i=ye(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let d=r;d<s;d++){let u=n.data[d];if(u.contentQueries){let m=e[d];u.contentQueries(1,m,d)}}}finally{ye(i)}}}var Ln=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Ln||{});var nc;function KM(){if(nc===void 0&&(nc=null,xt.trustedTypes))try{nc=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nc}function tv(n){return KM()?.createScriptURL(n)||n}var fc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ll})`}};function So(n){return n instanceof fc?n.changingThisBreaksApplicationSecurity:n}function $f(n,t){let e=Yv(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Ll})`)}return e===t}function Yv(n){return n instanceof fc&&n.getTypeName()||null}var YM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zv(n){return n=String(n),n.match(YM)?n:"unsafe:"+n}var ZM=/^>|^->|<!--|-->|--!>|<!-$/g,JM=/(<|>)/g,XM="\u200B$1\u200B";function eE(n){return n.replace(ZM,t=>t.replace(JM,XM))}function tE(n,t){return n.createText(t)}function nE(n,t,e){n.setValue(t,e)}function iE(n,t){return n.createComment(eE(t))}function Jv(n,t,e){return n.createElement(t,e)}function gc(n,t,e,i,r){n.insertBefore(t,e,i,r)}function Xv(n,t,e){n.appendChild(t,e)}function nv(n,t,e,i,r){i!==null?gc(n,t,e,i,r):Xv(n,t,e)}function rE(n,t,e,i){n.removeChild(null,t,e,i)}function oE(n,t,e){n.setAttribute(t,"style",e)}function aE(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function ey(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&PM(n,t,i),r!==null&&aE(n,t,r),s!==null&&oE(n,t,s)}var Ic=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ic||{});function ty(n){let t=iy();return t?t.sanitize(Ic.URL,n)||"":$f(n,"URL")?So(n):Zv(Jn(n))}function ny(n){let t=iy();if(t)return tv(t.sanitize(Ic.RESOURCE_URL,n)||"");if($f(n,"ResourceURL"))return tv(So(n));throw new F(904,!1)}function sE(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?ny:ty}function Qf(n,t,e){return sE(t,e)(n)}function iy(){let n=Te();return n&&n[Xn].sanitizer}function Kf(n){return n.ownerDocument.defaultView}function ry(n){return n instanceof Function?n():n}function lE(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var oy="ng-template";function cE(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&lE(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Yf(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function Yf(n){return n.type===4&&n.value!==oy}function dE(n,t,e){let i=n.type===4&&!e?oy:n.value;return t===i}function uE(n,t,e){let i=4,r=n.attrs,s=r!==null?fE(r):0,d=!1;for(let u=0;u<t.length;u++){let m=t[u];if(typeof m=="number"){if(!d&&!Fn(i)&&!Fn(m))return!1;if(d&&Fn(m))continue;d=!1,i=m|i&1;continue}if(!d)if(i&4){if(i=2|i&1,m!==""&&!dE(n,m,e)||m===""&&t.length===1){if(Fn(i))return!1;d=!0}}else if(i&8){if(r===null||!cE(n,r,m,e)){if(Fn(i))return!1;d=!0}}else{let b=t[++u],C=pE(m,r,Yf(n),e);if(C===-1){if(Fn(i))return!1;d=!0;continue}if(b!==""){let w;if(C>s?w="":w=r[C+1].toLowerCase(),i&2&&b!==w){if(Fn(i))return!1;d=!0}}}}return Fn(i)||d}function Fn(n){return(n&1)===0}function pE(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let d=t[r];if(d===n)return r;if(d===3||d===6)s=!0;else if(d===1||d===2){let u=t[++r];for(;typeof u=="string";)u=t[++r];continue}else{if(d===4)break;if(d===0){r+=4;continue}}r+=s?1:2}return-1}else return gE(t,n)}function mE(n,t,e=!1){for(let i=0;i<t.length;i++)if(uE(n,t[i],e))return!0;return!1}function fE(n){for(let t=0;t<n.length;t++){let e=n[t];if(Ov(e))return t}return n.length}function gE(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function iv(n,t){return n?":not("+t.trim()+")":t}function hE(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let d=n[e];if(typeof d=="string")if(i&2){let u=n[++e];r+="["+d+(u.length>0?'="'+u+'"':"")+"]"}else i&8?r+="."+d:i&4&&(r+=" "+d);else r!==""&&!Fn(d)&&(t+=iv(s,r),r=""),i=d,s=s||!Fn(i);e++}return r!==""&&(t+=iv(s,r)),t}function _E(n){return n.map(hE).join(",")}function vE(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!Fn(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var Ht={};function Zf(n,t,e,i,r,s,d,u,m,b,C){let w=St+i,O=w+r,P=yE(w,O),k=typeof b=="function"?b():b;return P[he]={type:n,blueprint:P,template:e,queries:null,viewQuery:u,declTNode:t,data:P.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof d=="function"?d():d,firstChild:null,schemas:m,consts:k,incompleteFirstPass:!1,ssrId:C}}function yE(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ht);return e}function bE(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Zf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Jf(n,t,e,i,r,s,d,u,m,b,C){let w=t.blueprint.slice();return w[Nn]=r,w[ge]=i|4|128|8|64|1024,(b!==null||n&&n[ge]&2048)&&(w[ge]|=2048),$m(w),w[Ct]=w[Cr]=n,w[Ot]=e,w[Xn]=d||n&&n[Xn],w[Ke]=u||n&&n[Ke],w[Fi]=m||n&&n[Fi]||null,w[hn]=s,w[Ma]=UM(),w[Sa]=C,w[Um]=b,w[_n]=t.type==2?n[_n]:w,w}function CE(n,t,e){let i=An(t,n),r=bE(e),s=n[Xn].rendererFactory,d=Xf(n,Jf(n,r,null,ay(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=d}function ay(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function sy(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Xf(n,t){return n[mo]?n[Wm][gn]=t:n[mo]=t,n[Wm]=t,t}function c(n=1){ly(kt(),Te(),ni()+n,!1)}function ly(n,t,e,i){if(!i)if((t[ge]&3)===3){let s=n.preOrderCheckHooks;s!==null&&oc(t,s,e)}else{let s=n.preOrderHooks;s!==null&&ac(t,s,0,e)}ji(e)}var Pc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Pc||{});function Df(n,t,e,i){let r=ye(null);try{let[s,d,u]=n.inputs[e],m=null;(d&Pc.SignalBased)!==0&&(m=t[s][Bt]),m!==null&&m.transformFn!==void 0?i=m.transformFn(i):u!==null&&(i=u.call(t,i)),n.setInput!==null?n.setInput(t,m,i,e,s):Ev(t,m,s,i)}finally{ye(r)}}var ri=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ri||{}),xE;function e0(n,t){return xE(n,t)}var Co=new Set,Dc=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Dc||{}),Si=new X(""),rv=new Set;function kr(n){rv.has(n)||(rv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var t0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),cy=[0,1,2,3],dy=(()=>{class n{ngZone=V(st);scheduler=V(Ri);errorHandler=V(Zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){V(Si,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Be(Re.AfterRenderHooksStart),this.executing=!0;for(let i of cy)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Be(Re.AfterRenderHooksEnd)}register(e){let{view:i}=e;i!==void 0?((i[Er]??=[]).push(e),ho(i),i[ge]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Dc.AFTER_NEXT_RENDER,e):e()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),hc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,d=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=d,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Er];t&&(this.view[Er]=t.filter(e=>e!==this))}};function $a(n,t){let e=t?.injector??V(Tt);return kr("NgAfterNextRender"),ME(n,e,t,!0)}function SE(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function ME(n,t,e,i){let r=t.get(t0);r.impl??=t.get(dy);let s=t.get(Si,null,{optional:!0}),d=e?.manualCleanup!==!0?t.get(bn):null,u=t.get(tc,null,{optional:!0}),m=new hc(r.impl,SE(n),u?.view,i,d,s?.snapshot(null));return r.impl.register(m),m}var EE=new X("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:V(tt)})});function uy(n,t,e){let i=n.get(EE);if(Array.isArray(t))for(let r of t)i.queue.add(r),e?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(n)}function wE(n,t){for(let[e,i]of t)uy(n,i.animateFns)}function ov(n,t,e,i){let r=n?.[wa]?.enter;t!==null&&r&&r.has(e.index)&&wE(i,r)}function vo(n,t,e,i,r,s,d,u){if(r!=null){let m,b=!1;Rn(r)?m=r:ei(r)&&(b=!0,r=r[Nn]);let C=vn(r);n===0&&i!==null?(ov(u,i,s,e),d==null?Xv(t,i,C):gc(t,i,C,d||null,!0)):n===1&&i!==null?(ov(u,i,s,e),gc(t,i,C,d||null,!0)):n===2?av(u,s,e,w=>{rE(t,C,b,w)}):n===3&&av(u,s,e,()=>{t.destroyNode(C)}),m!=null&&jE(t,n,e,m,s,i,d)}}function IE(n,t){py(n,t),t[Nn]=null,t[hn]=null}function PE(n,t,e,i,r,s){i[Nn]=r,i[hn]=t,Tc(n,i,e,1,r,s)}function py(n,t){t[Xn].changeDetectionScheduler?.notify(9),Tc(n,t,t[Ke],2,null,null)}function DE(n){let t=n[mo];if(!t)return gf(n[he],n);for(;t;){let e=null;if(ei(t))e=t[mo];else{let i=t[Jt];i&&(e=i)}if(!e){for(;t&&!t[gn]&&t!==n;)ei(t)&&gf(t[he],t),t=t[Ct];t===null&&(t=n),ei(t)&&gf(t[he],t),e=t&&t[gn]}t=e}}function n0(n,t){let e=n[Pa],i=e.indexOf(t);e.splice(i,1)}function my(n,t){if(wr(t))return;let e=t[Ke];e.destroyNode&&Tc(n,t,e,3,null,null),DE(t)}function gf(n,t){if(wr(t))return;let e=ye(null);try{t[ge]&=-129,t[ge]|=256,t[cn]&&aa(t[cn]),kE(n,t),OE(n,t),t[he].type===1&&t[Ke].destroy();let i=t[xr];if(i!==null&&Rn(t[Ct])){i!==t[Ct]&&n0(i,t);let r=t[Mr];r!==null&&r.detachView(n)}If(t)}finally{ye(e)}}function av(n,t,e,i){let r=n?.[wa];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);n&&Co.add(n),uy(e,()=>{if(r.leave&&r.leave.has(t.index)){let d=r.leave.get(t.index),u=[];if(d){for(let m=0;m<d.animateFns.length;m++){let b=d.animateFns[m],{promise:C}=b();u.push(C)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(u),TE(n,i)}else n&&Co.delete(n),i(!1)},r)}function TE(n,t){let e=n[wa]?.running;if(e){e.then(()=>{n[wa].running=void 0,Co.delete(n),t(!0)});return}t(!1)}function OE(n,t){let e=n.cleanup,i=t[po];if(e!==null)for(let d=0;d<e.length-1;d+=2)if(typeof e[d]=="string"){let u=e[d+3];u>=0?i[u]():i[-u].unsubscribe(),d+=2}else{let u=i[e[d+1]];e[d].call(u)}i!==null&&(t[po]=null);let r=t[hi];if(r!==null){t[hi]=null;for(let d=0;d<r.length;d++){let u=r[d];u()}}let s=t[Ea];if(s!==null){t[Ea]=null;for(let d of s)d.destroy()}}function kE(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof Pr)){let s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){let u=r[s[d]],m=s[d+1];Be(Re.LifecycleHookStart,u,m);try{m.call(u)}finally{Be(Re.LifecycleHookEnd,u,m)}}else{Be(Re.LifecycleHookStart,r,s);try{s.call(r)}finally{Be(Re.LifecycleHookEnd,r,s)}}}}}function NE(n,t,e){return RE(n,t.parent,e)}function RE(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Nn];if(Li(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Ln.None||r===Ln.Emulated)return null}return An(i,e)}function AE(n,t,e){return VE(n,t,e)}function FE(n,t,e){return n.type&40?An(n,e):null}var VE=FE,sv;function i0(n,t,e,i){let r=NE(n,i,t),s=t[Ke],d=i.parent||t[hn],u=AE(d,i,t);if(r!=null)if(Array.isArray(e))for(let m=0;m<e.length;m++)nv(s,r,e[m],u,!1);else nv(s,r,e,u,!1);sv!==void 0&&sv(s,i,t,e,r)}function Va(n,t){if(t!==null){let e=t.type;if(e&3)return An(t,n);if(e&4)return Tf(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Va(n,i);{let r=n[t.index];return Rn(r)?Tf(-1,r):vn(r)}}else{if(e&128)return Va(n,t.next);if(e&32)return e0(t,n)()||vn(n[t.index]);{let i=fy(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Ni(n[_n]);return Va(r,i)}else return Va(n,t.next)}}}return null}function fy(n,t){if(t!==null){let i=n[_n][hn],r=t.projection;return i.projection[r]}return null}function Tf(n,t){let e=Jt+n+1;if(e<t.length){let i=t[e],r=i[he].firstChild;if(r!==null)return Va(i,r)}return t[Vi]}function r0(n,t,e,i,r,s,d){for(;e!=null;){let u=i[Fi];if(e.type===128){e=e.next;continue}let m=i[e.index],b=e.type;if(d&&t===0&&(m&&bo(vn(m),i),e.flags|=2),!Hf(e))if(b&8)r0(n,t,e.child,i,r,s,!1),vo(t,n,u,r,m,e,s,i);else if(b&32){let C=e0(e,i),w;for(;w=C();)vo(t,n,u,r,w,e,s,i);vo(t,n,u,r,m,e,s,i)}else b&16?LE(n,t,i,e,r,s):vo(t,n,u,r,m,e,s,i);e=d?e.projectionNext:e.next}}function Tc(n,t,e,i,r,s){r0(e,i,n.firstChild,t,r,s,!1)}function LE(n,t,e,i,r,s){let d=e[_n],m=d[hn].projection[i.projection];if(Array.isArray(m))for(let b=0;b<m.length;b++){let C=m[b];vo(t,n,e[Fi],r,C,i,s,e)}else{let b=m,C=d[Ct];Wv(i)&&(b.flags|=128),r0(n,t,b,C,r,s,!0)}}function jE(n,t,e,i,r,s,d){let u=i[Vi],m=vn(i);u!==m&&vo(t,n,e,s,u,r,d);for(let b=Jt;b<i.length;b++){let C=i[b];Tc(C[he],C,n,t,s,u)}}function BE(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:ri.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ri.Important),n.setStyle(e,i,r,s))}}function gy(n,t,e,i,r){let s=ni(),d=i&2;try{ji(-1),d&&t.length>St&&ly(n,t,St,!1);let u=d?Re.TemplateUpdateStart:Re.TemplateCreateStart;Be(u,r,e),e(i,r)}finally{ji(s);let u=d?Re.TemplateUpdateEnd:Re.TemplateCreateEnd;Be(u,r,e)}}function Oc(n,t,e){$E(n,t,e),(e.flags&64)===64&&QE(n,t,e)}function o0(n,t,e=An){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let d=i[s+1],u=d===-1?e(t,n):n[d];n[r++]=u}}}function WE(n,t,e,i){let s=i.get($v,zv)||e===Ln.ShadowDom||e===Ln.ExperimentalIsolatedShadowDom,d=n.selectRootElement(t,s);return UE(d),d}function UE(n){GE(n)}var GE=()=>null;function qE(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hy(n,t,e,i,r,s){let d=t[he];if(s0(n,d,t,e,i)){Li(n)&&zE(t,n.index);return}n.type&3&&(e=qE(e)),HE(n,t,e,i,r,s)}function HE(n,t,e,i,r,s){if(n.type&3){let d=An(n,t);i=s!=null?s(i,n.value||"",e):i,r.setProperty(d,e,i)}else n.type&12}function zE(n,t){let e=yn(t,n);e[ge]&16||(e[ge]|=64)}function $E(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Li(e)&&CE(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||pc(e,t);let s=e.initialInputs;for(let d=i;d<r;d++){let u=n.data[d],m=mc(t,n,d,e);if(bo(m,t),s!==null&&JE(t,d-i,m,u,e,s),ti(u)){let b=yn(e.index,t);b[Ot]=mc(t,n,d,e)}}}function QE(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,d=V_();try{ji(s);for(let u=i;u<r;u++){let m=n.data[u],b=t[u];Yl(u),(m.hostBindings!==null||m.hostVars!==0||m.hostAttrs!==null)&&KE(m,b)}}finally{ji(-1),Yl(d)}}function KE(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function a0(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];mE(t,s.selectors,!1)&&(i??=[],ti(s)?i.unshift(s):i.push(s))}return i}function YE(n,t,e,i,r,s){let d=An(n,t);ZE(t[Ke],d,s,n.value,e,i,r)}function ZE(n,t,e,i,r,s,d){if(s==null)n.removeAttribute(t,r,e);else{let u=d==null?Jn(s):d(s,i||"",r);n.setAttribute(t,r,u,e)}}function JE(n,t,e,i,r,s){let d=s[t];if(d!==null)for(let u=0;u<d.length;u+=2){let m=d[u],b=d[u+1];Df(i,e,m,b)}}function _y(n,t,e,i,r){let s=St+e,d=t[he],u=r(d,t,n,i,e);t[s]=u,_o(n,!0);let m=n.type===2;return m?(ey(t[Ke],u,n),(w_()===0||fo(n))&&bo(u,t),I_()):bo(u,t),ec()&&(!m||!Hf(n))&&i0(d,t,u,n),n}function vy(n){let t=n;return Zm()?N_():(t=t.parent,_o(t,!1)),t}function XE(n,t){let e=n[Fi];if(!e)return;let i;try{i=e.get(Cn,null)}catch{i=null}i?.(t)}function s0(n,t,e,i,r){let s=n.inputs?.[i],d=n.hostDirectiveInputs?.[i],u=!1;if(d)for(let m=0;m<d.length;m+=2){let b=d[m],C=d[m+1],w=t.data[b];Df(w,e[b],C,r),u=!0}if(s)for(let m of s){let b=e[m],C=t.data[m];Df(C,b,i,r),u=!0}return u}function ew(n,t){let e=yn(t,n),i=e[he];tw(i,e);let r=e[Nn];r!==null&&e[Sa]===null&&(e[Sa]=Qv(r,e[Fi])),Be(Re.ComponentStart);try{l0(i,e,e[Ot])}finally{Be(Re.ComponentEnd,e[Ot])}}function tw(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function l0(n,t,e){Zl(t);try{let i=n.viewQuery;i!==null&&Pf(1,i,e);let r=n.template;r!==null&&gy(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Mr]?.finishViewCreation(n),n.staticContentQueries&&Kv(n,t),n.staticViewQueries&&Pf(2,n.viewQuery,e);let s=n.components;s!==null&&nw(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ge]&=-5,Jl()}}function nw(n,t){for(let e=0;e<t.length;e++)ew(n,t[e])}function iw(n,t,e,i){let r=ye(null);try{let s=t.tView,u=n[ge]&4096?4096:16,m=Jf(n,s,e,u,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),b=n[t.index];m[xr]=b;let C=n[Mr];return C!==null&&(m[Mr]=C.createEmbeddedView(s)),l0(s,m,e),m}finally{ye(r)}}function lv(n,t){return!t||t.firstChild===null||Wv(n)}function Ba(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(vn(s)),Rn(s)&&yy(s,i);let d=e.type;if(d&8)Ba(n,t,e.child,i);else if(d&32){let u=e0(e,t),m;for(;m=u();)i.push(m)}else if(d&16){let u=fy(t,e);if(Array.isArray(u))i.push(...u);else{let m=Ni(t[_n]);Ba(m[he],m,u,i,!0)}}e=r?e.projectionNext:e.next}return i}function yy(n,t){for(let e=Jt;e<n.length;e++){let i=n[e],r=i[he].firstChild;r!==null&&Ba(i[he],i,r,t)}n[Vi]!==n[Nn]&&t.push(n[Vi])}function by(n){if(n[Er]!==null){for(let t of n[Er])t.impl.addSequence(t);n[Er].length=0}}var Cy=[];function rw(n){return n[cn]??ow(n)}function ow(n){let t=Cy.pop()??Object.create(sw);return t.lView=n,t}function aw(n){n.lView[cn]!==n&&(n.lView=null,Cy.push(n))}var sw=ce(N({},ia),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ho(n.lView)},consumerOnSignalRead(){this.lView[cn]=this}});function lw(n){let t=n[cn]??Object.create(cw);return t.lView=n,t}var cw=ce(N({},ia),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Ni(n.lView);for(;t&&!xy(t[he]);)t=Ni(t);t&&Qm(t)},consumerOnSignalRead(){this.lView[cn]=this}});function xy(n){return n.type!==2}function Sy(n){if(n[Ea]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[Ea])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[ge]&8192)}}var dw=100;function My(n,t=0){let i=n[Xn].rendererFactory,r=!1;r||i.begin?.();try{uw(n,t)}finally{r||i.end?.()}}function uw(n,t){let e=Jm();try{Xm(!0),Of(n,t);let i=0;for(;Ta(n);){if(i===dw)throw new F(103,!1);i++,Of(n,1)}}finally{Xm(e)}}function pw(n,t,e,i){if(wr(t))return;let r=t[ge],s=!1,d=!1;Zl(t);let u=!0,m=null,b=null;s||(xy(n)?(b=rw(t),m=oa(b)):el()===null?(u=!1,b=lw(t),m=oa(b)):t[cn]&&(aa(t[cn]),t[cn]=null));try{$m(t),R_(n.bindingStartIndex),e!==null&&gy(n,t,e,2,i);let C=(r&3)===3;if(!s)if(C){let P=n.preOrderCheckHooks;P!==null&&oc(t,P,null)}else{let P=n.preOrderHooks;P!==null&&ac(t,P,0,null),mf(t,0)}if(d||mw(t),Sy(t),Ey(t,0),n.contentQueries!==null&&Kv(n,t),!s)if(C){let P=n.contentCheckHooks;P!==null&&oc(t,P)}else{let P=n.contentHooks;P!==null&&ac(t,P,1),mf(t,1)}gw(n,t);let w=n.components;w!==null&&Iy(t,w,0);let O=n.viewQuery;if(O!==null&&Pf(2,O,i),!s)if(C){let P=n.viewCheckHooks;P!==null&&oc(t,P)}else{let P=n.viewHooks;P!==null&&ac(t,P,2),mf(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Hl]){for(let P of t[Hl])P();t[Hl]=null}s||(by(t),t[ge]&=-73)}catch(C){throw s||ho(t),C}finally{b!==null&&(tl(b,m),u&&aw(b)),Jl()}}function Ey(n,t){for(let e=Gv(n);e!==null;e=qv(e))for(let i=Jt;i<e.length;i++){let r=e[i];wy(r,t)}}function mw(n){for(let t=Gv(n);t!==null;t=qv(t)){if(!(t[ge]&2))continue;let e=t[Pa];for(let i=0;i<e.length;i++){let r=e[i];Qm(r)}}}function fw(n,t,e){Be(Re.ComponentStart);let i=yn(t,n);try{wy(i,e)}finally{Be(Re.ComponentEnd,i[Ot])}}function wy(n,t){$l(n)&&Of(n,t)}function Of(n,t){let i=n[he],r=n[ge],s=n[cn],d=!!(t===0&&r&16);if(d||=!!(r&64&&t===0),d||=!!(r&1024),d||=!!(s?.dirty&&nl(s)),d||=!1,s&&(s.dirty=!1),n[ge]&=-9217,d)pw(i,n,i.template,n[Ot]);else if(r&8192){let u=ye(null);try{Sy(n),Ey(n,1);let m=i.components;m!==null&&Iy(n,m,1),by(n)}finally{ye(u)}}}function Iy(n,t,e){for(let i=0;i<t.length;i++)fw(n,t[i],e)}function gw(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)ji(~r);else{let s=r,d=e[++i],u=e[++i];F_(d,s);let m=t[s];Be(Re.HostBindingsUpdateStart,m);try{u(2,m)}finally{Be(Re.HostBindingsUpdateEnd,m)}}}}finally{ji(-1)}}function c0(n,t){let e=Jm()?64:1088;for(n[Xn].changeDetectionScheduler?.notify(t);n;){n[ge]|=e;let i=Ni(n);if(go(n)&&!i)return n;n=i}return null}function Py(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function hw(n,t,e,i=!0){let r=t[he];if(_w(r,t,n,e),i){let d=Tf(e,n),u=t[Ke],m=u.parentNode(n[Vi]);m!==null&&PE(r,n[hn],u,t,m,d)}let s=t[Sa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function kf(n,t){if(n.length<=Jt)return;let e=Jt+t,i=n[e];if(i){let r=i[xr];r!==null&&r!==n&&n0(r,i),t>0&&(n[e-1][gn]=i[gn]);let s=ba(n,Jt+t);IE(i[he],i);let d=s[Mr];d!==null&&d.detachView(s[he]),i[Ct]=null,i[gn]=null,i[ge]&=-129}return i}function _w(n,t,e,i){let r=Jt+i,s=e.length;i>0&&(e[r-1][gn]=t),i<s-Jt?(t[gn]=e[r],Rm(e,Jt+i,t)):(e.push(t),t[gn]=null),t[Ct]=e;let d=t[xr];d!==null&&e!==d&&Dy(d,t);let u=t[Mr];u!==null&&u.insertView(n),Ql(t),t[ge]|=128}function Dy(n,t){let e=n[Pa],i=t[Ct];if(ei(i))n[ge]|=2;else{let r=i[Ct][_n];t[_n]!==r&&(n[ge]|=2)}e===null?n[Pa]=[t]:e.push(t)}var Bi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[he];return Ba(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Ot]}set context(t){this._lView[Ot]=t}get destroyed(){return wr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ct];if(Rn(t)){let e=t[Ia],i=e?e.indexOf(this):-1;i>-1&&(kf(t,i),ba(e,i))}this._attachedToViewContainer=!1}my(this._lView[he],this._lView)}onDestroy(t){Km(this._lView,t)}markForCheck(){c0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){Ql(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,My(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=go(this._lView),e=this._lView[xr];e!==null&&!t&&n0(e,this._lView),py(this._lView[he],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=t;let e=go(this._lView),i=this._lView[xr];i!==null&&!e&&Dy(i,this._lView),Ql(this._lView)}};var Qa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vw;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let s=iw(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new Bi(s)}}return n})();function vw(){return yw(Nt(),Te())}function yw(n,t){return n.type&4?new Qa(t,n,xc(n,t)):null}function d0(n,t,e,i,r){let s=n.data[t];if(s===null)s=bw(n,t,e,i,r),A_()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let d=k_();s.injectorIndex=d===null?-1:d.injectorIndex}return _o(s,!0),s}function bw(n,t,e,i,r){let s=Ym(),d=Zm(),u=d?s:s&&s.parent,m=n.data[t]=xw(n,u,e,t,i,r);return Cw(n,m,s,d),m}function Cw(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function xw(n,t,e,i,r,s){let d=t?t.injectorIndex:-1,u=0;return D_()&&(u|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:u,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Sw=()=>null;function cv(n,t){return Sw(n,t)}var Ty=class{},kc=class{},Nf=class{resolveComponentFactory(t){throw new F(917,!1)}},Ka=class{static NULL=new Nf},Ci=class{},jn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Mw()}return n})();function Mw(){let n=Te(),t=Nt(),e=yn(t.index,n);return(ei(e)?e:n)[Ke]}var Oy=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>null})}return n})();var sc={},Rf=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){let r=this.injector.get(t,sc,i);return r!==sc||e===sc?r:this.parentInjector.get(t,e,i)}};function dv(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let d=0;d<t.length;d++){let u=t[d];if(typeof u=="number")s=u;else if(s==1)r=jl(r,u);else if(s==2){let m=u,b=t[++d];i=jl(i,m+": "+b+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function I(n,t=0){let e=Te();if(e===null)return j(n,t);let i=Nt();return Lv(i,e,bt(n),t)}function u0(){let n="invalid";throw new Error(n)}function ky(n,t,e,i,r){let s=i===null?null:{"":-1},d=r(n,e);if(d!==null){let u=d,m=null,b=null;for(let C of d)if(C.resolveHostDirectives!==null){[u,m,b]=C.resolveHostDirectives(d);break}Iw(n,t,e,u,s,m,b)}s!==null&&i!==null&&Ew(e,i,s)}function Ew(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new F(-301,!1);i.push(t[r],s)}}function ww(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function Iw(n,t,e,i,r,s,d){let u=i.length,m=null;for(let O=0;O<u;O++){let P=i[O];m===null&&ti(P)&&(m=P,ww(n,e,O)),Ef(pc(e,t),n,P.type)}Nw(e,n.data.length,u),m?.viewProvidersResolver&&m.viewProvidersResolver(m);for(let O=0;O<u;O++){let P=i[O];P.providersResolver&&P.providersResolver(P)}let b=!1,C=!1,w=sy(n,t,u,null);u>0&&(e.directiveToIndex=new Map);for(let O=0;O<u;O++){let P=i[O];if(e.mergedAttrs=ja(e.mergedAttrs,P.hostAttrs),Dw(n,e,t,w,P),kw(w,P,r),d!==null&&d.has(P)){let[W,z]=d.get(P);e.directiveToIndex.set(P.type,[w,W+e.directiveStart,z+e.directiveStart])}else(s===null||!s.has(P))&&e.directiveToIndex.set(P.type,w);P.contentQueries!==null&&(e.flags|=4),(P.hostBindings!==null||P.hostAttrs!==null||P.hostVars!==0)&&(e.flags|=64);let k=P.type.prototype;!b&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),b=!0),!C&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),C=!0),w++}Pw(n,e,s)}function Pw(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))uv(0,t,r,i),uv(1,t,r,i),mv(t,i,!1);else{let s=e.get(r);pv(0,t,s,i),pv(1,t,s,i),mv(t,i,!0)}}}function uv(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d;n===0?d=t.inputs??={}:d=t.outputs??={},d[s]??=[],d[s].push(i),Ny(t,s)}}function pv(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d=r[s],u;n===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[d]??=[],u[d].push(i,s),Ny(t,d)}}function Ny(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function mv(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||Yf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let d=null,u=0;for(;u<i.length;){let m=i[u];if(m===0){u+=4;continue}else if(m===5){u+=2;continue}else if(typeof m=="number")break;if(!e&&r.hasOwnProperty(m)){let b=r[m];for(let C of b)if(C===t){d??=[],d.push(m,i[u+1]);break}}else if(e&&s.hasOwnProperty(m)){let b=s[m];for(let C=0;C<b.length;C+=2)if(b[C]===t){d??=[],d.push(b[C+1],i[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(d)}function Dw(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=ki(r.type,!0)),d=new Pr(s,ti(r),I,null);n.blueprint[i]=d,e[i]=d,Tw(n,t,i,sy(n,e,r.hostVars,Ht),r)}function Tw(n,t,e,i,r){let s=r.hostBindings;if(s){let d=n.hostBindingOpCodes;d===null&&(d=n.hostBindingOpCodes=[]);let u=~t.index;Ow(d)!=u&&d.push(u),d.push(e,i,s)}}function Ow(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function kw(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;ti(t)&&(e[""]=n)}}function Nw(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function p0(n,t,e,i,r,s,d,u){let m=t[he],b=m.consts,C=Da(b,d),w=d0(m,n,e,i,C);return s&&ky(m,t,w,Da(b,u),r),w.mergedAttrs=ja(w.mergedAttrs,w.attrs),w.attrs!==null&&dv(w,w.attrs,!1),w.mergedAttrs!==null&&dv(w,w.mergedAttrs,!0),m.queries!==null&&m.queries.elementStart(m,w),w}function m0(n,t){Dv(n,t),Gm(t)&&n.queries.elementEnd(t)}function f0(n){return Ay(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Ry(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function Ay(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Fy(n,t,e){return n[t]=e}function oi(n,t,e){if(e===Ht)return!1;let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function g0(n,t,e,i){let r=oi(n,t,e);return oi(n,t+1,i)||r}function Rw(n,t,e,i,r){let s=g0(n,t,e,i);return oi(n,t+2,r)||s}function hf(n,t,e){return function i(r){let s=Li(n)?yn(n.index,t):t;c0(s,5);let d=t[Ot],u=fv(t,d,e,r),m=i.__ngNextListenerFn__;for(;m;)u=fv(t,d,m,r)&&u,m=m.__ngNextListenerFn__;return u}}function fv(n,t,e,i){let r=ye(null);try{return Be(Re.OutputStart,t,e),e(i)!==!1}catch(s){return XE(n,s),!1}finally{Be(Re.OutputEnd,t,e),ye(r)}}function Aw(n,t,e,i,r,s,d,u){let m=fo(n),b=!1,C=null;if(!i&&m&&(C=Vw(t,e,s,n.index)),C!==null){let w=C.__ngLastListenerFn__||C;w.__ngNextListenerFn__=d,C.__ngLastListenerFn__=d,b=!0}else{let w=An(n,e),O=i?i(w):w;$M(e,O,s,u);let P=r.listen(O,s,u);if(!Fw(s)){let k=i?W=>i(vn(W[n.index])):n.index;Vy(k,t,e,s,u,P,!1)}}return b}function Fw(n){return n.startsWith("animation")||n.startsWith("transition")}function Vw(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let d=r[s];if(d===e&&r[s+1]===i){let u=t[po],m=r[s+2];return u&&u.length>m?u[m]:null}typeof d=="string"&&(s+=2)}return null}function Vy(n,t,e,i,r,s,d){let u=t.firstCreatePass?E_(t):null,m=M_(e),b=m.length;m.push(r,s),u&&u.push(i,n,b,(b+1)*(d?-1:1))}function gv(n,t,e,i,r,s){let d=t[e],u=t[he],b=u.data[e].outputs[i],w=d[b].subscribe(s);Vy(n.index,u,t,r,s,w,!0)}var Af=Symbol("BINDING");var _c=class extends Ka{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=yi(t);return new Dr(e,this.ngModule)}};function Lw(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Pc.SignalBased)!==0};return r&&(s.transform=r),s})}function jw(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function Bw(n,t,e){let i=t instanceof tt?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Rf(e,i):e}function Ww(n){let t=n.get(Ci,null);if(t===null)throw new F(407,!1);let e=n.get(Oy,null),i=n.get(Ri,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function Uw(n,t){let e=Ly(n);return Jv(t,e,e==="svg"?y_:e==="math"?b_:null)}function Ly(n){return(n.selectors[0][0]||"div").toLowerCase()}var Dr=class extends kc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Lw(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=jw(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=_E(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r,s,d){Be(Re.DynamicComponentStart);let u=ye(null);try{let m=this.componentDef,b=Gw(i,m,d,s),C=Bw(m,r||this.ngModule,t),w=Ww(C),O=w.rendererFactory.createRenderer(null,m),P=i?WE(O,i,m.encapsulation,C):Uw(m,O),k=d?.some(hv)||s?.some($=>typeof $!="function"&&$.bindings.some(hv)),W=Jf(null,b,null,512|ay(m),null,null,w,O,C,null,Qv(P,C,!0));W[St]=P,Zl(W);let z=null;try{let $=p0(St,W,2,"#host",()=>b.directiveRegistry,!0,0);ey(O,P,$),bo(P,W),Oc(b,W,$),zf(b,$,W),m0(b,$),e!==void 0&&Hw($,this.ngContentSelectors,e),z=yn($.index,W),W[Ot]=z[Ot],l0(b,W,null)}catch($){throw z!==null&&If(z),If(W),$}finally{Be(Re.DynamicComponentEnd),Jl()}return new vc(this.componentType,W,!!k)}finally{ye(u)}}};function Gw(n,t,e,i){let r=n?["ng-version","21.0.5"]:vE(t.selectors[0]),s=null,d=null,u=0;if(e)for(let C of e)u+=C[Af].requiredVars,C.create&&(C.targetIdx=0,(s??=[]).push(C)),C.update&&(C.targetIdx=0,(d??=[]).push(C));if(i)for(let C=0;C<i.length;C++){let w=i[C];if(typeof w!="function")for(let O of w.bindings){u+=O[Af].requiredVars;let P=C+1;O.create&&(O.targetIdx=P,(s??=[]).push(O)),O.update&&(O.targetIdx=P,(d??=[]).push(O))}}let m=[t];if(i)for(let C of i){let w=typeof C=="function"?C:C.type,O=Om(w);m.push(O)}return Zf(0,null,qw(s,d),1,u,m,null,null,null,[r],null)}function qw(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let i of n)i.create();if(e&2&&t)for(let i of t)i.update()}}function hv(n){let t=n[Af].kind;return t==="input"||t==="twoWay"}var vc=class extends Ty{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=zl(e[he],St),this.location=xc(this._tNode,e),this.instance=yn(this._tNode.index,e)[Ot],this.hostView=this.changeDetectorRef=new Bi(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=s0(i,r[he],r,t,e);this.previousInputValues.set(t,e);let d=yn(i.index,r);c0(d,1)}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Hw(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var Nr=(()=>{class n{static __NG_ELEMENT_ID__=zw}return n})();function zw(){let n=Nt();return Qw(n,Te())}var $w=Nr,jy=class extends $w{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let t=Wf(this._hostTNode,this._hostLView);if(kv(t)){let e=dc(t,this._hostLView),i=cc(t),r=e[he].data[i+8];return new Ir(r,e)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=_v(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let d=cv(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(e||{},s,d);return this.insertImpl(u,r,lv(this._hostTNode,d)),u}createComponent(t,e,i,r,s,d,u){let m=t&&!bM(t),b;if(m)b=e;else{let z=e||{};b=z.index,i=z.injector,r=z.projectableNodes,s=z.environmentInjector||z.ngModuleRef,d=z.directives,u=z.bindings}let C=m?t:new Dr(yi(t)),w=i||this.parentInjector;if(!s&&C.ngModule==null){let $=(m?w:this.parentInjector).get(tt,null);$&&(s=$)}let O=yi(C.componentType??{}),P=cv(this._lContainer,O?.id??null),k=P?.firstChild??null,W=C.create(w,r,k,s,d,u);return this.insertImpl(W.hostView,b,lv(this._hostTNode,P)),W}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(C_(r)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let m=r[Ct],b=new jy(m,m[hn],m[Ct]);b.detach(b.indexOf(t))}}let s=this._adjustIndex(e),d=this._lContainer;return hw(d,r,s,i),t.attachToViewContainerRef(),Rm(_f(d),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=_v(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=kf(this._lContainer,e);i&&(ba(_f(this._lContainer),e),my(i[he],i))}detach(t){let e=this._adjustIndex(t,-1),i=kf(this._lContainer,e);return i&&ba(_f(this._lContainer),e)!=null?new Bi(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function _v(n){return n[Ia]}function _f(n){return n[Ia]||(n[Ia]=[])}function Qw(n,t){let e,i=t[n.index];return Rn(i)?e=i:(e=Py(i,t,null,n),t[n.index]=e,Xf(t,e)),Yw(e,t,n,i),new jy(e,n,t)}function Kw(n,t){let e=n[Ke],i=e.createComment(""),r=An(t,n),s=e.parentNode(r);return gc(e,s,i,e.nextSibling(r),!1),i}var Yw=Xw,Zw=()=>!1;function Jw(n,t,e){return Zw(n,t,e)}function Xw(n,t,e,i){if(n[Vi])return;let r;e.type&8?r=vn(i):r=Kw(t,e),n[Vi]=r}var Ff=new Map,e2=new Set;async function By(n){let t=Ff;Ff=new Map;let e=new Map;function i(s){let d=e.get(s);if(d)return d;let u=n(s).then(m=>t2(s,m));return e.set(s,u),u}let r=Array.from(t).map(async([s,d])=>{if(d.styleUrl&&d.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let u=[];d.templateUrl&&u.push(i(d.templateUrl).then(w=>{d.template=w}));let m=typeof d.styles=="string"?[d.styles]:d.styles??[];d.styles=m;let{styleUrl:b,styleUrls:C}=d;if(b&&(C=[b],d.styleUrl=void 0),C?.length){let w=Promise.all(C.map(O=>i(O))).then(O=>{m.push(...O),d.styleUrls=void 0});u.push(w)}await Promise.all(u),e2.delete(s)});await Promise.all(r)}function Wy(){return Ff.size===0}async function t2(n,t){if(typeof t=="string")return t;if(t.status!==void 0&&t.status!==200)throw new F(918,!1);return t.text()}var Tr=class{},Nc=class{};var Wa=class extends Tr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _c(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=Tm(t);this._bootstrapComponents=ry(s.bootstrap),this._r3Injector=af(t,e,[{provide:Tr,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver},...i],_i(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ua=class extends Nc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Wa(this.moduleType,t,[])}};function Uy(n,t,e){return new Wa(n,t,e,!1)}var yc=class extends Tr{injector;componentFactoryResolver=new _c(this);instance=null;constructor(t){super();let e=new vr([...t.providers,{provide:Tr,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],t.parent||xa(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Mo(n,t,e=null){return new yc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var n2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Vm(!1,e.type),r=i.length>0?Mo([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=R({token:n,providedIn:"environment",factory:()=>new n(j(tt))})}return n})();function A(n){return qa(()=>{let t=Gy(n),e=ce(N({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Uf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(n2).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ln.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&kr("NgStandalone"),qy(e);let i=n.dependencies;return e.directiveDefs=vv(i,i2),e.pipeDefs=vv(i,l_),e.id=a2(e),e})}function i2(n){return yi(n)||Om(n)}function ot(n){return qa(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function r2(n,t){if(n==null)return Ai;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,d,u,m;Array.isArray(r)?(u=r[0],s=r[1],d=r[2]??s,m=r[3]||null):(s=r,d=r,u=Pc.None,m=null),e[s]=[i,u,m],t[s]=d}return e}function o2(n){if(n==null)return Ai;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function We(n){return qa(()=>{let t=Gy(n);return qy(t),t})}function Rc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gy(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Ai,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:r2(n.inputs,t),outputs:o2(n.outputs),debugInfo:null}}function qy(n){n.features?.forEach(t=>t(n))}function vv(n,t){return n?()=>{let e=typeof n=="function"?n():n,i=[];for(let r of e){let s=t(r);s!==null&&i.push(s)}return i}:null}function a2(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function s2(n){return Object.getPrototypeOf(n.prototype).constructor}function Rt(n){let t=s2(n.type),e=!0,i=[n];for(;t;){let r;if(ti(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new F(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let d=n;d.inputs=vf(n.inputs),d.declaredInputs=vf(n.declaredInputs),d.outputs=vf(n.outputs);let u=r.hostBindings;u&&p2(n,u);let m=r.viewQuery,b=r.contentQueries;if(m&&d2(n,m),b&&u2(n,b),l2(n,r),s_(n.outputs,r.outputs),ti(r)&&r.data.animation){let C=n.data;C.animation=(C.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let d=0;d<s.length;d++){let u=s[d];u&&u.ngInherit&&u(n),u===Rt&&(e=!1)}}t=Object.getPrototypeOf(t)}c2(i)}function l2(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function c2(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=ja(r.hostAttrs,e=ja(e,r.hostAttrs))}}function vf(n){return n===Ai?{}:n===Gt?[]:n}function d2(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function u2(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function p2(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function m2(n,t,e,i,r,s,d,u){if(e.firstCreatePass){n.mergedAttrs=ja(n.mergedAttrs,n.attrs);let C=n.tView=Zf(2,n,r,s,d,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),C.queries=e.queries.embeddedTView(n))}u&&(n.flags|=u),_o(n,!1);let m=g2(e,t,n,i);ec()&&i0(e,t,m,n),bo(m,t);let b=Py(m,t,m,n);t[i+St]=b,Xf(t,b),Jw(b,n,t)}function f2(n,t,e,i,r,s,d,u,m,b,C){let w=e+St,O;return t.firstCreatePass?(O=d0(t,w,4,d||null,u||null),Kl()&&ky(t,n,O,Da(t.consts,b),a0),Dv(t,O)):O=t.data[w],m2(O,n,t,e,i,r,s,m),fo(O)&&Oc(t,n,O),b!=null&&o0(n,O,C),O}function x(n,t,e,i,r,s,d,u){let m=Te(),b=kt(),C=Da(b.consts,s);return f2(m,b,n,t,e,i,r,C,void 0,d,u),x}var g2=h2;function h2(n,t,e,i){return Na(!0),t[Ke].createComment("")}var h0=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Hy(n){return typeof n=="function"&&n[Bt]!==void 0}function _0(n){return Hy(n)&&typeof n.set=="function"}var Ac=new X(""),Fc=new X(""),Ya=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,Bm()&&(this._destroyRef=V(bn,{optional:!0})??void 0),v0||($y(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),e()},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||n)(j(st),j(zy),j(Fc))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),zy=(()=>{class n{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return v0?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function $y(n){v0=n}var v0;function Wi(n){return!!n&&typeof n.then=="function"}function y0(n){return!!n&&typeof n.subscribe=="function"}var b0=new X("");function Vc(n){return br([{provide:b0,multi:!0,useValue:n}])}var C0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=V(b0,{optional:!0})??[];injector=V(Tt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=gt(this.injector,r);if(Wi(s))e.push(s);else if(y0(s)){let d=new Promise((u,m)=>{s.subscribe({complete:u,error:m})});e.push(d)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lc=new X("");function Qy(){$p(()=>{let n="";throw new F(600,n)})}function Ky(n){return n.isBoundToModule}var _2=10;function x0(n,t){return Array.isArray(t)?t.reduce(x0,n):N(N({},n),t)}var ai=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(Cn);afterRenderManager=V(t0);zonelessEnabled=V(Ra);rootEffectScheduler=V(pf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new dt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=V(bi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Pe(e=>!e))}constructor(){V(Si,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=V(tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Tt.NULL){return this._injector.get(st).run(()=>{Be(Re.BootstrapComponentStart);let d=e instanceof kc;if(!this._injector.get(C0).done){let k="";throw new F(405,k)}let m;d?m=e:m=this._injector.get(Ka).resolveComponentFactory(e),this.componentTypes.push(m.componentType);let b=Ky(m)?void 0:this._injector.get(Tr),C=i||m.selector,w=m.create(r,[],C,b),O=w.location.nativeElement,P=w.injector.get(Ac,null);return P?.registerApplication(O),w.onDestroy(()=>{this.detachView(w.hostView),La(this.components,w),P?.unregisterApplication(O)}),this._loadComponent(w),Be(Re.BootstrapComponentEnd,w),w})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Be(Re.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Be(Re.ChangeDetectionEnd),new F(101,!1);let e=ye(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(e),this.afterTick.next(),Be(Re.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ci,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<_2;){Be(Re.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Be(Re.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Ta(r))continue;let s=i&&!this.zonelessEnabled?0:1;My(r,s),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Ta(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;La(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(Lc,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>La(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new F(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function La(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ui(n,t,e,i){let r=Te(),s=Oa();if(oi(r,s,t)){let d=kt(),u=Xl();YE(u,r,n,t,e,i)}return Ui}var zW=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function p(n,t,e){let i=Te(),r=Oa();if(oi(i,r,t)){let s=kt(),d=Xl();hy(d,i,n,t,i[Ke],e)}return p}function Vf(n,t,e,i,r){s0(t,n,e,r?"class":"style",i)}function o(n,t,e,i){let r=Te(),s=r[he],d=n+St,u=s.firstCreatePass?p0(d,r,2,t,a0,Kl(),e,i):s.data[d];if(_y(u,r,n,t,v2),fo(u)){let m=r[he];Oc(m,r,u),zf(m,u,r)}return i!=null&&o0(r,u),o}function a(){let n=kt(),t=Nt(),e=vy(t);return n.firstCreatePass&&m0(n,e),T_(e)&&O_(),P_(),e.classesWithoutHost!=null&&wM(e)&&Vf(n,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&IM(e)&&Vf(n,e,Te(),e.stylesWithoutHost,!1),a}function v(n,t,e,i){return o(n,t,e,i),a(),v}var v2=(n,t,e,i,r)=>(Na(!0),Jv(t[Ke],i,G_()));function Za(n,t,e){let i=Te(),r=i[he],s=n+St,d=r.firstCreatePass?p0(s,i,8,"ng-container",a0,Kl(),t,e):r.data[s];if(_y(d,i,n,"ng-container",y2),fo(d)){let u=i[he];Oc(u,i,d),zf(u,d,i)}return e!=null&&o0(i,d),Za}function Ja(){let n=kt(),t=Nt(),e=vy(t);return n.firstCreatePass&&m0(n,e),Ja}var y2=(n,t,e,i,r)=>(Na(!0),iE(t[Ke],""));function T(){return Te()}var Fa=void 0;function b2(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var C2=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Fa,Fa,Fa],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",b2],yf={};function en(n){let t=x2(n),e=yv(t);if(e)return e;let i=t.split("-")[0];if(e=yv(i),e)return e;if(i==="en")return C2;throw new F(701,!1)}function yv(n){return n in yf||(yf[n]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[n]),yf[n]}var it=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(it||{});function x2(n){return n.toLowerCase().replace(/_/g,"-")}var Xa="en-US";var S2=Xa;function Yy(n){typeof n=="string"&&(S2=n.toLowerCase().replace(/_/g,"-"))}function y(n,t,e){let i=Te(),r=kt(),s=Nt();return Zy(r,i,i[Ke],s,n,t,e),y}function Zy(n,t,e,i,r,s,d){let u=!0,m=null;if((i.type&3||d)&&(m??=hf(i,t,s),Aw(i,n,t,d,e,r,s,m)&&(u=!1)),u){let b=i.outputs?.[r],C=i.hostDirectiveOutputs?.[r];if(C&&C.length)for(let w=0;w<C.length;w+=2){let O=C[w],P=C[w+1];m??=hf(i,t,s),gv(i,t,O,P,r,m)}if(b&&b.length)for(let w of b)m??=hf(i,t,s),gv(i,t,w,r,r,m)}}function f(n=1){return U_(n)}function ic(n,t){return n<<17|t<<2}function Or(n){return n>>17&32767}function M2(n){return(n&2)==2}function E2(n,t){return n&131071|t<<17}function Lf(n){return n|2}function xo(n){return(n&131068)>>2}function bf(n,t){return n&-131069|t<<2}function w2(n){return(n&1)===1}function jf(n){return n|1}function I2(n,t,e,i,r,s){let d=s?t.classBindings:t.styleBindings,u=Or(d),m=xo(d);n[i]=e;let b=!1,C;if(Array.isArray(e)){let w=e;C=w[1],(C===null||co(w,C)>0)&&(b=!0)}else C=e;if(r)if(m!==0){let O=Or(n[u+1]);n[i+1]=ic(O,u),O!==0&&(n[O+1]=bf(n[O+1],i)),n[u+1]=E2(n[u+1],i)}else n[i+1]=ic(u,0),u!==0&&(n[u+1]=bf(n[u+1],i)),u=i;else n[i+1]=ic(m,0),u===0?u=i:n[m+1]=bf(n[m+1],i),m=i;b&&(n[i+1]=Lf(n[i+1])),bv(n,C,i,!0),bv(n,C,i,!1),P2(t,C,n,i,s),d=ic(u,m),s?t.classBindings=d:t.styleBindings=d}function P2(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&co(s,t)>=0&&(e[i+1]=jf(e[i+1]))}function bv(n,t,e,i){let r=n[e+1],s=t===null,d=i?Or(r):xo(r),u=!1;for(;d!==0&&(u===!1||s);){let m=n[d],b=n[d+1];D2(m,t)&&(u=!0,n[d+1]=i?jf(b):Lf(b)),d=i?Or(b):xo(b)}u&&(n[e+1]=i?Lf(r):jf(r))}function D2(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?co(n,t)>=0:!1}var Vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T2(n){return n.substring(Vn.key,Vn.keyEnd)}function O2(n){return k2(n),Jy(n,Xy(n,0,Vn.textEnd))}function Jy(n,t){let e=Vn.textEnd;return e===t?-1:(t=Vn.keyEnd=N2(n,Vn.key=t,e),Xy(n,t,e))}function k2(n){Vn.key=0,Vn.keyEnd=0,Vn.value=0,Vn.valueEnd=0,Vn.textEnd=n.length}function Xy(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function N2(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function Mt(n,t,e){return e1(n,t,e,!1),Mt}function J(n,t){return e1(n,t,null,!0),J}function Mn(n){A2(W2,R2,n,!0)}function R2(n,t){for(let e=O2(t);e>=0;e=Jy(t,e))Gl(n,T2(t),!0)}function e1(n,t,e,i){let r=Te(),s=kt(),d=ka(2);if(s.firstUpdatePass&&n1(s,n,d,i),t!==Ht&&oi(r,d,t)){let u=s.data[ni()];i1(s,u,r,r[Ke],n,r[d+1]=G2(t,e),i,d)}}function A2(n,t,e,i){let r=kt(),s=ka(2);r.firstUpdatePass&&n1(r,null,s,i);let d=Te();if(e!==Ht&&oi(d,s,e)){let u=r.data[ni()];if(r1(u,i)&&!t1(r,s)){let m=i?u.classesWithoutHost:u.stylesWithoutHost;m!==null&&(e=jl(m,e||"")),Vf(r,u,d,e,i)}else U2(r,u,d,d[Ke],d[s+1],d[s+1]=B2(n,t,e),i,s)}}function t1(n,t){return t>=n.expandoStartIndex}function n1(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[ni()],d=t1(n,e);r1(s,i)&&t===null&&!d&&(t=!1),t=F2(r,s,t,i),I2(r,s,t,e,d,i)}}function F2(n,t,e,i){let r=L_(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=Cf(null,n,t,e,i),e=Ga(e,t.attrs,i),s=null);else{let d=t.directiveStylingLast;if(d===-1||n[d]!==r)if(e=Cf(r,n,t,e,i),s===null){let m=V2(n,t,i);m!==void 0&&Array.isArray(m)&&(m=Cf(null,n,t,m[1],i),m=Ga(m,t.attrs,i),L2(n,t,i,m))}else s=j2(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function V2(n,t,e){let i=e?t.classBindings:t.styleBindings;if(xo(i)!==0)return n[Or(i)]}function L2(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[Or(r)]=i}function j2(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let d=n[s].hostAttrs;i=Ga(i,d,e)}return Ga(i,t.attrs,e)}function Cf(n,t,e,i,r){let s=null,d=e.directiveEnd,u=e.directiveStylingLast;for(u===-1?u=e.directiveStart:u++;u<d&&(s=t[u],i=Ga(i,s.hostAttrs,r),s!==n);)u++;return n!==null&&(e.directiveStylingLast=u),i}function Ga(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let d=t[s];typeof d=="number"?r=d:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Gl(n,d,e?!0:t[++s]))}return n===void 0?null:n}function B2(n,t,e){if(e==null||e==="")return Gt;let i=[],r=So(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function W2(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Gl(n,i,e)}function U2(n,t,e,i,r,s,d,u){r===Ht&&(r=Gt);let m=0,b=0,C=0<r.length?r[0]:null,w=0<s.length?s[0]:null;for(;C!==null||w!==null;){let O=m<r.length?r[m+1]:void 0,P=b<s.length?s[b+1]:void 0,k=null,W;C===w?(m+=2,b+=2,O!==P&&(k=w,W=P)):w===null||C!==null&&C<w?(m+=2,k=C):(b+=2,k=w,W=P),k!==null&&i1(n,t,e,i,k,W,d,u),C=m<r.length?r[m]:null,w=b<s.length?s[b]:null}}function i1(n,t,e,i,r,s,d,u){if(!(t.type&3))return;let m=n.data,b=m[u+1],C=w2(b)?Cv(m,t,e,r,xo(b),d):void 0;if(!bc(C)){bc(s)||M2(b)&&(s=Cv(m,null,e,r,u,d));let w=qm(ni(),e);BE(i,d,w,r,s)}}function Cv(n,t,e,i,r,s){let d=t===null,u;for(;r>0;){let m=n[r],b=Array.isArray(m),C=b?m[1]:m,w=C===null,O=e[r+1];O===Ht&&(O=w?Gt:void 0);let P=w?ql(O,i):C===i?O:void 0;if(b&&!bc(P)&&(P=ql(m,i)),bc(P)&&(u=P,d))return u;let k=n[r+1];r=d?Or(k):xo(k)}if(t!==null){let m=s?t.residualClasses:t.residualStyles;m!=null&&(u=ql(m,i))}return u}function bc(n){return n!==void 0}function G2(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=_i(So(n)))),n}function r1(n,t){return(n.flags&(t?8:16))!==0}function l(n,t=""){let e=Te(),i=kt(),r=n+St,s=i.firstCreatePass?d0(i,r,1,t,null):i.data[r],d=q2(i,e,s,t,n);e[r]=d,ec()&&i0(i,e,d,s),_o(s,!1)}var q2=(n,t,e,i,r)=>(Na(!0),tE(t[Ke],i));function H2(n,t,e,i=""){return oi(n,Oa(),e)?t+Jn(e)+i:Ht}function z2(n,t,e,i,r,s=""){let d=tf(),u=g0(n,d,e,r);return ka(2),u?t+Jn(e)+i+Jn(r)+s:Ht}function $2(n,t,e,i,r,s,d,u=""){let m=tf(),b=Rw(n,m,e,r,d);return ka(3),b?t+Jn(e)+i+Jn(r)+s+Jn(d)+u:Ht}function g(n){return D("",n),g}function D(n,t,e){let i=Te(),r=H2(i,n,t,e);return r!==Ht&&S0(i,ni(),r),D}function le(n,t,e,i,r){let s=Te(),d=z2(s,n,t,e,i,r);return d!==Ht&&S0(s,ni(),d),le}function Eo(n,t,e,i,r,s,d){let u=Te(),m=$2(u,n,t,e,i,r,s,d);return m!==Ht&&S0(u,ni(),m),Eo}function S0(n,t,e){let i=qm(t,n);nE(n[Ke],i,e)}function S(n,t,e){_0(t)&&(t=t());let i=Te(),r=Oa();if(oi(i,r,t)){let s=kt(),d=Xl();hy(d,i,n,t,i[Ke],e)}return S}function E(n,t){let e=_0(n);return e&&n.set(t),e}function M(n,t){let e=Te(),i=kt(),r=Nt();return Zy(i,e,e[Ke],r,n,t),M}function xv(n,t,e){let i=kt();i.firstCreatePass&&o1(t,i.data,i.blueprint,ti(n),e)}function o1(n,t,e,i,r){if(n=bt(n),Array.isArray(n))for(let s=0;s<n.length;s++)o1(n[s],t,e,i,r);else{let s=kt(),d=Te(),u=Nt(),m=_r(n)?n:bt(n.provide),b=jm(n),C=u.providerIndexes&1048575,w=u.directiveStart,O=u.providerIndexes>>20;if(_r(n)||!n.multi){let P=new Pr(b,r,I,null),k=Sf(m,t,r?C:C+O,w);k===-1?(Ef(pc(u,d),s,m),xf(s,n,t.length),t.push(m),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(P),d.push(P)):(e[k]=P,d[k]=P)}else{let P=Sf(m,t,C+O,w),k=Sf(m,t,C,C+O),W=P>=0&&e[P],z=k>=0&&e[k];if(r&&!z||!r&&!W){Ef(pc(u,d),s,m);let $=Y2(r?K2:Q2,e.length,r,i,b,n);!r&&z&&(e[k].providerFactory=$),xf(s,n,t.length,0),t.push(m),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push($),d.push($)}else{let $=a1(e[r?k:P],b,!r&&i);xf(s,n,P>-1?P:k,$)}!r&&i&&z&&e[k].componentProviders++}}}function xf(n,t,e,i){let r=_r(t),s=__(t);if(r||s){let m=(s?bt(t.useClass):t).prototype.ngOnDestroy;if(m){let b=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let C=b.indexOf(e);C===-1?b.push(e,[i,m]):b[C+1].push(i,m)}else b.push(e,m)}}}function a1(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Sf(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function Q2(n,t,e,i,r){return Bf(this.multi,[])}function K2(n,t,e,i,r){let s=this.multi,d;if(this.providerFactory){let u=this.providerFactory.componentProviders,m=mc(i,i[he],this.providerFactory.index,r);d=m.slice(0,u),Bf(s,d);for(let b=u;b<m.length;b++)d.push(m[b])}else d=[],Bf(s,d);return d}function Bf(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function Y2(n,t,e,i,r,s){let d=new Pr(n,e,I,null);return d.multi=[],d.index=t,d.componentProviders=0,a1(d,r,i&&!e),d}function En(n,t){return e=>{e.providersResolver=(i,r)=>xv(i,r?r(n):n,!1),t&&(e.viewProvidersResolver=(i,r)=>xv(i,r?r(t):t,!0))}}function s1(n,t){let e=n[t];return e===Ht?void 0:e}function Z2(n,t,e,i,r,s){let d=t+e;return oi(n,d,r)?Fy(n,d+1,s?i.call(s,r):i(r)):s1(n,d+1)}function J2(n,t,e,i,r,s,d){let u=t+e;return g0(n,u,r,s)?Fy(n,u+2,d?i.call(d,r,s):i(r,s)):s1(n,u+2)}function ee(n,t){let e=kt(),i,r=n+St;e.firstCreatePass?(i=X2(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=ki(i.type,!0)),d,u=Ut(I);try{let m=uc(!1),b=s();return uc(m),zm(e,Te(),r,b),b}finally{Ut(u)}}function X2(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function jc(n,t,e){let i=n+St,r=Te(),s=Hm(r,i);return l1(r,i)?Z2(r,ef(),t,s.transform,e,s):s.transform(e)}function te(n,t,e,i){let r=n+St,s=Te(),d=Hm(s,r);return l1(s,r)?J2(s,ef(),t,d.transform,e,i,d):d.transform(e,i)}function l1(n,t){return n[he].data[t].pure}var rc=null;function c1(n){rc!==null&&(n.defaultEncapsulation!==rc.defaultEncapsulation||n.preserveWhitespaces!==rc.preserveWhitespaces)||(rc=n)}var Cc=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},M0=(()=>{class n{compileModuleSync(e){return new Ua(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=Tm(e),s=ry(r.declarations).reduce((d,u)=>{let m=yi(u);return m&&d.push(new Dr(m)),d},[]);return new Cc(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d1=new X("");var u1=(()=>{class n{applicationErrorHandler=V(Cn);appRef=V(ai);taskService=V(bi);ngZone=V(st);zonelessEnabled=V(Ra);tracing=V(Si,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ct;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_a):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(uf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?lf:sf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_a+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function p1(){return[{provide:Ri,useExisting:u1},{provide:st,useClass:va},{provide:Ra,useValue:!0}]}function eI(){return typeof $localize<"u"&&$localize.locale||Xa}var wo=new X("",{factory:()=>V(wo,{optional:!0,skipSelf:!0})||eI()});function Io(n,t){return il(n,t?.equal)}var b1=Symbol("InputSignalNode#UNSET"),pI=ce(N({},rl),{transformFn:void 0,applyValueToInputSignal(n,t){sa(n,t)}});function C1(n,t){let e=Object.create(pI);e.value=n,e.transformFn=t?.transform;function i(){if(ra(e),e.value===b1){let r=null;throw new F(-950,r)}return e.value}return i[Bt]=e,i}var Bc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Ha(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function m1(n,t){return C1(n,t)}function mI(n){return C1(b1,n)}var x1=(m1.required=mI,m1);function fI(n,t,e){let i=new Ua(e);return Promise.resolve(i)}function f1(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var Wc=new X(""),gI=new X("");function es(n){return!n.moduleRef}function hI(n){let t=es(n)?n.r3Injector:n.moduleRef.injector,e=t.get(st);return e.run(()=>{es(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(Cn),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),es(n)){let s=()=>t.destroy(),d=n.platformInjector.get(Wc);d.add(s),t.onDestroy(()=>{r.unsubscribe(),d.delete(s)})}else{let s=()=>n.moduleRef.destroy(),d=n.platformInjector.get(Wc);d.add(s),n.moduleRef.onDestroy(()=>{La(n.allPlatformModules,n.moduleRef),r.unsubscribe(),d.delete(s)})}return vI(i,e,()=>{let s=t.get(bi),d=s.add(),u=t.get(C0);return u.runInitializers(),u.donePromise.then(()=>{let m=t.get(wo,Xa);if(Yy(m||Xa),!t.get(gI,!0))return es(n)?t.get(ai):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(es(n)){let C=t.get(ai);return n.rootComponent!==void 0&&C.bootstrap(n.rootComponent),C}else return S1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(d))})})}var S1;function g1(){S1=_I}function _I(n,t){let e=n.injector.get(ai);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new F(-403,!1);t.push(n)}function vI(n,t,e){try{let i=e();return Wi(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n(i)),i}}var M1=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=[p1(),...i?.applicationProviders??[],$_],s=Uy(e.moduleType,this.injector,r);return g1(),hI({moduleRef:s,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=x0({},i);return g1(),fI(this.injector,r,e).then(s=>this.bootstrapModuleFactory(s,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(Wc,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||n)(j(Tt))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),D0=null;function yI(n){if(O0())throw new F(400,!1);Qy(),D0=n;let t=n.get(M1);return xI(n),t}function T0(n,t,e=[]){let i=`Platform: ${t}`,r=new X(i);return(s=[])=>{let d=O0();if(!d){let u=[...e,...s,{provide:r,useValue:!0}];d=n?.(u)??yI(bI(u,i))}return CI(r)}}function bI(n=[],t){return Tt.create({name:t,providers:[{provide:Ca,useValue:"platform"},{provide:Wc,useValue:new Set([()=>D0=null])},...n]})}function CI(n){let t=O0();if(!t)throw new F(-401,!1);return t}function O0(){return D0?.get(M1)??null}function xI(n){let t=n.get(Mc,null);gt(n,()=>{t?.forEach(e=>e())})}var Gi=(()=>{class n{static __NG_ELEMENT_ID__=SI}return n})();function SI(n){return MI(Nt(),Te(),(n&16)===16)}function MI(n,t,e){if(Li(n)&&!e){let i=yn(n.index,t);return new Bi(i,i)}else if(n.type&175){let i=t[_n];return new Bi(i,t)}return null}var E0=class{constructor(){}supports(t){return f0(t)}create(t){return new w0(t)}},EI=(n,t)=>t,w0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||EI}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let d=!i||e&&e.currentIndex<h1(i,r,s)?e:i,u=h1(d,r,s),m=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,d.previousIndex==null)r++;else{s||(s=[]);let b=u-r,C=m-r;if(b!=C){for(let O=0;O<b;O++){let P=O<s.length?s[O]:s[O]=0,k=P+O;C<=k&&k<b&&(s[O]=P+1)}let w=d.previousIndex;s[w]=C-b}}u!==m&&t(d,u,m)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!f0(t))throw new F(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,d;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)s=t[u],d=this._trackByFn(u,s),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,s,d,u),i=!0):(i&&(e=this._verifyReinsertion(e,s,d,u)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,Ry(t,u=>{d=this._trackByFn(r,u),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,u,d,r),i=!0):(i&&(e=this._verifyReinsertion(e,u,d,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new I0(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Uc),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},I0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},P0=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Uc=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new P0,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function h1(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function _1(){return new k0([new E0])}var k0=(()=>{class n{factories;static \u0275prov=R({token:n,providedIn:"root",factory:_1});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let i=V(n,{optional:!0,skipSelf:!0});return n.create(e,i||_1())}}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new F(901,!1)}}return n})();var E1=T0(null,"core",[]),w1=(()=>{class n{constructor(e){}static \u0275fac=function(i){return new(i||n)(j(ai))};static \u0275mod=ot({type:n});static \u0275inj=nt({})}return n})();function qi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function I1(n){let t=yi(n);if(!t)return null;let e=new Dr(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var P1=null;function dn(){return P1}function N0(n){P1??=n}var ts=class{},Hi=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(D1),providedIn:"platform"})}return n})(),R0=new X(""),D1=(()=>{class n extends Hi{_location;_history;_doc=V($e);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dn().getBaseHref(this._doc)}onPopState(e){let i=dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Gc(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function T1(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Bn(n){return n&&n[0]!=="?"?`?${n}`:n}var Wn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(Hc),providedIn:"root"})}return n})(),qc=new X(""),Hc=(()=>{class n extends Wn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Gc(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Bn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+Bn(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+Bn(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(j(Hi),j(qc,8))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zi=(()=>{class n{_subject=new dt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=PI(T1(O1(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Bn(i))}normalize(e){return n.stripTrailingSlash(II(this._basePath,O1(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bn(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Bn;static joinWithSlash=Gc;static stripTrailingSlash=T1;static \u0275fac=function(i){return new(i||n)(j(Wn))};static \u0275prov=R({token:n,factory:()=>wI(),providedIn:"root"})}return n})();function wI(){return new zi(j(Wn))}function II(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function O1(n){return n.replace(/\/index.html$/,"")}function PI(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var W0=(()=>{class n extends Wn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=Gc(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+Bn(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+Bn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(j(Hi),j(qc,8))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();var U0=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(U0||{});var At=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(At||{}),Ue=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ue||{}),tn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(tn||{}),nn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function V1(n){return en(n)[it.LocaleId]}function L1(n,t,e){let i=en(n),r=[i[it.DayPeriodsFormat],i[it.DayPeriodsStandalone]],s=wn(r,t);return wn(s,e)}function j1(n,t,e){let i=en(n),r=[i[it.DaysFormat],i[it.DaysStandalone]],s=wn(r,t);return wn(s,e)}function B1(n,t,e){let i=en(n),r=[i[it.MonthsFormat],i[it.MonthsStandalone]],s=wn(r,t);return wn(s,e)}function W1(n,t){let i=en(n)[it.Eras];return wn(i,t)}function ns(n,t){let e=en(n);return wn(e[it.DateFormat],t)}function is(n,t){let e=en(n);return wn(e[it.TimeFormat],t)}function rs(n,t){let i=en(n)[it.DateTimeFormat];return wn(i,t)}function si(n,t){let e=en(n),i=e[it.NumberSymbols][t];if(typeof i>"u"){if(t===nn.CurrencyDecimal)return e[it.NumberSymbols][nn.Decimal];if(t===nn.CurrencyGroup)return e[it.NumberSymbols][nn.Group]}return i}function U1(n,t){return en(n)[it.NumberFormats][t]}function G1(n){if(!n[it.ExtraData])throw new F(2303,!1)}function q1(n){let t=en(n);return G1(t),(t[it.ExtraData][2]||[]).map(i=>typeof i=="string"?A0(i):[A0(i[0]),A0(i[1])])}function H1(n,t,e){let i=en(n);G1(i);let r=[i[it.ExtraData][0],i[it.ExtraData][1]],s=wn(r,t)||[];return wn(s,e)||[]}function wn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new F(2304,!1)}function A0(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var DI=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zc={},TI=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function z1(n,t,e,i){let r=jI(n);t=Mi(e,t)||t;let d=[],u;for(;t;)if(u=TI.exec(t),u){d=d.concat(u.slice(1));let C=d.pop();if(!C)break;t=C}else{d.push(t);break}let m=r.getTimezoneOffset();i&&(m=Q1(i,m),r=LI(r,i));let b="";return d.forEach(C=>{let w=FI(C);b+=w?w(r,e,m):C==="''"?"'":C.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Zc(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Mi(n,t){let e=V1(n);if(zc[e]??={},zc[e][t])return zc[e][t];let i="";switch(t){case"shortDate":i=ns(n,tn.Short);break;case"mediumDate":i=ns(n,tn.Medium);break;case"longDate":i=ns(n,tn.Long);break;case"fullDate":i=ns(n,tn.Full);break;case"shortTime":i=is(n,tn.Short);break;case"mediumTime":i=is(n,tn.Medium);break;case"longTime":i=is(n,tn.Long);break;case"fullTime":i=is(n,tn.Full);break;case"short":let r=Mi(n,"shortTime"),s=Mi(n,"shortDate");i=$c(rs(n,tn.Short),[r,s]);break;case"medium":let d=Mi(n,"mediumTime"),u=Mi(n,"mediumDate");i=$c(rs(n,tn.Medium),[d,u]);break;case"long":let m=Mi(n,"longTime"),b=Mi(n,"longDate");i=$c(rs(n,tn.Long),[m,b]);break;case"full":let C=Mi(n,"fullTime"),w=Mi(n,"fullDate");i=$c(rs(n,tn.Full),[C,w]);break}return i&&(zc[e][t]=i),i}function $c(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Un(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let d=String(n);for(;d.length<t;)d="0"+d;return i&&(d=d.slice(d.length-t)),s+d}function OI(n,t){return Un(n,3).substring(0,t)}function lt(n,t,e=0,i=!1,r=!1){return function(s,d){let u=kI(n,s);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return OI(u,t);let m=si(d,nn.MinusSign);return Un(u,t,m,i,r)}}function kI(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new F(2301,!1)}}function ze(n,t,e=At.Format,i=!1){return function(r,s){return NI(r,s,n,t,e,i)}}function NI(n,t,e,i,r,s){switch(e){case 2:return B1(t,r,i)[n.getMonth()];case 1:return j1(t,r,i)[n.getDay()];case 0:let d=n.getHours(),u=n.getMinutes();if(s){let b=q1(t),C=H1(t,r,i),w=b.findIndex(O=>{if(Array.isArray(O)){let[P,k]=O,W=d>=P.hours&&u>=P.minutes,z=d<k.hours||d===k.hours&&u<k.minutes;if(P.hours<k.hours){if(W&&z)return!0}else if(W||z)return!0}else if(O.hours===d&&O.minutes===u)return!0;return!1});if(w!==-1)return C[w]}return L1(t,r,i)[d<12?0:1];case 3:return W1(t,i)[n.getFullYear()<=0?0:1];default:let m=e;throw new F(2302,!1)}}function Qc(n){return function(t,e,i){let r=-1*i,s=si(e,nn.MinusSign),d=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Un(d,2,s)+Un(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+Un(d,1,s);case 2:return"GMT"+(r>=0?"+":"")+Un(d,2,s)+":"+Un(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+Un(d,2,s)+":"+Un(Math.abs(r%60),2,s);default:throw new F(2310,!1)}}}var RI=0,Yc=4;function AI(n){let t=Zc(n,RI,1).getDay();return Zc(n,0,1+(t<=Yc?Yc:Yc+7)-t)}function $1(n){let t=n.getDay(),e=t===0?-3:Yc-t;return Zc(n.getFullYear(),n.getMonth(),n.getDate()+e)}function F0(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();r=1+Math.floor((d+s)/7)}else{let s=$1(e),d=AI(s.getFullYear()),u=s.getTime()-d.getTime();r=1+Math.round(u/6048e5)}return Un(r,n,si(i,nn.MinusSign))}}function Kc(n,t=!1){return function(e,i){let s=$1(e).getFullYear();return Un(s,n,si(i,nn.MinusSign),t)}}var V0={};function FI(n){if(V0[n])return V0[n];let t;switch(n){case"G":case"GG":case"GGG":t=ze(3,Ue.Abbreviated);break;case"GGGG":t=ze(3,Ue.Wide);break;case"GGGGG":t=ze(3,Ue.Narrow);break;case"y":t=lt(0,1,0,!1,!0);break;case"yy":t=lt(0,2,0,!0,!0);break;case"yyy":t=lt(0,3,0,!1,!0);break;case"yyyy":t=lt(0,4,0,!1,!0);break;case"Y":t=Kc(1);break;case"YY":t=Kc(2,!0);break;case"YYY":t=Kc(3);break;case"YYYY":t=Kc(4);break;case"M":case"L":t=lt(1,1,1);break;case"MM":case"LL":t=lt(1,2,1);break;case"MMM":t=ze(2,Ue.Abbreviated);break;case"MMMM":t=ze(2,Ue.Wide);break;case"MMMMM":t=ze(2,Ue.Narrow);break;case"LLL":t=ze(2,Ue.Abbreviated,At.Standalone);break;case"LLLL":t=ze(2,Ue.Wide,At.Standalone);break;case"LLLLL":t=ze(2,Ue.Narrow,At.Standalone);break;case"w":t=F0(1);break;case"ww":t=F0(2);break;case"W":t=F0(1,!0);break;case"d":t=lt(2,1);break;case"dd":t=lt(2,2);break;case"c":case"cc":t=lt(7,1);break;case"ccc":t=ze(1,Ue.Abbreviated,At.Standalone);break;case"cccc":t=ze(1,Ue.Wide,At.Standalone);break;case"ccccc":t=ze(1,Ue.Narrow,At.Standalone);break;case"cccccc":t=ze(1,Ue.Short,At.Standalone);break;case"E":case"EE":case"EEE":t=ze(1,Ue.Abbreviated);break;case"EEEE":t=ze(1,Ue.Wide);break;case"EEEEE":t=ze(1,Ue.Narrow);break;case"EEEEEE":t=ze(1,Ue.Short);break;case"a":case"aa":case"aaa":t=ze(0,Ue.Abbreviated);break;case"aaaa":t=ze(0,Ue.Wide);break;case"aaaaa":t=ze(0,Ue.Narrow);break;case"b":case"bb":case"bbb":t=ze(0,Ue.Abbreviated,At.Standalone,!0);break;case"bbbb":t=ze(0,Ue.Wide,At.Standalone,!0);break;case"bbbbb":t=ze(0,Ue.Narrow,At.Standalone,!0);break;case"B":case"BB":case"BBB":t=ze(0,Ue.Abbreviated,At.Format,!0);break;case"BBBB":t=ze(0,Ue.Wide,At.Format,!0);break;case"BBBBB":t=ze(0,Ue.Narrow,At.Format,!0);break;case"h":t=lt(3,1,-12);break;case"hh":t=lt(3,2,-12);break;case"H":t=lt(3,1);break;case"HH":t=lt(3,2);break;case"m":t=lt(4,1);break;case"mm":t=lt(4,2);break;case"s":t=lt(5,1);break;case"ss":t=lt(5,2);break;case"S":t=lt(6,1);break;case"SS":t=lt(6,2);break;case"SSS":t=lt(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Qc(0);break;case"ZZZZZ":t=Qc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Qc(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Qc(2);break;default:return null}return V0[n]=t,t}function Q1(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function VI(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function LI(n,t,e){let r=n.getTimezoneOffset(),s=Q1(t,r);return VI(n,-1*(s-r))}function jI(n){if(k1(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,d=1]=n.split("-").map(u=>+u);return Zc(r,s-1,d)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(DI))return BI(i)}let t=new Date(n);if(!k1(t))throw new F(2311,!1);return t}function BI(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let d=Number(n[4]||0)-e,u=Number(n[5]||0)-i,m=Number(n[6]||0),b=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,d,u,m,b),t}function k1(n){return n instanceof Date&&!isNaN(n.valueOf())}var WI=/^(\d+)?\.((\d+)(-(\d+))?)?$/,N1=22,Jc=".",os="0",UI=";",GI=",",L0="#";function qI(n,t,e,i,r,s,d=!1){let u="",m=!1;if(!isFinite(n))u=si(e,nn.Infinity);else{let b=$I(n);d&&(b=zI(b));let C=t.minInt,w=t.minFrac,O=t.maxFrac;if(s){let xe=s.match(WI);if(xe===null)throw new F(2306,!1);let qe=xe[1],be=xe[3],jt=xe[5];qe!=null&&(C=j0(qe)),be!=null&&(w=j0(be)),jt!=null?O=j0(jt):be!=null&&w>O&&(O=w)}QI(b,w,O);let P=b.digits,k=b.integerLen,W=b.exponent,z=[];for(m=P.every(xe=>!xe);k<C;k++)P.unshift(0);for(;k<0;k++)P.unshift(0);k>0?z=P.splice(k,P.length):(z=P,P=[0]);let $=[];for(P.length>=t.lgSize&&$.unshift(P.splice(-t.lgSize,P.length).join(""));P.length>t.gSize;)$.unshift(P.splice(-t.gSize,P.length).join(""));P.length&&$.unshift(P.join("")),u=$.join(si(e,i)),z.length&&(u+=si(e,r)+z.join("")),W&&(u+=si(e,nn.Exponential)+"+"+W)}return n<0&&!m?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function K1(n,t,e){let i=U1(t,U0.Decimal),r=HI(i,si(t,nn.MinusSign));return qI(n,r,t,nn.Group,nn.Decimal,e)}function HI(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(UI),r=i[0],s=i[1],d=r.indexOf(Jc)!==-1?r.split(Jc):[r.substring(0,r.lastIndexOf(os)+1),r.substring(r.lastIndexOf(os)+1)],u=d[0],m=d[1]||"";e.posPre=u.substring(0,u.indexOf(L0));for(let C=0;C<m.length;C++){let w=m.charAt(C);w===os?e.minFrac=e.maxFrac=C+1:w===L0?e.maxFrac=C+1:e.posSuf+=w}let b=u.split(GI);if(e.gSize=b[1]?b[1].length:0,e.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,s){let C=r.length-e.posPre.length-e.posSuf.length,w=s.indexOf(L0);e.negPre=s.substring(0,w).replace(/'/g,""),e.negSuf=s.slice(w+C).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function zI(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function $I(n){let t=Math.abs(n)+"",e=0,i,r,s,d,u;for((r=t.indexOf(Jc))>-1&&(t=t.replace(Jc,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===os;s++);if(s===(u=t.length))i=[0],r=1;else{for(u--;t.charAt(u)===os;)u--;for(r-=s,i=[],d=0;s<=u;s++,d++)i[d]=Number(t.charAt(s))}return r>N1&&(i=i.splice(0,N1-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function QI(n,t,e){if(t>e)throw new F(2307,!1);let i=n.digits,r=i.length-n.integerLen,s=Math.min(Math.max(t,r),e),d=s+n.integerLen,u=i[d];if(d>0){i.splice(Math.max(n.integerLen,d));for(let w=d;w<i.length;w++)i[w]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,d=s+1),i[0]=0;for(let w=1;w<d;w++)i[w]=0}if(u>=5)if(d-1<0){for(let w=0;w>d;w--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[d-1]++;for(;r<Math.max(0,s);r++)i.push(0);let m=s!==0,b=t+n.integerLen,C=i.reduceRight(function(w,O,P,k){return O=O+w,k[P]=O<10?O:O-10,m&&(k[P]===0&&P>=b?k.pop():m=!1),O>=10?1:0},0);C&&(i.unshift(C),n.integerLen++)}function j0(n){let t=parseInt(n);if(isNaN(t))throw new F(2305,!1);return t}var B0=/\s+/,R1=[],oe=(()=>{class n{_ngEl;_renderer;initialClasses=R1;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(B0):R1}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(B0):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(B0).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(I(Sn),I(jn))};static \u0275dir=We({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Xc=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},L=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,d)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Xc(r.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,d),A1(u,r)}});for(let r=0,s=i.length;r<s;r++){let u=i.get(r).context;u.index=r,u.count=s,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);A1(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(I(Nr),I(Qa),I(k0))};static \u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function A1(n,t){n.context.$implicit=t.item}var B=(()=>{class n{_viewContainer;_context=new ed;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){F1(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){F1(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(I(Nr),I(Qa))};static \u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ed=class{$implicit=null;ngIf=null};function F1(n,t){if(n&&!n.createEmbeddedView)throw new F(2020,!1)}function Y1(n,t){return new F(2100,!1)}var KI="mediumDate",Z1=new X(""),J1=new X(""),Rr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let d=i??this.defaultOptions?.dateFormat??KI,u=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return z1(e,d,s||this.locale,u)}catch(d){throw Y1(n,d.message)}}static \u0275fac=function(i){return new(i||n)(I(wo,16),I(Z1,24),I(J1,24))};static \u0275pipe=Rc({name:"date",type:n,pure:!0})}return n})();var De=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!YI(e))return null;r||=this._locale;try{let s=ZI(e);return K1(s,r,i)}catch(s){throw Y1(n,s.message)}}static \u0275fac=function(i){return new(i||n)(I(wo,16))};static \u0275pipe=Rc({name:"number",type:n,pure:!0})}return n})();function YI(n){return!(n==null||n===""||n!==n)}function ZI(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new F(2309,!1);return n}var as=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({})}return n})();function ss(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var Ar=class{};var X1="browser";var eb=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>new G0(V($e),window)})}return n})(),G0=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(ce(N({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let i=JI(this.document,t);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(vi(2400,!1))}}scrollToElement(t,e){let i=t.getBoundingClientRect(),r=i.left+this.window.pageXOffset,s=i.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(ce(N({},e),{left:r-d[0],top:s-d[1]}))}};function JI(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let d=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(d)return d}r=i.nextNode()}}return null}var ls=class{_doc;constructor(t){this._doc=t}manager},td=(()=>{class n extends ls{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(j($e))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),rd=new X(""),$0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(d=>{d.manager=this});let r=e.filter(d=>!(d instanceof td));this._plugins=r.slice().reverse();let s=e.find(d=>d instanceof td);s&&this._plugins.push(s)}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(j(rd),j(st))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),q0="ng-app-id";function tb(n){for(let t of n)t.remove()}function nb(n,t){let e=t.createElement("style");return e.textContent=n,e}function XI(n,t,e,i){let r=n.head?.querySelectorAll(`style[${q0}="${t}"],link[${q0}="${t}"]`);if(r)for(let s of r)s.removeAttribute(q0),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function z0(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Q0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,XI(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,nb);i?.forEach(r=>this.addUsage(r,this.external,z0))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(tb(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])tb(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,nb(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,z0(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(j($e),j(Sc),j(wc,8),j(za))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),H0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},K0=/%COMP%/g;var rb="%COMP%",eP=`_nghost-${rb}`,tP=`_ngcontent-${rb}`,nP=!0,iP=new X("",{factory:()=>nP});function rP(n){return tP.replace(K0,n)}function oP(n){return eP.replace(K0,n)}function ob(n,t){return t.map(e=>e.replace(K0,n))}var us=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,d,u,m=null,b=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=d,this.ngZone=u,this.nonce=m,this.tracingService=b,this.platformIsServer=!1,this.defaultRenderer=new cs(e,d,u,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof id?r.applyToHost(e):r instanceof ds&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let d=this.doc,u=this.ngZone,m=this.eventManager,b=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,w=this.platformIsServer,O=this.tracingService;switch(i.encapsulation){case Ln.Emulated:s=new id(m,b,i,this.appId,C,d,u,w,O);break;case Ln.ShadowDom:return new nd(m,e,i,d,u,this.nonce,w,O,b);case Ln.ExperimentalIsolatedShadowDom:return new nd(m,e,i,d,u,this.nonce,w,O);default:s=new ds(m,b,i,C,d,u,w,O);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(j($0),j(Q0),j(Sc),j(iP),j($e),j(st),j(wc),j(Si,8))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),cs=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(H0[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ib(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(ib(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new F(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=H0[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=H0[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ri.DashCase|ri.Important)?t.style.setProperty(e,i,r&ri.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ri.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=dn().getGlobalEventTarget(this.doc,t),!t))throw new F(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function ib(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nd=class extends cs{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,i,r,s,d,u,m,b){super(t,r,s,u,m),this.hostEl=e,this.sharedStylesHost=b,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let C=i.styles;C=ob(i.id,C);for(let O of C){let P=document.createElement("style");d&&P.setAttribute("nonce",d),P.textContent=O,this.shadowRoot.appendChild(P)}let w=i.getExternalStyles?.();if(w)for(let O of w){let P=z0(O,r);d&&P.setAttribute("nonce",d),this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ds=class extends cs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,d,u,m,b){super(t,s,d,u,m),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let C=i.styles;this.styles=b?ob(b,C):C,this.styleUrls=i.getExternalStyles?.(b)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Co.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},id=class extends ds{contentAttr;hostAttr;constructor(t,e,i,r,s,d,u,m,b){let C=r+"-"+i.id;super(t,e,i,s,d,u,m,b,C),this.contentAttr=rP(C),this.hostAttr=oP(C)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var od=class n extends ts{supportsDOMEvents=!0;static makeCurrent(){N0(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=aP();return e==null?null:sP(e)}resetBaseElement(){ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ss(document.cookie,t)}},ps=null;function aP(){return ps=ps||document.head.querySelector("base"),ps?ps.getAttribute("href"):null}function sP(n){return new URL(n,document.baseURI).pathname}var ad=class{addToWindow(t){xt.getAngularTestability=(i,r=!0)=>{let s=t.findTestabilityInTree(i,r);if(s==null)throw new F(5103,!1);return s},xt.getAllAngularTestabilities=()=>t.getAllTestabilities(),xt.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=xt.getAllAngularTestabilities(),s=r.length,d=function(){s--,s==0&&i()};r.forEach(u=>{u.whenStable(d)})};xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?dn().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},lP=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),ab=["alt","control","meta","shift"],cP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},sb=(()=>{class n extends ls{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let d=n.parseEventName(i),u=n.eventCallback(d.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dn().onAndCancel(e,d.domEventName,u,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),d="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),d="code."),ab.forEach(b=>{let C=i.indexOf(b);C>-1&&(i.splice(C,1),d+=b+".")}),d+=s,i.length!=0||s.length===0)return null;let m={};return m.domEventName=r,m.fullKey=d,m}static matchEventFullKeyCode(e,i){let r=cP[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),ab.forEach(d=>{if(d!==r){let u=dP[d];u(e)&&(s+=d+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(j($e))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();function uP(){od.makeCurrent()}function pP(){return new Zn}function mP(){return Gf(document),document}var fP=[{provide:za,useValue:X1},{provide:Mc,useValue:uP,multi:!0},{provide:$e,useFactory:mP}],Y0=T0(E1,"browser",fP);var gP=[{provide:Fc,useClass:ad},{provide:Ac,useClass:Ya},{provide:Ya,useClass:Ya}],hP=[{provide:Ca,useValue:"root"},{provide:Zn,useFactory:pP},{provide:rd,useClass:td,multi:!0},{provide:rd,useClass:sb,multi:!0},us,Q0,$0,{provide:Ci,useExisting:us},{provide:Ar,useClass:lP},[]],ms=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({providers:[...hP,...gP],imports:[as,w1]})}return n})();var $i=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let d=this.headers.get(e);if(!d)return;d=d.filter(u=>s.indexOf(u)===-1),d.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var ld=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},cd=class{encodeKey(t){return lb(t)}encodeValue(t){return lb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function _P(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[d,u]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],m=e.get(d)||[];m.push(u),e.set(d,m)}),e}var vP=/%(\d[a-f0-9])/gi,yP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lb(n){return encodeURIComponent(n).replace(vP,(t,e)=>yP[e]??t)}function sd(n){return`${n}`}var Ft=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new cd,t.fromString){if(t.fromObject)throw new F(2805,!1);this.map=_P(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(sd):[sd(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(sd(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(sd(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function bP(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function db(n){return typeof Blob<"u"&&n instanceof Blob}function ub(n){return typeof FormData<"u"&&n instanceof FormData}function CP(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var pb="Content-Type",mb="Accept",gb="text/plain",hb="application/json",xP=`${hb}, ${gb}, */*`,Po=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let s;if(bP(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new F(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new $i,this.context??=new ld,!this.params)this.params=new Ft,this.urlWithParams=e;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),m=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+m+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cb(this.body)||db(this.body)||ub(this.body)||CP(this.body)?this.body:this.body instanceof Ft?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ub(this.body)?null:db(this.body)?this.body.type||null:cb(this.body)?null:typeof this.body=="string"?gb:this.body instanceof Ft?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?hb:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.keepalive??this.keepalive,d=t.priority||this.priority,u=t.cache||this.cache,m=t.mode||this.mode,b=t.redirect||this.redirect,C=t.credentials||this.credentials,w=t.referrer||this.referrer,O=t.integrity||this.integrity,P=t.referrerPolicy||this.referrerPolicy,k=t.transferCache??this.transferCache,W=t.timeout??this.timeout,z=t.body!==void 0?t.body:this.body,$=t.withCredentials??this.withCredentials,xe=t.reportProgress??this.reportProgress,qe=t.headers||this.headers,be=t.params||this.params,jt=t.context??this.context;return t.setHeaders!==void 0&&(qe=Object.keys(t.setHeaders).reduce((It,Ye)=>It.set(Ye,t.setHeaders[Ye]),qe)),t.setParams&&(be=Object.keys(t.setParams).reduce((It,Ye)=>It.set(Ye,t.setParams[Ye]),be)),new n(e,i,z,{params:be,headers:qe,context:jt,reportProgress:xe,responseType:r,withCredentials:$,transferCache:k,keepalive:s,cache:u,priority:d,timeout:W,mode:m,redirect:b,credentials:C,referrer:w,integrity:O,referrerPolicy:P})}},Fr=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Fr||{}),To=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,e=200,i="OK"){this.headers=t.headers||new $i,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},dd=class n extends To{constructor(t={}){super(t)}type=Fr.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},fs=class n extends To{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Fr.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Do=class extends To{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},SP=200,MP=204;var EP=new X("");var wP=/^\)\]\}',?\n/;var J0=(()=>{class n{xhrFactory;tracingService=V(Si,{optional:!0});constructor(e){this.xhrFactory=e}maybePropagateTrace(e){return this.tracingService?.propagate?this.tracingService.propagate(e):e}handle(e){if(e.method==="JSONP")throw new F(-2800,!1);let i=this.xhrFactory;return me(null).pipe(Wt(()=>new Ie(s=>{let d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((z,$)=>d.setRequestHeader(z,$.join(","))),e.headers.has(mb)||d.setRequestHeader(mb,xP),!e.headers.has(pb)){let z=e.detectContentTypeHeader();z!==null&&d.setRequestHeader(pb,z)}if(e.timeout&&(d.timeout=e.timeout),e.responseType){let z=e.responseType.toLowerCase();d.responseType=z!=="json"?z:"text"}let u=e.serializeBody(),m=null,b=()=>{if(m!==null)return m;let z=d.statusText||"OK",$=new $i(d.getAllResponseHeaders()),xe=d.responseURL||e.url;return m=new dd({headers:$,status:d.status,statusText:z,url:xe}),m},C=this.maybePropagateTrace(()=>{let{headers:z,status:$,statusText:xe,url:qe}=b(),be=null;$!==MP&&(be=typeof d.response>"u"?d.responseText:d.response),$===0&&($=be?SP:0);let jt=$>=200&&$<300;if(e.responseType==="json"&&typeof be=="string"){let It=be;be=be.replace(wP,"");try{be=be!==""?JSON.parse(be):null}catch(Ye){be=It,jt&&(jt=!1,be={error:Ye,text:be})}}jt?(s.next(new fs({body:be,headers:z,status:$,statusText:xe,url:qe||void 0})),s.complete()):s.error(new Do({error:be,headers:z,status:$,statusText:xe,url:qe||void 0}))}),w=this.maybePropagateTrace(z=>{let{url:$}=b(),xe=new Do({error:z,status:d.status||0,statusText:d.statusText||"Unknown Error",url:$||void 0});s.error(xe)}),O=w;e.timeout&&(O=this.maybePropagateTrace(z=>{let{url:$}=b(),xe=new Do({error:new DOMException("Request timed out","TimeoutError"),status:d.status||0,statusText:d.statusText||"Request timeout",url:$||void 0});s.error(xe)}));let P=!1,k=this.maybePropagateTrace(z=>{P||(s.next(b()),P=!0);let $={type:Fr.DownloadProgress,loaded:z.loaded};z.lengthComputable&&($.total=z.total),e.responseType==="text"&&d.responseText&&($.partialText=d.responseText),s.next($)}),W=this.maybePropagateTrace(z=>{let $={type:Fr.UploadProgress,loaded:z.loaded};z.lengthComputable&&($.total=z.total),s.next($)});return d.addEventListener("load",C),d.addEventListener("error",w),d.addEventListener("timeout",O),d.addEventListener("abort",w),e.reportProgress&&(d.addEventListener("progress",k),u!==null&&d.upload&&d.upload.addEventListener("progress",W)),d.send(u),s.next({type:Fr.Sent}),()=>{d.removeEventListener("error",w),d.removeEventListener("abort",w),d.removeEventListener("load",C),d.removeEventListener("timeout",O),e.reportProgress&&(d.removeEventListener("progress",k),u!==null&&d.upload&&d.upload.removeEventListener("progress",W)),d.readyState!==d.DONE&&d.abort()}})))}static \u0275fac=function(i){return new(i||n)(j(Ar))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _b(n,t){return t(n)}function IP(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function PP(n,t,e){return(i,r)=>gt(e,()=>t(i,s=>n(s,r)))}var pd=new X(""),X0=new X("",{factory:()=>[]}),vb=new X(""),eg=new X("",{providedIn:"root",factory:()=>!0});function DP(){let n=null;return(t,e)=>{n===null&&(n=(V(pd,{optional:!0})??[]).reduceRight(IP,_b));let i=V(Aa);if(V(eg)){let s=i.add();return n(t,e).pipe(ao(s))}else return n(t,e)}}var tg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=j(J0),r},providedIn:"root"})}return n})();var ud=(()=>{class n{backend;injector;chain=null;pendingTasks=V(Aa);contributeToStability=V(eg);constructor(e,i){this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(X0),...this.injector.get(vb,[])]));this.chain=i.reduceRight((r,s)=>PP(r,s,this.injector),_b)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(ao(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(j(tg),j(tt))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ng=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=j(ud),r},providedIn:"root"})}return n})();function Z0(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var fe=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Po)s=e;else{let m;r.headers instanceof $i?m=r.headers:m=new $i(r.headers);let b;r.params&&(r.params instanceof Ft?b=r.params:b=new Ft({fromObject:r.params})),s=new Po(e,i,r.body!==void 0?r.body:null,{headers:m,context:r.context,params:b,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let d=me(s).pipe(Oi(m=>this.handler.handle(m)));if(e instanceof Po||r.observe==="events")return d;let u=d.pipe(Zt(m=>m instanceof fs));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(Pe(m=>{if(m.body!==null&&!(m.body instanceof ArrayBuffer))throw new F(2806,!1);return m.body}));case"blob":return u.pipe(Pe(m=>{if(m.body!==null&&!(m.body instanceof Blob))throw new F(2807,!1);return m.body}));case"text":return u.pipe(Pe(m=>{if(m.body!==null&&typeof m.body!="string")throw new F(2808,!1);return m.body}));case"json":default:return u.pipe(Pe(m=>m.body))}case"response":return u;default:throw new F(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Ft().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Z0(r,i))}post(e,i,r={}){return this.request("POST",e,Z0(r,i))}put(e,i,r={}){return this.request("PUT",e,Z0(r,i))}static \u0275fac=function(i){return new(i||n)(j(ng))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TP=new X("",{factory:()=>!0}),OP="XSRF-TOKEN",kP=new X("",{providedIn:"root",factory:()=>OP}),NP="X-XSRF-TOKEN",RP=new X("",{providedIn:"root",factory:()=>NP}),AP=(()=>{class n{cookieName=V(kP);doc=V($e);lastCookieString="";lastToken=null;parseCount=0;getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ss(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=j(AP),r},providedIn:"root"})}return n})();function FP(n,t){if(!V(TP)||n.method==="GET"||n.method==="HEAD")return t(n);try{let r=V(Hi).href,{origin:s}=new URL(r),{origin:d}=new URL(n.url,s);if(s!==d)return t(n)}catch{return t(n)}let e=V(yb).getToken(),i=V(RP);return e!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,e)})),t(n)}var ig=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(ig||{});function VP(n,t){return{\u0275kind:n,\u0275providers:t}}function bb(...n){let t=[fe,ud,{provide:ng,useExisting:ud},{provide:tg,useFactory:()=>V(EP,{optional:!0})??V(J0)},{provide:X0,useValue:FP,multi:!0}];for(let e of n)t.push(...e.\u0275providers);return br(t)}var fb=new X("");function Cb(){return VP(ig.LegacyInterceptors,[{provide:fb,useFactory:DP},{provide:X0,useExisting:fb,multi:!0}])}var rg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({providers:[bb(Cb())]})}return n})();var xb=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(j($e))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Se=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Se||{}),Gn="*";function Sb(n,t=null){return{type:Se.Sequence,steps:n,options:t}}function og(n){return{type:Se.Style,styles:n,offset:null}}var Ei=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Oo=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==s&&this._onFinish()}),d.onDestroy(()=>{++i==s&&this._onDestroy()}),d.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((d,u)=>Math.max(d,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},gs="!";function Mb(n){return new F(3e3,!1)}function jP(){return new F(3100,!1)}function BP(){return new F(3101,!1)}function WP(n){return new F(3001,!1)}function UP(n){return new F(3003,!1)}function GP(n){return new F(3004,!1)}function wb(n,t){return new F(3005,!1)}function Ib(){return new F(3006,!1)}function Pb(){return new F(3007,!1)}function Db(n,t){return new F(3008,!1)}function Tb(n){return new F(3002,!1)}function Ob(n,t,e,i,r){return new F(3010,!1)}function kb(){return new F(3011,!1)}function Nb(){return new F(3012,!1)}function Rb(){return new F(3200,!1)}function Ab(){return new F(3202,!1)}function Fb(){return new F(3013,!1)}function Vb(n){return new F(3014,!1)}function Lb(n){return new F(3015,!1)}function jb(n){return new F(3016,!1)}function Bb(n,t){return new F(3404,!1)}function qP(n){return new F(3502,!1)}function Wb(n){return new F(3503,!1)}function Ub(){return new F(3300,!1)}function Gb(n){return new F(3504,!1)}function qb(n){return new F(3301,!1)}function Hb(n,t){return new F(3302,!1)}function zb(n){return new F(3303,!1)}function $b(n,t){return new F(3400,!1)}function Qb(n){return new F(3401,!1)}function Kb(n){return new F(3402,!1)}function Yb(n,t){return new F(3505,!1)}function wi(n){switch(n.length){case 0:return new Ei;case 1:return n[0];default:return new Oo(n)}}function cg(n,t,e=new Map,i=new Map){let r=[],s=[],d=-1,u=null;if(t.forEach(m=>{let b=m.get("offset"),C=b==d,w=C&&u||new Map;m.forEach((O,P)=>{let k=P,W=O;if(P!=="offset")switch(k=n.normalizePropertyName(k,r),W){case gs:W=e.get(P);break;case Gn:W=i.get(P);break;default:W=n.normalizeStyleValue(P,k,W,r);break}w.set(k,W)}),C||s.push(w),u=w,d=b}),r.length)throw qP(r);return s}function md(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&ag(e,"start",n)));break;case"done":n.onDone(()=>i(e&&ag(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&ag(e,"destroy",n)));break}}function ag(n,t,e){let i=e.totalTime,r=!!e.disabled,s=fd(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),d=n._data;return d!=null&&(s._data=d),s}function fd(n,t,e,i,r="",s=0,d){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!d}}function rn(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function dg(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var HP=typeof document>"u"?null:document.documentElement;function gd(n){let t=n.parentNode||n.host||null;return t===HP?null:t}function zP(n){return n.substring(1,6)=="ebkit"}var Vr=null,Eb=!1;function Zb(n){Vr||(Vr=$P()||{},Eb=Vr.style?"WebkitAppearance"in Vr.style:!1);let t=!0;return Vr.style&&!zP(n)&&(t=n in Vr.style,!t&&Eb&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Vr.style)),t}function $P(){return typeof document<"u"?document.body:null}function ug(n,t){for(;t;){if(t===n)return!0;t=gd(t)}return!1}function pg(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var QP=1e3,mg="{{",KP="}}",fg="ng-enter",hd="ng-leave",hs="ng-trigger",_s=".ng-trigger",gg="ng-animating",_d=".ng-animating";function li(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:sg(parseFloat(t[1]),t[2])}function sg(n,t){switch(t){case"s":return n*QP;default:return n}}function vs(n,t,e){return n.hasOwnProperty("duration")?n:ZP(n,t,e)}var YP=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function ZP(n,t,e){let i,r=0,s="";if(typeof n=="string"){let d=n.match(YP);if(d===null)return t.push(Mb(n)),{duration:0,delay:0,easing:""};i=sg(parseFloat(d[1]),d[2]);let u=d[3];u!=null&&(r=sg(parseFloat(u),d[4]));let m=d[5];m&&(s=m)}else i=n;if(!e){let d=!1,u=t.length;i<0&&(t.push(jP()),d=!0),r<0&&(t.push(BP()),d=!0),d&&t.splice(u,0,Mb(n))}return{duration:i,delay:r,easing:s}}function Jb(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function qn(n,t,e){t.forEach((i,r)=>{let s=vd(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function Qi(n,t){t.forEach((e,i)=>{let r=vd(i);n.style[r]=""})}function ko(n){return Array.isArray(n)?n.length==1?n[0]:Sb(n):n}function Xb(n,t,e){let i=t.params||{},r=hg(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(WP(s))})}var lg=new RegExp(`${mg}\\s*(.+?)\\s*${KP}`,"g");function hg(n){let t=[];if(typeof n=="string"){let e;for(;e=lg.exec(n);)t.push(e[1]);lg.lastIndex=0}return t}function No(n,t,e){let i=`${n}`,r=i.replace(lg,(s,d)=>{let u=t[d];return u==null&&(e.push(UP(d)),u=""),u.toString()});return r==i?n:r}var JP=/-+([a-z0-9])/g;function vd(n){return n.replace(JP,(...t)=>t[1].toUpperCase())}function eC(n,t){return n===0||t===0}function tC(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,d)=>{i.has(d)||r.push(d),i.set(d,s)}),r.length)for(let s=1;s<t.length;s++){let d=t[s];r.forEach(u=>d.set(u,yd(n,u)))}}return t}function on(n,t,e){switch(t.type){case Se.Trigger:return n.visitTrigger(t,e);case Se.State:return n.visitState(t,e);case Se.Transition:return n.visitTransition(t,e);case Se.Sequence:return n.visitSequence(t,e);case Se.Group:return n.visitGroup(t,e);case Se.Animate:return n.visitAnimate(t,e);case Se.Keyframes:return n.visitKeyframes(t,e);case Se.Style:return n.visitStyle(t,e);case Se.Reference:return n.visitReference(t,e);case Se.AnimateChild:return n.visitAnimateChild(t,e);case Se.AnimateRef:return n.visitAnimateRef(t,e);case Se.Query:return n.visitQuery(t,e);case Se.Stagger:return n.visitStagger(t,e);default:throw GP(t.type)}}function yd(n,t){return window.getComputedStyle(n)[t]}var Ng=(()=>{class n{validateStyleProperty(e){return Zb(e)}containsElement(e,i){return ug(e,i)}getParentElement(e){return gd(e)}query(e,i,r){return pg(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,d,u=[],m){return new Ei(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),jr=class{static NOOP=new Ng},Br=class{};var XP=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Md=class extends Br{normalizePropertyName(t,e){return vd(t)}normalizeStyleValue(t,e,i,r){let s="",d=i.toString().trim();if(XP.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let u=i.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&u[1].length==0&&r.push(wb(t,i))}return d+s}};var Ed="*";function eD(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>tD(i,e,t)):e.push(n),e}function tD(n,t,e){if(n[0]==":"){let m=nD(n,e);if(typeof m=="function"){t.push(m);return}n=m}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(Lb(n)),t;let r=i[1],s=i[2],d=i[3];t.push(nC(r,d));let u=r==Ed&&d==Ed;s[0]=="<"&&!u&&t.push(nC(d,r))}function nD(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(jb(n)),"* => *"}}var bd=new Set(["true","1"]),Cd=new Set(["false","0"]);function nC(n,t){let e=bd.has(n)||Cd.has(n),i=bd.has(t)||Cd.has(t);return(r,s)=>{let d=n==Ed||n==r,u=t==Ed||t==s;return!d&&e&&typeof r=="boolean"&&(d=r?bd.has(n):Cd.has(n)),!u&&i&&typeof s=="boolean"&&(u=s?bd.has(t):Cd.has(t)),d&&u}}var pC=":self",iD=new RegExp(`s*${pC}s*,?`,"g");function mC(n,t,e,i){return new xg(n).build(t,e,i)}var iC="",xg=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new Sg(e);return this._resetContextStyleTimingState(r),on(this,ko(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=iC,t.collectedStyles=new Map,t.collectedStyles.set(iC,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,s=[],d=[];return t.name.charAt(0)=="@"&&e.errors.push(Ib()),t.definitions.forEach(u=>{if(this._resetContextStyleTimingState(e),u.type==Se.State){let m=u,b=m.name;b.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,s.push(this.visitState(m,e))}),m.name=b}else if(u.type==Se.Transition){let m=this.visitTransition(u,e);i+=m.queryCount,r+=m.depCount,d.push(m)}else e.errors.push(Pb())}),{type:Se.Trigger,name:t.name,states:s,transitions:d,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let s=new Set,d=r||{};i.styles.forEach(u=>{u instanceof Map&&u.forEach(m=>{hg(m).forEach(b=>{d.hasOwnProperty(b)||s.add(b)})})}),s.size&&e.errors.push(Db(t.name,[...s.values()]))}return{type:Se.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=on(this,ko(t.animation),e),r=eD(t.expr,e.errors);return{type:Se.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Lr(t.options)}}visitSequence(t,e){return{type:Se.Sequence,steps:t.steps.map(i=>on(this,i,e)),options:Lr(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,s=t.steps.map(d=>{e.currentTime=i;let u=on(this,d,e);return r=Math.max(r,e.currentTime),u});return e.currentTime=r,{type:Se.Group,steps:s,options:Lr(t.options)}}visitAnimate(t,e){let i=sD(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:og({});if(s.type==Se.Keyframes)r=this.visitKeyframes(s,e);else{let d=t.styles,u=!1;if(!d){u=!0;let b={};i.easing&&(b.easing=i.easing),d=og(b)}e.currentTime+=i.duration+i.delay;let m=this.visitStyle(d,e);m.isEmptyStep=u,r=m}return e.currentAnimateTimings=null,{type:Se.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let u of r)typeof u=="string"?u===Gn?i.push(u):e.errors.push(Tb(u)):i.push(new Map(Object.entries(u)));let s=!1,d=null;return i.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(d=u.get("easing"),u.delete("easing")),!s)){for(let m of u.values())if(m.toString().indexOf(mg)>=0){s=!0;break}}}),{type:Se.Style,styles:i,easing:d,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(d=>{typeof d!="string"&&d.forEach((u,m)=>{let b=e.collectedStyles.get(e.currentQuerySelector),C=b.get(m),w=!0;C&&(s!=r&&s>=C.startTime&&r<=C.endTime&&(e.errors.push(Ob(m,C.startTime,C.endTime,s,r)),w=!1),s=C.startTime),w&&b.set(m,{startTime:s,endTime:r}),e.options&&Xb(u,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:Se.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(kb()),i;let r=1,s=0,d=[],u=!1,m=!1,b=0,C=t.steps.map($=>{let xe=this._makeStyleAst($,e),qe=xe.offset!=null?xe.offset:aD(xe.styles),be=0;return qe!=null&&(s++,be=xe.offset=qe),m=m||be<0||be>1,u=u||be<b,b=be,d.push(be),xe});m&&e.errors.push(Nb()),u&&e.errors.push(Rb());let w=t.steps.length,O=0;s>0&&s<w?e.errors.push(Ab()):s==0&&(O=r/(w-1));let P=w-1,k=e.currentTime,W=e.currentAnimateTimings,z=W.duration;return C.forEach(($,xe)=>{let qe=O>0?xe==P?1:O*xe:d[xe],be=qe*z;e.currentTime=k+W.delay+be,W.duration=be,this._validateStyleAst($,e),$.offset=qe,i.styles.push($)}),i}visitReference(t,e){return{type:Se.Reference,animation:on(this,ko(t.animation),e),options:Lr(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Se.AnimateChild,options:Lr(t.options)}}visitAnimateRef(t,e){return{type:Se.AnimateRef,animation:this.visitReference(t.animation,e),options:Lr(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,d]=rD(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,rn(e.collectedStyles,e.currentQuerySelector,new Map);let u=on(this,ko(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Se.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:u,originalSelector:t.selector,options:Lr(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(Fb());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:vs(t.timings,e.errors,!0);return{type:Se.Stagger,animation:on(this,ko(t.animation),e),timings:i,options:null}}};function rD(n){let t=!!n.split(/\s*,\s*/).find(e=>e==pC);return t&&(n=n.replace(iD,"")),n=n.replace(/@\*/g,_s).replace(/@\w+/g,e=>_s+"-"+e.slice(1)).replace(/:animating/g,_d),[n,t]}function oD(n){return n?N({},n):null}var Sg=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function aD(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function sD(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=vs(n,t).duration;return _g(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=_g(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=vs(e,t);return _g(r.duration,r.delay,r.easing)}function Lr(n){return n?(n=N({},n),n.params&&(n.params=oD(n.params))):n={},n}function _g(n,t,e){return{duration:n,delay:t,easing:e}}function Rg(n,t,e,i,r,s,d=null,u=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:d,subTimeline:u}}var bs=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},lD=1,cD=":enter",dD=new RegExp(cD,"g"),uD=":leave",pD=new RegExp(uD,"g");function fC(n,t,e,i,r,s=new Map,d=new Map,u,m,b=[]){return new Mg().buildKeyframes(n,t,e,i,r,s,d,u,m,b)}var Mg=class{buildKeyframes(t,e,i,r,s,d,u,m,b,C=[]){b=b||new bs;let w=new Eg(t,e,b,r,s,C,[]);w.options=m;let O=m.delay?li(m.delay):0;w.currentTimeline.delayNextStep(O),w.currentTimeline.setStyles([d],null,w.errors,m),on(this,i,w);let P=w.timelines.filter(k=>k.containsAnimation());if(P.length&&u.size){let k;for(let W=P.length-1;W>=0;W--){let z=P[W];if(z.element===e){k=z;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([u],null,w.errors,m)}return P.length?P.map(k=>k.buildKeyframes()):[Rg(e,[],[],[],0,O,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(i,r,r.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let s=r?.delay;if(s){let d=typeof s=="number"?s:li(No(s,r?.params??{},e.errors));i.delayNextStep(d)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime,d=i.duration!=null?li(i.duration):null,u=i.delay!=null?li(i.delay):null;return d!==0&&t.forEach(m=>{let b=e.appendInstructionToTimeline(m,d,u);s=Math.max(s,b.duration+b.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),on(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==Se.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wd);let d=li(s.delay);r.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>on(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?li(t.options.delay):0;t.steps.forEach(d=>{let u=e.createSubContext(t.options);s&&u.delayNextStep(s),on(this,d,u),r=Math.max(r,u.currentTimeline.currentTime),i.push(u.currentTimeline)}),i.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?No(i,e.params,e.errors):i;return vs(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=t.style;s.type==Se.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,u=e.createSubContext().currentTimeline;u.easing=i.easing,t.styles.forEach(m=>{let b=m.offset||0;u.forwardTime(b*s),u.setStyles(m.styles,m.easing,e.errors,e.options),u.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(u),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?li(r.delay):0;s&&(e.previousNode.type===Se.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wd);let d=i,u=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=u.length;let m=null;u.forEach((b,C)=>{e.currentQueryIndex=C;let w=e.createSubContext(t.options,b);s&&w.delayNextStep(s),b===e.element&&(m=w.currentTimeline),on(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe();let O=w.currentTimeline.currentTime;d=Math.max(d,O)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,s=t.timings,d=Math.abs(s.duration),u=d*(e.currentQueryTotal-1),m=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=u-m;break;case"full":m=i.currentStaggerTime;break}let C=e.currentTimeline;m&&C.delayNextStep(m);let w=C.currentTime;on(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-w+(r.startTime-i.currentTimeline.startTime)}},wd={},Eg=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=wd;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,s,d,u,m){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=d,this.timelines=u,this.currentTimeline=m||new Id(this._driver,e,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=li(i.duration)),i.delay!=null&&(r.delay=li(i.delay));let s=i.params;if(s){let d=r.params;d||(d=this.options.params={}),Object.keys(s).forEach(u=>{(!e||!d.hasOwnProperty(u))&&(d[u]=No(s[u],d,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=wd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new wg(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,d){let u=[];if(r&&u.push(this.element),t.length>0){t=t.replace(dD,"."+this._enterClassName),t=t.replace(pD,"."+this._leaveClassName);let m=i!=1,b=this._driver.query(this.element,t,m);i!==0&&(b=i<0?b.slice(b.length+i,b.length):b.slice(0,i)),u.push(...b)}return!s&&u.length==0&&d.push(Vb(e)),u}},Id=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=lD,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Gn),this._currentKeyframe.set(e,Gn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},d=mD(t,this._globalTimelineStyles);for(let[u,m]of d){let b=No(m,s,i);this._pendingStyles.set(u,b),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Gn),this._updateStyle(u,b)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((u,m)=>{let b=new Map([...this._backFill,...u]);b.forEach((C,w)=>{C===gs?t.add(w):C===Gn&&e.add(w)}),i||b.set("offset",m/this.duration),r.push(b)});let s=[...t.values()],d=[...e.values()];if(i){let u=r[0],m=new Map(u);u.set("offset",0),m.set("offset",1),r=[u,m]}return Rg(this.element,r,s,d,this.duration,this.startTime,this.easing,!1)}},wg=class extends Id{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,s,d,u=!1){super(t,e,d.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],d=i+e,u=e/d,m=new Map(t[0]);m.set("offset",0),s.push(m);let b=new Map(t[0]);b.set("offset",rC(u)),s.push(b);let C=t.length-1;for(let w=1;w<=C;w++){let O=new Map(t[w]),P=O.get("offset"),k=e+P*i;O.set("offset",rC(k/d)),s.push(O)}i=d,e=0,r="",t=s}return Rg(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function rC(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function mD(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let s of i)e.set(s,Gn)}else for(let[s,d]of r)e.set(s,d)}),e}function oC(n,t,e,i,r,s,d,u,m,b,C,w,O){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:d,timelines:u,queriedElements:m,preStyleProps:b,postStyleProps:C,totalTime:w,errors:O}}var vg={},Pd=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return fD(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,d,u,m,b,C){let w=[],O=this.ast.options&&this.ast.options.params||vg,P=u&&u.params||vg,k=this.buildStyles(i,P,w),W=m&&m.params||vg,z=this.buildStyles(r,W,w),$=new Set,xe=new Map,qe=new Map,be=r==="void",jt={params:gC(W,O),delay:this.ast.options?.delay},It=C?[]:fC(t,e,this.ast.animation,s,d,k,z,jt,b,w),Ye=0;return It.forEach(Qt=>{Ye=Math.max(Qt.duration+Qt.delay,Ye)}),w.length?oC(e,this._triggerName,i,r,be,k,z,[],[],xe,qe,Ye,w):(It.forEach(Qt=>{let ar=Qt.element,Yr=rn(xe,ar,new Set);Qt.preStyleProps.forEach(sr=>Yr.add(sr));let gh=rn(qe,ar,new Set);Qt.postStyleProps.forEach(sr=>gh.add(sr)),ar!==e&&$.add(ar)}),oC(e,this._triggerName,i,r,be,k,z,It,[...$.values()],xe,qe,Ye))}};function fD(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}function gC(n,t){let e=N({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var Ig=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=gC(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((d,u)=>{d&&(d=No(d,r,e));let m=this.normalizer.normalizePropertyName(u,e);d=this.normalizer.normalizeStyleValue(u,m,d,e),i.set(u,d)})}),i}};function gD(n,t,e){return new Pg(n,t,e)}var Pg=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Ig(r.style,s,i))}),aC(this.states,"true","1"),aC(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Pd(t,r,this.states))}),this.fallbackTransition=hD(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(d=>d.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function hD(n,t,e){let i=[(d,u)=>!0],r={type:Se.Sequence,steps:[],options:null},s={type:Se.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Pd(n,s,t)}function aC(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var _D=new bs,Dg=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],s=mC(this._driver,e,i,r);if(i.length)throw Wb(i);this._animations.set(t,s)}_buildPlayer(t,e,i){let r=t.element,s=cg(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],s=this._animations.get(t),d,u=new Map;if(s?(d=fC(this._driver,e,s,fg,hd,new Map,new Map,i,_D,r),d.forEach(C=>{let w=rn(u,C.element,new Map);C.postStyleProps.forEach(O=>w.set(O,null))})):(r.push(Ub()),d=[]),r.length)throw Gb(r);u.forEach((C,w)=>{C.forEach((O,P)=>{C.set(P,this._driver.computeStyle(w,P,Gn))})});let m=d.map(C=>{let w=u.get(C.element);return this._buildPlayer(C,new Map,w)}),b=wi(m);return this._playersById.set(t,b),b.onDestroy(()=>this.destroy(t)),this.players.push(b),b}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw qb(t);return e}listen(t,e,i,r){let s=fd(e,"","","");return md(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let d=r[0]||{};this.create(t,e,d);return}let s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},sC="ng-animate-queued",vD=".ng-animate-queued",yg="ng-animate-disabled",yD=".ng-animate-disabled",bD="ng-star-inserted",CD=".ng-star-inserted",xD=[],hC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},SD={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Hn="__ng_removed",Cs=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=ED(r),i){let s=t,{value:d}=s,u=Fp(s,["value"]);this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},ys="void",bg=new Cs(ys),Tg=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,In(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw Hb(i,e);if(i==null||i.length==0)throw zb(e);if(!wD(i))throw $b(i,e);let s=rn(this._elementListeners,t,[]),d={name:e,phase:i,callback:r};s.push(d);let u=rn(this._engine.statesByElement,t,new Map);return u.has(e)||(In(t,hs),In(t,hs+"-"+e),u.set(e,bg)),()=>{this._engine.afterFlush(()=>{let m=s.indexOf(d);m>=0&&s.splice(m,1),this._triggers.has(e)||u.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw Qb(t);return e}trigger(t,e,i,r=!0){let s=this._getTrigger(e),d=new xs(this.id,e,t),u=this._engine.statesByElement.get(t);u||(In(t,hs),In(t,hs+"-"+e),this._engine.statesByElement.set(t,u=new Map));let m=u.get(e),b=new Cs(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&b.absorbOptions(m.options),u.set(e,b),m||(m=bg),!(b.value===ys)&&m.value===b.value){if(!DD(m.params,b.params)){let W=[],z=s.matchStyles(m.value,m.params,W),$=s.matchStyles(b.value,b.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Qi(t,z),qn(t,$)})}return}let O=rn(this._engine.playersByElement,t,[]);O.forEach(W=>{W.namespaceId==this.id&&W.triggerName==e&&W.queued&&W.destroy()});let P=s.matchTransition(m.value,b.value,t,b.params),k=!1;if(!P){if(!r)return;P=s.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:m,toState:b,player:d,isFallbackTransition:k}),k||(In(t,sC),d.onStart(()=>{Ro(t,sC)})),d.onDone(()=>{let W=this.players.indexOf(d);W>=0&&this.players.splice(W,1);let z=this._engine.playersByElement.get(t);if(z){let $=z.indexOf(d);$>=0&&z.splice($,1)}}),this.players.push(d),O.push(d),d}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,_s,!0);i.forEach(r=>{if(r[Hn])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let s=this._engine.statesByElement.get(t),d=new Map;if(s){let u=[];if(s.forEach((m,b)=>{if(d.set(b,m.value),this._triggers.has(b)){let C=this.trigger(t,b,ys,r);C&&u.push(C)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,d),i&&wi(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(s=>{let d=s.name;if(r.has(d))return;r.add(d);let m=this._triggers.get(d).fallbackTransition,b=i.get(d)||bg,C=new Cs(ys),w=new xs(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:m,fromState:b,toState:C,player:w,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let d=t;for(;d=d.parentNode;)if(i.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let s=t[Hn];(!s||s===hC)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){In(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,d=this._elementListeners.get(s);d&&d.forEach(u=>{if(u.name==i.triggerName){let m=fd(s,i.triggerName,i.fromState.value,i.toState.value);m._data=t,md(i.player,u.phase,m,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,d=r.transition.ast.depCount;return s==0||d==0?s-d:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Og=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new Tg(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let d=!1,u=this.driver.getParentElement(e);for(;u;){let m=r.get(u);if(m){let b=i.indexOf(m);i.splice(b+1,0,t),d=!0;break}u=this.driver.getParentElement(u)}d||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,i,r){if(xd(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!xd(e))return;let s=e[Hn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){let d=this._fetchNamespace(t);d&&d.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),In(t,yg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ro(t,yg))}removeNode(t,e,i){if(xd(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Hn]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return xd(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,_s,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,_d,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return wi(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Hn];if(e&&e.setForRemoval){if(t[Hn]=hC,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(yg)&&this.markElementAsDisabled(t,!1),this.driver.query(t,yD,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];In(r,bD)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?wi(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw Kb(t)}_flushAnimations(t,e){let i=new bs,r=[],s=new Map,d=[],u=new Map,m=new Map,b=new Map,C=new Set;this.disabledNodes.forEach(ne=>{C.add(ne);let se=this.driver.query(ne,vD,!0);for(let de=0;de<se.length;de++)C.add(se[de])});let w=this.bodyNode,O=Array.from(this.statesByElement.keys()),P=dC(O,this.collectedEnterElements),k=new Map,W=0;P.forEach((ne,se)=>{let de=fg+W++;k.set(se,de),ne.forEach(ke=>In(ke,de))});let z=[],$=new Set,xe=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){let se=this.collectedLeaveElements[ne],de=se[Hn];de&&de.setForRemoval&&(z.push(se),$.add(se),de.hasAnimation?this.driver.query(se,CD,!0).forEach(ke=>$.add(ke)):xe.add(se))}let qe=new Map,be=dC(O,Array.from($));be.forEach((ne,se)=>{let de=hd+W++;qe.set(se,de),ne.forEach(ke=>In(ke,de))}),t.push(()=>{P.forEach((ne,se)=>{let de=k.get(se);ne.forEach(ke=>Ro(ke,de))}),be.forEach((ne,se)=>{let de=qe.get(se);ne.forEach(ke=>Ro(ke,de))}),z.forEach(ne=>{this.processLeaveNode(ne)})});let jt=[],It=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(e).forEach(de=>{let ke=de.player,ft=de.element;if(jt.push(ke),this.collectedEnterElements.length){let Pt=ft[Hn];if(Pt&&Pt.setForMove){if(Pt.previousTriggersValues&&Pt.previousTriggersValues.has(de.triggerName)){let lr=Pt.previousTriggersValues.get(de.triggerName),fn=this.statesByElement.get(de.element);if(fn&&fn.has(de.triggerName)){let Ys=fn.get(de.triggerName);Ys.value=lr,fn.set(de.triggerName,Ys)}}ke.destroy();return}}let Kn=!w||!this.driver.containsElement(w,ft),sn=qe.get(ft),Di=k.get(ft),Ze=this._buildInstruction(de,i,Di,sn,Kn);if(Ze.errors&&Ze.errors.length){It.push(Ze);return}if(Kn){ke.onStart(()=>Qi(ft,Ze.fromStyles)),ke.onDestroy(()=>qn(ft,Ze.toStyles)),r.push(ke);return}if(de.isFallbackTransition){ke.onStart(()=>Qi(ft,Ze.fromStyles)),ke.onDestroy(()=>qn(ft,Ze.toStyles)),r.push(ke);return}let vh=[];Ze.timelines.forEach(Pt=>{Pt.stretchStartingKeyframe=!0,this.disabledNodes.has(Pt.element)||vh.push(Pt)}),Ze.timelines=vh,i.append(ft,Ze.timelines);let nS={instruction:Ze,player:ke,element:ft};d.push(nS),Ze.queriedElements.forEach(Pt=>rn(u,Pt,[]).push(ke)),Ze.preStyleProps.forEach((Pt,lr)=>{if(Pt.size){let fn=m.get(lr);fn||m.set(lr,fn=new Set),Pt.forEach((Ys,Ap)=>fn.add(Ap))}}),Ze.postStyleProps.forEach((Pt,lr)=>{let fn=b.get(lr);fn||b.set(lr,fn=new Set),Pt.forEach((Ys,Ap)=>fn.add(Ap))})});if(It.length){let ne=[];It.forEach(se=>{ne.push(Yb(se.triggerName,se.errors))}),jt.forEach(se=>se.destroy()),this.reportError(ne)}let Ye=new Map,Qt=new Map;d.forEach(ne=>{let se=ne.element;i.has(se)&&(Qt.set(se,se),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,Ye))}),r.forEach(ne=>{let se=ne.element;this._getPreviousPlayers(se,!1,ne.namespaceId,ne.triggerName,null).forEach(ke=>{rn(Ye,se,[]).push(ke),ke.destroy()})});let ar=z.filter(ne=>uC(ne,m,b)),Yr=new Map;cC(Yr,this.driver,xe,b,Gn).forEach(ne=>{uC(ne,m,b)&&ar.push(ne)});let sr=new Map;P.forEach((ne,se)=>{cC(sr,this.driver,new Set(ne),m,gs)}),ar.forEach(ne=>{let se=Yr.get(ne),de=sr.get(ne);Yr.set(ne,new Map([...se?.entries()??[],...de?.entries()??[]]))});let Rp=[],hh=[],_h={};d.forEach(ne=>{let{element:se,player:de,instruction:ke}=ne;if(i.has(se)){if(C.has(se)){de.onDestroy(()=>qn(se,ke.toStyles)),de.disabled=!0,de.overrideTotalTime(ke.totalTime),r.push(de);return}let ft=_h;if(Qt.size>1){let sn=se,Di=[];for(;sn=sn.parentNode;){let Ze=Qt.get(sn);if(Ze){ft=Ze;break}Di.push(sn)}Di.forEach(Ze=>Qt.set(Ze,ft))}let Kn=this._buildAnimation(de.namespaceId,ke,Ye,s,sr,Yr);if(de.setRealPlayer(Kn),ft===_h)Rp.push(de);else{let sn=this.playersByElement.get(ft);sn&&sn.length&&(de.parentPlayer=wi(sn)),r.push(de)}}else Qi(se,ke.fromStyles),de.onDestroy(()=>qn(se,ke.toStyles)),hh.push(de),C.has(se)&&r.push(de)}),hh.forEach(ne=>{let se=s.get(ne.element);if(se&&se.length){let de=wi(se);ne.setRealPlayer(de)}}),r.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<z.length;ne++){let se=z[ne],de=se[Hn];if(Ro(se,hd),de&&de.hasAnimation)continue;let ke=[];if(u.size){let Kn=u.get(se);Kn&&Kn.length&&ke.push(...Kn);let sn=this.driver.query(se,_d,!0);for(let Di=0;Di<sn.length;Di++){let Ze=u.get(sn[Di]);Ze&&Ze.length&&ke.push(...Ze)}}let ft=ke.filter(Kn=>!Kn.destroyed);ft.length?ID(this,se,ft):this.processLeaveNode(se)}return z.length=0,Rp.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();let se=this.players.indexOf(ne);this.players.splice(se,1)}),ne.play()}),Rp}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let d=[];if(e){let u=this.playersByQueriedElement.get(t);u&&(d=u)}else{let u=this.playersByElement.get(t);if(u){let m=!s||s==ys;u.forEach(b=>{b.queued||!m&&b.triggerName!=r||d.push(b)})}}return(i||r)&&(d=d.filter(u=>!(i&&i!=u.namespaceId||r&&r!=u.triggerName))),d}_beforeAnimationBuild(t,e,i){let r=e.triggerName,s=e.element,d=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:r;for(let m of e.timelines){let b=m.element,C=b!==s,w=rn(i,b,[]);this._getPreviousPlayers(b,C,d,u,e.toState).forEach(P=>{let k=P.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),P.destroy(),w.push(P)})}Qi(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,d){let u=e.triggerName,m=e.element,b=[],C=new Set,w=new Set,O=e.timelines.map(k=>{let W=k.element;C.add(W);let z=W[Hn];if(z&&z.removedBeforeQueried)return new Ei(k.duration,k.delay);let $=W!==m,xe=PD((i.get(W)||xD).map(Ye=>Ye.getRealPlayer())).filter(Ye=>{let Qt=Ye;return Qt.element?Qt.element===W:!1}),qe=s.get(W),be=d.get(W),jt=cg(this._normalizer,k.keyframes,qe,be),It=this._buildPlayer(k,jt,xe);if(k.subTimeline&&r&&w.add(W),$){let Ye=new xs(t,u,W);Ye.setRealPlayer(It),b.push(Ye)}return It});b.forEach(k=>{rn(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>MD(this.playersByQueriedElement,k.element,k))}),C.forEach(k=>In(k,gg));let P=wi(O);return P.onDestroy(()=>{C.forEach(k=>Ro(k,gg)),qn(m,e.toStyles)}),w.forEach(k=>{rn(r,k,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ei(t.duration,t.delay)}},xs=class{namespaceId;triggerName;element;_player=new Ei;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>md(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){rn(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function MD(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function ED(n){return n??null}function xd(n){return n&&n.nodeType===1}function wD(n){return n=="start"||n=="done"}function lC(n,t){let e=n.style.display;return n.style.display=t??"none",e}function cC(n,t,e,i,r){let s=[];e.forEach(m=>s.push(lC(m)));let d=[];i.forEach((m,b)=>{let C=new Map;m.forEach(w=>{let O=t.computeStyle(b,w,r);C.set(w,O),(!O||O.length==0)&&(b[Hn]=SD,d.push(b))}),n.set(b,C)});let u=0;return e.forEach(m=>lC(m,s[u++])),d}function dC(n,t){let e=new Map;if(n.forEach(u=>e.set(u,[])),t.length==0)return e;let i=1,r=new Set(t),s=new Map;function d(u){if(!u)return i;let m=s.get(u);if(m)return m;let b=u.parentNode;return e.has(b)?m=b:r.has(b)?m=i:m=d(b),s.set(u,m),m}return t.forEach(u=>{let m=d(u);m!==i&&e.get(m).push(u)}),e}function In(n,t){n.classList?.add(t)}function Ro(n,t){n.classList?.remove(t)}function ID(n,t,e){wi(e).onDone(()=>n.processLeaveNode(t))}function PD(n){let t=[];return _C(n,t),t}function _C(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof Oo?_C(i.players,t):t.push(i)}}function DD(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function uC(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}var Ao=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new Og(t.body,e,i),this._timelineEngine=new Dg(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){let d=t+"-"+r,u=this._triggerCache[d];if(!u){let m=[],b=[],C=mC(this._driver,s,m,b);if(m.length)throw Bb(r,m);u=gD(r,C,this._normalizer),this._triggerCache[d]=u}this._transitionEngine.registerTrigger(e,r,u)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[s,d]=dg(i),u=r;this._timelineEngine.command(s,e,d,u)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if(i.charAt(0)=="@"){let[d,u]=dg(i);return this._timelineEngine.listen(d,e,u,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function TD(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Cg(t[0]),t.length>1&&(i=Cg(t[t.length-1]))):t instanceof Map&&(e=Cg(t)),e||i?new OD(n,e,i):null}var OD=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&qn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qn(this._element,this._initialStyles),this._endStyles&&(qn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qi(this._element,this._endStyles),this._endStyles=null),qn(this._element,this._initialStyles),this._state=3)}}return n})();function Cg(n){let t=null;return n.forEach((e,i)=>{kD(i)&&(t=t||new Map,t.set(i,e))}),t}function kD(n){return n==="display"||n==="position"}var Dd=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let t=this.keyframes,e=this._triggerWebAnimation(this.element,t,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=t.length?t[t.length-1]:new Map;let i=()=>this._onFinish();return e.addEventListener("finish",i),this.onDestroy(()=>{e.removeEventListener("finish",i)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){let r=this._convertKeyframesToObject(e);try{return t.animate(r,i)}catch{return null}}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){let t=this._buildPlayer();t&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),t.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=t*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:yd(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Td=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return ug(t,e)}getParentElement(t){return gd(t)}query(t,e,i){return pg(t,e,i)}computeStyle(t,e,i){return yd(t,e)}animate(t,e,i,r,s,d=[]){let u=r==0?"both":"forwards",m={duration:i,delay:r,fill:u};s&&(m.easing=s);let b=new Map,C=d.filter(P=>P instanceof Dd);eC(i,r)&&C.forEach(P=>{P.currentSnapshot.forEach((k,W)=>b.set(W,k))});let w=Jb(e).map(P=>new Map(P));w=tC(t,w,b);let O=TD(t,w);return new Dd(t,w,m,O)}};var Sd="@",vC="@.disabled",Od=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i,r){if(r){this.delegate.removeChild(t,e,i,r);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==Sd&&e==vC?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},kg=class extends Od{factory;constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==Sd?e.charAt(1)=="."&&e==vC?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==Sd){let s=ND(t),d=e.slice(1),u="";return d.charAt(0)!=Sd&&([d,u]=RD(d)),this.engine.listen(this.namespaceId,s,d,u,m=>{let b=m._data||-1;this.factory.scheduleListenerCallback(b,i,m)})}return this.delegate.listen(t,e,i,r)}};function ND(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function RD(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var kd=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(t,e){let r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let b=this._rendererCache,C=b.get(r);if(!C){let w=()=>b.delete(r);C=new Od("",r,this.engine,w),b.set(r,C)}return C}let s=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);let u=b=>{Array.isArray(b)?b.forEach(u):this.engine.registerTrigger(s,d,t,b.name,b)};return e.data.animation.forEach(u),new kg(this,d,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[d,u]=s;d(u)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var FD=(()=>{class n extends Ao{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(j($e),j(jr),j(Br))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();function VD(){return new Md}function LD(){return new kd(V(us),V(Ao),V(st))}var bC=[{provide:Br,useFactory:VD},{provide:Ao,useClass:FD},{provide:Ci,useFactory:LD}],jD=[{provide:jr,useClass:Ng},{provide:Ec,useValue:"NoopAnimations"},...bC],yC=[{provide:jr,useFactory:()=>new Td},{provide:Ec,useFactory:()=>"BrowserAnimations"},...bC],CC=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?jD:yC}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({providers:yC,imports:[ms]})}return n})();var OC=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(I(jn),I(Sn))};static \u0275dir=We({type:n})}return n})(),Ds=(()=>{class n extends OC{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,features:[Rt]})}return n})(),jo=new X(""),BD={provide:jo,useExisting:qt(()=>Et),multi:!0},Et=(()=>{class n extends Ds{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&y("change",function(d){return r.onChange(d.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[En([BD]),Rt]})}return n})(),WD={provide:jo,useExisting:qt(()=>H),multi:!0};function UD(){let n=dn()?dn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var GD=new X(""),H=(()=>{class n extends OC{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!UD())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(I(jn),I(Sn),I(GD,8))};static \u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&y("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},standalone:!1,features:[En([WD]),Rt]})}return n})();function qD(n){return n==null||HD(n)===0}function HD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ts=new X(""),kC=new X("");function zD(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function $D(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function QD(n){return qD(n.value)?{required:!0}:null}function xC(n){return null}function NC(n){return n!=null}function RC(n){return Wi(n)?Je(n):n}function AC(n){let t={};return n.forEach(e=>{t=e!=null?N(N({},t),e):t}),Object.keys(t).length===0?null:t}function FC(n,t){return t.map(e=>e(n))}function KD(n){return!n.validate}function VC(n){return n.map(t=>KD(t)?t:e=>t.validate(e))}function YD(n){if(!n)return null;let t=n.filter(NC);return t.length==0?null:function(e){return AC(FC(e,t))}}function Vg(n){return n!=null?YD(VC(n)):null}function ZD(n){if(!n)return null;let t=n.filter(NC);return t.length==0?null:function(e){let i=FC(e,t).map(RC);return fr(i).pipe(Pe(AC))}}function Lg(n){return n!=null?ZD(VC(n)):null}function SC(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function JD(n){return n._rawValidators}function XD(n){return n._rawAsyncValidators}function Ag(n){return n?Array.isArray(n)?n:[n]:[]}function Rd(n,t){return Array.isArray(n)?n.includes(t):n===t}function MC(n,t){let e=Ag(t);return Ag(n).forEach(r=>{Rd(e,r)||e.push(r)}),e}function EC(n,t){return Ag(t).filter(e=>!Rd(n,e))}var Ad=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Lo=class extends Ad{name;get formDirective(){return null}get path(){return null}},Ps=class extends Ad{_parent=null;name=null;valueAccessor=null},Fd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var q=(()=>{class n extends Fd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(I(Ps,2))};static \u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&J("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Rt]})}return n})(),Yi=(()=>{class n extends Fd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(I(Lo,10))};static \u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&J("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Rt]})}return n})();var Ss="VALID",Nd="INVALID",Fo="PENDING",Ms="DISABLED",Ki=class{},Vd=class extends Ki{value;source;constructor(t,e){super(),this.value=t,this.source=e}},ws=class extends Ki{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Is=class extends Ki{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Vo=class extends Ki{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Fg=class extends Ki{source;constructor(t){super(),this.source=t}},Ld=class extends Ki{source;constructor(t){super(),this.source=t}};function LC(n){return(Wd(n)?n.validators:n)||null}function eT(n){return Array.isArray(n)?Vg(n):n||null}function jC(n,t){return(Wd(t)?t.asyncValidators:n)||null}function tT(n){return Array.isArray(n)?Lg(n):n||null}function Wd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function nT(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new F(1e3,"");if(!i[e])throw new F(1001,"")}function iT(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new F(1002,"")})}var jd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(t){ut(()=>this.statusReactive.set(t))}_status=Io(()=>this.statusReactive());statusReactive=xn(void 0);get valid(){return this.status===Ss}get invalid(){return this.status===Nd}get pending(){return this.status==Fo}get disabled(){return this.status===Ms}get enabled(){return this.status!==Ms}errors;get pristine(){return ut(this.pristineReactive)}set pristine(t){ut(()=>this.pristineReactive.set(t))}_pristine=Io(()=>this.pristineReactive());pristineReactive=xn(!0);get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(t){ut(()=>this.touchedReactive.set(t))}_touched=Io(()=>this.touchedReactive());touchedReactive=xn(!1);get untouched(){return!this.touched}_events=new dt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(MC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(MC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(EC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(EC(t,this._rawAsyncValidators))}hasValidator(t){return Rd(this._rawValidators,t)}hasAsyncValidator(t){return Rd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ce(N({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Is(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Is(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ce(N({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ws(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new ws(!0,i))}markAsPending(t={}){this.status=Fo;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ce(N({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ms,this.errors=null,this._forEachChild(r=>{r.disable(ce(N({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vd(this.value,i)),this._events.next(new Vo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ss,this._forEachChild(i=>{i.enable(ce(N({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ce(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ss||this.status===Fo)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vd(this.value,e)),this._events.next(new Vo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ce(N({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ms:Ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Fo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=RC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Vo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Ms:this.errors?Nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fo)?Fo:this._anyControlsHaveStatus(Nd)?Nd:Ss}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new ws(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Is(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Wd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=eT(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=tT(this._rawAsyncValidators)}},Bd=class extends jd{constructor(t,e,i){super(LC(e),jC(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){iT(this,!0,t),Object.keys(t).forEach(i=>{nT(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,ce(N({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Ld(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ud=new X("",{factory:()=>Gd}),Gd="always";function rT(n,t){return[...t.path,n]}function BC(n,t,e=Gd){WC(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),aT(n,t),lT(n,t),sT(n,t),oT(n,t)}function wC(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function oT(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function WC(n,t){let e=JD(n);t.validator!==null?n.setValidators(SC(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=XD(n);t.asyncValidator!==null?n.setAsyncValidators(SC(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();wC(t._rawValidators,r),wC(t._rawAsyncValidators,r)}function aT(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&UC(n,t)})}function sT(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&UC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function UC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lT(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function cT(n,t){n==null,WC(n,t)}function dT(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function uT(n){return Object.getPrototypeOf(n.constructor)===Ds}function pT(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function mT(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===H?e=s:uT(s)?i=s:r=s}),r||i||e||null}var fT={provide:Lo,useExisting:qt(()=>Ii)},Es=Promise.resolve(),Ii=(()=>{class n extends Lo{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=Io(()=>this.submittedReactive());submittedReactive=xn(!1);_directives=new Set;form;ngSubmit=new et;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Bd({},Vg(e),Lg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Es.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),BC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Es.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Es.then(()=>{let i=this._findContainer(e.path),r=new Bd({});cT(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Es.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Es.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),pT(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new Fg(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(I(Ts,10),I(kC,10),I(Ud,8))};static \u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&y("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[En([fT]),Rt]})}return n})();function IC(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function PC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var gT=class extends jd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(LC(e),jC(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(PC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new Ld(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){PC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var hT={provide:Ps,useExisting:qt(()=>G)},DC=Promise.resolve(),G=(()=>{class n extends Ps{_changeDetectorRef;callSetDisabledState;control=new gT;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new et;constructor(e,i,r,s,d,u){super(),this._changeDetectorRef=d,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=mT(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),dT(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){DC.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&qi(i);DC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?rT(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(I(Lo,9),I(Ts,10),I(kC,10),I(jo,10),I(Gi,8),I(Ud,8))};static \u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[En([hT]),Rt,xi]})}return n})();var Zi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),_T={provide:jo,useExisting:qt(()=>Me),multi:!0},Me=(()=>{class n extends Ds{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&y("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[En([_T]),Rt]})}return n})();var vT=new X("");var yT={provide:jo,useExisting:qt(()=>Q),multi:!0};function GC(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function bT(n){return n.split(":")[0]}var Q=(()=>{class n extends Ds{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=V(ai).injector;destroyRef=V(bn);cdr=V(Gi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,$a({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=GC(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=bT(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&y("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[En([yT]),Rt]})}return n})(),Y=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(GC(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(I(Sn),I(jn),I(Q,9))};static \u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),CT={provide:jo,useExisting:qt(()=>qC),multi:!0};function TC(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function xT(n){return n.split(":")[0]}var qC=(()=>{class n extends Ds{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,d)=>{s._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let d=s;for(let u=0;u<d.length;u++){let m=d[u],b=this._getOptionValue(m.value);r.push(b)}}else{let d=i.options;for(let u=0;u<d.length;u++){let m=d[u];if(m.selected){let b=this._getOptionValue(m.value);r.push(b)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=xT(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&y("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[En([CT]),Rt]})}return n})(),Z=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(TC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(TC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(I(Sn),I(jn),I(qC,9))};static \u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function HC(n){return typeof n=="number"?n:parseFloat(n)}var jg=(()=>{class n{_validator=xC;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):xC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=We({type:n,features:[xi]})}return n})(),ST={provide:Ts,useExisting:qt(()=>zn),multi:!0},zn=(()=>{class n extends jg{max;inputName="max";normalizeInput=e=>HC(e);createValidator=e=>$D(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ui("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[En([ST]),Rt]})}return n})(),MT={provide:Ts,useExisting:qt(()=>je),multi:!0},je=(()=>{class n extends jg{min;inputName="min";normalizeInput=e=>HC(e);createValidator=e=>zD(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ui("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[En([MT]),Rt]})}return n})(),ET={provide:Ts,useExisting:qt(()=>wt),multi:!0};var wt=(()=>{class n extends jg{required;inputName="required";normalizeInput=qi;createValidator=e=>QD;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Ui("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[En([ET]),Rt]})}return n})();var zC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({})}return n})();var $C=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ud,useValue:e.callSetDisabledState??Gd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({imports:[zC]})}return n})(),QC=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:vT,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ud,useValue:e.callSetDisabledState??Gd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({imports:[zC]})}return n})();var Pn=class n{constructor(t){this.http=t;this.loadUserFromStorage()}baseUrl="/api/auth";currentUserSubject=new He(null);currentUser$=this.currentUserSubject.asObservable();loadUserFromStorage(){let t=localStorage.getItem("token"),e=localStorage.getItem("user");t&&e&&this.currentUserSubject.next(JSON.parse(e))}parsePermissions(t){if(!t)return{};if(t==="all")return{all:["all"]};try{return JSON.parse(t)}catch{return{}}}login(t){return this.http.post(`${this.baseUrl}/login`,t).pipe(Qe(e=>{localStorage.setItem("token",e.token);let i={username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions)};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}register(t){return this.http.post(`${this.baseUrl}/register`,t).pipe(Qe(e=>{localStorage.setItem("token",e.token);let i={username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions)};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}getToken(){return localStorage.getItem("token")}isLoggedIn(){return!!this.getToken()}getCurrentUser(){return this.currentUserSubject.value}hasRole(t){return this.getCurrentUser()?.role===t}isAdmin(){let t=this.getCurrentUser();return t?t.role==="ADMIN"||(t.permissions?.all?.includes("all")??!1):!1}hasFeatureAccess(t){let e=this.getCurrentUser();return e?this.isAdmin()?!0:!!e.permissions[t]&&e.permissions[t].length>0:!1}hasPermission(t,e){let i=this.getCurrentUser();return i?this.isAdmin()?!0:i.permissions[t]?.includes(e)||!1:!1}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var _e="primary",Us=Symbol("RouteTitle"),qg=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function qr(n){return new qg(n)}function ix(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let d=i[s],u=n[s];if(d[0]===":")r[d.substring(1)]=u;else if(d!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Kd(n){return new Promise((t,e)=>{n.pipe(gi()).subscribe({next:i=>t(i),error:i=>e(i)})})}function wT(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ci(n[e],t[e]))return!1;return!0}function ci(n,t){let e=n?Hg(n):void 0,i=t?Hg(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!rx(n[r],t[r]))return!1;return!0}function Hg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rx(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function ox(n){return n.length>0?n[n.length-1]:null}function Hr(n){return Il(n)?n:Wi(n)?Je(Promise.resolve(n)):me(n)}function ax(n){return Il(n)?Kd(n):Promise.resolve(n)}var IT={exact:lx,subset:cx},sx={exact:PT,subset:DT,ignored:()=>!0};function KC(n,t,e){return IT[e.paths](n.root,t.root,e.matrixParams)&&sx[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function PT(n,t){return ci(n,t)}function lx(n,t,e){if(!Ur(n.segments,t.segments)||!zd(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!lx(n.children[i],t.children[i],e))return!1;return!0}function DT(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>rx(n[e],t[e]))}function cx(n,t,e){return dx(n,t,t.segments,e)}function dx(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Ur(r,e)||t.hasChildren()||!zd(r,e,i))}else if(n.segments.length===e.length){if(!Ur(n.segments,e)||!zd(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!cx(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Ur(n.segments,r)||!zd(n.segments,r,i)||!n.children[_e]?!1:dx(n.children[_e],t,s,i)}}function zd(n,t,e){return t.every((i,r)=>sx[e](n[r].parameters,i.parameters))}var Qn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ae([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){return kT.serialize(this)}},Ae=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $d(this)}},Ji=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=qr(this.parameters),this._parameterMap}toString(){return px(this)}};function TT(n,t){return Ur(n,t)&&n.every((e,i)=>ci(e.parameters,t[i].parameters))}function Ur(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function OT(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===_e&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==_e&&(e=e.concat(t(r,i)))}),e}var zr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>new Pi,providedIn:"root"})}return n})(),Pi=class{parse(t){let e=new $g(t);return new Qn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ks(t.root,!0)}`,i=AT(t.queryParams),r=typeof t.fragment=="string"?`#${NT(t.fragment)}`:"";return`${e}${i}${r}`}},kT=new Pi;function $d(n){return n.segments.map(t=>px(t)).join("/")}function ks(n,t){if(!n.hasChildren())return $d(n);if(t){let e=n.children[_e]?ks(n.children[_e],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==_e&&i.push(`${r}:${ks(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=OT(n,(i,r)=>r===_e?[ks(n.children[_e],!1)]:[`${r}:${ks(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${$d(n)}/${e[0]}`:`${$d(n)}/(${e.join("//")})`}}function ux(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qd(n){return ux(n).replace(/%3B/gi,";")}function NT(n){return encodeURI(n)}function zg(n){return ux(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qd(n){return decodeURIComponent(n)}function YC(n){return Qd(n.replace(/\+/g,"%20"))}function px(n){return`${zg(n.path)}${RT(n.parameters)}`}function RT(n){return Object.entries(n).map(([t,e])=>`;${zg(t)}=${zg(e)}`).join("")}function AT(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${qd(e)}=${qd(r)}`).join("&"):`${qd(e)}=${qd(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var FT=/^[^\/()?;#]+/;function Bg(n){let t=n.match(FT);return t?t[0]:""}var VT=/^[^\/()?;=#]+/;function LT(n){let t=n.match(VT);return t?t[0]:""}var jT=/^[^=?&#]+/;function BT(n){let t=n.match(jT);return t?t[0]:""}var WT=/^[^&#]+/;function UT(n){let t=n.match(WT);return t?t[0]:""}var $g=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[_e]=new Ae(t,e)),i}parseSegment(){let t=Bg(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(t),new Ji(Qd(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=LT(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Bg(this.remaining);r&&(i=r,this.capture(i))}t[Qd(e)]=Qd(i)}parseQueryParam(t){let e=BT(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let d=UT(this.remaining);d&&(i=d,this.capture(i))}let r=YC(e),s=YC(i);if(t.hasOwnProperty(r)){let d=t[r];Array.isArray(d)||(d=[d],t[r]=d),d.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Bg(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new F(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=_e);let d=this.parseChildren();e[s??_e]=Object.keys(d).length===1&&d[_e]?d[_e]:new Ae([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new F(4011,!1)}};function mx(n){return n.segments.length>0?new Ae([],{[_e]:n}):n}function fx(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=fx(r);if(i===_e&&s.segments.length===0&&s.hasChildren())for(let[d,u]of Object.entries(s.children))t[d]=u;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new Ae(n.segments,t);return GT(e)}function GT(n){if(n.numberOfChildren===1&&n.children[_e]){let t=n.children[_e];return new Ae(n.segments.concat(t.segments),t.children)}return n}function Xi(n){return n instanceof Qn}function gx(n,t,e=null,i=null,r=new Pi){let s=hx(n);return _x(s,t,e,i,r)}function hx(n){let t;function e(s){let d={};for(let m of s.children){let b=e(m);d[m.outlet]=b}let u=new Ae(s.url,d);return s===n&&(t=u),u}let i=e(n.root),r=mx(i);return t??r}function _x(n,t,e,i,r){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return Wg(s,s,s,e,i,r);let d=qT(t);if(d.toRoot())return Wg(s,s,new Ae([],{}),e,i,r);let u=HT(d,s,n),m=u.processChildren?Rs(u.segmentGroup,u.index,d.commands):yx(u.segmentGroup,u.index,d.commands);return Wg(s,u.segmentGroup,m,e,i,r)}function Yd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fs(n){return typeof n=="object"&&n!=null&&n.outlets}function ZC(n,t,e){n||="\u0275";let i=new Qn;return i.queryParams={[n]:t},e.parse(e.serialize(i)).queryParams[n]}function Wg(n,t,e,i,r,s){let d={};for(let[b,C]of Object.entries(i??{}))d[b]=Array.isArray(C)?C.map(w=>ZC(b,w,s)):ZC(b,C,s);let u;n===t?u=e:u=vx(n,t,e);let m=mx(fx(u));return new Qn(m,d,r)}function vx(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=vx(s,t,e)}),new Ae(n.segments,i)}var Zd=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Yd(i[0]))throw new F(4003,!1);let r=i.find(Fs);if(r&&r!==ox(i))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zd(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,d)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([m,b])=>{u[m]=typeof b=="string"?b.split("/"):b}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:d===0?(s.split("/").forEach((u,m)=>{m==0&&u==="."||(m==0&&u===""?e=!0:u===".."?t++:u!=""&&r.push(u))}),r):[...r,s]},[]);return new Zd(e,t,i)}var Wo=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function HT(n,t,e){if(n.isAbsolute)return new Wo(t,!0,0);if(!e)return new Wo(t,!1,NaN);if(e.parent===null)return new Wo(e,!0,0);let i=Yd(n.commands[0])?0:1,r=e.segments.length-1+i;return zT(e,r,n.numberOfDoubleDots)}function zT(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new F(4005,!1);r=i.segments.length}return new Wo(i,!1,r-s)}function $T(n){return Fs(n[0])?n[0].outlets:{[_e]:n}}function yx(n,t,e){if(n??=new Ae([],{}),n.segments.length===0&&n.hasChildren())return Rs(n,t,e);let i=QT(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Ae(n.segments.slice(0,i.pathIndex),{});return s.children[_e]=new Ae(n.segments.slice(i.pathIndex),n.children),Rs(s,0,r)}else return i.match&&r.length===0?new Ae(n.segments,{}):i.match&&!n.hasChildren()?Qg(n,t,e):i.match?Rs(n,0,r):Qg(n,t,e)}function Rs(n,t,e){if(e.length===0)return new Ae(n.segments,{});{let i=$T(e),r={};if(Object.keys(i).some(s=>s!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let s=Rs(n.children[_e],t,e);return new Ae(n.segments,s.children)}return Object.entries(i).forEach(([s,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(r[s]=yx(n.children[s],t,d))}),Object.entries(n.children).forEach(([s,d])=>{i[s]===void 0&&(r[s]=d)}),new Ae(n.segments,r)}}function QT(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let d=n.segments[r],u=e[i];if(Fs(u))break;let m=`${u}`,b=i<e.length-1?e[i+1]:null;if(r>0&&m===void 0)break;if(m&&b&&typeof b=="object"&&b.outlets===void 0){if(!XC(m,b,d))return s;i+=2}else{if(!XC(m,{},d))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Qg(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Fs(s)){let m=KT(s.outlets);return new Ae(i,m)}if(r===0&&Yd(e[0])){let m=n.segments[t];i.push(new Ji(m.path,JC(e[0]))),r++;continue}let d=Fs(s)?s.outlets[_e]:`${s}`,u=r<e.length-1?e[r+1]:null;d&&u&&Yd(u)?(i.push(new Ji(d,JC(u))),r+=2):(i.push(new Ji(d,{})),r++)}return new Ae(i,{})}function KT(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Qg(new Ae([],{}),0,i))}),t}function JC(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function XC(n,t,e){return n==e.path&&ci(t,e.parameters)}var Uo="imperative",pt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(pt||{}),pn=class{id;url;constructor(t,e){this.id=t,this.url=e}},er=class extends pn{type=pt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends pn{urlAfterRedirects;type=pt.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zt||{}),qo=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(qo||{}),di=class extends pn{reason;code;type=pt.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ui=class extends pn{reason;code;type=pt.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Ho=class extends pn{error;target;type=pt.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vs=class extends pn{urlAfterRedirects;state;type=pt.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jd=class extends pn{urlAfterRedirects;state;type=pt.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xd=class extends pn{urlAfterRedirects;state;shouldActivate;type=pt.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eu=class extends pn{urlAfterRedirects;state;type=pt.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tu=class extends pn{urlAfterRedirects;state;type=pt.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nu=class{route;type=pt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},iu=class{route;type=pt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ru=class{snapshot;type=pt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ou=class{snapshot;type=pt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},au=class{snapshot;type=pt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},su=class{snapshot;type=pt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zo=class{routerEvent;position;anchor;type=pt.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ls=class{},$o=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function YT(n){return!(n instanceof Ls)&&!(n instanceof $o)}function ZT(n,t){return n.providers&&!n._injector&&(n._injector=Mo(n.providers,t,`Route: ${n.path}`)),n._injector??t}function $n(n){return n.outlet||_e}function JT(n,t){let e=n.filter(i=>$n(i)===t);return e.push(...n.filter(i=>$n(i)!==t)),e}function Yo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var lu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new $r(this.rootInjector)}},$r=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new lu(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(j(tt))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Kg(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Kg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Yg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Yg(t,this._root).map(e=>e.value)}};function Kg(n,t){if(n===t.value)return t;for(let e of t.children){let i=Kg(n,e);if(i)return i}return null}function Yg(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Yg(n,e);if(i.length)return i.unshift(t),i}return[]}var un=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Bo(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var js=class extends cu{snapshot;constructor(t,e){super(t),this.snapshot=e,nh(this,t)}toString(){return this.snapshot.toString()}};function bx(n){let t=XT(n),e=new He([new Ji("",{})]),i=new He({}),r=new He({}),s=new He({}),d=new He(""),u=new Xe(e,i,s,d,r,_e,n,t.root);return u.snapshot=t.root,new js(new un(u,[]),t)}function XT(n){let t={},e={},i={},s=new Gr([],t,i,"",e,_e,n,null,{});return new Bs("",new un(s,[]))}var Xe=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,d,u,m){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=d,this.component=u,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Pe(b=>b[Us]))??me(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(t=>qr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(t=>qr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function du(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&xx(r)&&(i.resolve[Us]=r.title),i}var Gr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Us]}constructor(t,e,i,r,s,d,u,m,b){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=u,this.routeConfig=m,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Bs=class extends cu{url;constructor(t,e){super(e),this.url=t,nh(this,e)}toString(){return Cx(this._root)}};function nh(n,t){t.value._routerState=n,t.children.forEach(e=>nh(n,e))}function Cx(n){let t=n.children.length>0?` { ${n.children.map(Cx).join(", ")} } `:"";return`${n.value}${t}`}function Ug(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ci(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ci(t.params,e.params)||n.paramsSubject.next(e.params),wT(t.url,e.url)||n.urlSubject.next(e.url),ci(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zg(n,t){let e=ci(n.params,t.params)&&TT(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Zg(n.parent,t.parent))}function xx(n){return typeof n.title=="string"||n.title===null}var Sx=new X(""),Qr=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new et;deactivateEvents=new et;attachEvents=new et;detachEvents=new et;routerOutletData=x1();parentContexts=V($r);location=V(Nr);changeDetector=V(Gi);inputBinder=V(Gs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=e;let r=this.location,d=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,m=new Jg(e,u,r.injector,this.routerOutletData);this.activated=r.createComponent(d,{index:r.length,injector:m,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[xi]})}return n})(),Jg=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Xe?this.route:t===$r?this.childContexts:t===Sx?this.outletData:this.parent.get(t,e)}},Gs=new X(""),ih=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Ol([i.queryParams,i.params,i.data]).pipe(Wt(([s,d,u],m)=>(u=N(N(N({},s),d),u),m===0?me(u):Promise.resolve(u)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let d=I1(i.component);if(!d){this.unsubscribeFromRouteData(e);return}for(let{templateName:u}of d.inputs)e.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),rh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=A({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&v(0,"router-outlet")},dependencies:[Qr],encapsulation:2})}return n})();function oh(n){let t=n.children&&n.children.map(oh),e=t?ce(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_e&&(e.component=rh),e}function eO(n,t,e){let i=Ws(n,t._root,e?e._root:void 0);return new js(i,t)}function Ws(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=tO(n,t,e);return new un(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let d=s.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(u=>Ws(n,u)),d}}let i=nO(t.value),r=t.children.map(s=>Ws(n,s));return new un(i,r)}}function tO(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ws(n,i,r);return Ws(n,i)})}function nO(n){return new Xe(new He(n.url),new He(n.params),new He(n.queryParams),new He(n.fragment),new He(n.data),n.outlet,n.component,n)}var Qo=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Mx="ngNavigationCancelingError";function uu(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Xi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Ex(!1,zt.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Ex(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Mx]=!0,e.cancellationCode=t,e}function iO(n){return wx(n)&&Xi(n.url)}function wx(n){return!!n&&n[Mx]}var rO=(n,t,e,i)=>Pe(r=>(new Xg(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Xg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Ug(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Bo(e);t.children.forEach(s=>{let d=s.value.outlet;this.deactivateRoutes(s,r[d],i),delete r[d]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Bo(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);if(i&&i.outlet){let d=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Bo(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Bo(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new su(s.value.snapshot))}),t.children.length&&this.forwardEvent(new ou(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(Ug(r),r===s)if(r.component){let d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(u.contexts),d.attachRef=u.componentRef,d.route=u.route.value,d.outlet&&d.outlet.attach(u.componentRef,u.route.value),Ug(u.route.value),this.activateChildRoutes(t,null,d.children)}else d.attachRef=null,d.route=r,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(t,null,d.children)}else this.activateChildRoutes(t,null,i)}},pu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Go=class{component;route;constructor(t,e){this.component=t,this.route=e}};function oO(n,t,e){let i=n._root,r=t?t._root:null;return Ns(i,r,e,[i.value])}function aO(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Zo(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Mm(n)?n:t.get(n):i}function Ns(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bo(t);return n.children.forEach(d=>{sO(d,s[d.value.outlet],e,i.concat([d.value]),r),delete s[d.value.outlet]}),Object.entries(s).forEach(([d,u])=>As(u,e.getContext(d),r)),r}function sO(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,d=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){let m=lO(d,s,s.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new pu(i)):(s.data=d.data,s._resolvedData=d._resolvedData),s.component?Ns(n,t,u?u.children:null,i,r):Ns(n,t,e,i,r),m&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new Go(u.outlet.component,d))}else d&&As(t,u,r),r.canActivateChecks.push(new pu(i)),s.component?Ns(n,null,u?u.children:null,i,r):Ns(n,null,e,i,r);return r}function lO(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ur(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ur(n.url,t.url)||!ci(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zg(n,t)||!ci(n.queryParams,t.queryParams);case"paramsChange":default:return!Zg(n,t)}}function As(n,t,e){let i=Bo(n),r=n.value;Object.entries(i).forEach(([s,d])=>{r.component?t?As(d,t.children.getContext(s),e):As(d,null,e):As(d,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Go(t.outlet.component,r)):e.canDeactivateChecks.push(new Go(null,r)):e.canDeactivateChecks.push(new Go(null,r))}function qs(n){return typeof n=="function"}function cO(n){return typeof n=="boolean"}function dO(n){return n&&qs(n.canLoad)}function uO(n){return n&&qs(n.canActivate)}function pO(n){return n&&qs(n.canActivateChild)}function mO(n){return n&&qs(n.canDeactivate)}function fO(n){return n&&qs(n.canMatch)}function Ix(n){return n instanceof mr||n?.name==="EmptyError"}var Hd=Symbol("INITIAL_VALUE");function Ko(){return Wt(n=>Ol(n.map(t=>t.pipe(fi(1),pa(Hd)))).pipe(Pe(t=>{for(let e of t)if(e!==!0){if(e===Hd)return Hd;if(e===!1||gO(e))return e}return!0}),Zt(t=>t!==Hd),fi(1)))}function gO(n){return Xi(n)||n instanceof Qo}function Px(n){return n.aborted?me(void 0).pipe(fi(1)):new Ie(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function Dx(n){return ma(Px(n))}function hO(n,t){return yt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return d.length===0&&s.length===0?me(ce(N({},e),{guardsResult:!0})):_O(d,i,r,n).pipe(yt(u=>u&&cO(u)?vO(i,s,n,t):me(u)),Pe(u=>ce(N({},e),{guardsResult:u})))})}function _O(n,t,e,i){return Je(n).pipe(yt(r=>SO(r.component,r.route,e,t,i)),gi(r=>r!==!0,!0))}function vO(n,t,e,i){return Je(t).pipe(Oi(r=>oo(bO(r.route.parent,i),yO(r.route,i),xO(n,r.path,e),CO(n,r.route,e))),gi(r=>r!==!0,!0))}function yO(n,t){return n!==null&&t&&t(new au(n)),me(!0)}function bO(n,t){return n!==null&&t&&t(new ru(n)),me(!0)}function CO(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return me(!0);let r=i.map(s=>ua(()=>{let d=Yo(t)??e,u=Zo(s,d),m=uO(u)?u.canActivate(t,n):gt(d,()=>u(t,n));return Hr(m).pipe(gi())}));return me(r).pipe(Ko())}function xO(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(d=>aO(d)).filter(d=>d!==null).map(d=>ua(()=>{let u=d.guards.map(m=>{let b=Yo(d.node)??e,C=Zo(m,b),w=pO(C)?C.canActivateChild(i,n):gt(b,()=>C(i,n));return Hr(w).pipe(gi())});return me(u).pipe(Ko())}));return me(s).pipe(Ko())}function SO(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return me(!0);let d=s.map(u=>{let m=Yo(t)??r,b=Zo(u,m),C=mO(b)?b.canDeactivate(n,t,e,i):gt(m,()=>b(n,t,e,i));return Hr(C).pipe(gi())});return me(d).pipe(Ko())}function MO(n,t,e,i,r){let s=t.canLoad;if(s===void 0||s.length===0)return me(!0);let d=s.map(u=>{let m=Zo(u,n),b=dO(m)?m.canLoad(t,e):gt(n,()=>m(t,e)),C=Hr(b);return r?C.pipe(Dx(r)):C});return me(d).pipe(Ko(),Tx(i))}function Tx(n){return tm(Qe(t=>{if(typeof t!="boolean")throw uu(n,t)}),Pe(t=>t===!0))}function EO(n,t,e,i,r){let s=t.canMatch;if(!s||s.length===0)return me(!0);let d=s.map(u=>{let m=Zo(u,n),b=fO(m)?m.canMatch(t,e):gt(n,()=>m(t,e)),C=Hr(b);return r?C.pipe(Dx(r)):C});return me(d).pipe(Ko(),Tx(i))}var Wr=class Ox extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,Ox.prototype)}},eh=class kx extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,kx.prototype)}};function wO(n){throw new F(4e3,!1)}function IO(n){throw Ex(!1,zt.GuardRejected)}var PO=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[_e])throw wO(`${t.redirectTo}`);r=r.children[_e]}}async applyRedirectCommands(t,e,i,r,s){let d=await DO(e,r,s);if(d instanceof Qn)throw new eh(d);let u=this.applyRedirectCreateUrlTree(d,this.urlSerializer.parse(d),t,i);if(d[0]==="/")throw new eh(u);return u}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Qn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let u=s.substring(1);i[r]=e[u]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),d={};return Object.entries(e.children).forEach(([u,m])=>{d[u]=this.createSegmentGroup(t,m,i,r)}),new Ae(s,d)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new F(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}};function DO(n,t,e){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:s,routeConfig:d,url:u,outlet:m,params:b,data:C,title:w}=t;return Kd(Hr(gt(e,()=>i({params:b,data:C,queryParams:r,fragment:s,routeConfig:d,url:u,outlet:m,title:w}))))}var th={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TO(n,t,e,i,r,s){let d=Nx(n,t,e);return d.matched?(i=ZT(t,i),EO(i,t,e,r,s).pipe(Pe(u=>u===!0?d:N({},th)))):me(d)}function Nx(n,t,e){if(t.path==="**")return OO(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},th):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||ix)(e,n,t);if(!r)return N({},th);let s={};Object.entries(r.posParams??{}).forEach(([u,m])=>{s[u]=m.path});let d=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function OO(n){return{matched:!0,parameters:n.length>0?ox(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ex(n,t,e,i){return e.length>0&&RO(n,e,i)?{segmentGroup:new Ae(t,NO(i,new Ae(e,n.children))),slicedSegments:[]}:e.length===0&&AO(n,e,i)?{segmentGroup:new Ae(n.segments,kO(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ae(n.segments,n.children),slicedSegments:e}}function kO(n,t,e,i){let r={};for(let s of e)if(fu(n,t,s)&&!i[$n(s)]){let d=new Ae([],{});r[$n(s)]=d}return N(N({},i),r)}function NO(n,t){let e={};e[_e]=t;for(let i of n)if(i.path===""&&$n(i)!==_e){let r=new Ae([],{});e[$n(i)]=r}return e}function RO(n,t,e){return e.some(i=>fu(n,t,i)&&$n(i)!==_e)}function AO(n,t,e){return e.some(i=>fu(n,t,i))}function fu(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function FO(n,t,e){return t.length===0&&!n.children[e]}var VO=class{};async function LO(n,t,e,i,r,s,d="emptyOnly",u){return new BO(n,t,e,i,r,d,s,u).recognize()}var jO=31,BO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,d,u,m){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=d,this.urlSerializer=u,this.abortSignal=m,this.applyRedirects=new PO(this.urlSerializer,this.urlTree)}noMatchError(t){return new F(4002,`'${t.segmentGroup}'`)}async recognize(){let t=ex(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:i}=await this.match(t),r=new un(i,e),s=new Bs("",r),d=gx(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(d),{state:s,tree:d}}async match(t){let e=new Gr([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,_e,e),rootSnapshot:e}}catch(i){if(i instanceof eh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Wr?this.noMatchError(i):i}}async processSegmentGroup(t,e,i,r,s){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,e,i,s);let d=await this.processSegment(t,e,i,i.segments,r,!0,s);return d instanceof un?[d]:[]}async processChildren(t,e,i,r){let s=[];for(let m of Object.keys(i.children))m==="primary"?s.unshift(m):s.push(m);let d=[];for(let m of s){let b=i.children[m],C=JT(e,m),w=await this.processSegmentGroup(t,C,b,m,r);d.push(...w)}let u=Rx(d);return WO(u),u}async processSegment(t,e,i,r,s,d,u){for(let m of e)try{return await this.processSegmentAgainstRoute(m._injector??t,e,m,i,r,s,d,u)}catch(b){if(b instanceof Wr||Ix(b))continue;throw b}if(FO(i,r,s))return new VO;throw new Wr(i)}async processSegmentAgainstRoute(t,e,i,r,s,d,u,m){if($n(i)!==d&&(d===_e||!fu(r,s,i)))throw new Wr(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,r,i,s,d,m);if(this.allowRedirects&&u)return this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,d,m);throw new Wr(r)}async expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,d,u){let{matched:m,parameters:b,consumedSegments:C,positionalParamSegments:w,remainingSegments:O}=Nx(e,r,s);if(!m)throw new Wr(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jO&&(this.allowRedirects=!1));let P=new Gr(s,b,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,tx(r),$n(r),r.component??r._loadedComponent??null,r,nx(r)),k=du(P,u,this.paramsInheritanceStrategy);if(P.params=Object.freeze(k.params),P.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let W=await this.applyRedirects.applyRedirectCommands(C,r.redirectTo,w,P,t),z=await this.applyRedirects.lineralizeSegments(r,W);return this.processSegment(t,i,e,z.concat(O),d,!1,u)}async matchSegmentAgainstRoute(t,e,i,r,s,d){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let u=await Kd(TO(e,i,r,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(e.children={}),!u?.matched)throw new Wr(e);t=i._injector??t;let{routes:m}=await this.getChildConfig(t,i,r),b=i._loadedInjector??t,{parameters:C,consumedSegments:w,remainingSegments:O}=u,P=new Gr(w,C,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,tx(i),$n(i),i.component??i._loadedComponent??null,i,nx(i)),k=du(P,d,this.paramsInheritanceStrategy);P.params=Object.freeze(k.params),P.data=Object.freeze(k.data);let{segmentGroup:W,slicedSegments:z}=ex(e,w,O,m);if(z.length===0&&W.hasChildren()){let qe=await this.processChildren(b,m,W,P);return new un(P,qe)}if(m.length===0&&z.length===0)return new un(P,[]);let $=$n(i)===s,xe=await this.processSegment(b,m,W,z,$?_e:s,!0,P);return new un(P,xe instanceof un?[xe]:[])}async getChildConfig(t,e,i){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Kd(MO(t,e,i,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=s.routes,e._loadedInjector=s.injector,s}throw IO(e)}return{routes:[],injector:t}}};function WO(n){n.sort((t,e)=>t.value.outlet===_e?-1:e.value.outlet===_e?1:t.value.outlet.localeCompare(e.value.outlet))}function UO(n){let t=n.value.routeConfig;return t&&t.path===""}function Rx(n){let t=[],e=new Set;for(let i of n){if(!UO(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=Rx(i.children);t.push(new un(i.value,r))}return t.filter(i=>!e.has(i))}function tx(n){return n.data||{}}function nx(n){return n.resolve||{}}var GO=new X("",{factory:()=>LO});function qO(n,t,e,i,r,s,d){let u=n.get(GO);return yt(m=>me(m).pipe(Wt(b=>u(n,t,e,i,b.extractedUrl,r,s,d)),Pe(({state:b,tree:C})=>ce(N({},m),{targetSnapshot:b,urlAfterRedirects:C}))))}function HO(n,t){return yt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return me(e);let s=new Set(r.map(m=>m.route)),d=new Set;for(let m of s)if(!d.has(m))for(let b of Ax(m))d.add(b);let u=0;return Je(d).pipe(Oi(m=>s.has(m)?zO(m,i,n,t):(m.data=du(m,m.parent,n).resolve,me(void 0))),Qe(()=>u++),kl(1),yt(m=>u===d.size?me(e):Kt))})}function Ax(n){let t=n.children.map(e=>Ax(e)).flat();return[n,...t]}function zO(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!xx(r)&&(s[Us]=r.title),ua(()=>(n.data=du(n,n.parent,e).resolve,$O(s,n,t,i).pipe(Pe(d=>(n._resolvedData=d,n.data=N(N({},n.data),d),null)))))}function $O(n,t,e,i){let r=Hg(n);if(r.length===0)return me({});let s={};return Je(r).pipe(yt(d=>QO(n[d],t,e,i).pipe(gi(),Qe(u=>{if(u instanceof Qo)throw uu(new Pi,u);s[d]=u}))),kl(1),Pe(()=>s),ln(d=>Ix(d)?Kt:da(d)))}function QO(n,t,e,i){let r=Yo(t)??i,s=Zo(n,r),d=s.resolve?s.resolve(t,e):gt(r,()=>s(t,e));return Hr(d)}function Gg(n){return Wt(t=>{let e=n(t);return e?Je(e).pipe(Pe(()=>t)):me(t)})}var ah=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===_e);return i}getResolvedTitleForRoute(e){return e.data[Us]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(Fx),providedIn:"root"})}return n})(),Fx=(()=>{class n extends ah{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(j(xb))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tr=new X("",{factory:()=>({})}),Jo=new X(""),gu=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(M0);async loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await ax(gt(e,()=>i.loadComponent())),d=await jx(Lx(s));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=d,d}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await Vx(i,this.compiler,e,this.onLoadEndListener);return i._loadedRoutes=s.routes,i._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Vx(n,t,e,i){let r=await ax(gt(e,()=>n.loadChildren())),s=await jx(Lx(r)),d;s instanceof Nc||Array.isArray(s)?d=s:d=await t.compileModuleAsync(s),i&&i(n);let u,m,b=!1;return Array.isArray(d)?(m=d,b=!0):(u=d.create(e).injector,m=u.get(Jo,[],{optional:!0,self:!0}).flat()),{routes:m.map(oh),injector:u}}function KO(n){return n&&typeof n=="object"&&"default"in n}function Lx(n){return KO(n)?n.default:n}async function jx(n){return n}var hu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(YO),providedIn:"root"})}return n})(),YO=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sh=new X(""),lh=new X("");function Bx(n,t,e){let i=n.get(lh),r=n.get($e);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(b=>setTimeout(b));let s,d=new Promise(b=>{s=b}),u=r.startViewTransition(()=>(s(),ZO(n)));u.ready.catch(b=>{}),u.finished.catch(b=>{});let{onViewTransitionCreated:m}=i;return m&&gt(n,()=>m({transition:u,from:t,to:e})),d}function ZO(n){return new Promise(t=>{$a({read:()=>setTimeout(t)},{injector:n})})}var JO=()=>{},ch=new X(""),_u=(()=>{class n{currentNavigation=xn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=xn(null);events=new dt;transitionAbortWithErrorSubject=new dt;configLoader=V(gu);environmentInjector=V(tt);destroyRef=V(bn);urlSerializer=V(zr);rootContexts=V($r);location=V(zi);inputBindingEnabled=V(Gs,{optional:!0})!==null;titleStrategy=V(ah);options=V(tr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(hu);createViewTransition=V(sh,{optional:!0});navigationErrorHandler=V(ch,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>me(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new nu(r)),i=r=>this.events.next(new iu(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;ut(()=>{this.transitions?.next(ce(N({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(e){return this.transitions=new He(null),this.transitions.pipe(Zt(i=>i!==null),Wt(i=>{let r=!1,s=new AbortController;return me(i).pipe(Wt(d=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",zt.SupersededByNewNavigation),Kt;this.currentTransition=i;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:u?ce(N({},u),{previousNavigation:null}):null,abort:()=>s.abort()});let m=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),b=d.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!m&&b!=="reload")return this.events.next(new ui(d.id,this.urlSerializer.serialize(d.rawUrl),"",qo.IgnoredSameUrlNavigation)),d.resolve(!1),Kt;if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return me(d).pipe(Wt(C=>(this.events.next(new er(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),C.id!==this.navigationId?Kt:Promise.resolve(C))),qO(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Qe(C=>{i.targetSnapshot=C.targetSnapshot,i.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation.update(O=>(O.finalUrl=C.urlAfterRedirects,O));let w=new Vs(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(w)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:C,extractedUrl:w,source:O,restoredState:P,extras:k}=d,W=new er(C,this.urlSerializer.serialize(w),O,P);this.events.next(W);let z=bx(this.rootComponentType).snapshot;return this.currentTransition=i=ce(N({},d),{targetSnapshot:z,urlAfterRedirects:w,extras:ce(N({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update($=>($.finalUrl=w,$)),me(i)}else return this.events.next(new ui(d.id,this.urlSerializer.serialize(d.extractedUrl),"",qo.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Kt}),Qe(d=>{let u=new Jd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Pe(d=>(this.currentTransition=i=ce(N({},d),{guards:oO(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),i)),hO(this.environmentInjector,d=>this.events.next(d)),Qe(d=>{if(i.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw uu(this.urlSerializer,d.guardsResult);let u=new Xd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),Zt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",zt.GuardRejected),!1)),Gg(d=>{if(d.guards.canActivateChecks.length!==0)return me(d).pipe(Qe(u=>{let m=new eu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),Wt(u=>{let m=!1;return me(u).pipe(HO(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",zt.NoDataFromResolver)}}))}),Qe(u=>{let m=new tu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),Gg(d=>{let u=b=>{let C=[];if(b.routeConfig?._loadedComponent)b.component=b.routeConfig?._loadedComponent;else if(b.routeConfig?.loadComponent){let w=Yo(b)??this.environmentInjector;C.push(this.configLoader.loadComponent(w,b.routeConfig).then(O=>{b.component=O}))}for(let w of b.children)C.push(...u(w));return C},m=u(d.targetSnapshot.root);return m.length===0?me(d):Je(Promise.all(m).then(()=>d))}),Gg(()=>this.afterPreactivation()),Wt(()=>{let{currentSnapshot:d,targetSnapshot:u}=i,m=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return m?Je(m).pipe(Pe(()=>i)):me(i)}),Pe(d=>{let u=eO(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=i=ce(N({},d),{targetRouterState:u}),this.currentNavigation.update(m=>(m.targetRouterState=u,m)),i}),Qe(()=>{this.events.next(new Ls)}),rO(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),fi(1),ma(Px(s.signal).pipe(Zt(()=>!r&&!i.targetRouterState),Qe(()=>{this.cancelNavigationTransition(i,s.signal.reason+"",zt.Aborted)}))),Qe({next:d=>{r=!0,this.currentNavigation.update(u=>(u.abort=JO,u)),this.lastSuccessfulNavigation.set(ut(this.currentNavigation)),this.events.next(new Dn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),ma(this.transitionAbortWithErrorSubject.pipe(Qe(d=>{throw d}))),ao(()=>{s.abort(),r||this.cancelNavigationTransition(i,"",zt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ln(d=>{if(this.destroyed)return i.resolve(!1),Kt;if(r=!0,wx(d))this.events.next(new di(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode)),iO(d)?this.events.next(new $o(d.url,d.navigationBehaviorOptions)):i.resolve(!1);else{let u=new Ho(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);try{let m=gt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(m instanceof Qo){let{message:b,cancellationCode:C}=uu(this.urlSerializer,m);this.events.next(new di(i.id,this.urlSerializer.serialize(i.extractedUrl),b,C)),this.events.next(new $o(m.redirectTo,m.navigationBehaviorOptions))}else throw this.events.next(u),d}catch(m){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(m)}}return Kt}))}))}cancelNavigationTransition(e,i,r){let s=new di(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=ut(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XO(n){return n!==Uo}var Wx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(e3),providedIn:"root"})}return n})(),mu=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},e3=(()=>{class n extends mu{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dh=(()=>{class n{urlSerializer=V(zr);options=V(tr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(zi);urlHandlingStrategy=V(hu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,d=r??s;return d instanceof Qn?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=bx(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:()=>V(Ux),providedIn:"root"})}return n})(),Ux=(()=>{class n extends dh{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof er?this.updateStateMemento():e instanceof ui?this.commitTransition(i):e instanceof Vs?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ls?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof di&&e.code!==zt.SupersededByNewNavigation&&e.code!==zt.Redirect?this.restoreHistory(i):e instanceof Ho?this.restoreHistory(i,!0):e instanceof Dn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:d}=i;if(this.location.isCurrentPathEqualTo(e)||s){let u=this.browserPageId,m=N(N({},d),this.generateNgRouterState(r,u));this.location.replaceState(e,"",m)}else{let u=N(N({},d),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Xt(n)))(r||n)}})();static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vu(n,t){n.events.pipe(Zt(e=>e instanceof Dn||e instanceof di||e instanceof Ho||e instanceof ui),Pe(e=>e instanceof Dn||e instanceof ui?0:(e instanceof di?e.code===zt.Redirect||e.code===zt.SupersededByNewNavigation:!1)?2:1),Zt(e=>e!==2),fi(1)).subscribe(()=>{t()})}var t3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ue=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(h0);stateManager=V(dh);options=V(tr,{optional:!0})||{};pendingTasks=V(bi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(_u);urlSerializer=V(zr);location=V(zi);urlHandlingStrategy=V(hu);injector=V(tt);_events=new dt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(Wx);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(Jo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(Gs,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ct;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=ut(this.navigationTransitions.currentNavigation);if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof di&&i.code!==zt.Redirect&&i.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Dn)this.navigated=!0;else if(i instanceof $o){let d=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),m=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||XO(r.source)},d);this.scheduleNavigation(u,Uo,null,m,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}YT(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Uo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},d=r?.navigationId?r:null;if(r){let m=N({},r);delete m.navigationId,delete m.\u0275routerPageId,Object.keys(m).length!==0&&(s.state=m)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,d,s).catch(m=>{this.disposed||this.injector.get(Cn)(m)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ut(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(oh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:d,queryParamsHandling:u,preserveFragment:m}=i,b=m?this.currentUrlTree.fragment:d,C=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":C=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}C!==null&&(C=this.removeEmptyProps(C));let w;try{let O=r?r.snapshot:this.routerState.snapshot.root;w=hx(O)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),w=this.currentUrlTree.root}return _x(w,e,C,b??null,this.urlSerializer)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Xi(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Uo,null,i)}navigate(e,i={skipLocationChange:!1}){return i3(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(vi(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=N({},t3):i===!1?r=N({},n3):r=i,Xi(e))return KC(this.currentUrlTree,e,r);let s=this.parseUrl(e);return KC(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,d){if(this.disposed)return Promise.resolve(!1);let u,m,b;d?(u=d.resolve,m=d.reject,b=d.promise):b=new Promise((w,O)=>{u=w,m=O});let C=this.pendingTasks.add();return vu(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:u,reject:m,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(w=>Promise.reject(w))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i3(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new F(4008,!1)}var K=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=xn(null);get href(){return ut(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new dt;applicationErrorHandler=V(Cn);options=V(tr,{optional:!0});constructor(e,i,r,s,d,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=d,this.locationStrategy=u,this.reactiveHref.set(V(new Bc("href"),{optional:!0}));let m=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=m==="a"||m==="area"||!!(typeof customElements=="object"&&customElements.get(m)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Dn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xi(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,d){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||r||s||d||typeof this.target=="string"&&this.target!="_self"))return!0;let m={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,m)?.catch(b=>{this.applicationErrorHandler(b)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Xi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(I(ue),I(Xe),Ha("tabindex"),I(jn),I(Sn),I(Wn))};static \u0275dir=We({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&y("click",function(d){return r.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&Ui("href",r.reactiveHref(),Qf)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",qi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",qi],replaceUrl:[2,"replaceUrl","replaceUrl",qi],routerLink:"routerLink"},features:[xi]})}return n})();var Hs=class{};var Gx=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(e=>e instanceof Dn),Oi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Mo(s.providers,e,`Route: ${s.path}`));let d=s._injector??e,u=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(u,s.children??s._loadedRoutes))}return Je(r).pipe(ro())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=Je(this.loader.loadChildren(e,i)):r=me(null);let s=r.pipe(yt(d=>d===null?me(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));if(i.loadComponent&&!i._loadedComponent){let d=this.loader.loadComponent(e,i);return Je([s,d]).pipe(ro())}else return s})}static \u0275fac=function(i){return new(i||n)(j(ue),j(tt),j(Hs),j(gu))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qx=new X(""),r3=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Uo;restoredId=0;store={};constructor(e,i,r,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=d,d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof er?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Dn?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ui&&e.code===qo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof zo))return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(async()=>{await new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new zo(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){u0()};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();function o3(){return V(ue).routerState.root}function zs(n,t){return{\u0275kind:n,\u0275providers:t}}function a3(){let n=V(Tt);return t=>{let e=n.get(ai);if(t!==e.components[0])return;let i=n.get(ue),r=n.get(Hx);n.get(ph)===1&&i.initialNavigation(),n.get(Qx,null,{optional:!0})?.setUpPreloading(),n.get(qx,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Hx=new X("",{factory:()=>new dt}),ph=new X("",{factory:()=>1});function zx(){let n=[{provide:qf,useValue:!0},{provide:ph,useValue:0},Vc(()=>{let t=V(Tt);return t.get(R0,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(ue),s=t.get(Hx);vu(r,()=>{i(!0)}),t.get(_u).afterPreactivation=()=>(i(!0),s.closed?me(void 0):s),r.initialNavigation()}))})];return zs(2,n)}function $x(){let n=[Vc(()=>{V(ue).setUpLocationChangeListener()}),{provide:ph,useValue:2}];return zs(3,n)}var Qx=new X("");function Kx(n){return zs(0,[{provide:Qx,useExisting:Gx},{provide:Hs,useExisting:n}])}function Yx(){return zs(8,[ih,{provide:Gs,useExisting:ih}])}function Zx(n){kr("NgRouterViewTransitions");let t=[{provide:sh,useValue:Bx},{provide:lh,useValue:N({skipNextTransition:!!n?.skipInitialTransition},n)}];return zs(9,t)}var Jx=[zi,{provide:zr,useClass:Pi},ue,$r,{provide:Xe,useFactory:o3},gu,[]],yu=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[Jx,[],{provide:Jo,multi:!0,useValue:e},[],i?.errorHandler?{provide:ch,useValue:i.errorHandler}:[],{provide:tr,useValue:i||{}},i?.useHash?l3():c3(),s3(),i?.preloadingStrategy?Kx(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?d3(i):[],i?.bindToComponentInputs?Yx().\u0275providers:[],i?.enableViewTransitions?Zx().\u0275providers:[],u3()]}}static forChild(e){return{ngModule:n,providers:[{provide:Jo,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({})}return n})();function s3(){return{provide:qx,useFactory:()=>{let n=V(eb),t=V(st),e=V(tr),i=V(_u),r=V(zr);return e.scrollOffset&&n.setOffset(e.scrollOffset),new r3(r,i,n,t,e)}}}function l3(){return{provide:Wn,useClass:W0}}function c3(){return{provide:Wn,useClass:Hc}}function d3(n){return[n.initialNavigation==="disabled"?$x().\u0275providers:[],n.initialNavigation==="enabledBlocking"?zx().\u0275providers:[]]}var uh=new X("");function u3(){return[{provide:uh,useFactory:a3},{provide:Lc,multi:!0,useExisting:uh}]}var bu=class n{constructor(t,e){this.authService=t;this.router=e}intercept(t,e){let i=this.authService.getToken();return i&&(t=t.clone({setHeaders:{Authorization:`Bearer ${i}`}})),e.handle(t).pipe(ln(r=>((r.status===401||r.status===403)&&(this.authService.logout(),this.router.navigate(["/login"])),da(()=>r))))}static \u0275fac=function(e){return new(e||n)(j(Pn),j(ue))};static \u0275prov=R({token:n,factory:n.\u0275fac})};var Ce=class n{notifications=[];notificationsSubject=new He([]);notifications$=this.notificationsSubject.asObservable();idCounter=0;show(t,e="info",i=4e3){let r={id:++this.idCounter,message:t,type:e,duration:i};this.notifications.push(r),this.notificationsSubject.next([...this.notifications]),i>0&&setTimeout(()=>this.remove(r.id),i)}success(t,e){this.show(t,"success",e)}error(t,e){this.show(t,"error",e)}warning(t,e){this.show(t,"warning",e)}info(t,e){this.show(t,"info",e)}remove(t){this.notifications=this.notifications.filter(e=>e.id!==t),this.notificationsSubject.next([...this.notifications])}clear(){this.notifications=[],this.notificationsSubject.next([])}static \u0275fac=function(e){return new(e||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function p3(n,t){n&1&&(o(0,"span"),l(1,"Sign In"),a())}function m3(n,t){n&1&&(o(0,"span"),v(1,"i",26),l(2," Signing in..."),a())}var Cu=class n{constructor(t,e,i){this.router=t;this.authService=e;this.notificationService=i}username="";password="";rememberMe=!1;showPassword=!1;isLoading=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(!this.username||!this.password){this.notificationService.error("Please enter username and password");return}this.isLoading=!0;let t={username:this.username,password:this.password};this.authService.login(t).subscribe({next:()=>{this.isLoading=!1,this.notificationService.success("Login successful!"),this.router.navigate(["/app/dashboard"])},error:e=>{this.isLoading=!1,this.notificationService.error(e.error?.error||"Login failed. Please try again.")}})}static \u0275fac=function(e){return new(e||n)(I(ue),I(Pn),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-login"]],standalone:!1,decls:47,vars:9,consts:[[1,"login-container"],[1,"login-left"],[1,"brand"],[1,"fas","fa-cube"],[1,"illustration"],[1,"fas","fa-chart-line"],[1,"login-right"],[1,"login-box"],[1,"login-header"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"input-wrapper"],[1,"fas","fa-user"],["type","text","id","username","name","username","placeholder","Enter your username",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],[1,"fas","fa-lock"],["id","password","name","password","placeholder","Enter your password",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"checkbox-label"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],["href","#",1,"forgot-link"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],[1,"login-footer"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),v(3,"i",3),o(4,"h1"),l(5,"Hao System"),a()(),o(6,"div",4),v(7,"i",5),o(8,"h2"),l(9,"Manage Your Business Efficiently"),a(),o(10,"p"),l(11,"Streamline operations, track inventory, and grow your business with our comprehensive ERP solution."),a()()(),o(12,"div",6)(13,"div",7)(14,"div",8)(15,"h2"),l(16,"Welcome Back"),a(),o(17,"p"),l(18,"Sign in to continue to your dashboard"),a()(),o(19,"form",9),y("ngSubmit",function(){return i.onSubmit()}),o(20,"div",10)(21,"label",11),l(22,"Username"),a(),o(23,"div",12),v(24,"i",13),o(25,"input",14),M("ngModelChange",function(s){return E(i.username,s)||(i.username=s),s}),a()()(),o(26,"div",10)(27,"label",15),l(28,"Password"),a(),o(29,"div",12),v(30,"i",16),o(31,"input",17),M("ngModelChange",function(s){return E(i.password,s)||(i.password=s),s}),a(),o(32,"button",18),y("click",function(){return i.togglePasswordVisibility()}),v(33,"i"),a()()(),o(34,"div",19)(35,"label",20)(36,"input",21),M("ngModelChange",function(s){return E(i.rememberMe,s)||(i.rememberMe=s),s}),a(),o(37,"span"),l(38,"Remember me"),a()(),o(39,"a",22),l(40,"Forgot Password?"),a()(),o(41,"button",23),x(42,p3,2,0,"span",24)(43,m3,3,0,"span",24),a()(),o(44,"div",25)(45,"p"),l(46,"Default login: admin / admin123"),a()()()()()),e&2&&(c(25),S("ngModel",i.username),c(6),p("type",i.showPassword?"text":"password"),S("ngModel",i.password),c(2),Mn(i.showPassword?"fas fa-eye-slash":"fas fa-eye"),c(3),S("ngModel",i.rememberMe),c(5),p("disabled",i.isLoading),c(),p("ngIf",!i.isLoading),c(),p("ngIf",i.isLoading))},dependencies:[B,Zi,H,Et,q,Yi,G,Ii],styles:[".login-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.login-left[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#00796b,#004d40);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px;color:#fff}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:60px}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{text-align:center;max-width:400px}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:6rem;margin-bottom:30px;opacity:.9}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:16px;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;line-height:1.6}.login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px;background:#f5f7fa}.login-box[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;padding:40px;border-radius:16px;box-shadow:0 10px 40px #0000001a}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#2c3e50;margin-bottom:8px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:.9rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:16px;color:#6c757d;font-size:1rem}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 46px;border:1px solid #e0e0e0;border-radius:10px;font-size:.95rem;transition:all .3s ease}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b;box-shadow:0 0 0 3px #00796b1a}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:16px;background:none;border:none;cursor:pointer;color:#6c757d;padding:0}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#00796b}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:#6c757d}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#00796b}.forgot-link[_ngcontent-%COMP%]{color:#00796b;text-decoration:none;font-size:.9rem;font-weight:500}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fef2f2;color:#dc3545;padding:12px 16px;border-radius:8px;margin-bottom:20px;display:flex;align-items:center;gap:8px;font-size:.9rem}.btn-login[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00796b4d}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:24px;color:#6c757d;font-size:.9rem}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-weight:500;text-decoration:none}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:992px){.login-left[_ngcontent-%COMP%]{display:none}.login-right[_ngcontent-%COMP%]{flex:1}}@media(max-width:480px){.login-right[_ngcontent-%COMP%]{padding:20px}.login-box[_ngcontent-%COMP%]{padding:24px}}"]})};function f3(n,t){if(n&1&&v(0,"i",17),n&2){let e=f().$implicit;J("rotated",e.expanded)}}function g3(n,t){if(n&1&&v(0,"i",17),n&2){let e=f().$implicit;J("rotated",e.expanded)}}function h3(n,t){if(n&1){let e=T();o(0,"li",12)(1,"a",19),y("click",function(){let r=h(e).$implicit,s=f(5);return _(s.toggleMenu(r))}),v(2,"i"),o(3,"span",14),l(4),a()()()}if(n&2){let e=t.$implicit,i=f(5);J("active",i.isActive(e.route)),c(2),Mn(e.icon),c(2),g(e.label)}}function _3(n,t){if(n&1&&(o(0,"ul",21),x(1,h3,5,5,"li",22),a()),n&2){let e=f().$implicit;c(),p("ngForOf",e.children)}}function v3(n,t){if(n&1){let e=T();Za(0),o(1,"li",12)(2,"a",19),y("click",function(){let r=h(e).$implicit,s=f(3);return _(s.toggleMenu(r))}),v(3,"i"),o(4,"span",14),l(5),a(),x(6,g3,1,2,"i",15),a(),x(7,_3,2,1,"ul",20),a(),Ja()}if(n&2){let e=t.$implicit,i=f(3);c(),J("active",i.isActive(e.route))("has-active-child",i.hasActiveChild(e)),c(2),Mn(e.icon),c(2),g(e.label),c(),p("ngIf",e.children),c(),p("ngIf",e.children&&e.expanded)}}function y3(n,t){if(n&1&&(o(0,"ul",18),x(1,v3,8,9,"ng-container",7),a()),n&2){let e=f().$implicit;c(),p("ngForOf",e.children)}}function b3(n,t){if(n&1){let e=T();Za(0),o(1,"li",12)(2,"a",13),y("click",function(){let r=h(e).$implicit,s=f();return _(s.toggleMenu(r))}),v(3,"i"),o(4,"span",14),l(5),a(),x(6,f3,1,2,"i",15),a(),x(7,y3,2,1,"ul",16),a(),Ja()}if(n&2){let e=t.$implicit,i=f();c(),J("active",i.isActive(e.route))("has-active-child",i.hasActiveChild(e)),c(),p("title",e.label),c(),Mn(e.icon),c(2),g(e.label),c(),p("ngIf",e.children),c(),p("ngIf",e.children&&e.expanded)}}var xu=class n{constructor(t,e){this.router=t;this.authService=e}collapsed=!1;mobileOpen=!1;allMenuItems=[{icon:"fas fa-home",label:"Dashboard",route:"/app/dashboard",permissionKey:"Dashboard"},{icon:"fas fa-cog",label:"Settings",expanded:!1,permissionKey:"Settings",children:[{icon:"fas fa-sliders-h",label:"General Settings",route:"/app/settings/general"},{icon:"fas fa-dollar-sign",label:"Finance Settings",expanded:!1,children:[{icon:"fas fa-percent",label:"Tax Rates",route:"/app/settings/finance/tax-rates"},{icon:"fas fa-coins",label:"Currencies",route:"/app/settings/finance/currencies"},{icon:"fas fa-credit-card",label:"Payment Modes",route:"/app/settings/finance/payment-modes"},{icon:"fas fa-receipt",label:"Expense Categories",route:"/app/settings/finance/expense-categories"}]},{icon:"fas fa-user-cog",label:"Customer Settings",route:"/app/settings/customer"},{icon:"fas fa-file-contract",label:"Contract Settings",route:"/app/settings/contract"},{icon:"fas fa-user-shield",label:"Roles Settings",route:"/app/settings/roles"},{icon:"fas fa-users-cog",label:"Staff Management",route:"/app/settings/staff"},{icon:"fas fa-hashtag",label:"Prefix Settings",route:"/app/settings/prefixes"}]},{icon:"fas fa-users",label:"Customer Management",route:"/app/customers",permissionKey:"Customer Management"},{icon:"fas fa-file-signature",label:"Contract Management",route:"/app/contracts",permissionKey:"Contract Management"},{icon:"fas fa-boxes",label:"Inventory Management",expanded:!1,permissionKey:"Inventory",children:[{icon:"fas fa-layer-group",label:"Group Master",route:"/app/inventory/groups",permissionKey:"Inventory - Group Master"},{icon:"fas fa-box",label:"Item Master",route:"/app/inventory/items",permissionKey:"Inventory - Item Master"},{icon:"fas fa-balance-scale",label:"Units of Measure",route:"/app/inventory/units",permissionKey:"Inventory - Units of Measure"},{icon:"fas fa-warehouse",label:"Warehouse & Bin",expanded:!1,permissionKey:"Inventory - Warehouse & Bin",children:[{icon:"fas fa-warehouse",label:"Warehouse Management",route:"/app/inventory/warehouse"},{icon:"fas fa-truck",label:"Supplier",route:"/app/inventory/suppliers"}]},{icon:"fas fa-calculator",label:"Inventory Valuation Engine",route:"/app/inventory/valuation",permissionKey:"Inventory - Valuation"},{icon:"fas fa-exchange-alt",label:"Stock Movement",expanded:!1,children:[{icon:"fas fa-arrow-down",label:"Goods Receipt (GRN)",route:"/app/stock/grn",permissionKey:"Stock Movement - Goods Receipt (GRN)"},{icon:"fas fa-arrow-up",label:"Goods Issue",route:"/app/stock/issue",permissionKey:"Stock Movement - Goods Issue"},{icon:"fas fa-arrows-alt-h",label:"Stock Transfer",route:"/app/stock/transfer",permissionKey:"Stock Movement - Stock Transfer"},{icon:"fas fa-edit",label:"Stock Adjustments",route:"/app/stock/adjustments",permissionKey:"Stock Movement - Stock Adjustments"}]},{icon:"fas fa-book",label:"Inventory Ledger",route:"/app/inventory/ledger",permissionKey:"Inventory - Ledger"}]},{icon:"fas fa-shopping-cart",label:"Purchase Order Management",expanded:!1,permissionKey:"Purchase",children:[{icon:"fas fa-file-alt",label:"Purchase Requisition",route:"/app/purchase/requisition",permissionKey:"Purchase - Requisition"},{icon:"fas fa-file-invoice",label:"Purchase Order",route:"/app/purchase/orders",permissionKey:"Purchase - Orders"},{icon:"fas fa-file-invoice-dollar",label:"Purchase Invoice",route:"/app/purchase/invoices",permissionKey:"Purchase - Invoices"}]},{icon:"fas fa-chart-bar",label:"Reports",expanded:!1,permissionKey:"Reports",children:[{icon:"fas fa-boxes",label:"Inventory Reports",expanded:!1,permissionKey:"Reports - Inventory",children:[{icon:"fas fa-clipboard-list",label:"Stock Summary Report",route:"/app/reports/stock-summary"},{icon:"fas fa-coins",label:"Inventory Valuation Report",route:"/app/reports/valuation"},{icon:"fas fa-chart-line",label:"Item Movement Report",route:"/app/reports/item-movement"},{icon:"fas fa-book-open",label:"Stock Ledger Report",route:"/app/reports/stock-ledger"},{icon:"fas fa-sitemap",label:"Group-wise Stock Report",route:"/app/reports/group-wise"},{icon:"fas fa-warehouse",label:"Warehouse Stock Report",route:"/app/reports/warehouse-stock"},{icon:"fas fa-exclamation-triangle",label:"Reorder Level",route:"/app/reports/reorder-level"},{icon:"fas fa-hourglass-half",label:"Slow/Non-Moving Items Report",route:"/app/reports/slow-moving"},{icon:"fas fa-file-invoice",label:"Purchase vs GRN Report",route:"/app/reports/purchase-grn"}]},{icon:"fas fa-shopping-cart",label:"Purchase Reports",expanded:!1,permissionKey:"Reports - Purchase",children:[{icon:"fas fa-list-alt",label:"PR List Report",route:"/app/reports/purchase/pr-list"},{icon:"fas fa-clock",label:"PR Item Pending Report",route:"/app/reports/purchase/pr-pending"},{icon:"fas fa-history",label:"PR Fulfillment History Report",route:"/app/reports/purchase/pr-history"},{icon:"fas fa-file-alt",label:"PO List",route:"/app/reports/purchase/po-list"},{icon:"fas fa-cart-arrow-down",label:"Direct Purchase Report",route:"/app/reports/purchase/direct-purchase"},{icon:"fas fa-exchange-alt",label:"Stock Issue/Transfer Report",route:"/app/reports/purchase/stock-issue-transfer"}]}]},{icon:"fas fa-history",label:"Audit Trails & Logging",expanded:!1,permissionKey:"Audit Trails",children:[{icon:"fas fa-server",label:"System Audits",route:"/app/audit/system"},{icon:"fas fa-boxes",label:"Inventory Audits",route:"/app/audit/inventory"},{icon:"fas fa-shopping-cart",label:"Purchase Audits",route:"/app/audit/purchase"}]}];menuItems=[];ngOnInit(){this.filterMenuByPermissions(),this.authService.currentUser$.subscribe(()=>{this.filterMenuByPermissions()})}filterMenuByPermissions(){if(this.authService.isAdmin()){this.menuItems=this.allMenuItems;return}this.menuItems=this.filterItems(this.allMenuItems)}filterItems(t){return t.filter(e=>this.hasAccessToItem(e)).map(e=>e.children?ce(N({},e),{children:this.filterItems(e.children)}):e).filter(e=>!e.children||e.children.length>0)}hasAccessToItem(t){return t.permissionKey?this.authService.hasFeatureAccess(t.permissionKey):!0}toggleMenu(t){t.children?t.expanded=!t.expanded:t.route&&this.router.navigate([t.route])}isActive(t){return t?this.router.url===t:!1}hasActiveChild(t){return t.children?t.children.some(e=>e.route&&this.router.url===e.route?!0:e.children?this.hasActiveChild(e):!1):!1}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(I(ue),I(Pn))};static \u0275cmp=A({type:n,selectors:[["app-sidebar"]],inputs:{collapsed:"collapsed",mobileOpen:"mobileOpen"},standalone:!1,decls:14,vars:6,consts:[[1,"sidebar"],[1,"sidebar-header"],[1,"logo"],[1,"fas","fa-cube"],[1,"logo-text"],[1,"sidebar-nav"],[1,"nav-list"],[4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"logout-btn",3,"click","title"],[1,"fas","fa-sign-out-alt"],[1,"logout-text"],[1,"nav-item"],[1,"nav-link",3,"click","title"],[1,"nav-text"],["class","fas fa-chevron-down expand-icon",3,"rotated",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"fas","fa-chevron-down","expand-icon"],[1,"sub-menu"],[1,"nav-link",3,"click"],["class","sub-menu nested",4,"ngIf"],[1,"sub-menu","nested"],["class","nav-item",3,"active",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(o(0,"aside",0)(1,"div",1)(2,"div",2),v(3,"i",3),o(4,"span",4),l(5,"Hao System"),a()()(),o(6,"nav",5)(7,"ul",6),x(8,b3,8,10,"ng-container",7),a()(),o(9,"div",8)(10,"a",9),y("click",function(){return i.logout()}),v(11,"i",10),o(12,"span",11),l(13,"Logout"),a()()()()),e&2&&(J("collapsed",i.collapsed)("mobile-open",i.mobileOpen),c(8),p("ngForOf",i.menuItems),c(2),p("title","Logout"))},dependencies:[L,B],styles:['.sidebar[_ngcontent-%COMP%]{width:280px;height:100vh;background:linear-gradient(180deg,#066,teal,#004d4d);position:fixed;left:0;top:0;display:flex;flex-direction:column;box-shadow:2px 0 15px #00000026;transition:all .3s ease;z-index:100;overflow-x:hidden;overflow-y:auto}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:none!important}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:14px}.sidebar-header[_ngcontent-%COMP%]{padding:24px 20px;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:600;color:#fff;display:block!important}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 0}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin:4px 12px;border-radius:8px}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#fff3;color:#fff}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:500}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;color:#ffffffd9;text-decoration:none;cursor:pointer;transition:all .2s ease;border-radius:8px;font-size:.95rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{width:22px;min-width:22px;text-align:center;font-size:1.1rem;color:#fffc;flex-shrink:0}.nav-link[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{flex:1;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block!important;color:#fffffff2}.nav-link[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .3s ease;color:#fff9;width:auto;display:block!important}.nav-link[_ngcontent-%COMP%]   .expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#fff}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.sub-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:6px 0;background:#00000026;border-radius:8px;overflow:hidden;display:block}.sub-menu[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:0;border-radius:0}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#ffffff26;color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:10px 16px 10px 52px;font-size:.9rem;border-radius:0}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{font-size:.9rem}.sub-menu.nested[_ngcontent-%COMP%]{margin:0;background:#0000001a;border-radius:0}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-left:68px;font-size:.85rem;position:relative}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:56px;top:50%;width:6px;height:6px;background:#fff6;border-radius:50%;transform:translateY(-50%)}.sub-menu.nested[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{background:#fff}.sidebar-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid rgba(255,255,255,.1);flex-shrink:0}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;color:#ff6b6b;text-decoration:none;cursor:pointer;border-radius:8px;transition:all .2s ease;font-weight:500}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{font-size:.95rem;display:block!important}.logout-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b26}@media(max-width:992px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.collapsed.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{display:block!important}.sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:block}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:flex-start;padding:12px 16px}}']})};var Su=class n{constructor(t){this.http=t}baseUrl="/api/notifications";unreadCountSubject=new He(0);unreadCount$=this.unreadCountSubject.asObservable();getNotifications(){return this.http.get(this.baseUrl)}getUnreadNotifications(){return this.http.get(`${this.baseUrl}/unread`)}getUnreadCount(){return this.http.get(`${this.baseUrl}/count`).pipe(Qe(t=>this.unreadCountSubject.next(t.count)))}markAsRead(t){return this.http.put(`${this.baseUrl}/${t}/read`,{}).pipe(Qe(()=>{let e=this.unreadCountSubject.value;e>0&&this.unreadCountSubject.next(e-1)}))}markAllAsRead(){return this.http.put(`${this.baseUrl}/read-all`,{}).pipe(Qe(()=>this.unreadCountSubject.next(0)))}deleteNotification(t){return this.http.delete(`${this.baseUrl}/${t}`)}startPolling(t=3e4){return am(t).pipe(pa(0),Wt(()=>this.getUnreadCount()))}refreshCount(){this.getUnreadCount().subscribe()}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function S3(n,t){if(n&1&&(o(0,"span",23),l(1),a()),n&2){let e=f();c(),g(e.getUnreadCount())}}function M3(n,t){if(n&1){let e=T();o(0,"div",31),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.markAsRead(r))}),o(1,"div",32),v(2,"i",33),a(),o(3,"div",34)(4,"strong"),l(5),a(),o(6,"p"),l(7),a(),o(8,"span",35),l(9),a()()()}if(n&2){let e=t.$implicit,i=f(2);J("unread",!e.read),c(2),p("ngClass",i.getNotificationIcon(e.type)),c(3),g(e.title),c(2),g(e.message),c(2),g(i.getTimeAgo(e.createdAt))}}function E3(n,t){n&1&&(o(0,"div",36),v(1,"i",37),o(2,"p"),l(3,"No notifications"),a()())}function w3(n,t){n&1&&(o(0,"div",38)(1,"a",39),l(2,"View all notifications"),a()())}function I3(n,t){if(n&1){let e=T();o(0,"div",24)(1,"div",25)(2,"h4"),l(3,"Notifications"),a(),o(4,"a",26),y("click",function(){h(e);let r=f();return _(r.markAllAsRead())}),l(5,"Mark all as read"),a()(),o(6,"div",27),x(7,M3,10,6,"div",28)(8,E3,4,0,"div",29),a(),x(9,w3,3,0,"div",30),a()}if(n&2){let e=f();c(7),p("ngForOf",e.notifications),c(),p("ngIf",e.notifications.length===0),c(),p("ngIf",e.notifications.length>0)}}function P3(n,t){if(n&1){let e=T();o(0,"div",40)(1,"a",41),v(2,"i",19),l(3," My Profile "),a(),o(4,"a",41),v(5,"i",42),l(6," Account Settings "),a(),v(7,"div",43),o(8,"a",44),y("click",function(){h(e);let r=f();return _(r.logout())}),v(9,"i",45),l(10," Logout "),a()()}}var Mu=class n{constructor(t,e,i){this.userNotificationService=t;this.authService=e;this.router=i}toggleSidebar=new et;searchQuery="";showNotifications=!1;showProfile=!1;notifications=[];unreadCount=0;currentUserName="User";pollSubscription;ngOnInit(){let t=this.authService.getCurrentUser();t&&(this.currentUserName=t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.username),this.loadNotifications(),this.pollSubscription=this.userNotificationService.startPolling(3e4).subscribe({next:e=>{this.unreadCount=e.count,this.loadNotifications()},error:()=>{}})}ngOnDestroy(){this.pollSubscription&&this.pollSubscription.unsubscribe()}loadNotifications(){this.userNotificationService.getNotifications().subscribe({next:t=>{this.notifications=t,this.unreadCount=t.filter(e=>!e.read).length},error:()=>{this.notifications=[],this.unreadCount=0}})}onToggleSidebar(){this.toggleSidebar.emit()}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showProfile=!1,this.showNotifications&&this.loadNotifications()}toggleProfile(){this.showProfile=!this.showProfile,this.showNotifications=!1}getUnreadCount(){return this.unreadCount}markAsRead(t){t.read||this.userNotificationService.markAsRead(t.id).subscribe({next:()=>{t.read=!0,this.unreadCount=Math.max(0,this.unreadCount-1)}}),t.referenceType==="PurchaseRequisition"&&t.referenceId&&(this.router.navigate(["/app/purchase/requisition"]),this.showNotifications=!1)}markAllAsRead(){this.userNotificationService.markAllAsRead().subscribe({next:()=>{this.notifications.forEach(t=>t.read=!0),this.unreadCount=0}})}getTimeAgo(t){let e=new Date(t),r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4);if(s<1)return"Just now";if(s<60)return`${s} min ago`;let d=Math.floor(s/60);if(d<24)return`${d} hour${d>1?"s":""} ago`;let u=Math.floor(d/24);return`${u} day${u>1?"s":""} ago`}getNotificationIcon(t){switch(t){case"PR_APPROVAL":return"fa-file-alt";case"PO_CREATED":return"fa-shopping-cart";case"STOCK_ALERT":return"fa-exclamation-triangle";default:return"fa-info-circle"}}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(I(Su),I(Pn),I(ue))};static \u0275cmp=A({type:n,selectors:[["app-header"]],outputs:{toggleSidebar:"toggleSidebar"},standalone:!1,decls:24,vars:5,consts:[[1,"header"],[1,"header-left"],[1,"toggle-btn",3,"click"],[1,"fas","fa-bars"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"header-right"],[1,"header-actions"],[1,"notification-wrapper"],[1,"action-btn",3,"click"],[1,"fas","fa-bell"],["class","badge",4,"ngIf"],["class","dropdown notification-dropdown",4,"ngIf"],[1,"action-btn"],[1,"fas","fa-envelope"],[1,"profile-wrapper"],[1,"profile-btn",3,"click"],[1,"avatar"],[1,"fas","fa-user"],[1,"name"],[1,"fas","fa-chevron-down"],["class","dropdown profile-dropdown",4,"ngIf"],[1,"badge"],[1,"dropdown","notification-dropdown"],[1,"dropdown-header"],["href","javascript:void(0)",3,"click"],[1,"dropdown-body"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf"],["class","notification-empty",4,"ngIf"],["class","dropdown-footer",4,"ngIf"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"fas",3,"ngClass"],[1,"notification-content"],[1,"time"],[1,"notification-empty"],[1,"fas","fa-bell-slash"],[1,"dropdown-footer"],["href","javascript:void(0)"],[1,"dropdown","profile-dropdown"],["href","javascript:void(0)",1,"dropdown-item"],[1,"fas","fa-cog"],[1,"dropdown-divider"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(e,i){e&1&&(o(0,"header",0)(1,"div",1)(2,"button",2),y("click",function(){return i.onToggleSidebar()}),v(3,"i",3),a(),o(4,"div",4),v(5,"i",5),o(6,"input",6),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(7,"div",7)(8,"div",8)(9,"div",9)(10,"button",10),y("click",function(){return i.toggleNotifications()}),v(11,"i",11),x(12,S3,2,1,"span",12),a(),x(13,I3,10,3,"div",13),a(),o(14,"button",14),v(15,"i",15),a()(),o(16,"div",16)(17,"button",17),y("click",function(){return i.toggleProfile()}),o(18,"div",18),v(19,"i",19),a(),o(20,"span",20),l(21),a(),v(22,"i",21),a(),x(23,P3,11,0,"div",22),a()()()),e&2&&(c(6),S("ngModel",i.searchQuery),c(6),p("ngIf",i.getUnreadCount()>0),c(),p("ngIf",i.showNotifications),c(8),g(i.currentUserName),c(2),p("ngIf",i.showProfile))},dependencies:[oe,L,B,H,q,G],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#fff;box-shadow:0 2px 10px #0000000d;position:sticky;top:0;z-index:50}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#6c757d;cursor:pointer;padding:8px;border-radius:8px;transition:all .3s ease}.toggle-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#f5f7fa;padding:10px 16px;border-radius:10px;min-width:300px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;outline:none;font-size:.9rem;flex:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.action-btn[_ngcontent-%COMP%]{position:relative;background:none;border:none;font-size:1.1rem;color:#6c757d;cursor:pointer;padding:10px;border-radius:10px;transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.action-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#dc3545;color:#fff;font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600}.notification-wrapper[_ngcontent-%COMP%], .profile-wrapper[_ngcontent-%COMP%]{position:relative}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000026;min-width:320px;margin-top:8px;z-index:100;overflow:hidden}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.dropdown-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2c3e50}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.85rem;text-decoration:none}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropdown-body[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 20px;border-bottom:1px solid #f5f7fa;cursor:pointer;transition:background .3s ease}.notification-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.notification-item.unread[_ngcontent-%COMP%]{background:#00796b0d}.notification-item[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#2c3e50;margin-bottom:4px}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.notification-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#6c757d}.notification-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:12px;opacity:.5}.notification-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.notification-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600;color:#2c3e50;margin-bottom:4px}.dropdown-footer[_ngcontent-%COMP%]{padding:12px 20px;text-align:center;border-top:1px solid #e0e0e0}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.9rem;text-decoration:none;font-weight:500}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.profile-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:none;border:none;cursor:pointer;padding:8px 12px;border-radius:10px;transition:all .3s ease}.profile-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa}.profile-btn[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1rem}.profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#2c3e50}.profile-btn[_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d}.profile-dropdown[_ngcontent-%COMP%]{min-width:200px}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;color:#6c757d;text-decoration:none;transition:all .3s ease}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;text-align:center}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.dropdown-item.text-danger[_ngcontent-%COMP%]{color:#dc3545}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#dc35451a;color:#dc3545}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e0e0e0;margin:8px 0}@media(max-width:768px){.search-box[_ngcontent-%COMP%], .profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}}"]})};function T3(n,t){if(n&1){let e=T();o(0,"div",6),y("click",function(){h(e);let r=f();return _(r.closeMobileMenu())}),a()}}var Eu=class n{sidebarCollapsed=!1;mobileMenuOpen=!1;isMobile=!1;constructor(){this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=992,this.isMobile||(this.mobileMenuOpen=!1)}toggleSidebar(){this.isMobile?this.mobileMenuOpen=!this.mobileMenuOpen:this.sidebarCollapsed=!this.sidebarCollapsed}closeMobileMenu(){this.isMobile&&(this.mobileMenuOpen=!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-layout"]],hostBindings:function(e,i){e&1&&y("resize",function(){return i.onResize()},Kf)},standalone:!1,decls:7,vars:7,consts:[[1,"layout"],["class","mobile-overlay",3,"click",4,"ngIf"],[3,"collapsed","mobileOpen"],[1,"main-wrapper"],[3,"toggleSidebar"],[1,"main-content"],[1,"mobile-overlay",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0),x(1,T3,1,0,"div",1),v(2,"app-sidebar",2),o(3,"div",3)(4,"app-header",4),y("toggleSidebar",function(){return i.toggleSidebar()}),a(),o(5,"main",5),v(6,"router-outlet"),a()()()),e&2&&(J("sidebar-collapsed",i.sidebarCollapsed)("mobile-menu-open",i.mobileMenuOpen),c(),p("ngIf",i.mobileMenuOpen),c(),p("collapsed",i.sidebarCollapsed)("mobileOpen",i.mobileMenuOpen))},dependencies:[B,Qr,xu,Mu],styles:[".layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.main-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:280px;transition:margin-left .3s ease}.layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:70px}.main-content[_ngcontent-%COMP%]{flex:1;padding:24px;background:#f5f7fa;overflow-y:auto}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:99}@media(max-width:992px){.main-wrapper[_ngcontent-%COMP%], .layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:0}.mobile-overlay[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]:not(.mobile-menu-open)   .mobile-overlay[_ngcontent-%COMP%]{display:none}}"]})};var wu=class n{constructor(t){this.http=t}baseUrl="/api/dashboard";getStats(){return this.http.get(`${this.baseUrl}/stats`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var Oe=class n{constructor(t){this.http=t}baseUrl="/api/inventory/items";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByGroup(t){return this.http.get(`${this.baseUrl}/group/${t}`)}validateName(t,e,i){let r=`${this.baseUrl}/validate-name?name=${encodeURIComponent(t)}&groupId=${e}`;return i&&(r+=`&excludeId=${i}`),this.http.get(r)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}getLowStock(){return this.http.get(`${this.baseUrl}/low-stock`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function k3(n,t){if(n&1&&(o(0,"div",25)(1,"div",26),v(2,"i"),a(),o(3,"div",27)(4,"h3"),l(5),a(),o(6,"p"),l(7),a()()()),n&2){let e=t.$implicit;c(),p("ngClass",e.type),c(),Mn(e.icon),c(3),g(e.value),c(2),g(e.label)}}function N3(n,t){n&1&&(o(0,"tr")(1,"td",28),v(2,"i",29),o(3,"p"),l(4,"No low stock alerts"),a()()())}function R3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",30),l(11),a()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.code),c(2),g(e.name),c(2),g(e.currentStock),c(2),g(e.reorderLevel),c(2),p("ngClass",i.getStatusClass(e.currentStock<=0?"Critical":"Low")),c(),D(" ",e.currentStock<=0?"Out of Stock":"Low Stock"," ")}}var Iu=class n{constructor(t,e){this.dashboardService=t;this.itemService=e}stats=[];dashboardStats=null;lowStockItems=[];loading=!0;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.dashboardService.getStats().subscribe({next:t=>{this.dashboardStats=t,this.stats=[{icon:"fas fa-users",label:"Total Customers",value:t.totalCustomers?.toString()||"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:t.totalContracts?.toString()||"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:t.totalItems?.toString()||"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$"+(t.totalInventoryValue?.toLocaleString()||"0"),change:"",type:"warning"}],this.loading=!1},error:t=>{console.error("Error loading dashboard stats",t),this.stats=[{icon:"fas fa-users",label:"Total Customers",value:"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$0",change:"",type:"warning"}],this.loading=!1}}),this.itemService.getLowStock().subscribe({next:t=>{this.lowStockItems=t},error:t=>console.error("Error loading low stock items",t)})}getPriorityClass(t){return{Low:"badge-success",Medium:"badge-warning",High:"badge-danger",Critical:"badge-danger"}[t]||"badge-info"}getStatusClass(t){return t==="Critical"?"badge-danger":"badge-warning"}static \u0275fac=function(e){return new(e||n)(I(wu),I(Oe))};static \u0275cmp=A({type:n,selectors:[["app-dashboard"]],standalone:!1,decls:80,vars:17,consts:[[1,"dashboard"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"stats-grid"],["class","stat-card",4,"ngFor","ngForOf"],[1,"dashboard-grid"],[1,"card","chart-card"],[1,"card-header"],[1,"chart-container"],[1,"chart-placeholder"],[1,"bar-chart"],[1,"bar"],[1,"bar-label"],[1,"side-stats"],[1,"card","earnings-card"],[1,"amount"],[1,"label"],[1,"card","customers-card"],[1,"card"],["routerLink","/app/reports/reorder-level",1,"btn","btn-primary","btn-sm"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"stat-card"],[1,"icon",3,"ngClass"],[1,"info"],["colspan","5",1,"empty-state"],[1,"fas","fa-check-circle",2,"color","#4caf50"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Dashboard"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Dashboard"),a()()()(),o(12,"div",4),x(13,k3,8,5,"div",5),a(),o(14,"div",6)(15,"div",7)(16,"div",8)(17,"h3"),l(18,"Revenue Overview"),a()(),o(19,"div",9)(20,"div",10)(21,"div",11)(22,"div",12)(23,"span",13),l(24,"Jan"),a()(),o(25,"div",12)(26,"span",13),l(27,"Feb"),a()(),o(28,"div",12)(29,"span",13),l(30,"Mar"),a()(),o(31,"div",12)(32,"span",13),l(33,"Apr"),a()(),o(34,"div",12)(35,"span",13),l(36,"May"),a()(),o(37,"div",12)(38,"span",13),l(39,"Jun"),a()()()()()(),o(40,"div",14)(41,"div",15)(42,"h4"),l(43,"Inventory Summary"),a(),o(44,"div",16)(45,"h3"),l(46),a(),o(47,"span",17),l(48,"Total Items"),a()()(),o(49,"div",18)(50,"h4"),l(51,"Active Contracts"),a(),o(52,"div",16)(53,"h3"),l(54),a(),o(55,"span",17),l(56,"Contracts"),a()()()()(),o(57,"div",19)(58,"div",8)(59,"h3"),l(60,"Low Stock Alerts"),a(),o(61,"a",20),l(62,"View All"),a()(),o(63,"div",21)(64,"table",22)(65,"thead")(66,"tr")(67,"th"),l(68,"Item Code"),a(),o(69,"th"),l(70,"Item Name"),a(),o(71,"th"),l(72,"Current Stock"),a(),o(73,"th"),l(74,"Reorder Level"),a(),o(75,"th"),l(76,"Status"),a()()(),o(77,"tbody"),x(78,N3,5,0,"tr",23)(79,R3,12,6,"tr",24),a()()()()()),e&2&&(c(13),p("ngForOf",i.stats),c(9),Mt("height",60,"%"),c(3),Mt("height",75,"%"),c(3),Mt("height",45,"%"),c(3),Mt("height",80,"%"),c(3),Mt("height",65,"%"),c(3),Mt("height",90,"%"),c(9),g((i.dashboardStats==null?null:i.dashboardStats.totalItems)||0),c(8),g((i.dashboardStats==null?null:i.dashboardStats.totalContracts)||0),c(24),p("ngIf",i.lowStockItems.length===0),c(),p("ngForOf",i.lowStockItems))},dependencies:[oe,L,B,K],styles:[".dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:4px}.header-stats[_ngcontent-%COMP%]{display:flex;gap:24px}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;text-transform:uppercase}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2c3e50}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{position:relative}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:.85rem;font-weight:500;color:#6c757d}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#28a745}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:24px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.chart-card[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:.875rem;cursor:pointer}.chart-container[_ngcontent-%COMP%]{height:250px;display:flex;align-items:flex-end}.bar-chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;width:100%;height:100%;padding-top:30px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,#00796b,#26a69a);border-radius:6px 6px 0 0;position:relative;display:flex;flex-direction:column;align-items:center;transition:all .3s ease;min-height:20px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:hover{transform:scaleY(1.05)}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{position:absolute;bottom:-25px;font-size:.75rem;color:#6c757d}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{position:absolute;top:-25px;font-size:.75rem;font-weight:500;color:#2c3e50}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;margin-top:40px}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem;color:#6c757d}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.5rem}.side-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.earnings-card[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border-radius:12px;padding:20px}.earnings-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin-bottom:16px;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%]{height:60px;margin-bottom:16px}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;height:100%}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%]{width:8px;background:#ffffff80;border-radius:4px}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]{height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fffc}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:.8rem;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#a5d6a7}.customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#26a69a,#00796b)}.sales-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:8px}.sales-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#2c3e50}.donut-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]{width:150px;height:150px;position:relative}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-ring[_ngcontent-%COMP%]{width:100%;height:100%;border:20px solid #e0e0e0;border-top-color:#00796b;border-right-color:#26a69a;border-radius:50%}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#00796b}.wide-card[_ngcontent-%COMP%]{grid-column:span 1}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem}@media(max-width:1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-stats[_ngcontent-%COMP%]{display:none}}"]})};var we=class n{constructor(t){this.http=t}baseUrl="/api/settings";getGeneralSettings(){return this.http.get(`${this.baseUrl}/general`)}saveGeneralSettings(t){return this.http.post(`${this.baseUrl}/general`,t)}getFinanceSettings(){return this.http.get(`${this.baseUrl}/finance`)}saveFinanceSettings(t){return this.http.post(`${this.baseUrl}/finance`,t)}getPrefixSettings(){return this.http.get(`${this.baseUrl}/prefixes`)}savePrefixSettings(t){return this.http.post(`${this.baseUrl}/prefixes`,t)}generatePrefixId(t){return this.http.get(`${this.baseUrl}/prefixes/generate/${t}`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function A3(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function F3(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function V3(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function L3(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;p("value",e.value),c(),g(e.label)}}var Pu=class n{constructor(t,e){this.settingsService=t;this.notificationService=e}settings={companyName:"",companyAddress:"",companyPhone:"",companyEmail:"",companyWebsite:"",currency:"USD",dateFormat:"DD/MM/YYYY",timezone:"UTC",logoPath:"",valuationMethod:"FIFO"};saving=!1;loading=!1;timezones=["UTC","America/New_York","Europe/London","Asia/Tokyo","Australia/Sydney"];dateFormats=["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD"];currencies=["USD","EUR","GBP","JPY","AUD","CAD"];valuationMethods=[{value:"FIFO",label:"FIFO (First In, First Out)"},{value:"LIFO",label:"LIFO (Last In, First Out)"},{value:"WEIGHTED_AVERAGE",label:"Weighted Average Cost"}];ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getGeneralSettings().subscribe({next:t=>{t&&(this.settings=t),this.loading=!1},error:t=>{console.error("Error loading settings",t),this.loading=!1}})}saveSettings(){this.saving=!0,this.settingsService.saveGeneralSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,this.notificationService.success("Settings saved successfully")},error:t=>{console.error("Error saving settings",t),this.saving=!1,this.notificationService.error("Error saving settings")}})}static \u0275fac=function(e){return new(e||n)(I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-general-settings"]],standalone:!1,decls:80,vars:14,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"card"],[1,"card-title"],[1,"grid-2"],[1,"form-group"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-3"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],[1,"form-actions"],[1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"General Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"General"),a()()()(),o(16,"div",4)(17,"h3",5),l(18,"Company Information"),a(),o(19,"div",6)(20,"div",7)(21,"label"),l(22,"Company Name"),a(),o(23,"input",8),M("ngModelChange",function(s){return E(i.settings.companyName,s)||(i.settings.companyName=s),s}),a()(),o(24,"div",7)(25,"label"),l(26,"Company Email"),a(),o(27,"input",9),M("ngModelChange",function(s){return E(i.settings.companyEmail,s)||(i.settings.companyEmail=s),s}),a()(),o(28,"div",7)(29,"label"),l(30,"Phone Number"),a(),o(31,"input",8),M("ngModelChange",function(s){return E(i.settings.companyPhone,s)||(i.settings.companyPhone=s),s}),a()(),o(32,"div",7)(33,"label"),l(34,"Address"),a(),o(35,"input",8),M("ngModelChange",function(s){return E(i.settings.companyAddress,s)||(i.settings.companyAddress=s),s}),a()()()(),o(36,"div",4)(37,"h3",5),l(38,"Regional Settings"),a(),o(39,"div",10)(40,"div",7)(41,"label"),l(42,"Timezone"),a(),o(43,"select",11),M("ngModelChange",function(s){return E(i.settings.timezone,s)||(i.settings.timezone=s),s}),x(44,A3,2,2,"option",12),a()(),o(45,"div",7)(46,"label"),l(47,"Date Format"),a(),o(48,"select",11),M("ngModelChange",function(s){return E(i.settings.dateFormat,s)||(i.settings.dateFormat=s),s}),x(49,F3,2,2,"option",12),a()(),o(50,"div",7)(51,"label"),l(52,"Currency"),a(),o(53,"select",11),M("ngModelChange",function(s){return E(i.settings.currency,s)||(i.settings.currency=s),s}),x(54,V3,2,2,"option",12),a()()()(),o(55,"div",4)(56,"h3",5),l(57,"Inventory Valuation"),a(),o(58,"div",6)(59,"div",7)(60,"label"),l(61,"Valuation Method"),a(),o(62,"select",11),M("ngModelChange",function(s){return E(i.settings.valuationMethod,s)||(i.settings.valuationMethod=s),s}),x(63,L3,2,2,"option",12),a(),o(64,"small",13)(65,"strong"),l(66,"FIFO:"),a(),l(67," Oldest stock is consumed first. "),o(68,"strong"),l(69,"LIFO:"),a(),l(70," Newest stock is consumed first. "),o(71,"strong"),l(72,"Weighted Average:"),a(),l(73," Uses average cost of all layers. "),a()()()(),o(74,"div",14)(75,"button",15),l(76,"Cancel"),a(),o(77,"button",16),y("click",function(){return i.saveSettings()}),v(78,"i",17),l(79),a()()()),e&2&&(c(23),S("ngModel",i.settings.companyName),c(4),S("ngModel",i.settings.companyEmail),c(4),S("ngModel",i.settings.companyPhone),c(4),S("ngModel",i.settings.companyAddress),c(8),S("ngModel",i.settings.timezone),c(),p("ngForOf",i.timezones),c(4),S("ngModel",i.settings.dateFormat),c(),p("ngForOf",i.dateFormats),c(4),S("ngModel",i.settings.currency),c(),p("ngForOf",i.currencies),c(8),S("ngModel",i.settings.valuationMethod),c(),p("ngForOf",i.valuationMethods),c(14),p("disabled",i.saving),c(2),D(" ",i.saving?"Saving...":"Save Changes"," "))},dependencies:[L,Y,Z,H,Q,q,G,K],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.settings-page[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}"]})};function j3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",14),l(9),a()(),o(10,"td")(11,"div",15)(12,"button",16),v(13,"i",17),a(),o(14,"button",18),v(15,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),D("",e.rate,"%"),c(2),g(e.type),c(3),g(e.status)}}function B3(n,t){if(n&1){let e=T();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Tax Rates"),a(),o(4,"button",9),y("click",function(){h(e);let r=f();return _(r.openModal("tax"))}),v(5,"i",10),l(6," Add Tax Rate "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Rate (%)"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),x(22,j3,16,4,"tr",13),a()()()()}if(n&2){let e=f();c(22),p("ngForOf",e.taxRates)}}function W3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",20),l(9),a()(),o(10,"td")(11,"div",15)(12,"button",16),v(13,"i",17),a(),o(14,"button",18),v(15,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.symbol),c(2),p("ngClass",e.isDefault?"badge-success":"badge-info"),c(),D(" ",e.isDefault?"Yes":"No"," ")}}function U3(n,t){if(n&1){let e=T();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Currencies"),a(),o(4,"button",9),y("click",function(){h(e);let r=f();return _(r.openModal("currency"))}),v(5,"i",10),l(6," Add Currency "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Symbol"),a(),o(17,"th"),l(18,"Default"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),x(22,W3,16,5,"tr",13),a()()()()}if(n&2){let e=f();c(22),p("ngForOf",e.currencies)}}function G3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",14),l(7),a()(),o(8,"td")(9,"div",15)(10,"button",16),v(11,"i",17),a(),o(12,"button",18),v(13,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description),c(3),g(e.status)}}function q3(n,t){if(n&1){let e=T();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Payment Modes"),a(),o(4,"button",9),y("click",function(){h(e);let r=f();return _(r.openModal("payment"))}),v(5,"i",10),l(6," Add Payment Mode "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Description"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Actions"),a()()(),o(19,"tbody"),x(20,G3,14,3,"tr",13),a()()()()}if(n&2){let e=f();c(20),p("ngForOf",e.paymentModes)}}function H3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"div",15)(7,"button",16),v(8,"i",17),a(),o(9,"button",18),v(10,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description)}}function z3(n,t){if(n&1){let e=T();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Expense Categories"),a(),o(4,"button",9),y("click",function(){h(e);let r=f();return _(r.openModal("expense"))}),v(5,"i",10),l(6," Add Category "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Description"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),x(18,H3,11,2,"tr",13),a()()()()}if(n&2){let e=f();c(18),p("ngForOf",e.expenseCategories)}}var Du=class n{activeTab="tax";taxRates=[{id:1,name:"Standard VAT",rate:20,type:"VAT",status:"Active"},{id:2,name:"Reduced VAT",rate:5,type:"VAT",status:"Active"},{id:3,name:"Zero Rate",rate:0,type:"VAT",status:"Active"},{id:4,name:"Service Tax",rate:18,type:"Service",status:"Active"}];currencies=[{id:1,code:"USD",name:"US Dollar",symbol:"$",isDefault:!0},{id:2,code:"EUR",name:"Euro",symbol:"\u20AC",isDefault:!1},{id:3,code:"GBP",name:"British Pound",symbol:"\xA3",isDefault:!1},{id:4,code:"INR",name:"Indian Rupee",symbol:"\u20B9",isDefault:!1}];paymentModes=[{id:1,name:"Cash",description:"Cash payment",status:"Active"},{id:2,name:"Bank Transfer",description:"Direct bank transfer",status:"Active"},{id:3,name:"Credit Card",description:"Credit/Debit card payment",status:"Active"},{id:4,name:"Check",description:"Payment by check",status:"Active"}];expenseCategories=[{id:1,name:"Office Supplies",description:"Stationery and office materials"},{id:2,name:"Travel",description:"Business travel expenses"},{id:3,name:"Utilities",description:"Electricity, water, internet"},{id:4,name:"Marketing",description:"Advertising and promotions"}];showModal=!1;modalType="";setActiveTab(t){this.activeTab=t}openModal(t){this.modalType=t,this.showModal=!0}closeModal(){this.showModal=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-finance-settings"]],standalone:!1,decls:29,vars:12,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"tabs"],[1,"tab",3,"click"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"badge","badge-success"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger"],[1,"fas","fa-trash"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Finance Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Finance"),a()()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.setActiveTab("tax")}),l(18,"Tax Rates"),a(),o(19,"button",5),y("click",function(){return i.setActiveTab("currency")}),l(20,"Currencies"),a(),o(21,"button",5),y("click",function(){return i.setActiveTab("payment")}),l(22,"Payment Modes"),a(),o(23,"button",5),y("click",function(){return i.setActiveTab("expense")}),l(24,"Expense Categories"),a()(),x(25,B3,23,1,"div",6)(26,U3,23,1,"div",6)(27,q3,21,1,"div",6)(28,z3,19,1,"div",6),a()),e&2&&(c(17),J("active",i.activeTab==="tax"),c(2),J("active",i.activeTab==="currency"),c(2),J("active",i.activeTab==="payment"),c(2),J("active",i.activeTab==="expense"),c(2),p("ngIf",i.activeTab==="tax"),c(),p("ngIf",i.activeTab==="currency"),c(),p("ngIf",i.activeTab==="payment"),c(),p("ngIf",i.activeTab==="expense"))},dependencies:[oe,L,B,K],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}"]})};var Tu=class n{constructor(t){this.http=t}apiUrl="/api/settings/customer";getGroups(){return this.http.get(`${this.apiUrl}/groups`)}getGroupById(t){return this.http.get(`${this.apiUrl}/groups/${t}`)}createGroup(t){return this.http.post(`${this.apiUrl}/groups`,t)}updateGroup(t,e){return this.http.put(`${this.apiUrl}/groups/${t}`,e)}deleteGroup(t){return this.http.delete(`${this.apiUrl}/groups/${t}`)}getStatuses(){return this.http.get(`${this.apiUrl}/statuses`)}getStatusById(t){return this.http.get(`${this.apiUrl}/statuses/${t}`)}createStatus(t){return this.http.post(`${this.apiUrl}/statuses`,t)}updateStatus(t,e){return this.http.put(`${this.apiUrl}/statuses/${t}`,e)}deleteStatus(t){return this.http.delete(`${this.apiUrl}/statuses/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Q3(n,t){n&1&&(o(0,"tr")(1,"td",14),l(2,'No customer groups found. Click "Add Group" to create one.'),a()())}function K3(n,t){if(n&1){let e=T();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"div",15)(9,"button",16),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openEditModal("group",r))}),v(10,"i",17),a(),o(11,"button",18),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteGroup(r))}),v(12,"i",19),a()()()()}if(n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description),c(2),D("",e.discount,"%")}}function Y3(n,t){n&1&&(o(0,"tr")(1,"td",20),l(2,'No customer statuses found. Click "Add Status" to create one.'),a()())}function Z3(n,t){if(n&1){let e=T();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),v(4,"span",21),a(),o(5,"td")(6,"div",15)(7,"button",16),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openEditModal("status",r))}),v(8,"i",17),a(),o(9,"button",18),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteStatus(r))}),v(10,"i",19),a()()()()}if(n&2){let e=t.$implicit;c(2),g(e.name),c(2),Mt("background",e.color)}}function J3(n,t){if(n&1){let e=T();o(0,"form",28),y("ngSubmit",function(){h(e);let r=f(2);return _(r.saveGroup())}),o(1,"div",29)(2,"label"),l(3,"Name"),a(),o(4,"input",30),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingGroup.name,r)||(s.editingGroup.name=r),_(r)}),a()(),o(5,"div",29)(6,"label"),l(7,"Description"),a(),o(8,"input",31),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingGroup.description,r)||(s.editingGroup.description=r),_(r)}),a()(),o(9,"div",29)(10,"label"),l(11,"Discount (%)"),a(),o(12,"input",32),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingGroup.discount,r)||(s.editingGroup.discount=r),_(r)}),a()(),o(13,"div",33)(14,"button",34),y("click",function(){h(e);let r=f(2);return _(r.closeModal())}),l(15,"Cancel"),a(),o(16,"button",35),l(17),a()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.editingGroup.name),c(4),S("ngModel",e.editingGroup.description),c(4),S("ngModel",e.editingGroup.discount),c(5),g(e.isEditMode?"Update":"Save")}}function X3(n,t){if(n&1){let e=T();o(0,"form",28),y("ngSubmit",function(){h(e);let r=f(2);return _(r.saveStatus())}),o(1,"div",29)(2,"label"),l(3,"Name"),a(),o(4,"input",36),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingStatus.name,r)||(s.editingStatus.name=r),_(r)}),a()(),o(5,"div",29)(6,"label"),l(7,"Color"),a(),o(8,"input",37),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingStatus.color,r)||(s.editingStatus.color=r),_(r)}),a()(),o(9,"div",33)(10,"button",34),y("click",function(){h(e);let r=f(2);return _(r.closeModal())}),l(11,"Cancel"),a(),o(12,"button",35),l(13),a()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.editingStatus.name),c(4),S("ngModel",e.editingStatus.color),c(5),g(e.isEditMode?"Update":"Save")}}function ek(n,t){if(n&1){let e=T();o(0,"div",22),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",23),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",24)(3,"h3"),l(4),a(),o(5,"button",25),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",26),x(8,J3,18,4,"form",27)(9,X3,14,3,"form",27),a()()()}if(n&2){let e=f();c(4),le("",e.isEditMode?"Edit":"Add"," ",e.modalType==="group"?"Customer Group":"Customer Status"),c(4),p("ngIf",e.modalType==="group"),c(),p("ngIf",e.modalType==="status")}}var Ou=class n{constructor(t){this.customerSettingsService=t}customerGroups=[];customerStatuses=[];showModal=!1;modalType="";isEditMode=!1;editingGroup={name:"",description:"",discount:0};editingStatus={name:"",color:"#28a745"};ngOnInit(){this.loadGroups(),this.loadStatuses()}loadGroups(){this.customerSettingsService.getGroups().subscribe({next:t=>this.customerGroups=t,error:t=>console.error("Error loading groups:",t)})}loadStatuses(){this.customerSettingsService.getStatuses().subscribe({next:t=>this.customerStatuses=t,error:t=>console.error("Error loading statuses:",t)})}openModal(t){this.modalType=t,this.isEditMode=!1,t==="group"?this.editingGroup={name:"",description:"",discount:0}:this.editingStatus={name:"",color:"#28a745"},this.showModal=!0}openEditModal(t,e){this.modalType=t,this.isEditMode=!0,t==="group"?this.editingGroup=N({},e):this.editingStatus=N({},e),this.showModal=!0}closeModal(){this.showModal=!1}saveGroup(){this.isEditMode&&this.editingGroup.id?this.customerSettingsService.updateGroup(this.editingGroup.id,this.editingGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>console.error("Error updating group:",t)}):this.customerSettingsService.createGroup(this.editingGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>console.error("Error creating group:",t)})}saveStatus(){this.isEditMode&&this.editingStatus.id?this.customerSettingsService.updateStatus(this.editingStatus.id,this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error updating status:",t)}):this.customerSettingsService.createStatus(this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error creating status:",t)})}deleteGroup(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.customerSettingsService.deleteGroup(t.id).subscribe({next:()=>this.loadGroups(),error:e=>console.error("Error deleting group:",e)})}deleteStatus(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.customerSettingsService.deleteStatus(t.id).subscribe({next:()=>this.loadStatuses(),error:e=>console.error("Error deleting status:",e)})}static \u0275fac=function(e){return new(e||n)(I(Tu))};static \u0275cmp=A({type:n,selectors:[["app-customer-settings"]],standalone:!1,decls:60,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","4",1,"text-center"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[1,"color-badge"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","name","required","","placeholder","Enter group name",3,"ngModelChange","ngModel"],["type","text","name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["type","number","name","discount","min","0","max","100","placeholder","Enter discount percentage",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","text","name","name","required","","placeholder","Enter status name",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Customer Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Customer"),a()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Customer Groups"),a(),o(21,"button",7),y("click",function(){return i.openModal("group")}),v(22,"i",8),l(23," Add Group "),a()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),a(),o(30,"th"),l(31,"Description"),a(),o(32,"th"),l(33,"Discount"),a(),o(34,"th"),l(35,"Actions"),a()()(),o(36,"tbody"),x(37,Q3,3,0,"tr",11)(38,K3,13,3,"tr",12),a()()()(),o(39,"div",5)(40,"div",6)(41,"h3"),l(42,"Customer Statuses"),a(),o(43,"button",7),y("click",function(){return i.openModal("status")}),v(44,"i",8),l(45," Add Status "),a()(),o(46,"div",9)(47,"table",10)(48,"thead")(49,"tr")(50,"th"),l(51,"Name"),a(),o(52,"th"),l(53,"Color"),a(),o(54,"th"),l(55,"Actions"),a()()(),o(56,"tbody"),x(57,Y3,3,0,"tr",11)(58,Z3,11,3,"tr",12),a()()()()()(),x(59,ek,10,4,"div",13)),e&2&&(c(37),p("ngIf",i.customerGroups.length===0),c(),p("ngForOf",i.customerGroups),c(19),p("ngIf",i.customerStatuses.length===0),c(),p("ngForOf",i.customerStatuses),c(),p("ngIf",i.showModal))},dependencies:[L,B,Zi,H,Me,q,Yi,wt,je,zn,G,Ii,K],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};var ku=class n{constructor(t){this.http=t}apiUrl="/api/settings/contract";getTypes(){return this.http.get(`${this.apiUrl}/types`)}createType(t){return this.http.post(`${this.apiUrl}/types`,t)}updateType(t,e){return this.http.put(`${this.apiUrl}/types/${t}`,e)}deleteType(t){return this.http.delete(`${this.apiUrl}/types/${t}`)}getStatuses(){return this.http.get(`${this.apiUrl}/statuses`)}createStatus(t){return this.http.post(`${this.apiUrl}/statuses`,t)}updateStatus(t,e){return this.http.put(`${this.apiUrl}/statuses/${t}`,e)}deleteStatus(t){return this.http.delete(`${this.apiUrl}/statuses/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function nk(n,t){n&1&&(o(0,"tr")(1,"td",14),l(2,'No contract types found. Click "Add Type" to create one.'),a()())}function ik(n,t){if(n&1){let e=T();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",15),l(7),a()(),o(8,"td")(9,"div",16)(10,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openEditModal("type",r))}),v(11,"i",18),a(),o(12,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteType(r))}),v(13,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.duration),c(2),p("ngClass",e.renewable?"badge-success":"badge-info"),c(),D(" ",e.renewable?"Yes":"No"," ")}}function rk(n,t){n&1&&(o(0,"tr")(1,"td",21),l(2,'No contract statuses found. Click "Add Status" to create one.'),a()())}function ok(n,t){if(n&1){let e=T();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),v(4,"span",22),a(),o(5,"td")(6,"div",16)(7,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openEditModal("status",r))}),v(8,"i",18),a(),o(9,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteStatus(r))}),v(10,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(2),g(e.name),c(2),Mt("background",e.color)}}function ak(n,t){if(n&1){let e=T();o(0,"form",29),y("ngSubmit",function(){h(e);let r=f(2);return _(r.saveType())}),o(1,"div",30)(2,"label"),l(3,"Name"),a(),o(4,"input",31),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingType.name,r)||(s.editingType.name=r),_(r)}),a()(),o(5,"div",30)(6,"label"),l(7,"Duration (Months)"),a(),o(8,"input",32),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingType.duration,r)||(s.editingType.duration=r),_(r)}),a()(),o(9,"div",30)(10,"label",33)(11,"input",34),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingType.renewable,r)||(s.editingType.renewable=r),_(r)}),a(),l(12," Renewable "),a()(),o(13,"div",35)(14,"button",36),y("click",function(){h(e);let r=f(2);return _(r.closeModal())}),l(15,"Cancel"),a(),o(16,"button",37),l(17),a()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.editingType.name),c(4),S("ngModel",e.editingType.duration),c(3),S("ngModel",e.editingType.renewable),c(6),g(e.isEditMode?"Update":"Save")}}function sk(n,t){if(n&1){let e=T();o(0,"form",29),y("ngSubmit",function(){h(e);let r=f(2);return _(r.saveStatus())}),o(1,"div",30)(2,"label"),l(3,"Name"),a(),o(4,"input",38),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingStatus.name,r)||(s.editingStatus.name=r),_(r)}),a()(),o(5,"div",30)(6,"label"),l(7,"Color"),a(),o(8,"input",39),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.editingStatus.color,r)||(s.editingStatus.color=r),_(r)}),a()(),o(9,"div",35)(10,"button",36),y("click",function(){h(e);let r=f(2);return _(r.closeModal())}),l(11,"Cancel"),a(),o(12,"button",37),l(13),a()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.editingStatus.name),c(4),S("ngModel",e.editingStatus.color),c(5),g(e.isEditMode?"Update":"Save")}}function lk(n,t){if(n&1){let e=T();o(0,"div",23),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",24),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",27),x(8,ak,18,4,"form",28)(9,sk,14,3,"form",28),a()()()}if(n&2){let e=f();c(4),le("",e.isEditMode?"Edit":"Add"," ",e.modalType==="type"?"Contract Type":"Contract Status"),c(4),p("ngIf",e.modalType==="type"),c(),p("ngIf",e.modalType==="status")}}var Nu=class n{constructor(t){this.contractSettingsService=t}contractTypes=[];contractStatuses=[];showModal=!1;modalType="";isEditMode=!1;editingType={name:"",duration:12,renewable:!0};editingStatus={name:"",color:"#28a745"};ngOnInit(){this.loadTypes(),this.loadStatuses()}loadTypes(){this.contractSettingsService.getTypes().subscribe({next:t=>this.contractTypes=t,error:t=>console.error("Error loading types:",t)})}loadStatuses(){this.contractSettingsService.getStatuses().subscribe({next:t=>this.contractStatuses=t,error:t=>console.error("Error loading statuses:",t)})}openModal(t){this.modalType=t,this.isEditMode=!1,t==="type"?this.editingType={name:"",duration:12,renewable:!0}:this.editingStatus={name:"",color:"#28a745"},this.showModal=!0}openEditModal(t,e){this.modalType=t,this.isEditMode=!0,t==="type"?this.editingType=N({},e):this.editingStatus=N({},e),this.showModal=!0}closeModal(){this.showModal=!1}saveType(){this.isEditMode&&this.editingType.id?this.contractSettingsService.updateType(this.editingType.id,this.editingType).subscribe({next:()=>{this.loadTypes(),this.closeModal()},error:t=>console.error("Error updating type:",t)}):this.contractSettingsService.createType(this.editingType).subscribe({next:()=>{this.loadTypes(),this.closeModal()},error:t=>console.error("Error creating type:",t)})}saveStatus(){this.isEditMode&&this.editingStatus.id?this.contractSettingsService.updateStatus(this.editingStatus.id,this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error updating status:",t)}):this.contractSettingsService.createStatus(this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error creating status:",t)})}deleteType(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.contractSettingsService.deleteType(t.id).subscribe({next:()=>this.loadTypes(),error:e=>console.error("Error deleting type:",e)})}deleteStatus(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.contractSettingsService.deleteStatus(t.id).subscribe({next:()=>this.loadStatuses(),error:e=>console.error("Error deleting status:",e)})}static \u0275fac=function(e){return new(e||n)(I(ku))};static \u0275cmp=A({type:n,selectors:[["app-contract-settings"]],standalone:!1,decls:60,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","4",1,"text-center"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[1,"color-badge"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","name","required","","placeholder","Enter type name",3,"ngModelChange","ngModel"],["type","number","name","duration","min","1","placeholder","Enter duration in months",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","renewable",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","text","name","name","required","","placeholder","Enter status name",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Contract"),a()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Contract Types"),a(),o(21,"button",7),y("click",function(){return i.openModal("type")}),v(22,"i",8),l(23," Add Type "),a()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),a(),o(30,"th"),l(31,"Duration (Months)"),a(),o(32,"th"),l(33,"Renewable"),a(),o(34,"th"),l(35,"Actions"),a()()(),o(36,"tbody"),x(37,nk,3,0,"tr",11)(38,ik,14,4,"tr",12),a()()()(),o(39,"div",5)(40,"div",6)(41,"h3"),l(42,"Contract Statuses"),a(),o(43,"button",7),y("click",function(){return i.openModal("status")}),v(44,"i",8),l(45," Add Status "),a()(),o(46,"div",9)(47,"table",10)(48,"thead")(49,"tr")(50,"th"),l(51,"Name"),a(),o(52,"th"),l(53,"Color"),a(),o(54,"th"),l(55,"Actions"),a()()(),o(56,"tbody"),x(57,rk,3,0,"tr",11)(58,ok,11,3,"tr",12),a()()()()()(),x(59,lk,10,4,"div",13)),e&2&&(c(37),p("ngIf",i.contractTypes.length===0),c(),p("ngForOf",i.contractTypes),c(19),p("ngIf",i.contractStatuses.length===0),c(),p("ngForOf",i.contractStatuses),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Zi,H,Me,Et,q,Yi,wt,je,G,Ii,K],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};var Xo=class n{constructor(t){this.http=t}apiUrl="/api/roles";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function ck(n,t){n&1&&(o(0,"tr")(1,"td",27),l(2,"No roles found"),a()())}function dk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"div",28)(3,"strong"),l(4),a(),o(5,"span",29),l(6),a()()(),o(7,"td")(8,"div",30)(9,"button",31),y("click",function(){let r=h(e).$implicit,s=f();return _(s.editRole(r))}),v(10,"i",32),a(),o(11,"button",33),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteRole(r))}),v(12,"i",34),a()()()()}if(n&2){let e=t.$implicit;c(4),g(e.name),c(2),D("Total Users: ",e.totalUsers)}}var Ru=class n{constructor(t,e,i){this.router=t;this.roleService=e;this.notificationService=i}roles=[];loading=!1;searchQuery="";pageSize=25;currentPage=1;ngOnInit(){this.loadRoles()}loadRoles(){this.loading=!0,this.roleService.getAll().subscribe({next:t=>{this.roles=t,this.loading=!1},error:t=>{console.error("Error loading roles:",t),this.loading=!1}})}get filteredRoles(){let t=this.roles;return this.searchQuery&&(t=t.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),t}get paginatedRoles(){let t=(this.currentPage-1)*this.pageSize;return this.filteredRoles.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredRoles.length/this.pageSize)||1}get startEntry(){return this.filteredRoles.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredRoles.length)}addRole(){this.router.navigate(["/app/settings/roles/add"])}editRole(t){this.router.navigate(["/app/settings/roles/edit",t.id])}deleteRole(t){confirm(`Are you sure you want to delete the role "${t.name}"?`)&&this.roleService.delete(t.id).subscribe({next:()=>{this.notificationService.success("Role deleted successfully"),this.loadRoles()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting role")}})}exportData(){console.log("Export roles data")}refresh(){this.loadRoles()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(I(ue),I(Xo),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-roles-settings"]],standalone:!1,decls:47,vars:14,consts:[[1,"settings-page"],[1,"page-header-simple"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"sortable"],[1,"fas","fa-sort-up"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"page-number"],["colspan","2",1,"empty-state"],[1,"role-name-cell"],[1,"total-users"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-icon","btn-danger-icon",3,"click"],[1,"fas","fa-trash"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return i.addRole()}),v(3,"i",3),l(4," New Role "),a()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"select",7),M("ngModelChange",function(s){return E(i.pageSize,s)||(i.pageSize=s),s}),o(9,"option",8),l(10,"10"),a(),o(11,"option",8),l(12,"25"),a(),o(13,"option",8),l(14,"50"),a(),o(15,"option",8),l(16,"100"),a()(),o(17,"button",9),y("click",function(){return i.exportData()}),l(18,"Export"),a(),o(19,"button",10),y("click",function(){return i.refresh()}),v(20,"i",11),a()(),o(21,"div",12)(22,"div",13),v(23,"i",14),o(24,"input",15),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),o(25,"div",16)(26,"table",17)(27,"thead")(28,"tr")(29,"th",18),l(30,"Role Name "),v(31,"i",19),a(),o(32,"th"),l(33,"Options"),a()()(),o(34,"tbody"),x(35,ck,3,0,"tr",20)(36,dk,13,2,"tr",21),a()()(),o(37,"div",22)(38,"div",23),l(39),a(),o(40,"div",24)(41,"button",25),y("click",function(){return i.previousPage()}),l(42,"Previous"),a(),o(43,"span",26),l(44),a(),o(45,"button",25),y("click",function(){return i.nextPage()}),l(46,"Next"),a()()()()()),e&2&&(c(8),S("ngModel",i.pageSize),c(),p("value",10),c(2),p("value",25),c(2),p("value",50),c(2),p("value",100),c(9),S("ngModel",i.searchQuery),c(11),p("ngIf",i.paginatedRoles.length===0),c(),p("ngForOf",i.paginatedRoles),c(3),Eo(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredRoles.length," entries "),c(2),p("disabled",i.currentPage===1),c(3),g(i.currentPage),c(),p("disabled",i.currentPage>=i.totalPages))},dependencies:[L,B,Y,Z,H,Q,q,G],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.page-header-simple[_ngcontent-%COMP%]{margin-bottom:20px}.btn-new-role[_ngcontent-%COMP%]{background:var(--primary-color);border:none;padding:10px 20px;font-weight:500}.btn-new-role[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.page-size-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;background:#fff;font-size:.9rem}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);color:var(--text-primary)}.btn-outline[_ngcontent-%COMP%]:hover{background:var(--bg-color)}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);padding:6px 10px}.btn-icon[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.btn-danger-icon[_ngcontent-%COMP%]{color:var(--danger-color)}.btn-danger-icon[_ngcontent-%COMP%]:hover{color:#c82333}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px 8px 36px;border:1px solid var(--border-color);border-radius:6px;width:200px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.role-name-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.role-name-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.role-name-cell[_ngcontent-%COMP%]   .total-users[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.sortable[_ngcontent-%COMP%]{cursor:pointer}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px;color:var(--primary-color)}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid var(--border-color)}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pagination[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;background:var(--primary-color);color:#fff;border-radius:4px;font-weight:500}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto}.permissions-section[_ngcontent-%COMP%]{margin-top:20px}.permissions-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permissions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-primary)}.permissions-table[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary);width:40%}.permissions-table[_ngcontent-%COMP%]   .capabilities-cell[_ngcontent-%COMP%]{width:60%}.capability-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:var(--text-primary)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:var(--primary-color)}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}']})};var ea=class n{constructor(t){this.http=t}apiUrl="/api/staff";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}toggleActive(t){return this.http.post(`${this.apiUrl}/${t}/toggle-active`,{})}getRoles(){return this.http.get(`${this.apiUrl}/roles`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function uk(n,t){n&1&&(o(0,"tr")(1,"td",27),l(2,"No staff members found"),a()())}function pk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"div",28)(3,"div",29),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td")(8,"code"),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td")(17,"label",30)(18,"input",31),y("change",function(){let r=h(e).$implicit,s=f();return _(s.toggleActive(r))}),a(),v(19,"span",32),a()()()}if(n&2){let e=t.$implicit,i=f();c(4),g((e.firstName==null?null:e.firstName.charAt(0))||"?"),c(2),g(i.getFullName(e)),c(3),g(e.username),c(2),g(e.email),c(2),g(e.role),c(2),g(e.lastLogin),c(3),p("checked",e.active)}}var Au=class n{constructor(t,e){this.router=t;this.staffService=e}staff=[];loading=!1;searchQuery="";pageSize=25;currentPage=1;ngOnInit(){this.loadStaff()}loadStaff(){this.loading=!0,this.staffService.getAll().subscribe({next:t=>{this.staff=t,this.loading=!1},error:t=>{console.error("Error loading staff:",t),this.loading=!1}})}get filteredStaff(){return this.searchQuery?this.staff.filter(t=>(t.firstName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(t.lastName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(t.email?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())):this.staff}get paginatedStaff(){let t=(this.currentPage-1)*this.pageSize;return this.filteredStaff.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredStaff.length/this.pageSize)||1}get startEntry(){return this.filteredStaff.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredStaff.length)}getFullName(t){return`${t.firstName||""} ${t.lastName||""}`.trim()}addStaff(){this.router.navigate(["/app/settings/staff/add"])}toggleActive(t){this.staffService.toggleActive(t.id).subscribe({next:()=>{t.active=!t.active},error:e=>{console.error("Error toggling active status:",e)}})}exportData(){console.log("Export staff data")}refresh(){this.loadStaff()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(I(ue),I(ea))};static \u0275cmp=A({type:n,selectors:[["app-staff-management"]],standalone:!1,decls:55,vars:14,consts:[[1,"settings-page"],[1,"page-header-simple"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"sortable"],[1,"fas","fa-sort-up"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"page-number"],["colspan","6",1,"empty-state"],[1,"staff-cell"],[1,"avatar"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return i.addStaff()}),v(3,"i",3),l(4," New Staff Member "),a()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"select",7),M("ngModelChange",function(s){return E(i.pageSize,s)||(i.pageSize=s),s}),o(9,"option",8),l(10,"10"),a(),o(11,"option",8),l(12,"25"),a(),o(13,"option",8),l(14,"50"),a(),o(15,"option",8),l(16,"100"),a()(),o(17,"button",9),y("click",function(){return i.exportData()}),l(18,"Export"),a(),o(19,"button",10),y("click",function(){return i.refresh()}),v(20,"i",11),a()(),o(21,"div",12)(22,"div",13),v(23,"i",14),o(24,"input",15),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),o(25,"div",16)(26,"table",17)(27,"thead")(28,"tr")(29,"th",18),l(30,"Full Name "),v(31,"i",19),a(),o(32,"th"),l(33,"Username"),a(),o(34,"th"),l(35,"Email"),a(),o(36,"th"),l(37,"Role"),a(),o(38,"th"),l(39,"Last Login"),a(),o(40,"th"),l(41,"Active"),a()()(),o(42,"tbody"),x(43,uk,3,0,"tr",20)(44,pk,20,7,"tr",21),a()()(),o(45,"div",22)(46,"div",23),l(47),a(),o(48,"div",24)(49,"button",25),y("click",function(){return i.previousPage()}),l(50,"Previous"),a(),o(51,"span",26),l(52),a(),o(53,"button",25),y("click",function(){return i.nextPage()}),l(54,"Next"),a()()()()()),e&2&&(c(8),S("ngModel",i.pageSize),c(),p("value",10),c(2),p("value",25),c(2),p("value",50),c(2),p("value",100),c(9),S("ngModel",i.searchQuery),c(19),p("ngIf",i.paginatedStaff.length===0),c(),p("ngForOf",i.paginatedStaff),c(3),Eo(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredStaff.length," entries "),c(2),p("disabled",i.currentPage===1),c(3),g(i.currentPage),c(),p("disabled",i.currentPage>=i.totalPages))},dependencies:[L,B,Y,Z,H,Q,q,G],styles:['.page-header-simple[_ngcontent-%COMP%]{margin-bottom:20px}.btn-new-staff[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b6abf,#4a5ba8);border:none;padding:10px 20px;font-weight:500}.btn-new-staff[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4a5ba8,#3d4d8f)}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.page-size-select[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;font-size:.9rem}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.btn-outline[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:#666;padding:6px 10px}.btn-icon[_ngcontent-%COMP%]:hover{color:#333}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px 8px 36px;border:1px solid #ddd;border-radius:4px;width:200px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5b6abf}.staff-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.staff-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#5b6abf,#4a5ba8);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.9rem}.sortable[_ngcontent-%COMP%]{cursor:pointer}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px;color:#5b6abf}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:26px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:26px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#5b6abf}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid #eee}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pagination[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;background:#5b6abf;color:#fff;border-radius:4px;font-weight:500}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid #eee;margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:#666;font-size:.95rem;cursor:pointer;position:relative}.tab.active[_ngcontent-%COMP%]{color:#333;font-weight:600}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#5b6abf}.tab[_ngcontent-%COMP%]:hover:not(.active){color:#333}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:#f5f5f5;border:1px solid #ddd;border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#666;font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:#dc3545;margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:20px;padding:12px;background:#f8f9fa;border-radius:4px}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}']})};function mk(n,t){n&1&&(o(0,"tr")(1,"td",13),v(2,"i",14),o(3,"p"),l(4,'No tax rates configured. Click "Add Tax Rate" to create one.'),a()()())}function fk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td")(12,"div",16)(13,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(14,"i",18),a(),o(15,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteTaxRate(r.id))}),v(16,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.name),c(2),D("",e.rate,"%"),c(2),g(e.description),c(2),J("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function gk(n,t){if(n&1){let e=T();o(0,"div",21),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",22),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Tax Name"),a(),o(11,"input",28),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTaxRate.name,r)||(s.selectedTaxRate.name=r),_(r)}),a()(),o(12,"div",27)(13,"label"),l(14,"Rate (%)"),a(),o(15,"input",29),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTaxRate.rate,r)||(s.selectedTaxRate.rate=r),_(r)}),a()(),o(16,"div",27)(17,"label"),l(18,"Description"),a(),o(19,"textarea",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTaxRate.description,r)||(s.selectedTaxRate.description=r),_(r)}),a()(),o(20,"div",27)(21,"label"),l(22,"Status"),a(),o(23,"select",31),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTaxRate.status,r)||(s.selectedTaxRate.status=r),_(r)}),o(24,"option",32),l(25,"Active"),a(),o(26,"option",33),l(27,"Inactive"),a()()()(),o(28,"div",34)(29,"button",35),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(30,"Cancel"),a(),o(31,"button",5),y("click",function(){h(e);let r=f();return _(r.saveTaxRate())}),l(32),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Tax Rate":"Add Tax Rate"),c(7),S("ngModel",e.selectedTaxRate.name),c(4),S("ngModel",e.selectedTaxRate.rate),c(4),S("ngModel",e.selectedTaxRate.description),c(4),S("ngModel",e.selectedTaxRate.status),c(9),g(e.editMode?"Update":"Save")}}var Fu=class n{taxRates=[];showModal=!1;editMode=!1;selectedTaxRate=this.getEmptyTaxRate();loading=!1;ngOnInit(){this.loadTaxRates()}loadTaxRates(){this.loading=!1}getEmptyTaxRate(){return{name:"",rate:0,description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedTaxRate=N({},t)):(this.editMode=!1,this.selectedTaxRate=this.getEmptyTaxRate()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedTaxRate=this.getEmptyTaxRate()}saveTaxRate(){if(this.editMode){let t=this.taxRates.findIndex(e=>e.id===this.selectedTaxRate.id);t!==-1&&(this.taxRates[t]=N({},this.selectedTaxRate))}else this.selectedTaxRate.id=Date.now(),this.taxRates.push(N({},this.selectedTaxRate));this.closeModal()}deleteTaxRate(t){confirm("Are you sure you want to delete this tax rate?")&&(this.taxRates=this.taxRates.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-tax-rates"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-percent"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., VAT, GST",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Tax description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Tax Rates"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Tax Rates"),a()()(),o(16,"button",5),y("click",function(){return i.openModal()}),v(17,"i",6),l(18," Add Tax Rate "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),a(),o(26,"th"),l(27,"Rate (%)"),a(),o(28,"th"),l(29,"Description"),a(),o(30,"th"),l(31,"Status"),a(),o(32,"th"),l(33,"Actions"),a()()(),o(34,"tbody"),x(35,mk,5,0,"tr",10)(36,fk,17,8,"tr",11),a()()()()(),x(37,gk,33,6,"div",12)),e&2&&(c(35),p("ngIf",i.taxRates.length===0),c(),p("ngForOf",i.taxRates),c(),p("ngIf",i.showModal))},dependencies:[L,B,Y,Z,H,Me,Q,q,G,K],encapsulation:2})};function hk(n,t){n&1&&(o(0,"tr")(1,"td",13),v(2,"i",14),o(3,"p"),l(4,'No currencies configured. Click "Add Currency" to create one.'),a()()())}function _k(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td")(11,"span",15),l(12),a()(),o(13,"td")(14,"span",15),l(15),a()(),o(16,"td")(17,"div",16)(18,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(19,"i",18),a(),o(20,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteCurrency(r.id))}),v(21,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.symbol),c(2),g(e.exchangeRate),c(2),J("badge-primary",e.isDefault),c(),g(e.isDefault?"Yes":"No"),c(2),J("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function vk(n,t){if(n&1){let e=T();o(0,"div",21),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",22),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Currency Code"),a(),o(12,"input",29),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.code,r)||(s.selectedCurrency.code=r),_(r)}),a()(),o(13,"div",28)(14,"label"),l(15,"Currency Name"),a(),o(16,"input",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.name,r)||(s.selectedCurrency.name=r),_(r)}),a()()(),o(17,"div",27)(18,"div",28)(19,"label"),l(20,"Symbol"),a(),o(21,"input",31),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.symbol,r)||(s.selectedCurrency.symbol=r),_(r)}),a()(),o(22,"div",28)(23,"label"),l(24,"Exchange Rate"),a(),o(25,"input",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.exchangeRate,r)||(s.selectedCurrency.exchangeRate=r),_(r)}),a()()(),o(26,"div",27)(27,"div",28)(28,"label"),l(29,"Default Currency"),a(),o(30,"select",33),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.isDefault,r)||(s.selectedCurrency.isDefault=r),_(r)}),o(31,"option",34),l(32,"Yes"),a(),o(33,"option",34),l(34,"No"),a()()(),o(35,"div",28)(36,"label"),l(37,"Status"),a(),o(38,"select",33),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCurrency.status,r)||(s.selectedCurrency.status=r),_(r)}),o(39,"option",35),l(40,"Active"),a(),o(41,"option",36),l(42,"Inactive"),a()()()()(),o(43,"div",37)(44,"button",38),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(45,"Cancel"),a(),o(46,"button",5),y("click",function(){h(e);let r=f();return _(r.saveCurrency())}),l(47),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Currency":"Add Currency"),c(8),S("ngModel",e.selectedCurrency.code),c(4),S("ngModel",e.selectedCurrency.name),c(5),S("ngModel",e.selectedCurrency.symbol),c(4),S("ngModel",e.selectedCurrency.exchangeRate),c(5),S("ngModel",e.selectedCurrency.isDefault),c(),p("ngValue",!0),c(2),p("ngValue",!1),c(5),S("ngModel",e.selectedCurrency.status),c(9),g(e.editMode?"Update":"Save")}}var Vu=class n{currencies=[];showModal=!1;editMode=!1;selectedCurrency=this.getEmptyCurrency();loading=!1;ngOnInit(){this.loadCurrencies()}loadCurrencies(){this.loading=!1}getEmptyCurrency(){return{code:"",name:"",symbol:"",exchangeRate:1,isDefault:!1,status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCurrency=N({},t)):(this.editMode=!1,this.selectedCurrency=this.getEmptyCurrency()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCurrency=this.getEmptyCurrency()}saveCurrency(){if(this.editMode){let t=this.currencies.findIndex(e=>e.id===this.selectedCurrency.id);t!==-1&&(this.currencies[t]=N({},this.selectedCurrency))}else this.selectedCurrency.id=Date.now(),this.currencies.push(N({},this.selectedCurrency));this.closeModal()}deleteCurrency(t){confirm("Are you sure you want to delete this currency?")&&(this.currencies=this.currencies.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-currencies"]],standalone:!1,decls:42,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., USD, EUR",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., US Dollar",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., $, \u20AC",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","1.00",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Currencies"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Currencies"),a()()(),o(16,"button",5),y("click",function(){return i.openModal()}),v(17,"i",6),l(18," Add Currency "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Symbol"),a(),o(30,"th"),l(31,"Exchange Rate"),a(),o(32,"th"),l(33,"Default"),a(),o(34,"th"),l(35,"Status"),a(),o(36,"th"),l(37,"Actions"),a()()(),o(38,"tbody"),x(39,hk,5,0,"tr",10)(40,_k,22,12,"tr",11),a()()()()(),x(41,vk,48,10,"div",12)),e&2&&(c(39),p("ngIf",i.currencies.length===0),c(),p("ngForOf",i.currencies),c(),p("ngIf",i.showModal))},dependencies:[L,B,Y,Z,H,Me,Q,q,G,K],encapsulation:2})};function yk(n,t){n&1&&(o(0,"tr")(1,"td",13),v(2,"i",14),o(3,"p"),l(4,'No payment modes configured. Click "Add Payment Mode" to create one.'),a()()())}function bk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td")(7,"span",15),l(8),a()(),o(9,"td")(10,"div",16)(11,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(12,"i",18),a(),o(13,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deletePaymentMode(r.id))}),v(14,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.name),c(2),g(e.description),c(2),J("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function Ck(n,t){if(n&1){let e=T();o(0,"div",21),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",22),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Payment Mode Name"),a(),o(11,"input",28),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPaymentMode.name,r)||(s.selectedPaymentMode.name=r),_(r)}),a()(),o(12,"div",27)(13,"label"),l(14,"Description"),a(),o(15,"textarea",29),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPaymentMode.description,r)||(s.selectedPaymentMode.description=r),_(r)}),a()(),o(16,"div",27)(17,"label"),l(18,"Status"),a(),o(19,"select",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPaymentMode.status,r)||(s.selectedPaymentMode.status=r),_(r)}),o(20,"option",31),l(21,"Active"),a(),o(22,"option",32),l(23,"Inactive"),a()()()(),o(24,"div",33)(25,"button",34),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(26,"Cancel"),a(),o(27,"button",5),y("click",function(){h(e);let r=f();return _(r.savePaymentMode())}),l(28),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Payment Mode":"Add Payment Mode"),c(7),S("ngModel",e.selectedPaymentMode.name),c(4),S("ngModel",e.selectedPaymentMode.description),c(4),S("ngModel",e.selectedPaymentMode.status),c(9),g(e.editMode?"Update":"Save")}}var Lu=class n{paymentModes=[];showModal=!1;editMode=!1;selectedPaymentMode=this.getEmptyPaymentMode();loading=!1;ngOnInit(){this.loadPaymentModes()}loadPaymentModes(){this.loading=!1}getEmptyPaymentMode(){return{name:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedPaymentMode=N({},t)):(this.editMode=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()}savePaymentMode(){if(this.editMode){let t=this.paymentModes.findIndex(e=>e.id===this.selectedPaymentMode.id);t!==-1&&(this.paymentModes[t]=N({},this.selectedPaymentMode))}else this.selectedPaymentMode.id=Date.now(),this.paymentModes.push(N({},this.selectedPaymentMode));this.closeModal()}deletePaymentMode(t){confirm("Are you sure you want to delete this payment mode?")&&(this.paymentModes=this.paymentModes.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-payment-modes"]],standalone:!1,decls:36,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","4",1,"empty-state"],[1,"fas","fa-credit-card"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Cash, Credit Card, Bank Transfer",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Payment mode description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Payment Modes"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Payment Modes"),a()()(),o(16,"button",5),y("click",function(){return i.openModal()}),v(17,"i",6),l(18," Add Payment Mode "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),a(),o(26,"th"),l(27,"Description"),a(),o(28,"th"),l(29,"Status"),a(),o(30,"th"),l(31,"Actions"),a()()(),o(32,"tbody"),x(33,yk,5,0,"tr",10)(34,bk,15,7,"tr",11),a()()()()(),x(35,Ck,29,5,"div",12)),e&2&&(c(33),p("ngIf",i.paymentModes.length===0),c(),p("ngForOf",i.paymentModes),c(),p("ngIf",i.showModal))},dependencies:[L,B,Y,Z,H,Q,q,G,K],encapsulation:2})};function xk(n,t){n&1&&(o(0,"tr")(1,"td",13),v(2,"i",14),o(3,"p"),l(4,'No expense categories configured. Click "Add Category" to create one.'),a()()())}function Sk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td")(12,"div",16)(13,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(14,"i",18),a(),o(15,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteCategory(r.id))}),v(16,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.description),c(2),J("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function Mk(n,t){if(n&1){let e=T();o(0,"div",21),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",22),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Category Code"),a(),o(12,"input",29),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCategory.code,r)||(s.selectedCategory.code=r),_(r)}),a()(),o(13,"div",28)(14,"label"),l(15,"Category Name"),a(),o(16,"input",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCategory.name,r)||(s.selectedCategory.name=r),_(r)}),a()()(),o(17,"div",28)(18,"label"),l(19,"Description"),a(),o(20,"textarea",31),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCategory.description,r)||(s.selectedCategory.description=r),_(r)}),a()(),o(21,"div",28)(22,"label"),l(23,"Status"),a(),o(24,"select",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCategory.status,r)||(s.selectedCategory.status=r),_(r)}),o(25,"option",33),l(26,"Active"),a(),o(27,"option",34),l(28,"Inactive"),a()()()(),o(29,"div",35)(30,"button",36),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(31,"Cancel"),a(),o(32,"button",5),y("click",function(){h(e);let r=f();return _(r.saveCategory())}),l(33),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Expense Category":"Add Expense Category"),c(8),S("ngModel",e.selectedCategory.code),c(4),S("ngModel",e.selectedCategory.name),c(4),S("ngModel",e.selectedCategory.description),c(4),S("ngModel",e.selectedCategory.status),c(9),g(e.editMode?"Update":"Save")}}var ju=class n{expenseCategories=[];showModal=!1;editMode=!1;selectedCategory=this.getEmptyCategory();loading=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!1}getEmptyCategory(){return{name:"",code:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCategory=N({},t)):(this.editMode=!1,this.selectedCategory=this.getEmptyCategory()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCategory=this.getEmptyCategory()}saveCategory(){if(this.editMode){let t=this.expenseCategories.findIndex(e=>e.id===this.selectedCategory.id);t!==-1&&(this.expenseCategories[t]=N({},this.selectedCategory))}else this.selectedCategory.id=Date.now(),this.expenseCategories.push(N({},this.selectedCategory));this.closeModal()}deleteCategory(t){confirm("Are you sure you want to delete this expense category?")&&(this.expenseCategories=this.expenseCategories.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-expense-categories"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-receipt"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., EXP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Office Supplies",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Category description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Expense Categories"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Expense Categories"),a()()(),o(16,"button",5),y("click",function(){return i.openModal()}),v(17,"i",6),l(18," Add Category "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Description"),a(),o(30,"th"),l(31,"Status"),a(),o(32,"th"),l(33,"Actions"),a()()(),o(34,"tbody"),x(35,xk,5,0,"tr",10)(36,Sk,17,8,"tr",11),a()()()()(),x(37,Mk,34,6,"div",12)),e&2&&(c(35),p("ngIf",i.expenseCategories.length===0),c(),p("ngForOf",i.expenseCategories),c(),p("ngIf",i.showModal))},dependencies:[L,B,Y,Z,H,Q,q,G,K],encapsulation:2})};var ta=class n{constructor(t){this.http=t}baseUrl="/api/customers";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ek(n,t){n&1&&(o(0,"tr")(1,"td",28),v(2,"i",29),o(3,"p"),l(4,"Loading..."),a()()())}function wk(n,t){n&1&&(o(0,"tr")(1,"td",28),v(2,"i",9),o(3,"p"),l(4,'No customers found. Click "Add Customer" to create one.'),a()()())}function Ik(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"div",30)(3,"div",31),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",32),l(13),a()(),o(14,"td")(15,"span",33),l(16),a()(),o(17,"td")(18,"div",34)(19,"button",35),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(20,"i",36),a(),o(21,"button",37),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteCustomer(r.id))}),v(22,"i",38),a()()()()}if(n&2){let e=t.$implicit,i=f();c(4),g(e.name.charAt(0)),c(2),g(e.name),c(2),g(e.email),c(2),g(e.phone),c(3),g(e.customerGroup||"-"),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function Pk(n,t){if(n&1){let e=T();o(0,"div",39),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",40),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",41)(3,"h2"),l(4),a(),o(5,"button",42),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",43),a()(),o(7,"div",44)(8,"div",45)(9,"label"),l(10,"Customer Name"),a(),o(11,"input",46),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.name,r)||(s.selectedCustomer.name=r),_(r)}),a()(),o(12,"div",45)(13,"label"),l(14,"Email"),a(),o(15,"input",47),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.email,r)||(s.selectedCustomer.email=r),_(r)}),a()(),o(16,"div",45)(17,"label"),l(18,"Phone"),a(),o(19,"input",48),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.phone,r)||(s.selectedCustomer.phone=r),_(r)}),a()(),o(20,"div",45)(21,"label"),l(22,"Address"),a(),o(23,"input",49),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.address,r)||(s.selectedCustomer.address=r),_(r)}),a()(),o(24,"div",45)(25,"label"),l(26,"Customer Group"),a(),o(27,"select",50),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.customerGroup,r)||(s.selectedCustomer.customerGroup=r),_(r)}),o(28,"option",51),l(29,"Select Group"),a(),o(30,"option",52),l(31,"Retail"),a(),o(32,"option",53),l(33,"Wholesale"),a(),o(34,"option",54),l(35,"VIP"),a(),o(36,"option",55),l(37,"Corporate"),a()()(),o(38,"div",45)(39,"label"),l(40,"Status"),a(),o(41,"select",50),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedCustomer.status,r)||(s.selectedCustomer.status=r),_(r)}),o(42,"option",56),l(43,"Active"),a(),o(44,"option",57),l(45,"Inactive"),a()()()(),o(46,"div",58)(47,"button",59),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(48,"Cancel"),a(),o(49,"button",4),y("click",function(){h(e);let r=f();return _(r.saveCustomer())}),l(50),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Customer":"Add Customer"),c(7),S("ngModel",e.selectedCustomer.name),c(4),S("ngModel",e.selectedCustomer.email),c(4),S("ngModel",e.selectedCustomer.phone),c(4),S("ngModel",e.selectedCustomer.address),c(4),S("ngModel",e.selectedCustomer.customerGroup),c(14),S("ngModel",e.selectedCustomer.status),c(9),g(e.editMode?"Update":"Save")}}var Bu=class n{constructor(t){this.customerService=t}customers=[];searchQuery="";showModal=!1;editMode=!1;selectedCustomer=this.getEmptyCustomer();loading=!1;ngOnInit(){this.loadCustomers()}loadCustomers(){this.loading=!0,this.customerService.getAll().subscribe({next:t=>{this.customers=t,this.loading=!1},error:t=>{console.error("Error loading customers",t),this.loading=!1}})}get filteredCustomers(){return this.searchQuery?this.customers.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())):this.customers}getEmptyCustomer(){return{name:"",email:"",phone:"",address:"",customerGroup:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCustomer=N({},t)):(this.editMode=!1,this.selectedCustomer=this.getEmptyCustomer()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCustomer=this.getEmptyCustomer()}saveCustomer(){this.editMode&&this.selectedCustomer.id?this.customerService.update(this.selectedCustomer.id,this.selectedCustomer).subscribe({next:()=>{this.loadCustomers(),this.closeModal()},error:t=>console.error("Error updating customer",t)}):this.customerService.create(this.selectedCustomer).subscribe({next:()=>{this.loadCustomers(),this.closeModal()},error:t=>console.error("Error creating customer",t)})}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&this.customerService.delete(t).subscribe({next:()=>this.loadCustomers(),error:e=>console.error("Error deleting customer",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}getActiveCount(){return this.customers.filter(t=>t.status==="Active").length}getInactiveCount(){return this.customers.filter(t=>t.status==="Inactive").length}static \u0275fac=function(e){return new(e||n)(I(ta))};static \u0275cmp=A({type:n,selectors:[["app-customer-management"]],standalone:!1,decls:77,vars:11,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-users"],[1,"info"],[1,"icon","success"],[1,"fas","fa-user-check"],[1,"icon","warning"],[1,"fas","fa-user-times"],[1,"icon","info"],[1,"fas","fa-chart-line"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search customers...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","6",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"user-cell"],[1,"avatar"],[1,"badge","badge-info"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter customer name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter address",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Retail"],["value","Wholesale"],["value","VIP"],["value","Corporate"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Customer Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Customers"),a()()(),o(12,"button",4),y("click",function(){return i.openModal()}),v(13,"i",5),l(14," Add Customer "),a()(),o(15,"div",6)(16,"div",7)(17,"div",8),v(18,"i",9),a(),o(19,"div",10)(20,"h3"),l(21),a(),o(22,"p"),l(23,"Total Customers"),a()()(),o(24,"div",7)(25,"div",11),v(26,"i",12),a(),o(27,"div",10)(28,"h3"),l(29),a(),o(30,"p"),l(31,"Active Customers"),a()()(),o(32,"div",7)(33,"div",13),v(34,"i",14),a(),o(35,"div",10)(36,"h3"),l(37),a(),o(38,"p"),l(39,"Inactive Customers"),a()()(),o(40,"div",7)(41,"div",15),v(42,"i",16),a(),o(43,"div",10)(44,"h3"),l(45),a(),o(46,"p"),l(47,"Growth Rate"),a()()()(),o(48,"div",17)(49,"div",18)(50,"div",19),v(51,"i",20),o(52,"input",21),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(53,"div",22)(54,"table",23)(55,"thead")(56,"tr")(57,"th"),l(58,"Customer"),a(),o(59,"th"),l(60,"Email"),a(),o(61,"th"),l(62,"Phone"),a(),o(63,"th"),l(64,"Group"),a(),o(65,"th"),l(66,"Status"),a(),o(67,"th"),l(68,"Actions"),a()()(),o(69,"tbody"),x(70,Ek,5,0,"tr",24)(71,wk,5,0,"tr",24)(72,Ik,23,7,"tr",25),a()()(),o(73,"div",26)(74,"span"),l(75),a()()()(),x(76,Pk,51,8,"div",27)),e&2&&(c(21),g(i.customers.length),c(8),g(i.getActiveCount()),c(8),g(i.getInactiveCount()),c(8),g(i.customers.length>0?"+12%":"0%"),c(7),S("ngModel",i.searchQuery),c(18),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.filteredCustomers.length===0),c(),p("ngForOf",i.filteredCustomers),c(3),le("Showing ",i.filteredCustomers.length," of ",i.customers.length," customers"),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.table-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;gap:8px}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:16px}}"]})};var Wu=class n{constructor(t){this.http=t}baseUrl="/api/contracts";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tk(n,t){n&1&&(o(0,"tr")(1,"td",27),v(2,"i",28),o(3,"p"),l(4,"Loading..."),a()()())}function Ok(n,t){n&1&&(o(0,"tr")(1,"td",27),v(2,"i",9),o(3,"p"),l(4,'No contracts found. Click "New Contract" to create one.'),a()()())}function kk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),ee(12,"number"),a(),o(13,"td")(14,"span",29),l(15),a()(),o(16,"td")(17,"div",30)(18,"button",31),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(19,"i",32),a(),o(20,"button",33),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteContract(r.id))}),v(21,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.contractNumber||"C-"+e.id),c(2),g(e.title),c(2),g(e.startDate),c(2),g(e.endDate),c(2),D("$",jc(12,7,e.value)),c(3),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function Nk(n,t){if(n&1){let e=T();o(0,"div",35),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",36),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),a(),o(5,"button",38),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",39),a()(),o(7,"div",40)(8,"div",41)(9,"label"),l(10,"Title"),a(),o(11,"input",42),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.title,r)||(s.selectedContract.title=r),_(r)}),a()(),o(12,"div",41)(13,"label"),l(14,"Description"),a(),o(15,"textarea",43),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.description,r)||(s.selectedContract.description=r),_(r)}),a()(),o(16,"div",44)(17,"div",41)(18,"label"),l(19,"Start Date"),a(),o(20,"input",45),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.startDate,r)||(s.selectedContract.startDate=r),_(r)}),a()(),o(21,"div",41)(22,"label"),l(23,"End Date"),a(),o(24,"input",45),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.endDate,r)||(s.selectedContract.endDate=r),_(r)}),a()()(),o(25,"div",44)(26,"div",41)(27,"label"),l(28,"Value ($)"),a(),o(29,"input",46),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.value,r)||(s.selectedContract.value=r),_(r)}),a()(),o(30,"div",41)(31,"label"),l(32,"Status"),a(),o(33,"select",47),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.status,r)||(s.selectedContract.status=r),_(r)}),o(34,"option",48),l(35,"Active"),a(),o(36,"option",49),l(37,"Pending"),a(),o(38,"option",50),l(39,"Expired"),a(),o(40,"option",51),l(41,"Cancelled"),a()()()(),o(42,"div",41)(43,"label"),l(44,"Payment Terms"),a(),o(45,"input",52),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedContract.paymentTerms,r)||(s.selectedContract.paymentTerms=r),_(r)}),a()()(),o(46,"div",53)(47,"button",54),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(48,"Cancel"),a(),o(49,"button",4),y("click",function(){h(e);let r=f();return _(r.saveContract())}),l(50),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Contract":"New Contract"),c(7),S("ngModel",e.selectedContract.title),c(4),S("ngModel",e.selectedContract.description),c(5),S("ngModel",e.selectedContract.startDate),c(4),S("ngModel",e.selectedContract.endDate),c(5),S("ngModel",e.selectedContract.value),c(4),S("ngModel",e.selectedContract.status),c(12),S("ngModel",e.selectedContract.paymentTerms),c(5),g(e.editMode?"Update":"Save")}}var Uu=class n{constructor(t,e){this.contractService=t;this.customerService=e}contracts=[];customers=[];searchQuery="";showModal=!1;editMode=!1;selectedContract=this.getEmptyContract();loading=!1;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.contractService.getAll().subscribe({next:t=>{this.contracts=t,this.loading=!1},error:t=>{console.error("Error loading contracts",t),this.loading=!1}}),this.customerService.getAll().subscribe({next:t=>this.customers=t,error:t=>console.error("Error loading customers",t)})}get filteredContracts(){return this.searchQuery?this.contracts.filter(t=>t.contractNumber?.toLowerCase().includes(this.searchQuery.toLowerCase())||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())):this.contracts}getEmptyContract(){return{title:"",description:"",startDate:"",endDate:"",value:0,status:"Active",paymentTerms:""}}openModal(t){t?(this.editMode=!0,this.selectedContract=N({},t)):(this.editMode=!1,this.selectedContract=this.getEmptyContract()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedContract=this.getEmptyContract()}saveContract(){this.editMode&&this.selectedContract.id?this.contractService.update(this.selectedContract.id,this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error updating contract",t)}):this.contractService.create(this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error creating contract",t)})}deleteContract(t){confirm("Are you sure you want to delete this contract?")&&this.contractService.delete(t).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting contract",e)})}getStatusClass(t){return{Active:"badge-success",Pending:"badge-warning",Completed:"badge-info",Expired:"badge-danger",Cancelled:"badge-secondary"}[t]||"badge-info"}getTotalValue(){return this.contracts.reduce((t,e)=>t+(e.value||0),0)}getActiveCount(){return this.contracts.filter(t=>t.status==="Active").length}getPendingCount(){return this.contracts.filter(t=>t.status==="Pending").length}static \u0275fac=function(e){return new(e||n)(I(Wu),I(ta))};static \u0275cmp=A({type:n,selectors:[["app-contract-management"]],standalone:!1,decls:77,vars:11,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-contract"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search contracts...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Contract title",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Contract description",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Pending"],["value","Expired"],["value","Cancelled"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Contracts"),a()()(),o(12,"button",4),y("click",function(){return i.openModal()}),v(13,"i",5),l(14," New Contract "),a()(),o(15,"div",6)(16,"div",7)(17,"div",8),v(18,"i",9),a(),o(19,"div",10)(20,"h3"),l(21),a(),o(22,"p"),l(23,"Total Contracts"),a()()(),o(24,"div",7)(25,"div",11),v(26,"i",12),a(),o(27,"div",10)(28,"h3"),l(29),a(),o(30,"p"),l(31,"Active Contracts"),a()()(),o(32,"div",7)(33,"div",13),v(34,"i",14),a(),o(35,"div",10)(36,"h3"),l(37),a(),o(38,"p"),l(39,"Pending"),a()()(),o(40,"div",7)(41,"div",15),v(42,"i",16),a(),o(43,"div",10)(44,"h3"),l(45),ee(46,"number"),a(),o(47,"p"),l(48,"Total Value"),a()()()(),o(49,"div",17)(50,"div",18)(51,"div",19),v(52,"i",20),o(53,"input",21),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(54,"div",22)(55,"table",23)(56,"thead")(57,"tr")(58,"th"),l(59,"Contract #"),a(),o(60,"th"),l(61,"Title"),a(),o(62,"th"),l(63,"Start Date"),a(),o(64,"th"),l(65,"End Date"),a(),o(66,"th"),l(67,"Value"),a(),o(68,"th"),l(69,"Status"),a(),o(70,"th"),l(71,"Actions"),a()()(),o(72,"tbody"),x(73,Tk,5,0,"tr",24)(74,Ok,5,0,"tr",24)(75,kk,22,9,"tr",25),a()()()()(),x(76,Nk,51,9,"div",26)),e&2&&(c(21),g(i.contracts.length),c(8),g(i.getActiveCount()),c(8),g(i.getPendingCount()),c(8),D("$",jc(46,9,i.getTotalValue())),c(8),S("ngModel",i.searchQuery),c(20),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.filteredContracts.length===0),c(),p("ngForOf",i.filteredContracts),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,G,K,De],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}}"]})};var an=class n{constructor(t){this.http=t}baseUrl="/api/inventory/groups";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}canDeactivate(t){return this.http.get(`${this.baseUrl}/${t}/can-deactivate`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deactivate(t){return this.http.put(`${this.baseUrl}/${t}/deactivate`,{})}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Rk(n,t){n&1&&(o(0,"tr")(1,"td",16),v(2,"i",17),o(3,"p"),l(4,"Loading..."),a()()())}function Ak(n,t){n&1&&(o(0,"tr")(1,"td",16),v(2,"i",18),o(3,"p"),l(4,'No groups found. Click "Add Group" to create one.'),a()()())}function Fk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",19),l(10),a()(),o(11,"td")(12,"div",20)(13,"button",21),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(14,"i",22),a(),o(15,"button",23),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteGroup(r.id))}),v(16,"i",24),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.description||"-"),c(2),p("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function Vk(n,t){if(n&1&&(o(0,"div",45),l(1),a()),n&2){let e=f(2);c(),D(" ",e.errorMessage," ")}}function Lk(n,t){n&1&&(o(0,"small",46),l(1,"Unique identifier for this group"),a())}function jk(n,t){if(n&1&&(o(0,"small",47),l(1),a()),n&2){let e=f(2);c(),D(" Cannot set to Inactive: ",e.canDeactivateInfo.itemCount," item(s) linked to this group ")}}function Bk(n,t){if(n&1){let e=T();o(0,"div",25),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",26),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",27)(3,"h2"),l(4),a(),o(5,"button",28),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",29),a()(),o(7,"div",30),x(8,Vk,2,1,"div",31),o(9,"div",32)(10,"label"),l(11,"Group Code "),o(12,"span",33),l(13,"*"),a()(),o(14,"input",34),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGroup.code,r)||(s.selectedGroup.code=r),_(r)}),a(),x(15,Lk,2,0,"small",35),a(),o(16,"div",32)(17,"label"),l(18,"Group Name "),o(19,"span",33),l(20,"*"),a()(),o(21,"input",36),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGroup.name,r)||(s.selectedGroup.name=r),_(r)}),a()(),o(22,"div",32)(23,"label"),l(24,"Description"),a(),o(25,"textarea",37),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGroup.description,r)||(s.selectedGroup.description=r),_(r)}),a()(),o(26,"div",32)(27,"label"),l(28,"Status"),a(),o(29,"select",38),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGroup.status,r)||(s.selectedGroup.status=r),_(r)}),o(30,"option",39),l(31,"Active"),a(),o(32,"option",40),l(33,"Inactive"),a()(),x(34,jk,2,1,"small",41),a()(),o(35,"div",42)(36,"button",43),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(37,"Cancel"),a(),o(38,"button",44),y("click",function(){h(e);let r=f();return _(r.saveGroup())}),l(39),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Group":"Add Group"),c(4),p("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedGroup.code),p("readonly",e.editMode),c(),p("ngIf",!e.editMode),c(6),S("ngModel",e.selectedGroup.name),c(4),S("ngModel",e.selectedGroup.description),c(4),S("ngModel",e.selectedGroup.status),c(3),p("disabled",!e.canChangeToInactive()),c(2),p("ngIf",e.editMode&&e.canDeactivateInfo&&!e.canDeactivateInfo.canDeactivate),c(4),p("disabled",!e.isFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var Gu=class n{constructor(t,e,i){this.groupService=t;this.settingsService=e;this.notificationService=i}groups=[];searchQuery="";showModal=!1;editMode=!1;selectedGroup=this.getEmptyGroup();loading=!1;errorMessage="";canDeactivateInfo=null;ngOnInit(){this.loadGroups()}loadGroups(){this.loading=!0,this.groupService.getAll().subscribe({next:t=>{this.groups=t,this.loading=!1},error:t=>{console.error("Error loading groups",t),this.loading=!1}})}get filteredGroups(){return this.searchQuery?this.groups.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.groups}getEmptyGroup(){return{code:"",name:"",description:"",status:"Active"}}openModal(t){this.errorMessage="",this.canDeactivateInfo=null,t?(this.editMode=!0,this.selectedGroup=N({},t),this.checkCanDeactivate(t.id)):(this.editMode=!1,this.selectedGroup=this.getEmptyGroup(),this.generateGroupCode()),this.showModal=!0}generateGroupCode(){this.settingsService.generatePrefixId("group").subscribe({next:t=>{this.selectedGroup.code=t},error:t=>console.error("Error generating group code",t)})}checkCanDeactivate(t){this.groupService.canDeactivate(t).subscribe({next:e=>{this.canDeactivateInfo=e},error:e=>console.error("Error checking deactivate status",e)})}closeModal(){this.showModal=!1,this.selectedGroup=this.getEmptyGroup(),this.errorMessage="",this.canDeactivateInfo=null}isFormValid(){return this.selectedGroup.code.trim()!==""&&this.selectedGroup.name.trim()!==""}canChangeToInactive(){return!this.editMode||this.selectedGroup.status==="Active"||this.canDeactivateInfo===null?!0:this.canDeactivateInfo.canDeactivate}saveGroup(){if(!this.isFormValid()){this.notificationService.error("Group Code and Name are required");return}if(this.editMode&&this.selectedGroup.status==="Inactive"&&this.canDeactivateInfo&&!this.canDeactivateInfo.canDeactivate){this.notificationService.error(`Cannot deactivate: ${this.canDeactivateInfo.itemCount} item(s) are linked to this group`);return}this.editMode&&this.selectedGroup.id?this.groupService.update(this.selectedGroup.id,this.selectedGroup).subscribe({next:()=>{this.notificationService.success("Group updated successfully"),this.loadGroups(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating group")}}):this.groupService.create(this.selectedGroup).subscribe({next:()=>{this.notificationService.success("Group created successfully"),this.loadGroups(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating group")}})}deleteGroup(t){this.groupService.canDeactivate(t).subscribe({next:e=>{if(!e.canDeactivate){this.notificationService.error(`Cannot delete group: ${e.itemCount} item(s) are linked to this group. Please reassign or delete those items first.`);return}confirm("Are you sure you want to delete this group?")&&this.groupService.delete(t).subscribe({next:()=>{this.notificationService.success("Group deleted successfully"),this.loadGroups()},error:i=>{this.notificationService.error(i.error?.error||"Error deleting group")}})},error:e=>console.error("Error checking delete status",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(an),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-group-master"]],standalone:!1,decls:43,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search groups...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-layer-group"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., GRP-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","Enter group name",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive",3,"disabled"],["class","form-hint warning",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],[1,"form-hint","warning"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Group Master"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Groups"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," Add Group "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),o(23,"input",10),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Group Code"),a(),o(30,"th"),l(31,"Group Name"),a(),o(32,"th"),l(33,"Description"),a(),o(34,"th"),l(35,"Status"),a(),o(36,"th"),l(37,"Actions"),a()()(),o(38,"tbody"),x(39,Rk,5,0,"tr",13)(40,Ak,5,0,"tr",13)(41,Fk,17,5,"tr",14),a()()()()(),x(42,Bk,40,12,"div",15)),e&2&&(c(23),S("ngModel",i.searchQuery),c(16),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.filteredGroups.length===0),c(),p("ngForOf",i.filteredGroups),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}"]})};var pi=class n{constructor(t){this.http=t}baseUrl="/api/inventory/units";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getBaseUnits(){return this.http.get(`${this.baseUrl}/base`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var _t=class n{constructor(t){this.http=t}baseUrl="/api/inventory/suppliers";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(this.baseUrl).pipe(Pe(t=>t.filter(e=>e.status==="Active")))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Wk(n,t){n&1&&(o(0,"tr")(1,"td",27),v(2,"i",28),o(3,"p"),l(4,"Loading..."),a()()())}function Uk(n,t){n&1&&(o(0,"tr")(1,"td",27),v(2,"i",9),o(3,"p"),l(4,'No items found. Click "Add Item" to create one.'),a()()())}function Gk(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",29),l(14),a()(),o(15,"td"),l(16),a(),o(17,"td")(18,"span",29),l(19),a()(),o(20,"td")(21,"div",30)(22,"button",31),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(23,"i",32),a(),o(24,"button",33),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteItem(r.id))}),v(25,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.code),c(2),g(e.name),c(2),g((e.group==null?null:e.group.name)||"-"),c(2),g((e.unitOfMeasure==null?null:e.unitOfMeasure.name)||"-"),c(2),g(i.formatCurrency(e.unitCost)),c(2),p("ngClass",e.taxable?"badge-success":"badge-secondary"),c(),D(" ",e.taxable?"Yes":"No"," "),c(2),g(e.currentStock),c(2),p("ngClass",i.getStockClass(e)),c(),g(i.getStockStatus(e))}}function qk(n,t){if(n&1&&(o(0,"div",60),l(1),a()),n&2){let e=f(2);c(),D(" ",e.errorMessage," ")}}function Hk(n,t){if(n&1&&(o(0,"div",44)(1,"label"),l(2,"Item Code"),a(),v(3,"input",61),o(4,"small",55),l(5,"System generated - cannot be changed"),a()()),n&2){let e=f(2);c(3),p("value",e.selectedItem.code)}}function zk(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function $k(n,t){if(n&1&&(o(0,"small",62),l(1),a()),n&2){let e=f(2);c(),g(e.nameValidationMessage)}}function Qk(n,t){n&1&&(o(0,"small",55),l(1,"Must be unique within the selected group"),a())}function Kk(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.name," (",e.code,")")}}function Yk(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function Zk(n,t){if(n&1){let e=T();o(0,"div",43)(1,"div",44)(2,"label"),l(3,"Status"),a(),o(4,"select",53),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedItem.status,r)||(s.selectedItem.status=r),_(r)}),o(5,"option",63),l(6,"Active"),a(),o(7,"option",64),l(8,"Inactive"),a()()(),o(9,"div",44)(10,"label"),l(11,"Reorder Level"),a(),o(12,"input",65),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedItem.reorderLevel,r)||(s.selectedItem.reorderLevel=r),_(r)}),a()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.selectedItem.status),c(8),S("ngModel",e.selectedItem.reorderLevel)}}function Jk(n,t){if(n&1){let e=T();o(0,"div",35),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",36),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),a(),o(5,"button",38),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",39),a()(),o(7,"div",40),x(8,qk,2,1,"div",41)(9,Hk,6,1,"div",42),o(10,"div",43)(11,"div",44)(12,"label"),l(13,"Group "),o(14,"span",45),l(15,"*"),a()(),o(16,"select",46),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGroupId,r)||(s.selectedGroupId=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.validateItemName())}),o(17,"option",47),l(18,"Select a group..."),a(),x(19,zk,2,2,"option",48),a()(),o(20,"div",44)(21,"label"),l(22,"Item Name "),o(23,"span",45),l(24,"*"),a()(),o(25,"input",49),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedItem.name,r)||(s.selectedItem.name=r),_(r)}),y("blur",function(){h(e);let r=f();return _(r.validateItemName())}),a(),x(26,$k,2,1,"small",50)(27,Qk,2,0,"small",51),a()(),o(28,"div",44)(29,"label"),l(30,"Item Description"),a(),o(31,"textarea",52),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedItem.description,r)||(s.selectedItem.description=r),_(r)}),a()(),o(32,"div",43)(33,"div",44)(34,"label"),l(35,"Units of Measure / Sold As "),o(36,"span",45),l(37,"*"),a()(),o(38,"select",53),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedUomId,r)||(s.selectedUomId=r),_(r)}),o(39,"option",47),l(40,"Select unit..."),a(),x(41,Kk,2,3,"option",48),a()(),o(42,"div",44)(43,"label"),l(44,"Unit Cost"),a(),o(45,"input",54),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedItem.unitCost,r)||(s.selectedItem.unitCost=r),_(r)}),a()()(),o(46,"div",43)(47,"div",44)(48,"label"),l(49,"Supplier"),a(),o(50,"select",53),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplierId,r)||(s.selectedSupplierId=r),_(r)}),o(51,"option",47),l(52,"No supplier / Select later..."),a(),x(53,Yk,2,2,"option",48),a()(),o(54,"div",44)(55,"label"),l(56,"Taxable"),a(),o(57,"select",53),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedItem.taxable,r)||(s.selectedItem.taxable=r),_(r)}),o(58,"option",47),l(59,"Yes"),a(),o(60,"option",47),l(61,"No"),a()(),o(62,"small",55),l(63,"Defaults to Yes for new items"),a()()(),x(64,Zk,13,2,"div",56),a(),o(65,"div",57)(66,"button",58),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(67,"Cancel"),a(),o(68,"button",59),y("click",function(){h(e);let r=f();return _(r.saveItem())}),l(69),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Item":"Add Item"),c(4),p("ngIf",e.errorMessage),c(),p("ngIf",e.editMode),c(7),S("ngModel",e.selectedGroupId),c(),p("ngValue",null),c(2),p("ngForOf",e.groups),c(6),J("is-invalid",e.nameValidationMessage),S("ngModel",e.selectedItem.name),c(),p("ngIf",e.nameValidationMessage),c(),p("ngIf",!e.nameValidationMessage),c(4),S("ngModel",e.selectedItem.description),c(7),S("ngModel",e.selectedUomId),c(),p("ngValue",null),c(2),p("ngForOf",e.units),c(4),S("ngModel",e.selectedItem.unitCost),c(5),S("ngModel",e.selectedSupplierId),c(),p("ngValue",null),c(2),p("ngForOf",e.suppliers),c(4),S("ngModel",e.selectedItem.taxable),c(),p("ngValue",!0),c(2),p("ngValue",!1),c(4),p("ngIf",e.editMode),c(4),p("disabled",!e.isFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var Hu=class n{constructor(t,e,i,r,s,d){this.itemService=t;this.itemGroupService=e;this.unitOfMeasureService=i;this.supplierService=r;this.settingsService=s;this.notificationService=d}items=[];groups=[];units=[];suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedItem=this.getEmptyItem();selectedGroupId=null;selectedUomId=null;selectedSupplierId=null;loading=!1;errorMessage="";nameValidationMessage="";ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{this.items=t,this.loading=!1},error:t=>{console.error("Error loading items",t),this.loading=!1}}),this.itemGroupService.getActive().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.unitOfMeasureService.getActive().subscribe({next:t=>this.units=t,error:t=>console.error("Error loading units",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t.filter(e=>e.status==="Active"),error:t=>console.error("Error loading suppliers",t)})}get filteredItems(){if(!this.searchQuery)return this.items;let t=this.searchQuery.toLowerCase();return this.items.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||(e.group?.name||"").toLowerCase().includes(t))}getEmptyItem(){return{code:"",name:"",description:"",taxable:!0,currentStock:0,status:"Active"}}openModal(t){this.errorMessage="",this.nameValidationMessage="",t?(this.editMode=!0,this.selectedItem=N({},t),this.selectedGroupId=t.group?.id||null,this.selectedUomId=t.unitOfMeasure?.id||null,this.selectedSupplierId=t.supplier?.id||null):(this.editMode=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.generateItemCode()),this.showModal=!0}generateItemCode(){this.settingsService.generatePrefixId("item").subscribe({next:t=>{this.selectedItem.code=t},error:t=>console.error("Error generating item code",t)})}closeModal(){this.showModal=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.errorMessage="",this.nameValidationMessage=""}validateItemName(){if(!this.selectedItem.name||!this.selectedGroupId){this.nameValidationMessage="";return}let t=this.editMode?this.selectedItem.id:void 0;this.itemService.validateName(this.selectedItem.name,this.selectedGroupId,t).subscribe({next:e=>{e.isUnique?this.nameValidationMessage="":this.nameValidationMessage="Item name already exists in this group"},error:()=>this.nameValidationMessage=""})}isFormValid(){return this.selectedItem.name.trim()!==""&&this.selectedGroupId!==null&&this.selectedUomId!==null&&this.nameValidationMessage===""}saveItem(){if(!this.isFormValid()){this.notificationService.error("Please fill in all required fields");return}let t=ce(N({},this.selectedItem),{group:this.groups.find(e=>e.id===this.selectedGroupId),unitOfMeasure:this.units.find(e=>e.id===this.selectedUomId),supplier:this.selectedSupplierId?this.suppliers.find(e=>e.id===this.selectedSupplierId):void 0});this.editMode&&this.selectedItem.id?this.itemService.update(this.selectedItem.id,t).subscribe({next:()=>{this.notificationService.success("Item updated successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error updating item")}}):this.itemService.create(t).subscribe({next:()=>{this.notificationService.success("Item created successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error creating item")}})}deleteItem(t){confirm("Are you sure you want to delete this item?")&&this.itemService.delete(t).subscribe({next:()=>{this.notificationService.success("Item deleted successfully"),this.loadData()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting item")}})}getStockClass(t){return t.currentStock<=0?"badge-danger":t.reorderLevel&&t.currentStock<=t.reorderLevel?"badge-warning":"badge-success"}getStockStatus(t){return t.currentStock<=0?"Out of Stock":t.reorderLevel&&t.currentStock<=t.reorderLevel?"Low Stock":"In Stock"}getInStockCount(){return this.items.filter(t=>!t.reorderLevel||t.currentStock>t.reorderLevel).length}getLowStockCount(){return this.items.filter(t=>t.reorderLevel&&t.currentStock<=t.reorderLevel&&t.currentStock>0).length}getOutOfStockCount(){return this.items.filter(t=>t.currentStock<=0).length}formatCurrency(t){return t==null?"-":"$"+t.toFixed(2)}static \u0275fac=function(e){return new(e||n)(I(Oe),I(an),I(pi),I(_t),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-item-master"]],standalone:!1,decls:84,vars:9,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-box"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-exclamation-triangle"],[1,"icon","danger"],[1,"fas","fa-times-circle"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search items...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal","modal-large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"grid-2"],[1,"form-group"],[1,"required"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter item name",1,"form-control",3,"ngModelChange","blur","ngModel"],["class","form-hint error",4,"ngIf"],["class","form-hint",4,"ngIf"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0.00","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-hint"],["class","grid-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],["type","text","readonly","",1,"form-control",3,"value"],[1,"form-hint","error"],["value","Active"],["value","Inactive"],["type","number","placeholder","Optional","min","0",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Item Master"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Items"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," Add Item "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),a(),o(23,"div",10)(24,"h3"),l(25),a(),o(26,"p"),l(27,"Total Items"),a()()(),o(28,"div",7)(29,"div",11),v(30,"i",12),a(),o(31,"div",10)(32,"h3"),l(33),a(),o(34,"p"),l(35,"In Stock"),a()()(),o(36,"div",7)(37,"div",13),v(38,"i",14),a(),o(39,"div",10)(40,"h3"),l(41),a(),o(42,"p"),l(43,"Low Stock"),a()()(),o(44,"div",7)(45,"div",15),v(46,"i",16),a(),o(47,"div",10)(48,"h3"),l(49),a(),o(50,"p"),l(51,"Out of Stock"),a()()()(),o(52,"div",17)(53,"div",18)(54,"div",19),v(55,"i",20),o(56,"input",21),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(57,"div",22)(58,"table",23)(59,"thead")(60,"tr")(61,"th"),l(62,"Item Code"),a(),o(63,"th"),l(64,"Item Name"),a(),o(65,"th"),l(66,"Group"),a(),o(67,"th"),l(68,"UOM"),a(),o(69,"th"),l(70,"Unit Cost"),a(),o(71,"th"),l(72,"Taxable"),a(),o(73,"th"),l(74,"Stock"),a(),o(75,"th"),l(76,"Status"),a(),o(77,"th"),l(78,"Actions"),a()()(),o(79,"tbody"),x(80,Wk,5,0,"tr",24)(81,Uk,5,0,"tr",24)(82,Gk,26,10,"tr",25),a()()()()(),x(83,Jk,70,25,"div",26)),e&2&&(c(25),g(i.items.length),c(8),g(i.getInStockCount()),c(8),g(i.getLowStockCount()),c(8),g(i.getOutOfStockCount()),c(7),S("ngModel",i.searchQuery),c(24),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.filteredItems.length===0),c(),p("ngForOf",i.filteredItems),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K],styles:[".inventory-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}"]})};function Xk(n,t){n&1&&(o(0,"tr")(1,"td",12),v(2,"i",13),o(3,"p"),l(4,"Loading..."),a()()())}function eN(n,t){n&1&&(o(0,"tr")(1,"td",12),v(2,"i",14),o(3,"p"),l(4,'No units found. Click "Add Unit" to create one.'),a()()())}function tN(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",15),l(17),a()(),o(18,"td")(19,"div",16)(20,"button",17),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(21,"i",18),a(),o(22,"button",19),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteUnit(r.id))}),v(23,"i",20),a()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.code),c(2),g(e.name),c(2),g(e.symbol||"-"),c(2),p("ngClass",e.baseUom?"badge-info":"badge-primary"),c(),D(" ",i.getUnitType(e)," "),c(2),g(e.conversionFactor||1),c(2),g((e.baseUom==null?null:e.baseUom.name)||"-"),c(2),p("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function nN(n,t){if(n&1&&(o(0,"div",44),l(1),a()),n&2){let e=f(2);c(),D(" ",e.errorMessage," ")}}function iN(n,t){n&1&&(o(0,"small",37),l(1,"Unique identifier for this unit"),a())}function rN(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit,i=f(2);p("ngValue",e.id)("disabled",i.editMode&&e.id===i.selectedUnit.id),c(),le(" ",e.name," (",e.code,") ")}}function oN(n,t){if(n&1){let e=T();o(0,"div",28)(1,"label"),l(2,"Conversion Factor"),a(),o(3,"input",46),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedUnit.conversionFactor,r)||(s.selectedUnit.conversionFactor=r),_(r)}),a(),o(4,"small",37),l(5,"How many of this unit equals 1 base unit"),a()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedUnit.conversionFactor)}}function aN(n,t){if(n&1){let e=T();o(0,"div",21),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",22),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",25),a()(),o(7,"div",26),x(8,nN,2,1,"div",27),o(9,"div",28)(10,"label"),l(11,"UOM Code "),o(12,"span",29),l(13,"*"),a()(),o(14,"input",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedUnit.code,r)||(s.selectedUnit.code=r),_(r)}),a(),x(15,iN,2,0,"small",31),a(),o(16,"div",28)(17,"label"),l(18,"Name "),o(19,"span",29),l(20,"*"),a()(),o(21,"input",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedUnit.name,r)||(s.selectedUnit.name=r),_(r)}),a()(),o(22,"div",28)(23,"label"),l(24,"Symbol"),a(),o(25,"input",33),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedUnit.symbol,r)||(s.selectedUnit.symbol=r),_(r)}),a()(),o(26,"div",28)(27,"label"),l(28,"Base UOM"),a(),o(29,"select",34),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBaseUomId,r)||(s.selectedBaseUomId=r),_(r)}),o(30,"option",35),l(31,"None (this is a base unit)"),a(),x(32,rN,2,4,"option",36),a(),o(33,"small",37),l(34,"Select if this is an alternate unit that converts to a base unit"),a()(),x(35,oN,6,1,"div",38),o(36,"div",28)(37,"label"),l(38,"Status"),a(),o(39,"select",34),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedUnit.status,r)||(s.selectedUnit.status=r),_(r)}),o(40,"option",39),l(41,"Active"),a(),o(42,"option",40),l(43,"Inactive"),a()()()(),o(44,"div",41)(45,"button",42),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(46,"Cancel"),a(),o(47,"button",43),y("click",function(){h(e);let r=f();return _(r.saveUnit())}),l(48),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Unit":"Add Unit"),c(4),p("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedUnit.code),p("readonly",e.editMode),c(),p("ngIf",!e.editMode),c(6),S("ngModel",e.selectedUnit.name),c(4),S("ngModel",e.selectedUnit.symbol),c(4),S("ngModel",e.selectedBaseUomId),c(),p("ngValue",null),c(2),p("ngForOf",e.baseUnits),c(3),p("ngIf",e.selectedBaseUomId),c(4),S("ngModel",e.selectedUnit.status),c(8),p("disabled",!e.isFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var zu=class n{constructor(t,e,i){this.unitService=t;this.settingsService=e;this.notificationService=i}units=[];baseUnits=[];showModal=!1;editMode=!1;selectedUnit=this.getEmptyUnit();selectedBaseUomId=null;loading=!1;errorMessage="";ngOnInit(){this.loadUnits()}loadUnits(){this.loading=!0,this.unitService.getAll().subscribe({next:t=>{this.units=t,this.loading=!1},error:t=>{console.error("Error loading units",t),this.loading=!1}}),this.unitService.getBaseUnits().subscribe({next:t=>this.baseUnits=t,error:t=>console.error("Error loading base units",t)})}getEmptyUnit(){return{code:"",name:"",symbol:"",conversionFactor:1,status:"Active"}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedUnit=N({},t),this.selectedBaseUomId=t.baseUom?.id||null):(this.editMode=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.generateUnitCode()),this.showModal=!0}generateUnitCode(){this.settingsService.generatePrefixId("unit").subscribe({next:t=>{this.selectedUnit.code=t},error:t=>console.error("Error generating unit code",t)})}closeModal(){this.showModal=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.errorMessage=""}isFormValid(){return this.selectedUnit.code.trim()!==""&&this.selectedUnit.name.trim()!==""}isBaseUnit(){return this.selectedBaseUomId===null}saveUnit(){if(!this.isFormValid()){this.notificationService.error("UOM Code and Name are required");return}let t=ce(N({},this.selectedUnit),{baseUom:this.selectedBaseUomId?this.baseUnits.find(e=>e.id===this.selectedBaseUomId):void 0});this.editMode&&this.selectedUnit.id?this.unitService.update(this.selectedUnit.id,t).subscribe({next:()=>{this.notificationService.success("Unit of measure updated successfully"),this.loadUnits(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error updating unit")}}):this.unitService.create(t).subscribe({next:()=>{this.notificationService.success("Unit of measure created successfully"),this.loadUnits(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error creating unit")}})}deleteUnit(t){confirm("Are you sure you want to delete this unit?")&&this.unitService.delete(t).subscribe({next:()=>{this.notificationService.success("Unit of measure deleted successfully"),this.loadUnits()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting unit")}})}getUnitType(t){return t.baseUom?"Alternate":"Base"}static \u0275fac=function(e){return new(e||n)(I(pi),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-units-of-measure"]],standalone:!1,decls:45,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-ruler"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., PCS, KG, LTR",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Pieces, Kilograms, Liters",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., pcs, kg, L (optional)",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-hint"],["class","form-group",4,"ngIf"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[3,"ngValue","disabled"],["type","number","placeholder","1","min","0.000001","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Units of Measure"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Units"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," Add Unit "),a()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"UOM Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Symbol"),a(),o(30,"th"),l(31,"Type"),a(),o(32,"th"),l(33,"Conversion Factor"),a(),o(34,"th"),l(35,"Base UOM"),a(),o(36,"th"),l(37,"Status"),a(),o(38,"th"),l(39,"Actions"),a()()(),o(40,"tbody"),x(41,Xk,5,0,"tr",9)(42,eN,5,0,"tr",9)(43,tN,24,9,"tr",10),a()()()()(),x(44,aN,49,14,"div",11)),e&2&&(c(41),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.units.length===0),c(),p("ngForOf",i.units),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var Ge=class n{constructor(t){this.http=t}warehouseUrl="/api/inventory/warehouses";binUrl="/api/inventory/bins";getAll(){return this.http.get(this.warehouseUrl)}getAllWarehouses(){return this.http.get(this.warehouseUrl)}getActiveWarehouses(){return this.http.get(`${this.warehouseUrl}/active`)}getWarehouseById(t){return this.http.get(`${this.warehouseUrl}/${t}`)}createWarehouse(t){return this.http.post(this.warehouseUrl,t)}updateWarehouse(t,e){return this.http.put(`${this.warehouseUrl}/${t}`,e)}deleteWarehouse(t){return this.http.delete(`${this.warehouseUrl}/${t}`)}getAllBins(){return this.http.get(this.binUrl)}getBinsByWarehouse(t){return this.http.get(`${this.binUrl}/warehouse/${t}`)}getBinById(t){return this.http.get(`${this.binUrl}/${t}`)}createBin(t){return this.http.post(this.binUrl,t)}updateBin(t,e){return this.http.put(`${this.binUrl}/${t}`,e)}deleteBin(t){return this.http.delete(`${this.binUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function sN(n,t){n&1&&(o(0,"div",11),v(1,"i",12),o(2,"p"),l(3,"Loading warehouses..."),a()())}function lN(n,t){n&1&&(o(0,"div",11),v(1,"i",13),o(2,"p"),l(3,'No warehouses found. Click "Add Warehouse" to create one.'),a()())}function cN(n,t){n&1&&(o(0,"div",31)(1,"p"),l(2,"No bins in this warehouse. Bins are optional for organizing items within a warehouse."),a()())}function dN(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(2).$implicit;c(),D("Zone: ",e.zone)}}function uN(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(2).$implicit;c(),D(" | Aisle: ",e.aisle)}}function pN(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(2).$implicit;c(),D(" | Rack: ",e.rack)}}function mN(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(2).$implicit;c(),D(" | Shelf: ",e.shelf)}}function fN(n,t){if(n&1&&(o(0,"div",41)(1,"small"),x(2,dN,2,1,"span",42)(3,uN,2,1,"span",42)(4,pN,2,1,"span",42)(5,mN,2,1,"span",42),a()()),n&2){let e=f().$implicit;c(2),p("ngIf",e.zone),c(),p("ngIf",e.aisle),c(),p("ngIf",e.rack),c(),p("ngIf",e.shelf)}}function gN(n,t){if(n&1){let e=T();o(0,"div",32)(1,"div",33)(2,"strong"),l(3),a(),o(4,"div",34)(5,"button",35),y("click",function(){let r=h(e).$implicit,s=f(3);return _(s.editBin(r))}),v(6,"i",26),a(),o(7,"button",36),y("click",function(){let r=h(e).$implicit,s=f(3);return _(s.deleteBin(r.id))}),v(8,"i",37),a()()(),o(9,"p",38),l(10),a(),x(11,fN,6,4,"div",39),o(12,"span",40),l(13),a()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(7),g(e.name),c(),p("ngIf",e.zone||e.aisle||e.rack||e.shelf),c(),p("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function hN(n,t){if(n&1){let e=T();o(0,"div",23)(1,"div",24)(2,"h4"),l(3),a(),o(4,"div",4)(5,"button",25),y("click",function(r){h(e);let s=f().$implicit;return f().openModal("warehouse",s),_(r.stopPropagation())}),v(6,"i",26),l(7," Edit Warehouse "),a(),o(8,"button",27),y("click",function(r){h(e);let s=f().$implicit;return f().openBinModal(s.id),_(r.stopPropagation())}),v(9,"i",6),l(10," Add Bin "),a()()(),o(11,"div",28),x(12,cN,3,0,"div",29)(13,gN,14,5,"div",30),a()()}if(n&2){let e=f().$implicit,i=f();c(3),D("Bins (",i.getBinsForWarehouse(e.id).length,")"),c(9),p("ngIf",i.getBinsForWarehouse(e.id).length===0),c(),p("ngForOf",i.getBinsForWarehouse(e.id))}}function _N(n,t){if(n&1){let e=T();o(0,"div",14)(1,"div",15),y("click",function(){let r=h(e).$implicit,s=f();return _(s.toggleWarehouse(r.id))}),o(2,"div",16)(3,"div",17),v(4,"i",13),a(),o(5,"div",18)(6,"h3"),l(7),a(),o(8,"p")(9,"strong"),l(10),a(),l(11),a()()(),o(12,"div",19)(13,"span",20),l(14),a(),v(15,"i",21),a()(),x(16,hN,14,3,"div",22),a()}if(n&2){let e=t.$implicit,i=f();c(7),g(e.name),c(3),g(e.code),c(),D(" - ",e.address||"No address"),c(2),p("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," "),c(),J("rotated",i.expandedWarehouse===e.id),c(),p("ngIf",i.expandedWarehouse===e.id)}}function vN(n,t){if(n&1&&(o(0,"div",62),l(1),a()),n&2){let e=f(2);c(),D(" ",e.errorMessage," ")}}function yN(n,t){n&1&&(o(0,"small",63),l(1,"Unique identifier for this warehouse"),a())}function bN(n,t){if(n&1){let e=T();o(0,"div",43),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",44),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),a(),o(5,"button",46),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",47),a()(),o(7,"div",48),x(8,vN,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Warehouse Code "),o(12,"span",51),l(13,"*"),a()(),o(14,"input",52),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouse.code,r)||(s.selectedWarehouse.code=r),_(r)}),a(),x(15,yN,2,0,"small",53),a(),o(16,"div",50)(17,"label"),l(18,"Warehouse Name "),o(19,"span",51),l(20,"*"),a()(),o(21,"input",54),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouse.name,r)||(s.selectedWarehouse.name=r),_(r)}),a()(),o(22,"div",50)(23,"label"),l(24,"Address"),a(),o(25,"textarea",55),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouse.address,r)||(s.selectedWarehouse.address=r),_(r)}),a()(),o(26,"div",50)(27,"label"),l(28,"Status"),a(),o(29,"select",56),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouse.status,r)||(s.selectedWarehouse.status=r),_(r)}),o(30,"option",57),l(31,"Active"),a(),o(32,"option",58),l(33,"Inactive"),a()()()(),o(34,"div",59)(35,"button",60),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(36,"Cancel"),a(),o(37,"button",61),y("click",function(){h(e);let r=f();return _(r.saveWarehouse())}),l(38),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Warehouse":"Add Warehouse"),c(4),p("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedWarehouse.code),p("readonly",e.editMode),c(),p("ngIf",!e.editMode),c(6),S("ngModel",e.selectedWarehouse.name),c(4),S("ngModel",e.selectedWarehouse.address),c(4),S("ngModel",e.selectedWarehouse.status),c(8),p("disabled",!e.isWarehouseFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}function CN(n,t){if(n&1&&(o(0,"div",62),l(1),a()),n&2){let e=f(2);c(),D(" ",e.errorMessage," ")}}function xN(n,t){n&1&&(o(0,"small",63),l(1,"Unique within this warehouse"),a())}function SN(n,t){if(n&1){let e=T();o(0,"div",43),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",44),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),a(),o(5,"button",46),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",47),a()(),o(7,"div",48),x(8,CN,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Bin Code "),o(12,"span",51),l(13,"*"),a()(),o(14,"input",64),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.code,r)||(s.selectedBin.code=r),_(r)}),a(),x(15,xN,2,0,"small",53),a(),o(16,"div",50)(17,"label"),l(18,"Bin Name "),o(19,"span",51),l(20,"*"),a()(),o(21,"input",65),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.name,r)||(s.selectedBin.name=r),_(r)}),a()(),o(22,"div",66)(23,"div",50)(24,"label"),l(25,"Zone"),a(),o(26,"input",67),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.zone,r)||(s.selectedBin.zone=r),_(r)}),a()(),o(27,"div",50)(28,"label"),l(29,"Aisle"),a(),o(30,"input",68),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.aisle,r)||(s.selectedBin.aisle=r),_(r)}),a()()(),o(31,"div",66)(32,"div",50)(33,"label"),l(34,"Rack"),a(),o(35,"input",69),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.rack,r)||(s.selectedBin.rack=r),_(r)}),a()(),o(36,"div",50)(37,"label"),l(38,"Shelf"),a(),o(39,"input",70),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.shelf,r)||(s.selectedBin.shelf=r),_(r)}),a()()(),o(40,"div",50)(41,"label"),l(42,"Status"),a(),o(43,"select",56),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedBin.status,r)||(s.selectedBin.status=r),_(r)}),o(44,"option",57),l(45,"Active"),a(),o(46,"option",58),l(47,"Inactive"),a()()()(),o(48,"div",59)(49,"button",60),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(50,"Cancel"),a(),o(51,"button",61),y("click",function(){h(e);let r=f();return _(r.saveBin())}),l(52),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Bin":"Add Bin"),c(4),p("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedBin.code),p("readonly",e.editMode),c(),p("ngIf",!e.editMode),c(6),S("ngModel",e.selectedBin.name),c(5),S("ngModel",e.selectedBin.zone),c(4),S("ngModel",e.selectedBin.aisle),c(5),S("ngModel",e.selectedBin.rack),c(4),S("ngModel",e.selectedBin.shelf),c(4),S("ngModel",e.selectedBin.status),c(8),p("disabled",!e.isBinFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var $u=class n{constructor(t,e,i){this.warehouseService=t;this.settingsService=e;this.notificationService=i}warehouses=[];warehouseBins={};expandedWarehouse=null;showModal=!1;modalType="";editMode=!1;selectedWarehouse=this.getEmptyWarehouse();selectedBin=this.getEmptyBin();loading=!1;errorMessage="";ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.loading=!0,this.warehouseService.getAllWarehouses().subscribe({next:t=>{this.warehouses=t,this.loading=!1},error:t=>{console.error("Error loading warehouses",t),this.loading=!1}})}loadBinsForWarehouse(t){this.warehouseService.getBinsByWarehouse(t).subscribe({next:e=>{this.warehouseBins[t]=e},error:e=>console.error("Error loading bins",e)})}getEmptyWarehouse(){return{code:"",name:"",address:"",status:"Active"}}getEmptyBin(){return{code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",status:"Active"}}toggleWarehouse(t){this.expandedWarehouse===t?this.expandedWarehouse=null:(this.expandedWarehouse=t,this.warehouseBins[t]||this.loadBinsForWarehouse(t))}openModal(t,e){this.modalType=t,this.errorMessage="",t==="warehouse"?e?(this.editMode=!0,this.selectedWarehouse=N({},e)):(this.editMode=!1,this.selectedWarehouse=this.getEmptyWarehouse(),this.generateWarehouseCode()):t==="bin"&&(e?(this.editMode=!0,this.selectedBin=N({},e)):(this.editMode=!1,this.selectedBin=this.getEmptyBin(),this.generateBinCode())),this.showModal=!0}generateWarehouseCode(){this.settingsService.generatePrefixId("warehouse").subscribe({next:t=>{this.selectedWarehouse.code=t},error:t=>console.error("Error generating warehouse code",t)})}generateBinCode(){this.settingsService.generatePrefixId("bin").subscribe({next:t=>{this.selectedBin.code=t},error:t=>console.error("Error generating bin code",t)})}closeModal(){this.showModal=!1,this.errorMessage=""}isWarehouseFormValid(){return this.selectedWarehouse.code.trim()!==""&&this.selectedWarehouse.name.trim()!==""}isBinFormValid(){return this.selectedBin.code.trim()!==""&&this.selectedBin.name.trim()!==""}saveWarehouse(){if(!this.isWarehouseFormValid()){this.notificationService.error("Warehouse Code and Name are required");return}this.editMode&&this.selectedWarehouse.id?this.warehouseService.updateWarehouse(this.selectedWarehouse.id,this.selectedWarehouse).subscribe({next:()=>{this.notificationService.success("Warehouse updated successfully"),this.loadWarehouses(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating warehouse")}}):this.warehouseService.createWarehouse(this.selectedWarehouse).subscribe({next:()=>{this.notificationService.success("Warehouse created successfully"),this.loadWarehouses(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating warehouse")}})}saveBin(){if(!this.isBinFormValid()){this.notificationService.error("Bin Code and Name are required");return}this.editMode&&this.selectedBin.id?this.warehouseService.updateBin(this.selectedBin.id,this.selectedBin).subscribe({next:()=>{this.notificationService.success("Bin updated successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating bin")}}):(this.selectedBin.warehouseId=this.expandedWarehouse||void 0,this.warehouseService.createBin(this.selectedBin).subscribe({next:()=>{this.notificationService.success("Bin created successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating bin")}}))}deleteWarehouse(t){confirm("Are you sure you want to delete this warehouse? All bins inside will also be deleted.")&&this.warehouseService.deleteWarehouse(t).subscribe({next:()=>{this.notificationService.success("Warehouse deleted successfully"),this.loadWarehouses()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting warehouse")}})}deleteBin(t){confirm("Are you sure you want to delete this bin?")&&this.warehouseService.deleteBin(t).subscribe({next:()=>{this.notificationService.success("Bin deleted successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse)},error:e=>{this.notificationService.error(e.error?.error||"Error deleting bin")}})}getBinsForWarehouse(t){return this.warehouseBins[t]||[]}openBinModal(t){this.selectedBin=this.getEmptyBin(),this.selectedBin.warehouseId=t,this.modalType="bin",this.editMode=!1,this.errorMessage="",this.generateBinCode(),this.showModal=!0}editBin(t){this.modalType="bin",this.editMode=!0,this.selectedBin=N({},t),this.errorMessage="",this.showModal=!0}static \u0275fac=function(e){return new(e||n)(I(Ge),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-warehouse-bin"]],standalone:!1,decls:26,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"warehouse-list"],["class","empty-state",4,"ngIf"],["class","warehouse-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-warehouse"],[1,"warehouse-card"],[1,"warehouse-header",3,"click"],[1,"warehouse-info"],[1,"warehouse-icon"],[1,"warehouse-details"],[1,"warehouse-stats"],[1,"badge",3,"ngClass"],[1,"fas","fa-chevron-down","expand-icon"],["class","bins-section",4,"ngIf"],[1,"bins-section"],[1,"bins-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bins-grid"],["class","empty-bins",4,"ngIf"],["class","bin-card",4,"ngFor","ngForOf"],[1,"empty-bins"],[1,"bin-card"],[1,"bin-header"],[1,"bin-actions"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"bin-name"],["class","bin-location",4,"ngIf"],[1,"badge","badge-sm",3,"ngClass"],[1,"bin-location"],[4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., WH-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Main Warehouse",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address (optional)","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],["type","text","placeholder","e.g., BIN-A1",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","text","placeholder","e.g., Storage Bin A1",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., A, B, C (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., 1, 2, 3 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., R1, R2 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., S1, S2 (optional)",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Warehouse & Bin Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Warehouse"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.openModal("warehouse")}),v(18,"i",6),l(19," Add Warehouse "),a()()(),o(20,"div",7),x(21,sN,4,0,"div",8)(22,lN,4,0,"div",8)(23,_N,17,8,"div",9),a()(),x(24,bN,39,10,"div",10)(25,SN,53,13,"div",10)),e&2&&(c(21),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.warehouses.length===0),c(),p("ngForOf",i.warehouses),c(),p("ngIf",i.showModal&&i.modalType==="warehouse"),c(),p("ngIf",i.showModal&&i.modalType==="bin"))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.warehouse-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.warehouse-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 10px #00000014;overflow:hidden}.warehouse-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;cursor:pointer;transition:background .3s ease}.warehouse-header[_ngcontent-%COMP%]:hover{background:#f8f9fa}.warehouse-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.warehouse-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b;font-size:1.5rem}.warehouse-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:4px}.warehouse-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.warehouse-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.usage-info[_ngcontent-%COMP%]{text-align:right}.usage-info[_ngcontent-%COMP%]   .usage-text[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;display:block;margin-bottom:8px}.usage-bar[_ngcontent-%COMP%]{width:150px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden}.usage-bar.small[_ngcontent-%COMP%]{width:100%;height:6px}.usage-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.usage-fill.normal[_ngcontent-%COMP%]{background:#28a745}.usage-fill.warning[_ngcontent-%COMP%]{background:#ffc107}.usage-fill.critical[_ngcontent-%COMP%]{background:#dc3545}.expand-icon[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;transition:transform .3s ease}.expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.bins-section[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding:20px;background:#f8f9fa}.bins-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.bins-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.bins-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px}.bin-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 1px 4px #0000000d}.bin-card[_ngcontent-%COMP%]   .bin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.bin-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:12px}.bin-card[_ngcontent-%COMP%]   .bin-usage[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;display:block;margin-bottom:6px}"]})};function MN(n,t){n&1&&(o(0,"tr")(1,"td",16),v(2,"i",17),o(3,"p"),l(4,"Loading..."),a()()())}function EN(n,t){n&1&&(o(0,"tr")(1,"td",16),v(2,"i",18),o(3,"p"),l(4,'No suppliers found. Click "Add Supplier" to create one.'),a()()())}function wN(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td")(5,"div",19)(6,"div",20),l(7),a(),o(8,"span"),l(9),a()()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td")(17,"span",21),l(18),a()(),o(19,"td")(20,"div",22)(21,"button",23),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(22,"i",24),a(),o(23,"button",25),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteSupplier(r.id))}),v(24,"i",26),a()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(4),g(e.name.charAt(0)),c(2),g(e.name),c(2),g(e.contactPerson),c(2),g(e.email),c(2),g(e.phone),c(2),p("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function IN(n,t){if(n&1){let e=T();o(0,"div",27),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",28),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",29)(3,"h2"),l(4),a(),o(5,"button",30),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",31),a()(),o(7,"div",32)(8,"div",33)(9,"div",34)(10,"label"),l(11,"Supplier Code"),a(),o(12,"input",35),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.code,r)||(s.selectedSupplier.code=r),_(r)}),a()(),o(13,"div",34)(14,"label"),l(15,"Supplier Name"),a(),o(16,"input",36),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.name,r)||(s.selectedSupplier.name=r),_(r)}),a()()(),o(17,"div",34)(18,"label"),l(19,"Contact Person"),a(),o(20,"input",37),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.contactPerson,r)||(s.selectedSupplier.contactPerson=r),_(r)}),a()(),o(21,"div",33)(22,"div",34)(23,"label"),l(24,"Email"),a(),o(25,"input",38),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.email,r)||(s.selectedSupplier.email=r),_(r)}),a()(),o(26,"div",34)(27,"label"),l(28,"Phone"),a(),o(29,"input",39),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.phone,r)||(s.selectedSupplier.phone=r),_(r)}),a()()(),o(30,"div",34)(31,"label"),l(32,"Address"),a(),o(33,"textarea",40),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.address,r)||(s.selectedSupplier.address=r),_(r)}),a()(),o(34,"div",33)(35,"div",34)(36,"label"),l(37,"Payment Terms"),a(),o(38,"input",41),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.paymentTerms,r)||(s.selectedSupplier.paymentTerms=r),_(r)}),a()(),o(39,"div",34)(40,"label"),l(41,"Status"),a(),o(42,"select",42),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplier.status,r)||(s.selectedSupplier.status=r),_(r)}),o(43,"option",43),l(44,"Active"),a(),o(45,"option",44),l(46,"Inactive"),a()()()()(),o(47,"div",45)(48,"button",46),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(49,"Cancel"),a(),o(50,"button",4),y("click",function(){h(e);let r=f();return _(r.saveSupplier())}),l(51),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Supplier":"Add Supplier"),c(8),S("ngModel",e.selectedSupplier.code),c(4),S("ngModel",e.selectedSupplier.name),c(4),S("ngModel",e.selectedSupplier.contactPerson),c(5),S("ngModel",e.selectedSupplier.email),c(4),S("ngModel",e.selectedSupplier.phone),c(4),S("ngModel",e.selectedSupplier.address),c(5),S("ngModel",e.selectedSupplier.paymentTerms),c(4),S("ngModel",e.selectedSupplier.status),c(9),g(e.editMode?"Update":"Save")}}var Qu=class n{constructor(t,e){this.supplierService=t;this.settingsService=e}suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedSupplier=this.getEmptySupplier();loading=!1;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.loading=!0,this.supplierService.getAll().subscribe({next:t=>{this.suppliers=t,this.loading=!1},error:t=>{console.error("Error loading suppliers",t),this.loading=!1}})}get filteredSuppliers(){return this.searchQuery?this.suppliers.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.suppliers}getEmptySupplier(){return{code:"",name:"",contactPerson:"",email:"",phone:"",address:"",paymentTerms:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedSupplier=N({},t)):(this.editMode=!1,this.selectedSupplier=this.getEmptySupplier(),this.generateSupplierCode()),this.showModal=!0}generateSupplierCode(){this.settingsService.generatePrefixId("supplier").subscribe({next:t=>{this.selectedSupplier.code=t},error:t=>console.error("Error generating supplier code",t)})}closeModal(){this.showModal=!1,this.selectedSupplier=this.getEmptySupplier()}saveSupplier(){this.editMode&&this.selectedSupplier.id?this.supplierService.update(this.selectedSupplier.id,this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error updating supplier",t)}):this.supplierService.create(this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error creating supplier",t)})}deleteSupplier(t){confirm("Are you sure you want to delete this supplier?")&&this.supplierService.delete(t).subscribe({next:()=>this.loadSuppliers(),error:e=>console.error("Error deleting supplier",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(_t),I(we))};static \u0275cmp=A({type:n,selectors:[["app-supplier"]],standalone:!1,decls:47,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search suppliers...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-truck"],[1,"supplier-info"],[1,"avatar"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","SUP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Company name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Contact name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","+1 234 567 890",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Supplier Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Suppliers"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," Add Supplier "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),o(23,"input",10),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Code"),a(),o(30,"th"),l(31,"Supplier"),a(),o(32,"th"),l(33,"Contact Person"),a(),o(34,"th"),l(35,"Email"),a(),o(36,"th"),l(37,"Phone"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),x(43,MN,5,0,"tr",13)(44,EN,5,0,"tr",13)(45,wN,25,8,"tr",14),a()()()()(),x(46,IN,52,10,"div",15)),e&2&&(c(23),S("ngModel",i.searchQuery),c(20),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.filteredSuppliers.length===0),c(),p("ngForOf",i.filteredSuppliers),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.supplier-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.supplier-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}.contact-info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e0e0e0;font-size:.8rem}.rating[_ngcontent-%COMP%]   i.filled[_ngcontent-%COMP%]{color:#ffc107}.rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-size:.875rem;color:#6c757d}"]})};function PN(n,t){n&1&&v(0,"span",26)}function DN(n,t){if(n&1){let e=T();o(0,"div",22),y("click",function(){let r=h(e).$implicit,s=f();return _(s.setValuationMethod(r.id))}),o(1,"div",23),x(2,PN,1,0,"span",24),a(),o(3,"div",25)(4,"h4"),l(5),a(),o(6,"p"),l(7),a()()()}if(n&2){let e=t.$implicit;J("active",e.active),c(2),p("ngIf",e.active),c(3),g(e.name),c(2),g(e.description)}}function TN(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"strong"),l(9),a()(),o(10,"td")(11,"span",27),l(12),a()()()),n&2){let e=t.$implicit;c(2),g(e.item),c(2),g(e.quantity),c(2),D("$",e.avgCost),c(3),D("$",e.totalValue.toLocaleString()),c(3),g(e.method)}}var Ku=class n{valuationMethods=[{id:1,name:"FIFO",description:"First In First Out",active:!0},{id:2,name:"LIFO",description:"Last In First Out",active:!1},{id:3,name:"Weighted Average",description:"Average cost method",active:!1},{id:4,name:"Standard Cost",description:"Predetermined standard cost",active:!1}];valuationData=[{item:"Laptop Dell XPS",quantity:25,avgCost:800,totalValue:2e4,method:"FIFO"},{item:"Office Chair",quantity:40,avgCost:150,totalValue:6e3,method:"FIFO"},{item:"A4 Paper Ream",quantity:500,avgCost:5,totalValue:2500,method:"Weighted Avg"},{item:"Steel Sheet",quantity:1e3,avgCost:2,totalValue:2e3,method:"FIFO"},{item:"Cardboard Box",quantity:2e3,avgCost:.5,totalValue:1e3,method:"Weighted Avg"}];totalValue=31500;setValuationMethod(t){this.valuationMethods.forEach(e=>e.active=e.id===t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-inventory-valuation"]],standalone:!1,decls:78,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-title"],[1,"method-list"],["class","method-item",3,"active","click",4,"ngFor","ngForOf"],[1,"card","total-value-card"],[1,"total-value"],[1,"fas","fa-coins"],[1,"value-info"],[1,"value-breakdown"],[1,"breakdown-item"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm"],[1,"fas","fa-download"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"method-item",3,"click"],[1,"method-radio"],["class","radio-dot",4,"ngIf"],[1,"method-info"],[1,"radio-dot"],[1,"badge","badge-info"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Valuation Engine"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Valuation"),a()()()(),o(16,"div",4)(17,"div",5)(18,"h3",6),l(19,"Valuation Methods"),a(),o(20,"div",7),x(21,DN,8,5,"div",8),a()(),o(22,"div",9)(23,"div",10),v(24,"i",11),o(25,"div",12)(26,"span"),l(27,"Total Inventory Value"),a(),o(28,"h2"),l(29),a()()(),o(30,"div",13)(31,"div",14)(32,"span"),l(33,"Raw Materials"),a(),o(34,"strong"),l(35,"$3,000"),a()(),o(36,"div",14)(37,"span"),l(38,"Finished Goods"),a(),o(39,"strong"),l(40,"$26,000"),a()(),o(41,"div",14)(42,"span"),l(43,"Packaging"),a(),o(44,"strong"),l(45,"$2,500"),a()()()()(),o(46,"div",5)(47,"div",15)(48,"h3"),l(49,"Item Valuation Details"),a(),o(50,"button",16),v(51,"i",17),l(52," Export "),a()(),o(53,"div",18)(54,"table",19)(55,"thead")(56,"tr")(57,"th"),l(58,"Item"),a(),o(59,"th"),l(60,"Quantity"),a(),o(61,"th"),l(62,"Avg. Cost"),a(),o(63,"th"),l(64,"Total Value"),a(),o(65,"th"),l(66,"Method"),a()()(),o(67,"tbody"),x(68,TN,13,5,"tr",20),a(),o(69,"tfoot")(70,"tr")(71,"td",21)(72,"strong"),l(73,"Total"),a()(),o(74,"td")(75,"strong"),l(76),a()(),v(77,"td"),a()()()()()()),e&2&&(c(21),p("ngForOf",i.valuationMethods),c(8),D("$",i.totalValue.toLocaleString()),c(39),p("ngForOf",i.valuationData),c(8),D("$",i.totalValue.toLocaleString()))},dependencies:[L,B,K],styles:[".card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px}.method-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.method-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .3s ease}.method-item[_ngcontent-%COMP%]:hover{border-color:#00796b}.method-item.active[_ngcontent-%COMP%]{border-color:#00796b;background:#00796b0d}.method-radio[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center}.method-item.active[_ngcontent-%COMP%]   .method-radio[_ngcontent-%COMP%]{border-color:#00796b}.method-radio[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:10px;height:10px;background:#00796b;border-radius:50%}.method-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;margin-bottom:4px}.method-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.total-value-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.total-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:24px;background:linear-gradient(135deg,#00796b,#004d40);border-radius:8px;color:#fff;margin-bottom:20px}.total-value[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-top:4px}.value-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.breakdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #e0e0e0}.breakdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.breakdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}.breakdown-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;background:#f8f9fa}"]})};var mi=class n{constructor(t){this.http=t}baseUrl="/api/inventory/ledger";getAll(t){let e=new Ft;return t&&(t.itemId&&(e=e.set("itemId",t.itemId.toString())),t.warehouseId&&(e=e.set("warehouseId",t.warehouseId.toString())),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(this.baseUrl,{params:e})}getByItem(t){return this.http.get(`${this.baseUrl}/item/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function ON(n,t){if(n&1&&(o(0,"option",10),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function kN(n,t){if(n&1&&(o(0,"option",10),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function NN(n,t){n&1&&(o(0,"div",24),v(1,"div",25),o(2,"span"),l(3,"Loading ledger entries..."),a()())}function RN(n,t){n&1&&(o(0,"tr")(1,"td",26),l(2,"No ledger entries found"),a()())}function AN(n,t){if(n&1){let e=T();o(0,"tr",27),y("click",function(){let r=h(e).$implicit,s=f();return _(s.drillDown(r))}),o(1,"td"),l(2),a(),o(3,"td")(4,"a",28),l(5),a()(),o(6,"td")(7,"div",29)(8,"span",30),l(9),a(),o(10,"span",31),l(11),a()()(),o(12,"td")(13,"span",32),l(14),a()(),o(15,"td",33),l(16),a(),o(17,"td",34),l(18),a(),o(19,"td",20)(20,"strong"),l(21),a()(),o(22,"td",20),l(23),a(),o(24,"td",20),l(25),a(),o(26,"td"),l(27),a(),o(28,"td"),l(29),a()()}if(n&2){let e=t.$implicit,i=f();c(2),g(i.formatDate(e.transactionDate)),c(3),g(e.referenceNumber),c(4),g(e.item==null?null:e.item.code),c(2),g(e.item==null?null:e.item.name),c(2),p("ngClass",i.getTypeClass(e.transactionType)),c(),D(" ",i.getTypeLabel(e.transactionType)," "),c(2),D(" ",e.quantityIn>0?"+"+e.quantityIn:"-"," "),c(2),D(" ",e.quantityOut>0?"-"+e.quantityOut:"-"," "),c(3),g(e.balanceQuantity),c(2),g(i.formatCurrency(e.unitValue)),c(),J("positive",e.totalValue>0)("negative",e.totalValue<0),c(),D(" ",i.formatCurrency(e.totalValue)," "),c(2),g((e.warehouse==null?null:e.warehouse.name)||"-"),c(2),g(e.remarks||"-")}}function FN(n,t){if(n&1&&(o(0,"div",35)(1,"span",36)(2,"strong"),l(3,"Total Entries:"),a(),l(4),a()()),n&2){let e=f();c(4),D(" ",e.ledgerEntries.length," ")}}var Zu=class n{constructor(t,e,i,r){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.router=r}ledgerEntries=[];items=[];warehouses=[];loading=!1;selectedItemId=null;selectedWarehouseId=null;dateFrom="";dateTo="";ngOnInit(){this.loadItems(),this.loadWarehouses(),this.loadLedger()}loadItems(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)})}loadWarehouses(){this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadLedger(){this.loading=!0;let t={};this.selectedItemId&&(t.itemId=this.selectedItemId),this.selectedWarehouseId&&(t.warehouseId=this.selectedWarehouseId),this.dateFrom&&(t.startDate=this.dateFrom),this.dateTo&&(t.endDate=this.dateTo),this.ledgerService.getAll(t).subscribe({next:e=>{this.ledgerEntries=e,this.loading=!1},error:e=>{console.error("Error loading ledger",e),this.loading=!1}})}applyFilter(){this.loadLedger()}clearFilters(){this.selectedItemId=null,this.selectedWarehouseId=null,this.dateFrom="",this.dateTo="",this.loadLedger()}getTypeClass(t){return{GOODS_RECEIPT:"badge-success",GOODS_ISSUE:"badge-danger",TRANSFER_IN:"badge-info",TRANSFER_OUT:"badge-warning",ADJUSTMENT:"badge-secondary"}[t]||"badge-info"}getTypeLabel(t){return{GOODS_RECEIPT:"Goods Receipt",GOODS_ISSUE:"Goods Issue",TRANSFER_IN:"Transfer In",TRANSFER_OUT:"Transfer Out",ADJUSTMENT:"Adjustment"}[t]||t}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}formatCurrency(t){return t==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}drillDown(t){let e=t.referenceNumber;if(!e)return;let i={search:e};e.startsWith("GRN")?this.router.navigate(["/app/stock/grn"],{queryParams:i}):e.startsWith("ISS")||e.startsWith("GI")?this.router.navigate(["/app/stock/issue"],{queryParams:i}):e.startsWith("TRF")||e.startsWith("ST")?this.router.navigate(["/app/stock/transfer"],{queryParams:i}):(e.startsWith("ADJ")||e.startsWith("SA"))&&this.router.navigate(["/app/stock/adjustment"],{queryParams:i})}exportLedger(){let t=this.generateCSV(),e=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`inventory-ledger-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(i)}generateCSV(){let t=["Date","Document No","Item","Transaction Type","In Qty","Out Qty","Balance Qty","Rate","Value","Warehouse","Remarks"],e=this.ledgerEntries.map(i=>[this.formatDate(i.transactionDate),i.referenceNumber,i.item?.name||"-",this.getTypeLabel(i.transactionType),i.quantityIn||0,i.quantityOut||0,i.balanceQuantity||0,i.unitValue||0,i.totalValue||0,i.warehouse?.name||"-",i.remarks||""]);return[t,...e].map(i=>i.join(",")).join(`
`)}static \u0275fac=function(e){return new(e||n)(I(mi),I(Oe),I(Ge),I(ue))};static \u0275cmp=A({type:n,selectors:[["app-inventory-ledger"]],standalone:!1,decls:82,vars:12,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-download"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"filter-buttons"],[1,"fas","fa-filter"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","ledger-row",3,"click",4,"ngFor","ngForOf"],["class","ledger-summary",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],["colspan","11",1,"text-center","text-muted"],[1,"ledger-row",3,"click"],[1,"doc-link"],[1,"item-info"],[1,"item-code"],[1,"item-name"],[1,"badge",3,"ngClass"],[1,"text-right","qty-in"],[1,"text-right","qty-out"],[1,"ledger-summary"],[1,"summary-item"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Ledger"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Ledger"),a()()(),o(16,"button",4),y("click",function(){return i.exportLedger()}),v(17,"i",5),l(18," Export CSV "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"label"),l(23,"Item"),a(),o(24,"select",9),M("ngModelChange",function(s){return E(i.selectedItemId,s)||(i.selectedItemId=s),s}),o(25,"option",10),l(26,"All Items"),a(),x(27,ON,2,3,"option",11),a()(),o(28,"div",8)(29,"label"),l(30,"Warehouse"),a(),o(31,"select",9),M("ngModelChange",function(s){return E(i.selectedWarehouseId,s)||(i.selectedWarehouseId=s),s}),o(32,"option",10),l(33,"All Warehouses"),a(),x(34,kN,2,3,"option",11),a()(),o(35,"div",8)(36,"label"),l(37,"From Date"),a(),o(38,"input",12),M("ngModelChange",function(s){return E(i.dateFrom,s)||(i.dateFrom=s),s}),a()(),o(39,"div",8)(40,"label"),l(41,"To Date"),a(),o(42,"input",12),M("ngModelChange",function(s){return E(i.dateTo,s)||(i.dateTo=s),s}),a()(),o(43,"div",13)(44,"button",4),y("click",function(){return i.applyFilter()}),v(45,"i",14),l(46," Apply "),a(),o(47,"button",15),y("click",function(){return i.clearFilters()}),v(48,"i",16),l(49," Clear "),a()()()(),o(50,"div",6)(51,"div",17),x(52,NN,4,0,"div",18),o(53,"table",19)(54,"thead")(55,"tr")(56,"th"),l(57,"Date"),a(),o(58,"th"),l(59,"Document No."),a(),o(60,"th"),l(61,"Item"),a(),o(62,"th"),l(63,"Transaction Type"),a(),o(64,"th",20),l(65,"In Qty"),a(),o(66,"th",20),l(67,"Out Qty"),a(),o(68,"th",20),l(69,"Balance Qty"),a(),o(70,"th",20),l(71,"Rate"),a(),o(72,"th",20),l(73,"Value"),a(),o(74,"th"),l(75,"Warehouse"),a(),o(76,"th"),l(77,"Reference"),a()()(),o(78,"tbody"),x(79,RN,3,0,"tr",21)(80,AN,30,17,"tr",22),a()()(),x(81,FN,5,1,"div",23),a()()),e&2&&(c(24),S("ngModel",i.selectedItemId),c(),p("ngValue",null),c(2),p("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouseId),c(),p("ngValue",null),c(2),p("ngForOf",i.warehouses),c(4),S("ngModel",i.dateFrom),c(4),S("ngModel",i.dateTo),c(10),p("ngIf",i.loading),c(27),p("ngIf",i.ledgerEntries.length===0&&!i.loading),c(),p("ngForOf",i.ledgerEntries),c(),p("ngIf",i.ledgerEntries.length>0))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filters-row[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;height:46px;align-items:center}.qty-in[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.qty-out[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.positive[_ngcontent-%COMP%]{color:#28a745}.negative[_ngcontent-%COMP%]{color:#dc3545}.card[_ngcontent-%COMP%]{margin-bottom:24px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e0e0e0;border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.ledger-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .15s ease}.ledger-row[_ngcontent-%COMP%]:hover{background-color:#0080800d}.doc-link[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;text-decoration:none}.doc-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.item-info[_ngcontent-%COMP%]   .item-code[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.text-muted[_ngcontent-%COMP%]{color:var(--text-secondary);padding:40px 0}.ledger-summary[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:16px 0 0;border-top:1px solid var(--border-color);margin-top:16px}.ledger-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.badge-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}"]})};var Tn=class n{constructor(t){this.http=t}baseUrl="/api/stock-movement";getAllGRN(){return this.http.get(`${this.baseUrl}/grn`)}getGRNById(t){return this.http.get(`${this.baseUrl}/grn/${t}`)}createGRN(t){return this.http.post(`${this.baseUrl}/grn`,t)}deleteGRN(t){return this.http.delete(`${this.baseUrl}/grn/${t}`)}getAllIssues(){return this.http.get(`${this.baseUrl}/issues`)}getIssueById(t){return this.http.get(`${this.baseUrl}/issues/${t}`)}createIssue(t){return this.http.post(`${this.baseUrl}/issues`,t)}deleteIssue(t){return this.http.delete(`${this.baseUrl}/issues/${t}`)}getAllTransfers(){return this.http.get(`${this.baseUrl}/transfers`)}getTransferById(t){return this.http.get(`${this.baseUrl}/transfers/${t}`)}createTransfer(t){return this.http.post(`${this.baseUrl}/transfers`,t)}deleteTransfer(t){return this.http.delete(`${this.baseUrl}/transfers/${t}`)}getAllAdjustments(){return this.http.get(`${this.baseUrl}/adjustments`)}getAdjustmentById(t){return this.http.get(`${this.baseUrl}/adjustments/${t}`)}createAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments`,t)}deleteAdjustment(t){return this.http.delete(`${this.baseUrl}/adjustments/${t}`)}approveAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/approve`,{})}rejectAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/reject`,{})}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var vt=class n{constructor(t){this.http=t}baseUrl="/api/purchase/fulfillment";fulfillmentsSubject=new He([]);fulfillments$=this.fulfillmentsSubject.asObservable();getAll(){return this.http.get(this.baseUrl)}getAllPOs(){return this.http.get(`${this.baseUrl}/pos`)}getPOById(t){return this.http.get(`${this.baseUrl}/pos/${t}`)}getByPrId(t){return this.http.get(`${this.baseUrl}/pr/${t}`)}getFulfillmentHistory(t){return this.http.get(`${this.baseUrl}/pr/${t}/history`)}createPOFulfillment(t){return this.http.post(`${this.baseUrl}/convert-to-po`,t)}createStockIssueFulfillment(t){return this.http.post(`${this.baseUrl}/stock-issue`,t)}createMaterialTransferFulfillment(t){return this.http.post(`${this.baseUrl}/material-transfer`,t)}generatePONumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PO-${i}${r}${s}`}generateIssueNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`SI-${i}${r}${s}`}generateTransferNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`MT-${i}${r}${s}`}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function VN(n,t){n&1&&(o(0,"div",22),l(1,"Loading..."),a())}function LN(n,t){n&1&&(o(0,"tr")(1,"td",26),l(2,'No GRNs found. Click "New GRN" to create one.'),a()())}function jN(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td")(7,"span",27),l(8),a()(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),ee(17,"number"),a(),o(18,"td")(19,"span",27),l(20),a()(),o(21,"td")(22,"div",28)(23,"button",29),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.openModal(r))}),v(24,"i",30),a(),o(25,"button",31),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.deleteGRN(r.id))}),v(26,"i",32),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.grnNumber),c(2),g(e.receiptDate),c(2),p("ngClass",e.receiptType==="PO"?"badge-info":"badge-secondary"),c(),D(" ",e.receiptType==="PO"?"Purchase Order":"Direct"," "),c(2),g(e.supplier||"-"),c(2),g(e.warehouse||"-"),c(2),g(e.totalQty),c(2),D("$",te(17,10,e.totalValue,"1.2-2")),c(3),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function BN(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"GRN No."),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Type"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Warehouse"),a(),o(13,"th"),l(14,"Total Qty"),a(),o(15,"th"),l(16,"Total Value"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),x(22,LN,3,0,"tr",24)(23,jN,27,13,"tr",25),a()()),n&2){let e=f();c(22),p("ngIf",e.grnList.length===0),c(),p("ngForOf",e.grnList)}}function WN(n,t){if(n&1&&(o(0,"div",59),l(1),a()),n&2){let e=f(2);c(),g(e.errorMessage)}}function UN(n,t){if(n&1&&(o(0,"option",48),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.referenceNumber," - ",e.supplierName||"No Supplier")}}function GN(n,t){n&1&&(o(0,"small",62),l(1,"No Purchase Orders available for receipt"),a())}function qN(n,t){if(n&1){let e=T();o(0,"div",40)(1,"label"),l(2,"Select Purchase Order *"),a(),o(3,"select",60),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedPOId,r)||(s.selectedPOId=r),_(r)}),y("change",function(){h(e);let r=f(2);return _(r.onPOSelect())}),o(4,"option",48),l(5,"-- Select PO --"),a(),x(6,UN,2,3,"option",49),a(),x(7,GN,2,0,"small",61),a()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedPOId),c(),p("ngValue",null),c(2),p("ngForOf",e.getPOsWithItems()),c(),p("ngIf",e.getPOsWithItems().length===0)}}function HN(n,t){if(n&1){let e=T();o(0,"div",40)(1,"label"),l(2,"PO Number"),a(),o(3,"input",41),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedGRN.poNumber,r)||(s.selectedGRN.poNumber=r),_(r)}),a()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedGRN.poNumber)}}function zN(n,t){if(n&1){let e=T();o(0,"div",40)(1,"label"),l(2,"Reference Number"),a(),o(3,"input",63),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.selectedGRN.referenceNumber,r)||(s.selectedGRN.referenceNumber=r),_(r)}),a()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedGRN.referenceNumber),p("disabled",e.editMode)}}function $N(n,t){if(n&1&&(o(0,"option",48),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function QN(n,t){if(n&1&&(o(0,"option",48),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function KN(n,t){if(n&1){let e=T();o(0,"button",64),y("click",function(){h(e);let r=f(2);return _(r.addItem())}),v(1,"i",5),l(2," Add Item "),a()}}function YN(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function ZN(n,t){if(n&1&&(o(0,"option",48),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function JN(n,t){if(n&1){let e=T();o(0,"td")(1,"button",68),y("click",function(){h(e);let r=f().index,s=f(2);return _(s.removeItem(r))}),v(2,"i",32),a()()}if(n&2){let e=f(3);c(),p("disabled",e.selectedGRN.items.length===1)}}function XN(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"select",43),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemId,r)||(s.itemId=r),_(r)}),y("change",function(){let r=h(e).index,s=f(2);return _(s.onItemSelect(r))}),o(3,"option",48),l(4,"-- Select Item --"),a(),x(5,ZN,2,3,"option",49),a()(),o(6,"td")(7,"input",65),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(8,"td")(9,"input",66),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.unitPrice,r)||(s.unitPrice=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(10,"td"),v(11,"input",67),ee(12,"number"),a(),x(13,JN,3,1,"td",24),a()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),p("disabled",i.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",i.items),c(2),S("ngModel",e.quantity),p("disabled",i.editMode),c(2),S("ngModel",e.unitPrice),p("disabled",i.editMode),c(2),p("value",te(12,10,e.amount,"1.2-2")),c(2),p("ngIf",!i.editMode)}}function eR(n,t){n&1&&v(0,"td")}function tR(n,t){n&1&&(o(0,"span"),l(1,"Saving..."),a())}function nR(n,t){n&1&&(o(0,"span"),l(1,"Save GRN"),a())}function iR(n,t){if(n&1){let e=T();o(0,"button",69),y("click",function(){h(e);let r=f(2);return _(r.saveGRN())}),x(1,tR,2,0,"span",24)(2,nR,2,0,"span",24),a()}if(n&2){let e=f(2);p("disabled",e.saving),c(),p("ngIf",e.saving),c(),p("ngIf",!e.saving)}}function rR(n,t){if(n&1){let e=T();o(0,"div",33),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",34),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",35)(3,"h2"),l(4),a(),o(5,"button",36),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",37),x(8,WN,2,1,"div",38),o(9,"div",39)(10,"div",40)(11,"label"),l(12,"GRN Number"),a(),o(13,"input",41),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.grnNumber,r)||(s.selectedGRN.grnNumber=r),_(r)}),a()(),o(14,"div",40)(15,"label"),l(16,"Receipt Date *"),a(),o(17,"input",42),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.receiptDate,r)||(s.selectedGRN.receiptDate=r),_(r)}),a()()(),o(18,"div",39)(19,"div",40)(20,"label"),l(21,"Receipt Type *"),a(),o(22,"select",43),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.receiptType,r)||(s.selectedGRN.receiptType=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.onReceiptTypeChange())}),o(23,"option",44),l(24,"Direct Receipt"),a(),o(25,"option",45),l(26,"From Purchase Order"),a()()(),x(27,qN,8,4,"div",46)(28,HN,4,1,"div",46)(29,zN,4,2,"div",46),a(),o(30,"div",39)(31,"div",40)(32,"label"),l(33,"Warehouse *"),a(),o(34,"select",47),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.warehouseId,r)||(s.selectedGRN.warehouseId=r),_(r)}),o(35,"option",48),l(36,"-- Select Warehouse --"),a(),x(37,$N,2,2,"option",49),a()(),o(38,"div",40)(39,"label"),l(40,"Supplier"),a(),o(41,"select",47),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.supplierId,r)||(s.selectedGRN.supplierId=r),_(r)}),o(42,"option",48),l(43,"-- Select Supplier --"),a(),x(44,QN,2,2,"option",49),a()()(),o(45,"div",39)(46,"div",40)(47,"label"),l(48,"Remarks"),a(),o(49,"input",50),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedGRN.remarks,r)||(s.selectedGRN.remarks=r),_(r)}),a()()(),o(50,"div",51)(51,"div",52)(52,"h3"),l(53,"Line Items"),a(),x(54,KN,3,0,"button",53),a(),o(55,"table",54)(56,"thead")(57,"tr")(58,"th"),l(59,"Item *"),a(),o(60,"th"),l(61,"Quantity *"),a(),o(62,"th"),l(63,"Unit Cost *"),a(),o(64,"th"),l(65,"Amount"),a(),x(66,YN,2,0,"th",24),a()(),o(67,"tbody"),x(68,XN,14,13,"tr",25),a(),o(69,"tfoot")(70,"tr",55)(71,"td")(72,"strong"),l(73,"Totals"),a()(),o(74,"td")(75,"strong"),l(76),a()(),v(77,"td"),o(78,"td")(79,"strong"),l(80),ee(81,"number"),a()(),x(82,eR,1,0,"td",24),a()()()()(),o(83,"div",56)(84,"button",57),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(85),a(),x(86,iR,3,3,"button",58),a()()()}if(n&2){let e=f();c(4),D("",e.editMode?"View":"New"," Goods Receipt Note"),c(4),p("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedGRN.grnNumber),c(4),S("ngModel",e.selectedGRN.receiptDate),p("disabled",e.editMode),c(5),S("ngModel",e.selectedGRN.receiptType),p("disabled",e.editMode),c(5),p("ngIf",e.selectedGRN.receiptType==="PO"&&!e.editMode),c(),p("ngIf",e.selectedGRN.receiptType==="PO"&&e.editMode),c(),p("ngIf",e.selectedGRN.receiptType==="DIRECT"),c(5),S("ngModel",e.selectedGRN.warehouseId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedGRN.supplierId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.suppliers),c(5),S("ngModel",e.selectedGRN.remarks),p("disabled",e.editMode),c(5),p("ngIf",!e.editMode),c(12),p("ngIf",!e.editMode),c(2),p("ngForOf",e.selectedGRN.items),c(8),g(e.selectedGRN.totalQty),c(4),D("$",te(81,28,e.selectedGRN.totalValue,"1.2-2")),c(2),p("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),p("ngIf",!e.editMode)}}var Ju=class n{constructor(t,e,i,r,s,d,u){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.supplierService=s;this.prFulfillmentService=d;this.notificationService=u}grnList=[];showModal=!1;editMode=!1;selectedGRN=this.getEmptyGRN();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];suppliers=[];purchaseOrders=[];selectedPOId=null;ngOnInit(){this.loadGRNs(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)}),this.prFulfillmentService.getAllPOs().subscribe({next:t=>this.purchaseOrders=t,error:t=>console.error("Error loading POs",t)})}loadGRNs(){this.loading=!0,this.stockMovementService.getAllGRN().subscribe({next:t=>{this.grnList=t.map(e=>({id:e.id,grnNumber:e.grnNumber||"",receiptDate:e.receiptDate||"",receiptType:e.receiptType||"DIRECT",poNumber:e.poNumber||"",supplierId:e.supplierId,supplier:e.supplier||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading GRNs",t),this.grnList=[],this.loading=!1}})}getEmptyGRN(){return{grnNumber:"",receiptDate:new Date().toISOString().split("T")[0],receiptType:"DIRECT",poNumber:"",supplierId:void 0,supplier:"",warehouseId:void 0,warehouse:"",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",this.selectedPOId=null,t?(this.editMode=!0,this.selectedGRN=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedGRN=this.getEmptyGRN(),this.generateGRNNumber(),this.addItem()),this.showModal=!0}onReceiptTypeChange(){this.selectedGRN.receiptType==="DIRECT"&&(this.selectedPOId=null,this.selectedGRN.poNumber="",this.selectedGRN.items=[],this.addItem())}onPOSelect(){if(!this.selectedPOId)return;let t=this.purchaseOrders.find(e=>e.id===this.selectedPOId);t&&(this.selectedGRN.poNumber=t.referenceNumber,this.selectedGRN.supplierId=t.supplierId,this.errorMessage="",t.warehouseId&&(this.selectedGRN.warehouseId=t.warehouseId),this.selectedGRN.items=(t.items||[]).filter(e=>e.itemId&&e.fulfillQty&&e.fulfillQty>0).map(e=>({itemId:e.itemId,itemName:e.itemName||"",itemCode:e.itemCode||"",description:e.itemDescription||"",quantity:e.fulfillQty||0,unitPrice:e.rate||0,amount:(e.fulfillQty||0)*(e.rate||0)})),this.calculateTotals())}getPOsWithItems(){return this.purchaseOrders.filter(t=>!t.items||t.items.length===0?!1:t.items.filter(i=>i.itemId&&i.fulfillQty&&i.fulfillQty>0).length>0)}generateGRNNumber(){this.settingsService.generatePrefixId("grn").subscribe({next:t=>{this.selectedGRN.grnNumber=t},error:t=>console.error("Error generating GRN number",t)})}closeModal(){this.showModal=!1,this.selectedGRN=this.getEmptyGRN(),this.errorMessage=""}addItem(){this.selectedGRN.items.push(this.getEmptyItem())}removeItem(t){this.selectedGRN.items.length>1&&(this.selectedGRN.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedGRN.items[t].itemId);e&&(this.selectedGRN.items[t].itemName=e.name,this.selectedGRN.items[t].itemCode=e.code,this.selectedGRN.items[t].description=e.description||"",this.selectedGRN.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedGRN.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedGRN.totalQty=this.selectedGRN.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedGRN.totalValue=this.selectedGRN.items.reduce((t,e)=>t+(e.amount||0),0)}saveGRN(){this.calculateTotals();let t=this.selectedGRN.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedGRN.warehouseId){this.notificationService.error("Please select a warehouse.");return}this.saving=!0,this.errorMessage="";let e={receiptDate:this.selectedGRN.receiptDate,receiptType:this.selectedGRN.receiptType,poNumber:this.selectedGRN.poNumber,supplierId:this.selectedGRN.supplierId,warehouseId:this.selectedGRN.warehouseId,referenceNumber:this.selectedGRN.referenceNumber,remarks:this.selectedGRN.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createGRN(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Goods Receipt created successfully"),this.loadGRNs(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving GRN"),console.error("Error saving GRN",i)}})}deleteGRN(t){confirm("Are you sure you want to delete this GRN?")&&this.stockMovementService.deleteGRN(t).subscribe({next:()=>this.loadGRNs(),error:e=>console.error("Error deleting GRN",e)})}getTotalValue(){return this.grnList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.grnList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.grnList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(we),I(Tn),I(Oe),I(Ge),I(_t),I(vt),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-goods-receipt"]],standalone:!1,decls:58,vars:10,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-alt"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],["class","loading-spinner",4,"ngIf"],["class","table",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-spinner"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value","DIRECT"],["value","PO"],["class","form-group",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"items-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"totals-row"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel"],["class","text-warning",4,"ngIf"],[1,"text-warning"],["type","text","placeholder","e.g., Invoice #",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-secondary",3,"click"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","readonly","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Receipt Note (GRN)"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"GRN"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," New GRN "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),a(),o(23,"div",10)(24,"h3"),l(25),a(),o(26,"p"),l(27,"Total GRNs"),a()()(),o(28,"div",7)(29,"div",11),v(30,"i",12),a(),o(31,"div",10)(32,"h3"),l(33),a(),o(34,"p"),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",13),v(38,"i",14),a(),o(39,"div",10)(40,"h3"),l(41),a(),o(42,"p"),l(43,"Pending"),a()()(),o(44,"div",7)(45,"div",15),v(46,"i",16),a(),o(47,"div",10)(48,"h3"),l(49),ee(50,"number"),a(),o(51,"p"),l(52,"Total Value"),a()()()(),o(53,"div",17)(54,"div",18),x(55,VN,2,0,"div",19)(56,BN,24,2,"table",20),a()()(),x(57,rR,87,31,"div",21)),e&2&&(c(25),g(i.grnList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getPendingCount()),c(8),D("$",te(50,7,i.getTotalValue(),"1.2-2")),c(6),p("ngIf",i.loading),c(),p("ngIf",!i.loading),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K,De],styles:[".stock-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function oR(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),a()())}function aR(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",27),o(3,"p"),l(4,"No issues found"),a()()())}function sR(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),ee(16,"number"),a(),o(17,"td")(18,"span",28),l(19),a()(),o(20,"td")(21,"div",29)(22,"button",30),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(23,"i",31),a(),o(24,"button",32),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteIssue(r.id))}),v(25,"i",33),a()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.issueNumber),c(2),g(e.issueDate),c(2),g(e.warehouse),c(2),g(e.issueType),c(2),D("",e.items.length," items"),c(2),g(e.totalQty),c(2),g(te(16,9,e.totalValue,"1.2-2")),c(3),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function lR(n,t){if(n&1&&(o(0,"div",57),l(1),a()),n&2){let e=f(2);c(),g(e.errorMessage)}}function cR(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function dR(n,t){if(n&1&&(o(0,"option",58),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function uR(n,t){if(n&1){let e=T();o(0,"button",30),y("click",function(){h(e);let r=f(2);return _(r.addItem())}),v(1,"i",5),l(2," Add Item "),a()}}function pR(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function mR(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function fR(n,t){if(n&1){let e=T();o(0,"td")(1,"button",62),y("click",function(){h(e);let r=f().index,s=f(2);return _(s.removeItem(r))}),v(2,"i",33),a()()}if(n&2){let e=f(3);c(),p("disabled",e.selectedIssue.items.length<=1)}}function gR(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"select",59),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemId,r)||(s.itemId=r),_(r)}),y("change",function(){let r=h(e).index,s=f(2);return _(s.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),a(),x(5,mR,2,3,"option",46),a()(),o(6,"td")(7,"input",60),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(8,"td")(9,"input",61),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.unitPrice,r)||(s.unitPrice=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(10,"td"),l(11),ee(12,"number"),a(),x(13,fR,3,1,"td",22),a()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),p("disabled",i.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",i.items),c(2),S("ngModel",e.quantity),p("disabled",i.editMode),c(2),S("ngModel",e.unitPrice),p("disabled",i.editMode),c(2),g(te(12,10,e.amount,"1.2-2")),c(2),p("ngIf",!i.editMode)}}function hR(n,t){n&1&&v(0,"td")}function _R(n,t){if(n&1){let e=T();o(0,"button",63),y("click",function(){h(e);let r=f(2);return _(r.saveIssue())}),l(1),a()}if(n&2){let e=f(2);p("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Issue"," ")}}function vR(n,t){if(n&1){let e=T();o(0,"div",34),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",35),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),a(),o(5,"button",37),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",38),x(8,lR,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Issue Number"),a(),o(13,"input",42),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.issueNumber,r)||(s.selectedIssue.issueNumber=r),_(r)}),a()(),o(14,"div",41)(15,"label"),l(16,"Issue Date *"),a(),o(17,"input",43),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.issueDate,r)||(s.selectedIssue.issueDate=r),_(r)}),a()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"Warehouse *"),a(),o(22,"select",44),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.warehouseId,r)||(s.selectedIssue.warehouseId=r),_(r)}),o(23,"option",45),l(24,"Select Warehouse"),a(),x(25,cR,2,2,"option",46),a()(),o(26,"div",41)(27,"label"),l(28,"Issue Type"),a(),o(29,"select",44),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.issueType,r)||(s.selectedIssue.issueType=r),_(r)}),x(30,dR,2,2,"option",47),a()()(),o(31,"div",40)(32,"div",41)(33,"label"),l(34,"Reference Number"),a(),o(35,"input",48),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.referenceNumber,r)||(s.selectedIssue.referenceNumber=r),_(r)}),a()(),o(36,"div",41)(37,"label"),l(38,"Remarks"),a(),o(39,"input",48),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedIssue.remarks,r)||(s.selectedIssue.remarks=r),_(r)}),a()()(),o(40,"div",49)(41,"div",50)(42,"h3"),l(43,"Items"),a(),x(44,uR,3,0,"button",51),a(),o(45,"table",52)(46,"thead")(47,"tr")(48,"th"),l(49,"Item"),a(),o(50,"th"),l(51,"Quantity"),a(),o(52,"th"),l(53,"Unit Price"),a(),o(54,"th"),l(55,"Amount"),a(),x(56,pR,2,0,"th",22),a()(),o(57,"tbody"),x(58,gR,14,13,"tr",23),a(),o(59,"tfoot")(60,"tr")(61,"td",53)(62,"strong"),l(63,"Totals:"),a()(),o(64,"td")(65,"strong"),l(66),a()(),o(67,"td")(68,"strong"),l(69),ee(70,"number"),a()(),x(71,hR,1,0,"td",22),a()()()()(),o(72,"div",54)(73,"button",55),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(74),a(),x(75,_R,2,2,"button",56),a()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Issue":"New Goods Issue"),c(4),p("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedIssue.issueNumber),c(4),S("ngModel",e.selectedIssue.issueDate),p("disabled",e.editMode),c(5),S("ngModel",e.selectedIssue.warehouseId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedIssue.issueType),p("disabled",e.editMode),c(),p("ngForOf",e.issueTypes),c(5),S("ngModel",e.selectedIssue.referenceNumber),p("disabled",e.editMode),c(4),S("ngModel",e.selectedIssue.remarks),p("disabled",e.editMode),c(5),p("ngIf",!e.editMode),c(12),p("ngIf",!e.editMode),c(2),p("ngForOf",e.selectedIssue.items),c(8),g(e.selectedIssue.totalQty),c(3),g(te(70,24,e.selectedIssue.totalValue,"1.2-2")),c(2),p("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),p("ngIf",!e.editMode)}}var Xu=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}issueList=[];showModal=!1;editMode=!1;selectedIssue=this.getEmptyIssue();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];issueTypes=["Internal Use","Sales","Return","Damaged","Other"];ngOnInit(){this.loadIssues(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadIssues(){this.loading=!0,this.stockMovementService.getAllIssues().subscribe({next:t=>{this.issueList=t.map(e=>({id:e.id,issueNumber:e.issueNumber||"",issueDate:e.issueDate||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",issueType:e.issueType||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading issues",t),this.issueList=[],this.loading=!1}})}getEmptyIssue(){return{issueNumber:"",issueDate:new Date().toISOString().split("T")[0],warehouseId:void 0,warehouse:"",issueType:"Internal Use",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedIssue=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedIssue=this.getEmptyIssue(),this.generateIssueNumber(),this.addItem()),this.showModal=!0}generateIssueNumber(){this.settingsService.generatePrefixId("issue").subscribe({next:t=>{this.selectedIssue.issueNumber=t},error:t=>console.error("Error generating issue number",t)})}closeModal(){this.showModal=!1,this.selectedIssue=this.getEmptyIssue(),this.errorMessage=""}addItem(){this.selectedIssue.items.push(this.getEmptyItem())}removeItem(t){this.selectedIssue.items.length>1&&(this.selectedIssue.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedIssue.items[t].itemId);e&&(this.selectedIssue.items[t].itemName=e.name,this.selectedIssue.items[t].itemCode=e.code,this.selectedIssue.items[t].description=e.description||"",this.selectedIssue.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedIssue.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedIssue.totalQty=this.selectedIssue.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedIssue.totalValue=this.selectedIssue.items.reduce((t,e)=>t+(e.amount||0),0)}saveIssue(){this.calculateTotals();let t=this.selectedIssue.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedIssue.warehouseId){this.notificationService.error("Please select a warehouse.");return}this.saving=!0,this.errorMessage="";let e={issueDate:this.selectedIssue.issueDate,warehouseId:this.selectedIssue.warehouseId,issueType:this.selectedIssue.issueType,referenceNumber:this.selectedIssue.referenceNumber,remarks:this.selectedIssue.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createIssue(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Goods Issue created successfully"),this.loadIssues(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving issue"),console.error("Error saving issue",i)}})}deleteIssue(t){confirm("Are you sure you want to delete this issue?")&&this.stockMovementService.deleteIssue(t).subscribe({next:()=>this.loadIssues(),error:e=>console.error("Error deleting issue",e)})}getTotalValue(){return this.issueList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.issueList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.issueList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(we),I(Tn),I(Oe),I(Ge),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-goods-issue"]],standalone:!1,decls:81,vars:11,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-file-export"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"stat-icon","purple"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"text-center"],["colspan","9",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],["colspan","2"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Issue"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Goods Issue"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," New Issue "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Issues"),a()()(),o(28,"div",7)(29,"div",13),v(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",15),v(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"Pending"),a()()(),o(44,"div",7)(45,"div",17),v(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),ee(50,"number"),a(),o(51,"span",12),l(52,"Total Value"),a()()()(),o(53,"div",19)(54,"div",20)(55,"table",21)(56,"thead")(57,"tr")(58,"th"),l(59,"Issue No."),a(),o(60,"th"),l(61,"Date"),a(),o(62,"th"),l(63,"Warehouse"),a(),o(64,"th"),l(65,"Type"),a(),o(66,"th"),l(67,"Items"),a(),o(68,"th"),l(69,"Total Qty"),a(),o(70,"th"),l(71,"Total Value"),a(),o(72,"th"),l(73,"Status"),a(),o(74,"th"),l(75,"Actions"),a()()(),o(76,"tbody"),x(77,oR,3,0,"tr",22)(78,aR,5,0,"tr",22)(79,sR,26,12,"tr",23),a()()()()(),x(80,vR,76,27,"div",24)),e&2&&(c(25),g(i.issueList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getPendingCount()),c(8),g(te(50,8,i.getTotalValue(),"1.2-2")),c(28),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.issueList.length===0),c(),p("ngForOf",i.issueList),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K,De],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function yR(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),a()())}function bR(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",27),o(3,"p"),l(4,"No transfers found"),a()()())}function CR(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td")(15,"span",28),l(16),a()(),o(17,"td")(18,"div",29)(19,"button",30),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(20,"i",31),a(),o(21,"button",32),y("click",function(){let r=h(e).$implicit,s=f();return _(s.deleteTransfer(r.id))}),v(22,"i",33),a()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.transferNumber),c(2),g(e.transferDate),c(2),g(e.fromWarehouse),c(2),g(e.toWarehouse),c(2),D("",e.items.length," items"),c(2),g(e.totalQty),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function xR(n,t){if(n&1&&(o(0,"div",55),l(1),a()),n&2){let e=f(2);c(),g(e.errorMessage)}}function SR(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function MR(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function ER(n,t){if(n&1){let e=T();o(0,"button",30),y("click",function(){h(e);let r=f(2);return _(r.addItem())}),v(1,"i",5),l(2," Add Item "),a()}}function wR(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function IR(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function PR(n,t){if(n&1){let e=T();o(0,"td")(1,"button",58),y("click",function(){h(e);let r=f().index,s=f(2);return _(s.removeItem(r))}),v(2,"i",33),a()()}if(n&2){let e=f(3);c(),p("disabled",e.selectedTransfer.items.length<=1)}}function DR(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"select",56),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemId,r)||(s.itemId=r),_(r)}),y("change",function(){let r=h(e).index,s=f(2);return _(s.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),a(),x(5,IR,2,3,"option",46),a()(),o(6,"td")(7,"input",57),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),y("ngModelChange",function(){h(e);let r=f(2);return _(r.calculateTotals())}),a()(),x(8,PR,3,1,"td",22),a()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),p("disabled",i.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",i.items),c(2),S("ngModel",e.quantity),p("disabled",i.editMode),c(),p("ngIf",!i.editMode)}}function TR(n,t){n&1&&v(0,"td")}function OR(n,t){if(n&1){let e=T();o(0,"button",59),y("click",function(){h(e);let r=f(2);return _(r.saveTransfer())}),l(1),a()}if(n&2){let e=f(2);p("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Transfer"," ")}}function kR(n,t){if(n&1){let e=T();o(0,"div",34),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",35),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),a(),o(5,"button",37),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",38),x(8,xR,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Transfer Number"),a(),o(13,"input",42),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTransfer.transferNumber,r)||(s.selectedTransfer.transferNumber=r),_(r)}),a()(),o(14,"div",41)(15,"label"),l(16,"Transfer Date *"),a(),o(17,"input",43),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTransfer.transferDate,r)||(s.selectedTransfer.transferDate=r),_(r)}),a()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"From Warehouse *"),a(),o(22,"select",44),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTransfer.fromWarehouseId,r)||(s.selectedTransfer.fromWarehouseId=r),_(r)}),o(23,"option",45),l(24,"Select Source Warehouse"),a(),x(25,SR,2,2,"option",46),a()(),o(26,"div",41)(27,"label"),l(28,"To Warehouse *"),a(),o(29,"select",44),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTransfer.toWarehouseId,r)||(s.selectedTransfer.toWarehouseId=r),_(r)}),o(30,"option",45),l(31,"Select Destination Warehouse"),a(),x(32,MR,2,2,"option",46),a()()(),o(33,"div",41)(34,"label"),l(35,"Remarks"),a(),o(36,"textarea",47),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedTransfer.remarks,r)||(s.selectedTransfer.remarks=r),_(r)}),a()(),o(37,"div",48)(38,"div",49)(39,"h3"),l(40,"Items to Transfer"),a(),x(41,ER,3,0,"button",50),a(),o(42,"table",51)(43,"thead")(44,"tr")(45,"th"),l(46,"Item"),a(),o(47,"th"),l(48,"Quantity"),a(),x(49,wR,2,0,"th",22),a()(),o(50,"tbody"),x(51,DR,9,7,"tr",23),a(),o(52,"tfoot")(53,"tr")(54,"td")(55,"strong"),l(56,"Total Quantity:"),a()(),o(57,"td")(58,"strong"),l(59),a()(),x(60,TR,1,0,"td",22),a()()()()(),o(61,"div",52)(62,"button",53),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(63),a(),x(64,OR,2,2,"button",54),a()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Transfer":"New Stock Transfer"),c(4),p("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedTransfer.transferNumber),c(4),S("ngModel",e.selectedTransfer.transferDate),p("disabled",e.editMode),c(5),S("ngModel",e.selectedTransfer.fromWarehouseId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedTransfer.toWarehouseId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedTransfer.remarks),p("disabled",e.editMode),c(5),p("ngIf",!e.editMode),c(8),p("ngIf",!e.editMode),c(2),p("ngForOf",e.selectedTransfer.items),c(8),g(e.selectedTransfer.totalQty),c(),p("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),p("ngIf",!e.editMode)}}var ep=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}transferList=[];showModal=!1;editMode=!1;selectedTransfer=this.getEmptyTransfer();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];ngOnInit(){this.loadTransfers(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadTransfers(){this.loading=!0,this.stockMovementService.getAllTransfers().subscribe({next:t=>{this.transferList=t.map(e=>({id:e.id,transferNumber:e.transferNumber||"",transferDate:e.transferDate||"",fromWarehouseId:e.fromWarehouseId,fromWarehouse:e.fromWarehouse||"",toWarehouseId:e.toWarehouseId,toWarehouse:e.toWarehouse||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,fromBinId:i.fromBinId,toBinId:i.toBinId}))||[]})),this.loading=!1},error:t=>{console.error("Error loading transfers",t),this.transferList=[],this.loading=!1}})}getEmptyTransfer(){return{transferNumber:"",transferDate:new Date().toISOString().split("T")[0],fromWarehouseId:void 0,fromWarehouse:"",toWarehouseId:void 0,toWarehouse:"",items:[],totalQty:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedTransfer=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedTransfer=this.getEmptyTransfer(),this.generateTransferNumber(),this.addItem()),this.showModal=!0}generateTransferNumber(){this.settingsService.generatePrefixId("transfer").subscribe({next:t=>{this.selectedTransfer.transferNumber=t},error:t=>console.error("Error generating transfer number",t)})}closeModal(){this.showModal=!1,this.selectedTransfer=this.getEmptyTransfer(),this.errorMessage=""}addItem(){this.selectedTransfer.items.push(this.getEmptyItem())}removeItem(t){this.selectedTransfer.items.length>1&&(this.selectedTransfer.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedTransfer.items[t].itemId);e&&(this.selectedTransfer.items[t].itemName=e.name,this.selectedTransfer.items[t].itemCode=e.code,this.selectedTransfer.items[t].description=e.description||"")}calculateTotals(){this.selectedTransfer.totalQty=this.selectedTransfer.items.reduce((t,e)=>t+(e.quantity||0),0)}saveTransfer(){this.calculateTotals();let t=this.selectedTransfer.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedTransfer.fromWarehouseId){this.notificationService.error("Please select a source warehouse.");return}if(!this.selectedTransfer.toWarehouseId){this.notificationService.error("Please select a destination warehouse.");return}if(this.selectedTransfer.fromWarehouseId===this.selectedTransfer.toWarehouseId){this.notificationService.error("Source and destination warehouse cannot be the same.");return}this.saving=!0,this.errorMessage="";let e={transferDate:this.selectedTransfer.transferDate,fromWarehouseId:this.selectedTransfer.fromWarehouseId,toWarehouseId:this.selectedTransfer.toWarehouseId,remarks:this.selectedTransfer.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,fromBinId:i.fromBinId,toBinId:i.toBinId}))};this.stockMovementService.createTransfer(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Transfer created successfully"),this.loadTransfers(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving transfer"),console.error("Error saving transfer",i)}})}deleteTransfer(t){confirm("Are you sure you want to delete this transfer?")&&this.stockMovementService.deleteTransfer(t).subscribe({next:()=>this.loadTransfers(),error:e=>console.error("Error deleting transfer",e)})}getCompletedCount(){return this.transferList.filter(t=>t.status==="Completed").length}getInTransitCount(){return this.transferList.filter(t=>t.status==="In Transit").length}getPendingCount(){return this.transferList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success","In Transit":"badge-info",Pending:"badge-warning",Draft:"badge-secondary"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(we),I(Tn),I(Oe),I(Ge),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-stock-transfer"]],standalone:!1,decls:78,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-exchange-alt"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","cyan"],[1,"fas","fa-truck"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","8",1,"text-center"],["colspan","8",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Transfer"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Transfer"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," New Transfer "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Transfers"),a()()(),o(28,"div",7)(29,"div",13),v(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",15),v(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"In Transit"),a()()(),o(44,"div",7)(45,"div",17),v(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),a(),o(50,"span",12),l(51,"Pending"),a()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Transfer No."),a(),o(59,"th"),l(60,"Date"),a(),o(61,"th"),l(62,"From Warehouse"),a(),o(63,"th"),l(64,"To Warehouse"),a(),o(65,"th"),l(66,"Items"),a(),o(67,"th"),l(68,"Total Qty"),a(),o(69,"th"),l(70,"Status"),a(),o(71,"th"),l(72,"Actions"),a()()(),o(73,"tbody"),x(74,yR,3,0,"tr",22)(75,bR,5,0,"tr",22)(76,CR,23,8,"tr",23),a()()()()(),x(77,kR,65,22,"div",24)),e&2&&(c(25),g(i.transferList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getInTransitCount()),c(8),g(i.getPendingCount()),c(25),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.transferList.length===0),c(),p("ngForOf",i.transferList),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function NR(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),a()())}function RR(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",27),o(3,"p"),l(4,"No adjustments found"),a()()())}function AR(n,t){if(n&1){let e=T();o(0,"button",35),y("click",function(){h(e);let r=f().$implicit,s=f();return _(s.approveAdjustment(r.id))}),v(1,"i",36),a()}}function FR(n,t){if(n&1){let e=T();o(0,"button",37),y("click",function(){h(e);let r=f().$implicit,s=f();return _(s.rejectAdjustment(r.id))}),v(1,"i",38),a()}}function VR(n,t){if(n&1){let e=T();o(0,"button",39),y("click",function(){h(e);let r=f().$implicit,s=f();return _(s.deleteAdjustment(r.id))}),v(1,"i",40),a()}}function LR(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",28),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td")(20,"span",28),l(21),a()(),o(22,"td")(23,"div",29)(24,"button",30),y("click",function(){let r=h(e).$implicit,s=f();return _(s.openModal(r))}),v(25,"i",31),a(),x(26,AR,2,0,"button",32)(27,FR,2,0,"button",33)(28,VR,2,0,"button",34),a()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.adjustmentNumber),c(2),g(e.adjustmentDate),c(2),g(e.itemName),c(2),p("ngClass",i.getTypeClass(e.adjustmentType)),c(),g(e.adjustmentType),c(2),g(e.quantityBefore),c(2),g(e.quantityAdjusted),c(2),g(e.quantityAfter),c(2),g(e.reason),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(5),p("ngIf",e.status==="Pending"),c(),p("ngIf",e.status==="Pending"),c(),p("ngIf",e.status==="Pending")}}function jR(n,t){if(n&1&&(o(0,"div",63),l(1),a()),n&2){let e=f(2);c(),g(e.errorMessage)}}function BR(n,t){if(n&1&&(o(0,"option",52),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),le("",e.code," - ",e.name)}}function WR(n,t){if(n&1&&(o(0,"option",52),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function UR(n,t){if(n&1&&(o(0,"option",64),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function GR(n,t){if(n&1&&(o(0,"option",64),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function qR(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(3);c(),le(" Stock will increase from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function HR(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=f(3);c(),le(" Stock will decrease from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function zR(n,t){if(n&1&&(o(0,"div",65),v(1,"i",66),x(2,qR,2,2,"span",22)(3,HR,2,2,"span",22),a()),n&2){let e=f(2);c(2),p("ngIf",e.selectedAdjustment.adjustmentType==="INCREASE"),c(),p("ngIf",e.selectedAdjustment.adjustmentType==="DECREASE")}}function $R(n,t){if(n&1){let e=T();o(0,"button",67),y("click",function(){h(e);let r=f(2);return _(r.saveAdjustment())}),l(1),a()}if(n&2){let e=f(2);p("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Adjustment"," ")}}function QR(n,t){if(n&1){let e=T();o(0,"div",41),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",42),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",43)(3,"h2"),l(4),a(),o(5,"button",44),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(6,"\xD7"),a()(),o(7,"div",45),x(8,jR,2,1,"div",46),o(9,"div",47)(10,"div",48)(11,"label"),l(12,"Adjustment Number"),a(),o(13,"input",49),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.adjustmentNumber,r)||(s.selectedAdjustment.adjustmentNumber=r),_(r)}),a()(),o(14,"div",48)(15,"label"),l(16,"Date *"),a(),o(17,"input",50),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.adjustmentDate,r)||(s.selectedAdjustment.adjustmentDate=r),_(r)}),a()()(),o(18,"div",47)(19,"div",48)(20,"label"),l(21,"Item *"),a(),o(22,"select",51),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.itemId,r)||(s.selectedAdjustment.itemId=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.onItemSelect())}),o(23,"option",52),l(24,"Select Item"),a(),x(25,BR,2,3,"option",53),a()(),o(26,"div",48)(27,"label"),l(28,"Warehouse *"),a(),o(29,"select",54),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.warehouseId,r)||(s.selectedAdjustment.warehouseId=r),_(r)}),o(30,"option",52),l(31,"Select Warehouse"),a(),x(32,WR,2,2,"option",53),a()()(),o(33,"div",47)(34,"div",48)(35,"label"),l(36,"Adjustment Type *"),a(),o(37,"select",51),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.adjustmentType,r)||(s.selectedAdjustment.adjustmentType=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.calculateQuantityAfter())}),x(38,UR,2,2,"option",55),a()(),o(39,"div",48)(40,"label"),l(41,"Reason *"),a(),o(42,"select",54),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.reason,r)||(s.selectedAdjustment.reason=r),_(r)}),x(43,GR,2,2,"option",55),a()()(),o(44,"div",47)(45,"div",48)(46,"label"),l(47,"Current Stock"),a(),o(48,"input",56),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.quantityBefore,r)||(s.selectedAdjustment.quantityBefore=r),_(r)}),a()(),o(49,"div",48)(50,"label"),l(51,"Quantity to Adjust *"),a(),o(52,"input",57),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.quantityAdjusted,r)||(s.selectedAdjustment.quantityAdjusted=r),_(r)}),y("ngModelChange",function(){h(e);let r=f();return _(r.calculateQuantityAfter())}),a()(),o(53,"div",48)(54,"label"),l(55,"New Stock"),a(),o(56,"input",56),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.quantityAfter,r)||(s.selectedAdjustment.quantityAfter=r),_(r)}),a()()(),o(57,"div",48)(58,"label"),l(59,"Remarks"),a(),o(60,"textarea",58),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedAdjustment.remarks,r)||(s.selectedAdjustment.remarks=r),_(r)}),a()(),x(61,zR,4,2,"div",59),a(),o(62,"div",60)(63,"button",61),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(64),a(),x(65,$R,2,2,"button",62),a()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Adjustment":"New Stock Adjustment"),c(4),p("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedAdjustment.adjustmentNumber),c(4),S("ngModel",e.selectedAdjustment.adjustmentDate),p("disabled",e.editMode),c(5),S("ngModel",e.selectedAdjustment.itemId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.items),c(4),S("ngModel",e.selectedAdjustment.warehouseId),p("disabled",e.editMode),c(),p("ngValue",void 0),c(2),p("ngForOf",e.warehouses),c(5),S("ngModel",e.selectedAdjustment.adjustmentType),p("disabled",e.editMode),c(),p("ngForOf",e.adjustmentTypes),c(4),S("ngModel",e.selectedAdjustment.reason),p("disabled",e.editMode),c(),p("ngForOf",e.reasons),c(5),S("ngModel",e.selectedAdjustment.quantityBefore),c(4),S("ngModel",e.selectedAdjustment.quantityAdjusted),p("disabled",e.editMode),c(4),S("ngModel",e.selectedAdjustment.quantityAfter),c(4),S("ngModel",e.selectedAdjustment.remarks),p("disabled",e.editMode),c(),p("ngIf",e.selectedAdjustment.itemId&&!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),p("ngIf",!e.editMode)}}var tp=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}adjustments=[];showModal=!1;editMode=!1;selectedAdjustment=this.getEmptyAdjustment();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];adjustmentTypes=["INCREASE","DECREASE"];reasons=["Inventory Count","Damaged Goods","Expired Items","Theft/Loss","Found Items","Return to Stock","Quality Issue","Administrative Correction","Other"];ngOnInit(){this.loadAdjustments(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadAdjustments(){this.loading=!0,this.stockMovementService.getAllAdjustments().subscribe({next:t=>{this.adjustments=t.map(e=>({id:e.id,adjustmentNumber:e.adjustmentNumber||"",adjustmentDate:e.adjustmentDate||"",adjustmentType:e.adjustmentType||"",itemId:e.itemId,itemName:e.item||"",itemCode:e.itemCode||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",binId:e.binId,bin:e.bin||"",quantityBefore:e.quantityBefore||0,quantityAdjusted:e.quantityAdjusted||0,quantityAfter:e.quantityAfter||0,valueDifference:e.valueDifference||0,reason:e.reason||"",status:e.status||"Pending",remarks:e.remarks||""})),this.loading=!1},error:t=>{console.error("Error loading adjustments",t),this.adjustments=[],this.loading=!1}})}getEmptyAdjustment(){return{adjustmentNumber:"",adjustmentDate:new Date().toISOString().split("T")[0],adjustmentType:"INCREASE",itemId:void 0,itemName:"",warehouseId:void 0,warehouse:"",quantityBefore:0,quantityAdjusted:0,quantityAfter:0,reason:"Inventory Count",status:"Pending",remarks:""}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedAdjustment=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.generateAdjustmentNumber()),this.showModal=!0}generateAdjustmentNumber(){this.settingsService.generatePrefixId("adjustment").subscribe({next:t=>{this.selectedAdjustment.adjustmentNumber=t},error:t=>console.error("Error generating adjustment number",t)})}closeModal(){this.showModal=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.errorMessage=""}onItemSelect(){let t=this.items.find(e=>e.id===this.selectedAdjustment.itemId);t&&(this.selectedAdjustment.itemName=t.name,this.selectedAdjustment.itemCode=t.code,this.selectedAdjustment.quantityBefore=t.currentStock||0,this.calculateQuantityAfter())}calculateQuantityAfter(){let t=this.selectedAdjustment.quantityBefore||0,e=this.selectedAdjustment.quantityAdjusted||0;this.selectedAdjustment.adjustmentType==="INCREASE"?this.selectedAdjustment.quantityAfter=t+e:this.selectedAdjustment.quantityAfter=t-e}saveAdjustment(){if(!this.selectedAdjustment.itemId){this.notificationService.error("Please select an item.");return}if(!this.selectedAdjustment.warehouseId){this.notificationService.error("Please select a warehouse.");return}if(!this.selectedAdjustment.quantityAdjusted||this.selectedAdjustment.quantityAdjusted<=0){this.notificationService.error("Please enter a valid quantity to adjust.");return}if(!this.selectedAdjustment.reason){this.notificationService.error("Please select a reason for adjustment.");return}this.saving=!0,this.errorMessage="";let t={adjustmentDate:this.selectedAdjustment.adjustmentDate,adjustmentType:this.selectedAdjustment.adjustmentType,itemId:this.selectedAdjustment.itemId,warehouseId:this.selectedAdjustment.warehouseId,binId:this.selectedAdjustment.binId,quantityAdjusted:this.selectedAdjustment.quantityAdjusted,reason:this.selectedAdjustment.reason,remarks:this.selectedAdjustment.remarks};this.stockMovementService.createAdjustment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Adjustment created successfully"),this.loadAdjustments(),this.closeModal()},error:e=>{this.saving=!1,this.notificationService.error(e.error?.error||"Error saving adjustment"),console.error("Error saving adjustment",e)}})}deleteAdjustment(t){confirm("Are you sure you want to delete this adjustment?")&&this.stockMovementService.deleteAdjustment(t).subscribe({next:()=>this.loadAdjustments(),error:e=>console.error("Error deleting adjustment",e)})}approveAdjustment(t){confirm("Are you sure you want to approve this adjustment? This will update the stock levels.")&&this.stockMovementService.approveAdjustment(t).subscribe({next:()=>{this.notificationService.success("Adjustment approved successfully"),this.loadAdjustments()},error:e=>{console.error("Error approving adjustment",e),this.notificationService.error(e.error?.error||"Error approving adjustment")}})}rejectAdjustment(t){confirm("Are you sure you want to reject this adjustment?")&&this.stockMovementService.rejectAdjustment(t).subscribe({next:()=>{this.notificationService.success("Adjustment rejected"),this.loadAdjustments()},error:e=>{console.error("Error rejecting adjustment",e),this.notificationService.error(e.error?.error||"Error rejecting adjustment")}})}getIncreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="INCREASE").length}getDecreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="DECREASE").length}getPendingCount(){return this.adjustments.filter(t=>t.status==="Pending").length}getApprovedCount(){return this.adjustments.filter(t=>t.status==="Approved"||t.status==="Completed").length}getStatusClass(t){return{Approved:"badge-success",Completed:"badge-success",Pending:"badge-warning",Rejected:"badge-danger",Draft:"badge-info"}[t]||"badge-info"}getTypeClass(t){return t==="INCREASE"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(we),I(Tn),I(Oe),I(Ge),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-stock-adjustments"]],standalone:!1,decls:82,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-sliders-h"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-arrow-up"],[1,"stat-icon","red"],[1,"fas","fa-arrow-down"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","10",1,"text-center"],["colspan","10",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-success","title","Approve",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning","title","Reject",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Delete",3,"click",4,"ngIf"],["title","Approve",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-times"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["type","number","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","info-box",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"info-box"],[1,"fas","fa-info-circle"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Adjustments"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Adjustments"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," New Adjustment "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),v(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Adjustments"),a()()(),o(28,"div",7)(29,"div",13),v(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Increases"),a()()(),o(36,"div",7)(37,"div",15),v(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"Decreases"),a()()(),o(44,"div",7)(45,"div",17),v(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),a(),o(50,"span",12),l(51,"Pending Approval"),a()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Adjustment No."),a(),o(59,"th"),l(60,"Date"),a(),o(61,"th"),l(62,"Item"),a(),o(63,"th"),l(64,"Type"),a(),o(65,"th"),l(66,"Before"),a(),o(67,"th"),l(68,"Adjusted"),a(),o(69,"th"),l(70,"After"),a(),o(71,"th"),l(72,"Reason"),a(),o(73,"th"),l(74,"Status"),a(),o(75,"th"),l(76,"Actions"),a()()(),o(77,"tbody"),x(78,NR,3,0,"tr",22)(79,RR,5,0,"tr",22)(80,LR,29,14,"tr",23),a()()()()(),x(81,QR,66,28,"div",24)),e&2&&(c(25),g(i.adjustments.length),c(8),g(i.getIncreaseCount()),c(8),g(i.getDecreaseCount()),c(8),g(i.getPendingCount()),c(29),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.adjustments.length===0),c(),p("ngForOf",i.adjustments),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,je,G,K],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var Ne=class n{constructor(){}exportToCSV(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),s=[r.join(","),...t.map(d=>r.map(u=>{let m=d[u],b=m==null?"":String(m);return b.includes(",")||b.includes('"')||b.includes(`
`)?`"${b.replace(/"/g,'""')}"`:b}).join(","))].join(`
`);this.downloadFile(s,`${e}.csv`,"text/csv")}exportToExcel(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),s='<table border="1">';s+="<tr>"+r.map(u=>`<th style="background:#008080;color:white;padding:8px">${this.formatHeader(u)}</th>`).join("")+"</tr>",t.forEach(u=>{s+="<tr>"+r.map(m=>{let b=u[m];return`<td style="padding:5px">${b??""}</td>`}).join("")+"</tr>"}),s+="</table>";let d=`
      <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head><meta charset="UTF-8"></head>
      <body>${s}</body></html>
    `;this.downloadFile(d,`${e}.xls`,"application/vnd.ms-excel")}exportToPDF(t,e,i,r){if(!t||t.length===0){alert("No data to export");return}let s=r||Object.keys(t[0]),d=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>${i}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #008080; text-align: center; margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #008080; color: white; padding: 10px; text-align: left; }
          td { padding: 8px; border-bottom: 1px solid #ddd; }
          tr:hover { background-color: #f5f5f5; }
          .report-date { text-align: right; color: #666; margin-bottom: 10px; }
        </style>
      </head>
      <body>
        <h1>${i}</h1>
        <div class="report-date">Generated: ${new Date().toLocaleString()}</div>
        <table>
          <thead>
            <tr>${s.map(m=>`<th>${this.formatHeader(m)}</th>`).join("")}</tr>
          </thead>
          <tbody>
            ${t.map(m=>"<tr>"+s.map(b=>{let C=m[b];return`<td>${C??""}</td>`}).join("")+"</tr>").join("")}
          </tbody>
        </table>
      </body>
      </html>
    `,u=window.open("","_blank");u&&(u.document.write(d),u.document.close(),u.focus(),setTimeout(()=>{u.print()},500))}formatHeader(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}downloadFile(t,e,i){let r=new Blob([t],{type:i}),s=window.URL.createObjectURL(r),d=document.createElement("a");d.href=s,d.download=e,d.click(),window.URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function KR(n,t){if(n&1&&(o(0,"option",26),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function YR(n,t){if(n&1&&(o(0,"option",26),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function ZR(n,t){if(n&1&&(o(0,"option",26),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function JR(n,t){if(n&1&&(o(0,"div",11)(1,"div",27)(2,"div",28)(3,"span",29),l(4,"Total Opening:"),a(),o(5,"span",30),l(6),a()(),o(7,"div",28)(8,"span",29),l(9,"Total In:"),a(),o(10,"span",31),l(11),a()(),o(12,"div",28)(13,"span",29),l(14,"Total Out:"),a(),o(15,"span",32),l(16),a()(),o(17,"div",28)(18,"span",29),l(19,"Total Closing:"),a(),o(20,"span",30),l(21),a()()()()),n&2){let e=f();c(6),g(e.totalOpening),c(5),g(e.totalIn),c(5),g(e.totalOut),c(5),g(e.totalClosing)}}function XR(n,t){n&1&&(o(0,"tr")(1,"td",33),v(2,"i",34),o(3,"p"),l(4,"Generate report to view data"),a()()())}function eA(n,t){n&1&&(o(0,"tr")(1,"td",33),v(2,"i",35),o(3,"p"),l(4,"Loading..."),a()()())}function tA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",23),l(12),a(),o(13,"td",36),l(14),a(),o(15,"td",37),l(16),a(),o(17,"td",23),l(18),a(),o(19,"td",23),l(20),ee(21,"number"),a(),o(22,"td",23),l(23),ee(24,"number"),a()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.supplier),c(2),g(e.unit),c(2),g(e.opening),c(2),g(e.stockIn),c(2),g(e.stockOut),c(2),g(e.closing),c(2),g(te(21,11,e.unitCost,"1.2-2")),c(3),g(te(24,14,e.value,"1.2-2"))}}var np=class n{constructor(t,e,i,r,s,d){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.supplierService=r;this.ledgerService=s;this.exportService=d}reportData=[];items=[];groups=[];warehouses=[];suppliers=[];selectedWarehouse="";selectedGroup="";selectedSupplier="";fromDate="";toDate="";loading=!1;totalOpening=0;totalIn=0;totalOut=0;totalClosing=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}generateReport(){this.loading=!0,fr({items:this.itemService.getAll(),ledger:this.ledgerService.getAll({warehouseId:this.selectedWarehouse?parseInt(this.selectedWarehouse):void 0,startDate:this.fromDate||void 0,endDate:this.toDate||void 0})}).subscribe({next:({items:t,ledger:e})=>{let i=t;this.selectedGroup&&(i=i.filter(s=>s.group?.name===this.selectedGroup)),this.selectedSupplier&&(i=i.filter(s=>s.supplier?.name===this.selectedSupplier));let r=new Map;e.forEach(s=>{let d=s.item?.id;if(d){r.has(d)||r.set(d,{stockIn:0,stockOut:0});let u=r.get(d);u.stockIn+=s.quantityIn||0,u.stockOut+=s.quantityOut||0}}),this.reportData=i.map(s=>{let d=r.get(s.id)||{stockIn:0,stockOut:0},u=s.currentStock||0,m=u-d.stockIn+d.stockOut;return{code:s.code,name:s.name,group:s.group?.name||"",unit:s.unitOfMeasure?.name||"",supplier:s.supplier?.name||"",opening:Math.max(0,m),stockIn:d.stockIn,stockOut:d.stockOut,closing:u,unitCost:s.unitCost||0,value:u*(s.unitCost||0)}}),this.calculateTotals(),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}calculateTotals(){this.totalOpening=this.reportData.reduce((t,e)=>t+e.opening,0),this.totalIn=this.reportData.reduce((t,e)=>t+e.stockIn,0),this.totalOut=this.reportData.reduce((t,e)=>t+e.stockOut,0),this.totalClosing=this.reportData.reduce((t,e)=>t+e.closing,0)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-summary-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-summary-report","Stock Summary Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-summary-report")}static \u0275fac=function(e){return new(e||n)(I(Oe),I(an),I(Ge),I(_t),I(mi),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-stock-summary-report"]],standalone:!1,decls:92,vars:17,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","11",1,"empty-state"],[1,"fas","fa-chart-bar"],[1,"fas","fa-spinner","fa-spin"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Summary Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Stock Summary"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(32,"option",15),l(33,"All Groups"),a(),x(34,KR,2,2,"option",16),a()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),a(),o(38,"select",14),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(39,"option",15),l(40,"All Warehouses"),a(),x(41,YR,2,2,"option",16),a()(),o(42,"div",13)(43,"label"),l(44,"Supplier"),a(),o(45,"select",14),M("ngModelChange",function(s){return E(i.selectedSupplier,s)||(i.selectedSupplier=s),s}),o(46,"option",15),l(47,"All Suppliers"),a(),x(48,ZR,2,2,"option",16),a()(),o(49,"div",13)(50,"label"),l(51,"From Date"),a(),o(52,"input",17),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(53,"div",13)(54,"label"),l(55,"To Date"),a(),o(56,"input",17),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(57,"button",18),y("click",function(){return i.generateReport()}),v(58,"i",19),l(59),a()()(),x(60,JR,22,4,"div",20),o(61,"div",11)(62,"div",21)(63,"table",22)(64,"thead")(65,"tr")(66,"th"),l(67,"Item Code"),a(),o(68,"th"),l(69,"Item Name"),a(),o(70,"th"),l(71,"Group"),a(),o(72,"th"),l(73,"Supplier"),a(),o(74,"th"),l(75,"Unit"),a(),o(76,"th",23),l(77,"Opening"),a(),o(78,"th",23),l(79,"In"),a(),o(80,"th",23),l(81,"Out"),a(),o(82,"th",23),l(83,"Closing"),a(),o(84,"th",23),l(85,"Unit Cost"),a(),o(86,"th",23),l(87,"Value"),a()()(),o(88,"tbody"),x(89,XR,5,0,"tr",24)(90,eA,5,0,"tr",24)(91,tA,25,17,"tr",25),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),p("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(4),S("ngModel",i.selectedSupplier),c(3),p("ngForOf",i.suppliers),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(29),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,Y,Z,H,Q,q,G,K,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function nA(n,t){if(n&1&&(o(0,"option",31),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function iA(n,t){if(n&1&&(o(0,"option",31),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function rA(n,t){if(n&1&&(o(0,"div",11)(1,"div",32)(2,"div",33)(3,"span",34),l(4,"Total Items:"),a(),o(5,"span",35),l(6),a()(),o(7,"div",33)(8,"span",34),l(9,"Valuation Method:"),a(),o(10,"span",35),l(11),a()(),o(12,"div",36)(13,"span",34),l(14,"Total Inventory Value:"),a(),o(15,"span",35),l(16),ee(17,"number"),a()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(e.getValuationMethodDisplay()),c(5),g(te(17,3,e.totalValue,"1.2-2"))}}function oA(n,t){n&1&&(o(0,"tr")(1,"td",37),v(2,"i",38),o(3,"p"),l(4,"Generate report to view inventory valuation"),a()()())}function aA(n,t){n&1&&(o(0,"tr")(1,"td",37),v(2,"i",39),o(3,"p"),l(4,"Loading..."),a()()())}function sA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",28),l(10),ee(11,"number"),a(),o(12,"td",28),l(13),ee(14,"number"),a(),o(15,"td",28),l(16),ee(17,"number"),a()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.unit),c(2),g(te(11,7,e.quantity,"1.0-2")),c(3),g(te(14,10,e.unitCost,"1.2-2")),c(3),g(te(17,13,e.totalValue,"1.2-2"))}}function lA(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",40)(2,"td",41)(3,"strong"),l(4,"Grand Total:"),a()(),o(5,"td",28)(6,"strong"),l(7),ee(8,"number"),a()()()()),n&2){let e=f();c(7),g(te(8,1,e.totalValue,"1.2-2"))}}var ip=class n{constructor(t,e,i,r,s){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.settingsService=r;this.exportService=s}reportData=[];items=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";totalValue=0;loading=!1;valuationMethod="FIFO";asOfDate="";ngOnInit(){this.loadFilters(),this.loadValuationMethod()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadValuationMethod(){this.settingsService.getGeneralSettings().subscribe({next:t=>{this.valuationMethod=t.valuationMethod||"FIFO"},error:t=>{console.error("Error loading valuation method",t),this.valuationMethod="FIFO"}})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=t;this.selectedGroup&&(e=e.filter(i=>i.group?.name===this.selectedGroup)),this.reportData=e.map(i=>{let r=i.currentStock||0,s=i.unitCost||0,d=r*s;return{code:i.code,name:i.name,group:i.group?.name||"",unit:i.unitOfMeasure?.name||"",quantity:r,unitCost:s,totalValue:d,valuationMethod:this.getValuationMethodDisplay()}}),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}getValuationMethodDisplay(){return{FIFO:"First In, First Out",LIFO:"Last In, First Out",WEIGHTED_AVERAGE:"Weighted Average"}[this.valuationMethod]||this.valuationMethod}exportToExcel(){this.exportService.exportToExcel(this.reportData,"inventory-valuation-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"inventory-valuation-report",`Inventory Valuation Report (${this.getValuationMethodDisplay()})`)}exportToCSV(){this.exportService.exportToCSV(this.reportData,"inventory-valuation-report")}static \u0275fac=function(e){return new(e||n)(I(Oe),I(an),I(Ge),I(we),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-inventory-valuation-report"]],standalone:!1,decls:86,vars:16,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",1,"form-control",3,"ngModelChange","ngModel"],["value","FIFO"],["value","LIFO"],["value","WEIGHTED_AVERAGE"],[1,"form-text","text-muted"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"summary-item","highlight"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"fas","fa-spinner","fa-spin"],[1,"total-row"],["colspan","6",1,"text-right"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Valuation Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Valuation"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(32,"option",15),l(33,"All Groups"),a(),x(34,nA,2,2,"option",16),a()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),a(),o(38,"select",14),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(39,"option",15),l(40,"All Warehouses"),a(),x(41,iA,2,2,"option",16),a()(),o(42,"div",13)(43,"label"),l(44,"As of Date"),a(),o(45,"input",17),M("ngModelChange",function(s){return E(i.asOfDate,s)||(i.asOfDate=s),s}),a()(),o(46,"div",13)(47,"label"),l(48,"Valuation Method"),a(),o(49,"select",18),M("ngModelChange",function(s){return E(i.valuationMethod,s)||(i.valuationMethod=s),s}),o(50,"option",19),l(51,"FIFO (First In, First Out)"),a(),o(52,"option",20),l(53,"LIFO (Last In, First Out)"),a(),o(54,"option",21),l(55,"Weighted Average"),a()(),o(56,"small",22),l(57,"Set in General Settings"),a()(),o(58,"button",23),y("click",function(){return i.generateReport()}),v(59,"i",24),l(60),a()()(),x(61,rA,18,6,"div",25),o(62,"div",11)(63,"div",26)(64,"table",27)(65,"thead")(66,"tr")(67,"th"),l(68,"Item Code"),a(),o(69,"th"),l(70,"Item Name"),a(),o(71,"th"),l(72,"Group"),a(),o(73,"th"),l(74,"Unit"),a(),o(75,"th",28),l(76,"Quantity"),a(),o(77,"th",28),l(78,"Unit Cost"),a(),o(79,"th",28),l(80,"Total Value"),a()()(),o(81,"tbody"),x(82,oA,5,0,"tr",29)(83,aA,5,0,"tr",29)(84,sA,18,16,"tr",30),a(),x(85,lA,9,4,"tfoot",29),a()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),p("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(4),S("ngModel",i.asOfDate),c(4),S("ngModel",i.valuationMethod),c(9),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(21),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData),c(),p("ngIf",i.reportData.length>0))},dependencies:[L,B,Y,Z,H,Q,q,G,K,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function cA(n,t){if(n&1&&(o(0,"option",28),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le("",e.name," (",e.code,")")}}function dA(n,t){if(n&1&&(o(0,"option",28),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function uA(n,t){if(n&1&&(o(0,"div",11)(1,"div",29)(2,"div",30)(3,"span",31),l(4,"Item:"),a(),o(5,"span",32),l(6),a()(),o(7,"div",30)(8,"span",31),l(9,"Total In:"),a(),o(10,"span",33),l(11),a()(),o(12,"div",30)(13,"span",31),l(14,"Total Out:"),a(),o(15,"span",34),l(16),a()(),o(17,"div",30)(18,"span",31),l(19,"Net Movement:"),a(),o(20,"span",32),l(21),a()()()()),n&2){let e=f();c(6),g(e.getSelectedItemName()),c(5),g(e.totalIn),c(5),g(e.totalOut),c(4),J("text-success",e.totalIn-e.totalOut>=0)("text-danger",e.totalIn-e.totalOut<0),c(),D(" ",e.totalIn-e.totalOut," ")}}function pA(n,t){n&1&&(o(0,"tr")(1,"td",35),v(2,"i",36),o(3,"p"),l(4,"Select an item and generate report to view movements"),a()()())}function mA(n,t){n&1&&(o(0,"tr")(1,"td",35),v(2,"i",37),o(3,"p"),l(4,"Loading..."),a()()())}function fA(n,t){if(n&1){let e=T();o(0,"tr",38),y("click",function(){let r=h(e).$implicit,s=f();return _(s.drillDown(r))}),o(1,"td"),l(2),ee(3,"date"),a(),o(4,"td",39),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td",40),l(11),a(),o(12,"td",41),l(13),a(),o(14,"td",25),l(15),a(),o(16,"td",25),l(17),ee(18,"number"),a(),o(19,"td",25),l(20),ee(21,"number"),a()()}if(n&2){let e=t.$implicit;c(2),g(te(3,9,e.date,"shortDate")),c(3),g(e.documentNo),c(2),g(e.transactionType),c(2),g(e.warehouse),c(2),g(e.quantityIn>0?e.quantityIn:""),c(2),g(e.quantityOut>0?e.quantityOut:""),c(2),g(e.balance),c(2),g(te(18,12,e.rate,"1.2-2")),c(3),g(te(21,15,e.value,"1.2-2"))}}var rp=class n{constructor(t,e,i,r,s){this.itemService=t;this.warehouseService=e;this.ledgerService=i;this.exportService=r;this.router=s}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;totalIn=0;totalOut=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){if(!this.selectedItem){alert("Please select an item");return}this.loading=!0;let t={itemId:parseInt(this.selectedItem)};this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:this.formatTransactionType(i.transactionType),warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0})),this.totalIn=this.reportData.reduce((i,r)=>i+r.quantityIn,0),this.totalOut=this.reportData.reduce((i,r)=>i+r.quantityOut,0),this.loading=!1},error:e=>{console.error("Error generating report",e),this.loading=!1}})}formatTransactionType(t){return{GRN:"Goods Receipt",GOODS_RECEIPT:"Goods Receipt",ISSUE:"Goods Issue",GOODS_ISSUE:"Goods Issue",TRANSFER:"Stock Transfer",STOCK_TRANSFER:"Stock Transfer",ADJUSTMENT:"Stock Adjustment",STOCK_ADJUSTMENT:"Stock Adjustment"}[t]||t}drillDown(t){let e=t.transactionType,i="";e.includes("Receipt")?i="/app/stock-movement/goods-receipt":e.includes("Issue")?i="/app/stock-movement/goods-issue":e.includes("Transfer")?i="/app/stock-movement/stock-transfer":e.includes("Adjustment")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}getSelectedItemName(){let t=this.items.find(e=>e.id?.toString()===this.selectedItem);return t?`${t.code} - ${t.name}`:""}exportToExcel(){this.exportService.exportToExcel(this.reportData,"item-movement-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"item-movement-report","Item Movement Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"item-movement-report")}static \u0275fac=function(e){return new(e||n)(I(Oe),I(Ge),I(mi),I(Ne),I(ue))};static \u0275cmp=A({type:n,selectors:[["app-item-movement-report"]],standalone:!1,decls:83,vars:15,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-chart-line"],[1,"fas","fa-spinner","fa-spin"],[1,"clickable-row",3,"click"],[1,"link-text"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Item Movement Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Item Movement"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Item "),o(31,"span",14),l(32,"*"),a()(),o(33,"select",15),M("ngModelChange",function(s){return E(i.selectedItem,s)||(i.selectedItem=s),s}),o(34,"option",16),l(35,"Select Item"),a(),x(36,cA,2,3,"option",17),a()(),o(37,"div",13)(38,"label"),l(39,"Warehouse"),a(),o(40,"select",18),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(41,"option",16),l(42,"All Warehouses"),a(),x(43,dA,2,2,"option",17),a()(),o(44,"div",13)(45,"label"),l(46,"From Date"),a(),o(47,"input",19),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(48,"div",13)(49,"label"),l(50,"To Date"),a(),o(51,"input",19),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(52,"button",20),y("click",function(){return i.generateReport()}),v(53,"i",21),l(54),a()()(),x(55,uA,22,8,"div",22),o(56,"div",11)(57,"div",23)(58,"table",24)(59,"thead")(60,"tr")(61,"th"),l(62,"Date"),a(),o(63,"th"),l(64,"Document No"),a(),o(65,"th"),l(66,"Type"),a(),o(67,"th"),l(68,"Warehouse"),a(),o(69,"th",25),l(70,"In"),a(),o(71,"th",25),l(72,"Out"),a(),o(73,"th",25),l(74,"Balance"),a(),o(75,"th",25),l(76,"Rate"),a(),o(77,"th",25),l(78,"Value"),a()()(),o(79,"tbody"),x(80,pA,5,0,"tr",26)(81,mA,5,0,"tr",26)(82,fA,22,18,"tr",27),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(10),S("ngModel",i.selectedItem),c(3),p("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading||!i.selectedItem),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(25),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,Y,Z,H,Q,q,wt,G,K,De,Rr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function gA(n,t){if(n&1&&(o(0,"option",25),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le("",e.name," (",e.code,")")}}function hA(n,t){if(n&1&&(o(0,"option",25),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function _A(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",27),o(3,"p"),l(4,"Generate report to view data"),a()()())}function vA(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",28),o(3,"p"),l(4,"Loading..."),a()()())}function yA(n,t){if(n&1){let e=T();o(0,"tr",29),y("click",function(){let r=h(e).$implicit,s=f();return _(s.drillDown(r))}),o(1,"td"),l(2),ee(3,"date"),a(),o(4,"td",30),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td",22),l(13),a(),o(14,"td",22),l(15),a(),o(16,"td",22),l(17),a(),o(18,"td",22),l(19),ee(20,"number"),a(),o(21,"td",22),l(22),ee(23,"number"),a()()}if(n&2){let e=t.$implicit;c(2),g(te(3,11,e.date,"shortDate")),c(3),g(e.documentNo),c(2),le("",e.itemCode," - ",e.itemName),c(2),g(e.transactionType),c(2),g(e.warehouse),c(2),g(e.quantityIn),c(2),g(e.quantityOut),c(2),g(e.balance),c(2),g(te(20,14,e.rate,"1.2-2")),c(3),g(te(23,17,e.value,"1.2-2"))}}var op=class n{constructor(t,e,i,r,s){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.exportService=r;this.router=s}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0;let t={};this.selectedItem&&(t.itemId=parseInt(this.selectedItem)),this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:i.transactionType,itemCode:i.item?.code||"",itemName:i.item?.name||"",warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0,remarks:i.remarks||""})),this.loading=!1},error:e=>{console.error("Error generating report",e),this.loading=!1}})}drillDown(t){let e=t.transactionType,i="";e==="GRN"||e==="GOODS_RECEIPT"?i="/app/stock-movement/goods-receipt":e==="ISSUE"||e==="GOODS_ISSUE"?i="/app/stock-movement/goods-issue":e==="TRANSFER"||e==="STOCK_TRANSFER"?i="/app/stock-movement/stock-transfer":(e==="ADJUSTMENT"||e==="STOCK_ADJUSTMENT")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-ledger-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-ledger-report","Stock Ledger Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-ledger-report")}static \u0275fac=function(e){return new(e||n)(I(mi),I(Oe),I(Ge),I(Ne),I(ue))};static \u0275cmp=A({type:n,selectors:[["app-stock-ledger-report"]],standalone:!1,decls:82,vars:14,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[3,"value"],["colspan","10",1,"empty-state"],[1,"fas","fa-book-open"],[1,"fas","fa-spinner","fa-spin"],[1,"clickable-row",3,"click"],[1,"link-text"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Ledger Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Stock Ledger"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Item"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedItem,s)||(i.selectedItem=s),s}),o(32,"option",15),l(33,"All Items"),a(),x(34,gA,2,3,"option",16),a()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),a(),o(38,"select",14),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(39,"option",15),l(40,"All Warehouses"),a(),x(41,hA,2,2,"option",16),a()(),o(42,"div",13)(43,"label"),l(44,"From Date"),a(),o(45,"input",17),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(46,"div",13)(47,"label"),l(48,"To Date"),a(),o(49,"input",17),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(50,"button",18),y("click",function(){return i.generateReport()}),v(51,"i",19),l(52),a()()(),o(53,"div",11)(54,"div",20)(55,"table",21)(56,"thead")(57,"tr")(58,"th"),l(59,"Date"),a(),o(60,"th"),l(61,"Document No"),a(),o(62,"th"),l(63,"Item"),a(),o(64,"th"),l(65,"Type"),a(),o(66,"th"),l(67,"Warehouse"),a(),o(68,"th",22),l(69,"In"),a(),o(70,"th",22),l(71,"Out"),a(),o(72,"th",22),l(73,"Balance"),a(),o(74,"th",22),l(75,"Rate"),a(),o(76,"th",22),l(77,"Value"),a()()(),o(78,"tbody"),x(79,_A,5,0,"tr",23)(80,vA,5,0,"tr",23)(81,yA,24,20,"tr",24),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedItem),c(3),p("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(27),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,Y,Z,H,Q,q,G,K,De,Rr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function bA(n,t){if(n&1&&(o(0,"option",24),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function CA(n,t){if(n&1&&(o(0,"div",11)(1,"div",25)(2,"div",26)(3,"span",27),l(4,"Total Groups:"),a(),o(5,"span",28),l(6),a()(),o(7,"div",26)(8,"span",27),l(9,"Total Quantity:"),a(),o(10,"span",28),l(11),ee(12,"number"),a()(),o(13,"div",26)(14,"span",27),l(15,"Total Value:"),a(),o(16,"span",28),l(17),ee(18,"number"),a()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(te(12,3,e.totalQuantity,"1.0-2")),c(6),g(te(18,6,e.totalValue,"1.2-2"))}}function xA(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),a()()())}function SA(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",31),o(3,"p"),l(4,"Loading..."),a()()())}function MA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),ee(7,"number"),a(),o(8,"td"),l(9),ee(10,"number"),a()()),n&2){let e=t.$implicit;c(2),g(e.group),c(2),g(e.itemsCount),c(2),g(te(7,4,e.totalQuantity,"1.0-2")),c(3),g(te(10,7,e.totalValue,"1.2-2"))}}var ap=class n{constructor(t,e,i){this.itemGroupService=t;this.itemService=e;this.exportService=i}reportData=[];groups=[];selectedGroup="";loading=!1;totalQuantity=0;totalValue=0;ngOnInit(){this.loadGroups()}loadGroups(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Map;t.forEach(i=>{let r=i.group?.name||"Uncategorized",s=e.get(r)||{count:0,quantity:0,value:0};s.count++,s.quantity+=i.currentStock||0,s.value+=(i.currentStock||0)*(i.unitCost||0),e.set(r,s)}),this.reportData=Array.from(e.entries()).map(([i,r])=>({group:i,itemsCount:r.count,totalQuantity:r.quantity,totalValue:r.value})),this.totalQuantity=this.reportData.reduce((i,r)=>i+r.totalQuantity,0),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"group-wise-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"group-wise-stock-report","Group-wise Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"group-wise-stock-report")}static \u0275fac=function(e){return new(e||n)(I(an),I(Oe),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-group-wise-stock-report"]],standalone:!1,decls:56,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","4",1,"empty-state"],[1,"fas","fa-sitemap"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Group-wise Stock Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Group-wise"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(32,"option",15),l(33,"All Groups"),a(),x(34,bA,2,2,"option",16),a()(),o(35,"button",17),y("click",function(){return i.generateReport()}),v(36,"i",18),l(37),a()()(),x(38,CA,19,9,"div",19),o(39,"div",11)(40,"div",20)(41,"table",21)(42,"thead")(43,"tr")(44,"th"),l(45,"Group"),a(),o(46,"th"),l(47,"Items Count"),a(),o(48,"th"),l(49,"Total Quantity"),a(),o(50,"th"),l(51,"Total Value"),a()()(),o(52,"tbody"),x(53,xA,5,0,"tr",22)(54,SA,5,0,"tr",22)(55,MA,11,10,"tr",23),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),p("ngForOf",i.groups),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(15),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,Y,Z,Q,q,G,K,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function EA(n,t){if(n&1&&(o(0,"option",24),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function wA(n,t){if(n&1&&(o(0,"div",11)(1,"div",25)(2,"div",26)(3,"span",27),l(4,"Total Items:"),a(),o(5,"span",28),l(6),a()(),o(7,"div",26)(8,"span",27),l(9,"Total Value:"),a(),o(10,"span",28),l(11),ee(12,"number"),a()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(te(12,2,e.totalValue,"1.2-2"))}}function IA(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),a()()())}function PA(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",31),o(3,"p"),l(4,"Loading..."),a()()())}function DA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),ee(11,"number"),a(),o(12,"td"),l(13),ee(14,"number"),a()()),n&2){let e=t.$implicit;c(2),g(e.warehouse),c(2),g(e.bin),c(2),g(e.itemCode),c(2),g(e.item),c(2),g(te(11,6,e.quantity,"1.0-2")),c(3),g(te(14,9,e.value,"1.2-2"))}}var sp=class n{constructor(t,e,i){this.warehouseService=t;this.itemService=e;this.exportService=i}reportData=[];warehouses=[];selectedWarehouse="";loading=!1;totalValue=0;ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({warehouse:e.warehouse?.name||"Default",bin:e.bin?.code||"-",item:e.name,itemCode:e.code,quantity:e.currentStock||0,value:(e.currentStock||0)*(e.unitCost||0)})),this.selectedWarehouse&&(this.reportData=this.reportData.filter(e=>e.warehouse===this.selectedWarehouse)),this.totalValue=this.reportData.reduce((e,i)=>e+i.value,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"warehouse-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"warehouse-stock-report","Warehouse Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"warehouse-stock-report")}static \u0275fac=function(e){return new(e||n)(I(Ge),I(Oe),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-warehouse-stock-report"]],standalone:!1,decls:60,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","6",1,"empty-state"],[1,"fas","fa-warehouse"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Warehouse Stock Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Warehouse Stock"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Warehouse"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(32,"option",15),l(33,"All Warehouses"),a(),x(34,EA,2,2,"option",16),a()(),o(35,"button",17),y("click",function(){return i.generateReport()}),v(36,"i",18),l(37),a()()(),x(38,wA,13,5,"div",19),o(39,"div",11)(40,"div",20)(41,"table",21)(42,"thead")(43,"tr")(44,"th"),l(45,"Warehouse"),a(),o(46,"th"),l(47,"Bin"),a(),o(48,"th"),l(49,"Item Code"),a(),o(50,"th"),l(51,"Item Name"),a(),o(52,"th"),l(53,"Quantity"),a(),o(54,"th"),l(55,"Value"),a()()(),o(56,"tbody"),x(57,IA,5,0,"tr",22)(58,PA,5,0,"tr",22)(59,DA,15,12,"tr",23),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(19),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,Y,Z,Q,q,G,K,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function TA(n,t){n&1&&(o(0,"tr")(1,"td",19),v(2,"i",20),o(3,"p"),l(4,"No items below reorder level"),a()()())}function OA(n,t){n&1&&(o(0,"tr")(1,"td",19),v(2,"i",21),o(3,"p"),l(4,"Loading..."),a()()())}function kA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",22),l(17),a()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.unit),c(2),g(e.currentStock),c(2),g(e.reorderLevel),c(2),g(e.shortage),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}var lp=class n{constructor(t,e){this.itemService=t;this.exportService=e}reportData=[];loading=!1;ngOnInit(){this.generateReport()}generateReport(){this.loading=!0,this.itemService.getLowStock().subscribe({next:t=>{this.reportData=t.map(e=>({code:e.code,name:e.name,group:e.group?.name||"",unit:e.unitOfMeasure?.name||"",currentStock:e.currentStock||0,reorderLevel:e.reorderLevel||0,shortage:(e.reorderLevel||0)-(e.currentStock||0),status:(e.currentStock||0)<=0?"Out of Stock":(e.currentStock||0)<=(e.reorderLevel||0)/2?"Critical":"Low Stock"})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"reorder-level-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"reorder-level-report","Reorder Level Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"reorder-level-report")}getStatusClass(t){return t==="Out of Stock"?"badge-danger":t==="Critical"?"badge-warning":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Oe),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-reorder-level"]],standalone:!1,decls:56,vars:8,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-check-circle"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Reorder Level Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Reorder Level"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"button",13),y("click",function(){return i.generateReport()}),v(29,"i",14),l(30),a()()(),o(31,"div",11)(32,"div",15)(33,"table",16)(34,"thead")(35,"tr")(36,"th"),l(37,"Item Code"),a(),o(38,"th"),l(39,"Item Name"),a(),o(40,"th"),l(41,"Group"),a(),o(42,"th"),l(43,"Unit"),a(),o(44,"th"),l(45,"Current Stock"),a(),o(46,"th"),l(47,"Reorder Level"),a(),o(48,"th"),l(49,"Shortage"),a(),o(50,"th"),l(51,"Status"),a()()(),o(52,"tbody"),x(53,TA,5,0,"tr",17)(54,OA,5,0,"tr",17)(55,kA,18,9,"tr",18),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(5),p("disabled",i.loading),c(2),D(" ",i.loading?"Refreshing...":"Refresh"," "),c(23),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[oe,L,B,K],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function NA(n,t){if(n&1&&(o(0,"option",15),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function RA(n,t){if(n&1&&(o(0,"option",15),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function AA(n,t){if(n&1&&(o(0,"div",11)(1,"div",26)(2,"div",27)(3,"span",28),l(4,"Slow-Moving Items:"),a(),o(5,"span",29),l(6),a()(),o(7,"div",30)(8,"span",28),l(9,"Total Value at Risk:"),a(),o(10,"span",31),l(11),ee(12,"number"),a()()()()),n&2){let e=f();c(6),g(e.totalItems),c(5),g(te(12,2,e.totalValue,"1.2-2"))}}function FA(n,t){n&1&&(o(0,"tr")(1,"td",32),v(2,"i",33),o(3,"p"),l(4,"Generate report to view slow-moving items"),a()()())}function VA(n,t){n&1&&(o(0,"tr")(1,"td",32),v(2,"i",34),o(3,"p"),l(4,"Loading..."),a()()())}function LA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",23),l(12),a(),o(13,"td",23),l(14),ee(15,"number"),a(),o(16,"td",23),l(17),ee(18,"number"),a(),o(19,"td",23),l(20),ee(21,"number"),a()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.warehouse),c(2),g(e.lastMovement),c(),J("text-danger",e.daysIdle!=="N/A"&&e.daysIdle>90),c(),g(e.daysIdle),c(2),g(te(15,11,e.currentStock,"1.0-2")),c(3),g(te(18,14,e.unitCost,"1.2-2")),c(3),g(te(21,17,e.value,"1.2-2"))}}function jA(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",35)(2,"td",36)(3,"strong"),l(4,"Total Value at Risk:"),a()(),o(5,"td",23)(6,"strong"),l(7),ee(8,"number"),a()()()()),n&2){let e=f();c(7),g(te(8,1,e.totalValue,"1.2-2"))}}var cp=class n{constructor(t,e,i,r){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.exportService=r}reportData=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";daysWithoutMovement=30;loading=!1;totalValue=0;totalItems=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Date;e.setDate(e.getDate()-this.daysWithoutMovement);let i=t.filter(r=>{let s=r.lastMovementDate?new Date(r.lastMovementDate):null;return!s||s<e});this.selectedGroup&&(i=i.filter(r=>r.group?.name===this.selectedGroup)),this.selectedWarehouse&&(i=i.filter(r=>r.warehouse?.name===this.selectedWarehouse)),this.reportData=i.map(r=>({code:r.code,name:r.name,group:r.group?.name||"",warehouse:r.warehouse?.name||"Default",lastMovement:r.lastMovementDate?new Date(r.lastMovementDate).toLocaleDateString():"Never",daysIdle:r.lastMovementDate?Math.floor((new Date().getTime()-new Date(r.lastMovementDate).getTime())/(1e3*60*60*24)):"N/A",currentStock:r.currentStock||0,unitCost:r.unitCost||0,value:(r.currentStock||0)*(r.unitCost||0)})),this.totalValue=this.reportData.reduce((r,s)=>r+s.value,0),this.totalItems=this.reportData.length,this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"slow-moving-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"slow-moving-items-report","Slow / Non-Moving Items Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"slow-moving-items-report")}static \u0275fac=function(e){return new(e||n)(I(Oe),I(an),I(Ge),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-slow-moving-items-report"]],standalone:!1,decls:88,vars:20,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value","text-warning"],[1,"summary-item","highlight"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-hourglass-half"],[1,"fas","fa-spinner","fa-spin"],[1,"total-row"],["colspan","8",1,"text-right"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Slow / Non-Moving Items Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Slow Moving"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Days Without Movement"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.daysWithoutMovement,s)||(i.daysWithoutMovement=s),s}),o(32,"option",15),l(33,"30 Days"),a(),o(34,"option",15),l(35,"60 Days"),a(),o(36,"option",15),l(37,"90 Days"),a(),o(38,"option",15),l(39,"180 Days"),a(),o(40,"option",15),l(41,"1 Year"),a()()(),o(42,"div",13)(43,"label"),l(44,"Group"),a(),o(45,"select",14),M("ngModelChange",function(s){return E(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(46,"option",16),l(47,"All Groups"),a(),x(48,NA,2,2,"option",17),a()(),o(49,"div",13)(50,"label"),l(51,"Warehouse"),a(),o(52,"select",14),M("ngModelChange",function(s){return E(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(53,"option",16),l(54,"All Warehouses"),a(),x(55,RA,2,2,"option",17),a()(),o(56,"button",18),y("click",function(){return i.generateReport()}),v(57,"i",19),l(58),a()()(),x(59,AA,13,5,"div",20),o(60,"div",11)(61,"div",21)(62,"table",22)(63,"thead")(64,"tr")(65,"th"),l(66,"Item Code"),a(),o(67,"th"),l(68,"Item Name"),a(),o(69,"th"),l(70,"Group"),a(),o(71,"th"),l(72,"Warehouse"),a(),o(73,"th"),l(74,"Last Movement"),a(),o(75,"th",23),l(76,"Days Idle"),a(),o(77,"th",23),l(78,"Current Stock"),a(),o(79,"th",23),l(80,"Unit Cost"),a(),o(81,"th",23),l(82,"Value"),a()()(),o(83,"tbody"),x(84,FA,5,0,"tr",24)(85,VA,5,0,"tr",24)(86,LA,22,20,"tr",25),a(),x(87,jA,9,4,"tfoot",24),a()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.daysWithoutMovement),c(),p("value",30),c(2),p("value",60),c(2),p("value",90),c(2),p("value",180),c(2),p("value",365),c(5),S("ngModel",i.selectedGroup),c(3),p("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),p("ngForOf",i.warehouses),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(25),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData),c(),p("ngIf",i.reportData.length>0))},dependencies:[L,B,Y,Z,Q,q,G,K,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function BA(n,t){if(n&1&&(o(0,"option",27),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function WA(n,t){if(n&1&&(o(0,"div",11)(1,"div",28)(2,"div",29)(3,"span",30),l(4,"Total PO Qty:"),a(),o(5,"span",31),l(6),a()(),o(7,"div",29)(8,"span",30),l(9,"Total GRN Qty:"),a(),o(10,"span",32),l(11),a()(),o(12,"div",29)(13,"span",30),l(14,"Pending Qty:"),a(),o(15,"span",33),l(16),a()(),o(17,"div",29)(18,"span",30),l(19,"Fulfillment Rate:"),a(),o(20,"span",31),l(21),ee(22,"number"),a()()()()),n&2){let e=f();c(6),g(e.totalPOQty),c(5),g(e.totalGRNQty),c(5),g(e.totalPending),c(4),J("text-success",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty>=.9)("text-warning",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty<.9),c(),D(" ",e.totalPOQty>0?te(22,8,e.totalGRNQty/e.totalPOQty*100,"1.1-1"):0,"% ")}}function UA(n,t){n&1&&(o(0,"tr")(1,"td",34),v(2,"i",35),o(3,"p"),l(4,"Generate report to view purchase vs GRN comparison"),a()()())}function GA(n,t){n&1&&(o(0,"tr")(1,"td",34),v(2,"i",36),o(3,"p"),l(4,"Loading..."),a()()())}function qA(n,t){if(n&1){let e=T();o(0,"tr")(1,"td",37),y("click",function(){let r=h(e).$implicit,s=f();return _(s.drillDownToPO(r))}),l(2),a(),o(3,"td"),l(4),ee(5,"date"),a(),o(6,"td"),l(7),a(),o(8,"td",23),l(9),a(),o(10,"td",38),l(11),a(),o(12,"td",23),l(13),a(),o(14,"td",24),l(15),a(),o(16,"td",24)(17,"span",39),l(18),a()(),o(19,"td",24)(20,"button",40),y("click",function(){let r=h(e).$implicit,s=f();return _(s.drillDownToGRN(r))}),v(21,"i",41),a()()()}if(n&2){let e=t.$implicit,i=f();c(2),g(e.poNumber),c(2),g(te(5,11,e.poDate,"shortDate")),c(3),g(e.supplier),c(2),g(e.poQty),c(2),g(e.grnQty),c(),J("text-warning",e.pendingQty>0),c(),g(e.pendingQty),c(2),g(e.grnCount),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function HA(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",42)(2,"td",43)(3,"strong"),l(4,"Totals:"),a()(),o(5,"td",23)(6,"strong"),l(7),a()(),o(8,"td",23)(9,"strong"),l(10),a()(),o(11,"td",23)(12,"strong"),l(13),a()(),v(14,"td",44),a()()),n&2){let e=f();c(7),g(e.totalPOQty),c(3),g(e.totalGRNQty),c(3),g(e.totalPending)}}var dp=class n{constructor(t,e,i,r,s){this.supplierService=t;this.prFulfillmentService=e;this.stockMovementService=i;this.exportService=r;this.router=s}reportData=[];suppliers=[];selectedSupplier="";fromDate="";toDate="";loading=!1;totalPOQty=0;totalGRNQty=0;totalPending=0;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}generateReport(){this.loading=!0,fr({pos:this.prFulfillmentService.getAllPOs(),grns:this.stockMovementService.getAllGRN()}).subscribe({next:({pos:t,grns:e})=>{let i=new Map;if(e.forEach(r=>{let s=r.referenceNumber||r.grnNumber||"";if(s){i.has(s)||i.set(s,{totalQty:0,grns:[]});let d=i.get(s);d.grns.push(r),d.totalQty+=r.lines?.reduce((u,m)=>u+(m.quantityReceived||m.quantity||0),0)||0}}),this.reportData=t.filter(r=>r.fulfillmentType==="PO").map(r=>{let s=r.referenceNumber||"",d=i.get(s)||{totalQty:0,grns:[]},u=r.items?.reduce((w,O)=>w+(O.quantity||0),0)||0,m=d.totalQty,b=Math.max(0,u-m),C="Pending";return m>=u?C="Complete":m>0&&(C="Partial"),{poNumber:s,poDate:r.createdAt,supplier:r.supplierName||"",poQty:u,grnQty:m,pendingQty:b,status:C,grnCount:d.grns.length}}),this.selectedSupplier&&(this.reportData=this.reportData.filter(r=>r.supplier===this.selectedSupplier)),this.fromDate){let r=new Date(this.fromDate);this.reportData=this.reportData.filter(s=>new Date(s.poDate)>=r)}if(this.toDate){let r=new Date(this.toDate);this.reportData=this.reportData.filter(s=>new Date(s.poDate)<=r)}this.calculateTotals(),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}calculateTotals(){this.totalPOQty=this.reportData.reduce((t,e)=>t+e.poQty,0),this.totalGRNQty=this.reportData.reduce((t,e)=>t+e.grnQty,0),this.totalPending=this.reportData.reduce((t,e)=>t+e.pendingQty,0)}drillDownToPO(t){this.router.navigate(["/app/purchase/pr-fulfillment"],{queryParams:{poNumber:t.poNumber}})}drillDownToGRN(t){this.router.navigate(["/app/stock-movement/goods-receipt"],{queryParams:{poNumber:t.poNumber}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"purchase-vs-grn-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"purchase-vs-grn-report","Purchase vs GRN Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"purchase-vs-grn-report")}getStatusClass(t){return t==="Pending"?"badge-warning":t==="Complete"?"badge-success":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(_t),I(vt),I(Tn),I(Ne),I(ue))};static \u0275cmp=A({type:n,selectors:[["app-purchase-vs-grn-report"]],standalone:!1,decls:75,vars:14,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-warning"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"link-text",3,"click"],[1,"text-right","text-success"],[1,"badge",3,"ngClass"],["title","View GRNs",1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-eye"],[1,"total-row"],["colspan","3",1,"text-right"],["colspan","3"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase vs GRN Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Purchase vs GRN"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Supplier"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedSupplier,s)||(i.selectedSupplier=s),s}),o(32,"option",15),l(33,"All Suppliers"),a(),x(34,BA,2,2,"option",16),a()(),o(35,"div",13)(36,"label"),l(37,"From Date"),a(),o(38,"input",17),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(39,"div",13)(40,"label"),l(41,"To Date"),a(),o(42,"input",17),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(43,"button",18),y("click",function(){return i.generateReport()}),v(44,"i",19),l(45),a()()(),x(46,WA,23,11,"div",20),o(47,"div",11)(48,"div",21)(49,"table",22)(50,"thead")(51,"tr")(52,"th"),l(53,"PO Number"),a(),o(54,"th"),l(55,"PO Date"),a(),o(56,"th"),l(57,"Supplier"),a(),o(58,"th",23),l(59,"PO Qty"),a(),o(60,"th",23),l(61,"GRN Qty"),a(),o(62,"th",23),l(63,"Pending"),a(),o(64,"th",24),l(65,"GRNs"),a(),o(66,"th",24),l(67,"Status"),a(),o(68,"th",24),l(69,"Actions"),a()()(),o(70,"tbody"),x(71,UA,5,0,"tr",25)(72,GA,5,0,"tr",25)(73,qA,22,14,"tr",26),a(),x(74,HA,15,3,"tfoot",25),a()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedSupplier),c(3),p("ngForOf",i.suppliers),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),p("ngIf",i.reportData.length>0),c(25),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData),c(),p("ngIf",i.reportData.length>0))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K,De,Rr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};var Lt=class n{constructor(t){this.http=t}baseUrl="/api/purchase/requisitions";fulfillmentUrl="/api/purchase/fulfillment";requisitionsSubject=new He([]);requisitions$=this.requisitionsSubject.asObservable();getAll(){return this.http.get(this.baseUrl).pipe(Qe(t=>this.requisitionsSubject.next(t)))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}submit(t){return this.http.post(`${this.baseUrl}/${t}/submit`,{})}approve(t){return this.http.post(`${this.baseUrl}/${t}/approve`,{})}reject(t,e){return this.http.post(`${this.baseUrl}/${t}/reject`,{reason:e})}getByStatus(t){return this.requisitions$.pipe(Pe(e=>e.filter(i=>i.status===t)))}generatePRNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PR-${i}${r}${s}`}getStockFulfillmentsByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/stock-fulfillments`)}getMaterialTransfersByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/material-transfers`)}getAllStockFulfillments(){return this.http.get(`${this.fulfillmentUrl}/stock-fulfillments`)}getAllMaterialTransfers(){return this.http.get(`${this.fulfillmentUrl}/material-transfers`)}createStockFulfillment(t){return this.http.post(`${this.fulfillmentUrl}/stock-fulfillment`,t)}createMaterialTransfer(t){return this.http.post(`${this.fulfillmentUrl}/material-transfer-new`,t)}getPurchaseOrdersByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/purchase-orders`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function zA(n,t){if(n&1){let e=T();o(0,"span",20),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.currentSort=r.value)}),l(1),a()}if(n&2){let e=t.$implicit,i=f(2);J("active",i.currentSort===e.value),c(),D(" ",e.label," ")}}function $A(n,t){if(n&1&&(o(0,"div",18)(1,"span"),l(2,"Sort By:"),a(),x(3,zA,2,3,"span",19),a()),n&2){let e=f();c(3),p("ngForOf",e.sortOptions)}}function QA(n,t){if(n&1){let e=T();o(0,"div",37),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",40),l(5),a()(),o(6,"div",41),l(7),a(),o(8,"div",42)(9,"div",43)(10,"span",44),l(11,"Date:"),a(),o(12,"span",45),l(13),a()(),o(14,"div",43)(15,"span",44),l(16,"Required:"),a(),o(17,"span",45),l(18),a()()(),o(19,"div",46)(20,"span",47),v(21,"i",48),l(22),a(),o(23,"div",49)(24,"button",50),y("click",function(r){let s=h(e).$implicit;return f(2).printPR(s),_(r.stopPropagation())}),v(25,"i",51),a(),o(26,"button",52),y("click",function(r){let s=h(e).$implicit;return f(2).openEditModal(s),_(r.stopPropagation())}),v(27,"i",53),a(),o(28,"button",54),y("click",function(r){let s=h(e).$implicit;return f(2).deletePR(s),_(r.stopPropagation())}),v(29,"i",55),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),p("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(6),g(i.formatDate(e.prDate)),c(5),g(i.formatDate(e.requiredDate)),c(4),D(" Comments: ",e.commentsCount||0)}}function KA(n,t){n&1&&(o(0,"div",56),v(1,"i",57),o(2,"span"),l(3,"No Draft Requisitions"),a()())}function YA(n,t){if(n&1){let e=T();o(0,"div",59)(1,"button",60),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.approvePR(s,r))}),v(2,"i",61),l(3," Approve "),a(),o(4,"button",62),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.rejectPR(s,r))}),v(5,"i",63),l(6," Reject "),a()()}}function ZA(n,t){if(n&1){let e=T();o(0,"div",37),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",40),l(5),a()(),o(6,"div",41),l(7),a(),o(8,"div",42)(9,"div",43)(10,"span",44),l(11,"Date:"),a(),o(12,"span",45),l(13),a()(),o(14,"div",43)(15,"span",44),l(16,"Required:"),a(),o(17,"span",45),l(18),a()()(),x(19,YA,7,0,"div",58),o(20,"div",46)(21,"span",47),v(22,"i",48),l(23),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),p("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(6),g(i.formatDate(e.prDate)),c(5),g(i.formatDate(e.requiredDate)),c(),p("ngIf",i.canApproveReject(e)),c(4),D(" Comments: ",e.commentsCount||0)}}function JA(n,t){n&1&&(o(0,"div",56),v(1,"i",64),o(2,"span"),l(3,"No Submitted Requisitions"),a()())}function XA(n,t){if(n&1&&(o(0,"span",96),l(1),a()),n&2){let e=f(4);c(),D("",e.getSelectedItemsCount()," selected")}}function e4(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",97),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",98),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit,i=f(4);c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(i.getRemainingQty(e)),c(2),S("ngModel",e.fulfillQty),p("max",i.getRemainingQty(e))("disabled",!e.selected)}}function t4(n,t){n&1&&(o(0,"tr")(1,"td",99),l(2,"All items have been fulfilled"),a()())}function n4(n,t){if(n&1){let e=T();o(0,"div",100)(1,"button",101),y("click",function(r){h(e);let s=f(2).$implicit,d=f(2);return _(d.openInlineStockFulfillment(s,r))}),v(2,"i",93),l(3," Fulfill from Stock "),a(),o(4,"button",102),y("click",function(r){h(e);let s=f(2).$implicit,d=f(2);return _(d.openInlineMaterialTransfer(s,r))}),v(5,"i",94),l(6," Material Transfer "),a()()}}function i4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",107),l(9),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.poNumber),c(2),g(e.supplierName),c(2),g(i.formatDate(e.poDate)),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function r4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Date"),a(),o(9,"th"),l(10,"Status"),a()()(),o(11,"tbody"),x(12,i4,10,5,"tr",87),a()()),n&2){let e=f(5);c(12),p("ngForOf",e.inlinePurchaseOrders)}}function o4(n,t){n&1&&(o(0,"div",108),l(1,"No purchase orders created yet"),a())}function a4(n,t){if(n&1&&(o(0,"div",103),x(1,r4,13,1,"table",104)(2,o4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlinePurchaseOrders.length>0),c(),p("ngIf",e.inlinePurchaseOrders.length===0)}}function s4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Fulfilled"),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.warehouseName||"-"),c(2),g(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),g(i.formatDate(e.createdAt))}}function l4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Warehouse"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,s4,12,4,"tr",87),a()()),n&2){let e=f(5);c(14),p("ngForOf",e.inlineStockFulfillments)}}function c4(n,t){n&1&&(o(0,"div",108),l(1,"No stock fulfillments yet"),a())}function d4(n,t){if(n&1&&(o(0,"div",103),x(1,l4,15,1,"table",104)(2,c4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlineStockFulfillments.length>0),c(),p("ngIf",e.inlineStockFulfillments.length===0)}}function u4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Transferred"),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.projectName||"-"),c(2),g(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),g(i.formatDate(e.createdAt))}}function p4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Project"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,u4,12,4,"tr",87),a()()),n&2){let e=f(5);c(14),p("ngForOf",e.inlineMaterialTransfers)}}function m4(n,t){n&1&&(o(0,"div",108),l(1,"No material transfers yet"),a())}function f4(n,t){if(n&1&&(o(0,"div",103),x(1,p4,15,1,"table",104)(2,m4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlineMaterialTransfers.length>0),c(),p("ngIf",e.inlineMaterialTransfers.length===0)}}function g4(n,t){if(n&1){let e=T();o(0,"div",78)(1,"div",79)(2,"div",80)(3,"h4"),l(4,"Select Items for Fulfillment"),a(),x(5,XA,2,1,"span",81),a(),o(6,"table",82)(7,"thead")(8,"tr")(9,"th",83)(10,"input",84),y("change",function(r){h(e);let s=f(3);return _(s.toggleAllInlineItems(r))}),a()(),o(11,"th"),l(12,"Item"),a(),o(13,"th",85),l(14,"Required"),a(),o(15,"th",85),l(16,"Fulfilled"),a(),o(17,"th",85),l(18,"Remaining"),a(),o(19,"th",86),l(20,"Qty to Fulfill"),a()()(),o(21,"tbody"),x(22,e4,13,8,"tr",87)(23,t4,3,0,"tr",88),a()(),x(24,n4,7,0,"div",89),a(),o(25,"div",90)(26,"div",91)(27,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="purchaseOrders")}),v(28,"i",76),l(29),a(),o(30,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="stockFulfillments")}),v(31,"i",93),l(32),a(),o(33,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="materialTransfers")}),v(34,"i",94),l(35),a()(),x(36,a4,3,2,"div",95)(37,d4,3,2,"div",95)(38,f4,3,2,"div",95),a()()}if(n&2){let e=f(3);c(5),p("ngIf",e.getSelectedItemsCount()>0),c(17),p("ngForOf",e.inlineSelectableItems),c(),p("ngIf",e.inlineSelectableItems.length===0),c(),p("ngIf",e.inlineSelectableItems.length>0),c(3),J("active",e.inlineTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.inlinePurchaseOrders.length,") "),c(),J("active",e.inlineTabActive==="stockFulfillments"),c(2),D(" Fulfilled Stocks (",e.inlineStockFulfillments.length,") "),c(),J("active",e.inlineTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.inlineMaterialTransfers.length,") "),c(),p("ngIf",e.inlineTabActive==="purchaseOrders"),c(),p("ngIf",e.inlineTabActive==="stockFulfillments"),c(),p("ngIf",e.inlineTabActive==="materialTransfers")}}function h4(n,t){if(n&1){let e=T();o(0,"div",65)(1,"div",66)(2,"div",38)(3,"span",39),l(4),a(),o(5,"div",67)(6,"span",40),l(7),a(),o(8,"button",68),y("click",function(r){let s=h(e).$implicit,d=f(2);return _(d.togglePRExpand(s,r))}),v(9,"i",69),a()()(),o(10,"div",41),l(11),a(),o(12,"div",70),v(13,"div",71),o(14,"span",72),l(15),a()(),o(16,"div",59)(17,"button",73),y("click",function(r){let s=h(e).$implicit;return f(2).viewPR(s),_(r.stopPropagation())}),v(18,"i",74),a(),o(19,"button",75),y("click",function(r){let s=h(e).$implicit,d=f(2);return _(d.convertToPO(s,r))}),v(20,"i",76),a()(),o(21,"div",46)(22,"span",47),v(23,"i",48),l(24),a()()(),x(25,g4,39,16,"div",77),a()}if(n&2){let e=t.$implicit,i=f(2);c(),J("expanded",i.expandedPRId===e.id),c(3),g(e.prNumber),c(2),p("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(),p("title",i.expandedPRId===e.id?"Collapse":"Expand"),c(),J("fa-chevron-down",i.expandedPRId!==e.id)("fa-chevron-up",i.expandedPRId===e.id),c(2),g(e.department),c(2),Mt("width",i.calculateFulfillmentProgress(e),"%"),c(2),D("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(9),D(" Comments: ",e.commentsCount||0),c(),p("ngIf",i.expandedPRId===e.id)}}function _4(n,t){n&1&&(o(0,"div",56),v(1,"i",110),o(2,"span"),l(3,"No Approved Requisitions"),a()())}function v4(n,t){if(n&1&&(o(0,"span",96),l(1),a()),n&2){let e=f(4);c(),D("",e.getSelectedItemsCount()," selected")}}function y4(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",97),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",98),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit,i=f(4);c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(i.getRemainingQty(e)),c(2),S("ngModel",e.fulfillQty),p("max",i.getRemainingQty(e))("disabled",!e.selected)}}function b4(n,t){n&1&&(o(0,"tr")(1,"td",99),l(2,"All items have been fulfilled"),a()())}function C4(n,t){if(n&1){let e=T();o(0,"div",100)(1,"button",101),y("click",function(r){h(e);let s=f(2).$implicit,d=f(2);return _(d.openInlineStockFulfillment(s,r))}),v(2,"i",93),l(3," Fulfill from Stock "),a(),o(4,"button",102),y("click",function(r){h(e);let s=f(2).$implicit,d=f(2);return _(d.openInlineMaterialTransfer(s,r))}),v(5,"i",94),l(6," Material Transfer "),a()()}}function x4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",107),l(9),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.poNumber),c(2),g(e.supplierName),c(2),g(i.formatDate(e.poDate)),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function S4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Date"),a(),o(9,"th"),l(10,"Status"),a()()(),o(11,"tbody"),x(12,x4,10,5,"tr",87),a()()),n&2){let e=f(5);c(12),p("ngForOf",e.inlinePurchaseOrders)}}function M4(n,t){n&1&&(o(0,"div",108),l(1,"No purchase orders created yet"),a())}function E4(n,t){if(n&1&&(o(0,"div",103),x(1,S4,13,1,"table",104)(2,M4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlinePurchaseOrders.length>0),c(),p("ngIf",e.inlinePurchaseOrders.length===0)}}function w4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Fulfilled"),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.warehouseName||"-"),c(2),g(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),g(i.formatDate(e.createdAt))}}function I4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Warehouse"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,w4,12,4,"tr",87),a()()),n&2){let e=f(5);c(14),p("ngForOf",e.inlineStockFulfillments)}}function P4(n,t){n&1&&(o(0,"div",108),l(1,"No stock fulfillments yet"),a())}function D4(n,t){if(n&1&&(o(0,"div",103),x(1,I4,15,1,"table",104)(2,P4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlineStockFulfillments.length>0),c(),p("ngIf",e.inlineStockFulfillments.length===0)}}function T4(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Transferred"),a()()()),n&2){let e=t.$implicit,i=f(6);c(2),g(e.projectName||"-"),c(2),g(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),g(i.formatDate(e.createdAt))}}function O4(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Project"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,T4,12,4,"tr",87),a()()),n&2){let e=f(5);c(14),p("ngForOf",e.inlineMaterialTransfers)}}function k4(n,t){n&1&&(o(0,"div",108),l(1,"No material transfers yet"),a())}function N4(n,t){if(n&1&&(o(0,"div",103),x(1,O4,15,1,"table",104)(2,k4,2,0,"div",105),a()),n&2){let e=f(4);c(),p("ngIf",e.inlineMaterialTransfers.length>0),c(),p("ngIf",e.inlineMaterialTransfers.length===0)}}function R4(n,t){if(n&1){let e=T();o(0,"div",78)(1,"div",79)(2,"div",80)(3,"h4"),l(4,"Select Items for Fulfillment"),a(),x(5,v4,2,1,"span",81),a(),o(6,"table",82)(7,"thead")(8,"tr")(9,"th",83)(10,"input",84),y("change",function(r){h(e);let s=f(3);return _(s.toggleAllInlineItems(r))}),a()(),o(11,"th"),l(12,"Item"),a(),o(13,"th",85),l(14,"Required"),a(),o(15,"th",85),l(16,"Fulfilled"),a(),o(17,"th",85),l(18,"Remaining"),a(),o(19,"th",86),l(20,"Qty to Fulfill"),a()()(),o(21,"tbody"),x(22,y4,13,8,"tr",87)(23,b4,3,0,"tr",88),a()(),x(24,C4,7,0,"div",89),a(),o(25,"div",90)(26,"div",91)(27,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="purchaseOrders")}),v(28,"i",76),l(29),a(),o(30,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="stockFulfillments")}),v(31,"i",93),l(32),a(),o(33,"button",92),y("click",function(){h(e);let r=f(3);return _(r.inlineTabActive="materialTransfers")}),v(34,"i",94),l(35),a()(),x(36,E4,3,2,"div",95)(37,D4,3,2,"div",95)(38,N4,3,2,"div",95),a()()}if(n&2){let e=f(3);c(5),p("ngIf",e.getSelectedItemsCount()>0),c(17),p("ngForOf",e.inlineSelectableItems),c(),p("ngIf",e.inlineSelectableItems.length===0),c(),p("ngIf",e.inlineSelectableItems.length>0),c(3),J("active",e.inlineTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.inlinePurchaseOrders.length,") "),c(),J("active",e.inlineTabActive==="stockFulfillments"),c(2),D(" Fulfilled Stocks (",e.inlineStockFulfillments.length,") "),c(),J("active",e.inlineTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.inlineMaterialTransfers.length,") "),c(),p("ngIf",e.inlineTabActive==="purchaseOrders"),c(),p("ngIf",e.inlineTabActive==="stockFulfillments"),c(),p("ngIf",e.inlineTabActive==="materialTransfers")}}function A4(n,t){if(n&1){let e=T();o(0,"div",65)(1,"div",66)(2,"div",38)(3,"span",39),l(4),a(),o(5,"div",67)(6,"span",40),l(7),a(),o(8,"button",68),y("click",function(r){let s=h(e).$implicit,d=f(2);return _(d.togglePRExpand(s,r))}),v(9,"i",69),a()()(),o(10,"div",41),l(11),a(),o(12,"div",70),v(13,"div",71),o(14,"span",72),l(15),a()(),o(16,"div",59)(17,"button",73),y("click",function(r){let s=h(e).$implicit;return f(2).viewPR(s),_(r.stopPropagation())}),v(18,"i",74),a(),o(19,"button",75),y("click",function(r){let s=h(e).$implicit,d=f(2);return _(d.convertToPO(s,r))}),v(20,"i",76),a()(),o(21,"div",46)(22,"span",47),v(23,"i",48),l(24),a()()(),x(25,R4,39,16,"div",77),a()}if(n&2){let e=t.$implicit,i=f(2);c(),J("expanded",i.expandedPRId===e.id),c(3),g(e.prNumber),c(2),p("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(),p("title",i.expandedPRId===e.id?"Collapse":"Expand"),c(),J("fa-chevron-down",i.expandedPRId!==e.id)("fa-chevron-up",i.expandedPRId===e.id),c(2),g(e.department),c(2),Mt("width",i.calculateFulfillmentProgress(e),"%"),c(2),D("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(9),D(" Comments: ",e.commentsCount||0),c(),p("ngIf",i.expandedPRId===e.id)}}function F4(n,t){n&1&&(o(0,"div",56),v(1,"i",111),o(2,"span"),l(3,"No Partially Fulfilled"),a()())}function V4(n,t){if(n&1){let e=T();o(0,"div",112),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",113),v(5,"i",110),l(6," Completed"),a()(),o(7,"div",41),l(8),a(),o(9,"div",42)(10,"div",43)(11,"span",44),l(12,"Date:"),a(),o(13,"span",45),l(14),a()()(),o(15,"div",46)(16,"span",47),v(17,"i",48),l(18),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(5),g(e.department),c(6),g(i.formatDate(e.prDate)),c(4),D(" Comments: ",e.commentsCount||0)}}function L4(n,t){n&1&&(o(0,"div",56),v(1,"i",114),o(2,"span"),l(3,"No Fulfilled Requisitions"),a()())}function j4(n,t){if(n&1&&(o(0,"div",43)(1,"span",44),l(2,"Reason:"),a(),o(3,"span",120),l(4),a()()),n&2){let e=f().$implicit;c(4),g(e.rejectionReason)}}function B4(n,t){if(n&1&&(o(0,"span",121),l(1),a()),n&2){let e=f().$implicit;c(),D("By: ",e.rejectedBy)}}function W4(n,t){if(n&1){let e=T();o(0,"div",115),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",116),v(5,"i",117),l(6," Rejected"),a()(),o(7,"div",41),l(8),a(),o(9,"div",42),x(10,j4,5,1,"div",118),a(),o(11,"div",46),x(12,B4,2,1,"span",119),a()()}if(n&2){let e=t.$implicit;c(3),g(e.prNumber),c(5),g(e.department),c(2),p("ngIf",e.rejectionReason),c(2),p("ngIf",e.rejectedBy)}}function U4(n,t){n&1&&(o(0,"div",56),v(1,"i",122),o(2,"span"),l(3,"No Rejected Requisitions"),a()())}function G4(n,t){if(n&1&&(o(0,"div",21)(1,"div",22)(2,"div",23)(3,"span",24),l(4,"Draft"),a(),o(5,"span",25),l(6),a()(),o(7,"div",26),x(8,QA,30,7,"div",27)(9,KA,4,0,"div",28),a()(),o(10,"div",29)(11,"div",23)(12,"span",24),l(13,"Submitted"),a(),o(14,"span",25),l(15),a()(),o(16,"div",26),x(17,ZA,24,8,"div",27)(18,JA,4,0,"div",28),a()(),o(19,"div",30)(20,"div",23)(21,"span",24),l(22,"Approved"),a(),o(23,"span",25),l(24),a()(),o(25,"div",26),x(26,h4,26,16,"div",31)(27,_4,4,0,"div",28),a()(),o(28,"div",32)(29,"div",23)(30,"span",24),l(31,"Partially Fulfilled"),a(),o(32,"span",25),l(33),a()(),o(34,"div",26),x(35,A4,26,16,"div",31)(36,F4,4,0,"div",28),a()(),o(37,"div",33)(38,"div",23)(39,"span",24),l(40,"Fully Fulfilled"),a(),o(41,"span",25),l(42),a()(),o(43,"div",26),x(44,V4,19,4,"div",34)(45,L4,4,0,"div",28),a()(),o(46,"div",35)(47,"div",23)(48,"span",24),l(49,"Rejected"),a(),o(50,"span",25),l(51),a()(),o(52,"div",26),x(53,W4,13,4,"div",36)(54,U4,4,0,"div",28),a()()()),n&2){let e=f();c(6),D("",e.getFilteredPRs(e.draftPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.draftPRs)),c(),p("ngIf",e.getFilteredPRs(e.draftPRs).length===0),c(6),D("",e.getFilteredPRs(e.submittedPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.submittedPRs)),c(),p("ngIf",e.getFilteredPRs(e.submittedPRs).length===0),c(6),D("",e.getFilteredPRs(e.approvedPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.approvedPRs)),c(),p("ngIf",e.getFilteredPRs(e.approvedPRs).length===0),c(6),D("",e.getFilteredPRs(e.partiallyFulfilledPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.partiallyFulfilledPRs)),c(),p("ngIf",e.getFilteredPRs(e.partiallyFulfilledPRs).length===0),c(6),D("",e.getFilteredPRs(e.fullyFulfilledPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.fullyFulfilledPRs)),c(),p("ngIf",e.getFilteredPRs(e.fullyFulfilledPRs).length===0),c(6),D("",e.getFilteredPRs(e.rejectedPRs).length," Requisitions"),c(2),p("ngForOf",e.getFilteredPRs(e.rejectedPRs)),c(),p("ngIf",e.getFilteredPRs(e.rejectedPRs).length===0)}}function q4(n,t){n&1&&(o(0,"tr")(1,"td",127),v(2,"i",57),o(3,"p"),l(4,"No requisitions found"),a()()())}function H4(n,t){if(n&1){let e=T();o(0,"button",52),y("click",function(r){h(e);let s=f().$implicit;return f(2).openEditModal(s),_(r.stopPropagation())}),v(1,"i",53),a()}}function z4(n,t){if(n&1){let e=T();o(0,"button",141),y("click",function(r){h(e);let s=f().$implicit;return f(2).viewPR(s),_(r.stopPropagation())}),v(1,"i",74),a()}}function $4(n,t){if(n&1){let e=T();o(0,"button",54),y("click",function(r){h(e);let s=f().$implicit;return f(2).deletePR(s),_(r.stopPropagation())}),v(1,"i",55),a()}}function Q4(n,t){if(n&1){let e=T();o(0,"button",142),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.approvePR(s,r))}),v(1,"i",61),a()}}function K4(n,t){if(n&1){let e=T();o(0,"button",143),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.rejectPR(s,r))}),v(1,"i",63),a()}}function Y4(n,t){if(n&1){let e=T();o(0,"button",144),y("click",function(r){h(e);let s=f().$implicit;return f(2).openViewModal(s),_(r.stopPropagation())}),v(1,"i",74),a()}}function Z4(n,t){if(n&1){let e=T();o(0,"button",145),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.convertToPO(s,r))}),v(1,"i",76),a()}}function J4(n,t){if(n&1){let e=T();o(0,"button",146),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.openStockFulfillmentModal(s,r))}),v(1,"i",93),a()}}function X4(n,t){if(n&1){let e=T();o(0,"button",147),y("click",function(r){h(e);let s=f().$implicit,d=f(2);return _(d.openMaterialTransferModal(s,r))}),v(1,"i",94),a()}}function e5(n,t){n&1&&(o(0,"span",148),v(1,"i",110),l(2," Completed "),a())}function t5(n,t){if(n&1){let e=T();o(0,"tr",128),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPR(r))}),o(1,"td")(2,"strong",129),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",40),l(14),a()(),o(15,"td")(16,"span",107),l(17),a()(),o(18,"td")(19,"div",130)(20,"button",50),y("click",function(r){let s=h(e).$implicit;return f(2).printPR(s),_(r.stopPropagation())}),v(21,"i",51),a(),x(22,H4,2,0,"button",131)(23,z4,2,0,"button",132)(24,$4,2,0,"button",133)(25,Q4,2,0,"button",134)(26,K4,2,0,"button",135)(27,Y4,2,0,"button",136)(28,Z4,2,0,"button",137)(29,J4,2,0,"button",138)(30,X4,2,0,"button",139)(31,e5,3,0,"span",140),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(2),g(i.formatDate(e.prDate)),c(2),g(i.formatDate(e.requiredDate)),c(2),g(e.department),c(2),g(e.requestedBy),c(2),p("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(5),p("ngIf",i.canEdit(e)),c(),p("ngIf",!i.canEdit(e)),c(),p("ngIf",i.canDelete(e)),c(),p("ngIf",i.canApproveReject(e)),c(),p("ngIf",i.canApproveReject(e)),c(),p("ngIf",i.canConvertToPO(e)),c(),p("ngIf",i.canConvertToPO(e)),c(),p("ngIf",i.canFulfillFromStock(e)),c(),p("ngIf",i.canMaterialTransfer(e)),c(),p("ngIf",i.isCompleted(e))}}function n5(n,t){if(n&1&&(o(0,"div",123)(1,"div",124)(2,"table",125)(3,"thead")(4,"tr")(5,"th"),l(6,"PR Number"),a(),o(7,"th"),l(8,"PR Date"),a(),o(9,"th"),l(10,"Required Date"),a(),o(11,"th"),l(12,"Department"),a(),o(13,"th"),l(14,"Requested By"),a(),o(15,"th"),l(16,"Priority"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),x(22,q4,5,0,"tr",88)(23,t5,32,19,"tr",126),a()()()()),n&2){let e=f();c(22),p("ngIf",e.getAllFilteredPRs().length===0),c(),p("ngForOf",e.getAllFilteredPRs())}}function i5(n,t){if(n&1&&(o(0,"div",189)(1,"span",190),l(2,"Fulfillment Progress:"),a(),o(3,"div",191),v(4,"div",71),a(),o(5,"span",192),l(6),a()()),n&2){let e=f(2);c(4),Mt("width",e.calculateFulfillmentProgress(e.selectedPR),"%"),c(2),D("",e.calculateFulfillmentProgress(e.selectedPR),"%")}}function r5(n,t){if(n&1){let e=T();o(0,"button",182),y("click",function(){h(e);let r=f(2);return _(r.addItem())}),v(1,"i",3),l(2," Add Item "),a()}}function o5(n,t){n&1&&(o(0,"th",85),l(1,"Fulfilled"),a())}function a5(n,t){n&1&&(o(0,"th",177),l(1,"Status"),a())}function s5(n,t){n&1&&(o(0,"th",193),l(1,"Action"),a())}function l5(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function c5(n,t){if(n&1&&(o(0,"td")(1,"span",202),l(2),a()()),n&2){let e=f().$implicit;c(2),le("",e.fulfilledQuantity||0," / ",e.quantity)}}function d5(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;p("value",e.symbol||e.code),c(),le("",e.name," (",e.symbol||e.code,")")}}function u5(n,t){if(n&1&&(o(0,"td")(1,"span",203),l(2),a()()),n&2){let e=f().$implicit,i=f(2);c(),p("ngClass",i.getItemStatusClass(e.status)),c(),D(" ",e.status||"Pending"," ")}}function p5(n,t){if(n&1){let e=T();o(0,"td")(1,"button",204),y("click",function(){h(e);let r=f().index,s=f(2);return _(s.removeItem(r))}),v(2,"i",55),a()()}if(n&2){let e=f(3);c(),p("disabled",e.selectedPR.items.length<=1)}}function m5(n,t){if(n&1){let e=T();o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"select",194),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemName,r)||(s.itemName=r),_(r)}),y("change",function(){let r=h(e).index,s=f(2);return _(s.onItemSelect(r))}),o(5,"option",195),l(6,"Select Item"),a(),x(7,l5,2,2,"option",196),a()(),o(8,"td")(9,"input",197),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemDescription,r)||(s.itemDescription=r),_(r)}),a()(),o(10,"td")(11,"input",198),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),a()(),x(12,c5,3,2,"td",88),o(13,"td")(14,"select",199),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.uom,r)||(s.uom=r),_(r)}),o(15,"option",195),l(16,"Select UOM"),a(),x(17,d5,2,3,"option",196),a()(),x(18,u5,3,2,"td",88),o(19,"td")(20,"input",200),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.remarks,r)||(s.remarks=r),_(r)}),a()(),x(21,p5,3,1,"td",88),a()}if(n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(2),S("ngModel",e.itemName),p("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),p("ngForOf",r.items),c(2),S("ngModel",e.itemDescription),p("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(2),S("ngModel",e.quantity),p("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),p("ngIf",r.selectedPR.status!=="Draft"),c(2),S("ngModel",e.uom),p("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),p("ngForOf",r.units),c(),p("ngIf",r.selectedPR.status!=="Draft"),c(2),S("ngModel",e.remarks),p("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),p("ngIf",r.canSubmit(r.selectedPR))}}function f5(n,t){n&1&&(o(0,"div",108),v(1,"i",76),o(2,"p"),l(3,"No purchase orders created for this PR yet."),a()())}function g5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",107),l(11),a()()()),n&2){let e=t.$implicit,i=f(5);c(2),g(e.poNumber),c(2),g(i.formatDate(e.poDate)),c(2),g(e.supplierName),c(2),g(e.itemCount||(e.items==null?null:e.items.length)||0),c(2),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function h5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Supplier"),a(),o(9,"th"),l(10,"Items"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,g5,12,6,"tr",87),a()()),n&2){let e=f(4);c(14),p("ngForOf",e.purchaseOrders)}}function _5(n,t){if(n&1&&(o(0,"div",103),x(1,f5,4,0,"div",105)(2,h5,15,1,"table",208),a()),n&2){let e=f(3);c(),p("ngIf",e.purchaseOrders.length===0),c(),p("ngIf",e.purchaseOrders.length>0)}}function v5(n,t){n&1&&(o(0,"div",108),v(1,"i",93),o(2,"p"),l(3,"No stock fulfillments for this PR yet."),a()())}function y5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=f(5);c(2),g(e.fulfillmentNumber),c(2),g(i.formatDate(e.fulfillmentDate)),c(2),g(e.warehouseName||"-"),c(2),g(e.supplierName||"-"),c(2),g((e.items==null?null:e.items.length)||0)}}function b5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Fulfillment #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Warehouse"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),x(14,y5,11,5,"tr",87),a()()),n&2){let e=f(4);c(14),p("ngForOf",e.stockFulfillments)}}function C5(n,t){if(n&1&&(o(0,"div",103),x(1,v5,4,0,"div",105)(2,b5,15,1,"table",208),a()),n&2){let e=f(3);c(),p("ngIf",e.stockFulfillments.length===0),c(),p("ngIf",e.stockFulfillments.length>0)}}function x5(n,t){n&1&&(o(0,"div",108),v(1,"i",94),o(2,"p"),l(3,"No material transfers for this PR yet."),a()())}function S5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=f(5);c(2),g(e.transferNumber),c(2),g(i.formatDate(e.transferDate)),c(2),g(e.projectName||"-"),c(2),g(e.supplierName||"-"),c(2),g((e.items==null?null:e.items.length)||0)}}function M5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Transfer #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Project"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),x(14,S5,11,5,"tr",87),a()()),n&2){let e=f(4);c(14),p("ngForOf",e.materialTransfers)}}function E5(n,t){if(n&1&&(o(0,"div",103),x(1,x5,4,0,"div",105)(2,M5,15,1,"table",208),a()),n&2){let e=f(3);c(),p("ngIf",e.materialTransfers.length===0),c(),p("ngIf",e.materialTransfers.length>0)}}function w5(n,t){if(n&1){let e=T();o(0,"div",205)(1,"div",206)(2,"button",207),y("click",function(){h(e);let r=f(2);return _(r.viewTabActive="purchaseOrders")}),v(3,"i",76),l(4),a(),o(5,"button",207),y("click",function(){h(e);let r=f(2);return _(r.viewTabActive="stockFulfillments")}),v(6,"i",93),l(7),a(),o(8,"button",207),y("click",function(){h(e);let r=f(2);return _(r.viewTabActive="materialTransfers")}),v(9,"i",94),l(10),a()(),x(11,_5,3,2,"div",95)(12,C5,3,2,"div",95)(13,E5,3,2,"div",95),a()}if(n&2){let e=f(2);c(2),J("active",e.viewTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.purchaseOrders.length,") "),c(),J("active",e.viewTabActive==="stockFulfillments"),c(2),D(" Stock Fulfillments (",e.stockFulfillments.length,") "),c(),J("active",e.viewTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.materialTransfers.length,") "),c(),p("ngIf",e.viewTabActive==="purchaseOrders"),c(),p("ngIf",e.viewTabActive==="stockFulfillments"),c(),p("ngIf",e.viewTabActive==="materialTransfers")}}function I5(n,t){if(n&1){let e=T();o(0,"button",2),y("click",function(){h(e);let r=f(2);return _(r.saveDraft())}),v(1,"i",209),l(2," Save as Draft "),a()}}function P5(n,t){if(n&1){let e=T();o(0,"button",210),y("click",function(){h(e);let r=f(2);return _(r.submitPR())}),v(1,"i",64),l(2," Submit "),a()}}function D5(n,t){if(n&1){let e=T();o(0,"button",211),y("click",function(){h(e);let r=f(2);return _(r.approvePR(r.selectedPR))}),v(1,"i",61),l(2," Approve "),a()}}function T5(n,t){if(n&1){let e=T();o(0,"button",212),y("click",function(){h(e);let r=f(2);return _(r.rejectPR(r.selectedPR))}),v(1,"i",63),l(2," Reject "),a()}}function O5(n,t){if(n&1){let e=T();o(0,"button",182),y("click",function(){h(e);let r=f(2);return _(r.openViewModal(r.selectedPR))}),v(1,"i",74),l(2," View History "),a()}}function k5(n,t){if(n&1){let e=T();o(0,"button",2),y("click",function(){h(e);let r=f(2);return _(r.convertToPO(r.selectedPR))}),v(1,"i",76),l(2," Convert to PO "),a()}}function N5(n,t){if(n&1){let e=T();o(0,"button",182),y("click",function(){h(e);let r=f(2);return _(r.openStockFulfillmentModal(r.selectedPR))}),v(1,"i",93),l(2," Fulfill from Stock "),a()}}function R5(n,t){if(n&1){let e=T();o(0,"button",182),y("click",function(){h(e);let r=f(2);return _(r.openMaterialTransferModal(r.selectedPR))}),v(1,"i",94),l(2," Material Transfer "),a()}}function A5(n,t){n&1&&(o(0,"span",213),v(1,"i",110),l(2," This requisition has been fully fulfilled "),a())}function F5(n,t){n&1&&(o(0,"span",214),v(1,"i",117),l(2," This requisition was rejected "),a())}function V5(n,t){if(n&1){let e=T();o(0,"div",149),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",150),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"PR Number"),a(),o(12,"input",156),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.prNumber,r)||(s.selectedPR.prNumber=r),_(r)}),a()(),o(13,"div",155)(14,"label"),l(15,"PR Date *"),a(),o(16,"input",157),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.prDate,r)||(s.selectedPR.prDate=r),_(r)}),a()(),o(17,"div",155)(18,"label"),l(19,"Required Date *"),a(),o(20,"input",157),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.requiredDate,r)||(s.selectedPR.requiredDate=r),_(r)}),a()(),o(21,"div",155)(22,"label"),l(23,"Requested By"),a(),o(24,"input",156),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.requestedBy,r)||(s.selectedPR.requestedBy=r),_(r)}),a()(),o(25,"div",155)(26,"label"),l(27,"Department / Project *"),a(),o(28,"input",158),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.department,r)||(s.selectedPR.department=r),_(r)}),a()(),o(29,"div",155)(30,"label"),l(31,"Delivery Location"),a(),o(32,"input",159),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.deliveryLocation,r)||(s.selectedPR.deliveryLocation=r),_(r)}),a()(),o(33,"div",160)(34,"label"),l(35,"Purpose"),a(),o(36,"textarea",161),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.purpose,r)||(s.selectedPR.purpose=r),_(r)}),a()(),o(37,"div",155)(38,"label"),l(39,"Priority *"),a(),o(40,"select",162),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPR.priority,r)||(s.selectedPR.priority=r),_(r)}),o(41,"option",163),l(42,"Normal"),a(),o(43,"option",164),l(44,"Urgent"),a(),o(45,"option",165),l(46,"Critical"),a()()(),o(47,"div",155)(48,"label"),l(49,"Status"),a(),v(50,"input",166),a()(),o(51,"div",167)(52,"div",168)(53,"h3"),l(54,"Material List"),a(),o(55,"div",169),x(56,i5,7,3,"div",170)(57,r5,3,0,"button",171),a()(),o(58,"div",172)(59,"table",173)(60,"thead")(61,"tr")(62,"th",174),l(63,"#"),a(),o(64,"th",175),l(65,"Item Name *"),a(),o(66,"th"),l(67,"Item Description"),a(),o(68,"th",85),l(69,"Qty *"),a(),x(70,o5,2,0,"th",176),o(71,"th",177),l(72,"UOM"),a(),x(73,a5,2,0,"th",178),o(74,"th"),l(75,"Remarks"),a(),x(76,s5,2,0,"th",179),a()(),o(77,"tbody"),x(78,m5,22,16,"tr",87),a()()()(),x(79,w5,14,12,"div",180),a(),o(80,"div",181)(81,"button",182),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(82,"Cancel"),a(),x(83,I5,3,0,"button",183)(84,P5,3,0,"button",184)(85,D5,3,0,"button",185)(86,T5,3,0,"button",186)(87,O5,3,0,"button",171)(88,k5,3,0,"button",183)(89,N5,3,0,"button",171)(90,R5,3,0,"button",171)(91,A5,3,0,"span",187)(92,F5,3,0,"span",188),a()()()}if(n&2){let e=f();c(4),g(e.isEditing?"Edit Requisition":"New Purchase Requisition"),c(8),S("ngModel",e.selectedPR.prNumber),c(4),S("ngModel",e.selectedPR.prDate),c(4),S("ngModel",e.selectedPR.requiredDate),c(4),S("ngModel",e.selectedPR.requestedBy),c(4),S("ngModel",e.selectedPR.department),c(4),S("ngModel",e.selectedPR.deliveryLocation),c(4),S("ngModel",e.selectedPR.purpose),c(4),S("ngModel",e.selectedPR.priority),c(10),p("value",e.selectedPR.status),c(6),p("ngIf",e.selectedPR.status!=="Draft"&&e.selectedPR.status!=="Submitted"&&e.selectedPR.status!=="Rejected"),c(),p("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(13),p("ngIf",e.selectedPR.status!=="Draft"),c(3),p("ngIf",e.selectedPR.status!=="Draft"),c(3),p("ngIf",e.canSubmit(e.selectedPR)),c(2),p("ngForOf",e.selectedPR.items),c(),p("ngIf",e.isEditing&&(e.selectedPR.status==="Approved"||e.selectedPR.status==="Partially Fulfilled"||e.selectedPR.status==="Fully Fulfilled")),c(4),p("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),p("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),p("ngIf",e.canApproveReject(e.selectedPR)),c(),p("ngIf",e.canApproveReject(e.selectedPR)),c(),p("ngIf",e.canConvertToPO(e.selectedPR)),c(),p("ngIf",e.canConvertToPO(e.selectedPR)),c(),p("ngIf",e.canFulfillFromStock(e.selectedPR)),c(),p("ngIf",e.canMaterialTransfer(e.selectedPR)),c(),p("ngIf",e.isCompleted(e.selectedPR)),c(),p("ngIf",e.isRejected(e.selectedPR))}}function L5(n,t){n&1&&(o(0,"div",108),v(1,"i",76),o(2,"p"),l(3,"No purchase orders created for this PR yet."),a()())}function j5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",215),l(11),a()()()),n&2){let e=t.$implicit,i=f(4);c(2),g(e.poNumber),c(2),g(i.formatDate(e.poDate)),c(2),g(e.supplierName),c(2),g(e.itemCount||(e.items==null?null:e.items.length)||0),c(3),g(e.status)}}function B5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Supplier"),a(),o(9,"th"),l(10,"Items"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),x(14,j5,12,5,"tr",87),a()()),n&2){let e=f(3);c(14),p("ngForOf",e.purchaseOrders)}}function W5(n,t){if(n&1&&(o(0,"div",103),x(1,L5,4,0,"div",105)(2,B5,15,1,"table",208),a()),n&2){let e=f(2);c(),p("ngIf",e.purchaseOrders.length===0),c(),p("ngIf",e.purchaseOrders.length>0)}}function U5(n,t){n&1&&(o(0,"div",108),v(1,"i",93),o(2,"p"),l(3,"No stock fulfillments for this PR yet."),a()())}function G5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=f(4);c(2),g(e.fulfillmentNumber),c(2),g(i.formatDate(e.fulfillmentDate)),c(2),g(e.warehouseName||"-"),c(2),g(e.supplierName||"-"),c(2),g((e.items==null?null:e.items.length)||0)}}function q5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Fulfillment #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Warehouse"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),x(14,G5,11,5,"tr",87),a()()),n&2){let e=f(3);c(14),p("ngForOf",e.stockFulfillments)}}function H5(n,t){if(n&1&&(o(0,"div",103),x(1,U5,4,0,"div",105)(2,q5,15,1,"table",208),a()),n&2){let e=f(2);c(),p("ngIf",e.stockFulfillments.length===0),c(),p("ngIf",e.stockFulfillments.length>0)}}function z5(n,t){n&1&&(o(0,"div",108),v(1,"i",94),o(2,"p"),l(3,"No material transfers for this PR yet."),a()())}function $5(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=f(4);c(2),g(e.transferNumber),c(2),g(i.formatDate(e.transferDate)),c(2),g(e.projectName||"-"),c(2),g(e.supplierName||"-"),c(2),g((e.items==null?null:e.items.length)||0)}}function Q5(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Transfer #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Project"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),x(14,$5,11,5,"tr",87),a()()),n&2){let e=f(3);c(14),p("ngForOf",e.materialTransfers)}}function K5(n,t){if(n&1&&(o(0,"div",103),x(1,z5,4,0,"div",105)(2,Q5,15,1,"table",208),a()),n&2){let e=f(2);c(),p("ngIf",e.materialTransfers.length===0),c(),p("ngIf",e.materialTransfers.length>0)}}function Y5(n,t){if(n&1){let e=T();o(0,"div",149),y("click",function(){h(e);let r=f();return _(r.closeViewModal())}),o(1,"div",150),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),y("click",function(){h(e);let r=f();return _(r.closeViewModal())}),v(6,"i",63),a()(),o(7,"div",153)(8,"div",206)(9,"button",207),y("click",function(){h(e);let r=f();return _(r.viewTabActive="purchaseOrders")}),v(10,"i",76),l(11),a(),o(12,"button",207),y("click",function(){h(e);let r=f();return _(r.viewTabActive="stockFulfillments")}),v(13,"i",93),l(14),a(),o(15,"button",207),y("click",function(){h(e);let r=f();return _(r.viewTabActive="materialTransfers")}),v(16,"i",94),l(17),a()(),x(18,W5,3,2,"div",95)(19,H5,3,2,"div",95)(20,K5,3,2,"div",95),a(),o(21,"div",181)(22,"button",182),y("click",function(){h(e);let r=f();return _(r.closeViewModal())}),l(23,"Close"),a()()()()}if(n&2){let e=f();c(4),D("PR History - ",e.selectedPR.prNumber),c(5),J("active",e.viewTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.purchaseOrders.length,") "),c(),J("active",e.viewTabActive==="stockFulfillments"),c(2),D(" Stock Fulfillments (",e.stockFulfillments.length,") "),c(),J("active",e.viewTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.materialTransfers.length,") "),c(),p("ngIf",e.viewTabActive==="purchaseOrders"),c(),p("ngIf",e.viewTabActive==="stockFulfillments"),c(),p("ngIf",e.viewTabActive==="materialTransfers")}}function Z5(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le("",e.name," (",e.code,")")}}function J5(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function X5(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",97),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",218),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(i.getRemainingQty(e)),c(2),S("ngModel",e.fulfillQty),p("max",i.getRemainingQty(e))("disabled",!e.selected)}}function eF(n,t){if(n&1){let e=T();o(0,"div",149),y("click",function(){h(e);let r=f();return _(r.closeStockFulfillmentModal())}),o(1,"div",150),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),y("click",function(){h(e);let r=f();return _(r.closeStockFulfillmentModal())}),v(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"Warehouse"),a(),o(12,"select",216),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouseId,r)||(s.selectedWarehouseId=r),_(r)}),o(13,"option",201),l(14,"Select Warehouse"),a(),x(15,Z5,2,3,"option",196),a()(),o(16,"div",155)(17,"label"),l(18,"Supplier"),a(),o(19,"select",216),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplierId,r)||(s.selectedSupplierId=r),_(r)}),o(20,"option",201),l(21,"Select Supplier"),a(),x(22,J5,2,2,"option",196),a()(),o(23,"div",160)(24,"label"),l(25,"Remarks"),a(),o(26,"textarea",217),M("ngModelChange",function(r){h(e);let s=f();return E(s.stockFulfillmentRemarks,r)||(s.stockFulfillmentRemarks=r),_(r)}),a()()(),o(27,"div",167)(28,"div",168)(29,"h3"),l(30,"Select Items to Fulfill"),a()(),o(31,"div",172)(32,"table",173)(33,"thead")(34,"tr")(35,"th",83)(36,"input",84),y("change",function(r){h(e);let s=f();return _(s.toggleAllItems(s.stockFulfillmentItems,r))}),a()(),o(37,"th"),l(38,"Item Name"),a(),o(39,"th",177),l(40,"Required"),a(),o(41,"th",177),l(42,"Already Fulfilled"),a(),o(43,"th",177),l(44,"Remaining"),a(),o(45,"th",177),l(46,"Qty to Fulfill"),a()()(),o(47,"tbody"),x(48,X5,13,8,"tr",87),a()()()()(),o(49,"div",181)(50,"button",182),y("click",function(){h(e);let r=f();return _(r.closeStockFulfillmentModal())}),l(51,"Cancel"),a(),o(52,"button",2),y("click",function(){h(e);let r=f();return _(r.saveStockFulfillment())}),v(53,"i",61),l(54," Fulfill Selected Items "),a()()()()}if(n&2){let e=f();c(4),D("Stock Fulfillment - ",e.selectedPR.prNumber),c(8),S("ngModel",e.selectedWarehouseId),c(),p("value",null),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedSupplierId),c(),p("value",null),c(2),p("ngForOf",e.suppliers),c(4),S("ngModel",e.stockFulfillmentRemarks),c(22),p("ngForOf",e.stockFulfillmentItems)}}function tF(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function nF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",97),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",218),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(i.getRemainingQty(e)),c(2),S("ngModel",e.fulfillQty),p("max",i.getRemainingQty(e))("disabled",!e.selected)}}function iF(n,t){if(n&1){let e=T();o(0,"div",149),y("click",function(){h(e);let r=f();return _(r.closeMaterialTransferModal())}),o(1,"div",150),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),y("click",function(){h(e);let r=f();return _(r.closeMaterialTransferModal())}),v(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"Project Name"),a(),o(12,"input",219),M("ngModelChange",function(r){h(e);let s=f();return E(s.transferProjectName,r)||(s.transferProjectName=r),_(r)}),a()(),o(13,"div",155)(14,"label"),l(15,"Supplier"),a(),o(16,"select",216),M("ngModelChange",function(r){h(e);let s=f();return E(s.transferSupplierId,r)||(s.transferSupplierId=r),_(r)}),o(17,"option",201),l(18,"Select Supplier"),a(),x(19,tF,2,2,"option",196),a()(),o(20,"div",160)(21,"label"),l(22,"Remarks"),a(),o(23,"textarea",217),M("ngModelChange",function(r){h(e);let s=f();return E(s.materialTransferRemarks,r)||(s.materialTransferRemarks=r),_(r)}),a()()(),o(24,"div",167)(25,"div",168)(26,"h3"),l(27,"Select Items to Transfer"),a()(),o(28,"div",172)(29,"table",173)(30,"thead")(31,"tr")(32,"th",83)(33,"input",84),y("change",function(r){h(e);let s=f();return _(s.toggleAllItems(s.materialTransferItems,r))}),a()(),o(34,"th"),l(35,"Item Name"),a(),o(36,"th",177),l(37,"Required"),a(),o(38,"th",177),l(39,"Already Fulfilled"),a(),o(40,"th",177),l(41,"Remaining"),a(),o(42,"th",177),l(43,"Qty to Transfer"),a()()(),o(44,"tbody"),x(45,nF,13,8,"tr",87),a()()()()(),o(46,"div",181)(47,"button",182),y("click",function(){h(e);let r=f();return _(r.closeMaterialTransferModal())}),l(48,"Cancel"),a(),o(49,"button",2),y("click",function(){h(e);let r=f();return _(r.saveMaterialTransfer())}),v(50,"i",61),l(51," Transfer Selected Items "),a()()()()}if(n&2){let e=f();c(4),D("Material Transfer - ",e.selectedPR.prNumber),c(8),S("ngModel",e.transferProjectName),c(4),S("ngModel",e.transferSupplierId),c(),p("value",null),c(2),p("ngForOf",e.suppliers),c(4),S("ngModel",e.materialTransferRemarks),c(22),p("ngForOf",e.materialTransferItems)}}var up=class n{constructor(t,e,i,r,s,d,u,m,b){this.prService=t;this.unitService=e;this.itemService=i;this.router=r;this.settingsService=s;this.warehouseService=d;this.supplierService=u;this.notificationService=m;this.authService=b;let C=this.authService.getCurrentUser();C&&(this.currentUserName=C.firstName&&C.lastName?`${C.firstName} ${C.lastName}`:C.username)}requisitions=[];draftPRs=[];submittedPRs=[];approvedPRs=[];partiallyFulfilledPRs=[];fullyFulfilledPRs=[];rejectedPRs=[];isAdmin=!0;units=[];items=[];warehouses=[];suppliers=[];showModal=!1;isEditing=!1;searchTerm="";viewMode="kanban";selectedPR=this.getEmptyPR();showViewModal=!1;viewTabActive="purchaseOrders";purchaseOrders=[];stockFulfillments=[];materialTransfers=[];showStockFulfillmentModal=!1;stockFulfillmentItems=[];selectedWarehouseId=null;selectedSupplierId=null;stockFulfillmentRemarks="";showMaterialTransferModal=!1;materialTransferItems=[];transferProjectName="";transferSupplierId=null;materialTransferRemarks="";sortOptions=[{value:"date-created",label:"Date Created"},{value:"pr-date",label:"PR Date"},{value:"priority",label:"Priority"}];currentSort="date-created";expandedPRId=null;inlineTabActive="purchaseOrders";inlinePurchaseOrders=[];inlineStockFulfillments=[];inlineMaterialTransfers=[];inlineSelectableItems=[];currentUserName="";ngOnInit(){this.loadData()}loadData(){this.prService.getAll().subscribe({next:t=>{this.requisitions=t,this.filterByStatus()},error:()=>{this.requisitions=[],this.filterByStatus()}}),this.unitService.getActive().subscribe({next:t=>this.units=t,error:()=>this.units=[]}),this.itemService.getActive().subscribe({next:t=>this.items=t,error:()=>this.items=[]}),this.warehouseService.getActiveWarehouses().subscribe({next:t=>this.warehouses=t,error:()=>this.warehouses=[]}),this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:()=>this.suppliers=[]})}filterByStatus(){this.draftPRs=this.requisitions.filter(t=>t.status==="Draft"),this.submittedPRs=this.requisitions.filter(t=>t.status==="Submitted"),this.approvedPRs=this.requisitions.filter(t=>t.status==="Approved"),this.partiallyFulfilledPRs=this.requisitions.filter(t=>t.status==="Partially Fulfilled"),this.fullyFulfilledPRs=this.requisitions.filter(t=>t.status==="Fully Fulfilled"),this.rejectedPRs=this.requisitions.filter(t=>t.status==="Rejected")}getFilteredPRs(t){if(!this.searchTerm)return t;let e=this.searchTerm.toLowerCase();return t.filter(i=>i.prNumber?.toLowerCase().includes(e)||i.department?.toLowerCase().includes(e)||i.requestedBy?.toLowerCase().includes(e))}getEmptyPR(){return{prNumber:"",prDate:new Date().toISOString().split("T")[0],requiredDate:"",requestedBy:this.currentUserName||"Current User",department:"",deliveryLocation:"",purpose:"",priority:"Normal",status:"Draft",items:[this.getEmptyItem()],commentsCount:0}}getEmptyItem(){return{itemId:void 0,itemCode:"",itemName:"",itemDescription:"",quantity:0,fulfilledQuantity:0,uom:"",remarks:"",status:"Pending"}}openNewModal(){this.isEditing=!1,this.selectedPR=this.getEmptyPR(),this.generatePRNumber(),this.showModal=!0}generatePRNumber(){this.settingsService.generatePrefixId("pr").subscribe({next:t=>{this.selectedPR.prNumber=t},error:t=>{console.error("Error generating PR number",t),this.selectedPR.prNumber=this.prService.generatePRNumber()}})}openEditModal(t){this.isEditing=!0,this.selectedPR=JSON.parse(JSON.stringify(t)),(!this.selectedPR.items||this.selectedPR.items.length===0)&&(this.selectedPR.items=[this.getEmptyItem()]),this.showModal=!0,this.viewTabActive="purchaseOrders",(t.status==="Approved"||t.status==="Partially Fulfilled"||t.status==="Fully Fulfilled")&&this.loadViewTabData()}viewPR(t){this.openEditModal(t)}closeModal(){this.showModal=!1,this.selectedPR=this.getEmptyPR(),this.purchaseOrders=[],this.stockFulfillments=[],this.materialTransfers=[]}addItem(){this.selectedPR.items.push(this.getEmptyItem())}removeItem(t){this.selectedPR.items.length>1&&this.selectedPR.items.splice(t,1)}onItemSelect(t){let e=this.items.find(i=>i.name===this.selectedPR.items[t].itemName);e&&(this.selectedPR.items[t].itemId=e.id,this.selectedPR.items[t].itemCode=e.code||"",this.selectedPR.items[t].itemDescription=e.description||"",this.selectedPR.items[t].uom=e.unitOfMeasure?.symbol||e.unitOfMeasure?.code||"")}saveDraft(){this.selectedPR.status="Draft",this.saveRequisition()}submitPR(){this.selectedPR.status="Submitted",this.saveRequisition()}saveRequisition(){let t=this.selectedPR.items.filter(e=>e.itemName&&e.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with name and quantity.");return}this.selectedPR.items=t,this.isEditing&&this.selectedPR.id?this.prService.update(this.selectedPR.id,this.selectedPR).subscribe({next:()=>{this.notificationService.success("Purchase requisition updated successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error("Error updating PR"),console.error("Error updating PR:",e)}}):this.prService.create(this.selectedPR).subscribe({next:()=>{this.notificationService.success("Purchase requisition created successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error("Error creating PR"),console.error("Error creating PR:",e)}})}deletePR(t){if(t.status!=="Draft"){this.notificationService.error("Only Draft PRs can be deleted.");return}confirm(`Are you sure you want to delete ${t.prNumber}?`)&&t.id&&this.prService.delete(t.id).subscribe({next:()=>{this.notificationService.success("Purchase requisition deleted successfully"),this.loadData()},error:e=>{this.notificationService.error("Error deleting PR"),console.error("Error deleting PR:",e)}})}getPriorityClass(t){switch(t){case"Critical":return"priority-critical";case"Urgent":return"priority-urgent";default:return"priority-normal"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""}canEdit(t){return t.status==="Draft"}canDelete(t){return t.status==="Draft"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}getAllFilteredPRs(){if(!this.searchTerm)return this.requisitions;let t=this.searchTerm.toLowerCase();return this.requisitions.filter(e=>e.prNumber?.toLowerCase().includes(t)||e.department?.toLowerCase().includes(t)||e.requestedBy?.toLowerCase().includes(t))}getStatusClass(t){switch(t){case"Draft":return"status-draft";case"Submitted":return"status-submitted";case"Approved":return"status-approved";case"Partially Fulfilled":return"status-partial";case"Fully Fulfilled":return"status-fulfilled";case"Rejected":return"status-rejected";default:return"status-default"}}canSubmit(t){return t.status==="Draft"}canApproveReject(t){return t.status==="Submitted"&&this.isAdmin}canConvertToPO(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canFulfillFromStock(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canMaterialTransfer(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}isCompleted(t){return t.status==="Fully Fulfilled"}isRejected(t){return t.status==="Rejected"}approvePR(t,e){e?.stopPropagation(),this.canApproveReject(t)&&confirm(`Are you sure you want to approve ${t.prNumber}?`)&&t.id&&this.prService.approve(t.id).subscribe({next:()=>this.loadData(),error:i=>console.error("Error approving PR:",i)})}rejectPR(t,e){if(e?.stopPropagation(),!this.canApproveReject(t))return;let i=prompt(`Enter rejection reason for ${t.prNumber}:`);i&&t.id&&this.prService.reject(t.id,i).subscribe({next:()=>{this.loadData(),this.closeModal()},error:r=>console.error("Error rejecting PR:",r)})}convertToPO(t,e){e?.stopPropagation(),this.canConvertToPO(t)&&this.router.navigate(["/app/purchase/fulfillment/convert-to-po"],{queryParams:{prId:t.id}})}fulfillFromStock(t,e){e?.stopPropagation(),this.canFulfillFromStock(t)&&this.router.navigate(["/app/purchase/fulfillment/stock-issue"],{queryParams:{prId:t.id}})}materialTransfer(t,e){e?.stopPropagation(),this.canMaterialTransfer(t)&&this.router.navigate(["/app/purchase/fulfillment/material-transfer"],{queryParams:{prId:t.id}})}getItemStatusClass(t){switch(t){case"Pending":return"item-pending";case"Partially Fulfilled":return"item-partial";case"Fully Fulfilled":return"item-fulfilled";default:return"item-pending"}}calculateFulfillmentProgress(t){if(!t.items||t.items.length===0)return 0;let e=t.items.reduce((r,s)=>r+s.quantity,0),i=t.items.reduce((r,s)=>r+(s.fulfilledQuantity||0),0);return e>0?Math.round(i/e*100):0}printPR(t){t.id&&this.router.navigate(["/app/purchase/requisition",t.id,"print"])}openViewModal(t){this.selectedPR=JSON.parse(JSON.stringify(t)),this.viewTabActive="purchaseOrders",this.showViewModal=!0,this.loadViewTabData()}closeViewModal(){this.showViewModal=!1,this.purchaseOrders=[],this.stockFulfillments=[],this.materialTransfers=[]}loadViewTabData(){this.selectedPR.id&&(this.prService.getPurchaseOrdersByPrId(this.selectedPR.id).subscribe({next:t=>this.purchaseOrders=t,error:()=>this.purchaseOrders=[]}),this.prService.getStockFulfillmentsByPrId(this.selectedPR.id).subscribe({next:t=>this.stockFulfillments=t,error:()=>this.stockFulfillments=[]}),this.prService.getMaterialTransfersByPrId(this.selectedPR.id).subscribe({next:t=>this.materialTransfers=t,error:()=>this.materialTransfers=[]}))}openStockFulfillmentModal(t,e){e?.stopPropagation(),this.canFulfillFromStock(t)&&(this.selectedPR=JSON.parse(JSON.stringify(t)),this.stockFulfillmentItems=this.selectedPR.items.filter(i=>i.quantity-(i.fulfilledQuantity||0)>0).map(i=>ce(N({},i),{selected:!1,fulfillQty:i.quantity-(i.fulfilledQuantity||0)})),this.selectedWarehouseId=null,this.selectedSupplierId=null,this.stockFulfillmentRemarks="",this.showStockFulfillmentModal=!0)}closeStockFulfillmentModal(){this.showStockFulfillmentModal=!1,this.stockFulfillmentItems=[]}saveStockFulfillment(){let t=this.stockFulfillmentItems.filter(i=>i.selected&&i.fulfillQty&&i.fulfillQty>0);if(t.length===0){this.notificationService.error("Please select at least one item to fulfill.");return}if(!this.selectedWarehouseId&&!this.selectedSupplierId){this.notificationService.error("Please select a warehouse or supplier.");return}let e={prId:this.selectedPR.id,warehouseId:this.selectedWarehouseId||void 0,supplierId:this.selectedSupplierId||void 0,remarks:this.stockFulfillmentRemarks,items:t.map(i=>({prItemId:i.id,itemId:i.itemId,quantity:i.fulfillQty}))};this.prService.createStockFulfillment(e).subscribe({next:()=>{if(this.closeStockFulfillmentModal(),this.loadData(),this.expandedPRId){let i=this.requisitions.find(r=>r.id===this.expandedPRId);i&&setTimeout(()=>this.loadInlineData(i),500)}this.notificationService.success("Stock fulfillment created successfully")},error:i=>{console.error("Error creating stock fulfillment:",i),this.notificationService.error("Error creating stock fulfillment. Please try again.")}})}openMaterialTransferModal(t,e){e?.stopPropagation(),this.canMaterialTransfer(t)&&(this.selectedPR=JSON.parse(JSON.stringify(t)),this.materialTransferItems=this.selectedPR.items.filter(i=>i.quantity-(i.fulfilledQuantity||0)>0).map(i=>ce(N({},i),{selected:!1,fulfillQty:i.quantity-(i.fulfilledQuantity||0)})),this.transferProjectName="",this.transferSupplierId=null,this.materialTransferRemarks="",this.showMaterialTransferModal=!0)}closeMaterialTransferModal(){this.showMaterialTransferModal=!1,this.materialTransferItems=[]}saveMaterialTransfer(){let t=this.materialTransferItems.filter(i=>i.selected&&i.fulfillQty&&i.fulfillQty>0);if(t.length===0){this.notificationService.error("Please select at least one item to transfer.");return}let e={prId:this.selectedPR.id,projectName:this.transferProjectName,supplierId:this.transferSupplierId||void 0,remarks:this.materialTransferRemarks,items:t.map(i=>({prItemId:i.id,itemId:i.itemId,quantity:i.fulfillQty}))};this.prService.createMaterialTransfer(e).subscribe({next:()=>{if(this.closeMaterialTransferModal(),this.loadData(),this.expandedPRId){let i=this.requisitions.find(r=>r.id===this.expandedPRId);i&&setTimeout(()=>this.loadInlineData(i),500)}this.notificationService.success("Material transfer created successfully")},error:i=>{console.error("Error creating material transfer:",i),this.notificationService.error("Error creating material transfer. Please try again.")}})}toggleAllItems(t,e){let i=e.target.checked;t.forEach(r=>r.selected=i)}getRemainingQty(t){return t.quantity-(t.fulfilledQuantity||0)}togglePRExpand(t,e){e?.stopPropagation(),this.expandedPRId===t.id?(this.expandedPRId=null,this.resetInlineState()):(this.resetInlineState(),this.expandedPRId=t.id,this.inlineTabActive="purchaseOrders",this.loadInlineData(t))}resetInlineState(){this.inlineSelectableItems=[],this.inlinePurchaseOrders=[],this.inlineStockFulfillments=[],this.inlineMaterialTransfers=[]}loadInlineData(t){t.id&&(this.inlineSelectableItems=t.items.filter(e=>e.quantity-(e.fulfilledQuantity||0)>0).map(e=>ce(N({},e),{selected:!1,fulfillQty:e.quantity-(e.fulfilledQuantity||0)})),this.prService.getPurchaseOrdersByPrId(t.id).subscribe({next:e=>this.inlinePurchaseOrders=e,error:()=>this.inlinePurchaseOrders=[]}),this.prService.getStockFulfillmentsByPrId(t.id).subscribe({next:e=>this.inlineStockFulfillments=e,error:()=>this.inlineStockFulfillments=[]}),this.prService.getMaterialTransfersByPrId(t.id).subscribe({next:e=>this.inlineMaterialTransfers=e,error:()=>this.inlineMaterialTransfers=[]}))}openInlineStockFulfillment(t,e){e?.stopPropagation();let i=this.inlineSelectableItems.filter(r=>r.selected&&r.fulfillQty&&r.fulfillQty>0);if(i.length===0){this.notificationService.error("Please select at least one item to fulfill from stock.");return}this.selectedPR=JSON.parse(JSON.stringify(t)),this.stockFulfillmentItems=i,this.selectedWarehouseId=null,this.selectedSupplierId=null,this.stockFulfillmentRemarks="",this.showStockFulfillmentModal=!0}openInlineMaterialTransfer(t,e){e?.stopPropagation();let i=this.inlineSelectableItems.filter(r=>r.selected&&r.fulfillQty&&r.fulfillQty>0);if(i.length===0){this.notificationService.error("Please select at least one item for material transfer.");return}this.selectedPR=JSON.parse(JSON.stringify(t)),this.materialTransferItems=i,this.transferProjectName="",this.transferSupplierId=null,this.materialTransferRemarks="",this.showMaterialTransferModal=!0}toggleInlineItemSelection(t){t.selected=!t.selected}toggleAllInlineItems(t){let e=t.target.checked;this.inlineSelectableItems.forEach(i=>i.selected=e)}getSelectedItemsCount(){return this.inlineSelectableItems.filter(t=>t.selected).length}static \u0275fac=function(e){return new(e||n)(I(Lt),I(pi),I(Oe),I(ue),I(we),I(Ge),I(_t),I(Ce),I(Pn))};static \u0275cmp=A({type:n,selectors:[["app-purchase-requisition"]],standalone:!1,decls:24,vars:12,consts:[[1,"page-container"],[1,"page-header"],[1,"btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search Requisitions",3,"ngModelChange","ngModel"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fa","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fa","fa-table"],["class","sort-options",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","table-view",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"sort-options"],["class","sort-link",3,"active","click",4,"ngFor","ngForOf"],[1,"sort-link",3,"click"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","pr-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","submitted"],[1,"kanban-column","approved"],["class","pr-card-wrapper",4,"ngFor","ngForOf"],[1,"kanban-column","partial"],[1,"kanban-column","fulfilled"],["class","pr-card completed",3,"click",4,"ngFor","ngForOf"],[1,"kanban-column","rejected"],["class","pr-card rejected-card",3,"click",4,"ngFor","ngForOf"],[1,"pr-card",3,"click"],[1,"card-header"],[1,"pr-number"],[1,"priority-badge",3,"ngClass"],[1,"card-department"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"card-footer"],[1,"comments"],[1,"fa","fa-comments"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fa","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fa","fa-trash"],[1,"empty-column"],[1,"fa","fa-file-alt"],["class","card-actions-row",4,"ngIf"],[1,"card-actions-row"],["title","Approve",1,"btn-action","approve",3,"click"],[1,"fa","fa-check"],["title","Reject",1,"btn-action","reject",3,"click"],[1,"fa","fa-times"],[1,"fa","fa-paper-plane"],[1,"pr-card-wrapper"],[1,"pr-card"],[1,"header-right"],[1,"expand-btn",3,"click","title"],[1,"fa"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],["title","View Details",1,"btn-action","view",3,"click"],[1,"fa","fa-eye"],["title","Convert to PO",1,"btn-action","convert",3,"click"],[1,"fa","fa-file-invoice"],["class","inline-expand-section",4,"ngIf"],[1,"inline-expand-section"],[1,"inline-items-section"],[1,"inline-section-header"],["class","selected-count",4,"ngIf"],[1,"inline-items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","90px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","inline-action-buttons",4,"ngIf"],[1,"inline-tabs"],[1,"tab-headers"],[1,"tab-header",3,"click"],[1,"fa","fa-box"],[1,"fa","fa-exchange-alt"],["class","tab-content",4,"ngIf"],[1,"selected-count"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number","min","1",1,"inline-qty-input",3,"ngModelChange","ngModel","max","disabled"],["colspan","6",1,"no-items"],[1,"inline-action-buttons"],[1,"btn-action","stock",3,"click"],[1,"btn-action","transfer",3,"click"],[1,"tab-content"],["class","inline-data-table",4,"ngIf"],["class","empty-tab",4,"ngIf"],[1,"inline-data-table"],[1,"status-badge",3,"ngClass"],[1,"empty-tab"],[1,"status-badge","status-approved"],[1,"fa","fa-check-circle"],[1,"fa","fa-tasks"],[1,"pr-card","completed",3,"click"],[1,"completed-badge"],[1,"fa","fa-check-double"],[1,"pr-card","rejected-card",3,"click"],[1,"rejected-badge"],[1,"fa","fa-times-circle"],["class","detail-row",4,"ngIf"],["class","rejected-by",4,"ngIf"],[1,"value","rejection-reason"],[1,"rejected-by"],[1,"fa","fa-ban"],[1,"table-view"],[1,"table-container"],[1,"data-table"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"clickable-row",3,"click"],[1,"pr-link"],[1,"action-buttons"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon","title","View",3,"click",4,"ngIf"],["class","btn-icon delete","title","Delete",3,"click",4,"ngIf"],["class","btn-icon approve","title","Approve",3,"click",4,"ngIf"],["class","btn-icon reject","title","Reject",3,"click",4,"ngIf"],["class","btn-icon view","title","View History",3,"click",4,"ngIf"],["class","btn-icon convert","title","Convert to PO",3,"click",4,"ngIf"],["class","btn-icon stock","title","Fulfill from Stock",3,"click",4,"ngIf"],["class","btn-icon transfer","title","Material Transfer",3,"click",4,"ngIf"],["class","completed-label",4,"ngIf"],["title","View",1,"btn-icon",3,"click"],["title","Approve",1,"btn-icon","approve",3,"click"],["title","Reject",1,"btn-icon","reject",3,"click"],["title","View History",1,"btn-icon","view",3,"click"],["title","Convert to PO",1,"btn-icon","convert",3,"click"],["title","Fulfill from Stock",1,"btn-icon","stock",3,"click"],["title","Material Transfer",1,"btn-icon","transfer",3,"click"],[1,"completed-label"],[1,"modal-overlay",3,"click"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter department or project","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["placeholder","Enter purpose of requisition","rows","2",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Normal"],["value","Urgent"],["value","Critical"],["type","text","readonly","",1,"form-control",3,"value"],[1,"items-section"],[1,"section-header"],[1,"section-header-right"],["class","fulfillment-progress",4,"ngIf"],["class","btn-secondary",3,"click",4,"ngIf"],[1,"items-table-container"],[1,"items-table"],[2,"width","30px"],[2,"width","180px"],["style","width: 80px;",4,"ngIf"],[2,"width","100px"],["style","width: 100px;",4,"ngIf"],["style","width: 50px;",4,"ngIf"],["class","view-tabs-section",4,"ngIf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],["class","btn-success",3,"click",4,"ngIf"],["class","btn-approve",3,"click",4,"ngIf"],["class","btn-reject",3,"click",4,"ngIf"],["class","completed-message",4,"ngIf"],["class","rejected-message",4,"ngIf"],[1,"fulfillment-progress"],[1,"progress-label"],[1,"progress-bar-inline"],[1,"progress-percent"],[2,"width","50px"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Remarks",1,"form-control",3,"ngModelChange","ngModel","readonly"],[3,"value"],[1,"fulfilled-qty"],[1,"item-status-badge",3,"ngClass"],["title","Remove",1,"btn-icon","delete",3,"click","disabled"],[1,"view-tabs-section"],[1,"tabs"],[1,"tab-btn",3,"click"],["class","data-table",4,"ngIf"],[1,"fa","fa-save"],[1,"btn-success",3,"click"],[1,"btn-approve",3,"click"],[1,"btn-reject",3,"click"],[1,"completed-message"],[1,"rejected-message"],[1,"status-badge"],[1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Enter remarks","rows","2",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","max","disabled"],["type","text","placeholder","Enter project name",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Purchase Requisition"),a(),o(4,"button",2),y("click",function(){return i.openNewModal()}),v(5,"i",3),l(6," New Requisition "),a()(),o(7,"div",4)(8,"div",5),v(9,"i",6),o(10,"input",7),M("ngModelChange",function(s){return E(i.searchTerm,s)||(i.searchTerm=s),s}),a()(),o(11,"div",8)(12,"div",9)(13,"button",10),y("click",function(){return i.viewMode="kanban"}),v(14,"i",11),a(),o(15,"button",12),y("click",function(){return i.viewMode="table"}),v(16,"i",13),a()(),x(17,$A,4,1,"div",14),a()(),x(18,G4,55,18,"div",15)(19,n5,24,2,"div",16),a(),x(20,V5,93,27,"div",17)(21,Y5,24,13,"div",17)(22,eF,55,9,"div",17)(23,iF,52,7,"div",17)),e&2&&(c(10),S("ngModel",i.searchTerm),c(3),J("active",i.viewMode==="kanban"),c(2),J("active",i.viewMode==="table"),c(2),p("ngIf",i.viewMode==="kanban"),c(),p("ngIf",i.viewMode==="kanban"),c(),p("ngIf",i.viewMode==="table"),c(),p("ngIf",i.showModal),c(),p("ngIf",i.showViewModal),c(),p("ngIf",i.showStockFulfillmentModal),c(),p("ngIf",i.showMaterialTransferModal))},dependencies:[oe,L,B,Y,Z,H,Me,Et,Q,q,wt,je,zn,G],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;background:#f5f5f5;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:teal;font-size:24px;font-weight:600;margin:0}.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #ddd;border-radius:6px;padding:8px 12px;min-width:280px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;margin-right:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:14px;width:100%}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.table-view[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #00000014}.table-view[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .2s}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]:hover{background:#f8fafa}.data-table[_ngcontent-%COMP%]   .pr-link[_ngcontent-%COMP%]{color:teal}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;display:block;margin-bottom:12px}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.status-badge.status-submitted[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.status-default[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]{color:teal;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]:hover{background:#0080801a}.sort-options[_ngcontent-%COMP%]   .sort-link.active[_ngcontent-%COMP%]{background:teal;color:#fff}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.submitted[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#007bff}.kanban-column.approved[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 300px);overflow-y:auto}.pr-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.pr-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.pr-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card-header[_ngcontent-%COMP%]   .pr-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.priority-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px;border-radius:12px;font-weight:500}.priority-badge.priority-normal[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.priority-badge.priority-urgent[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.priority-badge.priority-critical[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.card-department[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{font-size:12px;color:#666}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:900px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{max-width:1100px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eee;background:teal;color:#fff}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;padding:4px 8px;opacity:.8;transition:opacity .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only, .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#666}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{margin-top:20px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;font-weight:600}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:6px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:800px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:13px;color:#333}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:8px 10px;font-size:13px}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f8f9fa}.kanban-column.partial[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800)}.kanban-column.fulfilled[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.kanban-column.rejected[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.card-actions-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap}.btn-action[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:4px;transition:all .2s}.btn-action.convert[_ngcontent-%COMP%]{background:teal;color:#fff}.btn-action.convert[_ngcontent-%COMP%]:hover{background:#066}.btn-action.stock[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-action.stock[_ngcontent-%COMP%]:hover{background:#138496}.btn-action.transfer[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-action.transfer[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-action.approve[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-action.approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-action.reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-action.reject[_ngcontent-%COMP%]:hover{background:#c82333}.progress-bar[_ngcontent-%COMP%]{height:20px;background:#e9ecef;border-radius:10px;overflow:hidden;position:relative;margin:10px 0}.progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.progress-bar[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:11px;font-weight:600;color:#333}.completed-badge[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.completed-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.rejected-badge[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.rejected-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.pr-card.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fff8,#e8f5e9);border-left:4px solid #28a745}.pr-card.rejected-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff8f8,#ffebee);border-left:4px solid #dc3545}.rejection-reason[_ngcontent-%COMP%]{color:#dc3545;font-style:italic}.rejected-by[_ngcontent-%COMP%]{font-size:11px;color:#999}.status-partial[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-icon.approve[_ngcontent-%COMP%]{color:#28a745}.btn-icon.approve[_ngcontent-%COMP%]:hover{background:#d4edda}.btn-icon.reject[_ngcontent-%COMP%]{color:#dc3545}.btn-icon.reject[_ngcontent-%COMP%]:hover{background:#f8d7da}.btn-icon.convert[_ngcontent-%COMP%]{color:teal}.btn-icon.convert[_ngcontent-%COMP%]:hover{background:#e0f2f2}.btn-icon.stock[_ngcontent-%COMP%]{color:#17a2b8}.btn-icon.stock[_ngcontent-%COMP%]:hover{background:#d1ecf1}.btn-icon.transfer[_ngcontent-%COMP%]{color:#6c757d}.btn-icon.transfer[_ngcontent-%COMP%]:hover{background:#e9ecef}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.completed-label[_ngcontent-%COMP%]{color:#28a745;font-size:12px;font-weight:600;display:flex;align-items:center;gap:4px}.item-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.item-partial[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.item-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-approve[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-reject[_ngcontent-%COMP%]:hover{background:#c82333}.completed-message[_ngcontent-%COMP%]{color:#28a745;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#d4edda;border-radius:6px}.rejected-message[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#f8d7da;border-radius:6px}.section-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.fulfillment-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.fulfillment-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]{width:120px;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.fulfillment-progress[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:teal;min-width:35px}.fulfilled-qty[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666}.item-status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}@media(max-width:768px){.page-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 1}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}}.view-tabs-section[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:1px solid #e0e0e0}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid #e0e0e0;margin-bottom:20px}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{background:transparent;border:none;padding:12px 20px;cursor:pointer;font-size:14px;color:#666;display:flex;align-items:center;gap:8px;transition:all .2s;border-bottom:2px solid transparent;margin-bottom:-2px}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:teal;background:#0080800d}.tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.tab-content[_ngcontent-%COMP%]{min-height:200px}.empty-tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#999;text-align:center}.empty-tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-tab[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.btn-action.view[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-action.view[_ngcontent-%COMP%]:hover{background:#138496}.btn-icon.view[_ngcontent-%COMP%]{color:#17a2b8}.btn-icon.view[_ngcontent-%COMP%]:hover{color:#138496}.pr-card-wrapper[_ngcontent-%COMP%]{margin-bottom:12px}.pr-card-wrapper[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pr-card.expanded[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:2px solid #008080}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expand-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer;color:#666;transition:all .2s}.expand-btn[_ngcontent-%COMP%]:hover{background:teal;color:#fff;border-color:teal}.expand-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.inline-expand-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-top:none;border-radius:0 0 8px 8px;padding:16px;box-shadow:0 4px 8px #0000001a}.inline-items-section[_ngcontent-%COMP%]{margin-bottom:20px}.inline-section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.inline-section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#333;font-weight:600}.inline-section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{background:teal;color:#fff;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.inline-items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.inline-items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .inline-items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;text-align:left;border-bottom:1px solid #e0e0e0}.inline-items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:600;color:#333}.inline-items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.inline-items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.inline-items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.inline-items-table[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#999;font-style:italic}.inline-qty-input[_ngcontent-%COMP%]{width:70px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px;text-align:right}.inline-qty-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.inline-qty-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#999}.inline-action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px;justify-content:flex-end}.inline-tabs[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:16px}.inline-tabs[_ngcontent-%COMP%]   .tab-headers[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px;border-bottom:1px solid #e0e0e0;padding-bottom:0}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]{background:transparent;border:none;padding:10px 16px;cursor:pointer;font-size:13px;color:#666;display:flex;align-items:center;gap:6px;transition:all .2s;border-bottom:2px solid transparent;margin-bottom:-1px}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]:hover{color:teal}.inline-tabs[_ngcontent-%COMP%]   .tab-header.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.inline-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{min-height:100px}.inline-data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.inline-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .inline-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;text-align:left;border-bottom:1px solid #e0e0e0}.inline-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.inline-data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.inline-data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.inline-tabs[_ngcontent-%COMP%]   .empty-tab[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#999;font-size:13px;background:#fafafa;border-radius:6px}"]})};function rF(n,t){n&1&&(o(0,"div",7),v(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function oF(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),g(e.name)}}function aF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",46),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),y("change",function(){let r=h(e).$implicit,s=f(2);return _(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",47),l(8),a(),o(9,"td",47),l(10),a(),o(11,"td",48),l(12),a(),o(13,"td",47),l(14),a(),o(15,"td")(16,"input",49),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),y("input",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(17,"td")(18,"input",50),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.rate,r)||(s.rate=r),_(r)}),y("input",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(19,"td",51),l(20),ee(21,"number"),a()()}if(n&2){let e=t.$implicit;J("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),p("disabled",!e.selected)("max",e.pendingQty),c(2),S("ngModel",e.rate),p("disabled",!e.selected),c(2),D(" ",e.selected?te(21,15,e.amount,"1.2-2"):"-"," ")}}function sF(n,t){n&1&&v(0,"i",52)}function lF(n,t){n&1&&v(0,"i",8)}function cF(n,t){if(n&1){let e=T();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Purpose:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Purchase Order Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"PO Number"),a(),o(43,"input",19),M("ngModelChange",function(r){h(e);let s=f();return E(s.poNumber,r)||(s.poNumber=r),_(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Supplier *"),a(),o(47,"select",20),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedSupplierId,r)||(s.selectedSupplierId=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.onSupplierChange())}),o(48,"option",21),l(49,"Select Supplier"),a(),x(50,oF,2,2,"option",22),a()(),o(51,"div",18)(52,"label"),l(53,"Payment Terms"),a(),o(54,"input",23),M("ngModelChange",function(r){h(e);let s=f();return E(s.paymentTerms,r)||(s.paymentTerms=r),_(r)}),a()(),o(55,"div",18)(56,"label"),l(57,"Expected Delivery Date *"),a(),o(58,"input",24),M("ngModelChange",function(r){h(e);let s=f();return E(s.expectedDeliveryDate,r)||(s.expectedDeliveryDate=r),_(r)}),a()(),o(59,"div",25)(60,"label"),l(61,"Remarks"),a(),o(62,"textarea",26),M("ngModelChange",function(r){h(e);let s=f();return E(s.remarks,r)||(s.remarks=r),_(r)}),a()()()()(),o(63,"div",27)(64,"div",28)(65,"h3"),l(66,"Select Items for Purchase Order"),a(),o(67,"span",29),l(68),a()(),o(69,"div",30)(70,"table",31)(71,"thead")(72,"tr")(73,"th",32)(74,"input",33),y("change",function(r){h(e);let s=f();return _(s.toggleSelectAll(r))}),a()(),o(75,"th"),l(76,"Item Name"),a(),o(77,"th"),l(78,"Description"),a(),o(79,"th",34),l(80,"Requested"),a(),o(81,"th",34),l(82,"Fulfilled"),a(),o(83,"th",34),l(84,"Pending"),a(),o(85,"th",34),l(86,"UOM"),a(),o(87,"th",35),l(88,"Qty to Order *"),a(),o(89,"th",35),l(90,"Rate *"),a(),o(91,"th",36),l(92,"Amount"),a()()(),o(93,"tbody"),x(94,aF,22,18,"tr",37),a(),o(95,"tfoot")(96,"tr",38)(97,"td",39)(98,"strong"),l(99,"Total Amount:"),a()(),o(100,"td",40)(101,"strong"),l(102),ee(103,"number"),a()()()()()()(),o(104,"div",41)(105,"button",42),y("click",function(){h(e);let r=f();return _(r.cancel())}),l(106,"Cancel"),a(),o(107,"button",43),y("click",function(){h(e);let r=f();return _(r.createPO())}),x(108,sF,1,0,"i",44)(109,lF,1,0,"i",45),l(110),a()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.purpose||"-"),c(8),S("ngModel",e.poNumber),c(4),S("ngModel",e.selectedSupplierId),c(),p("value",0),c(2),p("ngForOf",e.suppliers),c(4),S("ngModel",e.paymentTerms),c(4),S("ngModel",e.expectedDeliveryDate),c(4),S("ngModel",e.remarks),c(6),le("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(26),p("ngForOf",e.fulfillmentItems),c(8),g(te(103,21,e.getTotalAmount(),"1.2-2")),c(5),p("disabled",!e.isValid()||e.saving),c(),p("ngIf",!e.saving),c(),p("ngIf",e.saving),c(),D(" ",e.saving?"Creating PO...":"Create Purchase Order"," ")}}var pp=class n{constructor(t,e,i,r,s,d,u){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.supplierService=s;this.settingsService=d;this.notificationService=u}prId=0;pr=null;suppliers=[];fulfillmentItems=[];poNumber="";selectedSupplierId=0;selectedSupplierName="";paymentTerms="";expectedDeliveryDate="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generatePONumber(),this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}}),this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers:",t)})}generatePONumber(){this.settingsService.generatePrefixId("po").subscribe({next:t=>{this.poNumber=t},error:()=>{this.poNumber=this.fulfillmentService.generatePONumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0,rate:0,amount:0})))}onSupplierChange(){let t=this.suppliers.find(e=>e.id===this.selectedSupplierId);this.selectedSupplierName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)}),this.calculateAmounts()}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty),this.calculateAmounts()}calculateItemAmount(t){t.amount=(t.fulfillQty||0)*(t.rate||0)}calculateAmounts(){this.fulfillmentItems.forEach(t=>{t.selected&&(t.amount=(t.fulfillQty||0)*(t.rate||0))})}getTotalAmount(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.amount||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedSupplierId||!this.expectedDeliveryDate)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty&&e.rate&&e.rate>0)}createPO(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"PO",referenceNumber:this.poNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",supplierId:this.selectedSupplierId,supplierName:this.selectedSupplierName,paymentTerms:this.paymentTerms,expectedDeliveryDate:this.expectedDeliveryDate,remarks:this.remarks,totalAmount:this.getTotalAmount(),items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createPOFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Purchase Order created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating PO:",e),this.saving=!1,this.notificationService.warning("PO creation saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Xe),I(ue),I(Lt),I(vt),I(_t),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-convert-to-po"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","po-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","100px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","9",1,"text-right"],[1,"text-right","total-amount"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-file-invoice",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","input","ngModel","disabled","max"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","input","ngModel","disabled"],[1,"text-right","amount"],[1,"fa","fa-file-invoice"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),y("click",function(){return i.cancel()}),v(4,"i",4),a(),o(5,"h1"),l(6,"Convert to Purchase Order"),a()()(),x(7,rF,4,0,"div",5)(8,cF,111,24,"div",6),a()),e&2&&(c(7),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.pr))},dependencies:[L,B,Y,Z,H,Me,Et,Q,q,wt,je,zn,G,De],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:500;color:teal}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function dF(n,t){n&1&&(o(0,"div",7),v(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function uF(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le("",e.name," (",e.code,")")}}function pF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",43),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),y("change",function(){let r=h(e).$implicit,s=f(2);return _(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",44),l(8),a(),o(9,"td",44),l(10),a(),o(11,"td",45),l(12),a(),o(13,"td",44),l(14),a(),o(15,"td")(16,"input",46),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit;J("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),p("disabled",!e.selected)("max",e.pendingQty)}}function mF(n,t){n&1&&v(0,"i",47)}function fF(n,t){n&1&&v(0,"i",8)}function gF(n,t){if(n&1){let e=T();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Stock Issue Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Issue Number"),a(),o(43,"input",19),M("ngModelChange",function(r){h(e);let s=f();return E(s.issueNumber,r)||(s.issueNumber=r),_(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Source Warehouse *"),a(),o(47,"select",20),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedWarehouseId,r)||(s.selectedWarehouseId=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.onWarehouseChange())}),o(48,"option",21),l(49,"Select Warehouse"),a(),x(50,uF,2,3,"option",22),a()(),o(51,"div",23)(52,"label"),l(53,"Remarks"),a(),o(54,"textarea",24),M("ngModelChange",function(r){h(e);let s=f();return E(s.remarks,r)||(s.remarks=r),_(r)}),a()()()()(),o(55,"div",25)(56,"div",26)(57,"h3"),l(58,"Select Items to Issue from Stock"),a(),o(59,"span",27),l(60),a()(),o(61,"div",28)(62,"table",29)(63,"thead")(64,"tr")(65,"th",30)(66,"input",31),y("change",function(r){h(e);let s=f();return _(s.toggleSelectAll(r))}),a()(),o(67,"th"),l(68,"Item Name"),a(),o(69,"th"),l(70,"Description"),a(),o(71,"th",32),l(72,"Requested"),a(),o(73,"th",32),l(74,"Fulfilled"),a(),o(75,"th",32),l(76,"Pending"),a(),o(77,"th",32),l(78,"UOM"),a(),o(79,"th",33),l(80,"Qty to Issue *"),a()()(),o(81,"tbody"),x(82,pF,17,12,"tr",34),a(),o(83,"tfoot")(84,"tr",35)(85,"td",36)(86,"strong"),l(87,"Total Issue Quantity:"),a()(),o(88,"td",37)(89,"strong"),l(90),a()()()()()()(),o(91,"div",38)(92,"button",39),y("click",function(){h(e);let r=f();return _(r.cancel())}),l(93,"Cancel"),a(),o(94,"button",40),y("click",function(){h(e);let r=f();return _(r.createStockIssue())}),x(95,mF,1,0,"i",41)(96,fF,1,0,"i",42),l(97),a()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.deliveryLocation||"-"),c(8),S("ngModel",e.issueNumber),c(4),S("ngModel",e.selectedWarehouseId),c(),p("value",0),c(2),p("ngForOf",e.warehouses),c(4),S("ngModel",e.remarks),c(6),le("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),p("ngForOf",e.fulfillmentItems),c(8),g(e.getTotalIssueQty()),c(4),p("disabled",!e.isValid()||e.saving),c(),p("ngIf",!e.saving),c(),p("ngIf",e.saving),c(),D(" ",e.saving?"Creating Issue...":"Create Stock Issue"," ")}}var mp=class n{constructor(t,e,i,r,s,d){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=s;this.notificationService=d}prId=0;pr=null;warehouses=[];fulfillmentItems=[];issueNumber="";selectedWarehouseId=0;selectedWarehouseName="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateIssueNumber(),this.warehouses=[{id:1,name:"Main Warehouse",code:"WH-001"},{id:2,name:"Secondary Warehouse",code:"WH-002"},{id:3,name:"Project Site A",code:"WH-003"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateIssueNumber(){this.settingsService.generatePrefixId("issue").subscribe({next:t=>{this.issueNumber=t},error:()=>{this.issueNumber=this.fulfillmentService.generateIssueNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onWarehouseChange(){let t=this.warehouses.find(e=>e.id===this.selectedWarehouseId);this.selectedWarehouseName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalIssueQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedWarehouseId)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createStockIssue(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Stock Issue",referenceNumber:this.issueNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",warehouseId:this.selectedWarehouseId,warehouseName:this.selectedWarehouseName,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createStockIssueFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Issue created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating stock issue:",e),this.saving=!1,this.notificationService.warning("Stock Issue saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Xe),I(ue),I(Lt),I(vt),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-stock-issue-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","issue-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-box",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-box"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),y("click",function(){return i.cancel()}),v(4,"i",4),a(),o(5,"h1"),l(6,"Fulfill from Stock"),a()()(),x(7,dF,4,0,"div",5)(8,gF,98,19,"div",6),a()),e&2&&(c(7),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.pr))},dependencies:[L,B,Y,Z,H,Me,Et,Q,q,wt,je,zn,G],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function hF(n,t){n&1&&(o(0,"div",7),v(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function _F(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le("",e.name," (",e.code,")")}}function vF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",44),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.selected,r)||(s.selected=r),_(r)}),y("change",function(){let r=h(e).$implicit,s=f(2);return _(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",45),l(8),a(),o(9,"td",45),l(10),a(),o(11,"td",46),l(12),a(),o(13,"td",45),l(14),a(),o(15,"td")(16,"input",47),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.fulfillQty,r)||(s.fulfillQty=r),_(r)}),a()()()}if(n&2){let e=t.$implicit;J("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),p("disabled",!e.selected)("max",e.pendingQty)}}function yF(n,t){n&1&&v(0,"i",48)}function bF(n,t){n&1&&v(0,"i",8)}function CF(n,t){if(n&1){let e=T();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Material Transfer Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Transfer Number"),a(),o(43,"input",19),M("ngModelChange",function(r){h(e);let s=f();return E(s.transferNumber,r)||(s.transferNumber=r),_(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Source Project / Location *"),a(),o(47,"select",20),M("ngModelChange",function(r){h(e);let s=f();return E(s.sourceLocationId,r)||(s.sourceLocationId=r),_(r)}),y("change",function(){h(e);let r=f();return _(r.onSourceLocationChange())}),o(48,"option",21),l(49,"Select Source Location"),a(),x(50,_F,2,3,"option",22),a()(),o(51,"div",18)(52,"label"),l(53,"Target Location *"),a(),o(54,"input",23),M("ngModelChange",function(r){h(e);let s=f();return E(s.targetLocation,r)||(s.targetLocation=r),_(r)}),a()(),o(55,"div",24)(56,"label"),l(57,"Remarks"),a(),o(58,"textarea",25),M("ngModelChange",function(r){h(e);let s=f();return E(s.remarks,r)||(s.remarks=r),_(r)}),a()()()()(),o(59,"div",26)(60,"div",27)(61,"h3"),l(62,"Select Items to Transfer"),a(),o(63,"span",28),l(64),a()(),o(65,"div",29)(66,"table",30)(67,"thead")(68,"tr")(69,"th",31)(70,"input",32),y("change",function(r){h(e);let s=f();return _(s.toggleSelectAll(r))}),a()(),o(71,"th"),l(72,"Item Name"),a(),o(73,"th"),l(74,"Description"),a(),o(75,"th",33),l(76,"Requested"),a(),o(77,"th",33),l(78,"Fulfilled"),a(),o(79,"th",33),l(80,"Pending"),a(),o(81,"th",33),l(82,"UOM"),a(),o(83,"th",34),l(84,"Qty to Transfer *"),a()()(),o(85,"tbody"),x(86,vF,17,12,"tr",35),a(),o(87,"tfoot")(88,"tr",36)(89,"td",37)(90,"strong"),l(91,"Total Transfer Quantity:"),a()(),o(92,"td",38)(93,"strong"),l(94),a()()()()()()(),o(95,"div",39)(96,"button",40),y("click",function(){h(e);let r=f();return _(r.cancel())}),l(97,"Cancel"),a(),o(98,"button",41),y("click",function(){h(e);let r=f();return _(r.createTransfer())}),x(99,yF,1,0,"i",42)(100,bF,1,0,"i",43),l(101),a()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.deliveryLocation||"-"),c(8),S("ngModel",e.transferNumber),c(4),S("ngModel",e.sourceLocationId),c(),p("value",0),c(2),p("ngForOf",e.locations),c(4),S("ngModel",e.targetLocation),c(4),S("ngModel",e.remarks),c(6),le("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),p("ngForOf",e.fulfillmentItems),c(8),g(e.getTotalTransferQty()),c(4),p("disabled",!e.isValid()||e.saving),c(),p("ngIf",!e.saving),c(),p("ngIf",e.saving),c(),D(" ",e.saving?"Creating Transfer...":"Create Material Transfer"," ")}}var fp=class n{constructor(t,e,i,r,s,d){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=s;this.notificationService=d}prId=0;pr=null;locations=[];fulfillmentItems=[];transferNumber="";sourceLocationId=0;sourceLocationName="";targetLocation="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateTransferNumber(),this.locations=[{id:1,name:"Project Site A",code:"PS-A"},{id:2,name:"Project Site B",code:"PS-B"},{id:3,name:"Central Store",code:"CS"},{id:4,name:"Regional Depot",code:"RD"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.targetLocation=t.deliveryLocation||"",this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateTransferNumber(){this.settingsService.generatePrefixId("transfer").subscribe({next:t=>{this.transferNumber=t},error:()=>{this.transferNumber=this.fulfillmentService.generateTransferNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onSourceLocationChange(){let t=this.locations.find(e=>e.id===this.sourceLocationId);this.sourceLocationName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalTransferQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.sourceLocationId||!this.targetLocation)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createTransfer(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Material Transfer",referenceNumber:this.transferNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",sourceLocation:this.sourceLocationName,targetLocation:this.targetLocation,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createMaterialTransferFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Material Transfer created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating transfer:",e),this.saving=!1,this.notificationService.warning("Material Transfer saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Xe),I(ue),I(Lt),I(vt),I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-material-transfer-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","transfer-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Destination location","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-exchange-alt",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-exchange-alt"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),y("click",function(){return i.cancel()}),v(4,"i",4),a(),o(5,"h1"),l(6,"Material Transfer"),a()()(),x(7,hF,4,0,"div",5)(8,CF,102,20,"div",6),a()),e&2&&(c(7),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.pr))},dependencies:[L,B,Y,Z,H,Me,Et,Q,q,wt,je,zn,G],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var rr=class n{constructor(t){this.http=t}baseUrl="/api/purchase/direct";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function xF(n,t){n&1&&(o(0,"tr")(1,"td",28),v(2,"i",29),o(3,"p"),l(4,"Loading..."),a()()())}function SF(n,t){n&1&&(o(0,"tr")(1,"td",28),v(2,"i",30),o(3,"p"),l(4,"No entries found"),a()()())}function MF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td")(15,"span",31),l(16),a()(),o(17,"td")(18,"div",32)(19,"button",33),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPurchase(r))}),v(20,"i",34),a(),o(21,"button",35),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.deletePurchase(r.id))}),v(22,"i",36),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber||"Draft"),c(2),g(e.prNumber||"-"),c(2),g(e.poType),c(2),g(e.supplierName),c(2),g(i.formatDate(e.createdDate)),c(2),g(i.formatDate(e.deliveryDate)),c(2),p("ngClass",i.getStatusClass(e.status)),c(),D(" ",e.status," ")}}function EF(n,t){if(n&1&&(o(0,"div",24)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),l(5,"PO Number"),a(),o(6,"th"),l(7,"PR Ref"),a(),o(8,"th"),l(9,"PO Type"),a(),o(10,"th"),l(11,"Supplier"),a(),o(12,"th"),l(13,"Created Date"),a(),o(14,"th"),l(15,"Deliver Date"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Options"),a()()(),o(20,"tbody"),x(21,xF,5,0,"tr",26)(22,SF,5,0,"tr",26)(23,MF,23,8,"tr",27),a()()()),n&2){let e=f();c(21),p("ngIf",e.loading),c(),p("ngIf",!e.loading&&e.filteredPurchases.length===0),c(),p("ngForOf",e.filteredPurchases)}}function wF(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=f().$implicit;c(4),g(e.prNumber)}}function IF(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),ee(5,"number"),a()()),n&2){let e=f().$implicit;c(4),g(te(5,1,e.totalAmount,"1.2-2"))}}function PF(n,t){if(n&1){let e=T();o(0,"div",47),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),x(8,wF,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),x(20,IF,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),y("click",function(r){let s=h(e).$implicit;return f(2).printPO(s),_(r.stopPropagation())}),v(24,"i",60),a(),o(25,"button",61),y("click",function(r){let s=h(e).$implicit;return f(2).openModal(s),_(r.stopPropagation())}),v(26,"i",62),a(),o(27,"button",63),y("click",function(r){let s=h(e).$implicit;return f(2).deletePurchase(s.id),_(r.stopPropagation())}),v(28,"i",36),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber||"Draft"),c(),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(),p("ngIf",e.prNumber),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),p("ngIf",e.totalAmount)}}function DF(n,t){n&1&&(o(0,"div",65),v(1,"i",66),o(2,"span"),l(3,"No Draft Orders"),a()())}function TF(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=f().$implicit;c(4),g(e.prNumber)}}function OF(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),ee(5,"number"),a()()),n&2){let e=f().$implicit;c(4),g(te(5,1,e.totalAmount,"1.2-2"))}}function kF(n,t){if(n&1){let e=T();o(0,"div",47),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),x(8,TF,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),x(20,OF,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),y("click",function(r){let s=h(e).$implicit;return f(2).printPO(s),_(r.stopPropagation())}),v(24,"i",60),a(),o(25,"button",67),y("click",function(r){let s=h(e).$implicit;return f(2).viewPurchase(s),_(r.stopPropagation())}),v(26,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber),c(),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(),p("ngIf",e.prNumber),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),p("ngIf",e.totalAmount)}}function NF(n,t){n&1&&(o(0,"div",65),v(1,"i",68),o(2,"span"),l(3,"No Pending Orders"),a()())}function RF(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=f().$implicit;c(4),g(e.prNumber)}}function AF(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),ee(5,"number"),a()()),n&2){let e=f().$implicit;c(4),g(te(5,1,e.totalAmount,"1.2-2"))}}function FF(n,t){if(n&1){let e=T();o(0,"div",47),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),x(8,RF,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),x(20,AF,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),y("click",function(r){let s=h(e).$implicit;return f(2).printPO(s),_(r.stopPropagation())}),v(24,"i",60),a(),o(25,"button",67),y("click",function(r){let s=h(e).$implicit;return f(2).viewPurchase(s),_(r.stopPropagation())}),v(26,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber),c(),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(),p("ngIf",e.prNumber),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),p("ngIf",e.totalAmount)}}function VF(n,t){n&1&&(o(0,"div",65),v(1,"i",69),o(2,"span"),l(3,"No Completed Orders"),a()())}function LF(n,t){if(n&1&&(o(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),l(4,"Draft"),a(),o(5,"span",41),l(6),a()(),o(7,"div",42),x(8,PF,29,8,"div",43)(9,DF,4,0,"div",44),a()(),o(10,"div",45)(11,"div",39)(12,"span",40),l(13,"Pending"),a(),o(14,"span",41),l(15),a()(),o(16,"div",42),x(17,kF,27,8,"div",43)(18,NF,4,0,"div",44),a()(),o(19,"div",46)(20,"div",39)(21,"span",40),l(22,"Completed"),a(),o(23,"span",41),l(24),a()(),o(25,"div",42),x(26,FF,27,8,"div",43)(27,VF,4,0,"div",44),a()()()),n&2){let e=f();c(6),D("",e.draftPurchases.length," Orders"),c(2),p("ngForOf",e.draftPurchases),c(),p("ngIf",e.draftPurchases.length===0),c(6),D("",e.pendingPurchases.length," Orders"),c(2),p("ngForOf",e.pendingPurchases),c(),p("ngIf",e.pendingPurchases.length===0),c(6),D("",e.completedPurchases.length," Orders"),c(2),p("ngForOf",e.completedPurchases),c(),p("ngIf",e.completedPurchases.length===0)}}function jF(n,t){if(n&1&&(o(0,"option",97),l(1),a()),n&2){let e=t.$implicit;p("ngValue",e.id),c(),g(e.name)}}function BF(n,t){if(n&1&&(o(0,"option",109),l(1),a()),n&2){let e=t.$implicit;p("value",e.code),c(),g(e.code)}}function WF(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",98),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemName,r)||(s.itemName=r),_(r)}),a()(),o(3,"td")(4,"input",99),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.description,r)||(s.description=r),_(r)}),a()(),o(5,"td",100)(6,"input",101),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(7,"td",100)(8,"select",102),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.uom,r)||(s.uom=r),_(r)}),o(9,"option",103),l(10,"-"),a(),x(11,BF,2,2,"option",104),a()(),o(12,"td",100)(13,"input",105),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.rate,r)||(s.rate=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(14,"td",100),v(15,"input",106),a(),o(16,"td")(17,"input",107),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.remarks,r)||(s.remarks=r),_(r)}),a()(),o(18,"td")(19,"button",108),y("click",function(){let r=h(e).index,s=f(2);return _(s.removeItem(r))}),v(20,"i",74),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemName),c(2),S("ngModel",e.description),c(2),S("ngModel",e.quantity),c(2),S("ngModel",e.uom),c(3),p("ngForOf",i.units),c(2),S("ngModel",e.rate),c(2),p("value",e.amount),c(2),S("ngModel",e.remarks),c(2),p("disabled",i.selectedPurchase.items.length<=1)}}function UF(n,t){if(n&1){let e=T();o(0,"div",70),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",71),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",72)(3,"h2"),l(4),a(),o(5,"button",73),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",74),a()(),o(7,"div",75)(8,"div",76)(9,"h3"),l(10,"Purchase Order Details"),a(),o(11,"div",77)(12,"div",78)(13,"label"),l(14,"PO Type"),a(),v(15,"input",79),a(),o(16,"div",80)(17,"label"),l(18,"Supplier *"),a(),o(19,"select",81),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPurchase.supplierId,r)||(s.selectedPurchase.supplierId=r),_(r)}),o(20,"option",82),l(21,"Select Supplier"),a(),x(22,jF,2,2,"option",83),a()(),o(23,"div",78)(24,"label"),l(25,"Delivery Location"),a(),o(26,"input",84),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPurchase.deliveryLocation,r)||(s.selectedPurchase.deliveryLocation=r),_(r)}),a()()(),o(27,"div",85)(28,"div",78)(29,"label"),l(30,"Payment Terms"),a(),o(31,"input",86),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPurchase.paymentTerms,r)||(s.selectedPurchase.paymentTerms=r),_(r)}),a()(),o(32,"div",78)(33,"label"),l(34,"Delivery Date"),a(),o(35,"input",87),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedPurchase.deliveryDate,r)||(s.selectedPurchase.deliveryDate=r),_(r)}),a()()()(),o(36,"div",76)(37,"div",88)(38,"h3"),l(39,"Item List"),a(),o(40,"button",89),y("click",function(){h(e);let r=f();return _(r.addItem())}),v(41,"i",5),l(42," Add Item "),a()(),o(43,"div",90)(44,"table",91)(45,"thead")(46,"tr")(47,"th"),l(48,"Item Name"),a(),o(49,"th"),l(50,"Description"),a(),o(51,"th"),l(52,"Qty"),a(),o(53,"th"),l(54,"UOM"),a(),o(55,"th"),l(56,"Rate"),a(),o(57,"th"),l(58,"Amount"),a(),o(59,"th"),l(60,"Remarks"),a(),v(61,"th"),a()(),o(62,"tbody"),x(63,WF,21,9,"tr",27),a(),o(64,"tfoot")(65,"tr")(66,"td",92)(67,"strong"),l(68,"Total Amount:"),a()(),o(69,"td",93)(70,"strong"),l(71),ee(72,"number"),a()()()()()()()(),o(73,"div",94)(74,"button",95),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(75,"Cancel"),a(),o(76,"button",96),y("click",function(){h(e);let r=f();return _(r.savePurchase())}),l(77),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Direct PO":"Create Direct PO"),c(15),S("ngModel",e.selectedPurchase.supplierId),c(),p("ngValue",0),c(2),p("ngForOf",e.suppliers),c(4),S("ngModel",e.selectedPurchase.deliveryLocation),c(5),S("ngModel",e.selectedPurchase.paymentTerms),c(4),S("ngModel",e.selectedPurchase.deliveryDate),c(28),p("ngForOf",e.selectedPurchase.items),c(8),g(te(72,11,e.getTotalAmount(),"1.2-2")),c(5),p("disabled",e.selectedPurchase.supplierId===0),c(),D(" ",e.editMode?"Update":"Save"," ")}}var gp=class n{constructor(t,e,i,r,s){this.directPurchaseService=t;this.supplierService=e;this.unitService=i;this.router=r;this.settingsService=s}purchases=[];suppliers=[];units=[];searchQuery="";showModal=!1;editMode=!1;viewMode="table";selectedPurchase=this.getEmptyPurchase();loading=!1;ngOnInit(){this.loadPurchases(),this.loadSuppliers(),this.loadUnits()}loadPurchases(){this.loading=!0,this.directPurchaseService.getAll().subscribe({next:t=>{this.purchases=t,this.loading=!1},error:t=>{console.error("Error loading direct purchases",t),this.loading=!1}})}loadSuppliers(){this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}loadUnits(){this.unitService.getActive().subscribe({next:t=>this.units=t,error:t=>console.error("Error loading units",t)})}get filteredPurchases(){if(!this.searchQuery)return this.purchases;let t=this.searchQuery.toLowerCase();return this.purchases.filter(e=>e.poNumber?.toLowerCase().includes(t)||e.supplierName?.toLowerCase().includes(t))}getEmptyPurchase(){return{poType:"Direct Purchase",supplierId:0,supplierName:"",deliveryLocation:"",paymentTerms:"",deliveryDate:"",status:"Draft",items:[]}}getEmptyItem(){return{itemName:"",description:"",quantity:0,uom:"",rate:0,amount:0,remarks:""}}openModal(t){t?(this.editMode=!0,this.selectedPurchase=ce(N({},t),{items:[...t.items]})):(this.editMode=!1,this.selectedPurchase=this.getEmptyPurchase(),this.generatePONumber(),this.addItem()),this.showModal=!0}generatePONumber(){this.settingsService.generatePrefixId("po").subscribe({next:t=>{this.selectedPurchase.poNumber=t},error:t=>console.error("Error generating PO number",t)})}closeModal(){this.showModal=!1,this.selectedPurchase=this.getEmptyPurchase()}addItem(){this.selectedPurchase.items.push(this.getEmptyItem())}removeItem(t){this.selectedPurchase.items.length>1&&this.selectedPurchase.items.splice(t,1)}calculateItemAmount(t){t.amount=t.quantity*t.rate}getTotalAmount(){return this.selectedPurchase.items.reduce((t,e)=>t+(e.amount||0),0)}getSupplierName(t){let e=this.suppliers.find(i=>i.id===t);return e?e.name:""}savePurchase(){this.selectedPurchase.totalAmount=this.getTotalAmount(),this.selectedPurchase.supplierName=this.getSupplierName(this.selectedPurchase.supplierId),this.editMode&&this.selectedPurchase.id?this.directPurchaseService.update(this.selectedPurchase.id,this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error updating purchase",t)}):this.directPurchaseService.create(this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error creating purchase",t)})}deletePurchase(t){confirm("Are you sure you want to delete this purchase order?")&&this.directPurchaseService.delete(t).subscribe({next:()=>this.loadPurchases(),error:e=>console.error("Error deleting purchase",e)})}viewPurchase(t){this.openModal(t)}getStatusClass(t){switch(t){case"Completed":return"badge-success";case"Pending":return"badge-warning";case"Draft":return"badge-secondary";case"Cancelled":return"badge-danger";default:return"badge-info"}}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}get draftPurchases(){return this.filteredPurchases.filter(t=>t.status==="Draft"||t.status?.toLowerCase().includes("draft"))}get pendingPurchases(){return this.filteredPurchases.filter(t=>t.status==="Pending"||t.status==="Pending Approval"||t.status?.toLowerCase().includes("pending"))}get completedPurchases(){return this.filteredPurchases.filter(t=>t.status==="Completed"||t.status==="Approved"||t.status?.toLowerCase().includes("complete"))}printPO(t){t.id&&this.router.navigate(["/app/purchase/direct",t.id,"print"])}static \u0275fac=function(e){return new(e||n)(I(rr),I(_t),I(pi),I(ue),I(we))};static \u0275cmp=A({type:n,selectors:[["app-direct-purchase"]],standalone:!1,decls:44,vars:8,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"filter-group"],[1,"form-control"],[1,"btn","btn-secondary","btn-sm"],[1,"fas","fa-file-export"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fas","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fas","fa-table"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],["class","table-container",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-cart-plus"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View/Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","po-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","pending"],[1,"kanban-column","completed"],[1,"po-card",3,"click"],[1,"card-header"],[1,"po-number"],[1,"card-supplier"],["class","card-pr-ref",4,"ngIf"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"card-footer"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fas","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"card-pr-ref"],[1,"empty-column"],[1,"fas","fa-file-alt"],["title","View",1,"btn-icon",3,"click"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"modal-overlay",3,"click"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"grid-3"],[1,"form-group"],["type","text","value","Direct Purchase","readonly","",1,"form-control"],[1,"form-group","required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"section-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"items-table"],[1,"table","table-compact"],["colspan","5",1,"text-right"],["colspan","3"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[3,"ngValue"],["type","text","placeholder","Item name",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","text","placeholder","Description",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-sm"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","step","0.01",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","readonly","",1,"form-control","form-control-sm",3,"value"],["type","text","placeholder","Remarks",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Direct Purchase"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Purchase Order Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Direct Purchase"),a()()(),o(16,"button",4),y("click",function(){return i.openModal()}),v(17,"i",5),l(18," New "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"select",9)(23,"option"),l(24,"25"),a(),o(25,"option"),l(26,"50"),a(),o(27,"option"),l(28,"100"),a()(),o(29,"button",10),v(30,"i",11),l(31," Export "),a()(),o(32,"div",12)(33,"div",13)(34,"button",14),y("click",function(){return i.viewMode="kanban"}),v(35,"i",15),a(),o(36,"button",16),y("click",function(){return i.viewMode="table"}),v(37,"i",17),a()(),o(38,"div",18),v(39,"i",19),o(40,"input",20),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),x(41,EF,24,3,"div",21)(42,LF,28,9,"div",22),a()(),x(43,UF,78,14,"div",23)),e&2&&(c(34),J("active",i.viewMode==="kanban"),c(2),J("active",i.viewMode==="table"),c(4),S("ngModel",i.searchQuery),c(),p("ngIf",i.viewMode==="table"),c(),p("ngIf",i.viewMode==="kanban"),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,wt,je,G,K,De],styles:['.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:80px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e9ecef}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:teal;margin-bottom:16px}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}@media(max-width:768px){.grid-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.items-table[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   .col-sm[_ngcontent-%COMP%]{width:80px}.items-table[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.text-right[_ngcontent-%COMP%]{text-align:right}.modal-lg[_ngcontent-%COMP%]{max-width:900px;width:95%}.required[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";color:#dc3545}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.pending[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.kanban-column.completed[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 350px);overflow-y:auto}.po-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.po-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.po-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .po-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.card-supplier[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-pr-ref[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:8px;padding:4px 8px;background:#e8f5e9;border-radius:4px;display:inline-block}.card-pr-ref[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#388e3c;font-weight:500}.card-pr-ref[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600;margin-left:4px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.po-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}']})};function GF(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),a()()())}function qF(n,t){n&1&&(o(0,"tr")(1,"td",29),v(2,"i",31),o(3,"p"),l(4,"Loading..."),a()()())}function HF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),ee(15,"number"),a(),o(16,"td")(17,"span",32),l(18),a()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.prNumber),c(2),g(e.prDate),c(2),g(e.requiredDate),c(2),g(e.department),c(2),g(e.requestedBy),c(2),g(e.itemCount),c(2),g(te(15,9,e.totalAmount,"1.2-2")),c(3),p("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}var hp=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;selectedStatus="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({prNumber:e.prNumber,prDate:e.prDate,requiredDate:e.requiredDate,department:e.department,requestedBy:e.requestedBy,status:e.status,itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedStatus&&(this.reportData=this.reportData.filter(e=>e.status===this.selectedStatus)),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-list-report","Purchase Requisition List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-list-report")}getStatusClass(t){switch(t){case"Draft":return"badge-secondary";case"Submitted":return"badge-info";case"Approved":return"badge-success";case"Rejected":return"badge-danger";case"Partially Fulfilled":return"badge-warning";case"Fully Fulfilled":return"badge-primary";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(I(Lt),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-pr-list-report"]],standalone:!1,decls:82,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Draft"],["value","Submitted"],["value","Approved"],["value","Rejected"],["value","Partially Fulfilled"],["value","Fully Fulfilled"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-file-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase Requisition List Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"PR List"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Status"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedStatus,s)||(i.selectedStatus=s),s}),o(32,"option",15),l(33,"All Statuses"),a(),o(34,"option",16),l(35,"Draft"),a(),o(36,"option",17),l(37,"Submitted"),a(),o(38,"option",18),l(39,"Approved"),a(),o(40,"option",19),l(41,"Rejected"),a(),o(42,"option",20),l(43,"Partially Fulfilled"),a(),o(44,"option",21),l(45,"Fully Fulfilled"),a()()(),o(46,"div",13)(47,"label"),l(48,"From Date"),a(),o(49,"input",22),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(50,"div",13)(51,"label"),l(52,"To Date"),a(),o(53,"input",22),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(54,"button",23),y("click",function(){return i.generateReport()}),v(55,"i",24),l(56),a()()(),o(57,"div",11)(58,"div",25)(59,"table",26)(60,"thead")(61,"tr")(62,"th"),l(63,"PR Number"),a(),o(64,"th"),l(65,"Date"),a(),o(66,"th"),l(67,"Required Date"),a(),o(68,"th"),l(69,"Department"),a(),o(70,"th"),l(71,"Requested By"),a(),o(72,"th"),l(73,"Items"),a(),o(74,"th"),l(75,"Amount"),a(),o(76,"th"),l(77,"Status"),a()()(),o(78,"tbody"),x(79,GF,5,0,"tr",27)(80,qF,5,0,"tr",27)(81,HF,19,12,"tr",28),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedStatus),c(18),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function zF(n,t){n&1&&(o(0,"tr")(1,"td",19),v(2,"i",20),o(3,"p"),l(4,"No pending PR items found"),a()()())}function $F(n,t){n&1&&(o(0,"tr")(1,"td",19),v(2,"i",21),o(3,"p"),l(4,"Loading..."),a()()())}function QF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"strong"),l(17),a()(),o(18,"td"),l(19),a()()),n&2){let e=t.$implicit;c(2),g(e.prNumber),c(2),g(e.prDate),c(2),g(e.itemCode),c(2),g(e.itemName),c(2),g(e.department),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(3),g(e.pendingQty),c(2),g(e.unit)}}var _p=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;ngOnInit(){}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{let e=[];t.forEach(i=>{(i.status==="Approved"||i.status==="Partially Fulfilled")&&i.items?.forEach(r=>{let s=(r.quantity||0)-(r.fulfilledQuantity||0);s>0&&e.push({prNumber:i.prNumber,prDate:i.prDate,itemName:r.itemName,itemCode:r.itemCode,requestedQty:r.quantity||0,fulfilledQty:r.fulfilledQuantity||0,pendingQty:s,unit:r.unit||"",department:i.department})})}),this.reportData=e,this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-pending-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-pending-items-report","PR Item Pending Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-pending-items-report")}static \u0275fac=function(e){return new(e||n)(I(Lt),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-pr-pending-report"]],standalone:!1,decls:58,vars:8,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"empty-state"],[1,"fas","fa-check-circle"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"PR Item Pending Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"PR Pending"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"button",13),y("click",function(){return i.generateReport()}),v(29,"i",14),l(30),a()()(),o(31,"div",11)(32,"div",15)(33,"table",16)(34,"thead")(35,"tr")(36,"th"),l(37,"PR Number"),a(),o(38,"th"),l(39,"PR Date"),a(),o(40,"th"),l(41,"Item Code"),a(),o(42,"th"),l(43,"Item Name"),a(),o(44,"th"),l(45,"Department"),a(),o(46,"th"),l(47,"Requested"),a(),o(48,"th"),l(49,"Fulfilled"),a(),o(50,"th"),l(51,"Pending"),a(),o(52,"th"),l(53,"Unit"),a()()(),o(54,"tbody"),x(55,zF,5,0,"tr",17)(56,$F,5,0,"tr",17)(57,QF,20,9,"tr",18),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(5),p("disabled",i.loading),c(2),D(" ",i.loading?"Loading...":"Refresh"," "),c(25),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,K],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function KF(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",27),o(3,"p"),l(4,"Generate report to view data"),a()()())}function YF(n,t){n&1&&(o(0,"tr")(1,"td",26),v(2,"i",28),o(3,"p"),l(4,"Loading..."),a()()())}function ZF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",29),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),ee(18,"number"),a()()),n&2){let e=t.$implicit,i=f();c(2),g(e.referenceNumber),c(2),g(e.prNumber),c(2),g(e.fulfillmentDate),c(2),p("ngClass",i.getTypeClass(e.fulfillmentType)),c(),g(e.fulfillmentType),c(2),g(e.performedBy),c(2),g(e.supplierName!=="-"?e.supplierName:e.warehouseName),c(2),g(e.itemCount),c(2),g(te(18,9,e.totalAmount,"1.2-2"))}}var vp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({referenceNumber:e.referenceNumber,prNumber:e.prNumber,fulfillmentDate:e.fulfillmentDate,fulfillmentType:e.fulfillmentType,performedBy:e.performedBy,supplierName:e.supplierName||"-",warehouseName:e.warehouseName||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedType&&(this.reportData=this.reportData.filter(e=>e.fulfillmentType===this.selectedType)),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-fulfillment-history-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-fulfillment-history-report","PR Fulfillment History Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-fulfillment-history-report")}getTypeClass(t){switch(t){case"Convert to PO":return"badge-primary";case"Stock Issue":return"badge-success";case"Material Transfer":return"badge-info";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(I(vt),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-pr-history-report"]],standalone:!1,decls:76,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Convert to PO"],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-history"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"PR Fulfillment History Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"PR History"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Fulfillment Type"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedType,s)||(i.selectedType=s),s}),o(32,"option",15),l(33,"All Types"),a(),o(34,"option",16),l(35,"Convert to PO"),a(),o(36,"option",17),l(37,"Stock Issue"),a(),o(38,"option",18),l(39,"Material Transfer"),a()()(),o(40,"div",13)(41,"label"),l(42,"From Date"),a(),o(43,"input",19),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(44,"div",13)(45,"label"),l(46,"To Date"),a(),o(47,"input",19),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(48,"button",20),y("click",function(){return i.generateReport()}),v(49,"i",21),l(50),a()()(),o(51,"div",11)(52,"div",22)(53,"table",23)(54,"thead")(55,"tr")(56,"th"),l(57,"Reference #"),a(),o(58,"th"),l(59,"PR Number"),a(),o(60,"th"),l(61,"Date"),a(),o(62,"th"),l(63,"Type"),a(),o(64,"th"),l(65,"Performed By"),a(),o(66,"th"),l(67,"Supplier/Warehouse"),a(),o(68,"th"),l(69,"Items"),a(),o(70,"th"),l(71,"Amount"),a()()(),o(72,"tbody"),x(73,KF,5,0,"tr",24)(74,YF,5,0,"tr",24)(75,ZF,19,12,"tr",25),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedType),c(12),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function JF(n,t){n&1&&(o(0,"tr")(1,"td",21),v(2,"i",22),o(3,"p"),l(4,"Generate report to view data"),a()()())}function XF(n,t){n&1&&(o(0,"tr")(1,"td",21),v(2,"i",23),o(3,"p"),l(4,"Loading..."),a()()())}function eV(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),ee(15,"number"),a(),o(16,"td")(17,"span",24),l(18),a()()()),n&2){let e=t.$implicit;c(2),g(e.poNumber),c(2),g(e.poDate),c(2),g(e.prNumber),c(2),g(e.supplierName),c(2),g(e.expectedDelivery),c(2),g(e.itemCount),c(2),g(te(15,8,e.totalAmount,"1.2-2")),c(4),g(e.status)}}var yp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>e.fulfillmentType==="Convert to PO"||e.fulfillmentType==="PO").map(e=>({poNumber:e.referenceNumber,poDate:e.fulfillmentDate,prNumber:e.prNumber,supplierName:e.supplierName||"-",expectedDelivery:e.expectedDeliveryDate||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0,status:"Created"})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"po-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"po-list-report","Purchase Order List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"po-list-report")}static \u0275fac=function(e){return new(e||n)(I(vt),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-po-list-report"]],standalone:!1,decls:64,vars:10,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-cart"],[1,"fas","fa-spinner","fa-spin"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase Order List Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"PO List"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"From Date"),a(),o(31,"input",14),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(32,"div",13)(33,"label"),l(34,"To Date"),a(),o(35,"input",14),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(36,"button",15),y("click",function(){return i.generateReport()}),v(37,"i",16),l(38),a()()(),o(39,"div",11)(40,"div",17)(41,"table",18)(42,"thead")(43,"tr")(44,"th"),l(45,"PO Number"),a(),o(46,"th"),l(47,"Date"),a(),o(48,"th"),l(49,"PR Number"),a(),o(50,"th"),l(51,"Supplier"),a(),o(52,"th"),l(53,"Expected Delivery"),a(),o(54,"th"),l(55,"Items"),a(),o(56,"th"),l(57,"Amount"),a(),o(58,"th"),l(59,"Status"),a()()(),o(60,"tbody"),x(61,JF,5,0,"tr",19)(62,XF,5,0,"tr",19)(63,eV,19,11,"tr",20),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,H,q,G,K,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function tV(n,t){n&1&&(o(0,"tr")(1,"td",21),v(2,"i",22),o(3,"p"),l(4,"Generate report to view data"),a()()())}function nV(n,t){n&1&&(o(0,"tr")(1,"td",21),v(2,"i",23),o(3,"p"),l(4,"Loading..."),a()()())}function iV(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),ee(13,"number"),a(),o(14,"td"),l(15),ee(16,"number"),a(),o(17,"td")(18,"span",24),l(19),a()()()),n&2){let e=t.$implicit;c(2),g(e.dpNumber),c(2),g(e.date),c(2),g(e.supplier),c(2),g(e.item),c(2),g(e.quantity),c(2),g(te(13,8,e.rate,"1.2-2")),c(3),g(te(16,11,e.amount,"1.2-2")),c(4),g(e.status)}}var bp=class n{constructor(t){this.exportService=t}reportData=[];loading=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,setTimeout(()=>{this.reportData=[],this.loading=!1},500)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"direct-purchase-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"direct-purchase-report","Direct Purchase Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"direct-purchase-report")}static \u0275fac=function(e){return new(e||n)(I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-direct-purchase-report"]],standalone:!1,decls:64,vars:10,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-bag"],[1,"fas","fa-spinner","fa-spin"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Direct Purchase Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Direct Purchase"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"From Date"),a(),o(31,"input",14),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(32,"div",13)(33,"label"),l(34,"To Date"),a(),o(35,"input",14),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(36,"button",15),y("click",function(){return i.generateReport()}),v(37,"i",16),l(38),a()()(),o(39,"div",11)(40,"div",17)(41,"table",18)(42,"thead")(43,"tr")(44,"th"),l(45,"DP Number"),a(),o(46,"th"),l(47,"Date"),a(),o(48,"th"),l(49,"Supplier"),a(),o(50,"th"),l(51,"Item"),a(),o(52,"th"),l(53,"Quantity"),a(),o(54,"th"),l(55,"Rate"),a(),o(56,"th"),l(57,"Amount"),a(),o(58,"th"),l(59,"Status"),a()()(),o(60,"tbody"),x(61,tV,5,0,"tr",19)(62,nV,5,0,"tr",19)(63,iV,20,14,"tr",20),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[L,B,H,q,G,K,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function rV(n,t){n&1&&(o(0,"tr")(1,"td",25),v(2,"i",26),o(3,"p"),l(4,"Generate report to view data"),a()()())}function oV(n,t){n&1&&(o(0,"tr")(1,"td",25),v(2,"i",27),o(3,"p"),l(4,"Loading..."),a()()())}function aV(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",28),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),a(),o(18,"td"),l(19),a()()),n&2){let e=t.$implicit,i=f();c(2),g(e.referenceNumber),c(2),g(e.date),c(2),p("ngClass",i.getTypeClass(e.type)),c(),g(e.type),c(2),g(e.prNumber),c(2),g(e.warehouse),c(2),g(e.sourceLocation),c(2),g(e.targetLocation),c(2),g(e.performedBy),c(2),g(e.itemCount)}}var Cp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>this.selectedType==="Stock Issue"?e.fulfillmentType==="Stock Issue":this.selectedType==="Material Transfer"?e.fulfillmentType==="Material Transfer":e.fulfillmentType==="Stock Issue"||e.fulfillmentType==="Material Transfer").map(e=>({referenceNumber:e.referenceNumber,date:e.fulfillmentDate,type:e.fulfillmentType,prNumber:e.prNumber,warehouse:e.warehouseName||"-",sourceLocation:e.sourceLocation||"-",targetLocation:e.targetLocation||"-",performedBy:e.performedBy,itemCount:e.items?.length||0})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-issue-transfer-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-issue-transfer-report","Stock Issue / Transfer Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-issue-transfer-report")}getTypeClass(t){return t==="Stock Issue"?"badge-success":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(vt),I(Ne))};static \u0275cmp=A({type:n,selectors:[["app-stock-issue-transfer-report"]],standalone:!1,decls:76,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Issue / Transfer Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Stock Issue/Transfer"),a()()(),o(16,"div",4)(17,"button",5),y("click",function(){return i.exportToExcel()}),v(18,"i",6),l(19," Excel "),a(),o(20,"button",7),y("click",function(){return i.exportToPDF()}),v(21,"i",8),l(22," PDF "),a(),o(23,"button",9),y("click",function(){return i.exportToCSV()}),v(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Type"),a(),o(31,"select",14),M("ngModelChange",function(s){return E(i.selectedType,s)||(i.selectedType=s),s}),o(32,"option",15),l(33,"All Types"),a(),o(34,"option",16),l(35,"Stock Issue"),a(),o(36,"option",17),l(37,"Material Transfer"),a()()(),o(38,"div",13)(39,"label"),l(40,"From Date"),a(),o(41,"input",18),M("ngModelChange",function(s){return E(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(42,"div",13)(43,"label"),l(44,"To Date"),a(),o(45,"input",18),M("ngModelChange",function(s){return E(i.toDate,s)||(i.toDate=s),s}),a()(),o(46,"button",19),y("click",function(){return i.generateReport()}),v(47,"i",20),l(48),a()()(),o(49,"div",11)(50,"div",21)(51,"table",22)(52,"thead")(53,"tr")(54,"th"),l(55,"Reference #"),a(),o(56,"th"),l(57,"Date"),a(),o(58,"th"),l(59,"Type"),a(),o(60,"th"),l(61,"PR Number"),a(),o(62,"th"),l(63,"Warehouse"),a(),o(64,"th"),l(65,"Source"),a(),o(66,"th"),l(67,"Target"),a(),o(68,"th"),l(69,"Performed By"),a(),o(70,"th"),l(71,"Items"),a()()(),o(72,"tbody"),x(73,rV,5,0,"tr",23)(74,oV,5,0,"tr",23)(75,aV,20,10,"tr",24),a()()()()()),e&2&&(c(17),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(3),p("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedType),c(10),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),p("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(25),p("ngIf",i.reportData.length===0&&!i.loading),c(),p("ngIf",i.loading),c(),p("ngForOf",i.reportData))},dependencies:[oe,L,B,Y,Z,H,Q,q,G,K],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};var or=class n{constructor(t){this.http=t}apiUrl="/api/audit";getAll(t){let e=new Ft;return t&&(t.module&&(e=e.set("module",t.module)),t.entityType&&(e=e.set("entityType",t.entityType)),t.action&&(e=e.set("action",t.action)),t.performedBy&&(e=e.set("performedBy",t.performedBy)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate)),t.searchTerm&&(e=e.set("search",t.searchTerm))),this.http.get(this.apiUrl,{params:e}).pipe(ln(()=>me([])))}getByModule(t,e){let i=new Ft().set("module",t);return e&&(e.entityType&&(i=i.set("entityType",e.entityType)),e.action&&(i=i.set("action",e.action)),e.performedBy&&(i=i.set("performedBy",e.performedBy)),e.startDate&&(i=i.set("startDate",e.startDate)),e.endDate&&(i=i.set("endDate",e.endDate)),e.searchTerm&&(i=i.set("search",e.searchTerm))),this.http.get(this.apiUrl,{params:i}).pipe(ln(()=>me([])))}getSystemAudits(t){return this.getByModule("SYSTEM",t)}getInventoryAudits(t){let e=new Ft().set("modules","INVENTORY,STOCK_MOVEMENT");return this.http.get(this.apiUrl,{params:e}).pipe(ln(()=>me([])))}getPurchaseAudits(t){return this.getByModule("PURCHASE",t)}getByEntityId(t,e){return this.http.get(`${this.apiUrl}/entity/${t}/${e}`).pipe(ln(()=>me([])))}exportToExcel(t){let e=new Ft;return t&&(t.module&&(e=e.set("module",t.module)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(`${this.apiUrl}/export`,{params:e,responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function sV(n,t){if(n&1&&(o(0,"option",20),l(1),a()),n&2){let e=t.$implicit,i=f();p("value",e),c(),g(i.formatAction(e))}}function lV(n,t){n&1&&(o(0,"div",21),v(1,"i",22),l(2," Loading... "),a())}function cV(n,t){if(n&1&&(o(0,"tr")(1,"td",26),l(2),a(),o(3,"td")(4,"span",27),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td",28),v(11,"i",29),l(12),a(),o(13,"td",30),l(14),a(),o(15,"td"),l(16),a()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),p("ngClass",i.getActionClass(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(2),g(e.entityType),c(2),g(e.entityName||"-"),c(3),D(" ",e.performedBy," "),c(2),g(e.details||"-"),c(2),g(e.ipAddress||"-")}}function dV(n,t){n&1&&(o(0,"tr")(1,"td",31),v(2,"i",32),o(3,"p"),l(4,"No audit records found"),a()()())}function uV(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),a(),o(5,"th"),l(6,"Action"),a(),o(7,"th"),l(8,"Entity Type"),a(),o(9,"th"),l(10,"Entity Name"),a(),o(11,"th"),l(12,"Performed By"),a(),o(13,"th"),l(14,"Details"),a(),o(15,"th"),l(16,"IP Address"),a()()(),o(17,"tbody"),x(18,cV,17,8,"tr",24)(19,dV,5,0,"tr",25),a()()),n&2){let e=f();c(18),p("ngForOf",e.filteredAudits),c(),p("ngIf",e.filteredAudits.length===0)}}function pV(n,t){if(n&1&&(o(0,"div",33),l(1),a()),n&2){let e=f();c(),le(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var xp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";startDate="";endDate="";actions=["LOGIN","LOGOUT","PASSWORD_CHANGED","SETTINGS_UPDATED","CREATED","UPDATED","DELETED"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getSystemAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=this.isWithinDateRange(t.timestamp);return e&&i&&r})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"LOGIN":return"badge-success";case"UPDATED":case"SETTINGS_UPDATED":return"badge-info";case"DELETED":case"LOGOUT":return"badge-warning";case"PASSWORD_CHANGED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}exportToExcel(){this.auditService.exportToExcel({module:"SYSTEM"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`system-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(or))};static \u0275cmp=A({type:n,selectors:[["app-system-audits"]],standalone:!1,decls:38,vars:8,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by user, entity, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],["colspan","7",1,"empty-state"],[1,"fas","fa-history"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"System Audits"),a(),o(4,"p",2),l(5,"Track system-level activities including logins, settings changes, and user management"),a()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),a(),o(11,"input",6),M("ngModelChange",function(s){return E(i.searchTerm,s)||(i.searchTerm=s),s}),y("input",function(){return i.applyFilters()}),a()(),o(12,"div",5)(13,"label"),l(14,"Action Type"),a(),o(15,"select",7),M("ngModelChange",function(s){return E(i.selectedAction,s)||(i.selectedAction=s),s}),y("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Actions"),a(),x(18,sV,2,2,"option",9),a()(),o(19,"div",5)(20,"label"),l(21,"Start Date"),a(),o(22,"input",10),M("ngModelChange",function(s){return E(i.startDate,s)||(i.startDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(23,"div",5)(24,"label"),l(25,"End Date"),a(),o(26,"input",10),M("ngModelChange",function(s){return E(i.endDate,s)||(i.endDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(27,"div",11)(28,"button",12),y("click",function(){return i.clearFilters()}),v(29,"i",13),l(30," Clear "),a(),o(31,"button",14),y("click",function(){return i.exportToExcel()}),v(32,"i",15),l(33," Export "),a()()()(),o(34,"div",16),x(35,lV,3,0,"div",17)(36,uV,20,2,"table",18),a(),x(37,pV,2,2,"div",19),a()),e&2&&(c(11),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedAction),c(3),p("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),p("ngIf",i.loading),c(),p("ngIf",!i.loading),c(),p("ngIf",!i.loading))},dependencies:[oe,L,B,Y,Z,H,Q,q,G],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:180px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.details-cell[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function mV(n,t){if(n&1&&(o(0,"option",20),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function fV(n,t){if(n&1&&(o(0,"option",20),l(1),a()),n&2){let e=t.$implicit,i=f();p("value",e),c(),g(i.formatAction(e))}}function gV(n,t){n&1&&(o(0,"div",21),v(1,"i",22),l(2," Loading... "),a())}function hV(n,t){if(n&1&&(o(0,"span",35)(1,"span",36),l(2),a(),v(3,"i",37),o(4,"span",38),l(5),a()()),n&2){let e=f().$implicit;c(2),g(e.previousValue),c(3),g(e.newValue)}}function _V(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function vV(n,t){if(n&1&&(o(0,"tr")(1,"td",26),l(2),a(),o(3,"td")(4,"span",27),l(5),a()(),o(6,"td")(7,"span",28),v(8,"i",29),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td",30),x(13,hV,6,2,"span",31)(14,_V,2,0,"span",25),a(),o(15,"td",32),v(16,"i",33),l(17),a(),o(18,"td",34),l(19),a()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),p("ngClass",i.getActionClass(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(4),D(" ",e.entityType," "),c(2),g(e.entityName||"-"),c(2),p("ngIf",e.previousValue&&e.newValue),c(),p("ngIf",!e.previousValue||!e.newValue),c(3),D(" ",e.performedBy," "),c(2),g(e.details||"-")}}function yV(n,t){n&1&&(o(0,"tr")(1,"td",39),v(2,"i",40),o(3,"p"),l(4,"No inventory audit records found"),a()()())}function bV(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),a(),o(5,"th"),l(6,"Action"),a(),o(7,"th"),l(8,"Entity Type"),a(),o(9,"th"),l(10,"Entity Name"),a(),o(11,"th"),l(12,"Changes"),a(),o(13,"th"),l(14,"Performed By"),a(),o(15,"th"),l(16,"Details"),a()()(),o(17,"tbody"),x(18,vV,20,9,"tr",24)(19,yV,5,0,"tr",25),a()()),n&2){let e=f();c(18),p("ngForOf",e.filteredAudits),c(),p("ngIf",e.filteredAudits.length===0)}}function CV(n,t){if(n&1&&(o(0,"div",41),l(1),a()),n&2){let e=f();c(),le(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var Sp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STOCK_ISSUED","STOCK_TRANSFERRED"];entityTypes=["Item","Group","Warehouse","Bin","Supplier","Unit","GRN","Stock Issue","Stock Transfer","Stock Adjustment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getInventoryAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,s=this.isWithinDateRange(t.timestamp);return e&&i&&r&&s})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"ITEM_ADDED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":return"badge-info";case"DELETED":case"ITEM_REMOVED":return"badge-danger";case"STOCK_ISSUED":return"badge-warning";case"STOCK_TRANSFERRED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getChangeIndicator(t){return t.previousValue&&t.newValue?`${t.previousValue} \u2192 ${t.newValue}`:"-"}exportToExcel(){this.auditService.exportToExcel({module:"INVENTORY"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`inventory-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(or))};static \u0275cmp=A({type:n,selectors:[["app-inventory-audits"]],standalone:!1,decls:45,vars:10,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by item, user, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-box"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"fas","fa-arrow-right"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-boxes"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Inventory Audits"),a(),o(4,"p",2),l(5,"Track all inventory-related changes including items, stock movements, and warehouse operations"),a()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),a(),o(11,"input",6),M("ngModelChange",function(s){return E(i.searchTerm,s)||(i.searchTerm=s),s}),y("input",function(){return i.applyFilters()}),a()(),o(12,"div",5)(13,"label"),l(14,"Entity Type"),a(),o(15,"select",7),M("ngModelChange",function(s){return E(i.selectedEntityType,s)||(i.selectedEntityType=s),s}),y("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Types"),a(),x(18,mV,2,2,"option",9),a()(),o(19,"div",5)(20,"label"),l(21,"Action"),a(),o(22,"select",7),M("ngModelChange",function(s){return E(i.selectedAction,s)||(i.selectedAction=s),s}),y("change",function(){return i.applyFilters()}),o(23,"option",8),l(24,"All Actions"),a(),x(25,fV,2,2,"option",9),a()(),o(26,"div",5)(27,"label"),l(28,"Start Date"),a(),o(29,"input",10),M("ngModelChange",function(s){return E(i.startDate,s)||(i.startDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(30,"div",5)(31,"label"),l(32,"End Date"),a(),o(33,"input",10),M("ngModelChange",function(s){return E(i.endDate,s)||(i.endDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(34,"div",11)(35,"button",12),y("click",function(){return i.clearFilters()}),v(36,"i",13),l(37," Clear "),a(),o(38,"button",14),y("click",function(){return i.exportToExcel()}),v(39,"i",15),l(40," Export "),a()()()(),o(41,"div",16),x(42,gV,3,0,"div",17)(43,bV,20,2,"table",18),a(),x(44,CV,2,2,"div",19),a()),e&2&&(c(11),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedEntityType),c(3),p("ngForOf",i.entityTypes),c(4),S("ngModel",i.selectedAction),c(3),p("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),p("ngIf",i.loading),c(),p("ngIf",!i.loading),c(),p("ngIf",!i.loading))},dependencies:[oe,L,B,Y,Z,H,Q,q,G],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function xV(n,t){if(n&1&&(o(0,"option",31),l(1),a()),n&2){let e=t.$implicit;p("value",e),c(),g(e)}}function SV(n,t){if(n&1&&(o(0,"option",31),l(1),a()),n&2){let e=t.$implicit,i=f();p("value",e),c(),g(i.formatAction(e))}}function MV(n,t){n&1&&(o(0,"div",32),v(1,"i",33),l(2," Loading... "),a())}function EV(n,t){if(n&1&&(o(0,"span",48)(1,"span",49),l(2),a(),v(3,"i",12),o(4,"span",50),l(5),a()()),n&2){let e=f().$implicit;c(2),g(e.previousValue),c(3),g(e.newValue)}}function wV(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function IV(n,t){if(n&1&&(o(0,"tr")(1,"td",37),l(2),a(),o(3,"td")(4,"span",38),v(5,"i",39),l(6),a()(),o(7,"td")(8,"span",40),v(9,"i",41),l(10),a()(),o(11,"td",42),l(12),a(),o(13,"td",43),x(14,EV,6,2,"span",44)(15,wV,2,0,"span",36),a(),o(16,"td",45),v(17,"i",46),l(18),a(),o(19,"td",47),l(20),a()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),p("ngClass",i.getActionClass(e.action)),c(),p("ngClass",i.getWorkflowIcon(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(4),D(" ",e.entityType," "),c(2),g(e.entityName||"-"),c(2),p("ngIf",e.previousValue&&e.newValue),c(),p("ngIf",!e.previousValue||!e.newValue),c(3),D(" ",e.performedBy," "),c(2),g(e.details||"-")}}function PV(n,t){n&1&&(o(0,"tr")(1,"td",51),v(2,"i",52),o(3,"p"),l(4,"No purchase audit records found"),a()()())}function DV(n,t){if(n&1&&(o(0,"table",34)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),a(),o(5,"th"),l(6,"Action"),a(),o(7,"th"),l(8,"Document Type"),a(),o(9,"th"),l(10,"Document No."),a(),o(11,"th"),l(12,"Changes"),a(),o(13,"th"),l(14,"Performed By"),a(),o(15,"th"),l(16,"Details"),a()()(),o(17,"tbody"),x(18,IV,21,10,"tr",35)(19,PV,5,0,"tr",36),a()()),n&2){let e=f();c(18),p("ngForOf",e.filteredAudits),c(),p("ngIf",e.filteredAudits.length===0)}}function TV(n,t){if(n&1&&(o(0,"div",53),l(1),a()),n&2){let e=f();c(),le(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var Mp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","SUBMITTED","APPROVED","REJECTED","CONVERTED_TO_PO","STOCK_ISSUED","STOCK_TRANSFERRED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STATUS_CHANGED"];entityTypes=["Purchase Requisition","Purchase Order","Direct Purchase","PR Fulfillment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getPurchaseAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,s=this.isWithinDateRange(t.timestamp);return e&&i&&r&&s})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"APPROVED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":case"STATUS_CHANGED":return"badge-info";case"DELETED":case"REJECTED":return"badge-danger";case"SUBMITTED":return"badge-warning";case"CONVERTED_TO_PO":return"badge-primary";case"STOCK_ISSUED":case"STOCK_TRANSFERRED":return"badge-teal";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getWorkflowIcon(t){switch(t){case"CREATED":return"fa-plus-circle";case"SUBMITTED":return"fa-paper-plane";case"APPROVED":return"fa-check-circle";case"REJECTED":return"fa-times-circle";case"CONVERTED_TO_PO":return"fa-exchange-alt";case"STOCK_ISSUED":return"fa-arrow-right";case"STOCK_TRANSFERRED":return"fa-truck";case"QUANTITY_MODIFIED":return"fa-edit";default:return"fa-history"}}exportToExcel(){this.auditService.exportToExcel({module:"PURCHASE"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`purchase-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(or))};static \u0275cmp=A({type:n,selectors:[["app-purchase-audits"]],standalone:!1,decls:70,vars:10,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"audit-legend"],[1,"legend-title"],[1,"legend-items"],[1,"legend-item"],[1,"fas","fa-plus-circle"],[1,"fas","fa-paper-plane"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-arrow-right"],[1,"fas","fa-truck"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by PR/PO number, user...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"action-badge",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-file-alt"],[1,"doc-number"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-clipboard-list"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Purchase Audits"),a(),o(4,"p",2),l(5,"Complete audit trail for purchase requisitions, orders, and fulfillment workflows"),a()(),o(6,"div",3)(7,"div",4),l(8,"Workflow Tracking:"),a(),o(9,"div",5)(10,"span",6),v(11,"i",7),l(12," Created"),a(),o(13,"span",6),v(14,"i",8),l(15," Submitted"),a(),o(16,"span",6),v(17,"i",9),l(18," Approved"),a(),o(19,"span",6),v(20,"i",10),l(21," Rejected"),a(),o(22,"span",6),v(23,"i",11),l(24," Converted to PO"),a(),o(25,"span",6),v(26,"i",12),l(27," Stock Issued"),a(),o(28,"span",6),v(29,"i",13),l(30," Transferred"),a()()(),o(31,"div",14)(32,"div",15)(33,"div",16)(34,"label"),l(35,"Search"),a(),o(36,"input",17),M("ngModelChange",function(s){return E(i.searchTerm,s)||(i.searchTerm=s),s}),y("input",function(){return i.applyFilters()}),a()(),o(37,"div",16)(38,"label"),l(39,"Document Type"),a(),o(40,"select",18),M("ngModelChange",function(s){return E(i.selectedEntityType,s)||(i.selectedEntityType=s),s}),y("change",function(){return i.applyFilters()}),o(41,"option",19),l(42,"All Types"),a(),x(43,xV,2,2,"option",20),a()(),o(44,"div",16)(45,"label"),l(46,"Action"),a(),o(47,"select",18),M("ngModelChange",function(s){return E(i.selectedAction,s)||(i.selectedAction=s),s}),y("change",function(){return i.applyFilters()}),o(48,"option",19),l(49,"All Actions"),a(),x(50,SV,2,2,"option",20),a()(),o(51,"div",16)(52,"label"),l(53,"Start Date"),a(),o(54,"input",21),M("ngModelChange",function(s){return E(i.startDate,s)||(i.startDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(55,"div",16)(56,"label"),l(57,"End Date"),a(),o(58,"input",21),M("ngModelChange",function(s){return E(i.endDate,s)||(i.endDate=s),s}),y("change",function(){return i.applyFilters()}),a()(),o(59,"div",22)(60,"button",23),y("click",function(){return i.clearFilters()}),v(61,"i",24),l(62," Clear "),a(),o(63,"button",25),y("click",function(){return i.exportToExcel()}),v(64,"i",26),l(65," Export "),a()()()(),o(66,"div",27),x(67,MV,3,0,"div",28)(68,DV,20,2,"table",29),a(),x(69,TV,2,2,"div",30),a()),e&2&&(c(36),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedEntityType),c(3),p("ngForOf",i.entityTypes),c(4),S("ngModel",i.selectedAction),c(3),p("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),p("ngIf",i.loading),c(),p("ngIf",!i.loading),c(),p("ngIf",!i.loading))},dependencies:[oe,L,B,Y,Z,H,Q,q,G],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.audit-legend[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f2f2,#f8f9fa);border:1px solid #b8d4d4;border-radius:8px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-title[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:.9rem}.audit-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:#555}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.doc-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.action-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:600;display:inline-flex;align-items:center;gap:6px}.action-badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.action-badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.action-badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.action-badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.action-badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.action-badge.badge-teal[_ngcontent-%COMP%]{background:teal;color:#fff}.action-badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function OV(n,t){if(n&1&&(o(0,"div",45)(1,"label"),l(2,"Purpose:"),a(),o(3,"p",46),l(4),a()()),n&2){let e=f(2);c(4),g(e.pr.purpose)}}function kV(n,t){if(n&1&&(o(0,"tr")(1,"td",34),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td",34),l(10),a(),o(11,"td",34),l(12),a(),o(13,"td",34),l(14),a(),o(15,"td",34)(16,"span",47),l(17),a()()()),n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(2),g(e.itemName),c(2),g(e.itemDescription),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(r.getPendingQty(e)),c(2),g(e.uom),c(2),Mn((e.status||"Pending").toLowerCase().replace(" ","-")),c(),D(" ",e.status||"Pending"," ")}}function NV(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a()()),n&2){let e=t.$implicit;c(2),g(e.date),c(2),g(e.action),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.performedBy),c(2),g(e.reference)}}function RV(n,t){if(n&1&&(o(0,"div",48)(1,"h3",23),l(2,"Fulfillment History"),a(),o(3,"table",49)(4,"thead")(5,"tr")(6,"th"),l(7,"Date"),a(),o(8,"th"),l(9,"Action"),a(),o(10,"th"),l(11,"Item"),a(),o(12,"th"),l(13,"Quantity"),a(),o(14,"th"),l(15,"Performed By"),a(),o(16,"th"),l(17,"Reference"),a()()(),o(18,"tbody"),x(19,NV,13,6,"tr",31),a()()()),n&2){let e=f(2);c(19),p("ngForOf",e.fulfillmentHistory)}}function AV(n,t){if(n&1&&(o(0,"div",50)(1,"h3",23),l(2,"Remarks"),a(),o(3,"p",51),l(4),a()()),n&2){let e=f(2);c(4),g(e.pr.remarks)}}function FV(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h1",11),l(5),a(),o(6,"p",12),l(7),a()(),o(8,"div",13)(9,"h2"),l(10,"PURCHASE REQUISITION"),a(),o(11,"span",14),l(12,"INTERNAL DOCUMENT"),a()()(),o(13,"div",15)(14,"div",16)(15,"div",17)(16,"label"),l(17,"PR Number:"),a(),o(18,"span",18),l(19),a()(),o(20,"div",17)(21,"label"),l(22,"PR Date:"),a(),o(23,"span",18),l(24),a()(),o(25,"div",17)(26,"label"),l(27,"Department:"),a(),o(28,"span",18),l(29),a()(),o(30,"div",17)(31,"label"),l(32,"Required Date:"),a(),o(33,"span",18),l(34),a()(),o(35,"div",17)(36,"label"),l(37,"Priority:"),a(),o(38,"span",19),l(39),a()(),o(40,"div",17)(41,"label"),l(42,"Status:"),a(),o(43,"span",20),l(44),a()()(),x(45,OV,5,1,"div",21),a(),o(46,"div",22)(47,"h3",23),l(48,"Material List"),a(),o(49,"table",24)(50,"thead")(51,"tr")(52,"th",25),l(53,"#"),a(),o(54,"th",26),l(55,"Item Name"),a(),o(56,"th",27),l(57,"Description"),a(),o(58,"th",28),l(59,"Requested Qty"),a(),o(60,"th",28),l(61,"Fulfilled Qty"),a(),o(62,"th",28),l(63,"Pending Qty"),a(),o(64,"th",29),l(65,"UOM"),a(),o(66,"th",30),l(67,"Status"),a()()(),o(68,"tbody"),x(69,kV,18,10,"tr",31),a(),o(70,"tfoot")(71,"tr",32)(72,"td",33)(73,"strong"),l(74,"Totals:"),a()(),o(75,"td",34)(76,"strong"),l(77),a()(),o(78,"td",34)(79,"strong"),l(80),a()(),o(81,"td",34)(82,"strong"),l(83),a()(),v(84,"td",35),a()()()(),x(85,RV,20,1,"div",36)(86,AV,5,1,"div",37),o(87,"div",38)(88,"div",39),v(89,"div",40),o(90,"p",41),l(91,"Requested By"),a(),o(92,"p",42),l(93),a(),o(94,"p",43),l(95,"Date: _______________"),a()(),o(96,"div",39),v(97,"div",40),o(98,"p",41),l(99,"Approved By"),a(),o(100,"p",42),l(101),a(),o(102,"p",43),l(103,"Date: _______________"),a()()(),o(104,"div",44)(105,"p"),l(106),a(),o(107,"p"),l(108,"Page 1 of 1"),a()()()()),n&2){let e=f();c(5),g(e.companyName),c(2),g(e.companyAddress),c(12),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.pr.department),c(5),g(e.formatDate(e.pr.requiredDate)),c(4),Mn(e.pr.priority.toLowerCase()),c(),g(e.pr.priority),c(5),g(e.pr.status),c(),p("ngIf",e.pr.purpose),c(24),p("ngForOf",e.pr.items),c(8),g(e.getTotalRequested()),c(3),g(e.getTotalFulfilled()),c(3),g(e.getTotalPending()),c(2),p("ngIf",e.fulfillmentHistory.length>0),c(),p("ngIf",e.pr.remarks),c(7),g(e.pr.requestedBy||"_________________"),c(8),g(e.pr.approvedBy||"_________________"),c(5),D("This is an internal document. Printed on: ",e.formatDate(e.today))}}function VV(n,t){n&1&&(o(0,"div",52),v(1,"div",53),o(2,"p"),l(3,"Loading document..."),a()())}var Ep=class n{constructor(t,e,i){this.route=t;this.router=e;this.prService=i}pr=null;prId=0;loading=!0;companyName="Hao System";companyAddress="123 Business Street, City, Country";fulfillmentHistory=[];today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.prId=+t.id,this.loadPR()})}loadPR(){this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.loadFulfillmentHistory(),this.loading=!1,setTimeout(()=>this.triggerPrint(),500)},error:t=>{console.error("Error loading PR:",t),this.loading=!1}})}loadFulfillmentHistory(){this.pr&&this.pr.items&&(this.fulfillmentHistory=this.pr.items.filter(t=>(t.fulfilledQuantity||0)>0).map(t=>({date:this.formatDate(new Date().toISOString()),action:t.status==="Fully Fulfilled"?"Stock Issue":"Partial Fulfillment",itemName:t.itemName,quantity:t.fulfilledQuantity||0,performedBy:"System",reference:this.pr?.prNumber||""})))}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""}getPendingQty(t){return Math.max(0,(t.quantity||0)-(t.fulfilledQuantity||0))}getTotalRequested(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.quantity||0),0)}getTotalFulfilled(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.fulfilledQuantity||0),0)}getTotalPending(){return this.getTotalRequested()-this.getTotalFulfilled()}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/requisition"])}static \u0275fac=function(e){return new(e||n)(I(Xe),I(ue),I(Lt))};static \u0275cmp=A({type:n,selectors:[["app-pr-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-header"],[1,"company-info"],[1,"company-name"],[1,"company-address"],[1,"document-title"],[1,"internal-badge"],[1,"pr-info-section"],[1,"info-grid"],[1,"info-item"],[1,"value"],[1,"value","priority"],[1,"value","status"],["class","purpose-section",4,"ngIf"],[1,"materials-section"],[1,"section-title"],[1,"materials-table"],[1,"col-sno"],[1,"col-item"],[1,"col-desc"],[1,"col-qty"],[1,"col-uom"],[1,"col-status"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3",1,"right"],[1,"center"],["colspan","2"],["class","history-section",4,"ngIf"],["class","remarks-section",4,"ngIf"],[1,"signatures-section"],[1,"signature-box"],[1,"signature-line"],[1,"signature-label"],[1,"signature-name"],[1,"signature-date"],[1,"document-footer"],[1,"purpose-section"],[1,"purpose-text"],[1,"item-status"],[1,"history-section"],[1,"history-table"],[1,"remarks-section"],[1,"remarks-text"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),y("click",function(){return i.goBack()}),v(2,"i",2),l(3," Back "),a(),o(4,"button",3),y("click",function(){return i.triggerPrint()}),v(5,"i",4),l(6," Print "),a()(),x(7,FV,109,20,"div",5)(8,VV,4,0,"div",6)),e&2&&(c(7),p("ngIf",i.pr),c(),p("ngIf",i.loading))},dependencies:[L,B],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:teal;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#066}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #008080;padding-bottom:15px;margin-bottom:20px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:teal;margin:0 0 5px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{text-align:right}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin:0 0 8px}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .internal-badge[_ngcontent-%COMP%]{display:inline-block;background:teal;color:#fff;padding:4px 12px;border-radius:4px;font-size:11px;font-weight:600}.pr-info-section[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:15px;margin-bottom:20px}.pr-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.urgent[_ngcontent-%COMP%]{color:#ff9800}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.critical[_ngcontent-%COMP%]{color:#dc3545}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.normal[_ngcontent-%COMP%]{color:#28a745}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.status[_ngcontent-%COMP%]{color:teal}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e9ecef}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   .purpose-text[_ngcontent-%COMP%]{font-size:13px;color:#333;margin:4px 0 0}.section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:teal;margin:0 0 10px;padding-bottom:5px;border-bottom:2px solid #008080}.materials-section[_ngcontent-%COMP%]{margin-bottom:20px}.materials-table[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .materials-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 6px;text-align:left}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;text-transform:uppercase;font-size:10px}.materials-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n), .history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.materials-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.materials-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.materials-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:30px}.materials-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%]{width:120px}.materials-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:80px}.materials-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%]{width:60px}.materials-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%]{width:90px}.materials-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:10px;font-size:10px;font-weight:600}.materials-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.materials-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.materials-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.materials-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e9ecef;font-weight:600}.history-section[_ngcontent-%COMP%], .remarks-section[_ngcontent-%COMP%]{margin-bottom:20px}.remarks-section[_ngcontent-%COMP%]   .remarks-text[_ngcontent-%COMP%]{font-size:12px;color:#333;margin:0;padding:10px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px}.signatures-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:40px;padding-top:20px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:200px;text-align:center}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:2px solid #333;margin-bottom:8px;height:40px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#333;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-name[_ngcontent-%COMP%]{font-size:11px;color:#666;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-date[_ngcontent-%COMP%]{font-size:10px;color:#999;margin:0}.document-footer[_ngcontent-%COMP%]{margin-top:30px;padding-top:15px;border-top:1px solid #ddd;display:flex;justify-content:space-between;font-size:10px;color:#999}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function LV(n,t){if(n&1&&(o(0,"div",19)(1,"span",20),l(2,"PR Ref:"),a(),o(3,"span",21),l(4),a()()),n&2){let e=f(2);c(4),g(e.po.prNumber)}}function jV(n,t){if(n&1&&(o(0,"tr")(1,"td",54),l(2),a(),o(3,"td",54),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",54),l(8),a(),o(9,"td",54),l(10),a(),o(11,"td",54),l(12),a(),o(13,"td",55),l(14),a(),o(15,"td",54),l(16),a(),o(17,"td",55),l(18),a()()),n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(2),g(e.itemCode||100+i+1),c(2),g(e.itemName),c(2),g(e.hsnCode||r.getDefaultHsn(e)),c(2),g(e.quantity),c(2),g(e.uom||e.unit||"nos"),c(2),g(r.formatNumber(e.rate)),c(2),D("",e.taxRate||r.defaultTaxRate,"%"),c(2),g(r.formatNumber(r.getItemAmount(e)))}}function BV(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"h1"),l(4,"PURCHASE ORDER"),a()(),o(5,"div",10)(6,"div",11),v(7,"i",12),o(8,"div",13)(9,"span",14),l(10),a(),o(11,"span",15),l(12),a()()(),o(13,"p",16),l(14),a()(),o(15,"div",17)(16,"div",18)(17,"div",19)(18,"span",20),l(19,"Supplier Name:"),a(),o(20,"span",21),l(21),a()(),o(22,"div",19)(23,"span",20),l(24,"Address:"),a(),o(25,"span",21),l(26),a()(),o(27,"div",19)(28,"span",20),l(29,"GSTIN:"),a(),o(30,"span",21),l(31),a()(),o(32,"div",19)(33,"span",20),l(34,"Contact:"),a(),o(35,"span",21),l(36),a()(),o(37,"div",19)(38,"span",20),l(39,"Email:"),a(),o(40,"span",21),l(41),a()()(),o(42,"div",22)(43,"div",19)(44,"span",20),l(45,"Supplier Code:"),a(),o(46,"span",21),l(47),a()(),o(48,"div",19)(49,"span",20),l(50,"PO No:"),a(),o(51,"span",21),l(52),a()(),x(53,LV,5,1,"div",23),o(54,"div",19)(55,"span",20),l(56,"PO Date:"),a(),o(57,"span",21),l(58),a()(),o(59,"div",19)(60,"span",20),l(61,"PO Expiry Days:"),a(),o(62,"span",21),l(63),a()()()(),o(64,"div",24)(65,"div",25)(66,"div",26),l(67,"Bill To:"),a(),o(68,"div",27)(69,"p",28),l(70),a(),o(71,"p"),l(72),a(),o(73,"p"),l(74),a(),o(75,"p"),l(76),a(),o(77,"p"),l(78),a()()(),o(79,"div",25)(80,"div",26),l(81,"Ship To:"),a(),o(82,"div",27)(83,"p",28),l(84),a(),o(85,"p"),l(86),a(),o(87,"p"),l(88),a(),o(89,"p"),l(90),a(),o(91,"p"),l(92),a()()()(),o(93,"div",29)(94,"div",30)(95,"span",20),l(96,"Payment Date:"),a(),o(97,"span",21),l(98),a()(),o(99,"div",30)(100,"span",20),l(101,"Payment Terms:"),a(),o(102,"span",21),l(103),a()()(),o(104,"div",31)(105,"table",32)(106,"thead")(107,"tr")(108,"th",33),l(109,"S.No"),a(),o(110,"th",34),l(111,"Product Code"),a(),o(112,"th",35),l(113,"Product Name"),a(),o(114,"th",36),l(115,"HSN code"),a(),o(116,"th",37),l(117,"Quantity"),a(),o(118,"th",38),l(119,"Units"),a(),o(120,"th",39),l(121,"Rate"),a(),o(122,"th",40),l(123,"Tax"),a(),o(124,"th",41),l(125,"Amount"),a()()(),o(126,"tbody"),x(127,jV,19,9,"tr",42),a()()(),o(128,"div",43)(129,"div",44)(130,"div",45)(131,"span",20),l(132,"Total"),a(),o(133,"span",21),l(134),a()(),o(135,"div",45)(136,"span",20),l(137,"Discounts"),a(),o(138,"span",21),l(139),a()(),o(140,"div",46)(141,"span",20),l(142,"Grand total"),a(),o(143,"span",21),l(144),a()()()(),o(145,"div",47)(146,"div",48)(147,"h4"),l(148,"Terms and conditions:"),a(),o(149,"ol")(150,"li"),l(151,"We deserve the right to cancel the purchase order anytime before product shipment."),a(),o(152,"li"),l(153,"Invoice raised to us should contain the details of purchase order with date mentioned."),a(),o(154,"li"),l(155,"Adherence to agreed product specifications is a must. Any deviation during delivery will result in cancellation of PO."),a(),o(156,"li"),l(157),a(),o(158,"li"),l(159),a()()(),o(160,"div",49)(161,"div",50),l(162),a(),v(163,"div",51),o(164,"div",52),l(165,"Authorized signatory"),a()()(),o(166,"div",53)(167,"p"),l(168),a()()()()),n&2){let e=f();c(10),g(e.companyName),c(2),g(e.companyTagline),c(2),g(e.companyAddress),c(7),g(e.po.supplierName),c(5),g(e.po.supplierAddress||"N/A"),c(5),g(e.supplierGstin),c(5),g(e.po.supplierContact||"N/A"),c(5),g(e.supplierEmail),c(6),g(e.supplierCode),c(5),g(e.po.poNumber),c(),p("ngIf",e.po.prNumber),c(5),g(e.formatDate(e.po.poDate||e.po.createdDate||"")),c(5),D("",e.poExpiryDays," days"),c(7),g(e.companyName),c(2),g(e.billToAddress),c(2),D("GSTIN:",e.companyGstin),c(2),D("Contact: ",e.companyPhone),c(2),D("Email: ",e.companyEmail),c(6),g(e.companyName),c(2),g(e.shipToAddress),c(2),D("GSTIN:",e.companyGstin),c(2),D("Contact: ",e.companyPhone),c(2),D("Email: ",e.companyEmail),c(6),g(e.paymentDateText),c(5),g(e.po.paymentTerms||"100% against invoice"),c(24),p("ngForOf",e.po.items),c(7),g(e.formatNumber(e.getSubtotal())),c(5),g(e.formatNumber(e.discount)),c(5),g(e.formatNumber(e.getGrandTotal())),c(13),D("Packing and shipping charges are to be borne by ",e.po.supplierName,"."),c(2),D("Delivery should be strictly done within ",e.poExpiryDays," days from the date of purchase order."),c(3),D("For ",e.companyName),c(6),D("Mark any communications to ",e.companyEmail)}}function WV(n,t){n&1&&(o(0,"div",56),v(1,"div",57),o(2,"p"),l(3,"Loading document..."),a()())}var wp=class n{constructor(t,e,i){this.route=t;this.router=e;this.poService=i}po=null;poId=0;loading=!0;companyName="Hao System";companyTagline="Enterprise Solutions";companyAddress="No 23/2, SBI Colony, Ragavendra Nagar, Chennai - 600124";companyPhone="+91-7869825463";companyEmail="purchase-team@haosystem.com";companyGstin="33APFSDF1ZV";billToAddress=`No 23/2, SBI Colony.
Ragavendra Nagar, Chennai - 600124`;shipToAddress=`No 23/2, SBI Colony.
Ragavendra Nagar, Chennai - 600124`;supplierCode="VNDR-104";supplierGstin="33AACCEPVS1ZH";supplierEmail="purchase-sm@gmail.com";poExpiryDays=7;paymentDateText="7 days from date of delivery";defaultTaxRate=5;discount=0;today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.poId=+t.id,this.loadPO()})}loadPO(){this.poService.getById(this.poId).subscribe({next:t=>{this.po=t,t.supplierId&&(this.supplierCode="VNDR-"+t.supplierId),this.loading=!1},error:t=>{console.error("Error loading PO:",t),this.loading=!1}})}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""}formatNumber(t){return new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t||0)}getDefaultHsn(t){return"34019011"}getItemAmount(t){let e=(t.quantity||0)*(t.rate||0),i=t.taxRate||this.defaultTaxRate,r=e*(i/100);return e+r}getSubtotal(){return!this.po||!this.po.items?0:this.po.items.reduce((t,e)=>t+this.getItemAmount(e),0)}getGrandTotal(){return this.getSubtotal()-this.discount}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/direct"])}static \u0275fac=function(e){return new(e||n)(I(Xe),I(ue),I(rr))};static \u0275cmp=A({type:n,selectors:[["app-po-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-title"],[1,"company-header"],[1,"company-logo"],[1,"fas","fa-shopping-cart"],[1,"company-brand"],[1,"brand-name"],[1,"brand-tagline"],[1,"company-address"],[1,"info-grid"],[1,"supplier-box"],[1,"info-row-item"],[1,"label"],[1,"value"],[1,"po-details-box"],["class","info-row-item",4,"ngIf"],[1,"address-section"],[1,"address-box"],[1,"address-header"],[1,"address-content"],[1,"company-name"],[1,"payment-info"],[1,"payment-item"],[1,"items-section"],[1,"items-table"],[1,"col-sno"],[1,"col-code"],[1,"col-name"],[1,"col-hsn"],[1,"col-qty"],[1,"col-unit"],[1,"col-rate"],[1,"col-tax"],[1,"col-amount"],[4,"ngFor","ngForOf"],[1,"totals-section"],[1,"totals-box"],[1,"total-row"],[1,"total-row","grand-total"],[1,"footer-section"],[1,"terms-box"],[1,"signature-box"],[1,"for-company"],[1,"signature-line"],[1,"signature-label"],[1,"document-footer"],[1,"center"],[1,"right"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),y("click",function(){return i.goBack()}),v(2,"i",2),l(3," Back "),a(),o(4,"button",3),y("click",function(){return i.triggerPrint()}),v(5,"i",4),l(6," Print "),a()(),x(7,BV,169,33,"div",5)(8,WV,4,0,"div",6)),e&2&&(c(7),p("ngIf",i.po),c(),p("ngIf",i.loading))},dependencies:[L,B],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:10mm 15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#134a5f}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:10mm 15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px}.document-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;font-weight:400;letter-spacing:8px;color:#333;margin:0;text-transform:uppercase}.company-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #1a5f7a}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin-bottom:8px}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;color:#f4a460}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1a5f7a}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]   .brand-tagline[_ngcontent-%COMP%]{font-size:11px;color:#f4a460;font-style:italic}.company-header[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:12px;color:#333;margin:0}.info-grid[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px;border:1px solid #ddd}.info-grid[_ngcontent-%COMP%]   .supplier-box[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]   .po-details-box[_ngcontent-%COMP%]{flex:1;padding:12px 15px}.info-grid[_ngcontent-%COMP%]   .supplier-box[_ngcontent-%COMP%]{border-right:1px solid #ddd}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]{display:flex;margin-bottom:6px;font-size:11px}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{min-width:100px;font-weight:600;color:#333}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.address-section[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]{flex:1}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;padding:6px 12px;font-size:11px;font-weight:600}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]{border:1px solid #ddd;border-top:none;padding:10px 12px;min-height:100px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:11px;color:#333}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p.company-name[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.payment-info[_ngcontent-%COMP%]{display:flex;margin-bottom:15px;border:1px solid #ddd;border-top:2px solid #1a5f7a}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]{flex:1;padding:8px 15px;font-size:11px}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]:first-child{border-right:1px solid #ddd}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;color:#333}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.items-section[_ngcontent-%COMP%]{margin-bottom:15px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 6px;text-align:left}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;font-weight:600;text-align:center;font-size:10px}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.items-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:35px}.items-table[_ngcontent-%COMP%]   .col-code[_ngcontent-%COMP%]{width:75px}.items-table[_ngcontent-%COMP%]   .col-hsn[_ngcontent-%COMP%]{width:70px}.items-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:55px}.items-table[_ngcontent-%COMP%]   .col-unit[_ngcontent-%COMP%]{width:45px}.items-table[_ngcontent-%COMP%]   .col-rate[_ngcontent-%COMP%]{width:65px}.items-table[_ngcontent-%COMP%]   .col-tax[_ngcontent-%COMP%]{width:45px}.items-table[_ngcontent-%COMP%]   .col-amount[_ngcontent-%COMP%]{width:80px}.totals-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:20px}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]{width:220px;border:1px solid #ddd}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 12px;font-size:11px;border-bottom:1px solid #ddd}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#333}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{background:#e8f4f8}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.footer-section[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:20px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]{flex:1;background:#e8f4f8;padding:12px 15px;border-radius:4px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#333;margin:0 0 8px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:18px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:9px;color:#444;margin-bottom:4px;line-height:1.4}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:180px;text-align:center;display:flex;flex-direction:column;justify-content:flex-end}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .for-company[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#333;margin-bottom:40px}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:1px solid #333;margin-bottom:5px}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:10px;color:#666;font-style:italic}.document-footer[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid #ddd}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:#1a5f7a;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var Ip=class n{constructor(t){this.http=t}baseUrl="/api/purchase/invoices";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`)}getByPoId(t){return this.http.get(`${this.baseUrl}/po/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}updateStatus(t,e){return this.http.post(`${this.baseUrl}/${t}/status`,{status:e})}generateInvoiceNumber(){return this.http.get(`${this.baseUrl}/generate-number`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)(j(fe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function GV(n,t){n&1&&(o(0,"div",16),v(1,"div",17),o(2,"p"),l(3,"Loading invoices..."),a()())}function qV(n,t){if(n&1){let e=T();o(0,"button",35),y("click",function(){h(e);let r=f().$implicit,s=f(2);return _(s.updateInvoiceStatus(r,"Submitted"))}),v(1,"i",36),a()}}function HV(n,t){if(n&1){let e=T();o(0,"button",37),y("click",function(){h(e);let r=f().$implicit,s=f(2);return _(s.updateInvoiceStatus(r,"Paid"))}),v(1,"i",38),a()}}function zV(n,t){if(n&1){let e=T();o(0,"tr")(1,"td",23),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",24),l(12),a(),o(13,"td")(14,"span",25),l(15),a()(),o(16,"td",26)(17,"button",27),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.openModal(r))}),v(18,"i",28),a(),o(19,"button",29),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.printInvoice(r))}),v(20,"i",30),a(),x(21,qV,2,0,"button",31)(22,HV,2,0,"button",32),o(23,"button",33),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.deleteInvoice(r.id))}),v(24,"i",34),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),g(e.invoiceNumber),c(2),g(e.poNumber||"-"),c(2),g(e.supplierName),c(2),g(i.formatDate(e.invoiceDate)),c(2),g(i.formatDate(e.dueDate)),c(2),g(i.formatCurrency(e.totalAmount)),c(2),p("ngClass",i.getStatusClass(e.status)),c(),D(" ",e.status," "),c(6),p("ngIf",e.status==="Draft"),c(),p("ngIf",e.status==="Submitted")}}function $V(n,t){n&1&&(o(0,"tr")(1,"td",39)(2,"div",40),v(3,"i",41),o(4,"p"),l(5,"No invoices found"),a()()()())}function QV(n,t){if(n&1&&(o(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead")(4,"tr")(5,"th"),l(6,"Invoice No"),a(),o(7,"th"),l(8,"PO Reference"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Invoice Date"),a(),o(13,"th"),l(14,"Due Date"),a(),o(15,"th"),l(16,"Total Amount"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),x(22,zV,25,10,"tr",21)(23,$V,6,0,"tr",22),a()()()()),n&2){let e=f();c(22),p("ngForOf",e.filteredInvoices),c(),p("ngIf",e.filteredInvoices.length===0)}}function KV(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=f().$implicit;c(),D("PO: ",e.poNumber)}}function YV(n,t){if(n&1){let e=T();o(0,"div",51),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",53),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),x(9,KV,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.invoiceNumber),c(2),g(e.status),c(3),g(e.supplierName),c(),p("ngIf",e.poNumber),c(3),g(i.formatCurrency(e.totalAmount)),c(2),g(i.formatDate(e.invoiceDate))}}function ZV(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=f().$implicit;c(),D("PO: ",e.poNumber)}}function JV(n,t){if(n&1){let e=T();o(0,"div",51),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",60),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),x(9,ZV,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.invoiceNumber),c(2),g(e.status),c(3),g(e.supplierName),c(),p("ngIf",e.poNumber),c(3),g(i.formatCurrency(e.totalAmount)),c(2),g(i.formatDate(e.invoiceDate))}}function XV(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=f().$implicit;c(),D("PO: ",e.poNumber)}}function e6(n,t){if(n&1){let e=T();o(0,"div",51),y("click",function(){let r=h(e).$implicit,s=f(2);return _(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",61),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),x(9,XV,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.invoiceNumber),c(2),g(e.status),c(3),g(e.supplierName),c(),p("ngIf",e.poNumber),c(3),g(i.formatCurrency(e.totalAmount)),c(2),g(i.formatDate(e.invoiceDate))}}function t6(n,t){if(n&1&&(o(0,"div",42)(1,"div",43)(2,"div",44)(3,"div",45)(4,"h3"),l(5,"Draft"),a(),o(6,"span",46),l(7),a()(),o(8,"div",47),x(9,YV,15,6,"div",48),a()(),o(10,"div",44)(11,"div",49)(12,"h3"),l(13,"Pending"),a(),o(14,"span",46),l(15),a()(),o(16,"div",47),x(17,JV,15,6,"div",48),a()(),o(18,"div",44)(19,"div",50)(20,"h3"),l(21,"Paid"),a(),o(22,"span",46),l(23),a()(),o(24,"div",47),x(25,e6,15,6,"div",48),a()()()()),n&2){let e=f();c(7),g(e.draftInvoices.length),c(2),p("ngForOf",e.draftInvoices),c(6),g(e.pendingInvoices.length),c(2),p("ngForOf",e.pendingInvoices),c(6),g(e.paidInvoices.length),c(2),p("ngForOf",e.paidInvoices)}}function n6(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;p("value",e.id),c(),le(" ",e.poNumber," - ",e.supplierName," ")}}function i6(n,t){if(n&1){let e=T();o(0,"div",68)(1,"h3"),l(2,"Link to Purchase Order"),a(),o(3,"div",70)(4,"label"),l(5,"Select Completed PO (Optional)"),a(),o(6,"select",96),y("change",function(r){h(e);let s=f(2);return _(s.onPoSelect(r))}),o(7,"option",97),l(8,"-- Select PO --"),a(),x(9,n6,2,3,"option",98),a()()()}if(n&2){let e=f(2);c(9),p("ngForOf",e.completedPOs)}}function r6(n,t){if(n&1){let e=T();o(0,"tr")(1,"td")(2,"input",100),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemCode,r)||(s.itemCode=r),_(r)}),a()(),o(3,"td")(4,"input",101),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.itemName,r)||(s.itemName=r),_(r)}),a()(),o(5,"td")(6,"input",100),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.hsnCode,r)||(s.hsnCode=r),_(r)}),a()(),o(7,"td")(8,"input",102),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.quantity,r)||(s.quantity=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(9,"td")(10,"input",103),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.uom,r)||(s.uom=r),_(r)}),a()(),o(11,"td")(12,"input",92),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.rate,r)||(s.rate=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(13,"td")(14,"input",102),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.taxRate,r)||(s.taxRate=r),_(r)}),y("ngModelChange",function(){let r=h(e).$implicit,s=f(2);return _(s.calculateItemAmount(r))}),a()(),o(15,"td",104),l(16),a(),o(17,"td")(18,"button",105),y("click",function(){let r=h(e).index,s=f(2);return _(s.removeItem(r))}),v(19,"i",34),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemCode),c(2),S("ngModel",e.itemName),c(2),S("ngModel",e.hsnCode),c(2),S("ngModel",e.quantity),c(2),S("ngModel",e.uom),c(2),S("ngModel",e.rate),c(2),S("ngModel",e.taxRate),c(2),D(" ",i.formatCurrency(e.amount)," "),c(2),p("disabled",i.selectedInvoice.items.length===1)}}function o6(n,t){if(n&1){let e=T();o(0,"div",62),y("click",function(){h(e);let r=f();return _(r.closeModal())}),o(1,"div",63),y("click",function(r){return h(e),_(r.stopPropagation())}),o(2,"div",64)(3,"h2"),l(4),a(),o(5,"button",65),y("click",function(){h(e);let r=f();return _(r.closeModal())}),v(6,"i",66),a()(),o(7,"div",67)(8,"div",68)(9,"h3"),l(10,"Invoice Details"),a(),o(11,"div",69)(12,"div",70)(13,"label"),l(14,"Invoice Number"),a(),o(15,"input",71),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.invoiceNumber,r)||(s.selectedInvoice.invoiceNumber=r),_(r)}),a()(),o(16,"div",70)(17,"label"),l(18,"Invoice Date"),a(),o(19,"input",72),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.invoiceDate,r)||(s.selectedInvoice.invoiceDate=r),_(r)}),a()(),o(20,"div",70)(21,"label"),l(22,"Due Date"),a(),o(23,"input",72),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.dueDate,r)||(s.selectedInvoice.dueDate=r),_(r)}),a()(),o(24,"div",70)(25,"label"),l(26,"Status"),a(),o(27,"select",73),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.status,r)||(s.selectedInvoice.status=r),_(r)}),o(28,"option",74),l(29,"Draft"),a(),o(30,"option",75),l(31,"Submitted"),a(),o(32,"option",76),l(33,"Pending"),a(),o(34,"option",77),l(35,"Paid"),a(),o(36,"option",78),l(37,"Cancelled"),a()()()()(),x(38,i6,10,1,"div",79),o(39,"div",68)(40,"h3"),l(41,"Supplier Information"),a(),o(42,"div",69)(43,"div",70)(44,"label"),l(45,"Supplier Name"),a(),o(46,"input",80),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.supplierName,r)||(s.selectedInvoice.supplierName=r),_(r)}),a()(),o(47,"div",70)(48,"label"),l(49,"Supplier GSTIN"),a(),o(50,"input",80),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.supplierGstin,r)||(s.selectedInvoice.supplierGstin=r),_(r)}),a()(),o(51,"div",81)(52,"label"),l(53,"Supplier Address"),a(),o(54,"textarea",82),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.supplierAddress,r)||(s.selectedInvoice.supplierAddress=r),_(r)}),a()(),o(55,"div",70)(56,"label"),l(57,"Contact"),a(),o(58,"input",80),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.supplierContact,r)||(s.selectedInvoice.supplierContact=r),_(r)}),a()(),o(59,"div",70)(60,"label"),l(61,"Email"),a(),o(62,"input",83),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.supplierEmail,r)||(s.selectedInvoice.supplierEmail=r),_(r)}),a()()()(),o(63,"div",68)(64,"h3"),l(65,"Invoice Items"),a(),o(66,"div",84)(67,"table",85)(68,"thead")(69,"tr")(70,"th"),l(71,"Item Code"),a(),o(72,"th"),l(73,"Item Name"),a(),o(74,"th"),l(75,"HSN"),a(),o(76,"th"),l(77,"Qty"),a(),o(78,"th"),l(79,"UOM"),a(),o(80,"th"),l(81,"Rate"),a(),o(82,"th"),l(83,"Tax %"),a(),o(84,"th"),l(85,"Amount"),a(),v(86,"th"),a()(),o(87,"tbody"),x(88,r6,20,9,"tr",21),a()(),o(89,"button",86),y("click",function(){h(e);let r=f();return _(r.addItem())}),v(90,"i",11),l(91," Add Item "),a()()(),o(92,"div",87)(93,"div",88)(94,"div",89)(95,"span",90),l(96,"Subtotal:"),a(),o(97,"span",91),l(98),a()(),o(99,"div",89)(100,"span",90),l(101,"Tax:"),a(),o(102,"span",91),l(103),a()(),o(104,"div",89)(105,"span",90),l(106,"Discount:"),a(),o(107,"input",92),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.discount,r)||(s.selectedInvoice.discount=r),_(r)}),a()(),o(108,"div",93)(109,"span",90),l(110,"Grand Total:"),a(),o(111,"span",91),l(112),a()()()(),o(113,"div",68)(114,"div",81)(115,"label"),l(116,"Remarks"),a(),o(117,"textarea",82),M("ngModelChange",function(r){h(e);let s=f();return E(s.selectedInvoice.remarks,r)||(s.selectedInvoice.remarks=r),_(r)}),a()()()(),o(118,"div",94)(119,"button",95),y("click",function(){h(e);let r=f();return _(r.closeModal())}),l(120,"Cancel"),a(),o(121,"button",10),y("click",function(){h(e);let r=f();return _(r.saveInvoice())}),l(122),a()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Invoice":"Create New Invoice"),c(11),S("ngModel",e.selectedInvoice.invoiceNumber),c(4),S("ngModel",e.selectedInvoice.invoiceDate),c(4),S("ngModel",e.selectedInvoice.dueDate),c(4),S("ngModel",e.selectedInvoice.status),c(11),p("ngIf",!e.editMode),c(8),S("ngModel",e.selectedInvoice.supplierName),c(4),S("ngModel",e.selectedInvoice.supplierGstin),c(4),S("ngModel",e.selectedInvoice.supplierAddress),c(4),S("ngModel",e.selectedInvoice.supplierContact),c(4),S("ngModel",e.selectedInvoice.supplierEmail),c(26),p("ngForOf",e.selectedInvoice.items),c(10),g(e.formatCurrency(e.getSubtotal())),c(5),g(e.formatCurrency(e.getTaxTotal())),c(4),S("ngModel",e.selectedInvoice.discount),c(5),g(e.formatCurrency(e.getTotalAmount())),c(5),S("ngModel",e.selectedInvoice.remarks),c(5),D(" ",e.editMode?"Update Invoice":"Create Invoice"," ")}}var Pp=class n{constructor(t,e,i,r){this.invoiceService=t;this.poService=e;this.router=i;this.settingsService=r}invoices=[];completedPOs=[];searchQuery="";showModal=!1;editMode=!1;selectedInvoice=this.getEmptyInvoice();loading=!1;viewMode="table";companyName="Hao System";companyGstin="33APFSDF1ZV";companyAddress="No 23/2, SBI Colony, Ragavendra Nagar, Chennai - 600124";ngOnInit(){this.loadInvoices(),this.loadCompletedPOs()}loadInvoices(){this.loading=!0,this.invoiceService.getAll().subscribe({next:t=>{this.invoices=t,this.loading=!1},error:t=>{console.error("Error loading invoices",t),this.loading=!1}})}loadCompletedPOs(){this.poService.getAll().subscribe({next:t=>{this.completedPOs=t.filter(e=>e.status==="Completed"||e.status==="Approved")},error:t=>console.error("Error loading POs",t)})}get filteredInvoices(){if(!this.searchQuery)return this.invoices;let t=this.searchQuery.toLowerCase();return this.invoices.filter(e=>e.invoiceNumber?.toLowerCase().includes(t)||e.poNumber?.toLowerCase().includes(t)||e.supplierName?.toLowerCase().includes(t))}get draftInvoices(){return this.filteredInvoices.filter(t=>t.status==="Draft")}get pendingInvoices(){return this.filteredInvoices.filter(t=>t.status==="Pending"||t.status==="Submitted")}get paidInvoices(){return this.filteredInvoices.filter(t=>t.status==="Paid"||t.status==="Completed")}getEmptyInvoice(){return{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],status:"Draft",billToName:this.companyName,billToAddress:this.companyAddress,billToGstin:this.companyGstin,shipToName:this.companyName,shipToAddress:this.companyAddress,items:[]}}getEmptyItem(){return{itemCode:"",itemName:"",description:"",hsnCode:"",quantity:0,uom:"nos",rate:0,taxRate:5,taxAmount:0,amount:0,remarks:""}}openModal(t){t?(this.editMode=!0,this.selectedInvoice=ce(N({},t),{items:t.items?[...t.items]:[]})):(this.editMode=!1,this.selectedInvoice=this.getEmptyInvoice(),this.generateInvoiceNumber(),this.addItem()),this.showModal=!0}generateInvoiceNumber(){this.settingsService.generatePrefixId("invoice").subscribe({next:t=>{this.selectedInvoice.invoiceNumber=t},error:()=>{this.invoiceService.generateInvoiceNumber().subscribe({next:t=>{this.selectedInvoice.invoiceNumber=t},error:t=>console.error("Error generating invoice number",t)})}})}closeModal(){this.showModal=!1,this.selectedInvoice=this.getEmptyInvoice()}addItem(){this.selectedInvoice.items.push(this.getEmptyItem())}removeItem(t){this.selectedInvoice.items.length>1&&this.selectedInvoice.items.splice(t,1)}calculateItemAmount(t){let e=t.quantity*t.rate;t.taxAmount=e*(t.taxRate/100),t.amount=e+t.taxAmount}getSubtotal(){return this.selectedInvoice.items.reduce((t,e)=>t+e.quantity*e.rate,0)}getTaxTotal(){return this.selectedInvoice.items.reduce((t,e)=>t+(e.taxAmount||0),0)}getTotalAmount(){let t=this.getSubtotal(),e=this.getTaxTotal(),i=this.selectedInvoice.discount||0;return t+e-i}onPoSelect(t){let i=+t.target.value;if(i){let r=this.completedPOs.find(s=>s.id===i);r&&(this.selectedInvoice.poId=r.id,this.selectedInvoice.poNumber=r.poNumber,this.selectedInvoice.supplierId=r.supplierId,this.selectedInvoice.supplierName=r.supplierName,this.selectedInvoice.supplierAddress=r.supplierAddress,this.selectedInvoice.supplierContact=r.supplierContact,this.selectedInvoice.paymentTerms=r.paymentTerms,this.selectedInvoice.items=r.items.map(s=>({itemCode:s.itemCode||"",itemName:s.itemName,description:s.description,hsnCode:s.hsnCode||"",quantity:s.quantity,uom:s.uom||s.unit||"nos",rate:s.rate,taxRate:s.taxRate||5,taxAmount:0,amount:0,remarks:s.remarks})),this.selectedInvoice.items.forEach(s=>this.calculateItemAmount(s)))}}saveInvoice(){this.selectedInvoice.subtotal=this.getSubtotal(),this.selectedInvoice.taxAmount=this.getTaxTotal(),this.selectedInvoice.totalAmount=this.getTotalAmount(),this.editMode&&this.selectedInvoice.id?this.invoiceService.update(this.selectedInvoice.id,this.selectedInvoice).subscribe({next:()=>{this.loadInvoices(),this.closeModal()},error:t=>console.error("Error updating invoice",t)}):this.invoiceService.create(this.selectedInvoice).subscribe({next:()=>{this.loadInvoices(),this.closeModal()},error:t=>console.error("Error creating invoice",t)})}deleteInvoice(t){confirm("Are you sure you want to delete this invoice?")&&this.invoiceService.delete(t).subscribe({next:()=>this.loadInvoices(),error:e=>console.error("Error deleting invoice",e)})}updateInvoiceStatus(t,e){t.id&&this.invoiceService.updateStatus(t.id,e).subscribe({next:()=>this.loadInvoices(),error:i=>console.error("Error updating status",i)})}printInvoice(t){t.id&&this.router.navigate(["/app/purchase/invoice",t.id,"print"])}getStatusClass(t){switch(t){case"Paid":case"Completed":return"badge-success";case"Pending":case"Submitted":return"badge-warning";case"Draft":return"badge-secondary";case"Cancelled":return"badge-danger";default:return"badge-info"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):"-"}formatCurrency(t){return t===void 0?"0.00":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}toggleViewMode(){this.viewMode=this.viewMode==="table"?"kanban":"table"}static \u0275fac=function(e){return new(e||n)(I(Ip),I(rr),I(ue),I(we))};static \u0275cmp=A({type:n,selectors:[["app-purchase-invoice"]],standalone:!1,decls:20,vars:6,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search invoices...",3,"ngModelChange","ngModel"],[1,"btn-toggle",3,"click"],[1,"fas",3,"ngClass"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],["class","loading-container",4,"ngIf"],["class","table-view",4,"ngIf"],["class","kanban-view",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"table-view"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"invoice-number"],[1,"amount"],[1,"badge",3,"ngClass"],[1,"actions"],["title","View/Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Print",1,"btn-icon",3,"click"],[1,"fas","fa-print"],["class","btn-icon btn-success","title","Mark as Submitted",3,"click",4,"ngIf"],["class","btn-icon btn-success","title","Mark as Paid",3,"click",4,"ngIf"],["title","Delete",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["title","Mark as Submitted",1,"btn-icon","btn-success",3,"click"],[1,"fas","fa-paper-plane"],["title","Mark as Paid",1,"btn-icon","btn-success",3,"click"],[1,"fas","fa-check-circle"],["colspan","8",1,"empty-row"],[1,"empty-state"],[1,"fas","fa-file-invoice"],[1,"kanban-view"],[1,"kanban-board"],[1,"kanban-column"],[1,"column-header","draft"],[1,"count"],[1,"column-body"],["class","kanban-card",3,"click",4,"ngFor","ngForOf"],[1,"column-header","pending"],[1,"column-header","completed"],[1,"kanban-card",3,"click"],[1,"card-header"],[1,"badge","badge-secondary"],[1,"card-body"],[1,"supplier"],["class","po-ref",4,"ngIf"],[1,"card-footer"],[1,"date"],[1,"po-ref"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"modal-overlay",3,"click"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","Draft"],["value","Submitted"],["value","Pending"],["value","Paid"],["value","Cancelled"],["class","form-section",4,"ngIf"],["type","text",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel"],[1,"items-table-container"],[1,"items-table"],[1,"btn-add-item",3,"click"],[1,"form-section","totals-section"],[1,"totals-grid"],[1,"total-row"],[1,"label"],[1,"value"],["type","number",1,"input-sm",3,"ngModelChange","ngModel"],[1,"total-row","grand-total"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text",1,"input-sm",3,"ngModelChange","ngModel"],["type","text",1,"input-md",3,"ngModelChange","ngModel"],["type","number",1,"input-xs",3,"ngModelChange","ngModel"],["type","text",1,"input-xs",3,"ngModelChange","ngModel"],[1,"amount-cell"],[1,"btn-icon","btn-danger",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Purchase Invoices"),a(),o(5,"p",3),l(6,"Manage purchase invoices from completed orders"),a()(),o(7,"div",4)(8,"div",5),v(9,"i",6),o(10,"input",7),M("ngModelChange",function(s){return E(i.searchQuery,s)||(i.searchQuery=s),s}),a()(),o(11,"button",8),y("click",function(){return i.toggleViewMode()}),v(12,"i",9),a(),o(13,"button",10),y("click",function(){return i.openModal()}),v(14,"i",11),l(15," New Invoice "),a()()(),x(16,GV,4,0,"div",12)(17,QV,24,2,"div",13)(18,t6,26,6,"div",14),a(),x(19,o6,123,18,"div",15)),e&2&&(c(10),S("ngModel",i.searchQuery),c(2),p("ngClass",i.viewMode==="table"?"fa-th":"fa-list"),c(4),p("ngIf",i.loading),c(),p("ngIf",!i.loading&&i.viewMode==="table"),c(),p("ngIf",!i.loading&&i.viewMode==="kanban"),c(),p("ngIf",i.showModal))},dependencies:[oe,L,B,Y,Z,H,Me,Q,q,G],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;background-color:#f5f7fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a5f7a;margin:0}.header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:4px 0 0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:8px;width:250px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a5f7a}.btn-toggle[_ngcontent-%COMP%]{padding:10px 14px;background:#fff;border:1px solid #ddd;border-radius:8px;cursor:pointer;color:#666}.btn-toggle[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#1a5f7a;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]:hover{background:#154d63}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#e0e0e0;color:#333;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f0f0f0;border-top-color:#1a5f7a;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#444}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.data-table[_ngcontent-%COMP%]   .invoice-number[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.data-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:500;text-align:right}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:40px!important}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:12px}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;background:#f0f0f0;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center}.btn-icon[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-icon.btn-success[_ngcontent-%COMP%]{background:#d4edda;color:#28a745}.btn-icon.btn-success[_ngcontent-%COMP%]:hover{background:#c3e6cb}.btn-icon.btn-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#dc3545}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#f5c6cb}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.kanban-column[_ngcontent-%COMP%]{background:#f0f2f5;border-radius:12px;overflow:hidden}.column-header[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#fff}.column-header[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{background:#fff3;padding:4px 10px;border-radius:12px;font-size:12px;color:#fff}.column-header.draft[_ngcontent-%COMP%]{background:#6c757d}.column-header.pending[_ngcontent-%COMP%]{background:#ffc107}.column-header.pending[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .column-header.pending[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#333}.column-header.completed[_ngcontent-%COMP%]{background:#28a745}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 280px);overflow-y:auto}.kanban-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:14px;margin-bottom:12px;cursor:pointer;box-shadow:0 1px 3px #00000014;transition:box-shadow .2s}.kanban-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #00000026}.kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .invoice-number[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.kanban-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .supplier[_ngcontent-%COMP%]{font-weight:500;margin:0 0 4px}.kanban-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .po-ref[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:12px;padding-top:10px;border-top:1px solid #eee;font-size:13px}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#999}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:900px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{max-width:1000px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid #eee}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a5f7a;margin:0 0 16px;padding-bottom:8px;border-bottom:2px solid #1a5f7a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a5f7a}.form-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%]{background:#f5f5f5}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.items-table-container[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-size:12px;font-weight:600;text-transform:uppercase;color:#666}.items-table[_ngcontent-%COMP%]   .input-xs[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .input-sm[_ngcontent-%COMP%]{width:90px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .input-md[_ngcontent-%COMP%]{width:150px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .amount-cell[_ngcontent-%COMP%]{font-weight:500;text-align:right}.btn-add-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:10px 16px;border:none;background:#f0f0f0;color:#1a5f7a;font-size:13px;cursor:pointer;width:100%;justify-content:center}.btn-add-item[_ngcontent-%COMP%]:hover{background:#e0e0e0}.totals-section[_ngcontent-%COMP%]   .totals-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555;min-width:100px;text-align:right}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{min-width:120px;text-align:right;font-weight:500}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px;padding:6px 10px;border:1px solid #ddd;border-radius:4px;text-align:right}.totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{padding-top:10px;border-top:2px solid #1a5f7a}.totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a5f7a}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.kanban-board[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function a6(n,t){n&1&&(o(0,"div",5),v(1,"div",6),o(2,"p"),l(3,"Loading settings..."),a()())}function s6(n,t){if(n&1){let e=T();o(0,"form",7),y("ngSubmit",function(){h(e);let r=f();return _(r.saveSettings())}),o(1,"div",8)(2,"h3",9),v(3,"i",10),l(4," Inventory Prefixes "),a(),o(5,"div",11)(6,"div",12)(7,"label"),l(8,"Item Master"),a(),o(9,"div",13)(10,"input",14),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.itemPrefix,r)||(s.settings.itemPrefix=r),_(r)}),a(),o(11,"input",15),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.itemNextNumber,r)||(s.settings.itemNextNumber=r),_(r)}),a()(),o(12,"span",16),l(13),a()(),o(14,"div",12)(15,"label"),l(16,"Group Master"),a(),o(17,"div",13)(18,"input",17),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.groupPrefix,r)||(s.settings.groupPrefix=r),_(r)}),a(),o(19,"input",18),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.groupNextNumber,r)||(s.settings.groupNextNumber=r),_(r)}),a()(),o(20,"span",16),l(21),a()(),o(22,"div",12)(23,"label"),l(24,"Warehouse"),a(),o(25,"div",13)(26,"input",19),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.warehousePrefix,r)||(s.settings.warehousePrefix=r),_(r)}),a(),o(27,"input",20),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.warehouseNextNumber,r)||(s.settings.warehouseNextNumber=r),_(r)}),a()(),o(28,"span",16),l(29),a()(),o(30,"div",12)(31,"label"),l(32,"Bin Location"),a(),o(33,"div",13)(34,"input",21),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.binPrefix,r)||(s.settings.binPrefix=r),_(r)}),a(),o(35,"input",22),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.binNextNumber,r)||(s.settings.binNextNumber=r),_(r)}),a()(),o(36,"span",16),l(37),a()(),o(38,"div",12)(39,"label"),l(40,"Supplier"),a(),o(41,"div",13)(42,"input",23),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.supplierPrefix,r)||(s.settings.supplierPrefix=r),_(r)}),a(),o(43,"input",24),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.supplierNextNumber,r)||(s.settings.supplierNextNumber=r),_(r)}),a()(),o(44,"span",16),l(45),a()(),o(46,"div",12)(47,"label"),l(48,"Unit of Measure"),a(),o(49,"div",13)(50,"input",25),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.unitPrefix,r)||(s.settings.unitPrefix=r),_(r)}),a(),o(51,"input",26),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.unitNextNumber,r)||(s.settings.unitNextNumber=r),_(r)}),a()(),o(52,"span",16),l(53),a()()()(),o(54,"div",8)(55,"h3",9),v(56,"i",27),l(57," Purchase Prefixes "),a(),o(58,"div",11)(59,"div",12)(60,"label"),l(61,"Purchase Requisition"),a(),o(62,"div",13)(63,"input",28),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.prPrefix,r)||(s.settings.prPrefix=r),_(r)}),a(),o(64,"input",29),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.prNextNumber,r)||(s.settings.prNextNumber=r),_(r)}),a()(),o(65,"span",16),l(66),a()(),o(67,"div",12)(68,"label"),l(69,"Purchase Order"),a(),o(70,"div",13)(71,"input",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.poPrefix,r)||(s.settings.poPrefix=r),_(r)}),a(),o(72,"input",31),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.poNextNumber,r)||(s.settings.poNextNumber=r),_(r)}),a()(),o(73,"span",16),l(74),a()(),o(75,"div",12)(76,"label"),l(77,"Goods Receipt Note"),a(),o(78,"div",13)(79,"input",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.grnPrefix,r)||(s.settings.grnPrefix=r),_(r)}),a(),o(80,"input",33),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.grnNextNumber,r)||(s.settings.grnNextNumber=r),_(r)}),a()(),o(81,"span",16),l(82),a()()()(),o(83,"div",8)(84,"h3",9),v(85,"i",34),l(86," Stock Movement Prefixes "),a(),o(87,"div",11)(88,"div",12)(89,"label"),l(90,"Goods Issue"),a(),o(91,"div",13)(92,"input",35),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.issuePrefix,r)||(s.settings.issuePrefix=r),_(r)}),a(),o(93,"input",36),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.issueNextNumber,r)||(s.settings.issueNextNumber=r),_(r)}),a()(),o(94,"span",16),l(95),a()(),o(96,"div",12)(97,"label"),l(98,"Stock Transfer"),a(),o(99,"div",13)(100,"input",37),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.transferPrefix,r)||(s.settings.transferPrefix=r),_(r)}),a(),o(101,"input",38),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.transferNextNumber,r)||(s.settings.transferNextNumber=r),_(r)}),a()(),o(102,"span",16),l(103),a()(),o(104,"div",12)(105,"label"),l(106,"Stock Adjustment"),a(),o(107,"div",13)(108,"input",39),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.adjustmentPrefix,r)||(s.settings.adjustmentPrefix=r),_(r)}),a(),o(109,"input",40),M("ngModelChange",function(r){h(e);let s=f();return E(s.settings.adjustmentNextNumber,r)||(s.settings.adjustmentNextNumber=r),_(r)}),a()(),o(110,"span",16),l(111),a()()()(),o(112,"div",41)(113,"button",42),v(114,"i",43),l(115),a()()()}if(n&2){let e=f();c(10),S("ngModel",e.settings.itemPrefix),c(),S("ngModel",e.settings.itemNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.itemPrefix,e.settings.itemNextNumber)),c(5),S("ngModel",e.settings.groupPrefix),c(),S("ngModel",e.settings.groupNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.groupPrefix,e.settings.groupNextNumber)),c(5),S("ngModel",e.settings.warehousePrefix),c(),S("ngModel",e.settings.warehouseNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.warehousePrefix,e.settings.warehouseNextNumber)),c(5),S("ngModel",e.settings.binPrefix),c(),S("ngModel",e.settings.binNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.binPrefix,e.settings.binNextNumber)),c(5),S("ngModel",e.settings.supplierPrefix),c(),S("ngModel",e.settings.supplierNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.supplierPrefix,e.settings.supplierNextNumber)),c(5),S("ngModel",e.settings.unitPrefix),c(),S("ngModel",e.settings.unitNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.unitPrefix,e.settings.unitNextNumber)),c(10),S("ngModel",e.settings.prPrefix),c(),S("ngModel",e.settings.prNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.prPrefix,e.settings.prNextNumber)),c(5),S("ngModel",e.settings.poPrefix),c(),S("ngModel",e.settings.poNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.poPrefix,e.settings.poNextNumber)),c(5),S("ngModel",e.settings.grnPrefix),c(),S("ngModel",e.settings.grnNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.grnPrefix,e.settings.grnNextNumber)),c(10),S("ngModel",e.settings.issuePrefix),c(),S("ngModel",e.settings.issueNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.issuePrefix,e.settings.issueNextNumber)),c(5),S("ngModel",e.settings.transferPrefix),c(),S("ngModel",e.settings.transferNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.transferPrefix,e.settings.transferNextNumber)),c(5),S("ngModel",e.settings.adjustmentPrefix),c(),S("ngModel",e.settings.adjustmentNextNumber),c(2),D("Preview: ",e.formatPreview(e.settings.adjustmentPrefix,e.settings.adjustmentNextNumber)),c(2),p("disabled",e.saving),c(2),D(" ",e.saving?"Saving...":"Save Settings"," ")}}var Dp=class n{constructor(t,e){this.settingsService=t;this.notificationService=e}settings={itemPrefix:"ITM-",itemNextNumber:1,groupPrefix:"GRP-",groupNextNumber:1,warehousePrefix:"WH-",warehouseNextNumber:1,binPrefix:"BIN-",binNextNumber:1,supplierPrefix:"SUP-",supplierNextNumber:1,unitPrefix:"UOM-",unitNextNumber:1,prPrefix:"PR-",prNextNumber:1,poPrefix:"PO-",poNextNumber:1,grnPrefix:"GRN-",grnNextNumber:1,issuePrefix:"GI-",issueNextNumber:1,transferPrefix:"ST-",transferNextNumber:1,adjustmentPrefix:"ADJ-",adjustmentNextNumber:1};saving=!1;loading=!1;ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getPrefixSettings().subscribe({next:t=>{t&&(this.settings=t),this.loading=!1},error:t=>{console.error("Error loading prefix settings",t),this.loading=!1}})}saveSettings(){this.saving=!0,this.settingsService.savePrefixSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,this.notificationService.success("Prefix settings saved successfully")},error:t=>{console.error("Error saving prefix settings",t),this.saving=!1,this.notificationService.error("Error saving prefix settings")}})}formatPreview(t,e){return`${t}${e.toString().padStart(4,"0")}`}static \u0275fac=function(e){return new(e||n)(I(we),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-prefix-settings"]],standalone:!1,decls:8,vars:2,consts:[[1,"prefix-settings-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","settings-form",3,"ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"settings-form",3,"ngSubmit"],[1,"settings-section"],[1,"section-title"],[1,"fas","fa-boxes"],[1,"prefix-grid"],[1,"prefix-card"],[1,"prefix-inputs"],["type","text","name","itemPrefix","placeholder","ITM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","itemNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"preview"],["type","text","name","groupPrefix","placeholder","GRP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","groupNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","warehousePrefix","placeholder","WH-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","warehouseNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","binPrefix","placeholder","BIN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","binNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","supplierPrefix","placeholder","SUP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","supplierNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","unitPrefix","placeholder","UOM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","unitNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-shopping-cart"],["type","text","name","prPrefix","placeholder","PR-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","prNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","poPrefix","placeholder","PO-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","poNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","grnPrefix","placeholder","GRN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","grnNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-exchange-alt"],["type","text","name","issuePrefix","placeholder","GI-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","issueNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","transferPrefix","placeholder","ST-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","transferNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","adjustmentPrefix","placeholder","ADJ-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","adjustmentNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-save"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Prefix Settings"),a(),o(4,"p",2),l(5,"Configure auto-generated ID prefixes for inventory and purchase modules"),a()(),x(6,a6,4,0,"div",3)(7,s6,116,38,"form",4),a()),e&2&&(c(6),p("ngIf",i.loading),c(),p("ngIf",!i.loading))},dependencies:[B,Zi,H,Me,q,Yi,je,G,Ii],styles:[".prefix-settings-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e0e0e0;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.settings-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 8px #00000014}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:teal;font-size:18px;font-weight:600;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #e0f2f1}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.prefix-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.prefix-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;border:1px solid #e0e0e0;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]:hover{border-color:teal;box-shadow:0 2px 8px #0080801a}.prefix-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:12px;font-size:14px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]{width:100px;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:block;font-size:12px;color:teal;font-weight:500;background:#e0f2f1;padding:6px 10px;border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media(max-width:768px){.prefix-settings-container[_ngcontent-%COMP%]{padding:16px}.prefix-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.settings-section[_ngcontent-%COMP%]{padding:16px}}"]})};function l6(n,t){if(n&1){let e=T();o(0,"label",19)(1,"input",20),M("ngModelChange",function(r){let s=h(e).$implicit;return E(s.checked,r)||(s.checked=r),_(r)}),a(),o(2,"span"),l(3),a()()}if(n&2){let e=t.$implicit;c(),S("ngModel",e.checked),c(2),g(e.name)}}function c6(n,t){if(n&1&&(o(0,"tr")(1,"td",15),l(2),a(),o(3,"td",16)(4,"div",17),x(5,l6,4,2,"label",18),a()()()),n&2){let e=t.$implicit;c(2),g(e.feature),c(3),p("ngForOf",e.capabilities)}}var Qs=class n{constructor(t,e,i,r){this.router=t;this.route=e;this.roleService=i;this.notificationService=r}roleName="";roleDescription="";editMode=!1;roleId=null;saving=!1;featurePermissions=[{feature:"Dashboard",capabilities:[{name:"View",checked:!1}]},{feature:"Settings",capabilities:[{name:"View",checked:!1},{name:"Edit",checked:!1}]},{feature:"Customer Management",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Contract Management",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Group Master",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Item Master",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Units of Measure",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Warehouse & Bin",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Supplier",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Valuation",capabilities:[{name:"View",checked:!1}]},{feature:"Inventory - Ledger",capabilities:[{name:"View",checked:!1}]},{feature:"Stock Movement - Goods Receipt (GRN)",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Goods Issue",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Stock Transfer",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Stock Adjustments",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1},{name:"Approve",checked:!1}]},{feature:"Purchase - Requisition",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1},{name:"Approve",checked:!1}]},{feature:"Purchase - PR Fulfillment",capabilities:[{name:"View",checked:!1},{name:"Convert to PO",checked:!1},{name:"Stock Issue",checked:!1},{name:"Material Transfer",checked:!1}]},{feature:"Purchase - Direct Purchase",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Reports - Inventory",capabilities:[{name:"View",checked:!1},{name:"Export",checked:!1}]},{feature:"Reports - Purchase",capabilities:[{name:"View",checked:!1},{name:"Export",checked:!1}]},{feature:"Audit Trails",capabilities:[{name:"View System Audits",checked:!1},{name:"View Inventory Audits",checked:!1},{name:"View Purchase Audits",checked:!1}]}];ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.editMode=!0,this.roleId=parseInt(t),this.loadRole())}loadRole(){this.roleId&&this.roleService.getById(this.roleId).subscribe({next:t=>{this.roleName=t.name,this.roleDescription=t.description||"",t.permissions&&this.parsePermissions(t.permissions)},error:t=>{console.error("Error loading role:",t)}})}parsePermissions(t){try{let e=JSON.parse(t);for(let i of this.featurePermissions){let r=e[i.feature];if(r)for(let s of i.capabilities)s.checked=r.includes(s.name)}}catch(e){console.error("Error parsing permissions:",e)}}getPermissionsJson(){let t={};for(let e of this.featurePermissions){let i=e.capabilities.filter(r=>r.checked).map(r=>r.name);i.length>0&&(t[e.feature]=i)}return JSON.stringify(t)}saveRole(){if(!this.roleName.trim()){this.notificationService.error("Role name is required");return}this.saving=!0;let t={name:this.roleName,description:this.roleDescription,permissions:this.getPermissionsJson()};this.editMode&&this.roleId?this.roleService.update(this.roleId,t).subscribe({next:()=>{this.notificationService.success("Role updated successfully"),this.router.navigate(["/app/settings/roles"])},error:e=>{this.notificationService.error(e.error?.error||"Error updating role"),this.saving=!1}}):this.roleService.create(t).subscribe({next:()=>{this.notificationService.success("Role created successfully"),this.router.navigate(["/app/settings/roles"])},error:e=>{this.notificationService.error(e.error?.error||"Error creating role"),this.saving=!1}})}cancel(){this.router.navigate(["/app/settings/roles"])}static \u0275fac=function(e){return new(e||n)(I(ue),I(Xe),I(Xo),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-add-role"]],standalone:!1,decls:36,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/roles"],[1,"card"],[1,"form-group"],[1,"required"],["type","text","placeholder","Enter role name",1,"form-control",3,"ngModelChange","ngModel"],[1,"permissions-section"],[1,"permissions-table"],[4,"ngFor","ngForOf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"feature-name"],[1,"capabilities-cell"],[1,"capability-list"],["class","checkbox-label",4,"ngFor","ngForOf"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Roles"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15),a()()()(),o(16,"div",5)(17,"div",6)(18,"label",7),l(19,"Role Name"),a(),o(20,"input",8),M("ngModelChange",function(s){return E(i.roleName,s)||(i.roleName=s),s}),a()(),o(21,"div",9)(22,"table",10)(23,"thead")(24,"tr")(25,"th"),l(26,"features"),a(),o(27,"th"),l(28,"Capabilities"),a()()(),o(29,"tbody"),x(30,c6,6,2,"tr",11),a()()(),o(31,"div",12)(32,"button",13),y("click",function(){return i.cancel()}),l(33,"Cancel"),a(),o(34,"button",14),y("click",function(){return i.saveRole()}),l(35),a()()()()),e&2&&(c(4),g(i.editMode?"Edit Role":"Add New Role"),c(11),g(i.editMode?"Edit":"Add New"),c(5),S("ngModel",i.roleName),c(10),p("ngForOf",i.featurePermissions),c(5),D(" ",i.editMode?"Update Role":"Save Role"," "))},dependencies:[L,H,Et,q,G,K],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.permissions-section[_ngcontent-%COMP%]{margin-top:24px}.permissions-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permissions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-primary)}.permissions-table[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary);width:40%}.permissions-table[_ngcontent-%COMP%]   .capabilities-cell[_ngcontent-%COMP%]{width:60%}.capability-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:var(--text-primary)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:var(--primary-color)}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border-color)}']})};function d6(n,t){if(n&1){let e=T();o(0,"div",17)(1,"label",23),l(2,"Password"),a(),o(3,"input",35),M("ngModelChange",function(r){h(e);let s=f(2);return E(s.password,r)||(s.password=r),_(r)}),a(),o(4,"small",36),l(5,"Minimum 6 characters"),a()()}if(n&2){let e=f(2);c(3),S("ngModel",e.password)}}function u6(n,t){if(n&1&&(o(0,"option",37),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function p6(n,t){if(n&1){let e=T();o(0,"div",12)(1,"div",13)(2,"label",14)(3,"input",15),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.isAdmin,r)||(s.staff.isAdmin=r),_(r)}),a(),o(4,"span"),l(5,"Administrator"),a()(),o(6,"label",14)(7,"input",16),y("change",function(){h(e);let r=f();return _(r.staff.isStaffMember=!r.staff.isStaffMember)}),a(),o(8,"span"),l(9,"Not Staff Member"),a()()(),o(10,"div",17)(11,"label"),l(12,"Profile Image"),a(),o(13,"div",18),v(14,"input",19),o(15,"label",20)(16,"span",21),l(17,"Choose File"),a(),o(18,"span",22),l(19,"No file chosen"),a()()()(),o(20,"div",17)(21,"label",23),l(22,"First Name"),a(),o(23,"input",24),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.firstName,r)||(s.staff.firstName=r),_(r)}),a()(),o(24,"div",17)(25,"label",23),l(26,"Last Name"),a(),o(27,"input",25),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.lastName,r)||(s.staff.lastName=r),_(r)}),a()(),o(28,"div",17)(29,"label",23),l(30,"Email"),a(),o(31,"input",26),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.email,r)||(s.staff.email=r),_(r)}),a()(),o(32,"div",17)(33,"label"),l(34,"Hourly Rate"),a(),o(35,"div",27)(36,"input",28),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.hourlyRate,r)||(s.staff.hourlyRate=r),_(r)}),a(),o(37,"span",29),l(38,"\u20B9"),a()()(),o(39,"div",17)(40,"label"),l(41,"Phone"),a(),o(42,"input",30),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.phone,r)||(s.staff.phone=r),_(r)}),a()(),x(43,d6,6,1,"div",31),o(44,"div",17)(45,"label"),l(46,"Role"),a(),o(47,"select",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.role,r)||(s.staff.role=r),_(r)}),o(48,"option",33),l(49,"Select Role"),a(),x(50,u6,2,2,"option",34),a()()()}if(n&2){let e=f();c(3),S("ngModel",e.staff.isAdmin),c(4),p("checked",!e.staff.isStaffMember),c(16),S("ngModel",e.staff.firstName),c(4),S("ngModel",e.staff.lastName),c(4),S("ngModel",e.staff.email),c(5),S("ngModel",e.staff.hourlyRate),c(6),S("ngModel",e.staff.phone),c(),p("ngIf",!e.editMode),c(4),S("ngModel",e.staff.role),c(3),p("ngForOf",e.roles)}}function m6(n,t){if(n&1&&(o(0,"option",37),l(1),a()),n&2){let e=t.$implicit;p("value",e.name),c(),g(e.name)}}function f6(n,t){if(n&1){let e=T();o(0,"div",12)(1,"p",38),l(2,"Permissions are managed through the role assigned to this staff member."),a(),o(3,"div",17)(4,"label"),l(5,"Assigned Role"),a(),o(6,"select",32),M("ngModelChange",function(r){h(e);let s=f();return E(s.staff.role,r)||(s.staff.role=r),_(r)}),o(7,"option",33),l(8,"Select Role"),a(),x(9,m6,2,2,"option",34),a()()()}if(n&2){let e=f();c(6),S("ngModel",e.staff.role),c(3),p("ngForOf",e.roles)}}var Ks=class n{constructor(t,e,i,r){this.router=t;this.route=e;this.staffService=i;this.notificationService=r}editMode=!1;staffId=null;activeTab="profile";saving=!1;staff={firstName:"",lastName:"",email:"",role:"",isAdmin:!1,isStaffMember:!0,phone:"",hourlyRate:0,active:!0};password="";roles=[];ngOnInit(){this.loadRoles();let t=this.route.snapshot.paramMap.get("id");t&&(this.editMode=!0,this.staffId=parseInt(t),this.loadStaff())}loadRoles(){this.staffService.getRoles().subscribe({next:t=>{console.log("Roles loaded:",t),this.roles=t},error:t=>{console.error("Error loading roles:",t),this.roles=[]}})}loadStaff(){this.staffId&&this.staffService.getById(this.staffId).subscribe({next:t=>{this.staff=t},error:t=>{console.error("Error loading staff:",t)}})}setTab(t){this.activeTab=t}saveStaff(){if(!this.staff.firstName?.trim()||!this.staff.lastName?.trim()){this.notificationService.error("First name and last name are required");return}if(!this.staff.email?.trim()){this.notificationService.error("Email is required");return}if(!this.editMode&&(!this.password||this.password.length<6)){this.notificationService.error("Password must be at least 6 characters");return}this.saving=!0;let t=N({},this.staff);!this.editMode&&this.password&&(t.password=this.password),this.editMode&&this.staffId?this.staffService.update(this.staffId,this.staff).subscribe({next:()=>{this.notificationService.success("Staff updated successfully"),this.router.navigate(["/app/settings/staff"])},error:e=>{this.notificationService.error(e.error?.error||"Error updating staff"),this.saving=!1}}):this.staffService.create(t).subscribe({next:()=>{this.notificationService.success("Staff created successfully"),this.router.navigate(["/app/settings/staff"])},error:e=>{this.notificationService.error(e.error?.error||"Error creating staff"),this.saving=!1}})}cancel(){this.router.navigate(["/app/settings/staff"])}static \u0275fac=function(e){return new(e||n)(I(ue),I(Xe),I(ea),I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-add-staff"]],standalone:!1,decls:29,vars:9,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/staff"],[1,"card"],[1,"tabs"],[1,"tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"tab-content"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["type","checkbox",3,"change","checked"],[1,"form-group"],[1,"file-input"],["type","file","id","profileImage","accept","image/*"],["for","profileImage",1,"file-label"],[1,"choose-file"],[1,"file-name"],[1,"required"],["type","text","placeholder","Enter first name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-with-suffix"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"suffix"],["type","tel","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","password","placeholder","Enter password",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-text"],[3,"value"],[1,"permissions-note"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Staff Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15),a()()()(),o(16,"div",5)(17,"div",6)(18,"button",7),y("click",function(){return i.setTab("profile")}),l(19,"Profile"),a(),o(20,"button",7),y("click",function(){return i.setTab("permissions")}),l(21,"Permissions"),a()(),x(22,p6,51,10,"div",8)(23,f6,10,2,"div",8),o(24,"div",9)(25,"button",10),y("click",function(){return i.cancel()}),l(26,"Cancel"),a(),o(27,"button",11),y("click",function(){return i.saveStaff()}),l(28),a()()()()),e&2&&(c(4),g(i.editMode?"Edit Staff Member":"Add New Staff Member"),c(11),g(i.editMode?"Edit":"Add New"),c(3),J("active",i.activeTab==="profile"),c(2),J("active",i.activeTab==="permissions"),c(2),p("ngIf",i.activeTab==="profile"),c(),p("ngIf",i.activeTab==="permissions"),c(5),D(" ",i.editMode?"Update Staff":"Save Staff"," "))},dependencies:[L,B,Y,Z,H,Me,Et,Q,q,G,K],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:var(--text-secondary);font-size:.95rem;cursor:pointer;position:relative;font-weight:500}.tab.active[_ngcontent-%COMP%]{color:var(--text-primary)}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover:not(.active){color:var(--text-primary)}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:var(--primary-color)}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid var(--border-color);border-radius:8px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary);font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin-bottom:20px;padding:12px;background:var(--bg-color);border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border-color)}']})};var g6=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Cu},{path:"app",component:Eu,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Iu},{path:"settings/general",component:Pu},{path:"settings/finance",component:Du},{path:"settings/finance/tax-rates",component:Fu},{path:"settings/finance/currencies",component:Vu},{path:"settings/finance/payment-modes",component:Lu},{path:"settings/finance/expense-categories",component:ju},{path:"settings/customer",component:Ou},{path:"settings/contract",component:Nu},{path:"settings/roles",component:Ru},{path:"settings/roles/add",component:Qs},{path:"settings/roles/edit/:id",component:Qs},{path:"settings/staff",component:Au},{path:"settings/staff/add",component:Ks},{path:"settings/staff/edit/:id",component:Ks},{path:"settings/prefixes",component:Dp},{path:"customers",component:Bu},{path:"contracts",component:Uu},{path:"inventory/groups",component:Gu},{path:"inventory/items",component:Hu},{path:"inventory/units",component:zu},{path:"inventory/warehouse",component:$u},{path:"inventory/suppliers",component:Qu},{path:"inventory/valuation",component:Ku},{path:"inventory/ledger",component:Zu},{path:"stock/grn",component:Ju},{path:"stock/issue",component:Xu},{path:"stock/transfer",component:ep},{path:"stock/adjustments",component:tp},{path:"reports/stock-summary",component:np},{path:"reports/valuation",component:ip},{path:"reports/item-movement",component:rp},{path:"reports/stock-ledger",component:op},{path:"reports/group-wise",component:ap},{path:"reports/warehouse-stock",component:sp},{path:"reports/reorder-level",component:lp},{path:"reports/slow-moving",component:cp},{path:"reports/purchase-grn",component:dp},{path:"purchase/requisition",component:up},{path:"purchase/fulfillment/convert-to-po",component:pp},{path:"purchase/fulfillment/stock-issue",component:mp},{path:"purchase/fulfillment/material-transfer",component:fp},{path:"purchase/direct",component:gp},{path:"reports/purchase/pr-list",component:hp},{path:"reports/purchase/pr-pending",component:_p},{path:"reports/purchase/pr-history",component:vp},{path:"reports/purchase/po-list",component:yp},{path:"reports/purchase/direct-purchase",component:bp},{path:"reports/purchase/stock-issue-transfer",component:Cp},{path:"audit/system",component:xp},{path:"audit/inventory",component:Sp},{path:"audit/purchase",component:Mp},{path:"purchase/requisition/:id/print",component:Ep},{path:"purchase/direct/:id/print",component:wp},{path:"purchase/invoices",component:Pp}]}],Tp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=ot({type:n});static \u0275inj=nt({imports:[yu.forRoot(g6),yu]})};function h6(n,t){if(n&1){let e=T();o(0,"div",2),y("click",function(){let r=h(e).$implicit,s=f();return _(s.removeNotification(r.id))}),v(1,"i",3),o(2,"span",4),l(3),a(),o(4,"button",5),y("click",function(r){let s=h(e).$implicit;return f().removeNotification(s.id),_(r.stopPropagation())}),v(5,"i",6),a()()}if(n&2){let e=t.$implicit,i=f();p("ngClass","notification-"+e.type),c(),p("ngClass",i.getIcon(e.type)),c(2),g(e.message)}}var Op=class n{constructor(t){this.notificationService=t}notifications=[];subscription;ngOnInit(){this.subscription=this.notificationService.notifications$.subscribe(t=>this.notifications=t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeNotification(t){this.notificationService.remove(t)}getIcon(t){switch(t){case"success":return"fa-check-circle";case"error":return"fa-times-circle";case"warning":return"fa-exclamation-triangle";case"info":return"fa-info-circle";default:return"fa-info-circle"}}static \u0275fac=function(e){return new(e||n)(I(Ce))};static \u0275cmp=A({type:n,selectors:[["app-notification"]],standalone:!1,decls:2,vars:1,consts:[[1,"notification-container"],["class","notification",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"notification",3,"click","ngClass"],[1,"fa",3,"ngClass"],[1,"message"],[1,"close-btn",3,"click"],[1,"fa","fa-times"]],template:function(e,i){e&1&&(o(0,"div",0),x(1,h6,6,3,"div",1),a()),e&2&&(c(),p("ngForOf",i.notifications))},dependencies:[oe,L],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;max-width:400px}.notification[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:8px;box-shadow:0 4px 12px #00000026;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s ease-out;min-width:300px}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.notification[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{font-size:1.25rem}.notification[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1;font-size:.9rem;font-weight:500}.notification[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;opacity:.7;transition:opacity .2s}.notification[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.notification-success[_ngcontent-%COMP%]{background:#d4edda;border-left:4px solid #28a745;color:#155724}.notification-success[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#155724}.notification-error[_ngcontent-%COMP%]{background:#f8d7da;border-left:4px solid #dc3545;color:#721c24}.notification-error[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#721c24}.notification-warning[_ngcontent-%COMP%]{background:#fff3cd;border-left:4px solid #ffc107;color:#856404}.notification-warning[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#856404}.notification-info[_ngcontent-%COMP%]{background:#d1ecf1;border-left:4px solid #17a2b8;color:#0c5460}.notification-info[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#0c5460}"]})};var kp=class n{title="ERP System";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-root"]],standalone:!1,decls:2,vars:0,template:function(e,i){e&1&&v(0,"app-notification")(1,"router-outlet")},dependencies:[Qr,Op],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})};var Np=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=ot({type:n,bootstrap:[kp]});static \u0275inj=nt({providers:[{provide:pd,useClass:bu,multi:!0}],imports:[ms,CC,as,$C,QC,rg,Tp]})};Y0().bootstrapModule(Np,{}).catch(n=>console.error(n));

import{a as Ji}from"./chunk-FK6H3RFT.js";import{a as me,b as Tt,c as tS}from"./chunk-C6Q5SG76.js";var Ko=null,n1=!1,oS=1,TV=null,va=Symbol("SIGNAL");function Kn(n){let t=Ko;return Ko=n,t}function r1(){return Ko}var Dg={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ag(n){if(n1)throw new Error("");if(Ko===null)return;Ko.consumerOnSignalRead(n);let t=Ko.producersTail;if(t!==void 0&&t.producer===n)return;let e,i=Ko.recomputing;if(i&&(e=t!==void 0?t.nextProducer:Ko.producers,e!==void 0&&e.producer===n)){Ko.producersTail=e,e.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Ko&&(!i||IV(r,Ko)))return;let s=rm(Ko),d={producer:n,consumer:Ko,nextProducer:e,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Ko.producersTail=d,t!==void 0?t.nextProducer=d:Ko.producers=d,s&&A5(n,d)}function k5(){oS++}function aS(n){if(!(rm(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===oS)){if(!n.producerMustRecompute(n)&&!a1(n)){rS(n);return}n.producerRecomputeValue(n),rS(n)}}function sS(n){if(n.consumers===void 0)return;let t=n1;n1=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||kV(i)}}finally{n1=t}}function lS(){return Ko?.consumerAllowSignalWrites!==!1}function kV(n){n.dirty=!0,sS(n),n.consumerMarkedDirty?.(n)}function rS(n){n.dirty=!1,n.lastCleanEpoch=oS}function Rg(n){return n&&I5(n),Kn(n)}function I5(n){n.producersTail=void 0,n.recomputing=!0}function o1(n,t){Kn(t),n&&D5(n)}function D5(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(rm(n))do e=cS(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function a1(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,i=t.lastReadVersion;if(i!==e.version||(aS(e),i!==e.version))return!0}return!1}function Fg(n){if(rm(n)){let t=n.producers;for(;t!==void 0;)t=cS(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function A5(n,t){let e=n.consumersTail,i=rm(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)A5(r.producer,r)}function cS(n){let t=n.producer,e=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!rm(t)){let s=t.producers;for(;s!==void 0;)s=cS(s)}return e}function rm(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function dS(n){TV?.(n)}function IV(n,t){let e=t.producersTail;if(e!==void 0){let i=t.producers;do{if(i===n)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function pS(n,t){return Object.is(n,t)}function s1(n,t){let e=Object.create(DV);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(aS(e),Ag(e),e.value===i1)throw e.error;return e.value};return i[va]=e,dS(e),i}var nS=Symbol("UNSET"),iS=Symbol("COMPUTING"),i1=Symbol("ERRORED"),DV=Tt(me({},Dg),{value:nS,dirty:!0,error:null,equal:pS,kind:"computed",producerMustRecompute(n){return n.value===nS||n.value===iS},producerRecomputeValue(n){if(n.value===iS)throw new Error("");let t=n.value;n.value=iS;let e=Rg(n),i,r=!1;try{i=n.computation(),Kn(null),r=t!==nS&&t!==i1&&i!==i1&&n.equal(t,i)}catch(s){i=i1,n.error=s}finally{o1(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function AV(){throw new Error}var R5=AV;function F5(n){R5(n)}function mS(n){R5=n}var RV=null;function uS(n,t){let e=Object.create(l1);e.value=n,t!==void 0&&(e.equal=t);let i=()=>N5(e);return i[va]=e,dS(e),[i,d=>Ng(e,d),d=>L5(e,d)]}function N5(n){return Ag(n),n.value}function Ng(n,t){lS()||F5(n),n.equal(n.value,t)||(n.value=t,FV(n))}function L5(n,t){lS()||F5(n),Ng(n,t(n.value))}var l1=Tt(me({},Dg),{equal:pS,value:void 0,kind:"signal"});function FV(n){n.version++,k5(),sS(n),RV?.(n)}function gS(n){let t=Kn(null);try{return n()}finally{Kn(t)}}function jn(n){return typeof n=="function"}function om(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var c1=om(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function F0(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var so=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(jn(i))try{i()}catch(s){t=s instanceof c1?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{V5(s)}catch(d){t=t??[],d instanceof c1?t=[...t,...d.errors]:t.push(d)}}if(t)throw new c1(t)}}add(t){var e;if(t&&t!==this)if(this.closed)V5(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&F0(e,t)}remove(t){let{_finalizers:e}=this;e&&F0(e,t),t instanceof n&&t._removeParent(this)}};so.EMPTY=(()=>{let n=new so;return n.closed=!0,n})();var fS=so.EMPTY;function d1(n){return n instanceof so||n&&"closed"in n&&jn(n.remove)&&jn(n.add)&&jn(n.unsubscribe)}function V5(n){jn(n)?n():n.unsubscribe()}var Zs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var am={setTimeout(n,t,...e){let{delegate:i}=am;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=am;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function p1(n){am.setTimeout(()=>{let{onUnhandledError:t}=Zs;if(t)t(n);else throw n})}function Lg(){}var B5=hS("C",void 0,void 0);function U5(n){return hS("E",void 0,n)}function j5(n){return hS("N",n,void 0)}function hS(n,t,e){return{kind:n,value:t,error:e}}var N0=null;function sm(n){if(Zs.useDeprecatedSynchronousErrorHandling){let t=!N0;if(t&&(N0={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=N0;if(N0=null,e)throw i}}else n()}function W5(n){Zs.useDeprecatedSynchronousErrorHandling&&N0&&(N0.errorThrown=!0,N0.error=n)}var L0=class extends so{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,d1(t)&&t.add(this)):this.destination=VV}static create(t,e,i){return new Ac(t,e,i)}next(t){this.isStopped?vS(j5(t),this):this._next(t)}error(t){this.isStopped?vS(U5(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?vS(B5,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NV=Function.prototype.bind;function _S(n,t){return NV.call(n,t)}var xS=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){m1(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){m1(i)}else m1(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){m1(e)}}},Ac=class extends L0{constructor(t,e,i){super();let r;if(jn(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Zs.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&_S(t.next,s),error:t.error&&_S(t.error,s),complete:t.complete&&_S(t.complete,s)}):r=t}this.destination=new xS(r)}};function m1(n){Zs.useDeprecatedSynchronousErrorHandling?W5(n):p1(n)}function LV(n){throw n}function vS(n,t){let{onStoppedNotification:e}=Zs;e&&am.setTimeout(()=>e(n,t))}var VV={closed:!0,next:Lg,error:LV,complete:Lg};var lm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function el(n){return n}function yS(...n){return CS(n)}function CS(n){return n.length===0?el:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var ni=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=UV(e)?e:new Ac(e,i,r);return sm(()=>{let{operator:d,source:u}=this;s.add(d?d.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=z5(i),new i((r,s)=>{let d=new Ac({next:u=>{try{e(u)}catch(h){s(h),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[lm](){return this}pipe(...e){return CS(e)(this)}toPromise(e){return e=z5(e),new e((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return n.create=t=>new n(t),n})();function z5(n){var t;return(t=n??Zs.Promise)!==null&&t!==void 0?t:Promise}function BV(n){return n&&jn(n.next)&&jn(n.error)&&jn(n.complete)}function UV(n){return n&&n instanceof L0||BV(n)&&d1(n)}function jV(n){return jn(n?.lift)}function Pi(n){return t=>{if(jV(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Vi(n,t,e,i,r){return new bS(n,t,e,i,r)}var bS=class extends L0{constructor(t,e,i,r,s,d){super(t),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(u){try{e(u)}catch(h){t.error(h)}}:super._next,this._error=r?function(u){try{r(u)}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var q5=om(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oi=(()=>{class n extends ni{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new u1(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new q5}next(e){sm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){sm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){sm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?fS:(this.currentObservers=null,s.push(e),new so(()=>{this.currentObservers=null,F0(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new ni;return e.source=this,e}}return n.create=(t,e)=>new u1(t,e),n})(),u1=class extends Oi{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:fS}};var Ci=class extends Oi{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Vg={now(){return(Vg.delegate||Date).now()},delegate:void 0};var g1=class extends Oi{constructor(t=1/0,e=1/0,i=Vg){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:d}=this;e||(i.push(t),!r&&i.push(s.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let d=0;d<s.length&&!t.closed;d+=i?1:2)t.next(s[d]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let d=e.now(),u=0;for(let h=1;h<i.length&&i[h]<=d;h+=2)u=h;u&&i.splice(0,u+1)}}};var f1=class extends so{constructor(t,e){super()}schedule(t,e=0){return this}};var Bg={setInterval(n,t,...e){let{delegate:i}=Bg;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Bg;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var h1=class extends f1{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return Bg.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Bg.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,F0(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var cm=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};cm.now=Vg.now;var _1=class extends cm{constructor(t,e=cm.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var MS=new _1(h1),H5=MS;var Aa=new ni(n=>n.complete());function v1(n){return n&&jn(n.schedule)}function G5(n){return n[n.length-1]}function x1(n){return jn(G5(n))?n.pop():void 0}function Pd(n){return v1(G5(n))?n.pop():void 0}function Y5(n,t,e,i){function r(s){return s instanceof e?s:new e(function(d){d(s)})}return new(e||(e=Promise))(function(s,d){function u(C){try{v(i.next(C))}catch(O){d(O)}}function h(C){try{v(i.throw(C))}catch(O){d(O)}}function v(C){C.done?s(C.value):r(C.value).then(u,h)}v((i=i.apply(n,t||[])).next())})}function $5(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function V0(n){return this instanceof V0?(this.v=n,this):new V0(n)}function J5(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(w){return function(A){return Promise.resolve(A).then(w,O)}}function u(w,A){i[w]&&(r[w]=function(I){return new Promise(function(L,B){s.push([w,I,L,B])>1||h(w,I)})},A&&(r[w]=A(r[w])))}function h(w,A){try{v(i[w](A))}catch(I){T(s[0][3],I)}}function v(w){w.value instanceof V0?Promise.resolve(w.value.v).then(C,O):T(s[0][2],w)}function C(w){h("next",w)}function O(w){h("throw",w)}function T(w,A){w(A),s.shift(),s.length&&h(s[0][0],s[0][1])}}function K5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof $5=="function"?$5(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(d){return new Promise(function(u,h){d=n[s](d),r(u,h,d.done,d.value)})}}function r(s,d,u,h){Promise.resolve(h).then(function(v){s({value:v,done:u})},d)}}var y1=n=>n&&typeof n.length=="number"&&typeof n!="function";function C1(n){return jn(n?.then)}function b1(n){return jn(n[lm])}function M1(n){return Symbol.asyncIterator&&jn(n?.[Symbol.asyncIterator])}function S1(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var P1=WV();function w1(n){return jn(n?.[P1])}function E1(n){return J5(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield V0(e.read());if(r)return yield V0(void 0);yield yield V0(i)}}finally{e.releaseLock()}})}function O1(n){return jn(n?.getReader)}function wr(n){if(n instanceof ni)return n;if(n!=null){if(b1(n))return zV(n);if(y1(n))return qV(n);if(C1(n))return HV(n);if(M1(n))return Q5(n);if(w1(n))return GV(n);if(O1(n))return $V(n)}throw S1(n)}function zV(n){return new ni(t=>{let e=n[lm]();if(jn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qV(n){return new ni(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function HV(n){return new ni(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,p1)})}function GV(n){return new ni(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Q5(n){return new ni(t=>{YV(n,t).catch(e=>t.error(e))})}function $V(n){return Q5(E1(n))}function YV(n,t){var e,i,r,s;return Y5(this,void 0,void 0,function*(){try{for(e=K5(n);i=yield e.next(),!i.done;){let d=i.value;if(t.next(d),t.closed)return}}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function Ra(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function T1(n,t=0){return Pi((e,i)=>{e.subscribe(Vi(i,r=>Ra(i,n,()=>i.next(r),t),()=>Ra(i,n,()=>i.complete(),t),r=>Ra(i,n,()=>i.error(r),t)))})}function k1(n,t=0){return Pi((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function X5(n,t){return wr(n).pipe(k1(t),T1(t))}function Z5(n,t){return wr(n).pipe(k1(t),T1(t))}function eT(n,t){return new ni(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function tT(n,t){return new ni(e=>{let i;return Ra(e,t,()=>{i=n[P1](),Ra(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){e.error(d);return}s?e.complete():e.next(r)},0,!0)}),()=>jn(i?.return)&&i.return()})}function I1(n,t){if(!n)throw new Error("Iterable cannot be null");return new ni(e=>{Ra(e,t,()=>{let i=n[Symbol.asyncIterator]();Ra(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function nT(n,t){return I1(E1(n),t)}function iT(n,t){if(n!=null){if(b1(n))return X5(n,t);if(y1(n))return eT(n,t);if(C1(n))return Z5(n,t);if(M1(n))return I1(n,t);if(w1(n))return tT(n,t);if(O1(n))return nT(n,t)}throw S1(n)}function Er(n,t){return t?iT(n,t):wr(n)}function Zt(...n){let t=Pd(n);return Er(n,t)}function Ug(n,t){let e=jn(n)?n:()=>n,i=r=>r.error(e());return new ni(t?r=>t.schedule(i,0,r):i)}function tl(n){return!!n&&(n instanceof ni||jn(n.lift)&&jn(n.subscribe))}var B0=om(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rT(n){return n instanceof Date&&!isNaN(n)}function ii(n,t){return Pi((e,i)=>{let r=0;e.subscribe(Vi(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:JV}=Array;function KV(n,t){return JV(t)?n(...t):n(t)}function D1(n){return ii(t=>KV(n,t))}var{isArray:QV}=Array,{getPrototypeOf:XV,prototype:ZV,keys:eB}=Object;function A1(n){if(n.length===1){let t=n[0];if(QV(t))return{args:t,keys:null};if(tB(t)){let e=eB(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function tB(n){return n&&typeof n=="object"&&XV(n)===ZV}function R1(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function F1(...n){let t=Pd(n),e=x1(n),{args:i,keys:r}=A1(n);if(i.length===0)return Er([],t);let s=new ni(nB(i,t,r?d=>R1(r,d):el));return e?s.pipe(D1(e)):s}function nB(n,t,e=el){return i=>{oT(t,()=>{let{length:r}=n,s=new Array(r),d=r,u=r;for(let h=0;h<r;h++)oT(t,()=>{let v=Er(n[h],t),C=!1;v.subscribe(Vi(i,O=>{s[h]=O,C||(C=!0,u--),u||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}function oT(n,t,e){n?Ra(e,n,t):t()}function aT(n,t,e,i,r,s,d,u){let h=[],v=0,C=0,O=!1,T=()=>{O&&!h.length&&!v&&t.complete()},w=I=>v<i?A(I):h.push(I),A=I=>{s&&t.next(I),v++;let L=!1;wr(e(I,C++)).subscribe(Vi(t,B=>{r?.(B),s?w(B):t.next(B)},()=>{L=!0},void 0,()=>{if(L)try{for(v--;h.length&&v<i;){let B=h.shift();d?Ra(t,d,()=>A(B)):A(B)}T()}catch(B){t.error(B)}}))};return n.subscribe(Vi(t,w,()=>{O=!0,T()})),()=>{u?.()}}function Fo(n,t,e=1/0){return jn(t)?Fo((i,r)=>ii((s,d)=>t(i,s,r,d))(wr(n(i,r))),e):(typeof t=="number"&&(e=t),Pi((i,r)=>aT(i,r,n,e)))}function dm(n=1/0){return Fo(el,n)}function sT(){return dm(1)}function Rc(...n){return sT()(Er(n,Pd(n)))}function wd(n){return new ni(t=>{wr(n()).subscribe(t)})}function fo(...n){let t=x1(n),{args:e,keys:i}=A1(n),r=new ni(s=>{let{length:d}=e;if(!d){s.complete();return}let u=new Array(d),h=d,v=d;for(let C=0;C<d;C++){let O=!1;wr(e[C]).subscribe(Vi(s,T=>{O||(O=!0,v--),u[C]=T},()=>h--,void 0,()=>{(!h||!O)&&(v||s.next(i?R1(i,u):u),s.complete())}))}});return t?r.pipe(D1(t)):r}function lT(n=0,t,e=H5){let i=-1;return t!=null&&(v1(t)?e=t:i=t),new ni(r=>{let s=rT(n)?+n-e.now():n;s<0&&(s=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function SS(n=0,t=MS){return n<0&&(n=0),lT(n,n,t)}function Fa(n,t){return Pi((e,i)=>{let r=0;e.subscribe(Vi(i,s=>n.call(t,s,r++)&&i.next(s)))})}function ur(n){return Pi((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Vi(e,void 0,void 0,d=>{s=wr(n(d,ur(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Fl(n,t){return jn(t)?Fo(n,t,1):Fo(n,1)}function PS(n){return Pi((t,e)=>{let i=!1;t.subscribe(Vi(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Na(n){return n<=0?()=>Aa:Pi((t,e)=>{let i=0;t.subscribe(Vi(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function cT(n=iB){return Pi((t,e)=>{let i=!1;t.subscribe(Vi(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function iB(){return new B0}function Tn(n){return Pi((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Fc(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Fa((r,s)=>n(r,s,i)):el,Na(1),e?PS(t):cT(()=>new B0))}function N1(n){return n<=0?()=>Aa:Pi((t,e)=>{let i=[];t.subscribe(Vi(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function dT(n={}){let{connector:t=()=>new Oi,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let d,u,h,v=0,C=!1,O=!1,T=()=>{u?.unsubscribe(),u=void 0},w=()=>{T(),d=h=void 0,C=O=!1},A=()=>{let I=d;w(),I?.unsubscribe()};return Pi((I,L)=>{v++,!O&&!C&&T();let B=h=h??t();L.add(()=>{v--,v===0&&!O&&!C&&(u=wS(A,r))}),B.subscribe(L),!d&&v>0&&(d=new Ac({next:q=>B.next(q),error:q=>{O=!0,T(),u=wS(w,e,q),B.error(q)},complete:()=>{C=!0,T(),u=wS(w,i),B.complete()}}),wr(I).subscribe(d))})(s)}}function wS(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Ac({next:()=>{i.unsubscribe(),n()}});return wr(t(...e)).subscribe(i)}function L1(n,t,e){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n:i=n??1/0,dT({connector:()=>new g1(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function jg(...n){let t=Pd(n);return Pi((e,i)=>{(t?Rc(n,e,t):Rc(n,e)).subscribe(i)})}function ho(n,t){return Pi((e,i)=>{let r=null,s=0,d=!1,u=()=>d&&!r&&i.complete();e.subscribe(Vi(i,h=>{r?.unsubscribe();let v=0,C=s++;wr(n(h,C)).subscribe(r=Vi(i,O=>i.next(t?t(h,O,C,v++):O),()=>{r=null,u()}))},()=>{d=!0,u()}))})}function Wg(n){return Pi((t,e)=>{wr(n).subscribe(Vi(e,()=>e.complete(),Lg)),!e.closed&&t.subscribe(e)})}function si(n,t,e){let i=jn(n)||t||e?{next:n,error:t,complete:e}:n;return i?Pi((r,s)=>{var d;(d=i.subscribe)===null||d===void 0||d.call(i);let u=!0;r.subscribe(Vi(s,h=>{var v;(v=i.next)===null||v===void 0||v.call(i,h),s.next(h)},()=>{var h;u=!1,(h=i.complete)===null||h===void 0||h.call(i),s.complete()},h=>{var v;u=!1,(v=i.error)===null||v===void 0||v.call(i,h),s.error(h)},()=>{var h,v;u&&((h=i.unsubscribe)===null||h===void 0||h.call(i)),(v=i.finalize)===null||v===void 0||v.call(i)}))}):el}var ES;function V1(){return ES}function Nl(n){let t=ES;return ES=n,t}var pT=Symbol("NotFound");function pm(n){return n===pT||n?.name==="\u0275NotFound"}var z1="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",yt=class extends Error{code;constructor(t,e){super(Vc(t,e)),this.code=t}};function aB(n){return`NG0${Math.abs(n)}`}function Vc(n,t){return`${aB(n)}${t?": "+t:""}`}var Vo=globalThis;function Bi(n){for(let t in n)if(n[t]===Bi)return t;throw Error("")}function hT(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Lc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Lc).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function q1(n,t){return n?t?`${n} ${t}`:n:t||""}var sB=Bi({__forward_ref__:Bi});function Bo(n){return n.__forward_ref__=Bo,n.toString=function(){return Lc(this())},n}function No(n){return WS(n)?n():n}function WS(n){return typeof n=="function"&&n.hasOwnProperty(sB)&&n.__forward_ref__===Bo}function $e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yg(n){return lB(n,H1)}function zS(n){return Yg(n)!==null}function lB(n,t){return n.hasOwnProperty(t)&&n[t]||null}function cB(n){let t=n?.[H1]??null;return t||null}function TS(n){return n&&n.hasOwnProperty(U1)?n[U1]:null}var H1=Bi({\u0275prov:Bi}),U1=Bi({\u0275inj:Bi}),Gt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=$e({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qS(n){return n&&!!n.\u0275providers}var HS=Bi({\u0275cmp:Bi}),GS=Bi({\u0275dir:Bi}),$S=Bi({\u0275pipe:Bi}),YS=Bi({\u0275mod:Bi}),qg=Bi({\u0275fac:Bi}),q0=Bi({__NG_ELEMENT_ID__:Bi}),mT=Bi({__NG_ENV_ID__:Bi});function JS(n){return n[YS]||null}function Bc(n){return n[HS]||null}function KS(n){return n[GS]||null}function _T(n){return n[$S]||null}function Vl(n){return typeof n=="string"?n:n==null?"":String(n)}function vT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Vl(n)}var xT=Bi({ngErrorCode:Bi}),dB=Bi({ngErrorMessage:Bi}),pB=Bi({ngTokenPath:Bi});function QS(n,t){return yT("",-200,t)}function G1(n,t){throw new yt(-201,!1)}function yT(n,t,e){let i=new yt(t,n);return i[xT]=t,i[dB]=n,e&&(i[pB]=e),i}function mB(n){return n[xT]}var kS;function CT(){return kS}function xa(n){let t=kS;return kS=n,t}function XS(n,t,e){let i=Yg(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(t!==void 0)return t;G1(n,"Injector")}var uB={},U0=uB,gB="__NG_DI_FLAG__",IS=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=j0(e)||0;try{return this.injector.get(t,i&8?null:U0,i)}catch(r){if(pm(r))return r;throw r}}};function fB(n,t=0){let e=V1();if(e===void 0)throw new yt(-203,!1);if(e===null)return XS(n,void 0,t);{let i=hB(t),r=e.retrieve(n,i);if(pm(r)){if(i.optional)return null;throw r}return r}}function it(n,t=0){return(CT()||fB)(No(n),t)}function ct(n,t){return it(n,j0(t))}function j0(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function hB(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function DS(n){let t=[];for(let e=0;e<n.length;e++){let i=No(n[e]);if(Array.isArray(i)){if(i.length===0)throw new yt(900,!1);let r,s=0;for(let d=0;d<i.length;d++){let u=i[d],h=_B(u);typeof h=="number"?h===-1?r=u.token:s|=h:r=u}t.push(it(r,s))}else t.push(it(i))}return t}function _B(n){return n[gB]}function Ed(n,t){let e=n.hasOwnProperty(qg);return e?n[qg]:null}function $1(n,t){n.forEach(e=>Array.isArray(e)?$1(e,t):t(e))}function ZS(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Jg(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function bT(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function Y1(n,t,e){let i=um(n,t);return i>=0?n[i|1]=e:(i=~i,bT(n,i,t,e)),i}function J1(n,t){let e=um(n,t);if(e>=0)return n[e|1]}function um(n,t){return vB(n,t,1)}function vB(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),d=n[s<<e];if(t===d)return s<<e;d>t?r=s:i=s+1}return~(r<<e)}var kd={},ya=[],gm=new Gt(""),eP=new Gt("",-1),tP=new Gt(""),Hg=class{get(t,e=U0){if(e===U0){let r=yT("",-201);throw r.name="\u0275NotFound",r}return e}};function H0(n){return{\u0275providers:n}}function MT(...n){return{\u0275providers:nP(!0,n),\u0275fromNgModule:!0}}function nP(n,...t){let e=[],i=new Set,r,s=d=>{e.push(d)};return $1(t,d=>{let u=d;j1(u,s,[],i)&&(r||=[],r.push(u))}),r!==void 0&&ST(r,s),e}function ST(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];iP(r,s=>{t(s,i)})}}function j1(n,t,e,i){if(n=No(n),!n)return!1;let r=null,s=TS(n),d=!s&&Bc(n);if(!s&&!d){let h=n.ngModule;if(s=TS(h),s)r=h;else return!1}else{if(d&&!d.standalone)return!1;r=n}let u=i.has(r);if(d){if(u)return!1;if(i.add(r),d.dependencies){let h=typeof d.dependencies=="function"?d.dependencies():d.dependencies;for(let v of h)j1(v,t,e,i)}}else if(s){if(s.imports!=null&&!u){i.add(r);let v;try{$1(s.imports,C=>{j1(C,t,e,i)&&(v||=[],v.push(C))})}finally{}v!==void 0&&ST(v,t)}if(!u){let v=Ed(r)||(()=>new r);t({provide:r,useFactory:v,deps:ya},r),t({provide:tP,useValue:r,multi:!0},r),t({provide:gm,useValue:()=>it(r),multi:!0},r)}let h=s.providers;if(h!=null&&!u){let v=n;iP(h,C=>{t(C,v)})}}else return!1;return r!==n&&n.providers!==void 0}function iP(n,t){for(let e of n)qS(e)&&(e=e.\u0275providers),Array.isArray(e)?iP(e,t):t(e)}var xB=Bi({provide:String,useValue:Bi});function PT(n){return n!==null&&typeof n=="object"&&xB in n}function yB(n){return!!(n&&n.useExisting)}function CB(n){return!!(n&&n.useFactory)}function W0(n){return typeof n=="function"}function wT(n){return!!n.useClass}var Kg=new Gt(""),B1={},uT={},OS;function Qg(){return OS===void 0&&(OS=new Hg),OS}var Dr=class{},z0=class extends Dr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,RS(t,d=>this.processProvider(d)),this.records.set(eP,mm(void 0,this)),r.has("environment")&&this.records.set(Dr,mm(void 0,this));let s=this.records.get(Kg);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tP,ya,{self:!0}))}retrieve(t,e){let i=j0(e)||0;try{return this.get(t,U0,i)}catch(r){if(pm(r))return r;throw r}}destroy(){zg(this),this._destroyed=!0;let t=Kn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Kn(t)}}onDestroy(t){return zg(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){zg(this);let e=Nl(this),i=xa(void 0),r;try{return t()}finally{Nl(e),xa(i)}}get(t,e=U0,i){if(zg(this),t.hasOwnProperty(mT))return t[mT](this);let r=j0(i),s,d=Nl(this),u=xa(void 0);try{if(!(r&4)){let v=this.records.get(t);if(v===void 0){let C=wB(t)&&Yg(t);C&&this.injectableDefInScope(C)?v=mm(AS(t),B1):v=null,this.records.set(t,v)}if(v!=null)return this.hydrate(t,v,r)}let h=r&2?Qg():this.parent;return e=r&8&&e===U0?null:e,h.get(t,e)}catch(h){let v=mB(h);throw v===-200||v===-201?new yt(v,null):h}finally{xa(u),Nl(d)}}resolveInjectorInitializers(){let t=Kn(null),e=Nl(this),i=xa(void 0),r;try{let s=this.get(gm,ya,{self:!0});for(let d of s)d()}finally{Nl(e),xa(i),Kn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(Lc(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=No(t);let e=W0(t)?t:No(t&&t.provide),i=MB(t);if(!W0(t)&&t.multi===!0){let r=this.records.get(e);r||(r=mm(void 0,B1,!0),r.factory=()=>DS(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=Kn(null);try{if(e.value===uT)throw QS(Lc(t));return e.value===B1&&(e.value=uT,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&PB(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Kn(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=No(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function AS(n){let t=Yg(n),e=t!==null?t.factory:Ed(n);if(e!==null)return e;if(n instanceof Gt)throw new yt(204,!1);if(n instanceof Function)return bB(n);throw new yt(204,!1)}function bB(n){if(n.length>0)throw new yt(204,!1);let e=cB(n);return e!==null?()=>e.factory(n):()=>new n}function MB(n){if(PT(n))return mm(void 0,n.useValue);{let t=rP(n);return mm(t,B1)}}function rP(n,t,e){let i;if(W0(n)){let r=No(n);return Ed(r)||AS(r)}else if(PT(n))i=()=>No(n.useValue);else if(CB(n))i=()=>n.useFactory(...DS(n.deps||[]));else if(yB(n))i=(r,s)=>it(No(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=No(n&&(n.useClass||n.provide));if(SB(n))i=()=>new r(...DS(n.deps));else return Ed(r)||AS(r)}return i}function zg(n){if(n.destroyed)throw new yt(205,!1)}function mm(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function SB(n){return!!n.deps}function PB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function wB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function RS(n,t){for(let e of n)Array.isArray(e)?RS(e,t):e&&qS(e)?RS(e.\u0275providers,t):t(e)}function _o(n,t){let e;n instanceof z0?(zg(n),e=n):e=new IS(n);let i,r=Nl(e),s=xa(void 0);try{return t()}finally{Nl(r),xa(s)}}function oP(){return CT()!==void 0||V1()!=null}var nl=0,Ln=1,Nn=2,Lo=3,Ps=4,ws=5,Xg=6,fm=7,Xo=8,Id=9,Bl=10,yr=11,hm=12,aP=13,G0=14,Es=15,$0=16,Y0=17,J0=18,Zg=19,sP=20,Nc=21,K1=22,ef=23,os=24,K0=25,tf=26,vo=27,ET=1;var Dd=7,nf=8,rf=9,La=10;function Ul(n){return Array.isArray(n)&&typeof n[ET]=="object"}function il(n){return Array.isArray(n)&&n[ET]===!0}function lP(n){return(n.flags&4)!==0}function Ad(n){return n.componentOffset>-1}function _m(n){return(n.flags&1)===1}function jl(n){return!!n.template}function vm(n){return(n[Nn]&512)!==0}function Q0(n){return(n[Nn]&256)===256}var cP="svg",OT="math";function Os(n){for(;Array.isArray(n);)n=n[nl];return n}function dP(n,t){return Os(t[n])}function rl(n,t){return Os(t[n.index])}function Q1(n,t){return n.data[t]}function X1(n,t){return n[t]}function pP(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Ts(n,t){let e=t[n];return Ul(e)?e:e[nl]}function Z1(n){return(n[Nn]&128)===128}function TT(n){return il(n[Lo])}function of(n,t){return t==null?null:n[t]}function mP(n){n[Y0]=0}function uP(n){n[Nn]&1024||(n[Nn]|=1024,Z1(n)&&xm(n))}function kT(n,t){for(;n>0;)t=t[G0],n--;return t}function af(n){return!!(n[Nn]&9216||n[os]?.dirty)}function ev(n){n[Bl].changeDetectionScheduler?.notify(8),n[Nn]&64&&(n[Nn]|=1024),af(n)&&xm(n)}function xm(n){n[Bl].changeDetectionScheduler?.notify(0);let t=Od(n);for(;t!==null&&!(t[Nn]&8192||(t[Nn]|=8192,!Z1(t)));)t=Od(t)}function gP(n,t){if(Q0(n))throw new yt(911,!1);n[Nc]===null&&(n[Nc]=[]),n[Nc].push(t)}function IT(n,t){if(n[Nc]===null)return;let e=n[Nc].indexOf(t);e!==-1&&n[Nc].splice(e,1)}function Od(n){let t=n[Lo];return il(t)?t[Lo]:t}function DT(n){return n[fm]??=[]}function AT(n){return n.cleanup??=[]}var Qn={lFrame:JT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var FS=!1;function RT(){return Qn.lFrame.elementDepthCount}function FT(){Qn.lFrame.elementDepthCount++}function NT(){Qn.lFrame.elementDepthCount--}function tv(){return Qn.bindingsEnabled}function LT(){return Qn.skipHydrationRootTNode!==null}function VT(n){return Qn.skipHydrationRootTNode===n}function BT(){Qn.skipHydrationRootTNode=null}function ri(){return Qn.lFrame.lView}function Zo(){return Qn.lFrame.tView}function g(n){return Qn.lFrame.contextLView=n,n[Xo]}function f(n){return Qn.lFrame.contextLView=null,n}function ea(){let n=fP();for(;n!==null&&n.type===64;)n=n.parent;return n}function fP(){return Qn.lFrame.currentTNode}function UT(){let n=Qn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ym(n,t){let e=Qn.lFrame;e.currentTNode=n,e.isParent=t}function hP(){return Qn.lFrame.isParent}function jT(){Qn.lFrame.isParent=!1}function WT(){return Qn.lFrame.contextLView}function _P(){return FS}function vP(n){let t=FS;return FS=n,t}function Rd(){let n=Qn.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function xP(){return Qn.lFrame.bindingIndex}function zT(n){return Qn.lFrame.bindingIndex=n}function sf(){return Qn.lFrame.bindingIndex++}function lf(n){let t=Qn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function qT(){return Qn.lFrame.inI18n}function HT(n,t){let e=Qn.lFrame;e.bindingIndex=e.bindingRootIndex=n,nv(t)}function GT(){return Qn.lFrame.currentDirectiveIndex}function nv(n){Qn.lFrame.currentDirectiveIndex=n}function $T(n){let t=Qn.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function yP(n){Qn.lFrame.currentQueryIndex=n}function EB(n){let t=n[Ln];return t.type===2?t.declTNode:t.type===1?n[ws]:null}function CP(n,t,e){if(e&4){let r=t,s=n;for(;r=r.parent,r===null&&!(e&1);)if(r=EB(s),r===null||(s=s[G0],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=Qn.lFrame=YT();return i.currentTNode=t,i.lView=n,!0}function iv(n){let t=YT(),e=n[Ln];Qn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function YT(){let n=Qn.lFrame,t=n===null?null:n.child;return t===null?JT(n):t}function JT(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function KT(){let n=Qn.lFrame;return Qn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bP=KT;function rv(){let n=KT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function QT(n){return(Qn.lFrame.contextLView=kT(n,Qn.lFrame.contextLView))[Xo]}function Wl(){return Qn.lFrame.selectedIndex}function Fd(n){Qn.lFrame.selectedIndex=n}function ov(){let n=Qn.lFrame;return Q1(n.tView,n.selectedIndex)}function Cm(){Qn.lFrame.currentNamespace=cP}function bm(){OB()}function OB(){Qn.lFrame.currentNamespace=null}function XT(){return Qn.lFrame.currentNamespace}var ZT=!0;function av(){return ZT}function cf(n){ZT=n}function NS(n,t=null,e=null,i){let r=MP(n,t,e,i);return r.resolveInjectorInitializers(),r}function MP(n,t=null,e=null,i,r=new Set){let s=[e||ya,MT(n)];return i=i||(typeof n=="object"?void 0:Lc(n)),new z0(s,t||Qg(),i||null,r)}var Qo=class n{static THROW_IF_NOT_FOUND=U0;static NULL=new Hg;static create(t,e){if(Array.isArray(t))return NS({name:""},e,t,"");{let i=t.name??"";return NS({name:i},t.parent,t.providers,i)}}static \u0275prov=$e({token:n,providedIn:"any",factory:()=>it(eP)});static __NG_ELEMENT_ID__=-1},gr=new Gt(""),ks=(()=>{class n{static __NG_ELEMENT_ID__=TB;static __NG_ENV_ID__=e=>e}return n})(),LS=class extends ks{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Q0(this._lView)}onDestroy(t){let e=this._lView;return gP(e,t),()=>IT(e,t)}};function TB(){return new LS(ri())}var ek=!1,Uc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ci(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ni(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})(),VS=class extends Oi{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,oP()&&(this.destroyRef=ct(ks,{optional:!0})??void 0,this.pendingTasks=ct(Uc,{optional:!0})??void 0)}emit(t){let e=Kn(null);try{super.next(t)}finally{Kn(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),d=i;if(t&&typeof t=="object"){let h=t;r=h.next?.bind(h),s=h.error?.bind(h),d=h.complete?.bind(h)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),d&&(d=this.wrapInTimeout(d)));let u=super.subscribe({next:r,error:s,complete:d});return t instanceof so&&t.add(u),u}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},hi=VS;function W1(...n){}function SP(n){let t,e;function i(){n=W1;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function PP(n){return queueMicrotask(()=>n()),()=>{n=W1}}var wP="isAngularZone",Gg=wP+"_ID",kB=0,Jr=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new hi(!1);onMicrotaskEmpty=new hi(!1);onStable=new hi(!1);onError=new hi(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=ek}=t;if(typeof Zone>"u")throw new yt(908,!1);Zone.assertZonePatched();let d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!r&&i,d.shouldCoalesceRunChangeDetection=r,d.callbackScheduled=!1,d.scheduleInRootZone=s,AB(d)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wP)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new yt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new yt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,t,IB,W1,W1);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},IB={};function EP(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){SP(()=>{n.callbackScheduled=!1,BS(n),n.isCheckStableRunning=!0,EP(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),BS(n)}function AB(n){let t=()=>{DB(n)},e=kB++;n._inner=n._inner.fork({name:"angular",properties:{[wP]:!0,[Gg]:e,[Gg+e]:!0},onInvokeTask:(i,r,s,d,u,h)=>{if(RB(h))return i.invokeTask(s,d,u,h);try{return gT(n),i.invokeTask(s,d,u,h)}finally{(n.shouldCoalesceEventChangeDetection&&d.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),fT(n)}},onInvoke:(i,r,s,d,u,h,v)=>{try{return gT(n),i.invoke(s,d,u,h,v)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!FB(h)&&t(),fT(n)}},onHasTask:(i,r,s,d)=>{i.hasTask(s,d),r===s&&(d.change=="microTask"?(n._hasPendingMicrotasks=d.microTask,BS(n),EP(n)):d.change=="macroTask"&&(n.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,r,s,d)=>(i.handleError(s,d),n.runOutsideAngular(()=>n.onError.emit(d)),!1)})}function BS(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function gT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fT(n){n._nesting--,EP(n)}var $g=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new hi;onMicrotaskEmpty=new hi;onStable=new hi;onError=new hi;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function RB(n){return tk(n,"__ignore_ng_zone__")}function FB(n){return tk(n,"__scheduler_tick__")}function tk(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Ll=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Is=new Gt("",{factory:()=>{let n=ct(Jr),t=ct(Dr),e;return i=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw i}):(e??=t.get(Ll),e.handleError(i))})}}}),nk={provide:gm,useValue:()=>{let n=ct(Ll,{optional:!0})},multi:!0};function Ds(n,t){let[e,i,r]=uS(n,t?.equal),s=e,d=s[va];return s.set=i,s.update=r,s.asReadonly=ik.bind(s),s}function ik(){let n=this[va];if(n.readonlyFn===void 0){let t=()=>this();t[va]=n,n.readonlyFn=t}return n.readonlyFn}var sv=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=NB}return n})();function NB(){return new sv(ri(),ea())}var Td=class{},df=new Gt("",{factory:()=>!0});var OP=new Gt(""),pf=(()=>{class n{internalPendingTasks=ct(Uc);scheduler=ct(Td);errorHandler=ct(Is);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})(),TP=(()=>{class n{static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new US})}return n})(),US=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,i]of this.queues)e===null?t||=this.flushQueue(i):t||=e.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}},jS=class{[va];constructor(t){this[va]=t}destroy(){this[va].destroy()}};function lo(n){return gS(n)}function Cf(n){return{toString:n}.toString()}function Ak(n){let t=Vo.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function WB(n){return typeof n=="function"}function Rk(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var gv=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}},Gl=(()=>{let n=()=>Fk;return n.ngInherit=!0,n})();function Fk(n){return n.type.prototype.ngOnChanges&&(n.setInput=qB),zB}function zB(){let n=Lk(this),t=n?.current;if(t){let e=n.previous;if(e===kd)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function qB(n,t,e,i,r){let s=this.declaredInputs[i],d=Lk(n)||HB(n,{previous:kd,current:null}),u=d.current||(d.current={}),h=d.previous,v=h[s];u[s]=new gv(v&&v.currentValue,e,h===kd),Rk(n,t,r,e)}var Nk="__ngSimpleChanges__";function Lk(n){return n[Nk]||null}function HB(n,t){return n[Nk]=t}var rk=[];var Ki=function(n,t=null,e){for(let i=0;i<rk.length;i++){let r=rk[i];r(n,t,e)}},Ti=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ti||{});function GB(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let d=Fk(t);(e.preOrderHooks??=[]).push(n,d),(e.preOrderCheckHooks??=[]).push(n,d)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function Vk(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:v,ngOnDestroy:C}=s;d&&(n.contentHooks??=[]).push(-e,d),u&&((n.contentHooks??=[]).push(e,u),(n.contentCheckHooks??=[]).push(e,u)),h&&(n.viewHooks??=[]).push(-e,h),v&&((n.viewHooks??=[]).push(e,v),(n.viewCheckHooks??=[]).push(e,v)),C!=null&&(n.destroyHooks??=[]).push(e,C)}}function pv(n,t,e){Bk(n,t,3,e)}function mv(n,t,e,i){(n[Nn]&3)===e&&Bk(n,t,e,i)}function kP(n,t){let e=n[Nn];(e&3)===t&&(e&=16383,e+=1,n[Nn]=e)}function Bk(n,t,e,i){let r=i!==void 0?n[Y0]&65535:0,s=i??-1,d=t.length-1,u=0;for(let h=r;h<d;h++)if(typeof t[h+1]=="number"){if(u=t[h],i!=null&&u>=i)break}else t[h]<0&&(n[Y0]+=65536),(u<s||s==-1)&&($B(n,e,t,h),n[Y0]=(n[Y0]&4294901760)+h+2),h++}function ok(n,t){Ki(Ti.LifecycleHookStart,n,t);let e=Kn(null);try{t.call(n)}finally{Kn(e),Ki(Ti.LifecycleHookEnd,n,t)}}function $B(n,t,e,i){let r=e[i]<0,s=e[i+1],d=r?-e[i]:e[i],u=n[d];r?n[Nn]>>14<n[Y0]>>16&&(n[Nn]&3)===t&&(n[Nn]+=16384,ok(u,s)):ok(u,s)}var Sm=-1,Z0=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function YB(n){return(n.flags&8)!==0}function JB(n){return(n.flags&16)!==0}function KB(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],d=e[i++],u=e[i++];n.setAttribute(t,d,u,s)}else{let s=r,d=e[++i];QB(s)?n.setProperty(t,s,d):n.setAttribute(t,s,d),i++}}return i}function Uk(n){return n===3||n===4||n===6}function QB(n){return n.charCodeAt(0)===64}function ff(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?ak(n,e,r,null,t[++i]):ak(n,e,r,null,null))}}return n}function ak(n,t,e,i,r){let s=0,d=n.length;if(t===-1)d=-1;else for(;s<n.length;){let u=n[s++];if(typeof u=="number"){if(u===t){d=-1;break}else if(u>t){d=s-1;break}}}for(;s<n.length;){let u=n[s];if(typeof u=="number")break;if(u===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}d!==-1&&(n.splice(d,0,t),s=d+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function jk(n){return n!==Sm}function fv(n){return n&32767}function XB(n){return n>>16}function hv(n,t){let e=XB(n),i=t;for(;e>0;)i=i[G0],e--;return i}var jP=!0;function _v(n){let t=jP;return jP=n,t}var ZB=256,Wk=ZB-1,zk=5,eU=0,zl={};function tU(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(q0)&&(i=e[q0]),i==null&&(i=e[q0]=eU++);let r=i&Wk,s=1<<r;t.data[n+(r>>zk)]|=s}function vv(n,t){let e=qk(n,t);if(e!==-1)return e;let i=t[Ln];i.firstCreatePass&&(n.injectorIndex=t.length,IP(i.data,n),IP(t,null),IP(i.blueprint,null));let r=rw(n,t),s=n.injectorIndex;if(jk(r)){let d=fv(r),u=hv(r,t),h=u[Ln].data;for(let v=0;v<8;v++)t[s+v]=u[d+v]|h[d+v]}return t[s+8]=r,s}function IP(n,t){n.push(0,0,0,0,0,0,0,0,t)}function qk(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function rw(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=Jk(r),i===null)return Sm;if(e++,r=r[G0],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Sm}function WP(n,t,e){tU(n,t,e)}function nU(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let s=e[r];if(Uk(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(s===t)return e[r+1];r=r+2}}}return null}function Hk(n,t,e){if(e&8||n!==void 0)return n;G1(t,"NodeInjector")}function Gk(n,t,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=n[Id],s=xa(void 0);try{return r?r.get(t,i,e&8):XS(t,i,e&8)}finally{xa(s)}}return Hk(i,t,e)}function $k(n,t,e,i=0,r){if(n!==null){if(t[Nn]&2048&&!(i&2)){let d=sU(n,t,e,i,zl);if(d!==zl)return d}let s=Yk(n,t,e,i,zl);if(s!==zl)return s}return Gk(t,e,i,r)}function Yk(n,t,e,i,r){let s=oU(e);if(typeof s=="function"){if(!CP(t,n,i))return i&1?Hk(r,e,i):Gk(t,e,i,r);try{let d;if(d=s(i),d==null&&!(i&8))G1(e);else return d}finally{bP()}}else if(typeof s=="number"){let d=null,u=qk(n,t),h=Sm,v=i&1?t[Es][ws]:null;for((u===-1||i&4)&&(h=u===-1?rw(n,t):t[u+8],h===Sm||!lk(i,!1)?u=-1:(d=t[Ln],u=fv(h),t=hv(h,t)));u!==-1;){let C=t[Ln];if(sk(s,u,C.data)){let O=iU(u,t,e,d,i,v);if(O!==zl)return O}h=t[u+8],h!==Sm&&lk(i,t[Ln].data[u+8]===v)&&sk(s,u,t)?(d=C,u=fv(h),t=hv(h,t)):u=-1}}return r}function iU(n,t,e,i,r,s){let d=t[Ln],u=d.data[n+8],h=i==null?Ad(u)&&jP:i!=d&&(u.type&3)!==0,v=r&1&&s===u,C=rU(u,d,e,h,v);return C!==null?xv(t,d,C,u,r):zl}function rU(n,t,e,i,r){let s=n.providerIndexes,d=t.data,u=s&1048575,h=n.directiveStart,v=n.directiveEnd,C=s>>20,O=i?u:u+C,T=r?u+C:v;for(let w=O;w<T;w++){let A=d[w];if(w<h&&e===A||w>=h&&A.type===e)return w}if(r){let w=d[h];if(w&&jl(w)&&w.type===e)return h}return null}function xv(n,t,e,i,r){let s=n[e],d=t.data;if(s instanceof Z0){let u=s;if(u.resolving){let w=vT(d[e]);throw QS(w)}let h=_v(u.canSeeViewProviders);u.resolving=!0;let v=d[e].type||d[e],C,O=u.injectImpl?xa(u.injectImpl):null,T=CP(n,i,0);try{s=n[e]=u.factory(void 0,r,d,n,i),t.firstCreatePass&&e>=i.directiveStart&&GB(e,d[e],t)}finally{O!==null&&xa(O),_v(h),u.resolving=!1,bP()}}return s}function oU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(q0)?n[q0]:void 0;return typeof t=="number"?t>=0?t&Wk:aU:t}function sk(n,t,e){let i=1<<n;return!!(e[t+(n>>zk)]&i)}function lk(n,t){return!(n&2)&&!(n&1&&t)}var X0=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return $k(this._tNode,this._lView,t,j0(i),e)}};function aU(){return new X0(ea(),ri())}function Kr(n){return Cf(()=>{let t=n.prototype.constructor,e=t[qg]||zP(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[qg]||zP(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function zP(n){return WS(n)?()=>{let t=zP(No(n));return t&&t()}:Ed(n)}function sU(n,t,e,i,r){let s=n,d=t;for(;s!==null&&d!==null&&d[Nn]&2048&&!vm(d);){let u=Yk(s,d,e,i|2,zl);if(u!==zl)return u;let h=s.parent;if(!h){let v=d[sP];if(v){let C=v.get(e,zl,i);if(C!==zl)return C}h=Jk(d),d=d[G0]}s=h}return r}function Jk(n){let t=n[Ln],e=t.type;return e===2?t.declTNode:e===1?n[ws]:null}function bf(n){return nU(ea(),n)}function lU(){return Ov(ea(),ri())}function Ov(n,t){return new as(rl(n,t))}var as=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=lU}return n})();function Kk(n){return(n.flags&128)===128}var ow=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ow||{}),Qk=new Map,cU=0;function dU(){return cU++}function pU(n){Qk.set(n[Zg],n)}function qP(n){Qk.delete(n[Zg])}var ck="__ngContext__";function Pm(n,t){Ul(t)?(n[ck]=t[Zg],pU(t)):n[ck]=t}function Xk(n){return eI(n[hm])}function Zk(n){return eI(n[Ps])}function eI(n){for(;n!==null&&!il(n);)n=n[Ps];return n}var mU;function aw(n){mU=n}var Tv=new Gt("",{factory:()=>uU}),uU="ng";var kv=new Gt(""),Mf=new Gt("",{providedIn:"platform",factory:()=>"unknown"}),Iv=new Gt(""),Dv=new Gt("",{factory:()=>ct(gr).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tI=!1,nI=new Gt("",{factory:()=>tI});var sw=new Gt("");var gU=(n,t,e,i)=>{};function fU(n,t,e,i){gU(n,t,e,i)}function lw(n){return(n.flags&32)===32}var hU=()=>null;function iI(n,t,e=!1){return hU(n,t,e)}function rI(n,t){let e=n.contentQueries;if(e!==null){let i=Kn(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],d=e[r+1];if(d!==-1){let u=n.data[d];yP(s),u.contentQueries(2,t[d],d)}}}finally{Kn(i)}}}function HP(n,t,e){yP(0);let i=Kn(null);try{t(n,e)}finally{Kn(i)}}function cw(n,t,e){if(lP(t)){let i=Kn(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let d=r;d<s;d++){let u=n.data[d];if(u.contentQueries){let h=e[d];u.contentQueries(1,h,d)}}}finally{Kn(i)}}}var sl=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(sl||{});var lv;function _U(){if(lv===void 0&&(lv=null,Vo.trustedTypes))try{lv=Vo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lv}function dk(n){return _U()?.createScriptURL(n)||n}var yv=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${z1})`}};function Om(n){return n instanceof yv?n.changingThisBreaksApplicationSecurity:n}function dw(n,t){let e=oI(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${z1})`)}return e===t}function oI(n){return n instanceof yv&&n.getTypeName()||null}var vU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function aI(n){return n=String(n),n.match(vU)?n:"unsafe:"+n}var xU=/^>|^->|<!--|-->|--!>|<!-$/g,yU=/(<|>)/g,CU="\u200B$1\u200B";function bU(n){return n.replace(xU,t=>t.replace(yU,CU))}function MU(n,t){return n.createText(t)}function SU(n,t,e){n.setValue(t,e)}function PU(n,t){return n.createComment(bU(t))}function sI(n,t,e){return n.createElement(t,e)}function Cv(n,t,e,i,r){n.insertBefore(t,e,i,r)}function lI(n,t,e){n.appendChild(t,e)}function pk(n,t,e,i,r){i!==null?Cv(n,t,e,i,r):lI(n,t,e)}function wU(n,t,e,i){n.removeChild(null,t,e,i)}function EU(n,t,e){n.setAttribute(t,"style",e)}function OU(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function cI(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&KB(n,t,i),r!==null&&OU(n,t,r),s!==null&&EU(n,t,s)}var Av=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Av||{});function Cr(n){let t=pI();return t?t.sanitize(Av.URL,n)||"":dw(n,"URL")?Om(n):aI(Vl(n))}function dI(n){let t=pI();if(t)return dk(t.sanitize(Av.RESOURCE_URL,n)||"");if(dw(n,"ResourceURL"))return dk(Om(n));throw new yt(904,!1)}function TU(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?dI:Cr}function pw(n,t,e){return TU(t,e)(n)}function pI(){let n=ri();return n&&n[Bl].sanitizer}function mw(n){return n.ownerDocument.defaultView}function Sf(n){return n.ownerDocument}function mI(n){return n instanceof Function?n():n}function kU(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var uI="ng-template";function IU(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&kU(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(uw(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function uw(n){return n.type===4&&n.value!==uI}function DU(n,t,e){let i=n.type===4&&!e?uI:n.value;return t===i}function AU(n,t,e){let i=4,r=n.attrs,s=r!==null?NU(r):0,d=!1;for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="number"){if(!d&&!ol(i)&&!ol(h))return!1;if(d&&ol(h))continue;d=!1,i=h|i&1;continue}if(!d)if(i&4){if(i=2|i&1,h!==""&&!DU(n,h,e)||h===""&&t.length===1){if(ol(i))return!1;d=!0}}else if(i&8){if(r===null||!IU(n,r,h,e)){if(ol(i))return!1;d=!0}}else{let v=t[++u],C=RU(h,r,uw(n),e);if(C===-1){if(ol(i))return!1;d=!0;continue}if(v!==""){let O;if(C>s?O="":O=r[C+1].toLowerCase(),i&2&&v!==O){if(ol(i))return!1;d=!0}}}}return ol(i)||d}function ol(n){return(n&1)===0}function RU(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let d=t[r];if(d===n)return r;if(d===3||d===6)s=!0;else if(d===1||d===2){let u=t[++r];for(;typeof u=="string";)u=t[++r];continue}else{if(d===4)break;if(d===0){r+=4;continue}}r+=s?1:2}return-1}else return LU(t,n)}function FU(n,t,e=!1){for(let i=0;i<t.length;i++)if(AU(n,t[i],e))return!0;return!1}function NU(n){for(let t=0;t<n.length;t++){let e=n[t];if(Uk(e))return t}return n.length}function LU(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function mk(n,t){return n?":not("+t.trim()+")":t}function VU(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let d=n[e];if(typeof d=="string")if(i&2){let u=n[++e];r+="["+d+(u.length>0?'="'+u+'"':"")+"]"}else i&8?r+="."+d:i&4&&(r+=" "+d);else r!==""&&!ol(d)&&(t+=mk(s,r),r=""),i=d,s=s||!ol(i);e++}return r!==""&&(t+=mk(s,r)),t}function BU(n){return n.map(VU).join(",")}function UU(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!ol(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var ta={};function gw(n,t,e,i,r,s,d,u,h,v,C){let O=vo+i,T=O+r,w=jU(O,T),A=typeof v=="function"?v():v;return w[Ln]={type:n,blueprint:w,template:e,queries:null,viewQuery:u,declTNode:t,data:w.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof d=="function"?d():d,firstChild:null,schemas:h,consts:A,incompleteFirstPass:!1,ssrId:C}}function jU(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:ta);return e}function WU(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=gw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function fw(n,t,e,i,r,s,d,u,h,v,C){let O=t.blueprint.slice();return O[nl]=r,O[Nn]=i|4|128|8|64|1024,(v!==null||n&&n[Nn]&2048)&&(O[Nn]|=2048),mP(O),O[Lo]=O[G0]=n,O[Xo]=e,O[Bl]=d||n&&n[Bl],O[yr]=u||n&&n[yr],O[Id]=h||n&&n[Id]||null,O[ws]=s,O[Zg]=dU(),O[Xg]=C,O[sP]=v,O[Es]=t.type==2?n[Es]:O,O}function zU(n,t,e){let i=rl(t,n),r=WU(e),s=n[Bl].rendererFactory,d=hw(n,fw(n,r,null,gI(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=d}function gI(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function fI(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function hw(n,t){return n[hm]?n[aP][Ps]=t:n[hm]=t,n[aP]=t,t}function c(n=1){hI(Zo(),ri(),Wl()+n,!1)}function hI(n,t,e,i){if(!i)if((t[Nn]&3)===3){let s=n.preOrderCheckHooks;s!==null&&pv(t,s,e)}else{let s=n.preOrderHooks;s!==null&&mv(t,s,0,e)}Fd(e)}var Rv=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rv||{});function GP(n,t,e,i){let r=Kn(null);try{let[s,d,u]=n.inputs[e],h=null;(d&Rv.SignalBased)!==0&&(h=t[s][va]),h!==null&&h.transformFn!==void 0?i=h.transformFn(i):u!==null&&(i=u.call(t,i)),n.setInput!==null?n.setInput(t,h,i,e,s):Rk(t,h,s,i)}finally{Kn(r)}}var ql=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ql||{}),qU;function _w(n,t){return qU(n,t)}var wm=new Set,Fv=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Fv||{}),Wc=new Gt(""),uk=new Set;function ip(n){uk.has(n)||(uk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})(),_I=[0,1,2,3],vI=(()=>{class n{ngZone=ct(Jr);scheduler=ct(Td);errorHandler=ct(Ll,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){ct(Wc,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Ki(Ti.AfterRenderHooksStart),this.executing=!0;for(let i of _I)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Ki(Ti.AfterRenderHooksEnd)}register(e){let{view:i}=e;i!==void 0?((i[K0]??=[]).push(e),xm(i),i[Nn]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Fv.AFTER_NEXT_RENDER,e):e()}static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})(),bv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,d=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=d,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[K0];t&&(this.view[K0]=t.filter(e=>e!==this))}};function Pf(n,t){let e=t?.injector??ct(Qo);return ip("NgAfterNextRender"),GU(n,e,t,!0)}function HU(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function GU(n,t,e,i){let r=t.get(vw);r.impl??=t.get(vI);let s=t.get(Wc,null,{optional:!0}),d=e?.manualCleanup!==!0?t.get(ks):null,u=t.get(sv,null,{optional:!0}),h=new bv(r.impl,HU(n),u?.view,i,d,s?.snapshot(null));return r.impl.register(h),h}var $U=new Gt("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:ct(Dr)})});function xI(n,t,e){let i=n.get($U);if(Array.isArray(t))for(let r of t)i.queue.add(r),e?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(n)}function YU(n,t){for(let[e,i]of t)xI(n,i.animateFns)}function gk(n,t,e,i){let r=n?.[tf]?.enter;t!==null&&r&&r.has(e.index)&&YU(i,r)}function Mm(n,t,e,i,r,s,d,u){if(r!=null){let h,v=!1;il(r)?h=r:Ul(r)&&(v=!0,r=r[nl]);let C=Os(r);n===0&&i!==null?(gk(u,i,s,e),d==null?lI(t,i,C):Cv(t,i,C,d||null,!0)):n===1&&i!==null?(gk(u,i,s,e),Cv(t,i,C,d||null,!0)):n===2?fk(u,s,e,O=>{wU(t,C,v,O)}):n===3&&fk(u,s,e,()=>{t.destroyNode(C)}),h!=null&&sj(t,n,e,h,s,i,d)}}function JU(n,t){yI(n,t),t[nl]=null,t[ws]=null}function KU(n,t,e,i,r,s){i[nl]=r,i[ws]=t,Nv(n,i,e,1,r,s)}function yI(n,t){t[Bl].changeDetectionScheduler?.notify(9),Nv(n,t,t[yr],2,null,null)}function QU(n){let t=n[hm];if(!t)return DP(n[Ln],n);for(;t;){let e=null;if(Ul(t))e=t[hm];else{let i=t[La];i&&(e=i)}if(!e){for(;t&&!t[Ps]&&t!==n;)Ul(t)&&DP(t[Ln],t),t=t[Lo];t===null&&(t=n),Ul(t)&&DP(t[Ln],t),e=t&&t[Ps]}t=e}}function xw(n,t){let e=n[rf],i=e.indexOf(t);e.splice(i,1)}function CI(n,t){if(Q0(t))return;let e=t[yr];e.destroyNode&&Nv(n,t,e,3,null,null),QU(t)}function DP(n,t){if(Q0(t))return;let e=Kn(null);try{t[Nn]&=-129,t[Nn]|=256,t[os]&&Fg(t[os]),ej(n,t),ZU(n,t),t[Ln].type===1&&t[yr].destroy();let i=t[$0];if(i!==null&&il(t[Lo])){i!==t[Lo]&&xw(i,t);let r=t[J0];r!==null&&r.detachView(n)}qP(t)}finally{Kn(e)}}function fk(n,t,e,i){let r=n?.[tf];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);n&&wm.add(n),xI(e,()=>{if(r.leave&&r.leave.has(t.index)){let d=r.leave.get(t.index),u=[];if(d){for(let h=0;h<d.animateFns.length;h++){let v=d.animateFns[h],{promise:C}=v();u.push(C)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(u),XU(n,i)}else n&&wm.delete(n),i(!1)},r)}function XU(n,t){let e=n[tf]?.running;if(e){e.then(()=>{n[tf].running=void 0,wm.delete(n),t(!0)});return}t(!1)}function ZU(n,t){let e=n.cleanup,i=t[fm];if(e!==null)for(let d=0;d<e.length-1;d+=2)if(typeof e[d]=="string"){let u=e[d+3];u>=0?i[u]():i[-u].unsubscribe(),d+=2}else{let u=i[e[d+1]];e[d].call(u)}i!==null&&(t[fm]=null);let r=t[Nc];if(r!==null){t[Nc]=null;for(let d=0;d<r.length;d++){let u=r[d];u()}}let s=t[ef];if(s!==null){t[ef]=null;for(let d of s)d.destroy()}}function ej(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof Z0)){let s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){let u=r[s[d]],h=s[d+1];Ki(Ti.LifecycleHookStart,u,h);try{h.call(u)}finally{Ki(Ti.LifecycleHookEnd,u,h)}}else{Ki(Ti.LifecycleHookStart,r,s);try{s.call(r)}finally{Ki(Ti.LifecycleHookEnd,r,s)}}}}}function tj(n,t,e){return nj(n,t.parent,e)}function nj(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[nl];if(Ad(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===sl.None||r===sl.Emulated)return null}return rl(i,e)}function ij(n,t,e){return oj(n,t,e)}function rj(n,t,e){return n.type&40?rl(n,e):null}var oj=rj,hk;function yw(n,t,e,i){let r=tj(n,i,t),s=t[yr],d=i.parent||t[ws],u=ij(d,i,t);if(r!=null)if(Array.isArray(e))for(let h=0;h<e.length;h++)pk(s,r,e[h],u,!1);else pk(s,r,e,u,!1);hk!==void 0&&hk(s,i,t,e,r)}function uf(n,t){if(t!==null){let e=t.type;if(e&3)return rl(t,n);if(e&4)return $P(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return uf(n,i);{let r=n[t.index];return il(r)?$P(-1,r):Os(r)}}else{if(e&128)return uf(n,t.next);if(e&32)return _w(t,n)()||Os(n[t.index]);{let i=bI(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Od(n[Es]);return uf(r,i)}else return uf(n,t.next)}}}return null}function bI(n,t){if(t!==null){let i=n[Es][ws],r=t.projection;return i.projection[r]}return null}function $P(n,t){let e=La+n+1;if(e<t.length){let i=t[e],r=i[Ln].firstChild;if(r!==null)return uf(i,r)}return t[Dd]}function Cw(n,t,e,i,r,s,d){for(;e!=null;){let u=i[Id];if(e.type===128){e=e.next;continue}let h=i[e.index],v=e.type;if(d&&t===0&&(h&&Pm(Os(h),i),e.flags|=2),!lw(e))if(v&8)Cw(n,t,e.child,i,r,s,!1),Mm(t,n,u,r,h,e,s,i);else if(v&32){let C=_w(e,i),O;for(;O=C();)Mm(t,n,u,r,O,e,s,i);Mm(t,n,u,r,h,e,s,i)}else v&16?aj(n,t,i,e,r,s):Mm(t,n,u,r,h,e,s,i);e=d?e.projectionNext:e.next}}function Nv(n,t,e,i,r,s){Cw(e,i,n.firstChild,t,r,s,!1)}function aj(n,t,e,i,r,s){let d=e[Es],h=d[ws].projection[i.projection];if(Array.isArray(h))for(let v=0;v<h.length;v++){let C=h[v];Mm(t,n,e[Id],r,C,i,s,e)}else{let v=h,C=d[Lo];Kk(i)&&(v.flags|=128),Cw(n,t,v,C,r,s,!0)}}function sj(n,t,e,i,r,s,d){let u=i[Dd],h=Os(i);u!==h&&Mm(t,n,e,s,u,r,d);for(let v=La;v<i.length;v++){let C=i[v];Nv(C[Ln],C,n,t,s,u)}}function lj(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:ql.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ql.Important),n.setStyle(e,i,r,s))}}function MI(n,t,e,i,r){let s=Wl(),d=i&2;try{Fd(-1),d&&t.length>vo&&hI(n,t,vo,!1);let u=d?Ti.TemplateUpdateStart:Ti.TemplateCreateStart;Ki(u,r,e),e(i,r)}finally{Fd(s);let u=d?Ti.TemplateUpdateEnd:Ti.TemplateCreateEnd;Ki(u,r,e)}}function Lv(n,t,e){fj(n,t,e),(e.flags&64)===64&&hj(n,t,e)}function bw(n,t,e=rl){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let d=i[s+1],u=d===-1?e(t,n):n[d];n[r++]=u}}}function cj(n,t,e,i){let s=i.get(nI,tI)||e===sl.ShadowDom||e===sl.ExperimentalIsolatedShadowDom,d=n.selectRootElement(t,s);return dj(d),d}function dj(n){pj(n)}var pj=()=>null;function mj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function SI(n,t,e,i,r,s){let d=t[Ln];if(Sw(n,d,t,e,i)){Ad(n)&&gj(t,n.index);return}n.type&3&&(e=mj(e)),uj(n,t,e,i,r,s)}function uj(n,t,e,i,r,s){if(n.type&3){let d=rl(n,t);i=s!=null?s(i,n.value||"",e):i,r.setProperty(d,e,i)}else n.type&12}function gj(n,t){let e=Ts(t,n);e[Nn]&16||(e[Nn]|=64)}function fj(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Ad(e)&&zU(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||vv(e,t);let s=e.initialInputs;for(let d=i;d<r;d++){let u=n.data[d],h=xv(t,n,d,e);if(Pm(h,t),s!==null&&yj(t,d-i,h,u,e,s),jl(u)){let v=Ts(e.index,t);v[Xo]=xv(t,n,d,e)}}}function hj(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,d=GT();try{Fd(s);for(let u=i;u<r;u++){let h=n.data[u],v=t[u];nv(u),(h.hostBindings!==null||h.hostVars!==0||h.hostAttrs!==null)&&_j(h,v)}}finally{Fd(-1),nv(d)}}function _j(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Mw(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];FU(t,s.selectors,!1)&&(i??=[],jl(s)?i.unshift(s):i.push(s))}return i}function vj(n,t,e,i,r,s){let d=rl(n,t);xj(t[yr],d,s,n.value,e,i,r)}function xj(n,t,e,i,r,s,d){if(s==null)n.removeAttribute(t,r,e);else{let u=d==null?Vl(s):d(s,i||"",r);n.setAttribute(t,r,u,e)}}function yj(n,t,e,i,r,s){let d=s[t];if(d!==null)for(let u=0;u<d.length;u+=2){let h=d[u],v=d[u+1];GP(i,e,h,v)}}function PI(n,t,e,i,r){let s=vo+e,d=t[Ln],u=r(d,t,n,i,e);t[s]=u,ym(n,!0);let h=n.type===2;return h?(cI(t[yr],u,n),(RT()===0||_m(n))&&Pm(u,t),FT()):Pm(u,t),av()&&(!h||!lw(n))&&yw(d,t,u,n),n}function wI(n){let t=n;return hP()?jT():(t=t.parent,ym(t,!1)),t}function Cj(n,t){let e=n[Id];if(!e)return;let i;try{i=e.get(Is,null)}catch{i=null}i?.(t)}function Sw(n,t,e,i,r){let s=n.inputs?.[i],d=n.hostDirectiveInputs?.[i],u=!1;if(d)for(let h=0;h<d.length;h+=2){let v=d[h],C=d[h+1],O=t.data[v];GP(O,e[v],C,r),u=!0}if(s)for(let h of s){let v=e[h],C=t.data[h];GP(C,v,i,r),u=!0}return u}function bj(n,t){let e=Ts(t,n),i=e[Ln];Mj(i,e);let r=e[nl];r!==null&&e[Xg]===null&&(e[Xg]=iI(r,e[Id])),Ki(Ti.ComponentStart);try{Pw(i,e,e[Xo])}finally{Ki(Ti.ComponentEnd,e[Xo])}}function Mj(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Pw(n,t,e){iv(t);try{let i=n.viewQuery;i!==null&&HP(1,i,e);let r=n.template;r!==null&&MI(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[J0]?.finishViewCreation(n),n.staticContentQueries&&rI(n,t),n.staticViewQueries&&HP(2,n.viewQuery,e);let s=n.components;s!==null&&Sj(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Nn]&=-5,rv()}}function Sj(n,t){for(let e=0;e<t.length;e++)bj(n,t[e])}function Pj(n,t,e,i){let r=Kn(null);try{let s=t.tView,u=n[Nn]&4096?4096:16,h=fw(n,s,e,u,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),v=n[t.index];h[$0]=v;let C=n[J0];return C!==null&&(h[J0]=C.createEmbeddedView(s)),Pw(s,h,e),h}finally{Kn(r)}}function _k(n,t){return!t||t.firstChild===null||Kk(n)}function hf(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(Os(s)),il(s)&&EI(s,i);let d=e.type;if(d&8)hf(n,t,e.child,i);else if(d&32){let u=_w(e,t),h;for(;h=u();)i.push(h)}else if(d&16){let u=bI(t,e);if(Array.isArray(u))i.push(...u);else{let h=Od(t[Es]);hf(h[Ln],h,u,i,!0)}}e=r?e.projectionNext:e.next}return i}function EI(n,t){for(let e=La;e<n.length;e++){let i=n[e],r=i[Ln].firstChild;r!==null&&hf(i[Ln],i,r,t)}n[Dd]!==n[nl]&&t.push(n[Dd])}function OI(n){if(n[K0]!==null){for(let t of n[K0])t.impl.addSequence(t);n[K0].length=0}}var TI=[];function wj(n){return n[os]??Ej(n)}function Ej(n){let t=TI.pop()??Object.create(Tj);return t.lView=n,t}function Oj(n){n.lView[os]!==n&&(n.lView=null,TI.push(n))}var Tj=Tt(me({},Dg),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{xm(n.lView)},consumerOnSignalRead(){this.lView[os]=this}});function kj(n){let t=n[os]??Object.create(Ij);return t.lView=n,t}var Ij=Tt(me({},Dg),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Od(n.lView);for(;t&&!kI(t[Ln]);)t=Od(t);t&&uP(t)},consumerOnSignalRead(){this.lView[os]=this}});function kI(n){return n.type!==2}function II(n){if(n[ef]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[ef])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[Nn]&8192)}}var Dj=100;function DI(n,t=0){let i=n[Bl].rendererFactory,r=!1;r||i.begin?.();try{Aj(n,t)}finally{r||i.end?.()}}function Aj(n,t){let e=_P();try{vP(!0),YP(n,t);let i=0;for(;af(n);){if(i===Dj)throw new yt(103,!1);i++,YP(n,1)}}finally{vP(e)}}function Rj(n,t,e,i){if(Q0(t))return;let r=t[Nn],s=!1,d=!1;iv(t);let u=!0,h=null,v=null;s||(kI(n)?(v=wj(t),h=Rg(v)):r1()===null?(u=!1,v=kj(t),h=Rg(v)):t[os]&&(Fg(t[os]),t[os]=null));try{mP(t),zT(n.bindingStartIndex),e!==null&&MI(n,t,e,2,i);let C=(r&3)===3;if(!s)if(C){let w=n.preOrderCheckHooks;w!==null&&pv(t,w,null)}else{let w=n.preOrderHooks;w!==null&&mv(t,w,0,null),kP(t,0)}if(d||Fj(t),II(t),AI(t,0),n.contentQueries!==null&&rI(n,t),!s)if(C){let w=n.contentCheckHooks;w!==null&&pv(t,w)}else{let w=n.contentHooks;w!==null&&mv(t,w,1),kP(t,1)}Lj(n,t);let O=n.components;O!==null&&FI(t,O,0);let T=n.viewQuery;if(T!==null&&HP(2,T,i),!s)if(C){let w=n.viewCheckHooks;w!==null&&pv(t,w)}else{let w=n.viewHooks;w!==null&&mv(t,w,2),kP(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[K1]){for(let w of t[K1])w();t[K1]=null}s||(OI(t),t[Nn]&=-73)}catch(C){throw s||xm(t),C}finally{v!==null&&(o1(v,h),u&&Oj(v)),rv()}}function AI(n,t){for(let e=Xk(n);e!==null;e=Zk(e))for(let i=La;i<e.length;i++){let r=e[i];RI(r,t)}}function Fj(n){for(let t=Xk(n);t!==null;t=Zk(t)){if(!(t[Nn]&2))continue;let e=t[rf];for(let i=0;i<e.length;i++){let r=e[i];uP(r)}}}function Nj(n,t,e){Ki(Ti.ComponentStart);let i=Ts(t,n);try{RI(i,e)}finally{Ki(Ti.ComponentEnd,i[Xo])}}function RI(n,t){Z1(n)&&YP(n,t)}function YP(n,t){let i=n[Ln],r=n[Nn],s=n[os],d=!!(t===0&&r&16);if(d||=!!(r&64&&t===0),d||=!!(r&1024),d||=!!(s?.dirty&&a1(s)),d||=!1,s&&(s.dirty=!1),n[Nn]&=-9217,d)Rj(i,n,i.template,n[Xo]);else if(r&8192){let u=Kn(null);try{II(n),AI(n,1);let h=i.components;h!==null&&FI(n,h,1),OI(n)}finally{Kn(u)}}}function FI(n,t,e){for(let i=0;i<t.length;i++)Nj(n,t[i],e)}function Lj(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Fd(~r);else{let s=r,d=e[++i],u=e[++i];HT(d,s);let h=t[s];Ki(Ti.HostBindingsUpdateStart,h);try{u(2,h)}finally{Ki(Ti.HostBindingsUpdateEnd,h)}}}}finally{Fd(-1)}}function ww(n,t){let e=_P()?64:1088;for(n[Bl].changeDetectionScheduler?.notify(t);n;){n[Nn]|=e;let i=Od(n);if(vm(n)&&!i)return n;n=i}return null}function NI(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function Vj(n,t,e,i=!0){let r=t[Ln];if(Bj(r,t,n,e),i){let d=$P(e,n),u=t[yr],h=u.parentNode(n[Dd]);h!==null&&KU(r,n[ws],u,t,h,d)}let s=t[Xg];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function JP(n,t){if(n.length<=La)return;let e=La+t,i=n[e];if(i){let r=i[$0];r!==null&&r!==n&&xw(r,i),t>0&&(n[e-1][Ps]=i[Ps]);let s=Jg(n,La+t);JU(i[Ln],i);let d=s[J0];d!==null&&d.detachView(s[Ln]),i[Lo]=null,i[Ps]=null,i[Nn]&=-129}return i}function Bj(n,t,e,i){let r=La+i,s=e.length;i>0&&(e[r-1][Ps]=t),i<s-La?(t[Ps]=e[r],ZS(e,La+i,t)):(e.push(t),t[Ps]=null),t[Lo]=e;let d=t[$0];d!==null&&e!==d&&LI(d,t);let u=t[J0];u!==null&&u.insertView(n),ev(t),t[Nn]|=128}function LI(n,t){let e=n[rf],i=t[Lo];if(Ul(i))n[Nn]|=2;else{let r=i[Lo][Es];t[Es]!==r&&(n[Nn]|=2)}e===null?n[rf]=[t]:e.push(t)}var Nd=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[Ln];return hf(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Xo]}set context(t){this._lView[Xo]=t}get destroyed(){return Q0(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Lo];if(il(t)){let e=t[nf],i=e?e.indexOf(this):-1;i>-1&&(JP(t,i),Jg(e,i))}this._attachedToViewContainer=!1}CI(this._lView[Ln],this._lView)}onDestroy(t){gP(this._lView,t)}markForCheck(){ww(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Nn]&=-129}reattach(){ev(this._lView),this._lView[Nn]|=128}detectChanges(){this._lView[Nn]|=1024,DI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new yt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=vm(this._lView),e=this._lView[$0];e!==null&&!t&&xw(e,this._lView),yI(this._lView[Ln],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new yt(902,!1);this._appRef=t;let e=vm(this._lView),i=this._lView[$0];i!==null&&!e&&LI(i,this._lView),ev(this._lView)}};var rp=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Uj;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let s=Pj(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new Nd(s)}}return n})();function Uj(){return VI(ea(),ri())}function VI(n,t){return n.type&4?new rp(t,n,Ov(n,t)):null}function Ew(n,t,e,i,r){let s=n.data[t];if(s===null)s=jj(n,t,e,i,r),qT()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let d=UT();s.injectorIndex=d===null?-1:d.injectorIndex}return ym(s,!0),s}function jj(n,t,e,i,r){let s=fP(),d=hP(),u=d?s:s&&s.parent,h=n.data[t]=zj(n,u,e,t,i,r);return Wj(n,h,s,d),h}function Wj(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function zj(n,t,e,i,r,s){let d=t?t.injectorIndex:-1,u=0;return LT()&&(u|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:u,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qj=()=>null;function vk(n,t){return qj(n,t)}var BI=class{},Vv=class{},KP=class{resolveComponentFactory(t){throw new yt(917,!1)}},wf=class{static NULL=new KP},jc=class{},ll=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Hj()}return n})();function Hj(){let n=ri(),t=ea(),e=Ts(t.index,n);return(Ul(e)?e:n)[yr]}var UI=(()=>{class n{static \u0275prov=$e({token:n,providedIn:"root",factory:()=>null})}return n})();var uv={},QP=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){let r=this.injector.get(t,uv,i);return r!==uv||e===uv?r:this.parentInjector.get(t,e,i)}};function xk(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let d=0;d<t.length;d++){let u=t[d];if(typeof u=="number")s=u;else if(s==1)r=q1(r,u);else if(s==2){let h=u,v=t[++d];i=q1(i,h+": "+v+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function V(n,t=0){let e=ri();if(e===null)return it(n,t);let i=ea();return $k(i,e,No(n),t)}function Ow(){let n="invalid";throw new Error(n)}function jI(n,t,e,i,r){let s=i===null?null:{"":-1},d=r(n,e);if(d!==null){let u=d,h=null,v=null;for(let C of d)if(C.resolveHostDirectives!==null){[u,h,v]=C.resolveHostDirectives(d);break}Yj(n,t,e,u,s,h,v)}s!==null&&i!==null&&Gj(e,i,s)}function Gj(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new yt(-301,!1);i.push(t[r],s)}}function $j(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function Yj(n,t,e,i,r,s,d){let u=i.length,h=null;for(let T=0;T<u;T++){let w=i[T];h===null&&jl(w)&&(h=w,$j(n,e,T)),WP(vv(e,t),n,w.type)}eW(e,n.data.length,u),h?.viewProvidersResolver&&h.viewProvidersResolver(h);for(let T=0;T<u;T++){let w=i[T];w.providersResolver&&w.providersResolver(w)}let v=!1,C=!1,O=fI(n,t,u,null);u>0&&(e.directiveToIndex=new Map);for(let T=0;T<u;T++){let w=i[T];if(e.mergedAttrs=ff(e.mergedAttrs,w.hostAttrs),Kj(n,e,t,O,w),Zj(O,w,r),d!==null&&d.has(w)){let[I,L]=d.get(w);e.directiveToIndex.set(w.type,[O,I+e.directiveStart,L+e.directiveStart])}else(s===null||!s.has(w))&&e.directiveToIndex.set(w.type,O);w.contentQueries!==null&&(e.flags|=4),(w.hostBindings!==null||w.hostAttrs!==null||w.hostVars!==0)&&(e.flags|=64);let A=w.type.prototype;!v&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),v=!0),!C&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),C=!0),O++}Jj(n,e,s)}function Jj(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))yk(0,t,r,i),yk(1,t,r,i),bk(t,i,!1);else{let s=e.get(r);Ck(0,t,s,i),Ck(1,t,s,i),bk(t,i,!0)}}}function yk(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d;n===0?d=t.inputs??={}:d=t.outputs??={},d[s]??=[],d[s].push(i),WI(t,s)}}function Ck(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d=r[s],u;n===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[d]??=[],u[d].push(i,s),WI(t,d)}}function WI(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function bk(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||uw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let d=null,u=0;for(;u<i.length;){let h=i[u];if(h===0){u+=4;continue}else if(h===5){u+=2;continue}else if(typeof h=="number")break;if(!e&&r.hasOwnProperty(h)){let v=r[h];for(let C of v)if(C===t){d??=[],d.push(h,i[u+1]);break}}else if(e&&s.hasOwnProperty(h)){let v=s[h];for(let C=0;C<v.length;C+=2)if(v[C]===t){d??=[],d.push(v[C+1],i[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(d)}function Kj(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=Ed(r.type,!0)),d=new Z0(s,jl(r),V,null);n.blueprint[i]=d,e[i]=d,Qj(n,t,i,fI(n,e,r.hostVars,ta),r)}function Qj(n,t,e,i,r){let s=r.hostBindings;if(s){let d=n.hostBindingOpCodes;d===null&&(d=n.hostBindingOpCodes=[]);let u=~t.index;Xj(d)!=u&&d.push(u),d.push(e,i,s)}}function Xj(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function Zj(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;jl(t)&&(e[""]=n)}}function eW(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Tw(n,t,e,i,r,s,d,u){let h=t[Ln],v=h.consts,C=of(v,d),O=Ew(h,n,e,i,C);return s&&jI(h,t,O,of(v,u),r),O.mergedAttrs=ff(O.mergedAttrs,O.attrs),O.attrs!==null&&xk(O,O.attrs,!1),O.mergedAttrs!==null&&xk(O,O.mergedAttrs,!0),h.queries!==null&&h.queries.elementStart(h,O),O}function kw(n,t){Vk(n,t),lP(t)&&n.queries.elementEnd(t)}function Iw(n){return qI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zI(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function qI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ef(n,t,e){return n[t]=e}function tW(n,t){return n[t]}function Hl(n,t,e){if(e===ta)return!1;let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function _f(n,t,e,i){let r=Hl(n,t,e);return Hl(n,t+1,i)||r}function HI(n,t,e,i,r){let s=_f(n,t,e,i);return Hl(n,t+2,r)||s}function nW(n,t,e,i,r,s){let d=_f(n,t,e,i);return _f(n,t+2,r,s)||d}function AP(n,t,e){return function i(r){let s=Ad(n)?Ts(n.index,t):t;ww(s,5);let d=t[Xo],u=Mk(t,d,e,r),h=i.__ngNextListenerFn__;for(;h;)u=Mk(t,d,h,r)&&u,h=h.__ngNextListenerFn__;return u}}function Mk(n,t,e,i){let r=Kn(null);try{return Ki(Ti.OutputStart,t,e),e(i)!==!1}catch(s){return Cj(n,s),!1}finally{Ki(Ti.OutputEnd,t,e),Kn(r)}}function iW(n,t,e,i,r,s,d,u){let h=_m(n),v=!1,C=null;if(!i&&h&&(C=oW(t,e,s,n.index)),C!==null){let O=C.__ngLastListenerFn__||C;O.__ngNextListenerFn__=d,C.__ngLastListenerFn__=d,v=!0}else{let O=rl(n,e),T=i?i(O):O;fU(e,T,s,u);let w=r.listen(T,s,u);if(!rW(s)){let A=i?I=>i(Os(I[n.index])):n.index;GI(A,t,e,s,u,w,!1)}}return v}function rW(n){return n.startsWith("animation")||n.startsWith("transition")}function oW(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let d=r[s];if(d===e&&r[s+1]===i){let u=t[fm],h=r[s+2];return u&&u.length>h?u[h]:null}typeof d=="string"&&(s+=2)}return null}function GI(n,t,e,i,r,s,d){let u=t.firstCreatePass?AT(t):null,h=DT(e),v=h.length;h.push(r,s),u&&u.push(i,n,v,(v+1)*(d?-1:1))}function Sk(n,t,e,i,r,s){let d=t[e],u=t[Ln],v=u.data[e].outputs[i],O=d[v].subscribe(s);GI(n.index,u,t,r,s,O,!0)}var XP=Symbol("BINDING");var Mv=class extends wf{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Bc(t);return new ep(e,this.ngModule)}};function aW(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Rv.SignalBased)!==0};return r&&(s.transform=r),s})}function sW(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function lW(n,t,e){let i=t instanceof Dr?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new QP(e,i):e}function cW(n){let t=n.get(jc,null);if(t===null)throw new yt(407,!1);let e=n.get(UI,null),i=n.get(Td,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function dW(n,t){let e=$I(n);return sI(t,e,e==="svg"?cP:e==="math"?OT:null)}function $I(n){return(n.selectors[0][0]||"div").toLowerCase()}var ep=class extends Vv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=aW(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=sW(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=BU(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r,s,d){Ki(Ti.DynamicComponentStart);let u=Kn(null);try{let h=this.componentDef,v=pW(i,h,d,s),C=lW(h,r||this.ngModule,t),O=cW(C),T=O.rendererFactory.createRenderer(null,h),w=i?cj(T,i,h.encapsulation,C):dW(h,T),A=d?.some(Pk)||s?.some(B=>typeof B!="function"&&B.bindings.some(Pk)),I=fw(null,v,null,512|gI(h),null,null,O,T,C,null,iI(w,C,!0));I[vo]=w,iv(I);let L=null;try{let B=Tw(vo,I,2,"#host",()=>v.directiveRegistry,!0,0);cI(T,w,B),Pm(w,I),Lv(v,I,B),cw(v,B,I),kw(v,B),e!==void 0&&uW(B,this.ngContentSelectors,e),L=Ts(B.index,I),I[Xo]=L[Xo],Pw(v,I,null)}catch(B){throw L!==null&&qP(L),qP(I),B}finally{Ki(Ti.DynamicComponentEnd),rv()}return new Sv(this.componentType,I,!!A)}finally{Kn(u)}}};function pW(n,t,e,i){let r=n?["ng-version","21.0.5"]:UU(t.selectors[0]),s=null,d=null,u=0;if(e)for(let C of e)u+=C[XP].requiredVars,C.create&&(C.targetIdx=0,(s??=[]).push(C)),C.update&&(C.targetIdx=0,(d??=[]).push(C));if(i)for(let C=0;C<i.length;C++){let O=i[C];if(typeof O!="function")for(let T of O.bindings){u+=T[XP].requiredVars;let w=C+1;T.create&&(T.targetIdx=w,(s??=[]).push(T)),T.update&&(T.targetIdx=w,(d??=[]).push(T))}}let h=[t];if(i)for(let C of i){let O=typeof C=="function"?C:C.type,T=KS(O);h.push(T)}return gw(0,null,mW(s,d),1,u,h,null,null,null,[r],null)}function mW(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let i of n)i.create();if(e&2&&t)for(let i of t)i.update()}}function Pk(n){let t=n[XP].kind;return t==="input"||t==="twoWay"}var Sv=class extends BI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=Q1(e[Ln],vo),this.location=Ov(this._tNode,e),this.instance=Ts(this._tNode.index,e)[Xo],this.hostView=this.changeDetectorRef=new Nd(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=Sw(i,r[Ln],r,t,e);this.previousInputValues.set(t,e);let d=Ts(i.index,r);ww(d,1)}get injector(){return new X0(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function uW(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var $l=(()=>{class n{static __NG_ELEMENT_ID__=gW}return n})();function gW(){let n=ea();return hW(n,ri())}var fW=$l,YI=class extends fW{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Ov(this._hostTNode,this._hostLView)}get injector(){return new X0(this._hostTNode,this._hostLView)}get parentInjector(){let t=rw(this._hostTNode,this._hostLView);if(jk(t)){let e=hv(t,this._hostLView),i=fv(t),r=e[Ln].data[i+8];return new X0(r,e)}else return new X0(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=wk(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-La}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let d=vk(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(e||{},s,d);return this.insertImpl(u,r,_k(this._hostTNode,d)),u}createComponent(t,e,i,r,s,d,u){let h=t&&!WB(t),v;if(h)v=e;else{let L=e||{};v=L.index,i=L.injector,r=L.projectableNodes,s=L.environmentInjector||L.ngModuleRef,d=L.directives,u=L.bindings}let C=h?t:new ep(Bc(t)),O=i||this.parentInjector;if(!s&&C.ngModule==null){let B=(h?O:this.parentInjector).get(Dr,null);B&&(s=B)}let T=Bc(C.componentType??{}),w=vk(this._lContainer,T?.id??null),A=w?.firstChild??null,I=C.create(O,r,A,s,d,u);return this.insertImpl(I.hostView,v,_k(this._hostTNode,w)),I}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(TT(r)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let h=r[Lo],v=new YI(h,h[ws],h[Lo]);v.detach(v.indexOf(t))}}let s=this._adjustIndex(e),d=this._lContainer;return Vj(d,r,s,i),t.attachToViewContainerRef(),ZS(RP(d),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=wk(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=JP(this._lContainer,e);i&&(Jg(RP(this._lContainer),e),CI(i[Ln],i))}detach(t){let e=this._adjustIndex(t,-1),i=JP(this._lContainer,e);return i&&Jg(RP(this._lContainer),e)!=null?new Nd(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function wk(n){return n[nf]}function RP(n){return n[nf]||(n[nf]=[])}function hW(n,t){let e,i=t[n.index];return il(i)?e=i:(e=NI(i,t,null,n),t[n.index]=e,hw(t,e)),vW(e,t,n,i),new YI(e,n,t)}function _W(n,t){let e=n[yr],i=e.createComment(""),r=rl(t,n),s=e.parentNode(r);return Cv(e,s,i,e.nextSibling(r),!1),i}var vW=CW,xW=()=>!1;function yW(n,t,e){return xW(n,t,e)}function CW(n,t,e,i){if(n[Dd])return;let r;e.type&8?r=Os(i):r=_W(t,e),n[Dd]=r}var ZP=new Map,bW=new Set;async function JI(n){let t=ZP;ZP=new Map;let e=new Map;function i(s){let d=e.get(s);if(d)return d;let u=n(s).then(h=>MW(s,h));return e.set(s,u),u}let r=Array.from(t).map(async([s,d])=>{if(d.styleUrl&&d.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let u=[];d.templateUrl&&u.push(i(d.templateUrl).then(O=>{d.template=O}));let h=typeof d.styles=="string"?[d.styles]:d.styles??[];d.styles=h;let{styleUrl:v,styleUrls:C}=d;if(v&&(C=[v],d.styleUrl=void 0),C?.length){let O=Promise.all(C.map(T=>i(T))).then(T=>{h.push(...T),d.styleUrls=void 0});u.push(O)}await Promise.all(u),bW.delete(s)});await Promise.all(r)}function KI(){return ZP.size===0}async function MW(n,t){if(typeof t=="string")return t;if(t.status!==void 0&&t.status!==200)throw new yt(918,!1);return t.text()}var tp=class{},Bv=class{};var vf=class extends tp{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mv(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=JS(t);this._bootstrapComponents=mI(s.bootstrap),this._r3Injector=MP(t,e,[{provide:tp,useValue:this},{provide:wf,useValue:this.componentFactoryResolver},...i],Lc(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},xf=class extends Bv{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new vf(this.moduleType,t,[])}};function QI(n,t,e){return new vf(n,t,e,!1)}var Pv=class extends tp{injector;componentFactoryResolver=new Mv(this);instance=null;constructor(t){super();let e=new z0([...t.providers,{provide:tp,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],t.parent||Qg(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Tm(n,t,e=null){return new Pv({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var SW=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=nP(!1,e.type),r=i.length>0?Tm([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$e({token:n,providedIn:"environment",factory:()=>new n(it(Dr))})}return n})();function _e(n){return Cf(()=>{let t=XI(n),e=Tt(me({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ow.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(SW).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sl.Emulated,styles:n.styles||ya,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&ip("NgStandalone"),ZI(e);let i=n.dependencies;return e.directiveDefs=Ek(i,PW),e.pipeDefs=Ek(i,_T),e.id=OW(e),e})}function PW(n){return Bc(n)||KS(n)}function Or(n){return Cf(()=>({type:n.type,bootstrap:n.bootstrap||ya,declarations:n.declarations||ya,imports:n.imports||ya,exports:n.exports||ya,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wW(n,t){if(n==null)return kd;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,d,u,h;Array.isArray(r)?(u=r[0],s=r[1],d=r[2]??s,h=r[3]||null):(s=r,d=r,u=Rv.None,h=null),e[s]=[i,u,h],t[s]=d}return e}function EW(n){if(n==null)return kd;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function ui(n){return Cf(()=>{let t=XI(n);return ZI(t),t})}function Ld(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function XI(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||kd,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ya,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:wW(n.inputs,t),outputs:EW(n.outputs),debugInfo:null}}function ZI(n){n.features?.forEach(t=>t(n))}function Ek(n,t){return n?()=>{let e=typeof n=="function"?n():n,i=[];for(let r of e){let s=t(r);s!==null&&i.push(s)}return i}:null}function OW(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function TW(n){return Object.getPrototypeOf(n.prototype).constructor}function xo(n){let t=TW(n.type),e=!0,i=[n];for(;t;){let r;if(jl(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new yt(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let d=n;d.inputs=FP(n.inputs),d.declaredInputs=FP(n.declaredInputs),d.outputs=FP(n.outputs);let u=r.hostBindings;u&&RW(n,u);let h=r.viewQuery,v=r.contentQueries;if(h&&DW(n,h),v&&AW(n,v),kW(n,r),hT(n.outputs,r.outputs),jl(r)&&r.data.animation){let C=n.data;C.animation=(C.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let d=0;d<s.length;d++){let u=s[d];u&&u.ngInherit&&u(n),u===xo&&(e=!1)}}t=Object.getPrototypeOf(t)}IW(i)}function kW(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function IW(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=ff(r.hostAttrs,e=ff(e,r.hostAttrs))}}function FP(n){return n===kd?{}:n===ya?[]:n}function DW(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function AW(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function RW(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function FW(n,t,e,i,r,s,d,u){if(e.firstCreatePass){n.mergedAttrs=ff(n.mergedAttrs,n.attrs);let C=n.tView=gw(2,n,r,s,d,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),C.queries=e.queries.embeddedTView(n))}u&&(n.flags|=u),ym(n,!1);let h=LW(e,t,n,i);av()&&yw(e,t,h,n),Pm(h,t);let v=NI(h,t,h,n);t[i+vo]=v,hw(t,v),yW(v,n,t)}function NW(n,t,e,i,r,s,d,u,h,v,C){let O=e+vo,T;return t.firstCreatePass?(T=Ew(t,O,4,d||null,u||null),tv()&&jI(t,n,T,of(t.consts,v),Mw),Vk(t,T)):T=t.data[O],FW(T,n,t,e,i,r,s,h),_m(T)&&Lv(t,n,T),v!=null&&bw(n,T,C),T}function b(n,t,e,i,r,s,d,u){let h=ri(),v=Zo(),C=of(v.consts,s);return NW(h,v,n,t,e,i,r,C,void 0,d,u),b}var LW=VW;function VW(n,t,e,i){return cf(!0),t[yr].createComment("")}var Dw=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function e6(n){return typeof n=="function"&&n[va]!==void 0}function Aw(n){return e6(n)&&typeof n.set=="function"}var Uv=new Gt(""),jv=new Gt(""),Of=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,oP()&&(this._destroyRef=ct(ks,{optional:!0})??void 0),Rw||(n6(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Jr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),e()},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||n)(it(Jr),it(t6),it(jv))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),t6=(()=>{class n{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Rw?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function n6(n){Rw=n}var Rw;function Vd(n){return!!n&&typeof n.then=="function"}function Fw(n){return!!n&&typeof n.subscribe=="function"}var Nw=new Gt("");function Wv(n){return H0([{provide:Nw,multi:!0,useValue:n}])}var Lw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=ct(Nw,{optional:!0})??[];injector=ct(Qo);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=_o(this.injector,r);if(Vd(s))e.push(s);else if(Fw(s)){let d=new Promise((u,h)=>{s.subscribe({complete:u,error:h})});e.push(d)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zv=new Gt("");function i6(){mS(()=>{let n="";throw new yt(600,n)})}function r6(n){return n.isBoundToModule}var BW=10;function Vw(n,t){return Array.isArray(t)?t.reduce(Vw,n):me(me({},n),t)}var Yl=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ct(Is);afterRenderManager=ct(vw);zonelessEnabled=ct(df);rootEffectScheduler=ct(TP);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Oi;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ct(Uc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ii(e=>!e))}constructor(){ct(Wc,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=ct(Dr);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Qo.NULL){return this._injector.get(Jr).run(()=>{Ki(Ti.BootstrapComponentStart);let d=e instanceof Vv;if(!this._injector.get(Lw).done){let A="";throw new yt(405,A)}let h;d?h=e:h=this._injector.get(wf).resolveComponentFactory(e),this.componentTypes.push(h.componentType);let v=r6(h)?void 0:this._injector.get(tp),C=i||h.selector,O=h.create(r,[],C,v),T=O.location.nativeElement,w=O.injector.get(Uv,null);return w?.registerApplication(T),O.onDestroy(()=>{this.detachView(O.hostView),gf(this.components,O),w?.unregisterApplication(T)}),this._loadComponent(O),Ki(Ti.BootstrapComponentEnd,O),O})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ki(Ti.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ki(Ti.ChangeDetectionEnd),new yt(101,!1);let e=Kn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Kn(e),this.afterTick.next(),Ki(Ti.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jc,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<BW;){Ki(Ti.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ki(Ti.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!af(r))continue;let s=i&&!this.zonelessEnabled?0:1;DI(r,s),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>af(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;gf(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(zv,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>gf(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new yt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gf(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ca(n,t,e,i){let r=ri(),s=sf();if(Hl(r,s,t)){let d=Zo(),u=ov();vj(u,r,n,t,e,i)}return Ca}var QBe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function m(n,t,e){let i=ri(),r=sf();if(Hl(i,r,t)){let s=Zo(),d=ov();SI(d,i,n,t,i[yr],e)}return m}function ew(n,t,e,i,r){Sw(t,n,e,r?"class":"style",i)}function o(n,t,e,i){let r=ri(),s=r[Ln],d=n+vo,u=s.firstCreatePass?Tw(d,r,2,t,Mw,tv(),e,i):s.data[d];if(PI(u,r,n,t,UW),_m(u)){let h=r[Ln];Lv(h,r,u),cw(h,u,r)}return i!=null&&bw(r,u),o}function a(){let n=Zo(),t=ea(),e=wI(t);return n.firstCreatePass&&kw(n,e),VT(e)&&BT(),NT(),e.classesWithoutHost!=null&&YB(e)&&ew(n,e,ri(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&JB(e)&&ew(n,e,ri(),e.stylesWithoutHost,!1),a}function y(n,t,e,i){return o(n,t,e,i),a(),y}var UW=(n,t,e,i,r)=>(cf(!0),sI(t[yr],i,XT()));function on(n,t,e){let i=ri(),r=i[Ln],s=n+vo,d=r.firstCreatePass?Tw(s,i,8,"ng-container",Mw,tv(),t,e):r.data[s];if(PI(d,i,n,"ng-container",jW),_m(d)){let u=i[Ln];Lv(u,i,d),cw(u,d,i)}return e!=null&&bw(i,d),on}function an(){let n=Zo(),t=ea(),e=wI(t);return n.firstCreatePass&&kw(n,e),an}function Tf(n,t,e){return on(n,t,e),an(),Tf}var jW=(n,t,e,i,r)=>(cf(!0),PU(t[yr],""));function F(){return ri()}var mf=void 0;function WW(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var zW=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",mf,mf,mf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",WW],NP={};function ba(n){let t=qW(n),e=Ok(t);if(e)return e;let i=t.split("-")[0];if(e=Ok(i),e)return e;if(i==="en")return zW;throw new yt(701,!1)}function Ok(n){return n in NP||(NP[n]=Vo.ng&&Vo.ng.common&&Vo.ng.common.locales&&Vo.ng.common.locales[n]),NP[n]}var Tr=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Tr||{});function qW(n){return n.toLowerCase().replace(/_/g,"-")}var kf="en-US",HW="USD";var GW=kf;function o6(n){typeof n=="string"&&(GW=n.toLowerCase().replace(/_/g,"-"))}function x(n,t,e){let i=ri(),r=Zo(),s=ea();return a6(r,i,i[yr],s,n,t,e),x}function a6(n,t,e,i,r,s,d){let u=!0,h=null;if((i.type&3||d)&&(h??=AP(i,t,s),iW(i,n,t,d,e,r,s,h)&&(u=!1)),u){let v=i.outputs?.[r],C=i.hostDirectiveOutputs?.[r];if(C&&C.length)for(let O=0;O<C.length;O+=2){let T=C[O],w=C[O+1];h??=AP(i,t,s),Sk(i,t,T,w,r,h)}if(v&&v.length)for(let O of v)h??=AP(i,t,s),Sk(i,t,O,r,r,h)}}function p(n=1){return QT(n)}function km(n){let t=WT();return X1(t,vo+n)}function cv(n,t){return n<<17|t<<2}function np(n){return n>>17&32767}function $W(n){return(n&2)==2}function YW(n,t){return n&131071|t<<17}function tw(n){return n|2}function Em(n){return(n&131068)>>2}function LP(n,t){return n&-131069|t<<2}function JW(n){return(n&1)===1}function nw(n){return n|1}function KW(n,t,e,i,r,s){let d=s?t.classBindings:t.styleBindings,u=np(d),h=Em(d);n[i]=e;let v=!1,C;if(Array.isArray(e)){let O=e;C=O[1],(C===null||um(O,C)>0)&&(v=!0)}else C=e;if(r)if(h!==0){let T=np(n[u+1]);n[i+1]=cv(T,u),T!==0&&(n[T+1]=LP(n[T+1],i)),n[u+1]=YW(n[u+1],i)}else n[i+1]=cv(u,0),u!==0&&(n[u+1]=LP(n[u+1],i)),u=i;else n[i+1]=cv(h,0),u===0?u=i:n[h+1]=LP(n[h+1],i),h=i;v&&(n[i+1]=tw(n[i+1])),Tk(n,C,i,!0),Tk(n,C,i,!1),QW(t,C,n,i,s),d=cv(u,h),s?t.classBindings=d:t.styleBindings=d}function QW(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&um(s,t)>=0&&(e[i+1]=nw(e[i+1]))}function Tk(n,t,e,i){let r=n[e+1],s=t===null,d=i?np(r):Em(r),u=!1;for(;d!==0&&(u===!1||s);){let h=n[d],v=n[d+1];XW(h,t)&&(u=!0,n[d+1]=i?nw(v):tw(v)),d=i?np(v):Em(v)}u&&(n[e+1]=i?tw(r):nw(r))}function XW(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?um(n,t)>=0:!1}var al={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ZW(n){return n.substring(al.key,al.keyEnd)}function ez(n){return tz(n),s6(n,l6(n,0,al.textEnd))}function s6(n,t){let e=al.textEnd;return e===t?-1:(t=al.keyEnd=nz(n,al.key=t,e),l6(n,t,e))}function tz(n){al.key=0,al.keyEnd=0,al.value=0,al.valueEnd=0,al.textEnd=n.length}function l6(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function nz(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function jt(n,t,e){return c6(n,t,e,!1),jt}function ie(n,t){return c6(n,t,null,!0),ie}function bi(n){rz(dz,iz,n,!0)}function iz(n,t){for(let e=ez(t);e>=0;e=s6(t,e))Y1(n,ZW(t),!0)}function c6(n,t,e,i){let r=ri(),s=Zo(),d=lf(2);if(s.firstUpdatePass&&p6(s,n,d,i),t!==ta&&Hl(r,d,t)){let u=s.data[Wl()];m6(s,u,r,r[yr],n,r[d+1]=mz(t,e),i,d)}}function rz(n,t,e,i){let r=Zo(),s=lf(2);r.firstUpdatePass&&p6(r,null,s,i);let d=ri();if(e!==ta&&Hl(d,s,e)){let u=r.data[Wl()];if(u6(u,i)&&!d6(r,s)){let h=i?u.classesWithoutHost:u.stylesWithoutHost;h!==null&&(e=q1(h,e||"")),ew(r,u,d,e,i)}else pz(r,u,d,d[yr],d[s+1],d[s+1]=cz(n,t,e),i,s)}}function d6(n,t){return t>=n.expandoStartIndex}function p6(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[Wl()],d=d6(n,e);u6(s,i)&&t===null&&!d&&(t=!1),t=oz(r,s,t,i),KW(r,s,t,e,d,i)}}function oz(n,t,e,i){let r=$T(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=VP(null,n,t,e,i),e=yf(e,t.attrs,i),s=null);else{let d=t.directiveStylingLast;if(d===-1||n[d]!==r)if(e=VP(r,n,t,e,i),s===null){let h=az(n,t,i);h!==void 0&&Array.isArray(h)&&(h=VP(null,n,t,h[1],i),h=yf(h,t.attrs,i),sz(n,t,i,h))}else s=lz(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function az(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Em(i)!==0)return n[np(i)]}function sz(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[np(r)]=i}function lz(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let d=n[s].hostAttrs;i=yf(i,d,e)}return yf(i,t.attrs,e)}function VP(n,t,e,i,r){let s=null,d=e.directiveEnd,u=e.directiveStylingLast;for(u===-1?u=e.directiveStart:u++;u<d&&(s=t[u],i=yf(i,s.hostAttrs,r),s!==n);)u++;return n!==null&&(e.directiveStylingLast=u),i}function yf(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let d=t[s];typeof d=="number"?r=d:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Y1(n,d,e?!0:t[++s]))}return n===void 0?null:n}function cz(n,t,e){if(e==null||e==="")return ya;let i=[],r=Om(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function dz(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Y1(n,i,e)}function pz(n,t,e,i,r,s,d,u){r===ta&&(r=ya);let h=0,v=0,C=0<r.length?r[0]:null,O=0<s.length?s[0]:null;for(;C!==null||O!==null;){let T=h<r.length?r[h+1]:void 0,w=v<s.length?s[v+1]:void 0,A=null,I;C===O?(h+=2,v+=2,T!==w&&(A=O,I=w)):O===null||C!==null&&C<O?(h+=2,A=C):(v+=2,A=O,I=w),A!==null&&m6(n,t,e,i,A,I,d,u),C=h<r.length?r[h]:null,O=v<s.length?s[v]:null}}function m6(n,t,e,i,r,s,d,u){if(!(t.type&3))return;let h=n.data,v=h[u+1],C=JW(v)?kk(h,t,e,r,Em(v),d):void 0;if(!wv(C)){wv(s)||$W(v)&&(s=kk(h,null,e,r,u,d));let O=dP(Wl(),e);lj(i,d,O,r,s)}}function kk(n,t,e,i,r,s){let d=t===null,u;for(;r>0;){let h=n[r],v=Array.isArray(h),C=v?h[1]:h,O=C===null,T=e[r+1];T===ta&&(T=O?ya:void 0);let w=O?J1(T,i):C===i?T:void 0;if(v&&!wv(w)&&(w=J1(h,i)),wv(w)&&(u=w,d))return u;let A=n[r+1];r=d?np(A):Em(A)}if(t!==null){let h=s?t.residualClasses:t.residualStyles;h!=null&&(u=J1(h,i))}return u}function wv(n){return n!==void 0}function mz(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Lc(Om(n)))),n}function u6(n,t){return(n.flags&(t?8:16))!==0}function l(n,t=""){let e=ri(),i=Zo(),r=n+vo,s=i.firstCreatePass?Ew(i,r,1,t,null):i.data[r],d=uz(i,e,s,t,n);e[r]=d,av()&&yw(i,e,d,s),ym(s,!1)}var uz=(n,t,e,i,r)=>(cf(!0),MU(t[yr],i));function gz(n,t,e,i=""){return Hl(n,sf(),e)?t+Vl(e)+i:ta}function fz(n,t,e,i,r,s=""){let d=xP(),u=_f(n,d,e,r);return lf(2),u?t+Vl(e)+i+Vl(r)+s:ta}function hz(n,t,e,i,r,s,d,u=""){let h=xP(),v=HI(n,h,e,r,d);return lf(3),v?t+Vl(e)+i+Vl(r)+s+Vl(d)+u:ta}function _(n){return D("",n),_}function D(n,t,e){let i=ri(),r=gz(i,n,t,e);return r!==ta&&Bw(i,Wl(),r),D}function Ge(n,t,e,i,r){let s=ri(),d=fz(s,n,t,e,i,r);return d!==ta&&Bw(s,Wl(),d),Ge}function En(n,t,e,i,r,s,d){let u=ri(),h=hz(u,n,t,e,i,r,s,d);return h!==ta&&Bw(u,Wl(),h),En}function Bw(n,t,e){let i=dP(t,n);SU(n[yr],i,e)}function M(n,t,e){Aw(t)&&(t=t());let i=ri(),r=sf();if(Hl(i,r,t)){let s=Zo(),d=ov();SI(d,i,n,t,i[yr],e)}return M}function P(n,t){let e=Aw(n);return e&&n.set(t),e}function S(n,t){let e=ri(),i=Zo(),r=ea();return a6(i,e,e[yr],r,n,t),S}function Ik(n,t,e){let i=Zo();i.firstCreatePass&&g6(t,i.data,i.blueprint,jl(n),e)}function g6(n,t,e,i,r){if(n=No(n),Array.isArray(n))for(let s=0;s<n.length;s++)g6(n[s],t,e,i,r);else{let s=Zo(),d=ri(),u=ea(),h=W0(n)?n:No(n.provide),v=rP(n),C=u.providerIndexes&1048575,O=u.directiveStart,T=u.providerIndexes>>20;if(W0(n)||!n.multi){let w=new Z0(v,r,V,null),A=UP(h,t,r?C:C+T,O);A===-1?(WP(vv(u,d),s,h),BP(s,n,t.length),t.push(h),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(w),d.push(w)):(e[A]=w,d[A]=w)}else{let w=UP(h,t,C+T,O),A=UP(h,t,C,C+T),I=w>=0&&e[w],L=A>=0&&e[A];if(r&&!L||!r&&!I){WP(vv(u,d),s,h);let B=xz(r?vz:_z,e.length,r,i,v,n);!r&&L&&(e[A].providerFactory=B),BP(s,n,t.length,0),t.push(h),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(B),d.push(B)}else{let B=f6(e[r?A:w],v,!r&&i);BP(s,n,w>-1?w:A,B)}!r&&i&&L&&e[A].componentProviders++}}}function BP(n,t,e,i){let r=W0(t),s=wT(t);if(r||s){let h=(s?No(t.useClass):t).prototype.ngOnDestroy;if(h){let v=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let C=v.indexOf(e);C===-1?v.push(e,[i,h]):v[C+1].push(i,h)}else v.push(e,h)}}}function f6(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function UP(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function _z(n,t,e,i,r){return iw(this.multi,[])}function vz(n,t,e,i,r){let s=this.multi,d;if(this.providerFactory){let u=this.providerFactory.componentProviders,h=xv(i,i[Ln],this.providerFactory.index,r);d=h.slice(0,u),iw(s,d);for(let v=u;v<h.length;v++)d.push(h[v])}else d=[],iw(s,d);return d}function iw(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function xz(n,t,e,i,r,s){let d=new Z0(n,e,V,null);return d.multi=[],d.index=t,d.componentProviders=0,f6(d,r,i&&!e),d}function Va(n,t){return e=>{e.providersResolver=(i,r)=>Ik(i,r?r(n):n,!1),t&&(e.viewProvidersResolver=(i,r)=>Ik(i,r?r(t):t,!0))}}function na(n,t,e){let i=Rd()+n,r=ri();return r[i]===ta?Ef(r,i,e?t.call(e):t()):tW(r,i)}function zc(n,t,e,i){return h6(ri(),Rd(),n,t,e,i)}function Uw(n,t,e,i,r){return _6(ri(),Rd(),n,t,e,i,r)}function Ba(n,t,e,i,r,s){return yz(ri(),Rd(),n,t,e,i,r,s)}function jw(n,t,e,i,r,s,d){return Cz(ri(),Rd(),n,t,e,i,r,s,d)}function qv(n,t){let e=n[t];return e===ta?void 0:e}function h6(n,t,e,i,r,s){let d=t+e;return Hl(n,d,r)?Ef(n,d+1,s?i.call(s,r):i(r)):qv(n,d+1)}function _6(n,t,e,i,r,s,d){let u=t+e;return _f(n,u,r,s)?Ef(n,u+2,d?i.call(d,r,s):i(r,s)):qv(n,u+2)}function yz(n,t,e,i,r,s,d,u){let h=t+e;return HI(n,h,r,s,d)?Ef(n,h+3,u?i.call(u,r,s,d):i(r,s,d)):qv(n,h+3)}function Cz(n,t,e,i,r,s,d,u,h){let v=t+e;return nW(n,v,r,s,d,u)?Ef(n,v+4,h?i.call(h,r,s,d,u):i(r,s,d,u)):qv(n,v+4)}function Le(n,t){let e=Zo(),i,r=n+vo;e.firstCreatePass?(i=bz(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=Ed(i.type,!0)),d,u=xa(V);try{let h=_v(!1),v=s();return _v(h),pP(e,ri(),r,v),v}finally{xa(u)}}function bz(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function xn(n,t,e){let i=n+vo,r=ri(),s=X1(r,i);return v6(r,i)?h6(r,Rd(),t,s.transform,e,s):s.transform(e)}function rt(n,t,e,i){let r=n+vo,s=ri(),d=X1(s,r);return v6(s,r)?_6(s,Rd(),t,d.transform,e,i,d):d.transform(e,i)}function v6(n,t){return n[Ln].data[t].pure}function Ww(n,t){return VI(n,t)}var dv=null;function x6(n){dv!==null&&(n.defaultEncapsulation!==dv.defaultEncapsulation||n.preserveWhitespaces!==dv.preserveWhitespaces)||(dv=n)}var Ev=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},zw=(()=>{class n{compileModuleSync(e){return new xf(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=JS(e),s=mI(r.declarations).reduce((d,u)=>{let h=Bc(u);return h&&d.push(new ep(h)),d},[]);return new Ev(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y6=new Gt("");var C6=(()=>{class n{applicationErrorHandler=ct(Is);appRef=ct(Yl);taskService=ct(Uc);ngZone=ct(Jr);zonelessEnabled=ct(df);tracing=ct(Wc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new so;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Gg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ct(OP,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?PP:SP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Gg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b6(){return[{provide:Td,useExisting:C6},{provide:Jr,useClass:$g},{provide:df,useValue:!0}]}function Mz(){return typeof $localize<"u"&&$localize.locale||kf}var op=new Gt("",{factory:()=>ct(op,{optional:!0,skipSelf:!0})||Mz()}),qw=new Gt("",{factory:()=>HW});function Im(n,t){return s1(n,t?.equal)}var k6=Symbol("InputSignalNode#UNSET"),Rz=Tt(me({},l1),{transformFn:void 0,applyValueToInputSignal(n,t){Ng(n,t)}});function I6(n,t){let e=Object.create(Rz);e.value=n,e.transformFn=t?.transform;function i(){if(Ag(e),e.value===k6){let r=null;throw new yt(-950,r)}return e.value}return i[va]=e,i}var Hv=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>bf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function M6(n,t){return I6(n,t)}function Fz(n){return I6(k6,n)}var D6=(M6.required=Fz,M6);function Nz(n,t,e){let i=new xf(e);return Promise.resolve(i)}function S6(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var Gv=new Gt(""),Lz=new Gt("");function If(n){return!n.moduleRef}function Vz(n){let t=If(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Jr);return e.run(()=>{If(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(Is),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),If(n)){let s=()=>t.destroy(),d=n.platformInjector.get(Gv);d.add(s),t.onDestroy(()=>{r.unsubscribe(),d.delete(s)})}else{let s=()=>n.moduleRef.destroy(),d=n.platformInjector.get(Gv);d.add(s),n.moduleRef.onDestroy(()=>{gf(n.allPlatformModules,n.moduleRef),r.unsubscribe(),d.delete(s)})}return Uz(i,e,()=>{let s=t.get(Uc),d=s.add(),u=t.get(Lw);return u.runInitializers(),u.donePromise.then(()=>{let h=t.get(op,kf);if(o6(h||kf),!t.get(Lz,!0))return If(n)?t.get(Yl):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(If(n)){let C=t.get(Yl);return n.rootComponent!==void 0&&C.bootstrap(n.rootComponent),C}else return A6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(d))})})}var A6;function P6(){A6=Bz}function Bz(n,t){let e=n.injector.get(Yl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new yt(-403,!1);t.push(n)}function Uz(n,t,e){try{let i=e();return Vd(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n(i)),i}}var R6=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=[b6(),...i?.applicationProviders??[],nk],s=QI(e.moduleType,this.injector,r);return P6(),Vz({moduleRef:s,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=Vw({},i);return P6(),Nz(this.injector,r,e).then(s=>this.bootstrapModuleFactory(s,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new yt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(Gv,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||n)(it(Qo))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Jw=null;function jz(n){if(Qw())throw new yt(400,!1);i6(),Jw=n;let t=n.get(R6);return qz(n),t}function Kw(n,t,e=[]){let i=`Platform: ${t}`,r=new Gt(i);return(s=[])=>{let d=Qw();if(!d){let u=[...e,...s,{provide:r,useValue:!0}];d=n?.(u)??jz(Wz(u,i))}return zz(r)}}function Wz(n=[],t){return Qo.create({name:t,providers:[{provide:Kg,useValue:"platform"},{provide:Gv,useValue:new Set([()=>Jw=null])},...n]})}function zz(n){let t=Qw();if(!t)throw new yt(-401,!1);return t}function Qw(){return Jw?.get(R6)??null}function qz(n){let t=n.get(kv,null);_o(n,()=>{t?.forEach(e=>e())})}var dt=(()=>{class n{static __NG_ELEMENT_ID__=Hz}return n})();function Hz(n){return Gz(ea(),ri(),(n&16)===16)}function Gz(n,t,e){if(Ad(n)&&!e){let i=Ts(n.index,t);return new Nd(i,i)}else if(n.type&175){let i=t[Es];return new Nd(i,t)}return null}var Hw=class{constructor(){}supports(t){return Iw(t)}create(t){return new Gw(t)}},$z=(n,t)=>t,Gw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||$z}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let d=!i||e&&e.currentIndex<w6(i,r,s)?e:i,u=w6(d,r,s),h=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,d.previousIndex==null)r++;else{s||(s=[]);let v=u-r,C=h-r;if(v!=C){for(let T=0;T<v;T++){let w=T<s.length?s[T]:s[T]=0,A=w+T;C<=A&&A<v&&(s[T]=w+1)}let O=d.previousIndex;s[O]=C-v}}u!==h&&t(d,u,h)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Iw(t))throw new yt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,d;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)s=t[u],d=this._trackByFn(u,s),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,s,d,u),i=!0):(i&&(e=this._verifyReinsertion(e,s,d,u)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,zI(t,u=>{d=this._trackByFn(r,u),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,u,d,r),i=!0):(i&&(e=this._verifyReinsertion(e,u,d,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new $w(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new $v),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $v),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},$w=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Yw=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},$v=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Yw,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function w6(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function E6(){return new Xw([new Hw])}var Xw=(()=>{class n{factories;static \u0275prov=$e({token:n,providedIn:"root",factory:E6});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let i=ct(n,{optional:!0,skipSelf:!0});return n.create(e,i||E6())}}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new yt(901,!1)}}return n})();var F6=Kw(null,"core",[]),N6=(()=>{class n{constructor(e){}static \u0275fac=function(i){return new(i||n)(it(Yl))};static \u0275mod=Or({type:n});static \u0275inj=xr({})}return n})();function Bd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function L6(n){let t=Bc(n);if(!t)return null;let e=new ep(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var V6=null;function ss(){return V6}function Zw(n){V6??=n}var Df=class{},Ud=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(B6),providedIn:"platform"})}return n})(),eE=new Gt(""),B6=(()=>{class n extends Ud{_location;_history;_doc=ct(gr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ss().getBaseHref(this._doc)}onPopState(e){let i=ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Yv(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function U6(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function cl(n){return n&&n[0]!=="?"?`?${n}`:n}var dl=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(Kv),providedIn:"root"})}return n})(),Jv=new Gt(""),Kv=(()=>{class n extends dl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ct(gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Yv(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+cl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+cl(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+cl(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(it(Ud),it(Jv,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jd=(()=>{class n{_subject=new Oi;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=Kz(U6(j6(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+cl(i))}normalize(e){return n.stripTrailingSlash(Jz(this._basePath,j6(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=cl;static joinWithSlash=Yv;static stripTrailingSlash=U6;static \u0275fac=function(i){return new(i||n)(it(dl))};static \u0275prov=$e({token:n,factory:()=>Yz(),providedIn:"root"})}return n})();function Yz(){return new jd(it(dl))}function Jz(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function j6(n){return n.replace(/\/index.html$/,"")}function Kz(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var sE=(()=>{class n extends dl{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=Yv(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+cl(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+cl(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(it(Ud),it(Jv,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Y6={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},sx=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(sx||{});var ia=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(ia||{}),Qi=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Qi||{}),Ua=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Ua||{}),Uo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function J6(n){return ba(n)[Tr.LocaleId]}function K6(n,t,e){let i=ba(n),r=[i[Tr.DayPeriodsFormat],i[Tr.DayPeriodsStandalone]],s=As(r,t);return As(s,e)}function Q6(n,t,e){let i=ba(n),r=[i[Tr.DaysFormat],i[Tr.DaysStandalone]],s=As(r,t);return As(s,e)}function X6(n,t,e){let i=ba(n),r=[i[Tr.MonthsFormat],i[Tr.MonthsStandalone]],s=As(r,t);return As(s,e)}function Z6(n,t){let i=ba(n)[Tr.Eras];return As(i,t)}function Af(n,t){let e=ba(n);return As(e[Tr.DateFormat],t)}function Rf(n,t){let e=ba(n);return As(e[Tr.TimeFormat],t)}function Ff(n,t){let i=ba(n)[Tr.DateTimeFormat];return As(i,t)}function ml(n,t){let e=ba(n),i=e[Tr.NumberSymbols][t];if(typeof i>"u"){if(t===Uo.CurrencyDecimal)return e[Tr.NumberSymbols][Uo.Decimal];if(t===Uo.CurrencyGroup)return e[Tr.NumberSymbols][Uo.Group]}return i}function lE(n,t){return ba(n)[Tr.NumberFormats][t]}function Qz(n){return ba(n)[Tr.Currencies]}function eD(n){if(!n[Tr.ExtraData])throw new yt(2303,!1)}function tD(n){let t=ba(n);return eD(t),(t[Tr.ExtraData][2]||[]).map(i=>typeof i=="string"?tE(i):[tE(i[0]),tE(i[1])])}function nD(n,t,e){let i=ba(n);eD(i);let r=[i[Tr.ExtraData][0],i[Tr.ExtraData][1]],s=As(r,t)||[];return As(s,e)||[]}function As(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new yt(2304,!1)}function tE(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}function iD(n,t,e="en"){let i=Qz(e)[n]||Y6[n]||[],r=i[1];return t==="narrow"&&typeof r=="string"?r:i[0]||n}var Xz=2;function rD(n){let t,e=Y6[n];return e&&(t=e[2]),typeof t=="number"?t:Xz}var Zz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Qv={},eq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function oD(n,t,e,i){let r=cq(n);t=qc(e,t)||t;let d=[],u;for(;t;)if(u=eq.exec(t),u){d=d.concat(u.slice(1));let C=d.pop();if(!C)break;t=C}else{d.push(t);break}let h=r.getTimezoneOffset();i&&(h=sD(i,h),r=lq(r,i));let v="";return d.forEach(C=>{let O=aq(C);v+=O?O(r,e,h):C==="''"?"'":C.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function nx(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function qc(n,t){let e=J6(n);if(Qv[e]??={},Qv[e][t])return Qv[e][t];let i="";switch(t){case"shortDate":i=Af(n,Ua.Short);break;case"mediumDate":i=Af(n,Ua.Medium);break;case"longDate":i=Af(n,Ua.Long);break;case"fullDate":i=Af(n,Ua.Full);break;case"shortTime":i=Rf(n,Ua.Short);break;case"mediumTime":i=Rf(n,Ua.Medium);break;case"longTime":i=Rf(n,Ua.Long);break;case"fullTime":i=Rf(n,Ua.Full);break;case"short":let r=qc(n,"shortTime"),s=qc(n,"shortDate");i=Xv(Ff(n,Ua.Short),[r,s]);break;case"medium":let d=qc(n,"mediumTime"),u=qc(n,"mediumDate");i=Xv(Ff(n,Ua.Medium),[d,u]);break;case"long":let h=qc(n,"longTime"),v=qc(n,"longDate");i=Xv(Ff(n,Ua.Long),[h,v]);break;case"full":let C=qc(n,"fullTime"),O=qc(n,"fullDate");i=Xv(Ff(n,Ua.Full),[C,O]);break}return i&&(Qv[e][t]=i),i}function Xv(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function pl(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let d=String(n);for(;d.length<t;)d="0"+d;return i&&(d=d.slice(d.length-t)),s+d}function tq(n,t){return pl(n,3).substring(0,t)}function Qr(n,t,e=0,i=!1,r=!1){return function(s,d){let u=nq(n,s);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return tq(u,t);let h=ml(d,Uo.MinusSign);return pl(u,t,h,i,r)}}function nq(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new yt(2301,!1)}}function pr(n,t,e=ia.Format,i=!1){return function(r,s){return iq(r,s,n,t,e,i)}}function iq(n,t,e,i,r,s){switch(e){case 2:return X6(t,r,i)[n.getMonth()];case 1:return Q6(t,r,i)[n.getDay()];case 0:let d=n.getHours(),u=n.getMinutes();if(s){let v=tD(t),C=nD(t,r,i),O=v.findIndex(T=>{if(Array.isArray(T)){let[w,A]=T,I=d>=w.hours&&u>=w.minutes,L=d<A.hours||d===A.hours&&u<A.minutes;if(w.hours<A.hours){if(I&&L)return!0}else if(I||L)return!0}else if(T.hours===d&&T.minutes===u)return!0;return!1});if(O!==-1)return C[O]}return K6(t,r,i)[d<12?0:1];case 3:return Z6(t,i)[n.getFullYear()<=0?0:1];default:let h=e;throw new yt(2302,!1)}}function Zv(n){return function(t,e,i){let r=-1*i,s=ml(e,Uo.MinusSign),d=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+pl(d,2,s)+pl(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+pl(d,1,s);case 2:return"GMT"+(r>=0?"+":"")+pl(d,2,s)+":"+pl(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+pl(d,2,s)+":"+pl(Math.abs(r%60),2,s);default:throw new yt(2310,!1)}}}var rq=0,tx=4;function oq(n){let t=nx(n,rq,1).getDay();return nx(n,0,1+(t<=tx?tx:tx+7)-t)}function aD(n){let t=n.getDay(),e=t===0?-3:tx-t;return nx(n.getFullYear(),n.getMonth(),n.getDate()+e)}function nE(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();r=1+Math.floor((d+s)/7)}else{let s=aD(e),d=oq(s.getFullYear()),u=s.getTime()-d.getTime();r=1+Math.round(u/6048e5)}return pl(r,n,ml(i,Uo.MinusSign))}}function ex(n,t=!1){return function(e,i){let s=aD(e).getFullYear();return pl(s,n,ml(i,Uo.MinusSign),t)}}var iE={};function aq(n){if(iE[n])return iE[n];let t;switch(n){case"G":case"GG":case"GGG":t=pr(3,Qi.Abbreviated);break;case"GGGG":t=pr(3,Qi.Wide);break;case"GGGGG":t=pr(3,Qi.Narrow);break;case"y":t=Qr(0,1,0,!1,!0);break;case"yy":t=Qr(0,2,0,!0,!0);break;case"yyy":t=Qr(0,3,0,!1,!0);break;case"yyyy":t=Qr(0,4,0,!1,!0);break;case"Y":t=ex(1);break;case"YY":t=ex(2,!0);break;case"YYY":t=ex(3);break;case"YYYY":t=ex(4);break;case"M":case"L":t=Qr(1,1,1);break;case"MM":case"LL":t=Qr(1,2,1);break;case"MMM":t=pr(2,Qi.Abbreviated);break;case"MMMM":t=pr(2,Qi.Wide);break;case"MMMMM":t=pr(2,Qi.Narrow);break;case"LLL":t=pr(2,Qi.Abbreviated,ia.Standalone);break;case"LLLL":t=pr(2,Qi.Wide,ia.Standalone);break;case"LLLLL":t=pr(2,Qi.Narrow,ia.Standalone);break;case"w":t=nE(1);break;case"ww":t=nE(2);break;case"W":t=nE(1,!0);break;case"d":t=Qr(2,1);break;case"dd":t=Qr(2,2);break;case"c":case"cc":t=Qr(7,1);break;case"ccc":t=pr(1,Qi.Abbreviated,ia.Standalone);break;case"cccc":t=pr(1,Qi.Wide,ia.Standalone);break;case"ccccc":t=pr(1,Qi.Narrow,ia.Standalone);break;case"cccccc":t=pr(1,Qi.Short,ia.Standalone);break;case"E":case"EE":case"EEE":t=pr(1,Qi.Abbreviated);break;case"EEEE":t=pr(1,Qi.Wide);break;case"EEEEE":t=pr(1,Qi.Narrow);break;case"EEEEEE":t=pr(1,Qi.Short);break;case"a":case"aa":case"aaa":t=pr(0,Qi.Abbreviated);break;case"aaaa":t=pr(0,Qi.Wide);break;case"aaaaa":t=pr(0,Qi.Narrow);break;case"b":case"bb":case"bbb":t=pr(0,Qi.Abbreviated,ia.Standalone,!0);break;case"bbbb":t=pr(0,Qi.Wide,ia.Standalone,!0);break;case"bbbbb":t=pr(0,Qi.Narrow,ia.Standalone,!0);break;case"B":case"BB":case"BBB":t=pr(0,Qi.Abbreviated,ia.Format,!0);break;case"BBBB":t=pr(0,Qi.Wide,ia.Format,!0);break;case"BBBBB":t=pr(0,Qi.Narrow,ia.Format,!0);break;case"h":t=Qr(3,1,-12);break;case"hh":t=Qr(3,2,-12);break;case"H":t=Qr(3,1);break;case"HH":t=Qr(3,2);break;case"m":t=Qr(4,1);break;case"mm":t=Qr(4,2);break;case"s":t=Qr(5,1);break;case"ss":t=Qr(5,2);break;case"S":t=Qr(6,1);break;case"SS":t=Qr(6,2);break;case"SSS":t=Qr(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Zv(0);break;case"ZZZZZ":t=Zv(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Zv(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Zv(2);break;default:return null}return iE[n]=t,t}function sD(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function sq(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function lq(n,t,e){let r=n.getTimezoneOffset(),s=sD(t,r);return sq(n,-1*(s-r))}function cq(n){if(W6(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,d=1]=n.split("-").map(u=>+u);return nx(r,s-1,d)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Zz))return dq(i)}let t=new Date(n);if(!W6(t))throw new yt(2311,!1);return t}function dq(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let d=Number(n[4]||0)-e,u=Number(n[5]||0)-i,h=Number(n[6]||0),v=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,d,u,h,v),t}function W6(n){return n instanceof Date&&!isNaN(n.valueOf())}var pq=/^(\d+)?\.((\d+)(-(\d+))?)?$/,z6=22,ix=".",Nf="0",mq=";",uq=",",rE="#",q6="\xA4";function lD(n,t,e,i,r,s,d=!1){let u="",h=!1;if(!isFinite(n))u=ml(e,Uo.Infinity);else{let v=fq(n);d&&(v=gq(v));let C=t.minInt,O=t.minFrac,T=t.maxFrac;if(s){let q=s.match(pq);if(q===null)throw new yt(2306,!1);let K=q[1],J=q[3],Me=q[5];K!=null&&(C=oE(K)),J!=null&&(O=oE(J)),Me!=null?T=oE(Me):J!=null&&O>T&&(T=O)}hq(v,O,T);let w=v.digits,A=v.integerLen,I=v.exponent,L=[];for(h=w.every(q=>!q);A<C;A++)w.unshift(0);for(;A<0;A++)w.unshift(0);A>0?L=w.splice(A,w.length):(L=w,w=[0]);let B=[];for(w.length>=t.lgSize&&B.unshift(w.splice(-t.lgSize,w.length).join(""));w.length>t.gSize;)B.unshift(w.splice(-t.gSize,w.length).join(""));w.length&&B.unshift(w.join("")),u=B.join(ml(e,i)),L.length&&(u+=ml(e,r)+L.join("")),I&&(u+=ml(e,Uo.Exponential)+"+"+I)}return n<0&&!h?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function cD(n,t,e,i,r){let s=lE(t,sx.Currency),d=pD(s,ml(t,Uo.MinusSign));return d.minFrac=rD(i),d.maxFrac=d.minFrac,lD(n,d,t,Uo.CurrencyGroup,Uo.CurrencyDecimal,r).replace(q6,e).replace(q6,"").trim()}function dD(n,t,e){let i=lE(t,sx.Decimal),r=pD(i,ml(t,Uo.MinusSign));return lD(n,r,t,Uo.Group,Uo.Decimal,e)}function pD(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(mq),r=i[0],s=i[1],d=r.indexOf(ix)!==-1?r.split(ix):[r.substring(0,r.lastIndexOf(Nf)+1),r.substring(r.lastIndexOf(Nf)+1)],u=d[0],h=d[1]||"";e.posPre=u.substring(0,u.indexOf(rE));for(let C=0;C<h.length;C++){let O=h.charAt(C);O===Nf?e.minFrac=e.maxFrac=C+1:O===rE?e.maxFrac=C+1:e.posSuf+=O}let v=u.split(uq);if(e.gSize=v[1]?v[1].length:0,e.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,s){let C=r.length-e.posPre.length-e.posSuf.length,O=s.indexOf(rE);e.negPre=s.substring(0,O).replace(/'/g,""),e.negSuf=s.slice(O+C).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function gq(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function fq(n){let t=Math.abs(n)+"",e=0,i,r,s,d,u;for((r=t.indexOf(ix))>-1&&(t=t.replace(ix,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===Nf;s++);if(s===(u=t.length))i=[0],r=1;else{for(u--;t.charAt(u)===Nf;)u--;for(r-=s,i=[],d=0;s<=u;s++,d++)i[d]=Number(t.charAt(s))}return r>z6&&(i=i.splice(0,z6-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function hq(n,t,e){if(t>e)throw new yt(2307,!1);let i=n.digits,r=i.length-n.integerLen,s=Math.min(Math.max(t,r),e),d=s+n.integerLen,u=i[d];if(d>0){i.splice(Math.max(n.integerLen,d));for(let O=d;O<i.length;O++)i[O]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,d=s+1),i[0]=0;for(let O=1;O<d;O++)i[O]=0}if(u>=5)if(d-1<0){for(let O=0;O>d;O--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[d-1]++;for(;r<Math.max(0,s);r++)i.push(0);let h=s!==0,v=t+n.integerLen,C=i.reduceRight(function(O,T,w,A){return T=T+O,A[w]=T<10?T:T-10,h&&(A[w]===0&&w>=v?A.pop():h=!1),T>=10?1:0},0);C&&(i.unshift(C),n.integerLen++)}function oE(n){let t=parseInt(n);if(isNaN(t))throw new yt(2305,!1);return t}var aE=/\s+/,H6=[],ot=(()=>{class n{_ngEl;_renderer;initialClasses=H6;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(aE):H6}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(aE):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(aE).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(V(as),V(ll))};static \u0275dir=ui({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var rx=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Se=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,d)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new rx(r.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,d),G6(u,r)}});for(let r=0,s=i.length;r<s;r++){let u=i.get(r).context;u.index=r,u.count=s,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);G6(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(V($l),V(rp),V(Xw))};static \u0275dir=ui({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function G6(n,t){n.context.$implicit=t.item}var be=(()=>{class n{_viewContainer;_context=new ox;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$6(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$6(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(V($l),V(rp))};static \u0275dir=ui({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ox=class{$implicit=null;ngIf=null};function $6(n,t){if(n&&!n.createEmbeddedView)throw new yt(2020,!1)}var ax=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},Lf=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ui({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),cE=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ax(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(i){return new(i||n)(V($l),V(rp),V(Lf,9))};static \u0275dir=ui({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})(),dE=(()=>{class n{constructor(e,i,r){r._addDefault(new ax(e,i))}static \u0275fac=function(i){return new(i||n)(V($l),V(rp),V(Lf,9))};static \u0275dir=ui({type:n,selectors:[["","ngSwitchDefault",""]]})}return n})();var pE=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(V($l))};static \u0275dir=ui({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Gl]})}return n})();function mE(n,t){return new yt(2100,!1)}var _q="mediumDate",mD=new Gt(""),uD=new Gt(""),ir=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let d=i??this.defaultOptions?.dateFormat??_q,u=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return oD(e,d,s||this.locale,u)}catch(d){throw mE(n,d.message)}}static \u0275fac=function(i){return new(i||n)(V(op,16),V(mD,24),V(uD,24))};static \u0275pipe=Ld({name:"date",type:n,pure:!0})}return n})();var uE=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Ld({name:"json",type:n,pure:!1})}return n})();var yn=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!gD(e))return null;r||=this._locale;try{let s=fD(e);return dD(s,r,i)}catch(s){throw mE(n,s.message)}}static \u0275fac=function(i){return new(i||n)(V(op,16))};static \u0275pipe=Ld({name:"number",type:n,pure:!0})}return n})();var ap=(()=>{class n{_locale;_defaultCurrencyCode;constructor(e,i="USD"){this._locale=e,this._defaultCurrencyCode=i}transform(e,i=this._defaultCurrencyCode,r="symbol",s,d){if(!gD(e))return null;d||=this._locale,typeof r=="boolean"&&(r=r?"symbol":"code");let u=i||this._defaultCurrencyCode;r!=="code"&&(r==="symbol"||r==="symbol-narrow"?u=iD(u,r==="symbol"?"wide":"narrow",d):u=r);try{let h=fD(e);return cD(h,d,u,i,s)}catch(h){throw mE(n,h.message)}}static \u0275fac=function(i){return new(i||n)(V(op,16),V(qw,16))};static \u0275pipe=Ld({name:"currency",type:n,pure:!0})}return n})();function gD(n){return!(n==null||n===""||n!==n)}function fD(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new yt(2309,!1);return n}var At=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({})}return n})();function Vf(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var sp=class{};var hD="browser";var _D=(()=>{class n{static \u0275prov=$e({token:n,providedIn:"root",factory:()=>new gE(ct(gr),window)})}return n})(),gE=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(Tt(me({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let i=vq(this.document,t);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(Vc(2400,!1))}}scrollToElement(t,e){let i=t.getBoundingClientRect(),r=i.left+this.window.pageXOffset,s=i.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(Tt(me({},e),{left:r-d[0],top:s-d[1]}))}};function vq(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let d=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(d)return d}r=i.nextNode()}}return null}var Bf=class{_doc;constructor(t){this._doc=t}manager},lx=(()=>{class n extends Bf{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(it(gr))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),px=new Gt(""),vE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(d=>{d.manager=this});let r=e.filter(d=>!(d instanceof lx));this._plugins=r.slice().reverse();let s=e.find(d=>d instanceof lx);s&&this._plugins.push(s)}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new yt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(it(px),it(Jr))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),fE="ng-app-id";function vD(n){for(let t of n)t.remove()}function xD(n,t){let e=t.createElement("style");return e.textContent=n,e}function xq(n,t,e,i){let r=n.head?.querySelectorAll(`style[${fE}="${t}"],link[${fE}="${t}"]`);if(r)for(let s of r)s.removeAttribute(fE),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function _E(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var xE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,xq(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,xD);i?.forEach(r=>this.addUsage(r,this.external,_E))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(vD(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])vD(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,xD(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,_E(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(it(gr),it(Tv),it(Dv,8),it(Mf))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),hE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yE=/%COMP%/g;var CD="%COMP%",yq=`_nghost-${CD}`,Cq=`_ngcontent-${CD}`,bq=!0,Mq=new Gt("",{factory:()=>bq});function Sq(n){return Cq.replace(yE,n)}function Pq(n){return yq.replace(yE,n)}function bD(n,t){return t.map(e=>e.replace(yE,n))}var Wf=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,d,u,h=null,v=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=d,this.ngZone=u,this.nonce=h,this.tracingService=v,this.platformIsServer=!1,this.defaultRenderer=new Uf(e,d,u,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof dx?r.applyToHost(e):r instanceof jf&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let d=this.doc,u=this.ngZone,h=this.eventManager,v=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,O=this.platformIsServer,T=this.tracingService;switch(i.encapsulation){case sl.Emulated:s=new dx(h,v,i,this.appId,C,d,u,O,T);break;case sl.ShadowDom:return new cx(h,e,i,d,u,this.nonce,O,T,v);case sl.ExperimentalIsolatedShadowDom:return new cx(h,e,i,d,u,this.nonce,O,T);default:s=new jf(h,v,i,C,d,u,O,T);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(it(vE),it(xE),it(Tv),it(Mq),it(gr),it(Jr),it(Dv),it(Wc,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Uf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(hE[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(yD(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(yD(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new yt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=hE[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=hE[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ql.DashCase|ql.Important)?t.style.setProperty(e,i,r&ql.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ql.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=ss().getGlobalEventTarget(this.doc,t),!t))throw new yt(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function yD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var cx=class extends Uf{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,i,r,s,d,u,h,v){super(t,r,s,u,h),this.hostEl=e,this.sharedStylesHost=v,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let C=i.styles;C=bD(i.id,C);for(let T of C){let w=document.createElement("style");d&&w.setAttribute("nonce",d),w.textContent=T,this.shadowRoot.appendChild(w)}let O=i.getExternalStyles?.();if(O)for(let T of O){let w=_E(T,r);d&&w.setAttribute("nonce",d),this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},jf=class extends Uf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,d,u,h,v){super(t,s,d,u,h),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let C=i.styles;this.styles=v?bD(v,C):C,this.styleUrls=i.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&wm.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dx=class extends jf{contentAttr;hostAttr;constructor(t,e,i,r,s,d,u,h,v){let C=r+"-"+i.id;super(t,e,i,s,d,u,h,v,C),this.contentAttr=Sq(C),this.hostAttr=Pq(C)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var mx=class n extends Df{supportsDOMEvents=!0;static makeCurrent(){Zw(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=wq();return e==null?null:Eq(e)}resetBaseElement(){zf=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vf(document.cookie,t)}},zf=null;function wq(){return zf=zf||document.head.querySelector("base"),zf?zf.getAttribute("href"):null}function Eq(n){return new URL(n,document.baseURI).pathname}var ux=class{addToWindow(t){Vo.getAngularTestability=(i,r=!0)=>{let s=t.findTestabilityInTree(i,r);if(s==null)throw new yt(5103,!1);return s},Vo.getAllAngularTestabilities=()=>t.getAllTestabilities(),Vo.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=Vo.getAllAngularTestabilities(),s=r.length,d=function(){s--,s==0&&i()};r.forEach(u=>{u.whenStable(d)})};Vo.frameworkStabilizers||(Vo.frameworkStabilizers=[]),Vo.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?ss().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},Oq=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),MD=["alt","control","meta","shift"],Tq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SD=(()=>{class n extends Bf{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let d=n.parseEventName(i),u=n.eventCallback(d.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ss().onAndCancel(e,d.domEventName,u,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),d="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),d="code."),MD.forEach(v=>{let C=i.indexOf(v);C>-1&&(i.splice(C,1),d+=v+".")}),d+=s,i.length!=0||s.length===0)return null;let h={};return h.domEventName=r,h.fullKey=d,h}static matchEventFullKeyCode(e,i){let r=Tq[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),MD.forEach(d=>{if(d!==r){let u=kq[d];u(e)&&(s+=d+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(it(gr))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function Iq(){mx.makeCurrent()}function Dq(){return new Ll}function Aq(){return aw(document),document}var Rq=[{provide:Mf,useValue:hD},{provide:kv,useValue:Iq,multi:!0},{provide:gr,useFactory:Aq}],CE=Kw(F6,"browser",Rq);var Fq=[{provide:jv,useClass:ux},{provide:Uv,useClass:Of},{provide:Of,useClass:Of}],Nq=[{provide:Kg,useValue:"root"},{provide:Ll,useFactory:Dq},{provide:px,useClass:lx,multi:!0},{provide:px,useClass:SD,multi:!0},Wf,xE,vE,{provide:jc,useExisting:Wf},{provide:sp,useClass:Oq},[]],qf=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({providers:[...Nq,...Fq],imports:[At,N6]})}return n})();var Wd=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let d=this.headers.get(e);if(!d)return;d=d.filter(u=>s.indexOf(u)===-1),d.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var fx=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},hx=class{encodeKey(t){return PD(t)}encodeValue(t){return PD(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Lq(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[d,u]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],h=e.get(d)||[];h.push(u),e.set(d,h)}),e}var Vq=/%(\d[a-f0-9])/gi,Bq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PD(n){return encodeURIComponent(n).replace(Vq,(t,e)=>Bq[e]??t)}function gx(n){return`${n}`}var ki=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new hx,t.fromString){if(t.fromObject)throw new yt(2805,!1);this.map=Lq(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(gx):[gx(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(gx(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(gx(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function Uq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function wD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ED(n){return typeof Blob<"u"&&n instanceof Blob}function OD(n){return typeof FormData<"u"&&n instanceof FormData}function jq(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var TD="Content-Type",kD="Accept",DD="text/plain",AD="application/json",Wq=`${AD}, ${DD}, */*`,Dm=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let s;if(Uq(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new yt(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Wd,this.context??=new fx,!this.params)this.params=new ki,this.urlWithParams=e;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),h=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+h+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||wD(this.body)||ED(this.body)||OD(this.body)||jq(this.body)?this.body:this.body instanceof ki?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||OD(this.body)?null:ED(this.body)?this.body.type||null:wD(this.body)?null:typeof this.body=="string"?DD:this.body instanceof ki?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?AD:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.keepalive??this.keepalive,d=t.priority||this.priority,u=t.cache||this.cache,h=t.mode||this.mode,v=t.redirect||this.redirect,C=t.credentials||this.credentials,O=t.referrer||this.referrer,T=t.integrity||this.integrity,w=t.referrerPolicy||this.referrerPolicy,A=t.transferCache??this.transferCache,I=t.timeout??this.timeout,L=t.body!==void 0?t.body:this.body,B=t.withCredentials??this.withCredentials,q=t.reportProgress??this.reportProgress,K=t.headers||this.headers,J=t.params||this.params,Me=t.context??this.context;return t.setHeaders!==void 0&&(K=Object.keys(t.setHeaders).reduce((ze,oe)=>ze.set(oe,t.setHeaders[oe]),K)),t.setParams&&(J=Object.keys(t.setParams).reduce((ze,oe)=>ze.set(oe,t.setParams[oe]),J)),new n(e,i,L,{params:J,headers:K,context:Me,reportProgress:q,responseType:r,withCredentials:B,transferCache:A,keepalive:s,cache:u,priority:d,timeout:I,mode:h,redirect:v,credentials:C,referrer:O,integrity:T,referrerPolicy:w})}},lp=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(lp||{}),Rm=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,e=200,i="OK"){this.headers=t.headers||new Wd,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},_x=class n extends Rm{constructor(t={}){super(t)}type=lp.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Hf=class n extends Rm{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=lp.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Am=class extends Rm{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},zq=200,qq=204;var Hq=new Gt("");var Gq=/^\)\]\}',?\n/;var ME=(()=>{class n{xhrFactory;tracingService=ct(Wc,{optional:!0});constructor(e){this.xhrFactory=e}maybePropagateTrace(e){return this.tracingService?.propagate?this.tracingService.propagate(e):e}handle(e){if(e.method==="JSONP")throw new yt(-2800,!1);let i=this.xhrFactory;return Zt(null).pipe(ho(()=>new ni(s=>{let d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((L,B)=>d.setRequestHeader(L,B.join(","))),e.headers.has(kD)||d.setRequestHeader(kD,Wq),!e.headers.has(TD)){let L=e.detectContentTypeHeader();L!==null&&d.setRequestHeader(TD,L)}if(e.timeout&&(d.timeout=e.timeout),e.responseType){let L=e.responseType.toLowerCase();d.responseType=L!=="json"?L:"text"}let u=e.serializeBody(),h=null,v=()=>{if(h!==null)return h;let L=d.statusText||"OK",B=new Wd(d.getAllResponseHeaders()),q=d.responseURL||e.url;return h=new _x({headers:B,status:d.status,statusText:L,url:q}),h},C=this.maybePropagateTrace(()=>{let{headers:L,status:B,statusText:q,url:K}=v(),J=null;B!==qq&&(J=typeof d.response>"u"?d.responseText:d.response),B===0&&(B=J?zq:0);let Me=B>=200&&B<300;if(e.responseType==="json"&&typeof J=="string"){let ze=J;J=J.replace(Gq,"");try{J=J!==""?JSON.parse(J):null}catch(oe){J=ze,Me&&(Me=!1,J={error:oe,text:J})}}Me?(s.next(new Hf({body:J,headers:L,status:B,statusText:q,url:K||void 0})),s.complete()):s.error(new Am({error:J,headers:L,status:B,statusText:q,url:K||void 0}))}),O=this.maybePropagateTrace(L=>{let{url:B}=v(),q=new Am({error:L,status:d.status||0,statusText:d.statusText||"Unknown Error",url:B||void 0});s.error(q)}),T=O;e.timeout&&(T=this.maybePropagateTrace(L=>{let{url:B}=v(),q=new Am({error:new DOMException("Request timed out","TimeoutError"),status:d.status||0,statusText:d.statusText||"Request timeout",url:B||void 0});s.error(q)}));let w=!1,A=this.maybePropagateTrace(L=>{w||(s.next(v()),w=!0);let B={type:lp.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),e.responseType==="text"&&d.responseText&&(B.partialText=d.responseText),s.next(B)}),I=this.maybePropagateTrace(L=>{let B={type:lp.UploadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),s.next(B)});return d.addEventListener("load",C),d.addEventListener("error",O),d.addEventListener("timeout",T),d.addEventListener("abort",O),e.reportProgress&&(d.addEventListener("progress",A),u!==null&&d.upload&&d.upload.addEventListener("progress",I)),d.send(u),s.next({type:lp.Sent}),()=>{d.removeEventListener("error",O),d.removeEventListener("abort",O),d.removeEventListener("load",C),d.removeEventListener("timeout",T),e.reportProgress&&(d.removeEventListener("progress",A),u!==null&&d.upload&&d.upload.removeEventListener("progress",I)),d.readyState!==d.DONE&&d.abort()}})))}static \u0275fac=function(i){return new(i||n)(it(sp))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RD(n,t){return t(n)}function $q(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function Yq(n,t,e){return(i,r)=>_o(e,()=>t(i,s=>n(s,r)))}var xx=new Gt(""),SE=new Gt("",{factory:()=>[]}),FD=new Gt(""),PE=new Gt("",{providedIn:"root",factory:()=>!0});function Jq(){let n=null;return(t,e)=>{n===null&&(n=(ct(xx,{optional:!0})??[]).reduceRight($q,RD));let i=ct(pf);if(ct(PE)){let s=i.add();return n(t,e).pipe(Tn(s))}else return n(t,e)}}var Fm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it(ME),r},providedIn:"root"})}return n})();var vx=(()=>{class n{backend;injector;chain=null;pendingTasks=ct(pf);contributeToStability=ct(PE);constructor(e,i){this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(SE),...this.injector.get(FD,[])]));this.chain=i.reduceRight((r,s)=>Yq(r,s,this.injector),RD)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Tn(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(it(Fm),it(Dr))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it(vx),r},providedIn:"root"})}return n})();function bE(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Ft=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Dm)s=e;else{let h;r.headers instanceof Wd?h=r.headers:h=new Wd(r.headers);let v;r.params&&(r.params instanceof ki?v=r.params:v=new ki({fromObject:r.params})),s=new Dm(e,i,r.body!==void 0?r.body:null,{headers:h,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let d=Zt(s).pipe(Fl(h=>this.handler.handle(h)));if(e instanceof Dm||r.observe==="events")return d;let u=d.pipe(Fa(h=>h instanceof Hf));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(ii(h=>{if(h.body!==null&&!(h.body instanceof ArrayBuffer))throw new yt(2806,!1);return h.body}));case"blob":return u.pipe(ii(h=>{if(h.body!==null&&!(h.body instanceof Blob))throw new yt(2807,!1);return h.body}));case"text":return u.pipe(ii(h=>{if(h.body!==null&&typeof h.body!="string")throw new yt(2808,!1);return h.body}));case"json":default:return u.pipe(ii(h=>h.body))}case"response":return u;default:throw new yt(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ki().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,bE(r,i))}post(e,i,r={}){return this.request("POST",e,bE(r,i))}put(e,i,r={}){return this.request("PUT",e,bE(r,i))}static \u0275fac=function(i){return new(i||n)(it(wE))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kq=new Gt("",{factory:()=>!0}),Qq="XSRF-TOKEN",Xq=new Gt("",{providedIn:"root",factory:()=>Qq}),Zq="X-XSRF-TOKEN",eH=new Gt("",{providedIn:"root",factory:()=>Zq}),tH=(()=>{class n{cookieName=ct(Xq);doc=ct(gr);lastCookieString="";lastToken=null;parseCount=0;getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vf(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ND=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it(tH),r},providedIn:"root"})}return n})();function nH(n,t){if(!ct(Kq)||n.method==="GET"||n.method==="HEAD")return t(n);try{let r=ct(Ud).href,{origin:s}=new URL(r),{origin:d}=new URL(n.url,s);if(s!==d)return t(n)}catch{return t(n)}let e=ct(ND).getToken(),i=ct(eH);return e!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,e)})),t(n)}var EE=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(EE||{});function iH(n,t){return{\u0275kind:n,\u0275providers:t}}function LD(...n){let t=[Ft,vx,{provide:wE,useExisting:vx},{provide:Fm,useFactory:()=>ct(Hq,{optional:!0})??ct(ME)},{provide:SE,useValue:nH,multi:!0}];for(let e of n)t.push(...e.\u0275providers);return H0(t)}var ID=new Gt("");function VD(){return iH(EE.LegacyInterceptors,[{provide:ID,useFactory:Jq},{provide:SE,useExisting:ID,multi:!0}])}var Gf=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({providers:[LD(VD())]})}return n})();var BD=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(it(gr))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oi=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(oi||{}),ul="*";function UD(n,t=null){return{type:oi.Sequence,steps:n,options:t}}function OE(n){return{type:oi.Style,styles:n,offset:null}}var Hc=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Nm=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==s&&this._onFinish()}),d.onDestroy(()=>{++i==s&&this._onDestroy()}),d.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((d,u)=>Math.max(d,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},$f="!";function jD(n){return new yt(3e3,!1)}function oH(){return new yt(3100,!1)}function aH(){return new yt(3101,!1)}function sH(n){return new yt(3001,!1)}function lH(n){return new yt(3003,!1)}function cH(n){return new yt(3004,!1)}function zD(n,t){return new yt(3005,!1)}function qD(){return new yt(3006,!1)}function HD(){return new yt(3007,!1)}function GD(n,t){return new yt(3008,!1)}function $D(n){return new yt(3002,!1)}function YD(n,t,e,i,r){return new yt(3010,!1)}function JD(){return new yt(3011,!1)}function KD(){return new yt(3012,!1)}function QD(){return new yt(3200,!1)}function XD(){return new yt(3202,!1)}function ZD(){return new yt(3013,!1)}function e8(n){return new yt(3014,!1)}function t8(n){return new yt(3015,!1)}function n8(n){return new yt(3016,!1)}function i8(n,t){return new yt(3404,!1)}function dH(n){return new yt(3502,!1)}function r8(n){return new yt(3503,!1)}function o8(){return new yt(3300,!1)}function a8(n){return new yt(3504,!1)}function s8(n){return new yt(3301,!1)}function l8(n,t){return new yt(3302,!1)}function c8(n){return new yt(3303,!1)}function d8(n,t){return new yt(3400,!1)}function p8(n){return new yt(3401,!1)}function m8(n){return new yt(3402,!1)}function u8(n,t){return new yt(3505,!1)}function Gc(n){switch(n.length){case 0:return new Hc;case 1:return n[0];default:return new Nm(n)}}function DE(n,t,e=new Map,i=new Map){let r=[],s=[],d=-1,u=null;if(t.forEach(h=>{let v=h.get("offset"),C=v==d,O=C&&u||new Map;h.forEach((T,w)=>{let A=w,I=T;if(w!=="offset")switch(A=n.normalizePropertyName(A,r),I){case $f:I=e.get(w);break;case ul:I=i.get(w);break;default:I=n.normalizeStyleValue(w,A,I,r);break}O.set(A,I)}),C||s.push(O),u=O,d=v}),r.length)throw dH(r);return s}function yx(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&TE(e,"start",n)));break;case"done":n.onDone(()=>i(e&&TE(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&TE(e,"destroy",n)));break}}function TE(n,t,e){let i=e.totalTime,r=!!e.disabled,s=Cx(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),d=n._data;return d!=null&&(s._data=d),s}function Cx(n,t,e,i,r="",s=0,d){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!d}}function ja(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function AE(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var pH=typeof document>"u"?null:document.documentElement;function bx(n){let t=n.parentNode||n.host||null;return t===pH?null:t}function mH(n){return n.substring(1,6)=="ebkit"}var cp=null,WD=!1;function g8(n){cp||(cp=uH()||{},WD=cp.style?"WebkitAppearance"in cp.style:!1);let t=!0;return cp.style&&!mH(n)&&(t=n in cp.style,!t&&WD&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cp.style)),t}function uH(){return typeof document<"u"?document.body:null}function RE(n,t){for(;t;){if(t===n)return!0;t=bx(t)}return!1}function FE(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var gH=1e3,NE="{{",fH="}}",LE="ng-enter",Mx="ng-leave",Yf="ng-trigger",Jf=".ng-trigger",VE="ng-animating",Sx=".ng-animating";function Jl(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:kE(parseFloat(t[1]),t[2])}function kE(n,t){switch(t){case"s":return n*gH;default:return n}}function Kf(n,t,e){return n.hasOwnProperty("duration")?n:_H(n,t,e)}var hH=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function _H(n,t,e){let i,r=0,s="";if(typeof n=="string"){let d=n.match(hH);if(d===null)return t.push(jD(n)),{duration:0,delay:0,easing:""};i=kE(parseFloat(d[1]),d[2]);let u=d[3];u!=null&&(r=kE(parseFloat(u),d[4]));let h=d[5];h&&(s=h)}else i=n;if(!e){let d=!1,u=t.length;i<0&&(t.push(oH()),d=!0),r<0&&(t.push(aH()),d=!0),d&&t.splice(u,0,jD(n))}return{duration:i,delay:r,easing:s}}function f8(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function gl(n,t,e){t.forEach((i,r)=>{let s=Px(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function zd(n,t){t.forEach((e,i)=>{let r=Px(i);n.style[r]=""})}function Lm(n){return Array.isArray(n)?n.length==1?n[0]:UD(n):n}function h8(n,t,e){let i=t.params||{},r=BE(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(sH(s))})}var IE=new RegExp(`${NE}\\s*(.+?)\\s*${fH}`,"g");function BE(n){let t=[];if(typeof n=="string"){let e;for(;e=IE.exec(n);)t.push(e[1]);IE.lastIndex=0}return t}function Vm(n,t,e){let i=`${n}`,r=i.replace(IE,(s,d)=>{let u=t[d];return u==null&&(e.push(lH(d)),u=""),u.toString()});return r==i?n:r}var vH=/-+([a-z0-9])/g;function Px(n){return n.replace(vH,(...t)=>t[1].toUpperCase())}function _8(n,t){return n===0||t===0}function v8(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,d)=>{i.has(d)||r.push(d),i.set(d,s)}),r.length)for(let s=1;s<t.length;s++){let d=t[s];r.forEach(u=>d.set(u,wx(n,u)))}}return t}function Wa(n,t,e){switch(t.type){case oi.Trigger:return n.visitTrigger(t,e);case oi.State:return n.visitState(t,e);case oi.Transition:return n.visitTransition(t,e);case oi.Sequence:return n.visitSequence(t,e);case oi.Group:return n.visitGroup(t,e);case oi.Animate:return n.visitAnimate(t,e);case oi.Keyframes:return n.visitKeyframes(t,e);case oi.Style:return n.visitStyle(t,e);case oi.Reference:return n.visitReference(t,e);case oi.AnimateChild:return n.visitAnimateChild(t,e);case oi.AnimateRef:return n.visitAnimateRef(t,e);case oi.Query:return n.visitQuery(t,e);case oi.Stagger:return n.visitStagger(t,e);default:throw cH(t.type)}}function wx(n,t){return window.getComputedStyle(n)[t]}var n3=(()=>{class n{validateStyleProperty(e){return g8(e)}containsElement(e,i){return RE(e,i)}getParentElement(e){return bx(e)}query(e,i,r){return FE(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,d,u=[],h){return new Hc(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),pp=class{static NOOP=new n3},mp=class{};var xH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Ix=class extends mp{normalizePropertyName(t,e){return Px(t)}normalizeStyleValue(t,e,i,r){let s="",d=i.toString().trim();if(xH.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let u=i.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&u[1].length==0&&r.push(zD(t,i))}return d+s}};var Dx="*";function yH(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>CH(i,e,t)):e.push(n),e}function CH(n,t,e){if(n[0]==":"){let h=bH(n,e);if(typeof h=="function"){t.push(h);return}n=h}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(t8(n)),t;let r=i[1],s=i[2],d=i[3];t.push(x8(r,d));let u=r==Dx&&d==Dx;s[0]=="<"&&!u&&t.push(x8(d,r))}function bH(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(n8(n)),"* => *"}}var Ex=new Set(["true","1"]),Ox=new Set(["false","0"]);function x8(n,t){let e=Ex.has(n)||Ox.has(n),i=Ex.has(t)||Ox.has(t);return(r,s)=>{let d=n==Dx||n==r,u=t==Dx||t==s;return!d&&e&&typeof r=="boolean"&&(d=r?Ex.has(n):Ox.has(n)),!u&&i&&typeof s=="boolean"&&(u=s?Ex.has(t):Ox.has(t)),d&&u}}var T8=":self",MH=new RegExp(`s*${T8}s*,?`,"g");function k8(n,t,e,i){return new HE(n).build(t,e,i)}var y8="",HE=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new GE(e);return this._resetContextStyleTimingState(r),Wa(this,Lm(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=y8,t.collectedStyles=new Map,t.collectedStyles.set(y8,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,s=[],d=[];return t.name.charAt(0)=="@"&&e.errors.push(qD()),t.definitions.forEach(u=>{if(this._resetContextStyleTimingState(e),u.type==oi.State){let h=u,v=h.name;v.toString().split(/\s*,\s*/).forEach(C=>{h.name=C,s.push(this.visitState(h,e))}),h.name=v}else if(u.type==oi.Transition){let h=this.visitTransition(u,e);i+=h.queryCount,r+=h.depCount,d.push(h)}else e.errors.push(HD())}),{type:oi.Trigger,name:t.name,states:s,transitions:d,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let s=new Set,d=r||{};i.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{BE(h).forEach(v=>{d.hasOwnProperty(v)||s.add(v)})})}),s.size&&e.errors.push(GD(t.name,[...s.values()]))}return{type:oi.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Wa(this,Lm(t.animation),e),r=yH(t.expr,e.errors);return{type:oi.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:dp(t.options)}}visitSequence(t,e){return{type:oi.Sequence,steps:t.steps.map(i=>Wa(this,i,e)),options:dp(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,s=t.steps.map(d=>{e.currentTime=i;let u=Wa(this,d,e);return r=Math.max(r,e.currentTime),u});return e.currentTime=r,{type:oi.Group,steps:s,options:dp(t.options)}}visitAnimate(t,e){let i=EH(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:OE({});if(s.type==oi.Keyframes)r=this.visitKeyframes(s,e);else{let d=t.styles,u=!1;if(!d){u=!0;let v={};i.easing&&(v.easing=i.easing),d=OE(v)}e.currentTime+=i.duration+i.delay;let h=this.visitStyle(d,e);h.isEmptyStep=u,r=h}return e.currentAnimateTimings=null,{type:oi.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let u of r)typeof u=="string"?u===ul?i.push(u):e.errors.push($D(u)):i.push(new Map(Object.entries(u)));let s=!1,d=null;return i.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(d=u.get("easing"),u.delete("easing")),!s)){for(let h of u.values())if(h.toString().indexOf(NE)>=0){s=!0;break}}}),{type:oi.Style,styles:i,easing:d,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(d=>{typeof d!="string"&&d.forEach((u,h)=>{let v=e.collectedStyles.get(e.currentQuerySelector),C=v.get(h),O=!0;C&&(s!=r&&s>=C.startTime&&r<=C.endTime&&(e.errors.push(YD(h,C.startTime,C.endTime,s,r)),O=!1),s=C.startTime),O&&v.set(h,{startTime:s,endTime:r}),e.options&&h8(u,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:oi.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(JD()),i;let r=1,s=0,d=[],u=!1,h=!1,v=0,C=t.steps.map(B=>{let q=this._makeStyleAst(B,e),K=q.offset!=null?q.offset:wH(q.styles),J=0;return K!=null&&(s++,J=q.offset=K),h=h||J<0||J>1,u=u||J<v,v=J,d.push(J),q});h&&e.errors.push(KD()),u&&e.errors.push(QD());let O=t.steps.length,T=0;s>0&&s<O?e.errors.push(XD()):s==0&&(T=r/(O-1));let w=O-1,A=e.currentTime,I=e.currentAnimateTimings,L=I.duration;return C.forEach((B,q)=>{let K=T>0?q==w?1:T*q:d[q],J=K*L;e.currentTime=A+I.delay+J,I.duration=J,this._validateStyleAst(B,e),B.offset=K,i.styles.push(B)}),i}visitReference(t,e){return{type:oi.Reference,animation:Wa(this,Lm(t.animation),e),options:dp(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:oi.AnimateChild,options:dp(t.options)}}visitAnimateRef(t,e){return{type:oi.AnimateRef,animation:this.visitReference(t.animation,e),options:dp(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,d]=SH(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,ja(e.collectedStyles,e.currentQuerySelector,new Map);let u=Wa(this,Lm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:oi.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:u,originalSelector:t.selector,options:dp(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(ZD());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Kf(t.timings,e.errors,!0);return{type:oi.Stagger,animation:Wa(this,Lm(t.animation),e),timings:i,options:null}}};function SH(n){let t=!!n.split(/\s*,\s*/).find(e=>e==T8);return t&&(n=n.replace(MH,"")),n=n.replace(/@\*/g,Jf).replace(/@\w+/g,e=>Jf+"-"+e.slice(1)).replace(/:animating/g,Sx),[n,t]}function PH(n){return n?me({},n):null}var GE=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function wH(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function EH(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Kf(n,t).duration;return UE(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=UE(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=Kf(e,t);return UE(r.duration,r.delay,r.easing)}function dp(n){return n?(n=me({},n),n.params&&(n.params=PH(n.params))):n={},n}function UE(n,t,e){return{duration:n,delay:t,easing:e}}function i3(n,t,e,i,r,s,d=null,u=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:d,subTimeline:u}}var Xf=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},OH=1,TH=":enter",kH=new RegExp(TH,"g"),IH=":leave",DH=new RegExp(IH,"g");function I8(n,t,e,i,r,s=new Map,d=new Map,u,h,v=[]){return new $E().buildKeyframes(n,t,e,i,r,s,d,u,h,v)}var $E=class{buildKeyframes(t,e,i,r,s,d,u,h,v,C=[]){v=v||new Xf;let O=new YE(t,e,v,r,s,C,[]);O.options=h;let T=h.delay?Jl(h.delay):0;O.currentTimeline.delayNextStep(T),O.currentTimeline.setStyles([d],null,O.errors,h),Wa(this,i,O);let w=O.timelines.filter(A=>A.containsAnimation());if(w.length&&u.size){let A;for(let I=w.length-1;I>=0;I--){let L=w[I];if(L.element===e){A=L;break}}A&&!A.allowOnlyTimelineStyles()&&A.setStyles([u],null,O.errors,h)}return w.length?w.map(A=>A.buildKeyframes()):[i3(e,[],[],[],0,T,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(i,r,r.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let s=r?.delay;if(s){let d=typeof s=="number"?s:Jl(Vm(s,r?.params??{},e.errors));i.delayNextStep(d)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime,d=i.duration!=null?Jl(i.duration):null,u=i.delay!=null?Jl(i.delay):null;return d!==0&&t.forEach(h=>{let v=e.appendInstructionToTimeline(h,d,u);s=Math.max(s,v.duration+v.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Wa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==oi.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ax);let d=Jl(s.delay);r.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>Wa(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?Jl(t.options.delay):0;t.steps.forEach(d=>{let u=e.createSubContext(t.options);s&&u.delayNextStep(s),Wa(this,d,u),r=Math.max(r,u.currentTimeline.currentTime),i.push(u.currentTimeline)}),i.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?Vm(i,e.params,e.errors):i;return Kf(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=t.style;s.type==oi.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,u=e.createSubContext().currentTimeline;u.easing=i.easing,t.styles.forEach(h=>{let v=h.offset||0;u.forwardTime(v*s),u.setStyles(h.styles,h.easing,e.errors,e.options),u.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(u),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Jl(r.delay):0;s&&(e.previousNode.type===oi.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ax);let d=i,u=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=u.length;let h=null;u.forEach((v,C)=>{e.currentQueryIndex=C;let O=e.createSubContext(t.options,v);s&&O.delayNextStep(s),v===e.element&&(h=O.currentTimeline),Wa(this,t.animation,O),O.currentTimeline.applyStylesToKeyframe();let T=O.currentTimeline.currentTime;d=Math.max(d,T)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),h&&(e.currentTimeline.mergeTimelineCollectedStyles(h),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,s=t.timings,d=Math.abs(s.duration),u=d*(e.currentQueryTotal-1),h=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=u-h;break;case"full":h=i.currentStaggerTime;break}let C=e.currentTimeline;h&&C.delayNextStep(h);let O=C.currentTime;Wa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-O+(r.startTime-i.currentTimeline.startTime)}},Ax={},YE=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ax;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,s,d,u,h){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=d,this.timelines=u,this.currentTimeline=h||new Rx(this._driver,e,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=Jl(i.duration)),i.delay!=null&&(r.delay=Jl(i.delay));let s=i.params;if(s){let d=r.params;d||(d=this.options.params={}),Object.keys(s).forEach(u=>{(!e||!d.hasOwnProperty(u))&&(d[u]=Vm(s[u],d,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Ax,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new JE(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,d){let u=[];if(r&&u.push(this.element),t.length>0){t=t.replace(kH,"."+this._enterClassName),t=t.replace(DH,"."+this._leaveClassName);let h=i!=1,v=this._driver.query(this.element,t,h);i!==0&&(v=i<0?v.slice(v.length+i,v.length):v.slice(0,i)),u.push(...v)}return!s&&u.length==0&&d.push(e8(e)),u}},Rx=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=OH,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||ul),this._currentKeyframe.set(e,ul);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},d=AH(t,this._globalTimelineStyles);for(let[u,h]of d){let v=Vm(h,s,i);this._pendingStyles.set(u,v),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??ul),this._updateStyle(u,v)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((u,h)=>{let v=new Map([...this._backFill,...u]);v.forEach((C,O)=>{C===$f?t.add(O):C===ul&&e.add(O)}),i||v.set("offset",h/this.duration),r.push(v)});let s=[...t.values()],d=[...e.values()];if(i){let u=r[0],h=new Map(u);u.set("offset",0),h.set("offset",1),r=[u,h]}return i3(this.element,r,s,d,this.duration,this.startTime,this.easing,!1)}},JE=class extends Rx{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,s,d,u=!1){super(t,e,d.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],d=i+e,u=e/d,h=new Map(t[0]);h.set("offset",0),s.push(h);let v=new Map(t[0]);v.set("offset",C8(u)),s.push(v);let C=t.length-1;for(let O=1;O<=C;O++){let T=new Map(t[O]),w=T.get("offset"),A=e+w*i;T.set("offset",C8(A/d)),s.push(T)}i=d,e=0,r="",t=s}return i3(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function C8(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function AH(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let s of i)e.set(s,ul)}else for(let[s,d]of r)e.set(s,d)}),e}function b8(n,t,e,i,r,s,d,u,h,v,C,O,T){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:d,timelines:u,queriedElements:h,preStyleProps:v,postStyleProps:C,totalTime:O,errors:T}}var jE={},Fx=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return RH(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,d,u,h,v,C){let O=[],T=this.ast.options&&this.ast.options.params||jE,w=u&&u.params||jE,A=this.buildStyles(i,w,O),I=h&&h.params||jE,L=this.buildStyles(r,I,O),B=new Set,q=new Map,K=new Map,J=r==="void",Me={params:D8(I,T),delay:this.ast.options?.delay},ze=C?[]:I8(t,e,this.ast.animation,s,d,A,L,Me,v,O),oe=0;return ze.forEach(ae=>{oe=Math.max(ae.duration+ae.delay,oe)}),O.length?b8(e,this._triggerName,i,r,J,A,L,[],[],q,K,oe,O):(ze.forEach(ae=>{let X=ae.element,pe=ja(q,X,new Set);ae.preStyleProps.forEach(Z=>pe.add(Z));let z=ja(K,X,new Set);ae.postStyleProps.forEach(Z=>z.add(Z)),X!==e&&B.add(X)}),b8(e,this._triggerName,i,r,J,A,L,ze,[...B.values()],q,K,oe))}};function RH(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}function D8(n,t){let e=me({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var KE=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=D8(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((d,u)=>{d&&(d=Vm(d,r,e));let h=this.normalizer.normalizePropertyName(u,e);d=this.normalizer.normalizeStyleValue(u,h,d,e),i.set(u,d)})}),i}};function FH(n,t,e){return new QE(n,t,e)}var QE=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new KE(r.style,s,i))}),M8(this.states,"true","1"),M8(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Fx(t,r,this.states))}),this.fallbackTransition=NH(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(d=>d.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function NH(n,t,e){let i=[(d,u)=>!0],r={type:oi.Sequence,steps:[],options:null},s={type:oi.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Fx(n,s,t)}function M8(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var LH=new Xf,XE=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],s=k8(this._driver,e,i,r);if(i.length)throw r8(i);this._animations.set(t,s)}_buildPlayer(t,e,i){let r=t.element,s=DE(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],s=this._animations.get(t),d,u=new Map;if(s?(d=I8(this._driver,e,s,LE,Mx,new Map,new Map,i,LH,r),d.forEach(C=>{let O=ja(u,C.element,new Map);C.postStyleProps.forEach(T=>O.set(T,null))})):(r.push(o8()),d=[]),r.length)throw a8(r);u.forEach((C,O)=>{C.forEach((T,w)=>{C.set(w,this._driver.computeStyle(O,w,ul))})});let h=d.map(C=>{let O=u.get(C.element);return this._buildPlayer(C,new Map,O)}),v=Gc(h);return this._playersById.set(t,v),v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw s8(t);return e}listen(t,e,i,r){let s=Cx(e,"","","");return yx(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let d=r[0]||{};this.create(t,e,d);return}let s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},S8="ng-animate-queued",VH=".ng-animate-queued",WE="ng-animate-disabled",BH=".ng-animate-disabled",UH="ng-star-inserted",jH=".ng-star-inserted",WH=[],A8={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fl="__ng_removed",Zf=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=HH(r),i){let s=t,{value:d}=s,u=tS(s,["value"]);this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},Qf="void",zE=new Zf(Qf),ZE=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,Rs(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw l8(i,e);if(i==null||i.length==0)throw c8(e);if(!GH(i))throw d8(i,e);let s=ja(this._elementListeners,t,[]),d={name:e,phase:i,callback:r};s.push(d);let u=ja(this._engine.statesByElement,t,new Map);return u.has(e)||(Rs(t,Yf),Rs(t,Yf+"-"+e),u.set(e,zE)),()=>{this._engine.afterFlush(()=>{let h=s.indexOf(d);h>=0&&s.splice(h,1),this._triggers.has(e)||u.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw p8(t);return e}trigger(t,e,i,r=!0){let s=this._getTrigger(e),d=new eh(this.id,e,t),u=this._engine.statesByElement.get(t);u||(Rs(t,Yf),Rs(t,Yf+"-"+e),this._engine.statesByElement.set(t,u=new Map));let h=u.get(e),v=new Zf(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&h&&v.absorbOptions(h.options),u.set(e,v),h||(h=zE),!(v.value===Qf)&&h.value===v.value){if(!JH(h.params,v.params)){let I=[],L=s.matchStyles(h.value,h.params,I),B=s.matchStyles(v.value,v.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{zd(t,L),gl(t,B)})}return}let T=ja(this._engine.playersByElement,t,[]);T.forEach(I=>{I.namespaceId==this.id&&I.triggerName==e&&I.queued&&I.destroy()});let w=s.matchTransition(h.value,v.value,t,v.params),A=!1;if(!w){if(!r)return;w=s.fallbackTransition,A=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:w,fromState:h,toState:v,player:d,isFallbackTransition:A}),A||(Rs(t,S8),d.onStart(()=>{Bm(t,S8)})),d.onDone(()=>{let I=this.players.indexOf(d);I>=0&&this.players.splice(I,1);let L=this._engine.playersByElement.get(t);if(L){let B=L.indexOf(d);B>=0&&L.splice(B,1)}}),this.players.push(d),T.push(d),d}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,Jf,!0);i.forEach(r=>{if(r[fl])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let s=this._engine.statesByElement.get(t),d=new Map;if(s){let u=[];if(s.forEach((h,v)=>{if(d.set(v,h.value),this._triggers.has(v)){let C=this.trigger(t,v,Qf,r);C&&u.push(C)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,d),i&&Gc(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(s=>{let d=s.name;if(r.has(d))return;r.add(d);let h=this._triggers.get(d).fallbackTransition,v=i.get(d)||zE,C=new Zf(Qf),O=new eh(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:h,fromState:v,toState:C,player:O,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let d=t;for(;d=d.parentNode;)if(i.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let s=t[fl];(!s||s===A8)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Rs(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,d=this._elementListeners.get(s);d&&d.forEach(u=>{if(u.name==i.triggerName){let h=Cx(s,i.triggerName,i.fromState.value,i.toState.value);h._data=t,yx(i.player,u.phase,h,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,d=r.transition.ast.depCount;return s==0||d==0?s-d:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},e3=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new ZE(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let d=!1,u=this.driver.getParentElement(e);for(;u;){let h=r.get(u);if(h){let v=i.indexOf(h);i.splice(v+1,0,t),d=!0;break}u=this.driver.getParentElement(u)}d||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,i,r){if(Tx(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Tx(e))return;let s=e[fl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){let d=this._fetchNamespace(t);d&&d.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Rs(t,WE)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Bm(t,WE))}removeNode(t,e,i){if(Tx(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[fl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return Tx(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Jf,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Sx,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Gc(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[fl];if(e&&e.setForRemoval){if(t[fl]=A8,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(WE)&&this.markElementAsDisabled(t,!1),this.driver.query(t,BH,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Rs(r,UH)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Gc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw m8(t)}_flushAnimations(t,e){let i=new Xf,r=[],s=new Map,d=[],u=new Map,h=new Map,v=new Map,C=new Set;this.disabledNodes.forEach(De=>{C.add(De);let Fe=this.driver.query(De,VH,!0);for(let Te=0;Te<Fe.length;Te++)C.add(Fe[Te])});let O=this.bodyNode,T=Array.from(this.statesByElement.keys()),w=E8(T,this.collectedEnterElements),A=new Map,I=0;w.forEach((De,Fe)=>{let Te=LE+I++;A.set(Fe,Te),De.forEach(Je=>Rs(Je,Te))});let L=[],B=new Set,q=new Set;for(let De=0;De<this.collectedLeaveElements.length;De++){let Fe=this.collectedLeaveElements[De],Te=Fe[fl];Te&&Te.setForRemoval&&(L.push(Fe),B.add(Fe),Te.hasAnimation?this.driver.query(Fe,jH,!0).forEach(Je=>B.add(Je)):q.add(Fe))}let K=new Map,J=E8(T,Array.from(B));J.forEach((De,Fe)=>{let Te=Mx+I++;K.set(Fe,Te),De.forEach(Je=>Rs(Je,Te))}),t.push(()=>{w.forEach((De,Fe)=>{let Te=A.get(Fe);De.forEach(Je=>Bm(Je,Te))}),J.forEach((De,Fe)=>{let Te=K.get(Fe);De.forEach(Je=>Bm(Je,Te))}),L.forEach(De=>{this.processLeaveNode(De)})});let Me=[],ze=[];for(let De=this._namespaceList.length-1;De>=0;De--)this._namespaceList[De].drainQueuedTransitions(e).forEach(Te=>{let Je=Te.player,_t=Te.element;if(Me.push(Je),this.collectedEnterElements.length){let we=_t[fl];if(we&&we.setForMove){if(we.previousTriggersValues&&we.previousTriggersValues.has(Te.triggerName)){let qe=we.previousTriggersValues.get(Te.triggerName),Ae=this.statesByElement.get(Te.element);if(Ae&&Ae.has(Te.triggerName)){let Re=Ae.get(Te.triggerName);Re.value=qe,Ae.set(Te.triggerName,Re)}}Je.destroy();return}}let pt=!O||!this.driver.containsElement(O,_t),U=K.get(_t),Q=A.get(_t),W=this._buildInstruction(Te,i,Q,U,pt);if(W.errors&&W.errors.length){ze.push(W);return}if(pt){Je.onStart(()=>zd(_t,W.fromStyles)),Je.onDestroy(()=>gl(_t,W.toStyles)),r.push(Je);return}if(Te.isFallbackTransition){Je.onStart(()=>zd(_t,W.fromStyles)),Je.onDestroy(()=>gl(_t,W.toStyles)),r.push(Je);return}let Y=[];W.timelines.forEach(we=>{we.stretchStartingKeyframe=!0,this.disabledNodes.has(we.element)||Y.push(we)}),W.timelines=Y,i.append(_t,W.timelines);let ue={instruction:W,player:Je,element:_t};d.push(ue),W.queriedElements.forEach(we=>ja(u,we,[]).push(Je)),W.preStyleProps.forEach((we,qe)=>{if(we.size){let Ae=h.get(qe);Ae||h.set(qe,Ae=new Set),we.forEach((Re,gt)=>Ae.add(gt))}}),W.postStyleProps.forEach((we,qe)=>{let Ae=v.get(qe);Ae||v.set(qe,Ae=new Set),we.forEach((Re,gt)=>Ae.add(gt))})});if(ze.length){let De=[];ze.forEach(Fe=>{De.push(u8(Fe.triggerName,Fe.errors))}),Me.forEach(Fe=>Fe.destroy()),this.reportError(De)}let oe=new Map,ae=new Map;d.forEach(De=>{let Fe=De.element;i.has(Fe)&&(ae.set(Fe,Fe),this._beforeAnimationBuild(De.player.namespaceId,De.instruction,oe))}),r.forEach(De=>{let Fe=De.element;this._getPreviousPlayers(Fe,!1,De.namespaceId,De.triggerName,null).forEach(Je=>{ja(oe,Fe,[]).push(Je),Je.destroy()})});let X=L.filter(De=>O8(De,h,v)),pe=new Map;w8(pe,this.driver,q,v,ul).forEach(De=>{O8(De,h,v)&&X.push(De)});let Z=new Map;w.forEach((De,Fe)=>{w8(Z,this.driver,new Set(De),h,$f)}),X.forEach(De=>{let Fe=pe.get(De),Te=Z.get(De);pe.set(De,new Map([...Fe?.entries()??[],...Te?.entries()??[]]))});let ge=[],Pe=[],Ve={};d.forEach(De=>{let{element:Fe,player:Te,instruction:Je}=De;if(i.has(Fe)){if(C.has(Fe)){Te.onDestroy(()=>gl(Fe,Je.toStyles)),Te.disabled=!0,Te.overrideTotalTime(Je.totalTime),r.push(Te);return}let _t=Ve;if(ae.size>1){let U=Fe,Q=[];for(;U=U.parentNode;){let W=ae.get(U);if(W){_t=W;break}Q.push(U)}Q.forEach(W=>ae.set(W,_t))}let pt=this._buildAnimation(Te.namespaceId,Je,oe,s,Z,pe);if(Te.setRealPlayer(pt),_t===Ve)ge.push(Te);else{let U=this.playersByElement.get(_t);U&&U.length&&(Te.parentPlayer=Gc(U)),r.push(Te)}}else zd(Fe,Je.fromStyles),Te.onDestroy(()=>gl(Fe,Je.toStyles)),Pe.push(Te),C.has(Fe)&&r.push(Te)}),Pe.forEach(De=>{let Fe=s.get(De.element);if(Fe&&Fe.length){let Te=Gc(Fe);De.setRealPlayer(Te)}}),r.forEach(De=>{De.parentPlayer?De.syncPlayerEvents(De.parentPlayer):De.destroy()});for(let De=0;De<L.length;De++){let Fe=L[De],Te=Fe[fl];if(Bm(Fe,Mx),Te&&Te.hasAnimation)continue;let Je=[];if(u.size){let pt=u.get(Fe);pt&&pt.length&&Je.push(...pt);let U=this.driver.query(Fe,Sx,!0);for(let Q=0;Q<U.length;Q++){let W=u.get(U[Q]);W&&W.length&&Je.push(...W)}}let _t=Je.filter(pt=>!pt.destroyed);_t.length?$H(this,Fe,_t):this.processLeaveNode(Fe)}return L.length=0,ge.forEach(De=>{this.players.push(De),De.onDone(()=>{De.destroy();let Fe=this.players.indexOf(De);this.players.splice(Fe,1)}),De.play()}),ge}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let d=[];if(e){let u=this.playersByQueriedElement.get(t);u&&(d=u)}else{let u=this.playersByElement.get(t);if(u){let h=!s||s==Qf;u.forEach(v=>{v.queued||!h&&v.triggerName!=r||d.push(v)})}}return(i||r)&&(d=d.filter(u=>!(i&&i!=u.namespaceId||r&&r!=u.triggerName))),d}_beforeAnimationBuild(t,e,i){let r=e.triggerName,s=e.element,d=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:r;for(let h of e.timelines){let v=h.element,C=v!==s,O=ja(i,v,[]);this._getPreviousPlayers(v,C,d,u,e.toState).forEach(w=>{let A=w.getRealPlayer();A.beforeDestroy&&A.beforeDestroy(),w.destroy(),O.push(w)})}zd(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,d){let u=e.triggerName,h=e.element,v=[],C=new Set,O=new Set,T=e.timelines.map(A=>{let I=A.element;C.add(I);let L=I[fl];if(L&&L.removedBeforeQueried)return new Hc(A.duration,A.delay);let B=I!==h,q=YH((i.get(I)||WH).map(oe=>oe.getRealPlayer())).filter(oe=>{let ae=oe;return ae.element?ae.element===I:!1}),K=s.get(I),J=d.get(I),Me=DE(this._normalizer,A.keyframes,K,J),ze=this._buildPlayer(A,Me,q);if(A.subTimeline&&r&&O.add(I),B){let oe=new eh(t,u,I);oe.setRealPlayer(ze),v.push(oe)}return ze});v.forEach(A=>{ja(this.playersByQueriedElement,A.element,[]).push(A),A.onDone(()=>qH(this.playersByQueriedElement,A.element,A))}),C.forEach(A=>Rs(A,VE));let w=Gc(T);return w.onDestroy(()=>{C.forEach(A=>Bm(A,VE)),gl(h,e.toStyles)}),O.forEach(A=>{ja(r,A,[]).push(w)}),w}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Hc(t.duration,t.delay)}},eh=class{namespaceId;triggerName;element;_player=new Hc;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>yx(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ja(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function qH(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function HH(n){return n??null}function Tx(n){return n&&n.nodeType===1}function GH(n){return n=="start"||n=="done"}function P8(n,t){let e=n.style.display;return n.style.display=t??"none",e}function w8(n,t,e,i,r){let s=[];e.forEach(h=>s.push(P8(h)));let d=[];i.forEach((h,v)=>{let C=new Map;h.forEach(O=>{let T=t.computeStyle(v,O,r);C.set(O,T),(!T||T.length==0)&&(v[fl]=zH,d.push(v))}),n.set(v,C)});let u=0;return e.forEach(h=>P8(h,s[u++])),d}function E8(n,t){let e=new Map;if(n.forEach(u=>e.set(u,[])),t.length==0)return e;let i=1,r=new Set(t),s=new Map;function d(u){if(!u)return i;let h=s.get(u);if(h)return h;let v=u.parentNode;return e.has(v)?h=v:r.has(v)?h=i:h=d(v),s.set(u,h),h}return t.forEach(u=>{let h=d(u);h!==i&&e.get(h).push(u)}),e}function Rs(n,t){n.classList?.add(t)}function Bm(n,t){n.classList?.remove(t)}function $H(n,t,e){Gc(e).onDone(()=>n.processLeaveNode(t))}function YH(n){let t=[];return R8(n,t),t}function R8(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof Nm?R8(i.players,t):t.push(i)}}function JH(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function O8(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}var Um=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new e3(t.body,e,i),this._timelineEngine=new XE(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){let d=t+"-"+r,u=this._triggerCache[d];if(!u){let h=[],v=[],C=k8(this._driver,s,h,v);if(h.length)throw i8(r,h);u=FH(r,C,this._normalizer),this._triggerCache[d]=u}this._transitionEngine.registerTrigger(e,r,u)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[s,d]=AE(i),u=r;this._timelineEngine.command(s,e,d,u)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if(i.charAt(0)=="@"){let[d,u]=AE(i);return this._timelineEngine.listen(d,e,u,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function KH(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=qE(t[0]),t.length>1&&(i=qE(t[t.length-1]))):t instanceof Map&&(e=qE(t)),e||i?new QH(n,e,i):null}var QH=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(zd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zd(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n})();function qE(n){let t=null;return n.forEach((e,i)=>{XH(i)&&(t=t||new Map,t.set(i,e))}),t}function XH(n){return n==="display"||n==="position"}var Nx=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let t=this.keyframes,e=this._triggerWebAnimation(this.element,t,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=t.length?t[t.length-1]:new Map;let i=()=>this._onFinish();return e.addEventListener("finish",i),this.onDestroy(()=>{e.removeEventListener("finish",i)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){let r=this._convertKeyframesToObject(e);try{return t.animate(r,i)}catch{return null}}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){let t=this._buildPlayer();t&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),t.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=t*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:wx(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Lx=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return RE(t,e)}getParentElement(t){return bx(t)}query(t,e,i){return FE(t,e,i)}computeStyle(t,e,i){return wx(t,e)}animate(t,e,i,r,s,d=[]){let u=r==0?"both":"forwards",h={duration:i,delay:r,fill:u};s&&(h.easing=s);let v=new Map,C=d.filter(w=>w instanceof Nx);_8(i,r)&&C.forEach(w=>{w.currentSnapshot.forEach((A,I)=>v.set(I,A))});let O=f8(e).map(w=>new Map(w));O=v8(t,O,v);let T=KH(t,O);return new Nx(t,O,h,T)}};var kx="@",F8="@.disabled",Vx=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i,r){if(r){this.delegate.removeChild(t,e,i,r);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==kx&&e==F8?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},t3=class extends Vx{factory;constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==kx?e.charAt(1)=="."&&e==F8?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==kx){let s=ZH(t),d=e.slice(1),u="";return d.charAt(0)!=kx&&([d,u]=eG(d)),this.engine.listen(this.namespaceId,s,d,u,h=>{let v=h._data||-1;this.factory.scheduleListenerCallback(v,i,h)})}return this.delegate.listen(t,e,i,r)}};function ZH(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function eG(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var Bx=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(t,e){let r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let v=this._rendererCache,C=v.get(r);if(!C){let O=()=>v.delete(r);C=new Vx("",r,this.engine,O),v.set(r,C)}return C}let s=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);let u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(s,d,t,v.name,v)};return e.data.animation.forEach(u),new t3(this,d,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[d,u]=s;d(u)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var nG=(()=>{class n extends Um{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(it(gr),it(pp),it(mp))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function iG(){return new Ix}function rG(){return new Bx(ct(Wf),ct(Um),ct(Jr))}var L8=[{provide:mp,useFactory:iG},{provide:Um,useClass:nG},{provide:jc,useFactory:rG}],oG=[{provide:pp,useClass:n3},{provide:Iv,useValue:"NoopAnimations"},...L8],N8=[{provide:pp,useFactory:()=>new Lx},{provide:Iv,useFactory:()=>"BrowserAnimations"},...L8],V8=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?oG:N8}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({providers:N8,imports:[qf]})}return n})();var $8=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(V(ll),V(as))};static \u0275dir=ui({type:n})}return n})(),sh=(()=>{class n extends $8{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,features:[xo]})}return n})(),qm=new Gt(""),aG={provide:qm,useExisting:Bo(()=>Yt),multi:!0},Yt=(()=>{class n extends sh{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&x("change",function(d){return r.onChange(d.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Va([aG]),xo]})}return n})(),sG={provide:qm,useExisting:Bo(()=>Ie),multi:!0};function lG(){let n=ss()?ss().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var cG=new Gt(""),Ie=(()=>{class n extends $8{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!lG())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(V(ll),V(as),V(cG,8))};static \u0275dir=ui({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&x("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},standalone:!1,features:[Va([sG]),xo]})}return n})();function Y8(n){return n==null||J8(n)===0}function J8(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var up=new Gt(""),K8=new Gt("");function dG(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function pG(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function mG(n){return Y8(n.value)?{required:!0}:null}function uG(n){return t=>{let e=t.value?.length??J8(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function gG(n){if(!n)return r3;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Y8(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function r3(n){return null}function Q8(n){return n!=null}function X8(n){return Vd(n)?Er(n):n}function Z8(n){let t={};return n.forEach(e=>{t=e!=null?me(me({},t),e):t}),Object.keys(t).length===0?null:t}function eA(n,t){return t.map(e=>e(n))}function fG(n){return!n.validate}function tA(n){return n.map(t=>fG(t)?t:e=>t.validate(e))}function hG(n){if(!n)return null;let t=n.filter(Q8);return t.length==0?null:function(e){return Z8(eA(e,t))}}function s3(n){return n!=null?hG(tA(n)):null}function _G(n){if(!n)return null;let t=n.filter(Q8);return t.length==0?null:function(e){let i=eA(e,t).map(X8);return fo(i).pipe(ii(Z8))}}function l3(n){return n!=null?_G(tA(n)):null}function B8(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function vG(n){return n._rawValidators}function xG(n){return n._rawAsyncValidators}function o3(n){return n?Array.isArray(n)?n:[n]:[]}function jx(n,t){return Array.isArray(n)?n.includes(t):n===t}function U8(n,t){let e=o3(t);return o3(n).forEach(r=>{jx(e,r)||e.push(r)}),e}function j8(n,t){return o3(t).filter(e=>!jx(n,e))}var Wx=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=s3(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=l3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},zm=class extends Wx{name;get formDirective(){return null}get path(){return null}},ah=class extends Wx{_parent=null;name=null;valueAccessor=null},zx=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Oe=(()=>{class n extends zx{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(V(ah,2))};static \u0275dir=ui({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ie("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[xo]})}return n})(),di=(()=>{class n extends zx{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(V(zm,10))};static \u0275dir=ui({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ie("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[xo]})}return n})();var th="VALID",Ux="INVALID",jm="PENDING",nh="DISABLED",qd=class{},qx=class extends qd{value;source;constructor(t,e){super(),this.value=t,this.source=e}},rh=class extends qd{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},oh=class extends qd{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Wm=class extends qd{status;source;constructor(t,e){super(),this.status=t,this.source=e}},a3=class extends qd{source;constructor(t){super(),this.source=t}},Hx=class extends qd{source;constructor(t){super(),this.source=t}};function nA(n){return(Yx(n)?n.validators:n)||null}function yG(n){return Array.isArray(n)?s3(n):n||null}function iA(n,t){return(Yx(t)?t.asyncValidators:n)||null}function CG(n){return Array.isArray(n)?l3(n):n||null}function Yx(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function bG(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new yt(1e3,"");if(!i[e])throw new yt(1001,"")}function MG(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new yt(1002,"")})}var Gx=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return lo(this.statusReactive)}set status(t){lo(()=>this.statusReactive.set(t))}_status=Im(()=>this.statusReactive());statusReactive=Ds(void 0);get valid(){return this.status===th}get invalid(){return this.status===Ux}get pending(){return this.status==jm}get disabled(){return this.status===nh}get enabled(){return this.status!==nh}errors;get pristine(){return lo(this.pristineReactive)}set pristine(t){lo(()=>this.pristineReactive.set(t))}_pristine=Im(()=>this.pristineReactive());pristineReactive=Ds(!0);get dirty(){return!this.pristine}get touched(){return lo(this.touchedReactive)}set touched(t){lo(()=>this.touchedReactive.set(t))}_touched=Im(()=>this.touchedReactive());touchedReactive=Ds(!1);get untouched(){return!this.touched}_events=new Oi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(U8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(U8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(j8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(j8(t,this._rawAsyncValidators))}hasValidator(t){return jx(this._rawValidators,t)}hasAsyncValidator(t){return jx(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Tt(me({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new oh(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new oh(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Tt(me({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new rh(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new rh(!0,i))}markAsPending(t={}){this.status=jm;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wm(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Tt(me({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=nh,this.errors=null,this._forEachChild(r=>{r.disable(Tt(me({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new qx(this.value,i)),this._events.next(new Wm(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Tt(me({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=th,this._forEachChild(i=>{i.enable(Tt(me({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Tt(me({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===th||this.status===jm)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new qx(this.value,e)),this._events.next(new Wm(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Tt(me({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nh:th}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=jm,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=X8(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Wm(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new hi,this.statusChanges=new hi}_calculateStatus(){return this._allControlsDisabled()?nh:this.errors?Ux:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jm)?jm:this._anyControlsHaveStatus(Ux)?Ux:th}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new rh(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new oh(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yx(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=yG(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=CG(this._rawAsyncValidators)}},$x=class extends Gx{constructor(t,e,i){super(nA(e),iA(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){MG(this,!0,t),Object.keys(t).forEach(i=>{bG(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,Tt(me({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Hx(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Jx=new Gt("",{factory:()=>Kx}),Kx="always";function SG(n,t){return[...t.path,n]}function rA(n,t,e=Kx){oA(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),wG(n,t),OG(n,t),EG(n,t),PG(n,t)}function W8(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function PG(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function oA(n,t){let e=vG(n);t.validator!==null?n.setValidators(B8(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=xG(n);t.asyncValidator!==null?n.setAsyncValidators(B8(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();W8(t._rawValidators,r),W8(t._rawAsyncValidators,r)}function wG(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aA(n,t)})}function EG(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aA(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function aA(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OG(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function TG(n,t){n==null,oA(n,t)}function kG(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function IG(n){return Object.getPrototypeOf(n.constructor)===sh}function DG(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function AG(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Ie?e=s:IG(s)?i=s:r=s}),r||i||e||null}var RG={provide:zm,useExisting:Bo(()=>li)},ih=Promise.resolve(),li=(()=>{class n extends zm{callSetDisabledState;get submitted(){return lo(this.submittedReactive)}_submitted=Im(()=>this.submittedReactive());submittedReactive=Ds(!1);_directives=new Set;form;ngSubmit=new hi;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new $x({},s3(e),l3(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ih.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),rA(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ih.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ih.then(()=>{let i=this._findContainer(e.path),r=new $x({});TG(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ih.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){ih.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),DG(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new a3(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(V(up,10),V(K8,10),V(Jx,8))};static \u0275dir=ui({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&x("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Va([RG]),xo]})}return n})();function z8(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function q8(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var FG=class extends Gx{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(nA(e),iA(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yx(e)&&(e.nonNullable||e.initialValueIsDefault)&&(q8(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new Hx(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){z8(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){z8(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){q8(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var NG={provide:ah,useExisting:Bo(()=>Ee)},H8=Promise.resolve(),Ee=(()=>{class n extends ah{_changeDetectorRef;callSetDisabledState;control=new FG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new hi;constructor(e,i,r,s,d,u){super(),this._changeDetectorRef=d,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=AG(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),kG(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){H8.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Bd(i);H8.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?SG(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(V(zm,9),V(up,10),V(K8,10),V(qm,10),V(dt,8),V(Jx,8))};static \u0275dir=ui({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Va([NG]),xo,Gl]})}return n})();var pi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ui({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),LG={provide:qm,useExisting:Bo(()=>Mt),multi:!0},Mt=(()=>{class n extends sh{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&x("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Va([LG]),xo]})}return n})();var VG=new Gt("");var BG={provide:qm,useExisting:Bo(()=>Ue),multi:!0};function sA(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function UG(n){return n.split(":")[0]}var Ue=(()=>{class n extends sh{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=ct(Yl).injector;destroyRef=ct(ks);cdr=ct(dt);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Pf({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=sA(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=UG(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&x("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Va([BG]),xo]})}return n})(),je=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(sA(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(V(as),V(ll),V(Ue,9))};static \u0275dir=ui({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),jG={provide:qm,useExisting:Bo(()=>lA),multi:!0};function G8(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function WG(n){return n.split(":")[0]}var lA=(()=>{class n extends sh{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,d)=>{s._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let d=s;for(let u=0;u<d.length;u++){let h=d[u],v=this._getOptionValue(h.value);r.push(v)}}else{let d=i.options;for(let u=0;u<d.length;u++){let h=d[u];if(h.selected){let v=this._getOptionValue(h.value);r.push(v)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=WG(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&x("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Va([jG]),xo]})}return n})(),We=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(G8(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(G8(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(V(as),V(ll),V(lA,9))};static \u0275dir=ui({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function zG(n){return typeof n=="number"?n:parseInt(n,10)}function cA(n){return typeof n=="number"?n:parseFloat(n)}var lh=(()=>{class n{_validator=r3;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):r3,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ui({type:n,features:[Gl]})}return n})(),qG={provide:up,useExisting:Bo(()=>fr),multi:!0},fr=(()=>{class n extends lh{max;inputName="max";normalizeInput=e=>cA(e);createValidator=e=>pG(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ca("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Va([qG]),xo]})}return n})(),HG={provide:up,useExisting:Bo(()=>Xt),multi:!0},Xt=(()=>{class n extends lh{min;inputName="min";normalizeInput=e=>cA(e);createValidator=e=>dG(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ca("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Va([HG]),xo]})}return n})(),GG={provide:up,useExisting:Bo(()=>cn),multi:!0};var cn=(()=>{class n extends lh{required;inputName="required";normalizeInput=Bd;createValidator=e=>mG;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Ca("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Va([GG]),xo]})}return n})();var $G={provide:up,useExisting:Bo(()=>c3),multi:!0},c3=(()=>{class n extends lh{maxlength;inputName="maxlength";normalizeInput=e=>zG(e);createValidator=e=>uG(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ca("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Va([$G]),xo]})}return n})(),YG={provide:up,useExisting:Bo(()=>d3),multi:!0},d3=(()=>{class n extends lh{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>gG(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275dir=ui({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ca("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Va([YG]),xo]})}return n})();var dA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({})}return n})();var Vt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Jx,useValue:e.callSetDisabledState??Kx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({imports:[dA]})}return n})(),pA=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:VG,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Jx,useValue:e.callSetDisabledState??Kx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({imports:[dA]})}return n})();var ph=class{},JG=(()=>{class n{handle(e){return e.key}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Hm=class{},KG=(()=>{class n extends Hm{compile(e,i){return e}compileTranslations(e,i){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Gd=class{},QG=(()=>{class n extends Gd{getTranslation(e){return Zt({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function Qx(n,t){if(n===t)return!0;if(n===null||t===null)return!1;if(n!==n&&t!==t)return!0;let e=typeof n,i=typeof t,r;if(e==i&&e=="object")if(Array.isArray(n)){if(!Array.isArray(t))return!1;if((r=n.length)==t.length){for(let s=0;s<r;s++)if(!Qx(n[s],t[s]))return!1;return!0}}else{if(Array.isArray(t))return!1;if($c(n)&&$c(t)){let s=Object.create(null);for(let d in n){if(!Qx(n[d],t[d]))return!1;s[d]=!0}for(let d in t)if(!(d in s)&&typeof t[d]<"u")return!1;return!0}}return!1}function Hd(n){return typeof n<"u"&&n!==null}function mA(n){return n!==void 0}function $c(n){return dh(n)&&!gp(n)&&n!==null}function dh(n){return typeof n=="object"&&n!==null}function gp(n){return Array.isArray(n)}function Xx(n){return typeof n=="string"}function XG(n){return typeof n=="function"}function Zx(n){if(gp(n))return n.map(t=>Zx(t));if($c(n)){let t={};return Object.keys(n).forEach(e=>{t[e]=Zx(n[e])}),t}else return n}function u3(n,t){if(!dh(n))return Zx(t);let e=Zx(n);return dh(e)&&dh(t)&&Object.keys(t).forEach(i=>{$c(t[i])?i in n?e[i]=u3(n[i],t[i]):Object.assign(e,{[i]:t[i]}):Object.assign(e,{[i]:t[i]})}),e}function gA(n,t){let e=t.split(".");t="";do{t+=e.shift();let i=!e.length;if(Hd(n)){if($c(n)&&mA(n[t])&&($c(n[t])||gp(n[t])||i)){n=n[t],t="";continue}if(gp(n)){let r=parseInt(t,10);if(mA(n[r])&&($c(n[r])||gp(n[r])||i)){n=n[r],t="";continue}}}if(i){n=void 0;continue}t+="."}while(e.length);return n}function ZG(n,t,e){return u3(n,e$(t,e))}function e$(n,t){return n.split(".").reduceRight((e,i)=>({[i]:e}),t)}var Gm=class{},t$=(()=>{class n extends Gm{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,i){if(Xx(e))return this.interpolateString(e,i);if(XG(e))return this.interpolateFunction(e,i)}interpolateFunction(e,i){return e(i)}interpolateString(e,i){return i?e.replace(this.templateMatcher,(r,s)=>{let d=this.getInterpolationReplacement(i,s);return d!==void 0?d:r}):e}getInterpolationReplacement(e,i){return this.formatValue(gA(e,i))}formatValue(e){if(Xx(e))return e;if(typeof e=="number"||typeof e=="boolean")return e.toString();if(e===null)return"null";if(gp(e))return e.join(", ");if(dh(e))return typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():JSON.stringify(e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),p3=(()=>{class n{_onTranslationChange=new Oi;_onLangChange=new Oi;_onFallbackLangChange=new Oi;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(e){return this.translations[e]}setTranslations(e,i,r){this.translations[e]=r&&this.hasTranslationFor(e)?u3(this.translations[e],i):i,this.addLanguages([e]),this._onTranslationChange.next({lang:e,translations:this.getTranslations(e)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(e,i=!0){this.fallbackLang=e,i&&this._onFallbackLangChange.next({lang:e,translations:this.translations[e]})}setCurrentLang(e,i=!0){this.currentLang=e,i&&this._onLangChange.next({lang:e,translations:this.translations[e]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(e){this.languages=Array.from(new Set([...this.languages,...e]))}hasTranslationFor(e){return typeof this.translations[e]<"u"}deleteTranslations(e){delete this.translations[e]}getTranslation(e){let i=this.getValue(this.currentLang,e);return i===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(i=this.getValue(this.fallbackLang,e)),i}getValue(e,i){return gA(this.getTranslations(e),i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),m3=new Gt("TRANSLATE_CONFIG"),ch=n=>tl(n)?n:Zt(n);var mh=(()=>{class n{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=ct(Gd);compiler=ct(Hm);parser=ct(Gm);missingTranslationHandler=ct(ph);store=ct(p3);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let e=me({extend:!1,fallbackLang:null},ct(m3,{optional:!0}));e.lang&&this.use(e.lang),e.fallbackLang&&this.setFallbackLang(e.fallbackLang),e.extend&&(this.extend=!0)}setFallbackLang(e){this.getFallbackLang()||this.store.setFallbackLang(e,!1);let i=this.loadOrExtendLanguage(e);return tl(i)?(i.pipe(Na(1)).subscribe({next:()=>{this.store.setFallbackLang(e)},error:()=>{}}),i):(this.store.setFallbackLang(e),Zt(this.store.getTranslations(e)))}use(e){this.lastUseLanguage=e,this.getCurrentLang()||this.store.setCurrentLang(e,!1);let i=this.loadOrExtendLanguage(e);return tl(i)?(i.pipe(Na(1)).subscribe({next:()=>{this.changeLang(e)},error:()=>{}}),i):(this.changeLang(e),Zt(this.store.getTranslations(e)))}loadOrExtendLanguage(e){if(!this.store.hasTranslationFor(e)||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}changeLang(e){e===this.lastUseLanguage&&this.store.setCurrentLang(e)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(e){this.pending=!0;let i=this.currentLoader.getTranslation(e).pipe(L1(1),Na(1));return this.loadingTranslations=i.pipe(ii(r=>this.compiler.compileTranslations(r,e)),L1(1),Na(1)),this.loadingTranslations.subscribe({next:r=>{this.store.setTranslations(e,r,this.extend),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(e,i,r=!1){let s=this.compiler.compileTranslations(i,e);this.store.setTranslations(e,s,r||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(e){this.store.addLanguages(e)}getParsedResultForKey(e,i){let r=this.getTextToInterpolate(e);if(Hd(r))return this.runInterpolation(r,i);let s=this.missingTranslationHandler.handle(me({key:e,translateService:this},i!==void 0&&{interpolateParams:i}));return s!==void 0?s:e}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(e){return this.store.getTranslation(e)}runInterpolation(e,i){if(Hd(e))return gp(e)?this.runInterpolationOnArray(e,i):$c(e)?this.runInterpolationOnDict(e,i):this.parser.interpolate(e,i)}runInterpolationOnArray(e,i){return e.map(r=>this.runInterpolation(r,i))}runInterpolationOnDict(e,i){let r={};for(let s in e){let d=this.runInterpolation(e[s],i);d!==void 0&&(r[s]=d)}return r}getParsedResult(e,i){return e instanceof Array?this.getParsedResultForArray(e,i):this.getParsedResultForKey(e,i)}getParsedResultForArray(e,i){let r={},s=!1;for(let u of e)r[u]=this.getParsedResultForKey(u,i),s=s||tl(r[u]);if(!s)return r;let d=e.map(u=>ch(r[u]));return fo(d).pipe(ii(u=>{let h={};return u.forEach((v,C)=>{h[e[C]]=v}),h}))}get(e,i){if(!Hd(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Fl(()=>ch(this.getParsedResult(e,i)))):ch(this.getParsedResult(e,i))}getStreamOnTranslationChange(e,i){if(!Hd(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return Rc(wd(()=>this.get(e,i)),this.onTranslationChange.pipe(ho(()=>{let r=this.getParsedResult(e,i);return ch(r)})))}stream(e,i){if(!Hd(e)||!e.length)throw new Error('Parameter "key" required');return Rc(wd(()=>this.get(e,i)),this.onLangChange.pipe(ho(()=>{let r=this.getParsedResult(e,i);return ch(r)})))}instant(e,i){if(!Hd(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(e,i);return tl(r)?Array.isArray(e)?e.reduce((s,d)=>(s[d]=d,s),{}):e:r}set(e,i,r=this.getCurrentLang()){this.store.setTranslations(r,ZG(this.store.getTranslations(r),e,Xx(i)?this.compiler.compile(i,r):this.compiler.compileTranslations(i,r)),!1)}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],this.store.deleteTranslations(e)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return n.getBrowserLang()}getBrowserCultureLang(){return n.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(e){return this.setFallbackLang(e)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();var $m=(()=>{class n{translate=ct(mh);_ref=ct(dt);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(e,i,r){let s=d=>{this.value=d!==void 0?d:e,this.lastKey=e,this._ref.markForCheck()};if(r){let d=this.translate.getParsedResult(e,i);tl(d)?d.subscribe(s):s(d)}this.translate.get(e,i).subscribe(s)}transform(e,...i){if(!e||!e.length)return e;if(Qx(e,this.lastKey)&&Qx(i,this.lastParams))return this.value;let r;if(Hd(i[0])&&i.length)if(Xx(i[0])&&i[0].length){let s=i[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(s)}catch(d){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else $c(i[0])&&(r=i[0]);return this.lastKey=e,this.lastParams=i,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{(this.lastKey&&s.lang===this.translate.getCurrentLang()||s.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(e,r,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,s.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Ld({name:"translate",type:n,pure:!1});static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function n$(n){return{provide:Gd,useClass:n}}function i$(n){return{provide:Hm,useClass:n}}function r$(n){return{provide:Gm,useClass:n}}function o$(n){return{provide:ph,useClass:n}}function uA(n={},t){let e=[];n.loader&&e.push(n.loader),n.compiler&&e.push(n.compiler),n.parser&&e.push(n.parser),n.missingTranslationHandler&&e.push(n.missingTranslationHandler),t&&e.push(p3),(n.useDefaultLang||n.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),n.useDefaultLang===!0&&n.defaultLanguage&&(n.fallbackLang=n.defaultLanguage));let i={fallbackLang:n.fallbackLang??null,lang:n.lang,extend:n.extend??!1};return e.push({provide:m3,useValue:i}),e.push({provide:mh,useClass:mh,deps:[p3,Gd,Hm,Gm,ph,m3]}),e}var Rt=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[...uA(me({compiler:i$(KG),parser:r$(t$),loader:n$(QG),missingTranslationHandler:o$(JG)},e),!0)]}}static forChild(e={}){return{ngModule:n,providers:[...uA(e,e.isolate??!1)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({})}return n})();var f3=new Gt("TRANSLATE_HTTP_LOADER_CONFIG"),a$=(()=>{class n{http;config;constructor(){this.config=me({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},ct(f3)),this.http=this.config.useHttpBackend?new Ft(ct(Fm)):ct(Ft)}getTranslation(e){let i=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${e}${this.config.suffix}${i}`)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function fA(n={}){let t=n.useHttpBackend??!1;return[{provide:f3,useValue:n},{provide:Gd,useClass:a$,deps:[t?Fm:Ft,f3]}]}var Ui=class n{constructor(t){this.http=t;this.loadUserFromStorage()}baseUrl="/api/auth";currentUserSubject=new Ci(null);currentUser$=this.currentUserSubject.asObservable();loadUserFromStorage(){let t=localStorage.getItem("token"),e=localStorage.getItem("user");t&&e&&this.currentUserSubject.next(JSON.parse(e))}parsePermissions(t){if(!t)return{};if(t==="all")return{all:["all"]};try{return JSON.parse(t)}catch{return{}}}normalizeToken(t){return t&&t.startsWith("Bearer ")?t.substring(7):t}login(t){return this.http.post(`${this.baseUrl}/login`,t).pipe(si(e=>{localStorage.setItem("token",this.normalizeToken(e.token));let i={userId:e.userId,username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions),branchId:e.branchId,branchName:e.branchName,branchCode:e.branchCode,isSuperAdmin:e.isSuperAdmin||!1};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}register(t){return this.http.post(`${this.baseUrl}/register`,t).pipe(si(e=>{localStorage.setItem("token",this.normalizeToken(e.token));let i={userId:e.userId,username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions),branchId:e.branchId,branchName:e.branchName,branchCode:e.branchCode,isSuperAdmin:e.isSuperAdmin||!1};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}getToken(){return localStorage.getItem("token")}isLoggedIn(){return!!this.getToken()}getCurrentUser(){return this.currentUserSubject.value}getCurrentUserId(){return this.getCurrentUser()?.userId||null}getCurrentBranchId(){return this.getCurrentUser()?.branchId||null}getCurrentBranchName(){return this.getCurrentUser()?.branchName||null}isSuperAdmin(){return this.getCurrentUser()?.isSuperAdmin||!1}hasRole(t){return this.getCurrentUser()?.role===t}isAdmin(){let t=this.getCurrentUser();return t?t.role==="ADMIN"||t.role==="SUPER_ADMIN"||t.isSuperAdmin||(t.permissions?.all?.includes("all")??!1):!1}hasFeatureAccess(t){let e=this.getCurrentUser();return e?this.isAdmin()?!0:!!e.permissions[t]&&e.permissions[t].length>0:!1}hasPermission(t,e){let i=this.getCurrentUser();return i?this.isAdmin()?!0:i.permissions[t]?.includes(e)||!1:!1}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vn="primary",Mh=Symbol("RouteTitle"),y3=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function vp(n){return new y3(n)}function SA(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let d=i[s],u=n[s];if(d[0]===":")r[d.substring(1)]=u;else if(d!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function oy(n){return new Promise((t,e)=>{n.pipe(Fc()).subscribe({next:i=>t(i),error:i=>e(i)})})}function s$(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Kl(n[e],t[e]))return!1;return!0}function Kl(n,t){let e=n?C3(n):void 0,i=t?C3(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!PA(n[r],t[r]))return!1;return!0}function C3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PA(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function wA(n){return n.length>0?n[n.length-1]:null}function xp(n){return tl(n)?n:Vd(n)?Er(Promise.resolve(n)):Zt(n)}function EA(n){return tl(n)?oy(n):Promise.resolve(n)}var l$={exact:TA,subset:kA},OA={exact:c$,subset:d$,ignored:()=>!0};function hA(n,t,e){return l$[e.paths](n.root,t.root,e.matrixParams)&&OA[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function c$(n,t){return Kl(n,t)}function TA(n,t,e){if(!hp(n.segments,t.segments)||!ny(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!TA(n.children[i],t.children[i],e))return!1;return!0}function d$(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>PA(n[e],t[e]))}function kA(n,t,e){return IA(n,t,t.segments,e)}function IA(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!hp(r,e)||t.hasChildren()||!ny(r,e,i))}else if(n.segments.length===e.length){if(!hp(n.segments,e)||!ny(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!kA(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!hp(n.segments,r)||!ny(n.segments,r,i)||!n.children[Vn]?!1:IA(n.children[Vn],t,s,i)}}function ny(n,t,e){return t.every((i,r)=>OA[e](n[r].parameters,i.parameters))}var _l=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ii([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=vp(this.queryParams),this._queryParamMap}toString(){return u$.serialize(this)}},Ii=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iy(this)}},$d=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=vp(this.parameters),this._parameterMap}toString(){return AA(this)}};function p$(n,t){return hp(n,t)&&n.every((e,i)=>Kl(e.parameters,t[i].parameters))}function hp(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function m$(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Vn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Vn&&(e=e.concat(t(r,i)))}),e}var yp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>new Yc,providedIn:"root"})}return n})(),Yc=class{parse(t){let e=new M3(t);return new _l(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${uh(t.root,!0)}`,i=h$(t.queryParams),r=typeof t.fragment=="string"?`#${g$(t.fragment)}`:"";return`${e}${i}${r}`}},u$=new Yc;function iy(n){return n.segments.map(t=>AA(t)).join("/")}function uh(n,t){if(!n.hasChildren())return iy(n);if(t){let e=n.children[Vn]?uh(n.children[Vn],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Vn&&i.push(`${r}:${uh(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=m$(n,(i,r)=>r===Vn?[uh(n.children[Vn],!1)]:[`${r}:${uh(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Vn]!=null?`${iy(n)}/${e[0]}`:`${iy(n)}/(${e.join("//")})`}}function DA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ey(n){return DA(n).replace(/%3B/gi,";")}function g$(n){return encodeURI(n)}function b3(n){return DA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ry(n){return decodeURIComponent(n)}function _A(n){return ry(n.replace(/\+/g,"%20"))}function AA(n){return`${b3(n.path)}${f$(n.parameters)}`}function f$(n){return Object.entries(n).map(([t,e])=>`;${b3(t)}=${b3(e)}`).join("")}function h$(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ey(e)}=${ey(r)}`).join("&"):`${ey(e)}=${ey(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var _$=/^[^\/()?;#]+/;function h3(n){let t=n.match(_$);return t?t[0]:""}var v$=/^[^\/()?;=#]+/;function x$(n){let t=n.match(v$);return t?t[0]:""}var y$=/^[^=?&#]+/;function C$(n){let t=n.match(y$);return t?t[0]:""}var b$=/^[^&#]+/;function M$(n){let t=n.match(b$);return t?t[0]:""}var M3=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ii([],{}):new Ii([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Vn]=new Ii(t,e)),i}parseSegment(){let t=h3(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new yt(4009,!1);return this.capture(t),new $d(ry(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=x$(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=h3(this.remaining);r&&(i=r,this.capture(i))}t[ry(e)]=ry(i)}parseQueryParam(t){let e=C$(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let d=M$(this.remaining);d&&(i=d,this.capture(i))}let r=_A(e),s=_A(i);if(t.hasOwnProperty(r)){let d=t[r];Array.isArray(d)||(d=[d],t[r]=d),d.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=h3(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new yt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Vn);let d=this.parseChildren();e[s??Vn]=Object.keys(d).length===1&&d[Vn]?d[Vn]:new Ii([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new yt(4011,!1)}};function RA(n){return n.segments.length>0?new Ii([],{[Vn]:n}):n}function FA(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=FA(r);if(i===Vn&&s.segments.length===0&&s.hasChildren())for(let[d,u]of Object.entries(s.children))t[d]=u;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new Ii(n.segments,t);return S$(e)}function S$(n){if(n.numberOfChildren===1&&n.children[Vn]){let t=n.children[Vn];return new Ii(n.segments.concat(t.segments),t.children)}return n}function Yd(n){return n instanceof _l}function NA(n,t,e=null,i=null,r=new Yc){let s=LA(n);return VA(s,t,e,i,r)}function LA(n){let t;function e(s){let d={};for(let h of s.children){let v=e(h);d[h.outlet]=v}let u=new Ii(s.url,d);return s===n&&(t=u),u}let i=e(n.root),r=RA(i);return t??r}function VA(n,t,e,i,r){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return _3(s,s,s,e,i,r);let d=P$(t);if(d.toRoot())return _3(s,s,new Ii([],{}),e,i,r);let u=w$(d,s,n),h=u.processChildren?fh(u.segmentGroup,u.index,d.commands):UA(u.segmentGroup,u.index,d.commands);return _3(s,u.segmentGroup,h,e,i,r)}function ay(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _h(n){return typeof n=="object"&&n!=null&&n.outlets}function vA(n,t,e){n||="\u0275";let i=new _l;return i.queryParams={[n]:t},e.parse(e.serialize(i)).queryParams[n]}function _3(n,t,e,i,r,s){let d={};for(let[v,C]of Object.entries(i??{}))d[v]=Array.isArray(C)?C.map(O=>vA(v,O,s)):vA(v,C,s);let u;n===t?u=e:u=BA(n,t,e);let h=RA(FA(u));return new _l(h,d,r)}function BA(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=BA(s,t,e)}),new Ii(n.segments,i)}var sy=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&ay(i[0]))throw new yt(4003,!1);let r=i.find(_h);if(r&&r!==wA(i))throw new yt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function P$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sy(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,d)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([h,v])=>{u[h]=typeof v=="string"?v.split("/"):v}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:d===0?(s.split("/").forEach((u,h)=>{h==0&&u==="."||(h==0&&u===""?e=!0:u===".."?t++:u!=""&&r.push(u))}),r):[...r,s]},[]);return new sy(e,t,i)}var Jm=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function w$(n,t,e){if(n.isAbsolute)return new Jm(t,!0,0);if(!e)return new Jm(t,!1,NaN);if(e.parent===null)return new Jm(e,!0,0);let i=ay(n.commands[0])?0:1,r=e.segments.length-1+i;return E$(e,r,n.numberOfDoubleDots)}function E$(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new yt(4005,!1);r=i.segments.length}return new Jm(i,!1,r-s)}function O$(n){return _h(n[0])?n[0].outlets:{[Vn]:n}}function UA(n,t,e){if(n??=new Ii([],{}),n.segments.length===0&&n.hasChildren())return fh(n,t,e);let i=T$(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Ii(n.segments.slice(0,i.pathIndex),{});return s.children[Vn]=new Ii(n.segments.slice(i.pathIndex),n.children),fh(s,0,r)}else return i.match&&r.length===0?new Ii(n.segments,{}):i.match&&!n.hasChildren()?S3(n,t,e):i.match?fh(n,0,r):S3(n,t,e)}function fh(n,t,e){if(e.length===0)return new Ii(n.segments,{});{let i=O$(e),r={};if(Object.keys(i).some(s=>s!==Vn)&&n.children[Vn]&&n.numberOfChildren===1&&n.children[Vn].segments.length===0){let s=fh(n.children[Vn],t,e);return new Ii(n.segments,s.children)}return Object.entries(i).forEach(([s,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(r[s]=UA(n.children[s],t,d))}),Object.entries(n.children).forEach(([s,d])=>{i[s]===void 0&&(r[s]=d)}),new Ii(n.segments,r)}}function T$(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let d=n.segments[r],u=e[i];if(_h(u))break;let h=`${u}`,v=i<e.length-1?e[i+1]:null;if(r>0&&h===void 0)break;if(h&&v&&typeof v=="object"&&v.outlets===void 0){if(!yA(h,v,d))return s;i+=2}else{if(!yA(h,{},d))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function S3(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(_h(s)){let h=k$(s.outlets);return new Ii(i,h)}if(r===0&&ay(e[0])){let h=n.segments[t];i.push(new $d(h.path,xA(e[0]))),r++;continue}let d=_h(s)?s.outlets[Vn]:`${s}`,u=r<e.length-1?e[r+1]:null;d&&u&&ay(u)?(i.push(new $d(d,xA(u))),r+=2):(i.push(new $d(d,{})),r++)}return new Ii(i,{})}function k$(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=S3(new Ii([],{}),0,i))}),t}function xA(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function yA(n,t,e){return n==e.path&&Kl(t,e.parameters)}var Km="imperative",co=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(co||{}),cs=class{id;url;constructor(t,e){this.id=t,this.url=e}},Jd=class extends cs{type=co.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fs=class extends cs{urlAfterRedirects;type=co.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ma=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ma||{}),Xm=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Xm||{}),Ql=class extends cs{reason;code;type=co.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xl=class extends cs{reason;code;type=co.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Zm=class extends cs{error;target;type=co.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vh=class extends cs{urlAfterRedirects;state;type=co.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ly=class extends cs{urlAfterRedirects;state;type=co.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cy=class extends cs{urlAfterRedirects;state;shouldActivate;type=co.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dy=class extends cs{urlAfterRedirects;state;type=co.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends cs{urlAfterRedirects;state;type=co.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},my=class{route;type=co.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uy=class{route;type=co.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gy=class{snapshot;type=co.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fy=class{snapshot;type=co.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hy=class{snapshot;type=co.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_y=class{snapshot;type=co.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{routerEvent;position;anchor;type=co.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},xh=class{},tu=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function I$(n){return!(n instanceof xh)&&!(n instanceof tu)}function D$(n,t){return n.providers&&!n._injector&&(n._injector=Tm(n.providers,t,`Route: ${n.path}`)),n._injector??t}function hl(n){return n.outlet||Vn}function A$(n,t){let e=n.filter(i=>hl(i)===t);return e.push(...n.filter(i=>hl(i)!==t)),e}function ru(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var vy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ru(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Cp(this.rootInjector)}},Cp=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new vy(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(it(Dr))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xy=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=P3(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=P3(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=w3(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return w3(t,this._root).map(e=>e.value)}};function P3(n,t){if(n===t.value)return t;for(let e of t.children){let i=P3(n,e);if(i)return i}return null}function w3(n,t){if(n===t.value)return[t];for(let e of t.children){let i=w3(n,e);if(i.length)return i.unshift(t),i}return[]}var ls=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ym(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var yh=class extends xy{snapshot;constructor(t,e){super(t),this.snapshot=e,D3(this,t)}toString(){return this.snapshot.toString()}};function jA(n){let t=R$(n),e=new Ci([new $d("",{})]),i=new Ci({}),r=new Ci({}),s=new Ci({}),d=new Ci(""),u=new Di(e,i,s,d,r,Vn,n,t.root);return u.snapshot=t.root,new yh(new ls(u,[]),t)}function R$(n){let t={},e={},i={},s=new _p([],t,i,"",e,Vn,n,null,{});return new Ch("",new ls(s,[]))}var Di=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,d,u,h){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=d,this.component=u,this._futureSnapshot=h,this.title=this.dataSubject?.pipe(ii(v=>v[Mh]))??Zt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ii(t=>vp(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ii(t=>vp(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yy(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:me(me({},t.params),n.params),data:me(me({},t.data),n.data),resolve:me(me(me(me({},n.data),t.data),r?.data),n._resolvedData)}:i={params:me({},n.params),data:me({},n.data),resolve:me(me({},n.data),n._resolvedData??{})},r&&zA(r)&&(i.resolve[Mh]=r.title),i}var _p=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Mh]}constructor(t,e,i,r,s,d,u,h,v){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=u,this.routeConfig=h,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vp(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ch=class extends xy{url;constructor(t,e){super(e),this.url=t,D3(this,e)}toString(){return WA(this._root)}};function D3(n,t){t.value._routerState=n,t.children.forEach(e=>D3(n,e))}function WA(n){let t=n.children.length>0?` { ${n.children.map(WA).join(", ")} } `:"";return`${n.value}${t}`}function v3(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Kl(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Kl(t.params,e.params)||n.paramsSubject.next(e.params),s$(t.url,e.url)||n.urlSubject.next(e.url),Kl(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function E3(n,t){let e=Kl(n.params,t.params)&&p$(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||E3(n.parent,t.parent))}function zA(n){return typeof n.title=="string"||n.title===null}var qA=new Gt(""),bp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Vn;activateEvents=new hi;deactivateEvents=new hi;attachEvents=new hi;detachEvents=new hi;routerOutletData=D6();parentContexts=ct(Cp);location=ct($l);changeDetector=ct(dt);inputBinder=ct(Sh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new yt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new yt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new yt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new yt(4013,!1);this._activatedRoute=e;let r=this.location,d=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new O3(e,u,r.injector,this.routerOutletData);this.activated=r.createComponent(d,{index:r.length,injector:h,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ui({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Gl]})}return n})(),O3=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Di?this.route:t===Cp?this.childContexts:t===qA?this.outletData:this.parent.get(t,e)}},Sh=new Gt(""),A3=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=F1([i.queryParams,i.params,i.data]).pipe(ho(([s,d,u],h)=>(u=me(me(me({},s),d),u),h===0?Zt(u):Promise.resolve(u)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let d=L6(i.component);if(!d){this.unsubscribeFromRouteData(e);return}for(let{templateName:u}of d.inputs)e.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),R3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_e({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&y(0,"router-outlet")},dependencies:[bp],encapsulation:2})}return n})();function F3(n){let t=n.children&&n.children.map(F3),e=t?Tt(me({},n),{children:t}):me({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vn&&(e.component=R3),e}function F$(n,t,e){let i=bh(n,t._root,e?e._root:void 0);return new yh(i,t)}function bh(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=N$(n,t,e);return new ls(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let d=s.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(u=>bh(n,u)),d}}let i=L$(t.value),r=t.children.map(s=>bh(n,s));return new ls(i,r)}}function N$(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return bh(n,i,r);return bh(n,i)})}function L$(n){return new Di(new Ci(n.url),new Ci(n.params),new Ci(n.queryParams),new Ci(n.fragment),new Ci(n.data),n.outlet,n.component,n)}var nu=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},HA="ngNavigationCancelingError";function Cy(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Yd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=GA(!1,Ma.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function GA(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[HA]=!0,e.cancellationCode=t,e}function V$(n){return $A(n)&&Yd(n.url)}function $A(n){return!!n&&n[HA]}var B$=(n,t,e,i)=>ii(r=>(new T3(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),T3=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),v3(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Ym(e);t.children.forEach(s=>{let d=s.value.outlet;this.deactivateRoutes(s,r[d],i),delete r[d]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ym(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);if(i&&i.outlet){let d=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ym(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Ym(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new _y(s.value.snapshot))}),t.children.length&&this.forwardEvent(new fy(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(v3(r),r===s)if(r.component){let d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(u.contexts),d.attachRef=u.componentRef,d.route=u.route.value,d.outlet&&d.outlet.attach(u.componentRef,u.route.value),v3(u.route.value),this.activateChildRoutes(t,null,d.children)}else d.attachRef=null,d.route=r,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(t,null,d.children)}else this.activateChildRoutes(t,null,i)}},by=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Qm=class{component;route;constructor(t,e){this.component=t,this.route=e}};function U$(n,t,e){let i=n._root,r=t?t._root:null;return gh(i,r,e,[i.value])}function j$(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function ou(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!zS(n)?n:t.get(n):i}function gh(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ym(t);return n.children.forEach(d=>{W$(d,s[d.value.outlet],e,i.concat([d.value]),r),delete s[d.value.outlet]}),Object.entries(s).forEach(([d,u])=>hh(u,e.getContext(d),r)),r}function W$(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,d=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){let h=z$(d,s,s.routeConfig.runGuardsAndResolvers);h?r.canActivateChecks.push(new by(i)):(s.data=d.data,s._resolvedData=d._resolvedData),s.component?gh(n,t,u?u.children:null,i,r):gh(n,t,e,i,r),h&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new Qm(u.outlet.component,d))}else d&&hh(t,u,r),r.canActivateChecks.push(new by(i)),s.component?gh(n,null,u?u.children:null,i,r):gh(n,null,e,i,r);return r}function z$(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!hp(n.url,t.url);case"pathParamsOrQueryParamsChange":return!hp(n.url,t.url)||!Kl(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!E3(n,t)||!Kl(n.queryParams,t.queryParams);case"paramsChange":default:return!E3(n,t)}}function hh(n,t,e){let i=Ym(n),r=n.value;Object.entries(i).forEach(([s,d])=>{r.component?t?hh(d,t.children.getContext(s),e):hh(d,null,e):hh(d,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Qm(t.outlet.component,r)):e.canDeactivateChecks.push(new Qm(null,r)):e.canDeactivateChecks.push(new Qm(null,r))}function Ph(n){return typeof n=="function"}function q$(n){return typeof n=="boolean"}function H$(n){return n&&Ph(n.canLoad)}function G$(n){return n&&Ph(n.canActivate)}function $$(n){return n&&Ph(n.canActivateChild)}function Y$(n){return n&&Ph(n.canDeactivate)}function J$(n){return n&&Ph(n.canMatch)}function YA(n){return n instanceof B0||n?.name==="EmptyError"}var ty=Symbol("INITIAL_VALUE");function iu(){return ho(n=>F1(n.map(t=>t.pipe(Na(1),jg(ty)))).pipe(ii(t=>{for(let e of t)if(e!==!0){if(e===ty)return ty;if(e===!1||K$(e))return e}return!0}),Fa(t=>t!==ty),Na(1)))}function K$(n){return Yd(n)||n instanceof nu}function JA(n){return n.aborted?Zt(void 0).pipe(Na(1)):new ni(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function KA(n){return Wg(JA(n))}function Q$(n,t){return Fo(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return d.length===0&&s.length===0?Zt(Tt(me({},e),{guardsResult:!0})):X$(d,i,r,n).pipe(Fo(u=>u&&q$(u)?Z$(i,s,n,t):Zt(u)),ii(u=>Tt(me({},e),{guardsResult:u})))})}function X$(n,t,e,i){return Er(n).pipe(Fo(r=>rY(r.component,r.route,e,t,i)),Fc(r=>r!==!0,!0))}function Z$(n,t,e,i){return Er(t).pipe(Fl(r=>Rc(tY(r.route.parent,i),eY(r.route,i),iY(n,r.path,e),nY(n,r.route,e))),Fc(r=>r!==!0,!0))}function eY(n,t){return n!==null&&t&&t(new hy(n)),Zt(!0)}function tY(n,t){return n!==null&&t&&t(new gy(n)),Zt(!0)}function nY(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Zt(!0);let r=i.map(s=>wd(()=>{let d=ru(t)??e,u=ou(s,d),h=G$(u)?u.canActivate(t,n):_o(d,()=>u(t,n));return xp(h).pipe(Fc())}));return Zt(r).pipe(iu())}function iY(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(d=>j$(d)).filter(d=>d!==null).map(d=>wd(()=>{let u=d.guards.map(h=>{let v=ru(d.node)??e,C=ou(h,v),O=$$(C)?C.canActivateChild(i,n):_o(v,()=>C(i,n));return xp(O).pipe(Fc())});return Zt(u).pipe(iu())}));return Zt(s).pipe(iu())}function rY(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Zt(!0);let d=s.map(u=>{let h=ru(t)??r,v=ou(u,h),C=Y$(v)?v.canDeactivate(n,t,e,i):_o(h,()=>v(n,t,e,i));return xp(C).pipe(Fc())});return Zt(d).pipe(iu())}function oY(n,t,e,i,r){let s=t.canLoad;if(s===void 0||s.length===0)return Zt(!0);let d=s.map(u=>{let h=ou(u,n),v=H$(h)?h.canLoad(t,e):_o(n,()=>h(t,e)),C=xp(v);return r?C.pipe(KA(r)):C});return Zt(d).pipe(iu(),QA(i))}function QA(n){return yS(si(t=>{if(typeof t!="boolean")throw Cy(n,t)}),ii(t=>t===!0))}function aY(n,t,e,i,r){let s=t.canMatch;if(!s||s.length===0)return Zt(!0);let d=s.map(u=>{let h=ou(u,n),v=J$(h)?h.canMatch(t,e):_o(n,()=>h(t,e)),C=xp(v);return r?C.pipe(KA(r)):C});return Zt(d).pipe(iu(),QA(i))}var fp=class XA extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,XA.prototype)}},k3=class ZA extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,ZA.prototype)}};function sY(n){throw new yt(4e3,!1)}function lY(n){throw GA(!1,Ma.GuardRejected)}var cY=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[Vn])throw sY(`${t.redirectTo}`);r=r.children[Vn]}}async applyRedirectCommands(t,e,i,r,s){let d=await dY(e,r,s);if(d instanceof _l)throw new k3(d);let u=this.applyRedirectCreateUrlTree(d,this.urlSerializer.parse(d),t,i);if(d[0]==="/")throw new k3(u);return u}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new _l(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let u=s.substring(1);i[r]=e[u]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),d={};return Object.entries(e.children).forEach(([u,h])=>{d[u]=this.createSegmentGroup(t,h,i,r)}),new Ii(s,d)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new yt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}};function dY(n,t,e){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:s,routeConfig:d,url:u,outlet:h,params:v,data:C,title:O}=t;return oy(xp(_o(e,()=>i({params:v,data:C,queryParams:r,fragment:s,routeConfig:d,url:u,outlet:h,title:O}))))}var I3={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pY(n,t,e,i,r,s){let d=eR(n,t,e);return d.matched?(i=D$(t,i),aY(i,t,e,r,s).pipe(ii(u=>u===!0?d:me({},I3)))):Zt(d)}function eR(n,t,e){if(t.path==="**")return mY(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?me({},I3):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||SA)(e,n,t);if(!r)return me({},I3);let s={};Object.entries(r.posParams??{}).forEach(([u,h])=>{s[u]=h.path});let d=r.consumed.length>0?me(me({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function mY(n){return{matched:!0,parameters:n.length>0?wA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function CA(n,t,e,i){return e.length>0&&fY(n,e,i)?{segmentGroup:new Ii(t,gY(i,new Ii(e,n.children))),slicedSegments:[]}:e.length===0&&hY(n,e,i)?{segmentGroup:new Ii(n.segments,uY(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ii(n.segments,n.children),slicedSegments:e}}function uY(n,t,e,i){let r={};for(let s of e)if(Sy(n,t,s)&&!i[hl(s)]){let d=new Ii([],{});r[hl(s)]=d}return me(me({},i),r)}function gY(n,t){let e={};e[Vn]=t;for(let i of n)if(i.path===""&&hl(i)!==Vn){let r=new Ii([],{});e[hl(i)]=r}return e}function fY(n,t,e){return e.some(i=>Sy(n,t,i)&&hl(i)!==Vn)}function hY(n,t,e){return e.some(i=>Sy(n,t,i))}function Sy(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function _Y(n,t,e){return t.length===0&&!n.children[e]}var vY=class{};async function xY(n,t,e,i,r,s,d="emptyOnly",u){return new CY(n,t,e,i,r,d,s,u).recognize()}var yY=31,CY=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,d,u,h){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=d,this.urlSerializer=u,this.abortSignal=h,this.applyRedirects=new cY(this.urlSerializer,this.urlTree)}noMatchError(t){return new yt(4002,`'${t.segmentGroup}'`)}async recognize(){let t=CA(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:i}=await this.match(t),r=new ls(i,e),s=new Ch("",r),d=NA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(d),{state:s,tree:d}}async match(t){let e=new _p([],Object.freeze({}),Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Vn,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,Vn,e),rootSnapshot:e}}catch(i){if(i instanceof k3)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof fp?this.noMatchError(i):i}}async processSegmentGroup(t,e,i,r,s){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,e,i,s);let d=await this.processSegment(t,e,i,i.segments,r,!0,s);return d instanceof ls?[d]:[]}async processChildren(t,e,i,r){let s=[];for(let h of Object.keys(i.children))h==="primary"?s.unshift(h):s.push(h);let d=[];for(let h of s){let v=i.children[h],C=A$(e,h),O=await this.processSegmentGroup(t,C,v,h,r);d.push(...O)}let u=tR(d);return bY(u),u}async processSegment(t,e,i,r,s,d,u){for(let h of e)try{return await this.processSegmentAgainstRoute(h._injector??t,e,h,i,r,s,d,u)}catch(v){if(v instanceof fp||YA(v))continue;throw v}if(_Y(i,r,s))return new vY;throw new fp(i)}async processSegmentAgainstRoute(t,e,i,r,s,d,u,h){if(hl(i)!==d&&(d===Vn||!Sy(r,s,i)))throw new fp(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,r,i,s,d,h);if(this.allowRedirects&&u)return this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,d,h);throw new fp(r)}async expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,d,u){let{matched:h,parameters:v,consumedSegments:C,positionalParamSegments:O,remainingSegments:T}=eR(e,r,s);if(!h)throw new fp(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yY&&(this.allowRedirects=!1));let w=new _p(s,v,Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,bA(r),hl(r),r.component??r._loadedComponent??null,r,MA(r)),A=yy(w,u,this.paramsInheritanceStrategy);if(w.params=Object.freeze(A.params),w.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let I=await this.applyRedirects.applyRedirectCommands(C,r.redirectTo,O,w,t),L=await this.applyRedirects.lineralizeSegments(r,I);return this.processSegment(t,i,e,L.concat(T),d,!1,u)}async matchSegmentAgainstRoute(t,e,i,r,s,d){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let u=await oy(pY(e,i,r,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(e.children={}),!u?.matched)throw new fp(e);t=i._injector??t;let{routes:h}=await this.getChildConfig(t,i,r),v=i._loadedInjector??t,{parameters:C,consumedSegments:O,remainingSegments:T}=u,w=new _p(O,C,Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,bA(i),hl(i),i.component??i._loadedComponent??null,i,MA(i)),A=yy(w,d,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:I,slicedSegments:L}=CA(e,O,T,h);if(L.length===0&&I.hasChildren()){let K=await this.processChildren(v,h,I,w);return new ls(w,K)}if(h.length===0&&L.length===0)return new ls(w,[]);let B=hl(i)===s,q=await this.processSegment(v,h,I,L,B?Vn:s,!0,w);return new ls(w,q instanceof ls?[q]:[])}async getChildConfig(t,e,i){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await oy(oY(t,e,i,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=s.routes,e._loadedInjector=s.injector,s}throw lY(e)}return{routes:[],injector:t}}};function bY(n){n.sort((t,e)=>t.value.outlet===Vn?-1:e.value.outlet===Vn?1:t.value.outlet.localeCompare(e.value.outlet))}function MY(n){let t=n.value.routeConfig;return t&&t.path===""}function tR(n){let t=[],e=new Set;for(let i of n){if(!MY(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=tR(i.children);t.push(new ls(i.value,r))}return t.filter(i=>!e.has(i))}function bA(n){return n.data||{}}function MA(n){return n.resolve||{}}var SY=new Gt("",{factory:()=>xY});function PY(n,t,e,i,r,s,d){let u=n.get(SY);return Fo(h=>Zt(h).pipe(ho(v=>u(n,t,e,i,v.extractedUrl,r,s,d)),ii(({state:v,tree:C})=>Tt(me({},h),{targetSnapshot:v,urlAfterRedirects:C}))))}function wY(n,t){return Fo(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Zt(e);let s=new Set(r.map(h=>h.route)),d=new Set;for(let h of s)if(!d.has(h))for(let v of nR(h))d.add(v);let u=0;return Er(d).pipe(Fl(h=>s.has(h)?EY(h,i,n,t):(h.data=yy(h,h.parent,n).resolve,Zt(void 0))),si(()=>u++),N1(1),Fo(h=>u===d.size?Zt(e):Aa))})}function nR(n){let t=n.children.map(e=>nR(e)).flat();return[n,...t]}function EY(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!zA(r)&&(s[Mh]=r.title),wd(()=>(n.data=yy(n,n.parent,e).resolve,OY(s,n,t,i).pipe(ii(d=>(n._resolvedData=d,n.data=me(me({},n.data),d),null)))))}function OY(n,t,e,i){let r=C3(n);if(r.length===0)return Zt({});let s={};return Er(r).pipe(Fo(d=>TY(n[d],t,e,i).pipe(Fc(),si(u=>{if(u instanceof nu)throw Cy(new Yc,u);s[d]=u}))),N1(1),ii(()=>s),ur(d=>YA(d)?Aa:Ug(d)))}function TY(n,t,e,i){let r=ru(t)??i,s=ou(n,r),d=s.resolve?s.resolve(t,e):_o(r,()=>s(t,e));return xp(d)}function x3(n){return ho(t=>{let e=n(t);return e?Er(e).pipe(ii(()=>t)):Zt(t)})}var N3=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Vn);return i}getResolvedTitleForRoute(e){return e.data[Mh]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(iR),providedIn:"root"})}return n})(),iR=(()=>{class n extends N3{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(it(BD))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kd=new Gt("",{factory:()=>({})}),au=new Gt(""),Py=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ct(zw);async loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await EA(_o(e,()=>i.loadComponent())),d=await aR(oR(s));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=d,d}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await rR(i,this.compiler,e,this.onLoadEndListener);return i._loadedRoutes=s.routes,i._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function rR(n,t,e,i){let r=await EA(_o(e,()=>n.loadChildren())),s=await aR(oR(r)),d;s instanceof Bv||Array.isArray(s)?d=s:d=await t.compileModuleAsync(s),i&&i(n);let u,h,v=!1;return Array.isArray(d)?(h=d,v=!0):(u=d.create(e).injector,h=u.get(au,[],{optional:!0,self:!0}).flat()),{routes:h.map(F3),injector:u}}function kY(n){return n&&typeof n=="object"&&"default"in n}function oR(n){return kY(n)?n.default:n}async function aR(n){return n}var wy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(IY),providedIn:"root"})}return n})(),IY=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),L3=new Gt(""),V3=new Gt("");function sR(n,t,e){let i=n.get(V3),r=n.get(gr);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(v=>setTimeout(v));let s,d=new Promise(v=>{s=v}),u=r.startViewTransition(()=>(s(),DY(n)));u.ready.catch(v=>{}),u.finished.catch(v=>{});let{onViewTransitionCreated:h}=i;return h&&_o(n,()=>h({transition:u,from:t,to:e})),d}function DY(n){return new Promise(t=>{Pf({read:()=>setTimeout(t)},{injector:n})})}var AY=()=>{},B3=new Gt(""),Ey=(()=>{class n{currentNavigation=Ds(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ds(null);events=new Oi;transitionAbortWithErrorSubject=new Oi;configLoader=ct(Py);environmentInjector=ct(Dr);destroyRef=ct(ks);urlSerializer=ct(yp);rootContexts=ct(Cp);location=ct(jd);inputBindingEnabled=ct(Sh,{optional:!0})!==null;titleStrategy=ct(N3);options=ct(Kd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ct(wy);createViewTransition=ct(L3,{optional:!0});navigationErrorHandler=ct(B3,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Zt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new my(r)),i=r=>this.events.next(new uy(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;lo(()=>{this.transitions?.next(Tt(me({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(e){return this.transitions=new Ci(null),this.transitions.pipe(Fa(i=>i!==null),ho(i=>{let r=!1,s=new AbortController;return Zt(i).pipe(ho(d=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ma.SupersededByNewNavigation),Aa;this.currentTransition=i;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:u?Tt(me({},u),{previousNavigation:null}):null,abort:()=>s.abort()});let h=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=d.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!h&&v!=="reload")return this.events.next(new Xl(d.id,this.urlSerializer.serialize(d.rawUrl),"",Xm.IgnoredSameUrlNavigation)),d.resolve(!1),Aa;if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Zt(d).pipe(ho(C=>(this.events.next(new Jd(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),C.id!==this.navigationId?Aa:Promise.resolve(C))),PY(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),si(C=>{i.targetSnapshot=C.targetSnapshot,i.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation.update(T=>(T.finalUrl=C.urlAfterRedirects,T));let O=new vh(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(O)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:C,extractedUrl:O,source:T,restoredState:w,extras:A}=d,I=new Jd(C,this.urlSerializer.serialize(O),T,w);this.events.next(I);let L=jA(this.rootComponentType).snapshot;return this.currentTransition=i=Tt(me({},d),{targetSnapshot:L,urlAfterRedirects:O,extras:Tt(me({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(B=>(B.finalUrl=O,B)),Zt(i)}else return this.events.next(new Xl(d.id,this.urlSerializer.serialize(d.extractedUrl),"",Xm.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Aa}),si(d=>{let u=new ly(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),ii(d=>(this.currentTransition=i=Tt(me({},d),{guards:U$(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),i)),Q$(this.environmentInjector,d=>this.events.next(d)),si(d=>{if(i.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Cy(this.urlSerializer,d.guardsResult);let u=new cy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),Fa(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Ma.GuardRejected),!1)),x3(d=>{if(d.guards.canActivateChecks.length!==0)return Zt(d).pipe(si(u=>{let h=new dy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),ho(u=>{let h=!1;return Zt(u).pipe(wY(this.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",Ma.NoDataFromResolver)}}))}),si(u=>{let h=new py(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),x3(d=>{let u=v=>{let C=[];if(v.routeConfig?._loadedComponent)v.component=v.routeConfig?._loadedComponent;else if(v.routeConfig?.loadComponent){let O=ru(v)??this.environmentInjector;C.push(this.configLoader.loadComponent(O,v.routeConfig).then(T=>{v.component=T}))}for(let O of v.children)C.push(...u(O));return C},h=u(d.targetSnapshot.root);return h.length===0?Zt(d):Er(Promise.all(h).then(()=>d))}),x3(()=>this.afterPreactivation()),ho(()=>{let{currentSnapshot:d,targetSnapshot:u}=i,h=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return h?Er(h).pipe(ii(()=>i)):Zt(i)}),ii(d=>{let u=F$(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=i=Tt(me({},d),{targetRouterState:u}),this.currentNavigation.update(h=>(h.targetRouterState=u,h)),i}),si(()=>{this.events.next(new xh)}),B$(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Na(1),Wg(JA(s.signal).pipe(Fa(()=>!r&&!i.targetRouterState),si(()=>{this.cancelNavigationTransition(i,s.signal.reason+"",Ma.Aborted)}))),si({next:d=>{r=!0,this.currentNavigation.update(u=>(u.abort=AY,u)),this.lastSuccessfulNavigation.set(lo(this.currentNavigation)),this.events.next(new Fs(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),Wg(this.transitionAbortWithErrorSubject.pipe(si(d=>{throw d}))),Tn(()=>{s.abort(),r||this.cancelNavigationTransition(i,"",Ma.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ur(d=>{if(this.destroyed)return i.resolve(!1),Aa;if(r=!0,$A(d))this.events.next(new Ql(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode)),V$(d)?this.events.next(new tu(d.url,d.navigationBehaviorOptions)):i.resolve(!1);else{let u=new Zm(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);try{let h=_o(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(h instanceof nu){let{message:v,cancellationCode:C}=Cy(this.urlSerializer,h);this.events.next(new Ql(i.id,this.urlSerializer.serialize(i.extractedUrl),v,C)),this.events.next(new tu(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(u),d}catch(h){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(h)}}return Aa}))}))}cancelNavigationTransition(e,i,r){let s=new Ql(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=lo(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RY(n){return n!==Km}var lR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(FY),providedIn:"root"})}return n})(),My=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},FY=(()=>{class n extends My{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),U3=(()=>{class n{urlSerializer=ct(yp);options=ct(Kd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=ct(jd);urlHandlingStrategy=ct(wy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _l;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,d=r??s;return d instanceof _l?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=jA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:()=>ct(cR),providedIn:"root"})}return n})(),cR=(()=>{class n extends U3{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Jd?this.updateStateMemento():e instanceof Xl?this.commitTransition(i):e instanceof vh?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof xh?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ql&&e.code!==Ma.SupersededByNewNavigation&&e.code!==Ma.Redirect?this.restoreHistory(i):e instanceof Zm?this.restoreHistory(i,!0):e instanceof Fs&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:d}=i;if(this.location.isCurrentPathEqualTo(e)||s){let u=this.browserPageId,h=me(me({},d),this.generateNgRouterState(r,u));this.location.replaceState(e,"",h)}else{let u=me(me({},d),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Kr(n)))(r||n)}})();static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oy(n,t){n.events.pipe(Fa(e=>e instanceof Fs||e instanceof Ql||e instanceof Zm||e instanceof Xl),ii(e=>e instanceof Fs||e instanceof Xl?0:(e instanceof Ql?e.code===Ma.Redirect||e.code===Ma.SupersededByNewNavigation:!1)?2:1),Fa(e=>e!==2),Na(1)).subscribe(()=>{t()})}var NY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ct(Dw);stateManager=ct(U3);options=ct(Kd,{optional:!0})||{};pendingTasks=ct(Uc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ct(Ey);urlSerializer=ct(yp);location=ct(jd);urlHandlingStrategy=ct(wy);injector=ct(Dr);_events=new Oi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ct(lR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ct(au,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ct(Sh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new so;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=lo(this.navigationTransitions.currentNavigation);if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ql&&i.code!==Ma.Redirect&&i.code!==Ma.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Fs)this.navigated=!0;else if(i instanceof tu){let d=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),h=me({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RY(r.source)},d);this.scheduleNavigation(u,Km,null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}I$(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Km,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},d=r?.navigationId?r:null;if(r){let h=me({},r);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(s.state=h)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,d,s).catch(h=>{this.disposed||this.injector.get(Is)(h)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return lo(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(F3),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:d,queryParamsHandling:u,preserveFragment:h}=i,v=h?this.currentUrlTree.fragment:d,C=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":C=me(me({},this.currentUrlTree.queryParams),s);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}C!==null&&(C=this.removeEmptyProps(C));let O;try{let T=r?r.snapshot:this.routerState.snapshot.root;O=LA(T)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),O=this.currentUrlTree.root}return VA(O,e,C,v??null,this.urlSerializer)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Yd(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Km,null,i)}navigate(e,i={skipLocationChange:!1}){return VY(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(Vc(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=me({},NY):i===!1?r=me({},LY):r=i,Yd(e))return hA(this.currentUrlTree,e,r);let s=this.parseUrl(e);return hA(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,d){if(this.disposed)return Promise.resolve(!1);let u,h,v;d?(u=d.resolve,h=d.reject,v=d.promise):v=new Promise((O,T)=>{u=O,h=T});let C=this.pendingTasks.add();return Oy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:u,reject:h,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(O=>Promise.reject(O))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VY(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new yt(4008,!1)}var ht=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ds(null);get href(){return lo(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Oi;applicationErrorHandler=ct(Is);options=ct(Kd,{optional:!0});constructor(e,i,r,s,d,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=d,this.locationStrategy=u,this.reactiveHref.set(ct(new Hv("href"),{optional:!0}));let h=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=h==="a"||h==="area"||!!(typeof customElements=="object"&&customElements.get(h)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Fs&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yd(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,d){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||r||s||d||typeof this.target=="string"&&this.target!="_self"))return!0;let h={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,h)?.catch(v=>{this.applicationErrorHandler(v)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Yd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(V(tn),V(Di),bf("tabindex"),V(ll),V(as),V(dl))};static \u0275dir=ui({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&x("click",function(d){return r.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&Ca("href",r.reactiveHref(),pw)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bd],replaceUrl:[2,"replaceUrl","replaceUrl",Bd],routerLink:"routerLink"},features:[Gl]})}return n})();var wh=class{};var dR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fa(e=>e instanceof Fs),Fl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Tm(s.providers,e,`Route: ${s.path}`));let d=s._injector??e,u=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(u,s.children??s._loadedRoutes))}return Er(r).pipe(dm())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=Er(this.loader.loadChildren(e,i)):r=Zt(null);let s=r.pipe(Fo(d=>d===null?Zt(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));if(i.loadComponent&&!i._loadedComponent){let d=this.loader.loadComponent(e,i);return Er([s,d]).pipe(dm())}else return s})}static \u0275fac=function(i){return new(i||n)(it(tn),it(Dr),it(wh),it(Py))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pR=new Gt(""),BY=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Km;restoredId=0;store={};constructor(e,i,r,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=d,d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Jd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Fs?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Xl&&e.code===Xm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof eu))return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(async()=>{await new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new eu(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Ow()};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function UY(){return ct(tn).routerState.root}function Eh(n,t){return{\u0275kind:n,\u0275providers:t}}function jY(){let n=ct(Qo);return t=>{let e=n.get(Yl);if(t!==e.components[0])return;let i=n.get(tn),r=n.get(mR);n.get(W3)===1&&i.initialNavigation(),n.get(fR,null,{optional:!0})?.setUpPreloading(),n.get(pR,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mR=new Gt("",{factory:()=>new Oi}),W3=new Gt("",{factory:()=>1});function uR(){let n=[{provide:sw,useValue:!0},{provide:W3,useValue:0},Wv(()=>{let t=ct(Qo);return t.get(eE,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(tn),s=t.get(mR);Oy(r,()=>{i(!0)}),t.get(Ey).afterPreactivation=()=>(i(!0),s.closed?Zt(void 0):s),r.initialNavigation()}))})];return Eh(2,n)}function gR(){let n=[Wv(()=>{ct(tn).setUpLocationChangeListener()}),{provide:W3,useValue:2}];return Eh(3,n)}var fR=new Gt("");function hR(n){return Eh(0,[{provide:fR,useExisting:dR},{provide:wh,useExisting:n}])}function _R(){return Eh(8,[A3,{provide:Sh,useExisting:A3}])}function vR(n){ip("NgRouterViewTransitions");let t=[{provide:L3,useValue:sR},{provide:V3,useValue:me({skipNextTransition:!!n?.skipInitialTransition},n)}];return Eh(9,t)}var xR=[jd,{provide:yp,useClass:Yc},tn,Cp,{provide:Di,useFactory:UY},Py,[]],Ns=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[xR,[],{provide:au,multi:!0,useValue:e},[],i?.errorHandler?{provide:B3,useValue:i.errorHandler}:[],{provide:Kd,useValue:i||{}},i?.useHash?zY():qY(),WY(),i?.preloadingStrategy?hR(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?HY(i):[],i?.bindToComponentInputs?_R().\u0275providers:[],i?.enableViewTransitions?vR().\u0275providers:[],GY()]}}static forChild(e){return{ngModule:n,providers:[{provide:au,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({})}return n})();function WY(){return{provide:pR,useFactory:()=>{let n=ct(_D),t=ct(Jr),e=ct(Kd),i=ct(Ey),r=ct(yp);return e.scrollOffset&&n.setOffset(e.scrollOffset),new BY(r,i,n,t,e)}}}function zY(){return{provide:dl,useClass:sE}}function qY(){return{provide:dl,useClass:Kv}}function HY(n){return[n.initialNavigation==="disabled"?gR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?uR().\u0275providers:[]]}var j3=new Gt("");function GY(){return[{provide:j3,useFactory:jY},{provide:zv,multi:!0,useExisting:j3}]}var Ty=class n{constructor(t,e){this.authService=t;this.router=e}intercept(t,e){let i=this.authService.getToken();return i&&(t=t.clone({setHeaders:{Authorization:`Bearer ${i}`}})),e.handle(t).pipe(ur(r=>((r.status===401||r.status===403)&&(console.error("Authentication error:",r.status,r.message),this.authService.logout(),this.router.navigate(["/login"])),Ug(()=>r))))}static \u0275fac=function(e){return new(e||n)(it(Ui),it(tn))};static \u0275prov=$e({token:n,factory:n.\u0275fac})};var Ar=class n{constructor(t){this.http=t}baseUrl="/api/branches";getAllBranches(){return this.http.get(this.baseUrl)}getActiveBranches(){return this.http.get(`${this.baseUrl}/active`)}getBranchById(t){return this.http.get(`${this.baseUrl}/${t}`)}getBranchBySlug(t){return this.http.get(`${this.baseUrl}/by-slug/${t}`)}getMyBranch(){return this.http.get(`${this.baseUrl}/my-branch`)}createBranch(t){return this.http.post(this.baseUrl,t)}uploadLogo(t,e){let i=new FormData;return i.append("file",e),this.http.post(`${this.baseUrl}/${t}/logo`,i)}updateBranch(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deleteBranch(t){return this.http.delete(`${this.baseUrl}/${t}`)}getBranchUsers(t){return this.http.get(`${this.baseUrl}/${t}/users`)}createBranchUser(t,e){return this.http.post(`${this.baseUrl}/${t}/users`,e)}updateBranchUser(t,e,i){return this.http.put(`${this.baseUrl}/${t}/users/${e}`,i)}deleteBranchUser(t,e){return this.http.delete(`${this.baseUrl}/${t}/users/${e}`)}resetBranchUserPassword(t,e,i){return this.http.put(`${this.baseUrl}/${t}/users/${e}/password`,{password:i})}getBranchSettings(t){return this.http.get(`${this.baseUrl}/${t}/settings`)}updateBranchSettings(t,e){return this.http.put(`${this.baseUrl}/${t}/settings`,e)}uploadBranchLogo(t,e){let i=new FormData;return i.append("file",e),this.http.post(`${this.baseUrl}/${t}/settings/logo`,i)}uploadBranchSignature(t,e){let i=new FormData;return i.append("file",e),this.http.post(`${this.baseUrl}/${t}/settings/signature`,i)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var en=class n{notifications=[];notificationsSubject=new Ci([]);notifications$=this.notificationsSubject.asObservable();idCounter=0;show(t,e="info",i=4e3){let r={id:++this.idCounter,message:t,type:e,duration:i};this.notifications.push(r),this.notificationsSubject.next([...this.notifications]),i>0&&setTimeout(()=>this.remove(r.id),i)}success(t,e){this.show(t,"success",e)}error(t,e){this.show(t,"error",e)}warning(t,e){this.show(t,"warning",e)}info(t,e){this.show(t,"info",e)}remove(t){this.notifications=this.notifications.filter(e=>e.id!==t),this.notificationsSubject.next([...this.notifications])}clear(){this.notifications=[],this.notificationsSubject.next([])}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function $Y(n,t){if(n&1&&y(0,"img",39),n&2){let e=p().$implicit;m("src",e.logoPath,Cr)("alt",e.name)}}function YY(n,t){n&1&&y(0,"i",40)}function JY(n,t){if(n&1){let e=F();o(0,"div",32),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.selectBranch(r))}),o(1,"div",33),b(2,$Y,1,2,"img",34)(3,YY,1,0,"i",35),a(),o(4,"div",36)(5,"span",37),l(6),a(),o(7,"span",38),l(8),a()()()}if(n&2){let e=t.$implicit,i=p(2);ie("selected",(i.selectedBranch==null?null:i.selectedBranch.id)===e.id),c(2),m("ngIf",e.logoPath),c(),m("ngIf",!e.logoPath),c(3),_(e.name),c(2),_(e.code)}}function KY(n,t){if(n&1&&(o(0,"div",28)(1,"h3"),y(2,"i",29),l(3," Our Companies"),a(),o(4,"div",30),b(5,JY,9,6,"div",31),a()()),n&2){let e=p();c(5),m("ngForOf",e.branches)}}function QY(n,t){if(n&1){let e=F();o(0,"div",41)(1,"div",42),y(2,"i",29),o(3,"div",43)(4,"span",44),l(5,"Logging into"),a(),o(6,"span",37),l(7),a()()(),o(8,"button",45),x("click",function(){g(e);let r=p();return f(r.selectBranch(null))}),y(9,"i",46),a()()}if(n&2){let e=p();c(7),_(e.selectedBranch.name)}}function XY(n,t){n&1&&(o(0,"span"),l(1),Le(2,"translate"),a()),n&2&&(c(),_(xn(2,1,"login.signIn")))}function ZY(n,t){n&1&&(o(0,"span"),y(1,"i",47),l(2," Signing in..."),a())}var ky=class n{constructor(t,e,i,r){this.router=t;this.authService=e;this.branchService=i;this.notificationService=r}username="";password="";rememberMe=!1;showPassword=!1;isLoading=!1;branches=[];selectedBranch=null;showBranchSelector=!1;loadingBranches=!1;ngOnInit(){this.loadBranches()}loadBranches(){this.loadingBranches=!0,this.branchService.getActiveBranches().subscribe({next:t=>{this.branches=t,this.loadingBranches=!1},error:()=>{this.loadingBranches=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleBranchSelector(){this.showBranchSelector=!this.showBranchSelector}selectBranch(t){this.selectedBranch=t,this.showBranchSelector=!1}onSubmit(){if(!this.username||!this.password){this.notificationService.error("Please enter username and password");return}this.isLoading=!0;let t={username:this.username,password:this.password,branchId:this.selectedBranch?.id};this.authService.login(t).subscribe({next:()=>{this.isLoading=!1,this.notificationService.success("Login successful!"),this.router.navigate(["/app/dashboard"])},error:e=>{this.isLoading=!1,this.notificationService.error(e.error?.error||"Login failed. Please try again.")}})}static \u0275fac=function(e){return new(e||n)(V(tn),V(Ui),V(Ar),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-login"]],standalone:!1,decls:61,vars:47,consts:[[1,"login-container"],[1,"login-left"],[1,"brand"],[1,"fas","fa-cube"],[1,"illustration"],[1,"fas","fa-chart-line"],["class","branch-list",4,"ngIf"],[1,"login-right"],[1,"login-box"],[1,"login-header"],["class","selected-branch-banner",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"input-wrapper"],[1,"fas","fa-user"],["type","text","id","username","name","username",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","password"],[1,"fas","fa-lock"],["id","password","name","password",1,"form-control",3,"ngModelChange","type","ngModel","placeholder"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"checkbox-label"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],["href","#",1,"forgot-link"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],[1,"login-footer"],[1,"branch-list"],[1,"fas","fa-building"],[1,"branch-cards"],["class","branch-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"branch-card",3,"click"],[1,"branch-logo"],[3,"src","alt",4,"ngIf"],["class","fas fa-store",4,"ngIf"],[1,"branch-info"],[1,"branch-name"],[1,"branch-code"],[3,"src","alt"],[1,"fas","fa-store"],[1,"selected-branch-banner"],[1,"banner-content"],[1,"banner-text"],[1,"label"],["title","Clear company selection",1,"clear-branch",3,"click"],[1,"fas","fa-times"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),y(3,"i",3),o(4,"h1"),l(5),Le(6,"translate"),a()(),o(7,"div",4),y(8,"i",5),o(9,"h2"),l(10),Le(11,"translate"),a(),o(12,"p"),l(13),Le(14,"translate"),a()(),b(15,KY,6,1,"div",6),a(),o(16,"div",7)(17,"div",8)(18,"div",9)(19,"h2"),l(20),Le(21,"translate"),a(),o(22,"p"),l(23),Le(24,"translate"),a()(),b(25,QY,10,1,"div",10),o(26,"form",11),x("ngSubmit",function(){return i.onSubmit()}),o(27,"div",12)(28,"label",13),l(29),Le(30,"translate"),a(),o(31,"div",14),y(32,"i",15),o(33,"input",16),Le(34,"translate"),S("ngModelChange",function(s){return P(i.username,s)||(i.username=s),s}),a()()(),o(35,"div",12)(36,"label",17),l(37),Le(38,"translate"),a(),o(39,"div",14),y(40,"i",18),o(41,"input",19),Le(42,"translate"),S("ngModelChange",function(s){return P(i.password,s)||(i.password=s),s}),a(),o(43,"button",20),x("click",function(){return i.togglePasswordVisibility()}),y(44,"i"),a()()(),o(45,"div",21)(46,"label",22)(47,"input",23),S("ngModelChange",function(s){return P(i.rememberMe,s)||(i.rememberMe=s),s}),a(),o(48,"span"),l(49),Le(50,"translate"),a()(),o(51,"a",24),l(52),Le(53,"translate"),a()(),o(54,"button",25),b(55,XY,3,3,"span",26)(56,ZY,3,0,"span",26),a()(),o(57,"div",27)(58,"p"),l(59),Le(60,"translate"),a()()()()()),e&2&&(c(5),_(xn(6,23,"app.title")),c(5),_(xn(11,25,"login.tagline")),c(3),_(xn(14,27,"login.description")),c(2),m("ngIf",i.branches.length>0),c(5),_(xn(21,29,"login.title")),c(3),_(xn(24,31,"login.subtitle")),c(2),m("ngIf",i.selectedBranch),c(4),_(xn(30,33,"login.username")),c(4),M("ngModel",i.username),m("placeholder",xn(34,35,"login.usernamePlaceholder")),c(4),_(xn(38,37,"login.password")),c(4),m("type",i.showPassword?"text":"password"),M("ngModel",i.password),m("placeholder",xn(42,39,"login.passwordPlaceholder")),c(3),bi(i.showPassword?"fas fa-eye-slash":"fas fa-eye"),c(3),M("ngModel",i.rememberMe),c(2),_(xn(50,41,"login.rememberMe")),c(3),_(xn(53,43,"login.forgotPassword")),c(2),m("disabled",i.isLoading),c(),m("ngIf",!i.isLoading),c(),m("ngIf",i.isLoading),c(3),D("",xn(60,45,"login.superAdmin"),": admin / admin123"))},dependencies:[Se,be,pi,Ie,Yt,Oe,di,Ee,li,$m],styles:[".login-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.login-left[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#00796b,#004d40);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px;color:#fff}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:40px}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{text-align:center;max-width:400px;margin-bottom:40px}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:24px;opacity:.9}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:12px;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;opacity:.9;line-height:1.6}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]{width:100%;max-width:500px}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin-bottom:16px;display:flex;align-items:center;gap:8px;opacity:.9}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]{background:#ffffff26;border-radius:12px;padding:16px;cursor:pointer;transition:all .3s ease;border:2px solid transparent;text-align:center}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card.selected[_ngcontent-%COMP%]{border-color:#fff;background:#ffffff4d}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;background:#fff3;border-radius:10px}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .branch-name[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.login-left[_ngcontent-%COMP%]   .branch-list[_ngcontent-%COMP%]   .branch-card[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .branch-code[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8}.login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px;background:#f5f7fa}.login-box[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;padding:40px;border-radius:16px;box-shadow:0 10px 40px #0000001a}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#2c3e50;margin-bottom:8px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem}.selected-branch-banner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#e0f2f1,#b2dfdb);border:1px solid #00796b;border-radius:10px;padding:12px 16px;margin-bottom:20px}.selected-branch-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.selected-branch-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#00796b;font-size:1.25rem}.selected-branch-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selected-branch-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#00796b;opacity:.8}.selected-branch-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-text[_ngcontent-%COMP%]   .branch-name[_ngcontent-%COMP%]{font-weight:600;color:#00796b;font-size:.95rem}.selected-branch-banner[_ngcontent-%COMP%]   .clear-branch[_ngcontent-%COMP%]{background:none;border:none;color:#00796b;cursor:pointer;padding:4px;border-radius:4px;transition:background .2s}.selected-branch-banner[_ngcontent-%COMP%]   .clear-branch[_ngcontent-%COMP%]:hover{background:#00796b1a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:.9rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:16px;color:#6c757d;font-size:1rem}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 46px;border:1px solid #e0e0e0;border-radius:10px;font-size:.95rem;transition:all .3s ease}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b;box-shadow:0 0 0 3px #00796b1a}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:16px;background:none;border:none;cursor:pointer;color:#6c757d;padding:0}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#00796b}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:#6c757d}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#00796b}.forgot-link[_ngcontent-%COMP%]{color:#00796b;text-decoration:none;font-size:.9rem;font-weight:500}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fef2f2;color:#dc3545;padding:12px 16px;border-radius:8px;margin-bottom:20px;display:flex;align-items:center;gap:8px;font-size:.9rem}.btn-login[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00796b4d}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:24px;color:#6c757d;font-size:.9rem}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-weight:500;text-decoration:none}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:992px){.login-left[_ngcontent-%COMP%]{display:none}.login-right[_ngcontent-%COMP%]{flex:1}}@media(max-width:480px){.login-right[_ngcontent-%COMP%]{padding:20px}.login-box[_ngcontent-%COMP%]{padding:24px}}"]})};var Iy=class n{socket=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=3e3;reconnectTimer;connectionStatus$=new Ci("disconnected");messages$=new Oi;typingStatus$=new Oi;userStatus$=new Oi;get connectionStatus(){return this.connectionStatus$.asObservable()}get incomingMessages(){return this.messages$.asObservable()}get typingIndicator(){return this.typingStatus$.asObservable()}get userOnlineStatus(){return this.userStatus$.asObservable()}connect(t){if(this.socket?.readyState===WebSocket.OPEN)return;this.connectionStatus$.next("connecting");let i=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?userId=${t}`;try{this.socket=new WebSocket(i),this.socket.onopen=()=>{console.log("WebSocket connected"),this.connectionStatus$.next("connected"),this.reconnectAttempts=0},this.socket.onmessage=r=>{try{let s=JSON.parse(r.data);this.handleMessage(s)}catch(s){console.error("Failed to parse WebSocket message:",s)}},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.connectionStatus$.next("disconnected"),this.attemptReconnect(t)},this.socket.onerror=r=>{console.error("WebSocket error:",r),this.connectionStatus$.next("disconnected")}}catch(r){console.error("Failed to create WebSocket connection:",r),this.connectionStatus$.next("disconnected"),this.simulateRealtime()}}handleMessage(t){switch(t.type){case"message":this.messages$.next(t.payload);break;case"typing":this.typingStatus$.next(t.payload);break;case"status":this.userStatus$.next(t.payload);break}}attemptReconnect(t){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached, using simulation mode"),this.simulateRealtime();return}this.reconnectAttempts++,console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),this.reconnectTimer=setTimeout(()=>{this.connect(t)},this.reconnectInterval)}simulateRealtime(){this.connectionStatus$.next("connected")}sendMessage(t){this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({type:"message",payload:t,timestamp:new Date})):this.messages$.next(t)}sendTypingStatus(t,e,i,r){this.socket?.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"typing",payload:{userId:t,userName:e,isTyping:i,receiverId:r},timestamp:new Date}))}markAsRead(t,e){this.socket?.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"read",payload:{messageId:t,userId:e},timestamp:new Date}))}disconnect(){this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.socket&&(this.socket.close(),this.socket=null),this.connectionStatus$.next("disconnected")}ngOnDestroy(){this.disconnect()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var dn=class n{toasts=[];toastSubject=new Ci([]);idCounter=0;toasts$=this.toastSubject.asObservable();show(t,e="info",i=3e3){let r={id:++this.idCounter,message:t,type:e};this.toasts.push(r),this.toastSubject.next([...this.toasts]),setTimeout(()=>{this.remove(r.id)},i)}success(t,e=3e3){console.log("Toast success:",t),this.show(t,"success",e)}error(t,e=5e3){this.show(t,"error",e)}info(t,e=3e3){this.show(t,"info",e)}warning(t,e=4e3){this.show(t,"warning",e)}remove(t){this.toasts=this.toasts.filter(e=>e.id!==t),this.toastSubject.next([...this.toasts])}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function tJ(n,t){if(n&1){let e=F();o(0,"button",11),x("click",function(){g(e);let r=p();return f(r.goBack())}),y(1,"i",12),a()}}function nJ(n,t){n&1&&(o(0,"h3"),l(1,"Messages"),a())}function iJ(n,t){if(n&1&&(o(0,"div",13),y(1,"i",14),l(2),a()),n&2){let e=p();m("ngClass",e.getConnectionStatusClass()),c(2),D(" ",e.getConnectionStatusText()," ")}}function rJ(n,t){if(n&1&&(o(0,"span",21),l(1),a()),n&2){let e=p(2);c(),D("(",e.selectedUser.employeeCode,")")}}function oJ(n,t){if(n&1&&(o(0,"div",15)(1,"div",16),l(2),a(),o(3,"div",17)(4,"span",18),l(5),a(),b(6,rJ,2,1,"span",19),o(7,"span",20),l(8),a()()()),n&2){let e=p();c(2),_(e.selectedUser.avatar),c(3),_(e.selectedUser.name),c(),m("ngIf",e.selectedUser.employeeCode),c(),ie("online",e.selectedUser.online),c(),D(" ",e.selectedUser.online?"Online":"Offline"," ")}}function aJ(n,t){if(n&1&&(o(0,"span",33),l(1),a()),n&2){let e=p(2);c(),_(e.totalUnread)}}function sJ(n,t){if(n&1&&(o(0,"small"),l(1),a()),n&2){let e=p().$implicit;c(),D("(",e.employeeCode,")")}}function lJ(n,t){if(n&1&&(o(0,"span",39),l(1),a()),n&2){let e=p().$implicit;c(),_(e.unreadCount)}}function cJ(n,t){if(n&1){let e=F();o(0,"div",34),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.selectUser(r))}),o(1,"div",16),l(2),a(),o(3,"div",35)(4,"span",18),l(5),b(6,sJ,2,1,"small",4),a(),o(7,"span",36),l(8),a()(),o(9,"div",37),b(10,lJ,2,1,"span",38),a()()}if(n&2){let e=t.$implicit;c(),ie("online",e.online),c(),D(" ",e.avatar," "),c(3),D("",e.name," "),c(),m("ngIf",e.employeeCode),c(2),_(e.lastMessage),c(2),m("ngIf",e.unreadCount>0)}}function dJ(n,t){n&1&&(o(0,"div",40),y(1,"i",41),o(2,"p"),l(3,"No conversations found"),a()())}function pJ(n,t){if(n&1){let e=F();o(0,"div",22)(1,"div",23)(2,"div",24),y(3,"i",25),o(4,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.searchQuery,r)||(s.searchQuery=r),f(r)}),a()()(),o(5,"div",27)(6,"button",28),x("click",function(){g(e);let r=p();return f(r.activeTab="chats")}),l(7," Chats "),b(8,aJ,2,1,"span",29),a(),o(9,"button",28),x("click",function(){g(e);let r=p();return f(r.activeTab="contacts")}),l(10," Contacts "),a()(),o(11,"div",30),b(12,cJ,11,7,"div",31)(13,dJ,4,0,"div",32),a()()}if(n&2){let e=p();c(4),M("ngModel",e.searchQuery),c(2),ie("active",e.activeTab==="chats"),c(2),m("ngIf",e.totalUnread>0),c(),ie("active",e.activeTab==="contacts"),c(3),m("ngForOf",e.filteredUsers),c(),m("ngIf",e.filteredUsers.length===0)}}function mJ(n,t){n&1&&(o(0,"div",51),y(1,"i",52),l(2," Loading messages... "),a())}function uJ(n,t){if(n&1&&(o(0,"div",55)(1,"div",56)(2,"p",57),l(3),a(),o(4,"span",58),l(5),a()()()),n&2){let e=t.$implicit,i=p(3);ie("own",e.isOwn),c(3),_(e.message),c(2),_(i.formatTime(e.timestamp))}}function gJ(n,t){if(n&1&&(o(0,"div",53),b(1,uJ,6,4,"div",54),a()),n&2){let e=p(2);c(),m("ngForOf",e.messages)}}function fJ(n,t){if(n&1&&(o(0,"div",59)(1,"span"),l(2),a()()),n&2){let e=p(2);c(2),D("",e.typingUser," is typing...")}}function hJ(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),b(2,mJ,3,0,"div",44)(3,gJ,2,1,"div",45),a(),b(4,fJ,3,1,"div",46),o(5,"div",47)(6,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.newMessage,r)||(s.newMessage=r),f(r)}),x("keyup.enter",function(){g(e);let r=p();return f(r.sendMessage())})("input",function(){g(e);let r=p();return f(r.onTyping())}),a(),o(7,"button",49),x("click",function(){g(e);let r=p();return f(r.sendMessage())}),y(8,"i",50),a()()()}if(n&2){let e=p();c(2),m("ngIf",e.loading),c(),m("ngIf",!e.loading),c(),m("ngIf",e.isTyping),c(2),M("ngModel",e.newMessage),c(),m("disabled",!e.newMessage.trim())}}var su=class n{constructor(t,e,i,r,s){this.authService=t;this.websocketService=e;this.http=i;this.cdr=r;this.toastService=s}isOpen=!1;close=new hi;currentUserId=1;currentUserName="Admin";users=[];selectedUser=null;messages=[];newMessage="";searchQuery="";activeTab="chats";loading=!1;connectionStatus="disconnected";isTyping=!1;typingUser="";subscriptions=[];ngOnInit(){let t=this.authService.getCurrentUser();t&&(this.currentUserId=t.id||1,this.currentUserName=`${t.firstName||""} ${t.lastName||""}`.trim()||"User"),this.loadUsers(),this.initializeWebSocket()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.websocketService.disconnect()}initializeWebSocket(){this.websocketService.connect(this.currentUserId);let t=this.websocketService.connectionStatus.subscribe(s=>{this.connectionStatus=s,this.cdr.markForCheck()});this.subscriptions.push(t);let e=this.websocketService.incomingMessages.subscribe(s=>{this.handleIncomingMessage(s)});this.subscriptions.push(e);let i=this.websocketService.typingIndicator.subscribe(s=>{this.selectedUser&&s.userId===this.selectedUser.id&&(this.isTyping=s.isTyping,this.typingUser=s.userName,this.cdr.markForCheck(),s.isTyping&&setTimeout(()=>{this.isTyping=!1,this.cdr.markForCheck()},3e3))});this.subscriptions.push(i);let r=this.websocketService.userOnlineStatus.subscribe(s=>{let d=this.users.find(u=>u.id===s.userId);d&&(d.online=s.online,this.cdr.markForCheck())});this.subscriptions.push(r)}handleIncomingMessage(t){if(this.selectedUser&&t.senderId===this.selectedUser.id){let e={id:t.id,senderId:t.senderId,senderName:t.senderName,receiverId:t.receiverId,message:t.message,timestamp:new Date(t.timestamp),read:!0,isOwn:!1};this.messages.push(e),this.websocketService.markAsRead(t.id,this.currentUserId),this.cdr.markForCheck(),setTimeout(()=>this.scrollToBottom(),100)}else{let e=this.users.find(i=>i.id===t.senderId);e&&(e.unreadCount++,e.lastMessage=t.message,this.toastService.info(`New message from ${t.senderName}: ${t.message.substring(0,50)}${t.message.length>50?"...":""}`),this.cdr.markForCheck())}}loadUsers(){this.http.get("/api/users").subscribe({next:t=>{this.users=t.filter(e=>e.id!==this.currentUserId).map(e=>({id:e.id,name:`${e.firstName||""} ${e.lastName||""}`.trim()||e.username,employeeCode:e.employeeCode||e.employee?.employeeCode,avatar:this.getInitials(e.firstName,e.lastName),online:!1,lastMessage:"",unreadCount:0})),this.cdr.markForCheck()},error:()=>{this.users=[{id:2,name:"John Smith",employeeCode:"EMP001",avatar:"JS",online:!0,lastMessage:"Thanks for the update!",unreadCount:2},{id:3,name:"Sarah Johnson",employeeCode:"EMP002",avatar:"SJ",online:!0,lastMessage:"Meeting at 3pm?",unreadCount:0},{id:4,name:"Mike Wilson",employeeCode:"EMP003",avatar:"MW",online:!1,lastMessage:"Report submitted",unreadCount:1},{id:5,name:"Emily Davis",employeeCode:"EMP004",avatar:"ED",online:!0,lastMessage:"Sounds good!",unreadCount:0},{id:6,name:"HR Department",avatar:"HR",online:!0,lastMessage:"Policy update attached",unreadCount:3}],this.cdr.markForCheck()}})}getInitials(t,e){let i=t?.charAt(0)||"",r=e?.charAt(0)||"";return(i+r).toUpperCase()||"?"}selectUser(t){this.selectedUser=t,t.unreadCount=0,this.loadMessages(t.id)}loadMessages(t){this.loading=!0,this.cdr.markForCheck(),this.http.get(`/api/chat/messages/${t}`).subscribe({next:e=>{this.messages=e.map(i=>({id:i.id,senderId:i.senderId,senderName:i.senderName,receiverId:i.receiverId,message:i.message,timestamp:new Date(i.timestamp),read:i.read,isOwn:i.senderId===this.currentUserId})),this.loading=!1,this.cdr.markForCheck(),setTimeout(()=>this.scrollToBottom(),100)},error:()=>{this.messages=[{id:1,senderId:t,senderName:this.selectedUser?.name||"",receiverId:this.currentUserId,message:"Hi, how are you?",timestamp:new Date(Date.now()-36e5),read:!0,isOwn:!1},{id:2,senderId:this.currentUserId,senderName:this.currentUserName,receiverId:t,message:"I'm doing great, thanks for asking!",timestamp:new Date(Date.now()-3e6),read:!0,isOwn:!0},{id:3,senderId:t,senderName:this.selectedUser?.name||"",receiverId:this.currentUserId,message:"Did you get a chance to review the report?",timestamp:new Date(Date.now()-24e5),read:!0,isOwn:!1},{id:4,senderId:this.currentUserId,senderName:this.currentUserName,receiverId:t,message:"Yes, I reviewed it. Looks good!",timestamp:new Date(Date.now()-18e5),read:!0,isOwn:!0},{id:5,senderId:t,senderName:this.selectedUser?.name||"",receiverId:this.currentUserId,message:this.selectedUser?.lastMessage||"Thanks!",timestamp:new Date(Date.now()-6e5),read:!0,isOwn:!1}],this.loading=!1,this.cdr.markForCheck(),setTimeout(()=>this.scrollToBottom(),100)}})}sendMessage(){if(!this.newMessage.trim()||!this.selectedUser)return;let t={id:Date.now(),senderId:this.currentUserId,senderName:this.currentUserName,receiverId:this.selectedUser.id,message:this.newMessage.trim(),timestamp:new Date};this.websocketService.sendMessage(t);let e={id:t.id,senderId:this.currentUserId,senderName:this.currentUserName,receiverId:this.selectedUser.id,message:this.newMessage.trim(),timestamp:new Date,read:!1,isOwn:!0};this.messages.push(e),this.selectedUser.lastMessage=this.newMessage.trim(),this.newMessage="",this.cdr.markForCheck(),setTimeout(()=>this.scrollToBottom(),100),this.http.post("/api/chat/messages",t).subscribe({error:i=>console.error("Failed to persist message:",i)})}onTyping(){this.selectedUser&&this.websocketService.sendTypingStatus(this.currentUserId,this.currentUserName,!0,this.selectedUser.id)}scrollToBottom(){let t=document.querySelector(".messages-container");t&&(t.scrollTop=t.scrollHeight)}formatTime(t){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}formatDate(t){let e=new Date;if(t.toDateString()===e.toDateString())return"Today";let i=new Date(e);return i.setDate(i.getDate()-1),t.toDateString()===i.toDateString()?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}get filteredUsers(){if(!this.searchQuery.trim())return this.users;let t=this.searchQuery.toLowerCase();return this.users.filter(e=>e.name.toLowerCase().includes(t)||e.employeeCode&&e.employeeCode.toLowerCase().includes(t))}get totalUnread(){return this.users.reduce((t,e)=>t+e.unreadCount,0)}goBack(){this.selectedUser=null,this.messages=[],this.cdr.markForCheck()}closePanel(){this.close.emit()}getConnectionStatusClass(){switch(this.connectionStatus){case"connected":return"status-connected";case"connecting":return"status-connecting";default:return"status-disconnected"}}getConnectionStatusText(){switch(this.connectionStatus){case"connected":return"Connected";case"connecting":return"Connecting...";default:return"Offline"}}static \u0275fac=function(e){return new(e||n)(V(Ui),V(Iy),V(Ft),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-chat-panel"]],inputs:{isOpen:"isOpen"},outputs:{close:"close"},decls:11,vars:8,consts:[[1,"chat-panel"],[1,"chat-header"],[1,"header-left"],["class","back-btn",3,"click",4,"ngIf"],[4,"ngIf"],["class","connection-status",3,"ngClass",4,"ngIf"],["class","selected-user-info",4,"ngIf"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],["class","chat-body",4,"ngIf"],["class","chat-view",4,"ngIf"],[1,"back-btn",3,"click"],[1,"fas","fa-arrow-left"],[1,"connection-status",3,"ngClass"],[1,"fas","fa-circle"],[1,"selected-user-info"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],["class","user-code",4,"ngIf"],[1,"user-status"],[1,"user-code"],[1,"chat-body"],[1,"search-section"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search conversations...",3,"ngModelChange","ngModel"],[1,"tabs-section"],[1,"tab-btn",3,"click"],["class","badge",4,"ngIf"],[1,"users-list"],["class","user-item",3,"click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"badge"],[1,"user-item",3,"click"],[1,"user-info"],[1,"last-message"],[1,"user-meta"],["class","unread-badge",4,"ngIf"],[1,"unread-badge"],[1,"empty-state"],[1,"fas","fa-comments"],[1,"chat-view"],[1,"messages-container"],["class","loading",4,"ngIf"],["class","messages-list",4,"ngIf"],["class","typing-indicator",4,"ngIf"],[1,"message-input"],["type","text","placeholder","Type a message...",3,"ngModelChange","keyup.enter","input","ngModel"],[1,"send-btn",3,"click","disabled"],[1,"fas","fa-paper-plane"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"messages-list"],["class","message-group",3,"own",4,"ngFor","ngForOf"],[1,"message-group"],[1,"message-bubble"],[1,"message-text"],[1,"message-time"],[1,"typing-indicator"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),b(3,tJ,2,0,"button",3)(4,nJ,2,0,"h3",4)(5,iJ,3,2,"div",5)(6,oJ,9,6,"div",6),a(),o(7,"button",7),x("click",function(){return i.closePanel()}),y(8,"i",8),a()(),b(9,pJ,14,8,"div",9)(10,hJ,9,5,"div",10),a()),e&2&&(ie("open",i.isOpen),c(3),m("ngIf",i.selectedUser),c(),m("ngIf",!i.selectedUser),c(),m("ngIf",!i.selectedUser),c(),m("ngIf",i.selectedUser),c(3),m("ngIf",!i.selectedUser),c(),m("ngIf",i.selectedUser))},dependencies:[At,ot,Se,be,Vt,Ie,Oe,Ee,Gf,Rt],styles:['.chat-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:-400px;width:380px;height:100vh;background:#fff;box-shadow:-5px 0 20px #0000001a;z-index:1000;display:flex;flex-direction:column;transition:right .3s ease}.chat-panel.open[_ngcontent-%COMP%]{right:0}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:linear-gradient(135deg,#00796b,#004d40);color:#fff}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0}.chat-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.chat-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.chat-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer;padding:8px;opacity:.8}.chat-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.selected-user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.selected-user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center;font-size:.85rem;font-weight:600}.selected-user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selected-user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600}.selected-user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-status[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8}.selected-user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-status.online[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:6px;height:6px;background:#4caf50;border-radius:50%;margin-right:4px}.chat-body[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.search-section[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0}.search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#f5f7fa;padding:10px 14px;border-radius:8px}.search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d}.search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;outline:none;flex:1;font-size:.9rem}.search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.tabs-section[_ngcontent-%COMP%]{display:flex;padding:0 16px;border-bottom:1px solid #e0e0e0}.tabs-section[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px;background:none;border:none;border-bottom:2px solid transparent;color:#6c757d;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:6px}.tabs-section[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#00796b;border-bottom-color:#00796b}.tabs-section[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:.7rem;padding:2px 6px;border-radius:10px}.users-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;transition:background .3s ease;border-bottom:1px solid #f5f7fa}.user-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.user-item[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:600;position:relative}.user-item[_ngcontent-%COMP%]   .user-avatar.online[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:2px;right:2px;width:10px;height:10px;background:#4caf50;border-radius:50%;border:2px solid white}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{flex:1;min-width:0}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#2c3e50;font-size:.95rem}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .last-message[_ngcontent-%COMP%]{display:block;color:#6c757d;font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-item[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.user-item[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{background:#00796b;color:#fff;font-size:.7rem;padding:2px 8px;border-radius:10px;font-weight:600}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:12px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.chat-view[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;background:#f5f7fa}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;color:#6c757d}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.messages-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.message-group[_ngcontent-%COMP%]{display:flex}.message-group.own[_ngcontent-%COMP%]{justify-content:flex-end}.message-group.own[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border-bottom-right-radius:4px;border-bottom-left-radius:16px}.message-group.own[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#ffffffb3}.message-bubble[_ngcontent-%COMP%]{max-width:75%;padding:10px 14px;background:#fff;border-radius:16px 16px 16px 4px;box-shadow:0 1px 3px #0000001a}.message-bubble[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4;margin:0;word-wrap:break-word}.message-bubble[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:#6c757d;margin-top:4px;text-align:right}.message-input[_ngcontent-%COMP%]{display:flex;gap:10px;padding:12px 16px;background:#fff;border-top:1px solid #e0e0e0}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #e0e0e0;border-radius:20px;outline:none;font-size:.9rem;transition:border-color .3s ease}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.message-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform .2s ease}.message-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05)}.message-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.75rem;padding:4px 8px;border-radius:12px;background:#ffffff26}.connection-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.5rem}.connection-status.status-connected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50}.connection-status.status-connecting[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107}.connection-status.status-disconnected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc3545}.user-code[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8;margin-left:4px}.typing-indicator[_ngcontent-%COMP%]{padding:8px 16px;background:#f5f7fa;font-size:.8rem;color:#6c757d;font-style:italic;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.user-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-weight:400}@media(max-width:480px){.chat-panel[_ngcontent-%COMP%]{width:100%;right:-100%}}'],changeDetection:0})};var vJ=(n,t)=>({$implicit:n,level:0,parentItems:t}),xJ=(n,t,e)=>({$implicit:n,level:t,parentItems:e});function yJ(n,t){n&1&&(o(0,"div",12),y(1,"i",13),o(2,"span",14),l(3),Le(4,"translate"),a()()),n&2&&(c(3),_(xn(4,1,"app.title")))}function CJ(n,t){if(n&1&&y(0,"img",18),n&2){let e=p(2);m("src",e.currentBranch.logoPath,Cr)("alt",e.currentBranch.name)}}function bJ(n,t){n&1&&y(0,"i",19)}function MJ(n,t){if(n&1&&(o(0,"div",15),b(1,CJ,1,2,"img",16)(2,bJ,1,0,"i",17),o(3,"span",14),l(4),a()()),n&2){let e=p();c(),m("ngIf",e.currentBranch.logoPath),c(),m("ngIf",!e.currentBranch.logoPath),c(2),_(e.currentBranch.name)}}function SJ(n,t){n&1&&Tf(0)}function PJ(n,t){if(n&1&&(on(0),b(1,SJ,1,0,"ng-container",20),an()),n&2){let e=t.$implicit,i=p(),r=km(15);c(),m("ngTemplateOutlet",r)("ngTemplateOutletContext",Uw(2,vJ,e,i.menuItems))}}function wJ(n,t){if(n&1&&y(0,"i",26),n&2){let e=p().$implicit;ie("rotated",e.expanded)}}function EJ(n,t){n&1&&Tf(0)}function OJ(n,t){if(n&1&&(on(0),b(1,EJ,1,0,"ng-container",20),an()),n&2){let e=t.$implicit,i=p(2),r=i.$implicit,s=i.level;p();let d=km(15);c(),m("ngTemplateOutlet",d)("ngTemplateOutletContext",Ba(2,xJ,e,s+1,r.children))}}function TJ(n,t){if(n&1&&(o(0,"ul",27),b(1,OJ,2,6,"ng-container",7),a()),n&2){let e=p(),i=e.$implicit,r=e.level;ie("nested",r>0),c(),m("ngForOf",i.children)}}function kJ(n,t){if(n&1){let e=F();o(0,"li",21)(1,"a",22),x("click",function(){let r=g(e),s=r.$implicit,d=r.parentItems,u=p();return f(u.toggleMenu(s,d))}),y(2,"i"),o(3,"span",23),l(4),a(),b(5,wJ,1,2,"i",24),a(),b(6,TJ,2,3,"ul",25),a()}if(n&2){let e=t.$implicit,i=t.level,r=p();jt("padding-left",i>0?i*12:0,"px"),ie("active",r.isActive(e.route))("has-active-child",r.hasActiveChild(e)),c(),m("title",e.label),c(),bi(e.icon),c(2),_(e.label),c(),m("ngIf",e.children&&e.children.length>0),c(),m("ngIf",e.children&&e.children.length>0&&e.expanded)}}var Dy=class n{constructor(t,e,i){this.router=t;this.authService=e;this.branchService=i}collapsed=!1;mobileOpen=!1;currentBranch=null;allMenuItems=[{icon:"fas fa-home",label:"Dashboard",labelKey:"nav.dashboard",route:"/app/dashboard",permissionKey:"Dashboard"},{icon:"fas fa-building",label:"Companies",labelKey:"nav.branchManagement",route:"/app/settings/branches",permissionKey:"SuperAdminOnly"},{icon:"fas fa-project-diagram",label:"Project Management",labelKey:"nav.projects",expanded:!1,permissionKey:"Projects",children:[{icon:"fas fa-tasks",label:"Projects",labelKey:"nav.projects",route:"/app/projects"}]},{icon:"fas fa-cog",label:"Settings",labelKey:"nav.settings",expanded:!1,permissionKey:"Settings",children:[{icon:"fas fa-sliders-h",label:"General Settings",labelKey:"nav.general",route:"/app/settings/general"},{icon:"fas fa-dollar-sign",label:"Finance Settings",labelKey:"nav.finance",expanded:!1,children:[{icon:"fas fa-percent",label:"Tax Rates",labelKey:"nav.taxRates",route:"/app/settings/finance/tax-rates"},{icon:"fas fa-coins",label:"Currencies",labelKey:"nav.currencies",route:"/app/settings/finance/currencies"},{icon:"fas fa-credit-card",label:"Payment Modes",labelKey:"nav.paymentModes",route:"/app/settings/finance/payment-modes"},{icon:"fas fa-receipt",label:"Expense Categories",labelKey:"nav.expenseCategories",route:"/app/settings/finance/expense-categories"}]},{icon:"fas fa-user-cog",label:"Client Settings",labelKey:"nav.customer",route:"/app/settings/customer"},{icon:"fas fa-file-contract",label:"Contract Settings",labelKey:"nav.contract",route:"/app/settings/contract"},{icon:"fas fa-user-shield",label:"Roles Settings",labelKey:"nav.roles",route:"/app/settings/roles"},{icon:"fas fa-users-cog",label:"Staff Management",labelKey:"nav.staff",route:"/app/settings/staff"},{icon:"fas fa-hashtag",label:"Prefix Settings",labelKey:"nav.prefixSettings",route:"/app/settings/prefixes"},{icon:"fas fa-tags",label:"Expense Types",labelKey:"nav.expenseTypes",route:"/app/settings/expense-types"},{icon:"fas fa-plug",label:"Integrations",labelKey:"nav.integrations",route:"/app/settings/integrations"}]},{icon:"fas fa-users",label:"Customer Management",labelKey:"nav.customerManagement",expanded:!1,permissionKey:"Customer Management",children:[{icon:"fas fa-user-friends",label:"Clients",labelKey:"nav.clients",route:"/app/customers"},{icon:"fas fa-file-signature",label:"Contract Management",labelKey:"nav.contractManagement",route:"/app/contracts"}]},{icon:"fas fa-shopping-cart",label:"Procurement",labelKey:"nav.procurement",expanded:!1,permissionKey:"Purchase",children:[{icon:"fas fa-clipboard-list",label:"Purchase Order Management",labelKey:"nav.purchaseOrders",expanded:!1,children:[{icon:"fas fa-file-alt",label:"Purchase Requisition",labelKey:"nav.purchaseRequisition",route:"/app/purchase/requisition",permissionKey:"Purchase - Requisition"},{icon:"fas fa-file-invoice",label:"Direct Purchase",labelKey:"nav.directPurchase",route:"/app/purchase/direct",permissionKey:"Purchase - Orders"},{icon:"fas fa-file-invoice-dollar",label:"Purchase Invoice",labelKey:"nav.purchaseInvoice",route:"/app/purchase/invoices",permissionKey:"Purchase - Invoices"}]},{icon:"fas fa-file-invoice-dollar",label:"Expense Management",labelKey:"nav.expenses",expanded:!1,permissionKey:"Expenses",children:[{icon:"fas fa-list",label:"All Expenses",labelKey:"nav.allExpenses",route:"/app/expenses"},{icon:"fas fa-plus-circle",label:"New Expense",labelKey:"nav.newExpense",route:"/app/expenses/new"}]}]},{icon:"fas fa-calculator",label:"Finance & Accounting",labelKey:"nav.accounting",expanded:!1,permissionKey:"Accounting",children:[{icon:"fas fa-chart-pie",label:"Dashboard",labelKey:"nav.accountingDashboard",route:"/app/accounting/dashboard"},{icon:"fas fa-book",label:"Chart of Accounts",labelKey:"nav.chartOfAccounts",route:"/app/accounting/chart-of-accounts"},{icon:"fas fa-university",label:"Bank Accounts",labelKey:"nav.bankAccounts",route:"/app/accounting/bank-accounts"},{icon:"fas fa-pen",label:"Journal Entries",labelKey:"nav.journalEntries",route:"/app/accounting/journal-entries"},{icon:"fas fa-exchange-alt",label:"Banking",labelKey:"nav.banking",expanded:!1,children:[{icon:"fas fa-list",label:"Transactions",labelKey:"nav.transactions",route:"/app/accounting/transactions"},{icon:"fas fa-random",label:"Transfers",labelKey:"nav.transfers",route:"/app/accounting/transfers"},{icon:"fas fa-check-double",label:"Reconciliation",labelKey:"nav.reconciliation",route:"/app/accounting/reconciliation"}]},{icon:"fas fa-file-invoice-dollar",label:"Bills",labelKey:"nav.bills",route:"/app/accounting/bills"},{icon:"fas fa-balance-scale",label:"Budgets",labelKey:"nav.budgets",route:"/app/accounting/budgets"},{icon:"fas fa-file-alt",label:"Financial Reports",labelKey:"nav.financialReports",route:"/app/accounting/reports"},{icon:"fas fa-cog",label:"Settings",labelKey:"nav.accountingSettings",route:"/app/accounting/settings"}]},{icon:"fas fa-user-tie",label:"HR Management",labelKey:"nav.hr",expanded:!1,permissionKey:"HR Management",children:[{icon:"fas fa-users",label:"Employee Master",labelKey:"nav.employees",expanded:!1,children:[{icon:"fas fa-id-card",label:"Employee List",labelKey:"nav.employeeList",route:"/app/hr/employees"}]},{icon:"fas fa-sitemap",label:"Organization Structure",labelKey:"nav.organization",expanded:!1,children:[{icon:"fas fa-building",label:"Departments",labelKey:"nav.departments",route:"/app/hr/organization/departments"},{icon:"fas fa-map-marker-alt",label:"Locations",labelKey:"nav.locations",route:"/app/hr/organization/locations"},{icon:"fas fa-briefcase",label:"Job Roles",labelKey:"nav.jobRoles",route:"/app/hr/organization/job-roles"},{icon:"fas fa-layer-group",label:"Grades",labelKey:"nav.grades",route:"/app/hr/organization/grades"},{icon:"fas fa-id-badge",label:"Designations",labelKey:"nav.designations",route:"/app/hr/organization/designations"},{icon:"fas fa-chart-pie",label:"Cost Centers",labelKey:"nav.costCenters",route:"/app/hr/organization/cost-centers"},{icon:"fas fa-money-bill-wave",label:"Expense Centers",labelKey:"nav.expenseCenters",route:"/app/hr/organization/expense-centers"}]},{icon:"fas fa-folder-open",label:"Document Management",labelKey:"nav.documents",expanded:!1,children:[{icon:"fas fa-file-alt",label:"Document Types",labelKey:"nav.documentTypes",route:"/app/hr/documents/types"},{icon:"fas fa-bell",label:"Expiry Reminders",labelKey:"nav.documentExpiry",route:"/app/hr/documents/reminders"}]},{icon:"fas fa-handshake",label:"Recruitment",labelKey:"nav.recruitment",expanded:!1,children:[{icon:"fas fa-file-alt",label:"Manpower Requisition",labelKey:"nav.requisitions",route:"/app/hr/recruitment/requisition"},{icon:"fas fa-briefcase",label:"Job Postings",labelKey:"nav.jobPostings",route:"/app/hr/recruitment/postings"},{icon:"fas fa-address-book",label:"Candidate Database",labelKey:"nav.candidates",route:"/app/hr/recruitment/candidates"},{icon:"fas fa-calendar-check",label:"Interviews",labelKey:"nav.interviews",route:"/app/hr/recruitment/interviews"},{icon:"fas fa-file-contract",label:"Offer Letters",labelKey:"nav.offers",route:"/app/hr/recruitment/offers"}]},{icon:"fas fa-graduation-cap",label:"Training & Development",labelKey:"nav.trainingDevelopment",route:"/app/hr/training"},{icon:"fas fa-sign-in-alt",label:"Onboarding",labelKey:"nav.onboarding",route:"/app/hr/onboarding"},{icon:"fas fa-file-invoice",label:"F&F Settlement",labelKey:"nav.ffSettlement",route:"/app/hr/settlement"},{icon:"fas fa-umbrella-beach",label:"Leave Management",labelKey:"nav.leave",expanded:!1,permissionKey:"Leave Management",children:[{icon:"fas fa-list-alt",label:"Leave Types",labelKey:"nav.leaveTypes",route:"/app/leave/types"},{icon:"fas fa-calendar-check",label:"Leave Requests",labelKey:"nav.leaveRequests",route:"/app/leave/requests"},{icon:"fas fa-calendar",label:"Holiday Calendar",labelKey:"nav.holidayCalendar",route:"/app/leave/holidays"}]},{icon:"fas fa-dollar-sign",label:"Loans & Advances",labelKey:"nav.loans",route:"/app/hr/loans",permissionKey:"Loans"},{icon:"fas fa-briefcase",label:"Compensation & Benefits",labelKey:"nav.compensation",expanded:!1,permissionKey:"Compensation",children:[{icon:"fas fa-layer-group",label:"Salary Management",labelKey:"nav.salaryManagement",expanded:!1,children:[{icon:"fas fa-bars",label:"Salary Bands",labelKey:"nav.salaryBands",route:"/app/compensation/salary-bands"},{icon:"fas fa-exchange-alt",label:"Salary Revision",labelKey:"nav.salaryRevisions",route:"/app/compensation/salary-revision"},{icon:"fas fa-gift",label:"Bonus & Incentive",labelKey:"nav.bonuses",route:"/app/compensation/bonus-incentive"}]},{icon:"fas fa-heart",label:"Benefits Administration",labelKey:"nav.benefits",expanded:!1,children:[{icon:"fas fa-hospital",label:"Health Insurance",labelKey:"nav.healthInsurance",route:"/app/compensation/health-insurance"},{icon:"fas fa-tooth",label:"Dental & Vision",labelKey:"nav.dentalVision",route:"/app/compensation/dental-vision"},{icon:"fas fa-utensils",label:"Allowances",labelKey:"nav.allowances",route:"/app/compensation/allowances"},{icon:"fas fa-scroll",label:"Benefits Enrollment",labelKey:"nav.benefitsEnrollment",route:"/app/compensation/enrollment"}]}]},{icon:"fas fa-chart-pie",label:"MIS & Dashboards",labelKey:"nav.misDashboards",expanded:!1,permissionKey:"MIS Dashboards",children:[{icon:"fas fa-users",label:"HR Dashboard",labelKey:"nav.hrDashboard",route:"/app/mis/hr-dashboard"},{icon:"fas fa-chart-line",label:"Performance Dashboard",labelKey:"nav.performanceDashboard",route:"/app/mis/performance-dashboard"},{icon:"fas fa-file-alt",label:"Custom Report Builder",labelKey:"nav.customReports",route:"/app/mis/report-builder"}]}]},{icon:"fas fa-user-clock",label:"Attendance",labelKey:"nav.attendance",expanded:!1,permissionKey:"Attendance",children:[{icon:"fas fa-chart-bar",label:"Attendance Dashboard",labelKey:"nav.attendanceDashboard",route:"/app/mis/attendance-dashboard"},{icon:"fas fa-clock",label:"Time Clock",labelKey:"nav.timeClock",route:"/app/attendance/clock-in-out"},{icon:"fas fa-calendar-day",label:"Daily Attendance",labelKey:"nav.dailyAttendance",route:"/app/attendance/management"},{icon:"fas fa-calendar-week",label:"Weekly Timesheet",labelKey:"nav.weeklyTimesheet",route:"/app/attendance/weekly-timesheet"}]},{icon:"fas fa-money-check-alt",label:"Payroll",labelKey:"nav.payroll",expanded:!1,permissionKey:"Payroll",children:[{icon:"fas fa-cog",label:"Process Payroll",labelKey:"nav.processPayroll",route:"/app/payroll/timesheets"},{icon:"fas fa-history",label:"Payroll History",labelKey:"nav.payrollHistory",route:"/app/payroll/history"},{icon:"fas fa-file-invoice-dollar",label:"Pay Slips (ESS)",labelKey:"nav.paySlips",route:"/app/payroll/self-service"},{icon:"fas fa-chart-pie",label:"Payroll Dashboard",labelKey:"nav.payrollDashboard",route:"/app/mis/payroll-dashboard"}]},{icon:"fas fa-boxes",label:"Inventory Management",labelKey:"nav.inventory",expanded:!1,permissionKey:"Inventory",children:[{icon:"fas fa-layer-group",label:"Group Master",labelKey:"nav.groupMaster",route:"/app/inventory/groups",permissionKey:"Inventory - Group Master"},{icon:"fas fa-box",label:"Item Master",labelKey:"nav.itemMaster",route:"/app/inventory/items",permissionKey:"Inventory - Item Master"},{icon:"fas fa-balance-scale",label:"Units of Measure",labelKey:"nav.units",route:"/app/inventory/units",permissionKey:"Inventory - Units of Measure"},{icon:"fas fa-warehouse",label:"Warehouse & Bin",labelKey:"nav.warehouseBin",expanded:!1,permissionKey:"Inventory - Warehouse & Bin",children:[{icon:"fas fa-warehouse",label:"Warehouse Management",labelKey:"nav.warehouseManagement",route:"/app/inventory/warehouse"},{icon:"fas fa-truck",label:"Supplier",labelKey:"nav.suppliers",route:"/app/inventory/suppliers"}]},{icon:"fas fa-calculator",label:"Inventory Valuation Engine",labelKey:"nav.valuation",route:"/app/inventory/valuation",permissionKey:"Inventory - Valuation"},{icon:"fas fa-exchange-alt",label:"Stock Movement",labelKey:"nav.stockMovement",expanded:!1,children:[{icon:"fas fa-arrow-down",label:"Goods Receipt (GRN)",labelKey:"nav.goodsReceipt",route:"/app/stock/grn",permissionKey:"Stock Movement - Goods Receipt (GRN)"},{icon:"fas fa-arrow-up",label:"Goods Issue",labelKey:"nav.goodsIssue",route:"/app/stock/issue",permissionKey:"Stock Movement - Goods Issue"},{icon:"fas fa-arrows-alt-h",label:"Stock Transfer",labelKey:"nav.stockTransfer",route:"/app/stock/transfer",permissionKey:"Stock Movement - Stock Transfer"},{icon:"fas fa-edit",label:"Stock Adjustments",labelKey:"nav.adjustments",route:"/app/stock/adjustments",permissionKey:"Stock Movement - Stock Adjustments"}]},{icon:"fas fa-book",label:"Inventory Ledger",labelKey:"nav.ledger",route:"/app/inventory/ledger",permissionKey:"Inventory - Ledger"}]},{icon:"fas fa-chart-bar",label:"Reports",labelKey:"nav.reports",expanded:!1,permissionKey:"Reports",children:[{icon:"fas fa-boxes",label:"Inventory Reports",labelKey:"nav.stockReports",expanded:!1,permissionKey:"Reports - Inventory",children:[{icon:"fas fa-clipboard-list",label:"Stock Summary Report",labelKey:"nav.stockSummary",route:"/app/reports/stock-summary"},{icon:"fas fa-coins",label:"Inventory Valuation Report",labelKey:"nav.inventoryValuation",route:"/app/reports/valuation"},{icon:"fas fa-chart-line",label:"Item Movement Report",labelKey:"nav.itemMovement",route:"/app/reports/item-movement"},{icon:"fas fa-book-open",label:"Stock Ledger Report",labelKey:"nav.stockLedger",route:"/app/reports/stock-ledger"},{icon:"fas fa-sitemap",label:"Group-wise Stock Report",labelKey:"nav.groupWiseStock",route:"/app/reports/group-wise"},{icon:"fas fa-warehouse",label:"Warehouse Stock Report",labelKey:"nav.warehouseStock",route:"/app/reports/warehouse-stock"},{icon:"fas fa-exclamation-triangle",label:"Reorder Level",labelKey:"nav.reorderLevel",route:"/app/reports/reorder-level"},{icon:"fas fa-hourglass-half",label:"Slow/Non-Moving Items Report",labelKey:"nav.slowMovingItems",route:"/app/reports/slow-moving"},{icon:"fas fa-file-invoice",label:"Purchase vs GRN Report",labelKey:"nav.purchaseVsGrn",route:"/app/reports/purchase-grn"}]},{icon:"fas fa-shopping-cart",label:"Purchase Reports",labelKey:"nav.purchaseReports",expanded:!1,permissionKey:"Reports - Purchase",children:[{icon:"fas fa-list-alt",label:"PR List Report",labelKey:"nav.prList",route:"/app/reports/purchase/pr-list"},{icon:"fas fa-clock",label:"PR Item Pending Report",labelKey:"nav.prPending",route:"/app/reports/purchase/pr-pending"},{icon:"fas fa-history",label:"PR Fulfillment History Report",labelKey:"nav.prHistory",route:"/app/reports/purchase/pr-history"},{icon:"fas fa-file-alt",label:"PO List",labelKey:"nav.poList",route:"/app/reports/purchase/po-list"},{icon:"fas fa-cart-arrow-down",label:"Direct Purchase Report",labelKey:"nav.directPurchaseReport",route:"/app/reports/purchase/direct-purchase"},{icon:"fas fa-exchange-alt",label:"Stock Issue/Transfer Report",labelKey:"nav.stockIssueTransfer",route:"/app/reports/purchase/stock-issue-transfer"}]},{icon:"fas fa-money-check-alt",label:"Payroll Reports",labelKey:"nav.payrollReports",expanded:!1,permissionKey:"Reports - Payroll",children:[{icon:"fas fa-file-invoice-dollar",label:"Pay Slips",labelKey:"nav.paySlips",route:"/app/payroll/self-service"},{icon:"fas fa-chart-pie",label:"Payroll Summary",labelKey:"nav.payrollSummary",route:"/app/reports/payroll/summary"},{icon:"fas fa-chart-area",label:"Labor Cost Allocation",labelKey:"nav.laborCostAllocation",route:"/app/reports/payroll/labor-cost"},{icon:"fas fa-clipboard-list",label:"Payroll Register",labelKey:"nav.payrollRegister",route:"/app/reports/payroll/register"}]}]},{icon:"fas fa-history",label:"Audit Trails & Logging",labelKey:"nav.auditTrails",expanded:!1,permissionKey:"Audit Trails",children:[{icon:"fas fa-server",label:"System Audits",labelKey:"nav.systemAudits",route:"/app/audit/system"},{icon:"fas fa-boxes",label:"Inventory Audits",labelKey:"nav.inventoryAudits",route:"/app/audit/inventory"},{icon:"fas fa-shopping-cart",label:"Purchase Audits",labelKey:"nav.purchaseAudits",route:"/app/audit/purchase"}]}];menuItems=[];logout(){this.authService.logout(),this.router.navigate(["/login"])}ngOnInit(){this.filterMenuByPermissions(),this.loadCurrentBranch(),this.authService.currentUser$.subscribe(()=>{this.filterMenuByPermissions(),this.loadCurrentBranch()})}loadCurrentBranch(){this.authService.getCurrentUser()?.branchId?this.branchService.getMyBranch().subscribe({next:e=>{this.currentBranch=e},error:()=>{this.currentBranch=null}}):this.currentBranch=null}filterMenuByPermissions(){this.authService.isSuperAdmin()?this.menuItems=JSON.parse(JSON.stringify(this.allMenuItems)):this.menuItems=this.filterItems(JSON.parse(JSON.stringify(this.allMenuItems)))}filterItems(t){return t.filter(e=>e.permissionKey==="SuperAdminOnly"?!1:!e.permissionKey||this.authService.hasFeatureAccess(e.permissionKey)?!(e.children&&(e.children=this.filterItems(e.children),e.children.length===0&&!e.route)):!1)}toggleMenu(t,e){t.route?(this.router.navigate([t.route]),e&&e.forEach(i=>{i!==t&&!i.children?.includes(t)&&(i.expanded=!1)})):t.children&&(t.expanded=!t.expanded)}isActive(t){return t?this.router.url===t||this.router.url.startsWith(t+"/"):!1}hasActiveChild(t){return t.children?t.children.some(e=>this.isActive(e.route)||this.hasActiveChild(e)):!1}static \u0275fac=function(e){return new(e||n)(V(tn),V(Ui),V(Ar))};static \u0275cmp=_e({type:n,selectors:[["app-sidebar"]],inputs:{collapsed:"collapsed",mobileOpen:"mobileOpen"},standalone:!1,decls:16,vars:13,consts:[["menuItemTemplate",""],[1,"sidebar"],[1,"sidebar-header"],["class","logo",4,"ngIf"],["class","logo company-logo",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-list"],[4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"logout-btn",3,"click","title"],[1,"fas","fa-sign-out-alt"],[1,"logout-text"],[1,"logo"],[1,"fas","fa-cube"],[1,"logo-text"],[1,"logo","company-logo"],["class","logo-img",3,"src","alt",4,"ngIf"],["class","fas fa-building",4,"ngIf"],[1,"logo-img",3,"src","alt"],[1,"fas","fa-building"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"nav-item"],[1,"nav-link",3,"click","title"],[1,"nav-text"],["class","fas fa-chevron-down expand-icon",3,"rotated",4,"ngIf"],["class","sub-menu",3,"nested",4,"ngIf"],[1,"fas","fa-chevron-down","expand-icon"],[1,"sub-menu"]],template:function(e,i){if(e&1){let r=F();o(0,"aside",1)(1,"div",2),b(2,yJ,5,3,"div",3)(3,MJ,5,3,"div",4),a(),o(4,"nav",5)(5,"ul",6),b(6,PJ,2,5,"ng-container",7),a()(),o(7,"div",8)(8,"a",9),Le(9,"translate"),x("click",function(){return g(r),f(i.logout())}),y(10,"i",10),o(11,"span",11),l(12),Le(13,"translate"),a()()()(),b(14,kJ,7,12,"ng-template",null,0,Ww)}e&2&&(ie("collapsed",i.collapsed)("mobile-open",i.mobileOpen),c(2),m("ngIf",!i.currentBranch),c(),m("ngIf",i.currentBranch),c(3),m("ngForOf",i.menuItems),c(2),m("title",xn(9,9,"app.logout")),c(4),_(xn(13,11,"app.logout")))},dependencies:[Se,be,pE,$m],styles:['.sidebar[_ngcontent-%COMP%]{width:280px;height:100vh;background:linear-gradient(180deg,#066,teal,#004d4d);position:fixed;left:0;top:0;display:flex;flex-direction:column;box-shadow:2px 0 15px #00000026;transition:all .3s ease;z-index:100;overflow-x:hidden;overflow-y:auto}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:none!important}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:14px}.sidebar-header[_ngcontent-%COMP%]{padding:24px 20px;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:600;color:#fff;display:block!important}.sidebar-header[_ngcontent-%COMP%]   .logo.company-logo[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:8px}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:10px;object-fit:cover;border:2px solid rgba(255,255,255,.3)}.sidebar-header[_ngcontent-%COMP%]   .logo.company-logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 0}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin:2px 10px;border-radius:6px}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#fff3;color:#fff}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:500}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 14px;color:#ffffffd9;text-decoration:none;cursor:pointer;transition:all .2s ease;border-radius:8px;font-size:.8rem;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}.nav-link[_ngcontent-%COMP%]:active{background:#ffffff40}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{width:18px;min-width:18px;text-align:center;font-size:.9rem;color:#fffc;flex-shrink:0}.nav-link[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{flex:1;font-weight:500;white-space:normal;display:block!important;color:#fffffff2;line-height:1.3;overflow:visible}.nav-link[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .3s ease;color:#fff9;width:auto;display:block!important}.nav-link[_ngcontent-%COMP%]   .expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#fff}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.sub-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:6px 0;background:#00000026;border-radius:8px;overflow:hidden;display:block}.sub-menu[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:0;border-radius:0}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#ffffff26;color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:8px 10px 8px 36px;font-size:.75rem;border-radius:0;cursor:pointer}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:active{background:#fff3}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{font-size:.8rem}.sub-menu.nested[_ngcontent-%COMP%]{margin:0;background:#0000001a;border-radius:0}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-left:48px;font-size:.72rem;position:relative}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:38px;top:50%;width:5px;height:5px;background:#fff6;border-radius:50%;transform:translateY(-50%)}.sub-menu.nested[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{background:#fff}.sidebar-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid rgba(255,255,255,.1);flex-shrink:0}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;color:#ff6b6b;text-decoration:none;cursor:pointer;border-radius:8px;transition:all .2s ease;font-weight:500}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{font-size:.95rem;display:block!important}.logout-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b26}@media(max-width:992px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.collapsed.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{display:block!important}.sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:block}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:flex-start;padding:12px 16px}}']})};var Ay=class n{constructor(t){this.http=t}baseUrl="/api/notifications";unreadCountSubject=new Ci(0);unreadCount$=this.unreadCountSubject.asObservable();getNotifications(){return this.http.get(this.baseUrl)}getUnreadNotifications(){return this.http.get(`${this.baseUrl}/unread`)}getUnreadCount(){return this.http.get(`${this.baseUrl}/count`).pipe(si(t=>this.unreadCountSubject.next(t.count)))}markAsRead(t){return this.http.put(`${this.baseUrl}/${t}/read`,{}).pipe(si(()=>{let e=this.unreadCountSubject.value;e>0&&this.unreadCountSubject.next(e-1)}))}markAllAsRead(){return this.http.put(`${this.baseUrl}/read-all`,{}).pipe(si(()=>this.unreadCountSubject.next(0)))}deleteNotification(t){return this.http.delete(`${this.baseUrl}/${t}`)}startPolling(t=3e4){return SS(t).pipe(jg(0),ho(()=>this.getUnreadCount()))}refreshCount(){this.getUnreadCount().subscribe()}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function AJ(n,t){n&1&&y(0,"i",38)}function RJ(n,t){if(n&1){let e=F();o(0,"div",34),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.setLanguage(r.code))}),o(1,"span",35),l(2),a(),o(3,"span",36),l(4),a(),b(5,AJ,1,0,"i",37),a()}if(n&2){let e=t.$implicit,i=p(2);ie("active",e.code===i.currentLanguage),c(2),_(e.flag),c(2),_(e.name),c(),m("ngIf",e.code===i.currentLanguage)}}function FJ(n,t){if(n&1&&(o(0,"div",30)(1,"div",31)(2,"h4"),l(3),Le(4,"translate"),a()(),o(5,"div",32),b(6,RJ,6,5,"div",33),a()()),n&2){let e=p();c(3),_(xn(4,2,"header.languageSettings")),c(3),m("ngForOf",e.availableLanguages)}}function NJ(n,t){if(n&1&&(o(0,"span",39),l(1),a()),n&2){let e=p();c(),_(e.unreadChatCount)}}function LJ(n,t){if(n&1&&(o(0,"span",39),l(1),a()),n&2){let e=p();c(),_(e.getUnreadCount())}}function VJ(n,t){if(n&1){let e=F();o(0,"div",45),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.markAsRead(r))}),o(1,"div",46),y(2,"i",47),a(),o(3,"div",48)(4,"strong"),l(5),a(),o(6,"p"),l(7),a(),o(8,"span",49),l(9),a()()()}if(n&2){let e=t.$implicit,i=p(2);ie("unread",!e.read),c(2),m("ngClass",i.getNotificationIcon(e.type)),c(3),_(e.title),c(2),_(e.message),c(2),_(i.getTimeAgo(e.createdAt))}}function BJ(n,t){n&1&&(o(0,"div",50),y(1,"i",51),o(2,"p"),l(3),Le(4,"translate"),a()()),n&2&&(c(3),_(xn(4,1,"header.noNotifications")))}function UJ(n,t){n&1&&(o(0,"div",52)(1,"a",53),l(2),Le(3,"translate"),a()()),n&2&&(c(2),_(xn(3,1,"header.viewAll")))}function jJ(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",31)(2,"h4"),l(3),Le(4,"translate"),a(),o(5,"a",41),x("click",function(){g(e);let r=p();return f(r.markAllAsRead())}),l(6),Le(7,"translate"),a()(),o(8,"div",32),b(9,VJ,10,6,"div",42)(10,BJ,5,3,"div",43),a(),b(11,UJ,4,3,"div",44),a()}if(n&2){let e=p();c(3),_(xn(4,5,"header.notifications")),c(3),_(xn(7,7,"header.markAllRead")),c(3),m("ngForOf",e.notifications),c(),m("ngIf",e.notifications.length===0),c(),m("ngIf",e.notifications.length>0)}}function WJ(n,t){if(n&1){let e=F();o(0,"div",54)(1,"a",55),y(2,"i",26),l(3),Le(4,"translate"),a(),o(5,"a",55),y(6,"i",56),l(7),Le(8,"translate"),a(),y(9,"div",57),o(10,"a",58),x("click",function(){g(e);let r=p();return f(r.logout())}),y(11,"i",59),l(12),Le(13,"translate"),a()()}n&2&&(c(3),D(" ",xn(4,3,"header.myProfile")," "),c(4),D(" ",xn(8,5,"header.accountSettings")," "),c(5),D(" ",xn(13,7,"header.logout")," "))}var Ry=class n{constructor(t,e,i,r){this.userNotificationService=t;this.authService=e;this.router=i;this.translate=r;this.translate.addLangs(["en","ko","es"]),this.translate.setFallbackLang("en")}toggleSidebar=new hi;openChatPanel=new hi;searchQuery="";showNotifications=!1;showProfile=!1;showLanguageMenu=!1;showChat=!1;notifications=[];unreadCount=0;unreadChatCount=0;currentUserName="User";currentLanguage="en";pollSubscription;availableLanguages=[{code:"en",name:"English",flag:"\u{1F1FA}\u{1F1F8}"},{code:"ko",name:"\uD55C\uAD6D\uC5B4",flag:"\u{1F1F0}\u{1F1F7}"},{code:"es",name:"Espa\xF1ol",flag:"\u{1F1EA}\u{1F1F8}"}];ngOnInit(){let t=this.authService.getCurrentUser();t&&(this.currentUserName=t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.username),this.loadLanguageSettings(),this.loadNotifications(),this.pollSubscription=this.userNotificationService.startPolling(3e4).subscribe({next:e=>{this.unreadCount=e.count,this.loadNotifications()},error:()=>{}})}ngOnDestroy(){this.pollSubscription&&this.pollSubscription.unsubscribe()}loadLanguageSettings(){let t=localStorage.getItem("selectedLanguage");t&&["en","ko","es"].includes(t)?(this.currentLanguage=t,this.translate.use(t)):(this.currentLanguage="en",this.translate.use("en"))}getCurrentLanguageFlag(){let t=this.availableLanguages.find(e=>e.code===this.currentLanguage);return t?t.flag:"\u{1F1FA}\u{1F1F8}"}loadNotifications(){this.userNotificationService.getNotifications().subscribe({next:t=>{this.notifications=t,this.unreadCount=t.filter(e=>!e.read).length},error:()=>{this.notifications=[],this.unreadCount=0}})}onToggleSidebar(){this.toggleSidebar.emit()}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showProfile=!1,this.showNotifications&&this.loadNotifications()}toggleProfile(){this.showProfile=!this.showProfile,this.showNotifications=!1,this.showLanguageMenu=!1}toggleLanguageMenu(){this.showLanguageMenu=!this.showLanguageMenu,this.showNotifications=!1,this.showProfile=!1}setLanguage(t){this.availableLanguages.find(i=>i.code===t)&&(this.currentLanguage=t,this.translate.use(t),localStorage.setItem("selectedLanguage",t),this.showLanguageMenu=!1)}toggleChat(){this.showChat=!this.showChat,this.showNotifications=!1,this.showProfile=!1,this.showLanguageMenu=!1,this.openChatPanel.emit()}getUnreadCount(){return this.unreadCount}markAsRead(t){t.read||this.userNotificationService.markAsRead(t.id).subscribe({next:()=>{t.read=!0,this.unreadCount=Math.max(0,this.unreadCount-1)}}),t.referenceType==="PurchaseRequisition"&&t.referenceId&&(this.router.navigate(["/app/purchase/requisition"]),this.showNotifications=!1)}markAllAsRead(){this.userNotificationService.markAllAsRead().subscribe({next:()=>{this.notifications.forEach(t=>t.read=!0),this.unreadCount=0}})}getTimeAgo(t){let e=new Date(t),r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4);if(s<1)return"Just now";if(s<60)return`${s} min ago`;let d=Math.floor(s/60);if(d<24)return`${d} hour${d>1?"s":""} ago`;let u=Math.floor(d/24);return`${u} day${u>1?"s":""} ago`}getNotificationIcon(t){switch(t){case"PR_APPROVAL":return"fa-file-alt";case"PO_CREATED":return"fa-shopping-cart";case"STOCK_ALERT":return"fa-exclamation-triangle";default:return"fa-info-circle"}}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(V(Ay),V(Ui),V(tn),V(mh))};static \u0275cmp=_e({type:n,selectors:[["app-header"]],outputs:{toggleSidebar:"toggleSidebar",openChatPanel:"openChatPanel"},standalone:!1,decls:36,vars:14,consts:[[1,"header"],[1,"header-left"],[1,"toggle-btn",3,"click"],[1,"fas","fa-bars"],[1,"search-box"],[1,"fas","fa-search"],["type","text",3,"ngModelChange","ngModel","placeholder"],[1,"header-right"],[1,"header-actions"],[1,"language-wrapper"],[1,"action-btn",3,"click","title"],[1,"fas","fa-globe"],[1,"current-lang-flag"],["class","dropdown language-dropdown",4,"ngIf"],[1,"chat-wrapper"],[1,"action-btn",3,"click"],[1,"fas","fa-comments"],["class","badge",4,"ngIf"],[1,"notification-wrapper"],[1,"fas","fa-bell"],["class","dropdown notification-dropdown",4,"ngIf"],[1,"action-btn"],[1,"fas","fa-envelope"],[1,"profile-wrapper"],[1,"profile-btn",3,"click"],[1,"avatar"],[1,"fas","fa-user"],[1,"name"],[1,"fas","fa-chevron-down"],["class","dropdown profile-dropdown",4,"ngIf"],[1,"dropdown","language-dropdown"],[1,"dropdown-header"],[1,"dropdown-body"],["class","language-item",3,"active","click",4,"ngFor","ngForOf"],[1,"language-item",3,"click"],[1,"lang-flag"],[1,"lang-name"],["class","fas fa-check check-icon",4,"ngIf"],[1,"fas","fa-check","check-icon"],[1,"badge"],[1,"dropdown","notification-dropdown"],["href","javascript:void(0)",3,"click"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf"],["class","notification-empty",4,"ngIf"],["class","dropdown-footer",4,"ngIf"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"fas",3,"ngClass"],[1,"notification-content"],[1,"time"],[1,"notification-empty"],[1,"fas","fa-bell-slash"],[1,"dropdown-footer"],["href","javascript:void(0)"],[1,"dropdown","profile-dropdown"],["href","javascript:void(0)",1,"dropdown-item"],[1,"fas","fa-cog"],[1,"dropdown-divider"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(e,i){e&1&&(o(0,"header",0)(1,"div",1)(2,"button",2),x("click",function(){return i.onToggleSidebar()}),y(3,"i",3),a(),o(4,"div",4),y(5,"i",5),o(6,"input",6),Le(7,"translate"),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(8,"div",7)(9,"div",8)(10,"div",9)(11,"button",10),Le(12,"translate"),x("click",function(){return i.toggleLanguageMenu()}),y(13,"i",11),o(14,"span",12),l(15),a()(),b(16,FJ,7,4,"div",13),a(),o(17,"div",14)(18,"button",15),x("click",function(){return i.toggleChat()}),y(19,"i",16),b(20,NJ,2,1,"span",17),a()(),o(21,"div",18)(22,"button",15),x("click",function(){return i.toggleNotifications()}),y(23,"i",19),b(24,LJ,2,1,"span",17),a(),b(25,jJ,12,9,"div",20),a(),o(26,"button",21),y(27,"i",22),a()(),o(28,"div",23)(29,"button",24),x("click",function(){return i.toggleProfile()}),o(30,"div",25),y(31,"i",26),a(),o(32,"span",27),l(33),a(),y(34,"i",28),a(),b(35,WJ,14,9,"div",29),a()()()),e&2&&(c(6),M("ngModel",i.searchQuery),m("placeholder",xn(7,10,"header.search")),c(5),m("title",xn(12,12,"header.languageSettings")),c(4),_(i.getCurrentLanguageFlag()),c(),m("ngIf",i.showLanguageMenu),c(4),m("ngIf",i.unreadChatCount>0),c(4),m("ngIf",i.getUnreadCount()>0),c(),m("ngIf",i.showNotifications),c(8),_(i.currentUserName),c(2),m("ngIf",i.showProfile))},dependencies:[ot,Se,be,Ie,Oe,Ee,$m],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#fff;box-shadow:0 2px 10px #0000000d;position:sticky;top:0;z-index:50}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#6c757d;cursor:pointer;padding:8px;border-radius:8px;transition:all .3s ease}.toggle-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#f5f7fa;padding:10px 16px;border-radius:10px;min-width:300px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;outline:none;font-size:.9rem;flex:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.action-btn[_ngcontent-%COMP%]{position:relative;background:none;border:none;font-size:1.1rem;color:#6c757d;cursor:pointer;padding:10px;border-radius:10px;transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.action-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#dc3545;color:#fff;font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600}.notification-wrapper[_ngcontent-%COMP%], .profile-wrapper[_ngcontent-%COMP%], .language-wrapper[_ngcontent-%COMP%], .chat-wrapper[_ngcontent-%COMP%]{position:relative}.language-dropdown[_ngcontent-%COMP%]{min-width:220px}.current-lang-flag[_ngcontent-%COMP%]{font-size:.9rem;margin-left:4px}.language-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:background .3s ease}.language-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.language-item.active[_ngcontent-%COMP%]{background:#00796b14}.language-item.active[_ngcontent-%COMP%]   .lang-name[_ngcontent-%COMP%]{color:#00796b;font-weight:600}.language-item[_ngcontent-%COMP%]   .lang-flag[_ngcontent-%COMP%]{font-size:1.25rem}.language-item[_ngcontent-%COMP%]   .lang-name[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#2c3e50}.language-item[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{color:#00796b;font-size:.85rem}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000026;min-width:320px;margin-top:8px;z-index:100;overflow:hidden}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.dropdown-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2c3e50}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.85rem;text-decoration:none}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropdown-body[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 20px;border-bottom:1px solid #f5f7fa;cursor:pointer;transition:background .3s ease}.notification-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.notification-item.unread[_ngcontent-%COMP%]{background:#00796b0d}.notification-item[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#2c3e50;margin-bottom:4px}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.notification-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#6c757d}.notification-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:12px;opacity:.5}.notification-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.notification-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600;color:#2c3e50;margin-bottom:4px}.dropdown-footer[_ngcontent-%COMP%]{padding:12px 20px;text-align:center;border-top:1px solid #e0e0e0}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.9rem;text-decoration:none;font-weight:500}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.profile-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:none;border:none;cursor:pointer;padding:8px 12px;border-radius:10px;transition:all .3s ease}.profile-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa}.profile-btn[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1rem}.profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#2c3e50}.profile-btn[_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d}.profile-dropdown[_ngcontent-%COMP%]{min-width:200px}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;color:#6c757d;text-decoration:none;transition:all .3s ease}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;text-align:center}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.dropdown-item.text-danger[_ngcontent-%COMP%]{color:#dc3545}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#dc35451a;color:#dc3545}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e0e0e0;margin:8px 0}@media(max-width:768px){.search-box[_ngcontent-%COMP%], .profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}}"]})};function qJ(n,t){if(n&1){let e=F();o(0,"div",7),x("click",function(){g(e);let r=p();return f(r.closeMobileMenu())}),a()}}var Fy=class n{sidebarCollapsed=!1;mobileMenuOpen=!1;isMobile=!1;chatPanelOpen=!1;constructor(){this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=992,this.isMobile||(this.mobileMenuOpen=!1)}toggleSidebar(){this.isMobile?this.mobileMenuOpen=!this.mobileMenuOpen:this.sidebarCollapsed=!this.sidebarCollapsed}closeMobileMenu(){this.isMobile&&(this.mobileMenuOpen=!1)}toggleChatPanel(){this.chatPanelOpen=!this.chatPanelOpen}closeChatPanel(){this.chatPanelOpen=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-layout"]],hostBindings:function(e,i){e&1&&x("resize",function(){return i.onResize()},mw)},standalone:!1,decls:8,vars:8,consts:[[1,"layout"],["class","mobile-overlay",3,"click",4,"ngIf"],[3,"collapsed","mobileOpen"],[1,"main-wrapper"],[3,"toggleSidebar","openChatPanel"],[1,"main-content"],[3,"close","isOpen"],[1,"mobile-overlay",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,qJ,1,0,"div",1),y(2,"app-sidebar",2),o(3,"div",3)(4,"app-header",4),x("toggleSidebar",function(){return i.toggleSidebar()})("openChatPanel",function(){return i.toggleChatPanel()}),a(),o(5,"main",5),y(6,"router-outlet"),a()(),o(7,"app-chat-panel",6),x("close",function(){return i.closeChatPanel()}),a()()),e&2&&(ie("sidebar-collapsed",i.sidebarCollapsed)("mobile-menu-open",i.mobileMenuOpen),c(),m("ngIf",i.mobileMenuOpen),c(),m("collapsed",i.sidebarCollapsed)("mobileOpen",i.mobileMenuOpen),c(5),m("isOpen",i.chatPanelOpen))},dependencies:[be,bp,su,Dy,Ry],styles:[".layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.main-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:280px;transition:margin-left .3s ease}.layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:70px}.main-content[_ngcontent-%COMP%]{flex:1;padding:24px;background:#f5f7fa;overflow-y:auto}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:99}@media(max-width:992px){.main-wrapper[_ngcontent-%COMP%], .layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:0}.mobile-overlay[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]:not(.mobile-menu-open)   .mobile-overlay[_ngcontent-%COMP%]{display:none}}"]})};var Ny=class n{constructor(t){this.http=t}baseUrl="/api/dashboard";getStats(){return this.http.get(`${this.baseUrl}/stats`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var _i=class n{constructor(t){this.http=t}baseUrl="/api/inventory/items";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByGroup(t){return this.http.get(`${this.baseUrl}/group/${t}`)}validateName(t,e,i){let r=`${this.baseUrl}/validate-name?name=${encodeURIComponent(t)}&groupId=${e}`;return i&&(r+=`&excludeId=${i}`),this.http.get(r)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}getLowStock(){return this.http.get(`${this.baseUrl}/low-stock`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function GJ(n,t){if(n&1&&(o(0,"div",26)(1,"div",27),y(2,"i"),a(),o(3,"div",28)(4,"h3"),l(5),a(),o(6,"p"),l(7),a()()()),n&2){let e=t.$implicit;c(),m("ngClass",e.type),c(),bi(e.icon),c(3),_(e.value),c(2),_(e.label)}}function $J(n,t){if(n&1&&(o(0,"span",32),l(1),a()),n&2){let e=p().$implicit;c(),_(e)}}function YJ(n,t){if(n&1&&(o(0,"div",35),l(1),a()),n&2){let e=t.$implicit;m("ngClass",e.type),c(),D(" ",e.title," ")}}function JJ(n,t){if(n&1&&(o(0,"div",33),b(1,YJ,2,2,"div",34),a()),n&2){let e=p().$implicit,i=p();c(),m("ngForOf",i.getEventsForDay(e))}}function KJ(n,t){if(n&1&&(o(0,"div",29),b(1,$J,2,1,"span",30)(2,JJ,2,1,"div",31),a()),n&2){let e=t.$implicit,i=p();ie("empty",e===0)("today",i.isToday(e)),c(),m("ngIf",e!==0),c(),m("ngIf",e!==0)}}function QJ(n,t){n&1&&(o(0,"tr")(1,"td",36),y(2,"i",37),o(3,"p"),l(4,"No low stock alerts"),a()()())}function XJ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",38),l(11),a()()()),n&2){let e=t.$implicit,i=p();c(2),_(e.code),c(2),_(e.name),c(2),_(e.currentStock),c(2),_(e.reorderLevel),c(2),m("ngClass",i.getStatusClass(e.currentStock<=0?"Critical":"Low")),c(),D(" ",e.currentStock<=0?"Out of Stock":"Low Stock"," ")}}var Ly=class n{constructor(t,e){this.dashboardService=t;this.itemService=e}stats=[];dashboardStats=null;lowStockItems=[];loading=!1;dataReady=!1;subscriptionCount=0;expectedSubscriptions=2;currentDate=new Date;daysInMonth=[];monthName="";year=0;events=[];ngOnInit(){this.loadDashboardData(),this.initCalendar()}initCalendar(){let t=new Date;this.year=t.getFullYear();let e=t.getMonth();this.monthName=t.toLocaleString("default",{month:"long"});let i=new Date(this.year,e,1).getDay(),r=new Date(this.year,e+1,0).getDate();this.daysInMonth=[];for(let s=0;s<i;s++)this.daysInMonth.push(0);for(let s=1;s<=r;s++)this.daysInMonth.push(s);this.events=[{day:15,title:"Payroll Process",type:"warning"},{day:20,title:"Tax Due",type:"danger"},{day:25,title:"Inventory Audit",type:"info"}]}getEventsForDay(t){return this.events.filter(e=>e.day===t)}isToday(t){let e=new Date;return e.getDate()===t&&e.getMonth()===this.currentDate.getMonth()&&e.getFullYear()===this.currentDate.getFullYear()}incrementAndCheck(){this.subscriptionCount++,this.subscriptionCount>=this.expectedSubscriptions&&(this.loading=!1,this.dataReady=!0)}loadDashboardData(){this.loading=!0,this.dataReady=!1,this.subscriptionCount=0,this.dashboardService.getStats().subscribe({next:t=>{this.dashboardStats=t,this.stats=[{icon:"fas fa-users",label:"Total Customers",value:t.totalCustomers?.toString()||"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:t.totalContracts?.toString()||"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:t.totalItems?.toString()||"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$"+(t.totalInventoryValue?.toLocaleString()||"0"),change:"",type:"warning"}],this.incrementAndCheck()},error:t=>{console.error("Error loading dashboard stats",t),this.stats=[{icon:"fas fa-users",label:"Total Customers",value:"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$0",change:"",type:"warning"}],this.incrementAndCheck()}}),this.itemService.getLowStock().subscribe({next:t=>{this.lowStockItems=t,this.incrementAndCheck()},error:t=>{console.error("Error loading low stock items",t),this.incrementAndCheck()}})}getPriorityClass(t){return{Low:"badge-success",Medium:"badge-warning",High:"badge-danger",Critical:"badge-danger"}[t]||"badge-info"}getStatusClass(t){return t==="Critical"?"badge-danger":"badge-warning"}static \u0275fac=function(e){return new(e||n)(V(Ny),V(_i))};static \u0275cmp=_e({type:n,selectors:[["app-dashboard"]],standalone:!1,decls:86,vars:18,consts:[[1,"dashboard"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"stats-grid"],["class","stat-card",4,"ngFor","ngForOf"],[1,"dashboard-grid"],[1,"card","chart-card"],[1,"card-header"],[1,"chart-container"],[1,"chart-placeholder"],[1,"bar-chart"],[1,"bar"],[1,"bar-label"],[1,"card","calendar-card"],[1,"fas","fa-calendar-alt"],[1,"calendar-container"],[1,"calendar-days-header"],[1,"calendar-grid"],["class","calendar-day",3,"empty","today",4,"ngFor","ngForOf"],[1,"card"],["routerLink","/app/reports/reorder-level",1,"btn","btn-primary","btn-sm"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"stat-card"],[1,"icon",3,"ngClass"],[1,"info"],[1,"calendar-day"],["class","day-number",4,"ngIf"],["class","day-events",4,"ngIf"],[1,"day-number"],[1,"day-events"],["class","event-pill",3,"ngClass",4,"ngFor","ngForOf"],[1,"event-pill",3,"ngClass"],["colspan","5",1,"empty-state"],[1,"fas","fa-check-circle",2,"color","#4caf50"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Dashboard"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Dashboard"),a()()()(),o(12,"div",4),b(13,GJ,8,5,"div",5),a(),o(14,"div",6)(15,"div",7)(16,"div",8)(17,"h3"),l(18,"Revenue Overview"),a()(),o(19,"div",9)(20,"div",10)(21,"div",11)(22,"div",12)(23,"span",13),l(24,"Jan"),a()(),o(25,"div",12)(26,"span",13),l(27,"Feb"),a()(),o(28,"div",12)(29,"span",13),l(30,"Mar"),a()(),o(31,"div",12)(32,"span",13),l(33,"Apr"),a()(),o(34,"div",12)(35,"span",13),l(36,"May"),a()(),o(37,"div",12)(38,"span",13),l(39,"Jun"),a()()()()()(),o(40,"div",14)(41,"div",8)(42,"h3"),y(43,"i",15),l(44),a()(),o(45,"div",16)(46,"div",17)(47,"span"),l(48,"Sun"),a(),o(49,"span"),l(50,"Mon"),a(),o(51,"span"),l(52,"Tue"),a(),o(53,"span"),l(54,"Wed"),a(),o(55,"span"),l(56,"Thu"),a(),o(57,"span"),l(58,"Fri"),a(),o(59,"span"),l(60,"Sat"),a()(),o(61,"div",18),b(62,KJ,3,6,"div",19),a()()()(),o(63,"div",20)(64,"div",8)(65,"h3"),l(66,"Low Stock Alerts"),a(),o(67,"a",21),l(68,"View All"),a()(),o(69,"div",22)(70,"table",23)(71,"thead")(72,"tr")(73,"th"),l(74,"Item Code"),a(),o(75,"th"),l(76,"Item Name"),a(),o(77,"th"),l(78,"Current Stock"),a(),o(79,"th"),l(80,"Reorder Level"),a(),o(81,"th"),l(82,"Status"),a()()(),o(83,"tbody"),b(84,QJ,5,0,"tr",24)(85,XJ,12,6,"tr",25),a()()()()()),e&2&&(c(13),m("ngForOf",i.stats),c(9),jt("height",60,"%"),c(3),jt("height",75,"%"),c(3),jt("height",45,"%"),c(3),jt("height",80,"%"),c(3),jt("height",65,"%"),c(3),jt("height",90,"%"),c(7),Ge(" ",i.monthName," ",i.year),c(18),m("ngForOf",i.daysInMonth),c(22),m("ngIf",i.lowStockItems.length===0),c(),m("ngForOf",i.lowStockItems))},dependencies:[ot,Se,be,ht],styles:[".dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:4px}.header-stats[_ngcontent-%COMP%]{display:flex;gap:24px}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;text-transform:uppercase}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2c3e50}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{position:relative}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:.85rem;font-weight:500;color:#6c757d}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#28a745}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;margin-bottom:24px}.calendar-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#f8f9fa;border-bottom:1px solid #eee}.calendar-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2c3e50;margin:0;display:flex;align-items:center;gap:10px}.calendar-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.calendar-card[_ngcontent-%COMP%]   .calendar-container[_ngcontent-%COMP%]{padding:10px}.calendar-card[_ngcontent-%COMP%]   .calendar-days-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);text-align:center;font-weight:600;font-size:.75rem;color:#6c757d;margin-bottom:8px;padding-bottom:5px}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:#eee;border:1px solid #eee;border-radius:4px;overflow:hidden}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]{background:#fff;min-height:70px;padding:4px;position:relative;transition:background .2s}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]:hover:not(.empty){background:#f8f9fa}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.empty[_ngcontent-%COMP%]{background:#fafafa}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]{background:#e0f2f1}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{background:#00796b;color:#fff;width:22px;height:22px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:.75rem}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;color:#2c3e50;margin-bottom:4px;display:inline-block}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .event-pill[_ngcontent-%COMP%]{font-size:.6rem;padding:1px 4px;border-radius:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff;margin-bottom:1px}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .event-pill.warning[_ngcontent-%COMP%]{background:#ffa726}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .event-pill.danger[_ngcontent-%COMP%]{background:#ef5350}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .event-pill.info[_ngcontent-%COMP%]{background:#42a5f5}.calendar-card[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .event-pill.success[_ngcontent-%COMP%]{background:#66bb6a}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.chart-card[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:.875rem;cursor:pointer}.chart-container[_ngcontent-%COMP%]{height:250px;display:flex;align-items:flex-end}.bar-chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;width:100%;height:100%;padding-top:30px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,#00796b,#26a69a);border-radius:6px 6px 0 0;position:relative;display:flex;flex-direction:column;align-items:center;transition:all .3s ease;min-height:20px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:hover{transform:scaleY(1.05)}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{position:absolute;bottom:-25px;font-size:.75rem;color:#6c757d}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{position:absolute;top:-25px;font-size:.75rem;font-weight:500;color:#2c3e50}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;margin-top:40px}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem;color:#6c757d}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.5rem}.side-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.earnings-card[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border-radius:12px;padding:20px}.earnings-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin-bottom:16px;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%]{height:60px;margin-bottom:16px}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;height:100%}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%]{width:8px;background:#ffffff80;border-radius:4px}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]{height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fffc}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:.8rem;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#a5d6a7}.customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#26a69a,#00796b)}.sales-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:8px}.sales-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#2c3e50}.donut-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]{width:150px;height:150px;position:relative}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-ring[_ngcontent-%COMP%]{width:100%;height:100%;border:20px solid #e0e0e0;border-top-color:#00796b;border-right-color:#26a69a;border-radius:50%}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#00796b}.wide-card[_ngcontent-%COMP%]{grid-column:span 1}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem}@media(max-width:1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-stats[_ngcontent-%COMP%]{display:none}}"]})};function ZJ(n,t){if(n&1&&y(0,"img",22),n&2){let e=p().$implicit;m("src",e.logoPath,Cr)("alt",e.name)}}function eK(n,t){n&1&&y(0,"i",23)}function tK(n,t){if(n&1){let e=F();o(0,"div",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.selectCompany(r))}),o(1,"div",14),b(2,ZJ,1,2,"img",15)(3,eK,1,0,"i",16),a(),o(4,"div",17)(5,"h3",18),l(6),a(),o(7,"span",19),l(8),a()(),o(9,"div",20),y(10,"i",21),a()()}if(n&2){let e=t.$implicit;c(2),m("ngIf",e.logoPath),c(),m("ngIf",!e.logoPath),c(3),_(e.name),c(2),_(e.code)}}function nK(n,t){if(n&1&&(o(0,"div",11),b(1,tK,11,4,"div",12),a()),n&2){let e=p();c(),m("ngForOf",e.companies)}}function iK(n,t){n&1&&(o(0,"div",24),y(1,"i",25),o(2,"p"),l(3,"No companies available"),a()())}function rK(n,t){n&1&&(o(0,"div",26),y(1,"i",27),o(2,"p"),l(3,"Loading companies..."),a()())}var Vy=class n{constructor(t,e,i){this.router=t;this.branchService=e;this.cdr=i}companies=[];isLoading=!0;subscription=null;ngOnInit(){this.loadCompanies()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadCompanies(){this.isLoading=!0,this.cdr.markForCheck(),this.subscription=this.branchService.getActiveBranches().subscribe({next:t=>{this.companies=t,this.isLoading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading companies:",t),this.companies=[],this.isLoading=!1,this.cdr.markForCheck()}})}selectCompany(t){let e=t.slug||t.code.toLowerCase().replace(/[^a-z0-9]/g,"-");this.router.navigate(["/",e])}goToMainLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(V(tn),V(Ar),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-company-selector"]],standalone:!1,decls:15,vars:3,consts:[[1,"company-selector-container"],[1,"selector-header"],[1,"brand"],[1,"fas","fa-cube"],[1,"tagline"],["class","companies-grid",4,"ngIf"],["class","no-companies",4,"ngIf"],["class","loading",4,"ngIf"],[1,"selector-footer"],[1,"btn-main-login",3,"click"],[1,"fas","fa-sign-in-alt"],[1,"companies-grid"],["class","company-card",3,"click",4,"ngFor","ngForOf"],[1,"company-card",3,"click"],[1,"company-logo"],[3,"src","alt",4,"ngIf"],["class","fas fa-building",4,"ngIf"],[1,"company-info"],[1,"company-name"],[1,"company-code"],[1,"company-arrow"],[1,"fas","fa-arrow-right"],[3,"src","alt"],[1,"fas","fa-building"],[1,"no-companies"],[1,"fas","fa-building-circle-exclamation"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),y(3,"i",3),o(4,"h1"),l(5,"Hao System"),a()(),o(6,"p",4),l(7,"Select your company to continue"),a()(),b(8,nK,2,1,"div",5)(9,iK,4,0,"div",6)(10,rK,4,0,"div",7),o(11,"div",8)(12,"button",9),x("click",function(){return i.goToMainLogin()}),y(13,"i",10),l(14," Go to Main Login "),a()()()),e&2&&(c(8),m("ngIf",!i.isLoading&&i.companies.length>0),c(),m("ngIf",!i.isLoading&&i.companies.length===0),c(),m("ngIf",i.isLoading))},dependencies:[Se,be],styles:[".company-selector-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#0a5a5e,#0d7377,#14919b);display:flex;flex-direction:column;align-items:center;padding:40px 20px}.selector-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;color:#fff}.selector-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:16px}.selector-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.selector-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.selector-header[_ngcontent-%COMP%]   .tagline[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin:0}.companies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;max-width:1200px;width:100%;margin-bottom:40px}.company-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;display:flex;align-items:center;gap:16px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 20px #0000001a}.company-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 30px #0003}.company-card[_ngcontent-%COMP%]:hover   .company-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(4px)}.company-card[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg,#0d7377,#14919b);display:flex;align-items:center;justify-content:center;flex-shrink:0}.company-card[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:12px}.company-card[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.company-card[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]{flex:1}.company-card[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1a1a2e;margin:0 0 4px}.company-card[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-code[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280}.company-card[_ngcontent-%COMP%]   .company-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:#0d7377;transition:transform .3s ease}.no-companies[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:60px 20px}.no-companies[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.7}.no-companies[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;opacity:.9}.selector-footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:40px}.selector-footer[_ngcontent-%COMP%]   .btn-main-login[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:.95rem;display:flex;align-items:center;gap:8px;transition:all .3s ease}.selector-footer[_ngcontent-%COMP%]   .btn-main-login[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff80}.selector-footer[_ngcontent-%COMP%]   .btn-main-login[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media(max-width:768px){.companies-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.selector-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.selector-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}"],changeDetection:0})};function oK(n,t){if(n&1&&(o(0,"div",32),y(1,"img",33),a()),n&2){let e=p(2);c(),m("src",e.company.logoPath,Cr)("alt",e.company.name)}}function aK(n,t){n&1&&(o(0,"div",34),y(1,"i",35),a())}function sK(n,t){n&1&&(o(0,"span"),l(1,"Sign In"),a())}function lK(n,t){n&1&&(o(0,"span"),y(1,"i",36),l(2," Signing in..."),a())}function cK(n,t){if(n&1){let e=F();o(0,"div",3)(1,"div",4)(2,"div",5),b(3,oK,2,2,"div",6)(4,aK,2,0,"div",7),o(5,"h1"),l(6),a()(),o(7,"div",8),y(8,"i",9),o(9,"h2"),l(10,"Manage Your Business Efficiently"),a(),o(11,"p"),l(12,"Streamline operations, track inventory, and grow your business with our comprehensive ERP solution."),a()()(),o(13,"div",10)(14,"div",11)(15,"div",12)(16,"h2"),l(17,"Welcome Back"),a(),o(18,"p"),l(19),a()(),o(20,"form",13),x("ngSubmit",function(){g(e);let r=p();return f(r.onSubmit())}),o(21,"div",14)(22,"label",15),l(23,"Username"),a(),o(24,"div",16),y(25,"i",17),o(26,"input",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.username,r)||(s.username=r),f(r)}),a()()(),o(27,"div",14)(28,"label",19),l(29,"Password"),a(),o(30,"div",16),y(31,"i",20),o(32,"input",21),S("ngModelChange",function(r){g(e);let s=p();return P(s.password,r)||(s.password=r),f(r)}),a(),o(33,"button",22),x("click",function(){g(e);let r=p();return f(r.togglePasswordVisibility())}),y(34,"i"),a()()(),o(35,"div",23)(36,"label",24)(37,"input",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.rememberMe,r)||(s.rememberMe=r),f(r)}),a(),o(38,"span"),l(39,"Remember me"),a()(),o(40,"a",26),l(41,"Forgot Password?"),a()(),o(42,"button",27),b(43,sK,2,0,"span",28)(44,lK,3,0,"span",28),a()(),o(45,"div",29)(46,"button",30),x("click",function(){g(e);let r=p();return f(r.goToCompanySelector())}),y(47,"i",31),l(48," Choose Different Company "),a()()()()()}if(n&2){let e=p();c(),jt("background",e.company.primaryColor?"linear-gradient(135deg, "+e.company.primaryColor+" 0%, "+(e.company.secondaryColor||e.company.primaryColor)+" 100%)":""),c(2),m("ngIf",e.company.logoPath),c(),m("ngIf",!e.company.logoPath),c(2),_(e.company.name),c(13),D("Sign in to ",e.company.name),c(7),M("ngModel",e.username),c(6),m("type",e.showPassword?"text":"password"),M("ngModel",e.password),c(2),bi(e.showPassword?"fas fa-eye-slash":"fas fa-eye"),c(3),M("ngModel",e.rememberMe),c(5),jt("background",e.company.primaryColor),m("disabled",e.isLoading),c(),m("ngIf",!e.isLoading),c(),m("ngIf",e.isLoading)}}function dK(n,t){n&1&&(o(0,"div",37)(1,"div",38),y(2,"i",36),o(3,"p"),l(4,"Loading company..."),a()()())}function pK(n,t){if(n&1){let e=F();o(0,"div",39)(1,"div",40),y(2,"i",41),o(3,"h2"),l(4,"Company Not Found"),a(),o(5,"p"),l(6,"The company you're looking for doesn't exist or is inactive."),a(),o(7,"div",42)(8,"button",43),x("click",function(){g(e);let r=p();return f(r.goToCompanySelector())}),y(9,"i",35),l(10," View All Companies "),a(),o(11,"button",44),x("click",function(){g(e);let r=p();return f(r.goToMainLogin())}),y(12,"i",45),l(13," Go to Main Login "),a()()()()}}var By=class n{constructor(t,e,i,r,s,d){this.router=t;this.route=e;this.authService=i;this.branchService=r;this.notificationService=s;this.cdr=d}username="";password="";rememberMe=!1;showPassword=!1;isLoading=!1;isLoadingCompany=!0;company=null;companySlug="";companyNotFound=!1;ngOnInit(){this.route.params.subscribe(t=>{this.companySlug=t.companySlug,this.loadCompany()})}loadCompany(){this.isLoadingCompany=!0,this.companyNotFound=!1,this.cdr.markForCheck(),this.branchService.getBranchBySlug(this.companySlug).subscribe({next:t=>{this.company=t,this.isLoadingCompany=!1,this.applyCompanyTheme(),this.cdr.markForCheck()},error:()=>{this.companyNotFound=!0,this.isLoadingCompany=!1,this.cdr.markForCheck()}})}applyCompanyTheme(){this.company?.primaryColor&&document.documentElement.style.setProperty("--company-primary",this.company.primaryColor),this.company?.secondaryColor&&document.documentElement.style.setProperty("--company-secondary",this.company.secondaryColor)}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(!this.username||!this.password){this.notificationService.error("Please enter username and password");return}if(!this.company){this.notificationService.error("Company not found");return}this.isLoading=!0;let t={username:this.username,password:this.password,branchId:this.company.id};this.authService.login(t).subscribe({next:()=>{this.isLoading=!1,this.notificationService.success("Login successful!"),this.cdr.markForCheck(),this.router.navigate(["/app/dashboard"])},error:e=>{this.isLoading=!1,this.notificationService.error(e.error?.error||"Login failed. Please try again."),this.cdr.markForCheck()}})}goToCompanySelector(){this.router.navigate(["/companies"])}goToMainLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(V(tn),V(Di),V(Ui),V(Ar),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-company-login"]],standalone:!1,decls:3,vars:3,consts:[["class","company-login-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","not-found-container",4,"ngIf"],[1,"company-login-container"],[1,"login-left"],[1,"brand"],["class","company-logo",4,"ngIf"],["class","company-logo default-logo",4,"ngIf"],[1,"illustration"],[1,"fas","fa-chart-line"],[1,"login-right"],[1,"login-box"],[1,"login-header"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"input-wrapper"],[1,"fas","fa-user"],["type","text","id","username","name","username","placeholder","Enter your username",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],[1,"fas","fa-lock"],["id","password","name","password","placeholder","Enter your password",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"checkbox-label"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],["href","#",1,"forgot-link"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],[1,"login-footer"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"company-logo"],[3,"src","alt"],[1,"company-logo","default-logo"],[1,"fas","fa-building"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-container"],[1,"loading-content"],[1,"not-found-container"],[1,"not-found-content"],[1,"fas","fa-building-circle-exclamation"],[1,"not-found-actions"],[1,"btn-primary",3,"click"],[1,"btn-secondary",3,"click"],[1,"fas","fa-sign-in-alt"]],template:function(e,i){e&1&&b(0,cK,49,17,"div",0)(1,dK,5,0,"div",1)(2,pK,14,0,"div",2),e&2&&(m("ngIf",!i.isLoadingCompany&&!i.companyNotFound&&i.company),c(),m("ngIf",i.isLoadingCompany),c(),m("ngIf",!i.isLoadingCompany&&i.companyNotFound))},dependencies:[be,pi,Ie,Yt,Oe,di,Ee,li],styles:[".company-login-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.login-left[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#0a5a5e,#0d7377,#14919b);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px;color:#fff;position:relative}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 20px;border-radius:20px;overflow:hidden;background:#ffffff1a;display:flex;align-items:center;justify-content:center}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .company-logo.default-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#fff}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin:0}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{text-align:center;max-width:400px}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:24px;opacity:.9}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:16px}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.85;line-height:1.6}.login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:#f8f9fa;padding:40px}.login-box[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:40px;width:100%;max-width:420px;box-shadow:0 4px 20px #00000014}.login-box[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.login-box[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1a1a2e;margin-bottom:8px}.login-box[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:500;color:#374151;margin-bottom:8px}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:.95rem}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px 14px 12px 42px;border:1px solid #e5e7eb;border-radius:8px;font-size:.95rem;transition:all .2s;box-sizing:border-box}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d7377;box-shadow:0 0 0 3px #0d73771a}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;cursor:pointer;padding:4px}.login-box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#6b7280}.login-box[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;font-size:.9rem}.login-box[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;color:#374151}.login-box[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.login-box[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{color:#0d7377;text-decoration:none}.login-box[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-box[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;padding:14px;background:#0d7377;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.login-box[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1)}.login-box[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-box[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.login-box[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]{margin-top:24px;text-align:center}.login-box[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;font-size:.9rem;display:inline-flex;align-items:center;gap:8px;transition:color .2s}.login-box[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:#0d7377}.loading-container[_ngcontent-%COMP%], .not-found-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0a5a5e,#0d7377,#14919b)}.loading-content[_ngcontent-%COMP%], .not-found-content[_ngcontent-%COMP%]{text-align:center;color:#fff}.loading-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .not-found-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:24px;opacity:.9}.loading-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .not-found-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:12px}.loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .not-found-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.85;margin-bottom:32px}.not-found-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}.not-found-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:.95rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.not-found-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background:#fff;color:#0d7377;border:none}.not-found-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover{background:#f3f4f6}.not-found-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.4)}.not-found-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff1a}@media(max-width:992px){.company-login-container[_ngcontent-%COMP%]{flex-direction:column}.login-left[_ngcontent-%COMP%]{padding:40px 20px;min-height:auto}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{display:none}.login-right[_ngcontent-%COMP%]{padding:40px 20px}}"],changeDetection:0})};var Zn=class n{constructor(t){this.http=t}baseUrl="/api/settings";getGeneralSettings(){return this.http.get(`${this.baseUrl}/general`)}saveGeneralSettings(t){return this.http.post(`${this.baseUrl}/general`,t)}getFinanceSettings(){return this.http.get(`${this.baseUrl}/finance`)}saveFinanceSettings(t){return this.http.post(`${this.baseUrl}/finance`,t)}getPrefixSettings(){return this.http.get(`${this.baseUrl}/prefixes`)}savePrefixSettings(t){return this.http.post(`${this.baseUrl}/prefixes`,t)}generatePrefixId(t){return this.http.get(`${this.baseUrl}/prefixes/generate/${t}`,{responseType:"text"})}previewPrefixId(t){return this.http.get(`${this.baseUrl}/prefixes/preview/${t}`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function mK(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function uK(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function gK(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function fK(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}var Uy=class n{constructor(t,e,i,r,s){this.settingsService=t;this.notificationService=e;this.authService=i;this.branchService=r;this.cdr=s}settings={companyName:"",companyAddress:"",companyPhone:"",companyEmail:"",companyWebsite:"",currency:"USD",dateFormat:"DD/MM/YYYY",timezone:"UTC",logoPath:"",valuationMethod:"FIFO"};saving=!1;loading=!1;currentBranch=null;currentBranchId=null;timezones=["UTC","America/New_York","Europe/London","Asia/Tokyo","Australia/Sydney"];dateFormats=["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD"];currencies=["USD","EUR","GBP","JPY","AUD","CAD"];valuationMethods=[{value:"FIFO",label:"FIFO (First In, First Out)"},{value:"LIFO",label:"LIFO (Last In, First Out)"},{value:"WEIGHTED_AVERAGE",label:"Weighted Average Cost"}];ngOnInit(){this.currentBranchId=this.authService.getCurrentBranchId(),this.loadCurrentBranch(),this.loadSettings()}loadCurrentBranch(){this.currentBranchId&&this.branchService.getBranchById(this.currentBranchId).subscribe({next:t=>{this.currentBranch=t,this.settings.companyName=t.name||"",this.settings.companyAddress=t.address||"",this.settings.companyPhone=t.phone||"",this.settings.companyEmail=t.email||"",this.settings.companyWebsite=t.website||"",this.settings.currency=t.currency||"USD",this.settings.dateFormat=t.dateFormat||"DD/MM/YYYY",this.settings.timezone=t.timezone||"UTC",this.settings.logoPath=t.logoPath||"",this.cdr.markForCheck()},error:t=>{console.error("Error loading current branch:",t),this.cdr.markForCheck()}})}loadSettings(){this.loading=!0,this.cdr.markForCheck(),this.settingsService.getGeneralSettings().subscribe({next:t=>{t&&!this.currentBranchId&&(this.settings=t),this.loading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading settings",t),this.loading=!1,this.cdr.markForCheck()}})}saveSettings(){if(this.saving=!0,this.cdr.markForCheck(),this.currentBranchId&&this.currentBranch){let t={name:this.settings.companyName,address:this.settings.companyAddress,phone:this.settings.companyPhone,email:this.settings.companyEmail,website:this.settings.companyWebsite,currency:this.settings.currency,dateFormat:this.settings.dateFormat,timezone:this.settings.timezone};this.branchService.updateBranch(this.currentBranchId,t).subscribe({next:e=>{this.currentBranch=e,this.saving=!1,this.notificationService.success("Company settings saved successfully"),this.cdr.markForCheck()},error:e=>{console.error("Error saving settings",e),this.saving=!1,this.notificationService.error("Error saving settings"),this.cdr.markForCheck()}})}else this.settingsService.saveGeneralSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,this.notificationService.success("Settings saved successfully"),this.cdr.markForCheck()},error:t=>{console.error("Error saving settings",t),this.saving=!1,this.notificationService.error("Error saving settings"),this.cdr.markForCheck()}})}resetSettings(){this.loadCurrentBranch(),this.loadSettings(),this.notificationService.info("Settings reset to saved values")}static \u0275fac=function(e){return new(e||n)(V(Zn),V(en),V(Ui),V(Ar),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-general-settings"]],standalone:!1,decls:80,vars:14,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"card"],[1,"card-title"],[1,"grid-2"],[1,"form-group"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-3"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"General Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"General"),a()()()(),o(16,"div",4)(17,"h3",5),l(18,"Company Information"),a(),o(19,"div",6)(20,"div",7)(21,"label"),l(22,"Company Name"),a(),o(23,"input",8),S("ngModelChange",function(s){return P(i.settings.companyName,s)||(i.settings.companyName=s),s}),a()(),o(24,"div",7)(25,"label"),l(26,"Company Email"),a(),o(27,"input",9),S("ngModelChange",function(s){return P(i.settings.companyEmail,s)||(i.settings.companyEmail=s),s}),a()(),o(28,"div",7)(29,"label"),l(30,"Phone Number"),a(),o(31,"input",8),S("ngModelChange",function(s){return P(i.settings.companyPhone,s)||(i.settings.companyPhone=s),s}),a()(),o(32,"div",7)(33,"label"),l(34,"Address"),a(),o(35,"input",8),S("ngModelChange",function(s){return P(i.settings.companyAddress,s)||(i.settings.companyAddress=s),s}),a()()()(),o(36,"div",4)(37,"h3",5),l(38,"Regional Settings"),a(),o(39,"div",10)(40,"div",7)(41,"label"),l(42,"Timezone"),a(),o(43,"select",11),S("ngModelChange",function(s){return P(i.settings.timezone,s)||(i.settings.timezone=s),s}),b(44,mK,2,2,"option",12),a()(),o(45,"div",7)(46,"label"),l(47,"Date Format"),a(),o(48,"select",11),S("ngModelChange",function(s){return P(i.settings.dateFormat,s)||(i.settings.dateFormat=s),s}),b(49,uK,2,2,"option",12),a()(),o(50,"div",7)(51,"label"),l(52,"Currency"),a(),o(53,"select",11),S("ngModelChange",function(s){return P(i.settings.currency,s)||(i.settings.currency=s),s}),b(54,gK,2,2,"option",12),a()()()(),o(55,"div",4)(56,"h3",5),l(57,"Inventory Valuation"),a(),o(58,"div",6)(59,"div",7)(60,"label"),l(61,"Valuation Method"),a(),o(62,"select",11),S("ngModelChange",function(s){return P(i.settings.valuationMethod,s)||(i.settings.valuationMethod=s),s}),b(63,fK,2,2,"option",12),a(),o(64,"small",13)(65,"strong"),l(66,"FIFO:"),a(),l(67," Oldest stock is consumed first. "),o(68,"strong"),l(69,"LIFO:"),a(),l(70," Newest stock is consumed first. "),o(71,"strong"),l(72,"Weighted Average:"),a(),l(73," Uses average cost of all layers. "),a()()()(),o(74,"div",14)(75,"button",15),x("click",function(){return i.resetSettings()}),l(76,"Cancel"),a(),o(77,"button",16),x("click",function(){return i.saveSettings()}),y(78,"i",17),l(79),a()()()),e&2&&(c(23),M("ngModel",i.settings.companyName),c(4),M("ngModel",i.settings.companyEmail),c(4),M("ngModel",i.settings.companyPhone),c(4),M("ngModel",i.settings.companyAddress),c(8),M("ngModel",i.settings.timezone),c(),m("ngForOf",i.timezones),c(4),M("ngModel",i.settings.dateFormat),c(),m("ngForOf",i.dateFormats),c(4),M("ngModel",i.settings.currency),c(),m("ngForOf",i.currencies),c(8),M("ngModel",i.settings.valuationMethod),c(),m("ngForOf",i.valuationMethods),c(14),m("disabled",i.saving),c(2),D(" ",i.saving?"Saving...":"Save Changes"," "))},dependencies:[Se,je,We,Ie,Ue,Oe,Ee,ht],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.settings-page[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}"],changeDetection:0})};function hK(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",14),l(9),a()(),o(10,"td")(11,"div",15)(12,"button",16),y(13,"i",17),a(),o(14,"button",18),y(15,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),_(e.name),c(2),D("",e.rate,"%"),c(2),_(e.type),c(3),_(e.status)}}function _K(n,t){if(n&1){let e=F();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Tax Rates"),a(),o(4,"button",9),x("click",function(){g(e);let r=p();return f(r.openModal("tax"))}),y(5,"i",10),l(6," Add Tax Rate "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Rate (%)"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,hK,16,4,"tr",13),a()()()()}if(n&2){let e=p();c(22),m("ngForOf",e.taxRates)}}function vK(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",20),l(9),a()(),o(10,"td")(11,"div",15)(12,"button",16),y(13,"i",17),a(),o(14,"button",18),y(15,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.symbol),c(2),m("ngClass",e.isDefault?"badge-success":"badge-info"),c(),D(" ",e.isDefault?"Yes":"No"," ")}}function xK(n,t){if(n&1){let e=F();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Currencies"),a(),o(4,"button",9),x("click",function(){g(e);let r=p();return f(r.openModal("currency"))}),y(5,"i",10),l(6," Add Currency "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Symbol"),a(),o(17,"th"),l(18,"Default"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,vK,16,5,"tr",13),a()()()()}if(n&2){let e=p();c(22),m("ngForOf",e.currencies)}}function yK(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",14),l(7),a()(),o(8,"td")(9,"div",15)(10,"button",16),y(11,"i",17),a(),o(12,"button",18),y(13,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),_(e.name),c(2),_(e.description),c(3),_(e.status)}}function CK(n,t){if(n&1){let e=F();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Payment Modes"),a(),o(4,"button",9),x("click",function(){g(e);let r=p();return f(r.openModal("payment"))}),y(5,"i",10),l(6," Add Payment Mode "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Description"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Actions"),a()()(),o(19,"tbody"),b(20,yK,14,3,"tr",13),a()()()()}if(n&2){let e=p();c(20),m("ngForOf",e.paymentModes)}}function bK(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"div",15)(7,"button",16),y(8,"i",17),a(),o(9,"button",18),y(10,"i",19),a()()()()),n&2){let e=t.$implicit;c(2),_(e.name),c(2),_(e.description)}}function MK(n,t){if(n&1){let e=F();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Expense Categories"),a(),o(4,"button",9),x("click",function(){g(e);let r=p();return f(r.openModal("expense"))}),y(5,"i",10),l(6," Add Category "),a()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),a(),o(13,"th"),l(14,"Description"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,bK,11,2,"tr",13),a()()()()}if(n&2){let e=p();c(18),m("ngForOf",e.expenseCategories)}}var jy=class n{activeTab="tax";taxRates=[{id:1,name:"Standard VAT",rate:20,type:"VAT",status:"Active"},{id:2,name:"Reduced VAT",rate:5,type:"VAT",status:"Active"},{id:3,name:"Zero Rate",rate:0,type:"VAT",status:"Active"},{id:4,name:"Service Tax",rate:18,type:"Service",status:"Active"}];currencies=[{id:1,code:"USD",name:"US Dollar",symbol:"$",isDefault:!0},{id:2,code:"EUR",name:"Euro",symbol:"\u20AC",isDefault:!1},{id:3,code:"GBP",name:"British Pound",symbol:"\xA3",isDefault:!1},{id:4,code:"INR",name:"Indian Rupee",symbol:"\u20B9",isDefault:!1}];paymentModes=[{id:1,name:"Cash",description:"Cash payment",status:"Active"},{id:2,name:"Bank Transfer",description:"Direct bank transfer",status:"Active"},{id:3,name:"Credit Card",description:"Credit/Debit card payment",status:"Active"},{id:4,name:"Check",description:"Payment by check",status:"Active"}];expenseCategories=[{id:1,name:"Office Supplies",description:"Stationery and office materials"},{id:2,name:"Travel",description:"Business travel expenses"},{id:3,name:"Utilities",description:"Electricity, water, internet"},{id:4,name:"Marketing",description:"Advertising and promotions"}];showModal=!1;modalType="";setActiveTab(t){this.activeTab=t}openModal(t){this.modalType=t,this.showModal=!0}closeModal(){this.showModal=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-finance-settings"]],standalone:!1,decls:29,vars:12,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"tabs"],[1,"tab",3,"click"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"badge","badge-success"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger"],[1,"fas","fa-trash"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Finance Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Finance"),a()()()(),o(16,"div",4)(17,"button",5),x("click",function(){return i.setActiveTab("tax")}),l(18,"Tax Rates"),a(),o(19,"button",5),x("click",function(){return i.setActiveTab("currency")}),l(20,"Currencies"),a(),o(21,"button",5),x("click",function(){return i.setActiveTab("payment")}),l(22,"Payment Modes"),a(),o(23,"button",5),x("click",function(){return i.setActiveTab("expense")}),l(24,"Expense Categories"),a()(),b(25,_K,23,1,"div",6)(26,xK,23,1,"div",6)(27,CK,21,1,"div",6)(28,MK,19,1,"div",6),a()),e&2&&(c(17),ie("active",i.activeTab==="tax"),c(2),ie("active",i.activeTab==="currency"),c(2),ie("active",i.activeTab==="payment"),c(2),ie("active",i.activeTab==="expense"),c(2),m("ngIf",i.activeTab==="tax"),c(),m("ngIf",i.activeTab==="currency"),c(),m("ngIf",i.activeTab==="payment"),c(),m("ngIf",i.activeTab==="expense"))},dependencies:[ot,Se,be,ht],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}"]})};var Wy=class n{constructor(t){this.http=t}apiUrl="/api/settings/customer";getGroups(){return this.http.get(`${this.apiUrl}/groups`)}getGroupById(t){return this.http.get(`${this.apiUrl}/groups/${t}`)}createGroup(t){return this.http.post(`${this.apiUrl}/groups`,t)}updateGroup(t,e){return this.http.put(`${this.apiUrl}/groups/${t}`,e)}deleteGroup(t){return this.http.delete(`${this.apiUrl}/groups/${t}`)}getStatuses(){return this.http.get(`${this.apiUrl}/statuses`)}getStatusById(t){return this.http.get(`${this.apiUrl}/statuses/${t}`)}createStatus(t){return this.http.post(`${this.apiUrl}/statuses`,t)}updateStatus(t,e){return this.http.put(`${this.apiUrl}/statuses/${t}`,e)}deleteStatus(t){return this.http.delete(`${this.apiUrl}/statuses/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function PK(n,t){n&1&&(o(0,"tr")(1,"td",14),l(2,'No customer groups found. Click "Add Group" to create one.'),a()())}function wK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"div",15)(9,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal("group",r))}),y(10,"i",17),a(),o(11,"button",18),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteGroup(r))}),y(12,"i",19),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),_(e.description),c(2),D("",e.discount,"%")}}function EK(n,t){n&1&&(o(0,"tr")(1,"td",20),l(2,'No customer statuses found. Click "Add Status" to create one.'),a()())}function OK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),y(4,"span",21),a(),o(5,"td")(6,"div",15)(7,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal("status",r))}),y(8,"i",17),a(),o(9,"button",18),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteStatus(r))}),y(10,"i",19),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),jt("background",e.color)}}function TK(n,t){if(n&1){let e=F();o(0,"form",28),x("ngSubmit",function(){g(e);let r=p(2);return f(r.saveGroup())}),o(1,"div",29)(2,"label"),l(3,"Name"),a(),o(4,"input",30),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingGroup.name,r)||(s.editingGroup.name=r),f(r)}),a()(),o(5,"div",29)(6,"label"),l(7,"Description"),a(),o(8,"input",31),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingGroup.description,r)||(s.editingGroup.description=r),f(r)}),a()(),o(9,"div",29)(10,"label"),l(11,"Discount (%)"),a(),o(12,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingGroup.discount,r)||(s.editingGroup.discount=r),f(r)}),a()(),o(13,"div",33)(14,"button",34),x("click",function(){g(e);let r=p(2);return f(r.closeModal())}),l(15,"Cancel"),a(),o(16,"button",35),l(17),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.editingGroup.name),c(4),M("ngModel",e.editingGroup.description),c(4),M("ngModel",e.editingGroup.discount),c(5),_(e.isEditMode?"Update":"Save")}}function kK(n,t){if(n&1){let e=F();o(0,"form",28),x("ngSubmit",function(){g(e);let r=p(2);return f(r.saveStatus())}),o(1,"div",29)(2,"label"),l(3,"Name"),a(),o(4,"input",36),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingStatus.name,r)||(s.editingStatus.name=r),f(r)}),a()(),o(5,"div",29)(6,"label"),l(7,"Color"),a(),o(8,"input",37),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingStatus.color,r)||(s.editingStatus.color=r),f(r)}),a()(),o(9,"div",33)(10,"button",34),x("click",function(){g(e);let r=p(2);return f(r.closeModal())}),l(11,"Cancel"),a(),o(12,"button",35),l(13),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.editingStatus.name),c(4),M("ngModel",e.editingStatus.color),c(5),_(e.isEditMode?"Update":"Save")}}function IK(n,t){if(n&1){let e=F();o(0,"div",22)(1,"div",23),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",24)(3,"h3"),l(4),a(),o(5,"button",25),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",26),b(8,TK,18,4,"form",27)(9,kK,14,3,"form",27),a()()()}if(n&2){let e=p();c(4),Ge("",e.isEditMode?"Edit":"Add"," ",e.modalType==="group"?"Customer Group":"Customer Status"),c(4),m("ngIf",e.modalType==="group"),c(),m("ngIf",e.modalType==="status")}}var zy=class n{constructor(t){this.customerSettingsService=t}customerGroups=[];customerStatuses=[];showModal=!1;modalType="";isEditMode=!1;editingGroup={name:"",description:"",discount:0};editingStatus={name:"",color:"#28a745"};ngOnInit(){this.loadGroups(),this.loadStatuses()}loadGroups(){this.customerSettingsService.getGroups().subscribe({next:t=>this.customerGroups=t,error:t=>console.error("Error loading groups:",t)})}loadStatuses(){this.customerSettingsService.getStatuses().subscribe({next:t=>this.customerStatuses=t,error:t=>console.error("Error loading statuses:",t)})}openModal(t){this.modalType=t,this.isEditMode=!1,t==="group"?this.editingGroup={name:"",description:"",discount:0}:this.editingStatus={name:"",color:"#28a745"},this.showModal=!0}openEditModal(t,e){this.modalType=t,this.isEditMode=!0,t==="group"?this.editingGroup=me({},e):this.editingStatus=me({},e),this.showModal=!0}closeModal(){this.showModal=!1}saveGroup(){this.isEditMode&&this.editingGroup.id?this.customerSettingsService.updateGroup(this.editingGroup.id,this.editingGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>console.error("Error updating group:",t)}):this.customerSettingsService.createGroup(this.editingGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>console.error("Error creating group:",t)})}saveStatus(){this.isEditMode&&this.editingStatus.id?this.customerSettingsService.updateStatus(this.editingStatus.id,this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error updating status:",t)}):this.customerSettingsService.createStatus(this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error creating status:",t)})}deleteGroup(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.customerSettingsService.deleteGroup(t.id).subscribe({next:()=>this.loadGroups(),error:e=>console.error("Error deleting group:",e)})}deleteStatus(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.customerSettingsService.deleteStatus(t.id).subscribe({next:()=>this.loadStatuses(),error:e=>console.error("Error deleting status:",e)})}static \u0275fac=function(e){return new(e||n)(V(Wy))};static \u0275cmp=_e({type:n,selectors:[["app-customer-settings"]],standalone:!1,decls:60,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","4",1,"text-center"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[1,"color-badge"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","name","required","","placeholder","Enter group name",3,"ngModelChange","ngModel"],["type","text","name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["type","number","name","discount","min","0","max","100","placeholder","Enter discount percentage",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","text","name","name","required","","placeholder","Enter status name",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Customer Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Customer"),a()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Customer Groups"),a(),o(21,"button",7),x("click",function(){return i.openModal("group")}),y(22,"i",8),l(23," Add Group "),a()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),a(),o(30,"th"),l(31,"Description"),a(),o(32,"th"),l(33,"Discount"),a(),o(34,"th"),l(35,"Actions"),a()()(),o(36,"tbody"),b(37,PK,3,0,"tr",11)(38,wK,13,3,"tr",12),a()()()(),o(39,"div",5)(40,"div",6)(41,"h3"),l(42,"Customer Statuses"),a(),o(43,"button",7),x("click",function(){return i.openModal("status")}),y(44,"i",8),l(45," Add Status "),a()(),o(46,"div",9)(47,"table",10)(48,"thead")(49,"tr")(50,"th"),l(51,"Name"),a(),o(52,"th"),l(53,"Color"),a(),o(54,"th"),l(55,"Actions"),a()()(),o(56,"tbody"),b(57,EK,3,0,"tr",11)(58,OK,11,3,"tr",12),a()()()()()(),b(59,IK,10,4,"div",13)),e&2&&(c(37),m("ngIf",i.customerGroups.length===0),c(),m("ngForOf",i.customerGroups),c(19),m("ngIf",i.customerStatuses.length===0),c(),m("ngForOf",i.customerStatuses),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,Ie,Mt,Oe,di,cn,Xt,fr,Ee,li,ht],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};var qy=class n{constructor(t){this.http=t}apiUrl="/api/settings/contract";getTypes(){return this.http.get(`${this.apiUrl}/types`)}createType(t){return this.http.post(`${this.apiUrl}/types`,t)}updateType(t,e){return this.http.put(`${this.apiUrl}/types/${t}`,e)}deleteType(t){return this.http.delete(`${this.apiUrl}/types/${t}`)}getStatuses(){return this.http.get(`${this.apiUrl}/statuses`)}createStatus(t){return this.http.post(`${this.apiUrl}/statuses`,t)}updateStatus(t,e){return this.http.put(`${this.apiUrl}/statuses/${t}`,e)}deleteStatus(t){return this.http.delete(`${this.apiUrl}/statuses/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function AK(n,t){n&1&&(o(0,"tr")(1,"td",14),l(2,'No contract types found. Click "Add Type" to create one.'),a()())}function RK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",15),l(7),a()(),o(8,"td")(9,"div",16)(10,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal("type",r))}),y(11,"i",18),a(),o(12,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteType(r))}),y(13,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),_(e.duration),c(2),m("ngClass",e.renewable?"badge-success":"badge-info"),c(),D(" ",e.renewable?"Yes":"No"," ")}}function FK(n,t){n&1&&(o(0,"tr")(1,"td",21),l(2,'No contract statuses found. Click "Add Status" to create one.'),a()())}function NK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),y(4,"span",22),a(),o(5,"td")(6,"div",16)(7,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal("status",r))}),y(8,"i",18),a(),o(9,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteStatus(r))}),y(10,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),jt("background",e.color)}}function LK(n,t){if(n&1){let e=F();o(0,"form",29),x("ngSubmit",function(){g(e);let r=p(2);return f(r.saveType())}),o(1,"div",30)(2,"label"),l(3,"Name"),a(),o(4,"input",31),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingType.name,r)||(s.editingType.name=r),f(r)}),a()(),o(5,"div",30)(6,"label"),l(7,"Duration (Months)"),a(),o(8,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingType.duration,r)||(s.editingType.duration=r),f(r)}),a()(),o(9,"div",30)(10,"label",33)(11,"input",34),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingType.renewable,r)||(s.editingType.renewable=r),f(r)}),a(),l(12," Renewable "),a()(),o(13,"div",35)(14,"button",36),x("click",function(){g(e);let r=p(2);return f(r.closeModal())}),l(15,"Cancel"),a(),o(16,"button",37),l(17),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.editingType.name),c(4),M("ngModel",e.editingType.duration),c(3),M("ngModel",e.editingType.renewable),c(6),_(e.isEditMode?"Update":"Save")}}function VK(n,t){if(n&1){let e=F();o(0,"form",29),x("ngSubmit",function(){g(e);let r=p(2);return f(r.saveStatus())}),o(1,"div",30)(2,"label"),l(3,"Name"),a(),o(4,"input",38),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingStatus.name,r)||(s.editingStatus.name=r),f(r)}),a()(),o(5,"div",30)(6,"label"),l(7,"Color"),a(),o(8,"input",39),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editingStatus.color,r)||(s.editingStatus.color=r),f(r)}),a()(),o(9,"div",35)(10,"button",36),x("click",function(){g(e);let r=p(2);return f(r.closeModal())}),l(11,"Cancel"),a(),o(12,"button",37),l(13),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.editingStatus.name),c(4),M("ngModel",e.editingStatus.color),c(5),_(e.isEditMode?"Update":"Save")}}function BK(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27),b(8,LK,18,4,"form",28)(9,VK,14,3,"form",28),a()()()}if(n&2){let e=p();c(4),Ge("",e.isEditMode?"Edit":"Add"," ",e.modalType==="type"?"Contract Type":"Contract Status"),c(4),m("ngIf",e.modalType==="type"),c(),m("ngIf",e.modalType==="status")}}var Hy=class n{constructor(t){this.contractSettingsService=t}contractTypes=[];contractStatuses=[];showModal=!1;modalType="";isEditMode=!1;editingType={name:"",duration:12,renewable:!0};editingStatus={name:"",color:"#28a745"};ngOnInit(){this.loadTypes(),this.loadStatuses()}loadTypes(){this.contractSettingsService.getTypes().subscribe({next:t=>this.contractTypes=t,error:t=>console.error("Error loading types:",t)})}loadStatuses(){this.contractSettingsService.getStatuses().subscribe({next:t=>this.contractStatuses=t,error:t=>console.error("Error loading statuses:",t)})}openModal(t){this.modalType=t,this.isEditMode=!1,t==="type"?this.editingType={name:"",duration:12,renewable:!0}:this.editingStatus={name:"",color:"#28a745"},this.showModal=!0}openEditModal(t,e){this.modalType=t,this.isEditMode=!0,t==="type"?this.editingType=me({},e):this.editingStatus=me({},e),this.showModal=!0}closeModal(){this.showModal=!1}saveType(){this.isEditMode&&this.editingType.id?this.contractSettingsService.updateType(this.editingType.id,this.editingType).subscribe({next:()=>{this.loadTypes(),this.closeModal()},error:t=>console.error("Error updating type:",t)}):this.contractSettingsService.createType(this.editingType).subscribe({next:()=>{this.loadTypes(),this.closeModal()},error:t=>console.error("Error creating type:",t)})}saveStatus(){this.isEditMode&&this.editingStatus.id?this.contractSettingsService.updateStatus(this.editingStatus.id,this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error updating status:",t)}):this.contractSettingsService.createStatus(this.editingStatus).subscribe({next:()=>{this.loadStatuses(),this.closeModal()},error:t=>console.error("Error creating status:",t)})}deleteType(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.contractSettingsService.deleteType(t.id).subscribe({next:()=>this.loadTypes(),error:e=>console.error("Error deleting type:",e)})}deleteStatus(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.contractSettingsService.deleteStatus(t.id).subscribe({next:()=>this.loadStatuses(),error:e=>console.error("Error deleting status:",e)})}static \u0275fac=function(e){return new(e||n)(V(qy))};static \u0275cmp=_e({type:n,selectors:[["app-contract-settings"]],standalone:!1,decls:60,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","4",1,"text-center"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[1,"color-badge"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","name","required","","placeholder","Enter type name",3,"ngModelChange","ngModel"],["type","number","name","duration","min","1","placeholder","Enter duration in months",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","renewable",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","text","name","name","required","","placeholder","Enter status name",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Contract"),a()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Contract Types"),a(),o(21,"button",7),x("click",function(){return i.openModal("type")}),y(22,"i",8),l(23," Add Type "),a()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),a(),o(30,"th"),l(31,"Duration (Months)"),a(),o(32,"th"),l(33,"Renewable"),a(),o(34,"th"),l(35,"Actions"),a()()(),o(36,"tbody"),b(37,AK,3,0,"tr",11)(38,RK,14,4,"tr",12),a()()()(),o(39,"div",5)(40,"div",6)(41,"h3"),l(42,"Contract Statuses"),a(),o(43,"button",7),x("click",function(){return i.openModal("status")}),y(44,"i",8),l(45," Add Status "),a()(),o(46,"div",9)(47,"table",10)(48,"thead")(49,"tr")(50,"th"),l(51,"Name"),a(),o(52,"th"),l(53,"Color"),a(),o(54,"th"),l(55,"Actions"),a()()(),o(56,"tbody"),b(57,FK,3,0,"tr",11)(58,NK,11,3,"tr",12),a()()()()()(),b(59,BK,10,4,"div",13)),e&2&&(c(37),m("ngIf",i.contractTypes.length===0),c(),m("ngForOf",i.contractTypes),c(19),m("ngIf",i.contractStatuses.length===0),c(),m("ngForOf",i.contractStatuses),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,pi,Ie,Mt,Yt,Oe,di,cn,Xt,Ee,li,ht],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};var Gy=[{key:"Dashboard",label:"Dashboard",icon:"fas fa-home",subModules:[]},{key:"Settings",label:"Settings",icon:"fas fa-cog",subModules:[{key:"Settings.Companies",label:"Companies"},{key:"Settings.General",label:"General Settings"},{key:"Settings.Finance",label:"Finance Settings"},{key:"Settings.Customer",label:"Client Settings"},{key:"Settings.Contract",label:"Contract Settings"},{key:"Settings.Roles",label:"Role Management"},{key:"Settings.Staff",label:"Staff Management"},{key:"Settings.Prefixes",label:"Prefix Settings"},{key:"Settings.ExpenseTypes",label:"Expense Types"},{key:"Settings.Integrations",label:"Integrations"}]},{key:"Projects",label:"Project Management",icon:"fas fa-project-diagram",subModules:[{key:"Projects.List",label:"Projects List"},{key:"Projects.Tasks",label:"Tasks"},{key:"Projects.Timesheets",label:"Timesheets"}]},{key:"Customer Management",label:"Customer Management",icon:"fas fa-users",subModules:[{key:"Customer.Clients",label:"Clients"},{key:"Customer.Contracts",label:"Contract Management"}]},{key:"Purchase",label:"Procurement",icon:"fas fa-shopping-cart",subModules:[{key:"Purchase.Requisition",label:"Purchase Requisition"},{key:"Purchase.Direct",label:"Direct Purchase"},{key:"Purchase.Invoice",label:"Purchase Invoice"},{key:"Expenses",label:"Expenses"}]},{key:"Accounting",label:"Finance & Accounting",icon:"fas fa-calculator",subModules:[{key:"Accounting.Dashboard",label:"Accounting Dashboard"},{key:"Accounting.ChartOfAccounts",label:"Chart of Accounts"},{key:"Accounting.BankAccounts",label:"Bank Accounts"},{key:"Accounting.JournalEntries",label:"Journal Entries"},{key:"Accounting.Transactions",label:"Transactions"},{key:"Accounting.Transfers",label:"Transfers"},{key:"Accounting.Reconciliation",label:"Reconciliation"},{key:"Accounting.Bills",label:"Bills"},{key:"Accounting.Budgets",label:"Budgets"},{key:"Accounting.Reports",label:"Financial Reports"},{key:"Accounting.Settings",label:"Accounting Settings"}]},{key:"Inventory",label:"Inventory",icon:"fas fa-warehouse",subModules:[{key:"Inventory.Groups",label:"Item Groups"},{key:"Inventory.Items",label:"Item Master"},{key:"Inventory.Units",label:"Unit of Measure"},{key:"Inventory.Warehouses",label:"Warehouses/Bins"},{key:"Inventory.Suppliers",label:"Suppliers"},{key:"Inventory.Valuation",label:"Valuation"},{key:"Inventory.Ledger",label:"Inventory Ledger"},{key:"Inventory.GoodsReceipt",label:"Goods Receipt"},{key:"Inventory.GoodsIssue",label:"Goods Issue"},{key:"Inventory.StockTransfer",label:"Stock Transfer"},{key:"Inventory.Adjustment",label:"Stock Adjustment"}]},{key:"HR Management",label:"HR Management",icon:"fas fa-user-tie",subModules:[{key:"HR.Employees",label:"Employee List"},{key:"HR.Departments",label:"Departments"},{key:"HR.Locations",label:"Locations"},{key:"HR.JobRoles",label:"Job Roles"},{key:"HR.Grades",label:"Grades"},{key:"HR.Designations",label:"Designations"},{key:"HR.CostCenters",label:"Cost Centers"},{key:"HR.ExpenseCenters",label:"Expense Centers"},{key:"HR.Documents",label:"Document Management"},{key:"HR.Recruitment",label:"Recruitment"},{key:"HR.Training",label:"Training & Development"},{key:"HR.Onboarding",label:"Onboarding"},{key:"HR.Settlement",label:"F&F Settlement"}]},{key:"Leave",label:"Leave Management",icon:"fas fa-umbrella-beach",subModules:[{key:"Leave.Types",label:"Leave Types"},{key:"Leave.Holidays",label:"Holiday Calendar"},{key:"Leave.Requests",label:"Leave Requests"},{key:"Leave.Balances",label:"Leave Balances"}]},{key:"Loans",label:"Loans & Advances",icon:"fas fa-hand-holding-usd",subModules:[{key:"Loans.Applications",label:"Loan Applications"},{key:"Loans.Ledger",label:"Loan Ledger"},{key:"Loans.Repayments",label:"Repayment History"}]},{key:"Compensation",label:"Compensation & Benefits",icon:"fas fa-gift",subModules:[{key:"Compensation.SalaryBands",label:"Salary Bands"},{key:"Compensation.Revisions",label:"Salary Revisions"},{key:"Compensation.Benefits",label:"Benefits"}]},{key:"Attendance",label:"Attendance",icon:"fas fa-clock",subModules:[{key:"Attendance.TimeClock",label:"Time Clock"},{key:"Attendance.Timesheet",label:"Timesheet"},{key:"Attendance.Daily",label:"Daily Attendance"},{key:"Attendance.Approval",label:"Attendance Approval"},{key:"Attendance.Dashboard",label:"Attendance Dashboard"}]},{key:"Payroll",label:"Payroll",icon:"fas fa-money-check-alt",subModules:[{key:"Payroll.Process",label:"Process Payroll"},{key:"Payroll.History",label:"Payroll History"},{key:"Payroll.PaySlips",label:"Pay Slips"},{key:"Payroll.Dashboard",label:"Payroll Dashboard"},{key:"Payroll.Rules",label:"Payroll Rules"}]},{key:"ESS",label:"Employee Self-Service",icon:"fas fa-user-circle",subModules:[{key:"ESS.Profile",label:"My Profile"},{key:"ESS.Attendance",label:"My Attendance"},{key:"ESS.Leave",label:"My Leave"},{key:"ESS.PaySlips",label:"My Pay Slips"},{key:"ESS.Expenses",label:"My Expenses"},{key:"ESS.Assets",label:"My Assets"}]},{key:"Reports",label:"Reports",icon:"fas fa-chart-bar",subModules:[{key:"Reports.Inventory",label:"Inventory Reports"},{key:"Reports.Purchase",label:"Purchase Reports"},{key:"Reports.HR",label:"HR Reports"},{key:"Reports.Payroll",label:"Payroll Reports"},{key:"Reports.Finance",label:"Finance Reports"}]},{key:"AuditTrails",label:"Audit Trails",icon:"fas fa-history",subModules:[{key:"Audit.System",label:"System Audits"},{key:"Audit.Inventory",label:"Inventory Audits"},{key:"Audit.Purchase",label:"Purchase Audits"}]}],HKe=Gy.map(n=>({key:n.key,label:n.label,icon:n.icon})),Qd=class n{constructor(t){this.http=t}apiUrl="/api/roles";getAll(){return this.http.get(this.apiUrl)}getByBranch(t){return this.http.get(`${this.apiUrl}/branch/${t}`)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}parsePermissions(t){if(!t)return{};try{return JSON.parse(t)}catch{return{}}}stringifyPermissions(t){return JSON.stringify(t)}getDefaultPermissions(){let t={};return Gy.forEach(e=>{t[e.key]={view:!1,add:!1,edit:!1,delete:!1},e.subModules.forEach(i=>{t[i.key]={view:!1,add:!1,edit:!1,delete:!1}})}),t}getFullPermissions(){let t={};return Gy.forEach(e=>{t[e.key]={view:!0,add:!0,edit:!0,delete:!0},e.subModules.forEach(i=>{t[i.key]={view:!0,add:!0,edit:!0,delete:!0}})}),t}getModuleHierarchy(){return Gy.map(t=>Tt(me({},t),{expanded:!1}))}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function UK(n,t){if(n&1&&(o(0,"option",11),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function jK(n,t){n&1&&(o(0,"tr")(1,"td",32),y(2,"i",3),o(3,"p"),l(4,"No roles found"),a()()())}function WK(n,t){if(n&1&&(o(0,"span",42),l(1),a()),n&2){let e=p().$implicit;c(),_(e.description)}}function zK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",33)(3,"strong"),l(4),a(),b(5,WK,2,1,"span",34),a()(),o(6,"td")(7,"span",35),l(8),a()(),o(9,"td")(10,"span",36),l(11),a()(),o(12,"td")(13,"span",37),l(14),a()(),o(15,"td")(16,"div",38)(17,"button",39),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editRole(r))}),y(18,"i",40),a(),o(19,"button",41),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteRole(r))}),y(20,"i"),a()()()()}if(n&2){let e=t.$implicit,i=p();c(4),_(e.name),c(),m("ngIf",e.description),c(3),_(i.getBranchName(e.branchId)),c(2),ie("system",e.isSystemRole)("custom",!e.isSystemRole),c(),D(" ",e.isSystemRole?"System":"Custom"," "),c(3),_(e.totalUsers||0),c(5),m("disabled",i.deletingRoleId===e.id||e.isSystemRole)("title",e.isSystemRole?"System roles cannot be deleted":"Delete Role"),c(),bi(i.deletingRoleId===e.id?"fas fa-spinner fa-spin":"fas fa-trash")}}var $y=class n{constructor(t,e,i,r,s){this.router=t;this.roleService=e;this.branchService=i;this.notificationService=r;this.cdr=s}roles=[];branches=[];loading=!1;deletingRoleId=null;searchQuery="";selectedBranchId=null;pageSize=25;currentPage=1;ngOnInit(){this.loadBranches(),this.loadRoles()}loadBranches(){this.branchService.getAllBranches().subscribe({next:t=>{this.branches=t,this.cdr.markForCheck()},error:()=>{this.cdr.markForCheck()}})}loadRoles(){this.roleService.getAll().subscribe({next:t=>{this.roles=t,this.cdr.markForCheck()},error:t=>{console.error("Error loading roles:",t),this.cdr.markForCheck()}})}getBranchName(t){return t?this.branches.find(i=>i.id===t)?.name||"Unknown":"System"}get filteredRoles(){let t=this.roles;if(this.selectedBranchId&&(t=t.filter(e=>e.branchId===this.selectedBranchId)),this.searchQuery){let e=this.searchQuery.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.description&&i.description.toLowerCase().includes(e))}return t}get paginatedRoles(){let t=(this.currentPage-1)*this.pageSize;return this.filteredRoles.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredRoles.length/this.pageSize)||1}get startEntry(){return this.filteredRoles.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredRoles.length)}addRole(){this.router.navigate(["/app/settings/roles/add"])}editRole(t){this.router.navigate(["/app/settings/roles/edit",t.id])}deleteRole(t){if(t.isSystemRole){this.notificationService.error("System roles cannot be deleted");return}confirm(`Are you sure you want to delete the role "${t.name}"?`)&&(this.deletingRoleId=t.id,this.cdr.markForCheck(),this.roleService.delete(t.id).subscribe({next:()=>{this.notificationService.success("Role deleted successfully"),this.roles=this.roles.filter(e=>e.id!==t.id),this.deletingRoleId=null,this.cdr.markForCheck()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting role"),this.deletingRoleId=null,this.cdr.markForCheck()}}))}exportData(){console.log("Export roles data")}refresh(){this.loadRoles()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(V(tn),V(Qd),V(Ar),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-roles-settings"]],standalone:!1,decls:61,vars:18,consts:[[1,"roles-page"],[1,"page-header"],[1,"header-left"],[1,"fas","fa-user-shield"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"company-filter",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],["title","Refresh",1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search roles...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"page-info"],[1,"fas","fa-chevron-right"],["colspan","5",1,"empty-state"],[1,"role-info"],["class","role-description",4,"ngIf"],[1,"company-badge"],[1,"role-type"],[1,"user-count"],[1,"action-buttons"],["title","Edit Role",1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-icon","btn-danger-icon",3,"click","disabled","title"],[1,"role-description"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Role Management"),a()(),o(6,"div",4)(7,"button",5),x("click",function(){return i.addRole()}),y(8,"i",6),l(9," Add New Role "),a()()(),o(10,"div",7)(11,"div",8)(12,"div",9)(13,"select",10),S("ngModelChange",function(s){return P(i.selectedBranchId,s)||(i.selectedBranchId=s),s}),o(14,"option",11),l(15,"All Companies"),a(),b(16,UK,2,2,"option",12),a(),o(17,"select",13),S("ngModelChange",function(s){return P(i.pageSize,s)||(i.pageSize=s),s}),o(18,"option",14),l(19,"10"),a(),o(20,"option",14),l(21,"25"),a(),o(22,"option",14),l(23,"50"),a(),o(24,"option",14),l(25,"100"),a()(),o(26,"button",15),x("click",function(){return i.refresh()}),y(27,"i",16),a()(),o(28,"div",17)(29,"div",18),y(30,"i",19),o(31,"input",20),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),o(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),l(37,"Role Name"),a(),o(38,"th"),l(39,"Company"),a(),o(40,"th"),l(41,"Type"),a(),o(42,"th"),l(43,"Users"),a(),o(44,"th"),l(45,"Actions"),a()()(),o(46,"tbody"),b(47,jK,5,0,"tr",23)(48,zK,21,13,"tr",24),a()()(),o(49,"div",25)(50,"div",26),l(51),a(),o(52,"div",27)(53,"button",28),x("click",function(){return i.previousPage()}),y(54,"i",29),l(55," Previous "),a(),o(56,"span",30),l(57),a(),o(58,"button",28),x("click",function(){return i.nextPage()}),l(59," Next "),y(60,"i",31),a()()()()()),e&2&&(c(13),M("ngModel",i.selectedBranchId),c(),m("ngValue",null),c(2),m("ngForOf",i.branches),c(),M("ngModel",i.pageSize),c(),m("value",10),c(2),m("value",25),c(2),m("value",50),c(2),m("value",100),c(7),M("ngModel",i.searchQuery),c(16),m("ngIf",i.paginatedRoles.length===0),c(),m("ngForOf",i.paginatedRoles),c(3),En(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredRoles.length," entries "),c(2),m("disabled",i.currentPage===1),c(4),Ge("Page ",i.currentPage," of ",i.totalPages),c(),m("disabled",i.currentPage>=i.totalPages))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".roles-page[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00796b4d}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#6c757d}.btn.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#00796b;color:#00796b}.btn.btn-outline[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:#6c757d;padding:8px;border-radius:6px}.btn.btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0f0f0;color:#00796b}.btn.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-danger-icon[_ngcontent-%COMP%]{color:#dc3545}.btn.btn-danger-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff0f0;color:#c82333}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 12px #00000014;padding:24px}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.company-filter[_ngcontent-%COMP%], .page-size-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;font-size:.9rem;cursor:pointer}.company-filter[_ngcontent-%COMP%]:focus, .page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}.company-filter[_ngcontent-%COMP%]{min-width:180px}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9e9e9e}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px 10px 38px;border:1px solid #ddd;border-radius:8px;width:220px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#2c3e50;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px!important;color:#9e9e9e}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.role-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.role-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.role-info[_ngcontent-%COMP%]   .role-description[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.company-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:#e0f2f1;color:#00796b;border-radius:12px;font-size:.8rem;font-weight:500}.role-type[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.8rem;font-weight:500}.role-type.system[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.role-type.custom[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.user-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:28px;height:28px;background:#f5f5f5;color:#5c6975;border-radius:14px;font-size:.85rem;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding-top:16px;border-top:1px solid #eee}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:.9rem;color:#5c6975}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}"],changeDetection:0})};var lu=class n{constructor(t){this.http=t}apiUrl="/api/staff";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}toggleActive(t){return this.http.post(`${this.apiUrl}/${t}/toggle-active`,{})}getRoles(){return this.http.get(`${this.apiUrl}/roles`)}getRolesByBranch(t){return this.http.get(`/api/roles/branch/${t}`)}getByBranch(t){return this.http.get(`${this.apiUrl}/branch/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function qK(n,t){if(n&1&&(o(0,"option",8),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function HK(n,t){n&1&&(o(0,"tr")(1,"td",30),l(2,"No staff members found"),a()())}function GK(n,t){if(n&1&&(o(0,"span",38),l(1),a()),n&2){let e=p().$implicit;c(),_(e.branchName)}}function $K(n,t){n&1&&(o(0,"span",39),l(1,"-"),a())}function YK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",31)(3,"div",32),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td")(8,"code"),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td"),b(13,GK,2,1,"span",33)(14,$K,2,0,"span",34),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td")(20,"label",35)(21,"input",36),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleActive(r))}),a(),y(22,"span",37),a()()()}if(n&2){let e=t.$implicit,i=p();c(4),_((e.firstName==null?null:e.firstName.charAt(0))||"?"),c(2),_(i.getFullName(e)),c(3),_(e.username),c(2),_(e.email),c(2),m("ngIf",e.branchName),c(),m("ngIf",!e.branchName),c(2),_(e.role||"-"),c(2),_(e.lastLogin||"-"),c(3),m("checked",e.active)}}var Yy=class n{constructor(t,e,i){this.router=t;this.staffService=e;this.branchService=i}staff=[];branches=[];loading=!1;searchQuery="";selectedBranchId=null;pageSize=25;currentPage=1;ngOnInit(){this.loadBranches(),this.loadStaff()}loadBranches(){this.branchService.getAllBranches().subscribe({next:t=>{this.branches=t},error:()=>{}})}onBranchFilterChange(){this.currentPage=1}loadStaff(){this.loading=!0,this.staffService.getAll().subscribe({next:t=>{this.staff=t,this.loading=!1},error:t=>{console.error("Error loading staff:",t),this.loading=!1}})}get filteredStaff(){let t=this.staff;return this.selectedBranchId&&(t=t.filter(e=>e.branchId===this.selectedBranchId)),this.searchQuery&&(t=t.filter(e=>(e.firstName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(e.lastName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(e.email?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(e.branchName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase()))),t}get paginatedStaff(){let t=(this.currentPage-1)*this.pageSize;return this.filteredStaff.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredStaff.length/this.pageSize)||1}get startEntry(){return this.filteredStaff.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredStaff.length)}getFullName(t){return`${t.firstName||""} ${t.lastName||""}`.trim()}addStaff(){this.router.navigate(["/app/settings/staff/add"])}toggleActive(t){this.staffService.toggleActive(t.id).subscribe({next:()=>{t.active=!t.active},error:e=>{console.error("Error toggling active status:",e)}})}exportData(){console.log("Export staff data")}refresh(){this.loadStaff()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(V(tn),V(lu),V(Ar))};static \u0275cmp=_e({type:n,selectors:[["app-staff-management"]],standalone:!1,decls:61,vars:17,consts:[[1,"settings-page"],[1,"page-header-simple"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"company-filter",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"sortable"],[1,"fas","fa-sort-up"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"page-number"],["colspan","7",1,"empty-state"],[1,"staff-cell"],[1,"avatar"],["class","company-badge",4,"ngIf"],["class","no-company",4,"ngIf"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"],[1,"company-badge"],[1,"no-company"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return i.addStaff()}),y(3,"i",3),l(4," New Staff Member "),a()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"select",7),S("ngModelChange",function(s){return P(i.selectedBranchId,s)||(i.selectedBranchId=s),s}),x("ngModelChange",function(){return i.onBranchFilterChange()}),o(9,"option",8),l(10,"All Companies"),a(),b(11,qK,2,2,"option",9),a(),o(12,"select",10),S("ngModelChange",function(s){return P(i.pageSize,s)||(i.pageSize=s),s}),o(13,"option",11),l(14,"10"),a(),o(15,"option",11),l(16,"25"),a(),o(17,"option",11),l(18,"50"),a(),o(19,"option",11),l(20,"100"),a()(),o(21,"button",12),x("click",function(){return i.exportData()}),l(22,"Export"),a(),o(23,"button",13),x("click",function(){return i.refresh()}),y(24,"i",14),a()(),o(25,"div",15)(26,"div",16),y(27,"i",17),o(28,"input",18),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),o(29,"div",19)(30,"table",20)(31,"thead")(32,"tr")(33,"th",21),l(34,"Full Name "),y(35,"i",22),a(),o(36,"th"),l(37,"Username"),a(),o(38,"th"),l(39,"Email"),a(),o(40,"th"),l(41,"Company"),a(),o(42,"th"),l(43,"Role"),a(),o(44,"th"),l(45,"Last Login"),a(),o(46,"th"),l(47,"Active"),a()()(),o(48,"tbody"),b(49,HK,3,0,"tr",23)(50,YK,23,9,"tr",24),a()()(),o(51,"div",25)(52,"div",26),l(53),a(),o(54,"div",27)(55,"button",28),x("click",function(){return i.previousPage()}),l(56,"Previous"),a(),o(57,"span",29),l(58),a(),o(59,"button",28),x("click",function(){return i.nextPage()}),l(60,"Next"),a()()()()()),e&2&&(c(8),M("ngModel",i.selectedBranchId),c(),m("ngValue",null),c(2),m("ngForOf",i.branches),c(),M("ngModel",i.pageSize),c(),m("value",10),c(2),m("value",25),c(2),m("value",50),c(2),m("value",100),c(9),M("ngModel",i.searchQuery),c(21),m("ngIf",i.paginatedStaff.length===0),c(),m("ngForOf",i.paginatedStaff),c(3),En(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredStaff.length," entries "),c(2),m("disabled",i.currentPage===1),c(3),_(i.currentPage),c(),m("disabled",i.currentPage>=i.totalPages))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee],styles:['.page-header-simple[_ngcontent-%COMP%]{margin-bottom:20px}.btn-new-staff[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b6abf,#4a5ba8);border:none;padding:10px 20px;font-weight:500}.btn-new-staff[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4a5ba8,#3d4d8f)}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.company-filter[_ngcontent-%COMP%], .page-size-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:.9rem;cursor:pointer}.company-filter[_ngcontent-%COMP%]:focus, .page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}.company-filter[_ngcontent-%COMP%]{min-width:160px}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.btn-outline[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:#666;padding:6px 10px}.btn-icon[_ngcontent-%COMP%]:hover{color:#333}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px 8px 36px;border:1px solid #ddd;border-radius:4px;width:200px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5b6abf}.staff-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.staff-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#5b6abf,#4a5ba8);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.9rem}.sortable[_ngcontent-%COMP%]{cursor:pointer}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px;color:#00796b}.company-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:#e0f2f1;color:#00796b;border-radius:12px;font-size:.8rem;font-weight:500}.no-company[_ngcontent-%COMP%]{color:#9e9e9e}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:26px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:26px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#5b6abf}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid #eee}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pagination[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;background:#5b6abf;color:#fff;border-radius:4px;font-weight:500}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid #eee;margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:#666;font-size:.95rem;cursor:pointer;position:relative}.tab.active[_ngcontent-%COMP%]{color:#333;font-weight:600}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#5b6abf}.tab[_ngcontent-%COMP%]:hover:not(.active){color:#333}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:#f5f5f5;border:1px solid #ddd;border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#666;font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:#dc3545;margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:20px;padding:12px;background:#f8f9fa;border-radius:4px}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}']})};function JK(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),o(3,"p"),l(4,'No tax rates configured. Click "Add Tax Rate" to create one.'),a()()())}function KK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td")(12,"div",16)(13,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(14,"i",18),a(),o(15,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteTaxRate(r.id))}),y(16,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.name),c(2),D("",e.rate,"%"),c(2),_(e.description),c(2),ie("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),_(e.status)}}function QK(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Tax Name"),a(),o(11,"input",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTaxRate.name,r)||(s.selectedTaxRate.name=r),f(r)}),a()(),o(12,"div",27)(13,"label"),l(14,"Rate (%)"),a(),o(15,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTaxRate.rate,r)||(s.selectedTaxRate.rate=r),f(r)}),a()(),o(16,"div",27)(17,"label"),l(18,"Description"),a(),o(19,"textarea",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTaxRate.description,r)||(s.selectedTaxRate.description=r),f(r)}),a()(),o(20,"div",27)(21,"label"),l(22,"Status"),a(),o(23,"select",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTaxRate.status,r)||(s.selectedTaxRate.status=r),f(r)}),o(24,"option",32),l(25,"Active"),a(),o(26,"option",33),l(27,"Inactive"),a()()()(),o(28,"div",34)(29,"button",35),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(30,"Cancel"),a(),o(31,"button",5),x("click",function(){g(e);let r=p();return f(r.saveTaxRate())}),l(32),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Tax Rate":"Add Tax Rate"),c(7),M("ngModel",e.selectedTaxRate.name),c(4),M("ngModel",e.selectedTaxRate.rate),c(4),M("ngModel",e.selectedTaxRate.description),c(4),M("ngModel",e.selectedTaxRate.status),c(9),_(e.editMode?"Update":"Save")}}var Jy=class n{taxRates=[];showModal=!1;editMode=!1;selectedTaxRate=this.getEmptyTaxRate();loading=!1;ngOnInit(){this.loadTaxRates()}loadTaxRates(){this.loading=!0,setTimeout(()=>{this.loading=!1},300)}getEmptyTaxRate(){return{name:"",rate:0,description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedTaxRate=me({},t)):(this.editMode=!1,this.selectedTaxRate=this.getEmptyTaxRate()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedTaxRate=this.getEmptyTaxRate()}saveTaxRate(){if(this.editMode){let t=this.taxRates.findIndex(e=>e.id===this.selectedTaxRate.id);t!==-1&&(this.taxRates[t]=me({},this.selectedTaxRate))}else this.selectedTaxRate.id=Date.now(),this.taxRates.push(me({},this.selectedTaxRate));this.closeModal()}deleteTaxRate(t){confirm("Are you sure you want to delete this tax rate?")&&(this.taxRates=this.taxRates.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-tax-rates"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-percent"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., VAT, GST",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Tax description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Tax Rates"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Tax Rates"),a()()(),o(16,"button",5),x("click",function(){return i.openModal()}),y(17,"i",6),l(18," Add Tax Rate "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),a(),o(26,"th"),l(27,"Rate (%)"),a(),o(28,"th"),l(29,"Description"),a(),o(30,"th"),l(31,"Status"),a(),o(32,"th"),l(33,"Actions"),a()()(),o(34,"tbody"),b(35,JK,5,0,"tr",10)(36,KK,17,8,"tr",11),a()()()()(),b(37,QK,33,6,"div",12)),e&2&&(c(35),m("ngIf",i.taxRates.length===0),c(),m("ngForOf",i.taxRates),c(),m("ngIf",i.showModal))},dependencies:[Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht],encapsulation:2})};function XK(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),o(3,"p"),l(4,'No currencies configured. Click "Add Currency" to create one.'),a()()())}function ZK(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td")(11,"span",15),l(12),a()(),o(13,"td")(14,"span",15),l(15),a()(),o(16,"td")(17,"div",16)(18,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(19,"i",18),a(),o(20,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteCurrency(r.id))}),y(21,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.code),c(2),_(e.name),c(2),_(e.symbol),c(2),_(e.exchangeRate),c(2),ie("badge-primary",e.isDefault),c(),_(e.isDefault?"Yes":"No"),c(2),ie("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),_(e.status)}}function eQ(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Currency Code"),a(),o(12,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.code,r)||(s.selectedCurrency.code=r),f(r)}),a()(),o(13,"div",28)(14,"label"),l(15,"Currency Name"),a(),o(16,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.name,r)||(s.selectedCurrency.name=r),f(r)}),a()()(),o(17,"div",27)(18,"div",28)(19,"label"),l(20,"Symbol"),a(),o(21,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.symbol,r)||(s.selectedCurrency.symbol=r),f(r)}),a()(),o(22,"div",28)(23,"label"),l(24,"Exchange Rate"),a(),o(25,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.exchangeRate,r)||(s.selectedCurrency.exchangeRate=r),f(r)}),a()()(),o(26,"div",27)(27,"div",28)(28,"label"),l(29,"Default Currency"),a(),o(30,"select",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.isDefault,r)||(s.selectedCurrency.isDefault=r),f(r)}),o(31,"option",34),l(32,"Yes"),a(),o(33,"option",34),l(34,"No"),a()()(),o(35,"div",28)(36,"label"),l(37,"Status"),a(),o(38,"select",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCurrency.status,r)||(s.selectedCurrency.status=r),f(r)}),o(39,"option",35),l(40,"Active"),a(),o(41,"option",36),l(42,"Inactive"),a()()()()(),o(43,"div",37)(44,"button",38),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(45,"Cancel"),a(),o(46,"button",5),x("click",function(){g(e);let r=p();return f(r.saveCurrency())}),l(47),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Currency":"Add Currency"),c(8),M("ngModel",e.selectedCurrency.code),c(4),M("ngModel",e.selectedCurrency.name),c(5),M("ngModel",e.selectedCurrency.symbol),c(4),M("ngModel",e.selectedCurrency.exchangeRate),c(5),M("ngModel",e.selectedCurrency.isDefault),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.selectedCurrency.status),c(9),_(e.editMode?"Update":"Save")}}var Ky=class n{currencies=[];showModal=!1;editMode=!1;selectedCurrency=this.getEmptyCurrency();loading=!1;ngOnInit(){this.loadCurrencies()}loadCurrencies(){this.loading=!0,setTimeout(()=>{this.loading=!1},300)}getEmptyCurrency(){return{code:"",name:"",symbol:"",exchangeRate:1,isDefault:!1,status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCurrency=me({},t)):(this.editMode=!1,this.selectedCurrency=this.getEmptyCurrency()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCurrency=this.getEmptyCurrency()}saveCurrency(){if(this.editMode){let t=this.currencies.findIndex(e=>e.id===this.selectedCurrency.id);t!==-1&&(this.currencies[t]=me({},this.selectedCurrency))}else this.selectedCurrency.id=Date.now(),this.currencies.push(me({},this.selectedCurrency));this.closeModal()}deleteCurrency(t){confirm("Are you sure you want to delete this currency?")&&(this.currencies=this.currencies.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-currencies"]],standalone:!1,decls:42,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., USD, EUR",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., US Dollar",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., $, \u20AC",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","1.00",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Currencies"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Currencies"),a()()(),o(16,"button",5),x("click",function(){return i.openModal()}),y(17,"i",6),l(18," Add Currency "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Symbol"),a(),o(30,"th"),l(31,"Exchange Rate"),a(),o(32,"th"),l(33,"Default"),a(),o(34,"th"),l(35,"Status"),a(),o(36,"th"),l(37,"Actions"),a()()(),o(38,"tbody"),b(39,XK,5,0,"tr",10)(40,ZK,22,12,"tr",11),a()()()()(),b(41,eQ,48,10,"div",12)),e&2&&(c(39),m("ngIf",i.currencies.length===0),c(),m("ngForOf",i.currencies),c(),m("ngIf",i.showModal))},dependencies:[Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht],encapsulation:2})};function tQ(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),o(3,"p"),l(4,'No payment modes configured. Click "Add Payment Mode" to create one.'),a()()())}function nQ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td")(7,"span",15),l(8),a()(),o(9,"td")(10,"div",16)(11,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(12,"i",18),a(),o(13,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deletePaymentMode(r.id))}),y(14,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.name),c(2),_(e.description),c(2),ie("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),_(e.status)}}function iQ(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Payment Mode Name"),a(),o(11,"input",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPaymentMode.name,r)||(s.selectedPaymentMode.name=r),f(r)}),a()(),o(12,"div",27)(13,"label"),l(14,"Description"),a(),o(15,"textarea",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPaymentMode.description,r)||(s.selectedPaymentMode.description=r),f(r)}),a()(),o(16,"div",27)(17,"label"),l(18,"Status"),a(),o(19,"select",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPaymentMode.status,r)||(s.selectedPaymentMode.status=r),f(r)}),o(20,"option",31),l(21,"Active"),a(),o(22,"option",32),l(23,"Inactive"),a()()()(),o(24,"div",33)(25,"button",34),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(26,"Cancel"),a(),o(27,"button",5),x("click",function(){g(e);let r=p();return f(r.savePaymentMode())}),l(28),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Payment Mode":"Add Payment Mode"),c(7),M("ngModel",e.selectedPaymentMode.name),c(4),M("ngModel",e.selectedPaymentMode.description),c(4),M("ngModel",e.selectedPaymentMode.status),c(9),_(e.editMode?"Update":"Save")}}var Qy=class n{paymentModes=[];showModal=!1;editMode=!1;selectedPaymentMode=this.getEmptyPaymentMode();loading=!1;ngOnInit(){this.loadPaymentModes()}loadPaymentModes(){this.loading=!0,setTimeout(()=>{this.loading=!1},300)}getEmptyPaymentMode(){return{name:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedPaymentMode=me({},t)):(this.editMode=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()}savePaymentMode(){if(this.editMode){let t=this.paymentModes.findIndex(e=>e.id===this.selectedPaymentMode.id);t!==-1&&(this.paymentModes[t]=me({},this.selectedPaymentMode))}else this.selectedPaymentMode.id=Date.now(),this.paymentModes.push(me({},this.selectedPaymentMode));this.closeModal()}deletePaymentMode(t){confirm("Are you sure you want to delete this payment mode?")&&(this.paymentModes=this.paymentModes.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-payment-modes"]],standalone:!1,decls:36,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","4",1,"empty-state"],[1,"fas","fa-credit-card"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Cash, Credit Card, Bank Transfer",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Payment mode description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Payment Modes"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Payment Modes"),a()()(),o(16,"button",5),x("click",function(){return i.openModal()}),y(17,"i",6),l(18," Add Payment Mode "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),a(),o(26,"th"),l(27,"Description"),a(),o(28,"th"),l(29,"Status"),a(),o(30,"th"),l(31,"Actions"),a()()(),o(32,"tbody"),b(33,tQ,5,0,"tr",10)(34,nQ,15,7,"tr",11),a()()()()(),b(35,iQ,29,5,"div",12)),e&2&&(c(33),m("ngIf",i.paymentModes.length===0),c(),m("ngForOf",i.paymentModes),c(),m("ngIf",i.showModal))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee,ht],encapsulation:2})};function rQ(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),o(3,"p"),l(4,'No expense categories configured. Click "Add Category" to create one.'),a()()())}function oQ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td")(12,"div",16)(13,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(14,"i",18),a(),o(15,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteCategory(r.id))}),y(16,"i",20),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.code),c(2),_(e.name),c(2),_(e.description),c(2),ie("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),_(e.status)}}function aQ(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Category Code"),a(),o(12,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCategory.code,r)||(s.selectedCategory.code=r),f(r)}),a()(),o(13,"div",28)(14,"label"),l(15,"Category Name"),a(),o(16,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCategory.name,r)||(s.selectedCategory.name=r),f(r)}),a()()(),o(17,"div",28)(18,"label"),l(19,"Description"),a(),o(20,"textarea",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCategory.description,r)||(s.selectedCategory.description=r),f(r)}),a()(),o(21,"div",28)(22,"label"),l(23,"Status"),a(),o(24,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCategory.status,r)||(s.selectedCategory.status=r),f(r)}),o(25,"option",33),l(26,"Active"),a(),o(27,"option",34),l(28,"Inactive"),a()()()(),o(29,"div",35)(30,"button",36),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(31,"Cancel"),a(),o(32,"button",5),x("click",function(){g(e);let r=p();return f(r.saveCategory())}),l(33),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Expense Category":"Add Expense Category"),c(8),M("ngModel",e.selectedCategory.code),c(4),M("ngModel",e.selectedCategory.name),c(4),M("ngModel",e.selectedCategory.description),c(4),M("ngModel",e.selectedCategory.status),c(9),_(e.editMode?"Update":"Save")}}var Xy=class n{expenseCategories=[];showModal=!1;editMode=!1;selectedCategory=this.getEmptyCategory();loading=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!0,setTimeout(()=>{this.loading=!1},300)}getEmptyCategory(){return{name:"",code:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCategory=me({},t)):(this.editMode=!1,this.selectedCategory=this.getEmptyCategory()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCategory=this.getEmptyCategory()}saveCategory(){if(this.editMode){let t=this.expenseCategories.findIndex(e=>e.id===this.selectedCategory.id);t!==-1&&(this.expenseCategories[t]=me({},this.selectedCategory))}else this.selectedCategory.id=Date.now(),this.expenseCategories.push(me({},this.selectedCategory));this.closeModal()}deleteCategory(t){confirm("Are you sure you want to delete this expense category?")&&(this.expenseCategories=this.expenseCategories.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-expense-categories"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-receipt"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., EXP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Office Supplies",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Category description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Expense Categories"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Settings"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Expense Categories"),a()()(),o(16,"button",5),x("click",function(){return i.openModal()}),y(17,"i",6),l(18," Add Category "),a()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Description"),a(),o(30,"th"),l(31,"Status"),a(),o(32,"th"),l(33,"Actions"),a()()(),o(34,"tbody"),b(35,rQ,5,0,"tr",10)(36,oQ,17,8,"tr",11),a()()()()(),b(37,aQ,34,6,"div",12)),e&2&&(c(35),m("ngIf",i.expenseCategories.length===0),c(),m("ngForOf",i.expenseCategories),c(),m("ngIf",i.showModal))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee,ht],encapsulation:2})};var cu=class n{constructor(t){this.http=t}baseUrl="/api/customers";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}addContact(t,e){return this.http.post(`${this.baseUrl}/${t}/contacts`,e)}updateContact(t,e,i){return this.http.put(`${this.baseUrl}/${t}/contacts/${e}`,i)}deleteContact(t,e){return this.http.delete(`${this.baseUrl}/${t}/contacts/${e}`)}addNote(t,e){return this.http.post(`${this.baseUrl}/${t}/notes`,e)}addDocument(t,e){return this.http.post(`${this.baseUrl}/${t}/documents`,e)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function sQ(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",31),a()())}function lQ(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",9),o(3,"p"),l(4,'No clients found. Click "Add Client" to create one.'),a()()())}function cQ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",32)(3,"div",33),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",34),l(13),a()(),o(14,"td")(15,"span",35),l(16),a()(),o(17,"td")(18,"div",36)(19,"button",37),x("click",function(){let r=g(e).$implicit,s=p();return f(s.viewClient(r))}),y(20,"i",38),a(),o(21,"button",39),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(22,"i",40),a(),o(23,"button",41),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteClient(r.id))}),y(24,"i",42),a()()()()}if(n&2){let e=t.$implicit,i=p();c(4),_(e.name.charAt(0)),c(2),_(e.name),c(2),_(e.email),c(2),_(e.phone),c(3),_(e.customerGroup||"-"),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function dQ(n,t){if(n&1){let e=F();o(0,"div",60)(1,"div",61)(2,"div",62)(3,"label"),l(4,"Company Name *"),a(),o(5,"input",63),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.name,r)||(s.selectedClient.name=r),f(r)}),a()(),o(6,"div",62)(7,"label"),l(8,"Primary Contact"),a(),o(9,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.primaryContact,r)||(s.selectedClient.primaryContact=r),f(r)}),a()()(),o(10,"div",61)(11,"div",62)(12,"label"),l(13,"Email"),a(),o(14,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.email,r)||(s.selectedClient.email=r),f(r)}),a()(),o(15,"div",62)(16,"label"),l(17,"Phone"),a(),o(18,"input",66),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.phone,r)||(s.selectedClient.phone=r),f(r)}),a()()(),o(19,"div",62)(20,"label"),l(21,"Billing Address"),a(),o(22,"textarea",67),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.billingAddress,r)||(s.selectedClient.billingAddress=r),f(r)}),a()(),o(23,"div",61)(24,"div",62)(25,"label"),l(26,"Currency"),a(),o(27,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.currency,r)||(s.selectedClient.currency=r),f(r)}),o(28,"option",69),l(29,"USD - US Dollar"),a(),o(30,"option",70),l(31,"EUR - Euro"),a(),o(32,"option",71),l(33,"GBP - British Pound"),a(),o(34,"option",72),l(35,"CAD - Canadian Dollar"),a(),o(36,"option",73),l(37,"AUD - Australian Dollar"),a()()(),o(38,"div",62)(39,"label"),l(40,"Language"),a(),o(41,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.language,r)||(s.selectedClient.language=r),f(r)}),o(42,"option",74),l(43,"English"),a(),o(44,"option",75),l(45,"Spanish"),a(),o(46,"option",76),l(47,"French"),a(),o(48,"option",77),l(49,"German"),a(),o(50,"option",78),l(51,"Chinese"),a()()()(),o(52,"div",61)(53,"div",62)(54,"label"),l(55,"Client Group"),a(),o(56,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.customerGroup,r)||(s.selectedClient.customerGroup=r),f(r)}),o(57,"option",79),l(58,"Select Group"),a(),o(59,"option",80),l(60,"Retail"),a(),o(61,"option",81),l(62,"Wholesale"),a(),o(63,"option",82),l(64,"VIP"),a(),o(65,"option",83),l(66,"Corporate"),a(),o(67,"option",84),l(68,"Enterprise"),a()()(),o(69,"div",62)(70,"label"),l(71,"Status"),a(),o(72,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.status,r)||(s.selectedClient.status=r),f(r)}),o(73,"option",85),l(74,"Active"),a(),o(75,"option",86),l(76,"Inactive"),a()()()(),o(77,"div",62)(78,"label"),l(79,"Assigned Staff"),a(),o(80,"input",87),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.assignedStaff,r)||(s.selectedClient.assignedStaff=r),f(r)}),a()()()}if(n&2){let e=p(2);c(5),M("ngModel",e.selectedClient.name),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedClient.primaryContact),m("disabled",e.viewMode),c(5),M("ngModel",e.selectedClient.email),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedClient.phone),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedClient.billingAddress),m("disabled",e.viewMode),c(5),M("ngModel",e.selectedClient.currency),m("disabled",e.viewMode),c(14),M("ngModel",e.selectedClient.language),m("disabled",e.viewMode),c(15),M("ngModel",e.selectedClient.customerGroup),m("disabled",e.viewMode),c(16),M("ngModel",e.selectedClient.status),m("disabled",e.viewMode),c(8),M("ngModel",e.selectedClient.assignedStaff),m("disabled",e.viewMode)}}function pQ(n,t){if(n&1){let e=F();o(0,"button",92),x("click",function(){g(e);let r=p(3);return f(r.openContactModal())}),y(1,"i",5),l(2," Add Contact "),a()}}function mQ(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function uQ(n,t){if(n&1){let e=F();o(0,"td")(1,"div",36)(2,"button",93),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.openContactModal(r))}),y(3,"i",40),a(),o(4,"button",94),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.deleteContact(r.id))}),y(5,"i",42),a()()()}}function gQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",35),l(11),a()(),b(12,uQ,6,0,"td",24),a()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.name),c(2),_(e.email),c(2),_(e.phone),c(2),_(e.position),c(2),m("ngClass",e.portalAccess?"badge-success":"badge-secondary"),c(),D(" ",e.portalAccess?"Yes":"No"," "),c(),m("ngIf",!i.viewMode)}}function fQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),a(),o(6,"th"),l(7,"Email"),a(),o(8,"th"),l(9,"Phone"),a(),o(10,"th"),l(11,"Position"),a(),o(12,"th"),l(13,"Portal Access"),a(),b(14,mQ,2,0,"th",24),a()(),o(15,"tbody"),b(16,gQ,13,7,"tr",25),a()()()),n&2){let e=p(3);c(14),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedClient.contacts)}}function hQ(n,t){n&1&&(o(0,"div",95),y(1,"i",51),o(2,"p"),l(3,'No contacts added yet. Click "Add Contact" to add one.'),a()())}function _Q(n,t){if(n&1&&(o(0,"div",60)(1,"div",88)(2,"h3"),l(3,"Client Contacts"),a(),b(4,pQ,3,0,"button",89),a(),b(5,fQ,17,2,"div",90)(6,hQ,4,0,"div",91),a()),n&2){let e=p(2);c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedClient.contacts&&e.selectedClient.contacts.length>0),c(),m("ngIf",!e.selectedClient.contacts||e.selectedClient.contacts.length===0)}}function vQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",35),l(9),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.invoiceNumber),c(2),_(i.formatDate(e.date)),c(2),_(i.formatCurrency(e.amount)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function xQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",113)(2,"thead")(3,"tr")(4,"th"),l(5,"Invoice #"),a(),o(6,"th"),l(7,"Date"),a(),o(8,"th"),l(9,"Amount"),a(),o(10,"th"),l(11,"Status"),a()()(),o(12,"tbody"),b(13,vQ,10,5,"tr",25),a()()()),n&2){let e=p(3);c(13),m("ngForOf",e.selectedClient.invoices)}}function yQ(n,t){n&1&&(o(0,"div",114)(1,"p"),l(2,"No invoices recorded."),a()())}function CQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(i.formatDate(e.paymentDate)),c(2),_(i.formatCurrency(e.amount)),c(2),_(e.method),c(2),_(e.reference)}}function bQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",113)(2,"thead")(3,"tr")(4,"th"),l(5,"Date"),a(),o(6,"th"),l(7,"Amount"),a(),o(8,"th"),l(9,"Method"),a(),o(10,"th"),l(11,"Reference"),a()()(),o(12,"tbody"),b(13,CQ,9,4,"tr",25),a()()()),n&2){let e=p(3);c(13),m("ngForOf",e.selectedClient.payments)}}function MQ(n,t){n&1&&(o(0,"div",114)(1,"p"),l(2,"No payments recorded."),a()())}function SQ(n,t){if(n&1){let e=F();o(0,"div",60)(1,"div",96)(2,"div",97)(3,"div",98),y(4,"i",99),a(),o(5,"div",100)(6,"h4"),l(7),a(),o(8,"p"),l(9,"Total Invoices"),a()()(),o(10,"div",97)(11,"div",101),y(12,"i",102),a(),o(13,"div",100)(14,"h4"),l(15),a(),o(16,"p"),l(17,"Payments Received"),a()()(),o(18,"div",97)(19,"div",103),y(20,"i",104),a(),o(21,"div",100)(22,"h4"),l(23),a(),o(24,"p"),l(25,"Outstanding Balance"),a()()()(),o(26,"div",61)(27,"div",62)(28,"label"),l(29,"Default Payment Method"),a(),o(30,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.defaultPaymentMethod,r)||(s.selectedClient.defaultPaymentMethod=r),f(r)}),o(31,"option",79),l(32,"Select Method"),a(),o(33,"option",105),l(34,"Bank Transfer"),a(),o(35,"option",106),l(36,"Credit Card"),a(),o(37,"option",107),l(38,"PayPal"),a(),o(39,"option",108),l(40,"Check"),a(),o(41,"option",109),l(42,"Cash"),a()()(),o(43,"div",62)(44,"label"),l(45,"Outstanding Balance"),a(),o(46,"input",110),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedClient.outstandingBalance,r)||(s.selectedClient.outstandingBalance=r),f(r)}),a()()(),o(47,"h4",111),l(48,"Recent Invoices"),a(),b(49,xQ,14,1,"div",90)(50,yQ,3,0,"div",112),o(51,"h4",111),l(52,"Recent Payments"),a(),b(53,bQ,14,1,"div",90)(54,MQ,3,0,"div",112),a()}if(n&2){let e=p(2);c(7),_((e.selectedClient.invoices==null?null:e.selectedClient.invoices.length)||0),c(8),_((e.selectedClient.payments==null?null:e.selectedClient.payments.length)||0),c(8),_(e.formatCurrency(e.selectedClient.outstandingBalance||0)),c(7),M("ngModel",e.selectedClient.defaultPaymentMethod),m("disabled",e.viewMode),c(16),M("ngModel",e.selectedClient.outstandingBalance),m("disabled",e.viewMode),c(3),m("ngIf",e.selectedClient.invoices&&e.selectedClient.invoices.length>0),c(),m("ngIf",!e.selectedClient.invoices||e.selectedClient.invoices.length===0),c(3),m("ngIf",e.selectedClient.payments&&e.selectedClient.payments.length>0),c(),m("ngIf",!e.selectedClient.payments||e.selectedClient.payments.length===0)}}function PQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"span",35),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.name),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(i.formatDate(e.startDate)),c(2),_(e.endDate?i.formatDate(e.endDate):"-"),c(2),_(i.formatCurrency(e.budget))}}function wQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Project Name"),a(),o(6,"th"),l(7,"Status"),a(),o(8,"th"),l(9,"Start Date"),a(),o(10,"th"),l(11,"End Date"),a(),o(12,"th"),l(13,"Budget"),a()()(),o(14,"tbody"),b(15,PQ,12,6,"tr",25),a()()()),n&2){let e=p(3);c(15),m("ngForOf",e.selectedClient.projects)}}function EQ(n,t){n&1&&(o(0,"div",95),y(1,"i",52),o(2,"p"),l(3,"No projects assigned to this client."),a()())}function OQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"span",35),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.title),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(i.formatDate(e.dueDate)),c(2),_(e.assignee||"-")}}function TQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Task"),a(),o(6,"th"),l(7,"Status"),a(),o(8,"th"),l(9,"Due Date"),a(),o(10,"th"),l(11,"Assignee"),a()()(),o(12,"tbody"),b(13,OQ,10,5,"tr",25),a()()()),n&2){let e=p(3);c(13),m("ngForOf",e.selectedClient.tasks)}}function kQ(n,t){n&1&&(o(0,"div",95),y(1,"i",115),o(2,"p"),l(3,"No tasks assigned for this client."),a()())}function IQ(n,t){if(n&1&&(o(0,"div",60)(1,"h4",111),l(2,"Projects"),a(),b(3,wQ,16,1,"div",90)(4,EQ,4,0,"div",91),o(5,"h4",111),l(6,"Tasks"),a(),b(7,TQ,14,1,"div",90)(8,kQ,4,0,"div",91),a()),n&2){let e=p(2);c(3),m("ngIf",e.selectedClient.projects&&e.selectedClient.projects.length>0),c(),m("ngIf",!e.selectedClient.projects||e.selectedClient.projects.length===0),c(3),m("ngIf",e.selectedClient.tasks&&e.selectedClient.tasks.length>0),c(),m("ngIf",!e.selectedClient.tasks||e.selectedClient.tasks.length===0)}}function DQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"span",35),l(5),a()(),o(6,"td")(7,"span",35),l(8),a()(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.subject),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(2),_(i.formatDate(e.createdDate)),c(2),_(i.formatDate(e.lastUpdated))}}function AQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Subject"),a(),o(6,"th"),l(7,"Status"),a(),o(8,"th"),l(9,"Priority"),a(),o(10,"th"),l(11,"Created"),a(),o(12,"th"),l(13,"Last Updated"),a()()(),o(14,"tbody"),b(15,DQ,13,7,"tr",25),a()()()),n&2){let e=p(3);c(15),m("ngForOf",e.selectedClient.tickets)}}function RQ(n,t){n&1&&(o(0,"div",95),y(1,"i",117),o(2,"p"),l(3,"No support tickets for this client."),a()())}function FQ(n,t){if(n&1){let e=F();o(0,"button",92),x("click",function(){g(e);let r=p(3);return f(r.openNoteModal())}),y(1,"i",5),l(2," Add Note "),a()}}function NQ(n,t){if(n&1){let e=F();o(0,"button",126),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.deleteNote(r.id))}),y(1,"i",42),a()}}function LQ(n,t){if(n&1&&(o(0,"div",120)(1,"div",121)(2,"span",122),y(3,"i",50),l(4),a(),o(5,"span",123),l(6),a(),b(7,NQ,2,0,"button",124),a(),o(8,"div",125),l(9),a()()),n&2){let e=t.$implicit,i=p(4);c(4),D(" ",e.createdBy),c(2),_(i.formatDate(e.createdDate)),c(),m("ngIf",!i.viewMode),c(2),_(e.content)}}function VQ(n,t){if(n&1&&(o(0,"div",118),b(1,LQ,10,4,"div",119),a()),n&2){let e=p(3);c(),m("ngForOf",e.selectedClient.notes)}}function BQ(n,t){n&1&&(o(0,"div",95),y(1,"i",127),o(2,"p"),l(3,"No internal notes added."),a()())}function UQ(n,t){if(n&1&&(o(0,"div",60)(1,"h4",111),l(2,"Support Tickets"),a(),b(3,AQ,16,1,"div",90)(4,RQ,4,0,"div",91),o(5,"div",88)(6,"h4",111),l(7,"Internal Notes"),a(),b(8,FQ,3,0,"button",89),a(),b(9,VQ,2,1,"div",116)(10,BQ,4,0,"div",91),a()),n&2){let e=p(2);c(3),m("ngIf",e.selectedClient.tickets&&e.selectedClient.tickets.length>0),c(),m("ngIf",!e.selectedClient.tickets||e.selectedClient.tickets.length===0),c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedClient.notes&&e.selectedClient.notes.length>0),c(),m("ngIf",!e.selectedClient.notes||e.selectedClient.notes.length===0)}}function jQ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",35),l(13),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.contractNumber),c(2),_(e.title),c(2),_(i.formatDate(e.startDate)),c(2),_(i.formatDate(e.expiryDate)),c(2),_(i.formatCurrency(e.value)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function WQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Contract #"),a(),o(6,"th"),l(7,"Title"),a(),o(8,"th"),l(9,"Start Date"),a(),o(10,"th"),l(11,"Expiry Date"),a(),o(12,"th"),l(13,"Value"),a(),o(14,"th"),l(15,"Status"),a()()(),o(16,"tbody"),b(17,jQ,14,7,"tr",25),a()()()),n&2){let e=p(3);c(17),m("ngForOf",e.selectedClient.contracts)}}function zQ(n,t){n&1&&(o(0,"div",95),y(1,"i",128),o(2,"p"),l(3,"No contracts for this client."),a()())}function qQ(n,t){if(n&1){let e=F();o(0,"button",92),x("click",function(){g(e);let r=p(3);return f(r.openDocumentModal())}),y(1,"i",5),l(2," Add Document "),a()}}function HQ(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function GQ(n,t){if(n&1){let e=F();o(0,"td")(1,"button",94),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.deleteDocument(r.id))}),y(2,"i",42),a()()}}function $Q(n,t){if(n&1&&(o(0,"tr")(1,"td"),y(2,"i",129),l(3),a(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),b(10,GQ,3,0,"td",24),a()),n&2){let e=t.$implicit,i=p(4);c(3),D(" ",e.name),c(2),_(e.type),c(2),_(i.formatDate(e.uploadDate)),c(2),_(e.expiryDate?i.formatDate(e.expiryDate):"-"),c(),m("ngIf",!i.viewMode)}}function YQ(n,t){if(n&1&&(o(0,"div",22)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),l(5,"Document Name"),a(),o(6,"th"),l(7,"Type"),a(),o(8,"th"),l(9,"Upload Date"),a(),o(10,"th"),l(11,"Expiry Date"),a(),b(12,HQ,2,0,"th",24),a()(),o(13,"tbody"),b(14,$Q,11,5,"tr",25),a()()()),n&2){let e=p(3);c(12),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedClient.documents)}}function JQ(n,t){n&1&&(o(0,"div",95),y(1,"i",54),o(2,"p"),l(3,"No documents uploaded."),a()())}function KQ(n,t){if(n&1&&(o(0,"div",60)(1,"h4",111),l(2,"Contracts"),a(),b(3,WQ,18,1,"div",90)(4,zQ,4,0,"div",91),o(5,"div",88)(6,"h4",111),l(7,"Documents & Attachments"),a(),b(8,qQ,3,0,"button",89),a(),b(9,YQ,15,2,"div",90)(10,JQ,4,0,"div",91),a()),n&2){let e=p(2);c(3),m("ngIf",e.selectedClient.contracts&&e.selectedClient.contracts.length>0),c(),m("ngIf",!e.selectedClient.contracts||e.selectedClient.contracts.length===0),c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedClient.documents&&e.selectedClient.documents.length>0),c(),m("ngIf",!e.selectedClient.documents||e.selectedClient.documents.length===0)}}function QQ(n,t){if(n&1){let e=F();o(0,"button",4),x("click",function(){g(e);let r=p(2);return f(r.saveClient())}),l(1),a()}if(n&2){let e=p(2);c(),_(e.editMode?"Update Client":"Save Client")}}function XQ(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",47),a()(),o(7,"div",48)(8,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("profile"))}),y(9,"i",50),l(10," Profile "),a(),o(11,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("contacts"))}),y(12,"i",51),l(13," Contacts "),a(),o(14,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("financials"))}),y(15,"i",16),l(16," Financials "),a(),o(17,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("projects"))}),y(18,"i",52),l(19," Projects & Tasks "),a(),o(20,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("support"))}),y(21,"i",53),l(22," Support & Communication "),a(),o(23,"button",49),x("click",function(){g(e);let r=p();return f(r.setActiveTab("documents"))}),y(24,"i",54),l(25," Documents & Contracts "),a()(),o(26,"div",55),b(27,dQ,81,20,"div",56)(28,_Q,7,3,"div",56)(29,SQ,55,11,"div",56)(30,IQ,9,4,"div",56)(31,UQ,11,5,"div",56)(32,KQ,11,5,"div",56),a(),o(33,"div",57)(34,"button",58),l(35),a(),b(36,QQ,2,1,"button",59),a()()()}if(n&2){let e=p();c(4),_(e.viewMode?"View Client":e.editMode?"Edit Client":"Add Client"),c(4),ie("active",e.activeTab==="profile"),c(3),ie("active",e.activeTab==="contacts"),c(3),ie("active",e.activeTab==="financials"),c(3),ie("active",e.activeTab==="projects"),c(3),ie("active",e.activeTab==="support"),c(3),ie("active",e.activeTab==="documents"),c(4),m("ngIf",e.activeTab==="profile"),c(),m("ngIf",e.activeTab==="contacts"),c(),m("ngIf",e.activeTab==="financials"),c(),m("ngIf",e.activeTab==="projects"),c(),m("ngIf",e.activeTab==="support"),c(),m("ngIf",e.activeTab==="documents"),c(3),_(e.viewMode?"Close":"Cancel"),c(),m("ngIf",!e.viewMode)}}function ZQ(n,t){if(n&1){let e=F();o(0,"label",136)(1,"input",142),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.togglePermission(r.value))}),a(),o(2,"span"),l(3),a()()}if(n&2){let e=t.$implicit,i=p(3);c(),m("checked",i.hasPermission(e.value)),c(2),_(e.label)}}function eX(n,t){if(n&1&&(o(0,"div",62)(1,"label"),l(2,"Permissions"),a(),o(3,"div",140),b(4,ZQ,4,2,"label",141),a()()),n&2){let e=p(2);c(4),m("ngForOf",e.permissionOptions)}}function tX(n,t){if(n&1){let e=F();o(0,"div",130),x("click",function(){g(e);let r=p();return f(r.closeContactModal())}),o(1,"div",131),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h3"),l(4),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.closeContactModal())}),y(6,"i",47),a()(),o(7,"div",55)(8,"div",61)(9,"div",62)(10,"label"),l(11,"Contact Name *"),a(),o(12,"input",132),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContact.name,r)||(s.selectedContact.name=r),f(r)}),a()(),o(13,"div",62)(14,"label"),l(15,"Position"),a(),o(16,"input",133),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContact.position,r)||(s.selectedContact.position=r),f(r)}),a()()(),o(17,"div",61)(18,"div",62)(19,"label"),l(20,"Email"),a(),o(21,"input",134),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContact.email,r)||(s.selectedContact.email=r),f(r)}),a()(),o(22,"div",62)(23,"label"),l(24,"Phone"),a(),o(25,"input",135),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContact.phone,r)||(s.selectedContact.phone=r),f(r)}),a()()(),o(26,"div",62)(27,"label",136)(28,"input",137),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContact.portalAccess,r)||(s.selectedContact.portalAccess=r),f(r)}),a(),o(29,"span"),l(30,"Portal Access"),a()()(),b(31,eX,5,1,"div",138),a(),o(32,"div",57)(33,"button",139),x("click",function(){g(e);let r=p();return f(r.closeContactModal())}),l(34,"Cancel"),a(),o(35,"button",4),x("click",function(){g(e);let r=p();return f(r.saveContact())}),l(36),a()()()()}if(n&2){let e=p();c(4),_(e.editContactMode?"Edit Contact":"Add Contact"),c(8),M("ngModel",e.selectedContact.name),c(4),M("ngModel",e.selectedContact.position),c(5),M("ngModel",e.selectedContact.email),c(4),M("ngModel",e.selectedContact.phone),c(3),M("ngModel",e.selectedContact.portalAccess),c(3),m("ngIf",e.selectedContact.portalAccess),c(5),_(e.editContactMode?"Update":"Add")}}function nX(n,t){if(n&1){let e=F();o(0,"div",130),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),o(1,"div",131),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h3"),l(4,"Add Internal Note"),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),y(6,"i",47),a()(),o(7,"div",55)(8,"div",62)(9,"label"),l(10,"Note Content"),a(),o(11,"textarea",143),S("ngModelChange",function(r){g(e);let s=p();return P(s.newNote,r)||(s.newNote=r),f(r)}),a()()(),o(12,"div",57)(13,"button",139),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),l(14,"Cancel"),a(),o(15,"button",144),x("click",function(){g(e);let r=p();return f(r.saveNote())}),l(16,"Add Note"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newNote),c(4),m("disabled",!e.newNote.trim())}}function iX(n,t){if(n&1){let e=F();o(0,"div",145)(1,"div",131),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h3"),l(4,"Add Document"),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",47),a()(),o(7,"div",55)(8,"div",62)(9,"label"),l(10,"Document Name *"),a(),o(11,"input",146),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedDocument.name,r)||(s.selectedDocument.name=r),f(r)}),a()(),o(12,"div",61)(13,"div",62)(14,"label"),l(15,"Document Type"),a(),o(16,"select",147),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedDocument.type,r)||(s.selectedDocument.type=r),f(r)}),o(17,"option",79),l(18,"Select Type"),a(),o(19,"option",148),l(20,"Contract"),a(),o(21,"option",149),l(22,"Proposal"),a(),o(23,"option",150),l(24,"Agreement"),a(),o(25,"option",151),l(26,"Invoice"),a(),o(27,"option",152),l(28,"Report"),a(),o(29,"option",153),l(30,"Other"),a()()(),o(31,"div",62)(32,"label"),l(33,"Expiry Date"),a(),o(34,"input",154),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedDocument.expiryDate,r)||(s.selectedDocument.expiryDate=r),f(r)}),a()()()(),o(35,"div",57)(36,"button",139),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(37,"Cancel"),a(),o(38,"button",144),x("click",function(){g(e);let r=p();return f(r.saveDocument())}),l(39,"Add Document"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.selectedDocument.name),c(5),M("ngModel",e.selectedDocument.type),c(18),M("ngModel",e.selectedDocument.expiryDate),c(4),m("disabled",!e.selectedDocument.name)}}var Zy=class n{constructor(t,e,i){this.customerService=t;this.cdr=e;this.notificationService=i}clients=[];searchQuery="";showModal=!1;editMode=!1;viewMode=!1;selectedClient=this.getEmptyClient();loading=!1;dataReady=!1;activeTab="profile";showContactModal=!1;editContactMode=!1;selectedContact=this.getEmptyContact();showNoteModal=!1;newNote="";showDocumentModal=!1;selectedDocument=this.getEmptyDocument();permissionOptions=[{value:"invoices",label:"View Invoices"},{value:"projects",label:"View Projects"},{value:"tickets",label:"Create Tickets"},{value:"estimates",label:"View Estimates"},{value:"contracts",label:"View Contracts"},{value:"documents",label:"View Documents"}];ngOnInit(){this.loadClients()}completeLoading(){this.loading=!1,this.dataReady=!0}loadClients(){this.loading=!0,this.dataReady=!1,this.cdr.markForCheck(),this.customerService.getAll().subscribe({next:t=>{this.clients=t.map(e=>Tt(me({},e),{contacts:e.contacts||[],invoices:e.invoices||[],payments:e.payments||[],projects:e.projects||[],tasks:e.tasks||[],tickets:e.tickets||[],notes:e.notes||[],documents:e.documents||[],contracts:e.contracts||[]})),this.completeLoading(),this.cdr.markForCheck()},error:t=>{console.error("Error loading clients",t),this.notificationService.error("Error loading clients"),this.completeLoading(),this.cdr.markForCheck()}})}get filteredClients(){return this.searchQuery?this.clients.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())):this.clients}getEmptyClient(){return{name:"",email:"",phone:"",address:"",customerGroup:"",status:"Active",primaryContact:"",currency:"USD",language:"English",assignedStaff:"",billingAddress:"",defaultPaymentMethod:"",outstandingBalance:0,contacts:[],invoices:[],payments:[],projects:[],tasks:[],tickets:[],notes:[],documents:[],contracts:[]}}getEmptyContact(){return{name:"",email:"",phone:"",position:"",portalAccess:!1,permissions:[]}}getEmptyDocument(){return{name:"",type:"",uploadDate:new Date().toISOString().split("T")[0]}}openModal(t){t?(this.editMode=!0,this.viewMode=!1,this.selectedClient=Tt(me({},t),{contacts:t.contacts||[],invoices:t.invoices||[],payments:t.payments||[],projects:t.projects||[],tasks:t.tasks||[],tickets:t.tickets||[],notes:t.notes||[],documents:t.documents||[],contracts:t.contracts||[]})):(this.editMode=!1,this.viewMode=!1,this.selectedClient=this.getEmptyClient()),this.activeTab="profile",this.showModal=!0,this.cdr.markForCheck()}viewClient(t){this.viewMode=!0,this.editMode=!1,this.selectedClient=Tt(me({},t),{contacts:t.contacts||[],invoices:t.invoices||[],payments:t.payments||[],projects:t.projects||[],tasks:t.tasks||[],tickets:t.tickets||[],notes:t.notes||[],documents:t.documents||[],contracts:t.contracts||[]}),this.activeTab="profile",this.showModal=!0,this.cdr.markForCheck()}closeModal(){this.showModal=!1,this.viewMode=!1,this.selectedClient=this.getEmptyClient(),this.activeTab="profile",this.cdr.markForCheck()}setActiveTab(t){this.activeTab=t,this.cdr.markForCheck()}saveClient(){if(!this.selectedClient.name?.trim()){this.notificationService.error("Client name is required");return}if(!this.selectedClient.email?.trim()){this.notificationService.error("Client email is required");return}this.editMode&&this.selectedClient.id?this.customerService.update(this.selectedClient.id,this.selectedClient).subscribe({next:()=>{this.notificationService.success("Client updated successfully"),this.loadClients(),this.closeModal(),this.cdr.markForCheck()},error:t=>{console.error("Error updating client",t),this.notificationService.error("Error updating client"),this.cdr.markForCheck()}}):this.customerService.create(this.selectedClient).subscribe({next:()=>{this.notificationService.success("Client created successfully"),this.loadClients(),this.closeModal(),this.cdr.markForCheck()},error:t=>{console.error("Error creating client",t),this.notificationService.error("Error creating client"),this.cdr.markForCheck()}})}deleteClient(t){confirm("Are you sure you want to delete this client?")&&this.customerService.delete(t).subscribe({next:()=>{this.notificationService.success("Client deleted successfully"),this.loadClients(),this.cdr.markForCheck()},error:e=>{console.error("Error deleting client",e),this.notificationService.error("Error deleting client"),this.cdr.markForCheck()}})}openContactModal(t){t?(this.editContactMode=!0,this.selectedContact=me({},t)):(this.editContactMode=!1,this.selectedContact=this.getEmptyContact()),this.showContactModal=!0,this.cdr.markForCheck()}closeContactModal(){this.showContactModal=!1,this.selectedContact=this.getEmptyContact(),this.cdr.markForCheck()}saveContact(){if(this.selectedClient.contacts||(this.selectedClient.contacts=[]),this.editContactMode&&this.selectedContact.id!==void 0){let t=this.selectedClient.contacts.findIndex(e=>e.id===this.selectedContact.id);t!==-1&&(this.selectedClient.contacts[t]=me({},this.selectedContact))}else this.selectedContact.id=Date.now(),this.selectedClient.contacts.push(me({},this.selectedContact));this.closeContactModal(),this.cdr.markForCheck()}deleteContact(t){confirm("Delete this contact?")&&(this.selectedClient.contacts=this.selectedClient.contacts?.filter(e=>e.id!==t)||[])}togglePermission(t){this.selectedContact.permissions||(this.selectedContact.permissions=[]);let e=this.selectedContact.permissions.indexOf(t);e>-1?this.selectedContact.permissions.splice(e,1):this.selectedContact.permissions.push(t)}hasPermission(t){return this.selectedContact.permissions?.includes(t)||!1}openNoteModal(){this.newNote="",this.showNoteModal=!0}closeNoteModal(){this.showNoteModal=!1,this.newNote=""}saveNote(){this.selectedClient.notes||(this.selectedClient.notes=[]);let t={id:Date.now(),content:this.newNote,createdBy:"Current User",createdDate:new Date().toISOString()};this.selectedClient.notes.unshift(t),this.closeNoteModal()}deleteNote(t){confirm("Delete this note?")&&(this.selectedClient.notes=this.selectedClient.notes?.filter(e=>e.id!==t)||[])}openDocumentModal(){this.selectedDocument=this.getEmptyDocument(),this.showDocumentModal=!0}closeDocumentModal(){this.showDocumentModal=!1,this.selectedDocument=this.getEmptyDocument()}saveDocument(){this.selectedClient.documents||(this.selectedClient.documents=[]),this.selectedDocument.id=Date.now(),this.selectedClient.documents.push(me({},this.selectedDocument)),this.closeDocumentModal()}deleteDocument(t){confirm("Delete this document?")&&(this.selectedClient.documents=this.selectedClient.documents?.filter(e=>e.id!==t)||[])}getStatusClass(t){let e=t?.toLowerCase()||"";return e==="active"||e==="paid"||e==="completed"||e==="closed"||e==="signed"?"badge-success":e==="inactive"||e==="overdue"||e==="cancelled"||e==="expired"?"badge-danger":e==="pending"||e==="in progress"||e==="open"||e==="draft"?"badge-warning":"badge-info"}getPriorityClass(t){let e=t?.toLowerCase()||"";return e==="high"||e==="critical"?"badge-danger":e==="medium"?"badge-warning":"badge-info"}getActiveCount(){return this.clients.filter(t=>t.status==="Active").length}getInactiveCount(){return this.clients.filter(t=>t.status==="Inactive").length}getTotalOutstanding(){return this.clients.reduce((t,e)=>t+(e.outstandingBalance||0),0)}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}static \u0275fac=function(e){return new(e||n)(V(cu),V(dt),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-customer-management"]],standalone:!1,decls:80,vars:14,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-users"],[1,"info"],[1,"icon","success"],[1,"fas","fa-user-check"],[1,"icon","warning"],[1,"fas","fa-user-times"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search clients...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],["class","modal-overlay",4,"ngIf"],["class","modal-overlay sub-modal",3,"click",4,"ngIf"],["class","modal-overlay sub-modal",4,"ngIf"],["colspan","6",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"user-cell"],[1,"avatar"],[1,"badge","badge-info"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-eye"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal","modal-large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-tabs"],[1,"tab-btn",3,"click"],[1,"fas","fa-user"],[1,"fas","fa-address-book"],[1,"fas","fa-project-diagram"],[1,"fas","fa-headset"],[1,"fas","fa-folder-open"],[1,"modal-body"],["class","tab-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"tab-content"],[1,"form-row"],[1,"form-group"],["type","text","placeholder","Enter company name",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Contact person name",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","email","placeholder","company@example.com",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","+1 234 567 890",1,"form-control",3,"ngModelChange","ngModel","disabled"],["rows","2","placeholder","Full billing address",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["value","USD"],["value","EUR"],["value","GBP"],["value","CAD"],["value","AUD"],["value","English"],["value","Spanish"],["value","French"],["value","German"],["value","Chinese"],["value",""],["value","Retail"],["value","Wholesale"],["value","VIP"],["value","Corporate"],["value","Enterprise"],["value","Active"],["value","Inactive"],["type","text","placeholder","Account manager name",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"section-header"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","table-container",4,"ngIf"],["class","empty-state-box",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"empty-state-box"],[1,"finance-summary"],[1,"summary-card"],[1,"summary-icon","primary"],[1,"fas","fa-file-invoice-dollar"],[1,"summary-info"],[1,"summary-icon","success"],[1,"fas","fa-check-circle"],[1,"summary-icon","warning"],[1,"fas","fa-exclamation-circle"],["value","Bank Transfer"],["value","Credit Card"],["value","PayPal"],["value","Check"],["value","Cash"],["type","number","placeholder","0.00",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"section-title"],["class","empty-state-small",4,"ngIf"],[1,"table","table-sm"],[1,"empty-state-small"],[1,"fas","fa-tasks"],["class","notes-list",4,"ngIf"],[1,"fas","fa-ticket-alt"],[1,"notes-list"],["class","note-item",4,"ngFor","ngForOf"],[1,"note-item"],[1,"note-header"],[1,"note-author"],[1,"note-date"],["class","btn btn-sm btn-danger btn-icon",3,"click",4,"ngIf"],[1,"note-content"],[1,"btn","btn-sm","btn-danger","btn-icon",3,"click"],[1,"fas","fa-sticky-note"],[1,"fas","fa-file-contract"],[1,"fas","fa-file-alt"],[1,"modal-overlay","sub-modal",3,"click"],[1,"modal","modal-medium",3,"click"],["type","text","placeholder","Full name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Job title",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","+1 234 567 890",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"permissions-grid"],["class","checkbox-label",4,"ngFor","ngForOf"],["type","checkbox",3,"change","checked"],["rows","4","placeholder","Enter note...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"modal-overlay","sub-modal"],["type","text","placeholder","Document title",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Contract"],["value","Proposal"],["value","Agreement"],["value","Invoice"],["value","Report"],["value","Other"],["type","date",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Client Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Clients"),a()()(),o(12,"button",4),x("click",function(){return i.openModal()}),y(13,"i",5),l(14," Add Client "),a()(),o(15,"div",6)(16,"div",7)(17,"div",8),y(18,"i",9),a(),o(19,"div",10)(20,"h3"),l(21),a(),o(22,"p"),l(23,"Total Clients"),a()()(),o(24,"div",7)(25,"div",11),y(26,"i",12),a(),o(27,"div",10)(28,"h3"),l(29),a(),o(30,"p"),l(31,"Active Clients"),a()()(),o(32,"div",7)(33,"div",13),y(34,"i",14),a(),o(35,"div",10)(36,"h3"),l(37),a(),o(38,"p"),l(39,"Inactive Clients"),a()()(),o(40,"div",7)(41,"div",15),y(42,"i",16),a(),o(43,"div",10)(44,"h3"),l(45),a(),o(46,"p"),l(47,"Total Outstanding"),a()()()(),o(48,"div",17)(49,"div",18)(50,"div",19),y(51,"i",20),o(52,"input",21),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(53,"div",22)(54,"table",23)(55,"thead")(56,"tr")(57,"th"),l(58,"Client"),a(),o(59,"th"),l(60,"Email"),a(),o(61,"th"),l(62,"Phone"),a(),o(63,"th"),l(64,"Group"),a(),o(65,"th"),l(66,"Status"),a(),o(67,"th"),l(68,"Actions"),a()()(),o(69,"tbody"),b(70,sQ,3,0,"tr",24)(71,lQ,5,0,"tr",24)(72,cQ,25,7,"tr",25),a()()(),o(73,"div",26)(74,"span"),l(75),a()()()(),b(76,XQ,37,21,"div",27)(77,tX,37,8,"div",28)(78,nX,17,2,"div",28)(79,iX,40,4,"div",29)),e&2&&(c(21),_(i.clients.length),c(8),_(i.getActiveCount()),c(8),_(i.getInactiveCount()),c(8),_(i.formatCurrency(i.getTotalOutstanding())),c(7),M("ngModel",i.searchQuery),c(18),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredClients.length===0),c(),m("ngForOf",i.filteredClients),c(3),Ge("Showing ",i.filteredClients.length," of ",i.clients.length," clients"),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showContactModal),c(),m("ngIf",i.showNoteModal),c(),m("ngIf",i.showDocumentModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,Ee,ht],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.table-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;gap:8px}.modal-large[_ngcontent-%COMP%]{width:90%;max-width:1000px;max-height:90vh;display:flex;flex-direction:column}.modal-medium[_ngcontent-%COMP%]{width:90%;max-width:600px}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:2px solid #e0e0e0;background:#f8f9fa;padding:0 16px;flex-wrap:wrap;gap:4px}.tab-btn[_ngcontent-%COMP%]{padding:12px 16px;border:none;background:transparent;color:#6c757d;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px;border-bottom:3px solid transparent;margin-bottom:-2px}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.tab-btn[_ngcontent-%COMP%]:hover{color:teal;background:#0080800d}.tab-btn.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;background:#fff}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 24px}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:.875rem}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;margin-top:8px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#333}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333;margin:20px 0 12px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.section-title[_ngcontent-%COMP%]:first-child{margin-top:0}.empty-state-box[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:#f8f9fa;border-radius:8px;color:#6c757d}.empty-state-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:12px;opacity:.5}.empty-state-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.empty-state-small[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6c757d;font-style:italic;font-size:.875rem}.finance-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f8f9fa;border-radius:8px;border:1px solid #e0e0e0}.summary-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;color:#fff}.summary-icon.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066)}.summary-icon.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#1e7e34)}.summary-icon.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#e0a800);color:#333}.summary-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#333}.summary-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:.8rem;color:#6c757d}.table-sm[_ngcontent-%COMP%]{font-size:.85rem}.table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-sm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}.notes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.note-item[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:12px 16px;border-left:3px solid #008080}.note-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:8px;font-size:.8rem;color:#6c757d}.note-header[_ngcontent-%COMP%]   .note-author[_ngcontent-%COMP%]{font-weight:500;color:#333}.note-header[_ngcontent-%COMP%]   .note-author[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}.note-header[_ngcontent-%COMP%]   .note-date[_ngcontent-%COMP%]{margin-left:auto}.note-header[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:4px 8px;margin-left:8px}.note-content[_ngcontent-%COMP%]{font-size:.9rem;color:#333;line-height:1.5}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#008080}.permissions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:12px;background:#f8f9fa;border-radius:8px}.sub-modal[_ngcontent-%COMP%]{z-index:1100}.badge-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;border-color:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#138496;border-color:#117a8b}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.modal-large[_ngcontent-%COMP%]{width:95%;max-height:95vh}.modal-tabs[_ngcontent-%COMP%]{padding:0 8px}.tab-btn[_ngcontent-%COMP%]{padding:10px 12px;font-size:.75rem}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}.form-row[_ngcontent-%COMP%], .finance-summary[_ngcontent-%COMP%], .permissions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})};var eC=class n{constructor(t){this.http=t}baseUrl="/api/contracts";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function oX(n,t){n&1&&(o(0,"tr")(1,"td",27),y(2,"i",28),a()())}function aX(n,t){n&1&&(o(0,"tr")(1,"td",27),y(2,"i",9),o(3,"p"),l(4,'No contracts found. Click "New Contract" to create one.'),a()()())}function sX(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),Le(12,"number"),a(),o(13,"td")(14,"span",29),l(15),a()(),o(16,"td")(17,"div",30)(18,"button",31),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(19,"i",32),a(),o(20,"button",33),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteContract(r.id))}),y(21,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.contractNumber||"C-"+e.id),c(2),_(e.title),c(2),_(e.startDate),c(2),_(e.endDate),c(2),D("$",xn(12,7,e.value)),c(3),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function lX(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",36),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),a(),o(5,"button",38),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",39),a()(),o(7,"div",40)(8,"div",41)(9,"label"),l(10,"Title"),a(),o(11,"input",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.title,r)||(s.selectedContract.title=r),f(r)}),a()(),o(12,"div",41)(13,"label"),l(14,"Description"),a(),o(15,"textarea",43),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.description,r)||(s.selectedContract.description=r),f(r)}),a()(),o(16,"div",44)(17,"div",41)(18,"label"),l(19,"Start Date"),a(),o(20,"input",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.startDate,r)||(s.selectedContract.startDate=r),f(r)}),a()(),o(21,"div",41)(22,"label"),l(23,"End Date"),a(),o(24,"input",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.endDate,r)||(s.selectedContract.endDate=r),f(r)}),a()()(),o(25,"div",44)(26,"div",41)(27,"label"),l(28,"Value ($)"),a(),o(29,"input",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.value,r)||(s.selectedContract.value=r),f(r)}),a()(),o(30,"div",41)(31,"label"),l(32,"Status"),a(),o(33,"select",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.status,r)||(s.selectedContract.status=r),f(r)}),o(34,"option",48),l(35,"Active"),a(),o(36,"option",49),l(37,"Pending"),a(),o(38,"option",50),l(39,"Expired"),a(),o(40,"option",51),l(41,"Cancelled"),a()()()(),o(42,"div",41)(43,"label"),l(44,"Payment Terms"),a(),o(45,"input",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedContract.paymentTerms,r)||(s.selectedContract.paymentTerms=r),f(r)}),a()()(),o(46,"div",53)(47,"button",54),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(48,"Cancel"),a(),o(49,"button",4),x("click",function(){g(e);let r=p();return f(r.saveContract())}),l(50),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Contract":"New Contract"),c(7),M("ngModel",e.selectedContract.title),c(4),M("ngModel",e.selectedContract.description),c(5),M("ngModel",e.selectedContract.startDate),c(4),M("ngModel",e.selectedContract.endDate),c(5),M("ngModel",e.selectedContract.value),c(4),M("ngModel",e.selectedContract.status),c(12),M("ngModel",e.selectedContract.paymentTerms),c(5),_(e.editMode?"Update":"Save")}}var tC=class n{constructor(t,e){this.contractService=t;this.customerService=e}contracts=[];customers=[];searchQuery="";showModal=!1;editMode=!1;selectedContract=this.getEmptyContract();loading=!1;dataReady=!1;subscriptionCount=0;expectedSubscriptions=2;ngOnInit(){this.loadData()}incrementAndCheck(){this.subscriptionCount++,this.subscriptionCount>=this.expectedSubscriptions&&(this.loading=!1,this.dataReady=!0)}loadData(){this.loading=!1,this.dataReady=!0,this.subscriptionCount=0,this.contractService.getAll().subscribe({next:t=>{this.contracts=t,this.incrementAndCheck()},error:t=>{console.error("Error loading contracts",t),this.incrementAndCheck()}}),this.customerService.getAll().subscribe({next:t=>{this.customers=t,this.incrementAndCheck()},error:t=>{console.error("Error loading customers",t),this.incrementAndCheck()}})}get filteredContracts(){return this.searchQuery?this.contracts.filter(t=>t.contractNumber?.toLowerCase().includes(this.searchQuery.toLowerCase())||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())):this.contracts}getEmptyContract(){return{title:"",description:"",startDate:"",endDate:"",value:0,status:"Active",paymentTerms:""}}openModal(t){t?(this.editMode=!0,this.selectedContract=me({},t)):(this.editMode=!1,this.selectedContract=this.getEmptyContract()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedContract=this.getEmptyContract()}saveContract(){this.editMode&&this.selectedContract.id?this.contractService.update(this.selectedContract.id,this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error updating contract",t)}):this.contractService.create(this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error creating contract",t)})}deleteContract(t){confirm("Are you sure you want to delete this contract?")&&this.contractService.delete(t).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting contract",e)})}getStatusClass(t){return{Active:"badge-success",Pending:"badge-warning",Completed:"badge-info",Expired:"badge-danger",Cancelled:"badge-secondary"}[t]||"badge-info"}getTotalValue(){return this.contracts.reduce((t,e)=>t+(e.value||0),0)}getActiveCount(){return this.contracts.filter(t=>t.status==="Active").length}getPendingCount(){return this.contracts.filter(t=>t.status==="Pending").length}static \u0275fac=function(e){return new(e||n)(V(eC),V(cu))};static \u0275cmp=_e({type:n,selectors:[["app-contract-management"]],standalone:!1,decls:77,vars:11,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-contract"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search contracts...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Contract title",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Contract description",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Pending"],["value","Expired"],["value","Cancelled"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Contracts"),a()()(),o(12,"button",4),x("click",function(){return i.openModal()}),y(13,"i",5),l(14," New Contract "),a()(),o(15,"div",6)(16,"div",7)(17,"div",8),y(18,"i",9),a(),o(19,"div",10)(20,"h3"),l(21),a(),o(22,"p"),l(23,"Total Contracts"),a()()(),o(24,"div",7)(25,"div",11),y(26,"i",12),a(),o(27,"div",10)(28,"h3"),l(29),a(),o(30,"p"),l(31,"Active Contracts"),a()()(),o(32,"div",7)(33,"div",13),y(34,"i",14),a(),o(35,"div",10)(36,"h3"),l(37),a(),o(38,"p"),l(39,"Pending"),a()()(),o(40,"div",7)(41,"div",15),y(42,"i",16),a(),o(43,"div",10)(44,"h3"),l(45),Le(46,"number"),a(),o(47,"p"),l(48,"Total Value"),a()()()(),o(49,"div",17)(50,"div",18)(51,"div",19),y(52,"i",20),o(53,"input",21),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(54,"div",22)(55,"table",23)(56,"thead")(57,"tr")(58,"th"),l(59,"Contract #"),a(),o(60,"th"),l(61,"Title"),a(),o(62,"th"),l(63,"Start Date"),a(),o(64,"th"),l(65,"End Date"),a(),o(66,"th"),l(67,"Value"),a(),o(68,"th"),l(69,"Status"),a(),o(70,"th"),l(71,"Actions"),a()()(),o(72,"tbody"),b(73,oX,3,0,"tr",24)(74,aX,5,0,"tr",24)(75,sX,22,9,"tr",25),a()()()()(),b(76,lX,51,9,"div",26)),e&2&&(c(21),_(i.contracts.length),c(8),_(i.getActiveCount()),c(8),_(i.getPendingCount()),c(8),D("$",xn(46,9,i.getTotalValue())),c(8),M("ngModel",i.searchQuery),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredContracts.length===0),c(),m("ngForOf",i.filteredContracts),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht,yn],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}}"]})};var qa=class n{constructor(t){this.http=t}baseUrl="/api/inventory/groups";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}canDeactivate(t){return this.http.get(`${this.baseUrl}/${t}/can-deactivate`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deactivate(t){return this.http.put(`${this.baseUrl}/${t}/deactivate`,{})}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function cX(n,t){n&1&&(o(0,"tr")(1,"td",16),y(2,"i",17),a()())}function dX(n,t){n&1&&(o(0,"tr")(1,"td",16),y(2,"i",18),o(3,"p"),l(4,'No groups found. Click "Add Group" to create one.'),a()()())}function pX(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",19),l(10),a()(),o(11,"td")(12,"div",20)(13,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(14,"i",22),a(),o(15,"button",23),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteGroup(r.id))}),y(16,"i",24),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.code),c(2),_(e.name),c(2),_(e.description||"-"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function mX(n,t){if(n&1&&(o(0,"div",45),l(1),a()),n&2){let e=p(2);c(),D(" ",e.errorMessage," ")}}function uX(n,t){n&1&&(o(0,"small",46),l(1,"Unique identifier for this group"),a())}function gX(n,t){if(n&1&&(o(0,"small",47),l(1),a()),n&2){let e=p(2);c(),D(" Cannot set to Inactive: ",e.canDeactivateInfo.itemCount," item(s) linked to this group ")}}function fX(n,t){if(n&1){let e=F();o(0,"div",25)(1,"div",26),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",27)(3,"h2"),l(4),a(),o(5,"button",28),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",29),a()(),o(7,"div",30),b(8,mX,2,1,"div",31),o(9,"div",32)(10,"label"),l(11,"Group Code "),o(12,"span",33),l(13,"*"),a()(),o(14,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGroup.code,r)||(s.selectedGroup.code=r),f(r)}),a(),b(15,uX,2,0,"small",35),a(),o(16,"div",32)(17,"label"),l(18,"Group Name "),o(19,"span",33),l(20,"*"),a()(),o(21,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGroup.name,r)||(s.selectedGroup.name=r),f(r)}),a()(),o(22,"div",32)(23,"label"),l(24,"Description"),a(),o(25,"textarea",37),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGroup.description,r)||(s.selectedGroup.description=r),f(r)}),a()(),o(26,"div",32)(27,"label"),l(28,"Status"),a(),o(29,"select",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGroup.status,r)||(s.selectedGroup.status=r),f(r)}),o(30,"option",39),l(31,"Active"),a(),o(32,"option",40),l(33,"Inactive"),a()(),b(34,gX,2,1,"small",41),a()(),o(35,"div",42)(36,"button",43),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(37,"Cancel"),a(),o(38,"button",44),x("click",function(){g(e);let r=p();return f(r.saveGroup())}),l(39),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Group":"Add Group"),c(4),m("ngIf",e.errorMessage),c(6),M("ngModel",e.selectedGroup.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),M("ngModel",e.selectedGroup.name),c(4),M("ngModel",e.selectedGroup.description),c(4),M("ngModel",e.selectedGroup.status),c(3),m("disabled",!e.canChangeToInactive()),c(2),m("ngIf",e.editMode&&e.canDeactivateInfo&&!e.canDeactivateInfo.canDeactivate),c(4),m("disabled",!e.isFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var nC=class n{constructor(t,e,i,r){this.groupService=t;this.settingsService=e;this.notificationService=i;this.cdr=r}groups=[];searchQuery="";showModal=!1;editMode=!1;selectedGroup=this.getEmptyGroup();loading=!1;errorMessage="";canDeactivateInfo=null;ngOnInit(){this.loadGroups()}loadGroups(){this.loading=!0,this.groupService.getAll().subscribe({next:t=>{this.groups=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading groups",t),this.loading=!1,this.cdr.detectChanges()}})}get filteredGroups(){return this.searchQuery?this.groups.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.groups}getEmptyGroup(){return{code:"",name:"",description:"",status:"Active"}}openModal(t){this.errorMessage="",this.canDeactivateInfo=null,t?(this.editMode=!0,this.selectedGroup=me({},t),this.checkCanDeactivate(t.id)):(this.editMode=!1,this.selectedGroup=this.getEmptyGroup(),this.generateGroupCode()),this.showModal=!0}generateGroupCode(){this.settingsService.previewPrefixId("group").subscribe({next:t=>{this.selectedGroup.code=t},error:t=>console.error("Error generating group code",t)})}checkCanDeactivate(t){this.groupService.canDeactivate(t).subscribe({next:e=>{this.canDeactivateInfo=e},error:e=>console.error("Error checking deactivate status",e)})}closeModal(){this.showModal=!1,this.selectedGroup=this.getEmptyGroup(),this.errorMessage="",this.canDeactivateInfo=null}isFormValid(){return this.selectedGroup.code.trim()!==""&&this.selectedGroup.name.trim()!==""}canChangeToInactive(){return!this.editMode||this.selectedGroup.status==="Active"||this.canDeactivateInfo===null?!0:this.canDeactivateInfo.canDeactivate}saveGroup(){if(!this.isFormValid()){this.notificationService.error("Group Code and Name are required");return}if(this.editMode&&this.selectedGroup.status==="Inactive"&&this.canDeactivateInfo&&!this.canDeactivateInfo.canDeactivate){this.notificationService.error(`Cannot deactivate: ${this.canDeactivateInfo.itemCount} item(s) are linked to this group`);return}this.editMode&&this.selectedGroup.id?this.groupService.update(this.selectedGroup.id,this.selectedGroup).subscribe({next:()=>{this.notificationService.success("Group updated successfully"),this.loadGroups(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating group")}}):this.groupService.create(this.selectedGroup).subscribe({next:()=>{this.notificationService.success("Group created successfully"),this.loadGroups(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating group")}})}deleteGroup(t){this.groupService.canDeactivate(t).subscribe({next:e=>{if(!e.canDeactivate){this.notificationService.error(`Cannot delete group: ${e.itemCount} item(s) are linked to this group. Please reassign or delete those items first.`);return}confirm("Are you sure you want to delete this group?")&&this.groupService.delete(t).subscribe({next:()=>{this.notificationService.success("Group deleted successfully"),this.loadGroups()},error:i=>{this.notificationService.error(i.error?.error||"Error deleting group")}})},error:e=>console.error("Error checking delete status",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(V(qa),V(Zn),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-group-master"]],standalone:!1,decls:43,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search groups...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-layer-group"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., GRP-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","Enter group name",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive",3,"disabled"],["class","form-hint warning",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],[1,"form-hint","warning"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Group Master"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Groups"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," Add Group "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Group Code"),a(),o(30,"th"),l(31,"Group Name"),a(),o(32,"th"),l(33,"Description"),a(),o(34,"th"),l(35,"Status"),a(),o(36,"th"),l(37,"Actions"),a()()(),o(38,"tbody"),b(39,cX,3,0,"tr",13)(40,dX,5,0,"tr",13)(41,pX,17,5,"tr",14),a()()()()(),b(42,fX,40,12,"div",15)),e&2&&(c(23),M("ngModel",i.searchQuery),c(16),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredGroups.length===0),c(),m("ngForOf",i.filteredGroups),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}"]})};var ec=class n{constructor(t){this.http=t}baseUrl="/api/inventory/units";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getBaseUnits(){return this.http.get(`${this.baseUrl}/base`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var yo=class n{constructor(t){this.http=t}baseUrl="/api/inventory/suppliers";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(this.baseUrl).pipe(ii(t=>t.filter(e=>e.status==="Active")))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function hX(n,t){n&1&&(o(0,"tr")(1,"td",27),y(2,"i",28),a()())}function _X(n,t){n&1&&(o(0,"tr")(1,"td",27),y(2,"i",9),o(3,"p"),l(4,'No items found. Click "Add Item" to create one.'),a()()())}function vX(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",29),l(14),a()(),o(15,"td"),l(16),a(),o(17,"td")(18,"span",29),l(19),a()(),o(20,"td")(21,"div",30)(22,"button",31),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(23,"i",32),a(),o(24,"button",33),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteItem(r.id))}),y(25,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.code),c(2),_(e.name),c(2),_((e.group==null?null:e.group.name)||"-"),c(2),_((e.unitOfMeasure==null?null:e.unitOfMeasure.name)||"-"),c(2),_(i.formatCurrency(e.unitCost)),c(2),m("ngClass",e.taxable?"badge-success":"badge-secondary"),c(),D(" ",e.taxable?"Yes":"No"," "),c(2),_(e.currentStock),c(2),m("ngClass",i.getStockClass(e)),c(),_(i.getStockStatus(e))}}function xX(n,t){if(n&1&&(o(0,"div",60),l(1),a()),n&2){let e=p(2);c(),D(" ",e.errorMessage," ")}}function yX(n,t){if(n&1&&(o(0,"div",44)(1,"label"),l(2,"Item Code"),a(),y(3,"input",61),o(4,"small",55),l(5,"System generated - cannot be changed"),a()()),n&2){let e=p(2);c(3),m("value",e.selectedItem.code)}}function CX(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function bX(n,t){if(n&1&&(o(0,"small",62),l(1),a()),n&2){let e=p(2);c(),_(e.nameValidationMessage)}}function MX(n,t){n&1&&(o(0,"small",55),l(1,"Must be unique within the selected group"),a())}function SX(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.name," (",e.code,")")}}function PX(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function wX(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44)(2,"label"),l(3,"Status"),a(),o(4,"select",53),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedItem.status,r)||(s.selectedItem.status=r),f(r)}),o(5,"option",63),l(6,"Active"),a(),o(7,"option",64),l(8,"Inactive"),a()()(),o(9,"div",44)(10,"label"),l(11,"Reorder Level"),a(),o(12,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedItem.reorderLevel,r)||(s.selectedItem.reorderLevel=r),f(r)}),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.selectedItem.status),c(8),M("ngModel",e.selectedItem.reorderLevel)}}function EX(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",36),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),a(),o(5,"button",38),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",39),a()(),o(7,"div",40),b(8,xX,2,1,"div",41)(9,yX,6,1,"div",42),o(10,"div",43)(11,"div",44)(12,"label"),l(13,"Group "),o(14,"span",45),l(15,"*"),a()(),o(16,"select",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGroupId,r)||(s.selectedGroupId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.validateItemName())}),o(17,"option",47),l(18,"Select a group..."),a(),b(19,CX,2,2,"option",48),a()(),o(20,"div",44)(21,"label"),l(22,"Item Name "),o(23,"span",45),l(24,"*"),a()(),o(25,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedItem.name,r)||(s.selectedItem.name=r),f(r)}),x("blur",function(){g(e);let r=p();return f(r.validateItemName())}),a(),b(26,bX,2,1,"small",50)(27,MX,2,0,"small",51),a()(),o(28,"div",44)(29,"label"),l(30,"Item Description"),a(),o(31,"textarea",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedItem.description,r)||(s.selectedItem.description=r),f(r)}),a()(),o(32,"div",43)(33,"div",44)(34,"label"),l(35,"Units of Measure / Sold As "),o(36,"span",45),l(37,"*"),a()(),o(38,"select",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedUomId,r)||(s.selectedUomId=r),f(r)}),o(39,"option",47),l(40,"Select unit..."),a(),b(41,SX,2,3,"option",48),a()(),o(42,"div",44)(43,"label"),l(44,"Unit Cost"),a(),o(45,"input",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedItem.unitCost,r)||(s.selectedItem.unitCost=r),f(r)}),a()()(),o(46,"div",43)(47,"div",44)(48,"label"),l(49,"Supplier"),a(),o(50,"select",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplierId,r)||(s.selectedSupplierId=r),f(r)}),o(51,"option",47),l(52,"No supplier / Select later..."),a(),b(53,PX,2,2,"option",48),a()(),o(54,"div",44)(55,"label"),l(56,"Taxable"),a(),o(57,"select",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedItem.taxable,r)||(s.selectedItem.taxable=r),f(r)}),o(58,"option",47),l(59,"Yes"),a(),o(60,"option",47),l(61,"No"),a()(),o(62,"small",55),l(63,"Defaults to Yes for new items"),a()()(),b(64,wX,13,2,"div",56),a(),o(65,"div",57)(66,"button",58),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(67,"Cancel"),a(),o(68,"button",59),x("click",function(){g(e);let r=p();return f(r.saveItem())}),l(69),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Item":"Add Item"),c(4),m("ngIf",e.errorMessage),c(),m("ngIf",e.editMode),c(7),M("ngModel",e.selectedGroupId),c(),m("ngValue",null),c(2),m("ngForOf",e.groups),c(6),ie("is-invalid",e.nameValidationMessage),M("ngModel",e.selectedItem.name),c(),m("ngIf",e.nameValidationMessage),c(),m("ngIf",!e.nameValidationMessage),c(4),M("ngModel",e.selectedItem.description),c(7),M("ngModel",e.selectedUomId),c(),m("ngValue",null),c(2),m("ngForOf",e.units),c(4),M("ngModel",e.selectedItem.unitCost),c(5),M("ngModel",e.selectedSupplierId),c(),m("ngValue",null),c(2),m("ngForOf",e.suppliers),c(4),M("ngModel",e.selectedItem.taxable),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(4),m("ngIf",e.editMode),c(4),m("disabled",!e.isFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var rC=class n{constructor(t,e,i,r,s,d,u){this.itemService=t;this.itemGroupService=e;this.unitOfMeasureService=i;this.supplierService=r;this.settingsService=s;this.notificationService=d;this.cdr=u}items=[];groups=[];units=[];suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedItem=this.getEmptyItem();selectedGroupId=null;selectedUomId=null;selectedSupplierId=null;loading=!1;dataReady=!1;errorMessage="";nameValidationMessage="";subscriptionCount=0;expectedSubscriptions=4;ngOnInit(){this.loadData()}incrementAndCheck(){this.subscriptionCount++,this.subscriptionCount>=this.expectedSubscriptions&&(this.loading=!1,this.dataReady=!0,this.cdr.detectChanges())}loadData(){this.loading=!1,this.dataReady=!0,this.subscriptionCount=0,this.itemService.getAll().subscribe({next:t=>{this.items=t,this.incrementAndCheck()},error:t=>{console.error("Error loading items",t),this.incrementAndCheck()}}),this.itemGroupService.getActive().subscribe({next:t=>{this.groups=t,this.incrementAndCheck()},error:t=>{console.error("Error loading groups",t),this.incrementAndCheck()}}),this.unitOfMeasureService.getActive().subscribe({next:t=>{this.units=t,this.incrementAndCheck()},error:t=>{console.error("Error loading units",t),this.incrementAndCheck()}}),this.supplierService.getAll().subscribe({next:t=>{this.suppliers=t.filter(e=>e.status==="Active"),this.incrementAndCheck()},error:t=>{console.error("Error loading suppliers",t),this.incrementAndCheck()}})}get filteredItems(){if(!this.searchQuery)return this.items;let t=this.searchQuery.toLowerCase();return this.items.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||(e.group?.name||"").toLowerCase().includes(t))}getEmptyItem(){return{code:"",name:"",description:"",taxable:!0,currentStock:0,status:"Active"}}openModal(t){this.errorMessage="",this.nameValidationMessage="",t?(this.editMode=!0,this.selectedItem=me({},t),this.selectedGroupId=t.group?.id||null,this.selectedUomId=t.unitOfMeasure?.id||null,this.selectedSupplierId=t.supplier?.id||null):(this.editMode=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.generateItemCode()),this.showModal=!0}generateItemCode(){this.settingsService.previewPrefixId("item").subscribe({next:t=>{this.selectedItem.code=t},error:t=>console.error("Error generating item code",t)})}closeModal(){this.showModal=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.errorMessage="",this.nameValidationMessage=""}validateItemName(){this.nameValidationMessage=""}isFormValid(){return this.selectedItem.name.trim()!==""&&this.selectedGroupId!==null&&this.selectedUomId!==null&&this.nameValidationMessage===""}saveItem(){if(!this.isFormValid()){this.notificationService.error("Please fill in all required fields");return}let t=Tt(me({},this.selectedItem),{group:this.groups.find(e=>e.id===this.selectedGroupId),unitOfMeasure:this.units.find(e=>e.id===this.selectedUomId),supplier:this.selectedSupplierId?this.suppliers.find(e=>e.id===this.selectedSupplierId):void 0});this.editMode&&this.selectedItem.id?this.itemService.update(this.selectedItem.id,t).subscribe({next:()=>{this.notificationService.success("Item updated successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error updating item")}}):this.itemService.create(t).subscribe({next:()=>{this.notificationService.success("Item created successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error(e.error?.error||"Error creating item")}})}deleteItem(t){confirm("Are you sure you want to delete this item?")&&this.itemService.delete(t).subscribe({next:()=>{this.notificationService.success("Item deleted successfully"),this.loadData()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting item")}})}getStockClass(t){return t.currentStock<=0?"badge-danger":t.reorderLevel&&t.currentStock<=t.reorderLevel?"badge-warning":"badge-success"}getStockStatus(t){return t.currentStock<=0?"Out of Stock":t.reorderLevel&&t.currentStock<=t.reorderLevel?"Low Stock":"In Stock"}getInStockCount(){return this.items.filter(t=>!t.reorderLevel||t.currentStock>t.reorderLevel).length}getLowStockCount(){return this.items.filter(t=>t.reorderLevel&&t.currentStock<=t.reorderLevel&&t.currentStock>0).length}getOutOfStockCount(){return this.items.filter(t=>t.currentStock<=0).length}formatCurrency(t){return t==null?"-":"$"+t.toFixed(2)}static \u0275fac=function(e){return new(e||n)(V(_i),V(qa),V(ec),V(yo),V(Zn),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-item-master"]],standalone:!1,decls:84,vars:9,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-box"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-exclamation-triangle"],[1,"icon","danger"],[1,"fas","fa-times-circle"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search items...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","9",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal","modal-large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"grid-2"],[1,"form-group"],[1,"required"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter item name",1,"form-control",3,"ngModelChange","blur","ngModel"],["class","form-hint error",4,"ngIf"],["class","form-hint",4,"ngIf"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0.00","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-hint"],["class","grid-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],["type","text","readonly","",1,"form-control",3,"value"],[1,"form-hint","error"],["value","Active"],["value","Inactive"],["type","number","placeholder","Optional","min","0",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Item Master"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Items"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," Add Item "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"h3"),l(25),a(),o(26,"p"),l(27,"Total Items"),a()()(),o(28,"div",7)(29,"div",11),y(30,"i",12),a(),o(31,"div",10)(32,"h3"),l(33),a(),o(34,"p"),l(35,"In Stock"),a()()(),o(36,"div",7)(37,"div",13),y(38,"i",14),a(),o(39,"div",10)(40,"h3"),l(41),a(),o(42,"p"),l(43,"Low Stock"),a()()(),o(44,"div",7)(45,"div",15),y(46,"i",16),a(),o(47,"div",10)(48,"h3"),l(49),a(),o(50,"p"),l(51,"Out of Stock"),a()()()(),o(52,"div",17)(53,"div",18)(54,"div",19),y(55,"i",20),o(56,"input",21),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(57,"div",22)(58,"table",23)(59,"thead")(60,"tr")(61,"th"),l(62,"Item Code"),a(),o(63,"th"),l(64,"Item Name"),a(),o(65,"th"),l(66,"Group"),a(),o(67,"th"),l(68,"UOM"),a(),o(69,"th"),l(70,"Unit Cost"),a(),o(71,"th"),l(72,"Taxable"),a(),o(73,"th"),l(74,"Stock"),a(),o(75,"th"),l(76,"Status"),a(),o(77,"th"),l(78,"Actions"),a()()(),o(79,"tbody"),b(80,hX,3,0,"tr",24)(81,_X,5,0,"tr",24)(82,vX,26,10,"tr",25),a()()()()(),b(83,EX,70,25,"div",26)),e&2&&(c(25),_(i.items.length),c(8),_(i.getInStockCount()),c(8),_(i.getLowStockCount()),c(8),_(i.getOutOfStockCount()),c(7),M("ngModel",i.searchQuery),c(24),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredItems.length===0),c(),m("ngForOf",i.filteredItems),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}"]})};function OX(n,t){n&1&&(o(0,"tr")(1,"td",12),y(2,"i",13),a()())}function TX(n,t){n&1&&(o(0,"tr")(1,"td",12),y(2,"i",14),o(3,"p"),l(4,'No units found. Click "Add Unit" to create one.'),a()()())}function kX(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",15),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",15),l(17),a()(),o(18,"td")(19,"div",16)(20,"button",17),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(21,"i",18),a(),o(22,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteUnit(r.id))}),y(23,"i",20),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.code),c(2),_(e.name),c(2),_(e.symbol||"-"),c(2),m("ngClass",e.baseUom?"badge-info":"badge-primary"),c(),D(" ",i.getUnitType(e)," "),c(2),_(e.conversionFactor||1),c(2),_((e.baseUom==null?null:e.baseUom.name)||"-"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function IX(n,t){if(n&1&&(o(0,"div",45),l(1),a()),n&2){let e=p(2);c(),D(" ",e.errorMessage," ")}}function DX(n,t){n&1&&(o(0,"small",37),l(1,"Unique identifier for this unit"),a())}function AX(n,t){if(n&1&&(o(0,"option",46),l(1),a()),n&2){let e=t.$implicit,i=p(2);m("ngValue",e.id)("disabled",i.editMode&&e.id===i.selectedUnit.id),c(),Ge(" ",e.name," (",e.code,") ")}}function RX(n,t){if(n&1){let e=F();o(0,"div",28)(1,"label"),l(2,"Conversion Factor"),a(),o(3,"input",47),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedUnit.conversionFactor,r)||(s.selectedUnit.conversionFactor=r),f(r)}),a(),o(4,"small",37),l(5,"How many of this unit equals 1 base unit"),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.selectedUnit.conversionFactor)}}function FX(n,t){n&1&&y(0,"i",13)}function NX(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",25),a()(),o(7,"div",26),b(8,IX,2,1,"div",27),o(9,"div",28)(10,"label"),l(11,"UOM Code "),o(12,"span",29),l(13,"*"),a()(),o(14,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedUnit.code,r)||(s.selectedUnit.code=r),f(r)}),a(),b(15,DX,2,0,"small",31),a(),o(16,"div",28)(17,"label"),l(18,"Name "),o(19,"span",29),l(20,"*"),a()(),o(21,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedUnit.name,r)||(s.selectedUnit.name=r),f(r)}),a()(),o(22,"div",28)(23,"label"),l(24,"Symbol"),a(),o(25,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedUnit.symbol,r)||(s.selectedUnit.symbol=r),f(r)}),a()(),o(26,"div",28)(27,"label"),l(28,"Base UOM"),a(),o(29,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBaseUomId,r)||(s.selectedBaseUomId=r),f(r)}),o(30,"option",35),l(31,"None (this is a base unit)"),a(),b(32,AX,2,4,"option",36),a(),o(33,"small",37),l(34,"Select if this is an alternate unit that converts to a base unit"),a()(),b(35,RX,6,1,"div",38),o(36,"div",28)(37,"label"),l(38,"Status"),a(),o(39,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedUnit.status,r)||(s.selectedUnit.status=r),f(r)}),o(40,"option",39),l(41,"Active"),a(),o(42,"option",40),l(43,"Inactive"),a()()()(),o(44,"div",41)(45,"button",42),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(46,"Cancel"),a(),o(47,"button",43),x("click",function(){g(e);let r=p();return f(r.saveUnit())}),b(48,FX,1,0,"i",44),l(49),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Unit":"Add Unit"),c(4),m("ngIf",e.errorMessage),c(6),M("ngModel",e.selectedUnit.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),M("ngModel",e.selectedUnit.name),c(4),M("ngModel",e.selectedUnit.symbol),c(4),M("ngModel",e.selectedBaseUomId),c(),m("ngValue",null),c(2),m("ngForOf",e.baseUnits),c(3),m("ngIf",e.selectedBaseUomId),c(4),M("ngModel",e.selectedUnit.status),c(6),m("disabled",e.saving),c(2),m("disabled",e.saving||!e.isFormValid()),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.editMode?"Update":"Save"," ")}}var oC=class n{constructor(t,e,i,r){this.unitService=t;this.settingsService=e;this.notificationService=i;this.cdr=r}units=[];baseUnits=[];showModal=!1;editMode=!1;saving=!1;selectedUnit=this.getEmptyUnit();selectedBaseUomId=null;loading=!1;errorMessage="";ngOnInit(){this.loadUnits()}loadUnits(){this.loading=!0,this.unitService.getAll().subscribe({next:t=>{this.units=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading units",t),this.loading=!1,this.cdr.detectChanges()}}),this.unitService.getBaseUnits().subscribe({next:t=>{this.baseUnits=t,this.cdr.detectChanges()},error:t=>console.error("Error loading base units",t)})}getEmptyUnit(){return{code:"",name:"",symbol:"",conversionFactor:1,status:"Active"}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedUnit=me({},t),this.selectedBaseUomId=t.baseUom?.id||null):(this.editMode=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.generateUnitCode()),this.showModal=!0}generateUnitCode(){this.settingsService.previewPrefixId("unit").subscribe({next:t=>{this.selectedUnit.code=t},error:t=>console.error("Error generating unit code",t)})}closeModal(){this.showModal=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.errorMessage=""}isFormValid(){return this.selectedUnit.code.trim()!==""&&this.selectedUnit.name.trim()!==""}isBaseUnit(){return this.selectedBaseUomId===null}saveUnit(){if(this.saving)return;if(!this.isFormValid()){this.notificationService.error("UOM Code and Name are required");return}this.saving=!0;let t=Tt(me({},this.selectedUnit),{baseUom:this.selectedBaseUomId?this.baseUnits.find(e=>e.id===this.selectedBaseUomId):void 0});this.editMode&&this.selectedUnit.id?this.unitService.update(this.selectedUnit.id,t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Unit of measure updated successfully"),this.loadUnits(),this.closeModal()},error:e=>{this.saving=!1,this.notificationService.error(e.error?.error||"Error updating unit")}}):this.unitService.create(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Unit of measure created successfully"),this.loadUnits(),this.closeModal()},error:e=>{this.saving=!1,this.notificationService.error(e.error?.error||"Error creating unit")}})}deleteUnit(t){confirm("Are you sure you want to delete this unit?")&&this.unitService.delete(t).subscribe({next:()=>{this.notificationService.success("Unit of measure deleted successfully"),this.loadUnits()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting unit")}})}getUnitType(t){return t.baseUom?"Alternate":"Base"}static \u0275fac=function(e){return new(e||n)(V(ec),V(Zn),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-units-of-measure"]],standalone:!1,decls:45,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-ruler"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., PCS, KG, LTR",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Pieces, Kilograms, Liters",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., pcs, kg, L (optional)",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-hint"],["class","form-group",4,"ngIf"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger"],[3,"ngValue","disabled"],["type","number","placeholder","1","min","0.000001","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Units of Measure"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Units"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," Add Unit "),a()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"UOM Code"),a(),o(26,"th"),l(27,"Name"),a(),o(28,"th"),l(29,"Symbol"),a(),o(30,"th"),l(31,"Type"),a(),o(32,"th"),l(33,"Conversion Factor"),a(),o(34,"th"),l(35,"Base UOM"),a(),o(36,"th"),l(37,"Status"),a(),o(38,"th"),l(39,"Actions"),a()()(),o(40,"tbody"),b(41,OX,3,0,"tr",9)(42,TX,5,0,"tr",9)(43,kX,24,9,"tr",10),a()()()()(),b(44,NX,50,16,"div",11)),e&2&&(c(41),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.units.length===0),c(),m("ngForOf",i.units),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var Xi=class n{constructor(t){this.http=t}warehouseUrl="/api/inventory/warehouses";binUrl="/api/inventory/bins";getAll(){return this.http.get(this.warehouseUrl)}getAllWarehouses(){return this.http.get(this.warehouseUrl)}getActiveWarehouses(){return this.http.get(`${this.warehouseUrl}/active`)}getWarehouseById(t){return this.http.get(`${this.warehouseUrl}/${t}`)}createWarehouse(t){return this.http.post(this.warehouseUrl,t)}updateWarehouse(t,e){return this.http.put(`${this.warehouseUrl}/${t}`,e)}deleteWarehouse(t){return this.http.delete(`${this.warehouseUrl}/${t}`)}getAllBins(){return this.http.get(this.binUrl)}getBinsByWarehouse(t){return this.http.get(`${this.binUrl}/warehouse/${t}`)}getBinById(t){return this.http.get(`${this.binUrl}/${t}`)}createBin(t){return this.http.post(this.binUrl,t)}updateBin(t,e){return this.http.put(`${this.binUrl}/${t}`,e)}deleteBin(t){return this.http.delete(`${this.binUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function LX(n,t){n&1&&(o(0,"div",11),y(1,"i",12),o(2,"p"),l(3,"Loading warehouses..."),a()())}function VX(n,t){n&1&&(o(0,"div",11),y(1,"i",13),o(2,"p"),l(3,'No warehouses found. Click "Add Warehouse" to create one.'),a()())}function BX(n,t){n&1&&(o(0,"div",31)(1,"p"),l(2,"No bins in this warehouse. Bins are optional for organizing items within a warehouse."),a()())}function UX(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(2).$implicit;c(),D("Zone: ",e.zone)}}function jX(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(2).$implicit;c(),D(" | Aisle: ",e.aisle)}}function WX(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(2).$implicit;c(),D(" | Rack: ",e.rack)}}function zX(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(2).$implicit;c(),D(" | Shelf: ",e.shelf)}}function qX(n,t){if(n&1&&(o(0,"div",41)(1,"small"),b(2,UX,2,1,"span",42)(3,jX,2,1,"span",42)(4,WX,2,1,"span",42)(5,zX,2,1,"span",42),a()()),n&2){let e=p().$implicit;c(2),m("ngIf",e.zone),c(),m("ngIf",e.aisle),c(),m("ngIf",e.rack),c(),m("ngIf",e.shelf)}}function HX(n,t){if(n&1){let e=F();o(0,"div",32)(1,"div",33)(2,"strong"),l(3),a(),o(4,"div",34)(5,"button",35),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.editBin(r))}),y(6,"i",26),a(),o(7,"button",36),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteBin(r.id))}),y(8,"i",37),a()()(),o(9,"p",38),l(10),a(),b(11,qX,6,4,"div",39),o(12,"span",40),l(13),a()()}if(n&2){let e=t.$implicit;c(3),_(e.code),c(7),_(e.name),c(),m("ngIf",e.zone||e.aisle||e.rack||e.shelf),c(),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function GX(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24)(2,"h4"),l(3),a(),o(4,"div",4)(5,"button",25),x("click",function(r){g(e);let s=p().$implicit;return p().openModal("warehouse",s),f(r.stopPropagation())}),y(6,"i",26),l(7," Edit Warehouse "),a(),o(8,"button",27),x("click",function(r){g(e);let s=p().$implicit;return p().openBinModal(s.id),f(r.stopPropagation())}),y(9,"i",6),l(10," Add Bin "),a()()(),o(11,"div",28),b(12,BX,3,0,"div",29)(13,HX,14,5,"div",30),a()()}if(n&2){let e=p().$implicit,i=p();c(3),D("Bins (",i.getBinsForWarehouse(e.id).length,")"),c(9),m("ngIf",i.getBinsForWarehouse(e.id).length===0),c(),m("ngForOf",i.getBinsForWarehouse(e.id))}}function $X(n,t){if(n&1){let e=F();o(0,"div",14)(1,"div",15),x("click",function(){let r=g(e).$implicit,s=p();return f(s.toggleWarehouse(r.id))}),o(2,"div",16)(3,"div",17),y(4,"i",13),a(),o(5,"div",18)(6,"h3"),l(7),a(),o(8,"p")(9,"strong"),l(10),a(),l(11),a()()(),o(12,"div",19)(13,"span",20),l(14),a(),y(15,"i",21),a()(),b(16,GX,14,3,"div",22),a()}if(n&2){let e=t.$implicit,i=p();c(7),_(e.name),c(3),_(e.code),c(),D(" - ",e.address||"No address"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," "),c(),ie("rotated",i.expandedWarehouse===e.id),c(),m("ngIf",i.expandedWarehouse===e.id)}}function YX(n,t){if(n&1&&(o(0,"div",62),l(1),a()),n&2){let e=p(2);c(),D(" ",e.errorMessage," ")}}function JX(n,t){n&1&&(o(0,"small",63),l(1,"Unique identifier for this warehouse"),a())}function KX(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",47),a()(),o(7,"div",48),b(8,YX,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Warehouse Code "),o(12,"span",51),l(13,"*"),a()(),o(14,"input",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouse.code,r)||(s.selectedWarehouse.code=r),f(r)}),a(),b(15,JX,2,0,"small",53),a(),o(16,"div",50)(17,"label"),l(18,"Warehouse Name "),o(19,"span",51),l(20,"*"),a()(),o(21,"input",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouse.name,r)||(s.selectedWarehouse.name=r),f(r)}),a()(),o(22,"div",50)(23,"label"),l(24,"Address"),a(),o(25,"textarea",55),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouse.address,r)||(s.selectedWarehouse.address=r),f(r)}),a()(),o(26,"div",50)(27,"label"),l(28,"Status"),a(),o(29,"select",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouse.status,r)||(s.selectedWarehouse.status=r),f(r)}),o(30,"option",57),l(31,"Active"),a(),o(32,"option",58),l(33,"Inactive"),a()()()(),o(34,"div",59)(35,"button",60),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(36,"Cancel"),a(),o(37,"button",61),x("click",function(){g(e);let r=p();return f(r.saveWarehouse())}),l(38),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Warehouse":"Add Warehouse"),c(4),m("ngIf",e.errorMessage),c(6),M("ngModel",e.selectedWarehouse.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),M("ngModel",e.selectedWarehouse.name),c(4),M("ngModel",e.selectedWarehouse.address),c(4),M("ngModel",e.selectedWarehouse.status),c(8),m("disabled",!e.isWarehouseFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}function QX(n,t){if(n&1&&(o(0,"div",62),l(1),a()),n&2){let e=p(2);c(),D(" ",e.errorMessage," ")}}function XX(n,t){n&1&&(o(0,"small",63),l(1,"Unique within this warehouse"),a())}function ZX(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),a(),o(5,"button",46),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",47),a()(),o(7,"div",48),b(8,QX,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Bin Code "),o(12,"span",51),l(13,"*"),a()(),o(14,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.code,r)||(s.selectedBin.code=r),f(r)}),a(),b(15,XX,2,0,"small",53),a(),o(16,"div",50)(17,"label"),l(18,"Bin Name "),o(19,"span",51),l(20,"*"),a()(),o(21,"input",65),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.name,r)||(s.selectedBin.name=r),f(r)}),a()(),o(22,"div",66)(23,"div",50)(24,"label"),l(25,"Zone"),a(),o(26,"input",67),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.zone,r)||(s.selectedBin.zone=r),f(r)}),a()(),o(27,"div",50)(28,"label"),l(29,"Aisle"),a(),o(30,"input",68),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.aisle,r)||(s.selectedBin.aisle=r),f(r)}),a()()(),o(31,"div",66)(32,"div",50)(33,"label"),l(34,"Rack"),a(),o(35,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.rack,r)||(s.selectedBin.rack=r),f(r)}),a()(),o(36,"div",50)(37,"label"),l(38,"Shelf"),a(),o(39,"input",70),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.shelf,r)||(s.selectedBin.shelf=r),f(r)}),a()()(),o(40,"div",50)(41,"label"),l(42,"Status"),a(),o(43,"select",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedBin.status,r)||(s.selectedBin.status=r),f(r)}),o(44,"option",57),l(45,"Active"),a(),o(46,"option",58),l(47,"Inactive"),a()()()(),o(48,"div",59)(49,"button",60),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(50,"Cancel"),a(),o(51,"button",61),x("click",function(){g(e);let r=p();return f(r.saveBin())}),l(52),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Bin":"Add Bin"),c(4),m("ngIf",e.errorMessage),c(6),M("ngModel",e.selectedBin.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),M("ngModel",e.selectedBin.name),c(5),M("ngModel",e.selectedBin.zone),c(4),M("ngModel",e.selectedBin.aisle),c(5),M("ngModel",e.selectedBin.rack),c(4),M("ngModel",e.selectedBin.shelf),c(4),M("ngModel",e.selectedBin.status),c(8),m("disabled",!e.isBinFormValid()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var aC=class n{constructor(t,e,i,r){this.warehouseService=t;this.settingsService=e;this.notificationService=i;this.cdr=r}warehouses=[];warehouseBins={};expandedWarehouse=null;showModal=!1;modalType="";editMode=!1;selectedWarehouse=this.getEmptyWarehouse();selectedBin=this.getEmptyBin();loading=!1;errorMessage="";ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.loading=!0,this.warehouseService.getAllWarehouses().subscribe({next:t=>{this.warehouses=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading warehouses",t),this.loading=!1,this.cdr.detectChanges()}})}loadBinsForWarehouse(t){this.warehouseService.getBinsByWarehouse(t).subscribe({next:e=>{this.warehouseBins[t]=e,this.cdr.detectChanges()},error:e=>console.error("Error loading bins",e)})}getEmptyWarehouse(){return{code:"",name:"",address:"",status:"Active"}}getEmptyBin(){return{code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",status:"Active"}}toggleWarehouse(t){this.expandedWarehouse===t?this.expandedWarehouse=null:(this.expandedWarehouse=t,this.warehouseBins[t]||this.loadBinsForWarehouse(t))}openModal(t,e){this.modalType=t,this.errorMessage="",t==="warehouse"?e?(this.editMode=!0,this.selectedWarehouse=me({},e)):(this.editMode=!1,this.selectedWarehouse=this.getEmptyWarehouse(),this.generateWarehouseCode()):t==="bin"&&(e?(this.editMode=!0,this.selectedBin=me({},e)):(this.editMode=!1,this.selectedBin=this.getEmptyBin(),this.generateBinCode())),this.showModal=!0}generateWarehouseCode(){this.settingsService.previewPrefixId("warehouse").subscribe({next:t=>{this.selectedWarehouse.code=t},error:t=>console.error("Error generating warehouse code",t)})}generateBinCode(){this.settingsService.previewPrefixId("bin").subscribe({next:t=>{this.selectedBin.code=t},error:t=>console.error("Error generating bin code",t)})}closeModal(){this.showModal=!1,this.errorMessage=""}isWarehouseFormValid(){return this.selectedWarehouse.code.trim()!==""&&this.selectedWarehouse.name.trim()!==""}isBinFormValid(){return this.selectedBin.code.trim()!==""&&this.selectedBin.name.trim()!==""}saveWarehouse(){if(!this.isWarehouseFormValid()){this.notificationService.error("Warehouse Code and Name are required");return}this.editMode&&this.selectedWarehouse.id?this.warehouseService.updateWarehouse(this.selectedWarehouse.id,this.selectedWarehouse).subscribe({next:()=>{this.notificationService.success("Warehouse updated successfully"),this.loadWarehouses(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating warehouse")}}):this.warehouseService.createWarehouse(this.selectedWarehouse).subscribe({next:()=>{this.notificationService.success("Warehouse created successfully"),this.loadWarehouses(),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating warehouse")}})}saveBin(){if(!this.isBinFormValid()){this.notificationService.error("Bin Code and Name are required");return}this.editMode&&this.selectedBin.id?this.warehouseService.updateBin(this.selectedBin.id,this.selectedBin).subscribe({next:()=>{this.notificationService.success("Bin updated successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error updating bin")}}):(this.selectedBin.warehouseId=this.expandedWarehouse||void 0,this.warehouseService.createBin(this.selectedBin).subscribe({next:()=>{this.notificationService.success("Bin created successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.notificationService.error(t.error?.error||"Error creating bin")}}))}deleteWarehouse(t){confirm("Are you sure you want to delete this warehouse? All bins inside will also be deleted.")&&this.warehouseService.deleteWarehouse(t).subscribe({next:()=>{this.notificationService.success("Warehouse deleted successfully"),this.loadWarehouses()},error:e=>{this.notificationService.error(e.error?.error||"Error deleting warehouse")}})}deleteBin(t){confirm("Are you sure you want to delete this bin?")&&this.warehouseService.deleteBin(t).subscribe({next:()=>{this.notificationService.success("Bin deleted successfully"),this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse)},error:e=>{this.notificationService.error(e.error?.error||"Error deleting bin")}})}getBinsForWarehouse(t){return this.warehouseBins[t]||[]}openBinModal(t){this.selectedBin=this.getEmptyBin(),this.selectedBin.warehouseId=t,this.modalType="bin",this.editMode=!1,this.errorMessage="",this.generateBinCode(),this.showModal=!0}editBin(t){this.modalType="bin",this.editMode=!0,this.selectedBin=me({},t),this.errorMessage="",this.showModal=!0}static \u0275fac=function(e){return new(e||n)(V(Xi),V(Zn),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-warehouse-bin"]],standalone:!1,decls:26,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"warehouse-list"],["class","empty-state",4,"ngIf"],["class","warehouse-card",4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-warehouse"],[1,"warehouse-card"],[1,"warehouse-header",3,"click"],[1,"warehouse-info"],[1,"warehouse-icon"],[1,"warehouse-details"],[1,"warehouse-stats"],[1,"badge",3,"ngClass"],[1,"fas","fa-chevron-down","expand-icon"],["class","bins-section",4,"ngIf"],[1,"bins-section"],[1,"bins-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bins-grid"],["class","empty-bins",4,"ngIf"],["class","bin-card",4,"ngFor","ngForOf"],[1,"empty-bins"],[1,"bin-card"],[1,"bin-header"],[1,"bin-actions"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"bin-name"],["class","bin-location",4,"ngIf"],[1,"badge","badge-sm",3,"ngClass"],[1,"bin-location"],[4,"ngIf"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., WH-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Main Warehouse",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address (optional)","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],["type","text","placeholder","e.g., BIN-A1",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","text","placeholder","e.g., Storage Bin A1",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., A, B, C (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., 1, 2, 3 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., R1, R2 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., S1, S2 (optional)",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Warehouse & Bin Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Warehouse"),a()()(),o(16,"div",4)(17,"button",5),x("click",function(){return i.openModal("warehouse")}),y(18,"i",6),l(19," Add Warehouse "),a()()(),o(20,"div",7),b(21,LX,4,0,"div",8)(22,VX,4,0,"div",8)(23,$X,17,8,"div",9),a()(),b(24,KX,39,10,"div",10)(25,ZX,53,13,"div",10)),e&2&&(c(21),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.warehouses.length===0),c(),m("ngForOf",i.warehouses),c(),m("ngIf",i.showModal&&i.modalType==="warehouse"),c(),m("ngIf",i.showModal&&i.modalType==="bin"))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.warehouse-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.warehouse-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 10px #00000014;overflow:hidden}.warehouse-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;cursor:pointer;transition:background .3s ease}.warehouse-header[_ngcontent-%COMP%]:hover{background:#f8f9fa}.warehouse-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.warehouse-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b;font-size:1.5rem}.warehouse-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:4px}.warehouse-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.warehouse-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.usage-info[_ngcontent-%COMP%]{text-align:right}.usage-info[_ngcontent-%COMP%]   .usage-text[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;display:block;margin-bottom:8px}.usage-bar[_ngcontent-%COMP%]{width:150px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden}.usage-bar.small[_ngcontent-%COMP%]{width:100%;height:6px}.usage-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.usage-fill.normal[_ngcontent-%COMP%]{background:#28a745}.usage-fill.warning[_ngcontent-%COMP%]{background:#ffc107}.usage-fill.critical[_ngcontent-%COMP%]{background:#dc3545}.expand-icon[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;transition:transform .3s ease}.expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.bins-section[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding:20px;background:#f8f9fa}.bins-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.bins-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.bins-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px}.bin-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 1px 4px #0000000d}.bin-card[_ngcontent-%COMP%]   .bin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.bin-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:12px}.bin-card[_ngcontent-%COMP%]   .bin-usage[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;display:block;margin-bottom:6px}"]})};function eZ(n,t){n&1&&(o(0,"tr")(1,"td",16),y(2,"i",17),a()())}function tZ(n,t){n&1&&(o(0,"tr")(1,"td",16),y(2,"i",18),o(3,"p"),l(4,'No suppliers found. Click "Add Supplier" to create one.'),a()()())}function nZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td")(5,"div",19)(6,"div",20),l(7),a(),o(8,"span"),l(9),a()()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td")(17,"span",21),l(18),a()(),o(19,"td")(20,"div",22)(21,"button",23),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(22,"i",24),a(),o(23,"button",25),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteSupplier(r.id))}),y(24,"i",26),a()()()()}if(n&2){let e=t.$implicit;c(3),_(e.code),c(4),_(e.name.charAt(0)),c(2),_(e.name),c(2),_(e.contactPerson),c(2),_(e.email),c(2),_(e.phone),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," ")}}function iZ(n,t){if(n&1){let e=F();o(0,"div",27)(1,"div",28),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",29)(3,"h2"),l(4),a(),o(5,"button",30),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",31),a()(),o(7,"div",32)(8,"div",33)(9,"div",34)(10,"label"),l(11,"Supplier Code"),a(),o(12,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.code,r)||(s.selectedSupplier.code=r),f(r)}),a()(),o(13,"div",34)(14,"label"),l(15,"Supplier Name"),a(),o(16,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.name,r)||(s.selectedSupplier.name=r),f(r)}),a()()(),o(17,"div",34)(18,"label"),l(19,"Contact Person"),a(),o(20,"input",37),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.contactPerson,r)||(s.selectedSupplier.contactPerson=r),f(r)}),a()(),o(21,"div",33)(22,"div",34)(23,"label"),l(24,"Email"),a(),o(25,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.email,r)||(s.selectedSupplier.email=r),f(r)}),a()(),o(26,"div",34)(27,"label"),l(28,"Phone"),a(),o(29,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.phone,r)||(s.selectedSupplier.phone=r),f(r)}),a()()(),o(30,"div",34)(31,"label"),l(32,"Address"),a(),o(33,"textarea",40),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.address,r)||(s.selectedSupplier.address=r),f(r)}),a()(),o(34,"div",33)(35,"div",34)(36,"label"),l(37,"Payment Terms"),a(),o(38,"input",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.paymentTerms,r)||(s.selectedSupplier.paymentTerms=r),f(r)}),a()(),o(39,"div",34)(40,"label"),l(41,"Status"),a(),o(42,"select",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplier.status,r)||(s.selectedSupplier.status=r),f(r)}),o(43,"option",43),l(44,"Active"),a(),o(45,"option",44),l(46,"Inactive"),a()()()()(),o(47,"div",45)(48,"button",46),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(49,"Cancel"),a(),o(50,"button",4),x("click",function(){g(e);let r=p();return f(r.saveSupplier())}),l(51),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Supplier":"Add Supplier"),c(8),M("ngModel",e.selectedSupplier.code),c(4),M("ngModel",e.selectedSupplier.name),c(4),M("ngModel",e.selectedSupplier.contactPerson),c(5),M("ngModel",e.selectedSupplier.email),c(4),M("ngModel",e.selectedSupplier.phone),c(4),M("ngModel",e.selectedSupplier.address),c(5),M("ngModel",e.selectedSupplier.paymentTerms),c(4),M("ngModel",e.selectedSupplier.status),c(9),_(e.editMode?"Update":"Save")}}var sC=class n{constructor(t,e,i){this.supplierService=t;this.settingsService=e;this.cdr=i}suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedSupplier=this.getEmptySupplier();loading=!1;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.loading=!0,this.supplierService.getAll().subscribe({next:t=>{this.suppliers=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading suppliers",t),this.loading=!1,this.cdr.detectChanges()}})}get filteredSuppliers(){return this.searchQuery?this.suppliers.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.suppliers}getEmptySupplier(){return{code:"",name:"",contactPerson:"",email:"",phone:"",address:"",paymentTerms:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedSupplier=me({},t)):(this.editMode=!1,this.selectedSupplier=this.getEmptySupplier(),this.generateSupplierCode()),this.showModal=!0}generateSupplierCode(){this.settingsService.previewPrefixId("supplier").subscribe({next:t=>{this.selectedSupplier.code=t},error:t=>console.error("Error generating supplier code",t)})}closeModal(){this.showModal=!1,this.selectedSupplier=this.getEmptySupplier()}saveSupplier(){this.editMode&&this.selectedSupplier.id?this.supplierService.update(this.selectedSupplier.id,this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error updating supplier",t)}):this.supplierService.create(this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error creating supplier",t)})}deleteSupplier(t){confirm("Are you sure you want to delete this supplier?")&&this.supplierService.delete(t).subscribe({next:()=>this.loadSuppliers(),error:e=>console.error("Error deleting supplier",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(V(yo),V(Zn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-supplier"]],standalone:!1,decls:47,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search suppliers...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-truck"],[1,"supplier-info"],[1,"avatar"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","SUP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Company name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Contact name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","+1 234 567 890",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Supplier Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Suppliers"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," Add Supplier "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Code"),a(),o(30,"th"),l(31,"Supplier"),a(),o(32,"th"),l(33,"Contact Person"),a(),o(34,"th"),l(35,"Email"),a(),o(36,"th"),l(37,"Phone"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),b(43,eZ,3,0,"tr",13)(44,tZ,5,0,"tr",13)(45,nZ,25,8,"tr",14),a()()()()(),b(46,iZ,52,10,"div",15)),e&2&&(c(23),M("ngModel",i.searchQuery),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredSuppliers.length===0),c(),m("ngForOf",i.filteredSuppliers),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.supplier-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.supplier-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}.contact-info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e0e0e0;font-size:.8rem}.rating[_ngcontent-%COMP%]   i.filled[_ngcontent-%COMP%]{color:#ffc107}.rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-size:.875rem;color:#6c757d}"]})};function rZ(n,t){n&1&&y(0,"span",26)}function oZ(n,t){if(n&1){let e=F();o(0,"div",22),x("click",function(){let r=g(e).$implicit,s=p();return f(s.setValuationMethod(r.id))}),o(1,"div",23),b(2,rZ,1,0,"span",24),a(),o(3,"div",25)(4,"h4"),l(5),a(),o(6,"p"),l(7),a()()()}if(n&2){let e=t.$implicit;ie("active",e.active),c(2),m("ngIf",e.active),c(3),_(e.name),c(2),_(e.description)}}function aZ(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"strong"),l(9),a()(),o(10,"td")(11,"span",27),l(12),a()()()),n&2){let e=t.$implicit;c(2),_(e.item),c(2),_(e.quantity),c(2),D("$",e.avgCost),c(3),D("$",e.totalValue.toLocaleString()),c(3),_(e.method)}}var lC=class n{valuationMethods=[{id:1,name:"FIFO",description:"First In First Out",active:!0},{id:2,name:"LIFO",description:"Last In First Out",active:!1},{id:3,name:"Weighted Average",description:"Average cost method",active:!1},{id:4,name:"Standard Cost",description:"Predetermined standard cost",active:!1}];valuationData=[{item:"Laptop Dell XPS",quantity:25,avgCost:800,totalValue:2e4,method:"FIFO"},{item:"Office Chair",quantity:40,avgCost:150,totalValue:6e3,method:"FIFO"},{item:"A4 Paper Ream",quantity:500,avgCost:5,totalValue:2500,method:"Weighted Avg"},{item:"Steel Sheet",quantity:1e3,avgCost:2,totalValue:2e3,method:"FIFO"},{item:"Cardboard Box",quantity:2e3,avgCost:.5,totalValue:1e3,method:"Weighted Avg"}];totalValue=31500;setValuationMethod(t){this.valuationMethods.forEach(e=>e.active=e.id===t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-inventory-valuation"]],standalone:!1,decls:78,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-title"],[1,"method-list"],["class","method-item",3,"active","click",4,"ngFor","ngForOf"],[1,"card","total-value-card"],[1,"total-value"],[1,"fas","fa-coins"],[1,"value-info"],[1,"value-breakdown"],[1,"breakdown-item"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm"],[1,"fas","fa-download"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"method-item",3,"click"],[1,"method-radio"],["class","radio-dot",4,"ngIf"],[1,"method-info"],[1,"radio-dot"],[1,"badge","badge-info"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Valuation Engine"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Valuation"),a()()()(),o(16,"div",4)(17,"div",5)(18,"h3",6),l(19,"Valuation Methods"),a(),o(20,"div",7),b(21,oZ,8,5,"div",8),a()(),o(22,"div",9)(23,"div",10),y(24,"i",11),o(25,"div",12)(26,"span"),l(27,"Total Inventory Value"),a(),o(28,"h2"),l(29),a()()(),o(30,"div",13)(31,"div",14)(32,"span"),l(33,"Raw Materials"),a(),o(34,"strong"),l(35,"$3,000"),a()(),o(36,"div",14)(37,"span"),l(38,"Finished Goods"),a(),o(39,"strong"),l(40,"$26,000"),a()(),o(41,"div",14)(42,"span"),l(43,"Packaging"),a(),o(44,"strong"),l(45,"$2,500"),a()()()()(),o(46,"div",5)(47,"div",15)(48,"h3"),l(49,"Item Valuation Details"),a(),o(50,"button",16),y(51,"i",17),l(52," Export "),a()(),o(53,"div",18)(54,"table",19)(55,"thead")(56,"tr")(57,"th"),l(58,"Item"),a(),o(59,"th"),l(60,"Quantity"),a(),o(61,"th"),l(62,"Avg. Cost"),a(),o(63,"th"),l(64,"Total Value"),a(),o(65,"th"),l(66,"Method"),a()()(),o(67,"tbody"),b(68,aZ,13,5,"tr",20),a(),o(69,"tfoot")(70,"tr")(71,"td",21)(72,"strong"),l(73,"Total"),a()(),o(74,"td")(75,"strong"),l(76),a()(),y(77,"td"),a()()()()()()),e&2&&(c(21),m("ngForOf",i.valuationMethods),c(8),D("$",i.totalValue.toLocaleString()),c(39),m("ngForOf",i.valuationData),c(8),D("$",i.totalValue.toLocaleString()))},dependencies:[Se,be,ht],styles:[".card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px}.method-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.method-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .3s ease}.method-item[_ngcontent-%COMP%]:hover{border-color:#00796b}.method-item.active[_ngcontent-%COMP%]{border-color:#00796b;background:#00796b0d}.method-radio[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center}.method-item.active[_ngcontent-%COMP%]   .method-radio[_ngcontent-%COMP%]{border-color:#00796b}.method-radio[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:10px;height:10px;background:#00796b;border-radius:50%}.method-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;margin-bottom:4px}.method-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.total-value-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.total-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:24px;background:linear-gradient(135deg,#00796b,#004d40);border-radius:8px;color:#fff;margin-bottom:20px}.total-value[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-top:4px}.value-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.breakdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #e0e0e0}.breakdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.breakdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}.breakdown-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;background:#f8f9fa}"]})};var tc=class n{constructor(t){this.http=t}baseUrl="/api/inventory/ledger";getAll(t){let e=new ki;return t&&(t.itemId&&(e=e.set("itemId",t.itemId.toString())),t.warehouseId&&(e=e.set("warehouseId",t.warehouseId.toString())),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(this.baseUrl,{params:e})}getByItem(t){return this.http.get(`${this.baseUrl}/item/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function sZ(n,t){if(n&1&&(o(0,"option",10),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function lZ(n,t){if(n&1&&(o(0,"option",10),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function cZ(n,t){n&1&&(o(0,"div",24),y(1,"div",25),o(2,"span"),l(3,"Loading ledger entries..."),a()())}function dZ(n,t){n&1&&(o(0,"tr")(1,"td",26),l(2,"No ledger entries found"),a()())}function pZ(n,t){if(n&1){let e=F();o(0,"tr",27),x("click",function(){let r=g(e).$implicit,s=p();return f(s.drillDown(r))}),o(1,"td"),l(2),a(),o(3,"td")(4,"a",28),l(5),a()(),o(6,"td")(7,"div",29)(8,"span",30),l(9),a(),o(10,"span",31),l(11),a()()(),o(12,"td")(13,"span",32),l(14),a()(),o(15,"td",33),l(16),a(),o(17,"td",34),l(18),a(),o(19,"td",20)(20,"strong"),l(21),a()(),o(22,"td",20),l(23),a(),o(24,"td",20),l(25),a(),o(26,"td"),l(27),a(),o(28,"td"),l(29),a()()}if(n&2){let e=t.$implicit,i=p();c(2),_(i.formatDate(e.transactionDate)),c(3),_(e.referenceNumber),c(4),_(e.item==null?null:e.item.code),c(2),_(e.item==null?null:e.item.name),c(2),m("ngClass",i.getTypeClass(e.transactionType)),c(),D(" ",i.getTypeLabel(e.transactionType)," "),c(2),D(" ",e.quantityIn>0?"+"+e.quantityIn:"-"," "),c(2),D(" ",e.quantityOut>0?"-"+e.quantityOut:"-"," "),c(3),_(e.balanceQuantity),c(2),_(i.formatCurrency(e.unitValue)),c(),ie("positive",e.totalValue>0)("negative",e.totalValue<0),c(),D(" ",i.formatCurrency(e.totalValue)," "),c(2),_((e.warehouse==null?null:e.warehouse.name)||"-"),c(2),_(e.remarks||"-")}}function mZ(n,t){if(n&1&&(o(0,"div",35)(1,"span",36)(2,"strong"),l(3,"Total Entries:"),a(),l(4),a()()),n&2){let e=p();c(4),D(" ",e.ledgerEntries.length," ")}}var dC=class n{constructor(t,e,i,r,s){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.router=r;this.cdr=s}ledgerEntries=[];items=[];warehouses=[];loading=!1;selectedItemId=null;selectedWarehouseId=null;dateFrom="";dateTo="";ngOnInit(){this.loadItems(),this.loadWarehouses(),this.loadLedger()}loadItems(){this.itemService.getAll().subscribe({next:t=>{this.items=t,this.cdr.detectChanges()},error:t=>console.error("Error loading items",t)})}loadWarehouses(){this.warehouseService.getAll().subscribe({next:t=>{this.warehouses=t,this.cdr.detectChanges()},error:t=>console.error("Error loading warehouses",t)})}loadLedger(){this.loading=!0;let t={};this.selectedItemId&&(t.itemId=this.selectedItemId),this.selectedWarehouseId&&(t.warehouseId=this.selectedWarehouseId),this.dateFrom&&(t.startDate=this.dateFrom),this.dateTo&&(t.endDate=this.dateTo),this.ledgerService.getAll(t).subscribe({next:e=>{this.ledgerEntries=e,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error loading ledger",e),this.loading=!1,this.cdr.detectChanges()}})}applyFilter(){this.loadLedger()}clearFilters(){this.selectedItemId=null,this.selectedWarehouseId=null,this.dateFrom="",this.dateTo="",this.loadLedger()}getTypeClass(t){return{GOODS_RECEIPT:"badge-success",GOODS_ISSUE:"badge-danger",TRANSFER_IN:"badge-info",TRANSFER_OUT:"badge-warning",ADJUSTMENT:"badge-secondary"}[t]||"badge-info"}getTypeLabel(t){return{GOODS_RECEIPT:"Goods Receipt",GOODS_ISSUE:"Goods Issue",TRANSFER_IN:"Transfer In",TRANSFER_OUT:"Transfer Out",ADJUSTMENT:"Adjustment"}[t]||t}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}formatCurrency(t){return t==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}drillDown(t){let e=t.referenceNumber;if(!e)return;let i={search:e};e.startsWith("GRN")?this.router.navigate(["/app/stock/grn"],{queryParams:i}):e.startsWith("ISS")||e.startsWith("GI")?this.router.navigate(["/app/stock/issue"],{queryParams:i}):e.startsWith("TRF")||e.startsWith("ST")?this.router.navigate(["/app/stock/transfer"],{queryParams:i}):(e.startsWith("ADJ")||e.startsWith("SA"))&&this.router.navigate(["/app/stock/adjustment"],{queryParams:i})}exportLedger(){let t=this.generateCSV(),e=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`inventory-ledger-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(i)}generateCSV(){let t=["Date","Document No","Item","Transaction Type","In Qty","Out Qty","Balance Qty","Rate","Value","Warehouse","Remarks"],e=this.ledgerEntries.map(i=>[this.formatDate(i.transactionDate),i.referenceNumber,i.item?.name||"-",this.getTypeLabel(i.transactionType),i.quantityIn||0,i.quantityOut||0,i.balanceQuantity||0,i.unitValue||0,i.totalValue||0,i.warehouse?.name||"-",i.remarks||""]);return[t,...e].map(i=>i.join(",")).join(`
`)}static \u0275fac=function(e){return new(e||n)(V(tc),V(_i),V(Xi),V(tn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-inventory-ledger"]],standalone:!1,decls:82,vars:12,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-download"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"filter-buttons"],[1,"fas","fa-filter"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","ledger-row",3,"click",4,"ngFor","ngForOf"],["class","ledger-summary",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],["colspan","11",1,"text-center","text-muted"],[1,"ledger-row",3,"click"],[1,"doc-link"],[1,"item-info"],[1,"item-code"],[1,"item-name"],[1,"badge",3,"ngClass"],[1,"text-right","qty-in"],[1,"text-right","qty-out"],[1,"ledger-summary"],[1,"summary-item"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Ledger"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Inventory"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Ledger"),a()()(),o(16,"button",4),x("click",function(){return i.exportLedger()}),y(17,"i",5),l(18," Export CSV "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"label"),l(23,"Item"),a(),o(24,"select",9),S("ngModelChange",function(s){return P(i.selectedItemId,s)||(i.selectedItemId=s),s}),o(25,"option",10),l(26,"All Items"),a(),b(27,sZ,2,3,"option",11),a()(),o(28,"div",8)(29,"label"),l(30,"Warehouse"),a(),o(31,"select",9),S("ngModelChange",function(s){return P(i.selectedWarehouseId,s)||(i.selectedWarehouseId=s),s}),o(32,"option",10),l(33,"All Warehouses"),a(),b(34,lZ,2,3,"option",11),a()(),o(35,"div",8)(36,"label"),l(37,"From Date"),a(),o(38,"input",12),S("ngModelChange",function(s){return P(i.dateFrom,s)||(i.dateFrom=s),s}),a()(),o(39,"div",8)(40,"label"),l(41,"To Date"),a(),o(42,"input",12),S("ngModelChange",function(s){return P(i.dateTo,s)||(i.dateTo=s),s}),a()(),o(43,"div",13)(44,"button",4),x("click",function(){return i.applyFilter()}),y(45,"i",14),l(46," Apply "),a(),o(47,"button",15),x("click",function(){return i.clearFilters()}),y(48,"i",16),l(49," Clear "),a()()()(),o(50,"div",6)(51,"div",17),b(52,cZ,4,0,"div",18),o(53,"table",19)(54,"thead")(55,"tr")(56,"th"),l(57,"Date"),a(),o(58,"th"),l(59,"Document No."),a(),o(60,"th"),l(61,"Item"),a(),o(62,"th"),l(63,"Transaction Type"),a(),o(64,"th",20),l(65,"In Qty"),a(),o(66,"th",20),l(67,"Out Qty"),a(),o(68,"th",20),l(69,"Balance Qty"),a(),o(70,"th",20),l(71,"Rate"),a(),o(72,"th",20),l(73,"Value"),a(),o(74,"th"),l(75,"Warehouse"),a(),o(76,"th"),l(77,"Reference"),a()()(),o(78,"tbody"),b(79,dZ,3,0,"tr",21)(80,pZ,30,17,"tr",22),a()()(),b(81,mZ,5,1,"div",23),a()()),e&2&&(c(24),M("ngModel",i.selectedItemId),c(),m("ngValue",null),c(2),m("ngForOf",i.items),c(4),M("ngModel",i.selectedWarehouseId),c(),m("ngValue",null),c(2),m("ngForOf",i.warehouses),c(4),M("ngModel",i.dateFrom),c(4),M("ngModel",i.dateTo),c(10),m("ngIf",i.loading),c(27),m("ngIf",i.ledgerEntries.length===0&&!i.loading),c(),m("ngForOf",i.ledgerEntries),c(),m("ngIf",i.ledgerEntries.length>0))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filters-row[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;height:46px;align-items:center}.qty-in[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.qty-out[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.positive[_ngcontent-%COMP%]{color:#28a745}.negative[_ngcontent-%COMP%]{color:#dc3545}.card[_ngcontent-%COMP%]{margin-bottom:24px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e0e0e0;border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.ledger-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .15s ease}.ledger-row[_ngcontent-%COMP%]:hover{background-color:#0080800d}.doc-link[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;text-decoration:none}.doc-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.item-info[_ngcontent-%COMP%]   .item-code[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.text-muted[_ngcontent-%COMP%]{color:var(--text-secondary);padding:40px 0}.ledger-summary[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:16px 0 0;border-top:1px solid var(--border-color);margin-top:16px}.ledger-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.badge-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}"]})};var Ls=class n{constructor(t){this.http=t}baseUrl="/api/stock-movement";getAllGRN(){return this.http.get(`${this.baseUrl}/grn`)}getGRNById(t){return this.http.get(`${this.baseUrl}/grn/${t}`)}createGRN(t){return this.http.post(`${this.baseUrl}/grn`,t)}deleteGRN(t){return this.http.delete(`${this.baseUrl}/grn/${t}`)}getAllIssues(){return this.http.get(`${this.baseUrl}/issues`)}getIssueById(t){return this.http.get(`${this.baseUrl}/issues/${t}`)}createIssue(t){return this.http.post(`${this.baseUrl}/issues`,t)}deleteIssue(t){return this.http.delete(`${this.baseUrl}/issues/${t}`)}getAllTransfers(){return this.http.get(`${this.baseUrl}/transfers`)}getTransferById(t){return this.http.get(`${this.baseUrl}/transfers/${t}`)}createTransfer(t){return this.http.post(`${this.baseUrl}/transfers`,t)}deleteTransfer(t){return this.http.delete(`${this.baseUrl}/transfers/${t}`)}getAllAdjustments(){return this.http.get(`${this.baseUrl}/adjustments`)}getAdjustmentById(t){return this.http.get(`${this.baseUrl}/adjustments/${t}`)}createAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments`,t)}deleteAdjustment(t){return this.http.delete(`${this.baseUrl}/adjustments/${t}`)}approveAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/approve`,{})}rejectAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/reject`,{})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var Co=class n{constructor(t){this.http=t}baseUrl="/api/purchase/fulfillment";fulfillmentsSubject=new Ci([]);fulfillments$=this.fulfillmentsSubject.asObservable();getAll(){return this.http.get(this.baseUrl)}getAllPOs(){return this.http.get(`${this.baseUrl}/pos`)}getPOById(t){return this.http.get(`${this.baseUrl}/pos/${t}`)}getByPrId(t){return this.http.get(`${this.baseUrl}/pr/${t}`)}getFulfillmentHistory(t){return this.http.get(`${this.baseUrl}/pr/${t}/history`)}createPOFulfillment(t){return this.http.post(`${this.baseUrl}/convert-to-po`,t)}createStockIssueFulfillment(t){return this.http.post(`${this.baseUrl}/stock-issue`,t)}createMaterialTransferFulfillment(t){return this.http.post(`${this.baseUrl}/material-transfer`,t)}generatePONumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PO-${i}${r}${s}`}generateIssueNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`SI-${i}${r}${s}`}generateTransferNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`MT-${i}${r}${s}`}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function uZ(n,t){n&1&&(o(0,"tr")(1,"td",23),l(2,'No GRNs found. Click "New GRN" to create one.'),a()())}function gZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td")(7,"span",24),l(8),a()(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),Le(17,"number"),a(),o(18,"td")(19,"span",24),l(20),a()(),o(21,"td")(22,"div",25)(23,"button",26),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(24,"i",27),a(),o(25,"button",28),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteGRN(r.id))}),y(26,"i",29),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.grnNumber),c(2),_(e.receiptDate),c(2),m("ngClass",e.receiptType==="PO"?"badge-info":"badge-secondary"),c(),D(" ",e.receiptType==="PO"?"Purchase Order":"Direct"," "),c(2),_(e.supplier||"-"),c(2),_(e.warehouse||"-"),c(2),_(e.totalQty),c(2),D("$",rt(17,10,e.totalValue,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function fZ(n,t){if(n&1&&(o(0,"div",56),l(1),a()),n&2){let e=p(2);c(),_(e.errorMessage)}}function hZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.referenceNumber," - ",e.supplierName||"No Supplier")}}function _Z(n,t){n&1&&(o(0,"small",59),l(1,"No Purchase Orders available for receipt"),a())}function vZ(n,t){if(n&1){let e=F();o(0,"div",37)(1,"label"),l(2,"Select Purchase Order *"),a(),o(3,"select",57),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedPOId,r)||(s.selectedPOId=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.onPOSelect())}),o(4,"option",45),l(5,"-- Select PO --"),a(),b(6,hZ,2,3,"option",46),a(),b(7,_Z,2,0,"small",58),a()}if(n&2){let e=p(2);c(3),M("ngModel",e.selectedPOId),c(),m("ngValue",null),c(2),m("ngForOf",e.getPOsWithItems()),c(),m("ngIf",e.getPOsWithItems().length===0)}}function xZ(n,t){if(n&1){let e=F();o(0,"div",37)(1,"label"),l(2,"PO Number"),a(),o(3,"input",38),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedGRN.poNumber,r)||(s.selectedGRN.poNumber=r),f(r)}),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.selectedGRN.poNumber)}}function yZ(n,t){if(n&1){let e=F();o(0,"div",37)(1,"label"),l(2,"Reference Number"),a(),o(3,"input",60),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedGRN.referenceNumber,r)||(s.selectedGRN.referenceNumber=r),f(r)}),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.selectedGRN.referenceNumber),m("disabled",e.editMode)}}function CZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function bZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function MZ(n,t){if(n&1){let e=F();o(0,"button",61),x("click",function(){g(e);let r=p(2);return f(r.addItem())}),y(1,"i",5),l(2," Add Item "),a()}}function SZ(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function PZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function wZ(n,t){if(n&1){let e=F();o(0,"td")(1,"button",65),x("click",function(){g(e);let r=p().index,s=p(2);return f(s.removeItem(r))}),y(2,"i",29),a()()}if(n&2){let e=p(3);c(),m("disabled",e.selectedGRN.items.length===1)}}function EZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"select",40),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemId,r)||(s.itemId=r),f(r)}),x("change",function(){let r=g(e).index,s=p(2);return f(s.onItemSelect(r))}),o(3,"option",45),l(4,"-- Select Item --"),a(),b(5,PZ,2,3,"option",46),a()(),o(6,"td")(7,"input",62),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(8,"td")(9,"input",63),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.unitPrice,r)||(s.unitPrice=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(10,"td"),y(11,"input",64),Le(12,"number"),a(),b(13,wZ,3,1,"td",20),a()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),M("ngModel",e.quantity),m("disabled",i.editMode),c(2),M("ngModel",e.unitPrice),m("disabled",i.editMode),c(2),m("value",rt(12,10,e.amount,"1.2-2")),c(2),m("ngIf",!i.editMode)}}function OZ(n,t){n&1&&y(0,"td")}function TZ(n,t){n&1&&(o(0,"span"),l(1,"Saving..."),a())}function kZ(n,t){n&1&&(o(0,"span"),l(1,"Save GRN"),a())}function IZ(n,t){if(n&1){let e=F();o(0,"button",66),x("click",function(){g(e);let r=p(2);return f(r.saveGRN())}),b(1,TZ,2,0,"span",20)(2,kZ,2,0,"span",20),a()}if(n&2){let e=p(2);m("disabled",e.saving),c(),m("ngIf",e.saving),c(),m("ngIf",!e.saving)}}function DZ(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h2"),l(4),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",34),b(8,fZ,2,1,"div",35),o(9,"div",36)(10,"div",37)(11,"label"),l(12,"GRN Number"),a(),o(13,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.grnNumber,r)||(s.selectedGRN.grnNumber=r),f(r)}),a()(),o(14,"div",37)(15,"label"),l(16,"Receipt Date *"),a(),o(17,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.receiptDate,r)||(s.selectedGRN.receiptDate=r),f(r)}),a()()(),o(18,"div",36)(19,"div",37)(20,"label"),l(21,"Receipt Type *"),a(),o(22,"select",40),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.receiptType,r)||(s.selectedGRN.receiptType=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onReceiptTypeChange())}),o(23,"option",41),l(24,"Direct Receipt"),a(),o(25,"option",42),l(26,"From Purchase Order"),a()()(),b(27,vZ,8,4,"div",43)(28,xZ,4,1,"div",43)(29,yZ,4,2,"div",43),a(),o(30,"div",36)(31,"div",37)(32,"label"),l(33,"Warehouse *"),a(),o(34,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.warehouseId,r)||(s.selectedGRN.warehouseId=r),f(r)}),o(35,"option",45),l(36,"-- Select Warehouse --"),a(),b(37,CZ,2,2,"option",46),a()(),o(38,"div",37)(39,"label"),l(40,"Supplier"),a(),o(41,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.supplierId,r)||(s.selectedGRN.supplierId=r),f(r)}),o(42,"option",45),l(43,"-- Select Supplier --"),a(),b(44,bZ,2,2,"option",46),a()()(),o(45,"div",36)(46,"div",37)(47,"label"),l(48,"Remarks"),a(),o(49,"input",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedGRN.remarks,r)||(s.selectedGRN.remarks=r),f(r)}),a()()(),o(50,"div",48)(51,"div",49)(52,"h3"),l(53,"Line Items"),a(),b(54,MZ,3,0,"button",50),a(),o(55,"table",51)(56,"thead")(57,"tr")(58,"th"),l(59,"Item *"),a(),o(60,"th"),l(61,"Quantity *"),a(),o(62,"th"),l(63,"Unit Cost *"),a(),o(64,"th"),l(65,"Amount"),a(),b(66,SZ,2,0,"th",20),a()(),o(67,"tbody"),b(68,EZ,14,13,"tr",21),a(),o(69,"tfoot")(70,"tr",52)(71,"td")(72,"strong"),l(73,"Totals"),a()(),o(74,"td")(75,"strong"),l(76),a()(),y(77,"td"),o(78,"td")(79,"strong"),l(80),Le(81,"number"),a()(),b(82,OZ,1,0,"td",20),a()()()()(),o(83,"div",53)(84,"button",54),l(85),a(),b(86,IZ,3,3,"button",55),a()()()}if(n&2){let e=p();c(4),D("",e.editMode?"View":"New"," Goods Receipt Note"),c(4),m("ngIf",e.errorMessage),c(5),M("ngModel",e.selectedGRN.grnNumber),c(4),M("ngModel",e.selectedGRN.receiptDate),m("disabled",e.editMode),c(5),M("ngModel",e.selectedGRN.receiptType),m("disabled",e.editMode),c(5),m("ngIf",e.selectedGRN.receiptType==="PO"&&!e.editMode),c(),m("ngIf",e.selectedGRN.receiptType==="PO"&&e.editMode),c(),m("ngIf",e.selectedGRN.receiptType==="DIRECT"),c(5),M("ngModel",e.selectedGRN.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.selectedGRN.supplierId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.suppliers),c(5),M("ngModel",e.selectedGRN.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(12),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedGRN.items),c(8),_(e.selectedGRN.totalQty),c(4),D("$",rt(81,28,e.selectedGRN.totalValue,"1.2-2")),c(2),m("ngIf",!e.editMode),c(3),_(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var pC=class n{constructor(t,e,i,r,s,d,u){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.supplierService=s;this.prFulfillmentService=d;this.notificationService=u}grnList=[];showModal=!1;editMode=!1;selectedGRN=this.getEmptyGRN();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];suppliers=[];purchaseOrders=[];selectedPOId=null;ngOnInit(){this.loadGRNs(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)}),this.prFulfillmentService.getAllPOs().subscribe({next:t=>this.purchaseOrders=t,error:t=>console.error("Error loading POs",t)})}loadGRNs(){this.loading=!0,this.stockMovementService.getAllGRN().subscribe({next:t=>{this.grnList=t.map(e=>({id:e.id,grnNumber:e.grnNumber||"",receiptDate:e.receiptDate||"",receiptType:e.receiptType||"DIRECT",poNumber:e.poNumber||"",supplierId:e.supplierId,supplier:e.supplier||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading GRNs",t),this.grnList=[],this.loading=!1}})}getEmptyGRN(){return{grnNumber:"",receiptDate:new Date().toISOString().split("T")[0],receiptType:"DIRECT",poNumber:"",supplierId:void 0,supplier:"",warehouseId:void 0,warehouse:"",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",this.selectedPOId=null,t?(this.editMode=!0,this.selectedGRN=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedGRN=this.getEmptyGRN(),this.generateGRNNumber(),this.addItem()),this.showModal=!0}onReceiptTypeChange(){this.selectedGRN.receiptType==="DIRECT"&&(this.selectedPOId=null,this.selectedGRN.poNumber="",this.selectedGRN.items=[],this.addItem())}onPOSelect(){if(!this.selectedPOId)return;let t=this.purchaseOrders.find(e=>e.id===this.selectedPOId);t&&(this.selectedGRN.poNumber=t.referenceNumber,this.selectedGRN.supplierId=t.supplierId,this.errorMessage="",t.warehouseId&&(this.selectedGRN.warehouseId=t.warehouseId),this.selectedGRN.items=(t.items||[]).filter(e=>e.itemId&&e.fulfillQty&&e.fulfillQty>0).map(e=>({itemId:e.itemId,itemName:e.itemName||"",itemCode:e.itemCode||"",description:e.itemDescription||"",quantity:e.fulfillQty||0,unitPrice:e.rate||0,amount:(e.fulfillQty||0)*(e.rate||0)})),this.calculateTotals())}getPOsWithItems(){return this.purchaseOrders.filter(t=>!t.items||t.items.length===0?!1:t.items.filter(i=>i.itemId&&i.fulfillQty&&i.fulfillQty>0).length>0)}generateGRNNumber(){this.settingsService.previewPrefixId("grn").subscribe({next:t=>{this.selectedGRN.grnNumber=t},error:t=>console.error("Error generating GRN number",t)})}closeModal(){this.showModal=!1,this.selectedGRN=this.getEmptyGRN(),this.errorMessage=""}addItem(){this.selectedGRN.items.push(this.getEmptyItem())}removeItem(t){this.selectedGRN.items.length>1&&(this.selectedGRN.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedGRN.items[t].itemId);e&&(this.selectedGRN.items[t].itemName=e.name,this.selectedGRN.items[t].itemCode=e.code,this.selectedGRN.items[t].description=e.description||"",this.selectedGRN.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedGRN.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedGRN.totalQty=this.selectedGRN.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedGRN.totalValue=this.selectedGRN.items.reduce((t,e)=>t+(e.amount||0),0)}saveGRN(){this.calculateTotals();let t=this.selectedGRN.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedGRN.warehouseId){this.notificationService.error("Please select a warehouse.");return}this.saving=!0,this.errorMessage="";let e={receiptDate:this.selectedGRN.receiptDate,receiptType:this.selectedGRN.receiptType,poNumber:this.selectedGRN.poNumber,supplierId:this.selectedGRN.supplierId,warehouseId:this.selectedGRN.warehouseId,referenceNumber:this.selectedGRN.referenceNumber,remarks:this.selectedGRN.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createGRN(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Goods Receipt created successfully"),this.loadGRNs(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving GRN"),console.error("Error saving GRN",i)}})}deleteGRN(t){confirm("Are you sure you want to delete this GRN?")&&this.stockMovementService.deleteGRN(t).subscribe({next:()=>this.loadGRNs(),error:e=>console.error("Error deleting GRN",e)})}getTotalValue(){return this.grnList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.grnList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.grnList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(V(Zn),V(Ls),V(_i),V(Xi),V(yo),V(Co),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-goods-receipt"]],standalone:!1,decls:80,vars:10,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-alt"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","9",1,"text-center"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value","DIRECT"],["value","PO"],["class","form-group",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"items-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"totals-row"],[1,"modal-footer"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel"],["class","text-warning",4,"ngIf"],[1,"text-warning"],["type","text","placeholder","e.g., Invoice #",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-secondary",3,"click"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","readonly","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Receipt Note (GRN)"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"GRN"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," New GRN "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"h3"),l(25),a(),o(26,"p"),l(27,"Total GRNs"),a()()(),o(28,"div",7)(29,"div",11),y(30,"i",12),a(),o(31,"div",10)(32,"h3"),l(33),a(),o(34,"p"),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",13),y(38,"i",14),a(),o(39,"div",10)(40,"h3"),l(41),a(),o(42,"p"),l(43,"Pending"),a()()(),o(44,"div",7)(45,"div",15),y(46,"i",16),a(),o(47,"div",10)(48,"h3"),l(49),Le(50,"number"),a(),o(51,"p"),l(52,"Total Value"),a()()()(),o(53,"div",17)(54,"div",18)(55,"table",19)(56,"thead")(57,"tr")(58,"th"),l(59,"GRN No."),a(),o(60,"th"),l(61,"Date"),a(),o(62,"th"),l(63,"Type"),a(),o(64,"th"),l(65,"Supplier"),a(),o(66,"th"),l(67,"Warehouse"),a(),o(68,"th"),l(69,"Total Qty"),a(),o(70,"th"),l(71,"Total Value"),a(),o(72,"th"),l(73,"Status"),a(),o(74,"th"),l(75,"Actions"),a()()(),o(76,"tbody"),b(77,uZ,3,0,"tr",20)(78,gZ,27,13,"tr",21),a()()()()(),b(79,DZ,87,31,"div",22)),e&2&&(c(25),_(i.grnList.length),c(8),_(i.getCompletedCount()),c(8),_(i.getPendingCount()),c(8),D("$",rt(50,7,i.getTotalValue(),"1.2-2")),c(28),m("ngIf",i.grnList.length===0),c(),m("ngForOf",i.grnList),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht,yn],styles:[".stock-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function AZ(n,t){n&1&&(o(0,"tr"),y(1,"td",25),a())}function RZ(n,t){n&1&&(o(0,"tr")(1,"td",26),y(2,"i",27),o(3,"p"),l(4,"No issues found"),a()()())}function FZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),Le(16,"number"),a(),o(17,"td")(18,"span",28),l(19),a()(),o(20,"td")(21,"div",29)(22,"button",30),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(23,"i",31),a(),o(24,"button",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteIssue(r.id))}),y(25,"i",33),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.issueNumber),c(2),_(e.issueDate),c(2),_(e.warehouse),c(2),_(e.issueType),c(2),D("",e.items.length," items"),c(2),_(e.totalQty),c(2),_(rt(16,9,e.totalValue,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function NZ(n,t){if(n&1&&(o(0,"div",57),l(1),a()),n&2){let e=p(2);c(),_(e.errorMessage)}}function LZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function VZ(n,t){if(n&1&&(o(0,"option",58),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function BZ(n,t){if(n&1){let e=F();o(0,"button",30),x("click",function(){g(e);let r=p(2);return f(r.addItem())}),y(1,"i",5),l(2," Add Item "),a()}}function UZ(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function jZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function WZ(n,t){if(n&1){let e=F();o(0,"td")(1,"button",62),x("click",function(){g(e);let r=p().index,s=p(2);return f(s.removeItem(r))}),y(2,"i",33),a()()}if(n&2){let e=p(3);c(),m("disabled",e.selectedIssue.items.length<=1)}}function zZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"select",59),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemId,r)||(s.itemId=r),f(r)}),x("change",function(){let r=g(e).index,s=p(2);return f(s.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),a(),b(5,jZ,2,3,"option",46),a()(),o(6,"td")(7,"input",60),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(8,"td")(9,"input",61),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.unitPrice,r)||(s.unitPrice=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(10,"td"),l(11),Le(12,"number"),a(),b(13,WZ,3,1,"td",22),a()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),M("ngModel",e.quantity),m("disabled",i.editMode),c(2),M("ngModel",e.unitPrice),m("disabled",i.editMode),c(2),_(rt(12,10,e.amount,"1.2-2")),c(2),m("ngIf",!i.editMode)}}function qZ(n,t){n&1&&y(0,"td")}function HZ(n,t){if(n&1){let e=F();o(0,"button",63),x("click",function(){g(e);let r=p(2);return f(r.saveIssue())}),l(1),a()}if(n&2){let e=p(2);m("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Issue"," ")}}function GZ(n,t){if(n&1){let e=F();o(0,"div",34)(1,"div",35),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),a(),o(5,"button",37),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",38),b(8,NZ,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Issue Number"),a(),o(13,"input",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.issueNumber,r)||(s.selectedIssue.issueNumber=r),f(r)}),a()(),o(14,"div",41)(15,"label"),l(16,"Issue Date *"),a(),o(17,"input",43),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.issueDate,r)||(s.selectedIssue.issueDate=r),f(r)}),a()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"Warehouse *"),a(),o(22,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.warehouseId,r)||(s.selectedIssue.warehouseId=r),f(r)}),o(23,"option",45),l(24,"Select Warehouse"),a(),b(25,LZ,2,2,"option",46),a()(),o(26,"div",41)(27,"label"),l(28,"Issue Type"),a(),o(29,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.issueType,r)||(s.selectedIssue.issueType=r),f(r)}),b(30,VZ,2,2,"option",47),a()()(),o(31,"div",40)(32,"div",41)(33,"label"),l(34,"Reference Number"),a(),o(35,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.referenceNumber,r)||(s.selectedIssue.referenceNumber=r),f(r)}),a()(),o(36,"div",41)(37,"label"),l(38,"Remarks"),a(),o(39,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedIssue.remarks,r)||(s.selectedIssue.remarks=r),f(r)}),a()()(),o(40,"div",49)(41,"div",50)(42,"h3"),l(43,"Items"),a(),b(44,BZ,3,0,"button",51),a(),o(45,"table",52)(46,"thead")(47,"tr")(48,"th"),l(49,"Item"),a(),o(50,"th"),l(51,"Quantity"),a(),o(52,"th"),l(53,"Unit Price"),a(),o(54,"th"),l(55,"Amount"),a(),b(56,UZ,2,0,"th",22),a()(),o(57,"tbody"),b(58,zZ,14,13,"tr",23),a(),o(59,"tfoot")(60,"tr")(61,"td",53)(62,"strong"),l(63,"Totals:"),a()(),o(64,"td")(65,"strong"),l(66),a()(),o(67,"td")(68,"strong"),l(69),Le(70,"number"),a()(),b(71,qZ,1,0,"td",22),a()()()()(),o(72,"div",54)(73,"button",55),l(74),a(),b(75,HZ,2,2,"button",56),a()()()}if(n&2){let e=p();c(4),_(e.editMode?"View Issue":"New Goods Issue"),c(4),m("ngIf",e.errorMessage),c(5),M("ngModel",e.selectedIssue.issueNumber),c(4),M("ngModel",e.selectedIssue.issueDate),m("disabled",e.editMode),c(5),M("ngModel",e.selectedIssue.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.selectedIssue.issueType),m("disabled",e.editMode),c(),m("ngForOf",e.issueTypes),c(5),M("ngModel",e.selectedIssue.referenceNumber),m("disabled",e.editMode),c(4),M("ngModel",e.selectedIssue.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(12),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedIssue.items),c(8),_(e.selectedIssue.totalQty),c(3),_(rt(70,24,e.selectedIssue.totalValue,"1.2-2")),c(2),m("ngIf",!e.editMode),c(3),_(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var mC=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}issueList=[];showModal=!1;editMode=!1;selectedIssue=this.getEmptyIssue();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];issueTypes=["Internal Use","Sales","Return","Damaged","Other"];ngOnInit(){this.loadIssues(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadIssues(){this.loading=!0,this.stockMovementService.getAllIssues().subscribe({next:t=>{this.issueList=t.map(e=>({id:e.id,issueNumber:e.issueNumber||"",issueDate:e.issueDate||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",issueType:e.issueType||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading issues",t),this.issueList=[],this.loading=!1}})}getEmptyIssue(){return{issueNumber:"",issueDate:new Date().toISOString().split("T")[0],warehouseId:void 0,warehouse:"",issueType:"Internal Use",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedIssue=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedIssue=this.getEmptyIssue(),this.generateIssueNumber(),this.addItem()),this.showModal=!0}generateIssueNumber(){this.settingsService.previewPrefixId("issue").subscribe({next:t=>{this.selectedIssue.issueNumber=t},error:t=>console.error("Error generating issue number",t)})}closeModal(){this.showModal=!1,this.selectedIssue=this.getEmptyIssue(),this.errorMessage=""}addItem(){this.selectedIssue.items.push(this.getEmptyItem())}removeItem(t){this.selectedIssue.items.length>1&&(this.selectedIssue.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedIssue.items[t].itemId);e&&(this.selectedIssue.items[t].itemName=e.name,this.selectedIssue.items[t].itemCode=e.code,this.selectedIssue.items[t].description=e.description||"",this.selectedIssue.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedIssue.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedIssue.totalQty=this.selectedIssue.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedIssue.totalValue=this.selectedIssue.items.reduce((t,e)=>t+(e.amount||0),0)}saveIssue(){this.calculateTotals();let t=this.selectedIssue.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedIssue.warehouseId){this.notificationService.error("Please select a warehouse.");return}this.saving=!0,this.errorMessage="";let e={issueDate:this.selectedIssue.issueDate,warehouseId:this.selectedIssue.warehouseId,issueType:this.selectedIssue.issueType,referenceNumber:this.selectedIssue.referenceNumber,remarks:this.selectedIssue.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createIssue(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Goods Issue created successfully"),this.loadIssues(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving issue"),console.error("Error saving issue",i)}})}deleteIssue(t){confirm("Are you sure you want to delete this issue?")&&this.stockMovementService.deleteIssue(t).subscribe({next:()=>this.loadIssues(),error:e=>console.error("Error deleting issue",e)})}getTotalValue(){return this.issueList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.issueList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.issueList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(V(Zn),V(Ls),V(_i),V(Xi),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-goods-issue"]],standalone:!1,decls:81,vars:11,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-file-export"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"stat-icon","purple"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","9",1,"text-center"],["colspan","9",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],["colspan","2"],[1,"modal-footer"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Issue"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Goods Issue"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," New Issue "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Issues"),a()()(),o(28,"div",7)(29,"div",13),y(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",15),y(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"Pending"),a()()(),o(44,"div",7)(45,"div",17),y(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),Le(50,"number"),a(),o(51,"span",12),l(52,"Total Value"),a()()()(),o(53,"div",19)(54,"div",20)(55,"table",21)(56,"thead")(57,"tr")(58,"th"),l(59,"Issue No."),a(),o(60,"th"),l(61,"Date"),a(),o(62,"th"),l(63,"Warehouse"),a(),o(64,"th"),l(65,"Type"),a(),o(66,"th"),l(67,"Items"),a(),o(68,"th"),l(69,"Total Qty"),a(),o(70,"th"),l(71,"Total Value"),a(),o(72,"th"),l(73,"Status"),a(),o(74,"th"),l(75,"Actions"),a()()(),o(76,"tbody"),b(77,AZ,2,0,"tr",22)(78,RZ,5,0,"tr",22)(79,FZ,26,12,"tr",23),a()()()()(),b(80,GZ,76,27,"div",24)),e&2&&(c(25),_(i.issueList.length),c(8),_(i.getCompletedCount()),c(8),_(i.getPendingCount()),c(8),_(rt(50,8,i.getTotalValue(),"1.2-2")),c(28),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.issueList.length===0),c(),m("ngForOf",i.issueList),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht,yn],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function $Z(n,t){n&1&&(o(0,"tr"),y(1,"td",25),a())}function YZ(n,t){n&1&&(o(0,"tr")(1,"td",26),y(2,"i",27),o(3,"p"),l(4,"No transfers found"),a()()())}function JZ(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td")(15,"span",28),l(16),a()(),o(17,"td")(18,"div",29)(19,"button",30),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(20,"i",31),a(),o(21,"button",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteTransfer(r.id))}),y(22,"i",33),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.transferNumber),c(2),_(e.transferDate),c(2),_(e.fromWarehouse),c(2),_(e.toWarehouse),c(2),D("",e.items.length," items"),c(2),_(e.totalQty),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function KZ(n,t){if(n&1&&(o(0,"div",55),l(1),a()),n&2){let e=p(2);c(),_(e.errorMessage)}}function QZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function XZ(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function ZZ(n,t){if(n&1){let e=F();o(0,"button",30),x("click",function(){g(e);let r=p(2);return f(r.addItem())}),y(1,"i",5),l(2," Add Item "),a()}}function eee(n,t){n&1&&(o(0,"th"),l(1,"Action"),a())}function tee(n,t){if(n&1&&(o(0,"option",45),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function nee(n,t){if(n&1){let e=F();o(0,"td")(1,"button",58),x("click",function(){g(e);let r=p().index,s=p(2);return f(s.removeItem(r))}),y(2,"i",33),a()()}if(n&2){let e=p(3);c(),m("disabled",e.selectedTransfer.items.length<=1)}}function iee(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"select",56),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemId,r)||(s.itemId=r),f(r)}),x("change",function(){let r=g(e).index,s=p(2);return f(s.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),a(),b(5,tee,2,3,"option",46),a()(),o(6,"td")(7,"input",57),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),x("ngModelChange",function(){g(e);let r=p(2);return f(r.calculateTotals())}),a()(),b(8,nee,3,1,"td",22),a()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),M("ngModel",e.quantity),m("disabled",i.editMode),c(),m("ngIf",!i.editMode)}}function ree(n,t){n&1&&y(0,"td")}function oee(n,t){if(n&1){let e=F();o(0,"button",59),x("click",function(){g(e);let r=p(2);return f(r.saveTransfer())}),l(1),a()}if(n&2){let e=p(2);m("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Transfer"," ")}}function aee(n,t){if(n&1){let e=F();o(0,"div",34)(1,"div",35),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),a(),o(5,"button",37),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",38),b(8,KZ,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Transfer Number"),a(),o(13,"input",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTransfer.transferNumber,r)||(s.selectedTransfer.transferNumber=r),f(r)}),a()(),o(14,"div",41)(15,"label"),l(16,"Transfer Date *"),a(),o(17,"input",43),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTransfer.transferDate,r)||(s.selectedTransfer.transferDate=r),f(r)}),a()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"From Warehouse *"),a(),o(22,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTransfer.fromWarehouseId,r)||(s.selectedTransfer.fromWarehouseId=r),f(r)}),o(23,"option",45),l(24,"Select Source Warehouse"),a(),b(25,QZ,2,2,"option",46),a()(),o(26,"div",41)(27,"label"),l(28,"To Warehouse *"),a(),o(29,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTransfer.toWarehouseId,r)||(s.selectedTransfer.toWarehouseId=r),f(r)}),o(30,"option",45),l(31,"Select Destination Warehouse"),a(),b(32,XZ,2,2,"option",46),a()()(),o(33,"div",41)(34,"label"),l(35,"Remarks"),a(),o(36,"textarea",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedTransfer.remarks,r)||(s.selectedTransfer.remarks=r),f(r)}),a()(),o(37,"div",48)(38,"div",49)(39,"h3"),l(40,"Items to Transfer"),a(),b(41,ZZ,3,0,"button",50),a(),o(42,"table",51)(43,"thead")(44,"tr")(45,"th"),l(46,"Item"),a(),o(47,"th"),l(48,"Quantity"),a(),b(49,eee,2,0,"th",22),a()(),o(50,"tbody"),b(51,iee,9,7,"tr",23),a(),o(52,"tfoot")(53,"tr")(54,"td")(55,"strong"),l(56,"Total Quantity:"),a()(),o(57,"td")(58,"strong"),l(59),a()(),b(60,ree,1,0,"td",22),a()()()()(),o(61,"div",52)(62,"button",53),l(63),a(),b(64,oee,2,2,"button",54),a()()()}if(n&2){let e=p();c(4),_(e.editMode?"View Transfer":"New Stock Transfer"),c(4),m("ngIf",e.errorMessage),c(5),M("ngModel",e.selectedTransfer.transferNumber),c(4),M("ngModel",e.selectedTransfer.transferDate),m("disabled",e.editMode),c(5),M("ngModel",e.selectedTransfer.fromWarehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.selectedTransfer.toWarehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.selectedTransfer.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(8),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedTransfer.items),c(8),_(e.selectedTransfer.totalQty),c(),m("ngIf",!e.editMode),c(3),_(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var uC=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}transferList=[];showModal=!1;editMode=!1;selectedTransfer=this.getEmptyTransfer();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];ngOnInit(){this.loadTransfers(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadTransfers(){this.loading=!0,this.stockMovementService.getAllTransfers().subscribe({next:t=>{this.transferList=t.map(e=>({id:e.id,transferNumber:e.transferNumber||"",transferDate:e.transferDate||"",fromWarehouseId:e.fromWarehouseId,fromWarehouse:e.fromWarehouse||"",toWarehouseId:e.toWarehouseId,toWarehouse:e.toWarehouse||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,fromBinId:i.fromBinId,toBinId:i.toBinId}))||[]})),this.loading=!1},error:t=>{console.error("Error loading transfers",t),this.transferList=[],this.loading=!1}})}getEmptyTransfer(){return{transferNumber:"",transferDate:new Date().toISOString().split("T")[0],fromWarehouseId:void 0,fromWarehouse:"",toWarehouseId:void 0,toWarehouse:"",items:[],totalQty:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedTransfer=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedTransfer=this.getEmptyTransfer(),this.generateTransferNumber(),this.addItem()),this.showModal=!0}generateTransferNumber(){this.settingsService.previewPrefixId("transfer").subscribe({next:t=>{this.selectedTransfer.transferNumber=t},error:t=>console.error("Error generating transfer number",t)})}closeModal(){this.showModal=!1,this.selectedTransfer=this.getEmptyTransfer(),this.errorMessage=""}addItem(){this.selectedTransfer.items.push(this.getEmptyItem())}removeItem(t){this.selectedTransfer.items.length>1&&(this.selectedTransfer.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedTransfer.items[t].itemId);e&&(this.selectedTransfer.items[t].itemName=e.name,this.selectedTransfer.items[t].itemCode=e.code,this.selectedTransfer.items[t].description=e.description||"")}calculateTotals(){this.selectedTransfer.totalQty=this.selectedTransfer.items.reduce((t,e)=>t+(e.quantity||0),0)}saveTransfer(){this.calculateTotals();let t=this.selectedTransfer.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with quantity.");return}if(!this.selectedTransfer.fromWarehouseId){this.notificationService.error("Please select a source warehouse.");return}if(!this.selectedTransfer.toWarehouseId){this.notificationService.error("Please select a destination warehouse.");return}if(this.selectedTransfer.fromWarehouseId===this.selectedTransfer.toWarehouseId){this.notificationService.error("Source and destination warehouse cannot be the same.");return}this.saving=!0,this.errorMessage="";let e={transferDate:this.selectedTransfer.transferDate,fromWarehouseId:this.selectedTransfer.fromWarehouseId,toWarehouseId:this.selectedTransfer.toWarehouseId,remarks:this.selectedTransfer.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,fromBinId:i.fromBinId,toBinId:i.toBinId}))};this.stockMovementService.createTransfer(e).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Transfer created successfully"),this.loadTransfers(),this.closeModal()},error:i=>{this.saving=!1,this.notificationService.error(i.error?.error||"Error saving transfer"),console.error("Error saving transfer",i)}})}deleteTransfer(t){confirm("Are you sure you want to delete this transfer?")&&this.stockMovementService.deleteTransfer(t).subscribe({next:()=>this.loadTransfers(),error:e=>console.error("Error deleting transfer",e)})}getCompletedCount(){return this.transferList.filter(t=>t.status==="Completed").length}getInTransitCount(){return this.transferList.filter(t=>t.status==="In Transit").length}getPendingCount(){return this.transferList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success","In Transit":"badge-info",Pending:"badge-warning",Draft:"badge-secondary"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(V(Zn),V(Ls),V(_i),V(Xi),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-stock-transfer"]],standalone:!1,decls:78,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-exchange-alt"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","cyan"],[1,"fas","fa-truck"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","8",1,"text-center"],["colspan","8",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"modal-footer"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Transfer"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Transfer"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," New Transfer "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Transfers"),a()()(),o(28,"div",7)(29,"div",13),y(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Completed"),a()()(),o(36,"div",7)(37,"div",15),y(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"In Transit"),a()()(),o(44,"div",7)(45,"div",17),y(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),a(),o(50,"span",12),l(51,"Pending"),a()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Transfer No."),a(),o(59,"th"),l(60,"Date"),a(),o(61,"th"),l(62,"From Warehouse"),a(),o(63,"th"),l(64,"To Warehouse"),a(),o(65,"th"),l(66,"Items"),a(),o(67,"th"),l(68,"Total Qty"),a(),o(69,"th"),l(70,"Status"),a(),o(71,"th"),l(72,"Actions"),a()()(),o(73,"tbody"),b(74,$Z,2,0,"tr",22)(75,YZ,5,0,"tr",22)(76,JZ,23,8,"tr",23),a()()()()(),b(77,aee,65,22,"div",24)),e&2&&(c(25),_(i.transferList.length),c(8),_(i.getCompletedCount()),c(8),_(i.getInTransitCount()),c(8),_(i.getPendingCount()),c(25),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.transferList.length===0),c(),m("ngForOf",i.transferList),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function see(n,t){n&1&&(o(0,"tr"),y(1,"td",25),a())}function lee(n,t){n&1&&(o(0,"tr")(1,"td",26),y(2,"i",27),o(3,"p"),l(4,"No adjustments found"),a()()())}function cee(n,t){if(n&1){let e=F();o(0,"button",35),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.approveAdjustment(r.id))}),y(1,"i",36),a()}}function dee(n,t){if(n&1){let e=F();o(0,"button",37),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.rejectAdjustment(r.id))}),y(1,"i",38),a()}}function pee(n,t){if(n&1){let e=F();o(0,"button",39),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.deleteAdjustment(r.id))}),y(1,"i",40),a()}}function mee(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td")(9,"span",28),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td")(20,"span",28),l(21),a()(),o(22,"td")(23,"div",29)(24,"button",30),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(25,"i",31),a(),b(26,cee,2,0,"button",32)(27,dee,2,0,"button",33)(28,pee,2,0,"button",34),a()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.adjustmentNumber),c(2),_(e.adjustmentDate),c(2),_(e.itemName),c(2),m("ngClass",i.getTypeClass(e.adjustmentType)),c(),_(e.adjustmentType),c(2),_(e.quantityBefore),c(2),_(e.quantityAdjusted),c(2),_(e.quantityAfter),c(2),_(e.reason),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(5),m("ngIf",e.status==="Pending"),c(),m("ngIf",e.status==="Pending"),c(),m("ngIf",e.status==="Pending")}}function uee(n,t){if(n&1&&(o(0,"div",63),l(1),a()),n&2){let e=p(2);c(),_(e.errorMessage)}}function gee(n,t){if(n&1&&(o(0,"option",52),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.code," - ",e.name)}}function fee(n,t){if(n&1&&(o(0,"option",52),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function hee(n,t){if(n&1&&(o(0,"option",64),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function _ee(n,t){if(n&1&&(o(0,"option",64),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function vee(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(3);c(),Ge(" Stock will increase from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function xee(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(3);c(),Ge(" Stock will decrease from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function yee(n,t){if(n&1&&(o(0,"div",65),y(1,"i",66),b(2,vee,2,2,"span",22)(3,xee,2,2,"span",22),a()),n&2){let e=p(2);c(2),m("ngIf",e.selectedAdjustment.adjustmentType==="INCREASE"),c(),m("ngIf",e.selectedAdjustment.adjustmentType==="DECREASE")}}function Cee(n,t){if(n&1){let e=F();o(0,"button",67),x("click",function(){g(e);let r=p(2);return f(r.saveAdjustment())}),l(1),a()}if(n&2){let e=p(2);m("disabled",e.saving),c(),D(" ",e.saving?"Saving...":"Save Adjustment"," ")}}function bee(n,t){if(n&1){let e=F();o(0,"div",41)(1,"div",42),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",43)(3,"h2"),l(4),a(),o(5,"button",44),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",45),b(8,uee,2,1,"div",46),o(9,"div",47)(10,"div",48)(11,"label"),l(12,"Adjustment Number"),a(),o(13,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.adjustmentNumber,r)||(s.selectedAdjustment.adjustmentNumber=r),f(r)}),a()(),o(14,"div",48)(15,"label"),l(16,"Date *"),a(),o(17,"input",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.adjustmentDate,r)||(s.selectedAdjustment.adjustmentDate=r),f(r)}),a()()(),o(18,"div",47)(19,"div",48)(20,"label"),l(21,"Item *"),a(),o(22,"select",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.itemId,r)||(s.selectedAdjustment.itemId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onItemSelect())}),o(23,"option",52),l(24,"Select Item"),a(),b(25,gee,2,3,"option",53),a()(),o(26,"div",48)(27,"label"),l(28,"Warehouse *"),a(),o(29,"select",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.warehouseId,r)||(s.selectedAdjustment.warehouseId=r),f(r)}),o(30,"option",52),l(31,"Select Warehouse"),a(),b(32,fee,2,2,"option",53),a()()(),o(33,"div",47)(34,"div",48)(35,"label"),l(36,"Adjustment Type *"),a(),o(37,"select",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.adjustmentType,r)||(s.selectedAdjustment.adjustmentType=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.calculateQuantityAfter())}),b(38,hee,2,2,"option",55),a()(),o(39,"div",48)(40,"label"),l(41,"Reason *"),a(),o(42,"select",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.reason,r)||(s.selectedAdjustment.reason=r),f(r)}),b(43,_ee,2,2,"option",55),a()()(),o(44,"div",47)(45,"div",48)(46,"label"),l(47,"Current Stock"),a(),o(48,"input",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.quantityBefore,r)||(s.selectedAdjustment.quantityBefore=r),f(r)}),a()(),o(49,"div",48)(50,"label"),l(51,"Quantity to Adjust *"),a(),o(52,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.quantityAdjusted,r)||(s.selectedAdjustment.quantityAdjusted=r),f(r)}),x("ngModelChange",function(){g(e);let r=p();return f(r.calculateQuantityAfter())}),a()(),o(53,"div",48)(54,"label"),l(55,"New Stock"),a(),o(56,"input",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.quantityAfter,r)||(s.selectedAdjustment.quantityAfter=r),f(r)}),a()()(),o(57,"div",48)(58,"label"),l(59,"Remarks"),a(),o(60,"textarea",58),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedAdjustment.remarks,r)||(s.selectedAdjustment.remarks=r),f(r)}),a()(),b(61,yee,4,2,"div",59),a(),o(62,"div",60)(63,"button",61),l(64),a(),b(65,Cee,2,2,"button",62),a()()()}if(n&2){let e=p();c(4),_(e.editMode?"View Adjustment":"New Stock Adjustment"),c(4),m("ngIf",e.errorMessage),c(5),M("ngModel",e.selectedAdjustment.adjustmentNumber),c(4),M("ngModel",e.selectedAdjustment.adjustmentDate),m("disabled",e.editMode),c(5),M("ngModel",e.selectedAdjustment.itemId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.items),c(4),M("ngModel",e.selectedAdjustment.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(5),M("ngModel",e.selectedAdjustment.adjustmentType),m("disabled",e.editMode),c(),m("ngForOf",e.adjustmentTypes),c(4),M("ngModel",e.selectedAdjustment.reason),m("disabled",e.editMode),c(),m("ngForOf",e.reasons),c(5),M("ngModel",e.selectedAdjustment.quantityBefore),c(4),M("ngModel",e.selectedAdjustment.quantityAdjusted),m("disabled",e.editMode),c(4),M("ngModel",e.selectedAdjustment.quantityAfter),c(4),M("ngModel",e.selectedAdjustment.remarks),m("disabled",e.editMode),c(),m("ngIf",e.selectedAdjustment.itemId&&!e.editMode),c(3),_(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var gC=class n{constructor(t,e,i,r,s){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.notificationService=s}adjustments=[];showModal=!1;editMode=!1;selectedAdjustment=this.getEmptyAdjustment();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];adjustmentTypes=["INCREASE","DECREASE"];reasons=["Inventory Count","Damaged Goods","Expired Items","Theft/Loss","Found Items","Return to Stock","Quality Issue","Administrative Correction","Other"];ngOnInit(){this.loadAdjustments(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadAdjustments(){this.loading=!0,this.stockMovementService.getAllAdjustments().subscribe({next:t=>{this.adjustments=t.map(e=>({id:e.id,adjustmentNumber:e.adjustmentNumber||"",adjustmentDate:e.adjustmentDate||"",adjustmentType:e.adjustmentType||"",itemId:e.itemId,itemName:e.item||"",itemCode:e.itemCode||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",binId:e.binId,bin:e.bin||"",quantityBefore:e.quantityBefore||0,quantityAdjusted:e.quantityAdjusted||0,quantityAfter:e.quantityAfter||0,valueDifference:e.valueDifference||0,reason:e.reason||"",status:e.status||"Pending",remarks:e.remarks||""})),this.loading=!1},error:t=>{console.error("Error loading adjustments",t),this.adjustments=[],this.loading=!1}})}getEmptyAdjustment(){return{adjustmentNumber:"",adjustmentDate:new Date().toISOString().split("T")[0],adjustmentType:"INCREASE",itemId:void 0,itemName:"",warehouseId:void 0,warehouse:"",quantityBefore:0,quantityAdjusted:0,quantityAfter:0,reason:"Inventory Count",status:"Pending",remarks:""}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedAdjustment=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.generateAdjustmentNumber()),this.showModal=!0}generateAdjustmentNumber(){this.settingsService.previewPrefixId("adjustment").subscribe({next:t=>{this.selectedAdjustment.adjustmentNumber=t},error:t=>console.error("Error generating adjustment number",t)})}closeModal(){this.showModal=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.errorMessage=""}onItemSelect(){let t=this.items.find(e=>e.id===this.selectedAdjustment.itemId);t&&(this.selectedAdjustment.itemName=t.name,this.selectedAdjustment.itemCode=t.code,this.selectedAdjustment.quantityBefore=t.currentStock||0,this.calculateQuantityAfter())}calculateQuantityAfter(){let t=this.selectedAdjustment.quantityBefore||0,e=this.selectedAdjustment.quantityAdjusted||0;this.selectedAdjustment.adjustmentType==="INCREASE"?this.selectedAdjustment.quantityAfter=t+e:this.selectedAdjustment.quantityAfter=t-e}saveAdjustment(){if(!this.selectedAdjustment.itemId){this.notificationService.error("Please select an item.");return}if(!this.selectedAdjustment.warehouseId){this.notificationService.error("Please select a warehouse.");return}if(!this.selectedAdjustment.quantityAdjusted||this.selectedAdjustment.quantityAdjusted<=0){this.notificationService.error("Please enter a valid quantity to adjust.");return}if(!this.selectedAdjustment.reason){this.notificationService.error("Please select a reason for adjustment.");return}this.saving=!0,this.errorMessage="";let t={adjustmentDate:this.selectedAdjustment.adjustmentDate,adjustmentType:this.selectedAdjustment.adjustmentType,itemId:this.selectedAdjustment.itemId,warehouseId:this.selectedAdjustment.warehouseId,binId:this.selectedAdjustment.binId,quantityAdjusted:this.selectedAdjustment.quantityAdjusted,reason:this.selectedAdjustment.reason,remarks:this.selectedAdjustment.remarks};this.stockMovementService.createAdjustment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Adjustment created successfully"),this.loadAdjustments(),this.closeModal()},error:e=>{this.saving=!1,this.notificationService.error(e.error?.error||"Error saving adjustment"),console.error("Error saving adjustment",e)}})}deleteAdjustment(t){confirm("Are you sure you want to delete this adjustment?")&&this.stockMovementService.deleteAdjustment(t).subscribe({next:()=>this.loadAdjustments(),error:e=>console.error("Error deleting adjustment",e)})}approveAdjustment(t){confirm("Are you sure you want to approve this adjustment? This will update the stock levels.")&&this.stockMovementService.approveAdjustment(t).subscribe({next:()=>{this.notificationService.success("Adjustment approved successfully"),this.loadAdjustments()},error:e=>{console.error("Error approving adjustment",e),this.notificationService.error(e.error?.error||"Error approving adjustment")}})}rejectAdjustment(t){confirm("Are you sure you want to reject this adjustment?")&&this.stockMovementService.rejectAdjustment(t).subscribe({next:()=>{this.notificationService.success("Adjustment rejected"),this.loadAdjustments()},error:e=>{console.error("Error rejecting adjustment",e),this.notificationService.error(e.error?.error||"Error rejecting adjustment")}})}getIncreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="INCREASE").length}getDecreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="DECREASE").length}getPendingCount(){return this.adjustments.filter(t=>t.status==="Pending").length}getApprovedCount(){return this.adjustments.filter(t=>t.status==="Approved"||t.status==="Completed").length}getStatusClass(t){return{Approved:"badge-success",Completed:"badge-success",Pending:"badge-warning",Rejected:"badge-danger",Draft:"badge-info"}[t]||"badge-info"}getTypeClass(t){return t==="INCREASE"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(V(Zn),V(Ls),V(_i),V(Xi),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-stock-adjustments"]],standalone:!1,decls:82,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-sliders-h"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-arrow-up"],[1,"stat-icon","red"],[1,"fas","fa-arrow-down"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","10",1,"text-center"],["colspan","10",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-success","title","Approve",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning","title","Reject",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Delete",3,"click",4,"ngIf"],["title","Approve",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-times"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["type","number","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","info-box",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"info-box"],[1,"fas","fa-info-circle"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Adjustments"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Stock Movement"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Adjustments"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," New Adjustment "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25),a(),o(26,"span",12),l(27,"Total Adjustments"),a()()(),o(28,"div",7)(29,"div",13),y(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33),a(),o(34,"span",12),l(35,"Increases"),a()()(),o(36,"div",7)(37,"div",15),y(38,"i",16),a(),o(39,"div",10)(40,"span",11),l(41),a(),o(42,"span",12),l(43,"Decreases"),a()()(),o(44,"div",7)(45,"div",17),y(46,"i",18),a(),o(47,"div",10)(48,"span",11),l(49),a(),o(50,"span",12),l(51,"Pending Approval"),a()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Adjustment No."),a(),o(59,"th"),l(60,"Date"),a(),o(61,"th"),l(62,"Item"),a(),o(63,"th"),l(64,"Type"),a(),o(65,"th"),l(66,"Before"),a(),o(67,"th"),l(68,"Adjusted"),a(),o(69,"th"),l(70,"After"),a(),o(71,"th"),l(72,"Reason"),a(),o(73,"th"),l(74,"Status"),a(),o(75,"th"),l(76,"Actions"),a()()(),o(77,"tbody"),b(78,see,2,0,"tr",22)(79,lee,5,0,"tr",22)(80,mee,29,14,"tr",23),a()()()()(),b(81,bee,66,28,"div",24)),e&2&&(c(25),_(i.adjustments.length),c(8),_(i.getIncreaseCount()),c(8),_(i.getDecreaseCount()),c(8),_(i.getPendingCount()),c(29),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.adjustments.length===0),c(),m("ngForOf",i.adjustments),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var wi=class n{constructor(){}exportToCSV(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),s=[r.join(","),...t.map(d=>r.map(u=>{let h=d[u],v=h==null?"":String(h);return v.includes(",")||v.includes('"')||v.includes(`
`)?`"${v.replace(/"/g,'""')}"`:v}).join(","))].join(`
`);this.downloadFile(s,`${e}.csv`,"text/csv")}exportToExcel(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),s='<table border="1">';s+="<tr>"+r.map(u=>`<th style="background:#008080;color:white;padding:8px">${this.formatHeader(u)}</th>`).join("")+"</tr>",t.forEach(u=>{s+="<tr>"+r.map(h=>{let v=u[h];return`<td style="padding:5px">${v??""}</td>`}).join("")+"</tr>"}),s+="</table>";let d=`
      <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head><meta charset="UTF-8"></head>
      <body>${s}</body></html>
    `;this.downloadFile(d,`${e}.xls`,"application/vnd.ms-excel")}exportToPDF(t,e,i,r){if(!t||t.length===0){alert("No data to export");return}let s=r||Object.keys(t[0]),d=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>${i}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #008080; text-align: center; margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #008080; color: white; padding: 10px; text-align: left; }
          td { padding: 8px; border-bottom: 1px solid #ddd; }
          tr:hover { background-color: #f5f5f5; }
          .report-date { text-align: right; color: #666; margin-bottom: 10px; }
        </style>
      </head>
      <body>
        <h1>${i}</h1>
        <div class="report-date">Generated: ${new Date().toLocaleString()}</div>
        <table>
          <thead>
            <tr>${s.map(h=>`<th>${this.formatHeader(h)}</th>`).join("")}</tr>
          </thead>
          <tbody>
            ${t.map(h=>"<tr>"+s.map(v=>{let C=h[v];return`<td>${C??""}</td>`}).join("")+"</tr>").join("")}
          </tbody>
        </table>
      </body>
      </html>
    `,u=window.open("","_blank");u&&(u.document.write(d),u.document.close(),u.focus(),setTimeout(()=>{u.print()},500))}formatHeader(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}downloadFile(t,e,i){let r=new Blob([t],{type:i}),s=window.URL.createObjectURL(r),d=document.createElement("a");d.href=s,d.download=e,d.click(),window.URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Mee(n,t){n&1&&(o(0,"div",27)(1,"div",28),y(2,"i",29),o(3,"p"),l(4,"Loading report data..."),a()()())}function See(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function Pee(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function wee(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function Eee(n,t){if(n&1&&(o(0,"div",12)(1,"div",31)(2,"div",32)(3,"span",33),l(4,"Total Opening:"),a(),o(5,"span",34),l(6),a()(),o(7,"div",32)(8,"span",33),l(9,"Total In:"),a(),o(10,"span",35),l(11),a()(),o(12,"div",32)(13,"span",33),l(14,"Total Out:"),a(),o(15,"span",36),l(16),a()(),o(17,"div",32)(18,"span",33),l(19,"Total Closing:"),a(),o(20,"span",34),l(21),a()()()()),n&2){let e=p();c(6),_(e.totalOpening),c(5),_(e.totalIn),c(5),_(e.totalOut),c(5),_(e.totalClosing)}}function Oee(n,t){n&1&&(o(0,"tr")(1,"td",37),y(2,"i",38),o(3,"p"),l(4,"Generate report to view data"),a()()())}function Tee(n,t){n&1&&(o(0,"tr")(1,"td",37),y(2,"i",29),a()())}function kee(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",24),l(12),a(),o(13,"td",39),l(14),a(),o(15,"td",40),l(16),a(),o(17,"td",24),l(18),a(),o(19,"td",24),l(20),Le(21,"number"),a(),o(22,"td",24),l(23),Le(24,"number"),a()()),n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.group),c(2),_(e.supplier),c(2),_(e.unit),c(2),_(e.opening),c(2),_(e.stockIn),c(2),_(e.stockOut),c(2),_(e.closing),c(2),_(rt(21,11,e.unitCost,"1.2-2")),c(3),_(rt(24,14,e.value,"1.2-2"))}}var fC=class n{constructor(t,e,i,r,s,d){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.supplierService=r;this.ledgerService=s;this.exportService=d}reportData=[];items=[];groups=[];warehouses=[];suppliers=[];selectedWarehouse="";selectedGroup="";selectedSupplier="";fromDate="";toDate="";loading=!1;dataReady=!1;totalOpening=0;totalIn=0;totalOut=0;totalClosing=0;ngOnInit(){this.loadFilters(),this.generateReport()}loadFilters(){this.loading=!1,fo({groups:this.itemGroupService.getAll(),warehouses:this.warehouseService.getAllWarehouses(),suppliers:this.supplierService.getAll()}).subscribe({next:({groups:t,warehouses:e,suppliers:i})=>{this.groups=t,this.warehouses=e,this.suppliers=i},error:t=>{console.error("Error loading filters",t)}})}generateReport(){this.loading=!1,fo({items:this.itemService.getAll(),ledger:this.ledgerService.getAll({warehouseId:this.selectedWarehouse?parseInt(this.selectedWarehouse):void 0,startDate:this.fromDate||void 0,endDate:this.toDate||void 0})}).subscribe({next:({items:t,ledger:e})=>{let i=t;this.selectedGroup&&(i=i.filter(s=>s.group?.name===this.selectedGroup)),this.selectedSupplier&&(i=i.filter(s=>s.supplier?.name===this.selectedSupplier));let r=new Map;e.forEach(s=>{let d=s.item?.id;if(d){r.has(d)||r.set(d,{stockIn:0,stockOut:0});let u=r.get(d);u.stockIn+=s.quantityIn||0,u.stockOut+=s.quantityOut||0}}),this.reportData=i.map(s=>{let d=r.get(s.id)||{stockIn:0,stockOut:0},u=s.currentStock||0,h=u-d.stockIn+d.stockOut;return{code:s.code,name:s.name,group:s.group?.name||"",unit:s.unitOfMeasure?.name||"",supplier:s.supplier?.name||"",opening:Math.max(0,h),stockIn:d.stockIn,stockOut:d.stockOut,closing:u,unitCost:s.unitCost||0,value:u*(s.unitCost||0)}}),this.calculateTotals(),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}completeLoading(){this.loading=!1,this.dataReady=!0}calculateTotals(){this.totalOpening=this.reportData.reduce((t,e)=>t+e.opening,0),this.totalIn=this.reportData.reduce((t,e)=>t+e.stockIn,0),this.totalOut=this.reportData.reduce((t,e)=>t+e.stockOut,0),this.totalClosing=this.reportData.reduce((t,e)=>t+e.closing,0)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-summary-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-summary-report","Stock Summary Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-summary-report")}static \u0275fac=function(e){return new(e||n)(V(_i),V(qa),V(Xi),V(yo),V(tc),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-stock-summary-report"]],standalone:!1,decls:94,vars:18,consts:[[1,"report-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","11",1,"empty-state"],[1,"fas","fa-chart-bar"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,Mee,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Stock Summary Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Stock Summary"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Group"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(34,"option",16),l(35,"All Groups"),a(),b(36,See,2,2,"option",17),a()(),o(37,"div",14)(38,"label"),l(39,"Warehouse"),a(),o(40,"select",15),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(41,"option",16),l(42,"All Warehouses"),a(),b(43,Pee,2,2,"option",17),a()(),o(44,"div",14)(45,"label"),l(46,"Supplier"),a(),o(47,"select",15),S("ngModelChange",function(s){return P(i.selectedSupplier,s)||(i.selectedSupplier=s),s}),o(48,"option",16),l(49,"All Suppliers"),a(),b(50,wee,2,2,"option",17),a()(),o(51,"div",14)(52,"label"),l(53,"From Date"),a(),o(54,"input",18),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(55,"div",14)(56,"label"),l(57,"To Date"),a(),o(58,"input",18),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(59,"button",19),x("click",function(){return i.generateReport()}),y(60,"i",20),l(61),a()()(),b(62,Eee,22,4,"div",21),o(63,"div",12)(64,"div",22)(65,"table",23)(66,"thead")(67,"tr")(68,"th"),l(69,"Item Code"),a(),o(70,"th"),l(71,"Item Name"),a(),o(72,"th"),l(73,"Group"),a(),o(74,"th"),l(75,"Supplier"),a(),o(76,"th"),l(77,"Unit"),a(),o(78,"th",24),l(79,"Opening"),a(),o(80,"th",24),l(81,"In"),a(),o(82,"th",24),l(83,"Out"),a(),o(84,"th",24),l(85,"Closing"),a(),o(86,"th",24),l(87,"Unit Cost"),a(),o(88,"th",24),l(89,"Value"),a()()(),o(90,"tbody"),b(91,Oee,5,0,"tr",25)(92,Tee,3,0,"tr",25)(93,kee,25,17,"tr",26),a()()()(),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(18),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),M("ngModel",i.selectedSupplier),c(3),m("ngForOf",i.suppliers),c(4),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(29),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function Iee(n,t){n&1&&(o(0,"div",32)(1,"div",33),y(2,"i",34),o(3,"p"),l(4,"Loading report data..."),a()()())}function Dee(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function Aee(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Ree(n,t){if(n&1&&(o(0,"div",12)(1,"div",36)(2,"div",37)(3,"span",38),l(4,"Total Items:"),a(),o(5,"span",39),l(6),a()(),o(7,"div",37)(8,"span",38),l(9,"Valuation Method:"),a(),o(10,"span",39),l(11),a()(),o(12,"div",40)(13,"span",38),l(14,"Total Inventory Value:"),a(),o(15,"span",39),l(16),Le(17,"number"),a()()()()),n&2){let e=p();c(6),_(e.reportData.length),c(5),_(e.getValuationMethodDisplay()),c(5),_(rt(17,3,e.totalValue,"1.2-2"))}}function Fee(n,t){n&1&&(o(0,"tr")(1,"td",41),y(2,"i",42),o(3,"p"),l(4,"Generate report to view inventory valuation"),a()()())}function Nee(n,t){n&1&&(o(0,"tr")(1,"td",41),y(2,"i",34),a()())}function Lee(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",29),l(10),Le(11,"number"),a(),o(12,"td",29),l(13),Le(14,"number"),a(),o(15,"td",29),l(16),Le(17,"number"),a()()),n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.group),c(2),_(e.unit),c(2),_(rt(11,7,e.quantity,"1.0-2")),c(3),_(rt(14,10,e.unitCost,"1.2-2")),c(3),_(rt(17,13,e.totalValue,"1.2-2"))}}function Vee(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",43)(2,"td",44)(3,"strong"),l(4,"Grand Total:"),a()(),o(5,"td",29)(6,"strong"),l(7),Le(8,"number"),a()()()()),n&2){let e=p();c(7),_(rt(8,1,e.totalValue,"1.2-2"))}}var hC=class n{constructor(t,e,i,r,s){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.settingsService=r;this.exportService=s}reportData=[];items=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";totalValue=0;loading=!1;dataReady=!1;valuationMethod="FIFO";asOfDate="";ngOnInit(){this.loadFilters(),this.loadValuationMethod()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadValuationMethod(){this.settingsService.getGeneralSettings().subscribe({next:t=>{this.valuationMethod=t.valuationMethod||"FIFO"},error:t=>{console.error("Error loading valuation method",t),this.valuationMethod="FIFO"}})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=t;this.selectedGroup&&(e=e.filter(i=>i.group?.name===this.selectedGroup)),this.reportData=e.map(i=>{let r=i.currentStock||0,s=i.unitCost||0,d=r*s;return{code:i.code,name:i.name,group:i.group?.name||"",unit:i.unitOfMeasure?.name||"",quantity:r,unitCost:s,totalValue:d,valuationMethod:this.getValuationMethodDisplay()}}),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}getValuationMethodDisplay(){return{FIFO:"First In, First Out",LIFO:"Last In, First Out",WEIGHTED_AVERAGE:"Weighted Average"}[this.valuationMethod]||this.valuationMethod}exportToExcel(){this.exportService.exportToExcel(this.reportData,"inventory-valuation-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"inventory-valuation-report",`Inventory Valuation Report (${this.getValuationMethodDisplay()})`)}exportToCSV(){this.exportService.exportToCSV(this.reportData,"inventory-valuation-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(_i),V(qa),V(Xi),V(Zn),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-inventory-valuation-report"]],standalone:!1,decls:88,vars:17,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",1,"form-control",3,"ngModelChange","ngModel"],["value","FIFO"],["value","LIFO"],["value","WEIGHTED_AVERAGE"],[1,"form-text","text-muted"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"summary-item","highlight"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"total-row"],["colspan","6",1,"text-right"]],template:function(e,i){e&1&&(b(0,Iee,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Inventory Valuation Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Valuation"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Group"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(34,"option",16),l(35,"All Groups"),a(),b(36,Dee,2,2,"option",17),a()(),o(37,"div",14)(38,"label"),l(39,"Warehouse"),a(),o(40,"select",15),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(41,"option",16),l(42,"All Warehouses"),a(),b(43,Aee,2,2,"option",17),a()(),o(44,"div",14)(45,"label"),l(46,"As of Date"),a(),o(47,"input",18),S("ngModelChange",function(s){return P(i.asOfDate,s)||(i.asOfDate=s),s}),a()(),o(48,"div",14)(49,"label"),l(50,"Valuation Method"),a(),o(51,"select",19),S("ngModelChange",function(s){return P(i.valuationMethod,s)||(i.valuationMethod=s),s}),o(52,"option",20),l(53,"FIFO (First In, First Out)"),a(),o(54,"option",21),l(55,"LIFO (Last In, First Out)"),a(),o(56,"option",22),l(57,"Weighted Average"),a()(),o(58,"small",23),l(59,"Set in General Settings"),a()(),o(60,"button",24),x("click",function(){return i.generateReport()}),y(61,"i",25),l(62),a()()(),b(63,Ree,18,6,"div",26),o(64,"div",12)(65,"div",27)(66,"table",28)(67,"thead")(68,"tr")(69,"th"),l(70,"Item Code"),a(),o(71,"th"),l(72,"Item Name"),a(),o(73,"th"),l(74,"Group"),a(),o(75,"th"),l(76,"Unit"),a(),o(77,"th",29),l(78,"Quantity"),a(),o(79,"th",29),l(80,"Unit Cost"),a(),o(81,"th",29),l(82,"Total Value"),a()()(),o(83,"tbody"),b(84,Fee,5,0,"tr",30)(85,Nee,3,0,"tr",30)(86,Lee,18,16,"tr",31),a(),b(87,Vee,9,4,"tfoot",30),a()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),M("ngModel",i.asOfDate),c(4),M("ngModel",i.valuationMethod),c(9),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(21),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function Bee(n,t){n&1&&(o(0,"div",29)(1,"div",30),y(2,"i",31),o(3,"p"),l(4,"Loading report data..."),a()()())}function Uee(n,t){if(n&1&&(o(0,"option",32),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.name," (",e.code,")")}}function jee(n,t){if(n&1&&(o(0,"option",32),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Wee(n,t){if(n&1&&(o(0,"div",12)(1,"div",33)(2,"div",34)(3,"span",35),l(4,"Item:"),a(),o(5,"span",36),l(6),a()(),o(7,"div",34)(8,"span",35),l(9,"Total In:"),a(),o(10,"span",37),l(11),a()(),o(12,"div",34)(13,"span",35),l(14,"Total Out:"),a(),o(15,"span",38),l(16),a()(),o(17,"div",34)(18,"span",35),l(19,"Net Movement:"),a(),o(20,"span",36),l(21),a()()()()),n&2){let e=p();c(6),_(e.getSelectedItemName()),c(5),_(e.totalIn),c(5),_(e.totalOut),c(4),ie("text-success",e.totalIn-e.totalOut>=0)("text-danger",e.totalIn-e.totalOut<0),c(),D(" ",e.totalIn-e.totalOut," ")}}function zee(n,t){n&1&&(o(0,"tr")(1,"td",39),y(2,"i",40),o(3,"p"),l(4,"Select an item and generate report to view movements"),a()()())}function qee(n,t){n&1&&(o(0,"tr")(1,"td",39),y(2,"i",31),a()())}function Hee(n,t){if(n&1){let e=F();o(0,"tr",41),x("click",function(){let r=g(e).$implicit,s=p();return f(s.drillDown(r))}),o(1,"td"),l(2),Le(3,"date"),a(),o(4,"td",42),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td",43),l(11),a(),o(12,"td",44),l(13),a(),o(14,"td",26),l(15),a(),o(16,"td",26),l(17),Le(18,"number"),a(),o(19,"td",26),l(20),Le(21,"number"),a()()}if(n&2){let e=t.$implicit;c(2),_(rt(3,9,e.date,"shortDate")),c(3),_(e.documentNo),c(2),_(e.transactionType),c(2),_(e.warehouse),c(2),_(e.quantityIn>0?e.quantityIn:""),c(2),_(e.quantityOut>0?e.quantityOut:""),c(2),_(e.balance),c(2),_(rt(18,12,e.rate,"1.2-2")),c(3),_(rt(21,15,e.value,"1.2-2"))}}var _C=class n{constructor(t,e,i,r,s){this.itemService=t;this.warehouseService=e;this.ledgerService=i;this.exportService=r;this.router=s}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;dataReady=!1;totalIn=0;totalOut=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){if(!this.selectedItem){alert("Please select an item");return}this.loading=!0,this.dataReady=!1;let t={itemId:parseInt(this.selectedItem)};this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:this.formatTransactionType(i.transactionType),warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0})),this.totalIn=this.reportData.reduce((i,r)=>i+r.quantityIn,0),this.totalOut=this.reportData.reduce((i,r)=>i+r.quantityOut,0),this.completeLoading()},error:e=>{console.error("Error generating report",e),this.completeLoading()}})}formatTransactionType(t){return{GRN:"Goods Receipt",GOODS_RECEIPT:"Goods Receipt",ISSUE:"Goods Issue",GOODS_ISSUE:"Goods Issue",TRANSFER:"Stock Transfer",STOCK_TRANSFER:"Stock Transfer",ADJUSTMENT:"Stock Adjustment",STOCK_ADJUSTMENT:"Stock Adjustment"}[t]||t}drillDown(t){let e=t.transactionType,i="";e.includes("Receipt")?i="/app/stock-movement/goods-receipt":e.includes("Issue")?i="/app/stock-movement/goods-issue":e.includes("Transfer")?i="/app/stock-movement/stock-transfer":e.includes("Adjustment")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}getSelectedItemName(){let t=this.items.find(e=>e.id?.toString()===this.selectedItem);return t?`${t.code} - ${t.name}`:""}exportToExcel(){this.exportService.exportToExcel(this.reportData,"item-movement-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"item-movement-report","Item Movement Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"item-movement-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(_i),V(Xi),V(tc),V(wi),V(tn))};static \u0275cmp=_e({type:n,selectors:[["app-item-movement-report"]],standalone:!1,decls:85,vars:16,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-chart-line"],[1,"clickable-row",3,"click"],[1,"link-text"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(b(0,Bee,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Item Movement Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Item Movement"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Item "),o(33,"span",15),l(34,"*"),a()(),o(35,"select",16),S("ngModelChange",function(s){return P(i.selectedItem,s)||(i.selectedItem=s),s}),o(36,"option",17),l(37,"Select Item"),a(),b(38,Uee,2,3,"option",18),a()(),o(39,"div",14)(40,"label"),l(41,"Warehouse"),a(),o(42,"select",19),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(43,"option",17),l(44,"All Warehouses"),a(),b(45,jee,2,2,"option",18),a()(),o(46,"div",14)(47,"label"),l(48,"From Date"),a(),o(49,"input",20),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(50,"div",14)(51,"label"),l(52,"To Date"),a(),o(53,"input",20),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(54,"button",21),x("click",function(){return i.generateReport()}),y(55,"i",22),l(56),a()()(),b(57,Wee,22,8,"div",23),o(58,"div",12)(59,"div",24)(60,"table",25)(61,"thead")(62,"tr")(63,"th"),l(64,"Date"),a(),o(65,"th"),l(66,"Document No"),a(),o(67,"th"),l(68,"Type"),a(),o(69,"th"),l(70,"Warehouse"),a(),o(71,"th",26),l(72,"In"),a(),o(73,"th",26),l(74,"Out"),a(),o(75,"th",26),l(76,"Balance"),a(),o(77,"th",26),l(78,"Rate"),a(),o(79,"th",26),l(80,"Value"),a()()(),o(81,"tbody"),b(82,zee,5,0,"tr",27)(83,qee,3,0,"tr",27)(84,Hee,22,18,"tr",28),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(10),M("ngModel",i.selectedItem),c(3),m("ngForOf",i.items),c(4),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading||!i.selectedItem),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,je,We,Ie,Ue,Oe,cn,Ee,ht,yn,ir],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function Gee(n,t){n&1&&(o(0,"div",26)(1,"div",27),y(2,"i",28),o(3,"p"),l(4,"Loading report data..."),a()()())}function $ee(n,t){if(n&1&&(o(0,"option",29),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.name," (",e.code,")")}}function Yee(n,t){if(n&1&&(o(0,"option",29),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Jee(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",31),o(3,"p"),l(4,"Generate report to view data"),a()()())}function Kee(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",28),a()())}function Qee(n,t){if(n&1){let e=F();o(0,"tr",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.drillDown(r))}),o(1,"td"),l(2),Le(3,"date"),a(),o(4,"td",33),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td",23),l(13),a(),o(14,"td",23),l(15),a(),o(16,"td",23),l(17),a(),o(18,"td",23),l(19),Le(20,"number"),a(),o(21,"td",23),l(22),Le(23,"number"),a()()}if(n&2){let e=t.$implicit;c(2),_(rt(3,11,e.date,"shortDate")),c(3),_(e.documentNo),c(2),Ge("",e.itemCode," - ",e.itemName),c(2),_(e.transactionType),c(2),_(e.warehouse),c(2),_(e.quantityIn),c(2),_(e.quantityOut),c(2),_(e.balance),c(2),_(rt(20,14,e.rate,"1.2-2")),c(3),_(rt(23,17,e.value,"1.2-2"))}}var vC=class n{constructor(t,e,i,r,s){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.exportService=r;this.router=s}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;dataReady=!1;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!1;let t={};this.selectedItem&&(t.itemId=parseInt(this.selectedItem)),this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:i.transactionType,itemCode:i.item?.code||"",itemName:i.item?.name||"",warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0,remarks:i.remarks||""})),this.completeLoading()},error:e=>{console.error("Error generating report",e),this.completeLoading()}})}drillDown(t){let e=t.transactionType,i="";e==="GRN"||e==="GOODS_RECEIPT"?i="/app/stock-movement/goods-receipt":e==="ISSUE"||e==="GOODS_ISSUE"?i="/app/stock-movement/goods-issue":e==="TRANSFER"||e==="STOCK_TRANSFER"?i="/app/stock-movement/stock-transfer":(e==="ADJUSTMENT"||e==="STOCK_ADJUSTMENT")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-ledger-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-ledger-report","Stock Ledger Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-ledger-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(tc),V(_i),V(Xi),V(wi),V(tn))};static \u0275cmp=_e({type:n,selectors:[["app-stock-ledger-report"]],standalone:!1,decls:84,vars:15,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],["colspan","10",1,"empty-state"],[1,"fas","fa-book-open"],[1,"clickable-row",3,"click"],[1,"link-text"]],template:function(e,i){e&1&&(b(0,Gee,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Stock Ledger Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Stock Ledger"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Item"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedItem,s)||(i.selectedItem=s),s}),o(34,"option",16),l(35,"All Items"),a(),b(36,$ee,2,3,"option",17),a()(),o(37,"div",14)(38,"label"),l(39,"Warehouse"),a(),o(40,"select",15),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(41,"option",16),l(42,"All Warehouses"),a(),b(43,Yee,2,2,"option",17),a()(),o(44,"div",14)(45,"label"),l(46,"From Date"),a(),o(47,"input",18),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(48,"div",14)(49,"label"),l(50,"To Date"),a(),o(51,"input",18),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(52,"button",19),x("click",function(){return i.generateReport()}),y(53,"i",20),l(54),a()()(),o(55,"div",12)(56,"div",21)(57,"table",22)(58,"thead")(59,"tr")(60,"th"),l(61,"Date"),a(),o(62,"th"),l(63,"Document No"),a(),o(64,"th"),l(65,"Item"),a(),o(66,"th"),l(67,"Type"),a(),o(68,"th"),l(69,"Warehouse"),a(),o(70,"th",23),l(71,"In"),a(),o(72,"th",23),l(73,"Out"),a(),o(74,"th",23),l(75,"Balance"),a(),o(76,"th",23),l(77,"Rate"),a(),o(78,"th",23),l(79,"Value"),a()()(),o(80,"tbody"),b(81,Jee,5,0,"tr",24)(82,Kee,3,0,"tr",24)(83,Qee,24,20,"tr",25),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedItem),c(3),m("ngForOf",i.items),c(4),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(27),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn,ir],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function Xee(n,t){n&1&&(o(0,"div",25)(1,"div",26),y(2,"i",27),o(3,"p"),l(4,"Loading report data..."),a()()())}function Zee(n,t){if(n&1&&(o(0,"option",28),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function ete(n,t){if(n&1&&(o(0,"div",12)(1,"div",29)(2,"div",30)(3,"span",31),l(4,"Total Groups:"),a(),o(5,"span",32),l(6),a()(),o(7,"div",30)(8,"span",31),l(9,"Total Quantity:"),a(),o(10,"span",32),l(11),Le(12,"number"),a()(),o(13,"div",30)(14,"span",31),l(15,"Total Value:"),a(),o(16,"span",32),l(17),Le(18,"number"),a()()()()),n&2){let e=p();c(6),_(e.reportData.length),c(5),_(rt(12,3,e.totalQuantity,"1.0-2")),c(6),_(rt(18,6,e.totalValue,"1.2-2"))}}function tte(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",34),o(3,"p"),l(4,"Generate report to view data"),a()()())}function nte(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",27),a()())}function ite(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"number"),a(),o(8,"td"),l(9),Le(10,"number"),a()()),n&2){let e=t.$implicit;c(2),_(e.group),c(2),_(e.itemsCount),c(2),_(rt(7,4,e.totalQuantity,"1.0-2")),c(3),_(rt(10,7,e.totalValue,"1.2-2"))}}var xC=class n{constructor(t,e,i){this.itemGroupService=t;this.itemService=e;this.exportService=i}reportData=[];groups=[];selectedGroup="";loading=!1;dataReady=!1;totalQuantity=0;totalValue=0;ngOnInit(){this.loadGroups(),this.generateReport()}loadGroups(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Map;t.forEach(i=>{let r=i.group?.name||"Uncategorized",s=e.get(r)||{count:0,quantity:0,value:0};s.count++,s.quantity+=i.currentStock||0,s.value+=(i.currentStock||0)*(i.unitCost||0),e.set(r,s)}),this.reportData=Array.from(e.entries()).map(([i,r])=>({group:i,itemsCount:r.count,totalQuantity:r.quantity,totalValue:r.value})),this.totalQuantity=this.reportData.reduce((i,r)=>i+r.totalQuantity,0),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"group-wise-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"group-wise-stock-report","Group-wise Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"group-wise-stock-report")}completeLoading(){this.loading=!1,this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(qa),V(_i),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-group-wise-stock-report"]],standalone:!1,decls:58,vars:12,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","4",1,"empty-state"],[1,"fas","fa-sitemap"]],template:function(e,i){e&1&&(b(0,Xee,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Group-wise Stock Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Group-wise"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Group"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(34,"option",16),l(35,"All Groups"),a(),b(36,Zee,2,2,"option",17),a()(),o(37,"button",18),x("click",function(){return i.generateReport()}),y(38,"i",19),l(39),a()()(),b(40,ete,19,9,"div",20),o(41,"div",12)(42,"div",21)(43,"table",22)(44,"thead")(45,"tr")(46,"th"),l(47,"Group"),a(),o(48,"th"),l(49,"Items Count"),a(),o(50,"th"),l(51,"Total Quantity"),a(),o(52,"th"),l(53,"Total Value"),a()()(),o(54,"tbody"),b(55,tte,5,0,"tr",23)(56,nte,3,0,"tr",23)(57,ite,11,10,"tr",24),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(15),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,je,We,Ue,Oe,Ee,ht,yn],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function rte(n,t){n&1&&(o(0,"div",25)(1,"div",26),y(2,"i",27),o(3,"p"),l(4,"Loading report data..."),a()()())}function ote(n,t){if(n&1&&(o(0,"option",28),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function ate(n,t){if(n&1&&(o(0,"div",12)(1,"div",29)(2,"div",30)(3,"span",31),l(4,"Total Items:"),a(),o(5,"span",32),l(6),a()(),o(7,"div",30)(8,"span",31),l(9,"Total Value:"),a(),o(10,"span",32),l(11),Le(12,"number"),a()()()()),n&2){let e=p();c(6),_(e.reportData.length),c(5),_(rt(12,2,e.totalValue,"1.2-2"))}}function ste(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",34),o(3,"p"),l(4,"Generate report to view data"),a()()())}function lte(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",27),a()())}function cte(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),Le(11,"number"),a(),o(12,"td"),l(13),Le(14,"number"),a()()),n&2){let e=t.$implicit;c(2),_(e.warehouse),c(2),_(e.bin),c(2),_(e.itemCode),c(2),_(e.item),c(2),_(rt(11,6,e.quantity,"1.0-2")),c(3),_(rt(14,9,e.value,"1.2-2"))}}var yC=class n{constructor(t,e,i){this.warehouseService=t;this.itemService=e;this.exportService=i}reportData=[];warehouses=[];selectedWarehouse="";loading=!1;dataReady=!1;totalValue=0;ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({warehouse:e.warehouse?.name||"Default",bin:e.bin?.code||"-",item:e.name,itemCode:e.code,quantity:e.currentStock||0,value:(e.currentStock||0)*(e.unitCost||0)})),this.selectedWarehouse&&(this.reportData=this.reportData.filter(e=>e.warehouse===this.selectedWarehouse)),this.totalValue=this.reportData.reduce((e,i)=>e+i.value,0),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"warehouse-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"warehouse-stock-report","Warehouse Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"warehouse-stock-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(Xi),V(_i),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-warehouse-stock-report"]],standalone:!1,decls:62,vars:12,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","6",1,"empty-state"],[1,"fas","fa-warehouse"]],template:function(e,i){e&1&&(b(0,rte,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Warehouse Stock Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Warehouse Stock"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Warehouse"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(34,"option",16),l(35,"All Warehouses"),a(),b(36,ote,2,2,"option",17),a()(),o(37,"button",18),x("click",function(){return i.generateReport()}),y(38,"i",19),l(39),a()()(),b(40,ate,13,5,"div",20),o(41,"div",12)(42,"div",21)(43,"table",22)(44,"thead")(45,"tr")(46,"th"),l(47,"Warehouse"),a(),o(48,"th"),l(49,"Bin"),a(),o(50,"th"),l(51,"Item Code"),a(),o(52,"th"),l(53,"Item Name"),a(),o(54,"th"),l(55,"Quantity"),a(),o(56,"th"),l(57,"Value"),a()()(),o(58,"tbody"),b(59,ste,5,0,"tr",23)(60,lte,3,0,"tr",23)(61,cte,15,12,"tr",24),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(19),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,je,We,Ue,Oe,Ee,ht,yn],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function dte(n,t){n&1&&(o(0,"tr")(1,"td",19),y(2,"i",20),o(3,"p"),l(4,"No items below reorder level"),a()()())}function pte(n,t){n&1&&(o(0,"tr")(1,"td",19),y(2,"i",21),a()())}function mte(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",22),l(17),a()()()),n&2){let e=t.$implicit,i=p();c(2),_(e.code),c(2),_(e.name),c(2),_(e.group),c(2),_(e.unit),c(2),_(e.currentStock),c(2),_(e.reorderLevel),c(2),_(e.shortage),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}var CC=class n{constructor(t,e){this.itemService=t;this.exportService=e}reportData=[];loading=!1;ngOnInit(){this.generateReport()}generateReport(){this.loading=!0,this.itemService.getLowStock().subscribe({next:t=>{this.reportData=t.map(e=>({code:e.code,name:e.name,group:e.group?.name||"",unit:e.unitOfMeasure?.name||"",currentStock:e.currentStock||0,reorderLevel:e.reorderLevel||0,shortage:(e.reorderLevel||0)-(e.currentStock||0),status:(e.currentStock||0)<=0?"Out of Stock":(e.currentStock||0)<=(e.reorderLevel||0)/2?"Critical":"Low Stock"})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"reorder-level-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"reorder-level-report","Reorder Level Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"reorder-level-report")}getStatusClass(t){return t==="Out of Stock"?"badge-danger":t==="Critical"?"badge-warning":"badge-info"}static \u0275fac=function(e){return new(e||n)(V(_i),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-reorder-level"]],standalone:!1,decls:56,vars:8,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-check-circle"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Reorder Level Report"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Reports"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Reorder Level"),a()()(),o(16,"div",4)(17,"button",5),x("click",function(){return i.exportToExcel()}),y(18,"i",6),l(19," Excel "),a(),o(20,"button",7),x("click",function(){return i.exportToPDF()}),y(21,"i",8),l(22," PDF "),a(),o(23,"button",9),x("click",function(){return i.exportToCSV()}),y(24,"i",10),l(25," CSV "),a()()(),o(26,"div",11)(27,"div",12)(28,"button",13),x("click",function(){return i.generateReport()}),y(29,"i",14),l(30),a()()(),o(31,"div",11)(32,"div",15)(33,"table",16)(34,"thead")(35,"tr")(36,"th"),l(37,"Item Code"),a(),o(38,"th"),l(39,"Item Name"),a(),o(40,"th"),l(41,"Group"),a(),o(42,"th"),l(43,"Unit"),a(),o(44,"th"),l(45,"Current Stock"),a(),o(46,"th"),l(47,"Reorder Level"),a(),o(48,"th"),l(49,"Shortage"),a(),o(50,"th"),l(51,"Status"),a()()(),o(52,"tbody"),b(53,dte,5,0,"tr",17)(54,pte,3,0,"tr",17)(55,mte,18,9,"tr",18),a()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(5),m("disabled",i.loading),c(2),D(" ",i.loading?"Refreshing...":"Refresh"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[ot,Se,be,ht],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function ute(n,t){n&1&&(o(0,"div",27)(1,"div",28),y(2,"i",29),o(3,"p"),l(4,"Loading report data..."),a()()())}function gte(n,t){if(n&1&&(o(0,"option",16),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function fte(n,t){if(n&1&&(o(0,"option",16),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function hte(n,t){if(n&1&&(o(0,"div",12)(1,"div",30)(2,"div",31)(3,"span",32),l(4,"Slow-Moving Items:"),a(),o(5,"span",33),l(6),a()(),o(7,"div",34)(8,"span",32),l(9,"Total Value at Risk:"),a(),o(10,"span",35),l(11),Le(12,"number"),a()()()()),n&2){let e=p();c(6),_(e.totalItems),c(5),_(rt(12,2,e.totalValue,"1.2-2"))}}function _te(n,t){n&1&&(o(0,"tr")(1,"td",36),y(2,"i",37),o(3,"p"),l(4,"Generate report to view slow-moving items"),a()()())}function vte(n,t){n&1&&(o(0,"tr")(1,"td",36),y(2,"i",29),a()())}function xte(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",24),l(12),a(),o(13,"td",24),l(14),Le(15,"number"),a(),o(16,"td",24),l(17),Le(18,"number"),a(),o(19,"td",24),l(20),Le(21,"number"),a()()),n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.group),c(2),_(e.warehouse),c(2),_(e.lastMovement),c(),ie("text-danger",e.daysIdle!=="N/A"&&e.daysIdle>90),c(),_(e.daysIdle),c(2),_(rt(15,11,e.currentStock,"1.0-2")),c(3),_(rt(18,14,e.unitCost,"1.2-2")),c(3),_(rt(21,17,e.value,"1.2-2"))}}function yte(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",38)(2,"td",39)(3,"strong"),l(4,"Total Value at Risk:"),a()(),o(5,"td",24)(6,"strong"),l(7),Le(8,"number"),a()()()()),n&2){let e=p();c(7),_(rt(8,1,e.totalValue,"1.2-2"))}}var bC=class n{constructor(t,e,i,r){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.exportService=r}reportData=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";daysWithoutMovement=30;loading=!1;dataReady=!1;totalValue=0;totalItems=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Date;e.setDate(e.getDate()-this.daysWithoutMovement);let i=t.filter(r=>{let s=r.lastMovementDate?new Date(r.lastMovementDate):null;return!s||s<e});this.selectedGroup&&(i=i.filter(r=>r.group?.name===this.selectedGroup)),this.selectedWarehouse&&(i=i.filter(r=>r.warehouse?.name===this.selectedWarehouse)),this.reportData=i.map(r=>({code:r.code,name:r.name,group:r.group?.name||"",warehouse:r.warehouse?.name||"Default",lastMovement:r.lastMovementDate?new Date(r.lastMovementDate).toLocaleDateString():"Never",daysIdle:r.lastMovementDate?Math.floor((new Date().getTime()-new Date(r.lastMovementDate).getTime())/(1e3*60*60*24)):"N/A",currentStock:r.currentStock||0,unitCost:r.unitCost||0,value:(r.currentStock||0)*(r.unitCost||0)})),this.totalValue=this.reportData.reduce((r,s)=>r+s.value,0),this.totalItems=this.reportData.length,this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"slow-moving-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"slow-moving-items-report","Slow / Non-Moving Items Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"slow-moving-items-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(_i),V(qa),V(Xi),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-slow-moving-items-report"]],standalone:!1,decls:90,vars:21,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value","text-warning"],[1,"summary-item","highlight"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-hourglass-half"],[1,"total-row"],["colspan","8",1,"text-right"]],template:function(e,i){e&1&&(b(0,ute,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Slow / Non-Moving Items Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Slow Moving"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Days Without Movement"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.daysWithoutMovement,s)||(i.daysWithoutMovement=s),s}),o(34,"option",16),l(35,"30 Days"),a(),o(36,"option",16),l(37,"60 Days"),a(),o(38,"option",16),l(39,"90 Days"),a(),o(40,"option",16),l(41,"180 Days"),a(),o(42,"option",16),l(43,"1 Year"),a()()(),o(44,"div",14)(45,"label"),l(46,"Group"),a(),o(47,"select",15),S("ngModelChange",function(s){return P(i.selectedGroup,s)||(i.selectedGroup=s),s}),o(48,"option",17),l(49,"All Groups"),a(),b(50,gte,2,2,"option",18),a()(),o(51,"div",14)(52,"label"),l(53,"Warehouse"),a(),o(54,"select",15),S("ngModelChange",function(s){return P(i.selectedWarehouse,s)||(i.selectedWarehouse=s),s}),o(55,"option",17),l(56,"All Warehouses"),a(),b(57,fte,2,2,"option",18),a()(),o(58,"button",19),x("click",function(){return i.generateReport()}),y(59,"i",20),l(60),a()()(),b(61,hte,13,5,"div",21),o(62,"div",12)(63,"div",22)(64,"table",23)(65,"thead")(66,"tr")(67,"th"),l(68,"Item Code"),a(),o(69,"th"),l(70,"Item Name"),a(),o(71,"th"),l(72,"Group"),a(),o(73,"th"),l(74,"Warehouse"),a(),o(75,"th"),l(76,"Last Movement"),a(),o(77,"th",24),l(78,"Days Idle"),a(),o(79,"th",24),l(80,"Current Stock"),a(),o(81,"th",24),l(82,"Unit Cost"),a(),o(83,"th",24),l(84,"Value"),a()()(),o(85,"tbody"),b(86,_te,5,0,"tr",25)(87,vte,3,0,"tr",25)(88,xte,22,20,"tr",26),a(),b(89,yte,9,4,"tfoot",25),a()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.daysWithoutMovement),c(),m("value",30),c(2),m("value",60),c(2),m("value",90),c(2),m("value",180),c(2),m("value",365),c(5),M("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),M("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[Se,be,je,We,Ue,Oe,Ee,ht,yn],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function Cte(n,t){n&1&&(o(0,"div",28)(1,"div",29),y(2,"i",30),o(3,"p"),l(4,"Loading report data..."),a()()())}function bte(n,t){if(n&1&&(o(0,"option",31),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function Mte(n,t){if(n&1&&(o(0,"div",12)(1,"div",32)(2,"div",33)(3,"span",34),l(4,"Total PO Qty:"),a(),o(5,"span",35),l(6),a()(),o(7,"div",33)(8,"span",34),l(9,"Total GRN Qty:"),a(),o(10,"span",36),l(11),a()(),o(12,"div",33)(13,"span",34),l(14,"Pending Qty:"),a(),o(15,"span",37),l(16),a()(),o(17,"div",33)(18,"span",34),l(19,"Fulfillment Rate:"),a(),o(20,"span",35),l(21),Le(22,"number"),a()()()()),n&2){let e=p();c(6),_(e.totalPOQty),c(5),_(e.totalGRNQty),c(5),_(e.totalPending),c(4),ie("text-success",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty>=.9)("text-warning",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty<.9),c(),D(" ",e.totalPOQty>0?rt(22,8,e.totalGRNQty/e.totalPOQty*100,"1.1-1"):0,"% ")}}function Ste(n,t){n&1&&(o(0,"tr")(1,"td",38),y(2,"i",39),o(3,"p"),l(4,"Generate report to view purchase vs GRN comparison"),a()()())}function Pte(n,t){n&1&&(o(0,"tr")(1,"td",38),y(2,"i",30),a()())}function wte(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",40),x("click",function(){let r=g(e).$implicit,s=p();return f(s.drillDownToPO(r))}),l(2),a(),o(3,"td"),l(4),Le(5,"date"),a(),o(6,"td"),l(7),a(),o(8,"td",24),l(9),a(),o(10,"td",41),l(11),a(),o(12,"td",24),l(13),a(),o(14,"td",25),l(15),a(),o(16,"td",25)(17,"span",42),l(18),a()(),o(19,"td",25)(20,"button",43),x("click",function(){let r=g(e).$implicit,s=p();return f(s.drillDownToGRN(r))}),y(21,"i",44),a()()()}if(n&2){let e=t.$implicit,i=p();c(2),_(e.poNumber),c(2),_(rt(5,11,e.poDate,"shortDate")),c(3),_(e.supplier),c(2),_(e.poQty),c(2),_(e.grnQty),c(),ie("text-warning",e.pendingQty>0),c(),_(e.pendingQty),c(2),_(e.grnCount),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function Ete(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",45)(2,"td",46)(3,"strong"),l(4,"Totals:"),a()(),o(5,"td",24)(6,"strong"),l(7),a()(),o(8,"td",24)(9,"strong"),l(10),a()(),o(11,"td",24)(12,"strong"),l(13),a()(),y(14,"td",47),a()()),n&2){let e=p();c(7),_(e.totalPOQty),c(3),_(e.totalGRNQty),c(3),_(e.totalPending)}}var MC=class n{constructor(t,e,i,r,s){this.supplierService=t;this.prFulfillmentService=e;this.stockMovementService=i;this.exportService=r;this.router=s}reportData=[];suppliers=[];selectedSupplier="";fromDate="";toDate="";loading=!1;dataReady=!1;totalPOQty=0;totalGRNQty=0;totalPending=0;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}generateReport(){this.loading=!1,fo({pos:this.prFulfillmentService.getAllPOs(),grns:this.stockMovementService.getAllGRN()}).subscribe({next:({pos:t,grns:e})=>{let i=new Map;if(e.forEach(r=>{let s=r.referenceNumber||r.grnNumber||"";if(s){i.has(s)||i.set(s,{totalQty:0,grns:[]});let d=i.get(s);d.grns.push(r),d.totalQty+=r.lines?.reduce((u,h)=>u+(h.quantityReceived||h.quantity||0),0)||0}}),this.reportData=t.filter(r=>r.fulfillmentType==="PO").map(r=>{let s=r.referenceNumber||"",d=i.get(s)||{totalQty:0,grns:[]},u=r.items?.reduce((O,T)=>O+(T.quantity||0),0)||0,h=d.totalQty,v=Math.max(0,u-h),C="Pending";return h>=u?C="Complete":h>0&&(C="Partial"),{poNumber:s,poDate:r.createdAt,supplier:r.supplierName||"",poQty:u,grnQty:h,pendingQty:v,status:C,grnCount:d.grns.length}}),this.selectedSupplier&&(this.reportData=this.reportData.filter(r=>r.supplier===this.selectedSupplier)),this.fromDate){let r=new Date(this.fromDate);this.reportData=this.reportData.filter(s=>new Date(s.poDate)>=r)}if(this.toDate){let r=new Date(this.toDate);this.reportData=this.reportData.filter(s=>new Date(s.poDate)<=r)}this.calculateTotals(),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}calculateTotals(){this.totalPOQty=this.reportData.reduce((t,e)=>t+e.poQty,0),this.totalGRNQty=this.reportData.reduce((t,e)=>t+e.grnQty,0),this.totalPending=this.reportData.reduce((t,e)=>t+e.pendingQty,0)}drillDownToPO(t){this.router.navigate(["/app/purchase/pr-fulfillment"],{queryParams:{poNumber:t.poNumber}})}drillDownToGRN(t){this.router.navigate(["/app/stock-movement/goods-receipt"],{queryParams:{poNumber:t.poNumber}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"purchase-vs-grn-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"purchase-vs-grn-report","Purchase vs GRN Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"purchase-vs-grn-report")}getStatusClass(t){return t==="Pending"?"badge-warning":t==="Complete"?"badge-success":"badge-info"}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(yo),V(Co),V(Ls),V(wi),V(tn))};static \u0275cmp=_e({type:n,selectors:[["app-purchase-vs-grn-report"]],standalone:!1,decls:77,vars:15,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-warning"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"link-text",3,"click"],[1,"text-right","text-success"],[1,"badge",3,"ngClass"],["title","View GRNs",1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-eye"],[1,"total-row"],["colspan","3",1,"text-right"],["colspan","3"]],template:function(e,i){e&1&&(b(0,Cte,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Purchase vs GRN Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Purchase vs GRN"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Supplier"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedSupplier,s)||(i.selectedSupplier=s),s}),o(34,"option",16),l(35,"All Suppliers"),a(),b(36,bte,2,2,"option",17),a()(),o(37,"div",14)(38,"label"),l(39,"From Date"),a(),o(40,"input",18),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(41,"div",14)(42,"label"),l(43,"To Date"),a(),o(44,"input",18),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(45,"button",19),x("click",function(){return i.generateReport()}),y(46,"i",20),l(47),a()()(),b(48,Mte,23,11,"div",21),o(49,"div",12)(50,"div",22)(51,"table",23)(52,"thead")(53,"tr")(54,"th"),l(55,"PO Number"),a(),o(56,"th"),l(57,"PO Date"),a(),o(58,"th"),l(59,"Supplier"),a(),o(60,"th",24),l(61,"PO Qty"),a(),o(62,"th",24),l(63,"GRN Qty"),a(),o(64,"th",24),l(65,"Pending"),a(),o(66,"th",25),l(67,"GRNs"),a(),o(68,"th",25),l(69,"Status"),a(),o(70,"th",25),l(71,"Actions"),a()()(),o(72,"tbody"),b(73,Ste,5,0,"tr",26)(74,Pte,3,0,"tr",26)(75,wte,22,14,"tr",27),a(),b(76,Ete,15,3,"tfoot",26),a()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedSupplier),c(3),m("ngForOf",i.suppliers),c(4),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn,ir],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};var oa=class n{constructor(t){this.http=t}baseUrl="/api/purchase/requisitions";fulfillmentUrl="/api/purchase/fulfillment";requisitionsSubject=new Ci([]);requisitions$=this.requisitionsSubject.asObservable();getAll(){return this.http.get(this.baseUrl).pipe(si(t=>this.requisitionsSubject.next(t)))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}submit(t){return this.http.post(`${this.baseUrl}/${t}/submit`,{})}approve(t){return this.http.post(`${this.baseUrl}/${t}/approve`,{})}reject(t,e){return this.http.post(`${this.baseUrl}/${t}/reject`,{reason:e})}getByStatus(t){return this.requisitions$.pipe(ii(e=>e.filter(i=>i.status===t)))}generatePRNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),s=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PR-${i}${r}${s}`}getStockFulfillmentsByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/stock-fulfillments`)}getMaterialTransfersByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/material-transfers`)}getAllStockFulfillments(){return this.http.get(`${this.fulfillmentUrl}/stock-fulfillments`)}getAllMaterialTransfers(){return this.http.get(`${this.fulfillmentUrl}/material-transfers`)}createStockFulfillment(t){return this.http.post(`${this.fulfillmentUrl}/stock-fulfillment`,t)}createMaterialTransfer(t){return this.http.post(`${this.fulfillmentUrl}/material-transfer-new`,t)}getPurchaseOrdersByPrId(t){return this.http.get(`${this.fulfillmentUrl}/pr/${t}/purchase-orders`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ote(n,t){if(n&1){let e=F();o(0,"span",20),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.currentSort=r.value)}),l(1),a()}if(n&2){let e=t.$implicit,i=p(2);ie("active",i.currentSort===e.value),c(),D(" ",e.label," ")}}function Tte(n,t){if(n&1&&(o(0,"div",18)(1,"span"),l(2,"Sort By:"),a(),b(3,Ote,2,3,"span",19),a()),n&2){let e=p();c(3),m("ngForOf",e.sortOptions)}}function kte(n,t){if(n&1){let e=F();o(0,"div",37),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",40),l(5),a()(),o(6,"div",41),l(7),a(),o(8,"div",42)(9,"div",43)(10,"span",44),l(11,"Date:"),a(),o(12,"span",45),l(13),a()(),o(14,"div",43)(15,"span",44),l(16,"Required:"),a(),o(17,"span",45),l(18),a()()(),o(19,"div",46)(20,"span",47),y(21,"i",48),l(22),a(),o(23,"div",49)(24,"button",50),x("click",function(r){let s=g(e).$implicit;return p(2).printPR(s),f(r.stopPropagation())}),y(25,"i",51),a(),o(26,"button",52),x("click",function(r){let s=g(e).$implicit;return p(2).openEditModal(s),f(r.stopPropagation())}),y(27,"i",53),a(),o(28,"button",54),x("click",function(r){let s=g(e).$implicit;return p(2).deletePR(s),f(r.stopPropagation())}),y(29,"i",55),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(2),_(e.department),c(6),_(i.formatDate(e.prDate)),c(5),_(i.formatDate(e.requiredDate)),c(4),D(" Comments: ",e.commentsCount||0)}}function Ite(n,t){n&1&&(o(0,"div",56),y(1,"i",57),o(2,"span"),l(3,"No Draft Requisitions"),a()())}function Dte(n,t){if(n&1){let e=F();o(0,"div",59)(1,"button",60),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.approvePR(s,r))}),y(2,"i",61),l(3," Approve "),a(),o(4,"button",62),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.rejectPR(s,r))}),y(5,"i",63),l(6," Reject "),a()()}}function Ate(n,t){if(n&1){let e=F();o(0,"div",37),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",40),l(5),a()(),o(6,"div",41),l(7),a(),o(8,"div",42)(9,"div",43)(10,"span",44),l(11,"Date:"),a(),o(12,"span",45),l(13),a()(),o(14,"div",43)(15,"span",44),l(16,"Required:"),a(),o(17,"span",45),l(18),a()()(),b(19,Dte,7,0,"div",58),o(20,"div",46)(21,"span",47),y(22,"i",48),l(23),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(2),_(e.department),c(6),_(i.formatDate(e.prDate)),c(5),_(i.formatDate(e.requiredDate)),c(),m("ngIf",i.canApproveReject(e)),c(4),D(" Comments: ",e.commentsCount||0)}}function Rte(n,t){n&1&&(o(0,"div",56),y(1,"i",64),o(2,"span"),l(3,"No Submitted Requisitions"),a()())}function Fte(n,t){if(n&1&&(o(0,"span",96),l(1),a()),n&2){let e=p(4);c(),D("",e.getSelectedItemsCount()," selected")}}function Nte(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",97),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",98),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit,i=p(4);c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.quantity),c(2),_(e.fulfilledQuantity||0),c(2),_(i.getRemainingQty(e)),c(2),M("ngModel",e.fulfillQty),m("max",i.getRemainingQty(e))("disabled",!e.selected)}}function Lte(n,t){n&1&&(o(0,"tr")(1,"td",99),l(2,"All items have been fulfilled"),a()())}function Vte(n,t){if(n&1){let e=F();o(0,"div",100)(1,"button",101),x("click",function(r){g(e);let s=p(2).$implicit,d=p(2);return f(d.openInlineStockFulfillment(s,r))}),y(2,"i",93),l(3," Fulfill from Stock "),a(),o(4,"button",102),x("click",function(r){g(e);let s=p(2).$implicit,d=p(2);return f(d.openInlineMaterialTransfer(s,r))}),y(5,"i",94),l(6," Material Transfer "),a()()}}function Bte(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",107),l(9),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.poNumber),c(2),_(e.supplierName),c(2),_(i.formatDate(e.poDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function Ute(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Date"),a(),o(9,"th"),l(10,"Status"),a()()(),o(11,"tbody"),b(12,Bte,10,5,"tr",87),a()()),n&2){let e=p(5);c(12),m("ngForOf",e.inlinePurchaseOrders)}}function jte(n,t){n&1&&(o(0,"div",108),l(1,"No purchase orders created yet"),a())}function Wte(n,t){if(n&1&&(o(0,"div",103),b(1,Ute,13,1,"table",104)(2,jte,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlinePurchaseOrders.length>0),c(),m("ngIf",e.inlinePurchaseOrders.length===0)}}function zte(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Fulfilled"),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.warehouseName||"-"),c(2),_(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),_(i.formatDate(e.createdAt))}}function qte(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Warehouse"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,zte,12,4,"tr",87),a()()),n&2){let e=p(5);c(14),m("ngForOf",e.inlineStockFulfillments)}}function Hte(n,t){n&1&&(o(0,"div",108),l(1,"No stock fulfillments yet"),a())}function Gte(n,t){if(n&1&&(o(0,"div",103),b(1,qte,15,1,"table",104)(2,Hte,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlineStockFulfillments.length>0),c(),m("ngIf",e.inlineStockFulfillments.length===0)}}function $te(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Transferred"),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.projectName||"-"),c(2),_(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),_(i.formatDate(e.createdAt))}}function Yte(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Project"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,$te,12,4,"tr",87),a()()),n&2){let e=p(5);c(14),m("ngForOf",e.inlineMaterialTransfers)}}function Jte(n,t){n&1&&(o(0,"div",108),l(1,"No material transfers yet"),a())}function Kte(n,t){if(n&1&&(o(0,"div",103),b(1,Yte,15,1,"table",104)(2,Jte,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlineMaterialTransfers.length>0),c(),m("ngIf",e.inlineMaterialTransfers.length===0)}}function Qte(n,t){if(n&1){let e=F();o(0,"div",78)(1,"div",79)(2,"div",80)(3,"h4"),l(4,"Select Items for Fulfillment"),a(),b(5,Fte,2,1,"span",81),a(),o(6,"table",82)(7,"thead")(8,"tr")(9,"th",83)(10,"input",84),x("change",function(r){g(e);let s=p(3);return f(s.toggleAllInlineItems(r))}),a()(),o(11,"th"),l(12,"Item"),a(),o(13,"th",85),l(14,"Required"),a(),o(15,"th",85),l(16,"Fulfilled"),a(),o(17,"th",85),l(18,"Remaining"),a(),o(19,"th",86),l(20,"Qty to Fulfill"),a()()(),o(21,"tbody"),b(22,Nte,13,8,"tr",87)(23,Lte,3,0,"tr",88),a()(),b(24,Vte,7,0,"div",89),a(),o(25,"div",90)(26,"div",91)(27,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="purchaseOrders")}),y(28,"i",76),l(29),a(),o(30,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="stockFulfillments")}),y(31,"i",93),l(32),a(),o(33,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="materialTransfers")}),y(34,"i",94),l(35),a()(),b(36,Wte,3,2,"div",95)(37,Gte,3,2,"div",95)(38,Kte,3,2,"div",95),a()()}if(n&2){let e=p(3);c(5),m("ngIf",e.getSelectedItemsCount()>0),c(17),m("ngForOf",e.inlineSelectableItems),c(),m("ngIf",e.inlineSelectableItems.length===0),c(),m("ngIf",e.inlineSelectableItems.length>0),c(3),ie("active",e.inlineTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.inlinePurchaseOrders.length,") "),c(),ie("active",e.inlineTabActive==="stockFulfillments"),c(2),D(" Fulfilled Stocks (",e.inlineStockFulfillments.length,") "),c(),ie("active",e.inlineTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.inlineMaterialTransfers.length,") "),c(),m("ngIf",e.inlineTabActive==="purchaseOrders"),c(),m("ngIf",e.inlineTabActive==="stockFulfillments"),c(),m("ngIf",e.inlineTabActive==="materialTransfers")}}function Xte(n,t){if(n&1){let e=F();o(0,"div",65)(1,"div",66)(2,"div",38)(3,"span",39),l(4),a(),o(5,"div",67)(6,"span",40),l(7),a(),o(8,"button",68),x("click",function(r){let s=g(e).$implicit,d=p(2);return f(d.togglePRExpand(s,r))}),y(9,"i",69),a()()(),o(10,"div",41),l(11),a(),o(12,"div",70),y(13,"div",71),o(14,"span",72),l(15),a()(),o(16,"div",59)(17,"button",73),x("click",function(r){let s=g(e).$implicit;return p(2).viewPR(s),f(r.stopPropagation())}),y(18,"i",74),a(),o(19,"button",75),x("click",function(r){let s=g(e).$implicit,d=p(2);return f(d.convertToPO(s,r))}),y(20,"i",76),a()(),o(21,"div",46)(22,"span",47),y(23,"i",48),l(24),a()()(),b(25,Qte,39,16,"div",77),a()}if(n&2){let e=t.$implicit,i=p(2);c(),ie("expanded",i.expandedPRId===e.id),c(3),_(e.prNumber),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(),m("title",i.expandedPRId===e.id?"Collapse":"Expand"),c(),ie("fa-chevron-down",i.expandedPRId!==e.id)("fa-chevron-up",i.expandedPRId===e.id),c(2),_(e.department),c(2),jt("width",i.calculateFulfillmentProgress(e),"%"),c(2),D("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(9),D(" Comments: ",e.commentsCount||0),c(),m("ngIf",i.expandedPRId===e.id)}}function Zte(n,t){n&1&&(o(0,"div",56),y(1,"i",110),o(2,"span"),l(3,"No Approved Requisitions"),a()())}function ene(n,t){if(n&1&&(o(0,"span",96),l(1),a()),n&2){let e=p(4);c(),D("",e.getSelectedItemsCount()," selected")}}function tne(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",97),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",98),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit,i=p(4);c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.quantity),c(2),_(e.fulfilledQuantity||0),c(2),_(i.getRemainingQty(e)),c(2),M("ngModel",e.fulfillQty),m("max",i.getRemainingQty(e))("disabled",!e.selected)}}function nne(n,t){n&1&&(o(0,"tr")(1,"td",99),l(2,"All items have been fulfilled"),a()())}function ine(n,t){if(n&1){let e=F();o(0,"div",100)(1,"button",101),x("click",function(r){g(e);let s=p(2).$implicit,d=p(2);return f(d.openInlineStockFulfillment(s,r))}),y(2,"i",93),l(3," Fulfill from Stock "),a(),o(4,"button",102),x("click",function(r){g(e);let s=p(2).$implicit,d=p(2);return f(d.openInlineMaterialTransfer(s,r))}),y(5,"i",94),l(6," Material Transfer "),a()()}}function rne(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",107),l(9),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.poNumber),c(2),_(e.supplierName),c(2),_(i.formatDate(e.poDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function one(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Date"),a(),o(9,"th"),l(10,"Status"),a()()(),o(11,"tbody"),b(12,rne,10,5,"tr",87),a()()),n&2){let e=p(5);c(12),m("ngForOf",e.inlinePurchaseOrders)}}function ane(n,t){n&1&&(o(0,"div",108),l(1,"No purchase orders created yet"),a())}function sne(n,t){if(n&1&&(o(0,"div",103),b(1,one,13,1,"table",104)(2,ane,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlinePurchaseOrders.length>0),c(),m("ngIf",e.inlinePurchaseOrders.length===0)}}function lne(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Fulfilled"),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.warehouseName||"-"),c(2),_(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),_(i.formatDate(e.createdAt))}}function cne(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Warehouse"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,lne,12,4,"tr",87),a()()),n&2){let e=p(5);c(14),m("ngForOf",e.inlineStockFulfillments)}}function dne(n,t){n&1&&(o(0,"div",108),l(1,"No stock fulfillments yet"),a())}function pne(n,t){if(n&1&&(o(0,"div",103),b(1,cne,15,1,"table",104)(2,dne,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlineStockFulfillments.length>0),c(),m("ngIf",e.inlineStockFulfillments.length===0)}}function mne(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",109),l(11,"Transferred"),a()()()),n&2){let e=t.$implicit,i=p(6);c(2),_(e.projectName||"-"),c(2),_(e.supplierName||"-"),c(2),D("",(e.items==null?null:e.items.length)||0," items"),c(2),_(i.formatDate(e.createdAt))}}function une(n,t){if(n&1&&(o(0,"table",106)(1,"thead")(2,"tr")(3,"th"),l(4,"From Project"),a(),o(5,"th"),l(6,"Supplier"),a(),o(7,"th"),l(8,"Items"),a(),o(9,"th"),l(10,"Date"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,mne,12,4,"tr",87),a()()),n&2){let e=p(5);c(14),m("ngForOf",e.inlineMaterialTransfers)}}function gne(n,t){n&1&&(o(0,"div",108),l(1,"No material transfers yet"),a())}function fne(n,t){if(n&1&&(o(0,"div",103),b(1,une,15,1,"table",104)(2,gne,2,0,"div",105),a()),n&2){let e=p(4);c(),m("ngIf",e.inlineMaterialTransfers.length>0),c(),m("ngIf",e.inlineMaterialTransfers.length===0)}}function hne(n,t){if(n&1){let e=F();o(0,"div",78)(1,"div",79)(2,"div",80)(3,"h4"),l(4,"Select Items for Fulfillment"),a(),b(5,ene,2,1,"span",81),a(),o(6,"table",82)(7,"thead")(8,"tr")(9,"th",83)(10,"input",84),x("change",function(r){g(e);let s=p(3);return f(s.toggleAllInlineItems(r))}),a()(),o(11,"th"),l(12,"Item"),a(),o(13,"th",85),l(14,"Required"),a(),o(15,"th",85),l(16,"Fulfilled"),a(),o(17,"th",85),l(18,"Remaining"),a(),o(19,"th",86),l(20,"Qty to Fulfill"),a()()(),o(21,"tbody"),b(22,tne,13,8,"tr",87)(23,nne,3,0,"tr",88),a()(),b(24,ine,7,0,"div",89),a(),o(25,"div",90)(26,"div",91)(27,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="purchaseOrders")}),y(28,"i",76),l(29),a(),o(30,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="stockFulfillments")}),y(31,"i",93),l(32),a(),o(33,"button",92),x("click",function(){g(e);let r=p(3);return f(r.inlineTabActive="materialTransfers")}),y(34,"i",94),l(35),a()(),b(36,sne,3,2,"div",95)(37,pne,3,2,"div",95)(38,fne,3,2,"div",95),a()()}if(n&2){let e=p(3);c(5),m("ngIf",e.getSelectedItemsCount()>0),c(17),m("ngForOf",e.inlineSelectableItems),c(),m("ngIf",e.inlineSelectableItems.length===0),c(),m("ngIf",e.inlineSelectableItems.length>0),c(3),ie("active",e.inlineTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.inlinePurchaseOrders.length,") "),c(),ie("active",e.inlineTabActive==="stockFulfillments"),c(2),D(" Fulfilled Stocks (",e.inlineStockFulfillments.length,") "),c(),ie("active",e.inlineTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.inlineMaterialTransfers.length,") "),c(),m("ngIf",e.inlineTabActive==="purchaseOrders"),c(),m("ngIf",e.inlineTabActive==="stockFulfillments"),c(),m("ngIf",e.inlineTabActive==="materialTransfers")}}function _ne(n,t){if(n&1){let e=F();o(0,"div",65)(1,"div",66)(2,"div",38)(3,"span",39),l(4),a(),o(5,"div",67)(6,"span",40),l(7),a(),o(8,"button",68),x("click",function(r){let s=g(e).$implicit,d=p(2);return f(d.togglePRExpand(s,r))}),y(9,"i",69),a()()(),o(10,"div",41),l(11),a(),o(12,"div",70),y(13,"div",71),o(14,"span",72),l(15),a()(),o(16,"div",59)(17,"button",73),x("click",function(r){let s=g(e).$implicit;return p(2).viewPR(s),f(r.stopPropagation())}),y(18,"i",74),a(),o(19,"button",75),x("click",function(r){let s=g(e).$implicit,d=p(2);return f(d.convertToPO(s,r))}),y(20,"i",76),a()(),o(21,"div",46)(22,"span",47),y(23,"i",48),l(24),a()()(),b(25,hne,39,16,"div",77),a()}if(n&2){let e=t.$implicit,i=p(2);c(),ie("expanded",i.expandedPRId===e.id),c(3),_(e.prNumber),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(),m("title",i.expandedPRId===e.id?"Collapse":"Expand"),c(),ie("fa-chevron-down",i.expandedPRId!==e.id)("fa-chevron-up",i.expandedPRId===e.id),c(2),_(e.department),c(2),jt("width",i.calculateFulfillmentProgress(e),"%"),c(2),D("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(9),D(" Comments: ",e.commentsCount||0),c(),m("ngIf",i.expandedPRId===e.id)}}function vne(n,t){n&1&&(o(0,"div",56),y(1,"i",111),o(2,"span"),l(3,"No Partially Fulfilled"),a()())}function xne(n,t){if(n&1){let e=F();o(0,"div",112),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",113),y(5,"i",110),l(6," Completed"),a()(),o(7,"div",41),l(8),a(),o(9,"div",42)(10,"div",43)(11,"span",44),l(12,"Date:"),a(),o(13,"span",45),l(14),a()()(),o(15,"div",46)(16,"span",47),y(17,"i",48),l(18),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.prNumber),c(5),_(e.department),c(6),_(i.formatDate(e.prDate)),c(4),D(" Comments: ",e.commentsCount||0)}}function yne(n,t){n&1&&(o(0,"div",56),y(1,"i",114),o(2,"span"),l(3,"No Fulfilled Requisitions"),a()())}function Cne(n,t){if(n&1&&(o(0,"div",43)(1,"span",44),l(2,"Reason:"),a(),o(3,"span",120),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.rejectionReason)}}function bne(n,t){if(n&1&&(o(0,"span",121),l(1),a()),n&2){let e=p().$implicit;c(),D("By: ",e.rejectedBy)}}function Mne(n,t){if(n&1){let e=F();o(0,"div",115),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPR(r))}),o(1,"div",38)(2,"span",39),l(3),a(),o(4,"span",116),y(5,"i",117),l(6," Rejected"),a()(),o(7,"div",41),l(8),a(),o(9,"div",42),b(10,Cne,5,1,"div",118),a(),o(11,"div",46),b(12,bne,2,1,"span",119),a()()}if(n&2){let e=t.$implicit;c(3),_(e.prNumber),c(5),_(e.department),c(2),m("ngIf",e.rejectionReason),c(2),m("ngIf",e.rejectedBy)}}function Sne(n,t){n&1&&(o(0,"div",56),y(1,"i",122),o(2,"span"),l(3,"No Rejected Requisitions"),a()())}function Pne(n,t){if(n&1&&(o(0,"div",21)(1,"div",22)(2,"div",23)(3,"span",24),l(4,"Draft"),a(),o(5,"span",25),l(6),a()(),o(7,"div",26),b(8,kte,30,7,"div",27)(9,Ite,4,0,"div",28),a()(),o(10,"div",29)(11,"div",23)(12,"span",24),l(13,"Submitted"),a(),o(14,"span",25),l(15),a()(),o(16,"div",26),b(17,Ate,24,8,"div",27)(18,Rte,4,0,"div",28),a()(),o(19,"div",30)(20,"div",23)(21,"span",24),l(22,"Approved"),a(),o(23,"span",25),l(24),a()(),o(25,"div",26),b(26,Xte,26,16,"div",31)(27,Zte,4,0,"div",28),a()(),o(28,"div",32)(29,"div",23)(30,"span",24),l(31,"Partially Fulfilled"),a(),o(32,"span",25),l(33),a()(),o(34,"div",26),b(35,_ne,26,16,"div",31)(36,vne,4,0,"div",28),a()(),o(37,"div",33)(38,"div",23)(39,"span",24),l(40,"Fully Fulfilled"),a(),o(41,"span",25),l(42),a()(),o(43,"div",26),b(44,xne,19,4,"div",34)(45,yne,4,0,"div",28),a()(),o(46,"div",35)(47,"div",23)(48,"span",24),l(49,"Rejected"),a(),o(50,"span",25),l(51),a()(),o(52,"div",26),b(53,Mne,13,4,"div",36)(54,Sne,4,0,"div",28),a()()()),n&2){let e=p();c(6),D("",e.getFilteredPRs(e.draftPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.draftPRs)),c(),m("ngIf",e.getFilteredPRs(e.draftPRs).length===0),c(6),D("",e.getFilteredPRs(e.submittedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.submittedPRs)),c(),m("ngIf",e.getFilteredPRs(e.submittedPRs).length===0),c(6),D("",e.getFilteredPRs(e.approvedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.approvedPRs)),c(),m("ngIf",e.getFilteredPRs(e.approvedPRs).length===0),c(6),D("",e.getFilteredPRs(e.partiallyFulfilledPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.partiallyFulfilledPRs)),c(),m("ngIf",e.getFilteredPRs(e.partiallyFulfilledPRs).length===0),c(6),D("",e.getFilteredPRs(e.fullyFulfilledPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.fullyFulfilledPRs)),c(),m("ngIf",e.getFilteredPRs(e.fullyFulfilledPRs).length===0),c(6),D("",e.getFilteredPRs(e.rejectedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.rejectedPRs)),c(),m("ngIf",e.getFilteredPRs(e.rejectedPRs).length===0)}}function wne(n,t){n&1&&(o(0,"tr")(1,"td",127),y(2,"i",57),o(3,"p"),l(4,"No requisitions found"),a()()())}function Ene(n,t){if(n&1){let e=F();o(0,"button",52),x("click",function(r){g(e);let s=p().$implicit;return p(2).openEditModal(s),f(r.stopPropagation())}),y(1,"i",53),a()}}function One(n,t){if(n&1){let e=F();o(0,"button",141),x("click",function(r){g(e);let s=p().$implicit;return p(2).viewPR(s),f(r.stopPropagation())}),y(1,"i",74),a()}}function Tne(n,t){if(n&1){let e=F();o(0,"button",54),x("click",function(r){g(e);let s=p().$implicit;return p(2).deletePR(s),f(r.stopPropagation())}),y(1,"i",55),a()}}function kne(n,t){if(n&1){let e=F();o(0,"button",142),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.approvePR(s,r))}),y(1,"i",61),a()}}function Ine(n,t){if(n&1){let e=F();o(0,"button",143),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.rejectPR(s,r))}),y(1,"i",63),a()}}function Dne(n,t){if(n&1){let e=F();o(0,"button",144),x("click",function(r){g(e);let s=p().$implicit;return p(2).openViewModal(s),f(r.stopPropagation())}),y(1,"i",74),a()}}function Ane(n,t){if(n&1){let e=F();o(0,"button",145),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.convertToPO(s,r))}),y(1,"i",76),a()}}function Rne(n,t){if(n&1){let e=F();o(0,"button",146),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.openStockFulfillmentModal(s,r))}),y(1,"i",93),a()}}function Fne(n,t){if(n&1){let e=F();o(0,"button",147),x("click",function(r){g(e);let s=p().$implicit,d=p(2);return f(d.openMaterialTransferModal(s,r))}),y(1,"i",94),a()}}function Nne(n,t){n&1&&(o(0,"span",148),y(1,"i",110),l(2," Completed "),a())}function Lne(n,t){if(n&1){let e=F();o(0,"tr",128),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPR(r))}),o(1,"td")(2,"strong",129),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",40),l(14),a()(),o(15,"td")(16,"span",107),l(17),a()(),o(18,"td")(19,"div",130)(20,"button",50),x("click",function(r){let s=g(e).$implicit;return p(2).printPR(s),f(r.stopPropagation())}),y(21,"i",51),a(),b(22,Ene,2,0,"button",131)(23,One,2,0,"button",132)(24,Tne,2,0,"button",133)(25,kne,2,0,"button",134)(26,Ine,2,0,"button",135)(27,Dne,2,0,"button",136)(28,Ane,2,0,"button",137)(29,Rne,2,0,"button",138)(30,Fne,2,0,"button",139)(31,Nne,3,0,"span",140),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.prNumber),c(2),_(i.formatDate(e.prDate)),c(2),_(i.formatDate(e.requiredDate)),c(2),_(e.department),c(2),_(e.requestedBy),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),_(e.priority),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(5),m("ngIf",i.canEdit(e)),c(),m("ngIf",!i.canEdit(e)),c(),m("ngIf",i.canDelete(e)),c(),m("ngIf",i.canApproveReject(e)),c(),m("ngIf",i.canApproveReject(e)),c(),m("ngIf",i.canConvertToPO(e)),c(),m("ngIf",i.canConvertToPO(e)),c(),m("ngIf",i.canFulfillFromStock(e)),c(),m("ngIf",i.canMaterialTransfer(e)),c(),m("ngIf",i.isCompleted(e))}}function Vne(n,t){if(n&1&&(o(0,"div",123)(1,"div",124)(2,"table",125)(3,"thead")(4,"tr")(5,"th"),l(6,"PR Number"),a(),o(7,"th"),l(8,"PR Date"),a(),o(9,"th"),l(10,"Required Date"),a(),o(11,"th"),l(12,"Department"),a(),o(13,"th"),l(14,"Requested By"),a(),o(15,"th"),l(16,"Priority"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,wne,5,0,"tr",88)(23,Lne,32,19,"tr",126),a()()()()),n&2){let e=p();c(22),m("ngIf",e.getAllFilteredPRs().length===0),c(),m("ngForOf",e.getAllFilteredPRs())}}function Bne(n,t){if(n&1&&(o(0,"div",189)(1,"span",190),l(2,"Fulfillment Progress:"),a(),o(3,"div",191),y(4,"div",71),a(),o(5,"span",192),l(6),a()()),n&2){let e=p(2);c(4),jt("width",e.calculateFulfillmentProgress(e.selectedPR),"%"),c(2),D("",e.calculateFulfillmentProgress(e.selectedPR),"%")}}function Une(n,t){if(n&1){let e=F();o(0,"button",182),x("click",function(){g(e);let r=p(2);return f(r.addItem())}),y(1,"i",3),l(2," Add Item "),a()}}function jne(n,t){n&1&&(o(0,"th",85),l(1,"Fulfilled"),a())}function Wne(n,t){n&1&&(o(0,"th",177),l(1,"Status"),a())}function zne(n,t){n&1&&(o(0,"th",193),l(1,"Action"),a())}function qne(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function Hne(n,t){if(n&1&&(o(0,"td")(1,"span",202),l(2),a()()),n&2){let e=p().$implicit;c(2),Ge("",e.fulfilledQuantity||0," / ",e.quantity)}}function Gne(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;m("value",e.symbol||e.code),c(),Ge("",e.name," (",e.symbol||e.code,")")}}function $ne(n,t){if(n&1&&(o(0,"td")(1,"span",203),l(2),a()()),n&2){let e=p().$implicit,i=p(2);c(),m("ngClass",i.getItemStatusClass(e.status)),c(),D(" ",e.status||"Pending"," ")}}function Yne(n,t){if(n&1){let e=F();o(0,"td")(1,"button",204),x("click",function(){g(e);let r=p().index,s=p(2);return f(s.removeItem(r))}),y(2,"i",55),a()()}if(n&2){let e=p(3);c(),m("disabled",e.selectedPR.items.length<=1)}}function Jne(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"select",194),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemName,r)||(s.itemName=r),f(r)}),x("change",function(){let r=g(e).index,s=p(2);return f(s.onItemSelect(r))}),o(5,"option",195),l(6,"Select Item"),a(),b(7,qne,2,2,"option",196),a()(),o(8,"td")(9,"input",197),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemDescription,r)||(s.itemDescription=r),f(r)}),a()(),o(10,"td")(11,"input",198),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),a()(),b(12,Hne,3,2,"td",88),o(13,"td")(14,"select",199),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.uom,r)||(s.uom=r),f(r)}),o(15,"option",195),l(16,"Select UOM"),a(),b(17,Gne,2,3,"option",196),a()(),b(18,$ne,3,2,"td",88),o(19,"td")(20,"input",200),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.remarks,r)||(s.remarks=r),f(r)}),a()(),b(21,Yne,3,1,"td",88),a()}if(n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),_(i+1),c(2),M("ngModel",e.itemName),m("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),m("ngForOf",r.items),c(2),M("ngModel",e.itemDescription),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(2),M("ngModel",e.quantity),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),m("ngIf",r.selectedPR.status!=="Draft"),c(2),M("ngModel",e.uom),m("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),m("ngForOf",r.units),c(),m("ngIf",r.selectedPR.status!=="Draft"),c(2),M("ngModel",e.remarks),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),m("ngIf",r.canSubmit(r.selectedPR))}}function Kne(n,t){n&1&&(o(0,"div",108),y(1,"i",76),o(2,"p"),l(3,"No purchase orders created for this PR yet."),a()())}function Qne(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",107),l(11),a()()()),n&2){let e=t.$implicit,i=p(5);c(2),_(e.poNumber),c(2),_(i.formatDate(e.poDate)),c(2),_(e.supplierName),c(2),_(e.itemCount||(e.items==null?null:e.items.length)||0),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function Xne(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Supplier"),a(),o(9,"th"),l(10,"Items"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,Qne,12,6,"tr",87),a()()),n&2){let e=p(4);c(14),m("ngForOf",e.purchaseOrders)}}function Zne(n,t){if(n&1&&(o(0,"div",103),b(1,Kne,4,0,"div",105)(2,Xne,15,1,"table",208),a()),n&2){let e=p(3);c(),m("ngIf",e.purchaseOrders.length===0),c(),m("ngIf",e.purchaseOrders.length>0)}}function eie(n,t){n&1&&(o(0,"div",108),y(1,"i",93),o(2,"p"),l(3,"No stock fulfillments for this PR yet."),a()())}function tie(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(5);c(2),_(e.fulfillmentNumber),c(2),_(i.formatDate(e.fulfillmentDate)),c(2),_(e.warehouseName||"-"),c(2),_(e.supplierName||"-"),c(2),_((e.items==null?null:e.items.length)||0)}}function nie(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Fulfillment #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Warehouse"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),b(14,tie,11,5,"tr",87),a()()),n&2){let e=p(4);c(14),m("ngForOf",e.stockFulfillments)}}function iie(n,t){if(n&1&&(o(0,"div",103),b(1,eie,4,0,"div",105)(2,nie,15,1,"table",208),a()),n&2){let e=p(3);c(),m("ngIf",e.stockFulfillments.length===0),c(),m("ngIf",e.stockFulfillments.length>0)}}function rie(n,t){n&1&&(o(0,"div",108),y(1,"i",94),o(2,"p"),l(3,"No material transfers for this PR yet."),a()())}function oie(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(5);c(2),_(e.transferNumber),c(2),_(i.formatDate(e.transferDate)),c(2),_(e.projectName||"-"),c(2),_(e.supplierName||"-"),c(2),_((e.items==null?null:e.items.length)||0)}}function aie(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Transfer #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Project"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),b(14,oie,11,5,"tr",87),a()()),n&2){let e=p(4);c(14),m("ngForOf",e.materialTransfers)}}function sie(n,t){if(n&1&&(o(0,"div",103),b(1,rie,4,0,"div",105)(2,aie,15,1,"table",208),a()),n&2){let e=p(3);c(),m("ngIf",e.materialTransfers.length===0),c(),m("ngIf",e.materialTransfers.length>0)}}function lie(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",206)(2,"button",207),x("click",function(){g(e);let r=p(2);return f(r.viewTabActive="purchaseOrders")}),y(3,"i",76),l(4),a(),o(5,"button",207),x("click",function(){g(e);let r=p(2);return f(r.viewTabActive="stockFulfillments")}),y(6,"i",93),l(7),a(),o(8,"button",207),x("click",function(){g(e);let r=p(2);return f(r.viewTabActive="materialTransfers")}),y(9,"i",94),l(10),a()(),b(11,Zne,3,2,"div",95)(12,iie,3,2,"div",95)(13,sie,3,2,"div",95),a()}if(n&2){let e=p(2);c(2),ie("active",e.viewTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.purchaseOrders.length,") "),c(),ie("active",e.viewTabActive==="stockFulfillments"),c(2),D(" Stock Fulfillments (",e.stockFulfillments.length,") "),c(),ie("active",e.viewTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.materialTransfers.length,") "),c(),m("ngIf",e.viewTabActive==="purchaseOrders"),c(),m("ngIf",e.viewTabActive==="stockFulfillments"),c(),m("ngIf",e.viewTabActive==="materialTransfers")}}function cie(n,t){if(n&1){let e=F();o(0,"button",2),x("click",function(){g(e);let r=p(2);return f(r.saveDraft())}),y(1,"i",209),l(2," Save as Draft "),a()}}function die(n,t){if(n&1){let e=F();o(0,"button",210),x("click",function(){g(e);let r=p(2);return f(r.submitPR())}),y(1,"i",64),l(2," Submit "),a()}}function pie(n,t){if(n&1){let e=F();o(0,"button",211),x("click",function(){g(e);let r=p(2);return f(r.approvePR(r.selectedPR))}),y(1,"i",61),l(2," Approve "),a()}}function mie(n,t){if(n&1){let e=F();o(0,"button",212),x("click",function(){g(e);let r=p(2);return f(r.rejectPR(r.selectedPR))}),y(1,"i",63),l(2," Reject "),a()}}function uie(n,t){if(n&1){let e=F();o(0,"button",182),x("click",function(){g(e);let r=p(2);return f(r.openViewModal(r.selectedPR))}),y(1,"i",74),l(2," View History "),a()}}function gie(n,t){if(n&1){let e=F();o(0,"button",2),x("click",function(){g(e);let r=p(2);return f(r.convertToPO(r.selectedPR))}),y(1,"i",76),l(2," Convert to PO "),a()}}function fie(n,t){if(n&1){let e=F();o(0,"button",182),x("click",function(){g(e);let r=p(2);return f(r.openStockFulfillmentModal(r.selectedPR))}),y(1,"i",93),l(2," Fulfill from Stock "),a()}}function hie(n,t){if(n&1){let e=F();o(0,"button",182),x("click",function(){g(e);let r=p(2);return f(r.openMaterialTransferModal(r.selectedPR))}),y(1,"i",94),l(2," Material Transfer "),a()}}function _ie(n,t){n&1&&(o(0,"span",213),y(1,"i",110),l(2," This requisition has been fully fulfilled "),a())}function vie(n,t){n&1&&(o(0,"span",214),y(1,"i",117),l(2," This requisition was rejected "),a())}function xie(n,t){if(n&1){let e=F();o(0,"div",149)(1,"div",150),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"PR Number"),a(),o(12,"input",156),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.prNumber,r)||(s.selectedPR.prNumber=r),f(r)}),a()(),o(13,"div",155)(14,"label"),l(15,"PR Date *"),a(),o(16,"input",157),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.prDate,r)||(s.selectedPR.prDate=r),f(r)}),a()(),o(17,"div",155)(18,"label"),l(19,"Required Date *"),a(),o(20,"input",157),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.requiredDate,r)||(s.selectedPR.requiredDate=r),f(r)}),a()(),o(21,"div",155)(22,"label"),l(23,"Requested By"),a(),o(24,"input",156),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.requestedBy,r)||(s.selectedPR.requestedBy=r),f(r)}),a()(),o(25,"div",155)(26,"label"),l(27,"Department / Project *"),a(),o(28,"input",158),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.department,r)||(s.selectedPR.department=r),f(r)}),a()(),o(29,"div",155)(30,"label"),l(31,"Delivery Location"),a(),o(32,"input",159),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.deliveryLocation,r)||(s.selectedPR.deliveryLocation=r),f(r)}),a()(),o(33,"div",160)(34,"label"),l(35,"Purpose"),a(),o(36,"textarea",161),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.purpose,r)||(s.selectedPR.purpose=r),f(r)}),a()(),o(37,"div",155)(38,"label"),l(39,"Priority *"),a(),o(40,"select",162),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPR.priority,r)||(s.selectedPR.priority=r),f(r)}),o(41,"option",163),l(42,"Normal"),a(),o(43,"option",164),l(44,"Urgent"),a(),o(45,"option",165),l(46,"Critical"),a()()(),o(47,"div",155)(48,"label"),l(49,"Status"),a(),y(50,"input",166),a()(),o(51,"div",167)(52,"div",168)(53,"h3"),l(54,"Material List"),a(),o(55,"div",169),b(56,Bne,7,3,"div",170)(57,Une,3,0,"button",171),a()(),o(58,"div",172)(59,"table",173)(60,"thead")(61,"tr")(62,"th",174),l(63,"#"),a(),o(64,"th",175),l(65,"Item Name *"),a(),o(66,"th"),l(67,"Item Description"),a(),o(68,"th",85),l(69,"Qty *"),a(),b(70,jne,2,0,"th",176),o(71,"th",177),l(72,"UOM"),a(),b(73,Wne,2,0,"th",178),o(74,"th"),l(75,"Remarks"),a(),b(76,zne,2,0,"th",179),a()(),o(77,"tbody"),b(78,Jne,22,16,"tr",87),a()()()(),b(79,lie,14,12,"div",180),a(),o(80,"div",181)(81,"button",182),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(82,"Cancel"),a(),b(83,cie,3,0,"button",183)(84,die,3,0,"button",184)(85,pie,3,0,"button",185)(86,mie,3,0,"button",186)(87,uie,3,0,"button",171)(88,gie,3,0,"button",183)(89,fie,3,0,"button",171)(90,hie,3,0,"button",171)(91,_ie,3,0,"span",187)(92,vie,3,0,"span",188),a()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Requisition":"New Purchase Requisition"),c(8),M("ngModel",e.selectedPR.prNumber),c(4),M("ngModel",e.selectedPR.prDate),c(4),M("ngModel",e.selectedPR.requiredDate),c(4),M("ngModel",e.selectedPR.requestedBy),c(4),M("ngModel",e.selectedPR.department),c(4),M("ngModel",e.selectedPR.deliveryLocation),c(4),M("ngModel",e.selectedPR.purpose),c(4),M("ngModel",e.selectedPR.priority),c(10),m("value",e.selectedPR.status),c(6),m("ngIf",e.selectedPR.status!=="Draft"&&e.selectedPR.status!=="Submitted"&&e.selectedPR.status!=="Rejected"),c(),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(13),m("ngIf",e.selectedPR.status!=="Draft"),c(3),m("ngIf",e.selectedPR.status!=="Draft"),c(3),m("ngIf",e.canSubmit(e.selectedPR)),c(2),m("ngForOf",e.selectedPR.items),c(),m("ngIf",e.isEditing&&(e.selectedPR.status==="Approved"||e.selectedPR.status==="Partially Fulfilled"||e.selectedPR.status==="Fully Fulfilled")),c(4),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),m("ngIf",e.canApproveReject(e.selectedPR)),c(),m("ngIf",e.canApproveReject(e.selectedPR)),c(),m("ngIf",e.canConvertToPO(e.selectedPR)),c(),m("ngIf",e.canConvertToPO(e.selectedPR)),c(),m("ngIf",e.canFulfillFromStock(e.selectedPR)),c(),m("ngIf",e.canMaterialTransfer(e.selectedPR)),c(),m("ngIf",e.isCompleted(e.selectedPR)),c(),m("ngIf",e.isRejected(e.selectedPR))}}function yie(n,t){n&1&&(o(0,"div",108),y(1,"i",76),o(2,"p"),l(3,"No purchase orders created for this PR yet."),a()())}function Cie(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",216),l(11),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.poNumber),c(2),_(i.formatDate(e.poDate)),c(2),_(e.supplierName),c(2),_(e.itemCount||(e.items==null?null:e.items.length)||0),c(3),_(e.status)}}function bie(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"PO Number"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Supplier"),a(),o(9,"th"),l(10,"Items"),a(),o(11,"th"),l(12,"Status"),a()()(),o(13,"tbody"),b(14,Cie,12,5,"tr",87),a()()),n&2){let e=p(3);c(14),m("ngForOf",e.purchaseOrders)}}function Mie(n,t){if(n&1&&(o(0,"div",103),b(1,yie,4,0,"div",105)(2,bie,15,1,"table",208),a()),n&2){let e=p(2);c(),m("ngIf",e.purchaseOrders.length===0),c(),m("ngIf",e.purchaseOrders.length>0)}}function Sie(n,t){n&1&&(o(0,"div",108),y(1,"i",93),o(2,"p"),l(3,"No stock fulfillments for this PR yet."),a()())}function Pie(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.fulfillmentNumber),c(2),_(i.formatDate(e.fulfillmentDate)),c(2),_(e.warehouseName||"-"),c(2),_(e.supplierName||"-"),c(2),_((e.items==null?null:e.items.length)||0)}}function wie(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Fulfillment #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Warehouse"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),b(14,Pie,11,5,"tr",87),a()()),n&2){let e=p(3);c(14),m("ngForOf",e.stockFulfillments)}}function Eie(n,t){if(n&1&&(o(0,"div",103),b(1,Sie,4,0,"div",105)(2,wie,15,1,"table",208),a()),n&2){let e=p(2);c(),m("ngIf",e.stockFulfillments.length===0),c(),m("ngIf",e.stockFulfillments.length>0)}}function Oie(n,t){n&1&&(o(0,"div",108),y(1,"i",94),o(2,"p"),l(3,"No material transfers for this PR yet."),a()())}function Tie(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.transferNumber),c(2),_(i.formatDate(e.transferDate)),c(2),_(e.projectName||"-"),c(2),_(e.supplierName||"-"),c(2),_((e.items==null?null:e.items.length)||0)}}function kie(n,t){if(n&1&&(o(0,"table",125)(1,"thead")(2,"tr")(3,"th"),l(4,"Transfer #"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Project"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Items"),a()()(),o(13,"tbody"),b(14,Tie,11,5,"tr",87),a()()),n&2){let e=p(3);c(14),m("ngForOf",e.materialTransfers)}}function Iie(n,t){if(n&1&&(o(0,"div",103),b(1,Oie,4,0,"div",105)(2,kie,15,1,"table",208),a()),n&2){let e=p(2);c(),m("ngIf",e.materialTransfers.length===0),c(),m("ngIf",e.materialTransfers.length>0)}}function Die(n,t){if(n&1){let e=F();o(0,"div",149)(1,"div",150),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),x("click",function(){g(e);let r=p();return f(r.showViewModal=!1)}),y(6,"i",63),a()(),o(7,"div",153)(8,"div",206)(9,"button",207),x("click",function(){g(e);let r=p();return f(r.viewTabActive="purchaseOrders")}),y(10,"i",76),l(11),a(),o(12,"button",207),x("click",function(){g(e);let r=p();return f(r.viewTabActive="stockFulfillments")}),y(13,"i",93),l(14),a(),o(15,"button",207),x("click",function(){g(e);let r=p();return f(r.viewTabActive="materialTransfers")}),y(16,"i",94),l(17),a()(),b(18,Mie,3,2,"div",95)(19,Eie,3,2,"div",95)(20,Iie,3,2,"div",95),a(),o(21,"div",181)(22,"button",215),l(23,"Close"),a()()()()}if(n&2){let e=p();c(4),D("PR History - ",e.selectedPR.prNumber),c(5),ie("active",e.viewTabActive==="purchaseOrders"),c(2),D(" Purchase Orders (",e.purchaseOrders.length,") "),c(),ie("active",e.viewTabActive==="stockFulfillments"),c(2),D(" Stock Fulfillments (",e.stockFulfillments.length,") "),c(),ie("active",e.viewTabActive==="materialTransfers"),c(2),D(" Material Transfers (",e.materialTransfers.length,") "),c(),m("ngIf",e.viewTabActive==="purchaseOrders"),c(),m("ngIf",e.viewTabActive==="stockFulfillments"),c(),m("ngIf",e.viewTabActive==="materialTransfers")}}function Aie(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.name," (",e.code,")")}}function Rie(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Fie(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",97),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",219),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.quantity),c(2),_(e.fulfilledQuantity||0),c(2),_(i.getRemainingQty(e)),c(2),M("ngModel",e.fulfillQty),m("max",i.getRemainingQty(e))("disabled",!e.selected)}}function Nie(n,t){if(n&1){let e=F();o(0,"div",149)(1,"div",150),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),x("click",function(){g(e);let r=p();return f(r.showStockFulfillmentModal=!1)}),y(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"Warehouse"),a(),o(12,"select",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouseId,r)||(s.selectedWarehouseId=r),f(r)}),o(13,"option",201),l(14,"Select Warehouse"),a(),b(15,Aie,2,3,"option",196),a()(),o(16,"div",155)(17,"label"),l(18,"Supplier"),a(),o(19,"select",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplierId,r)||(s.selectedSupplierId=r),f(r)}),o(20,"option",201),l(21,"Select Supplier"),a(),b(22,Rie,2,2,"option",196),a()(),o(23,"div",160)(24,"label"),l(25,"Remarks"),a(),o(26,"textarea",218),S("ngModelChange",function(r){g(e);let s=p();return P(s.stockFulfillmentRemarks,r)||(s.stockFulfillmentRemarks=r),f(r)}),a()()(),o(27,"div",167)(28,"div",168)(29,"h3"),l(30,"Select Items to Fulfill"),a()(),o(31,"div",172)(32,"table",173)(33,"thead")(34,"tr")(35,"th",83)(36,"input",84),x("change",function(r){g(e);let s=p();return f(s.toggleAllItems(s.stockFulfillmentItems,r))}),a()(),o(37,"th"),l(38,"Item Name"),a(),o(39,"th",177),l(40,"Required"),a(),o(41,"th",177),l(42,"Already Fulfilled"),a(),o(43,"th",177),l(44,"Remaining"),a(),o(45,"th",177),l(46,"Qty to Fulfill"),a()()(),o(47,"tbody"),b(48,Fie,13,8,"tr",87),a()()()()(),o(49,"div",181)(50,"button",182),x("click",function(){g(e);let r=p();return f(r.closeStockFulfillmentModal())}),l(51,"Cancel"),a(),o(52,"button",2),x("click",function(){g(e);let r=p();return f(r.saveStockFulfillment())}),y(53,"i",61),l(54," Fulfill Selected Items "),a()()()()}if(n&2){let e=p();c(4),D("Stock Fulfillment - ",e.selectedPR.prNumber),c(8),M("ngModel",e.selectedWarehouseId),c(),m("value",null),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.selectedSupplierId),c(),m("value",null),c(2),m("ngForOf",e.suppliers),c(4),M("ngModel",e.stockFulfillmentRemarks),c(22),m("ngForOf",e.stockFulfillmentItems)}}function Lie(n,t){if(n&1&&(o(0,"option",201),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Vie(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",97),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"input",219),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.quantity),c(2),_(e.fulfilledQuantity||0),c(2),_(i.getRemainingQty(e)),c(2),M("ngModel",e.fulfillQty),m("max",i.getRemainingQty(e))("disabled",!e.selected)}}function Bie(n,t){if(n&1){let e=F();o(0,"div",149)(1,"div",150),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",151)(3,"h2"),l(4),a(),o(5,"button",152),x("click",function(){g(e);let r=p();return f(r.showMaterialTransferModal=!1)}),y(6,"i",63),a()(),o(7,"div",153)(8,"div",154)(9,"div",155)(10,"label"),l(11,"Project Name"),a(),o(12,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.transferProjectName,r)||(s.transferProjectName=r),f(r)}),a()(),o(13,"div",155)(14,"label"),l(15,"Supplier"),a(),o(16,"select",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.transferSupplierId,r)||(s.transferSupplierId=r),f(r)}),o(17,"option",201),l(18,"Select Supplier"),a(),b(19,Lie,2,2,"option",196),a()(),o(20,"div",160)(21,"label"),l(22,"Remarks"),a(),o(23,"textarea",218),S("ngModelChange",function(r){g(e);let s=p();return P(s.materialTransferRemarks,r)||(s.materialTransferRemarks=r),f(r)}),a()()(),o(24,"div",167)(25,"div",168)(26,"h3"),l(27,"Select Items to Transfer"),a()(),o(28,"div",172)(29,"table",173)(30,"thead")(31,"tr")(32,"th",83)(33,"input",84),x("change",function(r){g(e);let s=p();return f(s.toggleAllItems(s.materialTransferItems,r))}),a()(),o(34,"th"),l(35,"Item Name"),a(),o(36,"th",177),l(37,"Required"),a(),o(38,"th",177),l(39,"Already Fulfilled"),a(),o(40,"th",177),l(41,"Remaining"),a(),o(42,"th",177),l(43,"Qty to Transfer"),a()()(),o(44,"tbody"),b(45,Vie,13,8,"tr",87),a()()()()(),o(46,"div",181)(47,"button",182),x("click",function(){g(e);let r=p();return f(r.closeMaterialTransferModal())}),l(48,"Cancel"),a(),o(49,"button",2),x("click",function(){g(e);let r=p();return f(r.saveMaterialTransfer())}),y(50,"i",61),l(51," Transfer Selected Items "),a()()()()}if(n&2){let e=p();c(4),D("Material Transfer - ",e.selectedPR.prNumber),c(8),M("ngModel",e.transferProjectName),c(4),M("ngModel",e.transferSupplierId),c(),m("value",null),c(2),m("ngForOf",e.suppliers),c(4),M("ngModel",e.materialTransferRemarks),c(22),m("ngForOf",e.materialTransferItems)}}var SC=class n{constructor(t,e,i,r,s,d,u,h,v){this.prService=t;this.unitService=e;this.itemService=i;this.router=r;this.settingsService=s;this.warehouseService=d;this.supplierService=u;this.notificationService=h;this.authService=v;let C=this.authService.getCurrentUser();C&&(this.currentUserName=C.firstName&&C.lastName?`${C.firstName} ${C.lastName}`:C.username)}requisitions=[];draftPRs=[];submittedPRs=[];approvedPRs=[];partiallyFulfilledPRs=[];fullyFulfilledPRs=[];rejectedPRs=[];isAdmin=!0;units=[];items=[];warehouses=[];suppliers=[];showModal=!1;isEditing=!1;searchTerm="";viewMode="kanban";selectedPR=this.getEmptyPR();showViewModal=!1;viewTabActive="purchaseOrders";purchaseOrders=[];stockFulfillments=[];materialTransfers=[];showStockFulfillmentModal=!1;stockFulfillmentItems=[];selectedWarehouseId=null;selectedSupplierId=null;stockFulfillmentRemarks="";showMaterialTransferModal=!1;materialTransferItems=[];transferProjectName="";transferSupplierId=null;materialTransferRemarks="";sortOptions=[{value:"date-created",label:"Date Created"},{value:"pr-date",label:"PR Date"},{value:"priority",label:"Priority"}];currentSort="date-created";expandedPRId=null;inlineTabActive="purchaseOrders";inlinePurchaseOrders=[];inlineStockFulfillments=[];inlineMaterialTransfers=[];inlineSelectableItems=[];currentUserName="";ngOnInit(){this.loadData()}loadData(){this.prService.getAll().subscribe({next:t=>{this.requisitions=t,this.filterByStatus()},error:()=>{this.requisitions=[],this.filterByStatus()}}),this.unitService.getActive().subscribe({next:t=>this.units=t,error:()=>this.units=[]}),this.itemService.getActive().subscribe({next:t=>this.items=t,error:()=>this.items=[]}),this.warehouseService.getActiveWarehouses().subscribe({next:t=>this.warehouses=t,error:()=>this.warehouses=[]}),this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:()=>this.suppliers=[]})}filterByStatus(){this.draftPRs=this.requisitions.filter(t=>t.status==="Draft"),this.submittedPRs=this.requisitions.filter(t=>t.status==="Submitted"),this.approvedPRs=this.requisitions.filter(t=>t.status==="Approved"),this.partiallyFulfilledPRs=this.requisitions.filter(t=>t.status==="Partially Fulfilled"),this.fullyFulfilledPRs=this.requisitions.filter(t=>t.status==="Fully Fulfilled"),this.rejectedPRs=this.requisitions.filter(t=>t.status==="Rejected")}getFilteredPRs(t){if(!this.searchTerm)return t;let e=this.searchTerm.toLowerCase();return t.filter(i=>i.prNumber?.toLowerCase().includes(e)||i.department?.toLowerCase().includes(e)||i.requestedBy?.toLowerCase().includes(e))}getEmptyPR(){return{prNumber:"",prDate:new Date().toISOString().split("T")[0],requiredDate:"",requestedBy:this.currentUserName||"Current User",department:"",deliveryLocation:"",purpose:"",priority:"Normal",status:"Draft",items:[this.getEmptyItem()],commentsCount:0}}getEmptyItem(){return{itemId:void 0,itemCode:"",itemName:"",itemDescription:"",quantity:0,fulfilledQuantity:0,uom:"",remarks:"",status:"Pending"}}openNewModal(){this.isEditing=!1,this.selectedPR=this.getEmptyPR(),this.generatePRNumber(),this.showModal=!0}generatePRNumber(){this.settingsService.previewPrefixId("pr").subscribe({next:t=>{this.selectedPR.prNumber=t},error:t=>{console.error("Error generating PR number",t),this.selectedPR.prNumber=this.prService.generatePRNumber()}})}openEditModal(t){this.isEditing=!0,this.selectedPR=JSON.parse(JSON.stringify(t)),(!this.selectedPR.items||this.selectedPR.items.length===0)&&(this.selectedPR.items=[this.getEmptyItem()]),this.showModal=!0,this.viewTabActive="purchaseOrders",(t.status==="Approved"||t.status==="Partially Fulfilled"||t.status==="Fully Fulfilled")&&this.loadViewTabData()}viewPR(t){this.openEditModal(t)}closeModal(){this.showModal=!1,this.selectedPR=this.getEmptyPR(),this.purchaseOrders=[],this.stockFulfillments=[],this.materialTransfers=[]}addItem(){this.selectedPR.items.push(this.getEmptyItem())}removeItem(t){this.selectedPR.items.length>1&&this.selectedPR.items.splice(t,1)}onItemSelect(t){let e=this.items.find(i=>i.name===this.selectedPR.items[t].itemName);e&&(this.selectedPR.items[t].itemId=e.id,this.selectedPR.items[t].itemCode=e.code||"",this.selectedPR.items[t].itemDescription=e.description||"",this.selectedPR.items[t].uom=e.unitOfMeasure?.symbol||e.unitOfMeasure?.code||"")}saveDraft(){this.selectedPR.status="Draft",this.saveRequisition()}submitPR(){this.selectedPR.status="Submitted",this.saveRequisition()}saveRequisition(){let t=this.selectedPR.items.filter(e=>e.itemName&&e.quantity>0);if(t.length===0){this.notificationService.error("Please add at least one item with name and quantity.");return}this.selectedPR.items=t,this.isEditing&&this.selectedPR.id?this.prService.update(this.selectedPR.id,this.selectedPR).subscribe({next:()=>{this.notificationService.success("Purchase requisition updated successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error("Error updating PR"),console.error("Error updating PR:",e)}}):this.prService.create(this.selectedPR).subscribe({next:()=>{this.notificationService.success("Purchase requisition created successfully"),this.loadData(),this.closeModal()},error:e=>{this.notificationService.error("Error creating PR"),console.error("Error creating PR:",e)}})}deletePR(t){if(t.status!=="Draft"){this.notificationService.error("Only Draft PRs can be deleted.");return}confirm(`Are you sure you want to delete ${t.prNumber}?`)&&t.id&&this.prService.delete(t.id).subscribe({next:()=>{this.notificationService.success("Purchase requisition deleted successfully"),this.loadData()},error:e=>{this.notificationService.error("Error deleting PR"),console.error("Error deleting PR:",e)}})}getPriorityClass(t){switch(t){case"Critical":return"priority-critical";case"Urgent":return"priority-urgent";default:return"priority-normal"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""}canEdit(t){return t.status==="Draft"}canDelete(t){return t.status==="Draft"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}getAllFilteredPRs(){if(!this.searchTerm)return this.requisitions;let t=this.searchTerm.toLowerCase();return this.requisitions.filter(e=>e.prNumber?.toLowerCase().includes(t)||e.department?.toLowerCase().includes(t)||e.requestedBy?.toLowerCase().includes(t))}getStatusClass(t){switch(t){case"Draft":return"status-draft";case"Submitted":return"status-submitted";case"Approved":return"status-approved";case"Partially Fulfilled":return"status-partial";case"Fully Fulfilled":return"status-fulfilled";case"Rejected":return"status-rejected";default:return"status-default"}}canSubmit(t){return t.status==="Draft"}canApproveReject(t){return t.status==="Submitted"&&this.isAdmin}canConvertToPO(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canFulfillFromStock(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canMaterialTransfer(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}isCompleted(t){return t.status==="Fully Fulfilled"}isRejected(t){return t.status==="Rejected"}approvePR(t,e){e?.stopPropagation(),this.canApproveReject(t)&&confirm(`Are you sure you want to approve ${t.prNumber}?`)&&t.id&&this.prService.approve(t.id).subscribe({next:()=>this.loadData(),error:i=>console.error("Error approving PR:",i)})}rejectPR(t,e){if(e?.stopPropagation(),!this.canApproveReject(t))return;let i=prompt(`Enter rejection reason for ${t.prNumber}:`);i&&t.id&&this.prService.reject(t.id,i).subscribe({next:()=>{this.loadData(),this.closeModal()},error:r=>console.error("Error rejecting PR:",r)})}convertToPO(t,e){e?.stopPropagation(),this.canConvertToPO(t)&&this.router.navigate(["/app/purchase/fulfillment/convert-to-po"],{queryParams:{prId:t.id}})}fulfillFromStock(t,e){e?.stopPropagation(),this.canFulfillFromStock(t)&&this.router.navigate(["/app/purchase/fulfillment/stock-issue"],{queryParams:{prId:t.id}})}materialTransfer(t,e){e?.stopPropagation(),this.canMaterialTransfer(t)&&this.router.navigate(["/app/purchase/fulfillment/material-transfer"],{queryParams:{prId:t.id}})}getItemStatusClass(t){switch(t){case"Pending":return"item-pending";case"Partially Fulfilled":return"item-partial";case"Fully Fulfilled":return"item-fulfilled";default:return"item-pending"}}calculateFulfillmentProgress(t){if(!t.items||t.items.length===0)return 0;let e=t.items.reduce((r,s)=>r+s.quantity,0),i=t.items.reduce((r,s)=>r+(s.fulfilledQuantity||0),0);return e>0?Math.round(i/e*100):0}printPR(t){t.id&&this.router.navigate(["/app/purchase/requisition",t.id,"print"])}openViewModal(t){this.selectedPR=JSON.parse(JSON.stringify(t)),this.viewTabActive="purchaseOrders",this.showViewModal=!0,this.loadViewTabData()}closeViewModal(){this.showViewModal=!1,this.purchaseOrders=[],this.stockFulfillments=[],this.materialTransfers=[]}loadViewTabData(){this.selectedPR.id&&(this.prService.getPurchaseOrdersByPrId(this.selectedPR.id).subscribe({next:t=>this.purchaseOrders=t,error:()=>this.purchaseOrders=[]}),this.prService.getStockFulfillmentsByPrId(this.selectedPR.id).subscribe({next:t=>this.stockFulfillments=t,error:()=>this.stockFulfillments=[]}),this.prService.getMaterialTransfersByPrId(this.selectedPR.id).subscribe({next:t=>this.materialTransfers=t,error:()=>this.materialTransfers=[]}))}openStockFulfillmentModal(t,e){e?.stopPropagation(),this.canFulfillFromStock(t)&&(this.selectedPR=JSON.parse(JSON.stringify(t)),this.stockFulfillmentItems=this.selectedPR.items.filter(i=>i.quantity-(i.fulfilledQuantity||0)>0).map(i=>Tt(me({},i),{selected:!1,fulfillQty:i.quantity-(i.fulfilledQuantity||0)})),this.selectedWarehouseId=null,this.selectedSupplierId=null,this.stockFulfillmentRemarks="",this.showStockFulfillmentModal=!0)}closeStockFulfillmentModal(){this.showStockFulfillmentModal=!1,this.stockFulfillmentItems=[]}saveStockFulfillment(){let t=this.stockFulfillmentItems.filter(i=>i.selected&&i.fulfillQty&&i.fulfillQty>0);if(t.length===0){this.notificationService.error("Please select at least one item to fulfill.");return}if(!this.selectedWarehouseId&&!this.selectedSupplierId){this.notificationService.error("Please select a warehouse or supplier.");return}let e={prId:this.selectedPR.id,warehouseId:this.selectedWarehouseId||void 0,supplierId:this.selectedSupplierId||void 0,remarks:this.stockFulfillmentRemarks,items:t.map(i=>({prItemId:i.id,itemId:i.itemId,quantity:i.fulfillQty}))};this.prService.createStockFulfillment(e).subscribe({next:()=>{if(this.closeStockFulfillmentModal(),this.loadData(),this.expandedPRId){let i=this.requisitions.find(r=>r.id===this.expandedPRId);i&&setTimeout(()=>this.loadInlineData(i),500)}this.notificationService.success("Stock fulfillment created successfully")},error:i=>{console.error("Error creating stock fulfillment:",i),this.notificationService.error("Error creating stock fulfillment. Please try again.")}})}openMaterialTransferModal(t,e){e?.stopPropagation(),this.canMaterialTransfer(t)&&(this.selectedPR=JSON.parse(JSON.stringify(t)),this.materialTransferItems=this.selectedPR.items.filter(i=>i.quantity-(i.fulfilledQuantity||0)>0).map(i=>Tt(me({},i),{selected:!1,fulfillQty:i.quantity-(i.fulfilledQuantity||0)})),this.transferProjectName="",this.transferSupplierId=null,this.materialTransferRemarks="",this.showMaterialTransferModal=!0)}closeMaterialTransferModal(){this.showMaterialTransferModal=!1,this.materialTransferItems=[]}saveMaterialTransfer(){let t=this.materialTransferItems.filter(i=>i.selected&&i.fulfillQty&&i.fulfillQty>0);if(t.length===0){this.notificationService.error("Please select at least one item to transfer.");return}let e={prId:this.selectedPR.id,projectName:this.transferProjectName,supplierId:this.transferSupplierId||void 0,remarks:this.materialTransferRemarks,items:t.map(i=>({prItemId:i.id,itemId:i.itemId,quantity:i.fulfillQty}))};this.prService.createMaterialTransfer(e).subscribe({next:()=>{if(this.closeMaterialTransferModal(),this.loadData(),this.expandedPRId){let i=this.requisitions.find(r=>r.id===this.expandedPRId);i&&setTimeout(()=>this.loadInlineData(i),500)}this.notificationService.success("Material transfer created successfully")},error:i=>{console.error("Error creating material transfer:",i),this.notificationService.error("Error creating material transfer. Please try again.")}})}toggleAllItems(t,e){let i=e.target.checked;t.forEach(r=>r.selected=i)}getRemainingQty(t){return t.quantity-(t.fulfilledQuantity||0)}togglePRExpand(t,e){e?.stopPropagation(),this.expandedPRId===t.id?(this.expandedPRId=null,this.resetInlineState()):(this.resetInlineState(),this.expandedPRId=t.id,this.inlineTabActive="purchaseOrders",this.loadInlineData(t))}resetInlineState(){this.inlineSelectableItems=[],this.inlinePurchaseOrders=[],this.inlineStockFulfillments=[],this.inlineMaterialTransfers=[]}loadInlineData(t){t.id&&(this.inlineSelectableItems=t.items.filter(e=>e.quantity-(e.fulfilledQuantity||0)>0).map(e=>Tt(me({},e),{selected:!1,fulfillQty:e.quantity-(e.fulfilledQuantity||0)})),this.prService.getPurchaseOrdersByPrId(t.id).subscribe({next:e=>this.inlinePurchaseOrders=e,error:()=>this.inlinePurchaseOrders=[]}),this.prService.getStockFulfillmentsByPrId(t.id).subscribe({next:e=>this.inlineStockFulfillments=e,error:()=>this.inlineStockFulfillments=[]}),this.prService.getMaterialTransfersByPrId(t.id).subscribe({next:e=>this.inlineMaterialTransfers=e,error:()=>this.inlineMaterialTransfers=[]}))}openInlineStockFulfillment(t,e){e?.stopPropagation();let i=this.inlineSelectableItems.filter(r=>r.selected&&r.fulfillQty&&r.fulfillQty>0);if(i.length===0){this.notificationService.error("Please select at least one item to fulfill from stock.");return}this.selectedPR=JSON.parse(JSON.stringify(t)),this.stockFulfillmentItems=i,this.selectedWarehouseId=null,this.selectedSupplierId=null,this.stockFulfillmentRemarks="",this.showStockFulfillmentModal=!0}openInlineMaterialTransfer(t,e){e?.stopPropagation();let i=this.inlineSelectableItems.filter(r=>r.selected&&r.fulfillQty&&r.fulfillQty>0);if(i.length===0){this.notificationService.error("Please select at least one item for material transfer.");return}this.selectedPR=JSON.parse(JSON.stringify(t)),this.materialTransferItems=i,this.transferProjectName="",this.transferSupplierId=null,this.materialTransferRemarks="",this.showMaterialTransferModal=!0}toggleInlineItemSelection(t){t.selected=!t.selected}toggleAllInlineItems(t){let e=t.target.checked;this.inlineSelectableItems.forEach(i=>i.selected=e)}getSelectedItemsCount(){return this.inlineSelectableItems.filter(t=>t.selected).length}static \u0275fac=function(e){return new(e||n)(V(oa),V(ec),V(_i),V(tn),V(Zn),V(Xi),V(yo),V(en),V(Ui))};static \u0275cmp=_e({type:n,selectors:[["app-purchase-requisition"]],standalone:!1,decls:24,vars:12,consts:[[1,"page-container"],[1,"page-header"],[1,"btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search Requisitions",3,"ngModelChange","ngModel"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fa","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fa","fa-table"],["class","sort-options",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","table-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"sort-options"],["class","sort-link",3,"active","click",4,"ngFor","ngForOf"],[1,"sort-link",3,"click"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","pr-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","submitted"],[1,"kanban-column","approved"],["class","pr-card-wrapper",4,"ngFor","ngForOf"],[1,"kanban-column","partial"],[1,"kanban-column","fulfilled"],["class","pr-card completed",3,"click",4,"ngFor","ngForOf"],[1,"kanban-column","rejected"],["class","pr-card rejected-card",3,"click",4,"ngFor","ngForOf"],[1,"pr-card",3,"click"],[1,"card-header"],[1,"pr-number"],[1,"priority-badge",3,"ngClass"],[1,"card-department"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"card-footer"],[1,"comments"],[1,"fa","fa-comments"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fa","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fa","fa-trash"],[1,"empty-column"],[1,"fa","fa-file-alt"],["class","card-actions-row",4,"ngIf"],[1,"card-actions-row"],["title","Approve",1,"btn-action","approve",3,"click"],[1,"fa","fa-check"],["title","Reject",1,"btn-action","reject",3,"click"],[1,"fa","fa-times"],[1,"fa","fa-paper-plane"],[1,"pr-card-wrapper"],[1,"pr-card"],[1,"header-right"],[1,"expand-btn",3,"click","title"],[1,"fa"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],["title","View Details",1,"btn-action","view",3,"click"],[1,"fa","fa-eye"],["title","Convert to PO",1,"btn-action","convert",3,"click"],[1,"fa","fa-file-invoice"],["class","inline-expand-section",4,"ngIf"],[1,"inline-expand-section"],[1,"inline-items-section"],[1,"inline-section-header"],["class","selected-count",4,"ngIf"],[1,"inline-items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","90px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","inline-action-buttons",4,"ngIf"],[1,"inline-tabs"],[1,"tab-headers"],[1,"tab-header",3,"click"],[1,"fa","fa-box"],[1,"fa","fa-exchange-alt"],["class","tab-content",4,"ngIf"],[1,"selected-count"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number","min","1",1,"inline-qty-input",3,"ngModelChange","ngModel","max","disabled"],["colspan","6",1,"no-items"],[1,"inline-action-buttons"],[1,"btn-action","stock",3,"click"],[1,"btn-action","transfer",3,"click"],[1,"tab-content"],["class","inline-data-table",4,"ngIf"],["class","empty-tab",4,"ngIf"],[1,"inline-data-table"],[1,"status-badge",3,"ngClass"],[1,"empty-tab"],[1,"status-badge","status-approved"],[1,"fa","fa-check-circle"],[1,"fa","fa-tasks"],[1,"pr-card","completed",3,"click"],[1,"completed-badge"],[1,"fa","fa-check-double"],[1,"pr-card","rejected-card",3,"click"],[1,"rejected-badge"],[1,"fa","fa-times-circle"],["class","detail-row",4,"ngIf"],["class","rejected-by",4,"ngIf"],[1,"value","rejection-reason"],[1,"rejected-by"],[1,"fa","fa-ban"],[1,"table-view"],[1,"table-container"],[1,"data-table"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"clickable-row",3,"click"],[1,"pr-link"],[1,"action-buttons"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon","title","View",3,"click",4,"ngIf"],["class","btn-icon delete","title","Delete",3,"click",4,"ngIf"],["class","btn-icon approve","title","Approve",3,"click",4,"ngIf"],["class","btn-icon reject","title","Reject",3,"click",4,"ngIf"],["class","btn-icon view","title","View History",3,"click",4,"ngIf"],["class","btn-icon convert","title","Convert to PO",3,"click",4,"ngIf"],["class","btn-icon stock","title","Fulfill from Stock",3,"click",4,"ngIf"],["class","btn-icon transfer","title","Material Transfer",3,"click",4,"ngIf"],["class","completed-label",4,"ngIf"],["title","View",1,"btn-icon",3,"click"],["title","Approve",1,"btn-icon","approve",3,"click"],["title","Reject",1,"btn-icon","reject",3,"click"],["title","View History",1,"btn-icon","view",3,"click"],["title","Convert to PO",1,"btn-icon","convert",3,"click"],["title","Fulfill from Stock",1,"btn-icon","stock",3,"click"],["title","Material Transfer",1,"btn-icon","transfer",3,"click"],[1,"completed-label"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter department or project","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["placeholder","Enter purpose of requisition","rows","2",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Normal"],["value","Urgent"],["value","Critical"],["type","text","readonly","",1,"form-control",3,"value"],[1,"items-section"],[1,"section-header"],[1,"section-header-right"],["class","fulfillment-progress",4,"ngIf"],["class","btn-secondary",3,"click",4,"ngIf"],[1,"items-table-container"],[1,"items-table"],[2,"width","30px"],[2,"width","180px"],["style","width: 80px;",4,"ngIf"],[2,"width","100px"],["style","width: 100px;",4,"ngIf"],["style","width: 50px;",4,"ngIf"],["class","view-tabs-section",4,"ngIf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],["class","btn-success",3,"click",4,"ngIf"],["class","btn-approve",3,"click",4,"ngIf"],["class","btn-reject",3,"click",4,"ngIf"],["class","completed-message",4,"ngIf"],["class","rejected-message",4,"ngIf"],[1,"fulfillment-progress"],[1,"progress-label"],[1,"progress-bar-inline"],[1,"progress-percent"],[2,"width","50px"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Remarks",1,"form-control",3,"ngModelChange","ngModel","readonly"],[3,"value"],[1,"fulfilled-qty"],[1,"item-status-badge",3,"ngClass"],["title","Remove",1,"btn-icon","delete",3,"click","disabled"],[1,"view-tabs-section"],[1,"tabs"],[1,"tab-btn",3,"click"],["class","data-table",4,"ngIf"],[1,"fa","fa-save"],[1,"btn-success",3,"click"],[1,"btn-approve",3,"click"],[1,"btn-reject",3,"click"],[1,"completed-message"],[1,"rejected-message"],[1,"btn-secondary"],[1,"status-badge"],[1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Enter remarks","rows","2",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","max","disabled"],["type","text","placeholder","Enter project name",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Purchase Requisition"),a(),o(4,"button",2),x("click",function(){return i.openNewModal()}),y(5,"i",3),l(6," New Requisition "),a()(),o(7,"div",4)(8,"div",5),y(9,"i",6),o(10,"input",7),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()(),o(11,"div",8)(12,"div",9)(13,"button",10),x("click",function(){return i.viewMode="kanban"}),y(14,"i",11),a(),o(15,"button",12),x("click",function(){return i.viewMode="table"}),y(16,"i",13),a()(),b(17,Tte,4,1,"div",14),a()(),b(18,Pne,55,18,"div",15)(19,Vne,24,2,"div",16),a(),b(20,xie,93,27,"div",17)(21,Die,24,13,"div",17)(22,Nie,55,9,"div",17)(23,Bie,52,7,"div",17)),e&2&&(c(10),M("ngModel",i.searchTerm),c(3),ie("active",i.viewMode==="kanban"),c(2),ie("active",i.viewMode==="table"),c(2),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.viewMode==="table"),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal),c(),m("ngIf",i.showStockFulfillmentModal),c(),m("ngIf",i.showMaterialTransferModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,fr,Ee],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;background:#f5f5f5;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:teal;font-size:24px;font-weight:600;margin:0}.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #ddd;border-radius:6px;padding:8px 12px;min-width:280px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;margin-right:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:14px;width:100%}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.table-view[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #00000014}.table-view[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .2s}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]:hover{background:#f8fafa}.data-table[_ngcontent-%COMP%]   .pr-link[_ngcontent-%COMP%]{color:teal}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;display:block;margin-bottom:12px}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.status-badge.status-submitted[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.status-default[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]{color:teal;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]:hover{background:#0080801a}.sort-options[_ngcontent-%COMP%]   .sort-link.active[_ngcontent-%COMP%]{background:teal;color:#fff}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.submitted[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#007bff}.kanban-column.approved[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 300px);overflow-y:auto}.pr-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.pr-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.pr-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card-header[_ngcontent-%COMP%]   .pr-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.priority-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px;border-radius:12px;font-weight:500}.priority-badge.priority-normal[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.priority-badge.priority-urgent[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.priority-badge.priority-critical[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.card-department[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{font-size:12px;color:#666}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:900px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{max-width:1100px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eee;background:teal;color:#fff}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;padding:4px 8px;opacity:.8;transition:opacity .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only, .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#666}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{margin-top:20px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;font-weight:600}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:6px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:800px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:13px;color:#333}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:8px 10px;font-size:13px}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f8f9fa}.kanban-column.partial[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800)}.kanban-column.fulfilled[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.kanban-column.rejected[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.card-actions-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap}.btn-action[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:4px;transition:all .2s}.btn-action.convert[_ngcontent-%COMP%]{background:teal;color:#fff}.btn-action.convert[_ngcontent-%COMP%]:hover{background:#066}.btn-action.stock[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-action.stock[_ngcontent-%COMP%]:hover{background:#138496}.btn-action.transfer[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-action.transfer[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-action.approve[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-action.approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-action.reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-action.reject[_ngcontent-%COMP%]:hover{background:#c82333}.progress-bar[_ngcontent-%COMP%]{height:20px;background:#e9ecef;border-radius:10px;overflow:hidden;position:relative;margin:10px 0}.progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.progress-bar[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:11px;font-weight:600;color:#333}.completed-badge[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.completed-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.rejected-badge[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.rejected-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.pr-card.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fff8,#e8f5e9);border-left:4px solid #28a745}.pr-card.rejected-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff8f8,#ffebee);border-left:4px solid #dc3545}.rejection-reason[_ngcontent-%COMP%]{color:#dc3545;font-style:italic}.rejected-by[_ngcontent-%COMP%]{font-size:11px;color:#999}.status-partial[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-icon.approve[_ngcontent-%COMP%]{color:#28a745}.btn-icon.approve[_ngcontent-%COMP%]:hover{background:#d4edda}.btn-icon.reject[_ngcontent-%COMP%]{color:#dc3545}.btn-icon.reject[_ngcontent-%COMP%]:hover{background:#f8d7da}.btn-icon.convert[_ngcontent-%COMP%]{color:teal}.btn-icon.convert[_ngcontent-%COMP%]:hover{background:#e0f2f2}.btn-icon.stock[_ngcontent-%COMP%]{color:#17a2b8}.btn-icon.stock[_ngcontent-%COMP%]:hover{background:#d1ecf1}.btn-icon.transfer[_ngcontent-%COMP%]{color:#6c757d}.btn-icon.transfer[_ngcontent-%COMP%]:hover{background:#e9ecef}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.completed-label[_ngcontent-%COMP%]{color:#28a745;font-size:12px;font-weight:600;display:flex;align-items:center;gap:4px}.item-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.item-partial[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.item-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-approve[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-reject[_ngcontent-%COMP%]:hover{background:#c82333}.completed-message[_ngcontent-%COMP%]{color:#28a745;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#d4edda;border-radius:6px}.rejected-message[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#f8d7da;border-radius:6px}.section-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.fulfillment-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.fulfillment-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]{width:120px;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.fulfillment-progress[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:teal;min-width:35px}.fulfilled-qty[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666}.item-status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}@media(max-width:768px){.page-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 1}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}}.view-tabs-section[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:1px solid #e0e0e0}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid #e0e0e0;margin-bottom:20px}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{background:transparent;border:none;padding:12px 20px;cursor:pointer;font-size:14px;color:#666;display:flex;align-items:center;gap:8px;transition:all .2s;border-bottom:2px solid transparent;margin-bottom:-2px}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:teal;background:#0080800d}.tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.tab-content[_ngcontent-%COMP%]{min-height:200px}.empty-tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#999;text-align:center}.empty-tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-tab[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.btn-action.view[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-action.view[_ngcontent-%COMP%]:hover{background:#138496}.btn-icon.view[_ngcontent-%COMP%]{color:#17a2b8}.btn-icon.view[_ngcontent-%COMP%]:hover{color:#138496}.pr-card-wrapper[_ngcontent-%COMP%]{margin-bottom:12px}.pr-card-wrapper[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pr-card.expanded[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:2px solid #008080}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expand-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer;color:#666;transition:all .2s}.expand-btn[_ngcontent-%COMP%]:hover{background:teal;color:#fff;border-color:teal}.expand-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.inline-expand-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-top:none;border-radius:0 0 8px 8px;padding:16px;box-shadow:0 4px 8px #0000001a}.inline-items-section[_ngcontent-%COMP%]{margin-bottom:20px}.inline-section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.inline-section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#333;font-weight:600}.inline-section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{background:teal;color:#fff;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.inline-items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.inline-items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .inline-items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;text-align:left;border-bottom:1px solid #e0e0e0}.inline-items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:600;color:#333}.inline-items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.inline-items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.inline-items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.inline-items-table[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#999;font-style:italic}.inline-qty-input[_ngcontent-%COMP%]{width:70px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px;text-align:right}.inline-qty-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.inline-qty-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#999}.inline-action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px;justify-content:flex-end}.inline-tabs[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:16px}.inline-tabs[_ngcontent-%COMP%]   .tab-headers[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px;border-bottom:1px solid #e0e0e0;padding-bottom:0}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]{background:transparent;border:none;padding:10px 16px;cursor:pointer;font-size:13px;color:#666;display:flex;align-items:center;gap:6px;transition:all .2s;border-bottom:2px solid transparent;margin-bottom:-1px}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]:hover{color:teal}.inline-tabs[_ngcontent-%COMP%]   .tab-header.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.inline-tabs[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.inline-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{min-height:100px}.inline-data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.inline-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .inline-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;text-align:left;border-bottom:1px solid #e0e0e0}.inline-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.inline-data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.inline-data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.inline-tabs[_ngcontent-%COMP%]   .empty-tab[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#999;font-size:13px;background:#fafafa;border-radius:6px}"]})};function Uie(n,t){n&1&&(o(0,"div",7),y(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function jie(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function Wie(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",46),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),x("change",function(){let r=g(e).$implicit,s=p(2);return f(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",47),l(8),a(),o(9,"td",47),l(10),a(),o(11,"td",48),l(12),a(),o(13,"td",47),l(14),a(),o(15,"td")(16,"input",49),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),x("input",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(17,"td")(18,"input",50),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.rate,r)||(s.rate=r),f(r)}),x("input",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(19,"td",51),l(20),Le(21,"number"),a()()}if(n&2){let e=t.$implicit;ie("selected",e.selected),c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.itemDescription||"-"),c(2),_(e.requestedQty),c(2),_(e.fulfilledQty),c(2),_(e.pendingQty),c(2),_(e.uom),c(2),M("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty),c(2),M("ngModel",e.rate),m("disabled",!e.selected),c(2),D(" ",e.selected?rt(21,15,e.amount,"1.2-2"):"-"," ")}}function zie(n,t){n&1&&y(0,"i",52)}function qie(n,t){n&1&&y(0,"i",8)}function Hie(n,t){if(n&1){let e=F();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Purpose:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Purchase Order Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"PO Number"),a(),o(43,"input",19),S("ngModelChange",function(r){g(e);let s=p();return P(s.poNumber,r)||(s.poNumber=r),f(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Supplier *"),a(),o(47,"select",20),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedSupplierId,r)||(s.selectedSupplierId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onSupplierChange())}),o(48,"option",21),l(49,"Select Supplier"),a(),b(50,jie,2,2,"option",22),a()(),o(51,"div",18)(52,"label"),l(53,"Payment Terms"),a(),o(54,"input",23),S("ngModelChange",function(r){g(e);let s=p();return P(s.paymentTerms,r)||(s.paymentTerms=r),f(r)}),a()(),o(55,"div",18)(56,"label"),l(57,"Expected Delivery Date *"),a(),o(58,"input",24),S("ngModelChange",function(r){g(e);let s=p();return P(s.expectedDeliveryDate,r)||(s.expectedDeliveryDate=r),f(r)}),a()(),o(59,"div",25)(60,"label"),l(61,"Remarks"),a(),o(62,"textarea",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.remarks,r)||(s.remarks=r),f(r)}),a()()()()(),o(63,"div",27)(64,"div",28)(65,"h3"),l(66,"Select Items for Purchase Order"),a(),o(67,"span",29),l(68),a()(),o(69,"div",30)(70,"table",31)(71,"thead")(72,"tr")(73,"th",32)(74,"input",33),x("change",function(r){g(e);let s=p();return f(s.toggleSelectAll(r))}),a()(),o(75,"th"),l(76,"Item Name"),a(),o(77,"th"),l(78,"Description"),a(),o(79,"th",34),l(80,"Requested"),a(),o(81,"th",34),l(82,"Fulfilled"),a(),o(83,"th",34),l(84,"Pending"),a(),o(85,"th",34),l(86,"UOM"),a(),o(87,"th",35),l(88,"Qty to Order *"),a(),o(89,"th",35),l(90,"Rate *"),a(),o(91,"th",36),l(92,"Amount"),a()()(),o(93,"tbody"),b(94,Wie,22,18,"tr",37),a(),o(95,"tfoot")(96,"tr",38)(97,"td",39)(98,"strong"),l(99,"Total Amount:"),a()(),o(100,"td",40)(101,"strong"),l(102),Le(103,"number"),a()()()()()()(),o(104,"div",41)(105,"button",42),x("click",function(){g(e);let r=p();return f(r.cancel())}),l(106,"Cancel"),a(),o(107,"button",43),x("click",function(){g(e);let r=p();return f(r.createPO())}),b(108,zie,1,0,"i",44)(109,qie,1,0,"i",45),l(110),a()()()}if(n&2){let e=p();c(10),_(e.pr.prNumber),c(5),_(e.formatDate(e.pr.prDate)),c(5),_(e.formatDate(e.pr.requiredDate)),c(5),_(e.pr.department),c(5),_(e.pr.requestedBy),c(5),_(e.pr.purpose||"-"),c(8),M("ngModel",e.poNumber),c(4),M("ngModel",e.selectedSupplierId),c(),m("value",0),c(2),m("ngForOf",e.suppliers),c(4),M("ngModel",e.paymentTerms),c(4),M("ngModel",e.expectedDeliveryDate),c(4),M("ngModel",e.remarks),c(6),Ge("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(26),m("ngForOf",e.fulfillmentItems),c(8),_(rt(103,21,e.getTotalAmount(),"1.2-2")),c(5),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Creating PO...":"Create Purchase Order"," ")}}var PC=class n{constructor(t,e,i,r,s,d,u){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.supplierService=s;this.settingsService=d;this.notificationService=u}prId=0;pr=null;suppliers=[];fulfillmentItems=[];poNumber="";selectedSupplierId=0;selectedSupplierName="";paymentTerms="";expectedDeliveryDate="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generatePONumber(),this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}}),this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers:",t)})}generatePONumber(){this.settingsService.previewPrefixId("po").subscribe({next:t=>{this.poNumber=t},error:()=>{this.poNumber=this.fulfillmentService.generatePONumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0,rate:0,amount:0})))}onSupplierChange(){let t=this.suppliers.find(e=>e.id===this.selectedSupplierId);this.selectedSupplierName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)}),this.calculateAmounts()}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty),this.calculateAmounts()}calculateItemAmount(t){t.amount=(t.fulfillQty||0)*(t.rate||0)}calculateAmounts(){this.fulfillmentItems.forEach(t=>{t.selected&&(t.amount=(t.fulfillQty||0)*(t.rate||0))})}getTotalAmount(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.amount||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedSupplierId||!this.expectedDeliveryDate)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty&&e.rate&&e.rate>0)}createPO(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"PO",referenceNumber:this.poNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",supplierId:this.selectedSupplierId,supplierName:this.selectedSupplierName,paymentTerms:this.paymentTerms,expectedDeliveryDate:this.expectedDeliveryDate,remarks:this.remarks,totalAmount:this.getTotalAmount(),items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createPOFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Purchase Order created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating PO:",e),this.saving=!1,this.notificationService.warning("PO creation saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(oa),V(Co),V(yo),V(Zn),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-convert-to-po"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","po-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","100px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","9",1,"text-right"],[1,"text-right","total-amount"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-file-invoice",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","input","ngModel","disabled","max"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","input","ngModel","disabled"],[1,"text-right","amount"],[1,"fa","fa-file-invoice"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return i.cancel()}),y(4,"i",4),a(),o(5,"h1"),l(6,"Convert to Purchase Order"),a()()(),b(7,Uie,4,0,"div",5)(8,Hie,111,24,"div",6),a()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[Se,be,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,fr,Ee,yn],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:500;color:teal}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Gie(n,t){n&1&&(o(0,"div",7),y(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function $ie(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.name," (",e.code,")")}}function Yie(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",43),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),x("change",function(){let r=g(e).$implicit,s=p(2);return f(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",44),l(8),a(),o(9,"td",44),l(10),a(),o(11,"td",45),l(12),a(),o(13,"td",44),l(14),a(),o(15,"td")(16,"input",46),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit;ie("selected",e.selected),c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.itemDescription||"-"),c(2),_(e.requestedQty),c(2),_(e.fulfilledQty),c(2),_(e.pendingQty),c(2),_(e.uom),c(2),M("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty)}}function Jie(n,t){n&1&&y(0,"i",47)}function Kie(n,t){n&1&&y(0,"i",8)}function Qie(n,t){if(n&1){let e=F();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Stock Issue Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Issue Number"),a(),o(43,"input",19),S("ngModelChange",function(r){g(e);let s=p();return P(s.issueNumber,r)||(s.issueNumber=r),f(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Source Warehouse *"),a(),o(47,"select",20),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedWarehouseId,r)||(s.selectedWarehouseId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onWarehouseChange())}),o(48,"option",21),l(49,"Select Warehouse"),a(),b(50,$ie,2,3,"option",22),a()(),o(51,"div",23)(52,"label"),l(53,"Remarks"),a(),o(54,"textarea",24),S("ngModelChange",function(r){g(e);let s=p();return P(s.remarks,r)||(s.remarks=r),f(r)}),a()()()()(),o(55,"div",25)(56,"div",26)(57,"h3"),l(58,"Select Items to Issue from Stock"),a(),o(59,"span",27),l(60),a()(),o(61,"div",28)(62,"table",29)(63,"thead")(64,"tr")(65,"th",30)(66,"input",31),x("change",function(r){g(e);let s=p();return f(s.toggleSelectAll(r))}),a()(),o(67,"th"),l(68,"Item Name"),a(),o(69,"th"),l(70,"Description"),a(),o(71,"th",32),l(72,"Requested"),a(),o(73,"th",32),l(74,"Fulfilled"),a(),o(75,"th",32),l(76,"Pending"),a(),o(77,"th",32),l(78,"UOM"),a(),o(79,"th",33),l(80,"Qty to Issue *"),a()()(),o(81,"tbody"),b(82,Yie,17,12,"tr",34),a(),o(83,"tfoot")(84,"tr",35)(85,"td",36)(86,"strong"),l(87,"Total Issue Quantity:"),a()(),o(88,"td",37)(89,"strong"),l(90),a()()()()()()(),o(91,"div",38)(92,"button",39),x("click",function(){g(e);let r=p();return f(r.cancel())}),l(93,"Cancel"),a(),o(94,"button",40),x("click",function(){g(e);let r=p();return f(r.createStockIssue())}),b(95,Jie,1,0,"i",41)(96,Kie,1,0,"i",42),l(97),a()()()}if(n&2){let e=p();c(10),_(e.pr.prNumber),c(5),_(e.formatDate(e.pr.prDate)),c(5),_(e.formatDate(e.pr.requiredDate)),c(5),_(e.pr.department),c(5),_(e.pr.requestedBy),c(5),_(e.pr.deliveryLocation||"-"),c(8),M("ngModel",e.issueNumber),c(4),M("ngModel",e.selectedWarehouseId),c(),m("value",0),c(2),m("ngForOf",e.warehouses),c(4),M("ngModel",e.remarks),c(6),Ge("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),m("ngForOf",e.fulfillmentItems),c(8),_(e.getTotalIssueQty()),c(4),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Creating Issue...":"Create Stock Issue"," ")}}var wC=class n{constructor(t,e,i,r,s,d){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=s;this.notificationService=d}prId=0;pr=null;warehouses=[];fulfillmentItems=[];issueNumber="";selectedWarehouseId=0;selectedWarehouseName="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateIssueNumber(),this.warehouses=[{id:1,name:"Main Warehouse",code:"WH-001"},{id:2,name:"Secondary Warehouse",code:"WH-002"},{id:3,name:"Project Site A",code:"WH-003"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateIssueNumber(){this.settingsService.previewPrefixId("issue").subscribe({next:t=>{this.issueNumber=t},error:()=>{this.issueNumber=this.fulfillmentService.generateIssueNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onWarehouseChange(){let t=this.warehouses.find(e=>e.id===this.selectedWarehouseId);this.selectedWarehouseName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalIssueQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedWarehouseId)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createStockIssue(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Stock Issue",referenceNumber:this.issueNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",warehouseId:this.selectedWarehouseId,warehouseName:this.selectedWarehouseName,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createStockIssueFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Stock Issue created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating stock issue:",e),this.saving=!1,this.notificationService.warning("Stock Issue saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(oa),V(Co),V(Zn),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-stock-issue-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","issue-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-box",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-box"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return i.cancel()}),y(4,"i",4),a(),o(5,"h1"),l(6,"Fulfill from Stock"),a()()(),b(7,Gie,4,0,"div",5)(8,Qie,98,19,"div",6),a()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[Se,be,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,fr,Ee],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Xie(n,t){n&1&&(o(0,"div",7),y(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),a()())}function Zie(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.name," (",e.code,")")}}function ere(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",44),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),x("change",function(){let r=g(e).$implicit,s=p(2);return f(s.onItemSelectionChange(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",45),l(8),a(),o(9,"td",45),l(10),a(),o(11,"td",46),l(12),a(),o(13,"td",45),l(14),a(),o(15,"td")(16,"input",47),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.fulfillQty,r)||(s.fulfillQty=r),f(r)}),a()()()}if(n&2){let e=t.$implicit;ie("selected",e.selected),c(2),M("ngModel",e.selected),c(2),_(e.itemName),c(2),_(e.itemDescription||"-"),c(2),_(e.requestedQty),c(2),_(e.fulfilledQty),c(2),_(e.pendingQty),c(2),_(e.uom),c(2),M("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty)}}function tre(n,t){n&1&&y(0,"i",48)}function nre(n,t){n&1&&y(0,"i",8)}function ire(n,t){if(n&1){let e=F();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),a(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),a(),o(9,"span",15),l(10),a()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),a(),o(14,"span",15),l(15),a()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),a(),o(19,"span",15),l(20),a()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),a(),o(24,"span",15),l(25),a()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),a(),o(29,"span",15),l(30),a()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"h3"),l(38,"Material Transfer Details"),a(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Transfer Number"),a(),o(43,"input",19),S("ngModelChange",function(r){g(e);let s=p();return P(s.transferNumber,r)||(s.transferNumber=r),f(r)}),a()(),o(44,"div",18)(45,"label"),l(46,"Source Project / Location *"),a(),o(47,"select",20),S("ngModelChange",function(r){g(e);let s=p();return P(s.sourceLocationId,r)||(s.sourceLocationId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onSourceLocationChange())}),o(48,"option",21),l(49,"Select Source Location"),a(),b(50,Zie,2,3,"option",22),a()(),o(51,"div",18)(52,"label"),l(53,"Target Location *"),a(),o(54,"input",23),S("ngModelChange",function(r){g(e);let s=p();return P(s.targetLocation,r)||(s.targetLocation=r),f(r)}),a()(),o(55,"div",24)(56,"label"),l(57,"Remarks"),a(),o(58,"textarea",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.remarks,r)||(s.remarks=r),f(r)}),a()()()()(),o(59,"div",26)(60,"div",27)(61,"h3"),l(62,"Select Items to Transfer"),a(),o(63,"span",28),l(64),a()(),o(65,"div",29)(66,"table",30)(67,"thead")(68,"tr")(69,"th",31)(70,"input",32),x("change",function(r){g(e);let s=p();return f(s.toggleSelectAll(r))}),a()(),o(71,"th"),l(72,"Item Name"),a(),o(73,"th"),l(74,"Description"),a(),o(75,"th",33),l(76,"Requested"),a(),o(77,"th",33),l(78,"Fulfilled"),a(),o(79,"th",33),l(80,"Pending"),a(),o(81,"th",33),l(82,"UOM"),a(),o(83,"th",34),l(84,"Qty to Transfer *"),a()()(),o(85,"tbody"),b(86,ere,17,12,"tr",35),a(),o(87,"tfoot")(88,"tr",36)(89,"td",37)(90,"strong"),l(91,"Total Transfer Quantity:"),a()(),o(92,"td",38)(93,"strong"),l(94),a()()()()()()(),o(95,"div",39)(96,"button",40),x("click",function(){g(e);let r=p();return f(r.cancel())}),l(97,"Cancel"),a(),o(98,"button",41),x("click",function(){g(e);let r=p();return f(r.createTransfer())}),b(99,tre,1,0,"i",42)(100,nre,1,0,"i",43),l(101),a()()()}if(n&2){let e=p();c(10),_(e.pr.prNumber),c(5),_(e.formatDate(e.pr.prDate)),c(5),_(e.formatDate(e.pr.requiredDate)),c(5),_(e.pr.department),c(5),_(e.pr.requestedBy),c(5),_(e.pr.deliveryLocation||"-"),c(8),M("ngModel",e.transferNumber),c(4),M("ngModel",e.sourceLocationId),c(),m("value",0),c(2),m("ngForOf",e.locations),c(4),M("ngModel",e.targetLocation),c(4),M("ngModel",e.remarks),c(6),Ge("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),m("ngForOf",e.fulfillmentItems),c(8),_(e.getTotalTransferQty()),c(4),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Creating Transfer...":"Create Material Transfer"," ")}}var EC=class n{constructor(t,e,i,r,s,d){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=s;this.notificationService=d}prId=0;pr=null;locations=[];fulfillmentItems=[];transferNumber="";sourceLocationId=0;sourceLocationName="";targetLocation="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateTransferNumber(),this.locations=[{id:1,name:"Project Site A",code:"PS-A"},{id:2,name:"Project Site B",code:"PS-B"},{id:3,name:"Central Store",code:"CS"},{id:4,name:"Regional Depot",code:"RD"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.targetLocation=t.deliveryLocation||"",this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateTransferNumber(){this.settingsService.previewPrefixId("transfer").subscribe({next:t=>{this.transferNumber=t},error:()=>{this.transferNumber=this.fulfillmentService.generateTransferNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onSourceLocationChange(){let t=this.locations.find(e=>e.id===this.sourceLocationId);this.sourceLocationName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalTransferQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.sourceLocationId||!this.targetLocation)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createTransfer(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Material Transfer",referenceNumber:this.transferNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",sourceLocation:this.sourceLocationName,targetLocation:this.targetLocation,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createMaterialTransferFulfillment(t).subscribe({next:()=>{this.saving=!1,this.notificationService.success("Material Transfer created successfully"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating transfer:",e),this.saving=!1,this.notificationService.warning("Material Transfer saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(oa),V(Co),V(Zn),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-material-transfer-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","transfer-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Destination location","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-exchange-alt",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-exchange-alt"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return i.cancel()}),y(4,"i",4),a(),o(5,"h1"),l(6,"Material Transfer"),a()()(),b(7,Xie,4,0,"div",5)(8,ire,102,20,"div",6),a()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[Se,be,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,fr,Ee],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var e0=class n{constructor(t){this.http=t}baseUrl="/api/purchase/direct";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function rre(n,t){n&1&&(o(0,"tr")(1,"td",28),y(2,"i",29),a()())}function ore(n,t){n&1&&(o(0,"tr")(1,"td",28),y(2,"i",30),o(3,"p"),l(4,"No entries found"),a()()())}function are(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td")(15,"span",31),l(16),a()(),o(17,"td")(18,"div",32)(19,"button",33),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPurchase(r))}),y(20,"i",34),a(),o(21,"button",35),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deletePurchase(r.id))}),y(22,"i",36),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.poNumber||"Draft"),c(2),_(e.prNumber||"-"),c(2),_(e.poType),c(2),_(e.supplierName),c(2),_(i.formatDate(e.createdDate)),c(2),_(i.formatDate(e.deliveryDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),D(" ",e.status," ")}}function sre(n,t){if(n&1&&(o(0,"div",24)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),l(5,"PO Number"),a(),o(6,"th"),l(7,"PR Ref"),a(),o(8,"th"),l(9,"PO Type"),a(),o(10,"th"),l(11,"Supplier"),a(),o(12,"th"),l(13,"Created Date"),a(),o(14,"th"),l(15,"Deliver Date"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Options"),a()()(),o(20,"tbody"),b(21,rre,3,0,"tr",26)(22,ore,5,0,"tr",26)(23,are,23,8,"tr",27),a()()()),n&2){let e=p();c(21),m("ngIf",e.loading),c(),m("ngIf",!e.loading&&e.filteredPurchases.length===0),c(),m("ngForOf",e.filteredPurchases)}}function lre(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.prNumber)}}function cre(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),Le(5,"number"),a()()),n&2){let e=p().$implicit;c(4),_(rt(5,1,e.totalAmount,"1.2-2"))}}function dre(n,t){if(n&1){let e=F();o(0,"div",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),b(8,lre,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),b(20,cre,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),x("click",function(r){let s=g(e).$implicit;return p(2).printPO(s),f(r.stopPropagation())}),y(24,"i",60),a(),o(25,"button",61),x("click",function(r){let s=g(e).$implicit;return p(2).openModal(s),f(r.stopPropagation())}),y(26,"i",62),a(),o(27,"button",63),x("click",function(r){let s=g(e).$implicit;return p(2).deletePurchase(s.id),f(r.stopPropagation())}),y(28,"i",36),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.poNumber||"Draft"),c(),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(e.supplierName),c(),m("ngIf",e.prNumber),c(6),_(i.formatDate(e.createdDate)),c(5),_(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function pre(n,t){n&1&&(o(0,"div",65),y(1,"i",66),o(2,"span"),l(3,"No Draft Orders"),a()())}function mre(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.prNumber)}}function ure(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),Le(5,"number"),a()()),n&2){let e=p().$implicit;c(4),_(rt(5,1,e.totalAmount,"1.2-2"))}}function gre(n,t){if(n&1){let e=F();o(0,"div",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),b(8,mre,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),b(20,ure,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),x("click",function(r){let s=g(e).$implicit;return p(2).printPO(s),f(r.stopPropagation())}),y(24,"i",60),a(),o(25,"button",67),x("click",function(r){let s=g(e).$implicit;return p(2).viewPurchase(s),f(r.stopPropagation())}),y(26,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.poNumber),c(),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(e.supplierName),c(),m("ngIf",e.prNumber),c(6),_(i.formatDate(e.createdDate)),c(5),_(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function fre(n,t){n&1&&(o(0,"div",65),y(1,"i",68),o(2,"span"),l(3,"No Pending Orders"),a()())}function hre(n,t){if(n&1&&(o(0,"div",64)(1,"span",54),l(2,"PR Ref:"),a(),o(3,"span",55),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.prNumber)}}function _re(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2,"Amount:"),a(),o(3,"span",55),l(4),Le(5,"number"),a()()),n&2){let e=p().$implicit;c(4),_(rt(5,1,e.totalAmount,"1.2-2"))}}function vre(n,t){if(n&1){let e=F();o(0,"div",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),a(),o(4,"span",31),l(5),a()(),o(6,"div",50),l(7),a(),b(8,hre,5,1,"div",51),o(9,"div",52)(10,"div",53)(11,"span",54),l(12,"Created:"),a(),o(13,"span",55),l(14),a()(),o(15,"div",53)(16,"span",54),l(17,"Deliver:"),a(),o(18,"span",55),l(19),a()(),b(20,_re,6,4,"div",56),a(),o(21,"div",57)(22,"div",58)(23,"button",59),x("click",function(r){let s=g(e).$implicit;return p(2).printPO(s),f(r.stopPropagation())}),y(24,"i",60),a(),o(25,"button",67),x("click",function(r){let s=g(e).$implicit;return p(2).viewPurchase(s),f(r.stopPropagation())}),y(26,"i",34),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.poNumber),c(),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(e.supplierName),c(),m("ngIf",e.prNumber),c(6),_(i.formatDate(e.createdDate)),c(5),_(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function xre(n,t){n&1&&(o(0,"div",65),y(1,"i",69),o(2,"span"),l(3,"No Completed Orders"),a()())}function yre(n,t){if(n&1&&(o(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),l(4,"Draft"),a(),o(5,"span",41),l(6),a()(),o(7,"div",42),b(8,dre,29,8,"div",43)(9,pre,4,0,"div",44),a()(),o(10,"div",45)(11,"div",39)(12,"span",40),l(13,"Pending"),a(),o(14,"span",41),l(15),a()(),o(16,"div",42),b(17,gre,27,8,"div",43)(18,fre,4,0,"div",44),a()(),o(19,"div",46)(20,"div",39)(21,"span",40),l(22,"Completed"),a(),o(23,"span",41),l(24),a()(),o(25,"div",42),b(26,vre,27,8,"div",43)(27,xre,4,0,"div",44),a()()()),n&2){let e=p();c(6),D("",e.draftPurchases.length," Orders"),c(2),m("ngForOf",e.draftPurchases),c(),m("ngIf",e.draftPurchases.length===0),c(6),D("",e.pendingPurchases.length," Orders"),c(2),m("ngForOf",e.pendingPurchases),c(),m("ngIf",e.pendingPurchases.length===0),c(6),D("",e.completedPurchases.length," Orders"),c(2),m("ngForOf",e.completedPurchases),c(),m("ngIf",e.completedPurchases.length===0)}}function Cre(n,t){if(n&1&&(o(0,"option",97),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function bre(n,t){if(n&1&&(o(0,"option",109),l(1),a()),n&2){let e=t.$implicit;m("value",e.code),c(),_(e.code)}}function Mre(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",98),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemName,r)||(s.itemName=r),f(r)}),a()(),o(3,"td")(4,"input",99),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.description,r)||(s.description=r),f(r)}),a()(),o(5,"td",100)(6,"input",101),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(7,"td",100)(8,"select",102),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.uom,r)||(s.uom=r),f(r)}),o(9,"option",103),l(10,"-"),a(),b(11,bre,2,2,"option",104),a()(),o(12,"td",100)(13,"input",105),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.rate,r)||(s.rate=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(14,"td",100),y(15,"input",106),a(),o(16,"td")(17,"input",107),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.remarks,r)||(s.remarks=r),f(r)}),a()(),o(18,"td")(19,"button",108),x("click",function(){let r=g(e).index,s=p(2);return f(s.removeItem(r))}),y(20,"i",74),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.itemName),c(2),M("ngModel",e.description),c(2),M("ngModel",e.quantity),c(2),M("ngModel",e.uom),c(3),m("ngForOf",i.units),c(2),M("ngModel",e.rate),c(2),m("value",e.amount),c(2),M("ngModel",e.remarks),c(2),m("disabled",i.selectedPurchase.items.length<=1)}}function Sre(n,t){if(n&1){let e=F();o(0,"div",70)(1,"div",71),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",72)(3,"h2"),l(4),a(),o(5,"button",73),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",74),a()(),o(7,"div",75)(8,"div",76)(9,"h3"),l(10,"Purchase Order Details"),a(),o(11,"div",77)(12,"div",78)(13,"label"),l(14,"PO Type"),a(),y(15,"input",79),a(),o(16,"div",80)(17,"label"),l(18,"Supplier *"),a(),o(19,"select",81),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPurchase.supplierId,r)||(s.selectedPurchase.supplierId=r),f(r)}),o(20,"option",82),l(21,"Select Supplier"),a(),b(22,Cre,2,2,"option",83),a()(),o(23,"div",78)(24,"label"),l(25,"Delivery Location"),a(),o(26,"input",84),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPurchase.deliveryLocation,r)||(s.selectedPurchase.deliveryLocation=r),f(r)}),a()()(),o(27,"div",85)(28,"div",78)(29,"label"),l(30,"Payment Terms"),a(),o(31,"input",86),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPurchase.paymentTerms,r)||(s.selectedPurchase.paymentTerms=r),f(r)}),a()(),o(32,"div",78)(33,"label"),l(34,"Delivery Date"),a(),o(35,"input",87),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPurchase.deliveryDate,r)||(s.selectedPurchase.deliveryDate=r),f(r)}),a()()()(),o(36,"div",76)(37,"div",88)(38,"h3"),l(39,"Item List"),a(),o(40,"button",89),x("click",function(){g(e);let r=p();return f(r.addItem())}),y(41,"i",5),l(42," Add Item "),a()(),o(43,"div",90)(44,"table",91)(45,"thead")(46,"tr")(47,"th"),l(48,"Item Name"),a(),o(49,"th"),l(50,"Description"),a(),o(51,"th"),l(52,"Qty"),a(),o(53,"th"),l(54,"UOM"),a(),o(55,"th"),l(56,"Rate"),a(),o(57,"th"),l(58,"Amount"),a(),o(59,"th"),l(60,"Remarks"),a(),y(61,"th"),a()(),o(62,"tbody"),b(63,Mre,21,9,"tr",27),a(),o(64,"tfoot")(65,"tr")(66,"td",92)(67,"strong"),l(68,"Total Amount:"),a()(),o(69,"td",93)(70,"strong"),l(71),Le(72,"number"),a()()()()()()()(),o(73,"div",94)(74,"button",95),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(75,"Cancel"),a(),o(76,"button",96),x("click",function(){g(e);let r=p();return f(r.savePurchase())}),l(77),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Direct PO":"Create Direct PO"),c(15),M("ngModel",e.selectedPurchase.supplierId),c(),m("ngValue",0),c(2),m("ngForOf",e.suppliers),c(4),M("ngModel",e.selectedPurchase.deliveryLocation),c(5),M("ngModel",e.selectedPurchase.paymentTerms),c(4),M("ngModel",e.selectedPurchase.deliveryDate),c(28),m("ngForOf",e.selectedPurchase.items),c(8),_(rt(72,11,e.getTotalAmount(),"1.2-2")),c(5),m("disabled",e.selectedPurchase.supplierId===0),c(),D(" ",e.editMode?"Update":"Save"," ")}}var OC=class n{constructor(t,e,i,r,s){this.directPurchaseService=t;this.supplierService=e;this.unitService=i;this.router=r;this.settingsService=s}purchases=[];suppliers=[];units=[];searchQuery="";showModal=!1;editMode=!1;viewMode="table";selectedPurchase=this.getEmptyPurchase();loading=!1;ngOnInit(){this.loadPurchases(),this.loadSuppliers(),this.loadUnits()}loadPurchases(){this.loading=!0,this.directPurchaseService.getAll().subscribe({next:t=>{this.purchases=t,this.loading=!1},error:t=>{console.error("Error loading direct purchases",t),this.loading=!1}})}loadSuppliers(){this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}loadUnits(){this.unitService.getActive().subscribe({next:t=>this.units=t,error:t=>console.error("Error loading units",t)})}get filteredPurchases(){if(!this.searchQuery)return this.purchases;let t=this.searchQuery.toLowerCase();return this.purchases.filter(e=>e.poNumber?.toLowerCase().includes(t)||e.supplierName?.toLowerCase().includes(t))}getEmptyPurchase(){return{poType:"Direct Purchase",supplierId:0,supplierName:"",deliveryLocation:"",paymentTerms:"",deliveryDate:"",status:"Draft",items:[]}}getEmptyItem(){return{itemName:"",description:"",quantity:0,uom:"",rate:0,amount:0,remarks:""}}openModal(t){t?(this.editMode=!0,this.selectedPurchase=Tt(me({},t),{items:[...t.items]})):(this.editMode=!1,this.selectedPurchase=this.getEmptyPurchase(),this.generatePONumber(),this.addItem()),this.showModal=!0}generatePONumber(){this.settingsService.previewPrefixId("po").subscribe({next:t=>{this.selectedPurchase.poNumber=t},error:t=>console.error("Error generating PO number",t)})}closeModal(){this.showModal=!1,this.selectedPurchase=this.getEmptyPurchase()}addItem(){this.selectedPurchase.items.push(this.getEmptyItem())}removeItem(t){this.selectedPurchase.items.length>1&&this.selectedPurchase.items.splice(t,1)}calculateItemAmount(t){t.amount=t.quantity*t.rate}getTotalAmount(){return this.selectedPurchase.items.reduce((t,e)=>t+(e.amount||0),0)}getSupplierName(t){let e=this.suppliers.find(i=>i.id===t);return e?e.name:""}savePurchase(){this.selectedPurchase.totalAmount=this.getTotalAmount(),this.selectedPurchase.supplierName=this.getSupplierName(this.selectedPurchase.supplierId),this.editMode&&this.selectedPurchase.id?this.directPurchaseService.update(this.selectedPurchase.id,this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error updating purchase",t)}):this.directPurchaseService.create(this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error creating purchase",t)})}deletePurchase(t){confirm("Are you sure you want to delete this purchase order?")&&this.directPurchaseService.delete(t).subscribe({next:()=>this.loadPurchases(),error:e=>console.error("Error deleting purchase",e)})}viewPurchase(t){this.openModal(t)}getStatusClass(t){switch(t){case"Completed":return"badge-success";case"Pending":return"badge-warning";case"Draft":return"badge-secondary";case"Cancelled":return"badge-danger";default:return"badge-info"}}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}get draftPurchases(){return this.filteredPurchases.filter(t=>t.status==="Draft"||t.status?.toLowerCase().includes("draft"))}get pendingPurchases(){return this.filteredPurchases.filter(t=>t.status==="Pending"||t.status==="Pending Approval"||t.status?.toLowerCase().includes("pending"))}get completedPurchases(){return this.filteredPurchases.filter(t=>t.status==="Completed"||t.status==="Approved"||t.status?.toLowerCase().includes("complete"))}printPO(t){t.id&&this.router.navigate(["/app/purchase/direct",t.id,"print"])}static \u0275fac=function(e){return new(e||n)(V(e0),V(yo),V(ec),V(tn),V(Zn))};static \u0275cmp=_e({type:n,selectors:[["app-direct-purchase"]],standalone:!1,decls:44,vars:8,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"filter-group"],[1,"form-control"],[1,"btn","btn-secondary","btn-sm"],[1,"fas","fa-file-export"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fas","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fas","fa-table"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],["class","table-container",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-cart-plus"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View/Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","po-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","pending"],[1,"kanban-column","completed"],[1,"po-card",3,"click"],[1,"card-header"],[1,"po-number"],[1,"card-supplier"],["class","card-pr-ref",4,"ngIf"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"card-footer"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fas","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"card-pr-ref"],[1,"empty-column"],[1,"fas","fa-file-alt"],["title","View",1,"btn-icon",3,"click"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"modal-overlay"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"grid-3"],[1,"form-group"],["type","text","value","Direct Purchase","readonly","",1,"form-control"],[1,"form-group","required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"section-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"items-table"],[1,"table","table-compact"],["colspan","5",1,"text-right"],["colspan","3"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[3,"ngValue"],["type","text","placeholder","Item name",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","text","placeholder","Description",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-sm"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","step","0.01",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","readonly","",1,"form-control","form-control-sm",3,"value"],["type","text","placeholder","Remarks",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Direct Purchase"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Purchase Order Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Direct Purchase"),a()()(),o(16,"button",4),x("click",function(){return i.openModal()}),y(17,"i",5),l(18," New "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"select",9)(23,"option"),l(24,"25"),a(),o(25,"option"),l(26,"50"),a(),o(27,"option"),l(28,"100"),a()(),o(29,"button",10),y(30,"i",11),l(31," Export "),a()(),o(32,"div",12)(33,"div",13)(34,"button",14),x("click",function(){return i.viewMode="kanban"}),y(35,"i",15),a(),o(36,"button",16),x("click",function(){return i.viewMode="table"}),y(37,"i",17),a()(),o(38,"div",18),y(39,"i",19),o(40,"input",20),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()()(),b(41,sre,24,3,"div",21)(42,yre,28,9,"div",22),a()(),b(43,Sre,78,14,"div",23)),e&2&&(c(34),ie("active",i.viewMode==="kanban"),c(2),ie("active",i.viewMode==="table"),c(4),M("ngModel",i.searchQuery),c(),m("ngIf",i.viewMode==="table"),c(),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,cn,Xt,Ee,ht,yn],styles:['.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:80px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e9ecef}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:teal;margin-bottom:16px}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}@media(max-width:768px){.grid-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.items-table[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   .col-sm[_ngcontent-%COMP%]{width:80px}.items-table[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.text-right[_ngcontent-%COMP%]{text-align:right}.modal-lg[_ngcontent-%COMP%]{max-width:900px;width:95%}.required[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";color:#dc3545}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.pending[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.kanban-column.completed[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 350px);overflow-y:auto}.po-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.po-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.po-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .po-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.card-supplier[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-pr-ref[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:8px;padding:4px 8px;background:#e8f5e9;border-radius:4px;display:inline-block}.card-pr-ref[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#388e3c;font-weight:500}.card-pr-ref[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600;margin-left:4px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.po-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}']})};function Pre(n,t){n&1&&(o(0,"div",30)(1,"div",31),y(2,"i",32),o(3,"p"),l(4,"Loading report data..."),a()()())}function wre(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",34),o(3,"p"),l(4,"Generate report to view data"),a()()())}function Ere(n,t){n&1&&(o(0,"tr")(1,"td",33),y(2,"i",32),a()())}function Ore(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),Le(15,"number"),a(),o(16,"td")(17,"span",35),l(18),a()()()),n&2){let e=t.$implicit,i=p();c(2),_(e.prNumber),c(2),_(e.prDate),c(2),_(e.requiredDate),c(2),_(e.department),c(2),_(e.requestedBy),c(2),_(e.itemCount),c(2),_(rt(15,9,e.totalAmount,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}var TC=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;dataReady=!1;selectedStatus="";fromDate="";toDate="";ngOnInit(){this.generateReport()}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({prNumber:e.prNumber,prDate:e.prDate,requiredDate:e.requiredDate,department:e.department,requestedBy:e.requestedBy,status:e.status,itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedStatus&&(this.reportData=this.reportData.filter(e=>e.status===this.selectedStatus)),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}completeLoading(){this.loading=!1,this.dataReady=!0}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-list-report","Purchase Requisition List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-list-report")}getStatusClass(t){switch(t){case"Draft":return"badge-secondary";case"Submitted":return"badge-info";case"Approved":return"badge-success";case"Rejected":return"badge-danger";case"Partially Fulfilled":return"badge-warning";case"Fully Fulfilled":return"badge-primary";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(V(oa),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-pr-list-report"]],standalone:!1,decls:84,vars:12,consts:[[1,"report-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Draft"],["value","Submitted"],["value","Approved"],["value","Rejected"],["value","Partially Fulfilled"],["value","Fully Fulfilled"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"empty-state"],[1,"fas","fa-file-alt"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,Pre,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Purchase Requisition List Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"PR List"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Status"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedStatus,s)||(i.selectedStatus=s),s}),o(34,"option",16),l(35,"All Statuses"),a(),o(36,"option",17),l(37,"Draft"),a(),o(38,"option",18),l(39,"Submitted"),a(),o(40,"option",19),l(41,"Approved"),a(),o(42,"option",20),l(43,"Rejected"),a(),o(44,"option",21),l(45,"Partially Fulfilled"),a(),o(46,"option",22),l(47,"Fully Fulfilled"),a()()(),o(48,"div",14)(49,"label"),l(50,"From Date"),a(),o(51,"input",23),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(52,"div",14)(53,"label"),l(54,"To Date"),a(),o(55,"input",23),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(56,"button",24),x("click",function(){return i.generateReport()}),y(57,"i",25),l(58),a()()(),o(59,"div",12)(60,"div",26)(61,"table",27)(62,"thead")(63,"tr")(64,"th"),l(65,"PR Number"),a(),o(66,"th"),l(67,"Date"),a(),o(68,"th"),l(69,"Required Date"),a(),o(70,"th"),l(71,"Department"),a(),o(72,"th"),l(73,"Requested By"),a(),o(74,"th"),l(75,"Items"),a(),o(76,"th"),l(77,"Amount"),a(),o(78,"th"),l(79,"Status"),a()()(),o(80,"tbody"),b(81,wre,5,0,"tr",28)(82,Ere,3,0,"tr",28)(83,Ore,19,12,"tr",29),a()()()(),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(18),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedStatus),c(18),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function Tre(n,t){n&1&&(o(0,"div",20)(1,"div",21),y(2,"i",22),o(3,"p"),l(4,"Loading report data..."),a()()())}function kre(n,t){n&1&&(o(0,"tr")(1,"td",23),y(2,"i",24),o(3,"p"),l(4,"No pending PR items found"),a()()())}function Ire(n,t){n&1&&(o(0,"tr")(1,"td",23),y(2,"i",22),a()())}function Dre(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"strong"),l(17),a()(),o(18,"td"),l(19),a()()),n&2){let e=t.$implicit;c(2),_(e.prNumber),c(2),_(e.prDate),c(2),_(e.itemCode),c(2),_(e.itemName),c(2),_(e.department),c(2),_(e.requestedQty),c(2),_(e.fulfilledQty),c(3),_(e.pendingQty),c(2),_(e.unit)}}var kC=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;dataReady=!1;ngOnInit(){}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{let e=[];t.forEach(i=>{(i.status==="Approved"||i.status==="Partially Fulfilled")&&i.items?.forEach(r=>{let s=(r.quantity||0)-(r.fulfilledQuantity||0);s>0&&e.push({prNumber:i.prNumber,prDate:i.prDate,itemName:r.itemName,itemCode:r.itemCode,requestedQty:r.quantity||0,fulfilledQty:r.fulfilledQuantity||0,pendingQty:s,unit:r.unit||"",department:i.department})})}),this.reportData=e,this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-pending-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-pending-items-report","PR Item Pending Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-pending-items-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(oa),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-pr-pending-report"]],standalone:!1,decls:60,vars:9,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","9",1,"empty-state"],[1,"fas","fa-check-circle"]],template:function(e,i){e&1&&(b(0,Tre,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"PR Item Pending Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"PR Pending"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"button",14),x("click",function(){return i.generateReport()}),y(31,"i",15),l(32),a()()(),o(33,"div",12)(34,"div",16)(35,"table",17)(36,"thead")(37,"tr")(38,"th"),l(39,"PR Number"),a(),o(40,"th"),l(41,"PR Date"),a(),o(42,"th"),l(43,"Item Code"),a(),o(44,"th"),l(45,"Item Name"),a(),o(46,"th"),l(47,"Department"),a(),o(48,"th"),l(49,"Requested"),a(),o(50,"th"),l(51,"Fulfilled"),a(),o(52,"th"),l(53,"Pending"),a(),o(54,"th"),l(55,"Unit"),a()()(),o(56,"tbody"),b(57,kre,5,0,"tr",18)(58,Ire,3,0,"tr",18)(59,Dre,20,9,"tr",19),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(5),m("disabled",i.loading),c(2),D(" ",i.loading?"Loading...":"Refresh"," "),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,ht],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function Are(n,t){n&1&&(o(0,"div",27)(1,"div",28),y(2,"i",29),o(3,"p"),l(4,"Loading report data..."),a()()())}function Rre(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",31),o(3,"p"),l(4,"Generate report to view data"),a()()())}function Fre(n,t){n&1&&(o(0,"tr")(1,"td",30),y(2,"i",29),a()())}function Nre(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",32),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),Le(18,"number"),a()()),n&2){let e=t.$implicit,i=p();c(2),_(e.referenceNumber),c(2),_(e.prNumber),c(2),_(e.fulfillmentDate),c(2),m("ngClass",i.getTypeClass(e.fulfillmentType)),c(),_(e.fulfillmentType),c(2),_(e.performedBy),c(2),_(e.supplierName!=="-"?e.supplierName:e.warehouseName),c(2),_(e.itemCount),c(2),_(rt(18,9,e.totalAmount,"1.2-2"))}}var IC=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;dataReady=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({referenceNumber:e.referenceNumber,prNumber:e.prNumber,fulfillmentDate:e.fulfillmentDate,fulfillmentType:e.fulfillmentType,performedBy:e.performedBy,supplierName:e.supplierName||"-",warehouseName:e.warehouseName||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedType&&(this.reportData=this.reportData.filter(e=>e.fulfillmentType===this.selectedType)),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-fulfillment-history-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-fulfillment-history-report","PR Fulfillment History Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-fulfillment-history-report")}getTypeClass(t){switch(t){case"Convert to PO":return"badge-primary";case"Stock Issue":return"badge-success";case"Material Transfer":return"badge-info";default:return"badge-secondary"}}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(Co),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-pr-history-report"]],standalone:!1,decls:78,vars:12,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Convert to PO"],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"empty-state"],[1,"fas","fa-history"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(b(0,Are,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"PR Fulfillment History Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"PR History"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Fulfillment Type"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedType,s)||(i.selectedType=s),s}),o(34,"option",16),l(35,"All Types"),a(),o(36,"option",17),l(37,"Convert to PO"),a(),o(38,"option",18),l(39,"Stock Issue"),a(),o(40,"option",19),l(41,"Material Transfer"),a()()(),o(42,"div",14)(43,"label"),l(44,"From Date"),a(),o(45,"input",20),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(46,"div",14)(47,"label"),l(48,"To Date"),a(),o(49,"input",20),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(50,"button",21),x("click",function(){return i.generateReport()}),y(51,"i",22),l(52),a()()(),o(53,"div",12)(54,"div",23)(55,"table",24)(56,"thead")(57,"tr")(58,"th"),l(59,"Reference #"),a(),o(60,"th"),l(61,"PR Number"),a(),o(62,"th"),l(63,"Date"),a(),o(64,"th"),l(65,"Type"),a(),o(66,"th"),l(67,"Performed By"),a(),o(68,"th"),l(69,"Supplier/Warehouse"),a(),o(70,"th"),l(71,"Items"),a(),o(72,"th"),l(73,"Amount"),a()()(),o(74,"tbody"),b(75,Rre,5,0,"tr",25)(76,Fre,3,0,"tr",25)(77,Nre,19,12,"tr",26),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedType),c(12),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht,yn],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function Lre(n,t){n&1&&(o(0,"div",22)(1,"div",23),y(2,"i",24),o(3,"p"),l(4,"Loading report data..."),a()()())}function Vre(n,t){n&1&&(o(0,"tr")(1,"td",25),y(2,"i",26),o(3,"p"),l(4,"Generate report to view data"),a()()())}function Bre(n,t){n&1&&(o(0,"tr")(1,"td",25),y(2,"i",24),a()())}function Ure(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),Le(15,"number"),a(),o(16,"td")(17,"span",27),l(18),a()()()),n&2){let e=t.$implicit;c(2),_(e.poNumber),c(2),_(e.poDate),c(2),_(e.prNumber),c(2),_(e.supplierName),c(2),_(e.expectedDelivery),c(2),_(e.itemCount),c(2),_(rt(15,8,e.totalAmount,"1.2-2")),c(4),_(e.status)}}var DC=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;dataReady=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>e.fulfillmentType==="Convert to PO"||e.fulfillmentType==="PO").map(e=>({poNumber:e.referenceNumber,poDate:e.fulfillmentDate,prNumber:e.prNumber,supplierName:e.supplierName||"-",expectedDelivery:e.expectedDeliveryDate||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0,status:"Created"})),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"po-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"po-list-report","Purchase Order List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"po-list-report")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(Co),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-po-list-report"]],standalone:!1,decls:66,vars:11,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-cart"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(b(0,Lre,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Purchase Order List Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"PO List"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"From Date"),a(),o(33,"input",15),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(34,"div",14)(35,"label"),l(36,"To Date"),a(),o(37,"input",15),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(38,"button",16),x("click",function(){return i.generateReport()}),y(39,"i",17),l(40),a()()(),o(41,"div",12)(42,"div",18)(43,"table",19)(44,"thead")(45,"tr")(46,"th"),l(47,"PO Number"),a(),o(48,"th"),l(49,"Date"),a(),o(50,"th"),l(51,"PR Number"),a(),o(52,"th"),l(53,"Supplier"),a(),o(54,"th"),l(55,"Expected Delivery"),a(),o(56,"th"),l(57,"Items"),a(),o(58,"th"),l(59,"Amount"),a(),o(60,"th"),l(61,"Status"),a()()(),o(62,"tbody"),b(63,Vre,5,0,"tr",20)(64,Bre,3,0,"tr",20)(65,Ure,19,11,"tr",21),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,Ie,Oe,Ee,ht,yn],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function jre(n,t){n&1&&(o(0,"div",22)(1,"div",23),y(2,"i",24),o(3,"p"),l(4,"Loading report data..."),a()()())}function Wre(n,t){n&1&&(o(0,"tr")(1,"td",25),y(2,"i",26),o(3,"p"),l(4,"Generate report to view data"),a()()())}function zre(n,t){n&1&&(o(0,"tr")(1,"td",25),y(2,"i",24),a()())}function qre(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),Le(13,"number"),a(),o(14,"td"),l(15),Le(16,"number"),a(),o(17,"td")(18,"span",27),l(19),a()()()),n&2){let e=t.$implicit;c(2),_(e.dpNumber),c(2),_(e.date),c(2),_(e.supplier),c(2),_(e.item),c(2),_(e.quantity),c(2),_(rt(13,8,e.rate,"1.2-2")),c(3),_(rt(16,11,e.amount,"1.2-2")),c(4),_(e.status)}}var AC=class n{constructor(t){this.exportService=t}reportData=[];loading=!1;dataReady=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.dataReady=!1,setTimeout(()=>{this.reportData=[],this.loading=!1,this.dataReady=!0},500)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"direct-purchase-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"direct-purchase-report","Direct Purchase Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"direct-purchase-report")}completeLoading(){this.loading=!1,this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-direct-purchase-report"]],standalone:!1,decls:66,vars:11,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-bag"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(b(0,jre,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Direct Purchase Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Direct Purchase"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"From Date"),a(),o(33,"input",15),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(34,"div",14)(35,"label"),l(36,"To Date"),a(),o(37,"input",15),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(38,"button",16),x("click",function(){return i.generateReport()}),y(39,"i",17),l(40),a()()(),o(41,"div",12)(42,"div",18)(43,"table",19)(44,"thead")(45,"tr")(46,"th"),l(47,"DP Number"),a(),o(48,"th"),l(49,"Date"),a(),o(50,"th"),l(51,"Supplier"),a(),o(52,"th"),l(53,"Item"),a(),o(54,"th"),l(55,"Quantity"),a(),o(56,"th"),l(57,"Rate"),a(),o(58,"th"),l(59,"Amount"),a(),o(60,"th"),l(61,"Status"),a()()(),o(62,"tbody"),b(63,Wre,5,0,"tr",20)(64,zre,3,0,"tr",20)(65,qre,20,14,"tr",21),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[Se,be,Ie,Oe,Ee,ht,yn],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function Hre(n,t){n&1&&(o(0,"div",26)(1,"div",27),y(2,"i",28),o(3,"p"),l(4,"Loading report data..."),a()()())}function Gre(n,t){n&1&&(o(0,"tr")(1,"td",29),y(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),a()()())}function $re(n,t){n&1&&(o(0,"tr")(1,"td",29),y(2,"i",28),a()())}function Yre(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",31),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),a(),o(18,"td"),l(19),a()()),n&2){let e=t.$implicit,i=p();c(2),_(e.referenceNumber),c(2),_(e.date),c(2),m("ngClass",i.getTypeClass(e.type)),c(),_(e.type),c(2),_(e.prNumber),c(2),_(e.warehouse),c(2),_(e.sourceLocation),c(2),_(e.targetLocation),c(2),_(e.performedBy),c(2),_(e.itemCount)}}var RC=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;dataReady=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>this.selectedType==="Stock Issue"?e.fulfillmentType==="Stock Issue":this.selectedType==="Material Transfer"?e.fulfillmentType==="Material Transfer":e.fulfillmentType==="Stock Issue"||e.fulfillmentType==="Material Transfer").map(e=>({referenceNumber:e.referenceNumber,date:e.fulfillmentDate,type:e.fulfillmentType,prNumber:e.prNumber,warehouse:e.warehouseName||"-",sourceLocation:e.sourceLocation||"-",targetLocation:e.targetLocation||"-",performedBy:e.performedBy,itemCount:e.items?.length||0})),this.completeLoading()},error:t=>{console.error("Error generating report",t),this.completeLoading()}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-issue-transfer-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-issue-transfer-report","Stock Issue / Transfer Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-issue-transfer-report")}getTypeClass(t){return t==="Stock Issue"?"badge-success":"badge-info"}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(Co),V(wi))};static \u0275cmp=_e({type:n,selectors:[["app-stock-issue-transfer-report"]],standalone:!1,decls:78,vars:12,consts:[["class","loading-container",4,"ngIf"],[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(b(0,Hre,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),l(6,"Stock Issue / Transfer Report"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"Reports"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Stock Issue/Transfer"),a()()(),o(18,"div",5)(19,"button",6),x("click",function(){return i.exportToExcel()}),y(20,"i",7),l(21," Excel "),a(),o(22,"button",8),x("click",function(){return i.exportToPDF()}),y(23,"i",9),l(24," PDF "),a(),o(25,"button",10),x("click",function(){return i.exportToCSV()}),y(26,"i",11),l(27," CSV "),a()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"label"),l(32,"Type"),a(),o(33,"select",15),S("ngModelChange",function(s){return P(i.selectedType,s)||(i.selectedType=s),s}),o(34,"option",16),l(35,"All Types"),a(),o(36,"option",17),l(37,"Stock Issue"),a(),o(38,"option",18),l(39,"Material Transfer"),a()()(),o(40,"div",14)(41,"label"),l(42,"From Date"),a(),o(43,"input",19),S("ngModelChange",function(s){return P(i.fromDate,s)||(i.fromDate=s),s}),a()(),o(44,"div",14)(45,"label"),l(46,"To Date"),a(),o(47,"input",19),S("ngModelChange",function(s){return P(i.toDate,s)||(i.toDate=s),s}),a()(),o(48,"button",20),x("click",function(){return i.generateReport()}),y(49,"i",21),l(50),a()()(),o(51,"div",12)(52,"div",22)(53,"table",23)(54,"thead")(55,"tr")(56,"th"),l(57,"Reference #"),a(),o(58,"th"),l(59,"Date"),a(),o(60,"th"),l(61,"Type"),a(),o(62,"th"),l(63,"PR Number"),a(),o(64,"th"),l(65,"Warehouse"),a(),o(66,"th"),l(67,"Source"),a(),o(68,"th"),l(69,"Target"),a(),o(70,"th"),l(71,"Performed By"),a(),o(72,"th"),l(73,"Items"),a()()(),o(74,"tbody"),b(75,Gre,5,0,"tr",24)(76,$re,3,0,"tr",24)(77,Yre,20,10,"tr",25),a()()()()(),an()),e&2&&(m("ngIf",i.loading),c(19),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),M("ngModel",i.selectedType),c(10),M("ngModel",i.fromDate),c(4),M("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),D(" ",i.loading?"Generating...":"Generate"," "),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};var t0=class n{constructor(t){this.http=t}apiUrl="/api/audit";getAll(t){let e=new ki;return t&&(t.module&&(e=e.set("module",t.module)),t.entityType&&(e=e.set("entityType",t.entityType)),t.action&&(e=e.set("action",t.action)),t.performedBy&&(e=e.set("performedBy",t.performedBy)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate)),t.searchTerm&&(e=e.set("search",t.searchTerm))),this.http.get(this.apiUrl,{params:e}).pipe(ur(()=>Zt([])))}getByModule(t,e){let i=new ki().set("module",t);return e&&(e.entityType&&(i=i.set("entityType",e.entityType)),e.action&&(i=i.set("action",e.action)),e.performedBy&&(i=i.set("performedBy",e.performedBy)),e.startDate&&(i=i.set("startDate",e.startDate)),e.endDate&&(i=i.set("endDate",e.endDate)),e.searchTerm&&(i=i.set("search",e.searchTerm))),this.http.get(this.apiUrl,{params:i}).pipe(ur(()=>Zt([])))}getSystemAudits(t){return this.getByModule("SYSTEM",t)}getInventoryAudits(t){let e=new ki().set("modules","INVENTORY,STOCK_MOVEMENT");return this.http.get(this.apiUrl,{params:e}).pipe(ur(()=>Zt([])))}getPurchaseAudits(t){return this.getByModule("PURCHASE",t)}getByEntityId(t,e){return this.http.get(`${this.apiUrl}/entity/${t}/${e}`).pipe(ur(()=>Zt([])))}exportToExcel(t){let e=new ki;return t&&(t.module&&(e=e.set("module",t.module)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(`${this.apiUrl}/export`,{params:e,responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Jre(n,t){if(n&1&&(o(0,"option",22),l(1),a()),n&2){let e=t.$implicit,i=p();m("value",e),c(),_(i.formatAction(e))}}function Kre(n,t){n&1&&y(0,"div",23)}function Qre(n,t){if(n&1&&(o(0,"tr")(1,"td",24),l(2),a(),o(3,"td")(4,"span",25),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td",26),y(11,"i",27),l(12),a(),o(13,"td",28),l(14),a(),o(15,"td"),l(16),a()()),n&2){let e=t.$implicit,i=p();c(2),_(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(2),_(e.entityType),c(2),_(e.entityName||"-"),c(3),D(" ",e.performedBy," "),c(2),_(e.details||"-"),c(2),_(e.ipAddress||"-")}}function Xre(n,t){n&1&&(o(0,"tr")(1,"td",29),y(2,"i",30),o(3,"p"),l(4,"No audit records found"),a()()())}var FC=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";startDate="";endDate="";actions=["LOGIN","LOGOUT","PASSWORD_CHANGED","SETTINGS_UPDATED","CREATED","UPDATED","DELETED"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getSystemAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=this.isWithinDateRange(t.timestamp);return e&&i&&r})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"LOGIN":return"badge-success";case"UPDATED":case"SETTINGS_UPDATED":return"badge-info";case"DELETED":case"LOGOUT":return"badge-warning";case"PASSWORD_CHANGED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}exportToExcel(){this.auditService.exportToExcel({module:"SYSTEM"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`system-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(V(t0))};static \u0275cmp=_e({type:n,selectors:[["app-system-audits"]],standalone:!1,decls:58,vars:10,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by user, entity, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"results-summary"],[3,"value"],[1,"loading-overlay"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],["colspan","7",1,"empty-state"],[1,"fas","fa-history"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"System Audits"),a(),o(4,"p",2),l(5,"Track system-level activities including logins, settings changes, and user management"),a()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),a(),o(11,"input",6),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("input",function(){return i.applyFilters()}),a()(),o(12,"div",5)(13,"label"),l(14,"Action Type"),a(),o(15,"select",7),S("ngModelChange",function(s){return P(i.selectedAction,s)||(i.selectedAction=s),s}),x("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Actions"),a(),b(18,Jre,2,2,"option",9),a()(),o(19,"div",5)(20,"label"),l(21,"Start Date"),a(),o(22,"input",10),S("ngModelChange",function(s){return P(i.startDate,s)||(i.startDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(23,"div",5)(24,"label"),l(25,"End Date"),a(),o(26,"input",10),S("ngModelChange",function(s){return P(i.endDate,s)||(i.endDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(27,"div",11)(28,"button",12),x("click",function(){return i.clearFilters()}),y(29,"i",13),l(30," Clear "),a(),o(31,"button",14),x("click",function(){return i.exportToExcel()}),y(32,"i",15),l(33," Export "),a()()()(),o(34,"div",16),b(35,Kre,1,0,"div",17),o(36,"table",18)(37,"thead")(38,"tr")(39,"th"),l(40,"Timestamp"),a(),o(41,"th"),l(42,"Action"),a(),o(43,"th"),l(44,"Entity Type"),a(),o(45,"th"),l(46,"Entity Name"),a(),o(47,"th"),l(48,"Performed By"),a(),o(49,"th"),l(50,"Details"),a(),o(51,"th"),l(52,"IP Address"),a()()(),o(53,"tbody"),b(54,Qre,17,8,"tr",19)(55,Xre,5,0,"tr",20),a()()(),o(56,"div",21),l(57),a()()),e&2&&(c(11),M("ngModel",i.searchTerm),c(4),M("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),M("ngModel",i.startDate),c(4),M("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(19),m("ngForOf",i.filteredAudits),c(),m("ngIf",i.filteredAudits.length===0),c(2),Ge(" Showing ",i.filteredAudits.length," of ",i.audits.length," records "))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:180px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.details-cell[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function Zre(n,t){if(n&1&&(o(0,"option",22),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function eoe(n,t){if(n&1&&(o(0,"option",22),l(1),a()),n&2){let e=t.$implicit,i=p();m("value",e),c(),_(i.formatAction(e))}}function toe(n,t){n&1&&y(0,"div",23)}function noe(n,t){if(n&1&&(o(0,"span",33)(1,"span",34),l(2),a(),y(3,"i",35),o(4,"span",36),l(5),a()()),n&2){let e=p().$implicit;c(2),_(e.previousValue),c(3),_(e.newValue)}}function ioe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function roe(n,t){if(n&1&&(o(0,"tr")(1,"td",24),l(2),a(),o(3,"td")(4,"span",25),l(5),a()(),o(6,"td")(7,"span",26),y(8,"i",27),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td",28),b(13,noe,6,2,"span",29)(14,ioe,2,0,"span",20),a(),o(15,"td",30),y(16,"i",31),l(17),a(),o(18,"td",32),l(19),a()()),n&2){let e=t.$implicit,i=p();c(2),_(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(4),D(" ",e.entityType," "),c(2),_(e.entityName||"-"),c(2),m("ngIf",e.previousValue&&e.newValue),c(),m("ngIf",!e.previousValue||!e.newValue),c(3),D(" ",e.performedBy," "),c(2),_(e.details||"-")}}function ooe(n,t){n&1&&(o(0,"tr")(1,"td",37),y(2,"i",38),o(3,"p"),l(4,"No inventory audit records found"),a()()())}var NC=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STOCK_ISSUED","STOCK_TRANSFERRED"];entityTypes=["Item","Group","Warehouse","Bin","Supplier","Unit","GRN","Stock Issue","Stock Transfer","Stock Adjustment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getInventoryAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,s=this.isWithinDateRange(t.timestamp);return e&&i&&r&&s})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"ITEM_ADDED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":return"badge-info";case"DELETED":case"ITEM_REMOVED":return"badge-danger";case"STOCK_ISSUED":return"badge-warning";case"STOCK_TRANSFERRED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getChangeIndicator(t){return t.previousValue&&t.newValue?`${t.previousValue} \u2192 ${t.newValue}`:"-"}exportToExcel(){this.auditService.exportToExcel({module:"INVENTORY"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`inventory-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(V(t0))};static \u0275cmp=_e({type:n,selectors:[["app-inventory-audits"]],standalone:!1,decls:65,vars:12,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by item, user, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"results-summary"],[3,"value"],[1,"loading-overlay"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-box"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"fas","fa-arrow-right"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-boxes"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Inventory Audits"),a(),o(4,"p",2),l(5,"Track all inventory-related changes including items, stock movements, and warehouse operations"),a()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),a(),o(11,"input",6),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("input",function(){return i.applyFilters()}),a()(),o(12,"div",5)(13,"label"),l(14,"Entity Type"),a(),o(15,"select",7),S("ngModelChange",function(s){return P(i.selectedEntityType,s)||(i.selectedEntityType=s),s}),x("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Types"),a(),b(18,Zre,2,2,"option",9),a()(),o(19,"div",5)(20,"label"),l(21,"Action"),a(),o(22,"select",7),S("ngModelChange",function(s){return P(i.selectedAction,s)||(i.selectedAction=s),s}),x("change",function(){return i.applyFilters()}),o(23,"option",8),l(24,"All Actions"),a(),b(25,eoe,2,2,"option",9),a()(),o(26,"div",5)(27,"label"),l(28,"Start Date"),a(),o(29,"input",10),S("ngModelChange",function(s){return P(i.startDate,s)||(i.startDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(30,"div",5)(31,"label"),l(32,"End Date"),a(),o(33,"input",10),S("ngModelChange",function(s){return P(i.endDate,s)||(i.endDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(34,"div",11)(35,"button",12),x("click",function(){return i.clearFilters()}),y(36,"i",13),l(37," Clear "),a(),o(38,"button",14),x("click",function(){return i.exportToExcel()}),y(39,"i",15),l(40," Export "),a()()()(),o(41,"div",16),b(42,toe,1,0,"div",17),o(43,"table",18)(44,"thead")(45,"tr")(46,"th"),l(47,"Timestamp"),a(),o(48,"th"),l(49,"Action"),a(),o(50,"th"),l(51,"Entity Type"),a(),o(52,"th"),l(53,"Entity Name"),a(),o(54,"th"),l(55,"Changes"),a(),o(56,"th"),l(57,"Performed By"),a(),o(58,"th"),l(59,"Details"),a()()(),o(60,"tbody"),b(61,roe,20,9,"tr",19)(62,ooe,5,0,"tr",20),a()()(),o(63,"div",21),l(64),a()()),e&2&&(c(11),M("ngModel",i.searchTerm),c(4),M("ngModel",i.selectedEntityType),c(3),m("ngForOf",i.entityTypes),c(4),M("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),M("ngModel",i.startDate),c(4),M("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(19),m("ngForOf",i.filteredAudits),c(),m("ngIf",i.filteredAudits.length===0),c(2),Ge(" Showing ",i.filteredAudits.length," of ",i.audits.length," records "))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function aoe(n,t){if(n&1&&(o(0,"option",33),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function soe(n,t){if(n&1&&(o(0,"option",33),l(1),a()),n&2){let e=t.$implicit,i=p();m("value",e),c(),_(i.formatAction(e))}}function loe(n,t){n&1&&y(0,"div",34)}function coe(n,t){if(n&1&&(o(0,"span",46)(1,"span",47),l(2),a(),y(3,"i",12),o(4,"span",48),l(5),a()()),n&2){let e=p().$implicit;c(2),_(e.previousValue),c(3),_(e.newValue)}}function doe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function poe(n,t){if(n&1&&(o(0,"tr")(1,"td",35),l(2),a(),o(3,"td")(4,"span",36),y(5,"i",37),l(6),a()(),o(7,"td")(8,"span",38),y(9,"i",39),l(10),a()(),o(11,"td",40),l(12),a(),o(13,"td",41),b(14,coe,6,2,"span",42)(15,doe,2,0,"span",31),a(),o(16,"td",43),y(17,"i",44),l(18),a(),o(19,"td",45),l(20),a()()),n&2){let e=t.$implicit,i=p();c(2),_(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),m("ngClass",i.getWorkflowIcon(e.action)),c(),D(" ",i.formatAction(e.action)," "),c(4),D(" ",e.entityType," "),c(2),_(e.entityName||"-"),c(2),m("ngIf",e.previousValue&&e.newValue),c(),m("ngIf",!e.previousValue||!e.newValue),c(3),D(" ",e.performedBy," "),c(2),_(e.details||"-")}}function moe(n,t){n&1&&(o(0,"tr")(1,"td",49),y(2,"i",50),o(3,"p"),l(4,"No purchase audit records found"),a()()())}var LC=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","SUBMITTED","APPROVED","REJECTED","CONVERTED_TO_PO","STOCK_ISSUED","STOCK_TRANSFERRED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STATUS_CHANGED"];entityTypes=["Purchase Requisition","Purchase Order","Direct Purchase","PR Fulfillment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getPurchaseAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,s=this.isWithinDateRange(t.timestamp);return e&&i&&r&&s})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"APPROVED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":case"STATUS_CHANGED":return"badge-info";case"DELETED":case"REJECTED":return"badge-danger";case"SUBMITTED":return"badge-warning";case"CONVERTED_TO_PO":return"badge-primary";case"STOCK_ISSUED":case"STOCK_TRANSFERRED":return"badge-teal";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getWorkflowIcon(t){switch(t){case"CREATED":return"fa-plus-circle";case"SUBMITTED":return"fa-paper-plane";case"APPROVED":return"fa-check-circle";case"REJECTED":return"fa-times-circle";case"CONVERTED_TO_PO":return"fa-exchange-alt";case"STOCK_ISSUED":return"fa-arrow-right";case"STOCK_TRANSFERRED":return"fa-truck";case"QUANTITY_MODIFIED":return"fa-edit";default:return"fa-history"}}exportToExcel(){this.auditService.exportToExcel({module:"PURCHASE"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`purchase-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(V(t0))};static \u0275cmp=_e({type:n,selectors:[["app-purchase-audits"]],standalone:!1,decls:90,vars:12,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"audit-legend"],[1,"legend-title"],[1,"legend-items"],[1,"legend-item"],[1,"fas","fa-plus-circle"],[1,"fas","fa-paper-plane"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-arrow-right"],[1,"fas","fa-truck"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by PR/PO number, user...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"results-summary"],[3,"value"],[1,"loading-overlay"],[1,"timestamp-cell"],[1,"action-badge",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-file-alt"],[1,"doc-number"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-clipboard-list"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Purchase Audits"),a(),o(4,"p",2),l(5,"Complete audit trail for purchase requisitions, orders, and fulfillment workflows"),a()(),o(6,"div",3)(7,"div",4),l(8,"Workflow Tracking:"),a(),o(9,"div",5)(10,"span",6),y(11,"i",7),l(12," Created"),a(),o(13,"span",6),y(14,"i",8),l(15," Submitted"),a(),o(16,"span",6),y(17,"i",9),l(18," Approved"),a(),o(19,"span",6),y(20,"i",10),l(21," Rejected"),a(),o(22,"span",6),y(23,"i",11),l(24," Converted to PO"),a(),o(25,"span",6),y(26,"i",12),l(27," Stock Issued"),a(),o(28,"span",6),y(29,"i",13),l(30," Transferred"),a()()(),o(31,"div",14)(32,"div",15)(33,"div",16)(34,"label"),l(35,"Search"),a(),o(36,"input",17),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("input",function(){return i.applyFilters()}),a()(),o(37,"div",16)(38,"label"),l(39,"Document Type"),a(),o(40,"select",18),S("ngModelChange",function(s){return P(i.selectedEntityType,s)||(i.selectedEntityType=s),s}),x("change",function(){return i.applyFilters()}),o(41,"option",19),l(42,"All Types"),a(),b(43,aoe,2,2,"option",20),a()(),o(44,"div",16)(45,"label"),l(46,"Action"),a(),o(47,"select",18),S("ngModelChange",function(s){return P(i.selectedAction,s)||(i.selectedAction=s),s}),x("change",function(){return i.applyFilters()}),o(48,"option",19),l(49,"All Actions"),a(),b(50,soe,2,2,"option",20),a()(),o(51,"div",16)(52,"label"),l(53,"Start Date"),a(),o(54,"input",21),S("ngModelChange",function(s){return P(i.startDate,s)||(i.startDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(55,"div",16)(56,"label"),l(57,"End Date"),a(),o(58,"input",21),S("ngModelChange",function(s){return P(i.endDate,s)||(i.endDate=s),s}),x("change",function(){return i.applyFilters()}),a()(),o(59,"div",22)(60,"button",23),x("click",function(){return i.clearFilters()}),y(61,"i",24),l(62," Clear "),a(),o(63,"button",25),x("click",function(){return i.exportToExcel()}),y(64,"i",26),l(65," Export "),a()()()(),o(66,"div",27),b(67,loe,1,0,"div",28),o(68,"table",29)(69,"thead")(70,"tr")(71,"th"),l(72,"Timestamp"),a(),o(73,"th"),l(74,"Action"),a(),o(75,"th"),l(76,"Document Type"),a(),o(77,"th"),l(78,"Document No."),a(),o(79,"th"),l(80,"Changes"),a(),o(81,"th"),l(82,"Performed By"),a(),o(83,"th"),l(84,"Details"),a()()(),o(85,"tbody"),b(86,poe,21,10,"tr",30)(87,moe,5,0,"tr",31),a()()(),o(88,"div",32),l(89),a()()),e&2&&(c(36),M("ngModel",i.searchTerm),c(4),M("ngModel",i.selectedEntityType),c(3),m("ngForOf",i.entityTypes),c(4),M("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),M("ngModel",i.startDate),c(4),M("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(19),m("ngForOf",i.filteredAudits),c(),m("ngIf",i.filteredAudits.length===0),c(2),Ge(" Showing ",i.filteredAudits.length," of ",i.audits.length," records "))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.audit-legend[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f2f2,#f8f9fa);border:1px solid #b8d4d4;border-radius:8px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-title[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:.9rem}.audit-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:#555}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.doc-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.action-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:600;display:inline-flex;align-items:center;gap:6px}.action-badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.action-badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.action-badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.action-badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.action-badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.action-badge.badge-teal[_ngcontent-%COMP%]{background:teal;color:#fff}.action-badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function uoe(n,t){if(n&1&&(o(0,"div",45)(1,"label"),l(2,"Purpose:"),a(),o(3,"p",46),l(4),a()()),n&2){let e=p(2);c(4),_(e.pr.purpose)}}function goe(n,t){if(n&1&&(o(0,"tr")(1,"td",34),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td",34),l(10),a(),o(11,"td",34),l(12),a(),o(13,"td",34),l(14),a(),o(15,"td",34)(16,"span",47),l(17),a()()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),_(i+1),c(2),_(e.itemName),c(2),_(e.itemDescription),c(2),_(e.quantity),c(2),_(e.fulfilledQuantity||0),c(2),_(r.getPendingQty(e)),c(2),_(e.uom),c(2),bi((e.status||"Pending").toLowerCase().replace(" ","-")),c(),D(" ",e.status||"Pending"," ")}}function foe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a()()),n&2){let e=t.$implicit;c(2),_(e.date),c(2),_(e.action),c(2),_(e.itemName),c(2),_(e.quantity),c(2),_(e.performedBy),c(2),_(e.reference)}}function hoe(n,t){if(n&1&&(o(0,"div",48)(1,"h3",23),l(2,"Fulfillment History"),a(),o(3,"table",49)(4,"thead")(5,"tr")(6,"th"),l(7,"Date"),a(),o(8,"th"),l(9,"Action"),a(),o(10,"th"),l(11,"Item"),a(),o(12,"th"),l(13,"Quantity"),a(),o(14,"th"),l(15,"Performed By"),a(),o(16,"th"),l(17,"Reference"),a()()(),o(18,"tbody"),b(19,foe,13,6,"tr",31),a()()()),n&2){let e=p(2);c(19),m("ngForOf",e.fulfillmentHistory)}}function _oe(n,t){if(n&1&&(o(0,"div",50)(1,"h3",23),l(2,"Remarks"),a(),o(3,"p",51),l(4),a()()),n&2){let e=p(2);c(4),_(e.pr.remarks)}}function voe(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h1",11),l(5),a(),o(6,"p",12),l(7),a()(),o(8,"div",13)(9,"h2"),l(10,"PURCHASE REQUISITION"),a(),o(11,"span",14),l(12,"INTERNAL DOCUMENT"),a()()(),o(13,"div",15)(14,"div",16)(15,"div",17)(16,"label"),l(17,"PR Number:"),a(),o(18,"span",18),l(19),a()(),o(20,"div",17)(21,"label"),l(22,"PR Date:"),a(),o(23,"span",18),l(24),a()(),o(25,"div",17)(26,"label"),l(27,"Department:"),a(),o(28,"span",18),l(29),a()(),o(30,"div",17)(31,"label"),l(32,"Required Date:"),a(),o(33,"span",18),l(34),a()(),o(35,"div",17)(36,"label"),l(37,"Priority:"),a(),o(38,"span",19),l(39),a()(),o(40,"div",17)(41,"label"),l(42,"Status:"),a(),o(43,"span",20),l(44),a()()(),b(45,uoe,5,1,"div",21),a(),o(46,"div",22)(47,"h3",23),l(48,"Material List"),a(),o(49,"table",24)(50,"thead")(51,"tr")(52,"th",25),l(53,"#"),a(),o(54,"th",26),l(55,"Item Name"),a(),o(56,"th",27),l(57,"Description"),a(),o(58,"th",28),l(59,"Requested Qty"),a(),o(60,"th",28),l(61,"Fulfilled Qty"),a(),o(62,"th",28),l(63,"Pending Qty"),a(),o(64,"th",29),l(65,"UOM"),a(),o(66,"th",30),l(67,"Status"),a()()(),o(68,"tbody"),b(69,goe,18,10,"tr",31),a(),o(70,"tfoot")(71,"tr",32)(72,"td",33)(73,"strong"),l(74,"Totals:"),a()(),o(75,"td",34)(76,"strong"),l(77),a()(),o(78,"td",34)(79,"strong"),l(80),a()(),o(81,"td",34)(82,"strong"),l(83),a()(),y(84,"td",35),a()()()(),b(85,hoe,20,1,"div",36)(86,_oe,5,1,"div",37),o(87,"div",38)(88,"div",39),y(89,"div",40),o(90,"p",41),l(91,"Requested By"),a(),o(92,"p",42),l(93),a(),o(94,"p",43),l(95,"Date: _______________"),a()(),o(96,"div",39),y(97,"div",40),o(98,"p",41),l(99,"Approved By"),a(),o(100,"p",42),l(101),a(),o(102,"p",43),l(103,"Date: _______________"),a()()(),o(104,"div",44)(105,"p"),l(106),a(),o(107,"p"),l(108,"Page 1 of 1"),a()()()()),n&2){let e=p();c(5),_(e.companyName),c(2),_(e.companyAddress),c(12),_(e.pr.prNumber),c(5),_(e.formatDate(e.pr.prDate)),c(5),_(e.pr.department),c(5),_(e.formatDate(e.pr.requiredDate)),c(4),bi(e.pr.priority.toLowerCase()),c(),_(e.pr.priority),c(5),_(e.pr.status),c(),m("ngIf",e.pr.purpose),c(24),m("ngForOf",e.pr.items),c(8),_(e.getTotalRequested()),c(3),_(e.getTotalFulfilled()),c(3),_(e.getTotalPending()),c(2),m("ngIf",e.fulfillmentHistory.length>0),c(),m("ngIf",e.pr.remarks),c(7),_(e.pr.requestedBy||"_________________"),c(8),_(e.pr.approvedBy||"_________________"),c(5),D("This is an internal document. Printed on: ",e.formatDate(e.today))}}function xoe(n,t){n&1&&(o(0,"div",52),y(1,"div",53),o(2,"p"),l(3,"Loading document..."),a()())}var VC=class n{constructor(t,e,i){this.route=t;this.router=e;this.prService=i}pr=null;prId=0;loading=!1;companyName="Hao System";companyAddress="123 Business Street, City, Country";fulfillmentHistory=[];today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.prId=+t.id,this.loadPR()})}loadPR(){this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.loadFulfillmentHistory(),this.loading=!1,setTimeout(()=>this.triggerPrint(),500)},error:t=>{console.error("Error loading PR:",t),this.loading=!1}})}loadFulfillmentHistory(){this.pr&&this.pr.items&&(this.fulfillmentHistory=this.pr.items.filter(t=>(t.fulfilledQuantity||0)>0).map(t=>({date:this.formatDate(new Date().toISOString()),action:t.status==="Fully Fulfilled"?"Stock Issue":"Partial Fulfillment",itemName:t.itemName,quantity:t.fulfilledQuantity||0,performedBy:"System",reference:this.pr?.prNumber||""})))}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""}getPendingQty(t){return Math.max(0,(t.quantity||0)-(t.fulfilledQuantity||0))}getTotalRequested(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.quantity||0),0)}getTotalFulfilled(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.fulfilledQuantity||0),0)}getTotalPending(){return this.getTotalRequested()-this.getTotalFulfilled()}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/requisition"])}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(oa))};static \u0275cmp=_e({type:n,selectors:[["app-pr-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-header"],[1,"company-info"],[1,"company-name"],[1,"company-address"],[1,"document-title"],[1,"internal-badge"],[1,"pr-info-section"],[1,"info-grid"],[1,"info-item"],[1,"value"],[1,"value","priority"],[1,"value","status"],["class","purpose-section",4,"ngIf"],[1,"materials-section"],[1,"section-title"],[1,"materials-table"],[1,"col-sno"],[1,"col-item"],[1,"col-desc"],[1,"col-qty"],[1,"col-uom"],[1,"col-status"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3",1,"right"],[1,"center"],["colspan","2"],["class","history-section",4,"ngIf"],["class","remarks-section",4,"ngIf"],[1,"signatures-section"],[1,"signature-box"],[1,"signature-line"],[1,"signature-label"],[1,"signature-name"],[1,"signature-date"],[1,"document-footer"],[1,"purpose-section"],[1,"purpose-text"],[1,"item-status"],[1,"history-section"],[1,"history-table"],[1,"remarks-section"],[1,"remarks-text"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),x("click",function(){return i.goBack()}),y(2,"i",2),l(3," Back "),a(),o(4,"button",3),x("click",function(){return i.triggerPrint()}),y(5,"i",4),l(6," Print "),a()(),b(7,voe,109,20,"div",5)(8,xoe,4,0,"div",6)),e&2&&(c(7),m("ngIf",i.pr),c(),m("ngIf",i.loading))},dependencies:[Se,be],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:teal;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#066}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #008080;padding-bottom:15px;margin-bottom:20px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:teal;margin:0 0 5px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{text-align:right}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin:0 0 8px}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .internal-badge[_ngcontent-%COMP%]{display:inline-block;background:teal;color:#fff;padding:4px 12px;border-radius:4px;font-size:11px;font-weight:600}.pr-info-section[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:15px;margin-bottom:20px}.pr-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.urgent[_ngcontent-%COMP%]{color:#ff9800}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.critical[_ngcontent-%COMP%]{color:#dc3545}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.normal[_ngcontent-%COMP%]{color:#28a745}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.status[_ngcontent-%COMP%]{color:teal}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e9ecef}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   .purpose-text[_ngcontent-%COMP%]{font-size:13px;color:#333;margin:4px 0 0}.section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:teal;margin:0 0 10px;padding-bottom:5px;border-bottom:2px solid #008080}.materials-section[_ngcontent-%COMP%]{margin-bottom:20px}.materials-table[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .materials-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 6px;text-align:left}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;text-transform:uppercase;font-size:10px}.materials-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n), .history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.materials-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.materials-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.materials-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:30px}.materials-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%]{width:120px}.materials-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:80px}.materials-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%]{width:60px}.materials-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%]{width:90px}.materials-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:10px;font-size:10px;font-weight:600}.materials-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.materials-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.materials-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.materials-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e9ecef;font-weight:600}.history-section[_ngcontent-%COMP%], .remarks-section[_ngcontent-%COMP%]{margin-bottom:20px}.remarks-section[_ngcontent-%COMP%]   .remarks-text[_ngcontent-%COMP%]{font-size:12px;color:#333;margin:0;padding:10px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px}.signatures-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:40px;padding-top:20px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:200px;text-align:center}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:2px solid #333;margin-bottom:8px;height:40px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#333;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-name[_ngcontent-%COMP%]{font-size:11px;color:#666;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-date[_ngcontent-%COMP%]{font-size:10px;color:#999;margin:0}.document-footer[_ngcontent-%COMP%]{margin-top:30px;padding-top:15px;border-top:1px solid #ddd;display:flex;justify-content:space-between;font-size:10px;color:#999}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function yoe(n,t){if(n&1&&(o(0,"div",19)(1,"span",20),l(2,"PR Ref:"),a(),o(3,"span",21),l(4),a()()),n&2){let e=p(2);c(4),_(e.po.prNumber)}}function Coe(n,t){if(n&1&&(o(0,"tr")(1,"td",54),l(2),a(),o(3,"td",54),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",54),l(8),a(),o(9,"td",54),l(10),a(),o(11,"td",54),l(12),a(),o(13,"td",55),l(14),a(),o(15,"td",54),l(16),a(),o(17,"td",55),l(18),a()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),_(i+1),c(2),_(e.itemCode||100+i+1),c(2),_(e.itemName),c(2),_(e.hsnCode||r.getDefaultHsn(e)),c(2),_(e.quantity),c(2),_(e.uom||e.unit||"nos"),c(2),_(r.formatNumber(e.rate)),c(2),D("",e.taxRate||r.defaultTaxRate,"%"),c(2),_(r.formatNumber(r.getItemAmount(e)))}}function boe(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"h1"),l(4,"PURCHASE ORDER"),a()(),o(5,"div",10)(6,"div",11),y(7,"i",12),o(8,"div",13)(9,"span",14),l(10),a(),o(11,"span",15),l(12),a()()(),o(13,"p",16),l(14),a()(),o(15,"div",17)(16,"div",18)(17,"div",19)(18,"span",20),l(19,"Supplier Name:"),a(),o(20,"span",21),l(21),a()(),o(22,"div",19)(23,"span",20),l(24,"Address:"),a(),o(25,"span",21),l(26),a()(),o(27,"div",19)(28,"span",20),l(29,"GSTIN:"),a(),o(30,"span",21),l(31),a()(),o(32,"div",19)(33,"span",20),l(34,"Contact:"),a(),o(35,"span",21),l(36),a()(),o(37,"div",19)(38,"span",20),l(39,"Email:"),a(),o(40,"span",21),l(41),a()()(),o(42,"div",22)(43,"div",19)(44,"span",20),l(45,"Supplier Code:"),a(),o(46,"span",21),l(47),a()(),o(48,"div",19)(49,"span",20),l(50,"PO No:"),a(),o(51,"span",21),l(52),a()(),b(53,yoe,5,1,"div",23),o(54,"div",19)(55,"span",20),l(56,"PO Date:"),a(),o(57,"span",21),l(58),a()(),o(59,"div",19)(60,"span",20),l(61,"PO Expiry Days:"),a(),o(62,"span",21),l(63),a()()()(),o(64,"div",24)(65,"div",25)(66,"div",26),l(67,"Bill To:"),a(),o(68,"div",27)(69,"p",28),l(70),a(),o(71,"p"),l(72),a(),o(73,"p"),l(74),a(),o(75,"p"),l(76),a(),o(77,"p"),l(78),a()()(),o(79,"div",25)(80,"div",26),l(81,"Ship To:"),a(),o(82,"div",27)(83,"p",28),l(84),a(),o(85,"p"),l(86),a(),o(87,"p"),l(88),a(),o(89,"p"),l(90),a(),o(91,"p"),l(92),a()()()(),o(93,"div",29)(94,"div",30)(95,"span",20),l(96,"Payment Date:"),a(),o(97,"span",21),l(98),a()(),o(99,"div",30)(100,"span",20),l(101,"Payment Terms:"),a(),o(102,"span",21),l(103),a()()(),o(104,"div",31)(105,"table",32)(106,"thead")(107,"tr")(108,"th",33),l(109,"S.No"),a(),o(110,"th",34),l(111,"Product Code"),a(),o(112,"th",35),l(113,"Product Name"),a(),o(114,"th",36),l(115,"HSN code"),a(),o(116,"th",37),l(117,"Quantity"),a(),o(118,"th",38),l(119,"Units"),a(),o(120,"th",39),l(121,"Rate"),a(),o(122,"th",40),l(123,"Tax"),a(),o(124,"th",41),l(125,"Amount"),a()()(),o(126,"tbody"),b(127,Coe,19,9,"tr",42),a()()(),o(128,"div",43)(129,"div",44)(130,"div",45)(131,"span",20),l(132,"Total"),a(),o(133,"span",21),l(134),a()(),o(135,"div",45)(136,"span",20),l(137,"Discounts"),a(),o(138,"span",21),l(139),a()(),o(140,"div",46)(141,"span",20),l(142,"Grand total"),a(),o(143,"span",21),l(144),a()()()(),o(145,"div",47)(146,"div",48)(147,"h4"),l(148,"Terms and conditions:"),a(),o(149,"ol")(150,"li"),l(151,"We deserve the right to cancel the purchase order anytime before product shipment."),a(),o(152,"li"),l(153,"Invoice raised to us should contain the details of purchase order with date mentioned."),a(),o(154,"li"),l(155,"Adherence to agreed product specifications is a must. Any deviation during delivery will result in cancellation of PO."),a(),o(156,"li"),l(157),a(),o(158,"li"),l(159),a()()(),o(160,"div",49)(161,"div",50),l(162),a(),y(163,"div",51),o(164,"div",52),l(165,"Authorized signatory"),a()()(),o(166,"div",53)(167,"p"),l(168),a()()()()),n&2){let e=p();c(10),_(e.companyName),c(2),_(e.companyTagline),c(2),_(e.companyAddress),c(7),_(e.po.supplierName),c(5),_(e.po.supplierAddress||"N/A"),c(5),_(e.supplierGstin),c(5),_(e.po.supplierContact||"N/A"),c(5),_(e.supplierEmail),c(6),_(e.supplierCode),c(5),_(e.po.poNumber),c(),m("ngIf",e.po.prNumber),c(5),_(e.formatDate(e.po.poDate||e.po.createdDate||"")),c(5),D("",e.poExpiryDays," days"),c(7),_(e.companyName),c(2),_(e.billToAddress),c(2),D("GSTIN:",e.companyGstin),c(2),D("Contact: ",e.companyPhone),c(2),D("Email: ",e.companyEmail),c(6),_(e.companyName),c(2),_(e.shipToAddress),c(2),D("GSTIN:",e.companyGstin),c(2),D("Contact: ",e.companyPhone),c(2),D("Email: ",e.companyEmail),c(6),_(e.paymentDateText),c(5),_(e.po.paymentTerms||"100% against invoice"),c(24),m("ngForOf",e.po.items),c(7),_(e.formatNumber(e.getSubtotal())),c(5),_(e.formatNumber(e.discount)),c(5),_(e.formatNumber(e.getGrandTotal())),c(13),D("Packing and shipping charges are to be borne by ",e.po.supplierName,"."),c(2),D("Delivery should be strictly done within ",e.poExpiryDays," days from the date of purchase order."),c(3),D("For ",e.companyName),c(6),D("Mark any communications to ",e.companyEmail)}}function Moe(n,t){n&1&&(o(0,"div",56),y(1,"div",57),o(2,"p"),l(3,"Loading document..."),a()())}var BC=class n{constructor(t,e,i){this.route=t;this.router=e;this.poService=i}po=null;poId=0;loading=!1;companyName="Hao System";companyTagline="Enterprise Solutions";companyAddress="No 23/2, SBI Colony, Ragavendra Nagar, Chennai - 600124";companyPhone="+91-7869825463";companyEmail="purchase-team@haosystem.com";companyGstin="33APFSDF1ZV";billToAddress=`No 23/2, SBI Colony.
Ragavendra Nagar, Chennai - 600124`;shipToAddress=`No 23/2, SBI Colony.
Ragavendra Nagar, Chennai - 600124`;supplierCode="VNDR-104";supplierGstin="33AACCEPVS1ZH";supplierEmail="purchase-sm@gmail.com";poExpiryDays=7;paymentDateText="7 days from date of delivery";defaultTaxRate=5;discount=0;today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.poId=+t.id,this.loadPO()})}loadPO(){this.poService.getById(this.poId).subscribe({next:t=>{this.po=t,t.supplierId&&(this.supplierCode="VNDR-"+t.supplierId),this.loading=!1},error:t=>{console.error("Error loading PO:",t),this.loading=!1}})}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""}formatNumber(t){return new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t||0)}getDefaultHsn(t){return"34019011"}getItemAmount(t){let e=(t.quantity||0)*(t.rate||0),i=t.taxRate||this.defaultTaxRate,r=e*(i/100);return e+r}getSubtotal(){return!this.po||!this.po.items?0:this.po.items.reduce((t,e)=>t+this.getItemAmount(e),0)}getGrandTotal(){return this.getSubtotal()-this.discount}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/direct"])}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(e0))};static \u0275cmp=_e({type:n,selectors:[["app-po-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-title"],[1,"company-header"],[1,"company-logo"],[1,"fas","fa-shopping-cart"],[1,"company-brand"],[1,"brand-name"],[1,"brand-tagline"],[1,"company-address"],[1,"info-grid"],[1,"supplier-box"],[1,"info-row-item"],[1,"label"],[1,"value"],[1,"po-details-box"],["class","info-row-item",4,"ngIf"],[1,"address-section"],[1,"address-box"],[1,"address-header"],[1,"address-content"],[1,"company-name"],[1,"payment-info"],[1,"payment-item"],[1,"items-section"],[1,"items-table"],[1,"col-sno"],[1,"col-code"],[1,"col-name"],[1,"col-hsn"],[1,"col-qty"],[1,"col-unit"],[1,"col-rate"],[1,"col-tax"],[1,"col-amount"],[4,"ngFor","ngForOf"],[1,"totals-section"],[1,"totals-box"],[1,"total-row"],[1,"total-row","grand-total"],[1,"footer-section"],[1,"terms-box"],[1,"signature-box"],[1,"for-company"],[1,"signature-line"],[1,"signature-label"],[1,"document-footer"],[1,"center"],[1,"right"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),x("click",function(){return i.goBack()}),y(2,"i",2),l(3," Back "),a(),o(4,"button",3),x("click",function(){return i.triggerPrint()}),y(5,"i",4),l(6," Print "),a()(),b(7,boe,169,33,"div",5)(8,Moe,4,0,"div",6)),e&2&&(c(7),m("ngIf",i.po),c(),m("ngIf",i.loading))},dependencies:[Se,be],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:10mm 15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#134a5f}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:10mm 15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px}.document-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;font-weight:400;letter-spacing:8px;color:#333;margin:0;text-transform:uppercase}.company-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #1a5f7a}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin-bottom:8px}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;color:#f4a460}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1a5f7a}.company-header[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   .company-brand[_ngcontent-%COMP%]   .brand-tagline[_ngcontent-%COMP%]{font-size:11px;color:#f4a460;font-style:italic}.company-header[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:12px;color:#333;margin:0}.info-grid[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px;border:1px solid #ddd}.info-grid[_ngcontent-%COMP%]   .supplier-box[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]   .po-details-box[_ngcontent-%COMP%]{flex:1;padding:12px 15px}.info-grid[_ngcontent-%COMP%]   .supplier-box[_ngcontent-%COMP%]{border-right:1px solid #ddd}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]{display:flex;margin-bottom:6px;font-size:11px}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{min-width:100px;font-weight:600;color:#333}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.info-grid[_ngcontent-%COMP%]   .info-row-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.address-section[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]{flex:1}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;padding:6px 12px;font-size:11px;font-weight:600}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]{border:1px solid #ddd;border-top:none;padding:10px 12px;min-height:100px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:11px;color:#333}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p.company-name[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.address-section[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]   .address-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.payment-info[_ngcontent-%COMP%]{display:flex;margin-bottom:15px;border:1px solid #ddd;border-top:2px solid #1a5f7a}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]{flex:1;padding:8px 15px;font-size:11px}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]:first-child{border-right:1px solid #ddd}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;color:#333}.payment-info[_ngcontent-%COMP%]   .payment-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.items-section[_ngcontent-%COMP%]{margin-bottom:15px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 6px;text-align:left}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1a5f7a;color:#fff;font-weight:600;text-align:center;font-size:10px}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.items-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:35px}.items-table[_ngcontent-%COMP%]   .col-code[_ngcontent-%COMP%]{width:75px}.items-table[_ngcontent-%COMP%]   .col-hsn[_ngcontent-%COMP%]{width:70px}.items-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:55px}.items-table[_ngcontent-%COMP%]   .col-unit[_ngcontent-%COMP%]{width:45px}.items-table[_ngcontent-%COMP%]   .col-rate[_ngcontent-%COMP%]{width:65px}.items-table[_ngcontent-%COMP%]   .col-tax[_ngcontent-%COMP%]{width:45px}.items-table[_ngcontent-%COMP%]   .col-amount[_ngcontent-%COMP%]{width:80px}.totals-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:20px}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]{width:220px;border:1px solid #ddd}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 12px;font-size:11px;border-bottom:1px solid #ddd}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#333}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{background:#e8f4f8}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.footer-section[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:20px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]{flex:1;background:#e8f4f8;padding:12px 15px;border-radius:4px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#333;margin:0 0 8px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:18px}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:9px;color:#444;margin-bottom:4px;line-height:1.4}.footer-section[_ngcontent-%COMP%]   .terms-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:180px;text-align:center;display:flex;flex-direction:column;justify-content:flex-end}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .for-company[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#333;margin-bottom:40px}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:1px solid #333;margin-bottom:5px}.footer-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:10px;color:#666;font-style:italic}.document-footer[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid #ddd}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:#1a5f7a;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var UC=class n{constructor(t){this.http=t}baseUrl="/api/purchase/invoices";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`)}getByPoId(t){return this.http.get(`${this.baseUrl}/po/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}updateStatus(t,e){return this.http.post(`${this.baseUrl}/${t}/status`,{status:e})}generateInvoiceNumber(){return this.http.get(`${this.baseUrl}/generate-number`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Poe(n,t){n&1&&(o(0,"div",16),y(1,"div",17),o(2,"p"),l(3,"Loading invoices..."),a()())}function woe(n,t){if(n&1){let e=F();o(0,"button",35),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.updateInvoiceStatus(r,"Submitted"))}),y(1,"i",36),a()}}function Eoe(n,t){if(n&1){let e=F();o(0,"button",37),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.updateInvoiceStatus(r,"Paid"))}),y(1,"i",38),a()}}function Ooe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",23),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",24),l(12),a(),o(13,"td")(14,"span",25),l(15),a()(),o(16,"td",26)(17,"button",27),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),y(18,"i",28),a(),o(19,"button",29),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.printInvoice(r))}),y(20,"i",30),a(),b(21,woe,2,0,"button",31)(22,Eoe,2,0,"button",32),o(23,"button",33),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteInvoice(r.id))}),y(24,"i",34),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.invoiceNumber),c(2),_(e.poNumber||"-"),c(2),_(e.supplierName),c(2),_(i.formatDate(e.invoiceDate)),c(2),_(i.formatDate(e.dueDate)),c(2),_(i.formatCurrency(e.totalAmount)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),D(" ",e.status," "),c(6),m("ngIf",e.status==="Draft"),c(),m("ngIf",e.status==="Submitted")}}function Toe(n,t){n&1&&(o(0,"tr")(1,"td",39)(2,"div",40),y(3,"i",41),o(4,"p"),l(5,"No invoices found"),a()()()())}function koe(n,t){if(n&1&&(o(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead")(4,"tr")(5,"th"),l(6,"Invoice No"),a(),o(7,"th"),l(8,"PO Reference"),a(),o(9,"th"),l(10,"Supplier"),a(),o(11,"th"),l(12,"Invoice Date"),a(),o(13,"th"),l(14,"Due Date"),a(),o(15,"th"),l(16,"Total Amount"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,Ooe,25,10,"tr",21)(23,Toe,6,0,"tr",22),a()()()()),n&2){let e=p();c(22),m("ngForOf",e.filteredInvoices),c(),m("ngIf",e.filteredInvoices.length===0)}}function Ioe(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=p().$implicit;c(),D("PO: ",e.poNumber)}}function Doe(n,t){if(n&1){let e=F();o(0,"div",51),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",53),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),b(9,Ioe,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.invoiceNumber),c(2),_(e.status),c(3),_(e.supplierName),c(),m("ngIf",e.poNumber),c(3),_(i.formatCurrency(e.totalAmount)),c(2),_(i.formatDate(e.invoiceDate))}}function Aoe(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=p().$implicit;c(),D("PO: ",e.poNumber)}}function Roe(n,t){if(n&1){let e=F();o(0,"div",51),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",60),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),b(9,Aoe,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.invoiceNumber),c(2),_(e.status),c(3),_(e.supplierName),c(),m("ngIf",e.poNumber),c(3),_(i.formatCurrency(e.totalAmount)),c(2),_(i.formatDate(e.invoiceDate))}}function Foe(n,t){if(n&1&&(o(0,"p",59),l(1),a()),n&2){let e=p().$implicit;c(),D("PO: ",e.poNumber)}}function Noe(n,t){if(n&1){let e=F();o(0,"div",51),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),o(1,"div",52)(2,"span",23),l(3),a(),o(4,"span",61),l(5),a()(),o(6,"div",54)(7,"p",55),l(8),a(),b(9,Foe,2,1,"p",56),a(),o(10,"div",57)(11,"span",24),l(12),a(),o(13,"span",58),l(14),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.invoiceNumber),c(2),_(e.status),c(3),_(e.supplierName),c(),m("ngIf",e.poNumber),c(3),_(i.formatCurrency(e.totalAmount)),c(2),_(i.formatDate(e.invoiceDate))}}function Loe(n,t){if(n&1&&(o(0,"div",42)(1,"div",43)(2,"div",44)(3,"div",45)(4,"h3"),l(5,"Draft"),a(),o(6,"span",46),l(7),a()(),o(8,"div",47),b(9,Doe,15,6,"div",48),a()(),o(10,"div",44)(11,"div",49)(12,"h3"),l(13,"Pending"),a(),o(14,"span",46),l(15),a()(),o(16,"div",47),b(17,Roe,15,6,"div",48),a()(),o(18,"div",44)(19,"div",50)(20,"h3"),l(21,"Paid"),a(),o(22,"span",46),l(23),a()(),o(24,"div",47),b(25,Noe,15,6,"div",48),a()()()()),n&2){let e=p();c(7),_(e.draftInvoices.length),c(2),m("ngForOf",e.draftInvoices),c(6),_(e.pendingInvoices.length),c(2),m("ngForOf",e.pendingInvoices),c(6),_(e.paidInvoices.length),c(2),m("ngForOf",e.paidInvoices)}}function Voe(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge(" ",e.poNumber," - ",e.supplierName," ")}}function Boe(n,t){if(n&1){let e=F();o(0,"div",68)(1,"h3"),l(2,"Link to Purchase Order"),a(),o(3,"div",70)(4,"label"),l(5,"Select Completed PO (Optional)"),a(),o(6,"select",96),x("change",function(r){g(e);let s=p(2);return f(s.onPoSelect(r))}),o(7,"option",97),l(8,"-- Select PO --"),a(),b(9,Voe,2,3,"option",98),a()()()}if(n&2){let e=p(2);c(9),m("ngForOf",e.completedPOs)}}function Uoe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",100),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemCode,r)||(s.itemCode=r),f(r)}),a()(),o(3,"td")(4,"input",101),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.itemName,r)||(s.itemName=r),f(r)}),a()(),o(5,"td")(6,"input",100),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.hsnCode,r)||(s.hsnCode=r),f(r)}),a()(),o(7,"td")(8,"input",102),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.quantity,r)||(s.quantity=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(9,"td")(10,"input",103),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.uom,r)||(s.uom=r),f(r)}),a()(),o(11,"td")(12,"input",92),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.rate,r)||(s.rate=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(13,"td")(14,"input",102),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.taxRate,r)||(s.taxRate=r),f(r)}),x("ngModelChange",function(){let r=g(e).$implicit,s=p(2);return f(s.calculateItemAmount(r))}),a()(),o(15,"td",104),l(16),a(),o(17,"td")(18,"button",105),x("click",function(){let r=g(e).index,s=p(2);return f(s.removeItem(r))}),y(19,"i",34),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.itemCode),c(2),M("ngModel",e.itemName),c(2),M("ngModel",e.hsnCode),c(2),M("ngModel",e.quantity),c(2),M("ngModel",e.uom),c(2),M("ngModel",e.rate),c(2),M("ngModel",e.taxRate),c(2),D(" ",i.formatCurrency(e.amount)," "),c(2),m("disabled",i.selectedInvoice.items.length===1)}}function joe(n,t){if(n&1){let e=F();o(0,"div",62)(1,"div",63),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",64)(3,"h2"),l(4),a(),o(5,"button",65),y(6,"i",66),a()(),o(7,"div",67)(8,"div",68)(9,"h3"),l(10,"Invoice Details"),a(),o(11,"div",69)(12,"div",70)(13,"label"),l(14,"Invoice Number"),a(),o(15,"input",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.invoiceNumber,r)||(s.selectedInvoice.invoiceNumber=r),f(r)}),a()(),o(16,"div",70)(17,"label"),l(18,"Invoice Date"),a(),o(19,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.invoiceDate,r)||(s.selectedInvoice.invoiceDate=r),f(r)}),a()(),o(20,"div",70)(21,"label"),l(22,"Due Date"),a(),o(23,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.dueDate,r)||(s.selectedInvoice.dueDate=r),f(r)}),a()(),o(24,"div",70)(25,"label"),l(26,"Status"),a(),o(27,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.status,r)||(s.selectedInvoice.status=r),f(r)}),o(28,"option",74),l(29,"Draft"),a(),o(30,"option",75),l(31,"Submitted"),a(),o(32,"option",76),l(33,"Pending"),a(),o(34,"option",77),l(35,"Paid"),a(),o(36,"option",78),l(37,"Cancelled"),a()()()()(),b(38,Boe,10,1,"div",79),o(39,"div",68)(40,"h3"),l(41,"Supplier Information"),a(),o(42,"div",69)(43,"div",70)(44,"label"),l(45,"Supplier Name"),a(),o(46,"input",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.supplierName,r)||(s.selectedInvoice.supplierName=r),f(r)}),a()(),o(47,"div",70)(48,"label"),l(49,"Supplier GSTIN"),a(),o(50,"input",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.supplierGstin,r)||(s.selectedInvoice.supplierGstin=r),f(r)}),a()(),o(51,"div",81)(52,"label"),l(53,"Supplier Address"),a(),o(54,"textarea",82),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.supplierAddress,r)||(s.selectedInvoice.supplierAddress=r),f(r)}),a()(),o(55,"div",70)(56,"label"),l(57,"Contact"),a(),o(58,"input",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.supplierContact,r)||(s.selectedInvoice.supplierContact=r),f(r)}),a()(),o(59,"div",70)(60,"label"),l(61,"Email"),a(),o(62,"input",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.supplierEmail,r)||(s.selectedInvoice.supplierEmail=r),f(r)}),a()()()(),o(63,"div",68)(64,"h3"),l(65,"Invoice Items"),a(),o(66,"div",84)(67,"table",85)(68,"thead")(69,"tr")(70,"th"),l(71,"Item Code"),a(),o(72,"th"),l(73,"Item Name"),a(),o(74,"th"),l(75,"HSN"),a(),o(76,"th"),l(77,"Qty"),a(),o(78,"th"),l(79,"UOM"),a(),o(80,"th"),l(81,"Rate"),a(),o(82,"th"),l(83,"Tax %"),a(),o(84,"th"),l(85,"Amount"),a(),y(86,"th"),a()(),o(87,"tbody"),b(88,Uoe,20,9,"tr",21),a()(),o(89,"button",86),x("click",function(){g(e);let r=p();return f(r.addItem())}),y(90,"i",11),l(91," Add Item "),a()()(),o(92,"div",87)(93,"div",88)(94,"div",89)(95,"span",90),l(96,"Subtotal:"),a(),o(97,"span",91),l(98),a()(),o(99,"div",89)(100,"span",90),l(101,"Tax:"),a(),o(102,"span",91),l(103),a()(),o(104,"div",89)(105,"span",90),l(106,"Discount:"),a(),o(107,"input",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.discount,r)||(s.selectedInvoice.discount=r),f(r)}),a()(),o(108,"div",93)(109,"span",90),l(110,"Grand Total:"),a(),o(111,"span",91),l(112),a()()()(),o(113,"div",68)(114,"div",81)(115,"label"),l(116,"Remarks"),a(),o(117,"textarea",82),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInvoice.remarks,r)||(s.selectedInvoice.remarks=r),f(r)}),a()()()(),o(118,"div",94)(119,"button",95),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(120,"Cancel"),a(),o(121,"button",10),x("click",function(){g(e);let r=p();return f(r.saveInvoice())}),l(122),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Invoice":"Create New Invoice"),c(11),M("ngModel",e.selectedInvoice.invoiceNumber),c(4),M("ngModel",e.selectedInvoice.invoiceDate),c(4),M("ngModel",e.selectedInvoice.dueDate),c(4),M("ngModel",e.selectedInvoice.status),c(11),m("ngIf",!e.editMode),c(8),M("ngModel",e.selectedInvoice.supplierName),c(4),M("ngModel",e.selectedInvoice.supplierGstin),c(4),M("ngModel",e.selectedInvoice.supplierAddress),c(4),M("ngModel",e.selectedInvoice.supplierContact),c(4),M("ngModel",e.selectedInvoice.supplierEmail),c(26),m("ngForOf",e.selectedInvoice.items),c(10),_(e.formatCurrency(e.getSubtotal())),c(5),_(e.formatCurrency(e.getTaxTotal())),c(4),M("ngModel",e.selectedInvoice.discount),c(5),_(e.formatCurrency(e.getTotalAmount())),c(5),M("ngModel",e.selectedInvoice.remarks),c(5),D(" ",e.editMode?"Update Invoice":"Create Invoice"," ")}}var jC=class n{constructor(t,e,i,r){this.invoiceService=t;this.poService=e;this.router=i;this.settingsService=r}invoices=[];completedPOs=[];searchQuery="";showModal=!1;editMode=!1;selectedInvoice=this.getEmptyInvoice();loading=!1;viewMode="table";companyName="Hao System";companyGstin="33APFSDF1ZV";companyAddress="No 23/2, SBI Colony, Ragavendra Nagar, Chennai - 600124";ngOnInit(){this.loadInvoices(),this.loadCompletedPOs()}loadInvoices(){this.loading=!0,this.invoiceService.getAll().subscribe({next:t=>{this.invoices=t,this.loading=!1},error:t=>{console.error("Error loading invoices",t),this.loading=!1}})}loadCompletedPOs(){this.poService.getAll().subscribe({next:t=>{this.completedPOs=t.filter(e=>e.status==="Completed"||e.status==="Approved")},error:t=>console.error("Error loading POs",t)})}get filteredInvoices(){if(!this.searchQuery)return this.invoices;let t=this.searchQuery.toLowerCase();return this.invoices.filter(e=>e.invoiceNumber?.toLowerCase().includes(t)||e.poNumber?.toLowerCase().includes(t)||e.supplierName?.toLowerCase().includes(t))}get draftInvoices(){return this.filteredInvoices.filter(t=>t.status==="Draft")}get pendingInvoices(){return this.filteredInvoices.filter(t=>t.status==="Pending"||t.status==="Submitted")}get paidInvoices(){return this.filteredInvoices.filter(t=>t.status==="Paid"||t.status==="Completed")}getEmptyInvoice(){return{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],status:"Draft",billToName:this.companyName,billToAddress:this.companyAddress,billToGstin:this.companyGstin,shipToName:this.companyName,shipToAddress:this.companyAddress,items:[]}}getEmptyItem(){return{itemCode:"",itemName:"",description:"",hsnCode:"",quantity:0,uom:"nos",rate:0,taxRate:5,taxAmount:0,amount:0,remarks:""}}openModal(t){t?(this.editMode=!0,this.selectedInvoice=Tt(me({},t),{items:t.items?[...t.items]:[]})):(this.editMode=!1,this.selectedInvoice=this.getEmptyInvoice(),this.generateInvoiceNumber(),this.addItem()),this.showModal=!0}generateInvoiceNumber(){this.settingsService.previewPrefixId("invoice").subscribe({next:t=>{this.selectedInvoice.invoiceNumber=t},error:()=>{this.invoiceService.generateInvoiceNumber().subscribe({next:t=>{this.selectedInvoice.invoiceNumber=t},error:t=>console.error("Error generating invoice number",t)})}})}closeModal(){this.showModal=!1,this.selectedInvoice=this.getEmptyInvoice()}addItem(){this.selectedInvoice.items.push(this.getEmptyItem())}removeItem(t){this.selectedInvoice.items.length>1&&this.selectedInvoice.items.splice(t,1)}calculateItemAmount(t){let e=t.quantity*t.rate;t.taxAmount=e*(t.taxRate/100),t.amount=e+t.taxAmount}getSubtotal(){return this.selectedInvoice.items.reduce((t,e)=>t+e.quantity*e.rate,0)}getTaxTotal(){return this.selectedInvoice.items.reduce((t,e)=>t+(e.taxAmount||0),0)}getTotalAmount(){let t=this.getSubtotal(),e=this.getTaxTotal(),i=this.selectedInvoice.discount||0;return t+e-i}onPoSelect(t){let i=+t.target.value;if(i){let r=this.completedPOs.find(s=>s.id===i);r&&(this.selectedInvoice.poId=r.id,this.selectedInvoice.poNumber=r.poNumber,this.selectedInvoice.supplierId=r.supplierId,this.selectedInvoice.supplierName=r.supplierName,this.selectedInvoice.supplierAddress=r.supplierAddress,this.selectedInvoice.supplierContact=r.supplierContact,this.selectedInvoice.paymentTerms=r.paymentTerms,this.selectedInvoice.items=r.items.map(s=>({itemCode:s.itemCode||"",itemName:s.itemName,description:s.description,hsnCode:s.hsnCode||"",quantity:s.quantity,uom:s.uom||s.unit||"nos",rate:s.rate,taxRate:s.taxRate||5,taxAmount:0,amount:0,remarks:s.remarks})),this.selectedInvoice.items.forEach(s=>this.calculateItemAmount(s)))}}saveInvoice(){this.selectedInvoice.subtotal=this.getSubtotal(),this.selectedInvoice.taxAmount=this.getTaxTotal(),this.selectedInvoice.totalAmount=this.getTotalAmount(),this.editMode&&this.selectedInvoice.id?this.invoiceService.update(this.selectedInvoice.id,this.selectedInvoice).subscribe({next:()=>{this.loadInvoices(),this.closeModal()},error:t=>console.error("Error updating invoice",t)}):this.invoiceService.create(this.selectedInvoice).subscribe({next:()=>{this.loadInvoices(),this.closeModal()},error:t=>console.error("Error creating invoice",t)})}deleteInvoice(t){confirm("Are you sure you want to delete this invoice?")&&this.invoiceService.delete(t).subscribe({next:()=>this.loadInvoices(),error:e=>console.error("Error deleting invoice",e)})}updateInvoiceStatus(t,e){t.id&&this.invoiceService.updateStatus(t.id,e).subscribe({next:()=>this.loadInvoices(),error:i=>console.error("Error updating status",i)})}printInvoice(t){t.id&&this.router.navigate(["/app/purchase/invoice",t.id,"print"])}getStatusClass(t){switch(t){case"Paid":case"Completed":return"badge-success";case"Pending":case"Submitted":return"badge-warning";case"Draft":return"badge-secondary";case"Cancelled":return"badge-danger";default:return"badge-info"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):"-"}formatCurrency(t){return t===void 0?"0.00":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}toggleViewMode(){this.viewMode=this.viewMode==="table"?"kanban":"table"}static \u0275fac=function(e){return new(e||n)(V(UC),V(e0),V(tn),V(Zn))};static \u0275cmp=_e({type:n,selectors:[["app-purchase-invoice"]],standalone:!1,decls:20,vars:6,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search invoices...",3,"ngModelChange","ngModel"],[1,"btn-toggle",3,"click"],[1,"fas",3,"ngClass"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],["class","loading-container",4,"ngIf"],["class","table-view",4,"ngIf"],["class","kanban-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"table-view"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"invoice-number"],[1,"amount"],[1,"badge",3,"ngClass"],[1,"actions"],["title","View/Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Print",1,"btn-icon",3,"click"],[1,"fas","fa-print"],["class","btn-icon btn-success","title","Mark as Submitted",3,"click",4,"ngIf"],["class","btn-icon btn-success","title","Mark as Paid",3,"click",4,"ngIf"],["title","Delete",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["title","Mark as Submitted",1,"btn-icon","btn-success",3,"click"],[1,"fas","fa-paper-plane"],["title","Mark as Paid",1,"btn-icon","btn-success",3,"click"],[1,"fas","fa-check-circle"],["colspan","8",1,"empty-row"],[1,"empty-state"],[1,"fas","fa-file-invoice"],[1,"kanban-view"],[1,"kanban-board"],[1,"kanban-column"],[1,"column-header","draft"],[1,"count"],[1,"column-body"],["class","kanban-card",3,"click",4,"ngFor","ngForOf"],[1,"column-header","pending"],[1,"column-header","completed"],[1,"kanban-card",3,"click"],[1,"card-header"],[1,"badge","badge-secondary"],[1,"card-body"],[1,"supplier"],["class","po-ref",4,"ngIf"],[1,"card-footer"],[1,"date"],[1,"po-ref"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","Draft"],["value","Submitted"],["value","Pending"],["value","Paid"],["value","Cancelled"],["class","form-section",4,"ngIf"],["type","text",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel"],[1,"items-table-container"],[1,"items-table"],[1,"btn-add-item",3,"click"],[1,"form-section","totals-section"],[1,"totals-grid"],[1,"total-row"],[1,"label"],[1,"value"],["type","number",1,"input-sm",3,"ngModelChange","ngModel"],[1,"total-row","grand-total"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text",1,"input-sm",3,"ngModelChange","ngModel"],["type","text",1,"input-md",3,"ngModelChange","ngModel"],["type","number",1,"input-xs",3,"ngModelChange","ngModel"],["type","text",1,"input-xs",3,"ngModelChange","ngModel"],[1,"amount-cell"],[1,"btn-icon","btn-danger",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Purchase Invoices"),a(),o(5,"p",3),l(6,"Manage purchase invoices from completed orders"),a()(),o(7,"div",4)(8,"div",5),y(9,"i",6),o(10,"input",7),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()(),o(11,"button",8),x("click",function(){return i.toggleViewMode()}),y(12,"i",9),a(),o(13,"button",10),x("click",function(){return i.openModal()}),y(14,"i",11),l(15," New Invoice "),a()()(),b(16,Poe,4,0,"div",12)(17,koe,24,2,"div",13)(18,Loe,26,6,"div",14),a(),b(19,joe,123,18,"div",15)),e&2&&(c(10),M("ngModel",i.searchQuery),c(2),m("ngClass",i.viewMode==="table"?"fa-th":"fa-list"),c(4),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.viewMode==="table"),c(),m("ngIf",!i.loading&&i.viewMode==="kanban"),c(),m("ngIf",i.showModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Ee],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;background-color:#f5f7fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a5f7a;margin:0}.header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:4px 0 0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:8px;width:250px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a5f7a}.btn-toggle[_ngcontent-%COMP%]{padding:10px 14px;background:#fff;border:1px solid #ddd;border-radius:8px;cursor:pointer;color:#666}.btn-toggle[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#1a5f7a;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]:hover{background:#154d63}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#e0e0e0;color:#333;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f0f0f0;border-top-color:#1a5f7a;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#444}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.data-table[_ngcontent-%COMP%]   .invoice-number[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.data-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:500;text-align:right}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:40px!important}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:12px}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;background:#f0f0f0;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center}.btn-icon[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-icon.btn-success[_ngcontent-%COMP%]{background:#d4edda;color:#28a745}.btn-icon.btn-success[_ngcontent-%COMP%]:hover{background:#c3e6cb}.btn-icon.btn-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#dc3545}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#f5c6cb}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.kanban-column[_ngcontent-%COMP%]{background:#f0f2f5;border-radius:12px;overflow:hidden}.column-header[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#fff}.column-header[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{background:#fff3;padding:4px 10px;border-radius:12px;font-size:12px;color:#fff}.column-header.draft[_ngcontent-%COMP%]{background:#6c757d}.column-header.pending[_ngcontent-%COMP%]{background:#ffc107}.column-header.pending[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .column-header.pending[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#333}.column-header.completed[_ngcontent-%COMP%]{background:#28a745}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 280px);overflow-y:auto}.kanban-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:14px;margin-bottom:12px;cursor:pointer;box-shadow:0 1px 3px #00000014;transition:box-shadow .2s}.kanban-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #00000026}.kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .invoice-number[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.kanban-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .supplier[_ngcontent-%COMP%]{font-weight:500;margin:0 0 4px}.kanban-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .po-ref[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:12px;padding-top:10px;border-top:1px solid #eee;font-size:13px}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;color:#1a5f7a}.kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#999}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:900px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{max-width:1000px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid #eee}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a5f7a;margin:0 0 16px;padding-bottom:8px;border-bottom:2px solid #1a5f7a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a5f7a}.form-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%]{background:#f5f5f5}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.items-table-container[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-size:12px;font-weight:600;text-transform:uppercase;color:#666}.items-table[_ngcontent-%COMP%]   .input-xs[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .input-sm[_ngcontent-%COMP%]{width:90px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .input-md[_ngcontent-%COMP%]{width:150px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.items-table[_ngcontent-%COMP%]   .amount-cell[_ngcontent-%COMP%]{font-weight:500;text-align:right}.btn-add-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:10px 16px;border:none;background:#f0f0f0;color:#1a5f7a;font-size:13px;cursor:pointer;width:100%;justify-content:center}.btn-add-item[_ngcontent-%COMP%]:hover{background:#e0e0e0}.totals-section[_ngcontent-%COMP%]   .totals-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555;min-width:100px;text-align:right}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{min-width:120px;text-align:right;font-weight:500}.totals-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px;padding:6px 10px;border:1px solid #ddd;border-radius:4px;text-align:right}.totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{padding-top:10px;border-top:2px solid #1a5f7a}.totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a5f7a}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.kanban-board[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Woe(n,t){n&1&&(o(0,"div",41),y(1,"div",42),o(2,"p"),l(3,"Loading settings..."),a()())}var WC=class n{constructor(t,e){this.settingsService=t;this.notificationService=e}settings={itemPrefix:"ITM-",itemNextNumber:1,groupPrefix:"GRP-",groupNextNumber:1,warehousePrefix:"WH-",warehouseNextNumber:1,binPrefix:"BIN-",binNextNumber:1,supplierPrefix:"SUP-",supplierNextNumber:1,unitPrefix:"UOM-",unitNextNumber:1,prPrefix:"PR-",prNextNumber:1,poPrefix:"PO-",poNextNumber:1,grnPrefix:"GRN-",grnNextNumber:1,issuePrefix:"GI-",issueNextNumber:1,transferPrefix:"ST-",transferNextNumber:1,adjustmentPrefix:"ADJ-",adjustmentNextNumber:1};saving=!1;loading=!1;ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getPrefixSettings().subscribe({next:t=>{t&&(this.settings=t),this.loading=!1},error:t=>{console.error("Error loading prefix settings",t),this.loading=!1}})}saveSettings(){this.saving=!0,this.settingsService.savePrefixSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,this.notificationService.success("Prefix settings saved successfully")},error:t=>{console.error("Error saving prefix settings",t),this.saving=!1,this.notificationService.error("Error saving prefix settings")}})}formatPreview(t,e){return`${t}${e.toString().padStart(4,"0")}`}static \u0275fac=function(e){return new(e||n)(V(Zn),V(en))};static \u0275cmp=_e({type:n,selectors:[["app-prefix-settings"]],standalone:!1,decls:123,vars:39,consts:[[1,"prefix-settings-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],[1,"settings-form",3,"ngSubmit"],[1,"settings-section"],[1,"section-title"],[1,"fas","fa-boxes"],[1,"prefix-grid"],[1,"prefix-card"],[1,"prefix-inputs"],["type","text","name","itemPrefix","placeholder","ITM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","itemNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"preview"],["type","text","name","groupPrefix","placeholder","GRP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","groupNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","warehousePrefix","placeholder","WH-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","warehouseNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","binPrefix","placeholder","BIN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","binNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","supplierPrefix","placeholder","SUP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","supplierNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","unitPrefix","placeholder","UOM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","unitNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-shopping-cart"],["type","text","name","prPrefix","placeholder","PR-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","prNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","poPrefix","placeholder","PO-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","poNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","grnPrefix","placeholder","GRN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","grnNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-exchange-alt"],["type","text","name","issuePrefix","placeholder","GI-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","issueNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","transferPrefix","placeholder","ST-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","transferNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","adjustmentPrefix","placeholder","ADJ-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","adjustmentNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-save"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Prefix Settings"),a(),o(4,"p",2),l(5,"Configure auto-generated ID prefixes for inventory and purchase modules"),a()(),b(6,Woe,4,0,"div",3),o(7,"form",4),x("ngSubmit",function(){return i.saveSettings()}),o(8,"div",5)(9,"h3",6),y(10,"i",7),l(11," Inventory Prefixes "),a(),o(12,"div",8)(13,"div",9)(14,"label"),l(15,"Item Master"),a(),o(16,"div",10)(17,"input",11),S("ngModelChange",function(s){return P(i.settings.itemPrefix,s)||(i.settings.itemPrefix=s),s}),a(),o(18,"input",12),S("ngModelChange",function(s){return P(i.settings.itemNextNumber,s)||(i.settings.itemNextNumber=s),s}),a()(),o(19,"span",13),l(20),a()(),o(21,"div",9)(22,"label"),l(23,"Group Master"),a(),o(24,"div",10)(25,"input",14),S("ngModelChange",function(s){return P(i.settings.groupPrefix,s)||(i.settings.groupPrefix=s),s}),a(),o(26,"input",15),S("ngModelChange",function(s){return P(i.settings.groupNextNumber,s)||(i.settings.groupNextNumber=s),s}),a()(),o(27,"span",13),l(28),a()(),o(29,"div",9)(30,"label"),l(31,"Warehouse"),a(),o(32,"div",10)(33,"input",16),S("ngModelChange",function(s){return P(i.settings.warehousePrefix,s)||(i.settings.warehousePrefix=s),s}),a(),o(34,"input",17),S("ngModelChange",function(s){return P(i.settings.warehouseNextNumber,s)||(i.settings.warehouseNextNumber=s),s}),a()(),o(35,"span",13),l(36),a()(),o(37,"div",9)(38,"label"),l(39,"Bin Location"),a(),o(40,"div",10)(41,"input",18),S("ngModelChange",function(s){return P(i.settings.binPrefix,s)||(i.settings.binPrefix=s),s}),a(),o(42,"input",19),S("ngModelChange",function(s){return P(i.settings.binNextNumber,s)||(i.settings.binNextNumber=s),s}),a()(),o(43,"span",13),l(44),a()(),o(45,"div",9)(46,"label"),l(47,"Supplier"),a(),o(48,"div",10)(49,"input",20),S("ngModelChange",function(s){return P(i.settings.supplierPrefix,s)||(i.settings.supplierPrefix=s),s}),a(),o(50,"input",21),S("ngModelChange",function(s){return P(i.settings.supplierNextNumber,s)||(i.settings.supplierNextNumber=s),s}),a()(),o(51,"span",13),l(52),a()(),o(53,"div",9)(54,"label"),l(55,"Unit of Measure"),a(),o(56,"div",10)(57,"input",22),S("ngModelChange",function(s){return P(i.settings.unitPrefix,s)||(i.settings.unitPrefix=s),s}),a(),o(58,"input",23),S("ngModelChange",function(s){return P(i.settings.unitNextNumber,s)||(i.settings.unitNextNumber=s),s}),a()(),o(59,"span",13),l(60),a()()()(),o(61,"div",5)(62,"h3",6),y(63,"i",24),l(64," Purchase Prefixes "),a(),o(65,"div",8)(66,"div",9)(67,"label"),l(68,"Purchase Requisition"),a(),o(69,"div",10)(70,"input",25),S("ngModelChange",function(s){return P(i.settings.prPrefix,s)||(i.settings.prPrefix=s),s}),a(),o(71,"input",26),S("ngModelChange",function(s){return P(i.settings.prNextNumber,s)||(i.settings.prNextNumber=s),s}),a()(),o(72,"span",13),l(73),a()(),o(74,"div",9)(75,"label"),l(76,"Purchase Order"),a(),o(77,"div",10)(78,"input",27),S("ngModelChange",function(s){return P(i.settings.poPrefix,s)||(i.settings.poPrefix=s),s}),a(),o(79,"input",28),S("ngModelChange",function(s){return P(i.settings.poNextNumber,s)||(i.settings.poNextNumber=s),s}),a()(),o(80,"span",13),l(81),a()(),o(82,"div",9)(83,"label"),l(84,"Goods Receipt Note"),a(),o(85,"div",10)(86,"input",29),S("ngModelChange",function(s){return P(i.settings.grnPrefix,s)||(i.settings.grnPrefix=s),s}),a(),o(87,"input",30),S("ngModelChange",function(s){return P(i.settings.grnNextNumber,s)||(i.settings.grnNextNumber=s),s}),a()(),o(88,"span",13),l(89),a()()()(),o(90,"div",5)(91,"h3",6),y(92,"i",31),l(93," Stock Movement Prefixes "),a(),o(94,"div",8)(95,"div",9)(96,"label"),l(97,"Goods Issue"),a(),o(98,"div",10)(99,"input",32),S("ngModelChange",function(s){return P(i.settings.issuePrefix,s)||(i.settings.issuePrefix=s),s}),a(),o(100,"input",33),S("ngModelChange",function(s){return P(i.settings.issueNextNumber,s)||(i.settings.issueNextNumber=s),s}),a()(),o(101,"span",13),l(102),a()(),o(103,"div",9)(104,"label"),l(105,"Stock Transfer"),a(),o(106,"div",10)(107,"input",34),S("ngModelChange",function(s){return P(i.settings.transferPrefix,s)||(i.settings.transferPrefix=s),s}),a(),o(108,"input",35),S("ngModelChange",function(s){return P(i.settings.transferNextNumber,s)||(i.settings.transferNextNumber=s),s}),a()(),o(109,"span",13),l(110),a()(),o(111,"div",9)(112,"label"),l(113,"Stock Adjustment"),a(),o(114,"div",10)(115,"input",36),S("ngModelChange",function(s){return P(i.settings.adjustmentPrefix,s)||(i.settings.adjustmentPrefix=s),s}),a(),o(116,"input",37),S("ngModelChange",function(s){return P(i.settings.adjustmentNextNumber,s)||(i.settings.adjustmentNextNumber=s),s}),a()(),o(117,"span",13),l(118),a()()()(),o(119,"div",38)(120,"button",39),y(121,"i",40),l(122),a()()()()),e&2&&(c(6),m("ngIf",i.loading),c(11),M("ngModel",i.settings.itemPrefix),c(),M("ngModel",i.settings.itemNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.itemPrefix,i.settings.itemNextNumber)),c(5),M("ngModel",i.settings.groupPrefix),c(),M("ngModel",i.settings.groupNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.groupPrefix,i.settings.groupNextNumber)),c(5),M("ngModel",i.settings.warehousePrefix),c(),M("ngModel",i.settings.warehouseNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.warehousePrefix,i.settings.warehouseNextNumber)),c(5),M("ngModel",i.settings.binPrefix),c(),M("ngModel",i.settings.binNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.binPrefix,i.settings.binNextNumber)),c(5),M("ngModel",i.settings.supplierPrefix),c(),M("ngModel",i.settings.supplierNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.supplierPrefix,i.settings.supplierNextNumber)),c(5),M("ngModel",i.settings.unitPrefix),c(),M("ngModel",i.settings.unitNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.unitPrefix,i.settings.unitNextNumber)),c(10),M("ngModel",i.settings.prPrefix),c(),M("ngModel",i.settings.prNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.prPrefix,i.settings.prNextNumber)),c(5),M("ngModel",i.settings.poPrefix),c(),M("ngModel",i.settings.poNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.poPrefix,i.settings.poNextNumber)),c(5),M("ngModel",i.settings.grnPrefix),c(),M("ngModel",i.settings.grnNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.grnPrefix,i.settings.grnNextNumber)),c(10),M("ngModel",i.settings.issuePrefix),c(),M("ngModel",i.settings.issueNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.issuePrefix,i.settings.issueNextNumber)),c(5),M("ngModel",i.settings.transferPrefix),c(),M("ngModel",i.settings.transferNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.transferPrefix,i.settings.transferNextNumber)),c(5),M("ngModel",i.settings.adjustmentPrefix),c(),M("ngModel",i.settings.adjustmentNextNumber),c(2),D("Preview: ",i.formatPreview(i.settings.adjustmentPrefix,i.settings.adjustmentNextNumber)),c(2),m("disabled",i.saving),c(2),D(" ",i.saving?"Saving...":"Save Settings"," "))},dependencies:[be,pi,Ie,Mt,Oe,di,Xt,Ee,li],styles:[".prefix-settings-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e0e0e0;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.settings-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 8px #00000014}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:teal;font-size:18px;font-weight:600;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #e0f2f1}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.prefix-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.prefix-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;border:1px solid #e0e0e0;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]:hover{border-color:teal;box-shadow:0 2px 8px #0080801a}.prefix-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:12px;font-size:14px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]{width:100px;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:block;font-size:12px;color:teal;font-weight:500;background:#e0f2f1;padding:6px 10px;border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media(max-width:768px){.prefix-settings-container[_ngcontent-%COMP%]{padding:16px}.prefix-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.settings-section[_ngcontent-%COMP%]{padding:16px}}"]})};function zoe(n,t){n&1&&y(0,"i",34)}function qoe(n,t){if(n&1&&(o(0,"option",16),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function Hoe(n,t){if(n&1&&(o(0,"span",53),l(1),a()),n&2){let e=p().$implicit,i=p();c(),D(" ",i.countModulePermissions(e.key)," permissions ")}}function Goe(n,t){if(n&1){let e=F();o(0,"div",57)(1,"span",48),l(2),a(),o(3,"div",49)(4,"label",50)(5,"input",51),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.toggleSubModulePermission(r.key,"view"))}),a(),o(6,"span"),l(7,"View"),a()(),o(8,"label",50)(9,"input",51),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.toggleSubModulePermission(r.key,"add"))}),a(),o(10,"span"),l(11,"Add"),a()(),o(12,"label",50)(13,"input",51),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.toggleSubModulePermission(r.key,"edit"))}),a(),o(14,"span"),l(15,"Edit"),a()(),o(16,"label",50)(17,"input",51),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.toggleSubModulePermission(r.key,"delete"))}),a(),o(18,"span"),l(19,"Delete"),a()()()()}if(n&2){let e=t.$implicit,i=p(3);c(2),_(e.label),c(3),m("checked",i.isSubModuleChecked(e.key,"view")),c(4),m("checked",i.isSubModuleChecked(e.key,"add")),c(4),m("checked",i.isSubModuleChecked(e.key,"edit")),c(4),m("checked",i.isSubModuleChecked(e.key,"delete"))}}function $oe(n,t){if(n&1&&(o(0,"div",54)(1,"div",55),l(2,"Sub-modules"),a(),b(3,Goe,20,5,"div",56),a()),n&2){let e=p().$implicit;c(3),m("ngForOf",e.subModules)}}function Yoe(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",36),x("click",function(){let r=g(e).$implicit,s=p();return f(s.toggleModule(r))}),o(2,"div",37),y(3,"i"),o(4,"span",38),l(5),a(),b(6,Hoe,2,1,"span",39),a(),o(7,"div",40)(8,"button",41),x("click",function(r){let s=g(e).$implicit;return p().selectAllForModule(s.key),f(r.stopPropagation())}),y(9,"i",42),a(),o(10,"button",43),x("click",function(r){let s=g(e).$implicit;return p().clearAllForModule(s.key),f(r.stopPropagation())}),y(11,"i",44),a(),y(12,"i",45),a()(),o(13,"div",46)(14,"div",47)(15,"span",48),l(16),a(),o(17,"div",49)(18,"label",50)(19,"input",51),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleMainModulePermission(r.key,"view"))}),a(),o(20,"span"),l(21,"View"),a()(),o(22,"label",50)(23,"input",51),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleMainModulePermission(r.key,"add"))}),a(),o(24,"span"),l(25,"Add"),a()(),o(26,"label",50)(27,"input",51),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleMainModulePermission(r.key,"edit"))}),a(),o(28,"span"),l(29,"Edit"),a()(),o(30,"label",50)(31,"input",51),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleMainModulePermission(r.key,"delete"))}),a(),o(32,"span"),l(33,"Delete"),a()()()(),b(34,$oe,4,1,"div",52),a()()}if(n&2){let e=t.$implicit,i=p();c(3),bi(e.icon),c(2),_(e.label),c(),m("ngIf",i.countModulePermissions(e.key)>0),c(6),ie("fa-chevron-down",!e.expanded)("fa-chevron-up",e.expanded),c(),ie("expanded",e.expanded),c(3),D("",e.label," (Main)"),c(3),m("checked",i.isMainModuleChecked(e.key,"view")),c(4),m("checked",i.isMainModuleChecked(e.key,"add")),c(4),m("checked",i.isMainModuleChecked(e.key,"edit")),c(4),m("checked",i.isMainModuleChecked(e.key,"delete")),c(3),m("ngIf",e.subModules.length>0)}}var Th=class n{constructor(t,e,i,r,s,d){this.router=t;this.route=e;this.roleService=i;this.branchService=r;this.notificationService=s;this.cdr=d}roleName="";roleDescription="";roleType="custom";selectedBranchId=null;editMode=!1;roleId=null;saving=!1;branches=[];moduleHierarchy=[];permissions={};ngOnInit(){this.moduleHierarchy=this.roleService.getModuleHierarchy(),this.permissions=this.roleService.getDefaultPermissions(),this.loadBranches();let t=this.route.snapshot.paramMap.get("id");t&&(this.editMode=!0,this.roleId=parseInt(t,10),this.loadRole(this.roleId))}loadBranches(){this.branchService.getAllBranches().subscribe({next:t=>{this.branches=t,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load companies"),this.cdr.markForCheck()}})}loadRole(t){this.roleService.getById(t).subscribe({next:e=>{if(this.roleName=e.name,this.roleDescription=e.description||"",this.selectedBranchId=e.branchId||null,this.roleType=e.isSystemRole?"system":"custom",e.permissions){let i=this.roleService.parsePermissions(e.permissions);this.permissions=me(me({},this.roleService.getDefaultPermissions()),i)}this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load role"),this.cdr.markForCheck(),this.router.navigate(["/app/settings/roles"])}})}toggleModule(t){t.expanded=!t.expanded}toggleMainModulePermission(t,e){this.permissions[t]||(this.permissions[t]={view:!1,add:!1,edit:!1,delete:!1}),this.permissions[t][e]=!this.permissions[t][e];let i=this.moduleHierarchy.find(r=>r.key===t);i&&i.subModules.forEach(r=>{this.permissions[r.key]||(this.permissions[r.key]={view:!1,add:!1,edit:!1,delete:!1}),this.permissions[r.key][e]=this.permissions[t][e]})}toggleSubModulePermission(t,e){this.permissions[t]||(this.permissions[t]={view:!1,add:!1,edit:!1,delete:!1}),this.permissions[t][e]=!this.permissions[t][e]}selectAllForModule(t){let e=this.moduleHierarchy.find(i=>i.key===t);e&&(this.permissions[t]={view:!0,add:!0,edit:!0,delete:!0},e.subModules.forEach(i=>{this.permissions[i.key]={view:!0,add:!0,edit:!0,delete:!0}}))}clearAllForModule(t){let e=this.moduleHierarchy.find(i=>i.key===t);e&&(this.permissions[t]={view:!1,add:!1,edit:!1,delete:!1},e.subModules.forEach(i=>{this.permissions[i.key]={view:!1,add:!1,edit:!1,delete:!1}}))}selectAll(){this.permissions=this.roleService.getFullPermissions()}clearAll(){this.permissions=this.roleService.getDefaultPermissions()}isMainModuleChecked(t,e){return this.permissions[t]?.[e]||!1}isSubModuleChecked(t,e){return this.permissions[t]?.[e]||!1}hasAnySubModulePermission(t){let e=this.moduleHierarchy.find(i=>i.key===t);return!e||e.subModules.length===0?!1:e.subModules.some(i=>{let r=this.permissions[i.key];return r&&(r.view||r.add||r.edit||r.delete)})}countModulePermissions(t){let e=this.moduleHierarchy.find(s=>s.key===t);if(!e)return 0;let i=0,r=this.permissions[t];return r&&(r.view&&i++,r.add&&i++,r.edit&&i++,r.delete&&i++),e.subModules.forEach(s=>{let d=this.permissions[s.key];d&&(d.view&&i++,d.add&&i++,d.edit&&i++,d.delete&&i++)}),i}saveRole(){if(!this.roleName.trim()){this.notificationService.error("Role name is required");return}this.saving=!0,this.cdr.markForCheck();let t={name:this.roleName.trim(),description:this.roleDescription.trim(),permissions:this.roleService.stringifyPermissions(this.permissions),branchId:this.selectedBranchId||void 0,isSystemRole:this.roleType==="system"};this.editMode&&this.roleId?this.roleService.update(this.roleId,t).subscribe({next:()=>{this.notificationService.success("Role updated successfully"),this.router.navigate(["/app/settings/roles"])},error:e=>{this.notificationService.error(e.error?.error||"Failed to update role"),this.saving=!1,this.cdr.markForCheck()}}):this.roleService.create(t).subscribe({next:()=>{this.notificationService.success("Role created successfully"),this.router.navigate(["/app/settings/roles"])},error:e=>{this.notificationService.error(e.error?.error||"Failed to create role"),this.saving=!1,this.cdr.markForCheck()}})}cancel(){this.router.navigate(["/app/settings/roles"])}static \u0275fac=function(e){return new(e||n)(V(tn),V(Di),V(Qd),V(Ar),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-add-role"]],standalone:!1,decls:61,vars:12,consts:[[1,"add-role-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-user-shield"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"form-container"],[1,"form-section"],[1,"fas","fa-info-circle"],[1,"form-row"],[1,"form-group"],[3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"help-text"],[3,"ngModelChange","ngModel"],["value","custom"],["value","system"],["type","text","placeholder","Enter role name",3,"ngModelChange","ngModel"],["type","text","placeholder","Brief description of this role",3,"ngModelChange","ngModel"],[1,"form-section","permissions-section"],[1,"section-header"],[1,"fas","fa-lock"],[1,"bulk-actions"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-check-double"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-times"],[1,"permissions-grid"],["class","module-card",4,"ngFor","ngForOf"],[1,"fas","fa-spinner","fa-spin"],[1,"module-card"],[1,"module-header",3,"click"],[1,"module-info"],[1,"module-name"],["class","permission-count",4,"ngIf"],[1,"module-actions"],["title","Select All",1,"btn-icon",3,"click"],[1,"fas","fa-check-square"],["title","Clear All",1,"btn-icon",3,"click"],[1,"fas","fa-square"],[1,"fas"],[1,"module-permissions"],[1,"permission-row","main-permission"],[1,"permission-label"],[1,"permission-checkboxes"],[1,"checkbox-item"],["type","checkbox",3,"change","checked"],["class","sub-modules",4,"ngIf"],[1,"permission-count"],[1,"sub-modules"],[1,"sub-module-divider"],["class","permission-row sub-permission",4,"ngFor","ngForOf"],[1,"permission-row","sub-permission"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return i.cancel()}),y(4,"i",4),l(5," Back "),a(),o(6,"h1"),y(7,"i",5),l(8),a()(),o(9,"div",6)(10,"button",7),x("click",function(){return i.cancel()}),l(11,"Cancel"),a(),o(12,"button",8),x("click",function(){return i.saveRole()}),b(13,zoe,1,0,"i",9),l(14),a()()(),o(15,"div",10)(16,"div",11)(17,"h3"),y(18,"i",12),l(19," Role Information"),a(),o(20,"div",13)(21,"div",14)(22,"label"),l(23,"Company (Optional)"),a(),o(24,"select",15),S("ngModelChange",function(s){return P(i.selectedBranchId,s)||(i.selectedBranchId=s),s}),o(25,"option",16),l(26,"-- Global (All Companies) --"),a(),b(27,qoe,2,2,"option",17),a(),o(28,"small",18),l(29,"Leave as Global to apply this role to all companies"),a()(),o(30,"div",14)(31,"label"),l(32,"Role Type"),a(),o(33,"select",19),S("ngModelChange",function(s){return P(i.roleType,s)||(i.roleType=s),s}),o(34,"option",20),l(35,"Custom Role"),a(),o(36,"option",21),l(37,"System Role"),a()()()(),o(38,"div",13)(39,"div",14)(40,"label"),l(41,"Role Name *"),a(),o(42,"input",22),S("ngModelChange",function(s){return P(i.roleName,s)||(i.roleName=s),s}),a()(),o(43,"div",14)(44,"label"),l(45,"Description"),a(),o(46,"input",23),S("ngModelChange",function(s){return P(i.roleDescription,s)||(i.roleDescription=s),s}),a()()()(),o(47,"div",24)(48,"div",25)(49,"h3"),y(50,"i",26),l(51," Module Permissions"),a(),o(52,"div",27)(53,"button",28),x("click",function(){return i.selectAll()}),y(54,"i",29),l(55," Select All "),a(),o(56,"button",30),x("click",function(){return i.clearAll()}),y(57,"i",31),l(58," Clear All "),a()()(),o(59,"div",32),b(60,Yoe,35,16,"div",33),a()()()()),e&2&&(c(8),D(" ",i.editMode?"Edit Role":"Add New Role"),c(4),m("disabled",i.saving),c(),m("ngIf",i.saving),c(),D(" ",i.editMode?"Update Role":"Create Role"," "),c(10),M("ngModel",i.selectedBranchId),m("disabled",i.editMode),c(),m("ngValue",null),c(2),m("ngForOf",i.branches),c(6),M("ngModel",i.roleType),c(9),M("ngModel",i.roleName),c(4),M("ngModel",i.roleDescription),c(14),m("ngForOf",i.moduleHierarchy))},dependencies:[Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".add-role-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:none;border:1px solid #e0e0e0;padding:8px 16px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px;color:#6c757d;transition:all .2s}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{border-color:#00796b;color:#00796b}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #00796b4d}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#6c757d}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#6c757d}.btn.btn-outline[_ngcontent-%COMP%]:hover{border-color:#00796b;color:#00796b}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 12px #00000014;overflow:hidden}.form-section[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2c3e50;margin-bottom:20px;display:flex;align-items:center;gap:10px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#2c3e50;margin-bottom:8px;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:8px;font-size:.95rem;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.permissions-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.permissions-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.permissions-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.permissions-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.module-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:10px;overflow:hidden;transition:box-shadow .2s}.module-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000014}.module-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;background:linear-gradient(135deg,#f8f9fa,#f1f3f5);cursor:pointer;transition:background .2s}.module-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8f5e9,#e0f2f1)}.module-header[_ngcontent-%COMP%]   .module-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.module-header[_ngcontent-%COMP%]   .module-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:#00796b;width:24px;text-align:center}.module-header[_ngcontent-%COMP%]   .module-info[_ngcontent-%COMP%]   .module-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.module-header[_ngcontent-%COMP%]   .module-info[_ngcontent-%COMP%]   .permission-count[_ngcontent-%COMP%]{font-size:.8rem;color:#00796b;background:#e0f2f1;padding:2px 8px;border-radius:12px}.module-header[_ngcontent-%COMP%]   .module-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.module-header[_ngcontent-%COMP%]   .module-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#6c757d;border-radius:4px;transition:all .2s}.module-header[_ngcontent-%COMP%]   .module-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#00796b1a;color:#00796b}.module-header[_ngcontent-%COMP%]   .module-actions[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin-left:8px}.module-permissions[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease-out;background:#fff}.module-permissions.expanded[_ngcontent-%COMP%]{max-height:1000px}.permission-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 18px;border-top:1px solid #eee}.permission-row.main-permission[_ngcontent-%COMP%]{background:#fafafa}.permission-row.sub-permission[_ngcontent-%COMP%]{padding-left:36px}.permission-row.sub-permission[_ngcontent-%COMP%]   .permission-label[_ngcontent-%COMP%]{color:#5c6975;font-size:.9rem}.permission-row[_ngcontent-%COMP%]   .permission-label[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.permission-row[_ngcontent-%COMP%]   .permission-checkboxes[_ngcontent-%COMP%]{display:flex;gap:20px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;cursor:pointer;font-size:.85rem;color:#5c6975}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:#00796b}.checkbox-item[_ngcontent-%COMP%]:hover{color:#00796b}.sub-modules[_ngcontent-%COMP%]   .sub-module-divider[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:#9e9e9e;padding:8px 18px 4px 36px;background:#fafafa}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.permission-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.permission-checkboxes[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}}"],changeDetection:0})};function Joe(n,t){if(n&1){let e=F();o(0,"div",18)(1,"label",24),l(2,"Password"),a(),o(3,"input",35),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.password,r)||(s.password=r),f(r)}),a(),o(4,"small",31),l(5,"Minimum 6 characters"),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.password)}}function Koe(n,t){if(n&1&&(o(0,"option",33),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function Qoe(n,t){if(n&1){let e=F();o(0,"div",13)(1,"div",14)(2,"label",15)(3,"input",16),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.isAdmin,r)||(s.staff.isAdmin=r),f(r)}),a(),o(4,"span"),l(5,"Administrator"),a()(),o(6,"label",15)(7,"input",17),x("change",function(){g(e);let r=p();return f(r.staff.isStaffMember=!r.staff.isStaffMember)}),a(),o(8,"span"),l(9,"Not Staff Member"),a()()(),o(10,"div",18)(11,"label"),l(12,"Profile Image"),a(),o(13,"div",19),y(14,"input",20),o(15,"label",21)(16,"span",22),l(17,"Choose File"),a(),o(18,"span",23),l(19,"No file chosen"),a()()()(),o(20,"div",18)(21,"label",24),l(22,"First Name"),a(),o(23,"input",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.firstName,r)||(s.staff.firstName=r),f(r)}),a()(),o(24,"div",18)(25,"label",24),l(26,"Last Name"),a(),o(27,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.lastName,r)||(s.staff.lastName=r),f(r)}),a()(),o(28,"div",18)(29,"label",24),l(30,"Email"),a(),o(31,"input",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.email,r)||(s.staff.email=r),f(r)}),a()(),o(32,"div",18)(33,"label"),l(34,"Phone"),a(),o(35,"input",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.phone,r)||(s.staff.phone=r),f(r)}),a()(),b(36,Joe,6,1,"div",29),o(37,"div",18)(38,"label"),l(39,"Company"),a(),y(40,"input",30),o(41,"small",31),l(42,"Staff will be added to your current company"),a()(),o(43,"div",18)(44,"label"),l(45,"Role"),a(),o(46,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.staff.roleId,r)||(s.staff.roleId=r),f(r)}),o(47,"option",33),l(48,"Select Role"),a(),b(49,Koe,2,2,"option",34),a()()()}if(n&2){let e=p();c(3),M("ngModel",e.staff.isAdmin),c(4),m("checked",!e.staff.isStaffMember),c(16),M("ngModel",e.staff.firstName),c(4),M("ngModel",e.staff.lastName),c(4),M("ngModel",e.staff.email),c(4),M("ngModel",e.staff.phone),c(),m("ngIf",!e.editMode),c(4),m("value",e.currentBranchName),c(6),M("ngModel",e.staff.roleId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.roles)}}function Xoe(n,t){n&1&&(o(0,"div",38)(1,"p"),l(2,"This staff member will inherit all permissions from the assigned role."),a()())}function Zoe(n,t){if(n&1&&(o(0,"div",13)(1,"p",36),l(2,"Permissions are managed through the role assigned to this staff member."),a(),o(3,"div",18)(4,"label"),l(5,"Company"),a(),y(6,"input",30),a(),o(7,"div",18)(8,"label"),l(9,"Assigned Role"),a(),y(10,"input",30),a(),b(11,Xoe,3,0,"div",37),a()),n&2){let e=p();c(6),m("value",e.currentBranchName),c(4),m("value",e.selectedRoleName),c(),m("ngIf",e.staff.roleId)}}function eae(n,t){n&1&&y(0,"i",39)}var kh=class n{constructor(t,e,i,r,s,d,u,h){this.router=t;this.route=e;this.staffService=i;this.branchService=r;this.roleService=s;this.notificationService=d;this.authService=u;this.cdr=h}editMode=!1;staffId=null;activeTab="profile";saving=!1;staff={firstName:"",lastName:"",email:"",role:"",roleId:void 0,branchId:void 0,isAdmin:!1,isStaffMember:!0,phone:"",active:!0};currentBranchName="";password="";roles=[];branches=[];selectedBranchId=null;ngOnInit(){this.initializeCurrentBranch(),this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&(this.editMode=!0,this.staffId=parseInt(e),this.loadStaff())})}initializeCurrentBranch(){let t=this.authService.getCurrentBranchId();t?(this.selectedBranchId=t,this.staff.branchId=t,this.branchService.getBranchById(t).subscribe({next:e=>{this.currentBranchName=e.name,this.cdr.markForCheck()},error:()=>{this.currentBranchName="Current Company",this.cdr.markForCheck()}}),this.loadRolesForBranch(t)):this.loadBranches()}loadBranches(){this.branchService.getAllBranches().subscribe({next:t=>{this.branches=t,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load companies"),this.cdr.markForCheck()}})}onBranchChange(){this.staff.roleId=void 0,this.staff.role="",this.roles=[],this.selectedBranchId?(this.staff.branchId=this.selectedBranchId,this.loadRolesForBranch(this.selectedBranchId)):this.loadGlobalRoles()}loadGlobalRoles(){this.roleService.getAll().subscribe({next:t=>{this.roles=t.filter(e=>!e.branchId).map(e=>Tt(me({},e),{name:`${e.name} (Global)`})),this.cdr.markForCheck()},error:()=>{this.roles=[],this.cdr.markForCheck()}})}loadRolesForBranch(t){this.roleService.getByBranch(t).subscribe({next:e=>{this.roleService.getAll().subscribe({next:i=>{let r=i.filter(d=>!d.branchId),s=[...e];r.forEach(d=>{s.find(u=>u.id===d.id)||s.push(Tt(me({},d),{name:`${d.name} (Global)`}))}),this.roles=s,this.cdr.markForCheck()},error:()=>{this.roles=e,this.cdr.markForCheck()}})},error:()=>{this.roles=[],this.cdr.markForCheck()}})}loadRoles(){this.staffService.getRoles().subscribe({next:t=>{this.roles=t},error:()=>{this.roles=[]}})}loadStaff(){this.staffId&&this.staffService.getById(this.staffId).subscribe({next:t=>{this.staff=t,t.branchId?(this.selectedBranchId=t.branchId,this.loadRolesForBranch(t.branchId)):this.loadGlobalRoles(),this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load staff member"),this.cdr.markForCheck()}})}setTab(t){this.activeTab=t}saveStaff(){if(!this.staff.firstName?.trim()||!this.staff.lastName?.trim()){this.notificationService.error("First name and last name are required");return}if(!this.staff.email?.trim()){this.notificationService.error("Email is required");return}if(!this.editMode&&(!this.password||this.password.length<6)){this.notificationService.error("Password must be at least 6 characters");return}this.saving=!0,this.cdr.markForCheck();let t=me({},this.staff);this.selectedBranchId&&(t.branchId=this.selectedBranchId),this.password&&this.password.length>=6&&(t.password=this.password),this.editMode&&this.staffId?this.staffService.update(this.staffId,t).subscribe({next:()=>{this.notificationService.success("Staff updated successfully"),this.router.navigate(["/app/settings/staff"])},error:e=>{this.notificationService.error(e.error?.error||"Error updating staff"),this.saving=!1,this.cdr.markForCheck()}}):this.staffService.create(t).subscribe({next:()=>{this.notificationService.success("Staff created successfully"),this.router.navigate(["/app/settings/staff"])},error:e=>{this.notificationService.error(e.error?.error||"Error creating staff"),this.saving=!1,this.cdr.markForCheck()}})}cancel(){this.router.navigate(["/app/settings/staff"])}get selectedBranchName(){return this.branches.find(e=>e.id===this.selectedBranchId)?.name||"Not selected"}get selectedRoleName(){return this.roles.find(e=>e.id===this.staff.roleId)?.name||"Not selected"}static \u0275fac=function(e){return new(e||n)(V(tn),V(Di),V(lu),V(Ar),V(Qd),V(en),V(Ui),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-add-staff"]],standalone:!1,decls:30,vars:12,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/staff"],[1,"card"],[1,"tabs"],[1,"tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"tab-content"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["type","checkbox",3,"change","checked"],[1,"form-group"],[1,"file-input"],["type","file","id","profileImage","accept","image/*"],["for","profileImage",1,"file-label"],[1,"choose-file"],[1,"file-name"],[1,"required"],["type","text","placeholder","Enter first name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["type","text","disabled","",1,"form-control",3,"value"],[1,"help-text"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","password","placeholder","Enter password",1,"form-control",3,"ngModelChange","ngModel"],[1,"permissions-note"],["class","permissions-info",4,"ngIf"],[1,"permissions-info"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"a",4),l(11,"Staff Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15),a()()()(),o(16,"div",5)(17,"div",6)(18,"button",7),x("click",function(){return i.setTab("profile")}),l(19,"Profile"),a(),o(20,"button",7),x("click",function(){return i.setTab("permissions")}),l(21,"Permissions"),a()(),b(22,Qoe,50,11,"div",8)(23,Zoe,12,3,"div",8),o(24,"div",9)(25,"button",10),x("click",function(){return i.cancel()}),l(26,"Cancel"),a(),o(27,"button",11),x("click",function(){return i.saveStaff()}),b(28,eae,1,0,"i",12),l(29),a()()()()),e&2&&(c(4),_(i.editMode?"Edit Staff Member":"Add New Staff Member"),c(11),_(i.editMode?"Edit":"Add New"),c(3),ie("active",i.activeTab==="profile"),c(2),ie("active",i.activeTab==="permissions"),c(2),m("ngIf",i.activeTab==="profile"),c(),m("ngIf",i.activeTab==="permissions"),c(2),m("disabled",i.saving),c(2),m("disabled",i.saving),c(),m("ngIf",i.saving),c(),D(" ",i.saving?"Saving...":i.editMode?"Update Staff":"Save Staff"," "))},dependencies:[Se,be,je,We,Ie,Yt,Ue,Oe,Ee,ht],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:var(--text-secondary);font-size:.95rem;cursor:pointer;position:relative;font-weight:500}.tab.active[_ngcontent-%COMP%]{color:var(--text-primary)}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover:not(.active){color:var(--text-primary)}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:var(--primary-color)}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid var(--border-color);border-radius:8px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary);font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin-bottom:20px;padding:12px;background:var(--bg-color);border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border-color)}'],changeDetection:0})};function tae(n,t){if(n&1){let e=F();o(0,"button",10),x("click",function(){g(e);let r=p();return f(r.backToBranches())}),y(1,"i",11),l(2," Back to Companies "),a()}}function nae(n,t){n&1&&(on(0),l(1,"Company Management"),an())}function iae(n,t){if(n&1&&(on(0),l(1),an()),n&2){let e=p();c(),D("Company Users - ",e.selectedBranch==null?null:e.selectedBranch.name)}}function rae(n,t){if(n&1&&(on(0),l(1),an()),n&2){let e=p();c(),D("Company Settings - ",e.selectedBranch==null?null:e.selectedBranch.name)}}function oae(n,t){if(n&1){let e=F();o(0,"button",12),x("click",function(){g(e);let r=p();return f(r.openAddBranchModal())}),y(1,"i",13),l(2," Add Company "),a()}}function aae(n,t){if(n&1){let e=F();o(0,"button",12),x("click",function(){g(e);let r=p();return f(r.openAddUserModal())}),y(1,"i",14),l(2," Add User "),a()}}function sae(n,t){n&1&&(o(0,"div",19),y(1,"i",20),l(2," Loading companies... "),a())}function lae(n,t){if(n&1){let e=F();o(0,"div",21),y(1,"i",4),o(2,"h3"),l(3,"No Companies Found"),a(),o(4,"p"),l(5,"Create your first company to get started with multi-company management."),a(),o(6,"button",12),x("click",function(){g(e);let r=p(2);return f(r.openAddBranchModal())}),y(7,"i",13),l(8," Create Company "),a()()}}function cae(n,t){if(n&1&&y(0,"img",41),n&2){let e=p().$implicit;m("src",e.logoPath,Cr)("alt",e.name)}}function dae(n,t){n&1&&y(0,"i",42)}function pae(n,t){if(n&1&&(o(0,"p"),y(1,"i",43),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.address)}}function mae(n,t){if(n&1&&(o(0,"p"),y(1,"i",44),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.phone)}}function uae(n,t){if(n&1&&(o(0,"p"),y(1,"i",45),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.email)}}function gae(n,t){if(n&1){let e=F();o(0,"div",24)(1,"div",25)(2,"div",26),b(3,cae,1,2,"img",27)(4,dae,1,0,"i",28),a(),o(5,"div",29),l(6),a()(),o(7,"div",30)(8,"h3"),l(9),a(),o(10,"span",31),l(11),a(),o(12,"div",32),b(13,pae,3,1,"p",5)(14,mae,3,1,"p",5)(15,uae,3,1,"p",5),a()(),o(16,"div",33)(17,"button",34),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openSettings(r))}),y(18,"i",35),l(19," Settings "),a(),o(20,"button",36),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.selectBranch(r))}),y(21,"i",37),l(22," Users "),a(),o(23,"button",38),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openEditBranchModal(r))}),y(24,"i",39),a(),o(25,"button",40),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteBranch(r))}),y(26,"i"),a()()()}if(n&2){let e=t.$implicit,i=p(3);ie("inactive",!e.active),c(3),m("ngIf",e.logoPath),c(),m("ngIf",!e.logoPath),c(),ie("active",e.active)("inactive",!e.active),c(),D(" ",e.active?"Active":"Inactive"," "),c(3),_(e.name),c(2),_(e.code),c(2),m("ngIf",e.address),c(),m("ngIf",e.phone),c(),m("ngIf",e.email),c(10),m("disabled",i.deletingBranchId===e.id),c(),bi(i.deletingBranchId===e.id?"fas fa-spinner fa-spin":"fas fa-trash")}}function fae(n,t){if(n&1&&(o(0,"div",22),b(1,gae,27,17,"div",23),a()),n&2){let e=p(2);c(),m("ngForOf",e.branches)}}function hae(n,t){if(n&1&&(o(0,"div",15),b(1,sae,3,0,"div",16)(2,lae,9,0,"div",17)(3,fae,2,1,"div",18),a()),n&2){let e=p();c(),m("ngIf",e.isLoading),c(),m("ngIf",!e.isLoading&&e.branches.length===0),c(),m("ngIf",!e.isLoading&&e.branches.length>0)}}function _ae(n,t){n&1&&(o(0,"div",19),y(1,"i",20),l(2," Loading settings... "),a())}function vae(n,t){if(n&1){let e=F();o(0,"div",61)(1,"h3"),y(2,"i",4),l(3," Company Information"),a(),o(4,"div",62)(5,"div",63)(6,"label"),l(7,"Company Legal Name"),a(),o(8,"input",64),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.companyLegalName,r)||(s.branchSettings.companyLegalName=r),f(r)}),a()(),o(9,"div",63)(10,"label"),l(11,"Display Name"),a(),o(12,"input",65),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.displayName,r)||(s.branchSettings.displayName=r),f(r)}),a()()(),o(13,"div",62)(14,"div",63)(15,"label"),l(16,"Tax Registration Number"),a(),o(17,"input",66),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.taxRegistrationNumber,r)||(s.branchSettings.taxRegistrationNumber=r),f(r)}),a()(),o(18,"div",63)(19,"label"),l(20,"Business Registration Number"),a(),o(21,"input",67),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.businessRegistrationNumber,r)||(s.branchSettings.businessRegistrationNumber=r),f(r)}),a()()()()}if(n&2){let e=p(3);c(8),M("ngModel",e.branchSettings.companyLegalName),c(4),M("ngModel",e.branchSettings.displayName),c(5),M("ngModel",e.branchSettings.taxRegistrationNumber),c(4),M("ngModel",e.branchSettings.businessRegistrationNumber)}}function xae(n,t){if(n&1){let e=F();o(0,"div",61)(1,"h3"),y(2,"i",51),l(3," Regional Settings"),a(),o(4,"div",62)(5,"div",63)(6,"label"),l(7,"Currency Symbol"),a(),o(8,"input",68),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.currencySymbol,r)||(s.branchSettings.currencySymbol=r),f(r)}),a()(),o(9,"div",63)(10,"label"),l(11,"Currency Position"),a(),o(12,"select",69),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.currencyPosition,r)||(s.branchSettings.currencyPosition=r),f(r)}),o(13,"option",70),l(14,"Before amount ($100)"),a(),o(15,"option",71),l(16,"After amount (100$)"),a()()()(),o(17,"div",62)(18,"div",63)(19,"label"),l(20,"Time Format"),a(),o(21,"select",69),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.timeFormat,r)||(s.branchSettings.timeFormat=r),f(r)}),o(22,"option",72),l(23,"24-hour (14:30)"),a(),o(24,"option",73),l(25,"12-hour (2:30 PM)"),a()()(),o(26,"div",63)(27,"label"),l(28,"Number Format"),a(),o(29,"select",69),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.numberFormat,r)||(s.branchSettings.numberFormat=r),f(r)}),o(30,"option",74),l(31,"1,234.56"),a(),o(32,"option",75),l(33,"1.234,56"),a()()()(),o(34,"div",63)(35,"label"),l(36,"Fiscal Year Start Month"),a(),o(37,"select",69),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.fiscalYearStartMonth,r)||(s.branchSettings.fiscalYearStartMonth=r),f(r)}),o(38,"option",76),l(39,"January"),a(),o(40,"option",76),l(41,"February"),a(),o(42,"option",76),l(43,"March"),a(),o(44,"option",76),l(45,"April"),a(),o(46,"option",76),l(47,"May"),a(),o(48,"option",76),l(49,"June"),a(),o(50,"option",76),l(51,"July"),a(),o(52,"option",76),l(53,"August"),a(),o(54,"option",76),l(55,"September"),a(),o(56,"option",76),l(57,"October"),a(),o(58,"option",76),l(59,"November"),a(),o(60,"option",76),l(61,"December"),a()()()()}if(n&2){let e=p(3);c(8),M("ngModel",e.branchSettings.currencySymbol),c(4),M("ngModel",e.branchSettings.currencyPosition),c(9),M("ngModel",e.branchSettings.timeFormat),c(8),M("ngModel",e.branchSettings.numberFormat),c(8),M("ngModel",e.branchSettings.fiscalYearStartMonth),c(),m("value",1),c(2),m("value",2),c(2),m("value",3),c(2),m("value",4),c(2),m("value",5),c(2),m("value",6),c(2),m("value",7),c(2),m("value",8),c(2),m("value",9),c(2),m("value",10),c(2),m("value",11),c(2),m("value",12)}}function yae(n,t){if(n&1){let e=F();o(0,"div",61)(1,"h3"),y(2,"i",52),l(3," Tax & Finance Settings"),a(),o(4,"div",62)(5,"div",63)(6,"label"),l(7,"Default Tax Rate (%)"),a(),o(8,"input",77),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.defaultTaxRate,r)||(s.branchSettings.defaultTaxRate=r),f(r)}),a()(),o(9,"div",63)(10,"label"),l(11,"Tax Label"),a(),o(12,"input",78),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.taxLabel,r)||(s.branchSettings.taxLabel=r),f(r)}),a()()(),o(13,"div",62)(14,"div",63)(15,"label"),l(16,"Default Payment Terms"),a(),o(17,"select",69),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.defaultPaymentTerms,r)||(s.branchSettings.defaultPaymentTerms=r),f(r)}),o(18,"option",79),l(19,"Net 15"),a(),o(20,"option",80),l(21,"Net 30"),a(),o(22,"option",81),l(23,"Net 45"),a(),o(24,"option",82),l(25,"Net 60"),a(),o(26,"option",83),l(27,"Due on Receipt"),a()()(),o(28,"div",63)(29,"label"),l(30,"Invoice Due Days"),a(),o(31,"input",84),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.invoiceDueDays,r)||(s.branchSettings.invoiceDueDays=r),f(r)}),a()()(),o(32,"div",63)(33,"label"),l(34,"Invoice Footer Text"),a(),o(35,"textarea",85),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.invoiceFooter,r)||(s.branchSettings.invoiceFooter=r),f(r)}),a()(),o(36,"div",63)(37,"label"),l(38,"Invoice Terms & Conditions"),a(),o(39,"textarea",86),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.invoiceTerms,r)||(s.branchSettings.invoiceTerms=r),f(r)}),a()()()}if(n&2){let e=p(3);c(8),M("ngModel",e.branchSettings.defaultTaxRate),c(4),M("ngModel",e.branchSettings.taxLabel),c(5),M("ngModel",e.branchSettings.defaultPaymentTerms),c(14),M("ngModel",e.branchSettings.invoiceDueDays),c(4),M("ngModel",e.branchSettings.invoiceFooter),c(4),M("ngModel",e.branchSettings.invoiceTerms)}}function Cae(n,t){if(n&1){let e=F();o(0,"div",61)(1,"h3"),y(2,"i",53),l(3," Document Numbering"),a(),o(4,"p",87),l(5,"Configure prefixes and starting numbers for auto-generated document IDs."),a(),o(6,"div",88)(7,"div",89)(8,"label"),l(9,"Invoice Prefix"),a(),o(10,"div",90)(11,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.invoicePrefix,r)||(s.branchSettings.invoicePrefix=r),f(r)}),a(),o(12,"span",92),l(13),a()()(),o(14,"div",89)(15,"label"),l(16,"Purchase Order Prefix"),a(),o(17,"div",90)(18,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.purchaseOrderPrefix,r)||(s.branchSettings.purchaseOrderPrefix=r),f(r)}),a(),o(19,"span",92),l(20),a()()(),o(21,"div",89)(22,"label"),l(23,"Quotation Prefix"),a(),o(24,"div",90)(25,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.quotationPrefix,r)||(s.branchSettings.quotationPrefix=r),f(r)}),a(),o(26,"span",92),l(27),a()()(),o(28,"div",89)(29,"label"),l(30,"Receipt Prefix"),a(),o(31,"div",90)(32,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.receiptPrefix,r)||(s.branchSettings.receiptPrefix=r),f(r)}),a(),o(33,"span",92),l(34),a()()(),o(35,"div",89)(36,"label"),l(37,"Payroll Prefix"),a(),o(38,"div",90)(39,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.payrollPrefix,r)||(s.branchSettings.payrollPrefix=r),f(r)}),a(),o(40,"span",92),l(41),a()()(),o(42,"div",89)(43,"label"),l(44,"Employee ID Prefix"),a(),o(45,"div",90)(46,"input",91),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.employeeIdPrefix,r)||(s.branchSettings.employeeIdPrefix=r),f(r)}),a(),o(47,"span",92),l(48),a()()()(),o(49,"div",93)(50,"label",94)(51,"input",95),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.autoGenerateEmployeeId,r)||(s.branchSettings.autoGenerateEmployeeId=r),f(r)}),a(),o(52,"span"),l(53,"Auto-generate Employee IDs"),a()()()()}if(n&2){let e=p(3);c(11),M("ngModel",e.branchSettings.invoicePrefix),c(2),Ge("Next: ",e.branchSettings.invoicePrefix,"-",e.branchSettings.invoiceNextNumber),c(5),M("ngModel",e.branchSettings.purchaseOrderPrefix),c(2),Ge("Next: ",e.branchSettings.purchaseOrderPrefix,"-",e.branchSettings.purchaseOrderNextNumber),c(5),M("ngModel",e.branchSettings.quotationPrefix),c(2),Ge("Next: ",e.branchSettings.quotationPrefix,"-",e.branchSettings.quotationNextNumber),c(5),M("ngModel",e.branchSettings.receiptPrefix),c(2),Ge("Next: ",e.branchSettings.receiptPrefix,"-",e.branchSettings.receiptNextNumber),c(5),M("ngModel",e.branchSettings.payrollPrefix),c(2),Ge("Next: ",e.branchSettings.payrollPrefix,"-",e.branchSettings.payrollNextNumber),c(5),M("ngModel",e.branchSettings.employeeIdPrefix),c(2),Ge("Next: ",e.branchSettings.employeeIdPrefix,"-",e.branchSettings.employeeIdNextNumber),c(3),M("ngModel",e.branchSettings.autoGenerateEmployeeId)}}function bae(n,t){if(n&1&&y(0,"img",112),n&2){let e=p(4);m("src",e.selectedBranch==null?null:e.selectedBranch.logoPath,Cr)}}function Mae(n,t){n&1&&(o(0,"div",113),y(1,"i",4),o(2,"span"),l(3,"No logo uploaded"),a()())}function Sae(n,t){if(n&1&&y(0,"img",114),n&2){let e=p(4);m("src",e.branchSettings.signaturePath,Cr)}}function Pae(n,t){n&1&&(o(0,"div",113),y(1,"i",115),o(2,"span"),l(3,"No signature uploaded"),a()())}function wae(n,t){if(n&1){let e=F();o(0,"div",61)(1,"h3"),y(2,"i",54),l(3," Branding & Appearance"),a(),o(4,"div",96)(5,"div",97)(6,"label"),l(7,"Company Logo"),a(),o(8,"div",98),b(9,bae,1,1,"img",99)(10,Mae,4,0,"div",100),a(),o(11,"input",101),x("change",function(r){g(e);let s=p(3);return f(s.onLogoChange(r))}),a(),o(12,"label",102),y(13,"i",103),l(14," Upload Logo "),a()(),o(15,"div",97)(16,"label"),l(17,"Authorized Signature"),a(),o(18,"div",104),b(19,Sae,1,1,"img",105)(20,Pae,4,0,"div",100),a(),o(21,"input",106),x("change",function(r){g(e);let s=p(3);return f(s.onSignatureChange(r))}),a(),o(22,"label",107),y(23,"i",103),l(24," Upload Signature "),a()()(),o(25,"div",108)(26,"div",63)(27,"label"),l(28,"Primary Color"),a(),o(29,"div",109)(30,"input",110),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.primaryColor,r)||(s.branchSettings.primaryColor=r),f(r)}),a(),o(31,"input",111),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.primaryColor,r)||(s.branchSettings.primaryColor=r),f(r)}),a()()(),o(32,"div",63)(33,"label"),l(34,"Secondary Color"),a(),o(35,"div",109)(36,"input",110),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.secondaryColor,r)||(s.branchSettings.secondaryColor=r),f(r)}),a(),o(37,"input",111),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.secondaryColor,r)||(s.branchSettings.secondaryColor=r),f(r)}),a()()()(),o(38,"div",62)(39,"div",63)(40,"label",94)(41,"input",95),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.showLogoOnInvoices,r)||(s.branchSettings.showLogoOnInvoices=r),f(r)}),a(),o(42,"span"),l(43,"Show logo on invoices"),a()()(),o(44,"div",63)(45,"label",94)(46,"input",95),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.branchSettings.showLogoOnReports,r)||(s.branchSettings.showLogoOnReports=r),f(r)}),a(),o(47,"span"),l(48,"Show logo on reports"),a()()()()()}if(n&2){let e=p(3);c(9),m("ngIf",e.selectedBranch==null?null:e.selectedBranch.logoPath),c(),m("ngIf",!(e.selectedBranch!=null&&e.selectedBranch.logoPath)),c(9),m("ngIf",e.branchSettings.signaturePath),c(),m("ngIf",!e.branchSettings.signaturePath),c(10),M("ngModel",e.branchSettings.primaryColor),c(),M("ngModel",e.branchSettings.primaryColor),c(5),M("ngModel",e.branchSettings.secondaryColor),c(),M("ngModel",e.branchSettings.secondaryColor),c(4),M("ngModel",e.branchSettings.showLogoOnInvoices),c(5),M("ngModel",e.branchSettings.showLogoOnReports)}}function Eae(n,t){n&1&&y(0,"i",20)}function Oae(n,t){n&1&&y(0,"i",116)}function Tae(n,t){if(n&1){let e=F();o(0,"div",47)(1,"div",48)(2,"button",49),x("click",function(){g(e);let r=p(2);return f(r.settingsTab="general")}),y(3,"i",50),l(4," General "),a(),o(5,"button",49),x("click",function(){g(e);let r=p(2);return f(r.settingsTab="localization")}),y(6,"i",51),l(7," Localization "),a(),o(8,"button",49),x("click",function(){g(e);let r=p(2);return f(r.settingsTab="tax")}),y(9,"i",52),l(10," Tax & Finance "),a(),o(11,"button",49),x("click",function(){g(e);let r=p(2);return f(r.settingsTab="documents")}),y(12,"i",53),l(13," Document Prefixes "),a(),o(14,"button",49),x("click",function(){g(e);let r=p(2);return f(r.settingsTab="branding")}),y(15,"i",54),l(16," Branding "),a()(),o(17,"div",55),b(18,vae,22,4,"div",56)(19,xae,62,17,"div",56)(20,yae,40,6,"div",56)(21,Cae,54,19,"div",56)(22,wae,49,10,"div",56),o(23,"div",57)(24,"button",58),x("click",function(){g(e);let r=p(2);return f(r.saveBranchSettings())}),b(25,Eae,1,0,"i",59)(26,Oae,1,0,"i",60),l(27," Save Settings "),a()()()()}if(n&2){let e=p(2);c(2),ie("active",e.settingsTab==="general"),c(3),ie("active",e.settingsTab==="localization"),c(3),ie("active",e.settingsTab==="tax"),c(3),ie("active",e.settingsTab==="documents"),c(3),ie("active",e.settingsTab==="branding"),c(4),m("ngIf",e.settingsTab==="general"),c(),m("ngIf",e.settingsTab==="localization"),c(),m("ngIf",e.settingsTab==="tax"),c(),m("ngIf",e.settingsTab==="documents"),c(),m("ngIf",e.settingsTab==="branding"),c(2),m("disabled",e.isSavingSettings),c(),m("ngIf",e.isSavingSettings),c(),m("ngIf",!e.isSavingSettings)}}function kae(n,t){if(n&1&&(o(0,"div",15),b(1,_ae,3,0,"div",16)(2,Tae,28,18,"div",46),a()),n&2){let e=p();c(),m("ngIf",e.isLoading),c(),m("ngIf",!e.isLoading&&e.branchSettings)}}function Iae(n,t){n&1&&(o(0,"div",19),y(1,"i",20),l(2," Loading users... "),a())}function Dae(n,t){if(n&1){let e=F();o(0,"div",21),y(1,"i",37),o(2,"h3"),l(3,"No Users in This Company"),a(),o(4,"p"),l(5,"Add users to allow them to access this company's data."),a(),o(6,"button",12),x("click",function(){g(e);let r=p(2);return f(r.openAddUserModal())}),y(7,"i",14),l(8," Add User "),a()()}}function Aae(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",120)(3,"div",121),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",122),l(13),a()(),o(14,"td")(15,"span",123),l(16),a()(),o(17,"td",124)(18,"button",125),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openEditUserModal(r))}),y(19,"i",39),a(),o(20,"button",126),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openPasswordModal(r))}),y(21,"i",127),a(),o(22,"button",128),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteUser(r))}),y(23,"i"),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(4),_((e.firstName==null?null:e.firstName.charAt(0))||"?"),c(2),Ge("",e.firstName," ",e.lastName),c(2),_(e.username),c(2),_(e.email),c(3),_((e.role==null?null:e.role.name)||"N/A"),c(2),ie("active",e.active)("inactive",!e.active),c(),D(" ",e.active?"Active":"Inactive"," "),c(6),m("disabled",i.deletingUserId===e.id),c(),bi(i.deletingUserId===e.id?"fas fa-spinner fa-spin":"fas fa-trash")}}function Rae(n,t){if(n&1&&(o(0,"div",118)(1,"table")(2,"thead")(3,"tr")(4,"th"),l(5,"User"),a(),o(6,"th"),l(7,"Username"),a(),o(8,"th"),l(9,"Email"),a(),o(10,"th"),l(11,"Role"),a(),o(12,"th"),l(13,"Status"),a(),o(14,"th"),l(15,"Actions"),a()()(),o(16,"tbody"),b(17,Aae,24,14,"tr",119),a()()()),n&2){let e=p(2);c(17),m("ngForOf",e.branchUsers)}}function Fae(n,t){if(n&1&&(o(0,"div",15),b(1,Iae,3,0,"div",16)(2,Dae,9,0,"div",17)(3,Rae,18,1,"div",117),a()),n&2){let e=p();c(),m("ngIf",e.isLoading),c(),m("ngIf",!e.isLoading&&e.branchUsers.length===0),c(),m("ngIf",!e.isLoading&&e.branchUsers.length>0)}}function Nae(n,t){if(n&1&&y(0,"img",112),n&2){let e=p(2);m("src",e.logoPreview,Cr)}}function Lae(n,t){n&1&&y(0,"i",4)}function Vae(n,t){if(n&1){let e=F();o(0,"div",135)(1,"h3"),y(2,"i",176),l(3," Default Admin User"),a(),o(4,"p",177),l(5,"Create an admin user who can manage this company. Leave blank to skip."),a(),o(6,"div",62)(7,"div",63)(8,"label"),l(9,"Admin Username"),a(),o(10,"input",178),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.branchForm.adminUsername,r)||(s.branchForm.adminUsername=r),f(r)}),a()(),o(11,"div",63)(12,"label"),l(13,"Admin Password"),a(),o(14,"input",179),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.branchForm.adminPassword,r)||(s.branchForm.adminPassword=r),f(r)}),a()()(),o(15,"div",62)(16,"div",63)(17,"label"),l(18,"Admin Email"),a(),o(19,"input",180),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.branchForm.adminEmail,r)||(s.branchForm.adminEmail=r),f(r)}),a()(),o(20,"div",63)(21,"label"),l(22,"Admin Name"),a(),o(23,"div",181)(24,"input",182),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.branchForm.adminFirstName,r)||(s.branchForm.adminFirstName=r),f(r)}),a(),o(25,"input",183),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.branchForm.adminLastName,r)||(s.branchForm.adminLastName=r),f(r)}),a()()()()()}if(n&2){let e=p(2);c(10),M("ngModel",e.branchForm.adminUsername),c(4),M("ngModel",e.branchForm.adminPassword),c(5),M("ngModel",e.branchForm.adminEmail),c(5),M("ngModel",e.branchForm.adminFirstName),c(),M("ngModel",e.branchForm.adminLastName)}}function Bae(n,t){n&1&&y(0,"i",20)}function Uae(n,t){if(n&1){let e=F();o(0,"div",129)(1,"div",130),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h2"),l(4),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeBranchModal())}),y(6,"i",133),a()(),o(7,"div",134)(8,"div",135)(9,"h3"),y(10,"i",136),l(11," Company Logo"),a(),o(12,"div",137)(13,"div",138),b(14,Nae,1,1,"img",99)(15,Lae,1,0,"i",139),a(),o(16,"div",140)(17,"input",141),x("change",function(r){g(e);let s=p();return f(s.onBranchLogoChange(r))}),a(),o(18,"label",142),y(19,"i",103),l(20),a(),o(21,"small",143),l(22,"Recommended: 200x200px, PNG or JPG, max 5MB"),a()()()(),o(23,"div",135)(24,"h3"),y(25,"i",4),l(26," Company Details"),a(),o(27,"div",62)(28,"div",63)(29,"label"),l(30,"Company Code *"),a(),o(31,"input",144),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.code,r)||(s.branchForm.code=r),f(r)}),a()(),o(32,"div",63)(33,"label"),l(34,"Company Name *"),a(),o(35,"input",145),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.name,r)||(s.branchForm.name=r),f(r)}),a()()(),o(36,"div",63)(37,"label"),l(38,"URL Slug"),a(),o(39,"div",146)(40,"input",147),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.slug,r)||(s.branchForm.slug=r),f(r)}),a(),o(41,"small",143),l(42,"Used for unique company URL. Use lowercase letters, numbers, and hyphens only."),a()()(),o(43,"div",62)(44,"div",63)(45,"label"),l(46,"Primary Color"),a(),o(47,"div",148)(48,"input",149),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.primaryColor,r)||(s.branchForm.primaryColor=r),f(r)}),a(),o(49,"input",150),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.primaryColor,r)||(s.branchForm.primaryColor=r),f(r)}),a()()(),o(50,"div",63)(51,"label"),l(52,"Secondary Color"),a(),o(53,"div",148)(54,"input",149),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.secondaryColor,r)||(s.branchForm.secondaryColor=r),f(r)}),a(),o(55,"input",151),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.secondaryColor,r)||(s.branchForm.secondaryColor=r),f(r)}),a()()()()(),b(56,Vae,26,5,"div",152),o(57,"div",153)(58,"h3"),y(59,"i",43),l(60," Address & Contact"),a(),o(61,"div",63)(62,"label"),l(63,"Address"),a(),o(64,"input",154),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.address,r)||(s.branchForm.address=r),f(r)}),a()(),o(65,"div",62)(66,"div",63)(67,"label"),l(68,"City"),a(),o(69,"input",155),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.city,r)||(s.branchForm.city=r),f(r)}),a()(),o(70,"div",63)(71,"label"),l(72,"State"),a(),o(73,"input",156),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.state,r)||(s.branchForm.state=r),f(r)}),a()()(),o(74,"div",62)(75,"div",63)(76,"label"),l(77,"Country"),a(),o(78,"input",157),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.country,r)||(s.branchForm.country=r),f(r)}),a()(),o(79,"div",63)(80,"label"),l(81,"Zip Code"),a(),o(82,"input",158),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.zipCode,r)||(s.branchForm.zipCode=r),f(r)}),a()()(),o(83,"div",62)(84,"div",63)(85,"label"),l(86,"Phone"),a(),o(87,"input",159),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.phone,r)||(s.branchForm.phone=r),f(r)}),a()(),o(88,"div",63)(89,"label"),l(90,"Email"),a(),o(91,"input",160),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.email,r)||(s.branchForm.email=r),f(r)}),a()()(),o(92,"div",62)(93,"div",63)(94,"label"),l(95,"Currency"),a(),o(96,"select",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.currency,r)||(s.branchForm.currency=r),f(r)}),o(97,"option",161),l(98,"USD - US Dollar"),a(),o(99,"option",162),l(100,"EUR - Euro"),a(),o(101,"option",163),l(102,"GBP - British Pound"),a(),o(103,"option",164),l(104,"JPY - Japanese Yen"),a(),o(105,"option",165),l(106,"CNY - Chinese Yuan"),a()()(),o(107,"div",63)(108,"label"),l(109,"Timezone"),a(),o(110,"select",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.timezone,r)||(s.branchForm.timezone=r),f(r)}),o(111,"option",166),l(112,"UTC"),a(),o(113,"option",167),l(114,"Eastern Time (ET)"),a(),o(115,"option",168),l(116,"Central Time (CT)"),a(),o(117,"option",169),l(118,"Mountain Time (MT)"),a(),o(119,"option",170),l(120,"Pacific Time (PT)"),a(),o(121,"option",171),l(122,"London (GMT)"),a(),o(123,"option",172),l(124,"Tokyo (JST)"),a(),o(125,"option",173),l(126,"Shanghai (CST)"),a()()()(),o(127,"div",63)(128,"label",94)(129,"input",95),S("ngModelChange",function(r){g(e);let s=p();return P(s.branchForm.active,r)||(s.branchForm.active=r),f(r)}),a(),o(130,"span"),l(131,"Active"),a()()()()(),o(132,"div",174)(133,"button",175),x("click",function(){g(e);let r=p();return f(r.closeBranchModal())}),l(134,"Cancel"),a(),o(135,"button",58),x("click",function(){g(e);let r=p();return f(r.saveBranch())}),b(136,Bae,1,0,"i",59),l(137),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit Company":"Add New Company"),c(10),m("ngIf",e.logoPreview),c(),m("ngIf",!e.logoPreview),c(5),D(" ",e.logoPreview?"Change Logo":"Upload Logo"," "),c(11),M("ngModel",e.branchForm.code),m("disabled",e.editMode),c(4),M("ngModel",e.branchForm.name),c(5),M("ngModel",e.branchForm.slug),c(8),M("ngModel",e.branchForm.primaryColor),c(),M("ngModel",e.branchForm.primaryColor),c(5),M("ngModel",e.branchForm.secondaryColor),c(),M("ngModel",e.branchForm.secondaryColor),c(),m("ngIf",!e.editMode),c(8),M("ngModel",e.branchForm.address),c(5),M("ngModel",e.branchForm.city),c(4),M("ngModel",e.branchForm.state),c(5),M("ngModel",e.branchForm.country),c(4),M("ngModel",e.branchForm.zipCode),c(5),M("ngModel",e.branchForm.phone),c(4),M("ngModel",e.branchForm.email),c(5),M("ngModel",e.branchForm.currency),c(14),M("ngModel",e.branchForm.timezone),c(19),M("ngModel",e.branchForm.active),c(6),m("disabled",e.savingBranch),c(),m("ngIf",e.savingBranch),c(),D(" ",e.editMode?"Update Company":"Create Company"," ")}}function jae(n,t){if(n&1){let e=F();o(0,"div",63)(1,"label"),l(2,"Password *"),a(),o(3,"input",191),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.userForm.password,r)||(s.userForm.password=r),f(r)}),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.userForm.password)}}function Wae(n,t){if(n&1&&(o(0,"option",189),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function zae(n,t){n&1&&y(0,"i",20)}function qae(n,t){if(n&1){let e=F();o(0,"div",129)(1,"div",184),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h2"),l(4),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeUserModal())}),y(6,"i",133),a()(),o(7,"div",134)(8,"div",62)(9,"div",63)(10,"label"),l(11,"First Name *"),a(),o(12,"input",185),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.firstName,r)||(s.userForm.firstName=r),f(r)}),a()(),o(13,"div",63)(14,"label"),l(15,"Last Name *"),a(),o(16,"input",186),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.lastName,r)||(s.userForm.lastName=r),f(r)}),a()()(),o(17,"div",62)(18,"div",63)(19,"label"),l(20,"Username *"),a(),o(21,"input",187),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.username,r)||(s.userForm.username=r),f(r)}),a()(),o(22,"div",63)(23,"label"),l(24,"Email *"),a(),o(25,"input",160),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.email,r)||(s.userForm.email=r),f(r)}),a()()(),b(26,jae,4,1,"div",188),o(27,"div",62)(28,"div",63)(29,"label"),l(30,"Phone"),a(),o(31,"input",159),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.phone,r)||(s.userForm.phone=r),f(r)}),a()(),o(32,"div",63)(33,"label"),l(34,"Role"),a(),o(35,"select",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.userForm.roleId,r)||(s.userForm.roleId=r),f(r)}),o(36,"option",189),l(37,"Select a role"),a(),b(38,Wae,2,2,"option",190),a()()()(),o(39,"div",174)(40,"button",175),x("click",function(){g(e);let r=p();return f(r.closeUserModal())}),l(41,"Cancel"),a(),o(42,"button",58),x("click",function(){g(e);let r=p();return f(r.saveUser())}),b(43,zae,1,0,"i",59),l(44),a()()()()}if(n&2){let e=p();c(4),_(e.editMode?"Edit User":"Add New User"),c(8),M("ngModel",e.userForm.firstName),c(4),M("ngModel",e.userForm.lastName),c(5),M("ngModel",e.userForm.username),m("disabled",e.editMode),c(4),M("ngModel",e.userForm.email),c(),m("ngIf",!e.editMode),c(5),M("ngModel",e.userForm.phone),c(4),M("ngModel",e.userForm.roleId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.roles),c(4),m("disabled",e.savingUser),c(),m("ngIf",e.savingUser),c(),D(" ",e.editMode?"Update User":"Create User"," ")}}function Hae(n,t){if(n&1){let e=F();o(0,"div",129)(1,"div",192),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h2"),l(4,"Reset Password"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closePasswordModal())}),y(6,"i",133),a()(),o(7,"div",134)(8,"div",63)(9,"label"),l(10,"New Password *"),a(),o(11,"input",193),S("ngModelChange",function(r){g(e);let s=p();return P(s.newPassword,r)||(s.newPassword=r),f(r)}),a()()(),o(12,"div",174)(13,"button",175),x("click",function(){g(e);let r=p();return f(r.closePasswordModal())}),l(14,"Cancel"),a(),o(15,"button",12),x("click",function(){g(e);let r=p();return f(r.resetPassword())}),l(16,"Reset Password"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newPassword)}}var zC=class n{constructor(t,e,i,r){this.branchService=t;this.authService=e;this.notificationService=i;this.cdr=r}branches=[];selectedBranch=null;branchUsers=[];roles=[];branchSettings=null;isLoading=!1;isSavingSettings=!1;showBranchModal=!1;showUserModal=!1;showPasswordModal=!1;editMode=!1;settingsTab="general";branchForm={};logoFile=null;logoPreview=null;userForm={username:"",email:"",password:"",firstName:"",lastName:"",phone:"",roleId:void 0};editingUserId=null;passwordResetUserId=null;newPassword="";savingBranch=!1;savingUser=!1;deletingBranchId=null;deletingUserId=null;activeTab="branches";ngOnInit(){if(!this.authService.isSuperAdmin()){this.notificationService.error("Access denied. Super admin privileges required.");return}this.loadBranches(),this.loadRoles()}loadBranches(){this.isLoading=!0,this.cdr.markForCheck(),this.branchService.getAllBranches().subscribe({next:t=>{this.branches=t,this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load branches"),this.isLoading=!1,this.cdr.markForCheck()}})}loadRoles(){this.roles=[{id:2,name:"ADMIN"},{id:3,name:"MANAGER"},{id:4,name:"STAFF"},{id:5,name:"VIEWER"}]}selectBranch(t){this.selectedBranch=t,this.activeTab="users",this.loadBranchUsers(t.id)}loadBranchUsers(t){this.isLoading=!0,this.cdr.markForCheck(),this.branchService.getBranchUsers(t).subscribe({next:e=>{this.branchUsers=e,this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load branch users"),this.isLoading=!1,this.cdr.markForCheck()}})}openAddBranchModal(){this.editMode=!1,this.logoFile=null,this.logoPreview=null,this.branchForm={code:"",slug:"",name:"",address:"",city:"",state:"",country:"",zipCode:"",phone:"",email:"",website:"",currency:"USD",timezone:"UTC",primaryColor:"#0d7377",secondaryColor:"#14919b",active:!0,adminUsername:"",adminPassword:"",adminEmail:"",adminFirstName:"",adminLastName:""},this.showBranchModal=!0,this.cdr.markForCheck()}openEditBranchModal(t){this.editMode=!0,this.logoFile=null,this.logoPreview=t.logoPath||null,this.branchForm=me({},t),this.showBranchModal=!0,this.cdr.markForCheck()}closeBranchModal(){this.showBranchModal=!1,this.branchForm={},this.logoFile=null,this.logoPreview=null,this.cdr.markForCheck()}onBranchLogoChange(t){let e=t.target;if(!e.files?.length)return;let i=e.files[0];if(!i.type.startsWith("image/")){this.notificationService.error("Please select an image file");return}if(i.size>5*1024*1024){this.notificationService.error("File size must be less than 5MB");return}this.logoFile=i;let r=new FileReader;r.onload=()=>{this.logoPreview=r.result,this.cdr.markForCheck()},r.readAsDataURL(i)}saveBranch(){if(!this.branchForm.code||!this.branchForm.name){this.notificationService.error("Company code and name are required");return}if(!this.editMode&&this.branchForm.adminUsername&&!this.branchForm.adminPassword){this.notificationService.error("Please provide a password for the admin user");return}this.savingBranch=!0,this.cdr.markForCheck(),this.logoPreview&&this.logoPreview.startsWith("data:image")&&(this.branchForm.logoPath=this.logoPreview),this.editMode&&this.branchForm.id?this.branchService.updateBranch(this.branchForm.id,this.branchForm).subscribe({next:()=>{this.notificationService.success("Company updated successfully"),this.closeBranchModal(),this.loadBranches(),this.savingBranch=!1,this.cdr.markForCheck()},error:t=>{this.notificationService.error(t.error?.error||"Failed to update company"),this.savingBranch=!1,this.cdr.markForCheck()}}):this.branchService.createBranch(this.branchForm).subscribe({next:t=>{t.adminUser?this.notificationService.success("Company and admin user created successfully"):t.warning?this.notificationService.warning(t.warning):this.notificationService.success("Company created successfully"),this.closeBranchModal(),this.loadBranches(),this.savingBranch=!1,this.cdr.markForCheck()},error:t=>{this.notificationService.error(t.error?.error||"Failed to create company"),this.savingBranch=!1,this.cdr.markForCheck()}})}deleteBranch(t){confirm(`Are you sure you want to delete company "${t.name}"? This action cannot be undone.`)&&(this.deletingBranchId=t.id,this.cdr.markForCheck(),this.branchService.deleteBranch(t.id).subscribe({next:()=>{this.notificationService.success("Company deleted successfully"),this.branches=this.branches.filter(e=>e.id!==t.id),this.selectedBranch?.id===t.id&&(this.selectedBranch=null,this.branchUsers=[]),this.deletingBranchId=null,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to delete company. Make sure no users are assigned."),this.deletingBranchId=null,this.cdr.markForCheck()}}))}openAddUserModal(){this.selectedBranch&&(this.editMode=!1,this.editingUserId=null,this.userForm={username:"",email:"",password:"",firstName:"",lastName:"",phone:"",roleId:void 0},this.showUserModal=!0,this.cdr.markForCheck())}openEditUserModal(t){this.editMode=!0,this.editingUserId=t.id,this.userForm={username:t.username,email:t.email,password:"",firstName:t.firstName,lastName:t.lastName,phone:t.phone||"",roleId:t.role?.id},this.cdr.markForCheck(),this.showUserModal=!0}closeUserModal(){this.showUserModal=!1,this.editingUserId=null,this.userForm={username:"",email:"",password:"",firstName:"",lastName:"",phone:"",roleId:void 0},this.cdr.markForCheck()}saveUser(){if(this.selectedBranch){if(!this.userForm.username||!this.userForm.email||!this.userForm.firstName||!this.userForm.lastName){this.notificationService.error("Please fill all required fields");return}if(!this.editMode&&!this.userForm.password){this.notificationService.error("Password is required for new users");return}this.savingUser=!0,this.cdr.markForCheck(),this.editMode&&this.editingUserId?this.branchService.updateBranchUser(this.selectedBranch.id,this.editingUserId,{firstName:this.userForm.firstName,lastName:this.userForm.lastName,email:this.userForm.email,phone:this.userForm.phone,role:this.userForm.roleId?{id:this.userForm.roleId,name:""}:void 0,active:!0}).subscribe({next:()=>{this.notificationService.success("User updated successfully"),this.closeUserModal(),this.loadBranchUsers(this.selectedBranch.id),this.savingUser=!1,this.cdr.markForCheck()},error:t=>{this.notificationService.error(t.error?.error||"Failed to update user"),this.savingUser=!1,this.cdr.markForCheck()}}):this.branchService.createBranchUser(this.selectedBranch.id,this.userForm).subscribe({next:()=>{this.notificationService.success("User created successfully"),this.closeUserModal(),this.loadBranchUsers(this.selectedBranch.id),this.savingUser=!1,this.cdr.markForCheck()},error:t=>{this.notificationService.error(t.error?.error||"Failed to create user"),this.savingUser=!1,this.cdr.markForCheck()}})}}deleteUser(t){this.selectedBranch&&confirm(`Are you sure you want to delete user "${t.username}"?`)&&(this.deletingUserId=t.id,this.cdr.markForCheck(),this.branchService.deleteBranchUser(this.selectedBranch.id,t.id).subscribe({next:()=>{this.notificationService.success("User deleted successfully"),this.branchUsers=this.branchUsers.filter(e=>e.id!==t.id),this.deletingUserId=null,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to delete user"),this.deletingUserId=null,this.cdr.markForCheck()}}))}openPasswordModal(t){this.passwordResetUserId=t.id,this.newPassword="",this.showPasswordModal=!0,this.cdr.markForCheck()}closePasswordModal(){this.showPasswordModal=!1,this.passwordResetUserId=null,this.newPassword="",this.cdr.markForCheck()}resetPassword(){if(!(!this.selectedBranch||!this.passwordResetUserId)){if(!this.newPassword||this.newPassword.length<6){this.notificationService.error("Password must be at least 6 characters");return}this.branchService.resetBranchUserPassword(this.selectedBranch.id,this.passwordResetUserId,this.newPassword).subscribe({next:()=>{this.notificationService.success("Password reset successfully"),this.closePasswordModal(),this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to reset password"),this.cdr.markForCheck()}})}}backToBranches(){this.activeTab="branches",this.selectedBranch=null,this.branchUsers=[],this.branchSettings=null,this.cdr.markForCheck()}openSettings(t){this.selectedBranch=t,this.activeTab="settings",this.settingsTab="general",this.loadBranchSettings(t.id),this.cdr.markForCheck()}loadBranchSettings(t){this.isLoading=!0,this.cdr.markForCheck(),this.branchService.getBranchSettings(t).subscribe({next:e=>{this.branchSettings=e,this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to load branch settings"),this.isLoading=!1,this.cdr.markForCheck()}})}saveBranchSettings(){!this.selectedBranch||!this.branchSettings||(this.isSavingSettings=!0,this.cdr.markForCheck(),this.branchService.updateBranchSettings(this.selectedBranch.id,this.branchSettings).subscribe({next:t=>{this.branchSettings=t,this.notificationService.success("Settings saved successfully"),this.isSavingSettings=!1,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to save settings"),this.isSavingSettings=!1,this.cdr.markForCheck()}}))}onLogoChange(t){let e=t.target;if(!e.files?.length||!this.selectedBranch)return;let i=e.files[0];if(!i.type.startsWith("image/")){this.notificationService.error("Please select an image file");return}if(i.size>5*1024*1024){this.notificationService.error("File size must be less than 5MB");return}this.isLoading=!0,this.cdr.markForCheck(),this.branchService.uploadBranchLogo(this.selectedBranch.id,i).subscribe({next:r=>{this.selectedBranch&&(this.selectedBranch.logoPath=r.logoPath),this.notificationService.success("Logo uploaded successfully"),this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.notificationService.error("Failed to upload logo"),this.isLoading=!1,this.cdr.markForCheck()}})}onSignatureChange(t){let e=t.target;if(!e.files?.length||!this.selectedBranch)return;let i=e.files[0];if(!i.type.startsWith("image/")){this.notificationService.error("Please select an image file");return}this.isLoading=!0,this.branchService.uploadBranchSignature(this.selectedBranch.id,i).subscribe({next:r=>{this.branchSettings&&(this.branchSettings.signaturePath=r.signaturePath),this.notificationService.success("Signature uploaded successfully"),this.isLoading=!1},error:()=>{this.notificationService.error("Failed to upload signature"),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||n)(V(Ar),V(Ui),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-branch-management"]],standalone:!1,decls:18,vars:12,consts:[[1,"branch-management"],[1,"page-header"],[1,"header-left"],["class","btn-back",3,"click",4,"ngIf"],[1,"fas","fa-building"],[4,"ngIf"],[1,"header-actions"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","content-area",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"fas","fa-user-plus"],[1,"content-area"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","branches-grid",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"empty-state"],[1,"branches-grid"],["class","branch-card",3,"inactive",4,"ngFor","ngForOf"],[1,"branch-card"],[1,"branch-header"],[1,"branch-logo"],[3,"src","alt",4,"ngIf"],["class","fas fa-store",4,"ngIf"],[1,"branch-status"],[1,"branch-body"],[1,"branch-code"],[1,"branch-details"],[1,"branch-actions"],["title","Company Settings",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-cog"],["title","Manage Users",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-users"],["title","Edit Company",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete Company",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[3,"src","alt"],[1,"fas","fa-store"],[1,"fas","fa-map-marker-alt"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],["class","settings-container",4,"ngIf"],[1,"settings-container"],[1,"settings-tabs"],[3,"click"],[1,"fas","fa-info-circle"],[1,"fas","fa-globe"],[1,"fas","fa-percent"],[1,"fas","fa-file-alt"],[1,"fas","fa-palette"],[1,"settings-content"],["class","settings-panel",4,"ngIf"],[1,"settings-actions"],[1,"btn","btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],["class","fas fa-save",4,"ngIf"],[1,"settings-panel"],[1,"form-row"],[1,"form-group"],["type","text","placeholder","Legal company name for invoices",3,"ngModelChange","ngModel"],["type","text","placeholder","Display name",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., EIN, VAT Number",3,"ngModelChange","ngModel"],["type","text","placeholder","Business license number",3,"ngModelChange","ngModel"],["type","text","placeholder","$",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","before"],["value","after"],["value","HH:mm"],["value","hh:mm a"],["value","#,##0.00"],["value","#.##0,00"],[3,"value"],["type","number","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Tax, VAT, GST",3,"ngModelChange","ngModel"],["value","Net 15"],["value","Net 30"],["value","Net 45"],["value","Net 60"],["value","Due on Receipt"],["type","number","min","0",3,"ngModelChange","ngModel"],["rows","3","placeholder","Thank you for your business!",3,"ngModelChange","ngModel"],["rows","4","placeholder","Payment terms and conditions...",3,"ngModelChange","ngModel"],[1,"settings-hint"],[1,"prefix-grid"],[1,"prefix-item"],[1,"prefix-input"],["type","text",3,"ngModelChange","ngModel"],[1,"next-number"],[1,"form-group","mt-20"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"branding-section"],[1,"logo-upload"],[1,"logo-preview"],["alt","Company Logo",3,"src",4,"ngIf"],["class","logo-placeholder",4,"ngIf"],["type","file","accept","image/*","id","logoInput",1,"file-input",3,"change"],["for","logoInput",1,"btn","btn-secondary"],[1,"fas","fa-upload"],[1,"logo-preview","signature"],["alt","Signature",3,"src",4,"ngIf"],["type","file","accept","image/*","id","signatureInput",1,"file-input",3,"change"],["for","signatureInput",1,"btn","btn-secondary"],[1,"form-row","mt-20"],[1,"color-input"],["type","color",3,"ngModelChange","ngModel"],["type","text",1,"color-text",3,"ngModelChange","ngModel"],["alt","Company Logo",3,"src"],[1,"logo-placeholder"],["alt","Signature",3,"src"],[1,"fas","fa-signature"],[1,"fas","fa-save"],["class","users-table",4,"ngIf"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-info"],[1,"avatar"],[1,"role-badge"],[1,"status-badge"],[1,"actions-cell"],["title","Edit User",1,"btn","btn-sm","btn-secondary",3,"click"],["title","Reset Password",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-key"],["title","Delete User",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"modal-overlay"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"fas","fa-image"],[1,"logo-upload-inline"],[1,"logo-preview-small"],["class","fas fa-building",4,"ngIf"],[1,"logo-upload-actions"],["type","file","accept","image/*","id","branchLogoInput",1,"file-input",3,"change"],["for","branchLogoInput",1,"btn","btn-sm","btn-secondary"],[1,"hint"],["type","text","placeholder","e.g., CO001",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Company name",3,"ngModelChange","ngModel"],[1,"input-with-hint"],["type","text","placeholder","company-url-slug","pattern","[a-z0-9-]+",3,"ngModelChange","ngModel"],[1,"color-picker-group"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],["type","text","placeholder","#0d7377",1,"color-text",3,"ngModelChange","ngModel"],["type","text","placeholder","#14919b",1,"color-text",3,"ngModelChange","ngModel"],["class","form-section",4,"ngIf"],[1,"form-section","collapsible"],["type","text","placeholder","Street address",3,"ngModelChange","ngModel"],["type","text","placeholder","City",3,"ngModelChange","ngModel"],["type","text","placeholder","State",3,"ngModelChange","ngModel"],["type","text","placeholder","Country",3,"ngModelChange","ngModel"],["type","text","placeholder","Zip code",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone number",3,"ngModelChange","ngModel"],["type","email","placeholder","Email address",3,"ngModelChange","ngModel"],["value","USD"],["value","EUR"],["value","GBP"],["value","JPY"],["value","CNY"],["value","UTC"],["value","America/New_York"],["value","America/Chicago"],["value","America/Denver"],["value","America/Los_Angeles"],["value","Europe/London"],["value","Asia/Tokyo"],["value","Asia/Shanghai"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-user-shield"],[1,"section-hint"],["type","text","placeholder","admin_username",3,"ngModelChange","ngModel"],["type","password","placeholder","Password (min 6 chars)",3,"ngModelChange","ngModel"],["type","email","placeholder","admin@company.com",3,"ngModelChange","ngModel"],[1,"name-inputs"],["type","text","placeholder","First Name",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name",3,"ngModelChange","ngModel"],[1,"modal",3,"click"],["type","text","placeholder","First name",3,"ngModelChange","ngModel"],["type","text","placeholder","Last name",3,"ngModelChange","ngModel"],["type","text","placeholder","Username",3,"ngModelChange","ngModel","disabled"],["class","form-group",4,"ngIf"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","password","placeholder","Password (min 6 characters)",3,"ngModelChange","ngModel"],[1,"modal","modal-sm",3,"click"],["type","password","placeholder","Enter new password (min 6 characters)",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),b(3,tae,3,0,"button",3),o(4,"h1"),y(5,"i",4),b(6,nae,2,0,"ng-container",5)(7,iae,2,1,"ng-container",5)(8,rae,2,1,"ng-container",5),a()(),o(9,"div",6),b(10,oae,3,0,"button",7)(11,aae,3,0,"button",7),a()(),b(12,hae,4,3,"div",8)(13,kae,3,2,"div",8)(14,Fae,4,3,"div",8),a(),b(15,Uae,138,26,"div",9)(16,qae,45,14,"div",9)(17,Hae,17,1,"div",9)),e&2&&(c(3),m("ngIf",i.activeTab==="users"||i.activeTab==="settings"),c(3),m("ngIf",i.activeTab==="branches"),c(),m("ngIf",i.activeTab==="users"),c(),m("ngIf",i.activeTab==="settings"),c(2),m("ngIf",i.activeTab==="branches"),c(),m("ngIf",i.activeTab==="users"),c(),m("ngIf",i.activeTab==="branches"),c(),m("ngIf",i.activeTab==="settings"),c(),m("ngIf",i.activeTab==="users"),c(),m("ngIf",i.showBranchModal),c(),m("ngIf",i.showUserModal),c(),m("ngIf",i.showPasswordModal))},dependencies:[Se,be,je,We,Ie,Mt,Yt,Ue,Oe,d3,Xt,fr,Ee],styles:[".branch-management[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:none;border:1px solid #e0e0e0;padding:8px 16px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px;color:#6c757d;transition:all .2s}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{border-color:#00796b;color:#00796b}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00796b4d}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#6c757d}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#6c757d}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:12px;display:block}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#e0e0e0;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;color:#2c3e50;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:20px}.branches-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.branch-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden;transition:all .3s}.branch-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001a}.branch-card.inactive[_ngcontent-%COMP%]{opacity:.7}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:linear-gradient(135deg,#f5f7fa,#e8ecef)}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]{width:56px;height:56px;background:#fff;border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000014}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#00796b}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-status[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:4px 12px;border-radius:20px}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-status.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.branch-card[_ngcontent-%COMP%]   .branch-header[_ngcontent-%COMP%]   .branch-status.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.branch-card[_ngcontent-%COMP%]   .branch-body[_ngcontent-%COMP%]{padding:20px}.branch-card[_ngcontent-%COMP%]   .branch-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2c3e50;margin-bottom:4px}.branch-card[_ngcontent-%COMP%]   .branch-body[_ngcontent-%COMP%]   .branch-code[_ngcontent-%COMP%]{font-size:.8rem;color:#00796b;font-weight:500;display:inline-block;margin-bottom:12px}.branch-card[_ngcontent-%COMP%]   .branch-body[_ngcontent-%COMP%]   .branch-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;margin-bottom:6px;display:flex;align-items:center;gap:8px}.branch-card[_ngcontent-%COMP%]   .branch-body[_ngcontent-%COMP%]   .branch-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;color:#00796b}.branch-card[_ngcontent-%COMP%]   .branch-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px 20px;border-top:1px solid #f0f0f0;background:#fafafa}.users-table[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #f0f0f0}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f7fa;font-weight:600;font-size:.85rem;color:#6c757d;text-transform:uppercase}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9fafb}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9rem}.role-badge[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;padding:4px 10px;border-radius:4px;font-size:.8rem;font-weight:500}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:4px;font-size:.8rem;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:8px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0003}.modal.modal-sm[_ngcontent-%COMP%]{max-width:400px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #f0f0f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2c3e50}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#6c757d;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#2c3e50}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #f0f0f0;background:#fafafa}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#2c3e50;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #e0e0e0;border-radius:8px;font-size:.9rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b;box-shadow:0 0 0 3px #00796b1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.settings-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden}.settings-tabs[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border-bottom:2px solid #e0e0e0;overflow-x:auto}.settings-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 24px;border:none;background:transparent;color:#6c757d;font-size:.9rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;white-space:nowrap;transition:all .2s;border-bottom:3px solid transparent;margin-bottom:-2px}.settings-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#00796b;background:#e8f5e9}.settings-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#00796b;border-bottom-color:#00796b;background:#fff}.settings-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.settings-content[_ngcontent-%COMP%]{padding:24px}.settings-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;margin:0 0 20px;display:flex;align-items:center;gap:10px;padding-bottom:12px;border-bottom:1px solid #eee}.settings-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.settings-panel[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:16px}.settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#555;margin-bottom:6px}.settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-size:.9rem;transition:all .2s}.settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b;box-shadow:0 0 0 3px #00796b1a}.settings-panel[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.settings-panel[_ngcontent-%COMP%]   .settings-hint[_ngcontent-%COMP%]{color:#888;font-size:.85rem;margin-bottom:20px}.prefix-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.prefix-grid[_ngcontent-%COMP%]   .prefix-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#555;margin-bottom:6px}.prefix-grid[_ngcontent-%COMP%]   .prefix-item[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-size:.9rem;margin-bottom:6px}.prefix-grid[_ngcontent-%COMP%]   .prefix-item[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}.prefix-grid[_ngcontent-%COMP%]   .prefix-item[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]   .next-number[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.branding-section[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#555;margin-bottom:12px}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]{width:180px;height:120px;border:2px dashed #ddd;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:12px;overflow:hidden;background:#fafafa}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview.signature[_ngcontent-%COMP%]{height:80px}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]   .logo-placeholder[_ngcontent-%COMP%]{text-align:center;color:#aaa}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]   .logo-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:8px}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]   .logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.branding-section[_ngcontent-%COMP%]   .logo-upload[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.color-input[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.color-input[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:50px;height:40px;padding:2px;border:1px solid #ddd;border-radius:8px;cursor:pointer}.color-input[_ngcontent-%COMP%]   .color-text[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-family:monospace;font-size:.9rem}.settings-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.input-with-hint[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.input-with-hint[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:8px}.input-with-hint[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;margin:0}.color-picker-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.color-picker-group[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:50px;height:40px;padding:2px;border:1px solid #ddd;border-radius:8px;cursor:pointer;background:none}.color-picker-group[_ngcontent-%COMP%]   .color-text[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-family:monospace;font-size:.9rem}.modal-lg[_ngcontent-%COMP%]{max-width:700px;max-height:85vh}.modal-lg[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:65vh;overflow-y:auto}.form-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2c3e50;margin-bottom:16px;display:flex;align-items:center;gap:8px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00796b}.form-section[_ngcontent-%COMP%]   .section-hint[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;margin:-8px 0 16px}.logo-upload-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.logo-upload-inline[_ngcontent-%COMP%]   .logo-preview-small[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:12px;background:linear-gradient(135deg,#f5f5f5,#e0e0e0);display:flex;align-items:center;justify-content:center;overflow:hidden;border:2px dashed #ddd}.logo-upload-inline[_ngcontent-%COMP%]   .logo-preview-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.logo-upload-inline[_ngcontent-%COMP%]   .logo-preview-small[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#aaa}.logo-upload-inline[_ngcontent-%COMP%]   .logo-upload-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.logo-upload-inline[_ngcontent-%COMP%]   .logo-upload-actions[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.name-inputs[_ngcontent-%COMP%]{display:flex;gap:8px}.name-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-size:.9rem}.name-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.branches-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.users-table[_ngcontent-%COMP%]{overflow-x:auto}.prefix-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.branding-section[_ngcontent-%COMP%], .name-inputs[_ngcontent-%COMP%]{flex-direction:column}.logo-upload-inline[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"],changeDetection:0})};var Bh={};Bh.version="0.18.5";var Pp=1200,Cu=1252,Gae=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],$ae={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},l7=function(n){Gae.indexOf(n)!=-1&&(Cu=$ae[0]=n)};function Yae(){l7(1252)}var Uh=function(n){Pp=n,l7(n)};function Jae(){Uh(1200),Yae()}function Kae(n){for(var t=[],e=0;e<n.length>>1;++e)t[e]=String.fromCharCode(n.charCodeAt(2*e+1)+(n.charCodeAt(2*e)<<8));return t.join("")}var qC=function(t){return String.fromCharCode(t)},bR=function(t){return String.fromCharCode(t)},rr;var rc=null,Ih=!0,i0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function jh(n){for(var t="",e=0,i=0,r=0,s=0,d=0,u=0,h=0,v=0;v<n.length;)e=n.charCodeAt(v++),s=e>>2,i=n.charCodeAt(v++),d=(e&3)<<4|i>>4,r=n.charCodeAt(v++),u=(i&15)<<2|r>>6,h=r&63,isNaN(i)?u=h=64:isNaN(r)&&(h=64),t+=i0.charAt(s)+i0.charAt(d)+i0.charAt(u)+i0.charAt(h);return t}function Zc(n){var t="",e=0,i=0,r=0,s=0,d=0,u=0,h=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var v=0;v<n.length;)s=i0.indexOf(n.charAt(v++)),d=i0.indexOf(n.charAt(v++)),e=s<<2|d>>4,t+=String.fromCharCode(e),u=i0.indexOf(n.charAt(v++)),i=(d&15)<<4|u>>2,u!==64&&(t+=String.fromCharCode(i)),h=i0.indexOf(n.charAt(v++)),r=(u&3)<<6|h,h!==64&&(t+=String.fromCharCode(r));return t}var Ai=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),td=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(t,e){return e?new Buffer(t,e):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Ep(n){return Ai?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function MR(n){return Ai?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var yl=function(t){return Ai?td(t,"binary"):t.split("").map(function(e){return e.charCodeAt(0)&255})};function mb(n){if(typeof ArrayBuffer>"u")return yl(n);for(var t=new ArrayBuffer(n.length),e=new Uint8Array(t),i=0;i!=n.length;++i)e[i]=n.charCodeAt(i)&255;return t}function Gh(n){if(Array.isArray(n))return n.map(function(i){return String.fromCharCode(i)}).join("");for(var t=[],e=0;e<n.length;++e)t[e]=String.fromCharCode(n[e]);return t.join("")}function Qae(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var zo=Ai?function(n){return Buffer.concat(n.map(function(t){return Buffer.isBuffer(t)?t:td(t)}))}:function(n){if(typeof Uint8Array<"u"){var t=0,e=0;for(t=0;t<n.length;++t)e+=n[t].length;var i=new Uint8Array(e),r=0;for(t=0,e=0;t<n.length;e+=r,++t)if(r=n[t].length,n[t]instanceof Uint8Array)i.set(n[t],e);else{if(typeof n[t]=="string")throw"wtf";i.set(new Uint8Array(n[t]),e)}return i}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Xae(n){for(var t=[],e=0,i=n.length+250,r=Ep(n.length+255),s=0;s<n.length;++s){var d=n.charCodeAt(s);if(d<128)r[e++]=d;else if(d<2048)r[e++]=192|d>>6&31,r[e++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var u=n.charCodeAt(++s)&1023;r[e++]=240|d>>8&7,r[e++]=128|d>>2&63,r[e++]=128|u>>6&15|(d&3)<<4,r[e++]=128|u&63}else r[e++]=224|d>>12&15,r[e++]=128|d>>6&63,r[e++]=128|d&63;e>i&&(t.push(r.slice(0,e)),e=0,r=Ep(65535),i=65530)}return t.push(r.slice(0,e)),zo(t)}var hu=/\u0000/g,HC=/[\u0001-\u0006]/g;function _u(n){for(var t="",e=n.length-1;e>=0;)t+=n.charAt(e--);return t}function Cl(n,t){var e=""+n;return e.length>=t?e:Rr("0",t-e.length)+e}function rO(n,t){var e=""+n;return e.length>=t?e:Rr(" ",t-e.length)+e}function ZC(n,t){var e=""+n;return e.length>=t?e:e+Rr(" ",t-e.length)}function Zae(n,t){var e=""+Math.round(n);return e.length>=t?e:Rr("0",t-e.length)+e}function ese(n,t){var e=""+n;return e.length>=t?e:Rr("0",t-e.length)+e}var SR=Math.pow(2,32);function pu(n,t){if(n>SR||n<-SR)return Zae(n,t);var e=Math.round(n);return ese(e,t)}function eb(n,t){return t=t||0,n.length>=7+t&&(n.charCodeAt(t)|32)===103&&(n.charCodeAt(t+1)|32)===101&&(n.charCodeAt(t+2)|32)===110&&(n.charCodeAt(t+3)|32)===101&&(n.charCodeAt(t+4)|32)===114&&(n.charCodeAt(t+5)|32)===97&&(n.charCodeAt(t+6)|32)===108}var PR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],G3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function tse(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',n}var Fr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'},wR={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function tb(n,t,e){for(var i=n<0?-1:1,r=n*i,s=0,d=1,u=0,h=1,v=0,C=0,O=Math.floor(r);v<t&&(O=Math.floor(r),u=O*d+s,C=O*v+h,!(r-O<5e-8));)r=1/(r-O),s=d,d=u,h=v,v=C;if(C>t&&(v>t?(C=h,u=s):(C=v,u=d)),!e)return[0,i*u,C];var T=Math.floor(i*u/C);return[T,i*u-T*C,C]}function GC(n,t,e){if(n>2958465||n<0)return null;var i=n|0,r=Math.floor(86400*(n-i)),s=0,d=[],u={D:i,T:r,u:86400*(n-i)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),t&&t.date1904&&(i+=1462),u.u>.9999&&(u.u=0,++r==86400&&(u.T=r=0,++i,++u.D)),i===60)d=e?[1317,10,29]:[1900,2,29],s=3;else if(i===0)d=e?[1317,8,29]:[1900,1,0],s=6;else{i>60&&--i;var h=new Date(1900,0,1);h.setDate(h.getDate()+i-1),d=[h.getFullYear(),h.getMonth()+1,h.getDate()],s=h.getDay(),i<60&&(s=(s+6)%7),e&&(s=cse(h,d))}return u.y=d[0],u.m=d[1],u.d=d[2],u.S=r%60,r=Math.floor(r/60),u.M=r%60,r=Math.floor(r/60),u.H=r,u.q=s,u}var c7=new Date(1899,11,31,0,0,0),ise=c7.getTime(),rse=new Date(1900,2,1,0,0,0);function d7(n,t){var e=n.getTime();return t?e-=1461*24*60*60*1e3:n>=rse&&(e+=1440*60*1e3),(e-(ise+(n.getTimezoneOffset()-c7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function oO(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ose(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ase(n){var t=n<0?12:11,e=oO(n.toFixed(12));return e.length<=t||(e=n.toPrecision(10),e.length<=t)?e:n.toExponential(5)}function sse(n){var t=oO(n.toFixed(11));return t.length>(n<0?12:11)||t==="0"||t==="-0"?n.toPrecision(6):t}function lse(n){var t=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),e;return t>=-4&&t<=-1?e=n.toPrecision(10+t):Math.abs(t)<=9?e=ase(n):t===10?e=n.toFixed(10).substr(0,12):e=sse(n),oO(ose(e.toUpperCase()))}function eO(n,t){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):lse(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return o0(14,d7(n,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+n)}function cse(n,t){t[0]-=581;var e=n.getDay();return n<60&&(e=(e+6)%7),e}function dse(n,t,e,i){var r="",s=0,d=0,u=e.y,h,v=0;switch(n){case 98:u=e.y+543;case 121:switch(t.length){case 1:case 2:h=u%100,v=2;break;default:h=u%1e4,v=4;break}break;case 109:switch(t.length){case 1:case 2:h=e.m,v=t.length;break;case 3:return G3[e.m-1][1];case 5:return G3[e.m-1][0];default:return G3[e.m-1][2]}break;case 100:switch(t.length){case 1:case 2:h=e.d,v=t.length;break;case 3:return PR[e.q][0];default:return PR[e.q][1]}break;case 104:switch(t.length){case 1:case 2:h=1+(e.H+11)%12,v=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:h=e.H,v=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:h=e.M,v=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return e.u===0&&(t=="s"||t=="ss")?Cl(e.S,t.length):(i>=2?d=i===3?1e3:100:d=i===1?10:1,s=Math.round(d*(e.S+e.u)),s>=60*d&&(s=0),t==="s"?s===0?"0":""+s/d:(r=Cl(s,2+i),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":h=e.D*24+e.H;break;case"[m]":case"[mm]":h=(e.D*24+e.H)*60+e.M;break;case"[s]":case"[ss]":h=((e.D*24+e.H)*60+e.M)*60+Math.round(e.S+e.u);break;default:throw"bad abstime format: "+t}v=t.length===3?1:2;break;case 101:h=u,v=1;break}var C=v>0?Cl(h,v):"";return C}function r0(n){var t=3;if(n.length<=t)return n;for(var e=n.length%t,i=n.substr(0,e);e!=n.length;e+=t)i+=(i.length>0?",":"")+n.substr(e,t);return i}var p7=/%/g;function pse(n,t,e){var i=t.replace(p7,""),r=t.length-i.length;return Kc(n,i,e*Math.pow(10,2*r))+Rr("%",r)}function mse(n,t,e){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return Kc(n,t.substr(0,i),e/Math.pow(10,3*(t.length-i)))}function m7(n,t){var e,i=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+m7(n,-t);var r=n.indexOf(".");r===-1&&(r=n.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),e=(t/Math.pow(10,s)).toPrecision(i+1+(r+s)%r),e.indexOf("e")===-1){var d=Math.floor(Math.log(t)*Math.LOG10E);for(e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(d-e.length+s):e+="E+"+(d-s);e.substr(0,2)==="0.";)e=e.charAt(0)+e.substr(2,r)+"."+e.substr(2+r),e=e.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,h,v,C){return h+v+C.substr(0,(r+s)%r)+"."+C.substr(s)+"E"})}else e=t.toExponential(i);return n.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),n.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}var u7=/# (\?+)( ?)\/( ?)(\d+)/;function use(n,t,e){var i=parseInt(n[4],10),r=Math.round(t*i),s=Math.floor(r/i),d=r-s*i,u=i;return e+(s===0?"":""+s)+" "+(d===0?Rr(" ",n[1].length+1+n[4].length):rO(d,n[1].length)+n[2]+"/"+n[3]+Cl(u,n[4].length))}function gse(n,t,e){return e+(t===0?"":""+t)+Rr(" ",n[1].length+2+n[4].length)}var g7=/^#*0*\.([0#]+)/,f7=/\).*[0#]/,h7=/\(###\) ###\\?-####/;function Pa(n){for(var t="",e,i=0;i!=n.length;++i)switch(e=n.charCodeAt(i)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(e)}return t}function ER(n,t){var e=Math.pow(10,t);return""+Math.round(n*e)/e}function OR(n,t){var e=n-Math.floor(n),i=Math.pow(10,t);return t<(""+Math.round(e*i)).length?0:Math.round(e*i)}function fse(n,t){return t<(""+Math.round((n-Math.floor(n))*Math.pow(10,t))).length?1:0}function hse(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Vs(n,t,e){if(n.charCodeAt(0)===40&&!t.match(f7)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?Vs("n",i,e):"("+Vs("n",i,-e)+")"}if(t.charCodeAt(t.length-1)===44)return mse(n,t,e);if(t.indexOf("%")!==-1)return pse(n,t,e);if(t.indexOf("E")!==-1)return m7(t,e);if(t.charCodeAt(0)===36)return"$"+Vs(n,t.substr(t.charAt(1)==" "?2:1),e);var r,s,d,u,h=Math.abs(e),v=e<0?"-":"";if(t.match(/^00+$/))return v+pu(h,t.length);if(t.match(/^[#?]+$/))return r=pu(e,0),r==="0"&&(r=""),r.length>t.length?r:Pa(t.substr(0,t.length-r.length))+r;if(s=t.match(u7))return use(s,h,v);if(t.match(/^#+0+$/))return v+pu(h,t.length-t.indexOf("0"));if(s=t.match(g7))return r=ER(e,s[1].length).replace(/^([^\.]+)$/,"$1."+Pa(s[1])).replace(/\.$/,"."+Pa(s[1])).replace(/\.(\d*)$/,function(A,I){return"."+I+Rr("0",Pa(s[1]).length-I.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return v+ER(h,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return v+r0(pu(h,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+Vs(n,t,-e):r0(""+(Math.floor(e)+fse(e,s[1].length)))+"."+Cl(OR(e,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Vs(n,t.replace(/^#,#*,/,""),e);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_u(Vs(n,t.replace(/[\\-]/g,""),e)),d=0,_u(_u(t.replace(/\\/g,"")).replace(/[0#]/g,function(A){return d<r.length?r.charAt(d++):A==="0"?"0":""}));if(t.match(h7))return r=Vs(n,"##########",e),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var C="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(s[4].length,7),u=tb(h,Math.pow(10,d)-1,!1),r=""+v,C=Kc("n",s[1],u[1]),C.charAt(C.length-1)==" "&&(C=C.substr(0,C.length-1)+"0"),r+=C+s[2]+"/"+s[3],C=ZC(u[2],d),C.length<s[4].length&&(C=Pa(s[4].substr(s[4].length-C.length))+C),r+=C,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(s[1].length,s[4].length),7),u=tb(h,Math.pow(10,d)-1,!0),v+(u[0]||(u[1]?"":"0"))+" "+(u[1]?rO(u[1],d)+s[2]+"/"+s[3]+ZC(u[2],d):Rr(" ",2*d+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=pu(e,0),t.length<=r.length?r:Pa(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+e.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),d=r.indexOf(".");var O=t.indexOf(".")-d,T=t.length-r.length-O;return Pa(t.substr(0,O)+r+t.substr(t.length-T))}if(s=t.match(/^00,000\.([#0]*0)$/))return d=OR(e,s[1].length),e<0?"-"+Vs(n,t,-e):r0(hse(e)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(A){return"00,"+(A.length<3?Cl(0,3-A.length):"")+A})+"."+Cl(d,s[1].length);switch(t){case"###,##0.00":return Vs(n,"#,##0.00",e);case"###,###":case"##,###":case"#,###":var w=r0(pu(h,0));return w!=="0"?v+w:"";case"###,###.00":return Vs(n,"###,##0.00",e).replace(/^0\./,".");case"#,###.00":return Vs(n,"#,##0.00",e).replace(/^0\./,".");default:}throw new Error("unsupported format |"+t+"|")}function _se(n,t,e){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return Kc(n,t.substr(0,i),e/Math.pow(10,3*(t.length-i)))}function vse(n,t,e){var i=t.replace(p7,""),r=t.length-i.length;return Kc(n,i,e*Math.pow(10,2*r))+Rr("%",r)}function _7(n,t){var e,i=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_7(n,-t);var r=n.indexOf(".");r===-1&&(r=n.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),e=(t/Math.pow(10,s)).toPrecision(i+1+(r+s)%r),!e.match(/[Ee]/)){var d=Math.floor(Math.log(t)*Math.LOG10E);e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(d-e.length+s):e+="E+"+(d-s),e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,h,v,C){return h+v+C.substr(0,(r+s)%r)+"."+C.substr(s)+"E"})}else e=t.toExponential(i);return n.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),n.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}function nc(n,t,e){if(n.charCodeAt(0)===40&&!t.match(f7)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?nc("n",i,e):"("+nc("n",i,-e)+")"}if(t.charCodeAt(t.length-1)===44)return _se(n,t,e);if(t.indexOf("%")!==-1)return vse(n,t,e);if(t.indexOf("E")!==-1)return _7(t,e);if(t.charCodeAt(0)===36)return"$"+nc(n,t.substr(t.charAt(1)==" "?2:1),e);var r,s,d,u,h=Math.abs(e),v=e<0?"-":"";if(t.match(/^00+$/))return v+Cl(h,t.length);if(t.match(/^[#?]+$/))return r=""+e,e===0&&(r=""),r.length>t.length?r:Pa(t.substr(0,t.length-r.length))+r;if(s=t.match(u7))return gse(s,h,v);if(t.match(/^#+0+$/))return v+Cl(h,t.length-t.indexOf("0"));if(s=t.match(g7))return r=(""+e).replace(/^([^\.]+)$/,"$1."+Pa(s[1])).replace(/\.$/,"."+Pa(s[1])),r=r.replace(/\.(\d*)$/,function(A,I){return"."+I+Rr("0",Pa(s[1]).length-I.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return v+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return v+r0(""+h);if(s=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+nc(n,t,-e):r0(""+e)+"."+Rr("0",s[1].length);if(s=t.match(/^#,#*,#0/))return nc(n,t.replace(/^#,#*,/,""),e);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_u(nc(n,t.replace(/[\\-]/g,""),e)),d=0,_u(_u(t.replace(/\\/g,"")).replace(/[0#]/g,function(A){return d<r.length?r.charAt(d++):A==="0"?"0":""}));if(t.match(h7))return r=nc(n,"##########",e),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var C="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(s[4].length,7),u=tb(h,Math.pow(10,d)-1,!1),r=""+v,C=Kc("n",s[1],u[1]),C.charAt(C.length-1)==" "&&(C=C.substr(0,C.length-1)+"0"),r+=C+s[2]+"/"+s[3],C=ZC(u[2],d),C.length<s[4].length&&(C=Pa(s[4].substr(s[4].length-C.length))+C),r+=C,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(s[1].length,s[4].length),7),u=tb(h,Math.pow(10,d)-1,!0),v+(u[0]||(u[1]?"":"0"))+" "+(u[1]?rO(u[1],d)+s[2]+"/"+s[3]+ZC(u[2],d):Rr(" ",2*d+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=""+e,t.length<=r.length?r:Pa(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0]+)\.([#0]+)$/)){r=""+e.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),d=r.indexOf(".");var O=t.indexOf(".")-d,T=t.length-r.length-O;return Pa(t.substr(0,O)+r+t.substr(t.length-T))}if(s=t.match(/^00,000\.([#0]*0)$/))return e<0?"-"+nc(n,t,-e):r0(""+e).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(A){return"00,"+(A.length<3?Cl(0,3-A.length):"")+A})+"."+Cl(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var w=r0(""+h);return w!=="0"?v+w:"";default:if(t.match(/\.[0#?]*$/))return nc(n,t.slice(0,t.lastIndexOf(".")),e)+Pa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Kc(n,t,e){return(e|0)===e?nc(n,t,e):Vs(n,t,e)}function xse(n){for(var t=[],e=!1,i=0,r=0;i<n.length;++i)switch(n.charCodeAt(i)){case 34:e=!e;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=n.substr(r,i-r),r=i+1}if(t[t.length]=n.substr(r),e===!0)throw new Error("Format |"+n+"| unterminated string ");return t}var v7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function x7(n){for(var t=0,e="",i="";t<n.length;)switch(e=n.charAt(t)){case"G":eb(n,t)&&(t+=6),t++;break;case'"':for(;n.charCodeAt(++t)!==34&&t<n.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(n.charAt(t+1)==="1"||n.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(n.substr(t,3).toUpperCase()==="A/P"||n.substr(t,5).toUpperCase()==="AM/PM"||n.substr(t,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++t;break;case"[":for(i=e;n.charAt(t++)!=="]"&&t<n.length;)i+=n.charAt(t);if(i.match(v7))return!0;break;case".":case"0":case"#":for(;t<n.length&&("0#?.,E+-%".indexOf(e=n.charAt(++t))>-1||e=="\\"&&n.charAt(t+1)=="-"&&"0#".indexOf(n.charAt(t+2))>-1););break;case"?":for(;n.charAt(++t)===e;);break;case"*":++t,(n.charAt(t)==" "||n.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<n.length&&"0123456789".indexOf(n.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function yse(n,t,e,i){for(var r=[],s="",d=0,u="",h="t",v,C,O,T="H";d<n.length;)switch(u=n.charAt(d)){case"G":if(!eb(n,d))throw new Error("unrecognized character "+u+" in "+n);r[r.length]={t:"G",v:"General"},d+=7;break;case'"':for(s="";(O=n.charCodeAt(++d))!==34&&d<n.length;)s+=String.fromCharCode(O);r[r.length]={t:"t",v:s},++d;break;case"\\":var w=n.charAt(++d),A=w==="("||w===")"?w:"t";r[r.length]={t:A,v:w},++d;break;case"_":r[r.length]={t:"t",v:" "},d+=2;break;case"@":r[r.length]={t:"T",v:t},++d;break;case"B":case"b":if(n.charAt(d+1)==="1"||n.charAt(d+1)==="2"){if(v==null&&(v=GC(t,e,n.charAt(d+1)==="2"),v==null))return"";r[r.length]={t:"X",v:n.substr(d,2)},h=u,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||v==null&&(v=GC(t,e),v==null))return"";for(s=u;++d<n.length&&n.charAt(d).toLowerCase()===u;)s+=u;u==="m"&&h.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=T),r[r.length]={t:u,v:s},h=u;break;case"A":case"a":case"\u4E0A":var I={t:u,v:u};if(v==null&&(v=GC(t,e)),n.substr(d,3).toUpperCase()==="A/P"?(v!=null&&(I.v=v.H>=12?"P":"A"),I.t="T",T="h",d+=3):n.substr(d,5).toUpperCase()==="AM/PM"?(v!=null&&(I.v=v.H>=12?"PM":"AM"),I.t="T",d+=5,T="h"):n.substr(d,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(v!=null&&(I.v=v.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),I.t="T",d+=5,T="h"):(I.t="t",++d),v==null&&I.t==="T")return"";r[r.length]=I,h=u;break;case"[":for(s=u;n.charAt(d++)!=="]"&&d<n.length;)s+=n.charAt(d);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(v7)){if(v==null&&(v=GC(t,e),v==null))return"";r[r.length]={t:"Z",v:s.toLowerCase()},h=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",x7(n)||(r[r.length]={t:"t",v:s}));break;case".":if(v!=null){for(s=u;++d<n.length&&(u=n.charAt(d))==="0";)s+=u;r[r.length]={t:"s",v:s};break}case"0":case"#":for(s=u;++d<n.length&&"0#?.,E+-%".indexOf(u=n.charAt(d))>-1;)s+=u;r[r.length]={t:"n",v:s};break;case"?":for(s=u;n.charAt(++d)===u;)s+=u;r[r.length]={t:u,v:s},h=u;break;case"*":++d,(n.charAt(d)==" "||n.charAt(d)=="*")&&++d;break;case"(":case")":r[r.length]={t:i===1?"t":u,v:u},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=u;d<n.length&&"0123456789".indexOf(n.charAt(++d))>-1;)s+=n.charAt(d);r[r.length]={t:"D",v:s};break;case" ":r[r.length]={t:u,v:u},++d;break;case"$":r[r.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+n);r[r.length]={t:"t",v:u},++d;break}var L=0,B=0,q;for(d=r.length-1,h="t";d>=0;--d)switch(r[d].t){case"h":case"H":r[d].t=T,h="h",L<1&&(L=1);break;case"s":(q=r[d].v.match(/\.0+$/))&&(B=Math.max(B,q[0].length-1)),L<3&&(L=3);case"d":case"y":case"M":case"e":h=r[d].t;break;case"m":h==="s"&&(r[d].t="M",L<2&&(L=2));break;case"X":break;case"Z":L<1&&r[d].v.match(/[Hh]/)&&(L=1),L<2&&r[d].v.match(/[Mm]/)&&(L=2),L<3&&r[d].v.match(/[Ss]/)&&(L=3)}switch(L){case 0:break;case 1:v.u>=.5&&(v.u=0,++v.S),v.S>=60&&(v.S=0,++v.M),v.M>=60&&(v.M=0,++v.H);break;case 2:v.u>=.5&&(v.u=0,++v.S),v.S>=60&&(v.S=0,++v.M);break}var K="",J;for(d=0;d<r.length;++d)switch(r[d].t){case"t":case"T":case" ":case"D":break;case"X":r[d].v="",r[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[d].v=dse(r[d].t.charCodeAt(0),r[d].v,v,B),r[d].t="t";break;case"n":case"?":for(J=d+1;r[J]!=null&&((u=r[J].t)==="?"||u==="D"||(u===" "||u==="t")&&r[J+1]!=null&&(r[J+1].t==="?"||r[J+1].t==="t"&&r[J+1].v==="/")||r[d].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(r[J].v==="/"||r[J].v===" "&&r[J+1]!=null&&r[J+1].t=="?"));)r[d].v+=r[J].v,r[J]={v:"",t:";"},++J;K+=r[d].v,d=J-1;break;case"G":r[d].t="t",r[d].v=eO(t,e);break}var Me="",ze,oe;if(K.length>0){K.charCodeAt(0)==40?(ze=t<0&&K.charCodeAt(0)===45?-t:t,oe=Kc("n",K,ze)):(ze=t<0&&i>1?-t:t,oe=Kc("n",K,ze),ze<0&&r[0]&&r[0].t=="t"&&(oe=oe.substr(1),r[0].v="-"+r[0].v)),J=oe.length-1;var ae=r.length;for(d=0;d<r.length;++d)if(r[d]!=null&&r[d].t!="t"&&r[d].v.indexOf(".")>-1){ae=d;break}var X=r.length;if(ae===r.length&&oe.indexOf("E")===-1){for(d=r.length-1;d>=0;--d)r[d]==null||"n?".indexOf(r[d].t)===-1||(J>=r[d].v.length-1?(J-=r[d].v.length,r[d].v=oe.substr(J+1,r[d].v.length)):J<0?r[d].v="":(r[d].v=oe.substr(0,J+1),J=-1),r[d].t="t",X=d);J>=0&&X<r.length&&(r[X].v=oe.substr(0,J+1)+r[X].v)}else if(ae!==r.length&&oe.indexOf("E")===-1){for(J=oe.indexOf(".")-1,d=ae;d>=0;--d)if(!(r[d]==null||"n?".indexOf(r[d].t)===-1)){for(C=r[d].v.indexOf(".")>-1&&d===ae?r[d].v.indexOf(".")-1:r[d].v.length-1,Me=r[d].v.substr(C+1);C>=0;--C)J>=0&&(r[d].v.charAt(C)==="0"||r[d].v.charAt(C)==="#")&&(Me=oe.charAt(J--)+Me);r[d].v=Me,r[d].t="t",X=d}for(J>=0&&X<r.length&&(r[X].v=oe.substr(0,J+1)+r[X].v),J=oe.indexOf(".")+1,d=ae;d<r.length;++d)if(!(r[d]==null||"n?(".indexOf(r[d].t)===-1&&d!==ae)){for(C=r[d].v.indexOf(".")>-1&&d===ae?r[d].v.indexOf(".")+1:0,Me=r[d].v.substr(0,C);C<r[d].v.length;++C)J<oe.length&&(Me+=oe.charAt(J++));r[d].v=Me,r[d].t="t",X=d}}}for(d=0;d<r.length;++d)r[d]!=null&&"n?".indexOf(r[d].t)>-1&&(ze=i>1&&t<0&&d>0&&r[d-1].v==="-"?-t:t,r[d].v=Kc(r[d].t,r[d].v,ze),r[d].t="t");var pe="";for(d=0;d!==r.length;++d)r[d]!=null&&(pe+=r[d].v);return pe}var TR=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function kR(n,t){if(t==null)return!1;var e=parseFloat(t[2]);switch(t[1]){case"=":if(n==e)return!0;break;case">":if(n>e)return!0;break;case"<":if(n<e)return!0;break;case"<>":if(n!=e)return!0;break;case">=":if(n>=e)return!0;break;case"<=":if(n<=e)return!0;break}return!1}function Cse(n,t){var e=xse(n),i=e.length,r=e[i-1].indexOf("@");if(i<4&&r>-1&&--i,e.length>4)throw new Error("cannot find right format for |"+e.join("|")+"|");if(typeof t!="number")return[4,e.length===4||r>-1?e[e.length-1]:"@"];switch(e.length){case 1:e=r>-1?["General","General","General",e[0]]:[e[0],e[0],e[0],"@"];break;case 2:e=r>-1?[e[0],e[0],e[0],e[1]]:[e[0],e[1],e[0],"@"];break;case 3:e=r>-1?[e[0],e[1],e[0],e[2]]:[e[0],e[1],e[2],"@"];break;case 4:break}var s=t>0?e[0]:t<0?e[1]:e[2];if(e[0].indexOf("[")===-1&&e[1].indexOf("[")===-1)return[i,s];if(e[0].match(/\[[=<>]/)!=null||e[1].match(/\[[=<>]/)!=null){var d=e[0].match(TR),u=e[1].match(TR);return kR(t,d)?[i,e[0]]:kR(t,u)?[i,e[1]]:[i,e[d!=null&&u!=null?2:1]]}return[i,s]}function o0(n,t,e){e==null&&(e={});var i="";switch(typeof n){case"string":n=="m/d/yy"&&e.dateNF?i=e.dateNF:i=n;break;case"number":n==14&&e.dateNF?i=e.dateNF:i=(e.table!=null?e.table:Fr)[n],i==null&&(i=e.table&&e.table[wR[n]]||Fr[wR[n]]),i==null&&(i=nse[n]||"General");break}if(eb(i,0))return eO(t,e);t instanceof Date&&(t=d7(t,e.date1904));var r=Cse(i,t);if(eb(r[1]))return eO(t,e);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return yse(r[1],t,e,r[0])}function y7(n,t){if(typeof t!="number"){t=+t||-1;for(var e=0;e<392;++e){if(Fr[e]==null){t<0&&(t=e);continue}if(Fr[e]==n){t=e;break}}t<0&&(t=391)}return Fr[t]=n,t}function ub(n){for(var t=0;t!=392;++t)n[t]!==void 0&&y7(n[t],t)}function gb(){Fr=tse()}var C7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bse(n){var t=typeof n=="number"?Fr[n]:n;return t=t.replace(C7,"(\\d+)"),new RegExp("^"+t+"$")}function Mse(n,t,e){var i=-1,r=-1,s=-1,d=-1,u=-1,h=-1;(t.match(C7)||[]).forEach(function(O,T){var w=parseInt(e[T+1],10);switch(O.toLowerCase().charAt(0)){case"y":i=w;break;case"d":s=w;break;case"h":d=w;break;case"s":h=w;break;case"m":d>=0?u=w:r=w;break}}),h>=0&&u==-1&&r>=0&&(u=r,r=-1);var v=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);v.length==7&&(v="0"+v),v.length==8&&(v="20"+v);var C=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return d==-1&&u==-1&&h==-1?v:i==-1&&r==-1&&s==-1?C:v+"T"+C}var Sse=(function(){var n={};n.version="1.2.0";function t(){for(var oe=0,ae=new Array(256),X=0;X!=256;++X)oe=X,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,oe=oe&1?-306674912^oe>>>1:oe>>>1,ae[X]=oe;return typeof Int32Array<"u"?new Int32Array(ae):ae}var e=t();function i(oe){var ae=0,X=0,pe=0,z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(pe=0;pe!=256;++pe)z[pe]=oe[pe];for(pe=0;pe!=256;++pe)for(X=oe[pe],ae=256+pe;ae<4096;ae+=256)X=z[ae]=X>>>8^oe[X&255];var Z=[];for(pe=1;pe!=16;++pe)Z[pe-1]=typeof Int32Array<"u"?z.subarray(pe*256,pe*256+256):z.slice(pe*256,pe*256+256);return Z}var r=i(e),s=r[0],d=r[1],u=r[2],h=r[3],v=r[4],C=r[5],O=r[6],T=r[7],w=r[8],A=r[9],I=r[10],L=r[11],B=r[12],q=r[13],K=r[14];function J(oe,ae){for(var X=ae^-1,pe=0,z=oe.length;pe<z;)X=X>>>8^e[(X^oe.charCodeAt(pe++))&255];return~X}function Me(oe,ae){for(var X=ae^-1,pe=oe.length-15,z=0;z<pe;)X=K[oe[z++]^X&255]^q[oe[z++]^X>>8&255]^B[oe[z++]^X>>16&255]^L[oe[z++]^X>>>24]^I[oe[z++]]^A[oe[z++]]^w[oe[z++]]^T[oe[z++]]^O[oe[z++]]^C[oe[z++]]^v[oe[z++]]^h[oe[z++]]^u[oe[z++]]^d[oe[z++]]^s[oe[z++]]^e[oe[z++]];for(pe+=15;z<pe;)X=X>>>8^e[(X^oe[z++])&255];return~X}function ze(oe,ae){for(var X=ae^-1,pe=0,z=oe.length,Z=0,ge=0;pe<z;)Z=oe.charCodeAt(pe++),Z<128?X=X>>>8^e[(X^Z)&255]:Z<2048?(X=X>>>8^e[(X^(192|Z>>6&31))&255],X=X>>>8^e[(X^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,ge=oe.charCodeAt(pe++)&1023,X=X>>>8^e[(X^(240|Z>>8&7))&255],X=X>>>8^e[(X^(128|Z>>2&63))&255],X=X>>>8^e[(X^(128|ge>>6&15|(Z&3)<<4))&255],X=X>>>8^e[(X^(128|ge&63))&255]):(X=X>>>8^e[(X^(224|Z>>12&15))&255],X=X>>>8^e[(X^(128|Z>>6&63))&255],X=X>>>8^e[(X^(128|Z&63))&255]);return~X}return n.table=e,n.bstr=J,n.buf=Me,n.str=ze,n})(),Zi=(function(){var t={};t.version="1.2.1";function e(ee,ve){for(var se=ee.split("/"),ce=ve.split("/"),xe=0,Ce=0,Qe=Math.min(se.length,ce.length);xe<Qe;++xe){if(Ce=se[xe].length-ce[xe].length)return Ce;if(se[xe]!=ce[xe])return se[xe]<ce[xe]?-1:1}return se.length-ce.length}function i(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:i(ee.slice(0,-1));var ve=ee.lastIndexOf("/");return ve===-1?ee:ee.slice(0,ve+1)}function r(ee){if(ee.charAt(ee.length-1)=="/")return r(ee.slice(0,-1));var ve=ee.lastIndexOf("/");return ve===-1?ee:ee.slice(ve+1)}function s(ee,ve){typeof ve=="string"&&(ve=new Date(ve));var se=ve.getHours();se=se<<6|ve.getMinutes(),se=se<<5|ve.getSeconds()>>>1,ee.write_shift(2,se);var ce=ve.getFullYear()-1980;ce=ce<<4|ve.getMonth()+1,ce=ce<<5|ve.getDate(),ee.write_shift(2,ce)}function d(ee){var ve=ee.read_shift(2)&65535,se=ee.read_shift(2)&65535,ce=new Date,xe=se&31;se>>>=5;var Ce=se&15;se>>>=4,ce.setMilliseconds(0),ce.setFullYear(se+1980),ce.setMonth(Ce-1),ce.setDate(xe);var Qe=ve&31;ve>>>=5;var at=ve&63;return ve>>>=6,ce.setHours(ve),ce.setMinutes(at),ce.setSeconds(Qe<<1),ce}function u(ee){ms(ee,0);for(var ve={},se=0;ee.l<=ee.length-4;){var ce=ee.read_shift(2),xe=ee.read_shift(2),Ce=ee.l+xe,Qe={};switch(ce){case 21589:se=ee.read_shift(1),se&1&&(Qe.mtime=ee.read_shift(4)),xe>5&&(se&2&&(Qe.atime=ee.read_shift(4)),se&4&&(Qe.ctime=ee.read_shift(4))),Qe.mtime&&(Qe.mt=new Date(Qe.mtime*1e3));break}ee.l=Ce,ve[ce]=Qe}return ve}var h;function v(){return h||(h={})}function C(ee,ve){if(ee[0]==80&&ee[1]==75)return In(ee,ve);if((ee[0]|32)==109&&(ee[1]|32)==105)return Pn(ee,ve);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var se=3,ce=512,xe=0,Ce=0,Qe=0,at=0,et=0,Xe=[],nt=ee.slice(0,512);ms(nt,0);var kt=O(nt);switch(se=kt[0],se){case 3:ce=512;break;case 4:ce=4096;break;case 0:if(kt[1]==0)return In(ee,ve);default:throw new Error("Major Version: Expected 3 or 4 saw "+se)}ce!==512&&(nt=ee.slice(0,ce),ms(nt,28));var Lt=ee.slice(0,ce);T(nt,se);var Qt=nt.read_shift(4,"i");if(se===3&&Qt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Qt);nt.l+=4,Qe=nt.read_shift(4,"i"),nt.l+=4,nt.chk("00100000","Mini Stream Cutoff Size: "),at=nt.read_shift(4,"i"),xe=nt.read_shift(4,"i"),et=nt.read_shift(4,"i"),Ce=nt.read_shift(4,"i");for(var Ut=-1,qt=0;qt<109&&(Ut=nt.read_shift(4,"i"),!(Ut<0));++qt)Xe[qt]=Ut;var wn=w(ee,ce);L(et,Ce,wn,ce,Xe);var Ni=q(wn,Qe,Xe,ce);Ni[Qe].name="!Directory",xe>0&&at!==ge&&(Ni[at].name="!MiniFAT"),Ni[Xe[0]].name="!FAT",Ni.fat_addrs=Xe,Ni.ssz=ce;var er={},lr=[],go=[],$s=[];K(Qe,Ni,wn,lr,xe,er,go,at),A(go,$s,lr),lr.shift();var Tl={FileIndex:go,FullPaths:$s};return ve&&ve.raw&&(Tl.raw={header:Lt,sectors:wn}),Tl}function O(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(Pe,"Header Signature: "),ee.l+=16;var ve=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),ve]}function T(ee,ve){var se=9;switch(ee.l+=2,se=ee.read_shift(2)){case 9:if(ve!=3)throw new Error("Sector Shift: Expected 9 saw "+se);break;case 12:if(ve!=4)throw new Error("Sector Shift: Expected 12 saw "+se);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+se)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function w(ee,ve){for(var se=Math.ceil(ee.length/ve)-1,ce=[],xe=1;xe<se;++xe)ce[xe-1]=ee.slice(xe*ve,(xe+1)*ve);return ce[se-1]=ee.slice(se*ve),ce}function A(ee,ve,se){for(var ce=0,xe=0,Ce=0,Qe=0,at=0,et=se.length,Xe=[],nt=[];ce<et;++ce)Xe[ce]=nt[ce]=ce,ve[ce]=se[ce];for(;at<nt.length;++at)ce=nt[at],xe=ee[ce].L,Ce=ee[ce].R,Qe=ee[ce].C,Xe[ce]===ce&&(xe!==-1&&Xe[xe]!==xe&&(Xe[ce]=Xe[xe]),Ce!==-1&&Xe[Ce]!==Ce&&(Xe[ce]=Xe[Ce])),Qe!==-1&&(Xe[Qe]=ce),xe!==-1&&ce!=Xe[ce]&&(Xe[xe]=Xe[ce],nt.lastIndexOf(xe)<at&&nt.push(xe)),Ce!==-1&&ce!=Xe[ce]&&(Xe[Ce]=Xe[ce],nt.lastIndexOf(Ce)<at&&nt.push(Ce));for(ce=1;ce<et;++ce)Xe[ce]===ce&&(Ce!==-1&&Xe[Ce]!==Ce?Xe[ce]=Xe[Ce]:xe!==-1&&Xe[xe]!==xe&&(Xe[ce]=Xe[xe]));for(ce=1;ce<et;++ce)if(ee[ce].type!==0){if(at=ce,at!=Xe[at])do at=Xe[at],ve[ce]=ve[at]+"/"+ve[ce];while(at!==0&&Xe[at]!==-1&&at!=Xe[at]);Xe[ce]=-1}for(ve[0]+="/",ce=1;ce<et;++ce)ee[ce].type!==2&&(ve[ce]+="/")}function I(ee,ve,se){for(var ce=ee.start,xe=ee.size,Ce=[],Qe=ce;se&&xe>0&&Qe>=0;)Ce.push(ve.slice(Qe*Z,Qe*Z+Z)),xe-=Z,Qe=Sp(se,Qe*4);return Ce.length===0?mt(0):zo(Ce).slice(0,ee.size)}function L(ee,ve,se,ce,xe){var Ce=ge;if(ee===ge){if(ve!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var Qe=se[ee],at=(ce>>>2)-1;if(!Qe)return;for(var et=0;et<at&&(Ce=Sp(Qe,et*4))!==ge;++et)xe.push(Ce);L(Sp(Qe,ce-4),ve-1,se,ce,xe)}}function B(ee,ve,se,ce,xe){var Ce=[],Qe=[];xe||(xe=[]);var at=ce-1,et=0,Xe=0;for(et=ve;et>=0;){xe[et]=!0,Ce[Ce.length]=et,Qe.push(ee[et]);var nt=se[Math.floor(et*4/ce)];if(Xe=et*4&at,ce<4+Xe)throw new Error("FAT boundary crossed: "+et+" 4 "+ce);if(!ee[nt])break;et=Sp(ee[nt],Xe)}return{nodes:Ce,data:VR([Qe])}}function q(ee,ve,se,ce){var xe=ee.length,Ce=[],Qe=[],at=[],et=[],Xe=ce-1,nt=0,kt=0,Lt=0,Qt=0;for(nt=0;nt<xe;++nt)if(at=[],Lt=nt+ve,Lt>=xe&&(Lt-=xe),!Qe[Lt]){et=[];var Ut=[];for(kt=Lt;kt>=0;){Ut[kt]=!0,Qe[kt]=!0,at[at.length]=kt,et.push(ee[kt]);var qt=se[Math.floor(kt*4/ce)];if(Qt=kt*4&Xe,ce<4+Qt)throw new Error("FAT boundary crossed: "+kt+" 4 "+ce);if(!ee[qt]||(kt=Sp(ee[qt],Qt),Ut[kt]))break}Ce[Lt]={nodes:at,data:VR([et])}}return Ce}function K(ee,ve,se,ce,xe,Ce,Qe,at){for(var et=0,Xe=ce.length?2:0,nt=ve[ee].data,kt=0,Lt=0,Qt;kt<nt.length;kt+=128){var Ut=nt.slice(kt,kt+128);ms(Ut,64),Lt=Ut.read_shift(2),Qt=_b(Ut,0,Lt-Xe),ce.push(Qt);var qt={name:Qt,type:Ut.read_shift(1),color:Ut.read_shift(1),L:Ut.read_shift(4,"i"),R:Ut.read_shift(4,"i"),C:Ut.read_shift(4,"i"),clsid:Ut.read_shift(16),state:Ut.read_shift(4,"i"),start:0,size:0},wn=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);wn!==0&&(qt.ct=J(Ut,Ut.l-8));var Ni=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);Ni!==0&&(qt.mt=J(Ut,Ut.l-8)),qt.start=Ut.read_shift(4,"i"),qt.size=Ut.read_shift(4,"i"),qt.size<0&&qt.start<0&&(qt.size=qt.type=0,qt.start=ge,qt.name=""),qt.type===5?(et=qt.start,xe>0&&et!==ge&&(ve[et].name="!StreamData")):qt.size>=4096?(qt.storage="fat",ve[qt.start]===void 0&&(ve[qt.start]=B(se,qt.start,ve.fat_addrs,ve.ssz)),ve[qt.start].name=qt.name,qt.content=ve[qt.start].data.slice(0,qt.size)):(qt.storage="minifat",qt.size<0?qt.size=0:et!==ge&&qt.start!==ge&&ve[et]&&(qt.content=I(qt,ve[et].data,(ve[at]||{}).data))),qt.content&&ms(qt.content,0),Ce[Qt]=qt,Qe.push(qt)}}function J(ee,ve){return new Date((bo(ee,ve+4)/1e7*Math.pow(2,32)+bo(ee,ve)/1e7-11644473600)*1e3)}function Me(ee,ve){return v(),C(h.readFileSync(ee),ve)}function ze(ee,ve){var se=ve&&ve.type;switch(se||Ai&&Buffer.isBuffer(ee)&&(se="buffer"),se||"base64"){case"file":return Me(ee,ve);case"base64":return C(yl(Zc(ee)),ve);case"binary":return C(yl(ee),ve)}return C(ee,ve)}function oe(ee,ve){var se=ve||{},ce=se.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=ce+"/",ee.FileIndex[0]={name:ce,type:5}),se.CLSID&&(ee.FileIndex[0].clsid=se.CLSID),ae(ee)}function ae(ee){var ve="Sh33tJ5";if(!Zi.find(ee,"/"+ve)){var se=mt(4);se[0]=55,se[1]=se[3]=50,se[2]=54,ee.FileIndex.push({name:ve,type:2,content:se,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+ve),X(ee)}}function X(ee,ve){oe(ee);for(var se=!1,ce=!1,xe=ee.FullPaths.length-1;xe>=0;--xe){var Ce=ee.FileIndex[xe];switch(Ce.type){case 0:ce?se=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:ce=!0,isNaN(Ce.R*Ce.L*Ce.C)&&(se=!0),Ce.R>-1&&Ce.L>-1&&Ce.R==Ce.L&&(se=!0);break;default:se=!0;break}}if(!(!se&&!ve)){var Qe=new Date(1987,1,19),at=0,et=Object.create?Object.create(null):{},Xe=[];for(xe=0;xe<ee.FullPaths.length;++xe)et[ee.FullPaths[xe]]=!0,ee.FileIndex[xe].type!==0&&Xe.push([ee.FullPaths[xe],ee.FileIndex[xe]]);for(xe=0;xe<Xe.length;++xe){var nt=i(Xe[xe][0]);ce=et[nt],ce||(Xe.push([nt,{name:r(nt).replace("/",""),type:1,clsid:De,ct:Qe,mt:Qe,content:null}]),et[nt]=!0)}for(Xe.sort(function(Qt,Ut){return e(Qt[0],Ut[0])}),ee.FullPaths=[],ee.FileIndex=[],xe=0;xe<Xe.length;++xe)ee.FullPaths[xe]=Xe[xe][0],ee.FileIndex[xe]=Xe[xe][1];for(xe=0;xe<Xe.length;++xe){var kt=ee.FileIndex[xe],Lt=ee.FullPaths[xe];if(kt.name=r(Lt).replace("/",""),kt.L=kt.R=kt.C=-(kt.color=1),kt.size=kt.content?kt.content.length:0,kt.start=0,kt.clsid=kt.clsid||De,xe===0)kt.C=Xe.length>1?1:-1,kt.size=0,kt.type=5;else if(Lt.slice(-1)=="/"){for(at=xe+1;at<Xe.length&&i(ee.FullPaths[at])!=Lt;++at);for(kt.C=at>=Xe.length?-1:at,at=xe+1;at<Xe.length&&i(ee.FullPaths[at])!=i(Lt);++at);kt.R=at>=Xe.length?-1:at,kt.type=1}else i(ee.FullPaths[xe+1]||"")==i(Lt)&&(kt.R=xe+1),kt.type=2}}}function pe(ee,ve){var se=ve||{};if(se.fileType=="mad")return Hs(ee,se);switch(X(ee),se.fileType){case"zip":return Xn(ee,se)}var ce=(function(Qt){for(var Ut=0,qt=0,wn=0;wn<Qt.FileIndex.length;++wn){var Ni=Qt.FileIndex[wn];if(Ni.content){var er=Ni.content.length;er>0&&(er<4096?Ut+=er+63>>6:qt+=er+511>>9)}}for(var lr=Qt.FullPaths.length+3>>2,go=Ut+7>>3,$s=Ut+127>>7,Tl=go+qt+lr+$s,xs=Tl+127>>7,cd=xs<=109?0:Math.ceil((xs-109)/127);Tl+xs+cd+127>>7>xs;)cd=++xs<=109?0:Math.ceil((xs-109)/127);var Hr=[1,cd,xs,$s,lr,qt,Ut,0];return Qt.FileIndex[0].size=Ut<<6,Hr[7]=(Qt.FileIndex[0].start=Hr[0]+Hr[1]+Hr[2]+Hr[3]+Hr[4]+Hr[5])+(Hr[6]+7>>3),Hr})(ee),xe=mt(ce[7]<<9),Ce=0,Qe=0;{for(Ce=0;Ce<8;++Ce)xe.write_shift(1,Ve[Ce]);for(Ce=0;Ce<8;++Ce)xe.write_shift(2,0);for(xe.write_shift(2,62),xe.write_shift(2,3),xe.write_shift(2,65534),xe.write_shift(2,9),xe.write_shift(2,6),Ce=0;Ce<3;++Ce)xe.write_shift(2,0);for(xe.write_shift(4,0),xe.write_shift(4,ce[2]),xe.write_shift(4,ce[0]+ce[1]+ce[2]+ce[3]-1),xe.write_shift(4,0),xe.write_shift(4,4096),xe.write_shift(4,ce[3]?ce[0]+ce[1]+ce[2]-1:ge),xe.write_shift(4,ce[3]),xe.write_shift(-4,ce[1]?ce[0]-1:ge),xe.write_shift(4,ce[1]),Ce=0;Ce<109;++Ce)xe.write_shift(-4,Ce<ce[2]?ce[1]+Ce:-1)}if(ce[1])for(Qe=0;Qe<ce[1];++Qe){for(;Ce<236+Qe*127;++Ce)xe.write_shift(-4,Ce<ce[2]?ce[1]+Ce:-1);xe.write_shift(-4,Qe===ce[1]-1?ge:Qe+1)}var at=function(Qt){for(Qe+=Qt;Ce<Qe-1;++Ce)xe.write_shift(-4,Ce+1);Qt&&(++Ce,xe.write_shift(-4,ge))};for(Qe=Ce=0,Qe+=ce[1];Ce<Qe;++Ce)xe.write_shift(-4,Fe.DIFSECT);for(Qe+=ce[2];Ce<Qe;++Ce)xe.write_shift(-4,Fe.FATSECT);at(ce[3]),at(ce[4]);for(var et=0,Xe=0,nt=ee.FileIndex[0];et<ee.FileIndex.length;++et)nt=ee.FileIndex[et],nt.content&&(Xe=nt.content.length,!(Xe<4096)&&(nt.start=Qe,at(Xe+511>>9)));for(at(ce[6]+7>>3);xe.l&511;)xe.write_shift(-4,Fe.ENDOFCHAIN);for(Qe=Ce=0,et=0;et<ee.FileIndex.length;++et)nt=ee.FileIndex[et],nt.content&&(Xe=nt.content.length,!(!Xe||Xe>=4096)&&(nt.start=Qe,at(Xe+63>>6)));for(;xe.l&511;)xe.write_shift(-4,Fe.ENDOFCHAIN);for(Ce=0;Ce<ce[4]<<2;++Ce){var kt=ee.FullPaths[Ce];if(!kt||kt.length===0){for(et=0;et<17;++et)xe.write_shift(4,0);for(et=0;et<3;++et)xe.write_shift(4,-1);for(et=0;et<12;++et)xe.write_shift(4,0);continue}nt=ee.FileIndex[Ce],Ce===0&&(nt.start=nt.size?nt.start-1:ge);var Lt=Ce===0&&se.root||nt.name;if(Xe=2*(Lt.length+1),xe.write_shift(64,Lt,"utf16le"),xe.write_shift(2,Xe),xe.write_shift(1,nt.type),xe.write_shift(1,nt.color),xe.write_shift(-4,nt.L),xe.write_shift(-4,nt.R),xe.write_shift(-4,nt.C),nt.clsid)xe.write_shift(16,nt.clsid,"hex");else for(et=0;et<4;++et)xe.write_shift(4,0);xe.write_shift(4,nt.state||0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,nt.start),xe.write_shift(4,nt.size),xe.write_shift(4,0)}for(Ce=1;Ce<ee.FileIndex.length;++Ce)if(nt=ee.FileIndex[Ce],nt.size>=4096)if(xe.l=nt.start+1<<9,Ai&&Buffer.isBuffer(nt.content))nt.content.copy(xe,xe.l,0,nt.size),xe.l+=nt.size+511&-512;else{for(et=0;et<nt.size;++et)xe.write_shift(1,nt.content[et]);for(;et&511;++et)xe.write_shift(1,0)}for(Ce=1;Ce<ee.FileIndex.length;++Ce)if(nt=ee.FileIndex[Ce],nt.size>0&&nt.size<4096)if(Ai&&Buffer.isBuffer(nt.content))nt.content.copy(xe,xe.l,0,nt.size),xe.l+=nt.size+63&-64;else{for(et=0;et<nt.size;++et)xe.write_shift(1,nt.content[et]);for(;et&63;++et)xe.write_shift(1,0)}if(Ai)xe.l=xe.length;else for(;xe.l<xe.length;)xe.write_shift(1,0);return xe}function z(ee,ve){var se=ee.FullPaths.map(function(et){return et.toUpperCase()}),ce=se.map(function(et){var Xe=et.split("/");return Xe[Xe.length-(et.slice(-1)=="/"?2:1)]}),xe=!1;ve.charCodeAt(0)===47?(xe=!0,ve=se[0].slice(0,-1)+ve):xe=ve.indexOf("/")!==-1;var Ce=ve.toUpperCase(),Qe=xe===!0?se.indexOf(Ce):ce.indexOf(Ce);if(Qe!==-1)return ee.FileIndex[Qe];var at=!Ce.match(HC);for(Ce=Ce.replace(hu,""),at&&(Ce=Ce.replace(HC,"!")),Qe=0;Qe<se.length;++Qe)if((at?se[Qe].replace(HC,"!"):se[Qe]).replace(hu,"")==Ce||(at?ce[Qe].replace(HC,"!"):ce[Qe]).replace(hu,"")==Ce)return ee.FileIndex[Qe];return null}var Z=64,ge=-2,Pe="d0cf11e0a1b11ae1",Ve=[208,207,17,224,161,177,26,225],De="00000000000000000000000000000000",Fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ge,FREESECT:-1,HEADER_SIGNATURE:Pe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:De,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Te(ee,ve,se){v();var ce=pe(ee,se);h.writeFileSync(ve,ce)}function Je(ee){for(var ve=new Array(ee.length),se=0;se<ee.length;++se)ve[se]=String.fromCharCode(ee[se]);return ve.join("")}function _t(ee,ve){var se=pe(ee,ve);switch(ve&&ve.type||"buffer"){case"file":return v(),h.writeFileSync(ve.filename,se),se;case"binary":return typeof se=="string"?se:Je(se);case"base64":return jh(typeof se=="string"?se:Je(se));case"buffer":if(Ai)return Buffer.isBuffer(se)?se:td(se);case"array":return typeof se=="string"?yl(se):se}return se}var pt;function U(ee){try{var ve=ee.InflateRaw,se=new ve;if(se._processChunk(new Uint8Array([3,0]),se._finishFlushFlag),se.bytesRead)pt=ee;else throw new Error("zlib does not expose bytesRead")}catch(ce){console.error("cannot use native zlib: "+(ce.message||ce))}}function Q(ee,ve){if(!pt)return Wi(ee,ve);var se=pt.InflateRaw,ce=new se,xe=ce._processChunk(ee.slice(ee.l),ce._finishFlushFlag);return ee.l+=ce.bytesRead,xe}function W(ee){return pt?pt.deflateRawSync(ee):An(ee)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],we=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function qe(ee){var ve=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(ve>>16|ve>>8|ve)&255}for(var Ae=typeof Uint8Array<"u",Re=Ae?new Uint8Array(256):[],gt=0;gt<256;++gt)Re[gt]=qe(gt);function Pt(ee,ve){var se=Re[ee&255];return ve<=8?se>>>8-ve:(se=se<<8|Re[ee>>8&255],ve<=16?se>>>16-ve:(se=se<<8|Re[ee>>16&255],se>>>24-ve))}function Nt(ee,ve){var se=ve&7,ce=ve>>>3;return(ee[ce]|(se<=6?0:ee[ce+1]<<8))>>>se&3}function Bt(ee,ve){var se=ve&7,ce=ve>>>3;return(ee[ce]|(se<=5?0:ee[ce+1]<<8))>>>se&7}function de(ee,ve){var se=ve&7,ce=ve>>>3;return(ee[ce]|(se<=4?0:ee[ce+1]<<8))>>>se&15}function It(ee,ve){var se=ve&7,ce=ve>>>3;return(ee[ce]|(se<=3?0:ee[ce+1]<<8))>>>se&31}function Ot(ee,ve){var se=ve&7,ce=ve>>>3;return(ee[ce]|(se<=1?0:ee[ce+1]<<8))>>>se&127}function rn(ee,ve,se){var ce=ve&7,xe=ve>>>3,Ce=(1<<se)-1,Qe=ee[xe]>>>ce;return se<8-ce||(Qe|=ee[xe+1]<<8-ce,se<16-ce)||(Qe|=ee[xe+2]<<16-ce,se<24-ce)||(Qe|=ee[xe+3]<<24-ce),Qe&Ce}function bt(ee,ve,se){var ce=ve&7,xe=ve>>>3;return ce<=5?ee[xe]|=(se&7)<<ce:(ee[xe]|=se<<ce&255,ee[xe+1]=(se&7)>>8-ce),ve+3}function fn(ee,ve,se){var ce=ve&7,xe=ve>>>3;return se=(se&1)<<ce,ee[xe]|=se,ve+1}function Kt(ee,ve,se){var ce=ve&7,xe=ve>>>3;return se<<=ce,ee[xe]|=se&255,se>>>=8,ee[xe+1]=se,ve+8}function Cn(ee,ve,se){var ce=ve&7,xe=ve>>>3;return se<<=ce,ee[xe]|=se&255,se>>>=8,ee[xe+1]=se&255,ee[xe+2]=se>>>8,ve+16}function _n(ee,ve){var se=ee.length,ce=2*se>ve?2*se:ve+5,xe=0;if(se>=ve)return ee;if(Ai){var Ce=MR(ce);if(ee.copy)ee.copy(Ce);else for(;xe<ee.length;++xe)Ce[xe]=ee[xe];return Ce}else if(Ae){var Qe=new Uint8Array(ce);if(Qe.set)Qe.set(ee);else for(;xe<se;++xe)Qe[xe]=ee[xe];return Qe}return ee.length=ce,ee}function Gn(ee){for(var ve=new Array(ee),se=0;se<ee;++se)ve[se]=0;return ve}function $n(ee,ve,se){var ce=1,xe=0,Ce=0,Qe=0,at=0,et=ee.length,Xe=Ae?new Uint16Array(32):Gn(32);for(Ce=0;Ce<32;++Ce)Xe[Ce]=0;for(Ce=et;Ce<se;++Ce)ee[Ce]=0;et=ee.length;var nt=Ae?new Uint16Array(et):Gn(et);for(Ce=0;Ce<et;++Ce)Xe[xe=ee[Ce]]++,ce<xe&&(ce=xe),nt[Ce]=0;for(Xe[0]=0,Ce=1;Ce<=ce;++Ce)Xe[Ce+16]=at=at+Xe[Ce-1]<<1;for(Ce=0;Ce<et;++Ce)at=ee[Ce],at!=0&&(nt[Ce]=Xe[at+16]++);var kt=0;for(Ce=0;Ce<et;++Ce)if(kt=ee[Ce],kt!=0)for(at=Pt(nt[Ce],ce)>>ce-kt,Qe=(1<<ce+4-kt)-1;Qe>=0;--Qe)ve[at|Qe<<kt]=kt&15|Ce<<4;return ce}var On=Ae?new Uint16Array(512):Gn(512),ti=Ae?new Uint16Array(32):Gn(32);if(!Ae){for(var Fn=0;Fn<512;++Fn)On[Fn]=0;for(Fn=0;Fn<32;++Fn)ti[Fn]=0}(function(){for(var ee=[],ve=0;ve<32;ve++)ee.push(5);$n(ee,ti,32);var se=[];for(ve=0;ve<=143;ve++)se.push(8);for(;ve<=255;ve++)se.push(9);for(;ve<=279;ve++)se.push(7);for(;ve<=287;ve++)se.push(8);$n(se,On,288)})();var pn=(function(){for(var ve=Ae?new Uint8Array(32768):[],se=0,ce=0;se<we.length-1;++se)for(;ce<we[se+1];++ce)ve[ce]=se;for(;ce<32768;++ce)ve[ce]=29;var xe=Ae?new Uint8Array(259):[];for(se=0,ce=0;se<ue.length-1;++se)for(;ce<ue[se+1];++ce)xe[ce]=se;function Ce(at,et){for(var Xe=0;Xe<at.length;){var nt=Math.min(65535,at.length-Xe),kt=Xe+nt==at.length;for(et.write_shift(1,+kt),et.write_shift(2,nt),et.write_shift(2,~nt&65535);nt-- >0;)et[et.l++]=at[Xe++]}return et.l}function Qe(at,et){for(var Xe=0,nt=0,kt=Ae?new Uint16Array(32768):[];nt<at.length;){var Lt=Math.min(65535,at.length-nt);if(Lt<10){for(Xe=bt(et,Xe,+(nt+Lt==at.length)),Xe&7&&(Xe+=8-(Xe&7)),et.l=Xe/8|0,et.write_shift(2,Lt),et.write_shift(2,~Lt&65535);Lt-- >0;)et[et.l++]=at[nt++];Xe=et.l*8;continue}Xe=bt(et,Xe,+(nt+Lt==at.length)+2);for(var Qt=0;Lt-- >0;){var Ut=at[nt];Qt=(Qt<<5^Ut)&32767;var qt=-1,wn=0;if((qt=kt[Qt])&&(qt|=nt&-32768,qt>nt&&(qt-=32768),qt<nt))for(;at[qt+wn]==at[nt+wn]&&wn<250;)++wn;if(wn>2){Ut=xe[wn],Ut<=22?Xe=Kt(et,Xe,Re[Ut+1]>>1)-1:(Kt(et,Xe,3),Xe+=5,Kt(et,Xe,Re[Ut-23]>>5),Xe+=3);var Ni=Ut<8?0:Ut-4>>2;Ni>0&&(Cn(et,Xe,wn-ue[Ut]),Xe+=Ni),Ut=ve[nt-qt],Xe=Kt(et,Xe,Re[Ut]>>3),Xe-=3;var er=Ut<4?0:Ut-2>>1;er>0&&(Cn(et,Xe,nt-qt-we[Ut]),Xe+=er);for(var lr=0;lr<wn;++lr)kt[Qt]=nt&32767,Qt=(Qt<<5^at[nt])&32767,++nt;Lt-=wn-1}else Ut<=143?Ut=Ut+48:Xe=fn(et,Xe,1),Xe=Kt(et,Xe,Re[Ut]),kt[Qt]=nt&32767,++nt}Xe=Kt(et,Xe,0)-1}return et.l=(Xe+7)/8|0,et.l}return function(et,Xe){return et.length<8?Ce(et,Xe):Qe(et,Xe)}})();function An(ee){var ve=mt(50+Math.floor(ee.length*1.1)),se=pn(ee,ve);return ve.slice(0,se)}var gn=Ae?new Uint16Array(32768):Gn(32768),_r=Ae?new Uint16Array(32768):Gn(32768),ci=Ae?new Uint16Array(128):Gn(128),zn=1,qn=1;function ar(ee,ve){var se=It(ee,ve)+257;ve+=5;var ce=It(ee,ve)+1;ve+=5;var xe=de(ee,ve)+4;ve+=4;for(var Ce=0,Qe=Ae?new Uint8Array(19):Gn(19),at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],et=1,Xe=Ae?new Uint8Array(8):Gn(8),nt=Ae?new Uint8Array(8):Gn(8),kt=Qe.length,Lt=0;Lt<xe;++Lt)Qe[Y[Lt]]=Ce=Bt(ee,ve),et<Ce&&(et=Ce),Xe[Ce]++,ve+=3;var Qt=0;for(Xe[0]=0,Lt=1;Lt<=et;++Lt)nt[Lt]=Qt=Qt+Xe[Lt-1]<<1;for(Lt=0;Lt<kt;++Lt)(Qt=Qe[Lt])!=0&&(at[Lt]=nt[Qt]++);var Ut=0;for(Lt=0;Lt<kt;++Lt)if(Ut=Qe[Lt],Ut!=0){Qt=Re[at[Lt]]>>8-Ut;for(var qt=(1<<7-Ut)-1;qt>=0;--qt)ci[Qt|qt<<Ut]=Ut&7|Lt<<3}var wn=[];for(et=1;wn.length<se+ce;)switch(Qt=ci[Ot(ee,ve)],ve+=Qt&7,Qt>>>=3){case 16:for(Ce=3+Nt(ee,ve),ve+=2,Qt=wn[wn.length-1];Ce-- >0;)wn.push(Qt);break;case 17:for(Ce=3+Bt(ee,ve),ve+=3;Ce-- >0;)wn.push(0);break;case 18:for(Ce=11+Ot(ee,ve),ve+=7;Ce-- >0;)wn.push(0);break;default:wn.push(Qt),et<Qt&&(et=Qt);break}var Ni=wn.slice(0,se),er=wn.slice(se);for(Lt=se;Lt<286;++Lt)Ni[Lt]=0;for(Lt=ce;Lt<30;++Lt)er[Lt]=0;return zn=$n(Ni,gn,286),qn=$n(er,_r,30),ve}function bn(ee,ve){if(ee[0]==3&&!(ee[1]&3))return[Ep(ve),2];for(var se=0,ce=0,xe=MR(ve||1<<18),Ce=0,Qe=xe.length>>>0,at=0,et=0;(ce&1)==0;){if(ce=Bt(ee,se),se+=3,ce>>>1)ce>>1==1?(at=9,et=5):(se=ar(ee,se),at=zn,et=qn);else{se&7&&(se+=8-(se&7));var Xe=ee[se>>>3]|ee[(se>>>3)+1]<<8;if(se+=32,Xe>0)for(!ve&&Qe<Ce+Xe&&(xe=_n(xe,Ce+Xe),Qe=xe.length);Xe-- >0;)xe[Ce++]=ee[se>>>3],se+=8;continue}for(;;){!ve&&Qe<Ce+32767&&(xe=_n(xe,Ce+32767),Qe=xe.length);var nt=rn(ee,se,at),kt=ce>>>1==1?On[nt]:gn[nt];if(se+=kt&15,kt>>>=4,(kt>>>8&255)===0)xe[Ce++]=kt;else{if(kt==256)break;kt-=257;var Lt=kt<8?0:kt-4>>2;Lt>5&&(Lt=0);var Qt=Ce+ue[kt];Lt>0&&(Qt+=rn(ee,se,Lt),se+=Lt),nt=rn(ee,se,et),kt=ce>>>1==1?ti[nt]:_r[nt],se+=kt&15,kt>>>=4;var Ut=kt<4?0:kt-2>>1,qt=we[kt];for(Ut>0&&(qt+=rn(ee,se,Ut),se+=Ut),!ve&&Qe<Qt&&(xe=_n(xe,Qt+100),Qe=xe.length);Ce<Qt;)xe[Ce]=xe[Ce-qt],++Ce}}}return ve?[xe,se+7>>>3]:[xe.slice(0,Ce),se+7>>>3]}function Wi(ee,ve){var se=ee.slice(ee.l||0),ce=bn(se,ve);return ee.l+=ce[1],ce[0]}function Sn(ee,ve){if(ee)typeof console<"u"&&console.error(ve);else throw new Error(ve)}function In(ee,ve){var se=ee;ms(se,0);var ce=[],xe=[],Ce={FileIndex:ce,FullPaths:xe};oe(Ce,{root:ve.root});for(var Qe=se.length-4;(se[Qe]!=80||se[Qe+1]!=75||se[Qe+2]!=5||se[Qe+3]!=6)&&Qe>=0;)--Qe;se.l=Qe+4,se.l+=4;var at=se.read_shift(2);se.l+=6;var et=se.read_shift(4);for(se.l=et,Qe=0;Qe<at;++Qe){se.l+=20;var Xe=se.read_shift(4),nt=se.read_shift(4),kt=se.read_shift(2),Lt=se.read_shift(2),Qt=se.read_shift(2);se.l+=8;var Ut=se.read_shift(4),qt=u(se.slice(se.l+kt,se.l+kt+Lt));se.l+=kt+Lt+Qt;var wn=se.l;se.l=Ut+4,sr(se,Xe,nt,Ce,qt),se.l=wn}return Ce}function sr(ee,ve,se,ce,xe){ee.l+=2;var Ce=ee.read_shift(2),Qe=ee.read_shift(2),at=d(ee);if(Ce&8257)throw new Error("Unsupported ZIP encryption");for(var et=ee.read_shift(4),Xe=ee.read_shift(4),nt=ee.read_shift(4),kt=ee.read_shift(2),Lt=ee.read_shift(2),Qt="",Ut=0;Ut<kt;++Ut)Qt+=String.fromCharCode(ee[ee.l++]);if(Lt){var qt=u(ee.slice(ee.l,ee.l+Lt));(qt[21589]||{}).mt&&(at=qt[21589].mt),((xe||{})[21589]||{}).mt&&(at=xe[21589].mt)}ee.l+=Lt;var wn=ee.slice(ee.l,ee.l+Xe);switch(Qe){case 8:wn=Q(ee,nt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Qe)}var Ni=!1;Ce&8&&(et=ee.read_shift(4),et==134695760&&(et=ee.read_shift(4),Ni=!0),Xe=ee.read_shift(4),nt=ee.read_shift(4)),Xe!=ve&&Sn(Ni,"Bad compressed size: "+ve+" != "+Xe),nt!=se&&Sn(Ni,"Bad uncompressed size: "+se+" != "+nt),Yo(ce,Qt,wn,{unsafe:!0,mt:at})}function Xn(ee,ve){var se=ve||{},ce=[],xe=[],Ce=mt(1),Qe=se.compression?8:0,at=0,et=!1;et&&(at|=8);var Xe=0,nt=0,kt=0,Lt=0,Qt=ee.FullPaths[0],Ut=Qt,qt=ee.FileIndex[0],wn=[],Ni=0;for(Xe=1;Xe<ee.FullPaths.length;++Xe)if(Ut=ee.FullPaths[Xe].slice(Qt.length),qt=ee.FileIndex[Xe],!(!qt.size||!qt.content||Ut=="Sh33tJ5")){var er=kt,lr=mt(Ut.length);for(nt=0;nt<Ut.length;++nt)lr.write_shift(1,Ut.charCodeAt(nt)&127);lr=lr.slice(0,lr.l),wn[Lt]=Sse.buf(qt.content,0);var go=qt.content;Qe==8&&(go=W(go)),Ce=mt(30),Ce.write_shift(4,67324752),Ce.write_shift(2,20),Ce.write_shift(2,at),Ce.write_shift(2,Qe),qt.mt?s(Ce,qt.mt):Ce.write_shift(4,0),Ce.write_shift(-4,at&8?0:wn[Lt]),Ce.write_shift(4,at&8?0:go.length),Ce.write_shift(4,at&8?0:qt.content.length),Ce.write_shift(2,lr.length),Ce.write_shift(2,0),kt+=Ce.length,ce.push(Ce),kt+=lr.length,ce.push(lr),kt+=go.length,ce.push(go),at&8&&(Ce=mt(12),Ce.write_shift(-4,wn[Lt]),Ce.write_shift(4,go.length),Ce.write_shift(4,qt.content.length),kt+=Ce.l,ce.push(Ce)),Ce=mt(46),Ce.write_shift(4,33639248),Ce.write_shift(2,0),Ce.write_shift(2,20),Ce.write_shift(2,at),Ce.write_shift(2,Qe),Ce.write_shift(4,0),Ce.write_shift(-4,wn[Lt]),Ce.write_shift(4,go.length),Ce.write_shift(4,qt.content.length),Ce.write_shift(2,lr.length),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(4,0),Ce.write_shift(4,er),Ni+=Ce.l,xe.push(Ce),Ni+=lr.length,xe.push(lr),++Lt}return Ce=mt(22),Ce.write_shift(4,101010256),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,Lt),Ce.write_shift(2,Lt),Ce.write_shift(4,Ni),Ce.write_shift(4,kt),Ce.write_shift(2,0),zo([zo(ce),zo(xe),Ce])}var Mn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Si(ee,ve){if(ee.ctype)return ee.ctype;var se=ee.name||"",ce=se.match(/\.([^\.]+)$/);return ce&&Mn[ce[1]]||ve&&(ce=(se=ve).match(/[\.\\]([^\.\\])+$/),ce&&Mn[ce[1]])?Mn[ce[1]]:"application/octet-stream"}function _c(ee){for(var ve=jh(ee),se=[],ce=0;ce<ve.length;ce+=76)se.push(ve.slice(ce,ce+76));return se.join(`\r
`)+`\r
`}function uo(ee){var ve=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var nt=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(nt.length==1?"0"+nt:nt)});ve=ve.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ve.charAt(0)==`
`&&(ve="=0D"+ve.slice(1)),ve=ve.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var se=[],ce=ve.split(`\r
`),xe=0;xe<ce.length;++xe){var Ce=ce[xe];if(Ce.length==0){se.push("");continue}for(var Qe=0;Qe<Ce.length;){var at=76,et=Ce.slice(Qe,Qe+at);et.charAt(at-1)=="="?at--:et.charAt(at-2)=="="?at-=2:et.charAt(at-3)=="="&&(at-=3),et=Ce.slice(Qe,Qe+at),Qe+=at,Qe<Ce.length&&(et+="="),se.push(et)}}return se.join(`\r
`)}function qs(ee){for(var ve=[],se=0;se<ee.length;++se){for(var ce=ee[se];se<=ee.length&&ce.charAt(ce.length-1)=="=";)ce=ce.slice(0,ce.length-1)+ee[++se];ve.push(ce)}for(var xe=0;xe<ve.length;++xe)ve[xe]=ve[xe].replace(/[=][0-9A-Fa-f]{2}/g,function(Ce){return String.fromCharCode(parseInt(Ce.slice(1),16))});return yl(ve.join(`\r
`))}function vs(ee,ve,se){for(var ce="",xe="",Ce="",Qe,at=0;at<10;++at){var et=ve[at];if(!et||et.match(/^\s*$/))break;var Xe=et.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":ce=Xe[2].trim();break;case"content-type":Ce=Xe[2].trim();break;case"content-transfer-encoding":xe=Xe[2].trim();break}}switch(++at,xe.toLowerCase()){case"base64":Qe=yl(Zc(ve.slice(at).join("")));break;case"quoted-printable":Qe=qs(ve.slice(at));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+xe)}var nt=Yo(ee,ce.slice(se.length),Qe,{unsafe:!0});Ce&&(nt.ctype=Ce)}function Pn(ee,ve){if(Je(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var se=ve&&ve.root||"",ce=(Ai&&Buffer.isBuffer(ee)?ee.toString("binary"):Je(ee)).split(`\r
`),xe=0,Ce="";for(xe=0;xe<ce.length;++xe)if(Ce=ce[xe],!!/^Content-Location:/i.test(Ce)&&(Ce=Ce.slice(Ce.indexOf("file")),se||(se=Ce.slice(0,Ce.lastIndexOf("/")+1)),Ce.slice(0,se.length)!=se))for(;se.length>0&&(se=se.slice(0,se.length-1),se=se.slice(0,se.lastIndexOf("/")+1),Ce.slice(0,se.length)!=se););var Qe=(ce[1]||"").match(/boundary="(.*?)"/);if(!Qe)throw new Error("MAD cannot find boundary");var at="--"+(Qe[1]||""),et=[],Xe=[],nt={FileIndex:et,FullPaths:Xe};oe(nt);var kt,Lt=0;for(xe=0;xe<ce.length;++xe){var Qt=ce[xe];Qt!==at&&Qt!==at+"--"||(Lt++&&vs(nt,ce.slice(kt,xe),se),kt=xe)}return nt}function Hs(ee,ve){var se=ve||{},ce=se.boundary||"SheetJS";ce="------="+ce;for(var xe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ce.slice(2)+'"',"","",""],Ce=ee.FullPaths[0],Qe=Ce,at=ee.FileIndex[0],et=1;et<ee.FullPaths.length;++et)if(Qe=ee.FullPaths[et].slice(Ce.length),at=ee.FileIndex[et],!(!at.size||!at.content||Qe=="Sh33tJ5")){Qe=Qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wn){return"_x"+wn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wn){return"_u"+wn.charCodeAt(0).toString(16)+"_"});for(var Xe=at.content,nt=Ai&&Buffer.isBuffer(Xe)?Xe.toString("binary"):Je(Xe),kt=0,Lt=Math.min(1024,nt.length),Qt=0,Ut=0;Ut<=Lt;++Ut)(Qt=nt.charCodeAt(Ut))>=32&&Qt<128&&++kt;var qt=kt>=Lt*4/5;xe.push(ce),xe.push("Content-Location: "+(se.root||"file:///C:/SheetJS/")+Qe),xe.push("Content-Transfer-Encoding: "+(qt?"quoted-printable":"base64")),xe.push("Content-Type: "+Si(at,Qe)),xe.push(""),xe.push(qt?uo(nt):_c(nt))}return xe.push(ce+`--\r
`),xe.join(`\r
`)}function Gs(ee){var ve={};return oe(ve,ee),ve}function Yo(ee,ve,se,ce){var xe=ce&&ce.unsafe;xe||oe(ee);var Ce=!xe&&Zi.find(ee,ve);if(!Ce){var Qe=ee.FullPaths[0];ve.slice(0,Qe.length)==Qe?Qe=ve:(Qe.slice(-1)!="/"&&(Qe+="/"),Qe=(Qe+ve).replace("//","/")),Ce={name:r(ve),type:2},ee.FileIndex.push(Ce),ee.FullPaths.push(Qe),xe||Zi.utils.cfb_gc(ee)}return Ce.content=se,Ce.size=se?se.length:0,ce&&(ce.CLSID&&(Ce.clsid=ce.CLSID),ce.mt&&(Ce.mt=ce.mt),ce.ct&&(Ce.ct=ce.ct)),Ce}function ka(ee,ve){oe(ee);var se=Zi.find(ee,ve);if(se){for(var ce=0;ce<ee.FileIndex.length;++ce)if(ee.FileIndex[ce]==se)return ee.FileIndex.splice(ce,1),ee.FullPaths.splice(ce,1),!0}return!1}function vr(ee,ve,se){oe(ee);var ce=Zi.find(ee,ve);if(ce){for(var xe=0;xe<ee.FileIndex.length;++xe)if(ee.FileIndex[xe]==ce)return ee.FileIndex[xe].name=r(se),ee.FullPaths[xe]=se,!0}return!1}function qr(ee){X(ee,!0)}return t.find=z,t.read=ze,t.parse=C,t.write=_t,t.writeFile=Te,t.utils={cfb_new:Gs,cfb_add:Yo,cfb_del:ka,cfb_mov:vr,cfb_gc:qr,ReadShift:Fh,CheckField:R7,prep_blob:ms,bconcat:zo,use_zlib:U,_deflateRaw:An,_inflateRaw:Wi,consts:Fe},t})(),$C;function Pse(n){return typeof n=="string"?mb(n):Array.isArray(n)?Qae(n):n}function $h(n,t,e){if(typeof $C<"u"&&$C.writeFileSync)return e?$C.writeFileSync(n,t,e):$C.writeFileSync(n,t);if(typeof Deno<"u"){if(e&&typeof t=="string")switch(e){case"utf8":t=new TextEncoder(e).encode(t);break;case"binary":t=mb(t);break;default:throw new Error("Unsupported encoding "+e)}return Deno.writeFileSync(n,t)}var i=e=="utf8"?Jc(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(i,n);if(typeof Blob<"u"){var r=new Blob([Pse(i)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(r,n);if(typeof saveAs<"u")return saveAs(r,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(r);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=n,d.href=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(n);return u.open("w"),u.encoding="binary",Array.isArray(t)&&(t=Gh(t)),u.write(t),u.close(),t}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+n)}function Go(n){for(var t=Object.keys(n),e=[],i=0;i<t.length;++i)Object.prototype.hasOwnProperty.call(n,t[i])&&e.push(t[i]);return e}function IR(n,t){for(var e=[],i=Go(n),r=0;r!==i.length;++r)e[n[i[r]][t]]==null&&(e[n[i[r]][t]]=i[r]);return e}function aO(n){for(var t=[],e=Go(n),i=0;i!==e.length;++i)t[n[e[i]]]=e[i];return t}function fb(n){for(var t=[],e=Go(n),i=0;i!==e.length;++i)t[n[e[i]]]=parseInt(e[i],10);return t}function wse(n){for(var t=[],e=Go(n),i=0;i!==e.length;++i)t[n[e[i]]]==null&&(t[n[e[i]]]=[]),t[n[e[i]]].push(e[i]);return t}var nb=new Date(1899,11,30,0,0,0);function Ga(n,t){var e=n.getTime();t&&(e-=1462*24*60*60*1e3);var i=nb.getTime()+(n.getTimezoneOffset()-nb.getTimezoneOffset())*6e4;return(e-i)/(1440*60*1e3)}var b7=new Date,Ese=nb.getTime()+(b7.getTimezoneOffset()-nb.getTimezoneOffset())*6e4,DR=b7.getTimezoneOffset();function M7(n){var t=new Date;return t.setTime(n*24*60*60*1e3+Ese),t.getTimezoneOffset()!==DR&&t.setTime(t.getTime()+(t.getTimezoneOffset()-DR)*6e4),t}var AR=new Date("2017-02-19T19:06:09.000Z"),S7=isNaN(AR.getFullYear())?new Date("2/19/17"):AR,Ose=S7.getFullYear()==2017;function Ea(n,t){var e=new Date(n);if(Ose)return t>0?e.setTime(e.getTime()+e.getTimezoneOffset()*60*1e3):t<0&&e.setTime(e.getTime()-e.getTimezoneOffset()*60*1e3),e;if(n instanceof Date)return n;if(S7.getFullYear()==1917&&!isNaN(e.getFullYear())){var i=e.getFullYear();return n.indexOf(""+i)>-1||e.setFullYear(e.getFullYear()+100),e}var r=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function hb(n,t){if(Ai&&Buffer.isBuffer(n)){if(t){if(n[0]==255&&n[1]==254)return Jc(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return Jc(Kae(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(n[0]==255&&n[1]==254)return Jc(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return Jc(new TextDecoder("utf-16be").decode(n.slice(2)))}var e={"\u20AC":"\x80","\u201A":"\x82",\u0192:"\x83","\u201E":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02C6":"\x88","\u2030":"\x89",\u0160:"\x8A","\u2039":"\x8B",\u0152:"\x8C",\u017D:"\x8E","\u2018":"\x91","\u2019":"\x92","\u201C":"\x93","\u201D":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02DC":"\x98","\u2122":"\x99",\u0161:"\x9A","\u203A":"\x9B",\u0153:"\x9C",\u017E:"\x9E",\u0178:"\x9F"};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return e[s]||s})}catch{}for(var i=[],r=0;r!=n.length;++r)i.push(String.fromCharCode(n[r]));return i.join("")}function $a(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=$a(n[e]));return t}function Rr(n,t){for(var e="";e.length<t;)e+=n;return e}function Qc(n){var t=Number(n);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(n))return t;var e=1,i=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return e*=100,""});return!isNaN(t=Number(i))||(i=i.replace(/[(](.*)[)]/,function(r,s){return e=-e,s}),!isNaN(t=Number(i)))?t/e:t}var Tse=["january","february","march","april","may","june","july","august","september","october","november","december"];function Wh(n){var t=new Date(n),e=new Date(NaN),i=t.getYear(),r=t.getMonth(),s=t.getDate();if(isNaN(s))return e;var d=n.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&Tse.indexOf(d)==-1)return e}else if(d.match(/[a-z]/))return e;return i<0||i>8099?e:(r>0||s>1)&&i!=101?t:n.match(/[^-0-9:,\/\\]/)?e:t}function ei(n,t,e){if(n.FullPaths){if(typeof e=="string"){var i;return Ai?i=td(e):i=Xae(e),Zi.utils.cfb_add(n,t,i)}Zi.utils.cfb_add(n,t,e)}else n.file(t,e)}function sO(){return Zi.utils.cfb_new()}var eo=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;var kse={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},lO=aO(kse);var cO=/[&<>'"]/g,Ise=/[\u0000-\u0008\u000b-\u001f]/g;function $i(n){var t=n+"";return t.replace(cO,function(e){return lO[e]}).replace(Ise,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function RR(n){return $i(n).replace(/ /g,"_x0020_")}var P7=/[\u0000-\u001f]/g;function Dse(n){var t=n+"";return t.replace(cO,function(e){return lO[e]}).replace(/\n/g,"<br/>").replace(P7,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ase(n){var t=n+"";return t.replace(cO,function(e){return lO[e]}).replace(P7,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}function Rse(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Fse(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $3(n){for(var t="",e=0,i=0,r=0,s=0,d=0,u=0;e<n.length;){if(i=n.charCodeAt(e++),i<128){t+=String.fromCharCode(i);continue}if(r=n.charCodeAt(e++),i>191&&i<224){d=(i&31)<<6,d|=r&63,t+=String.fromCharCode(d);continue}if(s=n.charCodeAt(e++),i<240){t+=String.fromCharCode((i&15)<<12|(r&63)<<6|s&63);continue}d=n.charCodeAt(e++),u=((i&7)<<18|(r&63)<<12|(s&63)<<6|d&63)-65536,t+=String.fromCharCode(55296+(u>>>10&1023)),t+=String.fromCharCode(56320+(u&1023))}return t}function FR(n){var t=Ep(2*n.length),e,i,r=1,s=0,d=0,u;for(i=0;i<n.length;i+=r)r=1,(u=n.charCodeAt(i))<128?e=u:u<224?(e=(u&31)*64+(n.charCodeAt(i+1)&63),r=2):u<240?(e=(u&15)*4096+(n.charCodeAt(i+1)&63)*64+(n.charCodeAt(i+2)&63),r=3):(r=4,e=(u&7)*262144+(n.charCodeAt(i+1)&63)*4096+(n.charCodeAt(i+2)&63)*64+(n.charCodeAt(i+3)&63),e-=65536,d=55296+(e>>>10&1023),e=56320+(e&1023)),d!==0&&(t[s++]=d&255,t[s++]=d>>>8,d=0),t[s++]=e%256,t[s++]=e>>>8;return t.slice(0,s).toString("ucs2")}function NR(n){return td(n,"binary").toString("utf8")}var YC="foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3",Rh=Ai&&(NR(YC)==$3(YC)&&NR||FR(YC)==$3(YC)&&FR)||$3,Jc=Ai?function(n){return td(n,"utf8").toString("binary")}:function(n){for(var t=[],e=0,i=0,r=0;e<n.length;)switch(i=n.charCodeAt(e++),!0){case i<128:t.push(String.fromCharCode(i));break;case i<2048:t.push(String.fromCharCode(192+(i>>6))),t.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,r=n.charCodeAt(e++)-56320+(i<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(i>>12))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)))}return t.join("")};var Nse=(function(){var n=[["nbsp"," "],["middot","\xB7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(e){for(var i=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<n.length;++r)i=i.replace(n[r][0],n[r][1]);return i}})();var w7=/(^\s|\s$|\n)/;function qo(n,t){return"<"+n+(t.match(w7)?' xml:space="preserve"':"")+">"+t+"</"+n+">"}function zh(n){return Go(n).map(function(t){return" "+t+'="'+n[t]+'"'}).join("")}function zt(n,t,e){return"<"+n+(e!=null?zh(e):"")+(t!=null?(t.match(w7)?' xml:space="preserve"':"")+">"+t+"</"+n:"/")+">"}function tO(n,t){try{return n.toISOString().replace(/\.\d*/,"")}catch(e){if(t)throw e}return""}function Lse(n,t){switch(typeof n){case"string":var e=zt("vt:lpwstr",$i(n));return t&&(e=e.replace(/&quot;/g,"_x0022_")),e;case"number":return zt((n|0)==n?"vt:i4":"vt:r8",$i(String(n)));case"boolean":return zt("vt:bool",n?"true":"false")}if(n instanceof Date)return zt("vt:filetime",tO(n));throw new Error("Unable to serialize "+n)}var Mo={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Mu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],us={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Vse(n,t){for(var e=1-2*(n[t+7]>>>7),i=((n[t+7]&127)<<4)+(n[t+6]>>>4&15),r=n[t+6]&15,s=5;s>=0;--s)r=r*256+n[t+s];return i==2047?r==0?e*(1/0):NaN:(i==0?i=-1022:(i-=1023,r+=Math.pow(2,52)),e*Math.pow(2,i-52)*r)}function Bse(n,t,e){var i=(t<0||1/t==-1/0?1:0)<<7,r=0,s=0,d=i?-t:t;isFinite(d)?d==0?r=s=0:(r=Math.floor(Math.log(d)/Math.LN2),s=d*Math.pow(2,52-r),r<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?r=-1022:(s-=Math.pow(2,52),r+=1023)):(r=2047,s=isNaN(t)?26985:0);for(var u=0;u<=5;++u,s/=256)n[e+u]=s&255;n[e+6]=(r&15)<<4|s&15,n[e+7]=r>>4|i}var LR=function(n){for(var t=[],e=10240,i=0;i<n[0].length;++i)if(n[0][i])for(var r=0,s=n[0][i].length;r<s;r+=e)t.push.apply(t,n[0][i].slice(r,r+e));return t},VR=Ai?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(t){return Buffer.isBuffer(t)?t:td(t)})):LR(n)}:LR,BR=function(n,t,e){for(var i=[],r=t;r<e;r+=2)i.push(String.fromCharCode(Ah(n,r)));return i.join("").replace(hu,"")},_b=Ai?function(n,t,e){return Buffer.isBuffer(n)?n.toString("utf16le",t,e).replace(hu,""):BR(n,t,e)}:BR,UR=function(n,t,e){for(var i=[],r=t;r<t+e;++r)i.push(("0"+n[r].toString(16)).slice(-2));return i.join("")},E7=Ai?function(n,t,e){return Buffer.isBuffer(n)?n.toString("hex",t,t+e):UR(n,t,e)}:UR,jR=function(n,t,e){for(var i=[],r=t;r<e;r++)i.push(String.fromCharCode(gu(n,r)));return i.join("")},Su=Ai?function(t,e,i){return Buffer.isBuffer(t)?t.toString("utf8",e,i):jR(t,e,i)}:jR,O7=function(n,t){var e=bo(n,t);return e>0?Su(n,t+4,t+4+e-1):""},dO=O7,T7=function(n,t){var e=bo(n,t);return e>0?Su(n,t+4,t+4+e-1):""},pO=T7,k7=function(n,t){var e=2*bo(n,t);return e>0?Su(n,t+4,t+4+e-1):""},mO=k7,I7=function(t,e){var i=bo(t,e);return i>0?_b(t,e+4,e+4+i):""},uO=I7,D7=function(n,t){var e=bo(n,t);return e>0?Su(n,t+4,t+4+e):""},gO=D7,A7=function(n,t){return Vse(n,t)},ib=A7,fO=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Ai&&(dO=function(t,e){if(!Buffer.isBuffer(t))return O7(t,e);var i=t.readUInt32LE(e);return i>0?t.toString("utf8",e+4,e+4+i-1):""},pO=function(t,e){if(!Buffer.isBuffer(t))return T7(t,e);var i=t.readUInt32LE(e);return i>0?t.toString("utf8",e+4,e+4+i-1):""},mO=function(t,e){if(!Buffer.isBuffer(t))return k7(t,e);var i=2*t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+i-1)},uO=function(t,e){if(!Buffer.isBuffer(t))return I7(t,e);var i=t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+i)},gO=function(t,e){if(!Buffer.isBuffer(t))return D7(t,e);var i=t.readUInt32LE(e);return t.toString("utf8",e+4,e+4+i)},ib=function(t,e){return Buffer.isBuffer(t)?t.readDoubleLE(e):A7(t,e)},fO=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function Use(){_b=function(n,t,e){return rr.utils.decode(1200,n.slice(t,e)).replace(hu,"")},Su=function(n,t,e){return rr.utils.decode(65001,n.slice(t,e))},dO=function(n,t){var e=bo(n,t);return e>0?rr.utils.decode(Cu,n.slice(t+4,t+4+e-1)):""},pO=function(n,t){var e=bo(n,t);return e>0?rr.utils.decode(Pp,n.slice(t+4,t+4+e-1)):""},mO=function(n,t){var e=2*bo(n,t);return e>0?rr.utils.decode(1200,n.slice(t+4,t+4+e-1)):""},uO=function(n,t){var e=bo(n,t);return e>0?rr.utils.decode(1200,n.slice(t+4,t+4+e)):""},gO=function(n,t){var e=bo(n,t);return e>0?rr.utils.decode(65001,n.slice(t+4,t+4+e)):""}}typeof rr<"u"&&Use();var gu=function(n,t){return n[t]},Ah=function(n,t){return n[t+1]*256+n[t]},jse=function(n,t){var e=n[t+1]*256+n[t];return e<32768?e:(65535-e+1)*-1},bo=function(n,t){return n[t+3]*(1<<24)+(n[t+2]<<16)+(n[t+1]<<8)+n[t]},Sp=function(n,t){return n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]},Wse=function(n,t){return n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]};function Fh(n,t){var e="",i,r,s=[],d,u,h,v;switch(t){case"dbcs":if(v=this.l,Ai&&Buffer.isBuffer(this))e=this.slice(this.l,this.l+2*n).toString("utf16le");else for(h=0;h<n;++h)e+=String.fromCharCode(Ah(this,v)),v+=2;n*=2;break;case"utf8":e=Su(this,this.l,this.l+n);break;case"utf16le":n*=2,e=_b(this,this.l,this.l+n);break;case"wstr":if(typeof rr<"u")e=rr.utils.decode(Pp,this.slice(this.l,this.l+2*n));else return Fh.call(this,n,"dbcs");n=2*n;break;case"lpstr-ansi":e=dO(this,this.l),n=4+bo(this,this.l);break;case"lpstr-cp":e=pO(this,this.l),n=4+bo(this,this.l);break;case"lpwstr":e=mO(this,this.l),n=4+2*bo(this,this.l);break;case"lpp4":n=4+bo(this,this.l),e=uO(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+bo(this,this.l),e=gO(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,e="";(d=gu(this,this.l+n++))!==0;)s.push(qC(d));e=s.join("");break;case"_wstr":for(n=0,e="";(d=Ah(this,this.l+n))!==0;)s.push(qC(d)),n+=2;n+=2,e=s.join("");break;case"dbcs-cont":for(e="",v=this.l,h=0;h<n;++h){if(this.lens&&this.lens.indexOf(v)!==-1)return d=gu(this,v),this.l=v+1,u=Fh.call(this,n-h,d?"dbcs-cont":"sbcs-cont"),s.join("")+u;s.push(qC(Ah(this,v))),v+=2}e=s.join(""),n*=2;break;case"cpstr":if(typeof rr<"u"){e=rr.utils.decode(Pp,this.slice(this.l,this.l+n));break}case"sbcs-cont":for(e="",v=this.l,h=0;h!=n;++h){if(this.lens&&this.lens.indexOf(v)!==-1)return d=gu(this,v),this.l=v+1,u=Fh.call(this,n-h,d?"dbcs-cont":"sbcs-cont"),s.join("")+u;s.push(qC(gu(this,v))),v+=1}e=s.join("");break;default:switch(n){case 1:return i=gu(this,this.l),this.l++,i;case 2:return i=(t==="i"?jse:Ah)(this,this.l),this.l+=2,i;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(i=(n>0?Sp:Wse)(this,this.l),this.l+=4,i):(r=bo(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return n==8?r=ib(this,this.l):r=ib([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;n=8;case 16:e=E7(this,this.l,n);break}}return this.l+=n,e}var zse=function(n,t,e){n[e]=t&255,n[e+1]=t>>>8&255,n[e+2]=t>>>16&255,n[e+3]=t>>>24&255},qse=function(n,t,e){n[e]=t&255,n[e+1]=t>>8&255,n[e+2]=t>>16&255,n[e+3]=t>>24&255},Hse=function(n,t,e){n[e]=t&255,n[e+1]=t>>>8&255};function Gse(n,t,e){var i=0,r=0;if(e==="dbcs"){for(r=0;r!=t.length;++r)Hse(this,t.charCodeAt(r),this.l+2*r);i=2*t.length}else if(e==="sbcs"){if(typeof rr<"u"&&Cu==874)for(r=0;r!=t.length;++r){var s=rr.utils.encode(Cu,t.charAt(r));this[this.l+r]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;i=t.length}else if(e==="hex"){for(;r<n;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(e==="utf16le"){var d=Math.min(this.l+n,this.length);for(r=0;r<Math.min(t.length,n);++r){var u=t.charCodeAt(r);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<d;)this[this.l++]=0;return this}else switch(n){case 1:i=1,this[this.l]=t&255;break;case 2:i=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:i=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:i=4,zse(this,t,this.l);break;case 8:if(i=8,e==="f"){Bse(this,t,this.l);break}case 16:break;case-4:i=4,qse(this,t,this.l);break}return this.l+=i,this}function R7(n,t){var e=E7(this,this.l,n.length>>1);if(e!==n)throw new Error(t+"Expected "+n+" saw "+e);this.l+=n.length>>1}function ms(n,t){n.l=t,n.read_shift=Fh,n.chk=R7,n.write_shift=Gse}function oc(n,t){n.l+=t}function mt(n){var t=Ep(n);return ms(t,0),t}function Ha(){var n=[],t=Ai?256:2048,e=function(v){var C=mt(v);return ms(C,0),C},i=e(t),r=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&n.push(i),i=null)},s=function(v){return i&&v<i.length-i.l?i:(r(),i=e(Math.max(v+1,t)))},d=function(){return r(),zo(n)},u=function(v){r(),i=v,i.l==null&&(i.l=i.length),s(t)};return{next:s,push:u,end:d,_bufs:n}}function St(n,t,e,i){var r=+t,s;if(!isNaN(r)){i||(i=Bme[r].p||(e||[]).length||0),s=1+(r>=128?1:0)+1,i>=128&&++s,i>=16384&&++s,i>=2097152&&++s;var d=n.next(s);r<=127?d.write_shift(1,r):(d.write_shift(1,(r&127)+128),d.write_shift(1,r>>7));for(var u=0;u!=4;++u)if(i>=128)d.write_shift(1,(i&127)+128),i>>=7;else{d.write_shift(1,i);break}i>0&&fO(e)&&n.push(e)}}function Nh(n,t,e){var i=$a(n);if(t.s?(i.cRel&&(i.c+=t.s.c),i.rRel&&(i.r+=t.s.r)):(i.cRel&&(i.c+=t.c),i.rRel&&(i.r+=t.r)),!e||e.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function WR(n,t,e){var i=$a(n);return i.s=Nh(i.s,t.s,e),i.e=Nh(i.e,t.s,e),i}function Lh(n,t){if(n.cRel&&n.c<0)for(n=$a(n);n.c<0;)n.c+=t>8?16384:256;if(n.rRel&&n.r<0)for(n=$a(n);n.r<0;)n.r+=t>8?1048576:t>5?65536:16384;var e=Yi(n);return!n.cRel&&n.cRel!=null&&(e=Jse(e)),!n.rRel&&n.rRel!=null&&(e=$se(e)),e}function Y3(n,t){return n.s.r==0&&!n.s.rRel&&n.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+aa(n.s.c)+":"+(n.e.cRel?"":"$")+aa(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(t.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Ho(n.s.r)+":"+(n.e.rRel?"":"$")+Ho(n.e.r):Lh(n.s,t.biff)+":"+Lh(n.e,t.biff)}function hO(n){return parseInt(Yse(n),10)-1}function Ho(n){return""+(n+1)}function $se(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Yse(n){return n.replace(/\$(\d+)$/,"$1")}function _O(n){for(var t=Kse(n),e=0,i=0;i!==t.length;++i)e=26*e+t.charCodeAt(i)-64;return e-1}function aa(n){if(n<0)throw new Error("invalid column "+n);var t="";for(++n;n;n=Math.floor((n-1)/26))t=String.fromCharCode((n-1)%26+65)+t;return t}function Jse(n){return n.replace(/^([A-Z])/,"$$$1")}function Kse(n){return n.replace(/^\$([A-Z])/,"$1")}function Qse(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function So(n){for(var t=0,e=0,i=0;i<n.length;++i){var r=n.charCodeAt(i);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(e=26*e+(r-64))}return{c:e-1,r:t-1}}function Yi(n){for(var t=n.c+1,e="";t;t=(t-1)/26|0)e=String.fromCharCode((t-1)%26+65)+e;return e+(n.r+1)}function gs(n){var t=n.indexOf(":");return t==-1?{s:So(n),e:So(n)}:{s:So(n.slice(0,t)),e:So(n.slice(t+1))}}function Zr(n,t){return typeof t>"u"||typeof t=="number"?Zr(n.s,n.e):(typeof n!="string"&&(n=Yi(n)),typeof t!="string"&&(t=Yi(t)),n==t?n:n+":"+t)}function hr(n){var t={s:{c:0,r:0},e:{c:0,r:0}},e=0,i=0,r=0,s=n.length;for(e=0;i<s&&!((r=n.charCodeAt(i)-64)<1||r>26);++i)e=26*e+r;for(t.s.c=--e,e=0;i<s&&!((r=n.charCodeAt(i)-48)<0||r>9);++i)e=10*e+r;if(t.s.r=--e,i===s||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++i,e=0;i!=s&&!((r=n.charCodeAt(i)-64)<1||r>26);++i)e=26*e+r;for(t.e.c=--e,e=0;i!=s&&!((r=n.charCodeAt(i)-48)<0||r>9);++i)e=10*e+r;return t.e.r=--e,t}function zR(n,t){var e=n.t=="d"&&t instanceof Date;if(n.z!=null)try{return n.w=o0(n.z,e?Ga(t):t)}catch{}try{return n.w=o0((n.XF||{}).numFmtId||(e?14:0),e?Ga(t):t)}catch{return""+t}}function ed(n,t,e){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&e&&e.dateNF&&(n.z=e.dateNF),n.t=="e"?Yh[n.v]||n.v:t==null?zR(n,n.v):zR(n,t))}function kp(n,t){var e=t&&t.sheet?t.sheet:"Sheet1",i={};return i[e]=n,{SheetNames:[e],Sheets:i}}function F7(n,t,e){var i=e||{},r=n?Array.isArray(n):i.dense;rc!=null&&r==null&&(r=rc);var s=n||(r?[]:{}),d=0,u=0;if(s&&i.origin!=null){if(typeof i.origin=="number")d=i.origin;else{var h=typeof i.origin=="string"?So(i.origin):i.origin;d=h.r,u=h.c}s["!ref"]||(s["!ref"]="A1:A1")}var v={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var C=hr(s["!ref"]);v.s.c=C.s.c,v.s.r=C.s.r,v.e.c=Math.max(v.e.c,C.e.c),v.e.r=Math.max(v.e.r,C.e.r),d==-1&&(v.e.r=d=C.e.r+1)}for(var O=0;O!=t.length;++O)if(t[O]){if(!Array.isArray(t[O]))throw new Error("aoa_to_sheet expects an array of arrays");for(var T=0;T!=t[O].length;++T)if(!(typeof t[O][T]>"u")){var w={v:t[O][T]},A=d+O,I=u+T;if(v.s.r>A&&(v.s.r=A),v.s.c>I&&(v.s.c=I),v.e.r<A&&(v.e.r=A),v.e.c<I&&(v.e.c=I),t[O][T]&&typeof t[O][T]=="object"&&!Array.isArray(t[O][T])&&!(t[O][T]instanceof Date))w=t[O][T];else if(Array.isArray(w.v)&&(w.f=t[O][T][1],w.v=w.v[0]),w.v===null)if(w.f)w.t="n";else if(i.nullError)w.t="e",w.v=0;else if(i.sheetStubs)w.t="z";else continue;else typeof w.v=="number"?w.t="n":typeof w.v=="boolean"?w.t="b":w.v instanceof Date?(w.z=i.dateNF||Fr[14],i.cellDates?(w.t="d",w.w=o0(w.z,Ga(w.v))):(w.t="n",w.v=Ga(w.v),w.w=o0(w.z,w.v))):w.t="s";if(r)s[A]||(s[A]=[]),s[A][I]&&s[A][I].z&&(w.z=s[A][I].z),s[A][I]=w;else{var L=Yi({c:I,r:A});s[L]&&s[L].z&&(w.z=s[L].z),s[L]=w}}}return v.s.c<1e7&&(s["!ref"]=Zr(v)),s}function Pu(n,t){return F7(null,n,t)}function Xse(n){return n.read_shift(4,"i")}function bl(n,t){return t||(t=mt(4)),t.write_shift(4,n),t}function sa(n){var t=n.read_shift(4);return t===0?"":n.read_shift(t,"dbcs")}function Po(n,t){var e=!1;return t==null&&(e=!0,t=mt(4+2*n.length)),t.write_shift(4,n.length),n.length>0&&t.write_shift(0,n,"dbcs"),e?t.slice(0,t.l):t}function Zse(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function ele(n,t){return t||(t=mt(4)),t.write_shift(2,n.ich||0),t.write_shift(2,n.ifnt||0),t}function vO(n,t){var e=n.l,i=n.read_shift(1),r=sa(n),s=[],d={t:r,h:r};if((i&1)!==0){for(var u=n.read_shift(4),h=0;h!=u;++h)s.push(Zse(n));d.r=s}else d.r=[{ich:0,ifnt:0}];return n.l=e+t,d}function tle(n,t){var e=!1;return t==null&&(e=!0,t=mt(15+4*n.t.length)),t.write_shift(1,0),Po(n.t,t),e?t.slice(0,t.l):t}var nle=vO;function ile(n,t){var e=!1;return t==null&&(e=!0,t=mt(23+4*n.t.length)),t.write_shift(1,1),Po(n.t,t),t.write_shift(4,1),ele({ich:0,ifnt:0},t),e?t.slice(0,t.l):t}function Us(n){var t=n.read_shift(4),e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:t,iStyleRef:e}}function Ip(n,t){return t==null&&(t=mt(8)),t.write_shift(-4,n.c),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}function Dp(n){var t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:t}}function Ap(n,t){return t==null&&(t=mt(4)),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}var rle=sa,N7=Po;function xO(n){var t=n.read_shift(4);return t===0||t===4294967295?"":n.read_shift(t,"dbcs")}function rb(n,t){var e=!1;return t==null&&(e=!0,t=mt(127)),t.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&t.write_shift(0,n,"dbcs"),e?t.slice(0,t.l):t}var ole=sa,nO=xO,yO=rb;function L7(n){var t=n.slice(n.l,n.l+4),e=t[0]&1,i=t[0]&2;n.l+=4;var r=i===0?ib([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Sp(t,0)>>2;return e?r/100:r}function V7(n,t){t==null&&(t=mt(4));var e=0,i=0,r=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?i=1:r==(r|0)&&r>=-(1<<29)&&r<1<<29&&(i=1,e=1),i)t.write_shift(-4,((e?r:n)<<2)+(e+2));else throw new Error("unsupported RkNumber "+n)}function B7(n){var t={s:{},e:{}};return t.s.r=n.read_shift(4),t.e.r=n.read_shift(4),t.s.c=n.read_shift(4),t.e.c=n.read_shift(4),t}function ale(n,t){return t||(t=mt(16)),t.write_shift(4,n.s.r),t.write_shift(4,n.e.r),t.write_shift(4,n.s.c),t.write_shift(4,n.e.c),t}var Rp=B7,wu=ale;function Eu(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Op(n,t){return(t||mt(8)).write_shift(8,n,"f")}function sle(n){var t={},e=n.read_shift(1),i=e>>>1,r=n.read_shift(1),s=n.read_shift(2,"i"),d=n.read_shift(1),u=n.read_shift(1),h=n.read_shift(1);switch(n.l++,i){case 0:t.auto=1;break;case 1:t.index=r;var v=hle[r];v&&(t.rgb=e7(v));break;case 2:t.rgb=e7([d,u,h]);break;case 3:t.theme=r;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function ob(n,t){if(t||(t=mt(8)),!n||n.auto)return t.write_shift(4,0),t.write_shift(4,0),t;n.index!=null?(t.write_shift(1,2),t.write_shift(1,n.index)):n.theme!=null?(t.write_shift(1,6),t.write_shift(1,n.theme)):(t.write_shift(1,5),t.write_shift(1,0));var e=n.tint||0;if(e>0?e*=32767:e<0&&(e*=32768),t.write_shift(2,e),!n.rgb||n.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var i=n.rgb||"FFFFFF";typeof i=="number"&&(i=("000000"+i.toString(16)).slice(-6)),t.write_shift(1,parseInt(i.slice(0,2),16)),t.write_shift(1,parseInt(i.slice(2,4),16)),t.write_shift(1,parseInt(i.slice(4,6),16)),t.write_shift(1,255)}return t}function lle(n){var t=n.read_shift(1);n.l++;var e={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return e}function cle(n,t){t||(t=mt(2));var e=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return t.write_shift(1,e),t.write_shift(1,0),t}var U7=2,ps=3,JC=11;var ab=19;var KC=64,dle=65,ple=71;var mle=4108,ule=4126,Wo=80;var qR={1:{n:"CodePage",t:U7},2:{n:"Category",t:Wo},3:{n:"PresentationFormat",t:Wo},4:{n:"ByteCount",t:ps},5:{n:"LineCount",t:ps},6:{n:"ParagraphCount",t:ps},7:{n:"SlideCount",t:ps},8:{n:"NoteCount",t:ps},9:{n:"HiddenCount",t:ps},10:{n:"MultimediaClipCount",t:ps},11:{n:"ScaleCrop",t:JC},12:{n:"HeadingPairs",t:mle},13:{n:"TitlesOfParts",t:ule},14:{n:"Manager",t:Wo},15:{n:"Company",t:Wo},16:{n:"LinksUpToDate",t:JC},17:{n:"CharacterCount",t:ps},19:{n:"SharedDoc",t:JC},22:{n:"HyperlinksChanged",t:JC},23:{n:"AppVersion",t:ps,p:"version"},24:{n:"DigSig",t:dle},26:{n:"ContentType",t:Wo},27:{n:"ContentStatus",t:Wo},28:{n:"Language",t:Wo},29:{n:"Version",t:Wo},255:{},2147483648:{n:"Locale",t:ab},2147483651:{n:"Behavior",t:ab},1919054434:{}},HR={1:{n:"CodePage",t:U7},2:{n:"Title",t:Wo},3:{n:"Subject",t:Wo},4:{n:"Author",t:Wo},5:{n:"Keywords",t:Wo},6:{n:"Comments",t:Wo},7:{n:"Template",t:Wo},8:{n:"LastAuthor",t:Wo},9:{n:"RevNumber",t:Wo},10:{n:"EditTime",t:KC},11:{n:"LastPrinted",t:KC},12:{n:"CreatedDate",t:KC},13:{n:"ModifiedDate",t:KC},14:{n:"PageCount",t:ps},15:{n:"WordCount",t:ps},16:{n:"CharCount",t:ps},17:{n:"Thumbnail",t:ple},18:{n:"Application",t:Wo},19:{n:"DocSecurity",t:ps},255:{},2147483648:{n:"Locale",t:ab},2147483651:{n:"Behavior",t:ab},1919054434:{}};function gle(n){return n.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var fle=gle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),hle=$a(fle),Yh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var _le={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},QC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function j7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function W7(n,t){var e=wse(_le),i=[],r;i[i.length]=eo,i[i.length]=zt("Types",null,{xmlns:Mo.CT,"xmlns:xsd":Mo.xsd,"xmlns:xsi":Mo.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return zt("Default",null,{Extension:h[0],ContentType:h[1]})}));var s=function(h){n[h]&&n[h].length>0&&(r=n[h][0],i[i.length]=zt("Override",null,{PartName:(r[0]=="/"?"":"/")+r,ContentType:QC[h][t.bookType]||QC[h].xlsx}))},d=function(h){(n[h]||[]).forEach(function(v){i[i.length]=zt("Override",null,{PartName:(v[0]=="/"?"":"/")+v,ContentType:QC[h][t.bookType]||QC[h].xlsx})})},u=function(h){(n[h]||[]).forEach(function(v){i[i.length]=zt("Override",null,{PartName:(v[0]=="/"?"":"/")+v,ContentType:e[h][0]})})};return s("workbooks"),d("sheets"),d("charts"),u("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),d("metadata"),u("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var Ei={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function z7(n){var t=n.lastIndexOf("/");return n.slice(0,t+1)+"_rels/"+n.slice(t+1)+".rels"}function vu(n){var t=[eo,zt("Relationships",null,{xmlns:Mo.RELS})];return Go(n["!id"]).forEach(function(e){t[t.length]=zt("Relationship",null,n["!id"][e])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Gi(n,t,e,i,r,s){if(r||(r={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),t<0)for(t=n["!idx"];n["!id"]["rId"+t];++t);if(n["!idx"]=t+1,r.Id="rId"+t,r.Type=i,r.Target=e,s?r.TargetMode=s:[Ei.HLINK,Ei.XPATH,Ei.XMISS].indexOf(r.Type)>-1&&(r.TargetMode="External"),n["!id"][r.Id])throw new Error("Cannot rewrite rId "+t);return n["!id"][r.Id]=r,n[("/"+r.Target).replace("//","/")]=r,t}function vle(n){var t=[eo];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var e=0;e<n.length;++e)t.push('  <manifest:file-entry manifest:full-path="'+n[e][0]+'" manifest:media-type="'+n[e][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function GR(n,t,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(e||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function xle(n,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function yle(n){var t=[eo];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var e=0;e!=n.length;++e)t.push(GR(n[e][0],n[e][1])),t.push(xle("",n[e][0]));return t.push(GR("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function q7(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Bh.version+"</meta:generator></office:meta></office:document-meta>"}var wp=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function J3(n,t,e,i,r){r[n]!=null||t==null||t===""||(r[n]=t,t=$i(t),i[i.length]=e?zt(n,t,e):qo(n,t))}function H7(n,t){var e=t||{},i=[eo,zt("cp:coreProperties",null,{"xmlns:cp":Mo.CORE_PROPS,"xmlns:dc":Mo.dc,"xmlns:dcterms":Mo.dcterms,"xmlns:dcmitype":Mo.dcmitype,"xmlns:xsi":Mo.xsi})],r={};if(!n&&!e.Props)return i.join("");n&&(n.CreatedDate!=null&&J3("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:tO(n.CreatedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},i,r),n.ModifiedDate!=null&&J3("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:tO(n.ModifiedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},i,r));for(var s=0;s!=wp.length;++s){var d=wp[s],u=e.Props&&e.Props[d[1]]!=null?e.Props[d[1]]:n?n[d[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&J3(d[0],u,null,i,r)}return i.length>2&&(i[i.length]="</cp:coreProperties>",i[1]=i[1].replace("/>",">")),i.join("")}var xu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],G7=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function $7(n){var t=[],e=zt;return n||(n={}),n.Application="SheetJS",t[t.length]=eo,t[t.length]=zt("Properties",null,{xmlns:Mo.EXT_PROPS,"xmlns:vt":Mo.vt}),xu.forEach(function(i){if(n[i[1]]!==void 0){var r;switch(i[2]){case"string":r=$i(String(n[i[1]]));break;case"bool":r=n[i[1]]?"true":"false";break}r!==void 0&&(t[t.length]=e(i[0],r))}}),t[t.length]=e("HeadingPairs",e("vt:vector",e("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+e("vt:variant",e("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=e("TitlesOfParts",e("vt:vector",n.SheetNames.map(function(i){return"<vt:lpstr>"+$i(i)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Y7(n){var t=[eo,zt("Properties",null,{xmlns:Mo.CUST_PROPS,"xmlns:vt":Mo.vt})];if(!n)return t.join("");var e=1;return Go(n).forEach(function(r){++e,t[t.length]=zt("property",Lse(n[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e,name:$i(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var $R={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Cle(n,t){var e=[];return Go($R).map(function(i){for(var r=0;r<wp.length;++r)if(wp[r][1]==i)return wp[r];for(r=0;r<xu.length;++r)if(xu[r][1]==i)return xu[r];throw i}).forEach(function(i){if(n[i[1]]!=null){var r=t&&t.Props&&t.Props[i[1]]!=null?t.Props[i[1]]:n[i[1]];switch(i[2]){case"date":r=new Date(r).toISOString().replace(/\.\d*Z/,"Z");break}typeof r=="number"?r=String(r):r===!0||r===!1?r=r?"1":"0":r instanceof Date&&(r=new Date(r).toISOString().replace(/\.\d*Z/,"")),e.push(qo($R[i[1]]||i[1],r))}}),zt("DocumentProperties",e.join(""),{xmlns:us.o})}function ble(n,t){var e=["Worksheets","SheetNames"],i="CustomDocumentProperties",r=[];return n&&Go(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var d=0;d<wp.length;++d)if(s==wp[d][1])return;for(d=0;d<xu.length;++d)if(s==xu[d][1])return;for(d=0;d<e.length;++d)if(s==e[d])return;var u=n[s],h="string";typeof u=="number"?(h="float",u=String(u)):u===!0||u===!1?(h="boolean",u=u?"1":"0"):u=String(u),r.push(zt(RR(s),u,{"dt:dt":h}))}}),t&&Go(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var d=t[s],u="string";typeof d=="number"?(u="float",d=String(d)):d===!0||d===!1?(u="boolean",d=d?"1":"0"):d instanceof Date?(u="dateTime.tz",d=d.toISOString()):d=String(d),r.push(zt(RR(s),d,{"dt:dt":u}))}}),"<"+i+' xmlns="'+us.o+'">'+r.join("")+"</"+i+">"}function Mle(n){var t=typeof n=="string"?new Date(Date.parse(n)):n,e=t.getTime()/1e3+11644473600,i=e%Math.pow(2,32),r=(e-i)/Math.pow(2,32);i*=1e7,r*=1e7;var s=i/Math.pow(2,32)|0;s>0&&(i=i%Math.pow(2,32),r+=s);var d=mt(8);return d.write_shift(4,i),d.write_shift(4,r),d}function YR(n,t){var e=mt(4),i=mt(4);switch(e.write_shift(4,n==80?31:n),n){case 3:i.write_shift(-4,t);break;case 5:i=mt(8),i.write_shift(8,t,"f");break;case 11:i.write_shift(4,t?1:0);break;case 64:i=Mle(t);break;case 31:case 80:for(i=mt(4+2*(t.length+1)+(t.length%2?0:2)),i.write_shift(4,t.length+1),i.write_shift(0,t,"dbcs");i.l!=i.length;)i.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+t)}return zo([e,i])}var J7=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Sle(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function JR(n,t,e){var i=mt(8),r=[],s=[],d=8,u=0,h=mt(8),v=mt(8);if(h.write_shift(4,2),h.write_shift(4,1200),v.write_shift(4,1),s.push(h),r.push(v),d+=8+h.length,!t){v=mt(8),v.write_shift(4,0),r.unshift(v);var C=[mt(4)];for(C[0].write_shift(4,n.length),u=0;u<n.length;++u){var O=n[u][0];for(h=mt(8+2*(O.length+1)+(O.length%2?0:2)),h.write_shift(4,u+2),h.write_shift(4,O.length+1),h.write_shift(0,O,"dbcs");h.l!=h.length;)h.write_shift(1,0);C.push(h)}h=zo(C),s.unshift(h),d+=8+h.length}for(u=0;u<n.length;++u)if(!(t&&!t[n[u][0]])&&!(J7.indexOf(n[u][0])>-1||G7.indexOf(n[u][0])>-1)&&n[u][1]!=null){var T=n[u][1],w=0;if(t){w=+t[n[u][0]];var A=e[w];if(A.p=="version"&&typeof T=="string"){var I=T.split(".");T=(+I[0]<<16)+(+I[1]||0)}h=YR(A.t,T)}else{var L=Sle(T);L==-1&&(L=31,T=String(T)),h=YR(L,T)}s.push(h),v=mt(8),v.write_shift(4,t?w:2+u),r.push(v),d+=8+h.length}var B=8*(s.length+1);for(u=0;u<s.length;++u)r[u].write_shift(4,B),B+=s[u].length;return i.write_shift(4,d),i.write_shift(4,s.length),zo([i].concat(r).concat(s))}function KR(n,t,e,i,r,s){var d=mt(r?68:48),u=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,Zi.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,r?2:1),d.write_shift(16,t,"hex"),d.write_shift(4,r?68:48);var h=JR(n,e,i);if(u.push(h),r){var v=JR(r,null,null);d.write_shift(16,s,"hex"),d.write_shift(4,68+h.length),u.push(v)}return zo(u)}function Ple(n,t){t||(t=mt(n));for(var e=0;e<n;++e)t.write_shift(1,0);return t}function wle(n,t){return n.read_shift(t)===1}function wa(n,t){return t||(t=mt(2)),t.write_shift(2,+!!n),t}function K7(n){return n.read_shift(2,"u")}function Bs(n,t){return t||(t=mt(2)),t.write_shift(2,n),t}function Q7(n,t,e){return e||(e=mt(2)),e.write_shift(1,t=="e"?+n:+!!n),e.write_shift(1,t=="e"?1:0),e}function X7(n,t,e){var i=n.read_shift(e&&e.biff>=12?2:1),r="sbcs-cont",s=Pp;if(e&&e.biff>=8&&(Pp=1200),!e||e.biff==8){var d=n.read_shift(1);d&&(r="dbcs-cont")}else e.biff==12&&(r="wstr");e.biff>=2&&e.biff<=5&&(r="cpstr");var u=i?n.read_shift(i,r):"";return Pp=s,u}function Ele(n){var t=n.t||"",e=1,i=mt(3+(e>1?2:0));i.write_shift(2,t.length),i.write_shift(1,(e>1?8:0)|1),e>1&&i.write_shift(2,e);var r=mt(2*t.length);r.write_shift(2*t.length,t,"utf16le");var s=[i,r];return zo(s)}function Ole(n,t,e){var i;if(e){if(e.biff>=2&&e.biff<=5)return n.read_shift(t,"cpstr");if(e.biff>=12)return n.read_shift(t,"dbcs-cont")}var r=n.read_shift(1);return r===0?i=n.read_shift(t,"sbcs-cont"):i=n.read_shift(t,"dbcs-cont"),i}function Tle(n,t,e){var i=n.read_shift(e&&e.biff==2?1:2);return i===0?(n.l++,""):Ole(n,i,e)}function kle(n,t,e){if(e.biff>5)return Tle(n,t,e);var i=n.read_shift(1);return i===0?(n.l++,""):n.read_shift(i,e.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function Z7(n,t,e){return e||(e=mt(3+2*n.length)),e.write_shift(2,n.length),e.write_shift(1,1),e.write_shift(31,n,"utf16le"),e}function QR(n,t){t||(t=mt(6+n.length*2)),t.write_shift(4,1+n.length);for(var e=0;e<n.length;++e)t.write_shift(2,n.charCodeAt(e));return t.write_shift(2,0),t}function Ile(n){var t=mt(512),e=0,i=n.Target;i.slice(0,7)=="file://"&&(i=i.slice(7));var r=i.indexOf("#"),s=r>-1?31:23;switch(i.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var d=[8,6815827,6619237,4849780,83];for(e=0;e<d.length;++e)t.write_shift(4,d[e]);if(s==28)i=i.slice(1),QR(i,t);else if(s&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),e=0;e<d.length;++e)t.write_shift(1,parseInt(d[e],16));var u=r>-1?i.slice(0,r):i;for(t.write_shift(4,2*(u.length+1)),e=0;e<u.length;++e)t.write_shift(2,u.charCodeAt(e));t.write_shift(2,0),s&8&&QR(r>-1?i.slice(r+1):"",t)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),e=0;e<d.length;++e)t.write_shift(1,parseInt(d[e],16));for(var h=0;i.slice(h*3,h*3+3)=="../"||i.slice(h*3,h*3+3)=="..\\";)++h;for(t.write_shift(2,h),t.write_shift(4,i.length-3*h+1),e=0;e<i.length-3*h;++e)t.write_shift(1,i.charCodeAt(e+3*h)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),e=0;e<6;++e)t.write_shift(4,0)}return t.slice(0,t.l)}function Tp(n,t,e,i){return i||(i=mt(6)),i.write_shift(2,n),i.write_shift(2,t),i.write_shift(2,e||0),i}function Dle(n,t,e){var i=e.biff>8?4:2,r=n.read_shift(i),s=n.read_shift(i,"i"),d=n.read_shift(i,"i");return[r,s,d]}function Ale(n){var t=n.read_shift(2),e=n.read_shift(2),i=n.read_shift(2),r=n.read_shift(2);return{s:{c:i,r:t},e:{c:r,r:e}}}function eF(n,t){return t||(t=mt(8)),t.write_shift(2,n.s.r),t.write_shift(2,n.e.r),t.write_shift(2,n.s.c),t.write_shift(2,n.e.c),t}function CO(n,t,e){var i=1536,r=16;switch(e.bookType){case"biff8":break;case"biff5":i=1280,r=8;break;case"biff4":i=4,r=6;break;case"biff3":i=3,r=6;break;case"biff2":i=2,r=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=mt(r);return s.write_shift(2,i),s.write_shift(2,t),r>4&&s.write_shift(2,29282),r>6&&s.write_shift(2,1997),r>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Rle(n,t){var e=!t||t.biff==8,i=mt(e?112:54);for(i.write_shift(t.biff==8?2:1,7),e&&i.write_shift(1,0),i.write_shift(4,859007059),i.write_shift(4,5458548|(e?0:536870912));i.l<i.length;)i.write_shift(1,e?0:32);return i}function Fle(n,t){var e=!t||t.biff>=8?2:1,i=mt(8+e*n.name.length);i.write_shift(4,n.pos),i.write_shift(1,n.hs||0),i.write_shift(1,n.dt),i.write_shift(1,n.name.length),t.biff>=8&&i.write_shift(1,1),i.write_shift(e*n.name.length,n.name,t.biff<8?"sbcs":"utf16le");var r=i.slice(0,i.l);return r.l=i.l,r}function Nle(n,t){var e=mt(8);e.write_shift(4,n.Count),e.write_shift(4,n.Unique);for(var i=[],r=0;r<n.length;++r)i[r]=Ele(n[r],t);var s=zo([e].concat(i));return s.parts=[e.length].concat(i.map(function(d){return d.length})),s}function Lle(){var n=mt(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Vle(n){var t=mt(18),e=1718;return n&&n.RTL&&(e|=64),t.write_shift(2,e),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Ble(n,t){var e=n.name||"Arial",i=t&&t.biff==5,r=i?15+e.length:16+2*e.length,s=mt(r);return s.write_shift(2,(n.sz||12)*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,e.length),i||s.write_shift(1,1),s.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le"),s}function Ule(n,t,e,i){var r=mt(10);return Tp(n,t,i,r),r.write_shift(4,e),r}function jle(n,t,e,i,r){var s=!r||r.biff==8,d=mt(8+ +s+(1+s)*e.length);return Tp(n,t,i,d),d.write_shift(2,e.length),s&&d.write_shift(1,1),d.write_shift((1+s)*e.length,e,s?"utf16le":"sbcs"),d}function Wle(n,t,e,i){var r=e&&e.biff==5;i||(i=mt(r?3+t.length:5+2*t.length)),i.write_shift(2,n),i.write_shift(r?1:2,t.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le");var s=i.length>i.l?i.slice(0,i.l):i;return s.l==null&&(s.l=s.length),s}function zle(n,t){var e=t.biff==8||!t.biff?4:2,i=mt(2*e+6);return i.write_shift(e,n.s.r),i.write_shift(e,n.e.r+1),i.write_shift(2,n.s.c),i.write_shift(2,n.e.c+1),i.write_shift(2,0),i}function XR(n,t,e,i){var r=e&&e.biff==5;i||(i=mt(r?16:20)),i.write_shift(2,0),n.style?(i.write_shift(2,n.numFmtId||0),i.write_shift(2,65524)):(i.write_shift(2,n.numFmtId||0),i.write_shift(2,t<<4));var s=0;return n.numFmtId>0&&r&&(s|=1024),i.write_shift(4,s),i.write_shift(4,0),r||i.write_shift(4,0),i.write_shift(2,0),i}function qle(n){var t=mt(8);return t.write_shift(4,0),t.write_shift(2,n[0]?n[0]+1:0),t.write_shift(2,n[1]?n[1]+1:0),t}function Hle(n,t,e,i,r,s){var d=mt(8);return Tp(n,t,i,d),Q7(e,s,d),d}function Gle(n,t,e,i){var r=mt(14);return Tp(n,t,i,r),Op(e,r),r}function $le(n,t,e){if(e.biff<8)return Yle(n,t,e);for(var i=[],r=n.l+t,s=n.read_shift(e.biff>8?4:2);s--!==0;)i.push(Dle(n,e.biff>8?12:6,e));if(n.l!=r)throw new Error("Bad ExternSheet: "+n.l+" != "+r);return i}function Yle(n,t,e){n[n.l+1]==3&&n[n.l]++;var i=X7(n,t,e);return i.charCodeAt(0)==3?i.slice(1):i}function Jle(n){var t=mt(2+n.length*8);t.write_shift(2,n.length);for(var e=0;e<n.length;++e)eF(n[e],t);return t}function Kle(n){var t=mt(24),e=So(n[0]);t.write_shift(2,e.r),t.write_shift(2,e.r),t.write_shift(2,e.c),t.write_shift(2,e.c);for(var i="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<16;++r)t.write_shift(1,parseInt(i[r],16));return zo([t,Ile(n[1])])}function Qle(n){var t=n[1].Tooltip,e=mt(10+2*(t.length+1));e.write_shift(2,2048);var i=So(n[0]);e.write_shift(2,i.r),e.write_shift(2,i.r),e.write_shift(2,i.c),e.write_shift(2,i.c);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Xle(n){return n||(n=mt(4)),n.write_shift(2,1),n.write_shift(2,1),n}function Zle(n,t,e){if(!e.cellStyles)return oc(n,t);var i=e&&e.biff>=12?4:2,r=n.read_shift(i),s=n.read_shift(i),d=n.read_shift(i),u=n.read_shift(i),h=n.read_shift(2);i==2&&(n.l+=2);var v={s:r,e:s,w:d,ixfe:u,flags:h};return(e.biff>=5||!e.biff)&&(v.level=h>>8&7),v}function ece(n,t){var e=mt(12);e.write_shift(2,t),e.write_shift(2,t),e.write_shift(2,n.width*256),e.write_shift(2,0);var i=0;return n.hidden&&(i|=1),e.write_shift(1,i),i=n.level||0,e.write_shift(1,i),e.write_shift(2,0),e}function tce(n){for(var t=mt(2*n),e=0;e<n;++e)t.write_shift(2,e+1);return t}function nce(n,t,e){var i=mt(15);return Kh(i,n,t),i.write_shift(8,e,"f"),i}function ice(n,t,e){var i=mt(9);return Kh(i,n,t),i.write_shift(2,e),i}var rce=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=aO({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function e(u,h){var v=[],C=Ep(1);switch(h.type){case"base64":C=yl(Zc(u));break;case"binary":C=yl(u);break;case"buffer":case"array":C=u;break}ms(C,0);var O=C.read_shift(1),T=!!(O&136),w=!1,A=!1;switch(O){case 2:break;case 3:break;case 48:w=!0,T=!0;break;case 49:w=!0,T=!0;break;case 131:break;case 139:break;case 140:A=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+O.toString(16))}var I=0,L=521;O==2&&(I=C.read_shift(2)),C.l+=3,O!=2&&(I=C.read_shift(4)),I>1048576&&(I=1e6),O!=2&&(L=C.read_shift(2));var B=C.read_shift(2),q=h.codepage||1252;O!=2&&(C.l+=16,C.read_shift(1),C[C.l]!==0&&(q=n[C[C.l]]),C.l+=1,C.l+=2),A&&(C.l+=36);for(var K=[],J={},Me=Math.min(C.length,O==2?521:L-10-(w?264:0)),ze=A?32:11;C.l<Me&&C[C.l]!=13;)switch(J={},J.name=rr.utils.decode(q,C.slice(C.l,C.l+ze)).replace(/[\u0000\r\n].*$/g,""),C.l+=ze,J.type=String.fromCharCode(C.read_shift(1)),O!=2&&!A&&(J.offset=C.read_shift(4)),J.len=C.read_shift(1),O==2&&(J.offset=C.read_shift(2)),J.dec=C.read_shift(1),J.name.length&&K.push(J),O!=2&&(C.l+=A?13:14),J.type){case"B":(!w||J.len!=8)&&h.WTF&&console.log("Skipping "+J.name+":"+J.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+J.name+":"+J.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+J.type)}if(C[C.l]!==13&&(C.l=L-1),C.read_shift(1)!==13)throw new Error("DBF Terminator not found "+C.l+" "+C[C.l]);C.l=L;var oe=0,ae=0;for(v[0]=[],ae=0;ae!=K.length;++ae)v[0][ae]=K[ae].name;for(;I-- >0;){if(C[C.l]===42){C.l+=B;continue}for(++C.l,v[++oe]=[],ae=0,ae=0;ae!=K.length;++ae){var X=C.slice(C.l,C.l+K[ae].len);C.l+=K[ae].len,ms(X,0);var pe=rr.utils.decode(q,X);switch(K[ae].type){case"C":pe.trim().length&&(v[oe][ae]=pe.replace(/\s+$/,""));break;case"D":pe.length===8?v[oe][ae]=new Date(+pe.slice(0,4),+pe.slice(4,6)-1,+pe.slice(6,8)):v[oe][ae]=pe;break;case"F":v[oe][ae]=parseFloat(pe.trim());break;case"+":case"I":v[oe][ae]=A?X.read_shift(-4,"i")^2147483648:X.read_shift(4,"i");break;case"L":switch(pe.trim().toUpperCase()){case"Y":case"T":v[oe][ae]=!0;break;case"N":case"F":v[oe][ae]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+pe+"|")}break;case"M":if(!T)throw new Error("DBF Unexpected MEMO for type "+O.toString(16));v[oe][ae]="##MEMO##"+(A?parseInt(pe.trim(),10):X.read_shift(4));break;case"N":pe=pe.replace(/\u0000/g,"").trim(),pe&&pe!="."&&(v[oe][ae]=+pe||0);break;case"@":v[oe][ae]=new Date(X.read_shift(-8,"f")-621356832e5);break;case"T":v[oe][ae]=new Date((X.read_shift(4)-2440588)*864e5+X.read_shift(4));break;case"Y":v[oe][ae]=X.read_shift(4,"i")/1e4+X.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":v[oe][ae]=-X.read_shift(-8,"f");break;case"B":if(w&&K[ae].len==8){v[oe][ae]=X.read_shift(8,"f");break}case"G":case"P":X.l+=K[ae].len;break;case"0":if(K[ae].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+K[ae].type)}}}if(O!=2&&C.l<C.length&&C[C.l++]!=26)throw new Error("DBF EOF Marker missing "+(C.l-1)+" of "+C.length+" "+C[C.l-1].toString(16));return h&&h.sheetRows&&(v=v.slice(0,h.sheetRows)),h.DBF=K,v}function i(u,h){var v=h||{};v.dateNF||(v.dateNF="yyyymmdd");var C=Pu(e(u,v),v);return C["!cols"]=v.DBF.map(function(O){return{wch:O.len,DBF:O}}),delete v.DBF,C}function r(u,h){try{return kp(i(u,h),h)}catch(v){if(h&&h.WTF)throw v}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function d(u,h){var v=h||{};if(+v.codepage>=0&&Uh(+v.codepage),v.type=="string")throw new Error("Cannot write DBF to JS string");var C=Ha(),O=pb(u,{header:1,raw:!0,cellDates:!0}),T=O[0],w=O.slice(1),A=u["!cols"]||[],I=0,L=0,B=0,q=1;for(I=0;I<T.length;++I){if(((A[I]||{}).DBF||{}).name){T[I]=A[I].DBF.name,++B;continue}if(T[I]!=null){if(++B,typeof T[I]=="number"&&(T[I]=T[I].toString(10)),typeof T[I]!="string")throw new Error("DBF Invalid column name "+T[I]+" |"+typeof T[I]+"|");if(T.indexOf(T[I])!==I){for(L=0;L<1024;++L)if(T.indexOf(T[I]+"_"+L)==-1){T[I]+="_"+L;break}}}}var K=hr(u["!ref"]),J=[],Me=[],ze=[];for(I=0;I<=K.e.c-K.s.c;++I){var oe="",ae="",X=0,pe=[];for(L=0;L<w.length;++L)w[L][I]!=null&&pe.push(w[L][I]);if(pe.length==0||T[I]==null){J[I]="?";continue}for(L=0;L<pe.length;++L){switch(typeof pe[L]){case"number":ae="B";break;case"string":ae="C";break;case"boolean":ae="L";break;case"object":ae=pe[L]instanceof Date?"D":"C";break;default:ae="C"}X=Math.max(X,String(pe[L]).length),oe=oe&&oe!=ae?"C":ae}X>250&&(X=250),ae=((A[I]||{}).DBF||{}).type,ae=="C"&&A[I].DBF.len>X&&(X=A[I].DBF.len),oe=="B"&&ae=="N"&&(oe="N",ze[I]=A[I].DBF.dec,X=A[I].DBF.len),Me[I]=oe=="C"||ae=="N"?X:s[oe]||0,q+=Me[I],J[I]=oe}var z=C.next(32);for(z.write_shift(4,318902576),z.write_shift(4,w.length),z.write_shift(2,296+32*B),z.write_shift(2,q),I=0;I<4;++I)z.write_shift(4,0);for(z.write_shift(4,0|(+t[Cu]||3)<<8),I=0,L=0;I<T.length;++I)if(T[I]!=null){var Z=C.next(32),ge=(T[I].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Z.write_shift(1,ge,"sbcs"),Z.write_shift(1,J[I]=="?"?"C":J[I],"sbcs"),Z.write_shift(4,L),Z.write_shift(1,Me[I]||s[J[I]]||0),Z.write_shift(1,ze[I]||0),Z.write_shift(1,2),Z.write_shift(4,0),Z.write_shift(1,0),Z.write_shift(4,0),Z.write_shift(4,0),L+=Me[I]||s[J[I]]||0}var Pe=C.next(264);for(Pe.write_shift(4,13),I=0;I<65;++I)Pe.write_shift(4,0);for(I=0;I<w.length;++I){var Ve=C.next(q);for(Ve.write_shift(1,0),L=0;L<T.length;++L)if(T[L]!=null)switch(J[L]){case"L":Ve.write_shift(1,w[I][L]==null?63:w[I][L]?84:70);break;case"B":Ve.write_shift(8,w[I][L]||0,"f");break;case"N":var De="0";for(typeof w[I][L]=="number"&&(De=w[I][L].toFixed(ze[L]||0)),B=0;B<Me[L]-De.length;++B)Ve.write_shift(1,32);Ve.write_shift(1,De,"sbcs");break;case"D":w[I][L]?(Ve.write_shift(4,("0000"+w[I][L].getFullYear()).slice(-4),"sbcs"),Ve.write_shift(2,("00"+(w[I][L].getMonth()+1)).slice(-2),"sbcs"),Ve.write_shift(2,("00"+w[I][L].getDate()).slice(-2),"sbcs")):Ve.write_shift(8,"00000000","sbcs");break;case"C":var Fe=String(w[I][L]!=null?w[I][L]:"").slice(0,Me[L]);for(Ve.write_shift(1,Fe,"sbcs"),B=0;B<Me[L]-Fe.length;++B)Ve.write_shift(1,32);break}}return C.next(1).write_shift(1,26),C.end()}return{to_workbook:r,to_sheet:i,from_sheet:d}})(),oce=(function(){var n={AA:"\xC0",BA:"\xC1",CA:"\xC2",DA:195,HA:"\xC4",JA:197,AE:"\xC8",BE:"\xC9",CE:"\xCA",HE:"\xCB",AI:"\xCC",BI:"\xCD",CI:"\xCE",HI:"\xCF",AO:"\xD2",BO:"\xD3",CO:"\xD4",DO:213,HO:"\xD6",AU:"\xD9",BU:"\xDA",CU:"\xDB",HU:"\xDC",Aa:"\xE0",Ba:"\xE1",Ca:"\xE2",Da:227,Ha:"\xE4",Ja:229,Ae:"\xE8",Be:"\xE9",Ce:"\xEA",He:"\xEB",Ai:"\xEC",Bi:"\xED",Ci:"\xEE",Hi:"\xEF",Ao:"\xF2",Bo:"\xF3",Co:"\xF4",Do:245,Ho:"\xF6",Au:"\xF9",Bu:"\xFA",Cu:"\xFB",Hu:"\xFC",KC:"\xC7",Kc:"\xE7",q:"\xE6",z:"\u0153",a:"\xC6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Go(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),e=function(T,w){var A=n[w];return typeof A=="number"?bR(A):A},i=function(T,w,A){var I=w.charCodeAt(0)-32<<4|A.charCodeAt(0)-48;return I==59?T:bR(I)};n["|"]=254;function r(T,w){switch(w.type){case"base64":return s(Zc(T),w);case"binary":return s(T,w);case"buffer":return s(Ai&&Buffer.isBuffer(T)?T.toString("binary"):Gh(T),w);case"array":return s(hb(T),w)}throw new Error("Unrecognized type "+w.type)}function s(T,w){var A=T.split(/[\n\r]+/),I=-1,L=-1,B=0,q=0,K=[],J=[],Me=null,ze={},oe=[],ae=[],X=[],pe=0,z;for(+w.codepage>=0&&Uh(+w.codepage);B!==A.length;++B){pe=0;var Z=A[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(t,e),ge=Z.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),Pe=ge[0],Ve;if(Z.length>0)switch(Pe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ge[1].charAt(0)=="P"&&J.push(Z.slice(3).replace(/;;/g,";"));break;case"C":var De=!1,Fe=!1,Te=!1,Je=!1,_t=-1,pt=-1;for(q=1;q<ge.length;++q)switch(ge[q].charAt(0)){case"A":break;case"X":L=parseInt(ge[q].slice(1))-1,Fe=!0;break;case"Y":for(I=parseInt(ge[q].slice(1))-1,Fe||(L=0),z=K.length;z<=I;++z)K[z]=[];break;case"K":Ve=ge[q].slice(1),Ve.charAt(0)==='"'?Ve=Ve.slice(1,Ve.length-1):Ve==="TRUE"?Ve=!0:Ve==="FALSE"?Ve=!1:isNaN(Qc(Ve))?isNaN(Wh(Ve).getDate())||(Ve=Ea(Ve)):(Ve=Qc(Ve),Me!==null&&x7(Me)&&(Ve=M7(Ve))),typeof rr<"u"&&typeof Ve=="string"&&(w||{}).type!="string"&&(w||{}).codepage&&(Ve=rr.utils.decode(w.codepage,Ve)),De=!0;break;case"E":Je=!0;var U=ide(ge[q].slice(1),{r:I,c:L});K[I][L]=[K[I][L],U];break;case"S":Te=!0,K[I][L]=[K[I][L],"S5S"];break;case"G":break;case"R":_t=parseInt(ge[q].slice(1))-1;break;case"C":pt=parseInt(ge[q].slice(1))-1;break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+Z)}if(De&&(K[I][L]&&K[I][L].length==2?K[I][L][0]=Ve:K[I][L]=Ve,Me=null),Te){if(Je)throw new Error("SYLK shared formula cannot have own formula");var Q=_t>-1&&K[_t][pt];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");K[I][L][1]=rde(Q[1],{r:I-_t,c:L-pt})}break;case"F":var W=0;for(q=1;q<ge.length;++q)switch(ge[q].charAt(0)){case"X":L=parseInt(ge[q].slice(1))-1,++W;break;case"Y":for(I=parseInt(ge[q].slice(1))-1,z=K.length;z<=I;++z)K[z]=[];break;case"M":pe=parseInt(ge[q].slice(1))/20;break;case"F":break;case"G":break;case"P":Me=J[parseInt(ge[q].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(X=ge[q].slice(1).split(" "),z=parseInt(X[0],10);z<=parseInt(X[1],10);++z)pe=parseInt(X[2],10),ae[z-1]=pe===0?{hidden:!0}:{wch:pe},bO(ae[z-1]);break;case"C":L=parseInt(ge[q].slice(1))-1,ae[L]||(ae[L]={});break;case"R":I=parseInt(ge[q].slice(1))-1,oe[I]||(oe[I]={}),pe>0?(oe[I].hpt=pe,oe[I].hpx=oF(pe)):pe===0&&(oe[I].hidden=!0);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+Z)}W<1&&(Me=null);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+Z)}}return oe.length>0&&(ze["!rows"]=oe),ae.length>0&&(ze["!cols"]=ae),w&&w.sheetRows&&(K=K.slice(0,w.sheetRows)),[K,ze]}function d(T,w){var A=r(T,w),I=A[0],L=A[1],B=Pu(I,w);return Go(L).forEach(function(q){B[q]=L[q]}),B}function u(T,w){return kp(d(T,w),w)}function h(T,w,A,I){var L="C;Y"+(A+1)+";X"+(I+1)+";K";switch(T.t){case"n":L+=T.v||0,T.f&&!T.F&&(L+=";E"+SO(T.f,{r:A,c:I}));break;case"b":L+=T.v?"TRUE":"FALSE";break;case"e":L+=T.w||T.v;break;case"d":L+='"'+(T.w||T.v)+'"';break;case"s":L+='"'+T.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return L}function v(T,w){w.forEach(function(A,I){var L="F;W"+(I+1)+" "+(I+1)+" ";A.hidden?L+="0":(typeof A.width=="number"&&!A.wpx&&(A.wpx=sb(A.width)),typeof A.wpx=="number"&&!A.wch&&(A.wch=lb(A.wpx)),typeof A.wch=="number"&&(L+=Math.round(A.wch))),L.charAt(L.length-1)!=" "&&T.push(L)})}function C(T,w){w.forEach(function(A,I){var L="F;";A.hidden?L+="M0;":A.hpt?L+="M"+20*A.hpt+";":A.hpx&&(L+="M"+20*cb(A.hpx)+";"),L.length>2&&T.push(L+"R"+(I+1))})}function O(T,w){var A=["ID;PWXL;N;E"],I=[],L=hr(T["!ref"]),B,q=Array.isArray(T),K=`\r
`;A.push("P;PGeneral"),A.push("F;P0;DG0G8;M255"),T["!cols"]&&v(A,T["!cols"]),T["!rows"]&&C(A,T["!rows"]),A.push("B;Y"+(L.e.r-L.s.r+1)+";X"+(L.e.c-L.s.c+1)+";D"+[L.s.c,L.s.r,L.e.c,L.e.r].join(" "));for(var J=L.s.r;J<=L.e.r;++J)for(var Me=L.s.c;Me<=L.e.c;++Me){var ze=Yi({r:J,c:Me});B=q?(T[J]||[])[Me]:T[ze],!(!B||B.v==null&&(!B.f||B.F))&&I.push(h(B,T,J,Me,w))}return A.join(K)+K+I.join(K)+K+"E"+K}return{to_workbook:u,to_sheet:d,from_sheet:O}})(),ace=(function(){function n(s,d){switch(d.type){case"base64":return t(Zc(s),d);case"binary":return t(s,d);case"buffer":return t(Ai&&Buffer.isBuffer(s)?s.toString("binary"):Gh(s),d);case"array":return t(hb(s),d)}throw new Error("Unrecognized type "+d.type)}function t(s,d){for(var u=s.split(`
`),h=-1,v=-1,C=0,O=[];C!==u.length;++C){if(u[C].trim()==="BOT"){O[++h]=[],v=0;continue}if(!(h<0)){var T=u[C].trim().split(","),w=T[0],A=T[1];++C;for(var I=u[C]||"";(I.match(/["]/g)||[]).length&1&&C<u.length-1;)I+=`
`+u[++C];switch(I=I.trim(),+w){case-1:if(I==="BOT"){O[++h]=[],v=0;continue}else if(I!=="EOD")throw new Error("Unrecognized DIF special command "+I);break;case 0:I==="TRUE"?O[h][v]=!0:I==="FALSE"?O[h][v]=!1:isNaN(Qc(A))?isNaN(Wh(A).getDate())?O[h][v]=A:O[h][v]=Ea(A):O[h][v]=Qc(A),++v;break;case 1:I=I.slice(1,I.length-1),I=I.replace(/""/g,'"'),Ih&&I&&I.match(/^=".*"$/)&&(I=I.slice(2,-1)),O[h][v++]=I!==""?I:null;break}if(I==="EOD")break}}return d&&d.sheetRows&&(O=O.slice(0,d.sheetRows)),O}function e(s,d){return Pu(n(s,d),d)}function i(s,d){return kp(e(s,d),d)}var r=(function(){var s=function(h,v,C,O,T){h.push(v),h.push(C+","+O),h.push('"'+T.replace(/"/g,'""')+'"')},d=function(h,v,C,O){h.push(v+","+C),h.push(v==1?'"'+O.replace(/"/g,'""')+'"':O)};return function(h){var v=[],C=hr(h["!ref"]),O,T=Array.isArray(h);s(v,"TABLE",0,1,"sheetjs"),s(v,"VECTORS",0,C.e.r-C.s.r+1,""),s(v,"TUPLES",0,C.e.c-C.s.c+1,""),s(v,"DATA",0,0,"");for(var w=C.s.r;w<=C.e.r;++w){d(v,-1,0,"BOT");for(var A=C.s.c;A<=C.e.c;++A){var I=Yi({r:w,c:A});if(O=T?(h[w]||[])[A]:h[I],!O){d(v,1,0,"");continue}switch(O.t){case"n":var L=Ih?O.w:O.v;!L&&O.v!=null&&(L=O.v),L==null?Ih&&O.f&&!O.F?d(v,1,0,"="+O.f):d(v,1,0,""):d(v,0,L,"V");break;case"b":d(v,0,O.v?1:0,O.v?"TRUE":"FALSE");break;case"s":d(v,1,0,!Ih||isNaN(O.v)?O.v:'="'+O.v+'"');break;case"d":O.w||(O.w=o0(O.z||Fr[14],Ga(Ea(O.v)))),Ih?d(v,0,O.w,"V"):d(v,1,0,O.w);break;default:d(v,1,0,"")}}}d(v,-1,0,"EOD");var B=`\r
`,q=v.join(B);return q}})();return{to_workbook:i,to_sheet:e,from_sheet:r}})(),tF=(function(){function n(O){return O.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(O){return O.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function e(O,T){for(var w=O.split(`
`),A=-1,I=-1,L=0,B=[];L!==w.length;++L){var q=w[L].trim().split(":");if(q[0]==="cell"){var K=So(q[1]);if(B.length<=K.r)for(A=B.length;A<=K.r;++A)B[A]||(B[A]=[]);switch(A=K.r,I=K.c,q[2]){case"t":B[A][I]=n(q[3]);break;case"v":B[A][I]=+q[3];break;case"vtf":var J=q[q.length-1];case"vtc":switch(q[3]){case"nl":B[A][I]=!!+q[4];break;default:B[A][I]=+q[4];break}q[2]=="vtf"&&(B[A][I]=[B[A][I],J])}}}return T&&T.sheetRows&&(B=B.slice(0,T.sheetRows)),B}function i(O,T){return Pu(e(O,T),T)}function r(O,T){return kp(i(O,T),T)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function v(O){if(!O||!O["!ref"])return"";for(var T=[],w=[],A,I="",L=gs(O["!ref"]),B=Array.isArray(O),q=L.s.r;q<=L.e.r;++q)for(var K=L.s.c;K<=L.e.c;++K)if(I=Yi({r:q,c:K}),A=B?(O[q]||[])[K]:O[I],!(!A||A.v==null||A.t==="z")){switch(w=["cell",I,"t"],A.t){case"s":case"str":w.push(t(A.v));break;case"n":A.f?(w[2]="vtf",w[3]="n",w[4]=A.v,w[5]=t(A.f)):(w[2]="v",w[3]=A.v);break;case"b":w[2]="vt"+(A.f?"f":"c"),w[3]="nl",w[4]=A.v?"1":"0",w[5]=t(A.f||(A.v?"TRUE":"FALSE"));break;case"d":var J=Ga(Ea(A.v));w[2]="vtc",w[3]="nd",w[4]=""+J,w[5]=A.w||o0(A.z||Fr[14],J);break;case"e":continue}T.push(w.join(":"))}return T.push("sheet:c:"+(L.e.c-L.s.c+1)+":r:"+(L.e.r-L.s.r+1)+":tvf:1"),T.push("valueformat:1:text-wiki"),T.join(`
`)}function C(O){return[s,d,u,d,v(O),h].join(`
`)}return{to_workbook:r,to_sheet:i,from_sheet:C}})(),sce=(function(){function n(C,O,T,w,A){A.raw?O[T][w]=C:C===""||(C==="TRUE"?O[T][w]=!0:C==="FALSE"?O[T][w]=!1:isNaN(Qc(C))?isNaN(Wh(C).getDate())?O[T][w]=C:O[T][w]=Ea(C):O[T][w]=Qc(C))}function t(C,O){var T=O||{},w=[];if(!C||C.length===0)return w;for(var A=C.split(/[\r\n]/),I=A.length-1;I>=0&&A[I].length===0;)--I;for(var L=10,B=0,q=0;q<=I;++q)B=A[q].indexOf(" "),B==-1?B=A[q].length:B++,L=Math.max(L,B);for(q=0;q<=I;++q){w[q]=[];var K=0;for(n(A[q].slice(0,L).trim(),w,q,K,T),K=1;K<=(A[q].length-L)/10+1;++K)n(A[q].slice(L+(K-1)*10,L+K*10).trim(),w,q,K,T)}return T.sheetRows&&(w=w.slice(0,T.sheetRows)),w}var e={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function r(C){for(var O={},T=!1,w=0,A=0;w<C.length;++w)(A=C.charCodeAt(w))==34?T=!T:!T&&A in e&&(O[A]=(O[A]||0)+1);A=[];for(w in O)Object.prototype.hasOwnProperty.call(O,w)&&A.push([O[w],w]);if(!A.length){O=i;for(w in O)Object.prototype.hasOwnProperty.call(O,w)&&A.push([O[w],w])}return A.sort(function(I,L){return I[0]-L[0]||i[I[1]]-i[L[1]]}),e[A.pop()[1]]||44}function s(C,O){var T=O||{},w="";rc!=null&&T.dense==null&&(T.dense=rc);var A=T.dense?[]:{},I={s:{c:0,r:0},e:{c:0,r:0}};C.slice(0,4)=="sep="?C.charCodeAt(5)==13&&C.charCodeAt(6)==10?(w=C.charAt(4),C=C.slice(7)):C.charCodeAt(5)==13||C.charCodeAt(5)==10?(w=C.charAt(4),C=C.slice(6)):w=r(C.slice(0,1024)):T&&T.FS?w=T.FS:w=r(C.slice(0,1024));var L=0,B=0,q=0,K=0,J=0,Me=w.charCodeAt(0),ze=!1,oe=0,ae=C.charCodeAt(0);C=C.replace(/\r\n/mg,`
`);var X=T.dateNF!=null?bse(T.dateNF):null;function pe(){var z=C.slice(K,J),Z={};if(z.charAt(0)=='"'&&z.charAt(z.length-1)=='"'&&(z=z.slice(1,-1).replace(/""/g,'"')),z.length===0)Z.t="z";else if(T.raw)Z.t="s",Z.v=z;else if(z.trim().length===0)Z.t="s",Z.v=z;else if(z.charCodeAt(0)==61)z.charCodeAt(1)==34&&z.charCodeAt(z.length-1)==34?(Z.t="s",Z.v=z.slice(2,-1).replace(/""/g,'"')):ode(z)?(Z.t="n",Z.f=z.slice(1)):(Z.t="s",Z.v=z);else if(z=="TRUE")Z.t="b",Z.v=!0;else if(z=="FALSE")Z.t="b",Z.v=!1;else if(!isNaN(q=Qc(z)))Z.t="n",T.cellText!==!1&&(Z.w=z),Z.v=q;else if(!isNaN(Wh(z).getDate())||X&&z.match(X)){Z.z=T.dateNF||Fr[14];var ge=0;X&&z.match(X)&&(z=Mse(z,T.dateNF,z.match(X)||[]),ge=1),T.cellDates?(Z.t="d",Z.v=Ea(z,ge)):(Z.t="n",Z.v=Ga(Ea(z,ge))),T.cellText!==!1&&(Z.w=o0(Z.z,Z.v instanceof Date?Ga(Z.v):Z.v)),T.cellNF||delete Z.z}else Z.t="s",Z.v=z;if(Z.t=="z"||(T.dense?(A[L]||(A[L]=[]),A[L][B]=Z):A[Yi({c:B,r:L})]=Z),K=J+1,ae=C.charCodeAt(K),I.e.c<B&&(I.e.c=B),I.e.r<L&&(I.e.r=L),oe==Me)++B;else if(B=0,++L,T.sheetRows&&T.sheetRows<=L)return!0}e:for(;J<C.length;++J)switch(oe=C.charCodeAt(J)){case 34:ae===34&&(ze=!ze);break;case Me:case 10:case 13:if(!ze&&pe())break e;break;default:break}return J-K>0&&pe(),A["!ref"]=Zr(I),A}function d(C,O){return!(O&&O.PRN)||O.FS||C.slice(0,4)=="sep="||C.indexOf("	")>=0||C.indexOf(",")>=0||C.indexOf(";")>=0?s(C,O):Pu(t(C,O),O)}function u(C,O){var T="",w=O.type=="string"?[0,0,0,0]:xue(C,O);switch(O.type){case"base64":T=Zc(C);break;case"binary":T=C;break;case"buffer":O.codepage==65001?T=C.toString("utf8"):O.codepage&&typeof rr<"u"?T=rr.utils.decode(O.codepage,C):T=Ai&&Buffer.isBuffer(C)?C.toString("binary"):Gh(C);break;case"array":T=hb(C);break;case"string":T=C;break;default:throw new Error("Unrecognized type "+O.type)}return w[0]==239&&w[1]==187&&w[2]==191?T=Rh(T.slice(3)):O.type!="string"&&O.type!="buffer"&&O.codepage==65001?T=Rh(T):O.type=="binary"&&typeof rr<"u"&&O.codepage&&(T=rr.utils.decode(O.codepage,rr.utils.encode(28591,T))),T.slice(0,19)=="socialcalc:version:"?tF.to_sheet(O.type=="string"?T:Rh(T),O):d(T,O)}function h(C,O){return kp(u(C,O),O)}function v(C){for(var O=[],T=hr(C["!ref"]),w,A=Array.isArray(C),I=T.s.r;I<=T.e.r;++I){for(var L=[],B=T.s.c;B<=T.e.c;++B){var q=Yi({r:I,c:B});if(w=A?(C[I]||[])[B]:C[q],!w||w.v==null){L.push("          ");continue}for(var K=(w.w||(ed(w),w.w)||"").slice(0,10);K.length<10;)K+=" ";L.push(K+(B===0?" ":""))}O.push(L.join(""))}return O.join(`
`)}return{to_workbook:h,to_sheet:u,from_sheet:v}})();var ZR=(function(){function n(U,Q,W){if(U){ms(U,U.l||0);for(var Y=W.Enum||_t;U.l<U.length;){var ue=U.read_shift(2),we=Y[ue]||Y[65535],qe=U.read_shift(2),Ae=U.l+qe,Re=we.f&&we.f(U,qe,W);if(U.l=Ae,Q(Re,we,ue))return}}}function t(U,Q){switch(Q.type){case"base64":return e(yl(Zc(U)),Q);case"binary":return e(yl(U),Q);case"buffer":case"array":return e(U,Q)}throw"Unsupported type "+Q.type}function e(U,Q){if(!U)return U;var W=Q||{};rc!=null&&W.dense==null&&(W.dense=rc);var Y=W.dense?[]:{},ue="Sheet1",we="",qe=0,Ae={},Re=[],gt=[],Pt={s:{r:0,c:0},e:{r:0,c:0}},Nt=W.sheetRows||0;if(U[2]==0&&(U[3]==8||U[3]==9)&&U.length>=16&&U[14]==5&&U[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(U[2]==2)W.Enum=_t,n(U,function(Ot,rn,bt){switch(bt){case 0:W.vers=Ot,Ot>=4096&&(W.qpro=!0);break;case 6:Pt=Ot;break;case 204:Ot&&(we=Ot);break;case 222:we=Ot;break;case 15:case 51:W.qpro||(Ot[1].v=Ot[1].v.slice(1));case 13:case 14:case 16:bt==14&&(Ot[2]&112)==112&&(Ot[2]&15)>1&&(Ot[2]&15)<15&&(Ot[1].z=W.dateNF||Fr[14],W.cellDates&&(Ot[1].t="d",Ot[1].v=M7(Ot[1].v))),W.qpro&&Ot[3]>qe&&(Y["!ref"]=Zr(Pt),Ae[ue]=Y,Re.push(ue),Y=W.dense?[]:{},Pt={s:{r:0,c:0},e:{r:0,c:0}},qe=Ot[3],ue=we||"Sheet"+(qe+1),we="");var fn=W.dense?(Y[Ot[0].r]||[])[Ot[0].c]:Y[Yi(Ot[0])];if(fn){fn.t=Ot[1].t,fn.v=Ot[1].v,Ot[1].z!=null&&(fn.z=Ot[1].z),Ot[1].f!=null&&(fn.f=Ot[1].f);break}W.dense?(Y[Ot[0].r]||(Y[Ot[0].r]=[]),Y[Ot[0].r][Ot[0].c]=Ot[1]):Y[Yi(Ot[0])]=Ot[1];break;default:}},W);else if(U[2]==26||U[2]==14)W.Enum=pt,U[2]==14&&(W.qpro=!0,U.l=0),n(U,function(Ot,rn,bt){switch(bt){case 204:ue=Ot;break;case 22:Ot[1].v=Ot[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ot[3]>qe&&(Y["!ref"]=Zr(Pt),Ae[ue]=Y,Re.push(ue),Y=W.dense?[]:{},Pt={s:{r:0,c:0},e:{r:0,c:0}},qe=Ot[3],ue="Sheet"+(qe+1)),Nt>0&&Ot[0].r>=Nt)break;W.dense?(Y[Ot[0].r]||(Y[Ot[0].r]=[]),Y[Ot[0].r][Ot[0].c]=Ot[1]):Y[Yi(Ot[0])]=Ot[1],Pt.e.c<Ot[0].c&&(Pt.e.c=Ot[0].c),Pt.e.r<Ot[0].r&&(Pt.e.r=Ot[0].r);break;case 27:Ot[14e3]&&(gt[Ot[14e3][0]]=Ot[14e3][1]);break;case 1537:gt[Ot[0]]=Ot[1],Ot[0]==qe&&(ue=Ot[1]);break;default:break}},W);else throw new Error("Unrecognized LOTUS BOF "+U[2]);if(Y["!ref"]=Zr(Pt),Ae[we||ue]=Y,Re.push(we||ue),!gt.length)return{SheetNames:Re,Sheets:Ae};for(var Bt={},de=[],It=0;It<gt.length;++It)Ae[Re[It]]?(de.push(gt[It]||Re[It]),Bt[gt[It]]=Ae[gt[It]]||Ae[Re[It]]):(de.push(gt[It]),Bt[gt[It]]={"!ref":"A1"});return{SheetNames:de,Sheets:Bt}}function i(U,Q){var W=Q||{};if(+W.codepage>=0&&Uh(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Ha(),ue=hr(U["!ref"]),we=Array.isArray(U),qe=[];Ht(Y,0,s(1030)),Ht(Y,6,h(ue));for(var Ae=Math.min(ue.e.r,8191),Re=ue.s.r;Re<=Ae;++Re)for(var gt=Ho(Re),Pt=ue.s.c;Pt<=ue.e.c;++Pt){Re===ue.s.r&&(qe[Pt]=aa(Pt));var Nt=qe[Pt]+gt,Bt=we?(U[Re]||[])[Pt]:U[Nt];if(!(!Bt||Bt.t=="z"))if(Bt.t=="n")(Bt.v|0)==Bt.v&&Bt.v>=-32768&&Bt.v<=32767?Ht(Y,13,w(Re,Pt,Bt.v)):Ht(Y,14,I(Re,Pt,Bt.v));else{var de=ed(Bt);Ht(Y,15,O(Re,Pt,de.slice(0,239)))}}return Ht(Y,1),Y.end()}function r(U,Q){var W=Q||{};if(+W.codepage>=0&&Uh(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Ha();Ht(Y,0,d(U));for(var ue=0,we=0;ue<U.SheetNames.length;++ue)(U.Sheets[U.SheetNames[ue]]||{})["!ref"]&&Ht(Y,27,Je(U.SheetNames[ue],we++));var qe=0;for(ue=0;ue<U.SheetNames.length;++ue){var Ae=U.Sheets[U.SheetNames[ue]];if(!(!Ae||!Ae["!ref"])){for(var Re=hr(Ae["!ref"]),gt=Array.isArray(Ae),Pt=[],Nt=Math.min(Re.e.r,8191),Bt=Re.s.r;Bt<=Nt;++Bt)for(var de=Ho(Bt),It=Re.s.c;It<=Re.e.c;++It){Bt===Re.s.r&&(Pt[It]=aa(It));var Ot=Pt[It]+de,rn=gt?(Ae[Bt]||[])[It]:Ae[Ot];if(!(!rn||rn.t=="z"))if(rn.t=="n")Ht(Y,23,pe(Bt,It,qe,rn.v));else{var bt=ed(rn);Ht(Y,22,oe(Bt,It,qe,bt.slice(0,239)))}}++qe}}return Ht(Y,1),Y.end()}function s(U){var Q=mt(2);return Q.write_shift(2,U),Q}function d(U){var Q=mt(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var W=0,Y=0,ue=0,we=0;we<U.SheetNames.length;++we){var qe=U.SheetNames[we],Ae=U.Sheets[qe];if(!(!Ae||!Ae["!ref"])){++ue;var Re=gs(Ae["!ref"]);W<Re.e.r&&(W=Re.e.r),Y<Re.e.c&&(Y=Re.e.c)}}return W>8191&&(W=8191),Q.write_shift(2,W),Q.write_shift(1,ue),Q.write_shift(1,Y),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function u(U,Q,W){var Y={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&W.qpro?(Y.s.c=U.read_shift(1),U.l++,Y.s.r=U.read_shift(2),Y.e.c=U.read_shift(1),U.l++,Y.e.r=U.read_shift(2),Y):(Y.s.c=U.read_shift(2),Y.s.r=U.read_shift(2),Q==12&&W.qpro&&(U.l+=2),Y.e.c=U.read_shift(2),Y.e.r=U.read_shift(2),Q==12&&W.qpro&&(U.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function h(U){var Q=mt(8);return Q.write_shift(2,U.s.c),Q.write_shift(2,U.s.r),Q.write_shift(2,U.e.c),Q.write_shift(2,U.e.r),Q}function v(U,Q,W){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(Y[0].c=U.read_shift(1),Y[3]=U.read_shift(1),Y[0].r=U.read_shift(2),U.l+=2):(Y[2]=U.read_shift(1),Y[0].c=U.read_shift(2),Y[0].r=U.read_shift(2)),Y}function C(U,Q,W){var Y=U.l+Q,ue=v(U,Q,W);if(ue[1].t="s",W.vers==20768){U.l++;var we=U.read_shift(1);return ue[1].v=U.read_shift(we,"utf8"),ue}return W.qpro&&U.l++,ue[1].v=U.read_shift(Y-U.l,"cstr"),ue}function O(U,Q,W){var Y=mt(7+W.length);Y.write_shift(1,255),Y.write_shift(2,Q),Y.write_shift(2,U),Y.write_shift(1,39);for(var ue=0;ue<Y.length;++ue){var we=W.charCodeAt(ue);Y.write_shift(1,we>=128?95:we)}return Y.write_shift(1,0),Y}function T(U,Q,W){var Y=v(U,Q,W);return Y[1].v=U.read_shift(2,"i"),Y}function w(U,Q,W){var Y=mt(7);return Y.write_shift(1,255),Y.write_shift(2,Q),Y.write_shift(2,U),Y.write_shift(2,W,"i"),Y}function A(U,Q,W){var Y=v(U,Q,W);return Y[1].v=U.read_shift(8,"f"),Y}function I(U,Q,W){var Y=mt(13);return Y.write_shift(1,255),Y.write_shift(2,Q),Y.write_shift(2,U),Y.write_shift(8,W,"f"),Y}function L(U,Q,W){var Y=U.l+Q,ue=v(U,Q,W);if(ue[1].v=U.read_shift(8,"f"),W.qpro)U.l=Y;else{var we=U.read_shift(2);J(U.slice(U.l,U.l+we),ue),U.l+=we}return ue}function B(U,Q,W){var Y=Q&32768;return Q&=-32769,Q=(Y?U:0)+(Q>=8192?Q-16384:Q),(Y?"":"$")+(W?aa(Q):Ho(Q))}var q={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},K=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function J(U,Q){ms(U,0);for(var W=[],Y=0,ue="",we="",qe="",Ae="";U.l<U.length;){var Re=U[U.l++];switch(Re){case 0:W.push(U.read_shift(8,"f"));break;case 1:we=B(Q[0].c,U.read_shift(2),!0),ue=B(Q[0].r,U.read_shift(2),!1),W.push(we+ue);break;case 2:{var gt=B(Q[0].c,U.read_shift(2),!0),Pt=B(Q[0].r,U.read_shift(2),!1);we=B(Q[0].c,U.read_shift(2),!0),ue=B(Q[0].r,U.read_shift(2),!1),W.push(gt+Pt+":"+we+ue)}break;case 3:if(U.l<U.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(U.read_shift(2));break;case 6:{for(var Nt="";Re=U[U.l++];)Nt+=String.fromCharCode(Re);W.push('"'+Nt.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:Ae=W.pop(),qe=W.pop(),W.push(["AND","OR"][Re-20]+"("+qe+","+Ae+")");break;default:if(Re<32&&K[Re])Ae=W.pop(),qe=W.pop(),W.push(qe+K[Re]+Ae);else if(q[Re]){if(Y=q[Re][1],Y==69&&(Y=U[U.l++]),Y>W.length){console.error("WK1 bad formula parse 0x"+Re.toString(16)+":|"+W.join("|")+"|");return}var Bt=W.slice(-Y);W.length-=Y,W.push(q[Re][0]+"("+Bt.join(",")+")")}else return Re<=7?console.error("WK1 invalid opcode "+Re.toString(16)):Re<=24?console.error("WK1 unsupported op "+Re.toString(16)):Re<=30?console.error("WK1 invalid opcode "+Re.toString(16)):Re<=115?console.error("WK1 unsupported function opcode "+Re.toString(16)):console.error("WK1 unrecognized opcode "+Re.toString(16))}}W.length==1?Q[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function Me(U){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=U.read_shift(2),Q[3]=U[U.l++],Q[0].c=U[U.l++],Q}function ze(U,Q){var W=Me(U,Q);return W[1].t="s",W[1].v=U.read_shift(Q-4,"cstr"),W}function oe(U,Q,W,Y){var ue=mt(6+Y.length);ue.write_shift(2,U),ue.write_shift(1,W),ue.write_shift(1,Q),ue.write_shift(1,39);for(var we=0;we<Y.length;++we){var qe=Y.charCodeAt(we);ue.write_shift(1,qe>=128?95:qe)}return ue.write_shift(1,0),ue}function ae(U,Q){var W=Me(U,Q);W[1].v=U.read_shift(2);var Y=W[1].v>>1;if(W[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return W[1].v=Y,W}function X(U,Q){var W=Me(U,Q),Y=U.read_shift(4),ue=U.read_shift(4),we=U.read_shift(2);if(we==65535)return Y===0&&ue===3221225472?(W[1].t="e",W[1].v=15):Y===0&&ue===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var qe=we&32768;return we=(we&32767)-16446,W[1].v=(1-qe*2)*(ue*Math.pow(2,we+32)+Y*Math.pow(2,we)),W}function pe(U,Q,W,Y){var ue=mt(14);if(ue.write_shift(2,U),ue.write_shift(1,W),ue.write_shift(1,Q),Y==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var we=0,qe=0,Ae=0,Re=0;return Y<0&&(we=1,Y=-Y),qe=Math.log2(Y)|0,Y/=Math.pow(2,qe-31),Re=Y>>>0,(Re&2147483648)==0&&(Y/=2,++qe,Re=Y>>>0),Y-=Re,Re|=2147483648,Re>>>=0,Y*=Math.pow(2,32),Ae=Y>>>0,ue.write_shift(4,Ae),ue.write_shift(4,Re),qe+=16383+(we?32768:0),ue.write_shift(2,qe),ue}function z(U,Q){var W=X(U,14);return U.l+=Q-14,W}function Z(U,Q){var W=Me(U,Q),Y=U.read_shift(4);return W[1].v=Y>>6,W}function ge(U,Q){var W=Me(U,Q),Y=U.read_shift(8,"f");return W[1].v=Y,W}function Pe(U,Q){var W=ge(U,14);return U.l+=Q-10,W}function Ve(U,Q){return U[U.l+Q-1]==0?U.read_shift(Q,"cstr"):""}function De(U,Q){var W=U[U.l++];W>Q-1&&(W=Q-1);for(var Y="";Y.length<W;)Y+=String.fromCharCode(U[U.l++]);return Y}function Fe(U,Q,W){if(!(!W.qpro||Q<21)){var Y=U.read_shift(1);U.l+=17,U.l+=1,U.l+=2;var ue=U.read_shift(Q-21,"cstr");return[Y,ue]}}function Te(U,Q){for(var W={},Y=U.l+Q;U.l<Y;){var ue=U.read_shift(2);if(ue==14e3){for(W[ue]=[0,""],W[ue][0]=U.read_shift(2);U[U.l];)W[ue][1]+=String.fromCharCode(U[U.l]),U.l++;U.l++}}return W}function Je(U,Q){var W=mt(5+U.length);W.write_shift(2,14e3),W.write_shift(2,Q);for(var Y=0;Y<U.length;++Y){var ue=U.charCodeAt(Y);W[W.l++]=ue>127?95:ue}return W[W.l++]=0,W}var _t={0:{n:"BOF",f:K7},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:T},14:{n:"NUMBER",f:A},15:{n:"LABEL",f:C},16:{n:"FORMULA",f:L},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:C},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ve},222:{n:"SHEETNAMELP",f:De},65535:{n:""}},pt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ze},23:{n:"NUMBER17",f:X},24:{n:"NUMBER18",f:ae},25:{n:"FORMULA19",f:z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Z},38:{n:"??"},39:{n:"NUMBER27",f:ge},40:{n:"FORMULA28",f:Pe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ve},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:r,to_workbook:t}})();var lce=/^\s|\s$|[\t\n\r]/;function nF(n,t){if(!t.bookSST)return"";var e=[eo];e[e.length]=zt("sst",null,{xmlns:Mu[0],count:n.Count,uniqueCount:n.Unique});for(var i=0;i!=n.length;++i)if(n[i]!=null){var r=n[i],s="<si>";r.r?s+=r.r:(s+="<t",r.t||(r.t=""),r.t.match(lce)&&(s+=' xml:space="preserve"'),s+=">"+$i(r.t)+"</t>"),s+="</si>",e[e.length]=s}return e.length>2&&(e[e.length]="</sst>",e[1]=e[1].replace("/>",">")),e.join("")}function cce(n){return[n.read_shift(4),n.read_shift(4)]}function dce(n,t){return t||(t=mt(8)),t.write_shift(4,n.Count),t.write_shift(4,n.Unique),t}var pce=tle;function mce(n){var t=Ha();St(t,159,dce(n));for(var e=0;e<n.length;++e)St(t,19,pce(n[e]));return St(t,160),t.end()}function uce(n){if(typeof rr<"u")return rr.utils.encode(Cu,n);for(var t=[],e=n.split(""),i=0;i<e.length;++i)t[i]=e[i].charCodeAt(0);return t}function iF(n){var t=0,e,i=uce(n),r=i.length+1,s,d,u,h,v;for(e=Ep(r),e[0]=i.length,s=1;s!=r;++s)e[s]=i[s-1];for(s=r-1;s>=0;--s)d=e[s],u=(t&16384)===0?0:1,h=t<<1&32767,v=u|h,t=v^d;return t^52811}var gce=(function(){function n(r,s){switch(s.type){case"base64":return t(Zc(r),s);case"binary":return t(r,s);case"buffer":return t(Ai&&Buffer.isBuffer(r)?r.toString("binary"):Gh(r),s);case"array":return t(hb(r),s)}throw new Error("Unrecognized type "+s.type)}function t(r,s){var d=s||{},u=d.dense?[]:{},h=r.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var v={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(C,O){Array.isArray(u)&&(u[O]=[]);for(var T=/\\\w+\b/g,w=0,A,I=-1;A=T.exec(C);){switch(A[0]){case"\\cell":var L=C.slice(w,T.lastIndex-A[0].length);if(L[0]==" "&&(L=L.slice(1)),++I,L.length){var B={v:L,t:"s"};Array.isArray(u)?u[O][I]=B:u[Yi({r:O,c:I})]=B}break}w=T.lastIndex}I>v.e.c&&(v.e.c=I)}),u["!ref"]=Zr(v),u}function e(r,s){return kp(n(r,s),s)}function i(r){for(var s=["{\\rtf1\\ansi"],d=hr(r["!ref"]),u,h=Array.isArray(r),v=d.s.r;v<=d.e.r;++v){s.push("\\trowd\\trautofit1");for(var C=d.s.c;C<=d.e.c;++C)s.push("\\cellx"+(C+1));for(s.push("\\pard\\intbl"),C=d.s.c;C<=d.e.c;++C){var O=Yi({r:v,c:C});u=h?(r[v]||[])[C]:r[O],!(!u||u.v==null&&(!u.f||u.F))&&(s.push(" "+(u.w||(ed(u),u.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:e,to_sheet:n,from_sheet:i}})();function e7(n){for(var t=0,e=1;t!=3;++t)e=e*256+(n[t]>255?255:n[t]<0?0:n[t]);return e.toString(16).toUpperCase().slice(1)}var fce=6;var Xc=fce;function sb(n){return Math.floor((n+Math.round(128/Xc)/256)*Xc)}function lb(n){return Math.floor((n-5)/Xc*100+.5)/100}function iO(n){return Math.round((n*Xc+5)/Xc*256)/256}function bO(n){n.width?(n.wpx=sb(n.width),n.wch=lb(n.wpx),n.MDW=Xc):n.wpx?(n.wch=lb(n.wpx),n.width=iO(n.wch),n.MDW=Xc):typeof n.wch=="number"&&(n.width=iO(n.wch),n.wpx=sb(n.width),n.MDW=Xc),n.customWidth&&delete n.customWidth}var hce=96,rF=hce;function cb(n){return n*96/rF}function oF(n){return n*rF/96}function _ce(n){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var i=e[0];i<=e[1];++i)n[i]!=null&&(t[t.length]=zt("numFmt",null,{numFmtId:i,formatCode:$i(n[i])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=zt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function vce(n){var t=[];return t[t.length]=zt("cellXfs",null),n.forEach(function(e){t[t.length]=zt("xf",null,e)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=zt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function aF(n,t){var e=[eo,zt("styleSheet",null,{xmlns:Mu[0],"xmlns:vt":Mo.vt})],i;return n.SSF&&(i=_ce(n.SSF))!=null&&(e[e.length]=i),e[e.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',e[e.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',e[e.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',e[e.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(i=vce(t.cellXfs))&&(e[e.length]=i),e[e.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',e[e.length]='<dxfs count="0"/>',e[e.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',e.length>2&&(e[e.length]="</styleSheet>",e[1]=e[1].replace("/>",">")),e.join("")}function xce(n,t){var e=n.read_shift(2),i=sa(n,t-2);return[e,i]}function yce(n,t,e){e||(e=mt(6+4*t.length)),e.write_shift(2,n),Po(t,e);var i=e.length>e.l?e.slice(0,e.l):e;return e.l==null&&(e.l=e.length),i}function Cce(n,t,e){var i={};i.sz=n.read_shift(2)/20;var r=lle(n,2,e);r.fItalic&&(i.italic=1),r.fCondense&&(i.condense=1),r.fExtend&&(i.extend=1),r.fShadow&&(i.shadow=1),r.fOutline&&(i.outline=1),r.fStrikeout&&(i.strike=1);var s=n.read_shift(2);switch(s===700&&(i.bold=1),n.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var d=n.read_shift(1);d!=0&&(i.underline=d);var u=n.read_shift(1);u>0&&(i.family=u);var h=n.read_shift(1);switch(h>0&&(i.charset=h),n.l++,i.color=sle(n,8),n.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=sa(n,t-21),i}function bce(n,t){t||(t=mt(153)),t.write_shift(2,n.sz*20),cle(n,t),t.write_shift(2,n.bold?700:400);var e=0;n.vertAlign=="superscript"?e=1:n.vertAlign=="subscript"&&(e=2),t.write_shift(2,e),t.write_shift(1,n.underline||0),t.write_shift(1,n.family||0),t.write_shift(1,n.charset||0),t.write_shift(1,0),ob(n.color,t);var i=0;return n.scheme=="major"&&(i=1),n.scheme=="minor"&&(i=2),t.write_shift(1,i),Po(n.name,t),t.length>t.l?t.slice(0,t.l):t}var Mce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],K3,Sce=oc;function t7(n,t){t||(t=mt(84)),K3||(K3=aO(Mce));var e=K3[n.patternType];e==null&&(e=40),t.write_shift(4,e);var i=0;if(e!=40)for(ob({auto:1},t),ob({auto:1},t);i<12;++i)t.write_shift(4,0);else{for(;i<4;++i)t.write_shift(4,0);for(;i<12;++i)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Pce(n,t){var e=n.l+t,i=n.read_shift(2),r=n.read_shift(2);return n.l=e,{ixfe:i,numFmtId:r}}function sF(n,t,e){e||(e=mt(16)),e.write_shift(2,t||0),e.write_shift(2,n.numFmtId||0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);var i=0;return e.write_shift(1,i),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e}function Dh(n,t){return t||(t=mt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var wce=oc;function Ece(n,t){return t||(t=mt(51)),t.write_shift(1,0),Dh(null,t),Dh(null,t),Dh(null,t),Dh(null,t),Dh(null,t),t.length>t.l?t.slice(0,t.l):t}function Oce(n,t){return t||(t=mt(52)),t.write_shift(4,n.xfId),t.write_shift(2,1),t.write_shift(1,+n.builtinId),t.write_shift(1,0),rb(n.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Tce(n,t,e){var i=mt(2052);return i.write_shift(4,n),rb(t,i),rb(e,i),i.length>i.l?i.slice(0,i.l):i}function kce(n,t){if(t){var e=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var r=i[0];r<=i[1];++r)t[r]!=null&&++e}),e!=0&&(St(n,615,bl(e)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var r=i[0];r<=i[1];++r)t[r]!=null&&St(n,44,yce(r,t[r]))}),St(n,616))}}function Ice(n){var t=1;t!=0&&(St(n,611,bl(t)),St(n,43,bce({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),St(n,612))}function Dce(n){var t=2;t!=0&&(St(n,603,bl(t)),St(n,45,t7({patternType:"none"})),St(n,45,t7({patternType:"gray125"})),St(n,604))}function Ace(n){var t=1;t!=0&&(St(n,613,bl(t)),St(n,46,Ece({})),St(n,614))}function Rce(n){var t=1;St(n,626,bl(t)),St(n,47,sF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),St(n,627)}function Fce(n,t){St(n,617,bl(t.length)),t.forEach(function(e){St(n,47,sF(e,0))}),St(n,618)}function Nce(n){var t=1;St(n,619,bl(t)),St(n,48,Oce({xfId:0,builtinId:0,name:"Normal"})),St(n,620)}function Lce(n){var t=0;St(n,505,bl(t)),St(n,506)}function Vce(n){var t=0;St(n,508,Tce(t,"TableStyleMedium9","PivotStyleMedium4")),St(n,509)}function Bce(n,t){var e=Ha();return St(e,278),kce(e,n.SSF),Ice(e,n),Dce(e,n),Ace(e,n),Rce(e,n),Fce(e,t.cellXfs),Nce(e,n),Lce(e,n),Vce(e,n),St(e,279),e.end()}function lF(n,t){if(t&&t.themeXLSX)return t.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var e=[eo];return e[e.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',e[e.length]="<a:themeElements>",e[e.length]='<a:clrScheme name="Office">',e[e.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',e[e.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',e[e.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',e[e.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',e[e.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',e[e.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',e[e.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',e[e.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',e[e.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',e[e.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',e[e.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',e[e.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',e[e.length]="</a:clrScheme>",e[e.length]='<a:fontScheme name="Office">',e[e.length]="<a:majorFont>",e[e.length]='<a:latin typeface="Cambria"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',e[e.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',e[e.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',e[e.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',e[e.length]='<a:font script="Arab" typeface="Times New Roman"/>',e[e.length]='<a:font script="Hebr" typeface="Times New Roman"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="MoolBoran"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Times New Roman"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:majorFont>",e[e.length]="<a:minorFont>",e[e.length]='<a:latin typeface="Calibri"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',e[e.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',e[e.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',e[e.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',e[e.length]='<a:font script="Arab" typeface="Arial"/>',e[e.length]='<a:font script="Hebr" typeface="Arial"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="DaunPenh"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Arial"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:minorFont>",e[e.length]="</a:fontScheme>",e[e.length]='<a:fmtScheme name="Office">',e[e.length]="<a:fillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="1"/>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="0"/>',e[e.length]="</a:gradFill>",e[e.length]="</a:fillStyleLst>",e[e.length]="<a:lnStyleLst>",e[e.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]="</a:lnStyleLst>",e[e.length]="<a:effectStyleLst>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',e[e.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',e[e.length]="</a:effectStyle>",e[e.length]="</a:effectStyleLst>",e[e.length]="<a:bgFillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]="</a:bgFillStyleLst>",e[e.length]="</a:fmtScheme>",e[e.length]="</a:themeElements>",e[e.length]="<a:objectDefaults>",e[e.length]="<a:spDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',e[e.length]="</a:spDef>",e[e.length]="<a:lnDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',e[e.length]="</a:lnDef>",e[e.length]="</a:objectDefaults>",e[e.length]="<a:extraClrSchemeLst/>",e[e.length]="</a:theme>",e.join("")}function Uce(n,t){return{flags:n.read_shift(4),version:n.read_shift(4),name:sa(n,t-8)}}function jce(n){var t=mt(12+2*n.name.length);return t.write_shift(4,n.flags),t.write_shift(4,n.version),Po(n.name,t),t.slice(0,t.l)}function Wce(n){for(var t=[],e=n.read_shift(4);e-- >0;)t.push([n.read_shift(4),n.read_shift(4)]);return t}function zce(n){var t=mt(4+8*n.length);t.write_shift(4,n.length);for(var e=0;e<n.length;++e)t.write_shift(4,n[e][0]),t.write_shift(4,n[e][1]);return t}function qce(n,t){var e=mt(8+2*t.length);return e.write_shift(4,n),Po(t,e),e.slice(0,e.l)}function Hce(n){return n.l+=4,n.read_shift(4)!=0}function Gce(n,t){var e=mt(8);return e.write_shift(4,n),e.write_shift(4,t?1:0),e}function $ce(){var n=Ha();return St(n,332),St(n,334,bl(1)),St(n,335,jce({name:"XLDAPR",version:12e4,flags:3496657072})),St(n,336),St(n,339,qce(1,"XLDAPR")),St(n,52),St(n,35,bl(514)),St(n,4096,bl(0)),St(n,4097,Bs(1)),St(n,36),St(n,53),St(n,340),St(n,337,Gce(1,!0)),St(n,51,zce([[1,0]])),St(n,338),St(n,333),n.end()}function cF(){var n=[eo];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function Yce(n){var t={};t.i=n.read_shift(4);var e={};e.r=n.read_shift(4),e.c=n.read_shift(4),t.r=Yi(e);var i=n.read_shift(1);return i&2&&(t.l="1"),i&8&&(t.a="1"),t}var fu=1024;function dF(n,t){for(var e=[21600,21600],i=["m0,0l0",e[1],e[0],e[1],e[0],"0xe"].join(","),r=[zt("xml",null,{"xmlns:v":us.v,"xmlns:o":us.o,"xmlns:x":us.x,"xmlns:mv":us.mv}).replace(/\/>/,">"),zt("o:shapelayout",zt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),zt("v:shapetype",[zt("v:stroke",null,{joinstyle:"miter"}),zt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:e.join(","),path:i})];fu<n*1e3;)fu+=1e3;return t.forEach(function(s){var d=So(s[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var h=u.type=="gradient"?zt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,v=zt("v:fill",h,u),C={on:"t",obscured:"t"};++fu,r=r.concat(["<v:shape"+zh({id:"_x0000_s"+fu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",v,zt("v:shadow",null,C),zt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qo("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),qo("x:AutoFill","False"),qo("x:Row",String(d.r)),qo("x:Column",String(d.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),r.push("</xml>"),r.join("")}function pF(n){var t=[eo,zt("comments",null,{xmlns:Mu[0]})],e=[];return t.push("<authors>"),n.forEach(function(i){i[1].forEach(function(r){var s=$i(r.a);e.indexOf(s)==-1&&(e.push(s),t.push("<author>"+s+"</author>")),r.T&&r.ID&&e.indexOf("tc="+r.ID)==-1&&(e.push("tc="+r.ID),t.push("<author>tc="+r.ID+"</author>"))})}),e.length==0&&(e.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),n.forEach(function(i){var r=0,s=[];if(i[1][0]&&i[1][0].T&&i[1][0].ID?r=e.indexOf("tc="+i[1][0].ID):i[1].forEach(function(h){h.a&&(r=e.indexOf($i(h.a))),s.push(h.t||"")}),t.push('<comment ref="'+i[0]+'" authorId="'+r+'"><text>'),s.length<=1)t.push(qo("t",$i(s[0]||"")));else{for(var d=`Comment:
    `+s[0]+`
`,u=1;u<s.length;++u)d+=`Reply:
    `+s[u]+`
`;t.push(qo("t",$i(d)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Jce(n,t,e){var i=[eo,zt("ThreadedComments",null,{xmlns:Mo.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(r){var s="";(r[1]||[]).forEach(function(d,u){if(!d.T){delete d.ID;return}d.a&&t.indexOf(d.a)==-1&&t.push(d.a);var h={ref:r[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+e.tcid++).slice(-12)+"}"};u==0?s=h.id:h.parentId=s,d.ID=h.id,d.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(d.a)).slice(-12)+"}"),i.push(zt("threadedComment",qo("text",d.t||""),h))})}),i.push("</ThreadedComments>"),i.join("")}function Kce(n){var t=[eo,zt("personList",null,{xmlns:Mo.TCMNT,"xmlns:x":Mu[0]}).replace(/[\/]>/,">")];return n.forEach(function(e,i){t.push(zt("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+i).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Qce(n){var t={};t.iauthor=n.read_shift(4);var e=Rp(n,16);return t.rfx=e.s,t.ref=Yi(e.s),n.l+=16,t}function Xce(n,t){return t==null&&(t=mt(36)),t.write_shift(4,n[1].iauthor),wu(n[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Zce=sa;function ede(n){return Po(n.slice(0,54))}function tde(n){var t=Ha(),e=[];return St(t,628),St(t,630),n.forEach(function(i){i[1].forEach(function(r){e.indexOf(r.a)>-1||(e.push(r.a.slice(0,54)),St(t,632,ede(r.a)))})}),St(t,631),St(t,633),n.forEach(function(i){i[1].forEach(function(r){r.iauthor=e.indexOf(r.a);var s={s:So(i[0]),e:So(i[0])};St(t,635,Xce([s,r])),r.t&&r.t.length>0&&St(t,637,ile(r)),St(t,636),delete r.iauthor})}),St(t,634),St(t,629),t.end()}function nde(n,t){t.FullPaths.forEach(function(e,i){if(i!=0){var r=e.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");r.slice(-1)!=="/"&&Zi.utils.cfb_add(n,r,t.FileIndex[i].content)}})}var mF=["xlsb","xlsm","xlam","biff8","xla"];var ide=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function e(i,r,s,d){var u=!1,h=!1;s.length==0?h=!0:s.charAt(0)=="["&&(h=!0,s=s.slice(1,-1)),d.length==0?u=!0:d.charAt(0)=="["&&(u=!0,d=d.slice(1,-1));var v=s.length>0?parseInt(s,10)|0:0,C=d.length>0?parseInt(d,10)|0:0;return u?C+=t.c:--C,h?v+=t.r:--v,r+(u?"":"$")+aa(C)+(h?"":"$")+Ho(v)}return function(r,s){return t=s,r.replace(n,e)}})(),MO=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,SO=(function(){return function(t,e){return t.replace(MO,function(i,r,s,d,u,h){var v=_O(d)-(s?0:e.c),C=hO(h)-(u?0:e.r),O=C==0?"":u?C+1:"["+C+"]",T=v==0?"":s?v+1:"["+v+"]";return r+"R"+O+"C"+T})}})();function rde(n,t){return n.replace(MO,function(e,i,r,s,d,u){return i+(r=="$"?r+s:aa(_O(s)+t.c))+(d=="$"?d+u:Ho(hO(u)+t.r))})}function ode(n){return n.length!=1}function Xr(n){n.l+=1}function a0(n,t){var e=n.read_shift(t==1?1:2);return[e&16383,e>>14&1,e>>15&1]}function uF(n,t,e){var i=2;if(e){if(e.biff>=2&&e.biff<=5)return gF(n,t,e);e.biff==12&&(i=4)}var r=n.read_shift(i),s=n.read_shift(i),d=a0(n,2),u=a0(n,2);return{s:{r,c:d[0],cRel:d[1],rRel:d[2]},e:{r:s,c:u[0],cRel:u[1],rRel:u[2]}}}function gF(n){var t=a0(n,2),e=a0(n,2),i=n.read_shift(1),r=n.read_shift(1);return{s:{r:t[0],c:i,cRel:t[1],rRel:t[2]},e:{r:e[0],c:r,cRel:e[1],rRel:e[2]}}}function ade(n,t,e){if(e.biff<8)return gF(n,t,e);var i=n.read_shift(e.biff==12?4:2),r=n.read_shift(e.biff==12?4:2),s=a0(n,2),d=a0(n,2);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r,c:d[0],cRel:d[1],rRel:d[2]}}}function fF(n,t,e){if(e&&e.biff>=2&&e.biff<=5)return sde(n,t,e);var i=n.read_shift(e&&e.biff==12?4:2),r=a0(n,2);return{r:i,c:r[0],cRel:r[1],rRel:r[2]}}function sde(n){var t=a0(n,2),e=n.read_shift(1);return{r:t[0],c:e,cRel:t[1],rRel:t[2]}}function lde(n){var t=n.read_shift(2),e=n.read_shift(2);return{r:t,c:e&255,fQuoted:!!(e&16384),cRel:e>>15,rRel:e>>15}}function cde(n,t,e){var i=e&&e.biff?e.biff:8;if(i>=2&&i<=5)return dde(n,t,e);var r=n.read_shift(i>=12?4:2),s=n.read_shift(2),d=(s&16384)>>14,u=(s&32768)>>15;if(s&=16383,u==1)for(;r>524287;)r-=1048576;if(d==1)for(;s>8191;)s=s-16384;return{r,c:s,cRel:d,rRel:u}}function dde(n){var t=n.read_shift(2),e=n.read_shift(1),i=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,i==1&&t>=8192&&(t=t-16384),r==1&&e>=128&&(e=e-256),{r:t,c:e,cRel:r,rRel:i}}function pde(n,t,e){var i=(n[n.l++]&96)>>5,r=uF(n,e.biff>=2&&e.biff<=5?6:8,e);return[i,r]}function mde(n,t,e){var i=(n[n.l++]&96)>>5,r=n.read_shift(2,"i"),s=8;if(e)switch(e.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var d=uF(n,s,e);return[i,r,d]}function ude(n,t,e){var i=(n[n.l++]&96)>>5;return n.l+=e&&e.biff>8?12:e.biff<8?6:8,[i]}function gde(n,t,e){var i=(n[n.l++]&96)>>5,r=n.read_shift(2),s=8;if(e)switch(e.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[i,r]}function fde(n,t,e){var i=(n[n.l++]&96)>>5,r=ade(n,t-1,e);return[i,r]}function hde(n,t,e){var i=(n[n.l++]&96)>>5;return n.l+=e.biff==2?6:e.biff==12?14:7,[i]}function n7(n){var t=n[n.l+1]&1,e=1;return n.l+=4,[t,e]}function _de(n,t,e){n.l+=2;for(var i=n.read_shift(e&&e.biff==2?1:2),r=[],s=0;s<=i;++s)r.push(n.read_shift(e&&e.biff==2?1:2));return r}function vde(n,t,e){var i=n[n.l+1]&255?1:0;return n.l+=2,[i,n.read_shift(e&&e.biff==2?1:2)]}function xde(n,t,e){var i=n[n.l+1]&255?1:0;return n.l+=2,[i,n.read_shift(e&&e.biff==2?1:2)]}function yde(n){var t=n[n.l+1]&255?1:0;return n.l+=2,[t,n.read_shift(2)]}function Cde(n,t,e){var i=n[n.l+1]&255?1:0;return n.l+=e&&e.biff==2?3:4,[i]}function hF(n){var t=n.read_shift(1),e=n.read_shift(1);return[t,e]}function bde(n){return n.read_shift(2),hF(n,2)}function Mde(n){return n.read_shift(2),hF(n,2)}function Sde(n,t,e){var i=(n[n.l]&96)>>5;n.l+=1;var r=fF(n,0,e);return[i,r]}function Pde(n,t,e){var i=(n[n.l]&96)>>5;n.l+=1;var r=cde(n,0,e);return[i,r]}function wde(n,t,e){var i=(n[n.l]&96)>>5;n.l+=1;var r=n.read_shift(2);e&&e.biff==5&&(n.l+=12);var s=fF(n,0,e);return[i,r,s]}function Ede(n,t,e){var i=(n[n.l]&96)>>5;n.l+=1;var r=n.read_shift(e&&e.biff<=3?1:2);return[E0e[r],xF[r],i]}function Ode(n,t,e){var i=n[n.l++],r=n.read_shift(1),s=e&&e.biff<=3?[i==88?-1:0,n.read_shift(1)]:Tde(n);return[r,(s[0]===0?xF:w0e)[s[1]]]}function Tde(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function kde(n,t,e){n.l+=e&&e.biff==2?3:4}function Ide(n,t,e){if(n.l++,e&&e.biff==12)return[n.read_shift(4,"i"),0];var i=n.read_shift(2),r=n.read_shift(e&&e.biff==2?1:2);return[i,r]}function Dde(n){return n.l++,Yh[n.read_shift(1)]}function Ade(n){return n.l++,n.read_shift(2)}function Rde(n){return n.l++,n.read_shift(1)!==0}function Fde(n){return n.l++,Eu(n,8)}function Nde(n,t,e){return n.l++,X7(n,t-1,e)}function Lde(n,t){var e=[n.read_shift(1)];if(t==12)switch(e[0]){case 2:e[0]=4;break;case 4:e[0]=16;break;case 0:e[0]=1;break;case 1:e[0]=2;break}switch(e[0]){case 4:e[1]=wle(n,1)?"TRUE":"FALSE",t!=12&&(n.l+=7);break;case 37:case 16:e[1]=Yh[n[n.l]],n.l+=t==12?4:8;break;case 0:n.l+=8;break;case 1:e[1]=Eu(n,8);break;case 2:e[1]=kle(n,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+e[0])}return e}function Vde(n,t,e){for(var i=n.read_shift(e.biff==12?4:2),r=[],s=0;s!=i;++s)r.push((e.biff==12?Rp:Ale)(n,8));return r}function Bde(n,t,e){var i=0,r=0;e.biff==12?(i=n.read_shift(4),r=n.read_shift(4)):(r=1+n.read_shift(1),i=1+n.read_shift(2)),e.biff>=2&&e.biff<8&&(--i,--r==0&&(r=256));for(var s=0,d=[];s!=i&&(d[s]=[]);++s)for(var u=0;u!=r;++u)d[s][u]=Lde(n,e.biff);return d}function Ude(n,t,e){var i=n.read_shift(1)>>>5&3,r=!e||e.biff>=8?4:2,s=n.read_shift(r);switch(e.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[i,0,s]}function jde(n,t,e){if(e.biff==5)return Wde(n,t,e);var i=n.read_shift(1)>>>5&3,r=n.read_shift(2),s=n.read_shift(4);return[i,r,s]}function Wde(n){var t=n.read_shift(1)>>>5&3,e=n.read_shift(2,"i");n.l+=8;var i=n.read_shift(2);return n.l+=12,[t,e,i]}function zde(n,t,e){var i=n.read_shift(1)>>>5&3;n.l+=e&&e.biff==2?3:4;var r=n.read_shift(e&&e.biff==2?1:2);return[i,r]}function qde(n,t,e){var i=n.read_shift(1)>>>5&3,r=n.read_shift(e&&e.biff==2?1:2);return[i,r]}function Hde(n,t,e){var i=n.read_shift(1)>>>5&3;return n.l+=4,e.biff<8&&n.l--,e.biff==12&&(n.l+=2),[i]}function Gde(n,t,e){var i=(n[n.l++]&96)>>5,r=n.read_shift(2),s=4;if(e)switch(e.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[i,r]}var $de=oc,Yde=oc,Jde=oc;function Jh(n,t,e){return n.l+=2,[lde(n,4,e)]}function PO(n){return n.l+=6,[]}var Kde=Jh,Qde=PO,Xde=PO,Zde=Jh;function _F(n){return n.l+=2,[K7(n),n.read_shift(2)&1]}var e0e=Jh,t0e=_F,n0e=PO,i0e=Jh,r0e=Jh,o0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function a0e(n){n.l+=2;var t=n.read_shift(2),e=n.read_shift(2),i=n.read_shift(4),r=n.read_shift(2),s=n.read_shift(2),d=o0e[e>>2&31];return{ixti:t,coltype:e&3,rt:d,idx:i,c:r,C:s}}function s0e(n){return n.l+=2,[n.read_shift(4)]}function l0e(n,t,e){return n.l+=5,n.l+=2,n.l+=e.biff==2?1:4,["PTGSHEET"]}function c0e(n,t,e){return n.l+=e.biff==2?4:5,["PTGENDSHEET"]}function d0e(n){var t=n.read_shift(1)>>>5&3,e=n.read_shift(2);return[t,e]}function p0e(n){var t=n.read_shift(1)>>>5&3,e=n.read_shift(2);return[t,e]}function m0e(n){return n.l+=4,[0,0]}var i7={1:{n:"PtgExp",f:Ide},2:{n:"PtgTbl",f:Jde},3:{n:"PtgAdd",f:Xr},4:{n:"PtgSub",f:Xr},5:{n:"PtgMul",f:Xr},6:{n:"PtgDiv",f:Xr},7:{n:"PtgPower",f:Xr},8:{n:"PtgConcat",f:Xr},9:{n:"PtgLt",f:Xr},10:{n:"PtgLe",f:Xr},11:{n:"PtgEq",f:Xr},12:{n:"PtgGe",f:Xr},13:{n:"PtgGt",f:Xr},14:{n:"PtgNe",f:Xr},15:{n:"PtgIsect",f:Xr},16:{n:"PtgUnion",f:Xr},17:{n:"PtgRange",f:Xr},18:{n:"PtgUplus",f:Xr},19:{n:"PtgUminus",f:Xr},20:{n:"PtgPercent",f:Xr},21:{n:"PtgParen",f:Xr},22:{n:"PtgMissArg",f:Xr},23:{n:"PtgStr",f:Nde},26:{n:"PtgSheet",f:l0e},27:{n:"PtgEndSheet",f:c0e},28:{n:"PtgErr",f:Dde},29:{n:"PtgBool",f:Rde},30:{n:"PtgInt",f:Ade},31:{n:"PtgNum",f:Fde},32:{n:"PtgArray",f:hde},33:{n:"PtgFunc",f:Ede},34:{n:"PtgFuncVar",f:Ode},35:{n:"PtgName",f:Ude},36:{n:"PtgRef",f:Sde},37:{n:"PtgArea",f:pde},38:{n:"PtgMemArea",f:zde},39:{n:"PtgMemErr",f:$de},40:{n:"PtgMemNoMem",f:Yde},41:{n:"PtgMemFunc",f:qde},42:{n:"PtgRefErr",f:Hde},43:{n:"PtgAreaErr",f:ude},44:{n:"PtgRefN",f:Pde},45:{n:"PtgAreaN",f:fde},46:{n:"PtgMemAreaN",f:d0e},47:{n:"PtgMemNoMemN",f:p0e},57:{n:"PtgNameX",f:jde},58:{n:"PtgRef3d",f:wde},59:{n:"PtgArea3d",f:mde},60:{n:"PtgRefErr3d",f:Gde},61:{n:"PtgAreaErr3d",f:gde},255:{}},u0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},g0e={1:{n:"PtgElfLel",f:_F},2:{n:"PtgElfRw",f:i0e},3:{n:"PtgElfCol",f:Kde},6:{n:"PtgElfRwV",f:r0e},7:{n:"PtgElfColV",f:Zde},10:{n:"PtgElfRadical",f:e0e},11:{n:"PtgElfRadicalS",f:n0e},13:{n:"PtgElfColS",f:Qde},15:{n:"PtgElfColSV",f:Xde},16:{n:"PtgElfRadicalLel",f:t0e},25:{n:"PtgList",f:a0e},29:{n:"PtgSxName",f:s0e},255:{}},f0e={0:{n:"PtgAttrNoop",f:m0e},1:{n:"PtgAttrSemi",f:Cde},2:{n:"PtgAttrIf",f:xde},4:{n:"PtgAttrChoose",f:_de},8:{n:"PtgAttrGoto",f:vde},16:{n:"PtgAttrSum",f:kde},32:{n:"PtgAttrBaxcel",f:n7},33:{n:"PtgAttrBaxcel",f:n7},64:{n:"PtgAttrSpace",f:bde},65:{n:"PtgAttrSpaceSemi",f:Mde},128:{n:"PtgAttrIfError",f:yde},255:{}};function h0e(n,t,e,i){if(i.biff<8)return oc(n,t);for(var r=n.l+t,s=[],d=0;d!==e.length;++d)switch(e[d][0]){case"PtgArray":e[d][1]=Bde(n,0,i),s.push(e[d][1]);break;case"PtgMemArea":e[d][2]=Vde(n,e[d][1],i),s.push(e[d][2]);break;case"PtgExp":i&&i.biff==12&&(e[d][1][1]=n.read_shift(4),s.push(e[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+e[d][0];default:break}return t=r-n.l,t!==0&&s.push(oc(n,t)),s}function _0e(n,t,e){for(var i=n.l+t,r,s,d=[];i!=n.l;)t=i-n.l,s=n[n.l],r=i7[s]||i7[u0e[s]],(s===24||s===25)&&(r=(s===24?g0e:f0e)[n[n.l+1]]),!r||!r.f?oc(n,t):d.push([r.n,r.f(n,t,e)]);return d}function v0e(n){for(var t=[],e=0;e<n.length;++e){for(var i=n[e],r=[],s=0;s<i.length;++s){var d=i[s];if(d)switch(d[0]){case 2:r.push('"'+d[1].replace(/"/g,'""')+'"');break;default:r.push(d[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var x0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function y0e(n,t){if(!n&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function vF(n,t,e){if(!n)return"SH33TJSERR0";if(e.biff>8&&(!n.XTI||!n.XTI[t]))return n.SheetNames[t];if(!n.XTI)return"SH33TJSERR6";var i=n.XTI[t];if(e.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":n.XTI[t-1];if(!i)return"SH33TJSERR1";var r="";if(e.biff>8)switch(n[i[0]][0]){case 357:return r=i[1]==-1?"#REF":n.SheetNames[i[1]],i[1]==i[2]?r:r+":"+n.SheetNames[i[2]];case 358:return e.SID!=null?n.SheetNames[e.SID]:"SH33TJSSAME"+n[i[0]][0];case 355:default:return"SH33TJSSRC"+n[i[0]][0]}switch(n[i[0]][0][0]){case 1025:return r=i[1]==-1?"#REF":n.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?r:r+":"+n.SheetNames[i[2]];case 14849:return n[i[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[i[0]][0][3]?(r=i[1]==-1?"#REF":n[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?r:r+":"+n[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function r7(n,t,e){var i=vF(n,t,e);return i=="#REF"?i:y0e(i,e)}function bu(n,t,e,i,r){var s=r&&r.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h,v,C,O=0,T=0,w,A="";if(!n[0]||!n[0][0])return"";for(var I=-1,L="",B=0,q=n[0].length;B<q;++B){var K=n[0][B];switch(K[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=u.pop(),v=u.pop(),I>=0){switch(n[0][I][1][0]){case 0:L=Rr(" ",n[0][I][1][1]);break;case 1:L=Rr("\r",n[0][I][1][1]);break;default:if(L="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][I][1][0])}v=v+L,I=-1}u.push(v+x0e[K[0]]+h);break;case"PtgIsect":h=u.pop(),v=u.pop(),u.push(v+" "+h);break;case"PtgUnion":h=u.pop(),v=u.pop(),u.push(v+","+h);break;case"PtgRange":h=u.pop(),v=u.pop(),u.push(v+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":C=Nh(K[1][1],d,r),u.push(Lh(C,s));break;case"PtgRefN":C=e?Nh(K[1][1],e,r):K[1][1],u.push(Lh(C,s));break;case"PtgRef3d":O=K[1][1],C=Nh(K[1][2],d,r),A=r7(i,O,r);var J=A;u.push(A+"!"+Lh(C,s));break;case"PtgFunc":case"PtgFuncVar":var Me=K[1][0],ze=K[1][1];Me||(Me=0),Me&=127;var oe=Me==0?[]:u.slice(-Me);u.length-=Me,ze==="User"&&(ze=oe.shift()),u.push(ze+"("+oe.join(",")+")");break;case"PtgBool":u.push(K[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(K[1]);break;case"PtgNum":u.push(String(K[1]));break;case"PtgStr":u.push('"'+K[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(K[1]);break;case"PtgAreaN":w=WR(K[1][1],e?{s:e}:d,r),u.push(Y3(w,r));break;case"PtgArea":w=WR(K[1][1],d,r),u.push(Y3(w,r));break;case"PtgArea3d":O=K[1][1],w=K[1][2],A=r7(i,O,r),u.push(A+"!"+Y3(w,r));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":T=K[1][2];var ae=(i.names||[])[T-1]||(i[0]||[])[T],X=ae?ae.Name:"SH33TJSNAME"+String(T);X&&X.slice(0,6)=="_xlfn."&&!r.xlfn&&(X=X.slice(6)),u.push(X);break;case"PtgNameX":var pe=K[1][1];T=K[1][2];var z;if(r.biff<=5)pe<0&&(pe=-pe),i[pe]&&(z=i[pe][T]);else{var Z="";if(((i[pe]||[])[0]||[])[0]==14849||(((i[pe]||[])[0]||[])[0]==1025?i[pe][T]&&i[pe][T].itab>0&&(Z=i.SheetNames[i[pe][T].itab-1]+"!"):Z=i.SheetNames[T-1]+"!"),i[pe]&&i[pe][T])Z+=i[pe][T].Name;else if(i[0]&&i[0][T])Z+=i[0][T].Name;else{var ge=(vF(i,pe,r)||"").split(";;");ge[T-1]?Z=ge[T-1]:Z+="SH33TJSERRX"}u.push(Z);break}z||(z={Name:"SH33TJSERRY"}),u.push(z.Name);break;case"PtgParen":var Pe="(",Ve=")";if(I>=0){switch(L="",n[0][I][1][0]){case 2:Pe=Rr(" ",n[0][I][1][1])+Pe;break;case 3:Pe=Rr("\r",n[0][I][1][1])+Pe;break;case 4:Ve=Rr(" ",n[0][I][1][1])+Ve;break;case 5:Ve=Rr("\r",n[0][I][1][1])+Ve;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][I][1][0])}I=-1}u.push(Pe+u.pop()+Ve);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":C={c:K[1][1],r:K[1][0]};var De={c:e.c,r:e.r};if(i.sharedf[Yi(C)]){var Fe=i.sharedf[Yi(C)];u.push(bu(Fe,d,De,i,r))}else{var Te=!1;for(h=0;h!=i.arrayf.length;++h)if(v=i.arrayf[h],!(C.c<v[0].s.c||C.c>v[0].e.c)&&!(C.r<v[0].s.r||C.r>v[0].e.r)){u.push(bu(v[1],d,De,i,r)),Te=!0;break}Te||u.push(K[1])}break;case"PtgArray":u.push("{"+v0e(K[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":I=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+K[1].idx+"[#"+K[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(K));default:throw new Error("Unrecognized Formula Token: "+String(K))}var Je=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&I>=0&&Je.indexOf(n[0][B][0])==-1){K=n[0][I];var _t=!0;switch(K[1][0]){case 4:_t=!1;case 0:L=Rr(" ",K[1][1]);break;case 5:_t=!1;case 1:L=Rr("\r",K[1][1]);break;default:if(L="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+K[1][0])}u.push((_t?L:"")+u.pop()+(_t?"":L)),I=-1}}if(u.length>1&&r.WTF)throw new Error("bad formula stack");return u[0]}function C0e(n){if(n==null){var t=mt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof n=="number")return Op(n);return Op(0)}function b0e(n,t,e,i,r){var s=Tp(t,e,r),d=C0e(n.v),u=mt(6),h=33;u.write_shift(2,h),u.write_shift(4,0);for(var v=mt(n.bf.length),C=0;C<n.bf.length;++C)v[C]=n.bf[C];var O=zo([s,d,u,v]);return O}function vb(n,t,e){var i=n.read_shift(4),r=_0e(n,i,e),s=n.read_shift(4),d=s>0?h0e(n,s,r,e):null;return[r,d]}var M0e=vb,xb=vb,S0e=vb,P0e=vb,w0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},xF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},E0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function O0e(n){var t="of:="+n.replace(MO,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function T0e(n){return n.replace(/\./,"!")}var Vh=typeof Map<"u";function wO(n,t,e){var i=0,r=n.length;if(e){if(Vh?e.has(t):Object.prototype.hasOwnProperty.call(e,t)){for(var s=Vh?e.get(t):e[t];i<s.length;++i)if(n[s[i]].t===t)return n.Count++,s[i]}}else for(;i<r;++i)if(n[i].t===t)return n.Count++,i;return n[r]={t},n.Count++,n.Unique++,e&&(Vh?(e.has(t)||e.set(t,[]),e.get(t).push(r)):(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),e[t].push(r))),r}function yb(n,t){var e={min:n+1,max:n+1},i=-1;return t.MDW&&(Xc=t.MDW),t.width!=null?e.customWidth=1:t.wpx!=null?i=lb(t.wpx):t.wch!=null&&(i=t.wch),i>-1?(e.width=iO(i),e.customWidth=1):t.width!=null&&(e.width=t.width),t.hidden&&(e.hidden=!0),t.level!=null&&(e.outlineLevel=e.level=t.level),e}function yF(n,t){if(n){var e=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(e=[1,1,1,1,.5,.5]),n.left==null&&(n.left=e[0]),n.right==null&&(n.right=e[1]),n.top==null&&(n.top=e[2]),n.bottom==null&&(n.bottom=e[3]),n.header==null&&(n.header=e[4]),n.footer==null&&(n.footer=e[5])}}function l0(n,t,e){var i=e.revssf[t.z!=null?t.z:"General"],r=60,s=n.length;if(i==null&&e.ssf){for(;r<392;++r)if(e.ssf[r]==null){y7(t.z,r),e.ssf[r]=t.z,e.revssf[t.z]=i=r;break}}for(r=0;r!=s;++r)if(n[r].numFmtId===i)return r;return n[s]={numFmtId:i,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function k0e(n,t,e){if(n&&n["!ref"]){var i=hr(n["!ref"]);if(i.e.c<i.s.c||i.e.r<i.s.r)throw new Error("Bad range ("+e+"): "+n["!ref"])}}function I0e(n){if(n.length===0)return"";for(var t='<mergeCells count="'+n.length+'">',e=0;e!=n.length;++e)t+='<mergeCell ref="'+Zr(n[e])+'"/>';return t+"</mergeCells>"}function D0e(n,t,e,i,r){var s=!1,d={},u=null;if(i.bookType!=="xlsx"&&t.vbaraw){var h=t.SheetNames[e];try{t.Workbook&&(h=t.Workbook.Sheets[e].CodeName||h)}catch{}s=!0,d.codeName=Jc($i(h))}if(n&&n["!outline"]){var v={summaryBelow:1,summaryRight:1};n["!outline"].above&&(v.summaryBelow=0),n["!outline"].left&&(v.summaryRight=0),u=(u||"")+zt("outlinePr",null,v)}!s&&!u||(r[r.length]=zt("sheetPr",u,d))}var A0e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],R0e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function F0e(n){var t={sheet:1};return A0e.forEach(function(e){n[e]!=null&&n[e]&&(t[e]="1")}),R0e.forEach(function(e){n[e]!=null&&!n[e]&&(t[e]="0")}),n.password&&(t.password=iF(n.password).toString(16).toUpperCase()),zt("sheetProtection",null,t)}function N0e(n){return yF(n),zt("pageMargins",null,n)}function L0e(n,t){for(var e=["<cols>"],i,r=0;r!=t.length;++r)(i=t[r])&&(e[e.length]=zt("col",null,yb(r,i)));return e[e.length]="</cols>",e.join("")}function V0e(n,t,e,i){var r=typeof n.ref=="string"?n.ref:Zr(n.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var s=e.Workbook.Names,d=gs(r);d.s.r==d.e.r&&(d.e.r=gs(t["!ref"]).e.r,r=Zr(d));for(var u=0;u<s.length;++u){var h=s[u];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==i){h.Ref="'"+e.SheetNames[i]+"'!"+r;break}}return u==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:"'"+e.SheetNames[i]+"'!"+r}),zt("autoFilter",null,{ref:r})}function B0e(n,t,e,i){var r={workbookViewId:"0"};return(((i||{}).Workbook||{}).Views||[])[0]&&(r.rightToLeft=i.Workbook.Views[0].RTL?"1":"0"),zt("sheetViews",zt("sheetView",null,r),{})}function U0e(n,t,e,i){if(n.c&&e["!comments"].push([t,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var r="",s=n.t,d=n.v;if(n.t!=="z")switch(n.t){case"b":r=n.v?"1":"0";break;case"n":r=""+n.v;break;case"e":r=Yh[n.v];break;case"d":i&&i.cellDates?r=Ea(n.v,-1).toISOString():(n=$a(n),n.t="n",r=""+(n.v=Ga(Ea(n.v)))),typeof n.z>"u"&&(n.z=Fr[14]);break;default:r=n.v;break}var u=qo("v",$i(r)),h={r:t},v=l0(i.cellXfs,n,i);switch(v!==0&&(h.s=v),n.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(i&&i.bookSST){u=qo("v",""+wO(i.Strings,n.v,i.revStrings)),h.t="s";break}h.t="str";break}if(n.t!=s&&(n.t=s,n.v=d),typeof n.f=="string"&&n.f){var C=n.F&&n.F.slice(0,t.length)==t?{t:"array",ref:n.F}:null;u=zt("f",$i(n.f),C)+(n.v!=null?u:"")}return n.l&&e["!links"].push([t,n.l]),n.D&&(h.cm=1),zt("c",u,h)}function j0e(n,t,e,i){var r=[],s=[],d=hr(n["!ref"]),u="",h,v="",C=[],O=0,T=0,w=n["!rows"],A=Array.isArray(n),I={r:v},L,B=-1;for(T=d.s.c;T<=d.e.c;++T)C[T]=aa(T);for(O=d.s.r;O<=d.e.r;++O){for(s=[],v=Ho(O),T=d.s.c;T<=d.e.c;++T){h=C[T]+v;var q=A?(n[O]||[])[T]:n[h];q!==void 0&&(u=U0e(q,h,n,t,e,i))!=null&&s.push(u)}(s.length>0||w&&w[O])&&(I={r:v},w&&w[O]&&(L=w[O],L.hidden&&(I.hidden=1),B=-1,L.hpx?B=cb(L.hpx):L.hpt&&(B=L.hpt),B>-1&&(I.ht=B,I.customHeight=1),L.level&&(I.outlineLevel=L.level)),r[r.length]=zt("row",s.join(""),I))}if(w)for(;O<w.length;++O)w&&w[O]&&(I={r:O+1},L=w[O],L.hidden&&(I.hidden=1),B=-1,L.hpx?B=cb(L.hpx):L.hpt&&(B=L.hpt),B>-1&&(I.ht=B,I.customHeight=1),L.level&&(I.outlineLevel=L.level),r[r.length]=zt("row","",I));return r.join("")}function CF(n,t,e,i){var r=[eo,zt("worksheet",null,{xmlns:Mu[0],"xmlns:r":Mo.r})],s=e.SheetNames[n],d=0,u="",h=e.Sheets[s];h==null&&(h={});var v=h["!ref"]||"A1",C=hr(v);if(C.e.c>16383||C.e.r>1048575){if(t.WTF)throw new Error("Range "+v+" exceeds format limit A1:XFD1048576");C.e.c=Math.min(C.e.c,16383),C.e.r=Math.min(C.e.c,1048575),v=Zr(C)}i||(i={}),h["!comments"]=[];var O=[];D0e(h,e,n,t,r),r[r.length]=zt("dimension",null,{ref:v}),r[r.length]=B0e(h,t,n,e),t.sheetFormat&&(r[r.length]=zt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(r[r.length]=L0e(h,h["!cols"])),r[d=r.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(u=j0e(h,t,n,e,i),u.length>0&&(r[r.length]=u)),r.length>d+1&&(r[r.length]="</sheetData>",r[d]=r[d].replace("/>",">")),h["!protect"]&&(r[r.length]=F0e(h["!protect"])),h["!autofilter"]!=null&&(r[r.length]=V0e(h["!autofilter"],h,e,n)),h["!merges"]!=null&&h["!merges"].length>0&&(r[r.length]=I0e(h["!merges"]));var T=-1,w,A=-1;return h["!links"].length>0&&(r[r.length]="<hyperlinks>",h["!links"].forEach(function(I){I[1].Target&&(w={ref:I[0]},I[1].Target.charAt(0)!="#"&&(A=Gi(i,-1,$i(I[1].Target).replace(/#.*$/,""),Ei.HLINK),w["r:id"]="rId"+A),(T=I[1].Target.indexOf("#"))>-1&&(w.location=$i(I[1].Target.slice(T+1))),I[1].Tooltip&&(w.tooltip=$i(I[1].Tooltip)),r[r.length]=zt("hyperlink",null,w))}),r[r.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(r[r.length]=N0e(h["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(r[r.length]=qo("ignoredErrors",zt("ignoredError",null,{numberStoredAsText:1,sqref:v}))),O.length>0&&(A=Gi(i,-1,"../drawings/drawing"+(n+1)+".xml",Ei.DRAW),r[r.length]=zt("drawing",null,{"r:id":"rId"+A}),h["!drawing"]=O),h["!comments"].length>0&&(A=Gi(i,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Ei.VML),r[r.length]=zt("legacyDrawing",null,{"r:id":"rId"+A}),h["!legacy"]=A),r.length>1&&(r[r.length]="</worksheet>",r[1]=r[1].replace("/>",">")),r.join("")}function W0e(n,t){var e={},i=n.l+t;e.r=n.read_shift(4),n.l+=4;var r=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=i,s&7&&(e.level=s&7),s&16&&(e.hidden=!0),s&32&&(e.hpt=r/20),e}function z0e(n,t,e){var i=mt(145),r=(e["!rows"]||[])[n]||{};i.write_shift(4,n),i.write_shift(4,0);var s=320;r.hpx?s=cb(r.hpx)*20:r.hpt&&(s=r.hpt*20),i.write_shift(2,s),i.write_shift(1,0);var d=0;r.level&&(d|=r.level),r.hidden&&(d|=16),(r.hpx||r.hpt)&&(d|=32),i.write_shift(1,d),i.write_shift(1,0);var u=0,h=i.l;i.l+=4;for(var v={r:n,c:0},C=0;C<16;++C)if(!(t.s.c>C+1<<10||t.e.c<C<<10)){for(var O=-1,T=-1,w=C<<10;w<C+1<<10;++w){v.c=w;var A=Array.isArray(e)?(e[v.r]||[])[v.c]:e[Yi(v)];A&&(O<0&&(O=w),T=w)}O<0||(++u,i.write_shift(4,O),i.write_shift(4,T))}var I=i.l;return i.l=h,i.write_shift(4,u),i.l=I,i.length>i.l?i.slice(0,i.l):i}function q0e(n,t,e,i){var r=z0e(i,e,t);(r.length>17||(t["!rows"]||[])[i])&&St(n,0,r)}var H0e=Rp,G0e=wu;function $0e(){}function Y0e(n,t){var e={},i=n[n.l];return++n.l,e.above=!(i&64),e.left=!(i&128),n.l+=18,e.name=rle(n,t-19),e}function J0e(n,t,e){e==null&&(e=mt(84+4*n.length));var i=192;t&&(t.above&&(i&=-65),t.left&&(i&=-129)),e.write_shift(1,i);for(var r=1;r<3;++r)e.write_shift(1,0);return ob({auto:1},e),e.write_shift(-4,-1),e.write_shift(-4,-1),N7(n,e),e.slice(0,e.l)}function K0e(n){var t=Us(n);return[t]}function Q0e(n,t,e){return e==null&&(e=mt(8)),Ip(t,e)}function X0e(n){var t=Dp(n);return[t]}function Z0e(n,t,e){return e==null&&(e=mt(4)),Ap(t,e)}function epe(n){var t=Us(n),e=n.read_shift(1);return[t,e,"b"]}function tpe(n,t,e){return e==null&&(e=mt(9)),Ip(t,e),e.write_shift(1,n.v?1:0),e}function npe(n){var t=Dp(n),e=n.read_shift(1);return[t,e,"b"]}function ipe(n,t,e){return e==null&&(e=mt(5)),Ap(t,e),e.write_shift(1,n.v?1:0),e}function rpe(n){var t=Us(n),e=n.read_shift(1);return[t,e,"e"]}function ope(n,t,e){return e==null&&(e=mt(9)),Ip(t,e),e.write_shift(1,n.v),e}function ape(n){var t=Dp(n),e=n.read_shift(1);return[t,e,"e"]}function spe(n,t,e){return e==null&&(e=mt(8)),Ap(t,e),e.write_shift(1,n.v),e.write_shift(2,0),e.write_shift(1,0),e}function lpe(n){var t=Us(n),e=n.read_shift(4);return[t,e,"s"]}function cpe(n,t,e){return e==null&&(e=mt(12)),Ip(t,e),e.write_shift(4,t.v),e}function dpe(n){var t=Dp(n),e=n.read_shift(4);return[t,e,"s"]}function ppe(n,t,e){return e==null&&(e=mt(8)),Ap(t,e),e.write_shift(4,t.v),e}function mpe(n){var t=Us(n),e=Eu(n);return[t,e,"n"]}function upe(n,t,e){return e==null&&(e=mt(16)),Ip(t,e),Op(n.v,e),e}function gpe(n){var t=Dp(n),e=Eu(n);return[t,e,"n"]}function fpe(n,t,e){return e==null&&(e=mt(12)),Ap(t,e),Op(n.v,e),e}function hpe(n){var t=Us(n),e=L7(n);return[t,e,"n"]}function _pe(n,t,e){return e==null&&(e=mt(12)),Ip(t,e),V7(n.v,e),e}function vpe(n){var t=Dp(n),e=L7(n);return[t,e,"n"]}function xpe(n,t,e){return e==null&&(e=mt(8)),Ap(t,e),V7(n.v,e),e}function ype(n){var t=Us(n),e=vO(n);return[t,e,"is"]}function Cpe(n){var t=Us(n),e=sa(n);return[t,e,"str"]}function bpe(n,t,e){return e==null&&(e=mt(12+4*n.v.length)),Ip(t,e),Po(n.v,e),e.length>e.l?e.slice(0,e.l):e}function Mpe(n){var t=Dp(n),e=sa(n);return[t,e,"str"]}function Spe(n,t,e){return e==null&&(e=mt(8+4*n.v.length)),Ap(t,e),Po(n.v,e),e.length>e.l?e.slice(0,e.l):e}function Ppe(n,t,e){var i=n.l+t,r=Us(n);r.r=e["!row"];var s=n.read_shift(1),d=[r,s,"b"];if(e.cellFormula){n.l+=2;var u=xb(n,i-n.l,e);d[3]=bu(u,null,r,e.supbooks,e)}else n.l=i;return d}function wpe(n,t,e){var i=n.l+t,r=Us(n);r.r=e["!row"];var s=n.read_shift(1),d=[r,s,"e"];if(e.cellFormula){n.l+=2;var u=xb(n,i-n.l,e);d[3]=bu(u,null,r,e.supbooks,e)}else n.l=i;return d}function Epe(n,t,e){var i=n.l+t,r=Us(n);r.r=e["!row"];var s=Eu(n),d=[r,s,"n"];if(e.cellFormula){n.l+=2;var u=xb(n,i-n.l,e);d[3]=bu(u,null,r,e.supbooks,e)}else n.l=i;return d}function Ope(n,t,e){var i=n.l+t,r=Us(n);r.r=e["!row"];var s=sa(n),d=[r,s,"str"];if(e.cellFormula){n.l+=2;var u=xb(n,i-n.l,e);d[3]=bu(u,null,r,e.supbooks,e)}else n.l=i;return d}var Tpe=Rp,kpe=wu;function Ipe(n,t){return t==null&&(t=mt(4)),t.write_shift(4,n),t}function Dpe(n,t){var e=n.l+t,i=Rp(n,16),r=xO(n),s=sa(n),d=sa(n),u=sa(n);n.l=e;var h={rfx:i,relId:r,loc:s,display:u};return d&&(h.Tooltip=d),h}function Ape(n,t){var e=mt(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));wu({s:So(n[0]),e:So(n[0])},e),yO("rId"+t,e);var i=n[1].Target.indexOf("#"),r=i==-1?"":n[1].Target.slice(i+1);return Po(r||"",e),Po(n[1].Tooltip||"",e),Po("",e),e.slice(0,e.l)}function Rpe(){}function Fpe(n,t,e){var i=n.l+t,r=B7(n,16),s=n.read_shift(1),d=[r];if(d[2]=s,e.cellFormula){var u=M0e(n,i-n.l,e);d[1]=u}else n.l=i;return d}function Npe(n,t,e){var i=n.l+t,r=Rp(n,16),s=[r];if(e.cellFormula){var d=P0e(n,i-n.l,e);s[1]=d,n.l=i}else n.l=i;return s}function Lpe(n,t,e){e==null&&(e=mt(18));var i=yb(n,t);e.write_shift(-4,n),e.write_shift(-4,n),e.write_shift(4,(i.width||10)*256),e.write_shift(4,0);var r=0;return t.hidden&&(r|=1),typeof i.width=="number"&&(r|=2),t.level&&(r|=t.level<<8),e.write_shift(2,r),e}var bF=["left","right","top","bottom","header","footer"];function Vpe(n){var t={};return bF.forEach(function(e){t[e]=Eu(n,8)}),t}function Bpe(n,t){return t==null&&(t=mt(48)),yF(n),bF.forEach(function(e){Op(n[e],t)}),t}function Upe(n){var t=n.read_shift(2);return n.l+=28,{RTL:t&32}}function jpe(n,t,e){e==null&&(e=mt(30));var i=924;return(((t||{}).Views||[])[0]||{}).RTL&&(i|=32),e.write_shift(2,i),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,100),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(4,0),e}function Wpe(n){var t=mt(24);return t.write_shift(4,4),t.write_shift(4,1),wu(n,t),t}function zpe(n,t){return t==null&&(t=mt(66)),t.write_shift(2,n.password?iF(n.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?t.write_shift(4,n[e[0]]!=null&&!n[e[0]]?1:0):t.write_shift(4,n[e[0]]!=null&&n[e[0]]?0:1)}),t}function qpe(){}function Hpe(){}function Gpe(n,t,e,i,r,s,d){if(t.v===void 0)return!1;var u="";switch(t.t){case"b":u=t.v?"1":"0";break;case"d":t=$a(t),t.z=t.z||Fr[14],t.v=Ga(Ea(t.v)),t.t="n";break;case"n":case"e":u=""+t.v;break;default:u=t.v;break}var h={r:e,c:i};switch(h.s=l0(r.cellXfs,t,r),t.l&&s["!links"].push([Yi(h),t.l]),t.c&&s["!comments"].push([Yi(h),t.c]),t.t){case"s":case"str":return r.bookSST?(u=wO(r.Strings,t.v,r.revStrings),h.t="s",h.v=u,d?St(n,18,ppe(t,h)):St(n,7,cpe(t,h))):(h.t="str",d?St(n,17,Spe(t,h)):St(n,6,bpe(t,h))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?d?St(n,13,xpe(t,h)):St(n,2,_pe(t,h)):d?St(n,16,fpe(t,h)):St(n,5,upe(t,h)),!0;case"b":return h.t="b",d?St(n,15,ipe(t,h)):St(n,4,tpe(t,h)),!0;case"e":return h.t="e",d?St(n,14,spe(t,h)):St(n,3,ope(t,h)),!0}return d?St(n,12,Z0e(t,h)):St(n,1,Q0e(t,h)),!0}function $pe(n,t,e,i){var r=hr(t["!ref"]||"A1"),s,d="",u=[];St(n,145);var h=Array.isArray(t),v=r.e.r;t["!rows"]&&(v=Math.max(r.e.r,t["!rows"].length-1));for(var C=r.s.r;C<=v;++C){d=Ho(C),q0e(n,t,r,C);var O=!1;if(C<=r.e.r)for(var T=r.s.c;T<=r.e.c;++T){C===r.s.r&&(u[T]=aa(T)),s=u[T]+d;var w=h?(t[C]||[])[T]:t[s];if(!w){O=!1;continue}O=Gpe(n,w,C,T,i,t,O)}}St(n,146)}function Ype(n,t){!t||!t["!merges"]||(St(n,177,Ipe(t["!merges"].length)),t["!merges"].forEach(function(e){St(n,176,kpe(e))}),St(n,178))}function Jpe(n,t){!t||!t["!cols"]||(St(n,390),t["!cols"].forEach(function(e,i){e&&St(n,60,Lpe(i,e))}),St(n,391))}function Kpe(n,t){!t||!t["!ref"]||(St(n,648),St(n,649,Wpe(hr(t["!ref"]))),St(n,650))}function Qpe(n,t,e){t["!links"].forEach(function(i){if(i[1].Target){var r=Gi(e,-1,i[1].Target.replace(/#.*$/,""),Ei.HLINK);St(n,494,Ape(i,r))}}),delete t["!links"]}function Xpe(n,t,e,i){if(t["!comments"].length>0){var r=Gi(i,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ei.VML);St(n,551,yO("rId"+r)),t["!legacy"]=r}}function Zpe(n,t,e,i){if(t["!autofilter"]){var r=t["!autofilter"],s=typeof r.ref=="string"?r.ref:Zr(r.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var d=e.Workbook.Names,u=gs(s);u.s.r==u.e.r&&(u.e.r=gs(t["!ref"]).e.r,s=Zr(u));for(var h=0;h<d.length;++h){var v=d[h];if(v.Name=="_xlnm._FilterDatabase"&&v.Sheet==i){v.Ref="'"+e.SheetNames[i]+"'!"+s;break}}h==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:"'"+e.SheetNames[i]+"'!"+s}),St(n,161,wu(hr(s))),St(n,162)}}function eme(n,t,e){St(n,133),St(n,137,jpe(t,e)),St(n,138),St(n,134)}function tme(n,t){t["!protect"]&&St(n,535,zpe(t["!protect"]))}function nme(n,t,e,i){var r=Ha(),s=e.SheetNames[n],d=e.Sheets[s]||{},u=s;try{e&&e.Workbook&&(u=e.Workbook.Sheets[n].CodeName||u)}catch{}var h=hr(d["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(t.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],St(r,129),(e.vbaraw||d["!outline"])&&St(r,147,J0e(u,d["!outline"])),St(r,148,G0e(h)),eme(r,d,e.Workbook),Jpe(r,d,n,t,e),$pe(r,d,n,t,e),tme(r,d),Zpe(r,d,e,n),Ype(r,d),Qpe(r,d,i),d["!margins"]&&St(r,476,Bpe(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Kpe(r,d),Xpe(r,d,n,i),St(r,130),r.end()}function ime(n,t){n.l+=10;var e=sa(n,t-10);return{name:e}}var rme=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function ome(n){return!n.Workbook||!n.Workbook.WBProps?"false":Fse(n.Workbook.WBProps.date1904)?"true":"false"}var ame="][*?/\\".split("");function MF(n,t){if(n.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var e=!0;return ame.forEach(function(i){if(n.indexOf(i)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");e=!1}}),e}function sme(n,t,e){n.forEach(function(i,r){MF(i);for(var s=0;s<r;++s)if(i==n[s])throw new Error("Duplicate Sheet Name: "+i);if(e){var d=t&&t[r]&&t[r].CodeName||i;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function lme(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var t=n.Workbook&&n.Workbook.Sheets||[];sme(n.SheetNames,t,!!n.vbaraw);for(var e=0;e<n.SheetNames.length;++e)k0e(n.Sheets[n.SheetNames[e]],n.SheetNames[e],e)}function SF(n){var t=[eo];t[t.length]=zt("workbook",null,{xmlns:Mu[0],"xmlns:r":Mo.r});var e=n.Workbook&&(n.Workbook.Names||[]).length>0,i={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(rme.forEach(function(u){n.Workbook.WBProps[u[0]]!=null&&n.Workbook.WBProps[u[0]]!=u[1]&&(i[u[0]]=n.Workbook.WBProps[u[0]])}),n.Workbook.WBProps.CodeName&&(i.codeName=n.Workbook.WBProps.CodeName,delete i.CodeName)),t[t.length]=zt("workbookPr",null,i);var r=n.Workbook&&n.Workbook.Sheets||[],s=0;if(r&&r[0]&&r[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!r[s]||!r[s].Hidden);++s);s==n.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var d={name:$i(n.SheetNames[s].slice(0,31))};if(d.sheetId=""+(s+1),d["r:id"]="rId"+(s+1),r[s])switch(r[s].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}t[t.length]=zt("sheet",null,d)}return t[t.length]="</sheets>",e&&(t[t.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(u){var h={name:u.Name};u.Comment&&(h.comment=u.Comment),u.Sheet!=null&&(h.localSheetId=""+u.Sheet),u.Hidden&&(h.hidden="1"),u.Ref&&(t[t.length]=zt("definedName",$i(u.Ref),h))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function cme(n,t){var e={};return e.Hidden=n.read_shift(4),e.iTabID=n.read_shift(4),e.strRelID=nO(n,t-8),e.name=sa(n),e}function dme(n,t){return t||(t=mt(127)),t.write_shift(4,n.Hidden),t.write_shift(4,n.iTabID),yO(n.strRelID,t),Po(n.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function pme(n,t){var e={},i=n.read_shift(4);e.defaultThemeVersion=n.read_shift(4);var r=t>8?sa(n):"";return r.length>0&&(e.CodeName=r),e.autoCompressPictures=!!(i&65536),e.backupFile=!!(i&64),e.checkCompatibility=!!(i&4096),e.date1904=!!(i&1),e.filterPrivacy=!!(i&8),e.hidePivotFieldList=!!(i&1024),e.promptedSolutions=!!(i&16),e.publishItems=!!(i&2048),e.refreshAllConnections=!!(i&262144),e.saveExternalLinkValues=!!(i&128),e.showBorderUnselectedTables=!!(i&4),e.showInkAnnotation=!!(i&32),e.showObjects=["all","placeholders","none"][i>>13&3],e.showPivotChartFilter=!!(i&32768),e.updateLinks=["userSet","never","always"][i>>8&3],e}function mme(n,t){t||(t=mt(72));var e=0;return n&&n.filterPrivacy&&(e|=8),t.write_shift(4,e),t.write_shift(4,0),N7(n&&n.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function ume(n,t,e){var i=n.l+t;n.l+=4,n.l+=1;var r=n.read_shift(4),s=ole(n),d=S0e(n,0,e),u=xO(n);n.l=i;var h={Name:s,Ptg:d};return r<268435455&&(h.Sheet=r),u&&(h.Comment=u),h}function gme(n,t){St(n,143);for(var e=0;e!=t.SheetNames.length;++e){var i=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[e]&&t.Workbook.Sheets[e].Hidden||0,r={Hidden:i,iTabID:e+1,strRelID:"rId"+(e+1),name:t.SheetNames[e]};St(n,156,dme(r))}St(n,144)}function fme(n,t){t||(t=mt(127));for(var e=0;e!=4;++e)t.write_shift(4,0);return Po("SheetJS",t),Po(Bh.version,t),Po(Bh.version,t),Po("7262",t),t.length>t.l?t.slice(0,t.l):t}function hme(n,t){t||(t=mt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,n),t.write_shift(4,n);var e=120;return t.write_shift(1,e),t.length>t.l?t.slice(0,t.l):t}function _me(n,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var e=t.Workbook.Sheets,i=0,r=-1,s=-1;i<e.length;++i)!e[i]||!e[i].Hidden&&r==-1?r=i:e[i].Hidden==1&&s==-1&&(s=i);s>r||(St(n,135),St(n,158,hme(r)),St(n,136))}}function vme(n,t){var e=Ha();return St(e,131),St(e,128,fme()),St(e,153,mme(n.Workbook&&n.Workbook.WBProps||null)),_me(e,n,t),gme(e,n,t),St(e,132),e.end()}function xme(n,t,e){return(t.slice(-4)===".bin"?vme:SF)(n,e)}function yme(n,t,e,i,r){return(t.slice(-4)===".bin"?nme:CF)(n,e,i,r)}function Cme(n,t,e){return(t.slice(-4)===".bin"?Bce:aF)(n,e)}function bme(n,t,e){return(t.slice(-4)===".bin"?mce:nF)(n,e)}function Mme(n,t,e){return(t.slice(-4)===".bin"?tde:pF)(n,e)}function Sme(n){return(n.slice(-4)===".bin"?$ce:cF)()}function Pme(n,t){var e=[];return n.Props&&e.push(Cle(n.Props,t)),n.Custprops&&e.push(ble(n.Props,n.Custprops,t)),e.join("")}function wme(){return""}function Eme(n,t){var e=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(i,r){var s=[];s.push(zt("NumberFormat",null,{"ss:Format":$i(Fr[i.numFmtId])}));var d={"ss:ID":"s"+(21+r)};e.push(zt("Style",s.join(""),d))}),zt("Styles",e.join(""))}function PF(n){return zt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+SO(n.Ref,{r:0,c:0})})}function Ome(n){if(!((n||{}).Workbook||{}).Names)return"";for(var t=n.Workbook.Names,e=[],i=0;i<t.length;++i){var r=t[i];r.Sheet==null&&(r.Name.match(/^_xlfn\./)||e.push(PF(r)))}return zt("Names",e.join(""))}function Tme(n,t,e,i){if(!n||!((i||{}).Workbook||{}).Names)return"";for(var r=i.Workbook.Names,s=[],d=0;d<r.length;++d){var u=r[d];u.Sheet==e&&(u.Name.match(/^_xlfn\./)||s.push(PF(u)))}return s.join("")}function kme(n,t,e,i){if(!n)return"";var r=[];if(n["!margins"]&&(r.push("<PageSetup>"),n["!margins"].header&&r.push(zt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&r.push(zt("Footer",null,{"x:Margin":n["!margins"].footer})),r.push(zt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),r.push("</PageSetup>")),i&&i.Workbook&&i.Workbook.Sheets&&i.Workbook.Sheets[e])if(i.Workbook.Sheets[e].Hidden)r.push(zt("Visible",i.Workbook.Sheets[e].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<e&&!(i.Workbook.Sheets[s]&&!i.Workbook.Sheets[s].Hidden);++s);s==e&&r.push("<Selected/>")}return((((i||{}).Workbook||{}).Views||[])[0]||{}).RTL&&r.push("<DisplayRightToLeft/>"),n["!protect"]&&(r.push(qo("ProtectContents","True")),n["!protect"].objects&&r.push(qo("ProtectObjects","True")),n["!protect"].scenarios&&r.push(qo("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?r.push(qo("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&r.push(qo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){n["!protect"][d[0]]&&r.push("<"+d[1]+"/>")})),r.length==0?"":zt("WorksheetOptions",r.join(""),{xmlns:us.x})}function Ime(n){return n.map(function(t){var e=Rse(t.t||""),i=zt("ss:Data",e,{xmlns:"http://www.w3.org/TR/REC-html40"});return zt("Comment",i,{"ss:Author":t.a})}).join("")}function Dme(n,t,e,i,r,s,d){if(!n||n.v==null&&n.f==null)return"";var u={};if(n.f&&(u["ss:Formula"]="="+$i(SO(n.f,d))),n.F&&n.F.slice(0,t.length)==t){var h=So(n.F.slice(t.length+1));u["ss:ArrayRange"]="RC:R"+(h.r==d.r?"":"["+(h.r-d.r)+"]")+"C"+(h.c==d.c?"":"["+(h.c-d.c)+"]")}if(n.l&&n.l.Target&&(u["ss:HRef"]=$i(n.l.Target),n.l.Tooltip&&(u["x:HRefScreenTip"]=$i(n.l.Tooltip))),e["!merges"])for(var v=e["!merges"],C=0;C!=v.length;++C)v[C].s.c!=d.c||v[C].s.r!=d.r||(v[C].e.c>v[C].s.c&&(u["ss:MergeAcross"]=v[C].e.c-v[C].s.c),v[C].e.r>v[C].s.r&&(u["ss:MergeDown"]=v[C].e.r-v[C].s.r));var O="",T="";switch(n.t){case"z":if(!i.sheetStubs)return"";break;case"n":O="Number",T=String(n.v);break;case"b":O="Boolean",T=n.v?"1":"0";break;case"e":O="Error",T=Yh[n.v];break;case"d":O="DateTime",T=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||Fr[14]);break;case"s":O="String",T=Ase(n.v||"");break}var w=l0(i.cellXfs,n,i);u["ss:StyleID"]="s"+(21+w),u["ss:Index"]=d.c+1;var A=n.v!=null?T:"",I=n.t=="z"?"":'<Data ss:Type="'+O+'">'+A+"</Data>";return(n.c||[]).length>0&&(I+=Ime(n.c)),zt("Cell",I,u)}function Ame(n,t){var e='<Row ss:Index="'+(n+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=oF(t.hpt)),t.hpx&&(e+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(e+=' ss:Hidden="1"')),e+">"}function Rme(n,t,e,i){if(!n["!ref"])return"";var r=hr(n["!ref"]),s=n["!merges"]||[],d=0,u=[];n["!cols"]&&n["!cols"].forEach(function(L,B){bO(L);var q=!!L.width,K=yb(B,L),J={"ss:Index":B+1};q&&(J["ss:Width"]=sb(K.width)),L.hidden&&(J["ss:Hidden"]="1"),u.push(zt("Column",null,J))});for(var h=Array.isArray(n),v=r.s.r;v<=r.e.r;++v){for(var C=[Ame(v,(n["!rows"]||[])[v])],O=r.s.c;O<=r.e.c;++O){var T=!1;for(d=0;d!=s.length;++d)if(!(s[d].s.c>O)&&!(s[d].s.r>v)&&!(s[d].e.c<O)&&!(s[d].e.r<v)){(s[d].s.c!=O||s[d].s.r!=v)&&(T=!0);break}if(!T){var w={r:v,c:O},A=Yi(w),I=h?(n[v]||[])[O]:n[A];C.push(Dme(I,A,n,t,e,i,w))}}C.push("</Row>"),C.length>2&&u.push(C.join(""))}return u.join("")}function Fme(n,t,e){var i=[],r=e.SheetNames[n],s=e.Sheets[r],d=s?Tme(s,t,n,e):"";return d.length>0&&i.push("<Names>"+d+"</Names>"),d=s?Rme(s,t,n,e):"",d.length>0&&i.push("<Table>"+d+"</Table>"),i.push(kme(s,t,n,e)),i.join("")}function Nme(n,t){t||(t={}),n.SSF||(n.SSF=$a(Fr)),n.SSF&&(gb(),ub(n.SSF),t.revssf=fb(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF,t.cellXfs=[],l0(t.cellXfs,{},{revssf:{General:0}}));var e=[];e.push(Pme(n,t)),e.push(wme(n,t)),e.push(""),e.push("");for(var i=0;i<n.SheetNames.length;++i)e.push(zt("Worksheet",Fme(i,t,n),{"ss:Name":$i(n.SheetNames[i])}));return e[2]=Eme(n,t),e[3]=Ome(n,t),eo+zt("Workbook",e.join(""),{xmlns:us.ss,"xmlns:o":us.o,"xmlns:x":us.x,"xmlns:ss":us.ss,"xmlns:dt":us.dt,"xmlns:html":us.html})}var Q3={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Lme(n,t){var e=[],i=[],r=[],s=0,d,u=IR(qR,"n"),h=IR(HR,"n");if(n.Props)for(d=Go(n.Props),s=0;s<d.length;++s)(Object.prototype.hasOwnProperty.call(u,d[s])?e:Object.prototype.hasOwnProperty.call(h,d[s])?i:r).push([d[s],n.Props[d[s]]]);if(n.Custprops)for(d=Go(n.Custprops),s=0;s<d.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},d[s])||(Object.prototype.hasOwnProperty.call(u,d[s])?e:Object.prototype.hasOwnProperty.call(h,d[s])?i:r).push([d[s],n.Custprops[d[s]]]);var v=[];for(s=0;s<r.length;++s)J7.indexOf(r[s][0])>-1||G7.indexOf(r[s][0])>-1||r[s][1]!=null&&v.push(r[s]);i.length&&Zi.utils.cfb_add(t,"/SummaryInformation",KR(i,Q3.SI,h,HR)),(e.length||v.length)&&Zi.utils.cfb_add(t,"/DocumentSummaryInformation",KR(e,Q3.DSI,u,qR,v.length?v:null,Q3.UDI))}function Vme(n,t){var e=t||{},i=Zi.utils.cfb_new({root:"R"}),r="/Workbook";switch(e.bookType||"xls"){case"xls":e.bookType="biff8";case"xla":e.bookType||(e.bookType="xla");case"biff8":r="/Workbook",e.biff=8;break;case"biff5":r="/Book",e.biff=5;break;default:throw new Error("invalid type "+e.bookType+" for XLS CFB")}return Zi.utils.cfb_add(i,r,wF(n,e)),e.biff==8&&(n.Props||n.Custprops)&&Lme(n,i),e.biff==8&&n.vbaraw&&nde(i,Zi.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),i}var Bme={0:{f:W0e},1:{f:K0e},2:{f:hpe},3:{f:rpe},4:{f:epe},5:{f:mpe},6:{f:Cpe},7:{f:lpe},8:{f:Ope},9:{f:Epe},10:{f:Ppe},11:{f:wpe},12:{f:X0e},13:{f:vpe},14:{f:ape},15:{f:npe},16:{f:gpe},17:{f:Mpe},18:{f:dpe},19:{f:vO},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ume},40:{},42:{},43:{f:Cce},44:{f:xce},45:{f:Sce},46:{f:wce},47:{f:Pce},48:{},49:{f:Xse},50:{},51:{f:Wce},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zle},62:{f:ype},63:{f:Yce},64:{f:qpe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:oc,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Upe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Y0e},148:{f:H0e,p:16},151:{f:Rpe},152:{},153:{f:pme},154:{},155:{},156:{f:cme},157:{},158:{},159:{T:1,f:cce},160:{T:-1},161:{T:1,f:Rp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Tpe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Uce},336:{T:-1},337:{f:Hce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:nO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:$le},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Fpe},427:{f:Npe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Vpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Dpe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:nO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Zce},633:{T:1},634:{T:-1},635:{T:1,f:Qce},636:{T:-1},637:{f:nle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ime},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Hpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ht(n,t,e,i){var r=t;if(!isNaN(r)){var s=i||(e||[]).length||0,d=n.next(4);d.write_shift(2,r),d.write_shift(2,s),s>0&&fO(e)&&n.push(e)}}function Ume(n,t,e,i){var r=i||(e||[]).length||0;if(r<=8224)return Ht(n,t,e,r);var s=t;if(!isNaN(s)){for(var d=e.parts||[],u=0,h=0,v=0;v+(d[u]||8224)<=8224;)v+=d[u]||8224,u++;var C=n.next(4);for(C.write_shift(2,s),C.write_shift(2,v),n.push(e.slice(h,h+v)),h+=v;h<r;){for(C=n.next(4),C.write_shift(2,60),v=0;v+(d[u]||8224)<=8224;)v+=d[u]||8224,u++;C.write_shift(2,v),n.push(e.slice(h,h+v)),h+=v}}}function Kh(n,t,e){return n||(n=mt(7)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,0),n.write_shift(1,0),n}function jme(n,t,e,i){var r=mt(9);return Kh(r,n,t),Q7(e,i||"b",r),r}function Wme(n,t,e){var i=mt(8+2*e.length);return Kh(i,n,t),i.write_shift(1,e.length),i.write_shift(e.length,e,"sbcs"),i.l<i.length?i.slice(0,i.l):i}function zme(n,t,e,i){if(t.v!=null)switch(t.t){case"d":case"n":var r=t.t=="d"?Ga(Ea(t.v)):t.v;r==(r|0)&&r>=0&&r<65536?Ht(n,2,ice(e,i,r)):Ht(n,3,nce(e,i,r));return;case"b":case"e":Ht(n,5,jme(e,i,t.v,t.t));return;case"s":case"str":Ht(n,4,Wme(e,i,(t.v||"").slice(0,255)));return}Ht(n,1,Kh(null,e,i))}function qme(n,t,e,i){var r=Array.isArray(t),s=hr(t["!ref"]||"A1"),d,u="",h=[];if(s.e.c>255||s.e.r>16383){if(i.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),d=Zr(s)}for(var v=s.s.r;v<=s.e.r;++v){u=Ho(v);for(var C=s.s.c;C<=s.e.c;++C){v===s.s.r&&(h[C]=aa(C)),d=h[C]+u;var O=r?(t[v]||[])[C]:t[d];O&&zme(n,O,v,C,i)}}}function Hme(n,t){var e=t||{};rc!=null&&e.dense==null&&(e.dense=rc);for(var i=Ha(),r=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==e.sheet&&(r=s);if(r==0&&e.sheet&&n.SheetNames[0]!=e.sheet)throw new Error("Sheet not found: "+e.sheet);return Ht(i,e.biff==4?1033:e.biff==3?521:9,CO(n,16,e)),qme(i,n.Sheets[n.SheetNames[r]],r,e,n),Ht(i,10),i.end()}function Gme(n,t,e){Ht(n,49,Ble({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},e))}function $me(n,t,e){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var r=i[0];r<=i[1];++r)t[r]!=null&&Ht(n,1054,Wle(r,t[r],e))})}function Yme(n,t){var e=mt(19);e.write_shift(4,2151),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,1),e.write_shift(4,0),Ht(n,2151,e),e=mt(39),e.write_shift(4,2152),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(2,1),e.write_shift(4,4),e.write_shift(2,0),eF(hr(t["!ref"]||"A1"),e),e.write_shift(4,4),Ht(n,2152,e)}function Jme(n,t){for(var e=0;e<16;++e)Ht(n,224,XR({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(i){Ht(n,224,XR(i,0,t))})}function Kme(n,t){for(var e=0;e<t["!links"].length;++e){var i=t["!links"][e];Ht(n,440,Kle(i)),i[1].Tooltip&&Ht(n,2048,Qle(i))}delete t["!links"]}function Qme(n,t){if(t){var e=0;t.forEach(function(i,r){++e<=256&&i&&Ht(n,125,ece(yb(r,i),r))})}}function Xme(n,t,e,i,r){var s=16+l0(r.cellXfs,t,r);if(t.v==null&&!t.bf){Ht(n,513,Tp(e,i,s));return}if(t.bf)Ht(n,6,b0e(t,e,i,r,s));else switch(t.t){case"d":case"n":var d=t.t=="d"?Ga(Ea(t.v)):t.v;Ht(n,515,Gle(e,i,d,s,r));break;case"b":case"e":Ht(n,517,Hle(e,i,t.v,s,r,t.t));break;case"s":case"str":if(r.bookSST){var u=wO(r.Strings,t.v,r.revStrings);Ht(n,253,Ule(e,i,u,s,r))}else Ht(n,516,jle(e,i,(t.v||"").slice(0,255),s,r));break;default:Ht(n,513,Tp(e,i,s))}}function Zme(n,t,e){var i=Ha(),r=e.SheetNames[n],s=e.Sheets[r]||{},d=(e||{}).Workbook||{},u=(d.Sheets||[])[n]||{},h=Array.isArray(s),v=t.biff==8,C,O="",T=[],w=hr(s["!ref"]||"A1"),A=v?65536:16384;if(w.e.c>255||w.e.r>=A){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");w.e.c=Math.min(w.e.c,255),w.e.r=Math.min(w.e.c,A-1)}Ht(i,2057,CO(e,16,t)),Ht(i,13,Bs(1)),Ht(i,12,Bs(100)),Ht(i,15,wa(!0)),Ht(i,17,wa(!1)),Ht(i,16,Op(.001)),Ht(i,95,wa(!0)),Ht(i,42,wa(!1)),Ht(i,43,wa(!1)),Ht(i,130,Bs(1)),Ht(i,128,qle([0,0])),Ht(i,131,wa(!1)),Ht(i,132,wa(!1)),v&&Qme(i,s["!cols"]),Ht(i,512,zle(w,t)),v&&(s["!links"]=[]);for(var I=w.s.r;I<=w.e.r;++I){O=Ho(I);for(var L=w.s.c;L<=w.e.c;++L){I===w.s.r&&(T[L]=aa(L)),C=T[L]+O;var B=h?(s[I]||[])[L]:s[C];B&&(Xme(i,B,I,L,t),v&&B.l&&s["!links"].push([C,B.l]))}}var q=u.CodeName||u.name||r;return v&&Ht(i,574,Vle((d.Views||[])[0])),v&&(s["!merges"]||[]).length&&Ht(i,229,Jle(s["!merges"])),v&&Kme(i,s),Ht(i,442,Z7(q,t)),v&&Yme(i,s),Ht(i,10),i.end()}function eue(n,t,e){var i=Ha(),r=(n||{}).Workbook||{},s=r.Sheets||[],d=r.WBProps||{},u=e.biff==8,h=e.biff==5;if(Ht(i,2057,CO(n,5,e)),e.bookType=="xla"&&Ht(i,135),Ht(i,225,u?Bs(1200):null),Ht(i,193,Ple(2)),h&&Ht(i,191),h&&Ht(i,192),Ht(i,226),Ht(i,92,Rle("SheetJS",e)),Ht(i,66,Bs(u?1200:1252)),u&&Ht(i,353,Bs(0)),u&&Ht(i,448),Ht(i,317,tce(n.SheetNames.length)),u&&n.vbaraw&&Ht(i,211),u&&n.vbaraw){var v=d.CodeName||"ThisWorkbook";Ht(i,442,Z7(v,e))}Ht(i,156,Bs(17)),Ht(i,25,wa(!1)),Ht(i,18,wa(!1)),Ht(i,19,Bs(0)),u&&Ht(i,431,wa(!1)),u&&Ht(i,444,Bs(0)),Ht(i,61,Lle(e)),Ht(i,64,wa(!1)),Ht(i,141,Bs(0)),Ht(i,34,wa(ome(n)=="true")),Ht(i,14,wa(!0)),u&&Ht(i,439,wa(!1)),Ht(i,218,Bs(0)),Gme(i,n,e),$me(i,n.SSF,e),Jme(i,e),u&&Ht(i,352,wa(!1));var C=i.end(),O=Ha();u&&Ht(O,140,Xle()),u&&e.Strings&&Ume(O,252,Nle(e.Strings,e)),Ht(O,10);var T=O.end(),w=Ha(),A=0,I=0;for(I=0;I<n.SheetNames.length;++I)A+=(u?12:11)+(u?2:1)*n.SheetNames[I].length;var L=C.length+A+T.length;for(I=0;I<n.SheetNames.length;++I){var B=s[I]||{};Ht(w,133,Fle({pos:L,hs:B.Hidden||0,dt:0,name:n.SheetNames[I]},e)),L+=t[I].length}var q=w.end();if(A!=q.length)throw new Error("BS8 "+A+" != "+q.length);var K=[];return C.length&&K.push(C),q.length&&K.push(q),T.length&&K.push(T),zo(K)}function tue(n,t){var e=t||{},i=[];n&&!n.SSF&&(n.SSF=$a(Fr)),n&&n.SSF&&(gb(),ub(n.SSF),e.revssf=fb(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,EO(e),e.cellXfs=[],l0(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var r=0;r<n.SheetNames.length;++r)i[i.length]=Zme(r,e,n);return i.unshift(eue(n,i,e)),zo(i)}function wF(n,t){for(var e=0;e<=n.SheetNames.length;++e){var i=n.Sheets[n.SheetNames[e]];if(!(!i||!i["!ref"])){var r=gs(i["!ref"]);r.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[e]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return tue(n,t);case 4:case 3:case 2:return Hme(n,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function nue(n,t,e,i){for(var r=n["!merges"]||[],s=[],d=t.s.c;d<=t.e.c;++d){for(var u=0,h=0,v=0;v<r.length;++v)if(!(r[v].s.r>e||r[v].s.c>d)&&!(r[v].e.r<e||r[v].e.c<d)){if(r[v].s.r<e||r[v].s.c<d){u=-1;break}u=r[v].e.r-r[v].s.r+1,h=r[v].e.c-r[v].s.c+1;break}if(!(u<0)){var C=Yi({r:e,c:d}),O=i.dense?(n[e]||[])[d]:n[C],T=O&&O.v!=null&&(O.h||Dse(O.w||(ed(O),O.w)||""))||"",w={};u>1&&(w.rowspan=u),h>1&&(w.colspan=h),i.editable?T='<span contenteditable="true">'+T+"</span>":O&&(w["data-t"]=O&&O.t||"z",O.v!=null&&(w["data-v"]=O.v),O.z!=null&&(w["data-z"]=O.z),O.l&&(O.l.Target||"#").charAt(0)!="#"&&(T='<a href="'+O.l.Target+'">'+T+"</a>")),w.id=(i.id||"sjs")+"-"+C,s.push(zt("td",T,w))}}var A="<tr>";return A+s.join("")+"</tr>"}var iue='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',rue="</body></html>";function oue(n,t,e){var i=[];return i.join("")+"<table"+(e&&e.id?' id="'+e.id+'"':"")+">"}function EF(n,t){var e=t||{},i=e.header!=null?e.header:iue,r=e.footer!=null?e.footer:rue,s=[i],d=gs(n["!ref"]);e.dense=Array.isArray(n),s.push(oue(n,d,e));for(var u=d.s.r;u<=d.e.r;++u)s.push(nue(n,d,u,e));return s.push("</table>"+r),s.join("")}function OF(n,t,e){var i=e||{};rc!=null&&(i.dense=rc);var r=0,s=0;if(i.origin!=null)if(typeof i.origin=="number")r=i.origin;else{var d=typeof i.origin=="string"?So(i.origin):i.origin;r=d.r,s=d.c}var u=t.getElementsByTagName("tr"),h=Math.min(i.sheetRows||1e7,u.length),v={s:{r:0,c:0},e:{r,c:s}};if(n["!ref"]){var C=gs(n["!ref"]);v.s.r=Math.min(v.s.r,C.s.r),v.s.c=Math.min(v.s.c,C.s.c),v.e.r=Math.max(v.e.r,C.e.r),v.e.c=Math.max(v.e.c,C.e.c),r==-1&&(v.e.r=r=C.e.r+1)}var O=[],T=0,w=n["!rows"]||(n["!rows"]=[]),A=0,I=0,L=0,B=0,q=0,K=0;for(n["!cols"]||(n["!cols"]=[]);A<u.length&&I<h;++A){var J=u[A];if(o7(J)){if(i.display)continue;w[I]={hidden:!0}}var Me=J.children;for(L=B=0;L<Me.length;++L){var ze=Me[L];if(!(i.display&&o7(ze))){var oe=ze.hasAttribute("data-v")?ze.getAttribute("data-v"):ze.hasAttribute("v")?ze.getAttribute("v"):Nse(ze.innerHTML),ae=ze.getAttribute("data-z")||ze.getAttribute("z");for(T=0;T<O.length;++T){var X=O[T];X.s.c==B+s&&X.s.r<I+r&&I+r<=X.e.r&&(B=X.e.c+1-s,T=-1)}K=+ze.getAttribute("colspan")||1,((q=+ze.getAttribute("rowspan")||1)>1||K>1)&&O.push({s:{r:I+r,c:B+s},e:{r:I+r+(q||1)-1,c:B+s+(K||1)-1}});var pe={t:"s",v:oe},z=ze.getAttribute("data-t")||ze.getAttribute("t")||"";oe!=null&&(oe.length==0?pe.t=z||"z":i.raw||oe.trim().length==0||z=="s"||(oe==="TRUE"?pe={t:"b",v:!0}:oe==="FALSE"?pe={t:"b",v:!1}:isNaN(Qc(oe))?isNaN(Wh(oe).getDate())||(pe={t:"d",v:Ea(oe)},i.cellDates||(pe={t:"n",v:Ga(pe.v)}),pe.z=i.dateNF||Fr[14]):pe={t:"n",v:Qc(oe)})),pe.z===void 0&&ae!=null&&(pe.z=ae);var Z="",ge=ze.getElementsByTagName("A");if(ge&&ge.length)for(var Pe=0;Pe<ge.length&&!(ge[Pe].hasAttribute("href")&&(Z=ge[Pe].getAttribute("href"),Z.charAt(0)!="#"));++Pe);Z&&Z.charAt(0)!="#"&&(pe.l={Target:Z}),i.dense?(n[I+r]||(n[I+r]=[]),n[I+r][B+s]=pe):n[Yi({c:B+s,r:I+r})]=pe,v.e.c<B+s&&(v.e.c=B+s),B+=K}}++I}return O.length&&(n["!merges"]=(n["!merges"]||[]).concat(O)),v.e.r=Math.max(v.e.r,I-1+r),n["!ref"]=Zr(v),I>=h&&(n["!fullref"]=Zr((v.e.r=u.length-A+I-1+r,v))),n}function TF(n,t){var e=t||{},i=e.dense?[]:{};return OF(i,n,t)}function aue(n,t){return kp(TF(n,t),t)}function o7(n){var t="",e=sue(n);return e&&(t=e(n).getPropertyValue("display")),t||(t=n.style&&n.style.display),t==="none"}function sue(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var lue=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+zh({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return eo+t}})(),a7=(function(){var n=function(s){return $i(s).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,e=`          <table:covered-table-cell/>
`,i=function(s,d,u){var h=[];h.push('      <table:table table:name="'+$i(d.SheetNames[u])+`" table:style-name="ta1">
`);var v=0,C=0,O=gs(s["!ref"]||"A1"),T=s["!merges"]||[],w=0,A=Array.isArray(s);if(s["!cols"])for(C=0;C<=O.e.c;++C)h.push("        <table:table-column"+(s["!cols"][C]?' table:style-name="co'+s["!cols"][C].ods+'"':"")+`></table:table-column>
`);var I="",L=s["!rows"]||[];for(v=0;v<O.s.r;++v)I=L[v]?' table:style-name="ro'+L[v].ods+'"':"",h.push("        <table:table-row"+I+`></table:table-row>
`);for(;v<=O.e.r;++v){for(I=L[v]?' table:style-name="ro'+L[v].ods+'"':"",h.push("        <table:table-row"+I+`>
`),C=0;C<O.s.c;++C)h.push(t);for(;C<=O.e.c;++C){var B=!1,q={},K="";for(w=0;w!=T.length;++w)if(!(T[w].s.c>C)&&!(T[w].s.r>v)&&!(T[w].e.c<C)&&!(T[w].e.r<v)){(T[w].s.c!=C||T[w].s.r!=v)&&(B=!0),q["table:number-columns-spanned"]=T[w].e.c-T[w].s.c+1,q["table:number-rows-spanned"]=T[w].e.r-T[w].s.r+1;break}if(B){h.push(e);continue}var J=Yi({r:v,c:C}),Me=A?(s[v]||[])[C]:s[J];if(Me&&Me.f&&(q["table:formula"]=$i(O0e(Me.f)),Me.F&&Me.F.slice(0,J.length)==J)){var ze=gs(Me.F);q["table:number-matrix-columns-spanned"]=ze.e.c-ze.s.c+1,q["table:number-matrix-rows-spanned"]=ze.e.r-ze.s.r+1}if(!Me){h.push(t);continue}switch(Me.t){case"b":K=Me.v?"TRUE":"FALSE",q["office:value-type"]="boolean",q["office:boolean-value"]=Me.v?"true":"false";break;case"n":K=Me.w||String(Me.v||0),q["office:value-type"]="float",q["office:value"]=Me.v||0;break;case"s":case"str":K=Me.v==null?"":Me.v,q["office:value-type"]="string";break;case"d":K=Me.w||Ea(Me.v).toISOString(),q["office:value-type"]="date",q["office:date-value"]=Ea(Me.v).toISOString(),q["table:style-name"]="ce1";break;default:h.push(t);continue}var oe=n(K);if(Me.l&&Me.l.Target){var ae=Me.l.Target;ae=ae.charAt(0)=="#"?"#"+T0e(ae.slice(1)):ae,ae.charAt(0)!="#"&&!ae.match(/^\w+:/)&&(ae="../"+ae),oe=zt("text:a",oe,{"xlink:href":ae.replace(/&/g,"&amp;")})}h.push("          "+zt("table:table-cell",zt("text:p",oe,{}),q)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},r=function(s,d){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var u=0;d.SheetNames.map(function(v){return d.Sheets[v]}).forEach(function(v){if(v&&v["!cols"]){for(var C=0;C<v["!cols"].length;++C)if(v["!cols"][C]){var O=v["!cols"][C];if(O.width==null&&O.wpx==null&&O.wch==null)continue;bO(O),O.ods=u;var T=v["!cols"][C].wpx+"px";s.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+T+`"/>
`),s.push(`  </style:style>
`),++u}}});var h=0;d.SheetNames.map(function(v){return d.Sheets[v]}).forEach(function(v){if(v&&v["!rows"]){for(var C=0;C<v["!rows"].length;++C)if(v["!rows"][C]){v["!rows"][C].ods=h;var O=v["!rows"][C].hpx+"px";s.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+O+`"/>
`),s.push(`  </style:style>
`),++h}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(d,u){var h=[eo],v=zh({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),C=zh({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(h.push("<office:document"+v+C+`>
`),h.push(q7().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+v+`>
`),r(h,d),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var O=0;O!=d.SheetNames.length;++O)h.push(i(d.Sheets[d.SheetNames[O]],d,O,u));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),u.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}})();function kF(n,t){if(t.bookType=="fods")return a7(n,t);var e=sO(),i="",r=[],s=[];return i="mimetype",ei(e,i,"application/vnd.oasis.opendocument.spreadsheet"),i="content.xml",ei(e,i,a7(n,t)),r.push([i,"text/xml"]),s.push([i,"ContentFile"]),i="styles.xml",ei(e,i,lue(n,t)),r.push([i,"text/xml"]),s.push([i,"StylesFile"]),i="meta.xml",ei(e,i,eo+q7()),r.push([i,"text/xml"]),s.push([i,"MetadataFile"]),i="manifest.rdf",ei(e,i,yle(s)),r.push([i,"application/rdf+xml"]),i="META-INF/manifest.xml",ei(e,i,vle(r)),e}function db(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function cue(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):yl(Jc(n))}function due(n,t){e:for(var e=0;e<=n.length-t.length;++e){for(var i=0;i<t.length;++i)if(n[e+i]!=t[i])continue e;return!0}return!1}function s0(n){var t=n.reduce(function(r,s){return r+s.length},0),e=new Uint8Array(t),i=0;return n.forEach(function(r){e.set(r,i),i+=r.length}),e}function pue(n,t,e){var i=Math.floor(e==0?0:Math.LOG10E*Math.log(Math.abs(e)))+6176-20,r=e/Math.pow(10,i-6176);n[t+15]|=i>>7,n[t+14]|=(i&127)<<1;for(var s=0;r>=1;++s,r/=256)n[t+s]=r&255;n[t+15]|=e>=0?0:128}function qh(n,t){var e=t?t[0]:0,i=n[e]&127;e:if(n[e++]>=128&&(i|=(n[e]&127)<<7,n[e++]<128||(i|=(n[e]&127)<<14,n[e++]<128)||(i|=(n[e]&127)<<21,n[e++]<128)||(i+=(n[e]&127)*Math.pow(2,28),++e,n[e++]<128)||(i+=(n[e]&127)*Math.pow(2,35),++e,n[e++]<128)||(i+=(n[e]&127)*Math.pow(2,42),++e,n[e++]<128)))break e;return t&&(t[0]=e),i}function Hi(n){var t=new Uint8Array(7);t[0]=n&127;var e=1;e:if(n>127){if(t[e-1]|=128,t[e]=n>>7&127,++e,n<=16383||(t[e-1]|=128,t[e]=n>>14&127,++e,n<=2097151)||(t[e-1]|=128,t[e]=n>>21&127,++e,n<=268435455)||(t[e-1]|=128,t[e]=n/256>>>21&127,++e,n<=34359738367)||(t[e-1]|=128,t[e]=n/65536>>>21&127,++e,n<=4398046511103))break e;t[e-1]|=128,t[e]=n/16777216>>>21&127,++e}return t.slice(0,e)}function yu(n){var t=0,e=n[t]&127;e:if(n[t++]>=128){if(e|=(n[t]&127)<<7,n[t++]<128||(e|=(n[t]&127)<<14,n[t++]<128)||(e|=(n[t]&127)<<21,n[t++]<128))break e;e|=(n[t]&127)<<28}return e}function mo(n){for(var t=[],e=[0];e[0]<n.length;){var i=e[0],r=qh(n,e),s=r&7;r=Math.floor(r/8);var d=0,u;if(r==0)break;switch(s){case 0:{for(var h=e[0];n[e[0]++]>=128;);u=n.slice(h,e[0])}break;case 5:d=4,u=n.slice(e[0],e[0]+d),e[0]+=d;break;case 1:d=8,u=n.slice(e[0],e[0]+d),e[0]+=d;break;case 2:d=qh(n,e),u=n.slice(e[0],e[0]+d),e[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(r," at offset ").concat(i))}var v={data:u,type:s};t[r]==null?t[r]=[v]:t[r].push(v)}return t}function jo(n){var t=[];return n.forEach(function(e,i){e.forEach(function(r){r.data&&(t.push(Hi(i*8+r.type)),r.type==2&&t.push(Hi(r.data.length)),t.push(r.data))})}),s0(t)}function vl(n){for(var t,e=[],i=[0];i[0]<n.length;){var r=qh(n,i),s=mo(n.slice(i[0],i[0]+r));i[0]+=r;var d={id:yu(s[1][0].data),messages:[]};s[2].forEach(function(u){var h=mo(u.data),v=yu(h[3][0].data);d.messages.push({meta:h,data:n.slice(i[0],i[0]+v)}),i[0]+=v}),(t=s[3])!=null&&t[0]&&(d.merge=yu(s[3][0].data)>>>0>0),e.push(d)}return e}function mu(n){var t=[];return n.forEach(function(e){var i=[];i[1]=[{data:Hi(e.id),type:0}],i[2]=[],e.merge!=null&&(i[3]=[{data:Hi(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(d){r.push(d.data),d.meta[3]=[{type:0,data:Hi(d.data.length)}],i[2].push({data:jo(d.meta),type:2})});var s=jo(i);t.push(Hi(s.length)),t.push(s),r.forEach(function(d){return t.push(d)})}),s0(t)}function mue(n,t){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var e=[0],i=qh(t,e),r=[];e[0]<t.length;){var s=t[e[0]]&3;if(s==0){var d=t[e[0]++]>>2;if(d<60)++d;else{var u=d-59;d=t[e[0]],u>1&&(d|=t[e[0]+1]<<8),u>2&&(d|=t[e[0]+2]<<16),u>3&&(d|=t[e[0]+3]<<24),d>>>=0,d++,e[0]+=u}r.push(t.slice(e[0],e[0]+d)),e[0]+=d;continue}else{var h=0,v=0;if(s==1?(v=(t[e[0]]>>2&7)+4,h=(t[e[0]++]&224)<<3,h|=t[e[0]++]):(v=(t[e[0]++]>>2)+1,s==2?(h=t[e[0]]|t[e[0]+1]<<8,e[0]+=2):(h=(t[e[0]]|t[e[0]+1]<<8|t[e[0]+2]<<16|t[e[0]+3]<<24)>>>0,e[0]+=4)),r=[s0(r)],h==0)throw new Error("Invalid offset 0");if(h>r[0].length)throw new Error("Invalid offset beyond length");if(v>=h)for(r.push(r[0].slice(-h)),v-=h;v>=r[r.length-1].length;)r.push(r[r.length-1]),v-=r[r.length-1].length;r.push(r[0].slice(-h,-h+v))}}var C=s0(r);if(C.length!=i)throw new Error("Unexpected length: ".concat(C.length," != ").concat(i));return C}function xl(n){for(var t=[],e=0;e<n.length;){var i=n[e++],r=n[e]|n[e+1]<<8|n[e+2]<<16;e+=3,t.push(mue(i,n.slice(e,e+r))),e+=r}if(e!==n.length)throw new Error("data is not a valid framed stream!");return s0(t)}function uu(n){for(var t=[],e=0;e<n.length;){var i=Math.min(n.length-e,268435455),r=new Uint8Array(4);t.push(r);var s=Hi(i),d=s.length;t.push(s),i<=60?(d++,t.push(new Uint8Array([i-1<<2]))):i<=256?(d+=2,t.push(new Uint8Array([240,i-1&255]))):i<=65536?(d+=3,t.push(new Uint8Array([244,i-1&255,i-1>>8&255]))):i<=16777216?(d+=4,t.push(new Uint8Array([248,i-1&255,i-1>>8&255,i-1>>16&255]))):i<=4294967296&&(d+=5,t.push(new Uint8Array([252,i-1&255,i-1>>8&255,i-1>>16&255,i-1>>>24&255]))),t.push(n.slice(e,e+i)),d+=i,r[0]=0,r[1]=d&255,r[2]=d>>8&255,r[3]=d>>16&255,e+=i}return s0(t)}function X3(n,t){var e=new Uint8Array(32),i=db(e),r=12,s=0;switch(e[0]=5,n.t){case"n":e[1]=2,pue(e,r,n.v),s|=1,r+=16;break;case"b":e[1]=6,i.setFloat64(r,n.v?1:0,!0),s|=2,r+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));e[1]=3,i.setUint32(r,t.indexOf(n.v),!0),s|=8,r+=4;break;default:throw"unsupported cell type "+n.t}return i.setUint32(8,s,!0),e.slice(0,r)}function Z3(n,t){var e=new Uint8Array(32),i=db(e),r=12,s=0;switch(e[0]=3,n.t){case"n":e[2]=2,i.setFloat64(r,n.v,!0),s|=32,r+=8;break;case"b":e[2]=6,i.setFloat64(r,n.v?1:0,!0),s|=32,r+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));e[2]=3,i.setUint32(r,t.indexOf(n.v),!0),s|=16,r+=4;break;default:throw"unsupported cell type "+n.t}return i.setUint32(4,s,!0),e.slice(0,r)}function n0(n){var t=mo(n);return qh(t[1][0].data)}function uue(n,t,e){var i,r,s,d;if(!((i=n[6])!=null&&i[0])||!((r=n[7])!=null&&r[0]))throw"Mutation only works on post-BNC storages!";var u=((d=(s=n[8])==null?void 0:s[0])==null?void 0:d.data)&&yu(n[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var h=0,v=db(n[7][0].data),C=0,O=[],T=db(n[4][0].data),w=0,A=[],I=0;I<t.length;++I){if(t[I]==null){v.setUint16(I*2,65535,!0),T.setUint16(I*2,65535);continue}v.setUint16(I*2,C,!0),T.setUint16(I*2,w,!0);var L,B;switch(typeof t[I]){case"string":L=X3({t:"s",v:t[I]},e),B=Z3({t:"s",v:t[I]},e);break;case"number":L=X3({t:"n",v:t[I]},e),B=Z3({t:"n",v:t[I]},e);break;case"boolean":L=X3({t:"b",v:t[I]},e),B=Z3({t:"b",v:t[I]},e);break;default:throw new Error("Unsupported value "+t[I])}O.push(L),C+=L.length,A.push(B),w+=B.length,++h}for(n[2][0].data=Hi(h);I<n[7][0].data.length/2;++I)v.setUint16(I*2,65535,!0),T.setUint16(I*2,65535,!0);return n[6][0].data=s0(O),n[3][0].data=s0(A),h}function gue(n,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var e=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var i=gs(e["!ref"]);i.s.r=i.s.c=0;var r=!1;i.e.c>9&&(r=!0,i.e.c=9),i.e.r>49&&(r=!0,i.e.r=49),r&&console.error("The Numbers writer is currently limited to ".concat(Zr(i)));var s=pb(e,{range:i,header:1}),d=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(Y){typeof Y=="string"&&d.push(Y)})});var u={},h=[],v=Zi.read(t.numbers,{type:"base64"});v.FileIndex.map(function(W,Y){return[W,v.FullPaths[Y]]}).forEach(function(W){var Y=W[0],ue=W[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var we=Y.content,qe=xl(we),Ae=vl(qe);Ae.forEach(function(Re){h.push(Re.id),u[Re.id]={deps:[],location:ue,type:yu(Re.messages[0].meta[1][0].data)}})}}),h.sort(function(W,Y){return W-Y});var C=h.filter(function(W){return W>1}).map(function(W){return[W,Hi(W)]});v.FileIndex.map(function(W,Y){return[W,v.FullPaths[Y]]}).forEach(function(W){var Y=W[0],ue=W[1];if(Y.name.match(/\.iwa/)){var we=vl(xl(Y.content));we.forEach(function(qe){qe.messages.forEach(function(Ae){C.forEach(function(Re){qe.messages.some(function(gt){return yu(gt.meta[1][0].data)!=11006&&due(gt.data,Re[1])})&&u[Re[0]].deps.push(qe.id)})})})}});function O(){for(var W=927262;W<2e6;++W)if(!u[W])return W;throw new Error("Too many messages")}for(var T=Zi.find(v,u[1].location),w=vl(xl(T.content)),A,I=0;I<w.length;++I){var L=w[I];L.id==1&&(A=L)}var B=n0(mo(A.messages[0].data)[1][0].data);for(T=Zi.find(v,u[B].location),w=vl(xl(T.content)),I=0;I<w.length;++I)L=w[I],L.id==B&&(A=L);for(B=n0(mo(A.messages[0].data)[2][0].data),T=Zi.find(v,u[B].location),w=vl(xl(T.content)),I=0;I<w.length;++I)L=w[I],L.id==B&&(A=L);for(B=n0(mo(A.messages[0].data)[2][0].data),T=Zi.find(v,u[B].location),w=vl(xl(T.content)),I=0;I<w.length;++I)L=w[I],L.id==B&&(A=L);var q=mo(A.messages[0].data);{q[6][0].data=Hi(i.e.r+1),q[7][0].data=Hi(i.e.c+1);var K=n0(q[46][0].data),J=Zi.find(v,u[K].location),Me=vl(xl(J.content));{for(var ze=0;ze<Me.length&&Me[ze].id!=K;++ze);if(Me[ze].id!=K)throw"Bad ColumnRowUIDMapArchive";var oe=mo(Me[ze].messages[0].data);oe[1]=[],oe[2]=[],oe[3]=[];for(var ae=0;ae<=i.e.c;++ae){var X=[];X[1]=X[2]=[{type:0,data:Hi(ae+420690)}],oe[1].push({type:2,data:jo(X)}),oe[2].push({type:0,data:Hi(ae)}),oe[3].push({type:0,data:Hi(ae)})}oe[4]=[],oe[5]=[],oe[6]=[];for(var pe=0;pe<=i.e.r;++pe)X=[],X[1]=X[2]=[{type:0,data:Hi(pe+726270)}],oe[4].push({type:2,data:jo(X)}),oe[5].push({type:0,data:Hi(pe)}),oe[6].push({type:0,data:Hi(pe)});Me[ze].messages[0].data=jo(oe)}J.content=uu(mu(Me)),J.size=J.content.length,delete q[46];var z=mo(q[4][0].data);{z[7][0].data=Hi(i.e.r+1);var Z=mo(z[1][0].data),ge=n0(Z[2][0].data);J=Zi.find(v,u[ge].location),Me=vl(xl(J.content));{if(Me[0].id!=ge)throw"Bad HeaderStorageBucket";var Pe=mo(Me[0].messages[0].data);for(pe=0;pe<s.length;++pe){var Ve=mo(Pe[2][0].data);Ve[1][0].data=Hi(pe),Ve[4][0].data=Hi(s[pe].length),Pe[2][pe]={type:Pe[2][0].type,data:jo(Ve)}}Me[0].messages[0].data=jo(Pe)}J.content=uu(mu(Me)),J.size=J.content.length;var De=n0(z[2][0].data);J=Zi.find(v,u[De].location),Me=vl(xl(J.content));{if(Me[0].id!=De)throw"Bad HeaderStorageBucket";for(Pe=mo(Me[0].messages[0].data),ae=0;ae<=i.e.c;++ae)Ve=mo(Pe[2][0].data),Ve[1][0].data=Hi(ae),Ve[4][0].data=Hi(i.e.r+1),Pe[2][ae]={type:Pe[2][0].type,data:jo(Ve)};Me[0].messages[0].data=jo(Pe)}J.content=uu(mu(Me)),J.size=J.content.length;var Fe=n0(z[4][0].data);(function(){for(var W=Zi.find(v,u[Fe].location),Y=vl(xl(W.content)),ue,we=0;we<Y.length;++we){var qe=Y[we];qe.id==Fe&&(ue=qe)}var Ae=mo(ue.messages[0].data);{Ae[3]=[];var Re=[];d.forEach(function(Nt,Bt){Re[1]=[{type:0,data:Hi(Bt)}],Re[2]=[{type:0,data:Hi(1)}],Re[3]=[{type:2,data:cue(Nt)}],Ae[3].push({type:2,data:jo(Re)})})}ue.messages[0].data=jo(Ae);var gt=mu(Y),Pt=uu(gt);W.content=Pt,W.size=W.content.length})();var Te=mo(z[3][0].data);{var Je=Te[1][0];delete Te[2];var _t=mo(Je.data);{var pt=n0(_t[2][0].data);(function(){for(var W=Zi.find(v,u[pt].location),Y=vl(xl(W.content)),ue,we=0;we<Y.length;++we){var qe=Y[we];qe.id==pt&&(ue=qe)}var Ae=mo(ue.messages[0].data);{delete Ae[6],delete Te[7];var Re=new Uint8Array(Ae[5][0].data);Ae[5]=[];for(var gt=0,Pt=0;Pt<=i.e.r;++Pt){var Nt=mo(Re);gt+=uue(Nt,s[Pt],d),Nt[1][0].data=Hi(Pt),Ae[5].push({data:jo(Nt),type:2})}Ae[1]=[{type:0,data:Hi(i.e.c+1)}],Ae[2]=[{type:0,data:Hi(i.e.r+1)}],Ae[3]=[{type:0,data:Hi(gt)}],Ae[4]=[{type:0,data:Hi(i.e.r+1)}]}ue.messages[0].data=jo(Ae);var Bt=mu(Y),de=uu(Bt);W.content=de,W.size=W.content.length})()}Je.data=jo(_t)}z[3][0].data=jo(Te)}q[4][0].data=jo(z)}A.messages[0].data=jo(q);var U=mu(w),Q=uu(U);return T.content=Q,T.size=T.content.length,v}function fue(n){return function(e){for(var i=0;i!=n.length;++i){var r=n[i];e[r[0]]===void 0&&(e[r[0]]=r[1]),r[2]==="n"&&(e[r[0]]=Number(e[r[0]]))}}}function EO(n){fue([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function hue(n,t){return t.bookType=="ods"?kF(n,t):t.bookType=="numbers"?gue(n,t):t.bookType=="xlsb"?_ue(n,t):vue(n,t)}function _ue(n,t){fu=1024,n&&!n.SSF&&(n.SSF=$a(Fr)),n&&n.SSF&&(gb(),ub(n.SSF),t.revssf=fb(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Vh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e=t.bookType=="xlsb"?"bin":"xml",i=mF.indexOf(t.bookType)>-1,r=j7();EO(t=t||{});var s=sO(),d="",u=0;if(t.cellXfs=[],l0(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),d="docProps/core.xml",ei(s,d,H7(n.Props,t)),r.coreprops.push(d),Gi(t.rels,2,d,Ei.CORE_PROPS),d="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var h=[],v=0;v<n.SheetNames.length;++v)(n.Workbook.Sheets[v]||{}).Hidden!=2&&h.push(n.SheetNames[v]);n.Props.SheetNames=h}for(n.Props.Worksheets=n.Props.SheetNames.length,ei(s,d,$7(n.Props,t)),r.extprops.push(d),Gi(t.rels,3,d,Ei.EXT_PROPS),n.Custprops!==n.Props&&Go(n.Custprops||{}).length>0&&(d="docProps/custom.xml",ei(s,d,Y7(n.Custprops,t)),r.custprops.push(d),Gi(t.rels,4,d,Ei.CUST_PROPS)),u=1;u<=n.SheetNames.length;++u){var C={"!id":{}},O=n.Sheets[n.SheetNames[u-1]],T=(O||{})["!type"]||"sheet";switch(T){case"chart":default:d="xl/worksheets/sheet"+u+"."+e,ei(s,d,yme(u-1,d,t,n,C)),r.sheets.push(d),Gi(t.wbrels,-1,"worksheets/sheet"+u+"."+e,Ei.WS[0])}if(O){var w=O["!comments"],A=!1,I="";w&&w.length>0&&(I="xl/comments"+u+"."+e,ei(s,I,Mme(w,I,t)),r.comments.push(I),Gi(C,-1,"../comments"+u+"."+e,Ei.CMNT),A=!0),O["!legacy"]&&A&&ei(s,"xl/drawings/vmlDrawing"+u+".vml",dF(u,O["!comments"])),delete O["!comments"],delete O["!legacy"]}C["!id"].rId1&&ei(s,z7(d),vu(C))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+e,ei(s,d,bme(t.Strings,d,t)),r.strs.push(d),Gi(t.wbrels,-1,"sharedStrings."+e,Ei.SST)),d="xl/workbook."+e,ei(s,d,xme(n,d,t)),r.workbooks.push(d),Gi(t.rels,1,d,Ei.WB),d="xl/theme/theme1.xml",ei(s,d,lF(n.Themes,t)),r.themes.push(d),Gi(t.wbrels,-1,"theme/theme1.xml",Ei.THEME),d="xl/styles."+e,ei(s,d,Cme(n,d,t)),r.styles.push(d),Gi(t.wbrels,-1,"styles."+e,Ei.STY),n.vbaraw&&i&&(d="xl/vbaProject.bin",ei(s,d,n.vbaraw),r.vba.push(d),Gi(t.wbrels,-1,"vbaProject.bin",Ei.VBA)),d="xl/metadata."+e,ei(s,d,Sme(d)),r.metadata.push(d),Gi(t.wbrels,-1,"metadata."+e,Ei.XLMETA),ei(s,"[Content_Types].xml",W7(r,t)),ei(s,"_rels/.rels",vu(t.rels)),ei(s,"xl/_rels/workbook."+e+".rels",vu(t.wbrels)),delete t.revssf,delete t.ssf,s}function vue(n,t){fu=1024,n&&!n.SSF&&(n.SSF=$a(Fr)),n&&n.SSF&&(gb(),ub(n.SSF),t.revssf=fb(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Vh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="xml",i=mF.indexOf(t.bookType)>-1,r=j7();EO(t=t||{});var s=sO(),d="",u=0;if(t.cellXfs=[],l0(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),d="docProps/core.xml",ei(s,d,H7(n.Props,t)),r.coreprops.push(d),Gi(t.rels,2,d,Ei.CORE_PROPS),d="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var h=[],v=0;v<n.SheetNames.length;++v)(n.Workbook.Sheets[v]||{}).Hidden!=2&&h.push(n.SheetNames[v]);n.Props.SheetNames=h}n.Props.Worksheets=n.Props.SheetNames.length,ei(s,d,$7(n.Props,t)),r.extprops.push(d),Gi(t.rels,3,d,Ei.EXT_PROPS),n.Custprops!==n.Props&&Go(n.Custprops||{}).length>0&&(d="docProps/custom.xml",ei(s,d,Y7(n.Custprops,t)),r.custprops.push(d),Gi(t.rels,4,d,Ei.CUST_PROPS));var C=["SheetJ5"];for(t.tcid=0,u=1;u<=n.SheetNames.length;++u){var O={"!id":{}},T=n.Sheets[n.SheetNames[u-1]],w=(T||{})["!type"]||"sheet";switch(w){case"chart":default:d="xl/worksheets/sheet"+u+"."+e,ei(s,d,CF(u-1,t,n,O)),r.sheets.push(d),Gi(t.wbrels,-1,"worksheets/sheet"+u+"."+e,Ei.WS[0])}if(T){var A=T["!comments"],I=!1,L="";if(A&&A.length>0){var B=!1;A.forEach(function(q){q[1].forEach(function(K){K.T==!0&&(B=!0)})}),B&&(L="xl/threadedComments/threadedComment"+u+"."+e,ei(s,L,Jce(A,C,t)),r.threadedcomments.push(L),Gi(O,-1,"../threadedComments/threadedComment"+u+"."+e,Ei.TCMNT)),L="xl/comments"+u+"."+e,ei(s,L,pF(A,t)),r.comments.push(L),Gi(O,-1,"../comments"+u+"."+e,Ei.CMNT),I=!0}T["!legacy"]&&I&&ei(s,"xl/drawings/vmlDrawing"+u+".vml",dF(u,T["!comments"])),delete T["!comments"],delete T["!legacy"]}O["!id"].rId1&&ei(s,z7(d),vu(O))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+e,ei(s,d,nF(t.Strings,t)),r.strs.push(d),Gi(t.wbrels,-1,"sharedStrings."+e,Ei.SST)),d="xl/workbook."+e,ei(s,d,SF(n,t)),r.workbooks.push(d),Gi(t.rels,1,d,Ei.WB),d="xl/theme/theme1.xml",ei(s,d,lF(n.Themes,t)),r.themes.push(d),Gi(t.wbrels,-1,"theme/theme1.xml",Ei.THEME),d="xl/styles."+e,ei(s,d,aF(n,t)),r.styles.push(d),Gi(t.wbrels,-1,"styles."+e,Ei.STY),n.vbaraw&&i&&(d="xl/vbaProject.bin",ei(s,d,n.vbaraw),r.vba.push(d),Gi(t.wbrels,-1,"vbaProject.bin",Ei.VBA)),d="xl/metadata."+e,ei(s,d,cF()),r.metadata.push(d),Gi(t.wbrels,-1,"metadata."+e,Ei.XLMETA),C.length>1&&(d="xl/persons/person.xml",ei(s,d,Kce(C,t)),r.people.push(d),Gi(t.wbrels,-1,"persons/person.xml",Ei.PEOPLE)),ei(s,"[Content_Types].xml",W7(r,t)),ei(s,"_rels/.rels",vu(t.rels)),ei(s,"xl/_rels/workbook."+e+".rels",vu(t.wbrels)),delete t.revssf,delete t.ssf,s}function xue(n,t){var e="";switch((t||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":e=Zc(n.slice(0,12));break;case"binary":e=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3),e.charCodeAt(4),e.charCodeAt(5),e.charCodeAt(6),e.charCodeAt(7)]}function IF(n,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return $h(t.file,Zi.write(n,{type:Ai?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Zi.write(n,t)}function yue(n,t){var e=$a(t||{}),i=hue(n,e);return Cue(i,e)}function Cue(n,t){var e={},i=Ai?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(e.compression="DEFLATE"),t.password)e.type=i;else switch(t.type){case"base64":e.type="base64";break;case"binary":e.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":e.type=i;break;default:throw new Error("Unrecognized type "+t.type)}var r=n.FullPaths?Zi.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[e.type]||e.type,compression:!!t.compression}):n.generate(e);if(typeof Deno<"u"&&typeof r=="string"){if(t.type=="binary"||t.type=="base64")return r;r=new Uint8Array(mb(r))}return t.password&&typeof encrypt_agile<"u"?IF(encrypt_agile(r,t.password),t):t.type==="file"?$h(t.file,r):t.type=="string"?Rh(r):r}function bue(n,t){var e=t||{},i=Vme(n,e);return IF(i,e)}function ic(n,t,e){e||(e="");var i=e+n;switch(t.type){case"base64":return jh(Jc(i));case"binary":return Jc(i);case"string":return n;case"file":return $h(t.file,i,"utf8");case"buffer":return Ai?td(i,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(i):ic(i,{type:"binary"}).split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Mue(n,t){switch(t.type){case"base64":return jh(n);case"binary":return n;case"string":return n;case"file":return $h(t.file,n,"binary");case"buffer":return Ai?td(n,"binary"):n.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function XC(n,t){switch(t.type){case"string":case"base64":case"binary":for(var e="",i=0;i<n.length;++i)e+=String.fromCharCode(n[i]);return t.type=="base64"?jh(e):t.type=="string"?Rh(e):e;case"file":return $h(t.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+t.type)}}function DF(n,t){Jae(),lme(n);var e=$a(t||{});if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),e.type=="array"){e.type="binary";var i=DF(n,e);return e.type="array",mb(i)}var r=0;if(e.sheet&&(typeof e.sheet=="number"?r=e.sheet:r=n.SheetNames.indexOf(e.sheet),!n.SheetNames[r]))throw new Error("Sheet not found: "+e.sheet+" : "+typeof e.sheet);switch(e.bookType||"xlsb"){case"xml":case"xlml":return ic(Nme(n,e),e);case"slk":case"sylk":return ic(oce.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"htm":case"html":return ic(EF(n.Sheets[n.SheetNames[r]],e),e);case"txt":return Mue(AF(n.Sheets[n.SheetNames[r]],e),e);case"csv":return ic(OO(n.Sheets[n.SheetNames[r]],e),e,"\uFEFF");case"dif":return ic(ace.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"dbf":return XC(rce.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"prn":return ic(sce.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"rtf":return ic(gce.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"eth":return ic(tF.from_sheet(n.Sheets[n.SheetNames[r]],e),e);case"fods":return ic(kF(n,e),e);case"wk1":return XC(ZR.sheet_to_wk1(n.Sheets[n.SheetNames[r]],e),e);case"wk3":return XC(ZR.book_to_wk3(n,e),e);case"biff2":e.biff||(e.biff=2);case"biff3":e.biff||(e.biff=3);case"biff4":return e.biff||(e.biff=4),XC(wF(n,e),e);case"biff5":e.biff||(e.biff=5);case"biff8":case"xla":case"xls":return e.biff||(e.biff=8),bue(n,e);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return yue(n,e);default:throw new Error("Unrecognized bookType |"+e.bookType+"|")}}function Sue(n){if(!n.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},e=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();e.match(/^\.[a-z]+$/)&&(n.bookType=e.slice(1)),n.bookType=t[n.bookType]||n.bookType}}function Cb(n,t,e){var i=e||{};return i.type="file",i.file=t,Sue(i),DF(n,i)}function Pue(n,t,e,i,r,s,d,u){var h=Ho(e),v=u.defval,C=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),O=!0,T=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(T,"__rowNum__",{value:e,enumerable:!1})}catch{T.__rowNum__=e}else T.__rowNum__=e;if(!d||n[e])for(var w=t.s.c;w<=t.e.c;++w){var A=d?n[e][w]:n[i[w]+h];if(A===void 0||A.t===void 0){if(v===void 0)continue;s[w]!=null&&(T[s[w]]=v);continue}var I=A.v;switch(A.t){case"z":if(I==null)break;continue;case"e":I=I==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+A.t)}if(s[w]!=null){if(I==null)if(A.t=="e"&&I===null)T[s[w]]=null;else if(v!==void 0)T[s[w]]=v;else if(C&&I===null)T[s[w]]=null;else continue;else T[s[w]]=C&&(A.t!=="n"||A.t==="n"&&u.rawNumbers!==!1)?I:ed(A,I,u);I!=null&&(O=!1)}}return{row:T,isempty:O}}function pb(n,t){if(n==null||n["!ref"]==null)return[];var e={t:"n",v:0},i=0,r=1,s=[],d=0,u="",h={s:{r:0,c:0},e:{r:0,c:0}},v=t||{},C=v.range!=null?v.range:n["!ref"];switch(v.header===1?i=1:v.header==="A"?i=2:Array.isArray(v.header)?i=3:v.header==null&&(i=0),typeof C){case"string":h=hr(C);break;case"number":h=hr(n["!ref"]),h.s.r=C;break;default:h=C}i>0&&(r=0);var O=Ho(h.s.r),T=[],w=[],A=0,I=0,L=Array.isArray(n),B=h.s.r,q=0,K={};L&&!n[B]&&(n[B]=[]);var J=v.skipHidden&&n["!cols"]||[],Me=v.skipHidden&&n["!rows"]||[];for(q=h.s.c;q<=h.e.c;++q)if(!(J[q]||{}).hidden)switch(T[q]=aa(q),e=L?n[B][q]:n[T[q]+O],i){case 1:s[q]=q-h.s.c;break;case 2:s[q]=T[q];break;case 3:s[q]=v.header[q-h.s.c];break;default:if(e==null&&(e={w:"__EMPTY",t:"s"}),u=d=ed(e,null,v),I=K[d]||0,!I)K[d]=1;else{do u=d+"_"+I++;while(K[u]);K[d]=I,K[u]=1}s[q]=u}for(B=h.s.r+r;B<=h.e.r;++B)if(!(Me[B]||{}).hidden){var ze=Pue(n,h,B,T,i,s,L,v);(ze.isempty===!1||(i===1?v.blankrows!==!1:v.blankrows))&&(w[A++]=ze.row)}return w.length=A,w}var s7=/"/g;function wue(n,t,e,i,r,s,d,u){for(var h=!0,v=[],C="",O=Ho(e),T=t.s.c;T<=t.e.c;++T)if(i[T]){var w=u.dense?(n[e]||[])[T]:n[i[T]+O];if(w==null)C="";else if(w.v!=null){h=!1,C=""+(u.rawNumbers&&w.t=="n"?w.v:ed(w,null,u));for(var A=0,I=0;A!==C.length;++A)if((I=C.charCodeAt(A))===r||I===s||I===34||u.forceQuotes){C='"'+C.replace(s7,'""')+'"';break}C=="ID"&&(C='"ID"')}else w.f!=null&&!w.F?(h=!1,C="="+w.f,C.indexOf(",")>=0&&(C='"'+C.replace(s7,'""')+'"')):C="";v.push(C)}return u.blankrows===!1&&h?null:v.join(d)}function OO(n,t){var e=[],i=t??{};if(n==null||n["!ref"]==null)return"";var r=hr(n["!ref"]),s=i.FS!==void 0?i.FS:",",d=s.charCodeAt(0),u=i.RS!==void 0?i.RS:`
`,h=u.charCodeAt(0),v=new RegExp((s=="|"?"\\|":s)+"+$"),C="",O=[];i.dense=Array.isArray(n);for(var T=i.skipHidden&&n["!cols"]||[],w=i.skipHidden&&n["!rows"]||[],A=r.s.c;A<=r.e.c;++A)(T[A]||{}).hidden||(O[A]=aa(A));for(var I=0,L=r.s.r;L<=r.e.r;++L)(w[L]||{}).hidden||(C=wue(n,r,L,O,d,h,s,i),C!=null&&(i.strip&&(C=C.replace(v,"")),(C||i.blankrows!==!1)&&e.push((I++?u:"")+C)));return delete i.dense,e.join("")}function AF(n,t){t||(t={}),t.FS="	",t.RS=`
`;var e=OO(n,t);if(typeof rr>"u"||t.type=="string")return e;var i=rr.utils.encode(1200,e,"str");return"\xFF\xFE"+i}function Eue(n){var t="",e,i="";if(n==null||n["!ref"]==null)return[];var r=hr(n["!ref"]),s="",d=[],u,h=[],v=Array.isArray(n);for(u=r.s.c;u<=r.e.c;++u)d[u]=aa(u);for(var C=r.s.r;C<=r.e.r;++C)for(s=Ho(C),u=r.s.c;u<=r.e.c;++u)if(t=d[u]+s,e=v?(n[C]||[])[u]:n[t],i="",e!==void 0){if(e.F!=null){if(t=e.F,!e.f)continue;i=e.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(e.f!=null)i=e.f;else{if(e.t=="z")continue;if(e.t=="n"&&e.v!=null)i=""+e.v;else if(e.t=="b")i=e.v?"TRUE":"FALSE";else if(e.w!==void 0)i="'"+e.w;else{if(e.v===void 0)continue;e.t=="s"?i="'"+e.v:i=""+e.v}}h[h.length]=t+"="+i}return h}function RF(n,t,e){var i=e||{},r=+!i.skipHeader,s=n||{},d=0,u=0;if(s&&i.origin!=null)if(typeof i.origin=="number")d=i.origin;else{var h=typeof i.origin=="string"?So(i.origin):i.origin;d=h.r,u=h.c}var v,C={s:{c:0,r:0},e:{c:u,r:d+t.length-1+r}};if(s["!ref"]){var O=hr(s["!ref"]);C.e.c=Math.max(C.e.c,O.e.c),C.e.r=Math.max(C.e.r,O.e.r),d==-1&&(d=O.e.r+1,C.e.r=d+t.length-1+r)}else d==-1&&(d=0,C.e.r=t.length-1+r);var T=i.header||[],w=0;t.forEach(function(I,L){Go(I).forEach(function(B){(w=T.indexOf(B))==-1&&(T[w=T.length]=B);var q=I[B],K="z",J="",Me=Yi({c:u+w,r:d+L+r});v=Hh(s,Me),q&&typeof q=="object"&&!(q instanceof Date)?s[Me]=q:(typeof q=="number"?K="n":typeof q=="boolean"?K="b":typeof q=="string"?K="s":q instanceof Date?(K="d",i.cellDates||(K="n",q=Ga(q)),J=i.dateNF||Fr[14]):q===null&&i.nullError&&(K="e",q=0),v?(v.t=K,v.v=q,delete v.w,delete v.R,J&&(v.z=J)):s[Me]=v={t:K,v:q},J&&(v.z=J))})}),C.e.c=Math.max(C.e.c,u+T.length-1);var A=Ho(d);if(r)for(w=0;w<T.length;++w)s[aa(w+u)+A]={t:"s",v:T[w]};return s["!ref"]=Zr(C),s}function Oue(n,t){return RF(null,n,t)}function Hh(n,t,e){if(typeof t=="string"){if(Array.isArray(n)){var i=So(t);return n[i.r]||(n[i.r]=[]),n[i.r][i.c]||(n[i.r][i.c]={t:"z"})}return n[t]||(n[t]={t:"z"})}return typeof t!="number"?Hh(n,Yi(t)):Hh(n,Yi({r:t,c:e||0}))}function Tue(n,t){if(typeof t=="number"){if(t>=0&&n.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var e=n.SheetNames.indexOf(t);if(e>-1)return e;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function kue(){return{SheetNames:[],Sheets:{}}}function Iue(n,t,e,i){var r=1;if(!e)for(;r<=65535&&n.SheetNames.indexOf(e="Sheet"+r)!=-1;++r,e=void 0);if(!e||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&n.SheetNames.indexOf(e)>=0){var s=e.match(/(^.*?)(\d+)$/);r=s&&+s[2]||0;var d=s&&s[1]||e;for(++r;r<=65535&&n.SheetNames.indexOf(e=d+r)!=-1;++r);}if(MF(e),n.SheetNames.indexOf(e)>=0)throw new Error("Worksheet with name |"+e+"| already exists!");return n.SheetNames.push(e),n.Sheets[e]=t,e}function Due(n,t,e){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var i=Tue(n,t);switch(n.Workbook.Sheets[i]||(n.Workbook.Sheets[i]={}),e){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+e)}n.Workbook.Sheets[i].Hidden=e}function Aue(n,t){return n.z=t,n}function FF(n,t,e){return t?(n.l={Target:t},e&&(n.l.Tooltip=e)):delete n.l,n}function Rue(n,t,e){return FF(n,"#"+t,e)}function Fue(n,t,e){n.c||(n.c=[]),n.c.push({t,a:e||"SheetJS"})}function Nue(n,t,e,i){for(var r=typeof t!="string"?t:hr(t),s=typeof t=="string"?t:Zr(t),d=r.s.r;d<=r.e.r;++d)for(var u=r.s.c;u<=r.e.c;++u){var h=Hh(n,d,u);h.t="n",h.F=s,delete h.v,d==r.s.r&&u==r.s.c&&(h.f=e,i&&(h.D=!0))}return n}var ac={encode_col:aa,encode_row:Ho,encode_cell:Yi,encode_range:Zr,decode_col:_O,decode_row:hO,split_cell:Qse,decode_cell:So,decode_range:gs,format_cell:ed,sheet_add_aoa:F7,sheet_add_json:RF,sheet_add_dom:OF,aoa_to_sheet:Pu,json_to_sheet:Oue,table_to_sheet:TF,table_to_book:aue,sheet_to_csv:OO,sheet_to_txt:AF,sheet_to_json:pb,sheet_to_html:EF,sheet_to_formulae:Eue,sheet_to_row_object_array:pb,sheet_get_cell:Hh,book_new:kue,book_append_sheet:Iue,book_set_sheet_visibility:Due,cell_set_number_format:Aue,cell_set_hyperlink:FF,cell_set_internal_link:Rue,cell_add_comment:Fue,sheet_set_array_formula:Nue,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};var MXe=Bh.version;var Ml=Uint8Array,fs=Uint16Array,AO=Int32Array,RO=new Ml([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FO=new Ml([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LF=new Ml([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jF=function(n,t){for(var e=new fs(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var r=new AO(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)r[s]=s-e[i]<<5|i;return{b:e,r}},WF=jF(RO,2),Lue=WF.b,kO=WF.r;Lue[28]=258,kO[258]=28;var zF=jF(FO,0),SXe=zF.b,VF=zF.r,IO=new fs(32768);for(Ri=0;Ri<32768;++Ri)nd=(Ri&43690)>>1|(Ri&21845)<<1,nd=(nd&52428)>>2|(nd&13107)<<2,nd=(nd&61680)>>4|(nd&3855)<<4,IO[Ri]=((nd&65280)>>8|(nd&255)<<8)>>1;var nd,Ri,Zh=function(n,t,e){for(var i=n.length,r=0,s=new fs(t);r<i;++r)n[r]&&++s[n[r]-1];var d=new fs(t);for(r=1;r<t;++r)d[r]=d[r-1]+s[r-1]<<1;var u;if(e){u=new fs(1<<t);var h=15-t;for(r=0;r<i;++r)if(n[r])for(var v=r<<4|n[r],C=t-n[r],O=d[n[r]-1]++<<C,T=O|(1<<C)-1;O<=T;++O)u[IO[O]>>h]=v}else for(u=new fs(i),r=0;r<i;++r)n[r]&&(u[r]=IO[d[n[r]-1]++]>>15-n[r]);return u},Fp=new Ml(288);for(Ri=0;Ri<144;++Ri)Fp[Ri]=8;var Ri;for(Ri=144;Ri<256;++Ri)Fp[Ri]=9;var Ri;for(Ri=256;Ri<280;++Ri)Fp[Ri]=7;var Ri;for(Ri=280;Ri<288;++Ri)Fp[Ri]=8;var Ri,bb=new Ml(32);for(Ri=0;Ri<32;++Ri)bb[Ri]=5;var Ri,Vue=Zh(Fp,9,0);var Bue=Zh(bb,5,0);var qF=function(n){return(n+7)/8|0},Uue=function(n,t,e){return(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length),new Ml(n.subarray(t,e))};var id=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},Qh=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},TO=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var r=e.length,s=e.slice();if(!r)return{t:GF,l:0};if(r==1){var d=new Ml(e[0].s+1);return d[e[0].s]=1,{t:d,l:1}}e.sort(function(Me,ze){return Me.f-ze.f}),e.push({s:-1,f:25001});var u=e[0],h=e[1],v=0,C=1,O=2;for(e[0]={s:-1,f:u.f+h.f,l:u,r:h};C!=r-1;)u=e[e[v].f<e[O].f?v++:O++],h=e[v!=C&&e[v].f<e[O].f?v++:O++],e[C++]={s:-1,f:u.f+h.f,l:u,r:h};for(var T=s[0].s,i=1;i<r;++i)s[i].s>T&&(T=s[i].s);var w=new fs(T+1),A=DO(e[C-1],w,0);if(A>t){var i=0,I=0,L=A-t,B=1<<L;for(s.sort(function(ze,oe){return w[oe.s]-w[ze.s]||ze.f-oe.f});i<r;++i){var q=s[i].s;if(w[q]>t)I+=B-(1<<A-w[q]),w[q]=t;else break}for(I>>=L;I>0;){var K=s[i].s;w[K]<t?I-=1<<t-w[K]++-1:++i}for(;i>=0&&I;--i){var J=s[i].s;w[J]==t&&(--w[J],++I)}A=t}return{t:new Ml(w),l:A}},DO=function(n,t,e){return n.s==-1?Math.max(DO(n.l,t,e+1),DO(n.r,t,e+1)):t[n.s]=e},BF=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new fs(++t),i=0,r=n[0],s=1,d=function(h){e[i++]=h},u=1;u<=t;++u)if(n[u]==r&&u!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)d(32754);s>2&&(d(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(d(r),--s;s>6;s-=6)d(8304);s>2&&(d(s-3<<5|8208),s=0)}for(;s--;)d(r);s=1,r=n[u]}return{c:e.subarray(0,i),n:t}},Xh=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},HF=function(n,t,e){var i=e.length,r=qF(t+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=e[s];return(r+4+i)*8},UF=function(n,t,e,i,r,s,d,u,h,v,C){id(t,C++,e),++r[256];for(var O=TO(r,15),T=O.t,w=O.l,A=TO(s,15),I=A.t,L=A.l,B=BF(T),q=B.c,K=B.n,J=BF(I),Me=J.c,ze=J.n,oe=new fs(19),ae=0;ae<q.length;++ae)++oe[q[ae]&31];for(var ae=0;ae<Me.length;++ae)++oe[Me[ae]&31];for(var X=TO(oe,7),pe=X.t,z=X.l,Z=19;Z>4&&!pe[LF[Z-1]];--Z);var ge=v+5<<3,Pe=Xh(r,Fp)+Xh(s,bb)+d,Ve=Xh(r,T)+Xh(s,I)+d+14+3*Z+Xh(oe,pe)+2*oe[16]+3*oe[17]+7*oe[18];if(h>=0&&ge<=Pe&&ge<=Ve)return HF(t,C,n.subarray(h,h+v));var De,Fe,Te,Je;if(id(t,C,1+(Ve<Pe)),C+=2,Ve<Pe){De=Zh(T,w,0),Fe=T,Te=Zh(I,L,0),Je=I;var _t=Zh(pe,z,0);id(t,C,K-257),id(t,C+5,ze-1),id(t,C+10,Z-4),C+=14;for(var ae=0;ae<Z;++ae)id(t,C+3*ae,pe[LF[ae]]);C+=3*Z;for(var pt=[q,Me],U=0;U<2;++U)for(var Q=pt[U],ae=0;ae<Q.length;++ae){var W=Q[ae]&31;id(t,C,_t[W]),C+=pe[W],W>15&&(id(t,C,Q[ae]>>5&127),C+=Q[ae]>>12)}}else De=Vue,Fe=Fp,Te=Bue,Je=bb;for(var ae=0;ae<u;++ae){var Y=i[ae];if(Y>255){var W=Y>>18&31;Qh(t,C,De[W+257]),C+=Fe[W+257],W>7&&(id(t,C,Y>>23&31),C+=RO[W]);var ue=Y&31;Qh(t,C,Te[ue]),C+=Je[ue],ue>3&&(Qh(t,C,Y>>5&8191),C+=FO[ue])}else Qh(t,C,De[Y]),C+=Fe[Y]}return Qh(t,C,De[256]),C+Fe[256]},jue=new AO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GF=new Ml(0),Wue=function(n,t,e,i,r,s){var d=s.z||n.length,u=new Ml(i+d+5*(1+Math.ceil(d/7e3))+r),h=u.subarray(i,u.length-r),v=s.l,C=(s.r||0)&7;if(t){C&&(h[0]=s.r>>3);for(var O=jue[t-1],T=O>>13,w=O&8191,A=(1<<e)-1,I=s.p||new fs(32768),L=s.h||new fs(A+1),B=Math.ceil(e/3),q=2*B,K=function(Bt){return(n[Bt]^n[Bt+1]<<B^n[Bt+2]<<q)&A},J=new AO(25e3),Me=new fs(288),ze=new fs(32),oe=0,ae=0,X=s.i||0,pe=0,z=s.w||0,Z=0;X+2<d;++X){var ge=K(X),Pe=X&32767,Ve=L[ge];if(I[Pe]=Ve,L[ge]=Pe,z<=X){var De=d-X;if((oe>7e3||pe>24576)&&(De>423||!v)){C=UF(n,h,0,J,Me,ze,ae,pe,Z,X-Z,C),pe=oe=ae=0,Z=X;for(var Fe=0;Fe<286;++Fe)Me[Fe]=0;for(var Fe=0;Fe<30;++Fe)ze[Fe]=0}var Te=2,Je=0,_t=w,pt=Pe-Ve&32767;if(De>2&&ge==K(X-pt))for(var U=Math.min(T,De)-1,Q=Math.min(32767,X),W=Math.min(258,De);pt<=Q&&--_t&&Pe!=Ve;){if(n[X+Te]==n[X+Te-pt]){for(var Y=0;Y<W&&n[X+Y]==n[X+Y-pt];++Y);if(Y>Te){if(Te=Y,Je=pt,Y>U)break;for(var ue=Math.min(pt,Y-2),we=0,Fe=0;Fe<ue;++Fe){var qe=X-pt+Fe&32767,Ae=I[qe],Re=qe-Ae&32767;Re>we&&(we=Re,Ve=qe)}}}Pe=Ve,Ve=I[Pe],pt+=Pe-Ve&32767}if(Je){J[pe++]=268435456|kO[Te]<<18|VF[Je];var gt=kO[Te]&31,Pt=VF[Je]&31;ae+=RO[gt]+FO[Pt],++Me[257+gt],++ze[Pt],z=X+Te,++oe}else J[pe++]=n[X],++Me[n[X]]}}for(X=Math.max(X,z);X<d;++X)J[pe++]=n[X],++Me[n[X]];C=UF(n,h,v,J,Me,ze,ae,pe,Z,X-Z,C),v||(s.r=C&7|h[C/8|0]<<3,C-=7,s.h=L,s.p=I,s.i=X,s.w=z)}else{for(var X=s.w||0;X<d+v;X+=65535){var Nt=X+65535;Nt>=d&&(h[C/8|0]=v,Nt=d),C=HF(h,C+1,n.subarray(X,Nt))}s.i=d}return Uue(u,0,i+qF(C)+r)};var $F=function(){var n=1,t=0;return{p:function(e){for(var i=n,r=t,s=e.length|0,d=0;d!=s;){for(var u=Math.min(d+2655,s);d<u;++d)r+=i+=e[d];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,t=r},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},zue=function(n,t,e,i,r){if(!r&&(r={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),d=new Ml(s.length+n.length);d.set(s),d.set(n,s.length),n=d,r.w=s.length}return Wue(n,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,r)};var YF=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8};var que=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var r=$F();r.p(t.dictionary),YF(n,2,r.d())}};function Mb(n,t){t||(t={});var e=$F();e.p(n);var i=zue(n,t,t.dictionary?6:2,4);return que(i,t),YF(i,i.length-4,e.d()),i}var Hue=typeof TextDecoder<"u"&&new TextDecoder,Gue=0;try{Hue.decode(GF,{stream:!0}),Gue=1}catch{}function JF(n){if(Array.isArray(n))return n}function KF(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,d,u=[],h=!0,v=!1;try{if(s=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;h=!1}else for(;!(h=(i=s.call(e)).done)&&(u.push(i.value),u.length!==t);h=!0);}catch(C){v=!0,r=C}finally{try{if(!h&&e.return!=null&&(d=e.return(),Object(d)!==d))return}finally{if(v)throw r}}return u}}function NO(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function QF(n,t){if(n){if(typeof n=="string")return NO(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?NO(n,t):void 0}}function XF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LO(n,t){return JF(n)||KF(n,t)||QF(n,t)||XF()}function VO(n,t="utf8"){return new TextDecoder(t).decode(n)}var $ue=new TextEncoder;function ZF(n){return $ue.encode(n)}var Yue=1024*8,Jue=(()=>{let n=new Uint8Array(4),t=new Uint32Array(n.buffer);return!((t[0]=1)&n[0])})(),BO={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},e_=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Yue,e={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);let r=e.offset?e.offset>>>0:0,s=t.byteLength-r,d=r;(ArrayBuffer.isView(t)||t instanceof n)&&(t.byteLength!==t.buffer.byteLength&&(d=t.byteOffset+r),t=t.buffer),i?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){let i=(this.offset+t)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){let i=BO[e].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,s=this.buffer.slice(r,r+i);if(this.littleEndian===Jue&&e!=="uint8"&&e!=="int8"){let u=new Uint8Array(this.buffer.slice(r,r+i));u.reverse();let h=new BO[e](u.buffer);return this.offset+=i,h.reverse(),h}let d=new BO[e](s);return this.offset+=i,d}readInt16(){let t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){let t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){let t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){let t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){let t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){let t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){let t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){let t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let i=0;i<t;i++)e+=this.readChar();return e}readUtf8(t=1){return VO(this.readBytes(t))}decodeText(t=1,e="utf8"){return VO(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(ZF(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Au(n){let t=n.length;for(;--t>=0;)n[t]=0}var Kue=0,VN=1,Que=2,Xue=3,Zue=258,c4=29,f_=256,s_=f_+1+c4,ku=30,d4=19,BN=2*s_+1,Np=15,UO=16,ege=7,p4=256,UN=16,jN=17,WN=18,e4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Tb=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),tge=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),zN=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nge=512,od=new Array((s_+2)*2);Au(od);var r_=new Array(ku*2);Au(r_);var l_=new Array(nge);Au(l_);var c_=new Array(Zue-Xue+1);Au(c_);var m4=new Array(c4);Au(m4);var kb=new Array(ku);Au(kb);function jO(n,t,e,i,r){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=i,this.max_length=r,this.has_stree=n&&n.length}var qN,HN,GN;function WO(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}var $N=n=>n<256?l_[n]:l_[256+(n>>>7)],d_=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},Ya=(n,t,e)=>{n.bi_valid>UO-e?(n.bi_buf|=t<<n.bi_valid&65535,d_(n,n.bi_buf),n.bi_buf=t>>UO-n.bi_valid,n.bi_valid+=e-UO):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},lc=(n,t,e)=>{Ya(n,e[t*2],e[t*2+1])},YN=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},ige=n=>{n.bi_valid===16?(d_(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},rge=(n,t)=>{let e=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,h=t.stat_desc.max_length,v,C,O,T,w,A,I=0;for(T=0;T<=Np;T++)n.bl_count[T]=0;for(e[n.heap[n.heap_max]*2+1]=0,v=n.heap_max+1;v<BN;v++)C=n.heap[v],T=e[e[C*2+1]*2+1]+1,T>h&&(T=h,I++),e[C*2+1]=T,!(C>i)&&(n.bl_count[T]++,w=0,C>=u&&(w=d[C-u]),A=e[C*2],n.opt_len+=A*(T+w),s&&(n.static_len+=A*(r[C*2+1]+w)));if(I!==0){do{for(T=h-1;n.bl_count[T]===0;)T--;n.bl_count[T]--,n.bl_count[T+1]+=2,n.bl_count[h]--,I-=2}while(I>0);for(T=h;T!==0;T--)for(C=n.bl_count[T];C!==0;)O=n.heap[--v],!(O>i)&&(e[O*2+1]!==T&&(n.opt_len+=(T-e[O*2+1])*e[O*2],e[O*2+1]=T),C--)}},JN=(n,t,e)=>{let i=new Array(Np+1),r=0,s,d;for(s=1;s<=Np;s++)r=r+e[s-1]<<1,i[s]=r;for(d=0;d<=t;d++){let u=n[d*2+1];u!==0&&(n[d*2]=YN(i[u]++,u))}},oge=()=>{let n,t,e,i,r,s=new Array(Np+1);for(e=0,i=0;i<c4-1;i++)for(m4[i]=e,n=0;n<1<<e4[i];n++)c_[e++]=i;for(c_[e-1]=i,r=0,i=0;i<16;i++)for(kb[i]=r,n=0;n<1<<Tb[i];n++)l_[r++]=i;for(r>>=7;i<ku;i++)for(kb[i]=r<<7,n=0;n<1<<Tb[i]-7;n++)l_[256+r++]=i;for(t=0;t<=Np;t++)s[t]=0;for(n=0;n<=143;)od[n*2+1]=8,n++,s[8]++;for(;n<=255;)od[n*2+1]=9,n++,s[9]++;for(;n<=279;)od[n*2+1]=7,n++,s[7]++;for(;n<=287;)od[n*2+1]=8,n++,s[8]++;for(JN(od,s_+1,s),n=0;n<ku;n++)r_[n*2+1]=5,r_[n*2]=YN(n,5);qN=new jO(od,e4,f_+1,s_,Np),HN=new jO(r_,Tb,0,ku,Np),GN=new jO(new Array(0),tge,0,d4,ege)},KN=n=>{let t;for(t=0;t<s_;t++)n.dyn_ltree[t*2]=0;for(t=0;t<ku;t++)n.dyn_dtree[t*2]=0;for(t=0;t<d4;t++)n.bl_tree[t*2]=0;n.dyn_ltree[p4*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},QN=n=>{n.bi_valid>8?d_(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},eN=(n,t,e,i)=>{let r=t*2,s=e*2;return n[r]<n[s]||n[r]===n[s]&&i[t]<=i[e]},zO=(n,t,e)=>{let i=n.heap[e],r=e<<1;for(;r<=n.heap_len&&(r<n.heap_len&&eN(t,n.heap[r+1],n.heap[r],n.depth)&&r++,!eN(t,i,n.heap[r],n.depth));)n.heap[e]=n.heap[r],e=r,r<<=1;n.heap[e]=i},tN=(n,t,e)=>{let i,r,s=0,d,u;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+s++]&255,i+=(n.pending_buf[n.sym_buf+s++]&255)<<8,r=n.pending_buf[n.sym_buf+s++],i===0?lc(n,r,t):(d=c_[r],lc(n,d+f_+1,t),u=e4[d],u!==0&&(r-=m4[d],Ya(n,r,u)),i--,d=$N(i),lc(n,d,e),u=Tb[d],u!==0&&(i-=kb[d],Ya(n,i,u)));while(s<n.sym_next);lc(n,p4,t)},t4=(n,t)=>{let e=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems,d,u,h=-1,v;for(n.heap_len=0,n.heap_max=BN,d=0;d<s;d++)e[d*2]!==0?(n.heap[++n.heap_len]=h=d,n.depth[d]=0):e[d*2+1]=0;for(;n.heap_len<2;)v=n.heap[++n.heap_len]=h<2?++h:0,e[v*2]=1,n.depth[v]=0,n.opt_len--,r&&(n.static_len-=i[v*2+1]);for(t.max_code=h,d=n.heap_len>>1;d>=1;d--)zO(n,e,d);v=s;do d=n.heap[1],n.heap[1]=n.heap[n.heap_len--],zO(n,e,1),u=n.heap[1],n.heap[--n.heap_max]=d,n.heap[--n.heap_max]=u,e[v*2]=e[d*2]+e[u*2],n.depth[v]=(n.depth[d]>=n.depth[u]?n.depth[d]:n.depth[u])+1,e[d*2+1]=e[u*2+1]=v,n.heap[1]=v++,zO(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],rge(n,t),JN(e,h,n.bl_count)},nN=(n,t,e)=>{let i,r=-1,s,d=t[1],u=0,h=7,v=4;for(d===0&&(h=138,v=3),t[(e+1)*2+1]=65535,i=0;i<=e;i++)s=d,d=t[(i+1)*2+1],!(++u<h&&s===d)&&(u<v?n.bl_tree[s*2]+=u:s!==0?(s!==r&&n.bl_tree[s*2]++,n.bl_tree[UN*2]++):u<=10?n.bl_tree[jN*2]++:n.bl_tree[WN*2]++,u=0,r=s,d===0?(h=138,v=3):s===d?(h=6,v=3):(h=7,v=4))},iN=(n,t,e)=>{let i,r=-1,s,d=t[1],u=0,h=7,v=4;for(d===0&&(h=138,v=3),i=0;i<=e;i++)if(s=d,d=t[(i+1)*2+1],!(++u<h&&s===d)){if(u<v)do lc(n,s,n.bl_tree);while(--u!==0);else s!==0?(s!==r&&(lc(n,s,n.bl_tree),u--),lc(n,UN,n.bl_tree),Ya(n,u-3,2)):u<=10?(lc(n,jN,n.bl_tree),Ya(n,u-3,3)):(lc(n,WN,n.bl_tree),Ya(n,u-11,7));u=0,r=s,d===0?(h=138,v=3):s===d?(h=6,v=3):(h=7,v=4)}},age=n=>{let t;for(nN(n,n.dyn_ltree,n.l_desc.max_code),nN(n,n.dyn_dtree,n.d_desc.max_code),t4(n,n.bl_desc),t=d4-1;t>=3&&n.bl_tree[zN[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},sge=(n,t,e,i)=>{let r;for(Ya(n,t-257,5),Ya(n,e-1,5),Ya(n,i-4,4),r=0;r<i;r++)Ya(n,n.bl_tree[zN[r]*2+1],3);iN(n,n.dyn_ltree,t-1),iN(n,n.dyn_dtree,e-1)},lge=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(e=32;e<f_;e++)if(n.dyn_ltree[e*2]!==0)return 1;return 0},rN=!1,cge=n=>{rN||(oge(),rN=!0),n.l_desc=new WO(n.dyn_ltree,qN),n.d_desc=new WO(n.dyn_dtree,HN),n.bl_desc=new WO(n.bl_tree,GN),n.bi_buf=0,n.bi_valid=0,KN(n)},XN=(n,t,e,i)=>{Ya(n,(Kue<<1)+(i?1:0),3),QN(n),d_(n,e),d_(n,~e),e&&n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},dge=n=>{Ya(n,VN<<1,3),lc(n,p4,od),ige(n)},pge=(n,t,e,i)=>{let r,s,d=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=lge(n)),t4(n,n.l_desc),t4(n,n.d_desc),d=age(n),r=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=r&&(r=s)):r=s=e+5,e+4<=r&&t!==-1?XN(n,t,e,i):n.strategy===4||s===r?(Ya(n,(VN<<1)+(i?1:0),3),tN(n,od,r_)):(Ya(n,(Que<<1)+(i?1:0),3),sge(n,n.l_desc.max_code+1,n.d_desc.max_code+1,d+1),tN(n,n.dyn_ltree,n.dyn_dtree)),KN(n),i&&QN(n)},mge=(n,t,e)=>(n.pending_buf[n.sym_buf+n.sym_next++]=t,n.pending_buf[n.sym_buf+n.sym_next++]=t>>8,n.pending_buf[n.sym_buf+n.sym_next++]=e,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(c_[e]+f_+1)*2]++,n.dyn_dtree[$N(t)*2]++),n.sym_next===n.sym_end),uge=cge,gge=XN,fge=pge,hge=mge,_ge=dge,vge={_tr_init:uge,_tr_stored_block:gge,_tr_flush_block:fge,_tr_tally:hge,_tr_align:_ge},xge=(n,t,e,i)=>{let r=n&65535|0,s=n>>>16&65535|0,d=0;for(;e!==0;){d=e>2e3?2e3:e,e-=d;do r=r+t[i++]|0,s=s+r|0;while(--d);r%=65521,s%=65521}return r|s<<16|0},p_=xge,yge=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},Cge=new Uint32Array(yge()),bge=(n,t,e,i)=>{let r=Cge,s=i+e;n^=-1;for(let d=i;d<s;d++)n=n>>>8^r[(n^t[d])&255];return n^-1},wo=bge,Bp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ru={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Mge,_tr_stored_block:n4,_tr_flush_block:Sge,_tr_tally:p0,_tr_align:Pge}=vge,{Z_NO_FLUSH:m0,Z_PARTIAL_FLUSH:wge,Z_FULL_FLUSH:Ege,Z_FINISH:js,Z_BLOCK:oN,Z_OK:$o,Z_STREAM_END:aN,Z_STREAM_ERROR:cc,Z_DATA_ERROR:Oge,Z_BUF_ERROR:qO,Z_DEFAULT_COMPRESSION:Tge,Z_FILTERED:kge,Z_HUFFMAN_ONLY:Sb,Z_RLE:Ige,Z_FIXED:Dge,Z_DEFAULT_STRATEGY:Age,Z_UNKNOWN:Rge,Z_DEFLATED:Ab}=Ru,Fge=9,Nge=15,Lge=8,Vge=29,Bge=256,i4=Bge+1+Vge,Uge=30,jge=19,Wge=2*i4+1,zge=15,gi=3,d0=258,dc=d0+gi+1,qge=32,Iu=42,u4=57,r4=69,o4=73,a4=91,s4=103,Lp=113,n_=666,Oa=1,Fu=2,Up=3,Nu=4,Hge=3,Vp=(n,t)=>(n.msg=Bp[t],t),sN=n=>n*2-(n>4?9:0),c0=n=>{let t=n.length;for(;--t>=0;)n[t]=0},Gge=n=>{let t,e,i,r=n.w_size;t=n.hash_size,i=t;do e=n.head[--i],n.head[i]=e>=r?e-r:0;while(--t);t=r,i=t;do e=n.prev[--i],n.prev[i]=e>=r?e-r:0;while(--t)},$ge=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,u0=$ge,hs=n=>{let t=n.state,e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},_s=(n,t)=>{Sge(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,hs(n.strm)},Fi=(n,t)=>{n.pending_buf[n.pending++]=t},t_=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},l4=(n,t,e,i)=>{let r=n.avail_in;return r>i&&(r=i),r===0?0:(n.avail_in-=r,t.set(n.input.subarray(n.next_in,n.next_in+r),e),n.state.wrap===1?n.adler=p_(n.adler,t,r,e):n.state.wrap===2&&(n.adler=wo(n.adler,t,r,e)),n.next_in+=r,n.total_in+=r,r)},ZN=(n,t)=>{let e=n.max_chain_length,i=n.strstart,r,s,d=n.prev_length,u=n.nice_match,h=n.strstart>n.w_size-dc?n.strstart-(n.w_size-dc):0,v=n.window,C=n.w_mask,O=n.prev,T=n.strstart+d0,w=v[i+d-1],A=v[i+d];n.prev_length>=n.good_match&&(e>>=2),u>n.lookahead&&(u=n.lookahead);do if(r=t,!(v[r+d]!==A||v[r+d-1]!==w||v[r]!==v[i]||v[++r]!==v[i+1])){i+=2,r++;do;while(v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&v[++i]===v[++r]&&i<T);if(s=d0-(T-i),i=T-d0,s>d){if(n.match_start=t,d=s,s>=u)break;w=v[i+d-1],A=v[i+d]}}while((t=O[t&C])>h&&--e!==0);return d<=n.lookahead?d:n.lookahead},Du=n=>{let t=n.w_size,e,i,r;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-dc)&&(n.window.set(n.window.subarray(t,t+t-i),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,n.insert>n.strstart&&(n.insert=n.strstart),Gge(n),i+=t),n.strm.avail_in===0)break;if(e=l4(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=e,n.lookahead+n.insert>=gi)for(r=n.strstart-n.insert,n.ins_h=n.window[r],n.ins_h=u0(n,n.ins_h,n.window[r+1]);n.insert&&(n.ins_h=u0(n,n.ins_h,n.window[r+gi-1]),n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,n.insert--,!(n.lookahead+n.insert<gi)););}while(n.lookahead<dc&&n.strm.avail_in!==0)},e9=(n,t)=>{let e=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,r,s,d=0,u=n.strm.avail_in;do{if(i=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,r=n.strstart-n.block_start,i>r+n.strm.avail_in&&(i=r+n.strm.avail_in),i>s&&(i=s),i<e&&(i===0&&t!==js||t===m0||i!==r+n.strm.avail_in)))break;d=t===js&&i===r+n.strm.avail_in?1:0,n4(n,0,0,d),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,hs(n.strm),r&&(r>i&&(r=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+r),n.strm.next_out),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r,n.block_start+=r,i-=r),i&&(l4(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(d===0);return u-=n.strm.avail_in,u&&(u>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=u&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-u,n.strm.next_in),n.strstart),n.strstart+=u,n.insert+=u>n.w_size-n.insert?n.w_size-n.insert:u),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),d?Nu:t!==m0&&t!==js&&n.strm.avail_in===0&&n.strstart===n.block_start?Fu:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(l4(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,e=s>n.w_size?n.w_size:s,r=n.strstart-n.block_start,(r>=e||(r||t===js)&&t!==m0&&n.strm.avail_in===0&&r<=s)&&(i=r>s?s:r,d=t===js&&n.strm.avail_in===0&&i===r?1:0,n4(n,n.block_start,i,d),n.block_start+=i,hs(n.strm)),d?Up:Oa)},HO=(n,t)=>{let e,i;for(;;){if(n.lookahead<dc){if(Du(n),n.lookahead<dc&&t===m0)return Oa;if(n.lookahead===0)break}if(e=0,n.lookahead>=gi&&(n.ins_h=u0(n,n.ins_h,n.window[n.strstart+gi-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-dc&&(n.match_length=ZN(n,e)),n.match_length>=gi)if(i=p0(n,n.strstart-n.match_start,n.match_length-gi),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=gi){n.match_length--;do n.strstart++,n.ins_h=u0(n,n.ins_h,n.window[n.strstart+gi-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=u0(n,n.ins_h,n.window[n.strstart+1]);else i=p0(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(_s(n,!1),n.strm.avail_out===0))return Oa}return n.insert=n.strstart<gi-1?n.strstart:gi-1,t===js?(_s(n,!0),n.strm.avail_out===0?Up:Nu):n.sym_next&&(_s(n,!1),n.strm.avail_out===0)?Oa:Fu},Ou=(n,t)=>{let e,i,r;for(;;){if(n.lookahead<dc){if(Du(n),n.lookahead<dc&&t===m0)return Oa;if(n.lookahead===0)break}if(e=0,n.lookahead>=gi&&(n.ins_h=u0(n,n.ins_h,n.window[n.strstart+gi-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=gi-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-dc&&(n.match_length=ZN(n,e),n.match_length<=5&&(n.strategy===kge||n.match_length===gi&&n.strstart-n.match_start>4096)&&(n.match_length=gi-1)),n.prev_length>=gi&&n.match_length<=n.prev_length){r=n.strstart+n.lookahead-gi,i=p0(n,n.strstart-1-n.prev_match,n.prev_length-gi),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=r&&(n.ins_h=u0(n,n.ins_h,n.window[n.strstart+gi-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=gi-1,n.strstart++,i&&(_s(n,!1),n.strm.avail_out===0))return Oa}else if(n.match_available){if(i=p0(n,0,n.window[n.strstart-1]),i&&_s(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Oa}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=p0(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<gi-1?n.strstart:gi-1,t===js?(_s(n,!0),n.strm.avail_out===0?Up:Nu):n.sym_next&&(_s(n,!1),n.strm.avail_out===0)?Oa:Fu},Yge=(n,t)=>{let e,i,r,s,d=n.window;for(;;){if(n.lookahead<=d0){if(Du(n),n.lookahead<=d0&&t===m0)return Oa;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=gi&&n.strstart>0&&(r=n.strstart-1,i=d[r],i===d[++r]&&i===d[++r]&&i===d[++r])){s=n.strstart+d0;do;while(i===d[++r]&&i===d[++r]&&i===d[++r]&&i===d[++r]&&i===d[++r]&&i===d[++r]&&i===d[++r]&&i===d[++r]&&r<s);n.match_length=d0-(s-r),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=gi?(e=p0(n,1,n.match_length-gi),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=p0(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(_s(n,!1),n.strm.avail_out===0))return Oa}return n.insert=0,t===js?(_s(n,!0),n.strm.avail_out===0?Up:Nu):n.sym_next&&(_s(n,!1),n.strm.avail_out===0)?Oa:Fu},Jge=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(Du(n),n.lookahead===0)){if(t===m0)return Oa;break}if(n.match_length=0,e=p0(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(_s(n,!1),n.strm.avail_out===0))return Oa}return n.insert=0,t===js?(_s(n,!0),n.strm.avail_out===0?Up:Nu):n.sym_next&&(_s(n,!1),n.strm.avail_out===0)?Oa:Fu};function sc(n,t,e,i,r){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=i,this.func=r}var i_=[new sc(0,0,0,0,e9),new sc(4,4,8,4,HO),new sc(4,5,16,8,HO),new sc(4,6,32,32,HO),new sc(4,4,16,16,Ou),new sc(8,16,32,32,Ou),new sc(8,16,128,128,Ou),new sc(8,32,128,256,Ou),new sc(32,128,258,1024,Ou),new sc(32,258,258,4096,Ou)],Kge=n=>{n.window_size=2*n.w_size,c0(n.head),n.max_lazy_match=i_[n.level].max_lazy,n.good_match=i_[n.level].good_length,n.nice_match=i_[n.level].nice_length,n.max_chain_length=i_[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=gi-1,n.match_available=0,n.ins_h=0};function Qge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ab,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Wge*2),this.dyn_dtree=new Uint16Array((2*Uge+1)*2),this.bl_tree=new Uint16Array((2*jge+1)*2),c0(this.dyn_ltree),c0(this.dyn_dtree),c0(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(zge+1),this.heap=new Uint16Array(2*i4+1),c0(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*i4+1),c0(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var h_=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.status!==Iu&&t.status!==u4&&t.status!==r4&&t.status!==o4&&t.status!==a4&&t.status!==s4&&t.status!==Lp&&t.status!==n_?1:0},t9=n=>{if(h_(n))return Vp(n,cc);n.total_in=n.total_out=0,n.data_type=Rge;let t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?u4:t.wrap?Iu:Lp,n.adler=t.wrap===2?0:1,t.last_flush=-2,Mge(t),$o},n9=n=>{let t=t9(n);return t===$o&&Kge(n.state),t},Xge=(n,t)=>h_(n)||n.state.wrap!==2?cc:(n.state.gzhead=t,$o),i9=(n,t,e,i,r,s)=>{if(!n)return cc;let d=1;if(t===Tge&&(t=6),i<0?(d=0,i=-i):i>15&&(d=2,i-=16),r<1||r>Fge||e!==Ab||i<8||i>15||t<0||t>9||s<0||s>Dge||i===8&&d!==1)return Vp(n,cc);i===8&&(i=9);let u=new Qge;return n.state=u,u.strm=n,u.status=Iu,u.wrap=d,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=r+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+gi-1)/gi),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<r+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=t,u.strategy=s,u.method=e,n9(n)},Zge=(n,t)=>i9(n,t,Ab,Nge,Lge,Age),efe=(n,t)=>{if(h_(n)||t>oN||t<0)return n?Vp(n,cc):cc;let e=n.state;if(!n.output||n.avail_in!==0&&!n.input||e.status===n_&&t!==js)return Vp(n,n.avail_out===0?qO:cc);let i=e.last_flush;if(e.last_flush=t,e.pending!==0){if(hs(n),n.avail_out===0)return e.last_flush=-1,$o}else if(n.avail_in===0&&sN(t)<=sN(i)&&t!==js)return Vp(n,qO);if(e.status===n_&&n.avail_in!==0)return Vp(n,qO);if(e.status===Iu&&e.wrap===0&&(e.status=Lp),e.status===Iu){let r=Ab+(e.w_bits-8<<4)<<8,s=-1;if(e.strategy>=Sb||e.level<2?s=0:e.level<6?s=1:e.level===6?s=2:s=3,r|=s<<6,e.strstart!==0&&(r|=qge),r+=31-r%31,t_(e,r),e.strstart!==0&&(t_(e,n.adler>>>16),t_(e,n.adler&65535)),n.adler=1,e.status=Lp,hs(n),e.pending!==0)return e.last_flush=-1,$o}if(e.status===u4){if(n.adler=0,Fi(e,31),Fi(e,139),Fi(e,8),e.gzhead)Fi(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Fi(e,e.gzhead.time&255),Fi(e,e.gzhead.time>>8&255),Fi(e,e.gzhead.time>>16&255),Fi(e,e.gzhead.time>>24&255),Fi(e,e.level===9?2:e.strategy>=Sb||e.level<2?4:0),Fi(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(Fi(e,e.gzhead.extra.length&255),Fi(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(n.adler=wo(n.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=r4;else if(Fi(e,0),Fi(e,0),Fi(e,0),Fi(e,0),Fi(e,0),Fi(e,e.level===9?2:e.strategy>=Sb||e.level<2?4:0),Fi(e,Hge),e.status=Lp,hs(n),e.pending!==0)return e.last_flush=-1,$o}if(e.status===r4){if(e.gzhead.extra){let r=e.pending,s=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+s>e.pending_buf_size;){let u=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+u),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex+=u,hs(n),e.pending!==0)return e.last_flush=-1,$o;r=0,s-=u}let d=new Uint8Array(e.gzhead.extra);e.pending_buf.set(d.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending+=s,e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=o4}if(e.status===o4){if(e.gzhead.name){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r)),hs(n),e.pending!==0)return e.last_flush=-1,$o;r=0}e.gzindex<e.gzhead.name.length?s=e.gzhead.name.charCodeAt(e.gzindex++)&255:s=0,Fi(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=a4}if(e.status===a4){if(e.gzhead.comment){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r)),hs(n),e.pending!==0)return e.last_flush=-1,$o;r=0}e.gzindex<e.gzhead.comment.length?s=e.gzhead.comment.charCodeAt(e.gzindex++)&255:s=0,Fi(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=wo(n.adler,e.pending_buf,e.pending-r,r))}e.status=s4}if(e.status===s4){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(hs(n),e.pending!==0))return e.last_flush=-1,$o;Fi(e,n.adler&255),Fi(e,n.adler>>8&255),n.adler=0}if(e.status=Lp,hs(n),e.pending!==0)return e.last_flush=-1,$o}if(n.avail_in!==0||e.lookahead!==0||t!==m0&&e.status!==n_){let r=e.level===0?e9(e,t):e.strategy===Sb?Jge(e,t):e.strategy===Ige?Yge(e,t):i_[e.level].func(e,t);if((r===Up||r===Nu)&&(e.status=n_),r===Oa||r===Up)return n.avail_out===0&&(e.last_flush=-1),$o;if(r===Fu&&(t===wge?Pge(e):t!==oN&&(n4(e,0,0,!1),t===Ege&&(c0(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),hs(n),n.avail_out===0))return e.last_flush=-1,$o}return t!==js?$o:e.wrap<=0?aN:(e.wrap===2?(Fi(e,n.adler&255),Fi(e,n.adler>>8&255),Fi(e,n.adler>>16&255),Fi(e,n.adler>>24&255),Fi(e,n.total_in&255),Fi(e,n.total_in>>8&255),Fi(e,n.total_in>>16&255),Fi(e,n.total_in>>24&255)):(t_(e,n.adler>>>16),t_(e,n.adler&65535)),hs(n),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?$o:aN)},tfe=n=>{if(h_(n))return cc;let t=n.state.status;return n.state=null,t===Lp?Vp(n,Oge):$o},nfe=(n,t)=>{let e=t.length;if(h_(n))return cc;let i=n.state,r=i.wrap;if(r===2||r===1&&i.status!==Iu||i.lookahead)return cc;if(r===1&&(n.adler=p_(n.adler,t,e,0)),i.wrap=0,e>=i.w_size){r===0&&(c0(i.head),i.strstart=0,i.block_start=0,i.insert=0);let h=new Uint8Array(i.w_size);h.set(t.subarray(e-i.w_size,e),0),t=h,e=i.w_size}let s=n.avail_in,d=n.next_in,u=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,Du(i);i.lookahead>=gi;){let h=i.strstart,v=i.lookahead-(gi-1);do i.ins_h=u0(i,i.ins_h,i.window[h+gi-1]),i.prev[h&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=h,h++;while(--v);i.strstart=h,i.lookahead=gi-1,Du(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=gi-1,i.match_available=0,n.next_in=d,n.input=u,n.avail_in=s,i.wrap=r,$o},ife=Zge,rfe=i9,ofe=n9,afe=t9,sfe=Xge,lfe=efe,cfe=tfe,dfe=nfe,pfe="pako deflate (from Nodeca project)",o_={deflateInit:ife,deflateInit2:rfe,deflateReset:ofe,deflateResetKeep:afe,deflateSetHeader:sfe,deflate:lfe,deflateEnd:cfe,deflateSetDictionary:dfe,deflateInfo:pfe},mfe=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),ufe=function(n){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let i in e)mfe(e,i)&&(n[i]=e[i])}}return n},gfe=n=>{let t=0;for(let i=0,r=n.length;i<r;i++)t+=n[i].length;let e=new Uint8Array(t);for(let i=0,r=0,s=n.length;i<s;i++){let d=n[i];e.set(d,r),r+=d.length}return e},Rb={assign:ufe,flattenChunks:gfe},r9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r9=!1}var m_=new Uint8Array(256);for(let n=0;n<256;n++)m_[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;m_[254]=m_[254]=1;var ffe=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,r,s,d=n.length,u=0;for(r=0;r<d;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<d&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),u+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(u),s=0,r=0;s<u;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<d&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t},hfe=(n,t)=>{if(t<65534&&n.subarray&&r9)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e},_fe=(n,t)=>{let e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,r,s=new Array(e*2);for(r=0,i=0;i<e;){let d=n[i++];if(d<128){s[r++]=d;continue}let u=m_[d];if(u>4){s[r++]=65533,i+=u-1;continue}for(d&=u===2?31:u===3?15:7;u>1&&i<e;)d=d<<6|n[i++]&63,u--;if(u>1){s[r++]=65533;continue}d<65536?s[r++]=d:(d-=65536,s[r++]=55296|d>>10&1023,s[r++]=56320|d&1023)}return hfe(s,r)},vfe=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+m_[n[e]]>t?e:t},u_={string2buf:ffe,buf2string:_fe,utf8border:vfe};function xfe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var o9=xfe,a9=Object.prototype.toString,{Z_NO_FLUSH:yfe,Z_SYNC_FLUSH:Cfe,Z_FULL_FLUSH:bfe,Z_FINISH:Mfe,Z_OK:Ib,Z_STREAM_END:Sfe,Z_DEFAULT_COMPRESSION:Pfe,Z_DEFAULT_STRATEGY:wfe,Z_DEFLATED:Efe}=Ru;function __(n){this.options=Rb.assign({level:Pfe,method:Efe,chunkSize:16384,windowBits:15,memLevel:8,strategy:wfe},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o9,this.strm.avail_out=0;let e=o_.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Ib)throw new Error(Bp[e]);if(t.header&&o_.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=u_.string2buf(t.dictionary):a9.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,e=o_.deflateSetDictionary(this.strm,i),e!==Ib)throw new Error(Bp[e]);this._dict_set=!0}}__.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Mfe:yfe,typeof n=="string"?e.input=u_.string2buf(n):a9.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),(s===Cfe||s===bfe)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(r=o_.deflate(e,s),r===Sfe)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),r=o_.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ib;if(e.avail_out===0){this.onData(e.output);continue}if(s>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};__.prototype.onData=function(n){this.chunks.push(n)};__.prototype.onEnd=function(n){n===Ib&&(this.result=Rb.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function g4(n,t){let e=new __(t);if(e.push(n,!0),e.err)throw e.msg||Bp[e.err];return e.result}function Ofe(n,t){return t=t||{},t.raw=!0,g4(n,t)}function Tfe(n,t){return t=t||{},t.gzip=!0,g4(n,t)}var kfe=__,Ife=g4,Dfe=Ofe,Afe=Tfe,Rfe=Ru,Ffe={Deflate:kfe,deflate:Ife,deflateRaw:Dfe,gzip:Afe,constants:Rfe},Pb=16209,Nfe=16191,Lfe=function(t,e){let i,r,s,d,u,h,v,C,O,T,w,A,I,L,B,q,K,J,Me,ze,oe,ae,X,pe,z=t.state;i=t.next_in,X=t.input,r=i+(t.avail_in-5),s=t.next_out,pe=t.output,d=s-(e-t.avail_out),u=s+(t.avail_out-257),h=z.dmax,v=z.wsize,C=z.whave,O=z.wnext,T=z.window,w=z.hold,A=z.bits,I=z.lencode,L=z.distcode,B=(1<<z.lenbits)-1,q=(1<<z.distbits)-1;e:do{A<15&&(w+=X[i++]<<A,A+=8,w+=X[i++]<<A,A+=8),K=I[w&B];t:for(;;){if(J=K>>>24,w>>>=J,A-=J,J=K>>>16&255,J===0)pe[s++]=K&65535;else if(J&16){Me=K&65535,J&=15,J&&(A<J&&(w+=X[i++]<<A,A+=8),Me+=w&(1<<J)-1,w>>>=J,A-=J),A<15&&(w+=X[i++]<<A,A+=8,w+=X[i++]<<A,A+=8),K=L[w&q];n:for(;;){if(J=K>>>24,w>>>=J,A-=J,J=K>>>16&255,J&16){if(ze=K&65535,J&=15,A<J&&(w+=X[i++]<<A,A+=8,A<J&&(w+=X[i++]<<A,A+=8)),ze+=w&(1<<J)-1,ze>h){t.msg="invalid distance too far back",z.mode=Pb;break e}if(w>>>=J,A-=J,J=s-d,ze>J){if(J=ze-J,J>C&&z.sane){t.msg="invalid distance too far back",z.mode=Pb;break e}if(oe=0,ae=T,O===0){if(oe+=v-J,J<Me){Me-=J;do pe[s++]=T[oe++];while(--J);oe=s-ze,ae=pe}}else if(O<J){if(oe+=v+O-J,J-=O,J<Me){Me-=J;do pe[s++]=T[oe++];while(--J);if(oe=0,O<Me){J=O,Me-=J;do pe[s++]=T[oe++];while(--J);oe=s-ze,ae=pe}}}else if(oe+=O-J,J<Me){Me-=J;do pe[s++]=T[oe++];while(--J);oe=s-ze,ae=pe}for(;Me>2;)pe[s++]=ae[oe++],pe[s++]=ae[oe++],pe[s++]=ae[oe++],Me-=3;Me&&(pe[s++]=ae[oe++],Me>1&&(pe[s++]=ae[oe++]))}else{oe=s-ze;do pe[s++]=pe[oe++],pe[s++]=pe[oe++],pe[s++]=pe[oe++],Me-=3;while(Me>2);Me&&(pe[s++]=pe[oe++],Me>1&&(pe[s++]=pe[oe++]))}}else if((J&64)===0){K=L[(K&65535)+(w&(1<<J)-1)];continue n}else{t.msg="invalid distance code",z.mode=Pb;break e}break}}else if((J&64)===0){K=I[(K&65535)+(w&(1<<J)-1)];continue t}else if(J&32){z.mode=Nfe;break e}else{t.msg="invalid literal/length code",z.mode=Pb;break e}break}}while(i<r&&s<u);Me=A>>3,i-=Me,A-=Me<<3,w&=(1<<A)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<u?257+(u-s):257-(s-u),z.hold=w,z.bits=A},Tu=15,lN=852,cN=592,dN=0,GO=1,pN=2,Vfe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Bfe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ufe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jfe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Wfe=(n,t,e,i,r,s,d,u)=>{let h=u.bits,v=0,C=0,O=0,T=0,w=0,A=0,I=0,L=0,B=0,q=0,K,J,Me,ze,oe,ae=null,X,pe=new Uint16Array(Tu+1),z=new Uint16Array(Tu+1),Z=null,ge,Pe,Ve;for(v=0;v<=Tu;v++)pe[v]=0;for(C=0;C<i;C++)pe[t[e+C]]++;for(w=h,T=Tu;T>=1&&pe[T]===0;T--);if(w>T&&(w=T),T===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,u.bits=1,0;for(O=1;O<T&&pe[O]===0;O++);for(w<O&&(w=O),L=1,v=1;v<=Tu;v++)if(L<<=1,L-=pe[v],L<0)return-1;if(L>0&&(n===dN||T!==1))return-1;for(z[1]=0,v=1;v<Tu;v++)z[v+1]=z[v]+pe[v];for(C=0;C<i;C++)t[e+C]!==0&&(d[z[t[e+C]]++]=C);if(n===dN?(ae=Z=d,X=20):n===GO?(ae=Vfe,Z=Bfe,X=257):(ae=Ufe,Z=jfe,X=0),q=0,C=0,v=O,oe=s,A=w,I=0,Me=-1,B=1<<w,ze=B-1,n===GO&&B>lN||n===pN&&B>cN)return 1;for(;;){ge=v-I,d[C]+1<X?(Pe=0,Ve=d[C]):d[C]>=X?(Pe=Z[d[C]-X],Ve=ae[d[C]-X]):(Pe=96,Ve=0),K=1<<v-I,J=1<<A,O=J;do J-=K,r[oe+(q>>I)+J]=ge<<24|Pe<<16|Ve|0;while(J!==0);for(K=1<<v-1;q&K;)K>>=1;if(K!==0?(q&=K-1,q+=K):q=0,C++,--pe[v]===0){if(v===T)break;v=t[e+d[C]]}if(v>w&&(q&ze)!==Me){for(I===0&&(I=w),oe+=O,A=v-I,L=1<<A;A+I<T&&(L-=pe[A+I],!(L<=0));)A++,L<<=1;if(B+=1<<A,n===GO&&B>lN||n===pN&&B>cN)return 1;Me=q&ze,r[Me]=w<<24|A<<16|oe-s|0}}return q!==0&&(r[oe+q]=v-I<<24|64<<16|0),u.bits=w,0},a_=Wfe,zfe=0,s9=1,l9=2,{Z_FINISH:mN,Z_BLOCK:qfe,Z_TREES:wb,Z_OK:jp,Z_STREAM_END:Hfe,Z_NEED_DICT:Gfe,Z_STREAM_ERROR:Ws,Z_DATA_ERROR:c9,Z_MEM_ERROR:d9,Z_BUF_ERROR:$fe,Z_DEFLATED:uN}=Ru,Fb=16180,gN=16181,fN=16182,hN=16183,_N=16184,vN=16185,xN=16186,yN=16187,CN=16188,bN=16189,Db=16190,rd=16191,$O=16192,MN=16193,YO=16194,SN=16195,PN=16196,wN=16197,EN=16198,Eb=16199,Ob=16200,ON=16201,TN=16202,kN=16203,IN=16204,DN=16205,JO=16206,AN=16207,RN=16208,br=16209,p9=16210,m9=16211,Yfe=852,Jfe=592,Kfe=15,Qfe=Kfe,FN=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Xfe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Wp=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.mode<Fb||t.mode>m9?1:0},u9=n=>{if(Wp(n))return Ws;let t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=Fb,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Yfe),t.distcode=t.distdyn=new Int32Array(Jfe),t.sane=1,t.back=-1,jp},g9=n=>{if(Wp(n))return Ws;let t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,u9(n)},f9=(n,t)=>{let e;if(Wp(n))return Ws;let i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ws:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,g9(n))},h9=(n,t)=>{if(!n)return Ws;let e=new Xfe;n.state=e,e.strm=n,e.window=null,e.mode=Fb;let i=f9(n,t);return i!==jp&&(n.state=null),i},Zfe=n=>h9(n,Qfe),NN=!0,KO,QO,ehe=n=>{if(NN){KO=new Int32Array(512),QO=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(a_(s9,n.lens,0,288,KO,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;a_(l9,n.lens,0,32,QO,0,n.work,{bits:5}),NN=!1}n.lencode=KO,n.lenbits=9,n.distcode=QO,n.distbits=5},_9=(n,t,e,i)=>{let r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(e-i,e-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(e-i,e),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},the=(n,t)=>{let e,i,r,s,d,u,h,v,C,O,T,w,A,I,L=0,B,q,K,J,Me,ze,oe,ae,X=new Uint8Array(4),pe,z,Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wp(n)||!n.output||!n.input&&n.avail_in!==0)return Ws;e=n.state,e.mode===rd&&(e.mode=$O),d=n.next_out,r=n.output,h=n.avail_out,s=n.next_in,i=n.input,u=n.avail_in,v=e.hold,C=e.bits,O=u,T=h,ae=jp;e:for(;;)switch(e.mode){case Fb:if(e.wrap===0){e.mode=$O;break}for(;C<16;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(e.wrap&2&&v===35615){e.wbits===0&&(e.wbits=15),e.check=0,X[0]=v&255,X[1]=v>>>8&255,e.check=wo(e.check,X,2,0),v=0,C=0,e.mode=gN;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((v&255)<<8)+(v>>8))%31){n.msg="incorrect header check",e.mode=br;break}if((v&15)!==uN){n.msg="unknown compression method",e.mode=br;break}if(v>>>=4,C-=4,oe=(v&15)+8,e.wbits===0&&(e.wbits=oe),oe>15||oe>e.wbits){n.msg="invalid window size",e.mode=br;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=v&512?bN:rd,v=0,C=0;break;case gN:for(;C<16;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(e.flags=v,(e.flags&255)!==uN){n.msg="unknown compression method",e.mode=br;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=br;break}e.head&&(e.head.text=v>>8&1),e.flags&512&&e.wrap&4&&(X[0]=v&255,X[1]=v>>>8&255,e.check=wo(e.check,X,2,0)),v=0,C=0,e.mode=fN;case fN:for(;C<32;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.head&&(e.head.time=v),e.flags&512&&e.wrap&4&&(X[0]=v&255,X[1]=v>>>8&255,X[2]=v>>>16&255,X[3]=v>>>24&255,e.check=wo(e.check,X,4,0)),v=0,C=0,e.mode=hN;case hN:for(;C<16;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.head&&(e.head.xflags=v&255,e.head.os=v>>8),e.flags&512&&e.wrap&4&&(X[0]=v&255,X[1]=v>>>8&255,e.check=wo(e.check,X,2,0)),v=0,C=0,e.mode=_N;case _N:if(e.flags&1024){for(;C<16;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.length=v,e.head&&(e.head.extra_len=v),e.flags&512&&e.wrap&4&&(X[0]=v&255,X[1]=v>>>8&255,e.check=wo(e.check,X,2,0)),v=0,C=0}else e.head&&(e.head.extra=null);e.mode=vN;case vN:if(e.flags&1024&&(w=e.length,w>u&&(w=u),w&&(e.head&&(oe=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(s,s+w),oe)),e.flags&512&&e.wrap&4&&(e.check=wo(e.check,i,w,s)),u-=w,s+=w,e.length-=w),e.length))break e;e.length=0,e.mode=xN;case xN:if(e.flags&2048){if(u===0)break e;w=0;do oe=i[s+w++],e.head&&oe&&e.length<65536&&(e.head.name+=String.fromCharCode(oe));while(oe&&w<u);if(e.flags&512&&e.wrap&4&&(e.check=wo(e.check,i,w,s)),u-=w,s+=w,oe)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=yN;case yN:if(e.flags&4096){if(u===0)break e;w=0;do oe=i[s+w++],e.head&&oe&&e.length<65536&&(e.head.comment+=String.fromCharCode(oe));while(oe&&w<u);if(e.flags&512&&e.wrap&4&&(e.check=wo(e.check,i,w,s)),u-=w,s+=w,oe)break e}else e.head&&(e.head.comment=null);e.mode=CN;case CN:if(e.flags&512){for(;C<16;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(e.wrap&4&&v!==(e.check&65535)){n.msg="header crc mismatch",e.mode=br;break}v=0,C=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=rd;break;case bN:for(;C<32;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}n.adler=e.check=FN(v),v=0,C=0,e.mode=Db;case Db:if(e.havedict===0)return n.next_out=d,n.avail_out=h,n.next_in=s,n.avail_in=u,e.hold=v,e.bits=C,Gfe;n.adler=e.check=1,e.mode=rd;case rd:if(t===qfe||t===wb)break e;case $O:if(e.last){v>>>=C&7,C-=C&7,e.mode=JO;break}for(;C<3;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}switch(e.last=v&1,v>>>=1,C-=1,v&3){case 0:e.mode=MN;break;case 1:if(ehe(e),e.mode=Eb,t===wb){v>>>=2,C-=2;break e}break;case 2:e.mode=PN;break;case 3:n.msg="invalid block type",e.mode=br}v>>>=2,C-=2;break;case MN:for(v>>>=C&7,C-=C&7;C<32;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if((v&65535)!==(v>>>16^65535)){n.msg="invalid stored block lengths",e.mode=br;break}if(e.length=v&65535,v=0,C=0,e.mode=YO,t===wb)break e;case YO:e.mode=SN;case SN:if(w=e.length,w){if(w>u&&(w=u),w>h&&(w=h),w===0)break e;r.set(i.subarray(s,s+w),d),u-=w,s+=w,h-=w,d+=w,e.length-=w;break}e.mode=rd;break;case PN:for(;C<14;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(e.nlen=(v&31)+257,v>>>=5,C-=5,e.ndist=(v&31)+1,v>>>=5,C-=5,e.ncode=(v&15)+4,v>>>=4,C-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=br;break}e.have=0,e.mode=wN;case wN:for(;e.have<e.ncode;){for(;C<3;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.lens[Z[e.have++]]=v&7,v>>>=3,C-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,pe={bits:e.lenbits},ae=a_(zfe,e.lens,0,19,e.lencode,0,e.work,pe),e.lenbits=pe.bits,ae){n.msg="invalid code lengths set",e.mode=br;break}e.have=0,e.mode=EN;case EN:for(;e.have<e.nlen+e.ndist;){for(;L=e.lencode[v&(1<<e.lenbits)-1],B=L>>>24,q=L>>>16&255,K=L&65535,!(B<=C);){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(K<16)v>>>=B,C-=B,e.lens[e.have++]=K;else{if(K===16){for(z=B+2;C<z;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(v>>>=B,C-=B,e.have===0){n.msg="invalid bit length repeat",e.mode=br;break}oe=e.lens[e.have-1],w=3+(v&3),v>>>=2,C-=2}else if(K===17){for(z=B+3;C<z;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}v>>>=B,C-=B,oe=0,w=3+(v&7),v>>>=3,C-=3}else{for(z=B+7;C<z;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}v>>>=B,C-=B,oe=0,w=11+(v&127),v>>>=7,C-=7}if(e.have+w>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=br;break}for(;w--;)e.lens[e.have++]=oe}}if(e.mode===br)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=br;break}if(e.lenbits=9,pe={bits:e.lenbits},ae=a_(s9,e.lens,0,e.nlen,e.lencode,0,e.work,pe),e.lenbits=pe.bits,ae){n.msg="invalid literal/lengths set",e.mode=br;break}if(e.distbits=6,e.distcode=e.distdyn,pe={bits:e.distbits},ae=a_(l9,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,pe),e.distbits=pe.bits,ae){n.msg="invalid distances set",e.mode=br;break}if(e.mode=Eb,t===wb)break e;case Eb:e.mode=Ob;case Ob:if(u>=6&&h>=258){n.next_out=d,n.avail_out=h,n.next_in=s,n.avail_in=u,e.hold=v,e.bits=C,Lfe(n,T),d=n.next_out,r=n.output,h=n.avail_out,s=n.next_in,i=n.input,u=n.avail_in,v=e.hold,C=e.bits,e.mode===rd&&(e.back=-1);break}for(e.back=0;L=e.lencode[v&(1<<e.lenbits)-1],B=L>>>24,q=L>>>16&255,K=L&65535,!(B<=C);){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(q&&(q&240)===0){for(J=B,Me=q,ze=K;L=e.lencode[ze+((v&(1<<J+Me)-1)>>J)],B=L>>>24,q=L>>>16&255,K=L&65535,!(J+B<=C);){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}v>>>=J,C-=J,e.back+=J}if(v>>>=B,C-=B,e.back+=B,e.length=K,q===0){e.mode=DN;break}if(q&32){e.back=-1,e.mode=rd;break}if(q&64){n.msg="invalid literal/length code",e.mode=br;break}e.extra=q&15,e.mode=ON;case ON:if(e.extra){for(z=e.extra;C<z;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.length+=v&(1<<e.extra)-1,v>>>=e.extra,C-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=TN;case TN:for(;L=e.distcode[v&(1<<e.distbits)-1],B=L>>>24,q=L>>>16&255,K=L&65535,!(B<=C);){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if((q&240)===0){for(J=B,Me=q,ze=K;L=e.distcode[ze+((v&(1<<J+Me)-1)>>J)],B=L>>>24,q=L>>>16&255,K=L&65535,!(J+B<=C);){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}v>>>=J,C-=J,e.back+=J}if(v>>>=B,C-=B,e.back+=B,q&64){n.msg="invalid distance code",e.mode=br;break}e.offset=K,e.extra=q&15,e.mode=kN;case kN:if(e.extra){for(z=e.extra;C<z;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}e.offset+=v&(1<<e.extra)-1,v>>>=e.extra,C-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=br;break}e.mode=IN;case IN:if(h===0)break e;if(w=T-h,e.offset>w){if(w=e.offset-w,w>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=br;break}w>e.wnext?(w-=e.wnext,A=e.wsize-w):A=e.wnext-w,w>e.length&&(w=e.length),I=e.window}else I=r,A=d-e.offset,w=e.length;w>h&&(w=h),h-=w,e.length-=w;do r[d++]=I[A++];while(--w);e.length===0&&(e.mode=Ob);break;case DN:if(h===0)break e;r[d++]=e.length,h--,e.mode=Ob;break;case JO:if(e.wrap){for(;C<32;){if(u===0)break e;u--,v|=i[s++]<<C,C+=8}if(T-=h,n.total_out+=T,e.total+=T,e.wrap&4&&T&&(n.adler=e.check=e.flags?wo(e.check,r,T,d-T):p_(e.check,r,T,d-T)),T=h,e.wrap&4&&(e.flags?v:FN(v))!==e.check){n.msg="incorrect data check",e.mode=br;break}v=0,C=0}e.mode=AN;case AN:if(e.wrap&&e.flags){for(;C<32;){if(u===0)break e;u--,v+=i[s++]<<C,C+=8}if(e.wrap&4&&v!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=br;break}v=0,C=0}e.mode=RN;case RN:ae=Hfe;break e;case br:ae=c9;break e;case p9:return d9;case m9:default:return Ws}return n.next_out=d,n.avail_out=h,n.next_in=s,n.avail_in=u,e.hold=v,e.bits=C,(e.wsize||T!==n.avail_out&&e.mode<br&&(e.mode<JO||t!==mN))&&_9(n,n.output,n.next_out,T-n.avail_out),O-=n.avail_in,T-=n.avail_out,n.total_in+=O,n.total_out+=T,e.total+=T,e.wrap&4&&T&&(n.adler=e.check=e.flags?wo(e.check,r,T,n.next_out-T):p_(e.check,r,T,n.next_out-T)),n.data_type=e.bits+(e.last?64:0)+(e.mode===rd?128:0)+(e.mode===Eb||e.mode===YO?256:0),(O===0&&T===0||t===mN)&&ae===jp&&(ae=$fe),ae},nhe=n=>{if(Wp(n))return Ws;let t=n.state;return t.window&&(t.window=null),n.state=null,jp},ihe=(n,t)=>{if(Wp(n))return Ws;let e=n.state;return(e.wrap&2)===0?Ws:(e.head=t,t.done=!1,jp)},rhe=(n,t)=>{let e=t.length,i,r,s;return Wp(n)||(i=n.state,i.wrap!==0&&i.mode!==Db)?Ws:i.mode===Db&&(r=1,r=p_(r,t,e,0),r!==i.check)?c9:(s=_9(n,t,e,e),s?(i.mode=p9,d9):(i.havedict=1,jp))},ohe=g9,ahe=f9,she=u9,lhe=Zfe,che=h9,dhe=the,phe=nhe,mhe=ihe,uhe=rhe,ghe="pako inflate (from Nodeca project)",ad={inflateReset:ohe,inflateReset2:ahe,inflateResetKeep:she,inflateInit:lhe,inflateInit2:che,inflate:dhe,inflateEnd:phe,inflateGetHeader:mhe,inflateSetDictionary:uhe,inflateInfo:ghe};function fhe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hhe=fhe,v9=Object.prototype.toString,{Z_NO_FLUSH:_he,Z_FINISH:vhe,Z_OK:g_,Z_STREAM_END:XO,Z_NEED_DICT:ZO,Z_STREAM_ERROR:xhe,Z_DATA_ERROR:LN,Z_MEM_ERROR:yhe}=Ru;function v_(n){this.options=Rb.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o9,this.strm.avail_out=0;let e=ad.inflateInit2(this.strm,t.windowBits);if(e!==g_)throw new Error(Bp[e]);if(this.header=new hhe,ad.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=u_.string2buf(t.dictionary):v9.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=ad.inflateSetDictionary(this.strm,t.dictionary),e!==g_)))throw new Error(Bp[e])}v_.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r=this.options.dictionary,s,d,u;if(this.ended)return!1;for(t===~~t?d=t:d=t===!0?vhe:_he,v9.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),s=ad.inflate(e,d),s===ZO&&r&&(s=ad.inflateSetDictionary(e,r),s===g_?s=ad.inflate(e,d):s===LN&&(s=ZO));e.avail_in>0&&s===XO&&e.state.wrap>0&&n[e.next_in]!==0;)ad.inflateReset(e),s=ad.inflate(e,d);switch(s){case xhe:case LN:case ZO:case yhe:return this.onEnd(s),this.ended=!0,!1}if(u=e.avail_out,e.next_out&&(e.avail_out===0||s===XO))if(this.options.to==="string"){let h=u_.utf8border(e.output,e.next_out),v=e.next_out-h,C=u_.buf2string(e.output,h);e.next_out=v,e.avail_out=i-v,v&&e.output.set(e.output.subarray(h,h+v),0),this.onData(C)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===g_&&u===0)){if(s===XO)return s=ad.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};v_.prototype.onData=function(n){this.chunks.push(n)};v_.prototype.onEnd=function(n){n===g_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rb.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function f4(n,t){let e=new v_(t);if(e.push(n),e.err)throw e.msg||Bp[e.err];return e.result}function Che(n,t){return t=t||{},t.raw=!0,f4(n,t)}var bhe=v_,Mhe=f4,She=Che,Phe=f4,whe=Ru,Ehe={Inflate:bhe,inflate:Mhe,inflateRaw:She,ungzip:Phe,constants:whe},{Deflate:UXe,deflate:jXe,deflateRaw:WXe,gzip:zXe}=Ffe,{Inflate:Ohe,inflate:The,inflateRaw:qXe,ungzip:HXe}=Ehe;var h4=Ohe,x9=The;var C9=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;C9[n]=t}var y9=4294967295;function khe(n,t,e){let i=n;for(let r=0;r<e;r++)i=C9[(i^t[r])&255]^i>>>8;return i}function Ihe(n,t){return(khe(y9,n,t)^y9)>>>0}function _4(n,t,e){let i=n.readUint32(),r=Ihe(new Uint8Array(n.buffer,n.byteOffset+n.offset-t-4,t),t);if(r!==i)throw new Error(`CRC mismatch for chunk ${e}. Expected ${i}, found ${r}`)}function Nb(n,t,e){for(let i=0;i<e;i++)t[i]=n[i]}function Lb(n,t,e,i){let r=0;for(;r<i;r++)t[r]=n[r];for(;r<e;r++)t[r]=n[r]+t[r-i]&255}function Vb(n,t,e,i){let r=0;if(e.length===0)for(;r<i;r++)t[r]=n[r];else for(;r<i;r++)t[r]=n[r]+e[r]&255}function Bb(n,t,e,i,r){let s=0;if(e.length===0){for(;s<r;s++)t[s]=n[s];for(;s<i;s++)t[s]=n[s]+(t[s-r]>>1)&255}else{for(;s<r;s++)t[s]=n[s]+(e[s]>>1)&255;for(;s<i;s++)t[s]=n[s]+(t[s-r]+e[s]>>1)&255}}function Ub(n,t,e,i,r){let s=0;if(e.length===0){for(;s<r;s++)t[s]=n[s];for(;s<i;s++)t[s]=n[s]+t[s-r]&255}else{for(;s<r;s++)t[s]=n[s]+e[s]&255;for(;s<i;s++)t[s]=n[s]+Dhe(t[s-r],e[s],e[s-r])&255}}function Dhe(n,t,e){let i=n+t-e,r=Math.abs(i-n),s=Math.abs(i-t),d=Math.abs(i-e);return r<=s&&r<=d?n:s<=d?t:e}function b9(n,t,e,i,r,s){switch(n){case 0:Nb(t,e,r);break;case 1:Lb(t,e,r,s);break;case 2:Vb(t,e,i,r);break;case 3:Bb(t,e,i,r,s);break;case 4:Ub(t,e,i,r,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}var Ahe=new Uint16Array([255]),Rhe=new Uint8Array(Ahe.buffer),Fhe=Rhe[0]===255;function M9(n){let{data:t,width:e,height:i,channels:r,depth:s}=n,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(s/8)*r,h=new Uint8Array(i*e*u),v=0;for(let C=0;C<7;C++){let O=d[C],T=Math.ceil((e-O.x)/O.xStep),w=Math.ceil((i-O.y)/O.yStep);if(T<=0||w<=0)continue;let A=T*u,I=new Uint8Array(A);for(let L=0;L<w;L++){let B=t[v++],q=t.subarray(v,v+A);v+=A;let K=new Uint8Array(A);b9(B,q,K,I,A,u),I.set(K);for(let J=0;J<T;J++){let Me=O.x+J*O.xStep,ze=O.y+L*O.yStep;if(!(Me>=e||ze>=i))for(let oe=0;oe<u;oe++)h[(ze*e+Me)*u+oe]=K[J*u+oe]}}}if(s===16){let C=new Uint16Array(h.buffer);if(Fhe)for(let O=0;O<C.length;O++)C[O]=Nhe(C[O]);return C}else return h}function Nhe(n){return(n&255)<<8|n>>8&255}var Lhe=new Uint16Array([255]),Vhe=new Uint8Array(Lhe.buffer),Bhe=Vhe[0]===255,Uhe=new Uint8Array(0);function v4(n){let{data:t,width:e,height:i,channels:r,depth:s}=n,d=Math.ceil(s/8)*r,u=Math.ceil(s/8*r*e),h=new Uint8Array(i*u),v=Uhe,C=0,O,T;for(let w=0;w<i;w++){switch(O=t.subarray(C+1,C+1+u),T=h.subarray(w*u,(w+1)*u),t[C]){case 0:Nb(O,T,u);break;case 1:Lb(O,T,u,d);break;case 2:Vb(O,T,v,u);break;case 3:Bb(O,T,v,u,d);break;case 4:Ub(O,T,v,u,d);break;default:throw new Error(`Unsupported filter: ${t[C]}`)}v=T,C+=u+1}if(s===16){let w=new Uint16Array(h.buffer);if(Bhe)for(let A=0;A<w.length;A++)w[A]=jhe(w[A]);return w}else return h}function jhe(n){return(n&255)<<8|n>>8&255}var jb=Uint8Array.of(137,80,78,71,13,10,26,10);function x4(n){if(!S9(n.readBytes(jb.length)))throw new Error("wrong PNG signature")}function S9(n){if(n.length<jb.length)return!1;for(let t=0;t<jb.length;t++)if(n[t]!==jb[t])return!1;return!0}var P9="tEXt",zhe=0,w9=new TextDecoder("latin1");function qhe(n){if(Ghe(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var Hhe=/^[\u0000-\u00FF]*$/;function Ghe(n){if(!Hhe.test(n))throw new Error("invalid latin1 text")}function E9(n,t,e){let i=y4(t);n[i]=$he(t,e-i.length-1)}function y4(n){for(n.mark();n.readByte()!==zhe;);let t=n.offset;n.reset();let e=w9.decode(n.readBytes(t-n.offset-1));return n.skip(1),qhe(e),e}function $he(n,t){return w9.decode(n.readBytes(t))}var Ta={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},x_={UNKNOWN:-1,DEFLATE:0},Wb={UNKNOWN:-1,ADAPTIVE:0},y_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},C_={NONE:0,BACKGROUND:1,PREVIOUS:2},zb={SOURCE:0,OVER:1};var qb=class extends e_{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,e={}){super(t);let{checkCrc:i=!1}=e;this._checkCrc=i,this._inflator=new h4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=x_.UNKNOWN,this._filterMethod=Wb.UNKNOWN,this._interlaceMethod=y_.UNKNOWN,this._colorType=Ta.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(x4(this);!this._end;){let t=this.readUint32(),e=this.readChars(4);this.decodeChunk(t,e)}return this.decodeImage(),this._png}decodeApng(){for(x4(this);!this._end;){let t=this.readUint32(),e=this.readChars(4);this.decodeApngChunk(t,e)}return this.decodeApngImage(),this._apng}decodeChunk(t,e){let i=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case P9:E9(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?_4(this,t+4,e):this.skip(4)}decodeApngChunk(t,e){let i=this.offset;switch(e!=="fdAT"&&e!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),e){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,e),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?_4(this,t+4,e):this.skip(4)}decodeIHDR(){let t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Yhe(this.readUint8());let e=this.readUint8();this._colorType=e;let i;switch(e){case Ta.GREYSCALE:i=1;break;case Ta.TRUECOLOUR:i=3;break;case Ta.INDEXED_COLOUR:i=1;break;case Ta.GREYSCALE_ALPHA:i=2;break;case Ta.TRUECOLOUR_ALPHA:i=4;break;case Ta.UNKNOWN:default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==x_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);let e=t/3;this._hasPalette=!0;let i=[];this._palette=i;for(let r=0;r<e;r++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;let e=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let e=t,i=this.offset+this.byteOffset;if(i+=4,e-=4,this._inflator.push(new Uint8Array(this.buffer,i,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Ta.GREYSCALE:case Ta.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break}case Ta.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){let i=this.readByte();this._palette[e].push(i)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}case Ta.UNKNOWN:case Ta.GREYSCALE_ALPHA:case Ta.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){let e=y4(this),i=this.readUint8();if(i!==x_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);let r=this.readBytes(t-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:x9(r)}}decodepHYs(){let t=this.readUint32(),e=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:e,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){let e={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=v4({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)e.data=i.data;else{let r=this._apng.frames.at(t-1);this.disposeFrame(i,r,e),this.addFrameDataToCanvas(e,i)}this._apng.frames.push(e)}}return this._apng}disposeFrame(t,e,i){switch(t.disposeOp){case C_.NONE:break;case C_.BACKGROUND:for(let r=0;r<this._png.height;r++)for(let s=0;s<this._png.width;s++){let d=(r*t.width+s)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[d+u]=0}break;case C_.PREVIOUS:i.data.set(e.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,e){let i=1<<this._png.depth,r=(s,d)=>{let u=((s+e.yOffset)*this._png.width+e.xOffset+d)*this._png.channels,h=(s*e.width+d)*this._png.channels;return{index:u,frameIndex:h}};switch(e.blendOp){case zb.SOURCE:for(let s=0;s<e.height;s++)for(let d=0;d<e.width;d++){let{index:u,frameIndex:h}=r(s,d);for(let v=0;v<this._png.channels;v++)t.data[u+v]=e.data[h+v]}break;case zb.OVER:for(let s=0;s<e.height;s++)for(let d=0;d<e.width;d++){let{index:u,frameIndex:h}=r(s,d);for(let v=0;v<this._png.channels;v++){let C=e.data[h+this._png.channels-1]/i,O=v%(this._png.channels-1)===0?1:e.data[h+v],T=Math.floor(C*O+(1-C)*t.data[u+v]);t.data[u+v]+=T}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Wb.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===y_.NO_INTERLACE)this._png.data=v4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===y_.ADAM7)this._png.data=M9({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let t=this._inflator.result,e=this._frames.at(-1);e?e.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:C_.NONE,blendOp:zb.SOURCE,data:t}),this._inflator=new h4,this._writingDataChunks=!1}};function Yhe(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function O9(n,t){return new qb(n,t).decode()}var kn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function C4(){kn.console&&typeof kn.console.log=="function"&&kn.console.log.apply(kn.console,arguments)}var or={log:C4,warn:function(n){kn.console&&(typeof kn.console.warn=="function"?kn.console.warn.apply(kn.console,arguments):C4.call(null,arguments))},error:function(n){kn.console&&(typeof kn.console.error=="function"?kn.console.error.apply(kn.console,arguments):C4(n))}};function b4(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){zp(i.response,t,e)},i.onerror=function(){or.error("could not download file")},i.send()}function T9(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hb(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var zp=kn.saveAs||((typeof window>"u"?"undefined":Ji(window))!=="object"||window!==kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=kn.URL||kn.webkitURL,r=document.createElement("a");t=t||n.name||"download",r.download=t,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?T9(r.href)?b4(n,t,e):Hb(r,r.target="_blank"):Hb(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Hb(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(T9(n))b4(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Hb(i)})}else navigator.msSaveOrOpenBlob((function(r,s){return s===void 0?s={autoBom:!1}:Ji(s)!=="object"&&(or.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return b4(n,t,e);var r=n.type==="application/octet-stream",s=/constructor/i.test(kn.HTMLElement)||kn.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||r&&s)&&(typeof FileReader>"u"?"undefined":Ji(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var C=u.result;C=d?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=C:location=C,i=null},u.readAsDataURL(n)}else{var h=kn.URL||kn.webkitURL,v=h.createObjectURL(n);i?i.location=v:location.href=v,i=null,setTimeout(function(){h.revokeObjectURL(v)},4e4)}});function Z9(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],i=0;i<e.length;i++){var r=e[i].re,s=e[i].process,d=r.exec(n);d&&(t=s(d),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),v=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),v.length==1&&(v="0"+v),"#"+u+h+v}}var Jb=kn.atob.bind(kn),k9=kn.btoa.bind(kn);function M4(n,t){var e=n[0],i=n[1],r=n[2],s=n[3];e=la(e,i,r,s,t[0],7,-680876936),s=la(s,e,i,r,t[1],12,-389564586),r=la(r,s,e,i,t[2],17,606105819),i=la(i,r,s,e,t[3],22,-1044525330),e=la(e,i,r,s,t[4],7,-176418897),s=la(s,e,i,r,t[5],12,1200080426),r=la(r,s,e,i,t[6],17,-1473231341),i=la(i,r,s,e,t[7],22,-45705983),e=la(e,i,r,s,t[8],7,1770035416),s=la(s,e,i,r,t[9],12,-1958414417),r=la(r,s,e,i,t[10],17,-42063),i=la(i,r,s,e,t[11],22,-1990404162),e=la(e,i,r,s,t[12],7,1804603682),s=la(s,e,i,r,t[13],12,-40341101),r=la(r,s,e,i,t[14],17,-1502002290),e=ca(e,i=la(i,r,s,e,t[15],22,1236535329),r,s,t[1],5,-165796510),s=ca(s,e,i,r,t[6],9,-1069501632),r=ca(r,s,e,i,t[11],14,643717713),i=ca(i,r,s,e,t[0],20,-373897302),e=ca(e,i,r,s,t[5],5,-701558691),s=ca(s,e,i,r,t[10],9,38016083),r=ca(r,s,e,i,t[15],14,-660478335),i=ca(i,r,s,e,t[4],20,-405537848),e=ca(e,i,r,s,t[9],5,568446438),s=ca(s,e,i,r,t[14],9,-1019803690),r=ca(r,s,e,i,t[3],14,-187363961),i=ca(i,r,s,e,t[8],20,1163531501),e=ca(e,i,r,s,t[13],5,-1444681467),s=ca(s,e,i,r,t[2],9,-51403784),r=ca(r,s,e,i,t[7],14,1735328473),e=da(e,i=ca(i,r,s,e,t[12],20,-1926607734),r,s,t[5],4,-378558),s=da(s,e,i,r,t[8],11,-2022574463),r=da(r,s,e,i,t[11],16,1839030562),i=da(i,r,s,e,t[14],23,-35309556),e=da(e,i,r,s,t[1],4,-1530992060),s=da(s,e,i,r,t[4],11,1272893353),r=da(r,s,e,i,t[7],16,-155497632),i=da(i,r,s,e,t[10],23,-1094730640),e=da(e,i,r,s,t[13],4,681279174),s=da(s,e,i,r,t[0],11,-358537222),r=da(r,s,e,i,t[3],16,-722521979),i=da(i,r,s,e,t[6],23,76029189),e=da(e,i,r,s,t[9],4,-640364487),s=da(s,e,i,r,t[12],11,-421815835),r=da(r,s,e,i,t[15],16,530742520),e=pa(e,i=da(i,r,s,e,t[2],23,-995338651),r,s,t[0],6,-198630844),s=pa(s,e,i,r,t[7],10,1126891415),r=pa(r,s,e,i,t[14],15,-1416354905),i=pa(i,r,s,e,t[5],21,-57434055),e=pa(e,i,r,s,t[12],6,1700485571),s=pa(s,e,i,r,t[3],10,-1894986606),r=pa(r,s,e,i,t[10],15,-1051523),i=pa(i,r,s,e,t[1],21,-2054922799),e=pa(e,i,r,s,t[8],6,1873313359),s=pa(s,e,i,r,t[15],10,-30611744),r=pa(r,s,e,i,t[6],15,-1560198380),i=pa(i,r,s,e,t[13],21,1309151649),e=pa(e,i,r,s,t[4],6,-145523070),s=pa(s,e,i,r,t[11],10,-1120210379),r=pa(r,s,e,i,t[2],15,718787259),i=pa(i,r,s,e,t[9],21,-343485551),n[0]=f0(e,n[0]),n[1]=f0(i,n[1]),n[2]=f0(r,n[2]),n[3]=f0(s,n[3])}function n2(n,t,e,i,r,s){return t=f0(f0(t,n),f0(i,s)),f0(t<<r|t>>>32-r,e)}function la(n,t,e,i,r,s,d){return n2(t&e|~t&i,n,t,r,s,d)}function ca(n,t,e,i,r,s,d){return n2(t&i|e&~i,n,t,r,s,d)}function da(n,t,e,i,r,s,d){return n2(t^e^i,n,t,r,s,d)}function pa(n,t,e,i,r,s,d){return n2(e^(t|~i),n,t,r,s,d)}function eL(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)M4(i,Jhe(n.substring(t-64,t)));n=n.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)r[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(M4(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,M4(i,r),i}function Jhe(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var I9="0123456789abcdef".split("");function Khe(n){for(var t="",e=0;e<4;e++)t+=I9[n>>8*e+4&15]+I9[n>>8*e&15];return t}function Qhe(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function T4(n){return eL(n).map(Qhe).join("")}var Xhe=(function(n){for(var t=0;t<n.length;t++)n[t]=Khe(n[t]);return n.join("")})(eL("hello"))!="5d41402abc4b2a76b9719d911017c592";function f0(n,t){if(Xhe){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}function k4(n,t){var e,i,r,s;if(n!==e){for(var d=(r=n,s=1+(256/n.length|0),new Array(s+1).join(r)),u=[],h=0;h<256;h++)u[h]=h;var v=0;for(h=0;h<256;h++){var C=u[h];v=(v+C+d.charCodeAt(h))%256,u[h]=u[v],u[v]=C}e=n,i=u}else u=i;var O=t.length,T=0,w=0,A="";for(h=0;h<O;h++)w=(w+(C=u[T=(T+1)%256]))%256,u[T]=u[w],u[w]=C,d=u[(u[T]+u[w])%256],A+=String.fromCharCode(t.charCodeAt(h)^d);return A}var D9={print:4,modify:8,copy:16,"annot-forms":32};function Bu(n,t,e,i){this.v=1,this.r=2;var r=192;n.forEach(function(u){if(D9.perm!==void 0)throw new Error("Invalid permission: "+u);r+=D9[u]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(t+this.padding).substr(0,32),d=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,d),this.P=-(1+(255^r)),this.encryptionKey=T4(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=k4(this.encryptionKey,this.padding)}function Uu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var r=n.charCodeAt(i);t+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):n[i]}return t}function A9(n){if(Ji(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,r){if(r=r||!1,typeof e!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!r],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[e]){var d=t[e][s];try{d[0].apply(n,i)}catch(u){kn.console&&or.error("jsPDF PubSub Error",u.message,u)}d[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function e2(n){if(!(this instanceof e2))return new e2(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function tL(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function qp(n,t,e,i,r){if(!(this instanceof qp))return new qp(n,t,e,i,r);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,tL.call(this,i,r)}function ju(n,t,e,i,r){if(!(this instanceof ju))return new ju(n,t,e,i,r);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,tL.call(this,i,r)}function Jt(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],d=[],u=1,h=16,v="S",C=null;Ji(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,r=n.format||r,s=n.compress||n.compressPdf||s,(C=n.encryption||null)!==null&&(C.userPassword=C.userPassword||"",C.ownerPassword=C.ownerPassword||"",C.userPermissions=C.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),v=n.defaultPathOperation||"S"),d=n.filters||(s===!0?["FlateEncode"]:d),i=i||"mm",e=(""+(e||"P")).toLowerCase();var O=n.putOnlyUsedFonts||!1,T={},w={internal:{},__private__:{}};w.__private__.PubSub=A9;var A="1.3",I=w.__private__.getPdfVersion=function(){return A};w.__private__.setPdfVersion=function(R){A=R};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return L};var B=w.__private__.getPageFormat=function(R){return L[R]};r=r||"a4";var q="compat",K="advanced",J=q;function Me(){this.saveGraphicsState(),de(new Pn(An,0,0,-An,0,P0()*An).toString()+" cm"),this.setFontSize(this.getFontSize()/An),v="n",J=K}function ze(){this.restoreGraphicsState(),v="S",J=q}var oe=w.__private__.combineFontStyleAndFontWeight=function(R,H){if(R=="bold"&&H=="normal"||R=="bold"&&H==400||R=="normal"&&H=="italic"||R=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(R=H==400||H==="normal"?R==="italic"?"italic":"normal":H!=700&&H!=="bold"||R!=="normal"?(H==700?"bold":H)+""+R:"bold"),R};w.advancedAPI=function(R){var H=J===q;return H&&Me.call(this),typeof R!="function"||(R(this),H&&ze.call(this)),this},w.compatAPI=function(R){var H=J===K;return H&&ze.call(this),typeof R!="function"||(R(this),H&&Me.call(this)),this},w.isAdvancedAPI=function(){return J===K};var ae,X=function(R){if(J!==K)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},pe=w.roundToPrecision=w.__private__.roundToPrecision=function(R,H){var ye=t||H;if(isNaN(R)||isNaN(ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(ye).replace(/0+$/,"")};ae=w.hpf=w.__private__.hpf=typeof h=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(R,h)}:h==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(R,16)};var z=w.f2=w.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return pe(R,2)},Z=w.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return pe(R,3)},ge=w.scale=w.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return J===q?R*An:J===K?R:void 0},Pe=function(R){return ge((function(H){return J===q?P0()-H:J===K?H:void 0})(R))};w.__private__.setPrecision=w.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var Ve,De="00000000000000000000000000000000",Fe=w.__private__.getFileId=function(){return De},Te=w.__private__.setFileId=function(R){return De=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),C!==null&&(to=new Bu(C.userPermissions,C.userPassword,C.ownerPassword,De)),De};w.setFileId=function(R){return Te(R),this},w.getFileId=function(){return Fe()};var Je=w.__private__.convertDateToPDFDate=function(R){var H=R.getTimezoneOffset(),ye=H<0?"+":"-",ke=Math.floor(Math.abs(H/60)),Ye=Math.abs(H%60),vt=[ye,W(ke),"'",W(Ye),"'"].join("");return["D:",R.getFullYear(),W(R.getMonth()+1),W(R.getDate()),W(R.getHours()),W(R.getMinutes()),W(R.getSeconds()),vt].join("")},_t=w.__private__.convertPDFDateToDate=function(R){var H=parseInt(R.substr(2,4),10),ye=parseInt(R.substr(6,2),10)-1,ke=parseInt(R.substr(8,2),10),Ye=parseInt(R.substr(10,2),10),vt=parseInt(R.substr(12,2),10),wt=parseInt(R.substr(14,2),10);return new Date(H,ye,ke,Ye,vt,wt,0)},pt=w.__private__.setCreationDate=function(R){var H;if(R===void 0&&(R=new Date),R instanceof Date)H=Je(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=R}return Ve=H},U=w.__private__.getCreationDate=function(R){var H=Ve;return R==="jsDate"&&(H=_t(Ve)),H};w.setCreationDate=function(R){return pt(R),this},w.getCreationDate=function(R){return U(R)};var Q,W=w.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},Y=w.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ue=0,we=[],qe=[],Ae=0,Re=[],gt=[],Pt=!1,Nt=qe;w.__private__.setCustomOutputDestination=function(R){Pt=!0,Nt=R};var Bt=function(R){Pt||(Nt=R)};w.__private__.resetCustomOutputDestination=function(){Pt=!1,Nt=qe};var de=w.__private__.out=function(R){return R=R.toString(),Ae+=R.length+1,Nt.push(R),Nt},It=w.__private__.write=function(R){return de(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Ot=w.__private__.getArrayBuffer=function(R){for(var H=R.length,ye=new ArrayBuffer(H),ke=new Uint8Array(ye);H--;)ke[H]=R.charCodeAt(H);return ye},rn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return rn};var bt=n.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(R){return bt=J===K?R/An:R,this};var fn,Kt=w.__private__.getFontSize=w.getFontSize=function(){return J===q?bt:bt*An},Cn=n.R2L||!1;w.__private__.setR2L=w.setR2L=function(R){return Cn=R,this},w.__private__.getR2L=w.getR2L=function(){return Cn};var _n,Gn=w.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))fn=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');fn=R}else fn=parseInt(R,10)};w.__private__.getZoomMode=function(){return fn};var $n,On=w.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');_n=R};w.__private__.getPageMode=function(){return _n};var ti=w.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');$n=R};w.__private__.getLayoutMode=function(){return $n},w.__private__.setDisplayMode=w.setDisplayMode=function(R,H,ye){return Gn(R),ti(H),On(ye),this};var Fn={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(R){if(Object.keys(Fn).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fn[R]},w.__private__.getDocumentProperties=function(){return Fn},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(R){for(var H in Fn)Fn.hasOwnProperty(H)&&R[H]&&(Fn[H]=R[H]);return this},w.__private__.setDocumentProperty=function(R,H){if(Object.keys(Fn).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fn[R]=H};var pn,An,gn,_r,ci,zn={},qn={},ar=[],bn={},Wi={},Sn={},In={},sr=null,Xn=0,Mn=[],Si=new A9(w),_c=n.hotfixes||[],uo={},qs={},vs=[],Pn=function R(H,ye,ke,Ye,vt,wt){if(!(this instanceof R))return new R(H,ye,ke,Ye,vt,wt);isNaN(H)&&(H=1),isNaN(ye)&&(ye=0),isNaN(ke)&&(ke=0),isNaN(Ye)&&(Ye=1),isNaN(vt)&&(vt=0),isNaN(wt)&&(wt=0),this._matrix=[H,ye,ke,Ye,vt,wt]};Object.defineProperty(Pn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Pn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Pn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Pn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Pn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Pn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Pn.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Pn.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Pn.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Pn.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Pn.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Pn.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Pn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pn.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ae).join(R)},Pn.prototype.multiply=function(R){var H=R.sx*this.sx+R.shy*this.shx,ye=R.sx*this.shy+R.shy*this.sy,ke=R.shx*this.sx+R.sy*this.shx,Ye=R.shx*this.shy+R.sy*this.sy,vt=R.tx*this.sx+R.ty*this.shx+this.tx,wt=R.tx*this.shy+R.ty*this.sy+this.ty;return new Pn(H,ye,ke,Ye,vt,wt)},Pn.prototype.decompose=function(){var R=this.sx,H=this.shy,ye=this.shx,ke=this.sy,Ye=this.tx,vt=this.ty,wt=Math.sqrt(R*R+H*H),ln=(R/=wt)*ye+(H/=wt)*ke;ye-=R*ln,ke-=H*ln;var hn=Math.sqrt(ye*ye+ke*ke);return ln/=hn,R*(ke/=hn)<H*(ye/=hn)&&(R=-R,H=-H,ln=-ln,wt=-wt),{scale:new Pn(wt,0,0,hn,0,0),translate:new Pn(1,0,0,1,Ye,vt),rotate:new Pn(R,H,-H,R,0,0),skew:new Pn(1,0,ln,1,0,0)}},Pn.prototype.toString=function(R){return this.join(" ")},Pn.prototype.inversed=function(){var R=this.sx,H=this.shy,ye=this.shx,ke=this.sy,Ye=this.tx,vt=this.ty,wt=1/(R*ke-H*ye),ln=ke*wt,hn=-H*wt,Dn=-ye*wt,Hn=R*wt;return new Pn(ln,hn,Dn,Hn,-ln*Ye-Dn*vt,-hn*Ye-Hn*vt)},Pn.prototype.applyToPoint=function(R){var H=R.x*this.sx+R.y*this.shx+this.tx,ye=R.x*this.shy+R.y*this.sy+this.ty;return new bc(H,ye)},Pn.prototype.applyToRectangle=function(R){var H=this.applyToPoint(R),ye=this.applyToPoint(new bc(R.x+R.w,R.y+R.h));return new mg(H.x,H.y,ye.x-H.x,ye.y-H.y)},Pn.prototype.clone=function(){var R=this.sx,H=this.shy,ye=this.shx,ke=this.sy,Ye=this.tx,vt=this.ty;return new Pn(R,H,ye,ke,Ye,vt)},w.Matrix=Pn;var Hs=w.matrixMult=function(R,H){return H.multiply(R)},Gs=new Pn(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=Gs;var Yo=function(R,H){if(!Wi[R]){var ye=(H instanceof qp?"Sh":"P")+(Object.keys(bn).length+1).toString(10);H.id=ye,Wi[R]=ye,bn[ye]=H,Si.publish("addPattern",H)}};w.ShadingPattern=qp,w.TilingPattern=ju,w.addShadingPattern=function(R,H){return X("addShadingPattern()"),Yo(R,H),this},w.beginTilingPattern=function(R){X("beginTilingPattern()"),ug(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},w.endTilingPattern=function(R,H){X("endTilingPattern()"),H.stream=gt[Q].join(`
`),Yo(R,H),Si.publish("endTilingPattern",H),vs.pop().restore()};var ka,vr=w.__private__.newObject=function(){var R=qr();return ee(R,!0),R},qr=w.__private__.newObjectDeferred=function(){return ue++,we[ue]=function(){return Ae},ue},ee=function(R,H){return H=typeof H=="boolean"&&H,we[R]=Ae,H&&de(R+" 0 obj"),R},ve=w.__private__.newAdditionalObject=function(){var R={objId:qr(),content:""};return Re.push(R),R},se=qr(),ce=qr(),xe=w.__private__.decodeColorString=function(R){var H=R.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ye=parseFloat(H[0]);H=[ye,ye,ye,"r"]}for(var ke="#",Ye=0;Ye<3;Ye++)ke+=("0"+Math.floor(255*parseFloat(H[Ye])).toString(16)).slice(-2);return ke},Ce=w.__private__.encodeColorString=function(R){var H;typeof R=="string"&&(R={ch1:R});var ye=R.ch1,ke=R.ch2,Ye=R.ch3,vt=R.ch4,wt=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ye=="string"&&ye.charAt(0)!=="#"){var ln=new Z9(ye);if(ln.ok)ye=ln.toHex();else if(!/^\d*\.?\d*$/.test(ye))throw new Error('Invalid color "'+ye+'" passed to jsPDF.encodeColorString.')}if(typeof ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ye)&&(ye="#"+ye[1]+ye[1]+ye[2]+ye[2]+ye[3]+ye[3]),typeof ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ye)){var hn=parseInt(ye.substr(1),16);ye=hn>>16&255,ke=hn>>8&255,Ye=255&hn}if(ke===void 0||vt===void 0&&ye===ke&&ke===Ye)H=typeof ye=="string"?ye+" "+wt[0]:R.precision===2?z(ye/255)+" "+wt[0]:Z(ye/255)+" "+wt[0];else if(vt===void 0||Ji(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return["1.","1.","1.",wt[1]].join(" ");H=typeof ye=="string"?[ye,ke,Ye,wt[1]].join(" "):R.precision===2?[z(ye/255),z(ke/255),z(Ye/255),wt[1]].join(" "):[Z(ye/255),Z(ke/255),Z(Ye/255),wt[1]].join(" ")}else H=typeof ye=="string"?[ye,ke,Ye,vt,wt[2]].join(" "):R.precision===2?[z(ye),z(ke),z(Ye),z(vt),wt[2]].join(" "):[Z(ye),Z(ke),Z(Ye),Z(vt),wt[2]].join(" ");return H},Qe=w.__private__.getFilters=function(){return d},at=w.__private__.putStream=function(R){var H=(R=R||{}).data||"",ye=R.filters||Qe(),ke=R.alreadyAppliedFilters||[],Ye=R.addLength1||!1,vt=H.length,wt=R.objectId,ln=function(no){return no};if(C!==null&&wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");C!==null&&(ln=to.encryptor(wt,0));var hn={};ye===!0&&(ye=["FlateEncode"]);var Dn=R.additionalKeyValues||[],Hn=(hn=Jt.API.processDataByFilters!==void 0?Jt.API.processDataByFilters(H,ye):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(hn.data.length!==0&&(Dn.push({key:"Length",value:hn.data.length}),Ye===!0&&Dn.push({key:"Length1",value:vt})),Hn.length!=0)if(Hn.split("/").length-1==1)Dn.push({key:"Filter",value:Hn});else{Dn.push({key:"Filter",value:"["+Hn+"]"});for(var xi=0;xi<Dn.length;xi+=1)if(Dn[xi].key==="DecodeParms"){for(var Pr=[],$r=0;$r<hn.reverseChain.split("/").length-1;$r+=1)Pr.push("null");Pr.push(Dn[xi].value),Dn[xi].value="["+Pr.join(" ")+"]"}}de("<<");for(var cr=0;cr<Dn.length;cr++)de("/"+Dn[cr].key+" "+Dn[cr].value);de(">>"),hn.data.length!==0&&(de("stream"),de(ln(hn.data)),de("endstream"))},et=w.__private__.putPage=function(R){var H=R.number,ye=R.data,ke=R.objId,Ye=R.contentsObjId;ee(ke,!0),de("<</Type /Page"),de("/Parent "+R.rootDictionaryObjId+" 0 R"),de("/Resources "+R.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(ae(R.mediaBox.bottomLeftX))+" "+parseFloat(ae(R.mediaBox.bottomLeftY))+" "+ae(R.mediaBox.topRightX)+" "+ae(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&de("/CropBox ["+ae(R.cropBox.bottomLeftX)+" "+ae(R.cropBox.bottomLeftY)+" "+ae(R.cropBox.topRightX)+" "+ae(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&de("/BleedBox ["+ae(R.bleedBox.bottomLeftX)+" "+ae(R.bleedBox.bottomLeftY)+" "+ae(R.bleedBox.topRightX)+" "+ae(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&de("/TrimBox ["+ae(R.trimBox.bottomLeftX)+" "+ae(R.trimBox.bottomLeftY)+" "+ae(R.trimBox.topRightX)+" "+ae(R.trimBox.topRightY)+"]"),R.artBox!==null&&de("/ArtBox ["+ae(R.artBox.bottomLeftX)+" "+ae(R.artBox.bottomLeftY)+" "+ae(R.artBox.topRightX)+" "+ae(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&de("/UserUnit "+R.userUnit),Si.publish("putPage",{objId:ke,pageContext:Mn[H],pageNumber:H,page:ye}),de("/Contents "+Ye+" 0 R"),de(">>"),de("endobj");var vt=ye.join(`
`);return J===K&&(vt+=`
Q`),ee(Ye,!0),at({data:vt,filters:Qe(),objectId:Ye}),de("endobj"),ke},Xe=w.__private__.putPages=function(){var R,H,ye=[];for(R=1;R<=Xn;R++)Mn[R].objId=qr(),Mn[R].contentsObjId=qr();for(R=1;R<=Xn;R++)ye.push(et({number:R,data:gt[R],objId:Mn[R].objId,contentsObjId:Mn[R].contentsObjId,mediaBox:Mn[R].mediaBox,cropBox:Mn[R].cropBox,bleedBox:Mn[R].bleedBox,trimBox:Mn[R].trimBox,artBox:Mn[R].artBox,userUnit:Mn[R].userUnit,rootDictionaryObjId:se,resourceDictionaryObjId:ce}));ee(se,!0),de("<</Type /Pages");var ke="/Kids [";for(H=0;H<Xn;H++)ke+=ye[H]+" 0 R ";de(ke+"]"),de("/Count "+Xn),de(">>"),de("endobj"),Si.publish("postPutPages")},nt=function(R){Si.publish("putFont",{font:R,out:de,newObject:vr,putStream:at}),R.isAlreadyPutted!==!0&&(R.objectNumber=vr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Uu(R.postScriptName)),de("/Subtype /Type1"),typeof R.encoding=="string"&&de("/Encoding /"+R.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},kt=function(R){R.objectNumber=vr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[ae(R.x),ae(R.y),ae(R.x+R.width),ae(R.y+R.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var ye=R.pages[1].join(`
`);at({data:ye,additionalKeyValues:H,objectId:R.objectNumber}),de("endobj")},Lt=function(R,H){H||(H=21);var ye=vr(),ke=(function(wt,ln){var hn,Dn=[],Hn=1/(ln-1);for(hn=0;hn<1;hn+=Hn)Dn.push(hn);if(Dn.push(1),wt[0].offset!=0){var xi={offset:0,color:wt[0].color};wt.unshift(xi)}if(wt[wt.length-1].offset!=1){var Pr={offset:1,color:wt[wt.length-1].color};wt.push(Pr)}for(var $r="",cr=0,no=0;no<Dn.length;no++){for(hn=Dn[no];hn>wt[cr+1].offset;)cr++;var Yr=wt[cr].offset,ko=(hn-Yr)/(wt[cr+1].offset-Yr),Pc=wt[cr].color,Js=wt[cr+1].color;$r+=Y(Math.round((1-ko)*Pc[0]+ko*Js[0]).toString(16))+Y(Math.round((1-ko)*Pc[1]+ko*Js[1]).toString(16))+Y(Math.round((1-ko)*Pc[2]+ko*Js[2]).toString(16))}return $r.trim()})(R.colors,H),Ye=[];Ye.push({key:"FunctionType",value:"0"}),Ye.push({key:"Domain",value:"[0.0 1.0]"}),Ye.push({key:"Size",value:"["+H+"]"}),Ye.push({key:"BitsPerSample",value:"8"}),Ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at({data:ke,additionalKeyValues:Ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ye}),de("endobj"),R.objectNumber=vr(),de("<< /ShadingType "+R.type),de("/ColorSpace /DeviceRGB");var vt="/Coords ["+ae(parseFloat(R.coords[0]))+" "+ae(parseFloat(R.coords[1]))+" ";R.type===2?vt+=ae(parseFloat(R.coords[2]))+" "+ae(parseFloat(R.coords[3])):vt+=ae(parseFloat(R.coords[2]))+" "+ae(parseFloat(R.coords[3]))+" "+ae(parseFloat(R.coords[4]))+" "+ae(parseFloat(R.coords[5])),de(vt+="]"),R.matrix&&de("/Matrix ["+R.matrix.toString()+"]"),de("/Function "+ye+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Qt=function(R,H){var ye=qr(),ke=vr();H.push({resourcesOid:ye,objectOid:ke}),R.objectNumber=ke;var Ye=[];Ye.push({key:"Type",value:"/Pattern"}),Ye.push({key:"PatternType",value:"1"}),Ye.push({key:"PaintType",value:"1"}),Ye.push({key:"TilingType",value:"1"}),Ye.push({key:"BBox",value:"["+R.boundingBox.map(ae).join(" ")+"]"}),Ye.push({key:"XStep",value:ae(R.xStep)}),Ye.push({key:"YStep",value:ae(R.yStep)}),Ye.push({key:"Resources",value:ye+" 0 R"}),R.matrix&&Ye.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),at({data:R.stream,additionalKeyValues:Ye,objectId:R.objectNumber}),de("endobj")},Ut=function(R){for(var H in R.objectNumber=vr(),de("<<"),R)switch(H){case"opacity":de("/ca "+z(R[H]));break;case"stroke-opacity":de("/CA "+z(R[H]))}de(">>"),de("endobj")},qt=function(R){ee(R.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in de("/Font <<"),zn)zn.hasOwnProperty(H)&&(O===!1||O===!0&&T.hasOwnProperty(H))&&de("/"+H+" "+zn[H].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(bn).length>0){for(var H in de("/Shading <<"),bn)bn.hasOwnProperty(H)&&bn[H]instanceof qp&&bn[H].objectNumber>=0&&de("/"+H+" "+bn[H].objectNumber+" 0 R");Si.publish("putShadingPatternDict"),de(">>")}})(),(function(H){if(Object.keys(bn).length>0){for(var ye in de("/Pattern <<"),bn)bn.hasOwnProperty(ye)&&bn[ye]instanceof w.TilingPattern&&bn[ye].objectNumber>=0&&bn[ye].objectNumber<H&&de("/"+ye+" "+bn[ye].objectNumber+" 0 R");Si.publish("putTilingPatternDict"),de(">>")}})(R.objectOid),(function(){if(Object.keys(Sn).length>0){var H;for(H in de("/ExtGState <<"),Sn)Sn.hasOwnProperty(H)&&Sn[H].objectNumber>=0&&de("/"+H+" "+Sn[H].objectNumber+" 0 R");Si.publish("putGStateDict"),de(">>")}})(),(function(){for(var H in de("/XObject <<"),uo)uo.hasOwnProperty(H)&&uo[H].objectNumber>=0&&de("/"+H+" "+uo[H].objectNumber+" 0 R");Si.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},wn=function(R){qn[R.fontName]=qn[R.fontName]||{},qn[R.fontName][R.fontStyle]=R.id},Ni=function(R,H,ye,ke,Ye){var vt={id:"F"+(Object.keys(zn).length+1).toString(10),postScriptName:R,fontName:H,fontStyle:ye,encoding:ke,isStandardFont:Ye||!1,metadata:{}};return Si.publish("addFont",{font:vt,instance:this}),zn[vt.id]=vt,wn(vt),vt.id},er=w.__private__.pdfEscape=w.pdfEscape=function(R,H){return(function(ye,ke){var Ye,vt,wt,ln,hn,Dn,Hn,xi,Pr;if(wt=(ke=ke||{}).sourceEncoding||"Unicode",hn=ke.outputEncoding,(ke.autoencode||hn)&&zn[pn].metadata&&zn[pn].metadata[wt]&&zn[pn].metadata[wt].encoding&&(ln=zn[pn].metadata[wt].encoding,!hn&&zn[pn].encoding&&(hn=zn[pn].encoding),!hn&&ln.codePages&&(hn=ln.codePages[0]),typeof hn=="string"&&(hn=ln[hn]),hn)){for(Hn=!1,Dn=[],Ye=0,vt=ye.length;Ye<vt;Ye++)(xi=hn[ye.charCodeAt(Ye)])?Dn.push(String.fromCharCode(xi)):Dn.push(ye[Ye]),Dn[Ye].charCodeAt(0)>>8&&(Hn=!0);ye=Dn.join("")}for(Ye=ye.length;Hn===void 0&&Ye!==0;)ye.charCodeAt(Ye-1)>>8&&(Hn=!0),Ye--;if(!Hn)return ye;for(Dn=ke.noBOM?[]:[254,255],Ye=0,vt=ye.length;Ye<vt;Ye++){if((Pr=(xi=ye.charCodeAt(Ye))>>8)>>8)throw new Error("Character at position "+Ye+" of string '"+ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dn.push(Pr),Dn.push(xi-(Pr<<8))}return String.fromCharCode.apply(void 0,Dn)})(R,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lr=w.__private__.beginPage=function(R){gt[++Xn]=[],Mn[Xn]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Tl(Xn),Bt(gt[Q])},go=function(R,H){var ye,ke,Ye;switch(e=H||e,typeof R=="string"&&(ye=B(R.toLowerCase()),Array.isArray(ye)&&(ke=ye[0],Ye=ye[1])),Array.isArray(R)&&(ke=R[0]*An,Ye=R[1]*An),isNaN(ke)&&(ke=r[0],Ye=r[1]),(ke>14400||Ye>14400)&&(or.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Ye=Math.min(14400,Ye)),r=[ke,Ye],e.substr(0,1)){case"l":Ye>ke&&(r=[Ye,ke]);break;case"p":ke>Ye&&(r=[Ye,ke])}lr(r),Rn(lg),de(Qp),dg!==0&&de(dg+" J"),pg!==0&&de(pg+" j"),Si.publish("addPage",{pageNumber:Xn})},$s=function(R){R>0&&R<=Xn&&(gt.splice(R,1),Mn.splice(R,1),Xn--,Q>Xn&&(Q=Xn),this.setPage(Q))},Tl=function(R){R>0&&R<=Xn&&(Q=R)},xs=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return gt.length-1},cd=function(R,H,ye){var ke,Ye=void 0;return ye=ye||{},R=R!==void 0?R:zn[pn].fontName,H=H!==void 0?H:zn[pn].fontStyle,ke=R.toLowerCase(),qn[ke]!==void 0&&qn[ke][H]!==void 0?Ye=qn[ke][H]:qn[R]!==void 0&&qn[R][H]!==void 0?Ye=qn[R][H]:ye.disableWarning===!1&&or.warn("Unable to look up font label for font '"+R+"', '"+H+"'. Refer to getFontList() for available fonts."),Ye||ye.noFallback||(Ye=qn.times[H])==null&&(Ye=qn.times.normal),Ye},Hr=w.__private__.putInfo=function(){var R=vr(),H=function(ke){return ke};for(var ye in C!==null&&(H=to.encryptor(R,0)),de("<<"),de("/Producer ("+er(H("jsPDF "+Jt.version))+")"),Fn)Fn.hasOwnProperty(ye)&&Fn[ye]&&de("/"+ye.substr(0,1).toUpperCase()+ye.substr(1)+" ("+er(H(Fn[ye]))+")");de("/CreationDate ("+er(H(Ve))+")"),de(">>"),de("endobj")},Yp=w.__private__.putCatalog=function(R){var H=(R=R||{}).rootDictionaryObjId||se;switch(vr(),de("<<"),de("/Type /Catalog"),de("/Pages "+H+" 0 R"),fn||(fn="fullwidth"),fn){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ye=""+fn;ye.substr(ye.length-1)==="%"&&(fn=parseInt(fn)/100),typeof fn=="number"&&de("/OpenAction [3 0 R /XYZ null null "+z(fn)+"]")}switch($n||($n="continuous"),$n){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}_n&&de("/PageMode /"+_n),Si.publish("putCatalog"),de(">>"),de("endobj")},SM=w.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ue+1)),de("/Root "+ue+" 0 R"),de("/Info "+(ue-1)+" 0 R"),C!==null&&de("/Encrypt "+to.oid+" 0 R"),de("/ID [ <"+De+"> <"+De+"> ]"),de(">>")},Gr=w.__private__.putHeader=function(){de("%PDF-"+A),de("%\xBA\xDF\xAC\xE0")},w_=w.__private__.putXRef=function(){var R="0000000000";de("xref"),de("0 "+(ue+1)),de("0000000000 65535 f ");for(var H=1;H<=ue;H++)typeof we[H]=="function"?de((R+we[H]()).slice(-10)+" 00000 n "):we[H]!==void 0?de((R+we[H]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},kl=w.__private__.buildDocument=function(){var R;ue=0,Ae=0,qe=[],we=[],Re=[],se=qr(),ce=qr(),Bt(qe),Si.publish("buildDocument"),Gr(),Xe(),(function(){Si.publish("putAdditionalObjects");for(var ye=0;ye<Re.length;ye++){var ke=Re[ye];ee(ke.objId,!0),de(ke.content),de("endobj")}Si.publish("postPutAdditionalObjects")})(),R=[],(function(){for(var ye in zn)zn.hasOwnProperty(ye)&&(O===!1||O===!0&&T.hasOwnProperty(ye))&&nt(zn[ye])})(),(function(){var ye;for(ye in Sn)Sn.hasOwnProperty(ye)&&Ut(Sn[ye])})(),(function(){for(var ye in uo)uo.hasOwnProperty(ye)&&kt(uo[ye])})(),(function(ye){var ke;for(ke in bn)bn.hasOwnProperty(ke)&&(bn[ke]instanceof qp?Lt(bn[ke]):bn[ke]instanceof ju&&Qt(bn[ke],ye))})(R),Si.publish("putResources"),R.forEach(qt),qt({resourcesOid:ce,objectOid:Number.MAX_SAFE_INTEGER}),Si.publish("postPutResources"),C!==null&&(to.oid=vr(),de("<<"),de("/Filter /Standard"),de("/V "+to.v),de("/R "+to.r),de("/U <"+to.toHexString(to.U)+">"),de("/O <"+to.toHexString(to.O)+">"),de("/P "+to.P),de(">>"),de("endobj")),Hr(),Yp();var H=Ae;return w_(),SM(),de("startxref"),de(""+H),de("%%EOF"),Bt(gt[Q]),qe.join(`
`)},Jp=w.__private__.getBlob=function(R){return new Blob([Ot(R)],{type:"application/pdf"})},E_=w.output=w.__private__.output=(ka=function(R,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",R){case void 0:return kl();case"save":w.save(H.filename);break;case"arraybuffer":return Ot(kl());case"blob":return Jp(kl());case"bloburi":case"bloburl":if(kn.URL!==void 0&&typeof kn.URL.createObjectURL=="function")return kn.URL&&kn.URL.createObjectURL(Jp(kl()))||void 0;or.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ye="",ke=kl();try{ye=k9(ke)}catch{ye=k9(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+H.filename+";base64,"+ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var Ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ye=H.pdfObjectUrl,vt="");var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ye+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",ln=kn.open();return ln!==null&&ln.document.write(wt),ln}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Dn=kn.open();if(Dn!==null){Dn.document.write(hn);var Hn=this;Dn.document.documentElement.querySelector("#pdfViewer").onload=function(){Dn.document.title=H.filename,Dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Hn.output("bloburl"))}}return Dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Pr=kn.open();if(Pr!==null&&(Pr.document.write(xi),Pr.document.title=H.filename),Pr||typeof safari>"u")return Pr;break;case"datauri":case"dataurl":return kn.document.location.href=this.output("datauristring",H);default:return null}},ka.foo=function(){try{return ka.apply(this,arguments)}catch(ye){var R=ye.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var H="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ye.message;if(!kn.console)throw new Error(H);kn.console.error(H,ye),kn.alert&&alert(H)}},ka.foo.bar=ka,ka.foo),ys=function(R){return Array.isArray(_c)===!0&&_c.indexOf(R)>-1};switch(i){case"pt":An=1;break;case"mm":An=72/25.4;break;case"cm":An=72/2.54;break;case"in":An=72;break;case"px":An=ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":An=12;break;case"ex":An=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);An=i}var to=null;pt(),Te();var vc=w.__private__.getPageInfo=w.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mn[R].objId,pageNumber:R,pageContext:Mn[R]}},O_=w.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Mn)if(Mn[H].objId===R)break;return vc(H)},PM=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:Mn[Q].objId,pageNumber:Q,pageContext:Mn[Q]}};w.addPage=function(){return go.apply(this,arguments),this},w.setPage=function(){return Tl.apply(this,arguments),Bt.call(this,gt[Q]),this},w.insertPage=function(R){return this.addPage(),this.movePage(Q,R),this},w.movePage=function(R,H){var ye,ke;if(R>H){ye=gt[R],ke=Mn[R];for(var Ye=R;Ye>H;Ye--)gt[Ye]=gt[Ye-1],Mn[Ye]=Mn[Ye-1];gt[H]=ye,Mn[H]=ke,this.setPage(H)}else if(R<H){ye=gt[R],ke=Mn[R];for(var vt=R;vt<H;vt++)gt[vt]=gt[vt+1],Mn[vt]=Mn[vt+1];gt[H]=ye,Mn[H]=ke,this.setPage(H)}return this},w.deletePage=function(){return $s.apply(this,arguments),this},w.__private__.text=w.text=function(R,H,ye,ke,Ye){var vt,wt,ln,hn,Dn,Hn,xi,Pr,$r,cr=(ke=ke||{}).scope||this;if(typeof R=="number"&&typeof H=="number"&&(typeof ye=="string"||Array.isArray(ye))){var no=ye;ye=H,H=R,R=no}if(arguments[3]instanceof Pn==0?(ln=arguments[4],hn=arguments[5],Ji(xi=arguments[3])==="object"&&xi!==null||(typeof ln=="string"&&(hn=ln,ln=null),typeof xi=="string"&&(hn=xi,xi=null),typeof xi=="number"&&(ln=xi,xi=null),ke={flags:xi,angle:ln,align:hn})):(X("The transform parameter of text() with a Matrix value"),$r=Ye),isNaN(H)||isNaN(ye)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return cr;var Yr,ko="",Pc=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:b0,Js=cr.internal.scaleFactor;function wc(Li){return Li=Li.split("	").join(Array(ke.TabLen||9).join(" ")),er(Li,xi)}function fg(Li){for(var tr,Vr=Li.concat(),io=[],Tc=Vr.length;Tc--;)typeof(tr=Vr.shift())=="string"?io.push(tr):Array.isArray(Li)&&(tr.length===1||tr[1]===void 0&&tr[2]===void 0)?io.push(tr[0]):io.push([tr[0],tr[1],tr[2]]);return io}function Zp(Li,tr){var Vr;if(typeof Li=="string")Vr=tr(Li)[0];else if(Array.isArray(Li)){for(var io,Tc,Pg=Li.concat(),nm=[],B_=Pg.length;B_--;)typeof(io=Pg.shift())=="string"?nm.push(tr(io)[0]):Array.isArray(io)&&typeof io[0]=="string"&&(Tc=tr(io[0],io[1],io[2]),nm.push([Tc[0],Tc[1],Tc[2]]));Vr=nm}return Vr}var dd=!1,w0=!0;if(typeof R=="string")dd=!0;else if(Array.isArray(R)){var E0=R.concat();wt=[];for(var pd,Io=E0.length;Io--;)(typeof(pd=E0.shift())!="string"||Array.isArray(pd)&&typeof pd[0]!="string")&&(w0=!1);dd=w0}if(dd===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var O0=bt/cr.internal.scaleFactor,T0=O0*(Pc-1);switch(ke.baseline){case"bottom":ye-=T0;break;case"top":ye+=O0-T0;break;case"hanging":ye+=O0-2*T0;break;case"middle":ye+=O0/2-T0}if((Hn=ke.maxWidth||0)>0&&(typeof R=="string"?R=cr.splitTextToSize(R,Hn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Li,tr){return Li.concat(cr.splitTextToSize(tr,Hn))},[]))),vt={text:R,x:H,y:ye,options:ke,mutex:{pdfEscape:er,activeFontKey:pn,fonts:zn,activeFontSize:bt}},Si.publish("preProcessText",vt),R=vt.text,ln=(ke=vt.options).angle,$r instanceof Pn==0&&ln&&typeof ln=="number"){ln*=Math.PI/180,ke.rotationDirection===0&&(ln=-ln),J===K&&(ln=-ln);var hg=Math.cos(ln),_g=Math.sin(ln);$r=new Pn(hg,_g,-_g,hg,0,0)}else ln&&ln instanceof Pn&&($r=ln);J!==K||$r||($r=Gs),(Dn=ke.charSpace||Cc)!==void 0&&(ko+=ae(ge(Dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pr=ke.horizontalScale)!==void 0&&(ko+=ae(100*Pr)+` Tz
`),ke.lang;var ga=-1,Ec=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,em=cr.internal.getCurrentPageInfo().pageContext;switch(Ec){case 0:case!1:case"fill":ga=0;break;case 1:case!0:case"stroke":ga=1;break;case 2:case"fillThenStroke":ga=2;break;case 3:case"invisible":ga=3;break;case 4:case"fillAndAddForClipping":ga=4;break;case 5:case"strokeAndAddPathForClipping":ga=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ga=6;break;case 7:case"addToPathForClipping":ga=7}var L_=em.usedRenderingMode!==void 0?em.usedRenderingMode:-1;ga!==-1?ko+=ga+` Tr
`:L_!==-1&&(ko+=`0 Tr
`),ga!==-1&&(em.usedRenderingMode=ga),hn=ke.align||"left";var Cs,k0=bt*Pc,vg=cr.internal.pageSize.getWidth(),xg=zn[pn];Dn=ke.charSpace||Cc,Hn=ke.maxWidth||0,xi=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var md=[],I0=function(Li){return cr.getStringUnitWidth(Li,{font:xg,charSpace:Dn,fontSize:bt,doKerning:!1})*bt/Js};if(Object.prototype.toString.call(R)==="[object Array]"){var Qa;wt=fg(R),hn!=="left"&&(Cs=wt.map(I0));var Xa,ud=0;if(hn==="right"){H-=Cs[0],R=[],Io=wt.length;for(var Oc=0;Oc<Io;Oc++)Oc===0?(Xa=xc(H),Qa=yc(ye)):(Xa=ge(ud-Cs[Oc]),Qa=-k0),R.push([wt[Oc],Xa,Qa]),ud=Cs[Oc]}else if(hn==="center"){H-=Cs[0]/2,R=[],Io=wt.length;for(var gd=0;gd<Io;gd++)gd===0?(Xa=xc(H),Qa=yc(ye)):(Xa=ge((ud-Cs[gd])/2),Qa=-k0),R.push([wt[gd],Xa,Qa]),ud=Cs[gd]}else if(hn==="left"){R=[],Io=wt.length;for(var yg=0;yg<Io;yg++)R.push(wt[yg])}else if(hn==="justify"&&xg.encoding==="Identity-H"){R=[],Io=wt.length,Hn=Hn!==0?Hn:vg;for(var tm=0,Lr=0;Lr<Io;Lr++)if(Qa=Lr===0?yc(ye):-k0,Xa=Lr===0?xc(H):tm,Lr<Io-1){var V_=ge((Hn-Cs[Lr])/(wt[Lr].split(" ").length-1)),Dl=wt[Lr].split(" ");R.push([Dl[0]+" ",Xa,Qa]),tm=0;for(var Al=1;Al<Dl.length;Al++){var Cg=(I0(Dl[Al-1]+" "+Dl[Al])-I0(Dl[Al]))*Js+V_;Al==Dl.length-1?R.push([Dl[Al],Cg,0]):R.push([Dl[Al]+" ",Cg,0]),tm-=Cg}}else R.push([wt[Lr],Xa,Qa]);R.push(["",tm,0])}else{if(hn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Io=wt.length,Hn=Hn!==0?Hn:vg,Lr=0;Lr<Io;Lr++){Qa=Lr===0?yc(ye):-k0,Xa=Lr===0?xc(H):0;var bg=wt[Lr].split(" ").length-1,Mg=bg>0?(Hn-Cs[Lr])/bg:0;Lr<Io-1?md.push(ae(ge(Mg))):md.push(0),R.push([wt[Lr],Xa,Qa])}}}(typeof ke.R2L=="boolean"?ke.R2L:Cn)===!0&&(R=Zp(R,function(Li,tr,Vr){return[Li.split("").reverse().join(""),tr,Vr]})),vt={text:R,x:H,y:ye,options:ke,mutex:{pdfEscape:er,activeFontKey:pn,fonts:zn,activeFontSize:bt}},Si.publish("postProcessText",vt),R=vt.text,Yr=vt.mutex.isHex||!1;var Sg=zn[pn].encoding;Sg!=="WinAnsiEncoding"&&Sg!=="StandardEncoding"||(R=Zp(R,function(Li,tr,Vr){return[wc(Li),tr,Vr]})),wt=fg(R),R=[];for(var fd,hd,_d,D0=Array.isArray(wt[0])?1:0,vd="",A0=function(Li,tr,Vr){var io="";return Vr instanceof Pn?(Vr=typeof ke.angle=="number"?Hs(Vr,new Pn(1,0,0,1,Li,tr)):Hs(new Pn(1,0,0,1,Li,tr),Vr),J===K&&(Vr=Hs(new Pn(1,0,0,-1,0,0),Vr)),io=Vr.join(" ")+` Tm
`):io=ae(Li)+" "+ae(tr)+` Td
`,io},bs=0;bs<wt.length;bs++){switch(vd="",D0){case 1:_d=(Yr?"<":"(")+wt[bs][0]+(Yr?">":")"),fd=parseFloat(wt[bs][1]),hd=parseFloat(wt[bs][2]);break;case 0:_d=(Yr?"<":"(")+wt[bs]+(Yr?">":")"),fd=xc(H),hd=yc(ye)}md!==void 0&&md[bs]!==void 0&&(vd=md[bs]+` Tw
`),bs===0?R.push(vd+A0(fd,hd,$r)+_d):D0===0?R.push(vd+_d):D0===1&&R.push(vd+A0(fd,hd,$r)+_d)}R=D0===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Rl=`BT
/`;return Rl+=pn+" "+bt+` Tf
`,Rl+=ae(bt*Pc)+` TL
`,Rl+=M0+`
`,Rl+=ko,Rl+=R,de(Rl+="ET"),T[pn]=!0,cr};var wM=w.__private__.clip=w.clip=function(R){return de(R==="evenodd"?"W*":"W"),this};w.clipEvenOdd=function(){return wM("evenodd")},w.__private__.discardPath=w.discardPath=function(){return de("n"),this};var Il=w.__private__.isValidStyle=function(R){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(H=!0),H};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(R){return Il(R)&&(v=R),this};var T_=w.__private__.getStyle=w.getStyle=function(R){var H=v;switch(R){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=R}return H},k_=w.close=function(){return de("h"),this};w.stroke=function(){return de("S"),this},w.fill=function(R){return Kp("f",R),this},w.fillEvenOdd=function(R){return Kp("f*",R),this},w.fillStroke=function(R){return Kp("B",R),this},w.fillStrokeEvenOdd=function(R){return Kp("B*",R),this};var Kp=function(R,H){Ji(H)==="object"?OM(H,R):de(R)},C0=function(R){R===null||J===K&&R===void 0||(R=T_(R),de(R))};function EM(R,H,ye,ke,Ye){var vt=new ju(H||this.boundingBox,ye||this.xStep,ke||this.yStep,this.gState,Ye||this.matrix);vt.stream=this.stream;var wt=R+"$$"+this.cloneIndex+++"$$";return Yo(wt,vt),vt}var OM=function(R,H){var ye=Wi[R.key],ke=bn[ye];if(ke instanceof qp)de("q"),de(TM(H)),ke.gState&&w.setGState(ke.gState),de(R.matrix.toString()+" cm"),de("/"+ye+" sh"),de("Q");else if(ke instanceof ju){var Ye=new Pn(1,0,0,-1,0,P0());R.matrix&&(Ye=Ye.multiply(R.matrix||Gs),ye=EM.call(ke,R.key,R.boundingBox,R.xStep,R.yStep,Ye).id),de("q"),de("/Pattern cs"),de("/"+ye+" scn"),ke.gState&&w.setGState(ke.gState),de(H),de("Q")}},TM=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},sg=w.moveTo=function(R,H){return de(ae(ge(R))+" "+ae(Pe(H))+" m"),this},I_=w.lineTo=function(R,H){return de(ae(ge(R))+" "+ae(Pe(H))+" l"),this},Ys=w.curveTo=function(R,H,ye,ke,Ye,vt){return de([ae(ge(R)),ae(Pe(H)),ae(ge(ye)),ae(Pe(ke)),ae(ge(Ye)),ae(Pe(vt)),"c"].join(" ")),this};w.__private__.line=w.line=function(R,H,ye,ke,Ye){if(isNaN(R)||isNaN(H)||isNaN(ye)||isNaN(ke)||!Il(Ye))throw new Error("Invalid arguments passed to jsPDF.line");return J===q?this.lines([[ye-R,ke-H]],R,H,[1,1],Ye||"S"):this.lines([[ye-R,ke-H]],R,H,[1,1]).stroke()},w.__private__.lines=w.lines=function(R,H,ye,ke,Ye,vt){var wt,ln,hn,Dn,Hn,xi,Pr,$r,cr,no,Yr,ko;if(typeof R=="number"&&(ko=ye,ye=H,H=R,R=ko),ke=ke||[1,1],vt=vt||!1,isNaN(H)||isNaN(ye)||!Array.isArray(R)||!Array.isArray(ke)||!Il(Ye)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(sg(H,ye),wt=ke[0],ln=ke[1],Dn=R.length,no=H,Yr=ye,hn=0;hn<Dn;hn++)(Hn=R[hn]).length===2?(no=Hn[0]*wt+no,Yr=Hn[1]*ln+Yr,I_(no,Yr)):(xi=Hn[0]*wt+no,Pr=Hn[1]*ln+Yr,$r=Hn[2]*wt+no,cr=Hn[3]*ln+Yr,no=Hn[4]*wt+no,Yr=Hn[5]*ln+Yr,Ys(xi,Pr,$r,cr,no,Yr));return vt&&k_(),C0(Ye),this},w.path=function(R){for(var H=0;H<R.length;H++){var ye=R[H],ke=ye.c;switch(ye.op){case"m":sg(ke[0],ke[1]);break;case"l":I_(ke[0],ke[1]);break;case"c":Ys.apply(this,ke);break;case"h":k_()}}return this},w.__private__.rect=w.rect=function(R,H,ye,ke,Ye){if(isNaN(R)||isNaN(H)||isNaN(ye)||isNaN(ke)||!Il(Ye))throw new Error("Invalid arguments passed to jsPDF.rect");return J===q&&(ke=-ke),de([ae(ge(R)),ae(Pe(H)),ae(ge(ye)),ae(ge(ke)),"re"].join(" ")),C0(Ye),this},w.__private__.triangle=w.triangle=function(R,H,ye,ke,Ye,vt,wt){if(isNaN(R)||isNaN(H)||isNaN(ye)||isNaN(ke)||isNaN(Ye)||isNaN(vt)||!Il(wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ye-R,ke-H],[Ye-ye,vt-ke],[R-Ye,H-vt]],R,H,[1,1],wt,!0),this},w.__private__.roundedRect=w.roundedRect=function(R,H,ye,ke,Ye,vt,wt){if(isNaN(R)||isNaN(H)||isNaN(ye)||isNaN(ke)||isNaN(Ye)||isNaN(vt)||!Il(wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ln=4/3*(Math.SQRT2-1);return Ye=Math.min(Ye,.5*ye),vt=Math.min(vt,.5*ke),this.lines([[ye-2*Ye,0],[Ye*ln,0,Ye,vt-vt*ln,Ye,vt],[0,ke-2*vt],[0,vt*ln,-Ye*ln,vt,-Ye,vt],[2*Ye-ye,0],[-Ye*ln,0,-Ye,-vt*ln,-Ye,-vt],[0,2*vt-ke],[0,-vt*ln,Ye*ln,-vt,Ye,-vt]],R+Ye,H,[1,1],wt,!0),this},w.__private__.ellipse=w.ellipse=function(R,H,ye,ke,Ye){if(isNaN(R)||isNaN(H)||isNaN(ye)||isNaN(ke)||!Il(Ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*ye,wt=4/3*(Math.SQRT2-1)*ke;return sg(R+ye,H),Ys(R+ye,H-wt,R+vt,H-ke,R,H-ke),Ys(R-vt,H-ke,R-ye,H-wt,R-ye,H),Ys(R-ye,H+wt,R-vt,H+ke,R,H+ke),Ys(R+vt,H+ke,R+ye,H+wt,R+ye,H),C0(Ye),this},w.__private__.circle=w.circle=function(R,H,ye,ke){if(isNaN(R)||isNaN(H)||isNaN(ye)||!Il(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,H,ye,ye,ke)},w.setFont=function(R,H,ye){return ye&&(H=oe(H,ye)),pn=cd(R,H,{disableWarning:!1}),this};var kM=w.__private__.getFont=w.getFont=function(){return zn[cd.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var R,H,ye={};for(R in qn)if(qn.hasOwnProperty(R))for(H in ye[R]=[],qn[R])qn[R].hasOwnProperty(H)&&ye[R].push(H);return ye},w.addFont=function(R,H,ye,ke,Ye){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?Ye=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(ye=oe(ye,ke)),Ni.call(this,R,H,ye,Ye=Ye||"Identity-H")};var b0,lg=n.lineWidth||.200025,IM=w.__private__.getLineWidth=w.getLineWidth=function(){return lg},Rn=w.__private__.setLineWidth=w.setLineWidth=function(R){return lg=R,de(ae(ge(R))+" w"),this};w.__private__.setLineDash=Jt.API.setLineDash=Jt.API.setLineDashPattern=function(R,H){if(R=R||[],H=H||0,isNaN(H)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(ye){return ae(ge(ye))}).join(" "),H=ae(ge(H)),de("["+R+"] "+H+" d"),this};var DM=w.__private__.getLineHeight=w.getLineHeight=function(){return bt*b0};w.__private__.getLineHeight=w.getLineHeight=function(){return bt*b0};var AM=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(b0=R),this},RM=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return b0};AM(n.lineHeight);var xc=w.__private__.getHorizontalCoordinate=function(R){return ge(R)},yc=w.__private__.getVerticalCoordinate=function(R){return J===K?R:Mn[Q].mediaBox.topRightY-Mn[Q].mediaBox.bottomLeftY-ge(R)},FM=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(R){return ae(xc(R))},NM=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(R){return ae(yc(R))},Qp=n.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return xe(Qp)},w.__private__.setStrokeColor=w.setDrawColor=function(R,H,ye,ke){return Qp=Ce({ch1:R,ch2:H,ch3:ye,ch4:ke,pdfColorType:"draw",precision:2}),de(Qp),this};var cg=n.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return xe(cg)},w.__private__.setFillColor=w.setFillColor=function(R,H,ye,ke){return cg=Ce({ch1:R,ch2:H,ch3:ye,ch4:ke,pdfColorType:"fill",precision:2}),de(cg),this};var M0=n.textColor||"0 g",LM=w.__private__.getTextColor=w.getTextColor=function(){return xe(M0)};w.__private__.setTextColor=w.setTextColor=function(R,H,ye,ke){return M0=Ce({ch1:R,ch2:H,ch3:ye,ch4:ke,pdfColorType:"text",precision:3}),this};var Cc=n.charSpace,VM=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(Cc||0)};w.__private__.setCharSpace=w.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cc=R,this};var dg=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(R){var H=w.CapJoinStyles[R];if(H===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dg=H,de(H+" J"),this};var pg=0;w.__private__.setLineJoin=w.setLineJoin=function(R){var H=w.CapJoinStyles[R];if(H===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pg=H,de(H+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(ae(ge(R))+" M"),this},w.GState=e2,w.setGState=function(R){(R=typeof R=="string"?Sn[In[R]]:D_(null,R)).equals(sr)||(de("/"+R.id+" gs"),sr=R)};var D_=function(R,H){if(!R||!In[R]){var ye=!1;for(var ke in Sn)if(Sn.hasOwnProperty(ke)&&Sn[ke].equals(H)){ye=!0;break}if(ye)H=Sn[ke];else{var Ye="GS"+(Object.keys(Sn).length+1).toString(10);Sn[Ye]=H,H.id=Ye}return R&&(In[R]=H.id),Si.publish("addGState",H),H}};w.addGState=function(R,H){return D_(R,H),this},w.saveGraphicsState=function(){return de("q"),ar.push({key:pn,size:bt,color:M0}),this},w.restoreGraphicsState=function(){de("Q");var R=ar.pop();return pn=R.key,bt=R.size,M0=R.color,sr=null,this},w.setCurrentTransformationMatrix=function(R){return de(R.toString()+" cm"),this},w.comment=function(R){return de("#"+R),this};var bc=function(R,H){var ye=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ye},set:function(vt){isNaN(vt)||(ye=parseFloat(vt))}});var ke=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(vt){isNaN(vt)||(ke=parseFloat(vt))}});var Ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ye},set:function(vt){Ye=vt.toString()}}),this},mg=function(R,H,ye,ke){bc.call(this,R,H),this.type="rect";var Ye=ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ye},set:function(wt){isNaN(wt)||(Ye=parseFloat(wt))}});var vt=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(wt){isNaN(wt)||(vt=parseFloat(wt))}}),this},Xp=function(){this.page=Xn,this.currentPage=Q,this.pages=gt.slice(0),this.pagesContext=Mn.slice(0),this.x=gn,this.y=_r,this.matrix=ci,this.width=gg(Q),this.height=R_(Q),this.outputDestination=Nt,this.id="",this.objectNumber=-1};Xp.prototype.restore=function(){Xn=this.page,Q=this.currentPage,Mn=this.pagesContext,gt=this.pages,gn=this.x,_r=this.y,ci=this.matrix,A_(Q,this.width),Mc(Q,this.height),Nt=this.outputDestination};var ug=function(R,H,ye,ke,Ye){vs.push(new Xp),Xn=Q=0,gt=[],gn=R,_r=H,ci=Ye,lr([ye,ke])};for(var S0 in w.beginFormObject=function(R,H,ye,ke,Ye){return ug(R,H,ye,ke,Ye),this},w.endFormObject=function(R){return(function(H){if(qs[H])vs.pop().restore();else{var ye=new Xp,ke="Xo"+(Object.keys(uo).length+1).toString(10);ye.id=ke,qs[H]=ke,uo[ke]=ye,Si.publish("addFormObject",ye),vs.pop().restore()}})(R),this},w.doFormObject=function(R,H){var ye=uo[qs[R]];return de("q"),de(H.toString()+" cm"),de("/"+ye.id+" Do"),de("Q"),this},w.getFormObject=function(R){var H=uo[qs[R]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},w.save=function(R,H){return R=R||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(zp(Jp(kl()),R),typeof zp.unload=="function"&&kn.setTimeout&&setTimeout(zp.unload,911),this):new Promise(function(ye,ke){try{var Ye=zp(Jp(kl()),R);typeof zp.unload=="function"&&kn.setTimeout&&setTimeout(zp.unload,911),ye(Ye)}catch(vt){ke(vt.message)}})},Jt.API)Jt.API.hasOwnProperty(S0)&&(S0==="events"&&Jt.API.events.length?(function(R,H){var ye,ke,Ye;for(Ye=H.length-1;Ye!==-1;Ye--)ye=H[Ye][0],ke=H[Ye][1],R.subscribe.apply(R,[ye].concat(typeof ke=="function"?[ke]:ke))})(Si,Jt.API.events):w[S0]=Jt.API[S0]);function gg(R){return Mn[R].mediaBox.topRightX-Mn[R].mediaBox.bottomLeftX}function A_(R,H){Mn[R].mediaBox.topRightX=H+Mn[R].mediaBox.bottomLeftX}function R_(R){return Mn[R].mediaBox.topRightY-Mn[R].mediaBox.bottomLeftY}function Mc(R,H){Mn[R].mediaBox.topRightY=H+Mn[R].mediaBox.bottomLeftY}var Sc=w.getPageWidth=function(R){return gg(R=R||Q)/An},F_=w.setPageWidth=function(R,H){A_(R,H*An)},P0=w.getPageHeight=function(R){return R_(R=R||Q)/An},N_=w.setPageHeight=function(R,H){Mc(R,H*An)};return w.internal={pdfEscape:er,getStyle:T_,getFont:kM,getFontSize:Kt,getCharSpace:VM,getTextColor:LM,getLineHeight:DM,getLineHeightFactor:RM,getLineWidth:IM,write:It,getHorizontalCoordinate:xc,getVerticalCoordinate:yc,getCoordinateString:FM,getVerticalCoordinateString:NM,collections:{},newObject:vr,newAdditionalObject:ve,newObjectDeferred:qr,newObjectDeferredBegin:ee,getFilters:Qe,putStream:at,events:Si,scaleFactor:An,pageSize:{getWidth:function(){return Sc(Q)},setWidth:function(R){F_(Q,R)},getHeight:function(){return P0(Q)},setHeight:function(R){N_(Q,R)}},encryptionOptions:C,encryption:to,getEncryptor:function(R){return C!==null?to.encryptor(R,0):function(H){return H}},output:E_,getNumberOfPages:xs,get pages(){return gt},out:de,f2:z,f3:Z,getPageInfo:vc,getPageInfoByObjId:O_,getCurrentPageInfo:PM,getPDFVersion:I,Point:bc,Rectangle:mg,Matrix:Pn,hasHotfix:ys},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return Sc(Q)},set:function(R){F_(Q,R)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return P0(Q)},set:function(R){N_(Q,R)},enumerable:!0,configurable:!0}),function(R){for(var H=0,ye=rn.length;H<ye;H++){var ke=Ni.call(this,R[H][0],R[H][1],R[H][2],rn[H][3],!0);O===!1&&(T[ke]=!0);var Ye=R[H][0].split("-");wn({id:ke,fontName:Ye[0],fontStyle:Ye[1]||""})}Si.publish("addFonts",{fonts:zn,dictionary:qn})}.call(w,rn),pn="F1",go(r,e),Si.publish("initialized"),w}Bu.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Bu.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bu.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Bu.prototype.processOwnerPassword=function(n,t){return k4(T4(t).substr(0,5),n)},Bu.prototype.encryptor=function(n,t){var e=T4(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return k4(e,i)}},e2.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||Ji(n)!==Ji(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Jt.API={events:[]},Jt.version="3.0.4";var Nr=Jt.API,A4=1,Gp=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bn=function(n){return n.toFixed(2)},g0=function(n){return n.toFixed(5)};Nr.__acroform__={};var Ja=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},R9=function(n){return n*A4},pc=function(n){var t=new iL,e=sn.internal.getHeight(n)||0,i=sn.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Bn(i)),Number(Bn(e))],t},Zhe=Nr.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<t},e_e=Nr.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<t)},t_e=Nr.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},jr=Nr.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return t_e(n,t-1)},Wr=Nr.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Zhe(n,t-1)},zr=Nr.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return e_e(n,t-1)},n_e=Nr.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=n[0],s=n[1],d=n[2],u=n[3],h={};return h.lowerLeft_X=e(r)||0,h.lowerLeft_Y=i(s+u)||0,h.upperRight_X=e(r+d)||0,h.upperRight_Y=i(s)||0,[Number(Bn(h.lowerLeft_X)),Number(Bn(h.lowerLeft_Y)),Number(Bn(h.upperRight_X)),Number(Bn(h.upperRight_Y))]},i_e=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=I4(n,e),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+r+" "+Bn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=pc(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},I4=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=n.multiline?r.map(function(z){return z.split(`
`)}):r.map(function(z){return[z]});var s=e,d=sn.internal.getHeight(n)||0;d=d<0?-d:d;var u=sn.internal.getWidth(n)||0;u=u<0?-u:u;var h=function(z,Z,ge){if(z+1<r.length){var Pe=Z+" "+r[z+1][0];return Gb(Pe,n,ge).width<=u-4}return!1};s++;e:for(;s>0;){t="",s--;var v,C,O=Gb("3",n,s).height,T=n.multiline?d-s:(d-O)/2,w=T+=2,A=0,I=0,L=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Gb(t,n,s=12).width+", FieldWidth:"+u+`
`;break}for(var B="",q=0,K=0;K<r.length;K++)if(r.hasOwnProperty(K)){var J=!1;if(r[K].length!==1&&L!==r[K].length-1){if((O+2)*(q+2)+2>d)continue e;B+=r[K][L],J=!0,I=K,K--}else{B=(B+=r[K][L]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var Me=parseInt(K),ze=h(Me,B,s),oe=K>=r.length-1;if(ze&&!oe){B+=" ",L=0;continue}if(ze||oe){if(oe)I=Me;else if(n.multiline&&(O+2)*(q+2)+2>d)continue e}else{if(!n.multiline||(O+2)*(q+2)+2>d)continue e;I=Me}}for(var ae="",X=A;X<=I;X++){var pe=r[X];if(n.multiline){if(X===I){ae+=pe[L]+" ",L=(L+1)%pe.length;continue}if(X===A){ae+=pe[pe.length-1]+" ";continue}}ae+=pe[0]+" "}switch(ae=ae.substr(ae.length-1)==" "?ae.substr(0,ae.length-1):ae,C=Gb(ae,n,s).width,n.textAlign){case"right":v=u-C-2;break;case"center":v=(u-C)/2;break;default:v=2}t+=Bn(v)+" "+Bn(w)+` Td
`,t+="("+Gp(ae)+`) Tj
`,t+=-Bn(v)+` 0 Td
`,w=-(s+2),C=0,A=J?I:I+1,q++,B=""}break}return i.text=t,i.fontSize=s,i},Gb=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:r}},r_e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},o_e=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},a_e=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Pl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(r_e)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A4=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new rL,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&o_e(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,r){var s=!i;for(var d in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(d)){var u=i[d],h=[],v=u.Rect;if(u.Rect&&(u.Rect=n_e(u.Rect,r)),r.internal.newObjectDeferredBegin(u.objId,!0),u.DA=sn.createDefaultAppearanceStream(u),Ji(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=v,u.hasAppearanceStream&&!u.appearanceStreamContent){var C=i_e(u);h.push({key:"AP",value:"<</N "+C+">>"}),r.internal.acroformPlugin.xForms.push(C)}if(u.appearanceStreamContent){var O="";for(var T in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(T)){var w=u.appearanceStreamContent[T];if(O+="/"+T+" ",O+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var d in w)if(w.hasOwnProperty(d)){var A=w[d];typeof A=="function"&&(A=A.call(r,u)),O+="/"+d+" "+A+" ",r.internal.acroformPlugin.xForms.indexOf(A)>=0||r.internal.acroformPlugin.xForms.push(A)}}else typeof(A=w)=="function"&&(A=A.call(r,u)),O+="/"+d+" "+A,r.internal.acroformPlugin.xForms.indexOf(A)>=0||r.internal.acroformPlugin.xForms.push(A);O+=">>"}h.push({key:"AP",value:`<<
`+O+">>"})}r.internal.putStream({additionalKeyValues:h,objectId:u.objId}),r.internal.out("endobj")}s&&(function(I,L){for(var B in I)if(I.hasOwnProperty(B)){var q=B,K=I[B];L.internal.newObjectDeferredBegin(K.objId,!0),Ji(K)==="object"&&typeof K.putStream=="function"&&K.putStream(),delete I[q]}})(r.internal.acroformPlugin.xForms,r)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},nL=Nr.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(d){return d};if(Array.isArray(n)){for(var r="[",s=0;s<n.length;s++)switch(s!==0&&(r+=" "),Ji(n[s])){case"boolean":case"number":case"object":r+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),r+="("+Gp(i(n[s].toString()))+")"):r+=n[s].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},S4=function(n,t,e){var i=function(r){return r};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),"("+Gp(i(n))+")"},mc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mc.prototype.toString=function(){return this.objId+" 0 R"},mc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},mc.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:nL(r,this.objId,this.scope)}):r instanceof mc?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var iL=function(){mc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Ja(iL,mc);var rL=function(){mc.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Gp(e(n))+")"}},set:function(e){n=e}})};Ja(rL,mc);var Pl=function n(){mc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');t=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jr(t,3)},set:function(B){B?this.F=Wr(t,3):this.F=zr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');e=B}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(B){i=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(B){i[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(B){i[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(B){i[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(B){i[3]=B}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof t2)return;s="FieldObject"+n.FieldNum++}var B=function(q){return q};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Gp(B(s))+")"},set:function(B){s=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(B){s=B}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(B){u=B}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(B){h=B}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/A4:v},set:function(B){v=B}});var C="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return C},set:function(B){C=B}});var O="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!O||this instanceof t2||this instanceof Hp))return S4(O,this.objId,this.scope)},set:function(B){B=B.toString(),O=B}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Eo==0?S4(T,this.objId,this.scope):T},set:function(B){B=B.toString(),T=this instanceof Eo==0?B.substr(0,1)==="("?Lu(B.substr(1,B.length-2)):Lu(B):B}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Eo==1?Lu(T.substr(1,T.length-1)):T},set:function(B){B=B.toString(),T=this instanceof Eo==1?"/"+B:B}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Eo==0?S4(w,this.objId,this.scope):w},set:function(B){B=B.toString(),w=this instanceof Eo==0?B.substr(0,1)==="("?Lu(B.substr(1,B.length-2)):Lu(B):B}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Eo==1?Lu(w.substr(1,w.length-1)):w},set:function(B){B=B.toString(),w=this instanceof Eo==1?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(B){B=!!B,I=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(B){A=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,1)},set:function(B){B?this.Ff=Wr(this.Ff,1):this.Ff=zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,2)},set:function(B){B?this.Ff=Wr(this.Ff,2):this.Ff=zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,3)},set:function(B){B?this.Ff=Wr(this.Ff,3):this.Ff=zr(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');L=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(L){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Ja(Pl,mc);var Wu=function(){Pl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nL(t,this.objId,this.scope)},set:function(e){var i,r;r=[],typeof(i=e)=="string"&&(r=(function(s,d,u){u||(u=1);for(var h,v=[];h=d.exec(s);)v.push(h[u]);return v})(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,18)},set:function(e){e?this.Ff=Wr(this.Ff,18):this.Ff=zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Wr(this.Ff,19):this.Ff=zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,20)},set:function(e){e?(this.Ff=Wr(this.Ff,20),t.sort()):this.Ff=zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,22)},set:function(e){e?this.Ff=Wr(this.Ff,22):this.Ff=zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,23)},set:function(e){e?this.Ff=Wr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,27)},set:function(e){e?this.Ff=Wr(this.Ff,27):this.Ff=zr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ja(Wu,Pl);var zu=function(){Wu.call(this),this.fontName="helvetica",this.combo=!1};Ja(zu,Wu);var qu=function(){zu.call(this),this.combo=!0};Ja(qu,zu);var Kb=function(){qu.call(this),this.edit=!0};Ja(Kb,qu);var Eo=function(){Pl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,15)},set:function(e){e?this.Ff=Wr(this.Ff,15):this.Ff=zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,16)},set:function(e){e?this.Ff=Wr(this.Ff,16):this.Ff=zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,17)},set:function(e){e?this.Ff=Wr(this.Ff,17):this.Ff=zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,26)},set:function(e){e?this.Ff=Wr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+Gp(e(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(e){Ji(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Ja(Eo,Pl);var Qb=function(){Eo.call(this),this.pushButton=!0};Ja(Qb,Eo);var Hu=function(){Eo.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Ja(Hu,Eo);var t2=function(){var n,t;Pl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,d=[];for(s in d.push("<<"),i)d.push("/"+s+" ("+Gp(r(i[s]))+")");return d.push(">>"),d.join(`
`)},set:function(r){Ji(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ja(t2,Pl),Hu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Hu.prototype.createOption=function(n){var t=new t2;return t.Parent=this,t.optionName=n,this.Kids.push(t),s_e.call(this.scope,t),t};var Xb=function(){Eo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};Ja(Xb,Eo);var Hp=function(){Pl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,13)},set:function(t){t?this.Ff=Wr(this.Ff,13):this.Ff=zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,21)},set:function(t){t?this.Ff=Wr(this.Ff,21):this.Ff=zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,23)},set:function(t){t?this.Ff=Wr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,24)},set:function(t){t?this.Ff=Wr(this.Ff,24):this.Ff=zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,25)},set:function(t){t?this.Ff=Wr(this.Ff,25):this.Ff=zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,26)},set:function(t){t?this.Ff=Wr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ja(Hp,Pl);var Zb=function(){Hp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,14)},set:function(n){n?this.Ff=Wr(this.Ff,14):this.Ff=zr(this.Ff,14)}}),this.password=!0};Ja(Zb,Hp);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=I4(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Bn(sn.internal.getWidth(n))+" "+Bn(sn.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+Bn(s.fontSize)+" Tf "+r),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=pc(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],s=sn.internal.getHeight(n),d=sn.internal.getWidth(n),u=I4(n,n.caption);return r.push("1 g"),r.push("0 0 "+Bn(d)+" "+Bn(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Bn(d-1)+" "+Bn(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+e+" "+Bn(u.fontSize)+" Tf "+i),r.push(u.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Bn(sn.internal.getWidth(n))+" "+Bn(sn.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=sn.RadioButton.Circle.YesNormal,t.D[n]=sn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=pc(n);t.scope=n.scope;var e=[],i=sn.internal.getWidth(n)<=sn.internal.getHeight(n)?sn.internal.getWidth(n)/4:sn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=sn.internal.Bezier_C,s=Number((i*r).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+g0(sn.internal.getWidth(n)/2)+" "+g0(sn.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=[],i=sn.internal.getWidth(n)<=sn.internal.getHeight(n)?sn.internal.getWidth(n)/4:sn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*sn.internal.Bezier_C).toFixed(5)),d=Number((i*sn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+g0(sn.internal.getWidth(n)/2)+" "+g0(sn.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+g0(sn.internal.getWidth(n)/2)+" "+g0(sn.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+d+" "+d+" "+i+" 0 "+i+" c"),e.push("-"+d+" "+i+" -"+i+" "+d+" -"+i+" 0 c"),e.push("-"+i+" -"+d+" -"+d+" -"+i+" 0 -"+i+" c"),e.push(d+" -"+i+" "+i+" -"+d+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=[],i=sn.internal.getWidth(n)<=sn.internal.getHeight(n)?sn.internal.getWidth(n)/4:sn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*sn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+g0(sn.internal.getWidth(n)/2)+" "+g0(sn.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=sn.RadioButton.Cross.YesNormal,t.D[n]=sn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=pc(n);t.scope=n.scope;var e=[],i=sn.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Bn(sn.internal.getWidth(n)-2)+" "+Bn(sn.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Bn(i.x1.x)+" "+Bn(i.x1.y)+" m"),e.push(Bn(i.x2.x)+" "+Bn(i.x2.y)+" l"),e.push(Bn(i.x4.x)+" "+Bn(i.x4.y)+" m"),e.push(Bn(i.x3.x)+" "+Bn(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=sn.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Bn(sn.internal.getWidth(n))+" "+Bn(sn.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Bn(sn.internal.getWidth(n)-2)+" "+Bn(sn.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Bn(e.x1.x)+" "+Bn(e.x1.y)+" m"),i.push(Bn(e.x2.x)+" "+Bn(e.x2.y)+" l"),i.push(Bn(e.x4.x)+" "+Bn(e.x4.y)+" m"),i.push(Bn(e.x3.x)+" "+Bn(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=pc(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Bn(sn.internal.getWidth(n))+" "+Bn(sn.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};sn.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=sn.internal.getWidth(n),e=sn.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},sn.internal.getWidth=function(n){var t=0;return Ji(n)==="object"&&(t=R9(n.Rect[2])),t},sn.internal.getHeight=function(n){var t=0;return Ji(n)==="object"&&(t=R9(n.Rect[3])),t};var s_e=Nr.addField=function(n){if(a_e(this,n),!(n instanceof Pl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Nr.AcroFormChoiceField=Wu,Nr.AcroFormListBox=zu,Nr.AcroFormComboBox=qu,Nr.AcroFormEditBox=Kb,Nr.AcroFormButton=Eo,Nr.AcroFormPushButton=Qb,Nr.AcroFormRadioButton=Hu,Nr.AcroFormCheckBox=Xb,Nr.AcroFormTextField=Hp,Nr.AcroFormPasswordField=Zb,Nr.AcroFormAppearance=sn,Nr.AcroForm={ChoiceField:Wu,ListBox:zu,ComboBox:qu,EditBox:Kb,Button:Eo,PushButton:Qb,RadioButton:Hu,CheckBox:Xb,TextField:Hp,PasswordField:Zb,Appearance:sn},Jt.AcroForm={ChoiceField:Wu,ListBox:zu,ComboBox:qu,EditBox:Kb,Button:Eo,PushButton:Qb,RadioButton:Hu,CheckBox:Xb,TextField:Hp,PasswordField:Zb,Appearance:sn};var BZe=Jt.AcroForm;function oL(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){var t="addImage_";n.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(z,Z){var ge,Pe,Ve,De,Fe,Te=e;if((Z=Z||e)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(ze(z))for(Fe in i)for(Ve=i[Fe],ge=0;ge<Ve.length;ge+=1){for(De=!0,Pe=0;Pe<Ve[ge].length;Pe+=1)if(Ve[ge][Pe]!==void 0&&Ve[ge][Pe]!==z[Pe]){De=!1;break}if(De===!0){Te=Fe;break}}else for(Fe in i)for(Ve=i[Fe],ge=0;ge<Ve.length;ge+=1){for(De=!0,Pe=0;Pe<Ve[ge].length;Pe+=1)if(Ve[ge][Pe]!==void 0&&Ve[ge][Pe]!==z.charCodeAt(Pe)){De=!1;break}if(De===!0){Te=Fe;break}}return Te===e&&Z!==e&&(Te=Z),Te},s=function z(Z){for(var ge=this.internal.write,Pe=this.internal.putStream,Ve=(0,this.internal.getFilters)();Ve.indexOf("FlateEncode")!==-1;)Ve.splice(Ve.indexOf("FlateEncode"),1);Z.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:Z.width}),De.push({key:"Height",value:Z.height}),Z.colorSpace===B.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Z.palette.length/3-1)+" "+("sMask"in Z&&Z.sMask!==void 0?Z.objectId+2:Z.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+Z.colorSpace}),Z.colorSpace===B.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:Z.bitsPerComponent}),"decodeParameters"in Z&&Z.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+Z.decodeParameters+">>"}),"transparency"in Z&&Array.isArray(Z.transparency)&&Z.transparency.length>0){for(var Fe="",Te=0,Je=Z.transparency.length;Te<Je;Te++)Fe+=Z.transparency[Te]+" "+Z.transparency[Te]+" ";De.push({key:"Mask",value:"["+Fe+"]"})}Z.sMask!==void 0&&De.push({key:"SMask",value:Z.objectId+1+" 0 R"});var _t=Z.filter!==void 0?["/"+Z.filter]:void 0;if(Pe({data:Z.data,additionalKeyValues:De,alreadyAppliedFilters:_t,objectId:Z.objectId}),ge("endobj"),"sMask"in Z&&Z.sMask!==void 0){var pt,U=(pt=Z.sMaskBitsPerComponent)!==null&&pt!==void 0?pt:Z.bitsPerComponent,Q={width:Z.width,height:Z.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:Z.sMask};"filter"in Z&&(Q.decodeParameters="/Predictor ".concat(Z.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(Z.width),Q.filter=Z.filter),z.call(this,Q)}if(Z.colorSpace===B.INDEXED){var W=this.internal.newObject();Pe({data:ae(new Uint8Array(Z.palette)),objectId:W}),ge("endobj")}},d=function(){var z=this.internal.collections[t+"images"];for(var Z in z)s.call(this,z[Z])},u=function(){var z,Z=this.internal.collections[t+"images"],ge=this.internal.write;for(var Pe in Z)ge("/I"+(z=Z[Pe]).index,z.objectId,"0","R")},h=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",u))},v=function(){var z=this.internal.collections[t+"images"];return h.call(this),z},C=function(){return Object.keys(this.internal.collections[t+"images"]).length},O=function(z){return typeof n["process"+z.toUpperCase()]=="function"},T=function(z){return Ji(z)==="object"&&z.nodeType===1},w=function(z,Z){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var ge=""+z.getAttribute("src");if(ge.indexOf("data:image/")===0)return Jb(unescape(ge).split("base64,").pop());var Pe=n.loadFile(ge,!0);if(Pe!==void 0)return Pe}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var Ve;switch(Z){case"PNG":Ve="image/png";break;case"WEBP":Ve="image/webp";break;default:Ve="image/jpeg"}return Jb(z.toDataURL(Ve,1).split("base64,").pop())}},A=function(z){var Z=this.internal.collections[t+"images"];if(Z){for(var ge in Z)if(z===Z[ge].alias)return Z[ge]}},I=function(z,Z,ge){return z||Z||(z=-96,Z=-96),z<0&&(z=-1*ge.width*72/z/this.internal.scaleFactor),Z<0&&(Z=-1*ge.height*72/Z/this.internal.scaleFactor),z===0&&(z=Z*ge.width/ge.height),Z===0&&(Z=z*ge.height/ge.width),[z,Z]},L=function(z,Z,ge,Pe,Ve,De){var Fe=I.call(this,ge,Pe,Ve),Te=this.internal.getCoordinateString,Je=this.internal.getVerticalCoordinateString,_t=v.call(this);if(ge=Fe[0],Pe=Fe[1],_t[Ve.index]=Ve,De){De*=Math.PI/180;var pt=Math.cos(De),U=Math.sin(De),Q=function(Y){return Y.toFixed(4)},W=[Q(pt),Q(U),Q(-1*U),Q(pt),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,Te(z),Je(Z+Pe),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([Te(ge),"0","0",Te(Pe),"0","0","cm"].join(" "))):this.internal.write([Te(ge),"0","0",Te(Pe),Te(z),Je(Z+Pe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ve.index+" Do"),this.internal.write("Q")},B=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},K=n.__addimage__.sHashCode=function(z){var Z,ge,Pe=0;if(typeof z=="string")for(ge=z.length,Z=0;Z<ge;Z++)Pe=(Pe<<5)-Pe+z.charCodeAt(Z),Pe|=0;else if(ze(z))for(ge=z.byteLength/2,Z=0;Z<ge;Z++)Pe=(Pe<<5)-Pe+z[Z],Pe|=0;return Pe},J=n.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var Z=!0;return z.length===0&&(Z=!1),z.length%4!=0&&(Z=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(Z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(Z=!1),Z},Me=n.__addimage__.extractImageFromDataUrl=function(z){if(z==null||!(z=z.trim()).startsWith("data:"))return null;var Z=z.indexOf(",");return Z<0?null:z.substring(0,Z).trim().endsWith("base64")?z.substring(Z+1):null};n.__addimage__.isArrayBuffer=function(z){return z instanceof ArrayBuffer};var ze=n.__addimage__.isArrayBufferView=function(z){return z instanceof Int8Array||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array},oe=n.__addimage__.binaryStringToUint8Array=function(z){for(var Z=z.length,ge=new Uint8Array(Z),Pe=0;Pe<Z;Pe++)ge[Pe]=z.charCodeAt(Pe);return ge},ae=n.__addimage__.arrayBufferToBinaryString=function(z){for(var Z="",ge=ze(z)?z:new Uint8Array(z),Pe=0;Pe<ge.length;Pe+=8192)Z+=String.fromCharCode.apply(null,ge.subarray(Pe,Pe+8192));return Z};n.addImage=function(){var z,Z,ge,Pe,Ve,De,Fe,Te,Je;if(typeof arguments[1]=="number"?(Z=e,ge=arguments[1],Pe=arguments[2],Ve=arguments[3],De=arguments[4],Fe=arguments[5],Te=arguments[6],Je=arguments[7]):(Z=arguments[1],ge=arguments[2],Pe=arguments[3],Ve=arguments[4],De=arguments[5],Fe=arguments[6],Te=arguments[7],Je=arguments[8]),Ji(z=arguments[0])==="object"&&!T(z)&&"imageData"in z){var _t=z;z=_t.imageData,Z=_t.format||Z||e,ge=_t.x||ge||0,Pe=_t.y||Pe||0,Ve=_t.w||_t.width||Ve,De=_t.h||_t.height||De,Fe=_t.alias||Fe,Te=_t.compression||Te,Je=_t.rotation||_t.angle||Je}var pt=this.internal.getFilters();if(Te===void 0&&pt.indexOf("FlateEncode")!==-1&&(Te="SLOW"),isNaN(ge)||isNaN(Pe))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var U=X.call(this,z,Z,Fe,Te);return L.call(this,ge,Pe,Ve,De,U,Je),this};var X=function(z,Z,ge,Pe){var Ve,De,Fe;if(typeof z=="string"&&r(z)===e){z=unescape(z);var Te=pe(z,!1);(Te!==""||(Te=n.loadFile(z,!0))!==void 0)&&(z=Te)}if(T(z)&&(z=w(z,Z)),Z=r(z,Z),!O(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(((Fe=ge)==null||Fe.length===0)&&(ge=(function(Je){return typeof Je=="string"||ze(Je)?K(Je):ze(Je.data)?K(Je.data):null})(z)),(Ve=A.call(this,ge))||(z instanceof Uint8Array||Z==="RGBA"||(De=z,z=oe(z)),Ve=this["process"+Z.toUpperCase()](z,C.call(this),ge,(function(Je){return Je&&typeof Je=="string"&&(Je=Je.toUpperCase()),Je in n.image_compression?Je:q.NONE})(Pe),De)),!Ve)throw new Error("An unknown error occurred whilst processing the image.");return Ve},pe=n.__addimage__.convertBase64ToBinaryString=function(z,Z){Z=typeof Z!="boolean"||Z;var ge,Pe="";if(typeof z=="string"){var Ve;ge=(Ve=Me(z))!==null&&Ve!==void 0?Ve:z;try{Pe=Jb(ge)}catch(De){if(Z)throw J(ge)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Pe};n.getImageProperties=function(z){var Z,ge,Pe="";if(T(z)&&(z=w(z)),typeof z=="string"&&r(z)===e&&((Pe=pe(z,!1))===""&&(Pe=n.loadFile(z)||""),z=Pe),ge=r(z),!O(ge))throw new Error("addImage does not support files of type '"+ge+"', please ensure that a plugin for '"+ge+"' support is added.");if(z instanceof Uint8Array||(z=oe(z)),!(Z=this["process"+ge.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return Z.fileType=ge,Z}})(Jt.API),(function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Jt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,r,s,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(e.objId),v=e.pageContext.annotations,C=!1,O=0;O<v.length&&!C;O++)switch((i=v[O]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(C=!0);break;case"reference":case"text":case"freetext":C=!0}if(C!=0){this.internal.write("/Annots [");for(var T=0;T<v.length;T++){i=v[T];var w=this.internal.pdfEscape,A=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(I.objId),q=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+d(i.bounds.x)+" "+u(i.bounds.y+i.bounds.h)+" "+d(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y)+"] ")+"/Contents ("+w(B(i.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+w(B(q))+") >>",I.content=s;var K=I.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+d(i.bounds.x+30)+" "+u(i.bounds.y+i.bounds.h)+" "+d(i.bounds.x+i.bounds.w+30)+" "+u(i.bounds.y)+"] ")+" /Parent "+K,i.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(I.objId,"0 R",L.objId,"0 R");break;case"freetext":r="/Rect ["+d(i.bounds.x)+" "+u(i.bounds.y)+" "+d(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y+i.bounds.h)+"] ";var J=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+w(A(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var Me=this.annotations._nameMap[i.options.name];i.options.pageNumber=Me.page,i.options.top=Me.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+w(A(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;default:var ze=u(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+ze+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,r,s,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(e),y:v(i),w:h(e+r),h:v(i+s)},options:d,type:"link"})},n.textWithLink=function(e,i,r,s){var d,u,h=this.getTextWidth(e),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var C=this.splitTextToSize(e,u).length;d=Math.ceil(v*C)}else u=h,d=v;return this.text(e,i,r,s),r+=.2*v,s.align==="center"&&(i-=h/2),s.align==="right"&&(i-=h),this.link(i,r-v,u,d,s),h},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}})(Jt.API),(function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(I){return t[I.charCodeAt(0)]!==void 0},d=n.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},u=n.__arabicParser__.isArabicEndLetter=function(I){return d(I)&&s(I)&&t[I.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(I){return d(I)&&r.indexOf(I.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return d(I)&&s(I)&&t[I.charCodeAt(0)].length>=1};var v=n.__arabicParser__.arabicLetterHasFinalForm=function(I){return d(I)&&s(I)&&t[I.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(I){return d(I)&&s(I)&&t[I.charCodeAt(0)].length>=3};var C=n.__arabicParser__.arabicLetterHasMedialForm=function(I){return d(I)&&s(I)&&t[I.charCodeAt(0)].length==4},O=n.__arabicParser__.resolveLigatures=function(I){var L=0,B=e,q="",K=0;for(L=0;L<I.length;L+=1)B[I.charCodeAt(L)]!==void 0?(K++,typeof(B=B[I.charCodeAt(L)])=="number"&&(q+=String.fromCharCode(B),B=e,K=0),L===I.length-1&&(B=e,q+=I.charAt(L-(K-1)),L-=K-1,K=0)):(B=e,q+=I.charAt(L-K),L-=K,K=0);return q};n.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&i[I.charCodeAt(0)]!==void 0};var T=n.__arabicParser__.getCorrectForm=function(I,L,B){return d(I)?s(I)===!1?-1:!v(I)||!d(L)&&!d(B)||!d(B)&&u(L)||u(I)&&!d(L)||u(I)&&h(L)||u(I)&&u(L)?0:C(I)&&d(L)&&!u(L)&&d(B)&&v(B)?3:u(I)||!d(B)?1:2:-1},w=function(I){var L=0,B=0,q=0,K="",J="",Me="",ze=(I=I||"").split("\\s+"),oe=[];for(L=0;L<ze.length;L+=1){for(oe.push(""),B=0;B<ze[L].length;B+=1)K=ze[L][B],J=ze[L][B-1],Me=ze[L][B+1],d(K)?(q=T(K,J,Me),oe[L]+=q!==-1?String.fromCharCode(t[K.charCodeAt(0)][q]):K):oe[L]+=K;oe[L]=O(oe[L])}return oe.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var I,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(L)){var q=0;for(B=[],q=0;q<L.length;q+=1)Array.isArray(L[q])?B.push([w(L[q][0]),L[q][1],L[q][2]]):B.push([w(L[q])]);I=B}else I=w(L);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};n.events.push(["preProcessText",A])})(Jt.API),Jt.API.autoPrint=function(n){var t;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(u){e=u}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var r;if((e=e||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Jt.API),(function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(I){h=I}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(I){v=I}});var C=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return C},set:function(I){C=I}});var O=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return O},set:function(I){O=I}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(I){T=I}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(I){w=I}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(I){A=I}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return i.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,v){i.call(this);var C=(v=v||{}).fontSize||this.getFontSize(),O=v.font||this.getFont(),T=v.scaleFactor||this.internal.scaleFactor,w=0,A=0,I=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var B=v.maxWidth;B>0?typeof h=="string"?h=this.splitTextToSize(h,B):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(K,J){return K.concat(L.splitTextToSize(J,B))},[])):h=Array.isArray(h)?h:[h];for(var q=0;q<h.length;q++)w<(I=this.getStringUnitWidth(h[q],{font:O})*C)&&(w=I);return w!==0&&(A=h.length),{w:w/=T,h:Math.max((A*C*this.getLineHeightFactor()-C*(this.getLineHeightFactor()-1))/T,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=n.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var v=this.internal.__cell__.lastCell,C=this.internal.__cell__.padding,O=this.internal.__cell__.margins||t,T=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===h.lineNumber?(h.x=(v.x||0)+(v.width||0),h.y=v.y||0):v.y+v.height+h.height+O.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=O.top,w&&T&&(this.printHeaderRow(h.lineNumber,!0),h.y+=T[0].height)):h.y=v.y+v.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,e===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-C,h.y+C,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+C,{align:"center",baseline:"top",maxWidth:h.width-C-C}):this.text(h.text,h.x+C,h.y+C,{align:"left",baseline:"top",maxWidth:h.width-C-C})),this.internal.__cell__.lastCell=h,this};n.table=function(h,v,C,O,T){if(i.call(this),!C)throw new Error("No data for PDF table.");var w,A,I,L,B=[],q=[],K=[],J={},Me={},ze=[],oe=[],ae=(T=T||{}).autoSize||!1,X=T.printHeaders!==!1,pe=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,z=T.margins||Object.assign({width:this.getPageWidth()},t),Z=typeof T.padding=="number"?T.padding:3,ge=T.headerBackgroundColor||"#c8c8c8",Pe=T.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=Z,this.internal.__cell__.headerBackgroundColor=ge,this.internal.__cell__.headerTextColor=Pe,this.setFontSize(pe),O==null)q=B=Object.keys(C[0]),K=B.map(function(){return"left"});else if(Array.isArray(O)&&Ji(O[0])==="object")for(B=O.map(function(_t){return _t.name}),q=O.map(function(_t){return _t.prompt||_t.name||""}),K=O.map(function(_t){return _t.align||"left"}),w=0;w<O.length;w+=1)Me[O[w].name]=.7499990551181103*O[w].width;else Array.isArray(O)&&typeof O[0]=="string"&&(q=B=O,K=B.map(function(){return"left"}));if(ae||Array.isArray(O)&&typeof O[0]=="string")for(w=0;w<B.length;w+=1){for(J[L=B[w]]=C.map(function(_t){return _t[L]}),this.setFont(void 0,"bold"),ze.push(this.getTextDimensions(q[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=J[L],this.setFont(void 0,"normal"),I=0;I<A.length;I+=1)ze.push(this.getTextDimensions(A[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Me[L]=Math.max.apply(null,ze)+Z+Z,ze=[]}if(X){var Ve={};for(w=0;w<B.length;w+=1)Ve[B[w]]={},Ve[B[w]].text=q[w],Ve[B[w]].align=K[w];var De=u.call(this,Ve,Me);oe=B.map(function(_t){return new s(h,v,Me[_t],De,Ve[_t].text,void 0,Ve[_t].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var Fe=O.reduce(function(_t,pt){return _t[pt.name]=pt.align,_t},{});for(w=0;w<C.length;w+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:w,data:C[w]},this);var Te=u.call(this,C[w],Me);for(I=0;I<B.length;I+=1){var Je=C[w][B[I]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:w,col:I,data:Je},this),d.call(this,new s(h,v,Me[B[I]],Te,Je,w+2,Fe[B[I]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=v,this};var u=function(h,v){var C=this.internal.__cell__.padding,O=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(h).map(function(w){var A=h[w];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,v[w]-C-C)},this).map(function(w){return this.getLineHeightFactor()*w.length*O/T+C+C},this).reduce(function(w,A){return Math.max(w,A)},0)};n.setTableHeaderRow=function(h){i.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,v){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var C;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var O=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(O[0],O[1],O[2],O[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){C=this.internal.__cell__.tableHeaderRow[w].clone(),v&&(C.y=this.internal.__cell__.margins.top||0,T.push(C)),C.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,C),this.setTextColor(A)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),e=!1}})(Jt.API);var aL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],D4=oL(sL),lL=[100,200,300,400,500,600,700,800,900],l_e=oL(lL);function P4(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=(function(s){return aL[s=s||"normal"]?s:"normal"})(n.style),i=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(n.weight),r=(function(s){return typeof D4[s=s||"normal"]=="number"?s:"normal"})(n.stretch);return{family:t,style:e,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:t,style:[r,e,i].join(" ")}}}function F9(n,t,e,i){var r;for(r=e;r>=0&&r<t.length;r+=i)if(n[t[r]])return n[t[r]];for(r=e;r>=0&&r<t.length;r-=i)if(n[t[r]])return n[t[r]]}var c_e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},N9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function L9(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function V9(n){return n.trimLeft()}function d_e(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function p_e(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var $b,B9,U9,Vu,Yb,j9,W9,z9,w4=["times"];function q9(n,t,e,i,r){var s=4,d=G9;switch(r){case Jt.API.image_compression.FAST:s=1,d=H9;break;case Jt.API.image_compression.MEDIUM:s=6,d=$9;break;case Jt.API.image_compression.SLOW:s=9,d=Y9}n=(function(h,v,C,O){for(var T,w=h.length/v,A=new Uint8Array(h.length+w),I=[m_e,H9,G9,$9,Y9],L=0;L<w;L+=1){var B=L*v,q=h.subarray(B,B+v);if(O)A.set(O(q,C,T),B+L);else{for(var K=I.length,J=[],Me=0;Me<K;Me+=1)J[Me]=I[Me](q,C,T);var ze=g_e(J.concat());A.set(J[ze],B+L)}T=q}return A})(n,t,Math.ceil(e*i/8),d);var u=Mb(n,{level:s});return Jt.API.__addimage__.arrayBufferToBinaryString(u)}function m_e(n){var t=Array.apply([],n);return t.unshift(0),t}function H9(n,t){var e=n.length,i=[];i[0]=1;for(var r=0;r<e;r+=1){var s=n[r-t]||0;i[r+1]=n[r]-s+256&255}return i}function G9(n,t,e){var i=n.length,r=[];r[0]=2;for(var s=0;s<i;s+=1){var d=e&&e[s]||0;r[s+1]=n[s]-d+256&255}return r}function $9(n,t,e){var i=n.length,r=[];r[0]=3;for(var s=0;s<i;s+=1){var d=n[s-t]||0,u=e&&e[s]||0;r[s+1]=n[s]+256-(d+u>>>1)&255}return r}function Y9(n,t,e){var i=n.length,r=[];r[0]=4;for(var s=0;s<i;s+=1){var d=u_e(n[s-t]||0,e&&e[s]||0,e&&e[s-t]||0);r[s+1]=n[s]-d+256&255}return r}function u_e(n,t,e){if(n===t&&t===e)return n;var i=Math.abs(t-e),r=Math.abs(n-e),s=Math.abs(n+t-e-e);return i<=r&&i<=s?n:r<=s?t:e}function g_e(n){var t=n.map(function(e){return e.reduce(function(i,r){return i+Math.abs(r)},0)});return t.indexOf(Math.min.apply(null,t))}function E4(n,t,e){var i=t*e,r=Math.floor(i/8),s=16-(i-8*r+e),d=(1<<e)-1;return cL(n,r)>>s&d}function J9(n,t,e,i){var r=e*i,s=Math.floor(r/8),d=16-(r-8*s+i),u=(1<<i)-1,h=(t&u)<<d;(function(v,C,O){if(C+1<v.byteLength)v.setUint16(C,O,!1);else{var T=O>>8&255;v.setUint8(C,T)}})(n,s,cL(n,s)&~(u<<d)&65535|h)}function cL(n,t){return t+1<n.byteLength?n.getUint16(t,!1):n.getUint8(t)<<8}function f_e(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,r=n[t++],s=r>>7,d=1<<1+(7&r);n[t++],n[t++];var u=null,h=null;s&&(u=t,h=d,t+=3*d);var v=!0,C=[],O=0,T=null,w=0,A=null;for(this.width=e,this.height=i;v&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,A=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((z=n[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var I=n[t++];O=n[t++]|n[t++]<<8,T=n[t++],1&I||(T=null),w=I>>2&7,t++;break;case 254:for(;;){if(!((z=n[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var L=n[t++]|n[t++]<<8,B=n[t++]|n[t++]<<8,q=n[t++]|n[t++]<<8,K=n[t++]|n[t++]<<8,J=n[t++],Me=J>>6&1,ze=1<<1+(7&J),oe=u,ae=h,X=!1;J>>7&&(X=!0,oe=t,ae=ze,t+=3*ze);var pe=t;for(t++;;){var z;if(!((z=n[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}C.push({x:L,y:B,width:q,height:K,has_local_palette:X,palette_offset:oe,palette_size:ae,data_offset:pe,data_length:t-pe,transparent_index:T,interlaced:!!Me,delay:O,disposal:w});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return C.length},this.loopCount=function(){return A},this.frameInfo=function(Z){if(Z<0||Z>=C.length)throw new Error("Frame index out of range.");return C[Z]},this.decodeAndBlitFrameBGRA=function(Z,ge){var Pe=this.frameInfo(Z),Ve=Pe.width*Pe.height,De=new Uint8Array(Ve);K9(n,Pe.data_offset,De,Ve);var Fe=Pe.palette_offset,Te=Pe.transparent_index;Te===null&&(Te=256);var Je=Pe.width,_t=e-Je,pt=Je,U=4*(Pe.y*e+Pe.x),Q=4*((Pe.y+Pe.height)*e+Pe.x),W=U,Y=4*_t;Pe.interlaced===!0&&(Y+=4*e*7);for(var ue=8,we=0,qe=De.length;we<qe;++we){var Ae=De[we];if(pt===0&&(pt=Je,(W+=Y)>=Q&&(Y=4*_t+4*e*(ue-1),W=U+(Je+_t)*(ue<<1),ue>>=1)),Ae===Te)W+=4;else{var Re=n[Fe+3*Ae],gt=n[Fe+3*Ae+1],Pt=n[Fe+3*Ae+2];ge[W++]=Pt,ge[W++]=gt,ge[W++]=Re,ge[W++]=255}--pt}},this.decodeAndBlitFrameRGBA=function(Z,ge){var Pe=this.frameInfo(Z),Ve=Pe.width*Pe.height,De=new Uint8Array(Ve);K9(n,Pe.data_offset,De,Ve);var Fe=Pe.palette_offset,Te=Pe.transparent_index;Te===null&&(Te=256);var Je=Pe.width,_t=e-Je,pt=Je,U=4*(Pe.y*e+Pe.x),Q=4*((Pe.y+Pe.height)*e+Pe.x),W=U,Y=4*_t;Pe.interlaced===!0&&(Y+=4*e*7);for(var ue=8,we=0,qe=De.length;we<qe;++we){var Ae=De[we];if(pt===0&&(pt=Je,(W+=Y)>=Q&&(Y=4*_t+4*e*(ue-1),W=U+(Je+_t)*(ue<<1),ue>>=1)),Ae===Te)W+=4;else{var Re=n[Fe+3*Ae],gt=n[Fe+3*Ae+1],Pt=n[Fe+3*Ae+2];ge[W++]=Re,ge[W++]=gt,ge[W++]=Pt,ge[W++]=255}--pt}}}function K9(n,t,e,i){for(var r=n[t++],s=1<<r,d=s+1,u=d+1,h=r+1,v=(1<<h)-1,C=0,O=0,T=0,w=n[t++],A=new Int32Array(4096),I=null;;){for(;C<16&&w!==0;)O|=n[t++]<<C,C+=8,w===1?w=n[t++]:--w;if(C<h)break;var L=O&v;if(O>>=h,C-=h,L!==s){if(L===d)break;for(var B=L<u?L:I,q=0,K=B;K>s;)K=A[K]>>8,++q;var J=K;if(T+q+(B!==L?1:0)>i)return void or.log("Warning, gif stream longer than expected.");e[T++]=J;var Me=T+=q;for(B!==L&&(e[T++]=J),K=B;q--;)K=A[K],e[--Me]=255&K,K>>=8;I!==null&&u<4096&&(A[u++]=I<<8|J,u>=v+1&&h<12&&(++h,v=v<<1|1)),I=L}else u=d+1,v=(1<<(h=r+1))-1,I=null}return T!==i&&or.log("Warning, gif stream shorter than expected."),e}function O4(n){var t,e,i,r,s,d=Math.floor,u=new Array(64),h=new Array(64),v=new Array(64),C=new Array(64),O=new Array(65535),T=new Array(65535),w=new Array(64),A=new Array(64),I=[],L=0,B=7,q=new Array(64),K=new Array(64),J=new Array(64),Me=new Array(256),ze=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ae=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ge=[0,1,2,3,4,5,6,7,8,9,10,11],Pe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(U,Q){for(var W=0,Y=0,ue=new Array,we=1;we<=16;we++){for(var qe=1;qe<=U[we];qe++)ue[Q[Y]]=[],ue[Q[Y]][0]=W,ue[Q[Y]][1]=we,Y++,W++;W*=2}return ue}function Fe(U){for(var Q=U[0],W=U[1]-1;W>=0;)Q&1<<W&&(L|=1<<B),W--,--B<0&&(L==255?(Te(255),Te(0)):Te(L),B=7,L=0)}function Te(U){I.push(U)}function Je(U){Te(U>>8&255),Te(255&U)}function _t(U,Q,W,Y,ue){for(var we,qe=ue[0],Ae=ue[240],Re=(function(bt,fn){var Kt,Cn,_n,Gn,$n,On,ti,Fn,pn,An,gn=0;for(pn=0;pn<8;++pn){Kt=bt[gn],Cn=bt[gn+1],_n=bt[gn+2],Gn=bt[gn+3],$n=bt[gn+4],On=bt[gn+5],ti=bt[gn+6];var _r=Kt+(Fn=bt[gn+7]),ci=Kt-Fn,zn=Cn+ti,qn=Cn-ti,ar=_n+On,bn=_n-On,Wi=Gn+$n,Sn=Gn-$n,In=_r+Wi,sr=_r-Wi,Xn=zn+ar,Mn=zn-ar;bt[gn]=In+Xn,bt[gn+4]=In-Xn;var Si=.707106781*(Mn+sr);bt[gn+2]=sr+Si,bt[gn+6]=sr-Si;var _c=.382683433*((In=Sn+bn)-(Mn=qn+ci)),uo=.5411961*In+_c,qs=1.306562965*Mn+_c,vs=.707106781*(Xn=bn+qn),Pn=ci+vs,Hs=ci-vs;bt[gn+5]=Hs+uo,bt[gn+3]=Hs-uo,bt[gn+1]=Pn+qs,bt[gn+7]=Pn-qs,gn+=8}for(gn=0,pn=0;pn<8;++pn){Kt=bt[gn],Cn=bt[gn+8],_n=bt[gn+16],Gn=bt[gn+24],$n=bt[gn+32],On=bt[gn+40],ti=bt[gn+48];var Gs=Kt+(Fn=bt[gn+56]),Yo=Kt-Fn,ka=Cn+ti,vr=Cn-ti,qr=_n+On,ee=_n-On,ve=Gn+$n,se=Gn-$n,ce=Gs+ve,xe=Gs-ve,Ce=ka+qr,Qe=ka-qr;bt[gn]=ce+Ce,bt[gn+32]=ce-Ce;var at=.707106781*(Qe+xe);bt[gn+16]=xe+at,bt[gn+48]=xe-at;var et=.382683433*((ce=se+ee)-(Qe=vr+Yo)),Xe=.5411961*ce+et,nt=1.306562965*Qe+et,kt=.707106781*(Ce=ee+vr),Lt=Yo+kt,Qt=Yo-kt;bt[gn+40]=Qt+Xe,bt[gn+24]=Qt-Xe,bt[gn+8]=Lt+nt,bt[gn+56]=Lt-nt,gn++}for(pn=0;pn<64;++pn)An=bt[pn]*fn[pn],w[pn]=An>0?An+.5|0:An-.5|0;return w})(U,Q),gt=0;gt<64;++gt)A[oe[gt]]=Re[gt];var Pt=A[0]-W;W=A[0],Pt==0?Fe(Y[0]):(Fe(Y[T[we=32767+Pt]]),Fe(O[we]));for(var Nt=63;Nt>0&&A[Nt]==0;)Nt--;if(Nt==0)return Fe(qe),W;for(var Bt,de=1;de<=Nt;){for(var It=de;A[de]==0&&de<=Nt;)++de;var Ot=de-It;if(Ot>=16){Bt=Ot>>4;for(var rn=1;rn<=Bt;++rn)Fe(Ae);Ot&=15}we=32767+A[de],Fe(ue[(Ot<<4)+T[we]]),Fe(O[we]),de++}return Nt!=63&&Fe(qe),W}function pt(U){U=Math.min(Math.max(U,1),100),s!=U&&((function(Q){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ue=d((W[Y]*Q+50)/100);ue=Math.min(Math.max(ue,1),255),u[oe[Y]]=ue}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],qe=0;qe<64;qe++){var Ae=d((we[qe]*Q+50)/100);Ae=Math.min(Math.max(Ae,1),255),h[oe[qe]]=Ae}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],gt=0,Pt=0;Pt<8;Pt++)for(var Nt=0;Nt<8;Nt++)v[gt]=1/(u[oe[gt]]*Re[Pt]*Re[Nt]*8),C[gt]=1/(h[oe[gt]]*Re[Pt]*Re[Nt]*8),gt++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),s=U)}this.encode=function(U,Q){Q&&pt(Q),I=new Array,L=0,B=7,Je(65496),Je(65504),Je(16),Te(74),Te(70),Te(73),Te(70),Te(0),Te(1),Te(1),Te(0),Je(1),Je(1),Te(0),Te(0),(function(){Je(65499),Je(132),Te(0);for(var Cn=0;Cn<64;Cn++)Te(u[Cn]);Te(1);for(var _n=0;_n<64;_n++)Te(h[_n])})(),(function(Cn,_n){Je(65472),Je(17),Te(8),Je(_n),Je(Cn),Te(3),Te(1),Te(17),Te(0),Te(2),Te(17),Te(1),Te(3),Te(17),Te(1)})(U.width,U.height),(function(){Je(65476),Je(418),Te(0);for(var Cn=0;Cn<16;Cn++)Te(ae[Cn+1]);for(var _n=0;_n<=11;_n++)Te(X[_n]);Te(16);for(var Gn=0;Gn<16;Gn++)Te(pe[Gn+1]);for(var $n=0;$n<=161;$n++)Te(z[$n]);Te(1);for(var On=0;On<16;On++)Te(Z[On+1]);for(var ti=0;ti<=11;ti++)Te(ge[ti]);Te(17);for(var Fn=0;Fn<16;Fn++)Te(Pe[Fn+1]);for(var pn=0;pn<=161;pn++)Te(Ve[pn])})(),Je(65498),Je(12),Te(3),Te(1),Te(0),Te(2),Te(17),Te(3),Te(17),Te(0),Te(63),Te(0);var W=0,Y=0,ue=0;L=0,B=7,this.encode.displayName="_encode_";for(var we,qe,Ae,Re,gt,Pt,Nt,Bt,de,It=U.data,Ot=U.width,rn=U.height,bt=4*Ot,fn=0;fn<rn;){for(we=0;we<bt;){for(gt=bt*fn+we,Nt=-1,Bt=0,de=0;de<64;de++)Pt=gt+(Bt=de>>3)*bt+(Nt=4*(7&de)),fn+Bt>=rn&&(Pt-=bt*(fn+1+Bt-rn)),we+Nt>=bt&&(Pt-=we+Nt-bt+4),qe=It[Pt++],Ae=It[Pt++],Re=It[Pt++],q[de]=(ze[qe]+ze[Ae+256|0]+ze[Re+512|0]>>16)-128,K[de]=(ze[qe+768|0]+ze[Ae+1024|0]+ze[Re+1280|0]>>16)-128,J[de]=(ze[qe+1280|0]+ze[Ae+1536|0]+ze[Re+1792|0]>>16)-128;W=_t(q,v,W,t,i),Y=_t(K,C,Y,e,r),ue=_t(J,C,ue,e,r),we+=32}fn+=8}if(B>=0){var Kt=[];Kt[1]=B+1,Kt[0]=(1<<B+1)-1,Fe(Kt)}return Je(65497),new Uint8Array(I)},n=n||50,(function(){for(var U=String.fromCharCode,Q=0;Q<256;Q++)Me[Q]=U(Q)})(),t=De(ae,X),e=De(Z,ge),i=De(pe,z),r=De(Pe,Ve),(function(){for(var U=1,Q=2,W=1;W<=15;W++){for(var Y=U;Y<Q;Y++)T[32767+Y]=W,O[32767+Y]=[],O[32767+Y][1]=W,O[32767+Y][0]=Y;for(var ue=-(Q-1);ue<=-U;ue++)T[32767+ue]=W,O[32767+ue]=[],O[32767+ue][1]=W,O[32767+ue][0]=Q-1+ue;U<<=1,Q<<=1}})(),(function(){for(var U=0;U<256;U++)ze[U]=19595*U,ze[U+256|0]=38470*U,ze[U+512|0]=7471*U+32768,ze[U+768|0]=-11059*U,ze[U+1024|0]=-21709*U,ze[U+1280|0]=32768*U+8421375,ze[U+1536|0]=-27439*U,ze[U+1792|0]=-5329*U})(),pt(n)}function Sl(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Q9(n){function t(X){if(!X)throw Error("assert :P")}function e(X,pe,z){for(var Z=0;4>Z;Z++)if(X[pe+Z]!=z.charCodeAt(Z))return!0;return!1}function i(X,pe,z,Z,ge){for(var Pe=0;Pe<ge;Pe++)X[pe+Pe]=z[Z+Pe]}function r(X,pe,z,Z){for(var ge=0;ge<Z;ge++)X[pe+ge]=z}function s(X){return new Int32Array(X)}function d(X,pe){for(var z=[],Z=0;Z<X;Z++)z.push(new pe);return z}function u(X,pe){var z=[];return(function Z(ge,Pe,Ve){for(var De=Ve[Pe],Fe=0;Fe<De&&(ge.push(Ve.length>Pe+1?[]:new pe),!(Ve.length<Pe+1));Fe++)Z(ge[Fe],Pe+1,Ve)})(z,0,X),z}var h=function(){var X=this;function pe(E,k){for(var N=1<<k-1>>>0;E&N;)N>>>=1;return N?(E&N-1)+N:E}function z(E,k,N,j,G){t(!(j%N));do E[k+(j-=N)]=G;while(0<j)}function Z(E,k,N,j,G){if(t(2328>=G),512>=G)var te=s(512);else if((te=s(G))==null)return 0;return(function(ne,re,le,fe,Ne,tt){var he,He,Ke=re,ut=1<<le,Ze=s(16),ft=s(16);for(t(Ne!=0),t(fe!=null),t(ne!=null),t(0<le),He=0;He<Ne;++He){if(15<fe[He])return 0;++Ze[fe[He]]}if(Ze[0]==Ne)return 0;for(ft[1]=0,he=1;15>he;++he){if(Ze[he]>1<<he)return 0;ft[he+1]=ft[he]+Ze[he]}for(He=0;He<Ne;++He)he=fe[He],0<fe[He]&&(tt[ft[he]++]=He);if(ft[15]==1)return(fe=new ge).g=0,fe.value=tt[0],z(ne,Ke,1,ut,fe),ut;var xt,Dt=-1,Et=ut-1,vn=0,nn=1,Yn=1,mn=1<<le;for(He=0,he=1,Ne=2;he<=le;++he,Ne<<=1){if(nn+=Yn<<=1,0>(Yn-=Ze[he]))return 0;for(;0<Ze[he];--Ze[he])(fe=new ge).g=he,fe.value=tt[He++],z(ne,Ke+vn,Ne,mn,fe),vn=pe(vn,he)}for(he=le+1,Ne=2;15>=he;++he,Ne<<=1){if(nn+=Yn<<=1,0>(Yn-=Ze[he]))return 0;for(;0<Ze[he];--Ze[he]){if(fe=new ge,(vn&Et)!=Dt){for(Ke+=mn,xt=1<<(Dt=he)-le;15>Dt&&!(0>=(xt-=Ze[Dt]));)++Dt,xt<<=1;ut+=mn=1<<(xt=Dt-le),ne[re+(Dt=vn&Et)].g=xt+le,ne[re+Dt].value=Ke-re-Dt}fe.g=he-le,fe.value=tt[He++],z(ne,Ke+(vn>>le),Ne,mn,fe),vn=pe(vn,he)}}return nn!=2*ft[15]-1?0:ut})(E,k,N,j,G,te)}function ge(){this.value=this.g=0}function Pe(){this.value=this.g=0}function Ve(){this.G=d(5,ge),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(I0,Pe)}function De(E,k,N,j){t(E!=null),t(k!=null),t(2147483648>j),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=k,E.pa=N,E.Jd=k,E.Yc=N+j,E.Zc=4<=j?N+j-4+1:N,qe(E)}function Fe(E,k){for(var N=0;0<k--;)N|=Re(E,128)<<k;return N}function Te(E,k){var N=Fe(E,k);return Ae(E)?-N:N}function Je(E,k,N,j){var G,te=0;for(t(E!=null),t(k!=null),t(4294967288>j),E.Sb=j,E.Ra=0,E.u=0,E.h=0,4<j&&(j=4),G=0;G<j;++G)te+=k[N+G]<<8*G;E.Ra=te,E.bb=j,E.oa=k,E.pa=N}function _t(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<ud-8>>>0,++E.bb,E.u-=8;Y(E)&&(E.h=1,E.u=0)}function pt(E,k){if(t(0<=k),!E.h&&k<=Xa){var N=W(E)&Qa[k];return E.u+=k,_t(E),N}return E.h=1,E.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(E){return E.Ra>>>(E.u&ud-1)>>>0}function Y(E){return t(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>ud}function ue(E,k){E.u=k,E.h=Y(E)}function we(E){E.u>=Oc&&(t(E.u>=Oc),_t(E))}function qe(E){t(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(t(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function Ae(E){return Fe(E,1)}function Re(E,k){var N=E.Ca;0>E.b&&qe(E);var j=E.b,G=N*k>>>8,te=(E.I>>>j>G)+0;for(te?(N-=G,E.I-=G+1<<j>>>0):N=G+1,j=N,G=0;256<=j;)G+=8,j>>=8;return j=7^G+gd[j],E.b-=j,E.Ca=(N<<j)-1,te}function gt(E,k,N){E[k+0]=N>>24&255,E[k+1]=N>>16&255,E[k+2]=N>>8&255,E[k+3]=255&N}function Pt(E,k){return E[k+0]|E[k+1]<<8}function Nt(E,k){return Pt(E,k)|E[k+2]<<16}function Bt(E,k){return Pt(E,k)|Pt(E,k+2)<<16}function de(E,k){var N=1<<k;return t(E!=null),t(0<k),E.X=s(N),E.X==null?0:(E.Mb=32-k,E.Xa=k,1)}function It(E,k){t(E!=null),t(k!=null),t(E.Xa==k.Xa),i(k.X,0,E.X,0,1<<k.Xa)}function Ot(){this.X=[],this.Xa=this.Mb=0}function rn(E,k,N,j){t(N!=null),t(j!=null);var G=N[0],te=j[0];return G==0&&(G=(E*te+k/2)/k),te==0&&(te=(k*G+E/2)/E),0>=G||0>=te?0:(N[0]=G,j[0]=te,1)}function bt(E,k){return E+(1<<k)-1>>>k}function fn(E,k){return((4278255360&E)+(4278255360&k)>>>0&4278255360)+((16711935&E)+(16711935&k)>>>0&16711935)>>>0}function Kt(E,k){X[k]=function(N,j,G,te,ne,re,le){var fe;for(fe=0;fe<ne;++fe){var Ne=X[E](re[le+fe-1],G,te+fe);re[le+fe]=fn(N[j+fe],Ne)}}}function Cn(){this.ud=this.hd=this.jd=0}function _n(E,k){return((4278124286&(E^k))>>>1)+(E&k)>>>0}function Gn(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function $n(E,k){return Gn(E+(E-k+.5>>1))}function On(E,k,N){return Math.abs(k-N)-Math.abs(E-N)}function ti(E,k,N,j,G,te,ne){for(j=te[ne-1],N=0;N<G;++N)te[ne+N]=j=fn(E[k+N],j)}function Fn(E,k,N,j,G){var te;for(te=0;te<N;++te){var ne=E[k+te],re=ne>>8&255,le=16711935&(le=(le=16711935&ne)+((re<<16)+re));j[G+te]=(4278255360&ne)+le>>>0}}function pn(E,k){k.jd=255&E,k.hd=E>>8&255,k.ud=E>>16&255}function An(E,k,N,j,G,te){var ne;for(ne=0;ne<j;++ne){var re=k[N+ne],le=re>>>8,fe=re,Ne=255&(Ne=(Ne=re>>>16)+((E.jd<<24>>24)*(le<<24>>24)>>>5));fe=255&(fe=(fe+=(E.hd<<24>>24)*(le<<24>>24)>>>5)+((E.ud<<24>>24)*(Ne<<24>>24)>>>5)),G[te+ne]=(4278255360&re)+(Ne<<16)+fe}}function gn(E,k,N,j,G){X[k]=function(te,ne,re,le,fe,Ne,tt,he,He){for(le=tt;le<he;++le)for(tt=0;tt<He;++tt)fe[Ne++]=G(re[j(te[ne++])])},X[E]=function(te,ne,re,le,fe,Ne,tt){var he=8>>te.b,He=te.Ea,Ke=te.K[0],ut=te.w;if(8>he)for(te=(1<<te.b)-1,ut=(1<<he)-1;ne<re;++ne){var Ze,ft=0;for(Ze=0;Ze<He;++Ze)Ze&te||(ft=j(le[fe++])),Ne[tt++]=G(Ke[ft&ut]),ft>>=he}else X["VP8LMapColor"+N](le,fe,Ke,ut,Ne,tt,ne,re,He)}}function _r(E,k,N,j,G){for(N=k+N;k<N;){var te=E[k++];j[G++]=te>>16&255,j[G++]=te>>8&255,j[G++]=255&te}}function ci(E,k,N,j,G){for(N=k+N;k<N;){var te=E[k++];j[G++]=te>>16&255,j[G++]=te>>8&255,j[G++]=255&te,j[G++]=te>>24&255}}function zn(E,k,N,j,G){for(N=k+N;k<N;){var te=(ne=E[k++])>>16&240|ne>>12&15,ne=240&ne|ne>>28&15;j[G++]=te,j[G++]=ne}}function qn(E,k,N,j,G){for(N=k+N;k<N;){var te=(ne=E[k++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;j[G++]=te,j[G++]=ne}}function ar(E,k,N,j,G){for(N=k+N;k<N;){var te=E[k++];j[G++]=255&te,j[G++]=te>>8&255,j[G++]=te>>16&255}}function bn(E,k,N,j,G,te){if(te==0)for(N=k+N;k<N;)gt(j,((te=E[k++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),G+=32;else i(j,G,E,k,N)}function Wi(E,k){X[k][0]=X[E+"0"],X[k][1]=X[E+"1"],X[k][2]=X[E+"2"],X[k][3]=X[E+"3"],X[k][4]=X[E+"4"],X[k][5]=X[E+"5"],X[k][6]=X[E+"6"],X[k][7]=X[E+"7"],X[k][8]=X[E+"8"],X[k][9]=X[E+"9"],X[k][10]=X[E+"10"],X[k][11]=X[E+"11"],X[k][12]=X[E+"12"],X[k][13]=X[E+"13"],X[k][14]=X[E+"0"],X[k][15]=X[E+"0"]}function Sn(E){return E==jM||E==WM||E==H_||E==zM}function In(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new In,this.f.kb=new sr,this.sd=null}function Mn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _c(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function uo(E,k){var N=E.T,j=k.ba.f.RGBA,G=j.eb,te=j.fb+E.ka*j.A,ne=Ss[k.ba.S],re=E.y,le=E.O,fe=E.f,Ne=E.N,tt=E.ea,he=E.W,He=k.cc,Ke=k.dc,ut=k.Mc,Ze=k.Nc,ft=E.ka,xt=E.ka+E.T,Dt=E.U,Et=Dt+1>>1;for(ft==0?ne(re,le,null,null,fe,Ne,tt,he,fe,Ne,tt,he,G,te,null,null,Dt):(ne(k.ec,k.fc,re,le,He,Ke,ut,Ze,fe,Ne,tt,he,G,te-j.A,G,te,Dt),++N);ft+2<xt;ft+=2)He=fe,Ke=Ne,ut=tt,Ze=he,Ne+=E.Rc,he+=E.Rc,te+=2*j.A,ne(re,(le+=2*E.fa)-E.fa,re,le,He,Ke,ut,Ze,fe,Ne,tt,he,G,te-j.A,G,te,Dt);return le+=E.fa,E.j+xt<E.o?(i(k.ec,k.fc,re,le,Dt),i(k.cc,k.dc,fe,Ne,Et),i(k.Mc,k.Nc,tt,he,Et),N--):1&xt||ne(re,le,null,null,fe,Ne,tt,he,fe,Ne,tt,he,G,te+j.A,null,null,Dt),N}function qs(E,k,N){var j=E.F,G=[E.J];if(j!=null){var te=E.U,ne=k.ba.S,re=ne==q_||ne==H_;k=k.ba.f.RGBA;var le=[0],fe=E.ka;le[0]=E.T,E.Kb&&(fe==0?--le[0]:(--fe,G[0]-=E.width),E.j+E.ka+E.T==E.o&&(le[0]=E.o-E.j-fe));var Ne=k.eb;fe=k.fb+fe*k.A,E=Z4(j,G[0],E.width,te,le,Ne,fe+(re?0:3),k.A),t(N==le),E&&Sn(ne)&&wg(Ne,fe,re,te,le,k.A)}return 0}function vs(E){var k=E.ma,N=k.ba.S,j=11>N,G=N==W_||N==z_||N==q_||N==UM||N==12||Sn(N);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!vg(k.Oa,E,G?11:12))return 0;if(G&&Sn(N)&&fg(),E.da)alert("todo:use_scaling");else{if(j){if(k.Ib=_c,E.Kb){if(N=E.U+1>>1,k.memory=s(E.U+2*N),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+E.U,k.Mc=k.cc,k.Nc=k.dc+N,k.Ib=uo,fg()}}else alert("todo:EmitYUV");G&&(k.Jb=qs,j&&Js())}if(j&&!h5){for(E=0;256>E;++E)dV[E]=89858*(E-128)+$_>>G_,uV[E]=-22014*(E-128)+$_,mV[E]=-45773*(E-128),pV[E]=113618*(E-128)+$_>>G_;for(E=Og;E<GM;++E)k=76283*(E-16)+$_>>G_,gV[E-Og]=Hr(k,255),fV[E-Og]=Hr(k+8>>4,15);h5=1}return 1}function Pn(E){var k=E.ma,N=E.U,j=E.T;return t(!(1&E.ka)),0>=N||0>=j?0:(N=k.Ib(E,k),k.Jb!=null&&k.Jb(E,k,N),k.Dc+=N,1)}function Hs(E){E.ma.memory=null}function Gs(E,k,N,j){return pt(E,8)!=47?0:(k[0]=pt(E,14)+1,N[0]=pt(E,14)+1,j[0]=pt(E,1),pt(E,3)!=0?0:!E.h)}function Yo(E,k){if(4>E)return E+1;var N=E-2>>1;return(2+(1&E)<<N)+pt(k,N)+1}function ka(E,k){return 120<k?k-120:1<=(N=((N=KL[k-1])>>4)*E+(8-(15&N)))?N:1;var N}function vr(E,k,N){var j=W(N),G=E[k+=255&j].g-8;return 0<G&&(ue(N,N.u+8),j=W(N),k+=E[k].value,k+=j&(1<<G)-1),ue(N,N.u+E[k].g),E[k].value}function qr(E,k,N){return N.g+=E.g,N.value+=E.value<<k>>>0,t(8>=N.g),E.g}function ee(E,k,N){var j=E.xc;return t((k=j==0?0:E.vc[E.md*(N>>j)+(k>>j)])<E.Wb),E.Ya[k]}function ve(E,k,N,j){var G=E.ab,te=E.c*k,ne=E.C;k=ne+k;var re=N,le=j;for(j=E.Ta,N=E.Ua;0<G--;){var fe=E.gc[G],Ne=ne,tt=k,he=re,He=le,Ke=(le=j,re=N,fe.Ea);switch(t(Ne<tt),t(tt<=fe.nc),fe.hc){case 2:Lr(he,He,(tt-Ne)*Ke,le,re);break;case 0:var ut=Ne,Ze=tt,ft=le,xt=re,Dt=(mn=fe).Ea;ut==0&&(yg(he,He,null,null,1,ft,xt),ti(he,He+1,0,0,Dt-1,ft,xt+1),He+=Dt,xt+=Dt,++ut);for(var Et=1<<mn.b,vn=Et-1,nn=bt(Dt,mn.b),Yn=mn.K,mn=mn.w+(ut>>mn.b)*nn;ut<Ze;){var mi=Yn,ro=mn,Jn=1;for(tm(he,He,ft,xt-Dt,1,ft,xt);Jn<Dt;){var un=(Jn&~vn)+Et;un>Dt&&(un=Dt),(0,bg[mi[ro++]>>8&15])(he,He+ +Jn,ft,xt+Jn-Dt,un-Jn,ft,xt+Jn),Jn=un}He+=Dt,xt+=Dt,++ut&vn||(mn+=nn)}tt!=fe.nc&&i(le,re-Ke,le,re+(tt-Ne-1)*Ke,Ke);break;case 1:for(Ke=he,Ze=He,Dt=(he=fe.Ea)-(xt=he&~(ft=(He=1<<fe.b)-1)),ut=bt(he,fe.b),Et=fe.K,fe=fe.w+(Ne>>fe.b)*ut;Ne<tt;){for(vn=Et,nn=fe,Yn=new Cn,mn=Ze+xt,mi=Ze+he;Ze<mn;)pn(vn[nn++],Yn),Mg(Yn,Ke,Ze,He,le,re),Ze+=He,re+=He;Ze<mi&&(pn(vn[nn++],Yn),Mg(Yn,Ke,Ze,Dt,le,re),Ze+=Dt,re+=Dt),++Ne&ft||(fe+=ut)}break;case 3:if(he==le&&He==re&&0<fe.b){for(Ze=le,he=Ke=re+(tt-Ne)*Ke-(xt=(tt-Ne)*bt(fe.Ea,fe.b)),He=le,ft=re,ut=[],xt=(Dt=xt)-1;0<=xt;--xt)ut[xt]=He[ft+xt];for(xt=Dt-1;0<=xt;--xt)Ze[he+xt]=ut[xt];V_(fe,Ne,tt,le,Ke,le,re)}else V_(fe,Ne,tt,he,He,le,re)}re=j,le=N}le!=N&&i(j,N,re,le,te)}function se(E,k){var N=E.V,j=E.Ba+E.c*E.C,G=k-E.C;if(t(k<=E.l.o),t(16>=G),0<G){var te=E.l,ne=E.Ta,re=E.Ua,le=te.width;if(ve(E,G,N,j),G=re=[re],t((N=E.C)<(j=k)),t(te.v<te.va),j>te.o&&(j=te.o),N<te.j){var fe=te.j-N;N=te.j,G[0]+=fe*le}if(N>=j?N=0:(G[0]+=4*te.v,te.ka=N-te.j,te.U=te.va-te.v,te.T=j-N,N=1),N){if(re=re[0],11>(N=E.ca).S){var Ne=N.f.RGBA,tt=(j=N.S,G=te.U,te=te.T,fe=Ne.eb,Ne.A),he=te;for(Ne=Ne.fb+E.Ma*Ne.A;0<he--;){var He=ne,Ke=re,ut=G,Ze=fe,ft=Ne;switch(j){case j_:Sg(He,Ke,ut,Ze,ft);break;case W_:fd(He,Ke,ut,Ze,ft);break;case jM:fd(He,Ke,ut,Ze,ft),wg(Ze,ft,0,ut,1,0);break;case a5:D0(He,Ke,ut,Ze,ft);break;case z_:bn(He,Ke,ut,Ze,ft,1);break;case WM:bn(He,Ke,ut,Ze,ft,1),wg(Ze,ft,0,ut,1,0);break;case q_:bn(He,Ke,ut,Ze,ft,0);break;case H_:bn(He,Ke,ut,Ze,ft,0),wg(Ze,ft,1,ut,1,0);break;case UM:hd(He,Ke,ut,Ze,ft);break;case zM:hd(He,Ke,ut,Ze,ft),X4(Ze,ft,ut,1,0);break;case s5:_d(He,Ke,ut,Ze,ft);break;default:t(0)}re+=le,Ne+=tt}E.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");t(E.Ma<=N.height)}}E.C=k,t(E.C<=E.i)}function ce(E){var k;if(0<E.ua)return 0;for(k=0;k<E.Wb;++k){var N=E.Ya[k].G,j=E.Ya[k].H;if(0<N[1][j[1]+0].g||0<N[2][j[2]+0].g||0<N[3][j[3]+0].g)return 0}return 1}function xe(E,k,N,j,G,te){if(E.Z!=0){var ne=E.qd,re=E.rd;for(t(yd[E.Z]!=null);k<N;++k)yd[E.Z](ne,re,j,G,j,G,te),ne=j,re=G,G+=te;E.qd=ne,E.rd=re}}function Ce(E,k){var N=E.l.ma,j=N.Z==0||N.Z==1?E.l.j:E.C;if(j=E.C<j?j:E.C,t(k<=E.l.o),k>j){var G=E.l.width,te=N.ca,ne=N.tb+G*j,re=E.V,le=E.Ba+E.c*j,fe=E.gc;t(E.ab==1),t(fe[0].hc==3),Al(fe[0],j,k,re,le,te,ne),xe(N,j,k,te,ne,G)}E.C=E.Ma=k}function Qe(E,k,N,j,G,te,ne){var re=E.$/j,le=E.$%j,fe=E.m,Ne=E.s,tt=N+E.$,he=tt;G=N+j*G;var He=N+j*te,Ke=280+Ne.ua,ut=E.Pb?re:16777216,Ze=0<Ne.ua?Ne.Wa:null,ft=Ne.wc,xt=tt<He?ee(Ne,le,re):null;t(E.C<te),t(He<=G);var Dt=!1;e:for(;;){for(;Dt||tt<He;){var Et=0;if(re>=ut){var vn=tt-N;t((ut=E).Pb),ut.wd=ut.m,ut.xd=vn,0<ut.s.ua&&It(ut.s.Wa,ut.s.vb),ut=re+XL}if(le&ft||(xt=ee(Ne,le,re)),t(xt!=null),xt.Qb&&(k[tt]=xt.qb,Dt=!0),!Dt)if(we(fe),xt.jc){Et=fe,vn=k;var nn=tt,Yn=xt.pd[W(Et)&I0-1];t(xt.jc),256>Yn.g?(ue(Et,Et.u+Yn.g),vn[nn]=Yn.value,Et=0):(ue(Et,Et.u+Yn.g-256),t(256<=Yn.value),Et=Yn.value),Et==0&&(Dt=!0)}else Et=vr(xt.G[0],xt.H[0],fe);if(fe.h)break;if(Dt||256>Et){if(!Dt)if(xt.nd)k[tt]=(xt.qb|Et<<8)>>>0;else{if(we(fe),Dt=vr(xt.G[1],xt.H[1],fe),we(fe),vn=vr(xt.G[2],xt.H[2],fe),nn=vr(xt.G[3],xt.H[3],fe),fe.h)break;k[tt]=(nn<<24|Dt<<16|Et<<8|vn)>>>0}if(Dt=!1,++tt,++le>=j&&(le=0,++re,ne!=null&&re<=te&&!(re%16)&&ne(E,re),Ze!=null))for(;he<tt;)Et=k[he++],Ze.X[(506832829*Et&4294967295)>>>Ze.Mb]=Et}else if(280>Et){if(Et=Yo(Et-256,fe),vn=vr(xt.G[4],xt.H[4],fe),we(fe),vn=ka(j,vn=Yo(vn,fe)),fe.h)break;if(tt-N<vn||G-tt<Et)break e;for(nn=0;nn<Et;++nn)k[tt+nn]=k[tt+nn-vn];for(tt+=Et,le+=Et;le>=j;)le-=j,++re,ne!=null&&re<=te&&!(re%16)&&ne(E,re);if(t(tt<=G),le&ft&&(xt=ee(Ne,le,re)),Ze!=null)for(;he<tt;)Et=k[he++],Ze.X[(506832829*Et&4294967295)>>>Ze.Mb]=Et}else{if(!(Et<Ke))break e;for(Dt=Et-280,t(Ze!=null);he<tt;)Et=k[he++],Ze.X[(506832829*Et&4294967295)>>>Ze.Mb]=Et;Et=tt,t(!(Dt>>>(vn=Ze).Xa)),k[Et]=vn.X[Dt],Dt=!0}Dt||t(fe.h==Y(fe))}if(E.Pb&&fe.h&&tt<G)t(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&It(E.s.vb,E.s.Wa);else{if(fe.h)break e;ne?.(E,re>te?te:re),E.a=0,E.$=tt-N}return 1}return E.a=3,0}function at(E){t(E!=null),E.vc=null,E.yc=null,E.Ya=null;var k=E.Wa;k!=null&&(k.X=null),E.vb=null,t(E!=null)}function et(){var E=new Dn;return E==null?null:(E.a=0,E.xb=d5,Wi("Predictor","VP8LPredictors"),Wi("Predictor","VP8LPredictors_C"),Wi("PredictorAdd","VP8LPredictorsAdd"),Wi("PredictorAdd","VP8LPredictorsAdd_C"),Lr=Fn,Mg=An,Sg=_r,fd=ci,hd=zn,_d=qn,D0=ar,X.VP8LMapColor32b=Dl,X.VP8LMapColor8b=Cg,E)}function Xe(E,k,N,j,G){var te=1,ne=[E],re=[k],le=j.m,fe=j.s,Ne=null,tt=0;e:for(;;){if(N)for(;te&&pt(le,1);){var he=ne,He=re,Ke=j,ut=1,Ze=Ke.m,ft=Ke.gc[Ke.ab],xt=pt(Ze,2);if(Ke.Oc&1<<xt)te=0;else{switch(Ke.Oc|=1<<xt,ft.hc=xt,ft.Ea=he[0],ft.nc=He[0],ft.K=[null],++Ke.ab,t(4>=Ke.ab),xt){case 0:case 1:ft.b=pt(Ze,3)+2,ut=Xe(bt(ft.Ea,ft.b),bt(ft.nc,ft.b),0,Ke,ft.K),ft.K=ft.K[0];break;case 3:var Dt,Et=pt(Ze,8)+1,vn=16<Et?0:4<Et?1:2<Et?2:3;if(he[0]=bt(ft.Ea,vn),ft.b=vn,Dt=ut=Xe(Et,1,0,Ke,ft.K)){var nn,Yn=Et,mn=ft,mi=1<<(8>>mn.b),ro=s(mi);if(ro==null)Dt=0;else{var Jn=mn.K[0],un=mn.w;for(ro[0]=mn.K[0][0],nn=1;nn<1*Yn;++nn)ro[nn]=fn(Jn[un+nn],ro[nn-1]);for(;nn<4*mi;++nn)ro[nn]=0;mn.K[0]=null,mn.K[0]=ro,Dt=1}}ut=Dt;break;case 2:break;default:t(0)}te=ut}}if(ne=ne[0],re=re[0],te&&pt(le,1)&&!(te=1<=(tt=pt(le,4))&&11>=tt)){j.a=3;break e}var $t;if($t=te)t:{var Br,Un,fi,mr=j,Do=ne,fa=re,kr=tt,Jo=N,ha=mr.m,oo=mr.s,yi=[null],zi=1,Ir=0,qi=QL[kr];n:for(;;){if(Jo&&pt(ha,1)){var Ao=pt(ha,3)+2,Qs=bt(Do,Ao),Ur=bt(fa,Ao),Ia=Qs*Ur;if(!Xe(Qs,Ur,0,mr,yi))break n;for(yi=yi[0],oo.xc=Ao,Br=0;Br<Ia;++Br){var nr=yi[Br]>>8&65535;yi[Br]=nr,nr>=zi&&(zi=nr+1)}}if(ha.h)break n;for(Un=0;5>Un;++Un){var ao=l5[Un];!Un&&0<kr&&(ao+=1<<kr),Ir<ao&&(Ir=ao)}var es=d(zi*qi,ge),_a=zi,ts=d(_a,Ve);if(ts==null)var ns=null;else t(65536>=_a),ns=ts;var Da=s(Ir);if(ns==null||Da==null||es==null){mr.a=1;break n}var is=es;for(Br=fi=0;Br<zi;++Br){var dr=ns[Br],rs=dr.G,Xs=dr.H,R0=0,Ic=1,Ro=0;for(Un=0;5>Un;++Un){ao=l5[Un],rs[Un]=is,Xs[Un]=fi,!Un&&0<kr&&(ao+=1<<kr);r:{var J_,$M=ao,K_=mr,Tg=Da,vV=is,xV=fi,YM=0,Cd=K_.m,yV=pt(Cd,1);if(r(Tg,0,0,$M),yV){var CV=pt(Cd,1)+1,bV=pt(Cd,1),x5=pt(Cd,bV==0?1:8);Tg[x5]=1,CV==2&&(Tg[x5=pt(Cd,8)]=1);var Q_=1}else{var y5=s(19),C5=pt(Cd,4)+4;if(19<C5){K_.a=3;var X_=0;break r}for(J_=0;J_<C5;++J_)y5[JL[J_]]=pt(Cd,3);var JM=void 0,kg=void 0,b5=K_,MV=y5,Z_=$M,M5=Tg,KM=0,bd=b5.m,S5=8,P5=d(128,ge);i:for(;Z(P5,0,7,MV,19);){if(pt(bd,1)){var SV=2+2*pt(bd,3);if((JM=2+pt(bd,SV))>Z_)break i}else JM=Z_;for(kg=0;kg<Z_&&JM--;){we(bd);var w5=P5[0+(127&W(bd))];ue(bd,bd.u+w5.g);var im=w5.value;if(16>im)M5[kg++]=im,im!=0&&(S5=im);else{var PV=im==16,E5=im-16,wV=$L[E5],O5=pt(bd,GL[E5])+wV;if(kg+O5>Z_)break i;for(var EV=PV?S5:0;0<O5--;)M5[kg++]=EV}}KM=1;break i}KM||(b5.a=3),Q_=KM}(Q_=Q_&&!Cd.h)&&(YM=Z(vV,xV,8,Tg,$M)),Q_&&YM!=0?X_=YM:(K_.a=3,X_=0)}if(X_==0)break n;if(Ic&&YL[Un]==1&&(Ic=is[fi].g==0),R0+=is[fi].g,fi+=X_,3>=Un){var Ig,QM=Da[0];for(Ig=1;Ig<ao;++Ig)Da[Ig]>QM&&(QM=Da[Ig]);Ro+=QM}}if(dr.nd=Ic,dr.Qb=0,Ic&&(dr.qb=(rs[3][Xs[3]+0].value<<24|rs[1][Xs[1]+0].value<<16|rs[2][Xs[2]+0].value)>>>0,R0==0&&256>rs[0][Xs[0]+0].value&&(dr.Qb=1,dr.qb+=rs[0][Xs[0]+0].value<<8)),dr.jc=!dr.Qb&&6>Ro,dr.jc){var e1,Dc=dr;for(e1=0;e1<I0;++e1){var Md=e1,Sd=Dc.pd[Md],t1=Dc.G[0][Dc.H[0]+Md];256<=t1.value?(Sd.g=t1.g+256,Sd.value=t1.value):(Sd.g=0,Sd.value=0,Md>>=qr(t1,8,Sd),Md>>=qr(Dc.G[1][Dc.H[1]+Md],16,Sd),Md>>=qr(Dc.G[2][Dc.H[2]+Md],0,Sd),qr(Dc.G[3][Dc.H[3]+Md],24,Sd))}}}oo.vc=yi,oo.Wb=zi,oo.Ya=ns,oo.yc=es,$t=1;break t}$t=0}if(!(te=$t)){j.a=3;break e}if(0<tt){if(fe.ua=1<<tt,!de(fe.Wa,tt)){j.a=1,te=0;break e}}else fe.ua=0;var XM=j,T5=ne,OV=re,ZM=XM.s,eS=ZM.xc;if(XM.c=T5,XM.i=OV,ZM.md=bt(T5,eS),ZM.wc=eS==0?-1:(1<<eS)-1,N){j.xb=oV;break e}if((Ne=s(ne*re))==null){j.a=1,te=0;break e}te=(te=Qe(j,Ne,0,ne,re,re,null))&&!le.h;break e}return te?(G!=null?G[0]=Ne:(t(Ne==null),t(N)),j.$=0,N||at(fe)):at(fe),te}function nt(E,k){var N=E.c*E.i,j=N+k+16*k;return t(E.c<=k),E.V=s(j),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+N+k,1)}function kt(E,k){var N=E.C,j=k-N,G=E.V,te=E.Ba+E.c*N;for(t(k<=E.l.o);0<j;){var ne=16<j?16:j,re=E.l.ma,le=E.l.width,fe=le*ne,Ne=re.ca,tt=re.tb+le*N,he=E.Ta,He=E.Ua;ve(E,ne,G,te),e5(he,He,Ne,tt,fe),xe(re,N,N+ne,Ne,tt,le),j-=ne,G+=ne*E.c,N+=ne}t(N==k),E.C=E.Ma=k}function Lt(){this.ub=this.yd=this.td=this.Rb=0}function Qt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function qt(){this.Yb=(function(){var E=[];return(function k(N,j,G){for(var te=G[j],ne=0;ne<te&&(N.push(G.length>j+1?[]:0),!(G.length<j+1));ne++)k(N[ne],j+1,G)})(E,0,[3,11]),E})()}function wn(){this.jb=s(3),this.Wc=u([4,8],qt),this.Xc=u([4,17],qt)}function Ni(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function er(){this.ld=this.La=this.dd=this.tc=0}function lr(){this.Na=this.la=0}function go(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $s(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new er),this.Y=0,this.ya=Array(new $s),this.aa=0,this.l=new Yp}function xs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function cd(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new Lt,this.Kc=new Qt,this.ed=new Ni,this.Qa=new Ut,this.Ic=this.$c=this.Aa=0,this.D=new Tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,U),this.ia=0,this.pb=d(4,go),this.Pa=new wn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xs),this.Hd=0,this.rb=Array(new lr),this.sb=0,this.wa=Array(new er),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $s),this.L=this.aa=0,this.gd=u([4,2],er),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hr(E,k){return 0>E?0:E>k?k:E}function Yp(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function SM(){var E=new cd;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Eg||(Eg=Jp)),E}function Gr(E,k,N){return E.a==0&&(E.a=k,E.sc=N,E.cb=0),0}function w_(E,k,N){return 3<=N&&E[k+0]==157&&E[k+1]==1&&E[k+2]==42}function kl(E,k){if(E==null)return 0;if(E.a=0,E.sc="OK",k==null)return Gr(E,2,"null VP8Io passed to VP8GetHeaders()");var N=k.data,j=k.w,G=k.ha;if(4>G)return Gr(E,7,"Truncated header.");var te=N[j+0]|N[j+1]<<8|N[j+2]<<16,ne=E.Od;if(ne.Rb=!(1&te),ne.td=te>>1&7,ne.yd=te>>4&1,ne.ub=te>>5,3<ne.td)return Gr(E,3,"Incorrect keyframe parameters.");if(!ne.yd)return Gr(E,4,"Frame not displayable.");j+=3,G-=3;var re=E.Kc;if(ne.Rb){if(7>G)return Gr(E,7,"cannot parse picture header");if(!w_(N,j,G))return Gr(E,3,"Bad code word");re.c=16383&(N[j+4]<<8|N[j+3]),re.Td=N[j+4]>>6,re.i=16383&(N[j+6]<<8|N[j+5]),re.Ud=N[j+6]>>6,j+=7,G-=7,E.za=re.c+15>>4,E.Ub=re.i+15>>4,k.width=re.c,k.height=re.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,r((te=E.Pa).jb,0,255,te.jb.length),t((te=E.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,r(te.Zb,0,0,te.Zb.length),r(te.Lb,0,0,te.Lb)}if(ne.ub>G)return Gr(E,7,"bad partition length");De(te=E.m,N,j,ne.ub),j+=ne.ub,G-=ne.ub,ne.Rb&&(re.Ld=Ae(te),re.Kd=Ae(te)),re=E.Qa;var le,fe=E.Pa;if(t(te!=null),t(re!=null),re.Cb=Ae(te),re.Cb){if(re.Bb=Ae(te),Ae(te)){for(re.Fb=Ae(te),le=0;4>le;++le)re.Zb[le]=Ae(te)?Te(te,7):0;for(le=0;4>le;++le)re.Lb[le]=Ae(te)?Te(te,6):0}if(re.Bb)for(le=0;3>le;++le)fe.jb[le]=Ae(te)?Fe(te,8):255}else re.Bb=0;if(te.Ka)return Gr(E,3,"cannot parse segment header");if((re=E.ed).zd=Ae(te),re.Tb=Fe(te,6),re.wb=Fe(te,3),re.Pc=Ae(te),re.Pc&&Ae(te)){for(fe=0;4>fe;++fe)Ae(te)&&(re.vd[fe]=Te(te,6));for(fe=0;4>fe;++fe)Ae(te)&&(re.od[fe]=Te(te,6))}if(E.L=re.Tb==0?0:re.zd?1:2,te.Ka)return Gr(E,3,"cannot parse filter header");var Ne=G;if(G=le=j,j=le+Ne,re=Ne,E.Xb=(1<<Fe(E.m,2))-1,Ne<3*(fe=E.Xb))N=7;else{for(le+=3*fe,re-=3*fe,Ne=0;Ne<fe;++Ne){var tt=N[G+0]|N[G+1]<<8|N[G+2]<<16;tt>re&&(tt=re),De(E.Jc[+Ne],N,le,tt),le+=tt,re-=tt,G+=3}De(E.Jc[+fe],N,le,re),N=le<j?0:5}if(N!=0)return Gr(E,N,"cannot parse partitions");for(N=Fe(le=E.m,7),G=Ae(le)?Te(le,4):0,j=Ae(le)?Te(le,4):0,re=Ae(le)?Te(le,4):0,fe=Ae(le)?Te(le,4):0,le=Ae(le)?Te(le,4):0,Ne=E.Qa,tt=0;4>tt;++tt){if(Ne.Cb){var he=Ne.Zb[tt];Ne.Fb||(he+=N)}else{if(0<tt){E.pb[tt]=E.pb[0];continue}he=N}var He=E.pb[tt];He.Sc[0]=qM[Hr(he+G,127)],He.Sc[1]=HM[Hr(he+0,127)],He.Eb[0]=2*qM[Hr(he+j,127)],He.Eb[1]=101581*HM[Hr(he+re,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=qM[Hr(he+fe,117)],He.Qc[1]=HM[Hr(he+le,127)],He.lc=he+le}if(!ne.Rb)return Gr(E,4,"Not a key frame.");for(Ae(te),ne=E.Pa,N=0;4>N;++N){for(G=0;8>G;++G)for(j=0;3>j;++j)for(re=0;11>re;++re)fe=Re(te,iV[N][G][j][re])?Fe(te,8):tV[N][G][j][re],ne.Wc[N][G].Yb[j][re]=fe;for(G=0;17>G;++G)ne.Xc[N][G]=ne.Wc[N][rV[G]]}return E.kc=Ae(te),E.kc&&(E.Bd=Fe(te,8)),E.cb=1}function Jp(E,k,N,j,G,te,ne){var re=k[G].Yb[N];for(N=0;16>G;++G){if(!Re(E,re[N+0]))return G;for(;!Re(E,re[N+1]);)if(re=k[++G].Yb[0],N=0,G==16)return 16;var le=k[G+1].Yb;if(Re(E,re[N+2])){var fe=E,Ne=0;if(Re(fe,(he=re)[(tt=N)+3]))if(Re(fe,he[tt+6])){for(re=0,tt=2*(Ne=Re(fe,he[tt+8]))+(he=Re(fe,he[tt+9+Ne])),Ne=0,he=ZL[tt];he[re];++re)Ne+=Ne+Re(fe,he[re]);Ne+=3+(8<<tt)}else Re(fe,he[tt+7])?(Ne=7+2*Re(fe,165),Ne+=Re(fe,145)):Ne=5+Re(fe,159);else Ne=Re(fe,he[tt+4])?3+Re(fe,he[tt+5]):2;re=le[2]}else Ne=1,re=le[1];le=ne+eV[G],0>(fe=E).b&&qe(fe);var tt,he=fe.b,He=(tt=fe.Ca>>1)-(fe.I>>he)>>31;--fe.b,fe.Ca+=He,fe.Ca|=1,fe.I-=(tt+1&He)<<he,te[le]=((Ne^He)-He)*j[(0<G)+0]}return 16}function E_(E){var k=E.rb[E.sb-1];k.la=0,k.Na=0,r(E.zc,0,0,E.zc.length),E.ja=0}function ys(E,k,N,j,G){G=E[k+N+32*j]+(G>>3),E[k+N+32*j]=-256&G?0>G?0:255:G}function to(E,k,N,j,G,te){ys(E,k,0,N,j+G),ys(E,k,1,N,j+te),ys(E,k,2,N,j-te),ys(E,k,3,N,j-G)}function vc(E){return(20091*E>>16)+E}function O_(E,k,N,j){var G,te=0,ne=s(16);for(G=0;4>G;++G){var re=E[k+0]+E[k+8],le=E[k+0]-E[k+8],fe=(35468*E[k+4]>>16)-vc(E[k+12]),Ne=vc(E[k+4])+(35468*E[k+12]>>16);ne[te+0]=re+Ne,ne[te+1]=le+fe,ne[te+2]=le-fe,ne[te+3]=re-Ne,te+=4,k++}for(G=te=0;4>G;++G)re=(E=ne[te+0]+4)+ne[te+8],le=E-ne[te+8],fe=(35468*ne[te+4]>>16)-vc(ne[te+12]),ys(N,j,0,0,re+(Ne=vc(ne[te+4])+(35468*ne[te+12]>>16))),ys(N,j,1,0,le+fe),ys(N,j,2,0,le-fe),ys(N,j,3,0,re-Ne),te++,j+=32}function PM(E,k,N,j){var G=E[k+0]+4,te=35468*E[k+4]>>16,ne=vc(E[k+4]),re=35468*E[k+1]>>16;to(N,j,0,G+ne,E=vc(E[k+1]),re),to(N,j,1,G+te,E,re),to(N,j,2,G-te,E,re),to(N,j,3,G-ne,E,re)}function wM(E,k,N,j,G){O_(E,k,N,j),G&&O_(E,k+16,N,j+4)}function Il(E,k,N,j){A0(E,k+0,N,j,1),A0(E,k+32,N,j+128,1)}function T_(E,k,N,j){var G;for(E=E[k+0]+4,G=0;4>G;++G)for(k=0;4>k;++k)ys(N,j,k,G,E)}function k_(E,k,N,j){E[k+0]&&Li(E,k+0,N,j),E[k+16]&&Li(E,k+16,N,j+4),E[k+32]&&Li(E,k+32,N,j+128),E[k+48]&&Li(E,k+48,N,j+128+4)}function Kp(E,k,N,j){var G,te=s(16);for(G=0;4>G;++G){var ne=E[k+0+G]+E[k+12+G],re=E[k+4+G]+E[k+8+G],le=E[k+4+G]-E[k+8+G],fe=E[k+0+G]-E[k+12+G];te[0+G]=ne+re,te[8+G]=ne-re,te[4+G]=fe+le,te[12+G]=fe-le}for(G=0;4>G;++G)ne=(E=te[0+4*G]+3)+te[3+4*G],re=te[1+4*G]+te[2+4*G],le=te[1+4*G]-te[2+4*G],fe=E-te[3+4*G],N[j+0]=ne+re>>3,N[j+16]=fe+le>>3,N[j+32]=ne-re>>3,N[j+48]=fe-le>>3,j+=64}function C0(E,k,N){var j,G=k-32,te=Za,ne=255-E[G-1];for(j=0;j<N;++j){var re,le=te,fe=ne+E[k-1];for(re=0;re<N;++re)E[k+re]=le[fe+E[G+re]];k+=32}}function EM(E,k){C0(E,k,4)}function OM(E,k){C0(E,k,8)}function TM(E,k){C0(E,k,16)}function sg(E,k){var N;for(N=0;16>N;++N)i(E,k+32*N,E,k-32,16)}function I_(E,k){var N;for(N=16;0<N;--N)r(E,k,E[k-1],16),k+=32}function Ys(E,k,N){var j;for(j=0;16>j;++j)r(k,N+32*j,E,16)}function kM(E,k){var N,j=16;for(N=0;16>N;++N)j+=E[k-1+32*N]+E[k+N-32];Ys(j>>5,E,k)}function b0(E,k){var N,j=8;for(N=0;16>N;++N)j+=E[k-1+32*N];Ys(j>>4,E,k)}function lg(E,k){var N,j=8;for(N=0;16>N;++N)j+=E[k+N-32];Ys(j>>4,E,k)}function IM(E,k){Ys(128,E,k)}function Rn(E,k,N){return E+2*k+N+2>>2}function DM(E,k){var N,j=k-32;for(j=new Uint8Array([Rn(E[j-1],E[j+0],E[j+1]),Rn(E[j+0],E[j+1],E[j+2]),Rn(E[j+1],E[j+2],E[j+3]),Rn(E[j+2],E[j+3],E[j+4])]),N=0;4>N;++N)i(E,k+32*N,j,0,j.length)}function AM(E,k){var N=E[k-1],j=E[k-1+32],G=E[k-1+64],te=E[k-1+96];gt(E,k+0,16843009*Rn(E[k-1-32],N,j)),gt(E,k+32,16843009*Rn(N,j,G)),gt(E,k+64,16843009*Rn(j,G,te)),gt(E,k+96,16843009*Rn(G,te,te))}function RM(E,k){var N,j=4;for(N=0;4>N;++N)j+=E[k+N-32]+E[k-1+32*N];for(j>>=3,N=0;4>N;++N)r(E,k+32*N,j,4)}function xc(E,k){var N=E[k-1+0],j=E[k-1+32],G=E[k-1+64],te=E[k-1-32],ne=E[k+0-32],re=E[k+1-32],le=E[k+2-32],fe=E[k+3-32];E[k+0+96]=Rn(j,G,E[k-1+96]),E[k+1+96]=E[k+0+64]=Rn(N,j,G),E[k+2+96]=E[k+1+64]=E[k+0+32]=Rn(te,N,j),E[k+3+96]=E[k+2+64]=E[k+1+32]=E[k+0+0]=Rn(ne,te,N),E[k+3+64]=E[k+2+32]=E[k+1+0]=Rn(re,ne,te),E[k+3+32]=E[k+2+0]=Rn(le,re,ne),E[k+3+0]=Rn(fe,le,re)}function yc(E,k){var N=E[k+1-32],j=E[k+2-32],G=E[k+3-32],te=E[k+4-32],ne=E[k+5-32],re=E[k+6-32],le=E[k+7-32];E[k+0+0]=Rn(E[k+0-32],N,j),E[k+1+0]=E[k+0+32]=Rn(N,j,G),E[k+2+0]=E[k+1+32]=E[k+0+64]=Rn(j,G,te),E[k+3+0]=E[k+2+32]=E[k+1+64]=E[k+0+96]=Rn(G,te,ne),E[k+3+32]=E[k+2+64]=E[k+1+96]=Rn(te,ne,re),E[k+3+64]=E[k+2+96]=Rn(ne,re,le),E[k+3+96]=Rn(re,le,le)}function FM(E,k){var N=E[k-1+0],j=E[k-1+32],G=E[k-1+64],te=E[k-1-32],ne=E[k+0-32],re=E[k+1-32],le=E[k+2-32],fe=E[k+3-32];E[k+0+0]=E[k+1+64]=te+ne+1>>1,E[k+1+0]=E[k+2+64]=ne+re+1>>1,E[k+2+0]=E[k+3+64]=re+le+1>>1,E[k+3+0]=le+fe+1>>1,E[k+0+96]=Rn(G,j,N),E[k+0+64]=Rn(j,N,te),E[k+0+32]=E[k+1+96]=Rn(N,te,ne),E[k+1+32]=E[k+2+96]=Rn(te,ne,re),E[k+2+32]=E[k+3+96]=Rn(ne,re,le),E[k+3+32]=Rn(re,le,fe)}function NM(E,k){var N=E[k+0-32],j=E[k+1-32],G=E[k+2-32],te=E[k+3-32],ne=E[k+4-32],re=E[k+5-32],le=E[k+6-32],fe=E[k+7-32];E[k+0+0]=N+j+1>>1,E[k+1+0]=E[k+0+64]=j+G+1>>1,E[k+2+0]=E[k+1+64]=G+te+1>>1,E[k+3+0]=E[k+2+64]=te+ne+1>>1,E[k+0+32]=Rn(N,j,G),E[k+1+32]=E[k+0+96]=Rn(j,G,te),E[k+2+32]=E[k+1+96]=Rn(G,te,ne),E[k+3+32]=E[k+2+96]=Rn(te,ne,re),E[k+3+64]=Rn(ne,re,le),E[k+3+96]=Rn(re,le,fe)}function Qp(E,k){var N=E[k-1+0],j=E[k-1+32],G=E[k-1+64],te=E[k-1+96];E[k+0+0]=N+j+1>>1,E[k+2+0]=E[k+0+32]=j+G+1>>1,E[k+2+32]=E[k+0+64]=G+te+1>>1,E[k+1+0]=Rn(N,j,G),E[k+3+0]=E[k+1+32]=Rn(j,G,te),E[k+3+32]=E[k+1+64]=Rn(G,te,te),E[k+3+64]=E[k+2+64]=E[k+0+96]=E[k+1+96]=E[k+2+96]=E[k+3+96]=te}function cg(E,k){var N=E[k-1+0],j=E[k-1+32],G=E[k-1+64],te=E[k-1+96],ne=E[k-1-32],re=E[k+0-32],le=E[k+1-32],fe=E[k+2-32];E[k+0+0]=E[k+2+32]=N+ne+1>>1,E[k+0+32]=E[k+2+64]=j+N+1>>1,E[k+0+64]=E[k+2+96]=G+j+1>>1,E[k+0+96]=te+G+1>>1,E[k+3+0]=Rn(re,le,fe),E[k+2+0]=Rn(ne,re,le),E[k+1+0]=E[k+3+32]=Rn(N,ne,re),E[k+1+32]=E[k+3+64]=Rn(j,N,ne),E[k+1+64]=E[k+3+96]=Rn(G,j,N),E[k+1+96]=Rn(te,G,j)}function M0(E,k){var N;for(N=0;8>N;++N)i(E,k+32*N,E,k-32,8)}function LM(E,k){var N;for(N=0;8>N;++N)r(E,k,E[k-1],8),k+=32}function Cc(E,k,N){var j;for(j=0;8>j;++j)r(k,N+32*j,E,8)}function VM(E,k){var N,j=8;for(N=0;8>N;++N)j+=E[k+N-32]+E[k-1+32*N];Cc(j>>4,E,k)}function dg(E,k){var N,j=4;for(N=0;8>N;++N)j+=E[k+N-32];Cc(j>>3,E,k)}function pg(E,k){var N,j=4;for(N=0;8>N;++N)j+=E[k-1+32*N];Cc(j>>3,E,k)}function D_(E,k){Cc(128,E,k)}function bc(E,k,N){var j=E[k-N],G=E[k+0],te=3*(G-j)+BM[1020+E[k-2*N]-E[k+N]],ne=U_[112+(te+4>>3)];E[k-N]=Za[255+j+U_[112+(te+3>>3)]],E[k+0]=Za[255+G-ne]}function mg(E,k,N,j){var G=E[k+0],te=E[k+N];return Ms[255+E[k-2*N]-E[k-N]]>j||Ms[255+te-G]>j}function Xp(E,k,N,j){return 4*Ms[255+E[k-N]-E[k+0]]+Ms[255+E[k-2*N]-E[k+N]]<=j}function ug(E,k,N,j,G){var te=E[k-3*N],ne=E[k-2*N],re=E[k-N],le=E[k+0],fe=E[k+N],Ne=E[k+2*N],tt=E[k+3*N];return 4*Ms[255+re-le]+Ms[255+ne-fe]>j?0:Ms[255+E[k-4*N]-te]<=G&&Ms[255+te-ne]<=G&&Ms[255+ne-re]<=G&&Ms[255+tt-Ne]<=G&&Ms[255+Ne-fe]<=G&&Ms[255+fe-le]<=G}function S0(E,k,N,j){var G=2*j+1;for(j=0;16>j;++j)Xp(E,k+j,N,G)&&bc(E,k+j,N)}function gg(E,k,N,j){var G=2*j+1;for(j=0;16>j;++j)Xp(E,k+j*N,1,G)&&bc(E,k+j*N,1)}function A_(E,k,N,j){var G;for(G=3;0<G;--G)S0(E,k+=4*N,N,j)}function R_(E,k,N,j){var G;for(G=3;0<G;--G)gg(E,k+=4,N,j)}function Mc(E,k,N,j,G,te,ne,re){for(te=2*te+1;0<G--;){if(ug(E,k,N,te,ne))if(mg(E,k,N,re))bc(E,k,N);else{var le=E,fe=k,Ne=N,tt=le[fe-2*Ne],he=le[fe-Ne],He=le[fe+0],Ke=le[fe+Ne],ut=le[fe+2*Ne],Ze=27*(xt=BM[1020+3*(He-he)+BM[1020+tt-Ke]])+63>>7,ft=18*xt+63>>7,xt=9*xt+63>>7;le[fe-3*Ne]=Za[255+le[fe-3*Ne]+xt],le[fe-2*Ne]=Za[255+tt+ft],le[fe-Ne]=Za[255+he+Ze],le[fe+0]=Za[255+He-Ze],le[fe+Ne]=Za[255+Ke-ft],le[fe+2*Ne]=Za[255+ut-xt]}k+=j}}function Sc(E,k,N,j,G,te,ne,re){for(te=2*te+1;0<G--;){if(ug(E,k,N,te,ne))if(mg(E,k,N,re))bc(E,k,N);else{var le=E,fe=k,Ne=N,tt=le[fe-Ne],he=le[fe+0],He=le[fe+Ne],Ke=U_[112+(4+(ut=3*(he-tt))>>3)],ut=U_[112+(ut+3>>3)],Ze=Ke+1>>1;le[fe-2*Ne]=Za[255+le[fe-2*Ne]+Ze],le[fe-Ne]=Za[255+tt+ut],le[fe+0]=Za[255+he-Ke],le[fe+Ne]=Za[255+He-Ze]}k+=j}}function F_(E,k,N,j,G,te){Mc(E,k,N,1,16,j,G,te)}function P0(E,k,N,j,G,te){Mc(E,k,1,N,16,j,G,te)}function N_(E,k,N,j,G,te){var ne;for(ne=3;0<ne;--ne)Sc(E,k+=4*N,N,1,16,j,G,te)}function R(E,k,N,j,G,te){var ne;for(ne=3;0<ne;--ne)Sc(E,k+=4,1,N,16,j,G,te)}function H(E,k,N,j,G,te,ne,re){Mc(E,k,G,1,8,te,ne,re),Mc(N,j,G,1,8,te,ne,re)}function ye(E,k,N,j,G,te,ne,re){Mc(E,k,1,G,8,te,ne,re),Mc(N,j,1,G,8,te,ne,re)}function ke(E,k,N,j,G,te,ne,re){Sc(E,k+4*G,G,1,8,te,ne,re),Sc(N,j+4*G,G,1,8,te,ne,re)}function Ye(E,k,N,j,G,te,ne,re){Sc(E,k+4,1,G,8,te,ne,re),Sc(N,j+4,1,G,8,te,ne,re)}function vt(){this.ba=new Xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ln(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hn(){this.ua=0,this.Wa=new Ot,this.vb=new Ot,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ve,this.yc=new ge}function Dn(){this.xb=this.a=0,this.l=new Yp,this.ca=new Xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hn,this.ab=0,this.gc=d(4,ln),this.Oc=0}function Hn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yp,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xi(E,k,N,j,G,te,ne){for(E=E==null?0:E[k+0],k=0;k<ne;++k)G[te+k]=E+N[j+k]&255,E=G[te+k]}function Pr(E,k,N,j,G,te,ne){var re;if(E==null)xi(null,null,N,j,G,te,ne);else for(re=0;re<ne;++re)G[te+re]=E[k+re]+N[j+re]&255}function $r(E,k,N,j,G,te,ne){if(E==null)xi(null,null,N,j,G,te,ne);else{var re,le=E[k+0],fe=le,Ne=le;for(re=0;re<ne;++re)fe=Ne+(le=E[k+re])-fe,Ne=N[j+re]+(-256&fe?0>fe?0:255:fe)&255,fe=le,G[te+re]=Ne}}function cr(E,k,N,j){var G=k.width,te=k.o;if(t(E!=null&&k!=null),0>N||0>=j||N+j>te)return null;if(!E.Cc){if(E.ga==null){var ne;if(E.ga=new Hn,(ne=E.ga==null)||(ne=k.width*k.o,t(E.Gb.length==0),E.Gb=s(ne),E.Uc=0,E.Gb==null?ne=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,ne=1),ne=!ne),!ne){ne=E.ga;var re=E.Fa,le=E.P,fe=E.qc,Ne=E.mb,tt=E.nb,he=le+1,He=fe-1,Ke=ne.l;if(t(re!=null&&Ne!=null&&k!=null),yd[0]=null,yd[1]=xi,yd[2]=Pr,yd[3]=$r,ne.ca=Ne,ne.tb=tt,ne.c=k.width,ne.i=k.height,t(0<ne.c&&0<ne.i),1>=fe)k=0;else if(ne.$a=3&re[le+0],ne.Z=re[le+0]>>2&3,ne.Lc=re[le+0]>>4&3,le=re[le+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||le)k=0;else if(Ke.put=Pn,Ke.ac=vs,Ke.bc=Hs,Ke.ma=ne,Ke.width=k.width,Ke.height=k.height,Ke.Da=k.Da,Ke.v=k.v,Ke.va=k.va,Ke.j=k.j,Ke.o=k.o,ne.$a)e:{t(ne.$a==1),k=et();t:for(;;){if(k==null){k=0;break e}if(t(ne!=null),ne.mc=k,k.c=ne.c,k.i=ne.i,k.l=ne.l,k.l.ma=ne,k.l.width=ne.c,k.l.height=ne.i,k.a=0,Je(k.m,re,he,He),!Xe(ne.c,ne.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&ce(k.s)?(ne.ic=1,re=k.c*k.i,k.Ta=null,k.Ua=0,k.V=s(re),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(ne.ic=0,k=nt(k,ne.c)),!k))break t;k=1;break e}ne.mc=null,k=0}else k=He>=ne.c*ne.i;ne=!k}if(ne)return null;E.ga.Lc!=1?E.Ga=0:j=te-N}t(E.ga!=null),t(N+j<=te);e:{if(k=(re=E.ga).c,te=re.l.o,re.$a==0){if(he=E.rc,He=E.Vc,Ke=E.Fa,le=E.P+1+N*k,fe=E.mb,Ne=E.nb+N*k,t(le<=E.P+E.qc),re.Z!=0)for(t(yd[re.Z]!=null),ne=0;ne<j;++ne)yd[re.Z](he,He,Ke,le,fe,Ne,k),he=fe,He=Ne,Ne+=k,le+=k;else for(ne=0;ne<j;++ne)i(fe,Ne,Ke,le,k),he=fe,He=Ne,Ne+=k,le+=k;E.rc=he,E.Vc=He}else{if(t(re.mc!=null),k=N+j,t((ne=re.mc)!=null),t(k<=ne.i),ne.C>=k)k=1;else if(re.ic||Js(),re.ic){re=ne.V,he=ne.Ba,He=ne.c;var ut=ne.i,Ze=(Ke=1,le=ne.$/He,fe=ne.$%He,Ne=ne.m,tt=ne.s,ne.$),ft=He*ut,xt=He*k,Dt=tt.wc,Et=Ze<xt?ee(tt,fe,le):null;t(Ze<=ft),t(k<=ut),t(ce(tt));t:for(;;){for(;!Ne.h&&Ze<xt;){if(fe&Dt||(Et=ee(tt,fe,le)),t(Et!=null),we(Ne),256>(ut=vr(Et.G[0],Et.H[0],Ne)))re[he+Ze]=ut,++Ze,++fe>=He&&(fe=0,++le<=k&&!(le%16)&&Ce(ne,le));else{if(!(280>ut)){Ke=0;break t}ut=Yo(ut-256,Ne);var vn,nn=vr(Et.G[4],Et.H[4],Ne);if(we(Ne),!(Ze>=(nn=ka(He,nn=Yo(nn,Ne)))&&ft-Ze>=ut)){Ke=0;break t}for(vn=0;vn<ut;++vn)re[he+Ze+vn]=re[he+Ze+vn-nn];for(Ze+=ut,fe+=ut;fe>=He;)fe-=He,++le<=k&&!(le%16)&&Ce(ne,le);Ze<xt&&fe&Dt&&(Et=ee(tt,fe,le))}t(Ne.h==Y(Ne))}Ce(ne,le>k?k:le);break t}!Ke||Ne.h&&Ze<ft?(Ke=0,ne.a=Ne.h?5:3):ne.$=Ze,k=Ke}else k=Qe(ne,ne.V,ne.Ba,ne.c,ne.i,k,kt);if(!k){j=0;break e}}N+j>=te&&(E.Cc=1),j=1}if(!j)return null;if(E.Cc&&((j=E.ga)!=null&&(j.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+N*G}function no(E,k,N,j,G,te){for(;0<G--;){var ne,re=E,le=k+(N?1:0),fe=E,Ne=k+(N?0:3);for(ne=0;ne<j;++ne){var tt=fe[Ne+4*ne];tt!=255&&(tt*=32897,re[le+4*ne+0]=re[le+4*ne+0]*tt>>23,re[le+4*ne+1]=re[le+4*ne+1]*tt>>23,re[le+4*ne+2]=re[le+4*ne+2]*tt>>23)}k+=te}}function Yr(E,k,N,j,G){for(;0<j--;){var te;for(te=0;te<N;++te){var ne=E[k+2*te+0],re=15&(fe=E[k+2*te+1]),le=4369*re,fe=(240&fe|fe>>4)*le>>16;E[k+2*te+0]=(240&ne|ne>>4)*le>>16&240|(15&ne|ne<<4)*le>>16>>4&15,E[k+2*te+1]=240&fe|re}k+=G}}function ko(E,k,N,j,G,te,ne,re){var le,fe,Ne=255;for(fe=0;fe<G;++fe){for(le=0;le<j;++le){var tt=E[k+le];te[ne+4*le]=tt,Ne&=tt}k+=N,ne+=re}return Ne!=255}function Pc(E,k,N,j,G){var te;for(te=0;te<G;++te)N[j+te]=E[k+te]>>8}function Js(){wg=no,X4=Yr,Z4=ko,e5=Pc}function wc(E,k,N){X[E]=function(j,G,te,ne,re,le,fe,Ne,tt,he,He,Ke,ut,Ze,ft,xt,Dt){var Et,vn=Dt-1>>1,nn=re[le+0]|fe[Ne+0]<<16,Yn=tt[he+0]|He[Ke+0]<<16;t(j!=null);var mn=3*nn+Yn+131074>>2;for(k(j[G+0],255&mn,mn>>16,ut,Ze),te!=null&&(mn=3*Yn+nn+131074>>2,k(te[ne+0],255&mn,mn>>16,ft,xt)),Et=1;Et<=vn;++Et){var mi=re[le+Et]|fe[Ne+Et]<<16,ro=tt[he+Et]|He[Ke+Et]<<16,Jn=nn+mi+Yn+ro+524296,un=Jn+2*(mi+Yn)>>3;mn=un+nn>>1,nn=(Jn=Jn+2*(nn+ro)>>3)+mi>>1,k(j[G+2*Et-1],255&mn,mn>>16,ut,Ze+(2*Et-1)*N),k(j[G+2*Et-0],255&nn,nn>>16,ut,Ze+(2*Et-0)*N),te!=null&&(mn=Jn+Yn>>1,nn=un+ro>>1,k(te[ne+2*Et-1],255&mn,mn>>16,ft,xt+(2*Et-1)*N),k(te[ne+2*Et+0],255&nn,nn>>16,ft,xt+(2*Et+0)*N)),nn=mi,Yn=ro}1&Dt||(mn=3*nn+Yn+131074>>2,k(j[G+Dt-1],255&mn,mn>>16,ut,Ze+(Dt-1)*N),te!=null&&(mn=3*Yn+nn+131074>>2,k(te[ne+Dt-1],255&mn,mn>>16,ft,xt+(Dt-1)*N)))}}function fg(){Ss[j_]=aV,Ss[W_]=p5,Ss[a5]=sV,Ss[z_]=m5,Ss[q_]=u5,Ss[UM]=g5,Ss[s5]=lV,Ss[jM]=p5,Ss[WM]=m5,Ss[H_]=u5,Ss[zM]=g5}function Zp(E){return E&~cV?0>E?0:255:E>>f5}function dd(E,k){return Zp((19077*E>>8)+(26149*k>>8)-14234)}function w0(E,k,N){return Zp((19077*E>>8)-(6419*k>>8)-(13320*N>>8)+8708)}function E0(E,k){return Zp((19077*E>>8)+(33050*k>>8)-17685)}function pd(E,k,N,j,G){j[G+0]=dd(E,N),j[G+1]=w0(E,k,N),j[G+2]=E0(E,k)}function Io(E,k,N,j,G){j[G+0]=E0(E,k),j[G+1]=w0(E,k,N),j[G+2]=dd(E,N)}function O0(E,k,N,j,G){var te=w0(E,k,N);k=te<<3&224|E0(E,k)>>3,j[G+0]=248&dd(E,N)|te>>5,j[G+1]=k}function T0(E,k,N,j,G){var te=240&E0(E,k)|15;j[G+0]=240&dd(E,N)|w0(E,k,N)>>4,j[G+1]=te}function hg(E,k,N,j,G){j[G+0]=255,pd(E,k,N,j,G+1)}function _g(E,k,N,j,G){Io(E,k,N,j,G),j[G+3]=255}function ga(E,k,N,j,G){pd(E,k,N,j,G),j[G+3]=255}function Ec(E,k,N){X[E]=function(j,G,te,ne,re,le,fe,Ne,tt){for(var he=Ne+(-2&tt)*N;Ne!=he;)k(j[G+0],te[ne+0],re[le+0],fe,Ne),k(j[G+1],te[ne+0],re[le+0],fe,Ne+N),G+=2,++ne,++le,Ne+=2*N;1&tt&&k(j[G+0],te[ne+0],re[le+0],fe,Ne)}}function em(E,k,N){return N==0?E==0?k==0?6:5:k==0?4:0:N}function L_(E,k,N,j,G){switch(E>>>30){case 3:A0(k,N,j,G,0);break;case 2:bs(k,N,j,G);break;case 1:Li(k,N,j,G)}}function Cs(E,k){var N,j,G=k.M,te=k.Nb,ne=E.oc,re=E.pc+40,le=E.oc,fe=E.pc+584,Ne=E.oc,tt=E.pc+600;for(N=0;16>N;++N)ne[re+32*N-1]=129;for(N=0;8>N;++N)le[fe+32*N-1]=129,Ne[tt+32*N-1]=129;for(0<G?ne[re-1-32]=le[fe-1-32]=Ne[tt-1-32]=129:(r(ne,re-32-1,127,21),r(le,fe-32-1,127,9),r(Ne,tt-32-1,127,9)),j=0;j<E.za;++j){var he=k.ya[k.aa+j];if(0<j){for(N=-1;16>N;++N)i(ne,re+32*N-4,ne,re+32*N+12,4);for(N=-1;8>N;++N)i(le,fe+32*N-4,le,fe+32*N+4,4),i(Ne,tt+32*N-4,Ne,tt+32*N+4,4)}var He=E.Gd,Ke=E.Hd+j,ut=he.ad,Ze=he.Hc;if(0<G&&(i(ne,re-32,He[Ke].y,0,16),i(le,fe-32,He[Ke].f,0,8),i(Ne,tt-32,He[Ke].ea,0,8)),he.Za){var ft=ne,xt=re-32+16;for(0<G&&(j>=E.za-1?r(ft,xt,He[Ke].y[15],4):i(ft,xt,He[Ke+1].y,0,4)),N=0;4>N;N++)ft[xt+128+N]=ft[xt+256+N]=ft[xt+384+N]=ft[xt+0+N];for(N=0;16>N;++N,Ze<<=2)ft=ne,xt=re+_5[N],Ks[he.Ob[N]](ft,xt),L_(Ze,ut,16*+N,ft,xt)}else if(ft=em(j,G,he.Ob[0]),xd[ft](ne,re),Ze!=0)for(N=0;16>N;++N,Ze<<=2)L_(Ze,ut,16*+N,ne,re+_5[N]);for(N=he.Gc,ft=em(j,G,he.Dd),kc[ft](le,fe),kc[ft](Ne,tt),Ze=ut,ft=le,xt=fe,255&(he=0|N)&&(170&he?Rl(Ze,256,ft,xt):tr(Ze,256,ft,xt)),he=Ne,Ze=tt,255&(N>>=8)&&(170&N?Rl(ut,320,he,Ze):tr(ut,320,he,Ze)),G<E.Ub-1&&(i(He[Ke].y,0,ne,re+480,16),i(He[Ke].f,0,le,fe+224,8),i(He[Ke].ea,0,Ne,tt+224,8)),N=8*te*E.B,He=E.sa,Ke=E.ta+16*j+16*te*E.R,ut=E.qa,he=E.ra+8*j+N,Ze=E.Ha,ft=E.Ia+8*j+N,N=0;16>N;++N)i(He,Ke+N*E.R,ne,re+32*N,16);for(N=0;8>N;++N)i(ut,he+N*E.B,le,fe+32*N,8),i(Ze,ft+N*E.B,Ne,tt+32*N,8)}}function k0(E,k,N,j,G,te,ne,re,le){var fe=[0],Ne=[0],tt=0,he=le!=null?le.kd:0,He=le??new wt;if(E==null||12>N)return 7;He.data=E,He.w=k,He.ha=N,k=[k],N=[N],He.gb=[He.gb];e:{var Ke=k,ut=N,Ze=He.gb;if(t(E!=null),t(ut!=null),t(Ze!=null),Ze[0]=0,12<=ut[0]&&!e(E,Ke[0],"RIFF")){if(e(E,Ke[0]+8,"WEBP")){Ze=3;break e}var ft=Bt(E,Ke[0]+4);if(12>ft||4294967286<ft){Ze=3;break e}if(he&&ft>ut[0]-8){Ze=7;break e}Ze[0]=ft,Ke[0]+=12,ut[0]-=12}Ze=0}if(Ze!=0)return Ze;for(ft=0<He.gb[0],N=N[0];;){e:{var xt=E;ut=k,Ze=N;var Dt=fe,Et=Ne,vn=Ke=[0];if((mn=tt=[tt])[0]=0,8>Ze[0])Ze=7;else{if(!e(xt,ut[0],"VP8X")){if(Bt(xt,ut[0]+4)!=10){Ze=3;break e}if(18>Ze[0]){Ze=7;break e}var nn=Bt(xt,ut[0]+8),Yn=1+Nt(xt,ut[0]+12);if(2147483648<=Yn*(xt=1+Nt(xt,ut[0]+15))){Ze=3;break e}vn!=null&&(vn[0]=nn),Dt!=null&&(Dt[0]=Yn),Et!=null&&(Et[0]=xt),ut[0]+=18,Ze[0]-=18,mn[0]=1}Ze=0}}if(tt=tt[0],Ke=Ke[0],Ze!=0)return Ze;if(ut=!!(2&Ke),!ft&&tt)return 3;if(te!=null&&(te[0]=!!(16&Ke)),ne!=null&&(ne[0]=ut),re!=null&&(re[0]=0),ne=fe[0],Ke=Ne[0],tt&&ut&&le==null){Ze=0;break}if(4>N){Ze=7;break}if(ft&&tt||!ft&&!tt&&!e(E,k[0],"ALPH")){N=[N],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{nn=E,Ze=k,ft=N;var mn=He.gb;Dt=He.na,Et=He.P,vn=He.Sa,Yn=22,t(nn!=null),t(ft!=null),xt=Ze[0];var mi=ft[0];for(t(Dt!=null),t(vn!=null),Dt[0]=null,Et[0]=null,vn[0]=0;;){if(Ze[0]=xt,ft[0]=mi,8>mi){Ze=7;break e}var ro=Bt(nn,xt+4);if(4294967286<ro){Ze=3;break e}var Jn=8+ro+1&-2;if(Yn+=Jn,0<mn&&Yn>mn){Ze=3;break e}if(!e(nn,xt,"VP8 ")||!e(nn,xt,"VP8L")){Ze=0;break e}if(mi[0]<Jn){Ze=7;break e}e(nn,xt,"ALPH")||(Dt[0]=nn,Et[0]=xt+8,vn[0]=ro),xt+=Jn,mi-=Jn}}if(N=N[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],Ze!=0)break}N=[N],He.Ja=[He.Ja],He.xa=[He.xa];e:if(mn=E,Ze=k,ft=N,Dt=He.gb[0],Et=He.Ja,vn=He.xa,nn=Ze[0],xt=!e(mn,nn,"VP8 "),Yn=!e(mn,nn,"VP8L"),t(mn!=null),t(ft!=null),t(Et!=null),t(vn!=null),8>ft[0])Ze=7;else{if(xt||Yn){if(mn=Bt(mn,nn+4),12<=Dt&&mn>Dt-12){Ze=3;break e}if(he&&mn>ft[0]-8){Ze=7;break e}Et[0]=mn,Ze[0]+=8,ft[0]-=8,vn[0]=Yn}else vn[0]=5<=ft[0]&&mn[nn+0]==47&&!(mn[nn+4]>>5),Et[0]=ft[0];Ze=0}if(N=N[0],He.Ja=He.Ja[0],He.xa=He.xa[0],k=k[0],Ze!=0)break;if(4294967286<He.Ja)return 3;if(re==null||ut||(re[0]=He.xa?2:1),ne=[ne],Ke=[Ke],He.xa){if(5>N){Ze=7;break}re=ne,he=Ke,ut=te,E==null||5>N?E=0:5<=N&&E[k+0]==47&&!(E[k+4]>>5)?(ft=[0],mn=[0],Dt=[0],Je(Et=new Q,E,k,N),Gs(Et,ft,mn,Dt)?(re!=null&&(re[0]=ft[0]),he!=null&&(he[0]=mn[0]),ut!=null&&(ut[0]=Dt[0]),E=1):E=0):E=0}else{if(10>N){Ze=7;break}re=Ke,E==null||10>N||!w_(E,k+3,N-3)?E=0:(he=E[k+0]|E[k+1]<<8|E[k+2]<<16,ut=16383&(E[k+7]<<8|E[k+6]),E=16383&(E[k+9]<<8|E[k+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=He.Ja||!ut||!E?E=0:(ne&&(ne[0]=ut),re&&(re[0]=E),E=1))}if(!E||(ne=ne[0],Ke=Ke[0],tt&&(fe[0]!=ne||Ne[0]!=Ke)))return 3;le!=null&&(le[0]=He,le.offset=k-le.w,t(4294967286>k-le.w),t(le.offset==le.ha-N));break}return Ze==0||Ze==7&&tt&&le==null?(te!=null&&(te[0]|=He.na!=null&&0<He.na.length),j!=null&&(j[0]=ne),G!=null&&(G[0]=Ke),0):Ze}function vg(E,k,N){var j=k.width,G=k.height,te=0,ne=0,re=j,le=G;if(k.Da=E!=null&&0<E.Da,k.Da&&(re=E.cd,le=E.bd,te=E.v,ne=E.j,11>N||(te&=-2,ne&=-2),0>te||0>ne||0>=re||0>=le||te+re>j||ne+le>G))return 0;if(k.v=te,k.j=ne,k.va=te+re,k.o=ne+le,k.U=re,k.T=le,k.da=E!=null&&0<E.da,k.da){if(!rn(re,le,N=[E.ib],te=[E.hb]))return 0;k.ib=N[0],k.hb=te[0]}return k.ob=E!=null&&E.ob,k.Kb=E==null||!E.Sd,k.da&&(k.ob=k.ib<3*j/4&&k.hb<3*G/4,k.Kb=0),1}function xg(E){if(E==null)return 2;if(11>E.S){var k=E.f.RGBA;k.fb+=(E.height-1)*k.A,k.A=-k.A}else k=E.f.kb,E=E.height,k.O+=(E-1)*k.fa,k.fa=-k.fa,k.N+=(E-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(E-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(E-1)*k.lb,k.lb=-k.lb);return 0}function md(E,k,N,j){if(j==null||0>=E||0>=k)return 2;if(N!=null){if(N.Da){var G=N.cd,te=N.bd,ne=-2&N.v,re=-2&N.j;if(0>ne||0>re||0>=G||0>=te||ne+G>E||re+te>k)return 2;E=G,k=te}if(N.da){if(!rn(E,k,G=[N.ib],te=[N.hb]))return 2;E=G[0],k=te[0]}}j.width=E,j.height=k;e:{var le=j.width,fe=j.height;if(E=j.S,0>=le||0>=fe||!(E>=j_&&13>E))E=2;else{if(0>=j.Rd&&j.sd==null){ne=te=G=k=0;var Ne=(re=le*v5[E])*fe;if(11>E||(te=(fe+1)/2*(k=(le+1)/2),E==12&&(ne=(G=le)*fe)),(fe=s(Ne+2*te+ne))==null){E=1;break e}j.sd=fe,11>E?((le=j.f.RGBA).eb=fe,le.fb=0,le.A=re,le.size=Ne):((le=j.f.kb).y=fe,le.O=0,le.fa=re,le.Fd=Ne,le.f=fe,le.N=0+Ne,le.Ab=k,le.Cd=te,le.ea=fe,le.W=0+Ne+te,le.Db=k,le.Ed=te,E==12&&(le.F=fe,le.J=0+Ne+2*te),le.Tc=ne,le.lb=G)}if(k=1,G=j.S,te=j.width,ne=j.height,G>=j_&&13>G)if(11>G)E=j.f.RGBA,k&=(re=Math.abs(E.A))*(ne-1)+te<=E.size,k&=re>=te*v5[G],k&=E.eb!=null;else{E=j.f.kb,re=(te+1)/2,Ne=(ne+1)/2,le=Math.abs(E.fa),fe=Math.abs(E.Ab);var tt=Math.abs(E.Db),he=Math.abs(E.lb),He=he*(ne-1)+te;k&=le*(ne-1)+te<=E.Fd,k&=fe*(Ne-1)+re<=E.Cd,k=(k&=tt*(Ne-1)+re<=E.Ed)&le>=te&fe>=re&tt>=re,k&=E.y!=null,k&=E.f!=null,k&=E.ea!=null,G==12&&(k&=he>=te,k&=He<=E.Tc,k&=E.F!=null)}else k=0;E=k?0:2}}return E!=0||N!=null&&N.fd&&(E=xg(j)),E}var I0=64,Qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xa=24,ud=32,Oc=8,gd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Kt("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(E){return E},X.Predictor2=function(E,k,N){return k[N+0]},X.Predictor3=function(E,k,N){return k[N+1]},X.Predictor4=function(E,k,N){return k[N-1]},X.Predictor5=function(E,k,N){return _n(_n(E,k[N+1]),k[N+0])},X.Predictor6=function(E,k,N){return _n(E,k[N-1])},X.Predictor7=function(E,k,N){return _n(E,k[N+0])},X.Predictor8=function(E,k,N){return _n(k[N-1],k[N+0])},X.Predictor9=function(E,k,N){return _n(k[N+0],k[N+1])},X.Predictor10=function(E,k,N){return _n(_n(E,k[N-1]),_n(k[N+0],k[N+1]))},X.Predictor11=function(E,k,N){var j=k[N+0];return 0>=On(j>>24&255,E>>24&255,(k=k[N-1])>>24&255)+On(j>>16&255,E>>16&255,k>>16&255)+On(j>>8&255,E>>8&255,k>>8&255)+On(255&j,255&E,255&k)?j:E},X.Predictor12=function(E,k,N){var j=k[N+0];return(Gn((E>>24&255)+(j>>24&255)-((k=k[N-1])>>24&255))<<24|Gn((E>>16&255)+(j>>16&255)-(k>>16&255))<<16|Gn((E>>8&255)+(j>>8&255)-(k>>8&255))<<8|Gn((255&E)+(255&j)-(255&k)))>>>0},X.Predictor13=function(E,k,N){var j=k[N-1];return($n((E=_n(E,k[N+0]))>>24&255,j>>24&255)<<24|$n(E>>16&255,j>>16&255)<<16|$n(E>>8&255,j>>8&255)<<8|$n(255&E,255&j))>>>0};var yg=X.PredictorAdd0;X.PredictorAdd1=ti,Kt("Predictor2","PredictorAdd2"),Kt("Predictor3","PredictorAdd3"),Kt("Predictor4","PredictorAdd4"),Kt("Predictor5","PredictorAdd5"),Kt("Predictor6","PredictorAdd6"),Kt("Predictor7","PredictorAdd7"),Kt("Predictor8","PredictorAdd8"),Kt("Predictor9","PredictorAdd9"),Kt("Predictor10","PredictorAdd10"),Kt("Predictor11","PredictorAdd11"),Kt("Predictor12","PredictorAdd12"),Kt("Predictor13","PredictorAdd13");var tm=X.PredictorAdd2;gn("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),gn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Lr,V_=X.ColorIndexInverseTransform,Dl=X.MapARGB,Al=X.VP8LColorIndexInverseTransformAlpha,Cg=X.MapAlpha,bg=X.VP8LPredictorsAdd=[];bg.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var Mg,Sg,fd,hd,_d,D0,vd,A0,bs,Rl,Li,tr,Vr,io,Tc,Pg,nm,B_,G4,$4,Y4,J4,K4,Q4,wg,X4,Z4,e5,t5=s(511),n5=s(2041),i5=s(225),r5=s(767),o5=0,BM=n5,U_=i5,Za=r5,Ms=t5,j_=0,W_=1,a5=2,z_=3,q_=4,UM=5,s5=6,jM=7,WM=8,H_=9,zM=10,GL=[2,3,7],$L=[3,3,11],l5=[280,256,256,256,40],YL=[0,1,1,1,0],JL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],KL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],QL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],XL=8,qM=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],HM=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Eg=null,ZL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],eV=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],c5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tV=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nV=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],iV=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rV=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xd=[],Ks=[],kc=[],oV=1,d5=2,yd=[],Ss=[];wc("UpsampleRgbLinePair",pd,3),wc("UpsampleBgrLinePair",Io,3),wc("UpsampleRgbaLinePair",ga,4),wc("UpsampleBgraLinePair",_g,4),wc("UpsampleArgbLinePair",hg,4),wc("UpsampleRgba4444LinePair",T0,2),wc("UpsampleRgb565LinePair",O0,2);var aV=X.UpsampleRgbLinePair,sV=X.UpsampleBgrLinePair,p5=X.UpsampleRgbaLinePair,m5=X.UpsampleBgraLinePair,u5=X.UpsampleArgbLinePair,g5=X.UpsampleRgba4444LinePair,lV=X.UpsampleRgb565LinePair,G_=16,$_=1<<G_-1,Og=-227,GM=482,f5=6,cV=(256<<f5)-1,h5=0,dV=s(256),pV=s(256),mV=s(256),uV=s(256),gV=s(GM-Og),fV=s(GM-Og);Ec("YuvToRgbRow",pd,3),Ec("YuvToBgrRow",Io,3),Ec("YuvToRgbaRow",ga,4),Ec("YuvToBgraRow",_g,4),Ec("YuvToArgbRow",hg,4),Ec("YuvToRgba4444Row",T0,2),Ec("YuvToRgb565Row",O0,2);var _5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Y_=[0,2,8],hV=[8,7,6,4,4,2,2,2,1,1,1,1],_V=1;this.WebPDecodeRGBA=function(E,k,N,j,G){var te=W_,ne=new vt,re=new Xn;ne.ba=re,re.S=te,re.width=[re.width],re.height=[re.height];var le=re.width,fe=re.height,Ne=new Mn;if(Ne==null||E==null)var tt=2;else t(Ne!=null),tt=k0(E,k,N,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(tt!=0?le=0:(le!=null&&(le[0]=Ne.width[0]),fe!=null&&(fe[0]=Ne.height[0]),le=1),le){re.width=re.width[0],re.height=re.height[0],j!=null&&(j[0]=re.width),G!=null&&(G[0]=re.height);e:{if(j=new Yp,(G=new wt).data=E,G.w=k,G.ha=N,G.kd=1,k=[0],t(G!=null),((E=k0(G.data,G.w,G.ha,null,null,null,k,null,G))==0||E==7)&&k[0]&&(E=4),(k=E)==0){if(t(ne!=null),j.data=G.data,j.w=G.w+G.offset,j.ha=G.ha-G.offset,j.put=Pn,j.ac=vs,j.bc=Hs,j.ma=ne,G.xa){if((E=et())==null){ne=1;break e}if((function(he,He){var Ke=[0],ut=[0],Ze=[0];t:for(;;){if(he==null)return 0;if(He==null)return he.a=2,0;if(he.l=He,he.a=0,Je(he.m,He.data,He.w,He.ha),!Gs(he.m,Ke,ut,Ze)){he.a=3;break t}if(he.xb=d5,He.width=Ke[0],He.height=ut[0],!Xe(Ke[0],ut[0],1,he,null))break t;return 1}return t(he.a!=0),0})(E,j)){if(j=(k=md(j.width,j.height,ne.Oa,ne.ba))==0){t:{j=E;n:for(;;){if(j==null){j=0;break t}if(t(j.s.yc!=null),t(j.s.Ya!=null),t(0<j.s.Wb),t((N=j.l)!=null),t((G=N.ma)!=null),j.xb!=0){if(j.ca=G.ba,j.tb=G.tb,t(j.ca!=null),!vg(G.Oa,N,z_)){j.a=2;break n}if(!nt(j,N.width)||N.da)break n;if((N.da||Sn(j.ca.S))&&Js(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Js()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!de(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!Qe(j,j.V,j.Ba,j.c,j.i,N.o,se))break n;G.Dc=j.Ma,j=1;break t}t(j.a!=0),j=0}j=!j}j&&(k=E.a)}else k=E.a}else{if((E=new SM)==null){ne=1;break e}if(E.Fa=G.na,E.P=G.P,E.qc=G.Sa,kl(E,j)){if((k=md(j.width,j.height,ne.Oa,ne.ba))==0){if(E.Aa=0,N=ne.Oa,t((G=E)!=null),N!=null){if(0<(le=0>(le=N.Md)?0:100<le?255:255*le/100)){for(fe=Ne=0;4>fe;++fe)12>(tt=G.pb[fe]).lc&&(tt.ia=le*hV[0>tt.lc?0:tt.lc]>>3),Ne|=tt.ia;Ne&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=N.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(he,He){if(he==null)return 0;if(He==null)return Gr(he,2,"NULL VP8Io parameter in VP8Decode().");if(!he.cb&&!kl(he,He))return 0;if(t(he.cb),He.ac==null||He.ac(He)){He.ob&&(he.L=0);var Ke=Y_[he.L];if(he.L==2?(he.yb=0,he.zb=0):(he.yb=He.v-Ke>>4,he.zb=He.j-Ke>>4,0>he.yb&&(he.yb=0),0>he.zb&&(he.zb=0)),he.Va=He.o+15+Ke>>4,he.Hb=He.va+15+Ke>>4,he.Hb>he.za&&(he.Hb=he.za),he.Va>he.Ub&&(he.Va=he.Ub),0<he.L){var ut=he.ed;for(Ke=0;4>Ke;++Ke){var Ze;if(he.Qa.Cb){var ft=he.Qa.Lb[Ke];he.Qa.Fb||(ft+=ut.Tb)}else ft=ut.Tb;for(Ze=0;1>=Ze;++Ze){var xt=he.gd[Ke][Ze],Dt=ft;if(ut.Pc&&(Dt+=ut.vd[0],Ze&&(Dt+=ut.od[0])),0<(Dt=0>Dt?0:63<Dt?63:Dt)){var Et=Dt;0<ut.wb&&(Et=4<ut.wb?Et>>2:Et>>1)>9-ut.wb&&(Et=9-ut.wb),1>Et&&(Et=1),xt.dd=Et,xt.tc=2*Dt+Et,xt.ld=40<=Dt?2:15<=Dt?1:0}else xt.tc=0;xt.La=Ze}}}Ke=0}else Gr(he,6,"Frame setup failed"),Ke=he.a;if(Ke=Ke==0){if(Ke){he.$c=0,0<he.Aa||(he.Ic=_V);t:{Ke=he.Ic,ut=4*(Et=he.za);var vn=32*Et,nn=Et+1,Yn=0<he.L?Et*(0<he.Aa?2:1):0,mn=(he.Aa==2?2:1)*Et;if((xt=ut+832+(Ze=3*(16*Ke+Y_[he.L])/2*vn)+(ft=he.Fa!=null&&0<he.Fa.length?he.Kc.c*he.Kc.i:0))!=xt)Ke=0;else{if(xt>he.Vb){if(he.Vb=0,he.Ec=s(xt),he.Fc=0,he.Ec==null){Ke=Gr(he,1,"no memory during frame initialization.");break t}he.Vb=xt}xt=he.Ec,Dt=he.Fc,he.Ac=xt,he.Bc=Dt,Dt+=ut,he.Gd=d(vn,xs),he.Hd=0,he.rb=d(nn+1,lr),he.sb=1,he.wa=Yn?d(Yn,er):null,he.Y=0,he.D.Nb=0,he.D.wa=he.wa,he.D.Y=he.Y,0<he.Aa&&(he.D.Y+=Et),t(!0),he.oc=xt,he.pc=Dt,Dt+=832,he.ya=d(mn,$s),he.aa=0,he.D.ya=he.ya,he.D.aa=he.aa,he.Aa==2&&(he.D.aa+=Et),he.R=16*Et,he.B=8*Et,Et=(vn=Y_[he.L])*he.R,vn=vn/2*he.B,he.sa=xt,he.ta=Dt+Et,he.qa=he.sa,he.ra=he.ta+16*Ke*he.R+vn,he.Ha=he.qa,he.Ia=he.ra+8*Ke*he.B+vn,he.$c=0,Dt+=Ze,he.mb=ft?xt:null,he.nb=ft?Dt:null,t(Dt+ft<=he.Fc+he.Vb),E_(he),r(he.Ac,he.Bc,0,ut),Ke=1}}if(Ke){if(He.ka=0,He.y=he.sa,He.O=he.ta,He.f=he.qa,He.N=he.ra,He.ea=he.Ha,He.Vd=he.Ia,He.fa=he.R,He.Rc=he.B,He.F=null,He.J=0,!o5){for(Ke=-255;255>=Ke;++Ke)t5[255+Ke]=0>Ke?-Ke:Ke;for(Ke=-1020;1020>=Ke;++Ke)n5[1020+Ke]=-128>Ke?-128:127<Ke?127:Ke;for(Ke=-112;112>=Ke;++Ke)i5[112+Ke]=-16>Ke?-16:15<Ke?15:Ke;for(Ke=-255;510>=Ke;++Ke)r5[255+Ke]=0>Ke?0:255<Ke?255:Ke;o5=1}vd=Kp,A0=wM,Rl=Il,Li=T_,tr=k_,bs=PM,Vr=F_,io=P0,Tc=H,Pg=ye,nm=N_,B_=R,G4=ke,$4=Ye,Y4=S0,J4=gg,K4=A_,Q4=R_,Ks[0]=RM,Ks[1]=EM,Ks[2]=DM,Ks[3]=AM,Ks[4]=xc,Ks[5]=FM,Ks[6]=yc,Ks[7]=NM,Ks[8]=cg,Ks[9]=Qp,xd[0]=kM,xd[1]=TM,xd[2]=sg,xd[3]=I_,xd[4]=b0,xd[5]=lg,xd[6]=IM,kc[0]=VM,kc[1]=OM,kc[2]=M0,kc[3]=LM,kc[4]=pg,kc[5]=dg,kc[6]=D_,Ke=1}else Ke=0}Ke&&(Ke=(function(mi,ro){for(mi.M=0;mi.M<mi.Va;++mi.M){var Jn,un=mi.Jc[mi.M&mi.Xb],$t=mi.m,Br=mi;for(Jn=0;Jn<Br.za;++Jn){var Un=$t,fi=Br,mr=fi.Ac,Do=fi.Bc+4*Jn,fa=fi.zc,kr=fi.ya[fi.aa+Jn];if(fi.Qa.Bb?kr.$b=Re(Un,fi.Pa.jb[0])?2+Re(Un,fi.Pa.jb[2]):Re(Un,fi.Pa.jb[1]):kr.$b=0,fi.kc&&(kr.Ad=Re(Un,fi.Bd)),kr.Za=!Re(Un,145)+0,kr.Za){var Jo=kr.Ob,ha=0;for(fi=0;4>fi;++fi){var oo,yi=fa[0+fi];for(oo=0;4>oo;++oo){yi=nV[mr[Do+oo]][yi];for(var zi=c5[Re(Un,yi[0])];0<zi;)zi=c5[2*zi+Re(Un,yi[zi])];yi=-zi,mr[Do+oo]=yi}i(Jo,ha,mr,Do,4),ha+=4,fa[0+fi]=yi}}else yi=Re(Un,156)?Re(Un,128)?1:3:Re(Un,163)?2:0,kr.Ob[0]=yi,r(mr,Do,yi,4),r(fa,0,yi,4);kr.Dd=Re(Un,142)?Re(Un,114)?Re(Un,183)?1:3:2:0}if(Br.m.Ka)return Gr(mi,7,"Premature end-of-partition0 encountered.");for(;mi.ja<mi.za;++mi.ja){if(Br=un,Un=($t=mi).rb[$t.sb-1],mr=$t.rb[$t.sb+$t.ja],Jn=$t.ya[$t.aa+$t.ja],Do=$t.kc?Jn.Ad:0)Un.la=mr.la=0,Jn.Za||(Un.Na=mr.Na=0),Jn.Hc=0,Jn.Gc=0,Jn.ia=0;else{var Ir,qi;if(Un=mr,mr=Br,Do=$t.Pa.Xc,fa=$t.ya[$t.aa+$t.ja],kr=$t.pb[fa.$b],fi=fa.ad,Jo=0,ha=$t.rb[$t.sb-1],yi=oo=0,r(fi,Jo,0,384),fa.Za)var Ao=0,Qs=Do[3];else{zi=s(16);var Ur=Un.Na+ha.Na;if(Ur=Eg(mr,Do[1],Ur,kr.Eb,0,zi,0),Un.Na=ha.Na=(0<Ur)+0,1<Ur)vd(zi,0,fi,Jo);else{var Ia=zi[0]+3>>3;for(zi=0;256>zi;zi+=16)fi[Jo+zi]=Ia}Ao=1,Qs=Do[0]}var nr=15&Un.la,ao=15&ha.la;for(zi=0;4>zi;++zi){var es=1&ao;for(Ia=qi=0;4>Ia;++Ia)nr=nr>>1|(es=(Ur=Eg(mr,Qs,Ur=es+(1&nr),kr.Sc,Ao,fi,Jo))>Ao)<<7,qi=qi<<2|(3<Ur?3:1<Ur?2:fi[Jo+0]!=0),Jo+=16;nr>>=4,ao=ao>>1|es<<7,oo=(oo<<8|qi)>>>0}for(Qs=nr,Ao=ao>>4,Ir=0;4>Ir;Ir+=2){for(qi=0,nr=Un.la>>4+Ir,ao=ha.la>>4+Ir,zi=0;2>zi;++zi){for(es=1&ao,Ia=0;2>Ia;++Ia)Ur=es+(1&nr),nr=nr>>1|(es=0<(Ur=Eg(mr,Do[2],Ur,kr.Qc,0,fi,Jo)))<<3,qi=qi<<2|(3<Ur?3:1<Ur?2:fi[Jo+0]!=0),Jo+=16;nr>>=2,ao=ao>>1|es<<5}yi|=qi<<4*Ir,Qs|=nr<<4<<Ir,Ao|=(240&ao)<<Ir}Un.la=Qs,ha.la=Ao,fa.Hc=oo,fa.Gc=yi,fa.ia=43690&yi?0:kr.ia,Do=!(oo|yi)}if(0<$t.L&&($t.wa[$t.Y+$t.ja]=$t.gd[Jn.$b][Jn.Za],$t.wa[$t.Y+$t.ja].La|=!Do),Br.Ka)return Gr(mi,7,"Premature end-of-file encountered.")}if(E_(mi),$t=ro,Br=1,Jn=(un=mi).D,Un=0<un.L&&un.M>=un.zb&&un.M<=un.Va,un.Aa==0)t:{if(Jn.M=un.M,Jn.uc=Un,Cs(un,Jn),Br=1,Jn=(qi=un.D).Nb,Un=(yi=Y_[un.L])*un.R,mr=yi/2*un.B,zi=16*Jn*un.R,Ia=8*Jn*un.B,Do=un.sa,fa=un.ta-Un+zi,kr=un.qa,fi=un.ra-mr+Ia,Jo=un.Ha,ha=un.Ia-mr+Ia,ao=(nr=qi.M)==0,oo=nr>=un.Va-1,un.Aa==2&&Cs(un,qi),qi.uc)for(es=(Ur=un).D.M,t(Ur.D.uc),qi=Ur.yb;qi<Ur.Hb;++qi){Ao=qi,Qs=es;var _a=(ts=(Ro=Ur).D).Nb;Ir=Ro.R;var ts=ts.wa[ts.Y+Ao],ns=Ro.sa,Da=Ro.ta+16*_a*Ir+16*Ao,is=ts.dd,dr=ts.tc;if(dr!=0)if(t(3<=dr),Ro.L==1)0<Ao&&J4(ns,Da,Ir,dr+4),ts.La&&Q4(ns,Da,Ir,dr),0<Qs&&Y4(ns,Da,Ir,dr+4),ts.La&&K4(ns,Da,Ir,dr);else{var rs=Ro.B,Xs=Ro.qa,R0=Ro.ra+8*_a*rs+8*Ao,Ic=Ro.Ha,Ro=Ro.Ia+8*_a*rs+8*Ao;_a=ts.ld,0<Ao&&(io(ns,Da,Ir,dr+4,is,_a),Pg(Xs,R0,Ic,Ro,rs,dr+4,is,_a)),ts.La&&(B_(ns,Da,Ir,dr,is,_a),$4(Xs,R0,Ic,Ro,rs,dr,is,_a)),0<Qs&&(Vr(ns,Da,Ir,dr+4,is,_a),Tc(Xs,R0,Ic,Ro,rs,dr+4,is,_a)),ts.La&&(nm(ns,Da,Ir,dr,is,_a),G4(Xs,R0,Ic,Ro,rs,dr,is,_a))}}if(un.ia&&alert("todo:DitherRow"),$t.put!=null){if(qi=16*nr,nr=16*(nr+1),ao?($t.y=un.sa,$t.O=un.ta+zi,$t.f=un.qa,$t.N=un.ra+Ia,$t.ea=un.Ha,$t.W=un.Ia+Ia):(qi-=yi,$t.y=Do,$t.O=fa,$t.f=kr,$t.N=fi,$t.ea=Jo,$t.W=ha),oo||(nr-=yi),nr>$t.o&&(nr=$t.o),$t.F=null,$t.J=null,un.Fa!=null&&0<un.Fa.length&&qi<nr&&($t.J=cr(un,$t,qi,nr-qi),$t.F=un.mb,$t.F==null&&$t.F.length==0)){Br=Gr(un,3,"Could not decode alpha data.");break t}qi<$t.j&&(yi=$t.j-qi,qi=$t.j,t(!(1&yi)),$t.O+=un.R*yi,$t.N+=un.B*(yi>>1),$t.W+=un.B*(yi>>1),$t.F!=null&&($t.J+=$t.width*yi)),qi<nr&&($t.O+=$t.v,$t.N+=$t.v>>1,$t.W+=$t.v>>1,$t.F!=null&&($t.J+=$t.v),$t.ka=qi-$t.j,$t.U=$t.va-$t.v,$t.T=nr-qi,Br=$t.put($t))}Jn+1!=un.Ic||oo||(i(un.sa,un.ta-Un,Do,fa+16*un.R,Un),i(un.qa,un.ra-mr,kr,fi+8*un.B,mr),i(un.Ha,un.Ia-mr,Jo,ha+8*un.B,mr))}if(!Br)return Gr(mi,6,"Output aborted.")}return 1})(he,He)),He.bc!=null&&He.bc(He),Ke&=1}return Ke?(he.cb=0,Ke):0})(E,j)||(k=E.a)}}else k=E.a}k==0&&ne.Oa!=null&&ne.Oa.fd&&(k=xg(ne.ba))}ne=k}te=ne!=0?null:11>te?re.f.RGBA.eb:re.f.kb.y}else te=null;return te};var v5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(X,pe){for(var z="",Z=0;Z<4;Z++)z+=String.fromCharCode(X[pe++]);return z}function C(X,pe){return X[pe+0]|X[pe+1]<<8}function O(X,pe){return(X[pe+0]|X[pe+1]<<8|X[pe+2]<<16)>>>0}function T(X,pe){return(X[pe+0]|X[pe+1]<<8|X[pe+2]<<16|X[pe+3]<<24)>>>0}new h;var w=[0],A=[0],I=[],L=new h,B=n,q=(function(X,pe){var z={},Z=0,ge=!1,Pe=0,Ve=0;if(z.frames=[],!(function(U,Q){for(var W=0;W<4;W++)if(U[Q+W]!="RIFF".charCodeAt(W))return!0;return!1})(X,pe)){for(T(X,pe+=4),pe+=8;pe<X.length;){var De=v(X,pe),Fe=T(X,pe+=4);pe+=4;var Te=Fe+(1&Fe);switch(De){case"VP8 ":case"VP8L":z.frames[Z]===void 0&&(z.frames[Z]={}),(pt=z.frames[Z]).src_off=ge?Ve:pe-8,pt.src_size=Pe+Fe+8,Z++,ge&&(ge=!1,Pe=0,Ve=0);break;case"VP8X":(pt=z.header={}).feature_flags=X[pe];var Je=pe+4;pt.canvas_width=1+O(X,Je),Je+=3,pt.canvas_height=1+O(X,Je),Je+=3;break;case"ALPH":ge=!0,Pe=Te+8,Ve=pe-8;break;case"ANIM":(pt=z.header).bgcolor=T(X,pe),Je=pe+4,pt.loop_count=C(X,Je),Je+=2;break;case"ANMF":var _t,pt;(pt=z.frames[Z]={}).offset_x=2*O(X,pe),pe+=3,pt.offset_y=2*O(X,pe),pe+=3,pt.width=1+O(X,pe),pe+=3,pt.height=1+O(X,pe),pe+=3,pt.duration=O(X,pe),pe+=3,_t=X[pe++],pt.dispose=1&_t,pt.blend=_t>>1&1}De!="ANMF"&&(pe+=Te)}return z}})(B,0);q.response=B,q.rgbaoutput=!0,q.dataurl=!1;var K=q.header?q.header:null,J=q.frames?q.frames:null;if(K){K.loop_counter=K.loop_count,w=[K.canvas_height],A=[K.canvas_width];for(var Me=0;Me<J.length&&J[Me].blend!=0;Me++);}var ze=J[0],oe=L.WebPDecodeRGBA(B,ze.src_off,ze.src_size,A,w);ze.rgba=oe,ze.imgwidth=A[0],ze.imgheight=w[0];for(var ae=0;ae<A[0]*w[0]*4;ae++)I[ae]=oe[ae];return this.width=A,this.height=w,this.data=I,this}(function(n){var t,e,i,r,s,d,u,h,v,C=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new h,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new d,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new d,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new O(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,v=new C}]);var O=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=U;Object.defineProperty(this,"pdf",{get:function(){return Q}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(de){W=!!de}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(de){Y=!!de}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(de){isNaN(de)||(ue=de)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(de){isNaN(de)||(we=de)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(de){var It;typeof de=="number"?It=[de,de,de,de]:((It=new Array(4))[0]=de[0],It[1]=de.length>=2?de[1]:It[0],It[2]=de.length>=3?de[2]:It[0],It[3]=de.length>=4?de[3]:It[1]),v.margin=It}});var qe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return qe},set:function(de){qe=de}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(de){Ae=de}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(de){Re=de}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(de){de instanceof C&&(v=de)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(de){v.path=de}});var gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return gt},set:function(de){gt=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var It;It=T(de),this.ctx.fillStyle=It.style,this.ctx.isFillTransparent=It.a===0,this.ctx.fillOpacity=It.a,this.pdf.setFillColor(It.r,It.g,It.b,{a:It.a}),this.pdf.setTextColor(It.r,It.g,It.b,{a:It.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var It=T(de);this.ctx.strokeStyle=It.style,this.ctx.isStrokeTransparent=It.a===0,this.ctx.strokeOpacity=It.a,It.a===0?this.pdf.setDrawColor(255,255,255):(It.a,this.pdf.setDrawColor(It.r,It.g,It.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var Pt=null,Nt=null,Bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Bt},set:function(de){Pt=null,Nt=null,Bt=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var It;if(this.ctx.font=de,(It=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(de))!==null){var Ot=It[1];It[2];var rn=It[3],bt=It[4];It[5];var fn=It[6],Kt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(Kt==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:Kt==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var Cn=(function(gn){var _r,ci,zn=[],qn=gn.trim();if(qn==="")return w4;if(qn in N9)return[N9[qn]];for(;qn!=="";){switch(ci=null,_r=(qn=V9(qn)).charAt(0)){case'"':case"'":ci=d_e(qn.substring(1),_r);break;default:ci=p_e(qn)}if(ci===null||(zn.push(ci[0]),(qn=V9(ci[1]))!==""&&qn.charAt(0)!==","))return w4;qn=qn.replace(/^,/,"")}return zn})(fn);if(this.fontFaces){var _n=(function(gn,_r){var ci=gn.getFontList(),zn=JSON.stringify(ci);if(Pt===null||Nt!==zn){var qn=(function(ar){var bn=[];return Object.keys(ar).forEach(function(Wi){ar[Wi].forEach(function(Sn){var In=null;switch(Sn){case"bold":In={family:Wi,weight:"bold"};break;case"italic":In={family:Wi,style:"italic"};break;case"bolditalic":In={family:Wi,weight:"bold",style:"italic"};break;case"":case"normal":In={family:Wi}}In!==null&&(In.ref={name:Wi,style:Sn},bn.push(In))})}),bn})(ci);Pt=(function(ar){for(var bn={},Wi=0;Wi<ar.length;++Wi){var Sn=P4(ar[Wi]),In=Sn.family,sr=Sn.stretch,Xn=Sn.style,Mn=Sn.weight;bn[In]=bn[In]||{},bn[In][sr]=bn[In][sr]||{},bn[In][sr][Xn]=bn[In][sr][Xn]||{},bn[In][sr][Xn][Mn]=Sn}return bn})(qn.concat(_r)),Nt=zn}return Pt})(this.pdf,this.fontFaces),Gn=Cn.map(function(gn){return{family:gn,stretch:"normal",weight:rn,style:Ot}}),$n=(function(gn,_r,ci){for(var zn=(ci=ci||{}).defaultFontFamily||"times",qn=Object.assign({},c_e,ci.genericFontFamilies||{}),ar=null,bn=null,Wi=0;Wi<_r.length;++Wi)if(qn[(ar=P4(_r[Wi])).family]&&(ar.family=qn[ar.family]),gn.hasOwnProperty(ar.family)){bn=gn[ar.family];break}if(!(bn=bn||gn[zn]))throw new Error("Could not find a font-family for the rule '"+L9(ar)+"' and default family '"+zn+"'.");if(bn=(function(Sn,In){if(In[Sn])return In[Sn];var sr=D4[Sn],Xn=sr<=D4.normal?-1:1,Mn=F9(In,sL,sr,Xn);if(!Mn)throw new Error("Could not find a matching font-stretch value for "+Sn);return Mn})(ar.stretch,bn),bn=(function(Sn,In){if(In[Sn])return In[Sn];for(var sr=aL[Sn],Xn=0;Xn<sr.length;++Xn)if(In[sr[Xn]])return In[sr[Xn]];throw new Error("Could not find a matching font-style for "+Sn)})(ar.style,bn),!(bn=(function(Sn,In){if(In[Sn])return In[Sn];if(Sn===400&&In[500])return In[500];if(Sn===500&&In[400])return In[400];var sr=l_e[Sn],Xn=F9(In,lL,sr,Sn<400?-1:1);if(!Xn)throw new Error("Could not find a matching font-weight for value "+Sn);return Xn})(ar.weight,bn)))throw new Error("Failed to resolve a font for the rule '"+L9(ar)+"'.");return bn})(_n,Gn);this.pdf.setFont($n.ref.name,$n.ref.style)}else{var On="";(rn==="bold"||parseInt(rn,10)>=700||Ot==="bold")&&(On="bold"),Ot==="italic"&&(On+="italic"),On.length===0&&(On="normal");for(var ti="",Fn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pn=0;pn<Cn.length;pn++){if(this.pdf.internal.getFont(Cn[pn],On,{noFallback:!0,disableWarning:!0})!==void 0){ti=Cn[pn];break}if(On==="bolditalic"&&this.pdf.internal.getFont(Cn[pn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ti=Cn[pn],On="bold";else if(this.pdf.internal.getFont(Cn[pn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ti=Cn[pn],On="normal";break}}if(ti===""){for(var An=0;An<Cn.length;An++)if(Fn[Cn[An]]){ti=Fn[Cn[An]];break}}ti=ti===""?"Times":ti,this.pdf.setFont(ti,On)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,pt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,pt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};O.prototype.setLineDash=function(U){this.lineDash=U},O.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},O.prototype.fill=function(){J.call(this,"fill",!1)},O.prototype.stroke=function(){J.call(this,"stroke",!1)},O.prototype.beginPath=function(){this.path=[{type:"begin"}]},O.prototype.moveTo=function(U,Q){if(isNaN(U)||isNaN(Q))throw or.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new d(U,Q));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new d(U,Q)},O.prototype.closePath=function(){var U=new d(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Ji(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){U=new d(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(U.x,U.y)},O.prototype.lineTo=function(U,Q){if(isNaN(U)||isNaN(Q))throw or.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new d(U,Q));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new d(W.x,W.y)},O.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},O.prototype.quadraticCurveTo=function(U,Q,W,Y){if(isNaN(W)||isNaN(Y)||isNaN(U)||isNaN(Q))throw or.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new d(W,Y)),we=this.ctx.transform.applyToPoint(new d(U,Q));this.path.push({type:"qct",x1:we.x,y1:we.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new d(ue.x,ue.y)},O.prototype.bezierCurveTo=function(U,Q,W,Y,ue,we){if(isNaN(ue)||isNaN(we)||isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y))throw or.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var qe=this.ctx.transform.applyToPoint(new d(ue,we)),Ae=this.ctx.transform.applyToPoint(new d(U,Q)),Re=this.ctx.transform.applyToPoint(new d(W,Y));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Re.x,y2:Re.y,x:qe.x,y:qe.y}),this.ctx.lastPoint=new d(qe.x,qe.y)},O.prototype.arc=function(U,Q,W,Y,ue,we){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y)||isNaN(ue))throw or.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var qe=this.ctx.transform.applyToPoint(new d(U,Q));U=qe.x,Q=qe.y;var Ae=this.ctx.transform.applyToPoint(new d(0,W)),Re=this.ctx.transform.applyToPoint(new d(0,0));W=Math.sqrt(Math.pow(Ae.x-Re.x,2)+Math.pow(Ae.y-Re.y,2))}Math.abs(ue-Y)>=2*Math.PI&&(Y=0,ue=2*Math.PI),this.path.push({type:"arc",x:U,y:Q,radius:W,startAngle:Y,endAngle:ue,counterclockwise:we})},O.prototype.arcTo=function(U,Q,W,Y,ue){throw new Error("arcTo not implemented.")},O.prototype.rect=function(U,Q,W,Y){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y))throw or.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,Q),this.lineTo(U+W,Q),this.lineTo(U+W,Q+Y),this.lineTo(U,Q+Y),this.lineTo(U,Q),this.lineTo(U+W,Q),this.lineTo(U,Q)},O.prototype.fillRect=function(U,Q,W,Y){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y))throw or.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,Q,W,Y),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},O.prototype.strokeRect=function(U,Q,W,Y){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y))throw or.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(U,Q,W,Y),this.stroke())},O.prototype.clearRect=function(U,Q,W,Y){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y))throw or.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,Q,W,Y))},O.prototype.save=function(U){U=typeof U!="boolean"||U;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new C(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},O.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},O.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(U){var Q,W,Y,ue;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))Q=0,W=0,Y=0,ue=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(we!==null)Q=parseInt(we[1]),W=parseInt(we[2]),Y=parseInt(we[3]),ue=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)Q=parseInt(we[1]),W=parseInt(we[2]),Y=parseInt(we[3]),ue=parseFloat(we[4]);else{if(ue=1,typeof U=="string"&&U.charAt(0)!=="#"){var qe=new Z9(U);U=qe.ok?qe.toHex():"#000000"}U.length===4?(Q=U.substring(1,2),Q+=Q,W=U.substring(2,3),W+=W,Y=U.substring(3,4),Y+=Y):(Q=U.substring(1,3),W=U.substring(3,5),Y=U.substring(5,7)),Q=parseInt(Q,16),W=parseInt(W,16),Y=parseInt(Y,16)}}return{r:Q,g:W,b:Y,a:ue,style:U}},w=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};O.prototype.fillText=function(U,Q,W,Y){if(isNaN(Q)||isNaN(W)||typeof U!="string")throw or.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!w.call(this)){var ue=Te(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;Z.call(this,{text:U,x:Q,y:W,scale:we,angle:ue,align:this.textAlign,maxWidth:Y})}},O.prototype.strokeText=function(U,Q,W,Y){if(isNaN(Q)||isNaN(W)||typeof U!="string")throw or.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){Y=isNaN(Y)?void 0:Y;var ue=Te(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;Z.call(this,{text:U,x:Q,y:W,scale:we,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:Y})}},O.prototype.measureText=function(U){if(typeof U!="string")throw or.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,W=this.pdf.internal.scaleFactor,Y=Q.internal.getFontSize(),ue=Q.getStringUnitWidth(U)*Y/Q.internal.scaleFactor;return new function(we){var qe=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return qe}}),this}({width:ue*=Math.round(96*W/72*1e4)/1e4})},O.prototype.scale=function(U,Q){if(isNaN(U)||isNaN(Q))throw or.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new h(U,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},O.prototype.rotate=function(U){if(isNaN(U))throw or.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new h(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},O.prototype.translate=function(U,Q){if(isNaN(U)||isNaN(Q))throw or.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new h(1,0,0,1,U,Q);this.ctx.transform=this.ctx.transform.multiply(W)},O.prototype.transform=function(U,Q,W,Y,ue,we){if(isNaN(U)||isNaN(Q)||isNaN(W)||isNaN(Y)||isNaN(ue)||isNaN(we))throw or.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var qe=new h(U,Q,W,Y,ue,we);this.ctx.transform=this.ctx.transform.multiply(qe)},O.prototype.setTransform=function(U,Q,W,Y,ue,we){U=isNaN(U)?1:U,Q=isNaN(Q)?0:Q,W=isNaN(W)?0:W,Y=isNaN(Y)?1:Y,ue=isNaN(ue)?0:ue,we=isNaN(we)?0:we,this.ctx.transform=new h(U,Q,W,Y,ue,we)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};O.prototype.drawImage=function(U,Q,W,Y,ue,we,qe,Ae,Re){var gt=this.pdf.getImageProperties(U),Pt=1,Nt=1,Bt=1,de=1;Y!==void 0&&Ae!==void 0&&(Bt=Ae/Y,de=Re/ue,Pt=gt.width/Y*Ae/Y,Nt=gt.height/ue*Re/ue),we===void 0&&(we=Q,qe=W,Q=0,W=0),Y!==void 0&&Ae===void 0&&(Ae=Y,Re=ue),Y===void 0&&Ae===void 0&&(Ae=gt.width,Re=gt.height);var It=this.ctx.transform.decompose(),Ot=Te(It.rotate.shx),rn=new h,bt=(rn=(rn=(rn=rn.multiply(It.translate)).multiply(It.skew)).multiply(It.scale)).applyToRectangle(new u(we-Q*Bt,qe-W*de,Y*Pt,ue*Nt));if(this.autoPaging){for(var fn,Kt=L.call(this,bt),Cn=[],_n=0;_n<Kt.length;_n+=1)Cn.indexOf(Kt[_n])===-1&&Cn.push(Kt[_n]);K(Cn);for(var Gn=Cn[0],$n=Cn[Cn.length-1],On=Gn;On<$n+1;On++){this.pdf.setPage(On);var ti=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fn=On===1?this.posY+this.margin[0]:this.margin[0],pn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],An=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gn=On===1?0:pn+(On-2)*An;if(this.ctx.clip_path.length!==0){var _r=this.path;fn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(fn,this.posX+this.margin[3],-gn+Fn+this.ctx.prevPageLastElemOffset),Me.call(this,"fill",!0),this.path=_r}var ci=JSON.parse(JSON.stringify(bt));ci=q([ci],this.posX+this.margin[3],-gn+Fn+this.ctx.prevPageLastElemOffset)[0];var zn=(On>Gn||On<$n)&&I.call(this);zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ti,An,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",ci.x,ci.y,ci.w,ci.h,null,null,Ot),zn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(U,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,Ot)};var L=function(U,Q,W){var Y=[];Q=Q||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":Y.push(Math.floor((U.y+ue)/W)+1);break;case"arc":Y.push(Math.floor((U.y+ue-U.radius)/W)+1),Y.push(Math.floor((U.y+ue+U.radius)/W)+1);break;case"qct":var we=Je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);Y.push(Math.floor((we.y+ue)/W)+1),Y.push(Math.floor((we.y+we.h+ue)/W)+1);break;case"bct":var qe=_t(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);Y.push(Math.floor((qe.y+ue)/W)+1),Y.push(Math.floor((qe.y+qe.h+ue)/W)+1);break;case"rect":Y.push(Math.floor((U.y+ue)/W)+1),Y.push(Math.floor((U.y+U.h+ue)/W)+1)}for(var Ae=0;Ae<Y.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<Y[Ae];)B.call(this);return Y},B=function(){var U=this.fillStyle,Q=this.strokeStyle,W=this.font,Y=this.lineCap,ue=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=Q,this.font=W,this.lineCap=Y,this.lineWidth=ue,this.lineJoin=we},q=function(U,Q,W){for(var Y=0;Y<U.length;Y++)switch(U[Y].type){case"bct":U[Y].x2+=Q,U[Y].y2+=W;case"qct":U[Y].x1+=Q,U[Y].y1+=W;default:U[Y].x+=Q,U[Y].y+=W}return U},K=function(U){return U.sort(function(Q,W){return Q-W})},J=function(U,Q){var W=this.fillStyle,Y=this.strokeStyle,ue=this.lineCap,we=this.lineWidth,qe=Math.abs(we*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var Re,gt,Pt=JSON.parse(JSON.stringify(this.path)),Nt=JSON.parse(JSON.stringify(this.path)),Bt=[],de=0;de<Nt.length;de++)if(Nt[de].x!==void 0)for(var It=L.call(this,Nt[de]),Ot=0;Ot<It.length;Ot+=1)Bt.indexOf(It[Ot])===-1&&Bt.push(It[Ot]);for(var rn=0;rn<Bt.length;rn++)for(;this.pdf.internal.getNumberOfPages()<Bt[rn];)B.call(this);K(Bt);for(var bt=Bt[0],fn=Bt[Bt.length-1],Kt=bt;Kt<fn+1;Kt++){this.pdf.setPage(Kt),this.fillStyle=W,this.strokeStyle=Y,this.lineCap=ue,this.lineWidth=qe,this.lineJoin=Ae;var Cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_n=Kt===1?this.posY+this.margin[0]:this.margin[0],Gn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$n=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],On=Kt===1?0:Gn+(Kt-2)*$n;if(this.ctx.clip_path.length!==0){var ti=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(Re,this.posX+this.margin[3],-On+_n+this.ctx.prevPageLastElemOffset),Me.call(this,U,!0),this.path=ti}if(gt=JSON.parse(JSON.stringify(Pt)),this.path=q(gt,this.posX+this.margin[3],-On+_n+this.ctx.prevPageLastElemOffset),Q===!1||Kt===0){var Fn=(Kt>bt||Kt<fn)&&I.call(this);Fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Cn,$n,null).clip().discardPath()),Me.call(this,U,Q),Fn&&this.pdf.restoreGraphicsState()}this.lineWidth=we}this.path=Pt}else this.lineWidth=qe,Me.call(this,U,Q),this.lineWidth=we},Me=function(U,Q){if((U!=="stroke"||Q||!A.call(this))&&(U==="stroke"||Q||!w.call(this))){for(var W,Y,ue=[],we=this.path,qe=0;qe<we.length;qe++){var Ae=we[qe];switch(Ae.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Re=ue.length;if(we[qe-1]&&!isNaN(we[qe-1].x)&&(W=[Ae.x-we[qe-1].x,Ae.y-we[qe-1].y],Re>0)){for(;Re>=0;Re--)if(ue[Re-1].close!==!0&&ue[Re-1].begin!==!0){ue[Re-1].deltas.push(W),ue[Re-1].abs.push(Ae);break}}break;case"bct":W=[Ae.x1-we[qe-1].x,Ae.y1-we[qe-1].y,Ae.x2-we[qe-1].x,Ae.y2-we[qe-1].y,Ae.x-we[qe-1].x,Ae.y-we[qe-1].y],ue[ue.length-1].deltas.push(W);break;case"qct":var gt=we[qe-1].x+2/3*(Ae.x1-we[qe-1].x),Pt=we[qe-1].y+2/3*(Ae.y1-we[qe-1].y),Nt=Ae.x+2/3*(Ae.x1-Ae.x),Bt=Ae.y+2/3*(Ae.y1-Ae.y),de=Ae.x,It=Ae.y;W=[gt-we[qe-1].x,Pt-we[qe-1].y,Nt-we[qe-1].x,Bt-we[qe-1].y,de-we[qe-1].x,It-we[qe-1].y],ue[ue.length-1].deltas.push(W);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(Ae)}}Y=Q?null:U==="stroke"?"stroke":"fill";for(var Ot=!1,rn=0;rn<ue.length;rn++)if(ue[rn].arc)for(var bt=ue[rn].abs,fn=0;fn<bt.length;fn++){var Kt=bt[fn];Kt.type==="arc"?ae.call(this,Kt.x,Kt.y,Kt.radius,Kt.startAngle,Kt.endAngle,Kt.counterclockwise,void 0,Q,!Ot):ge.call(this,Kt.x,Kt.y),Ot=!0}else if(ue[rn].close===!0)this.pdf.internal.out("h"),Ot=!1;else if(ue[rn].begin!==!0){var Cn=ue[rn].start.x,_n=ue[rn].start.y;Pe.call(this,ue[rn].deltas,Cn,_n),Ot=!0}Y&&X.call(this,Y),Q&&pe.call(this)}},ze=function(U){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-W;case"top":return U+Q-W;case"hanging":return U+Q-2*W;case"middle":return U+Q/2-W;default:return U}},oe=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};O.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(Q,W){this.colorStops.push([Q,W])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},O.prototype.createPattern=function(){return this.createLinearGradient()},O.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ae=function(U,Q,W,Y,ue,we,qe,Ae,Re){for(var gt=De.call(this,W,Y,ue,we),Pt=0;Pt<gt.length;Pt++){var Nt=gt[Pt];Pt===0&&(Re?z.call(this,Nt.x1+U,Nt.y1+Q):ge.call(this,Nt.x1+U,Nt.y1+Q)),Ve.call(this,U,Q,Nt.x2,Nt.y2,Nt.x3,Nt.y3,Nt.x4,Nt.y4)}Ae?pe.call(this):X.call(this,qe)},X=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(U,Q){this.pdf.internal.out(e(U)+" "+i(Q)+" m")},Z=function(U){var Q;switch(U.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var W,Y,ue,we=this.pdf.getTextDimensions(U.text),qe=ze.call(this,U.y),Ae=oe.call(this,qe)-we.h,Re=this.ctx.transform.applyToPoint(new d(U.x,qe));if(this.autoPaging){var gt=this.ctx.transform.decompose(),Pt=new h;Pt=(Pt=(Pt=Pt.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale);for(var Nt=this.ctx.transform.applyToRectangle(new u(U.x,qe,we.w,we.h)),Bt=Pt.applyToRectangle(new u(U.x,Ae,we.w,we.h)),de=L.call(this,Bt),It=[],Ot=0;Ot<de.length;Ot+=1)It.indexOf(de[Ot])===-1&&It.push(de[Ot]);K(It);for(var rn=It[0],bt=It[It.length-1],fn=rn;fn<bt+1;fn++){this.pdf.setPage(fn);var Kt=fn===1?this.posY+this.margin[0]:this.margin[0],Cn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_n=this.pdf.internal.pageSize.height-this.margin[2],Gn=_n-this.margin[0],$n=this.pdf.internal.pageSize.width-this.margin[1],On=$n-this.margin[3],ti=fn===1?0:Cn+(fn-2)*Gn;if(this.ctx.clip_path.length!==0){var Fn=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(W,this.posX+this.margin[3],-1*ti+Kt),Me.call(this,"fill",!0),this.path=Fn}var pn=q([JSON.parse(JSON.stringify(Bt))],this.posX+this.margin[3],-ti+Kt+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*U.scale),ue=this.lineWidth,this.lineWidth=ue*U.scale);var An=this.autoPaging!=="text";if(An||pn.y+pn.h<=_n){if(An||pn.y>=Kt&&pn.x<=$n){var gn=An?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||$n-pn.x)[0],_r=q([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-ti+Kt+this.ctx.prevPageLastElemOffset)[0],ci=An&&(fn>rn||fn<bt)&&I.call(this);ci&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],On,Gn,null).clip().discardPath()),this.pdf.text(gn,_r.x,_r.y,{angle:U.angle,align:Q,renderingMode:U.renderingMode}),ci&&this.pdf.restoreGraphicsState()}}else pn.y<_n&&(this.ctx.prevPageLastElemOffset+=_n-pn.y);U.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=ue)}}else U.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*U.scale),ue=this.lineWidth,this.lineWidth=ue*U.scale),this.pdf.text(U.text,Re.x+this.posX,Re.y+this.posY,{angle:U.angle,align:Q,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=ue)},ge=function(U,Q,W,Y){W=W||0,Y=Y||0,this.pdf.internal.out(e(U+W)+" "+i(Q+Y)+" l")},Pe=function(U,Q,W){return this.pdf.lines(U,Q,W,null,null)},Ve=function(U,Q,W,Y,ue,we,qe,Ae){this.pdf.internal.out([t(r(W+U)),t(s(Y+Q)),t(r(ue+U)),t(s(we+Q)),t(r(qe+U)),t(s(Ae+Q)),"c"].join(" "))},De=function(U,Q,W,Y){for(var ue=2*Math.PI,we=Math.PI/2;Q>W;)Q-=ue;var qe=Math.abs(W-Q);qe<ue&&Y&&(qe=ue-qe);for(var Ae=[],Re=Y?-1:1,gt=Q;qe>1e-5;){var Pt=gt+Re*Math.min(qe,we);Ae.push(Fe.call(this,U,gt,Pt)),qe-=Math.abs(Pt-gt),gt=Pt}return Ae},Fe=function(U,Q,W){var Y=(W-Q)/2,ue=U*Math.cos(Y),we=U*Math.sin(Y),qe=ue,Ae=-we,Re=qe*qe+Ae*Ae,gt=Re+qe*ue+Ae*we,Pt=4/3*(Math.sqrt(2*Re*gt)-gt)/(qe*we-Ae*ue),Nt=qe-Pt*Ae,Bt=Ae+Pt*qe,de=Nt,It=-Bt,Ot=Y+Q,rn=Math.cos(Ot),bt=Math.sin(Ot);return{x1:U*Math.cos(Q),y1:U*Math.sin(Q),x2:Nt*rn-Bt*bt,y2:Nt*bt+Bt*rn,x3:de*rn-It*bt,y3:de*bt+It*rn,x4:U*Math.cos(W),y4:U*Math.sin(W)}},Te=function(U){return 180*U/Math.PI},Je=function(U,Q,W,Y,ue,we){var qe=U+.5*(W-U),Ae=Q+.5*(Y-Q),Re=ue+.5*(W-ue),gt=we+.5*(Y-we),Pt=Math.min(U,ue,qe,Re),Nt=Math.max(U,ue,qe,Re),Bt=Math.min(Q,we,Ae,gt),de=Math.max(Q,we,Ae,gt);return new u(Pt,Bt,Nt-Pt,de-Bt)},_t=function(U,Q,W,Y,ue,we,qe,Ae){var Re,gt,Pt,Nt,Bt,de,It,Ot,rn,bt,fn,Kt,Cn,_n,Gn=W-U,$n=Y-Q,On=ue-W,ti=we-Y,Fn=qe-ue,pn=Ae-we;for(gt=0;gt<41;gt++)rn=(It=(Pt=U+(Re=gt/40)*Gn)+Re*((Bt=W+Re*On)-Pt))+Re*(Bt+Re*(ue+Re*Fn-Bt)-It),bt=(Ot=(Nt=Q+Re*$n)+Re*((de=Y+Re*ti)-Nt))+Re*(de+Re*(we+Re*pn-de)-Ot),gt==0?(fn=rn,Kt=bt,Cn=rn,_n=bt):(fn=Math.min(fn,rn),Kt=Math.min(Kt,bt),Cn=Math.max(Cn,rn),_n=Math.max(_n,bt));return new u(Math.round(fn),Math.round(Kt),Math.round(Cn-fn),Math.round(_n-Kt))},pt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,Q,W=(U=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:Q}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Jt.API),(function(n){var t=function(d){var u,h,v,C,O,T,w,A,I,L;for(/[^\x00-\xFF]/.test(d),h=[],v=0,C=(d+=u="\0\0\0\0".slice(d.length%4||4)).length;C>v;v+=4)(O=(d.charCodeAt(v)<<24)+(d.charCodeAt(v+1)<<16)+(d.charCodeAt(v+2)<<8)+d.charCodeAt(v+3))!==0?(T=(O=((O=((O=((O=(O-(L=O%85))/85)-(I=O%85))/85)-(A=O%85))/85)-(w=O%85))/85)%85,h.push(T+33,w+33,A+33,I+33,L+33)):h.push(122);return(function(B,q){for(var K=q;K>0;K--)B.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},e=function(d){var u,h,v,C,O,T=String,w="length",A=255,I="charCodeAt",L="slice",B="replace";for(d[L](-2),d=d[L](0,-2)[B](/\s/g,"")[B]("z","!!!!!"),v=[],C=0,O=(d+=u="uuuuu"[L](d[w]%5||5))[w];O>C;C+=5)h=52200625*(d[I](C)-33)+614125*(d[I](C+1)-33)+7225*(d[I](C+2)-33)+85*(d[I](C+3)-33)+(d[I](C+4)-33),v.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(q,K){for(var J=K;J>0;J--)q.pop()})(v,u[w]),T.fromCharCode.apply(T,v)},i=function(d){return d.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(d){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),u.test(d)===!1)return"";for(var h="",v=0;v<d.length;v+=2)h+=String.fromCharCode("0x"+(d[v]+d[v+1]));return h},s=function(d){for(var u=new Uint8Array(d.length),h=d.length;h--;)u[h]=d.charCodeAt(h);return(u=Mb(u)).reduce(function(v,C){return v+String.fromCharCode(C)},"")};n.processDataByFilters=function(d,u){var h=0,v=d||"",C=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":v=e(v),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=t(v),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=r(v),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=i(v),C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=s(v),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:v,reverseChain:C.reverse().join(" ")}}})(Jt.API),(function(n){n.loadFile=function(t,e,i){return(function(r,s,d){s=s!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=(function(h,v,C){var O=new XMLHttpRequest,T=0,w=function(A){var I=A.length,L=[],B=String.fromCharCode;for(T=0;T<I;T+=1)L.push(B(255&A.charCodeAt(T)));return L.join("")};if(O.open("GET",h,!v),O.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(O.onload=function(){O.status===200?C(w(this.responseText)):C(void 0)}),O.send(null),v&&O.status===200)return w(O.responseText)})(r,s,d)}catch{}return u})(t,e,i)},n.loadImageFile=n.loadFile})(Jt.API),(function(n){function t(){return(kn.html2canvas?Promise.resolve(kn.html2canvas):import("./chunk-GPXMSDNG.js")).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function e(){return(kn.DOMPurify?Promise.resolve(kn.DOMPurify):import("./chunk-LFZHQARY.js")).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var i=function(u){var h=Ji(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},r=function(u,h){var v=document.createElement(u);for(var C in h.className&&(v.className=h.className),h.innerHTML&&h.dompurify&&(v.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)v.style[C]=h.style[C];return v},s=function u(h,v){for(var C=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),O=h.firstChild;O;O=O.nextSibling)v!==!0&&O.nodeType===1&&O.nodeName==="SCRIPT"||C.appendChild(u(O,v));return h.nodeType===1&&(h.nodeName==="CANVAS"?(C.width=h.width,C.height=h.height,C.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(C.value=h.value),C.addEventListener("load",function(){C.scrollTop=h.scrollTop,C.scrollLeft=h.scrollLeft},!0)),C},d=function u(h){var v=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),C=u.convert(Promise.resolve(),v);return(C=C.setProgress(1,u,1,[u])).set(h)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(u,h){return u.__proto__=h||d.prototype,u},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(v){switch(i(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(e).then(function(v){return this.set({src:r("div",{innerHTML:u,dompurify:v})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},d.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(h){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,h(this.prop.container,v)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(h){var v=this.opt.jsPDF,C=this.opt.fontFaces,O=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,T=Object.assign({async:!0,allowTaint:!0,scale:O,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete T.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=C,C)for(var w=0;w<C.length;++w){var A=C[w],I=A.src.find(function(L){return L.format==="truetype"});I&&v.addFont(I.url,A.ref.name,A.ref.style)}return T.windowHeight=T.windowHeight||0,T.windowHeight=T.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):T.windowHeight,v.context2d.save(!0),h(this.prop.container,T)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(u,h,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},d.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},d.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},d.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(u){if(i(u)!=="object")return this;var h=Object.keys(u||{}).map(function(v){if(v in d.template.prop)return function(){this.prop[v]=u[v]};switch(v){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[v]=u[v]}}},this);return this.then(function(){return this.thenList(h)})},d.prototype.get=function(u,h){return this.then(function(){var v=u in d.template.prop?this.prop[u]:this.opt[u];return h?h(v):v})},d.prototype.setMargin=function(u){return this.then(function(){switch(i(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},d.prototype.setPageSize=function(u){function h(v,C){return Math.floor(v*C/72*96)}return this.then(function(){(u=u||Jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},d.prototype.setProgress=function(u,h,v,C){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),v!=null&&(this.progress.n=v),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(u,h,v,C){return this.setProgress(u?this.progress.val+u:null,h||null,v?this.progress.n+v:null,C?this.progress.stack.concat(C):null)},d.prototype.then=function(u,h){var v=this;return this.thenCore(u,h,function(C,O){return v.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(T){return v.updateProgress(null,C),T}).then(C,O).then(function(T){return v.updateProgress(1),T})})},d.prototype.thenCore=function(u,h,v){v=v||Promise.prototype.then;var C=this;u&&(u=u.bind(C)),h&&(h=h.bind(C));var O=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?C:d.convert(Object.assign({},C),Promise.prototype),T=v.call(O,u,h);return d.convert(T,C.__proto__)},d.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},d.prototype.thenList=function(u){var h=this;return u.forEach(function(v){h=h.thenCore(v)}),h},d.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return d.convert(h,this)},d.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},d.prototype.error=function(u){return this.then(function(){throw new Error(u)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Jt.getPageSize=function(u,h,v){if(Ji(u)==="object"){var C=u;u=C.orientation,h=C.unit||h,v=C.format||v}h=h||"mm",v=v||"a4",u=(""+(u||"P")).toLowerCase();var O,T=(""+v).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":O=1;break;case"mm":O=72/25.4;break;case"cm":O=72/2.54;break;case"in":O=72;break;case"px":O=.75;break;case"pc":case"em":O=12;break;case"ex":O=6;break;default:throw"Invalid unit: "+h}var A,I=0,L=0;if(w.hasOwnProperty(T))I=w[T][1]/O,L=w[T][0]/O;else try{I=v[1],L=v[0]}catch{throw new Error("Invalid format: "+v)}if(u==="p"||u==="portrait")u="p",L>I&&(A=L,L=I,I=A);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",I>L&&(A=L,L=I,I=A)}return{width:L,height:I,unit:h,k:O,orientation:u}},n.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(P4):null;var v=new d(h);return h.worker?v:v.from(u).doCallback()}})(Jt.API),Jt.API.addJS=function(n){return U9=n,this.internal.events.subscribe("postPutResources",function(){$b=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($b+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),B9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+U9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$b!==void 0&&B9!==void 0&&this.internal.out("/Names <</JavaScript "+$b+" 0 R>>")}),this},(function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var d=r[s],u=i.exec(d);if(u!=null){var h=u[1];e.internal.newObjectDeferredBegin(h,!1)}e.internal.write(d)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,C=[];for(s=0;s<v;s++){var O=e.internal.newObject();C.push(O);var T=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var w=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<C.length;s++)e.internal.write("(page_"+(s+1)+")"+C[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+w+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,r,s){var d={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(d),d},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var d=i.children[s];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=e.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var v=0;v<i.children.length;v++)this.renderItems(i.children[v])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])})(Jt.API),(function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,r,s,d,u){var h,v=this.decode.DCT_DECODE,C=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=d||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,h=(function(O){for(var T,w=256*O.charCodeAt(4)+O.charCodeAt(5),A=O.length,I={width:0,height:0,numcomponents:1},L=4;L<A;L+=2){if(L+=w,t.indexOf(O.charCodeAt(L+1))!==-1){T=256*O.charCodeAt(L+5)+O.charCodeAt(L+6),I={width:256*O.charCodeAt(L+7)+O.charCodeAt(L+8),height:T,numcomponents:O.charCodeAt(L+9)};break}w=256*O.charCodeAt(L+2)+O.charCodeAt(L+3)}return I})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}C={data:e,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:v,index:i,alias:r}}return C}})(Jt.API),Jt.API.processPNG=function(n,t,e,i){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var r,s=O9(n,{checkCrc:!0}),d=s.width,u=s.height,h=s.channels,v=s.palette,C=s.depth;r=v&&h===1?(function(ae){for(var X=ae.width,pe=ae.height,z=ae.data,Z=ae.palette,ge=ae.depth,Pe=!1,Ve=[],De=[],Fe=void 0,Te=!1,Je=0,_t=0;_t<Z.length;_t++){var pt=LO(Z[_t],4),U=pt[0],Q=pt[1],W=pt[2],Y=pt[3];Ve.push(U,Q,W),Y!=null&&(Y===0?(Je++,De.length<1&&De.push(_t)):Y<255&&(Te=!0))}if(Te||Je>1){Pe=!0,De=void 0;var ue=X*pe;Fe=new Uint8Array(ue);for(var we=new DataView(z.buffer),qe=0;qe<ue;qe++){var Ae=E4(we,qe,ge),Re=LO(Z[Ae],4)[3];Fe[qe]=Re}}else Je===0&&(De=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Pe?8:void 0,colorBytes:z,alphaBytes:Fe,needSMask:Pe,palette:Ve,mask:De}})(s):h===2||h===4?(function(ae){for(var X=ae.data,pe=ae.width,z=ae.height,Z=ae.channels,ge=ae.depth,Pe=Z===2?"DeviceGray":"DeviceRGB",Ve=Z-1,De=pe*z,Fe=Ve,Te=De*Fe,Je=1*De,_t=Math.ceil(Te*ge/8),pt=Math.ceil(Je*ge/8),U=new Uint8Array(_t),Q=new Uint8Array(pt),W=new DataView(X.buffer),Y=new DataView(U.buffer),ue=new DataView(Q.buffer),we=!1,qe=0;qe<De;qe++){for(var Ae=qe*Z,Re=0;Re<Fe;Re++)J9(Y,E4(W,Ae+Re,ge),qe*Fe+Re,ge);var gt=E4(W,Ae+Fe,ge);gt<(1<<ge)-1&&(we=!0),J9(ue,gt,1*qe,ge)}return{colorSpace:Pe,colorsPerPixel:Ve,sMaskBitsPerComponent:we?ge:void 0,colorBytes:U,alphaBytes:Q,needSMask:we}})(s):(function(ae){var X=ae.data,pe=ae.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:pe,colorsPerPixel:pe==="DeviceGray"?1:3,colorBytes:X instanceof Uint16Array?(function(z){for(var Z=z.length,ge=new Uint8Array(2*Z),Pe=new DataView(ge.buffer,ge.byteOffset,ge.byteLength),Ve=0;Ve<Z;Ve++)Pe.setUint16(2*Ve,z[Ve],!1);return ge})(X):X,needSMask:!1}})(s);var O,T,w,A=r,I=A.colorSpace,L=A.colorsPerPixel,B=A.sMaskBitsPerComponent,q=A.colorBytes,K=A.alphaBytes,J=A.needSMask,Me=A.palette,ze=A.mask,oe=null;return i!==Jt.API.image_compression.NONE&&typeof Mb=="function"?(oe=(function(ae){var X;switch(ae){case Jt.API.image_compression.FAST:X=11;break;case Jt.API.image_compression.MEDIUM:X=13;break;case Jt.API.image_compression.SLOW:X=14;break;default:X=12}return X})(i),O=this.decode.FLATE_DECODE,T="/Predictor ".concat(oe," /Colors ").concat(L," /BitsPerComponent ").concat(C," /Columns ").concat(d),n=q9(q,Math.ceil(d*L*C/8),L,C,i),J&&(w=q9(K,Math.ceil(d*B/8),1,B,i))):(O=void 0,T=void 0,n=q,J&&(w=K)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(w&&this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),{alias:e,data:n,index:t,filter:O,decodeParameters:T,transparency:ze,palette:Me,sMask:w,predictor:oe,width:d,height:u,bitsPerComponent:C,sMaskBitsPerComponent:B,colorSpace:I}}},(function(n){n.processGIF89A=function(t,e,i,r){var s=new f_e(t),d=s.width,u=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var v={data:h,width:d,height:u},C=new O4(100).encode(v,100);return n.processJPEG.call(this,C,e,i,r)},n.processGIF87A=n.processGIF89A})(Jt.API),Sl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Sl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){or.log("bit decode error:"+e)}},Sl.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+8*r*4,u=0;u<8&&8*r+u<this.width;u++){var h=this.palette[s>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}e!==0&&(this.pos+=4-e)}},Sl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<n;r++){var s=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+2*r*4,u=s>>4,h=15&s,v=this.palette[u];if(this.data[d]=v.blue,this.data[d+1]=v.green,this.data[d+2]=v.red,this.data[d+3]=255,2*r+1>=this.width)break;v=this.palette[h],this.data[d+4]=v.blue,this.data[d+4+1]=v.green,this.data[d+4+2]=v.red,this.data[d+4+3]=255}t!==0&&(this.pos+=4-t)}},Sl.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(r<this.palette.length){var d=this.palette[r];this.data[s]=d.red,this.data[s+1]=d.green,this.data[s+2]=d.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Sl.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(s&t)/t*255|0,u=(s>>5&t)/t*255|0,h=(s>>10&t)/t*255|0,v=s>>15?255:0,C=i*this.width*4+4*r;this.data[C]=h,this.data[C+1]=u,this.data[C+2]=d,this.data[C+3]=v}this.pos+=n}},Sl.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&t)/t*255|0,h=(d>>5&e)/e*255|0,v=(d>>11)/t*255|0,C=r*this.width*4+4*s;this.data[C]=v,this.data[C+1]=h,this.data[C+2]=u,this.data[C+3]=255}this.pos+=n}},Sl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*e;this.data[d]=s,this.data[d+1]=r,this.data[d+2]=i,this.data[d+3]=255}this.pos+=this.width%4}},Sl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*e;this.data[u]=s,this.data[u+1]=r,this.data[u+2]=i,this.data[u+3]=d}},Sl.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(t,e,i,r){var s=new Sl(t,!1),d=s.width,u=s.height,h={data:s.getData(),width:d,height:u},v=new O4(100).encode(h,100);return n.processJPEG.call(this,v,e,i,r)}})(Jt.API),Q9.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(t,e,i,r){var s=new Q9(t),d=s.width,u=s.height,h={data:s.getData(),width:d,height:u},v=new O4(100).encode(h,100);return n.processJPEG.call(this,v,e,i,r)}})(Jt.API),Jt.API.processRGBA=function(n,t,e){for(var i=n.data,r=i.length,s=new Uint8Array(r/4*3),d=new Uint8Array(r/4),u=0,h=0,v=0;v<r;v+=4){var C=i[v],O=i[v+1],T=i[v+2],w=i[v+3];s[u++]=C,s[u++]=O,s[u++]=T,d[h++]=w}var A=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:A,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Jt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vu=Jt.API,Yb=Vu.getCharWidthsArray=function(n,t){var e,i,r=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),d=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:r.metadata.Unicode.widths,h=u.fof?u.fof:1,v=t.kerning?t.kerning:r.metadata.Unicode.kerning,C=v.fof?v.fof:1,O=t.doKerning!==!1,T=0,w=n.length,A=0,I=u[0]||h,L=[];for(e=0;e<w;e++)i=n.charCodeAt(e),typeof r.metadata.widthOfString=="function"?L.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+d*(1e3/s)||0)/1e3):(T=O&&Ji(v[i])==="object"&&!isNaN(parseInt(v[i][A],10))?v[i][A]/C:0,L.push((u[i]||I)/h+T)),A=i;return L},j9=Vu.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return Vu.processArabic&&(n=Vu.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,r)/e:Yb.apply(this,arguments).reduce(function(s,d){return s+d},0)},W9=function(n,t,e,i){for(var r=[],s=0,d=n.length,u=0;s!==d&&u+t[s]<e;)u+=t[s],s++;r.push(n.slice(0,s));var h=s;for(u=0;s!==d;)u+t[s]>i&&(r.push(n.slice(h,s)),u=0,h=s),u+=t[s],s++;return h!==s&&r.push(n.slice(h,s)),r},z9=function(n,t,e){e||(e={});var i,r,s,d,u,h,v,C=[],O=[C],T=e.textIndent||0,w=0,A=0,I=n.split(" "),L=Yb.apply(this,[" ",e])[0];if(h=e.lineIndent===-1?I[0].length+2:e.lineIndent||0){var B=Array(h).join(" "),q=[];I.map(function(J){(J=J.split(/\s*\n/)).length>1?q=q.concat(J.map(function(Me,ze){return(ze&&Me.length?`
`:"")+Me})):q.push(J[0])}),I=q,h=j9.apply(this,[B,e])}for(s=0,d=I.length;s<d;s++){var K=0;if(i=I[s],h&&i[0]==`
`&&(i=i.substr(1),K=1),T+w+(A=(r=Yb.apply(this,[i,e])).reduce(function(J,Me){return J+Me},0))>t||K){if(A>t){for(u=W9.apply(this,[i,r,t-(T+w),t]),C.push(u.shift()),C=[u.pop()];u.length;)O.push([u.shift()]);A=r.slice(i.length-(C[0]?C[0].length:0)).reduce(function(J,Me){return J+Me},0)}else C=[i];O.push(C),T=A+h,w=L}else C.push(i),T+=w+A,w=L}return v=h?function(J,Me){return(Me?B:"")+J.join(" ")}:function(J){return J.join(" ")},O.map(v)},Vu.splitTextToSize=function(n,t,e){var i,r=(e=e||{}).fontSize||this.internal.getFontSize(),s=function(C){if(C.widths&&C.kerning)return{widths:C.widths,kerning:C.kerning};var O=this.internal.getFont(C.fontName,C.fontStyle),T="Unicode";return O.metadata[T]?{widths:O.metadata[T].widths||{0:1},kerning:O.metadata[T].kerning||{}}:{font:O.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var d=1*this.internal.scaleFactor*t/r;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=e.lineIndent;var u,h,v=[];for(u=0,h=i.length;u<h;u++)v=v.concat(z9.apply(this,[i[u],d,s]));return v},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",i={},r={},s=0;s<16;s++)i[e[s]]=t[s],r[t[s]]=e[s];var d=function(T){return"0x"+parseInt(T,10).toString(16)},u=n.__fontmetrics__.compress=function(T){var w,A,I,L,B=["{"];for(var q in T){if(w=T[q],isNaN(parseInt(q,10))?A="'"+q+"'":(q=parseInt(q,10),A=(A=d(q).slice(2)).slice(0,-1)+r[A.slice(-1)]),typeof w=="number")w<0?(I=d(w).slice(3),L="-"):(I=d(w).slice(2),L=""),I=L+I.slice(0,-1)+r[I.slice(-1)];else{if(Ji(w)!=="object")throw new Error("Don't know what to do with value type "+Ji(w)+".");I=u(w)}B.push(A+I)}return B.push("}"),B.join("")},h=n.__fontmetrics__.uncompress=function(T){if(typeof T!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,A,I,L,B={},q=1,K=B,J=[],Me="",ze="",oe=T.length-1,ae=1;ae<oe;ae+=1)(L=T[ae])=="'"?w?(I=w.join(""),w=void 0):w=[]:w?w.push(L):L=="{"?(J.push([K,I]),K={},I=void 0):L=="}"?((A=J.pop())[0][A[1]]=K,I=void 0,K=A[0]):L=="-"?q=-1:I===void 0?i.hasOwnProperty(L)?(Me+=i[L],I=parseInt(Me,16)*q,q=1,Me=""):Me+=L:i.hasOwnProperty(L)?(ze+=i[L],K[I]=parseInt(ze,16)*q,q=1,I=void 0,ze=""):ze+=L;return B},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},O={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(T){var w=T.font,A=O.Unicode[w.postScriptName];A&&(w.metadata.Unicode={},w.metadata.Unicode.widths=A.widths,w.metadata.Unicode.kerning=A.kerning);var I=C.Unicode[w.postScriptName];I&&(w.metadata.Unicode.encoding=I,w.encoding=I.codePages[0])}])})(Jt.API),(function(n){var t=function(e){for(var i=e.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=e.charCodeAt(s);return r};n.API.events.push(["addFont",function(e){var i=void 0,r=e.font,s=e.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(Jb(u)),d.metadata=n.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(r,i)}}])})(Jt),Jt.API.addSvgAsImage=function(n,t,e,i,r,s,d,u){if(isNaN(t)||isNaN(e))throw or.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw or.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=i,h.height=r;var v=h.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,h.width,h.height);var C={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},O=this;return(kn.canvg?Promise.resolve(kn.canvg):import("./chunk-HO7XK2NC.js")).catch(function(T){return Promise.reject(new Error("Could not load canvg: "+T))}).then(function(T){return T.default?T.default:T}).then(function(T){return T.fromString(v,n,C)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(T){return T.render(C)}).then(function(){O.addImage(h.toDataURL("image/jpeg",1),t,e,i,r,d,u)})},Jt.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,e);return this},Jt.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,r,s,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],v=0,C=0,O=0;function T(A,I){var L,B=!1;for(L=0;L<A.length;L+=1)A[L]===I&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var w=u.length;for(O=0;O<w;O+=1)e[u[O]].value=e[u[O]].defaultValue,e[u[O]].explicitSet=!1}if(Ji(n)==="object"){for(r in n)if(s=n[r],T(u,r)&&s!==void 0){if(e[r].type==="boolean"&&typeof s=="boolean")e[r].value=s;else if(e[r].type==="name"&&T(e[r].valueSet,s))e[r].value=s;else if(e[r].type==="integer"&&Number.isInteger(s))e[r].value=s;else if(e[r].type==="array"){for(v=0;v<s.length;v+=1)if(i=!0,s[v].length===1&&typeof s[v][0]=="number")h.push(String(s[v]-1));else if(s[v].length>1){for(C=0;C<s[v].length;C+=1)typeof s[v][C]!="number"&&(i=!1);i===!0&&h.push([s[v][0]-1,s[v][1]-1].join(" "))}e[r].value="["+h.join(" ")+"]"}else e[r].value=e[r].defaultValue;e[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,I=[];for(A in e)e[A].explicitSet===!0&&(e[A].type==="name"?I.push("/"+A+" /"+e[A].value):I.push("/"+A+" "+e[A].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),v=s.length+d.length+u.length+r.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(r+s+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(Jt.API),(function(n){var t=n.API,e=t.pdfEscape16=function(s,d){for(var u,h=d.metadata.Unicode.widths,v=["","0","00","000","0000"],C=[""],O=0,T=s.length;O<T;++O){if(u=d.metadata.characterToGlyph(s.charCodeAt(O)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=s.charCodeAt(O),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return C.join("");u=u.toString(16),C.push(v[4-u.length],u)}return C.join("")},i=function(s){var d,u,h,v,C,O,T;for(C=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],O=0,T=(u=Object.keys(s).sort(function(w,A){return w-A})).length;O<T;O++)d=u[O],h.length>=100&&(C+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[d]!==void 0&&s[d]!==null&&typeof s[d].toString=="function"&&(v=("0000"+s[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+v+">"));return h.length&&(C+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),C+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(d){var u=d.font,h=d.out,v=d.newObject,C=d.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var O=u.metadata.Unicode.widths,T=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),w="",A=0;A<T.length;A++)w+=String.fromCharCode(T[A]);var I=v();C({data:w,addLength1:!0,objectId:I}),h("endobj");var L=v();C({data:i(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var B=v();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Uu(u.fontName)),h("/FontFile2 "+I+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var q=v();h("<<"),h("/Type /Font"),h("/BaseFont /"+Uu(u.fontName)),h("/FontDescriptor "+B+" 0 R"),h("/W "+n.API.PDFObject.convert(O)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=v(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+Uu(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+q+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(d){var u=d.font,h=d.out,v=d.newObject,C=d.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var O=u.metadata.rawData,T="",w=0;w<O.length;w++)T+=String.fromCharCode(O[w]);var A=v();C({data:T,addLength1:!0,objectId:A}),h("endobj");var I=v();C({data:i(u.metadata.toUnicode),addLength1:!0,objectId:I}),h("endobj");var L=v();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Uu(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=v();for(var B=0;B<u.metadata.hmtx.widths.length;B++)u.metadata.hmtx.widths[B]=parseInt(u.metadata.hmtx.widths[B]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Uu(u.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]);var r=function(s){var d,u=s.text||"",h=s.x,v=s.y,C=s.options||{},O=s.mutex||{},T=O.pdfEscape,w=O.activeFontKey,A=O.fonts,I=w,L="",B=0,q="",K=A[I].encoding;if(A[I].encoding!=="Identity-H")return{text:u,x:h,y:v,options:C,mutex:O};for(q=u,I=w,Array.isArray(u)&&(q=u[0]),B=0;B<q.length;B+=1)A[I].metadata.hasOwnProperty("cmap")&&(d=A[I].metadata.cmap.unicode.codeMap[q[B].charCodeAt(0)]),d||q[B].charCodeAt(0)<256&&A[I].metadata.hasOwnProperty("Unicode")?L+=q[B]:L+="";var J="";return parseInt(I.slice(1))<14||K==="WinAnsiEncoding"?J=T(L,I).split("").map(function(Me){return Me.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(J=e(L,A[I])),O.isHex=!0,{text:J,x:h,y:v,options:C,mutex:O}};t.events.push(["postProcessText",function(s){var d=s.text||"",u=[],h={text:d,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(d)){var v=0;for(v=0;v<d.length;v+=1)Array.isArray(d[v])&&d[v].length===3?u.push([r(Object.assign({},h,{text:d[v][0]})).text,d[v][1],d[v][2]]):u.push(r(Object.assign({},h,{text:d[v]})).text);s.text=u}else s.text=r(Object.assign({},h,{text:d})).text}])})(Jt),(function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(Jt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,s,d,u,h,v,C,O=t,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),q=!1,K=0;this.__bidiEngine__={};var J=function(z){var Z=z.charCodeAt(),ge=Z>>8,Pe=I[ge];return Pe!==void 0?O[256*Pe+(255&Z)]:ge===252||ge===253?"AL":B.test(ge)?"L":ge===8?"R":"N"},Me=function(z){for(var Z,ge=0;ge<z.length;ge++){if((Z=J(z.charAt(ge)))==="L")return!1;if(Z==="R")return!0}return!1},ze=function(z,Z,ge,Pe){var Ve,De,Fe,Te,Je=Z[Pe];switch(Je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":q=!1;break;case"N":case"AN":break;case"EN":q&&(Je="AN");break;case"AL":q=!0,Je="R";break;case"WS":case"BN":Je="N";break;case"CS":Pe<1||Pe+1>=Z.length||(Ve=ge[Pe-1])!=="EN"&&Ve!=="AN"||(De=Z[Pe+1])!=="EN"&&De!=="AN"?Je="N":q&&(De="AN"),Je=De===Ve?De:"N";break;case"ES":Je=(Ve=Pe>0?ge[Pe-1]:"B")==="EN"&&Pe+1<Z.length&&Z[Pe+1]==="EN"?"EN":"N";break;case"ET":if(Pe>0&&ge[Pe-1]==="EN"){Je="EN";break}if(q){Je="N";break}for(Fe=Pe+1,Te=Z.length;Fe<Te&&Z[Fe]==="ET";)Fe++;Je=Fe<Te&&Z[Fe]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(Te=Z.length,Fe=Pe+1;Fe<Te&&Z[Fe]==="NSM";)Fe++;if(Fe<Te){var _t=z[Pe],pt=_t>=1425&&_t<=2303||_t===64286;if(Ve=Z[Fe],pt&&(Ve==="R"||Ve==="AL")){Je="R";break}}}Je=Pe<1||(Ve=Z[Pe-1])==="B"?"N":ge[Pe-1];break;case"B":q=!1,r=!0,Je=K;break;case"S":s=!0,Je="N"}return Je},oe=function(z,Z,ge){var Pe=z.split("");return ge&&ae(Pe,ge,{hiLevel:K}),Pe.reverse(),Z&&Z.reverse(),Pe.join("")},ae=function(z,Z,ge){var Pe,Ve,De,Fe,Te,Je=-1,_t=z.length,pt=0,U=[],Q=K?w:T,W=[];for(q=!1,r=!1,s=!1,Ve=0;Ve<_t;Ve++)W[Ve]=J(z[Ve]);for(De=0;De<_t;De++){if(Te=pt,U[De]=ze(z,W,U,De),Pe=240&(pt=Q[Te][A[U[De]]]),pt&=15,Z[De]=Fe=Q[pt][5],Pe>0)if(Pe===16){for(Ve=Je;Ve<De;Ve++)Z[Ve]=1;Je=-1}else Je=-1;if(Q[pt][6])Je===-1&&(Je=De);else if(Je>-1){for(Ve=Je;Ve<De;Ve++)Z[Ve]=Fe;Je=-1}W[De]==="B"&&(Z[De]=0),ge.hiLevel|=Fe}s&&(function(Y,ue,we){for(var qe=0;qe<we;qe++)if(Y[qe]==="S"){ue[qe]=K;for(var Ae=qe-1;Ae>=0&&Y[Ae]==="WS";Ae--)ue[Ae]=K}})(W,Z,_t)},X=function(z,Z,ge,Pe,Ve){if(!(Ve.hiLevel<z)){if(z===1&&K===1&&!r)return Z.reverse(),void(ge&&ge.reverse());for(var De,Fe,Te,Je,_t=Z.length,pt=0;pt<_t;){if(Pe[pt]>=z){for(Te=pt+1;Te<_t&&Pe[Te]>=z;)Te++;for(Je=pt,Fe=Te-1;Je<Fe;Je++,Fe--)De=Z[Je],Z[Je]=Z[Fe],Z[Fe]=De,ge&&(De=ge[Je],ge[Je]=ge[Fe],ge[Fe]=De);pt=Te}pt++}}},pe=function(z,Z,ge){var Pe=z.split(""),Ve={hiLevel:K};return ge||(ge=[]),ae(Pe,ge,Ve),(function(De,Fe,Te){if(Te.hiLevel!==0&&C)for(var Je,_t=0;_t<De.length;_t++)Fe[_t]===1&&(Je=L.indexOf(De[_t]))>=0&&(De[_t]=L[Je+1])})(Pe,ge,Ve),X(2,Pe,Z,ge,Ve),X(1,Pe,Z,ge,Ve),Pe.join("")};return this.__bidiEngine__.doBidiReorder=function(z,Z,ge){if((function(Ve,De){if(De)for(var Fe=0;Fe<Ve.length;Fe++)De[Fe]=Fe;u===void 0&&(u=Me(Ve)),v===void 0&&(v=Me(Ve))})(z,Z),d||!h||v)if(d&&h&&u^v)K=u?1:0,z=oe(z,Z,ge);else if(!d&&h&&v)K=u?1:0,z=pe(z,Z,ge),z=oe(z,Z);else if(!d||u||h||v){if(d&&!h&&u^v)z=oe(z,Z),u?(K=0,z=pe(z,Z,ge)):(K=1,z=pe(z,Z,ge),z=oe(z,Z));else if(d&&u&&!h&&v)K=1,z=pe(z,Z,ge),z=oe(z,Z);else if(!d&&!h&&u^v){var Pe=C;u?(K=1,z=pe(z,Z,ge),K=0,C=!1,z=pe(z,Z,ge),C=Pe):(K=0,z=pe(z,Z,ge),z=oe(z,Z),K=1,C=!1,z=pe(z,Z,ge),C=Pe,z=oe(z,Z))}}else K=0,z=pe(z,Z,ge);else K=u?1:0,z=pe(z,Z,ge);return z},this.__bidiEngine__.setOptions=function(z){z&&(d=z.isInputVisual,h=z.isOutputVisual,u=z.isInputRtl,v=z.isOutputRtl,C=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var d=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var u=0;for(d=[],u=0;u<r.length;u+=1)Object.prototype.toString.call(r[u])==="[object Array]"?d.push([e.doBidiReorder(r[u][0]),r[u][1],r[u][2]]):d.push([e.doBidiReorder(r[u])]);i.text=d}else i.text=e.doBidiReorder(r);e.setOptions({isInputVisual:!0})}])})(Jt),Jt.API.TTFFont=(function(){function n(t){var e;if(this.rawData=t,e=this.contents=new h0(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new k_e(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new h_e(this.contents),this.head=new v_e(this),this.name=new M_e(this),this.cmap=new dL(this),this.toUnicode={},this.hhea=new x_e(this),this.maxp=new S_e(this),this.hmtx=new P_e(this),this.post=new C_e(this),this.os2=new y_e(this),this.loca=new T_e(this),this.glyf=new w_e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var d,u,h,v;for(v=[],d=0,u=(h=this.bbox).length;d<u;d++)t=h[d],v.push(Math.round(t*this.scaleFactor));return v}.call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(e=r>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var r,s,d,u;for(d=0,s=0,u=(t=""+t).length;0<=u?s<u:s>u;s=0<=u?++s:--s)r=t.charCodeAt(s),d+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/e)||0;return d*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n})();var wl,h0=(function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,r;for(r=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,r,s,d,u,h;return t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*r+16777216*s+65536*d+256*u+h},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],s.push(this.writeByte(e));return s},n})(),h_e=(function(){var n;function t(e){var i,r,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,r,s,d,u,h,v,C,O,T,w,A,I;for(I in w=Object.keys(e).length,h=Math.log(2),O=16*Math.floor(Math.log(w)/h),d=Math.floor(O/h),C=16*w-O,(r=new h0).writeInt(this.scalarType),r.writeShort(w),r.writeShort(O),r.writeShort(d),r.writeShort(C),s=16*w,v=r.pos+s,u=null,A=[],e)for(T=e[I],r.writeString(I),r.writeInt(n(T)),r.writeInt(v),r.writeInt(T.length),A=A.concat(T),I==="head"&&(u=v),v+=T.length;v%4;)A.push(0),v++;return r.write(A),i=2981146554-n(r.data),r.pos=u+8,r.writeUInt32(i),r.data},n=function(e){var i,r,s,d;for(e=pL.call(e);e.length%4;)e.push(0);for(s=new h0(e),r=0,i=0,d=e.length;i<d;i=i+=4)r+=s.readUInt32();return 4294967295&r},t})(),__e={}.hasOwnProperty,uc=function(n,t){for(var e in t)__e.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};wl=(function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var v_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var e;return(e=new h0).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},n})(),X9=(function(){function n(t,e){var i,r,s,d,u,h,v,C,O,T,w,A,I,L,B,q,K;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),O=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(w=t.readUInt16(),T=w/2,t.pos+=6,s=(function(){var J,Me;for(Me=[],h=J=0;0<=T?J<T:J>T;h=0<=T?++J:--J)Me.push(t.readUInt16());return Me})(),t.pos+=2,I=(function(){var J,Me;for(Me=[],h=J=0;0<=T?J<T:J>T;h=0<=T?++J:--J)Me.push(t.readUInt16());return Me})(),v=(function(){var J,Me;for(Me=[],h=J=0;0<=T?J<T:J>T;h=0<=T?++J:--J)Me.push(t.readUInt16());return Me})(),C=(function(){var J,Me;for(Me=[],h=J=0;0<=T?J<T:J>T;h=0<=T?++J:--J)Me.push(t.readUInt16());return Me})(),r=(this.length-t.pos+this.offset)/2,u=(function(){var J,Me;for(Me=[],h=J=0;0<=r?J<r:J>r;h=0<=r?++J:--J)Me.push(t.readUInt16());return Me})(),h=B=0,K=s.length;B<K;h=++B)for(L=s[h],i=q=A=I[h];A<=L?q<=L:q>=L;i=A<=L?++q:--q)C[h]===0?d=i+v[h]:(d=u[C[h]/2+(i-A)-(T-h)]||0)!==0&&(d+=v[h]),this.codeMap[i]=65535&d}t.pos=O}return n.encode=function(t,e){var i,r,s,d,u,h,v,C,O,T,w,A,I,L,B,q,K,J,Me,ze,oe,ae,X,pe,z,Z,ge,Pe,Ve,De,Fe,Te,Je,_t,pt,U,Q,W,Y,ue,we,qe,Ae,Re,gt,Pt;switch(Pe=new h0,d=Object.keys(t).sort(function(Nt,Bt){return Nt-Bt}),e){case"macroman":for(I=0,L=(function(){var Nt=[];for(A=0;A<256;++A)Nt.push(0);return Nt})(),q={0:0},s={},Ve=0,Je=d.length;Ve<Je;Ve++)q[Ae=t[r=d[Ve]]]==null&&(q[Ae]=++I),s[r]={old:t[r],new:q[t[r]]},L[r]=q[t[r]];return Pe.writeUInt16(1),Pe.writeUInt16(0),Pe.writeUInt32(12),Pe.writeUInt16(0),Pe.writeUInt16(262),Pe.writeUInt16(0),Pe.write(L),{charMap:s,subtable:Pe.data,maxGlyphID:I+1};case"unicode":for(Z=[],O=[],K=0,q={},i={},B=v=null,De=0,_t=d.length;De<_t;De++)q[Me=t[r=d[De]]]==null&&(q[Me]=++K),i[r]={old:Me,new:q[Me]},u=q[Me]-r,B!=null&&u===v||(B&&O.push(B),Z.push(r),v=u),B=r;for(B&&O.push(B),O.push(65535),Z.push(65535),pe=2*(X=Z.length),ae=2*Math.pow(Math.log(X)/Math.LN2,2),T=Math.log(ae/2)/Math.LN2,oe=2*X-ae,h=[],ze=[],w=[],A=Fe=0,pt=Z.length;Fe<pt;A=++Fe){if(z=Z[A],C=O[A],z===65535){h.push(0),ze.push(0);break}if(z-(ge=i[z].new)>=32768)for(h.push(0),ze.push(2*(w.length+X-A)),r=Te=z;z<=C?Te<=C:Te>=C;r=z<=C?++Te:--Te)w.push(i[r].new);else h.push(ge-z),ze.push(0)}for(Pe.writeUInt16(3),Pe.writeUInt16(1),Pe.writeUInt32(12),Pe.writeUInt16(4),Pe.writeUInt16(16+8*X+2*w.length),Pe.writeUInt16(0),Pe.writeUInt16(pe),Pe.writeUInt16(ae),Pe.writeUInt16(T),Pe.writeUInt16(oe),we=0,U=O.length;we<U;we++)r=O[we],Pe.writeUInt16(r);for(Pe.writeUInt16(0),qe=0,Q=Z.length;qe<Q;qe++)r=Z[qe],Pe.writeUInt16(r);for(Re=0,W=h.length;Re<W;Re++)u=h[Re],Pe.writeUInt16(u);for(gt=0,Y=ze.length;gt<Y;gt++)J=ze[gt],Pe.writeUInt16(J);for(Pt=0,ue=w.length;Pt<ue;Pt++)I=w[Pt],Pe.writeUInt16(I);return{charMap:i,subtable:Pe.data,maxGlyphID:K+1}}},n})(),dL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="cmap",n.prototype.parse=function(t){var e,i,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)e=new X9(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},n.encode=function(t,e){var i,r;return e==null&&(e="macroman"),i=X9.encode(t,e),(r=new h0).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},n})(),x_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n})(),y_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,i;for(i=[],e=0;e<10;++e)i.push(t.readByte());return i})(),this.charRange=(function(){var e,i;for(i=[],e=0;e<4;++e)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,i;for(i=[],e=0;e<2;e=++e)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n})(),C_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="post",n.prototype.parse=function(t){var e,i,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=function(){var d,u,h;for(h=[],s=d=0,u=this.file.maxp.numGlyphs;0<=u?d<u:d>u;s=0<=u?++d:--d)h.push(t.readUInt32());return h}.call(this)}},n})(),b_e=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},M_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="name",n.prototype.parse=function(t){var e,i,r,s,d,u,h,v,C,O,T;for(t.pos=this.offset,t.readShort(),e=t.readShort(),u=t.readShort(),i=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(h={},s=C=0,O=i.length;C<O;s=++C)r=i[s],t.pos=r.offset,v=t.readString(r.length),d=new b_e(v,r),h[T=r.nameID]==null&&(h[T]=[]),h[r.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),S_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n})(),P_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="hmtx",n.prototype.parse=function(t){var e,i,r,s,d,u,h;for(t.pos=this.offset,this.metrics=[],e=0,u=this.file.hhea.numberOfMetrics;0<=u?e<u:e>u;e=0<=u?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,C;for(C=[],e=v=0;0<=r?v<r:v>r;e=0<=r?++v:--v)C.push(t.readInt16());return C})(),this.widths=function(){var v,C,O,T;for(T=[],v=0,C=(O=this.metrics).length;v<C;v++)s=O[v],T.push(s.advance);return T}.call(this),i=this.widths[this.widths.length-1],h=[],e=d=0;0<=r?d<r:d>r;e=0<=r?++d:--d)h.push(this.widths.push(i));return h},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n})(),pL=[].slice,w_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var e,i,r,s,d,u,h,v,C,O;return t in this.cache?this.cache[t]:(s=this.file.loca,e=this.file.contents,i=s.indexOf(t),(r=s.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+i,d=(u=new h0(e.read(r))).readShort(),v=u.readShort(),O=u.readShort(),h=u.readShort(),C=u.readShort(),this.cache[t]=d===-1?new O_e(u,v,O,h,C):new E_e(u,d,v,O,h,C),this.cache[t]))},n.prototype.encode=function(t,e,i){var r,s,d,u,h;for(d=[],s=[],u=0,h=e.length;u<h;u++)r=t[e[u]],s.push(d.length),r&&(d=d.concat(r.encode(i)));return s.push(d.length),{table:d,offsets:s}},n})(),E_e=(function(){function n(t,e,i,r,s,d){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=d,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),O_e=(function(){function n(t,e,i,r,s){var d,u;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new h0(pL.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n})(),T_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return uc(n,wl),n.prototype.tag="loca",n.prototype.parse=function(t){var e,i;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?function(){var r,s;for(s=[],i=0,r=this.length;i<r;i+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var r,s;for(s=[],i=0,r=this.length;i<r;i+=4)s.push(t.readUInt32());return s}.call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,e){for(var i=new Uint32Array(this.offsets.length),r=0,s=0,d=0;d<i.length;++d)if(i[d]=r,s<e.length&&e[s]==d){++s,i[d]=r;var u=this.offsets[d],h=this.offsets[d+1]-u;h>0&&(r+=h)}for(var v=new Array(4*i.length),C=0;C<i.length;++C)v[4*C+3]=255&i[C],v[4*C+2]=(65280&i[C])>>8,v[4*C+1]=(16711680&i[C])>>16,v[4*C]=(4278190080&i[C])>>24;return v},n})(),k_e=(function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,r,s;for(e in r=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=r[i];return t},n.prototype.glyphsFor=function(t){var e,i,r,s,d,u,h;for(r={},d=0,u=t.length;d<u;d++)r[s=t[d]]=this.font.glyf.glyphFor(s);for(s in e=[],r)(i=r[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in h=this.glyphsFor(e))i=h[s],r[s]=i;return r},n.prototype.encode=function(t,e){var i,r,s,d,u,h,v,C,O,T,w,A,I,L,B;for(r in i=dL.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(t),w={0:0},B=i.charMap)w[(h=B[r]).old]=h.new;for(A in T=i.maxGlyphID,d)A in w||(w[A]=T++);return C=(function(q){var K,J;for(K in J={},q)J[q[K]]=K;return J})(w),O=Object.keys(C).sort(function(q,K){return q-K}),I=(function(){var q,K,J;for(J=[],q=0,K=O.length;q<K;q++)u=O[q],J.push(C[u]);return J})(),s=this.font.glyf.encode(d,I,w),v=this.font.loca.encode(s.offsets,I),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();Jt.API.PDFObject=(function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,r,s,d;if(Array.isArray(e))return"["+(function(){var u,h,v;for(v=[],u=0,h=e.length;u<h;u++)i=e[u],v.push(t.convert(i));return v})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(r in s=["<<"],e)d=e[r],s.push("/"+r+" "+t.convert(d));return s.push(">>"),s.join(`
`)}return""+e},t})();function _L(n,t,e,i,r){i=i||{};var s=1.15,d=r.internal.scaleFactor,u=r.internal.getFontSize()/d,h=r.getLineHeightFactor?r.getLineHeightFactor():s,v=u*h,C=/\r\n|\r|\n/g,O="",T=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(O=typeof n=="string"?n.split(C):n,T=O.length||1),e+=u*(2-s),i.valign==="middle"?e-=T/2*v:i.valign==="bottom"&&(e-=T*v),i.halign==="center"||i.halign==="right"){var w=u;if(i.halign==="center"&&(w*=.5),O&&T>=1){for(var A=0;A<O.length;A++)r.text(O[A],t-r.getStringUnitWidth(O[A])*w,e),e+=v;return r}t-=r.getStringUnitWidth(n)*w}return i.halign==="justify"?r.text(n,t,e,{maxWidth:i.maxWidth||100,align:"justify"}):r.text(n,t,e),r}var mL={},Gu=(function(){function n(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:mL=t},n.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},n.prototype.applyStyles=function(t,e){var i,r,s;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var d=this.jsPDFDocument.internal.getFont(),u=d.fontStyle,h=d.fontName;if(t.font&&(h=t.font),t.fontStyle){u=t.fontStyle;var v=this.getFontList()[h];v&&v.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(v[0]),u=v[0])}if(this.jsPDFDocument.setFont(h,u),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var C=n.unifyColor(t.fillColor);C&&(i=this.jsPDFDocument).setFillColor.apply(i,C),C=n.unifyColor(t.textColor),C&&(r=this.jsPDFDocument).setTextColor.apply(r,C),C=n.unifyColor(t.lineColor),C&&(s=this.jsPDFDocument).setDrawColor.apply(s,C),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},n.prototype.splitTextToSize=function(t,e,i){return this.jsPDFDocument.splitTextToSize(t,e,i)},n.prototype.rect=function(t,e,i,r,s){return this.jsPDFDocument.rect(t,e,i,r,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return mL||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),U4=function(n,t){return U4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},U4(n,t)};function vL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");U4(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xL=(function(n){vL(t,n);function t(e){var i=n.call(this)||this;return i._element=e,i}return t})(Array);function I_e(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function D_e(n){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[n]}function i2(n,t,e){e.applyStyles(t,!0);var i=Array.isArray(n)?n:[n],r=i.map(function(s){return e.getTextWidth(s)}).reduce(function(s,d){return Math.max(s,d)},0);return r}function yL(n,t,e,i){var r=t.settings.tableLineWidth,s=t.settings.tableLineColor;n.applyStyles({lineWidth:r,lineColor:s});var d=CL(r,!1);d&&n.rect(e.x,e.y,t.getWidth(n.pageSize().width),i.y-e.y,d)}function CL(n,t){var e=n>0,i=t||t===0;return e&&i?"DF":e?"S":i?"F":null}function o2(n,t){var e,i,r,s;if(n=n||t,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=t}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(e=n.left)!==null&&e!==void 0?e:t,top:(i=n.top)!==null&&i!==void 0?i:t,right:(r=n.right)!==null&&r!==void 0?r:t,bottom:(s=n.bottom)!==null&&s!==void 0?s:t}):(typeof n!="number"&&(n=t),{top:n,right:n,bottom:n,left:n})}function bL(n,t){var e=o2(t.settings.margin,0);return n.pageSize().width-(e.left+e.right)}function A_e(n,t,e,i,r){var s={},d=1.3333333333333333,u=R4(t,function(K){return r.getComputedStyle(K).backgroundColor});u!=null&&(s.fillColor=u);var h=R4(t,function(K){return r.getComputedStyle(K).color});h!=null&&(s.textColor=h);var v=F_e(i,e);v&&(s.cellPadding=v);var C="borderTopColor",O=d*e,T=i.borderTopWidth;if(i.borderBottomWidth===T&&i.borderRightWidth===T&&i.borderLeftWidth===T){var w=(parseFloat(T)||0)/O;w&&(s.lineWidth=w)}else s.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/O,right:(parseFloat(i.borderRightWidth)||0)/O,bottom:(parseFloat(i.borderBottomWidth)||0)/O,left:(parseFloat(i.borderLeftWidth)||0)/O},s.lineWidth.top||(s.lineWidth.right?C="borderRightColor":s.lineWidth.bottom?C="borderBottomColor":s.lineWidth.left&&(C="borderLeftColor"));var A=R4(t,function(K){return r.getComputedStyle(K)[C]});A!=null&&(s.lineColor=A);var I=["left","right","center","justify"];I.indexOf(i.textAlign)!==-1&&(s.halign=i.textAlign),I=["middle","bottom","top"],I.indexOf(i.verticalAlign)!==-1&&(s.valign=i.verticalAlign);var L=parseInt(i.fontSize||"");isNaN(L)||(s.fontSize=L/d);var B=R_e(i);B&&(s.fontStyle=B);var q=(i.fontFamily||"").toLowerCase();return n.indexOf(q)!==-1&&(s.font=q),s}function R_e(n){var t="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(t="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(t+="italic"),t}function R4(n,t){var e=ML(n,t);if(!e)return null;var i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],s=parseInt(i[4]);return s===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function ML(n,t){var e=t(n);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?n.parentElement==null?null:ML(n.parentElement,t):e}function F_e(n,t){var e=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],i=96/(72/t),r=(parseInt(n.lineHeight)-parseInt(n.fontSize))/t/2,s=e.map(function(u){return parseInt(u||"0")/i}),d=o2(s,0);return r>d.top&&(d.top=r),r>d.bottom&&(d.bottom=r),d}function SL(n,t,e,i,r){var s,d;i===void 0&&(i=!1),r===void 0&&(r=!1);var u;typeof t=="string"?u=e.document.querySelector(t):u=t;var h=Object.keys(n.getFontList()),v=n.scaleFactor(),C=[],O=[],T=[];if(!u)return console.error("Html table could not be found with input: ",t),{head:C,body:O,foot:T};for(var w=0;w<u.rows.length;w++){var A=u.rows[w],I=(d=(s=A?.parentElement)===null||s===void 0?void 0:s.tagName)===null||d===void 0?void 0:d.toLowerCase(),L=N_e(h,v,e,A,i,r);L&&(I==="thead"?C.push(L):I==="tfoot"?T.push(L):O.push(L))}return{head:C,body:O,foot:T}}function N_e(n,t,e,i,r,s){for(var d=new xL(i),u=0;u<i.cells.length;u++){var h=i.cells[u],v=e.getComputedStyle(h);if(r||v.display!=="none"){var C=void 0;s&&(C=A_e(n,h,t,v,e)),d.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:C,_element:h,content:L_e(h)})}}var O=e.getComputedStyle(i);if(d.length>0&&(r||O.display!=="none"))return d}function L_e(n){var t=n.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function V_e(n,t,e){for(var i=0,r=[n,t,e];i<r.length;i++){var s=r[i];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function sd(n,t,e,i,r){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),d=1;d<arguments.length;d++){var u=arguments[d];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])}return s}function PL(n,t){var e=new Gu(n),i=e.getDocumentOptions(),r=e.getGlobalOptions();V_e(r,i,t);var s=sd({},r,i,t),d;typeof window<"u"&&(d=window);var u=B_e(r,i,t),h=U_e(r,i,t),v=j_e(e,s),C=z_e(e,s,d);return{id:t.tableId,content:C,hooks:h,styles:u,settings:v}}function B_e(n,t,e){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(h){if(h==="columnStyles"){var v=n[h],C=t[h],O=e[h];i.columnStyles=sd({},v,C,O)}else{var T=[n,t,e],w=T.map(function(A){return A[h]||{}});i[h]=sd({},w[0],w[1],w[2])}},s=0,d=Object.keys(i);s<d.length;s++){var u=d[s];r(u)}return i}function U_e(n,t,e){for(var i=[n,t,e],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,d=i;s<d.length;s++){var u=d[s];u.didParseCell&&r.didParseCell.push(u.didParseCell),u.willDrawCell&&r.willDrawCell.push(u.willDrawCell),u.didDrawCell&&r.didDrawCell.push(u.didDrawCell),u.willDrawPage&&r.willDrawPage.push(u.willDrawPage),u.didDrawPage&&r.didDrawPage.push(u.didDrawPage)}return r}function j_e(n,t){var e,i,r,s,d,u,h,v,C,O,T,w,A=o2(t.margin,40/n.scaleFactor()),I=(e=W_e(n,t.startY))!==null&&e!==void 0?e:A.top,L;t.showFoot===!0?L="everyPage":t.showFoot===!1?L="never":L=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var B;t.showHead===!0?B="everyPage":t.showHead===!1?B="never":B=(r=t.showHead)!==null&&r!==void 0?r:"everyPage";var q=(s=t.useCss)!==null&&s!==void 0?s:!1,K=t.theme||(q?"plain":"striped"),J=!!t.horizontalPageBreak,Me=(d=t.horizontalPageBreakRepeat)!==null&&d!==void 0?d:null;return{includeHiddenHtml:(u=t.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:q,theme:K,startY:I,margin:A,pageBreak:(h=t.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(v=t.rowPageBreak)!==null&&v!==void 0?v:"auto",tableWidth:(C=t.tableWidth)!==null&&C!==void 0?C:"auto",showHead:B,showFoot:L,tableLineWidth:(O=t.tableLineWidth)!==null&&O!==void 0?O:0,tableLineColor:(T=t.tableLineColor)!==null&&T!==void 0?T:200,horizontalPageBreak:J,horizontalPageBreakRepeat:Me,horizontalPageBreakBehaviour:(w=t.horizontalPageBreakBehaviour)!==null&&w!==void 0?w:"afterAllRows"}}function W_e(n,t){var e=n.getLastAutoTable(),i=n.scaleFactor(),r=n.pageNumber(),s=!1;if(e&&e.startPageNumber){var d=e.startPageNumber+e.pageNumber-1;s=d===r}return typeof t=="number"?t:(t==null||t===!1)&&s&&e?.finalY!=null?e.finalY+20/i:null}function z_e(n,t,e){var i=t.head||[],r=t.body||[],s=t.foot||[];if(t.html){var d=t.includeHiddenHtml;if(e){var u=SL(n,t.html,e,d,t.useCss)||{};i=u.head||i,r=u.body||i,s=u.foot||i}else console.error("Cannot parse html in non browser environment")}var h=t.columns||q_e(i,r,s);return{columns:h,head:i,body:r,foot:s}}function q_e(n,t,e){var i=n[0]||t[0]||e[0]||[],r=[];return Object.keys(i).filter(function(s){return s!=="_element"}).forEach(function(s){var d=1,u;Array.isArray(i)?u=i[parseInt(s)]:u=i[s],typeof u=="object"&&!Array.isArray(u)&&(d=u?.colSpan||1);for(var h=0;h<d;h++){var v=void 0;Array.isArray(i)?v=r.length:v=s+(h>0?"_".concat(h):"");var C={dataKey:v};r.push(C)}}),r}var j4=(function(){function n(t,e,i){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=i,this.doc=t.getDocument()}return n})(),H_e=(function(n){vL(t,n);function t(e,i,r,s,d,u){var h=n.call(this,e,i,u)||this;return h.cell=r,h.row=s,h.column=d,h.section=s.section,h}return t})(j4),G_e=(function(){function n(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return n.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(t,e,i,r,s,d){for(var u=0,h=e;u<h.length;u++){var v=h[u],C=new H_e(t,this,i,r,s,d),O=v(C)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],O)return!1}return!0},n.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var i=0,r=this.hooks.didDrawPage;i<r.length;i++){var s=r[i];s(new j4(t,this,e))}},n.prototype.callWillDrawPageHooks=function(t,e){for(var i=0,r=this.hooks.willDrawPage;i<r.length;i++){var s=r[i];s(new j4(t,this,e))}},n.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(r,s){return r+s.wrappedWidth},0);return e}else{var i=this.settings.margin;return t-i.left-i.right}},n})(),wL=(function(){function n(t,e,i,r,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof xL&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=i,this.cells=r,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(i,r){var s;return Math.max(i,((s=e.cells[r.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(i){var r=e.cells[i.index];return r?r.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},n.prototype.getMinimumRowHeight=function(t,e){var i=this;return t.reduce(function(r,s){var d=i.cells[s.index];if(!d)return 0;var u=e.getLineHeight(d.styles.fontSize),h=d.padding("vertical"),v=h+u;return v>r?v:r},0)},n})(),EL=(function(){function n(t,e,i){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=i,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(r=t.content)!==null&&r!==void 0?r:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var d=s!=null?""+s:"",u=/\r\n|\r|\n/g;this.text=d.split(u)}return n.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");i=this.x+r/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},n.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var i=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/t*e,s=i*r+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(t){var e=o2(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},n})(),$_e=(function(){function n(t,e,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=i}return n.prototype.getMaxCustomCellWidth=function(t){for(var e=0,i=0,r=t.allRows();i<r.length;i++){var s=r[i],d=s.cells[this.index];d&&typeof d.styles.cellWidth=="number"&&(e=Math.max(e,d.styles.cellWidth))}return e},n})();function Y_e(n,t){J_e(n,t);var e=[],i=0;t.columns.forEach(function(s){var d=s.getMaxCustomCellWidth(t);d?s.width=d:(s.width=s.wrappedWidth,e.push(s)),i+=s.width});var r=t.getWidth(n.pageSize().width)-i;r&&(r=W4(e,r,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),r&&(r=W4(e,r,function(s){return s.minWidth})),r=Math.abs(r),!t.settings.horizontalPageBreak&&r>.1/n.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),Q_e(t),X_e(t,n),K_e(t)}function J_e(n,t){var e=n.scaleFactor(),i=t.settings.horizontalPageBreak,r=bL(n,t);t.allRows().forEach(function(s){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],v=s.cells[h.index];if(v){var C=t.hooks.didParseCell;t.callCellHooks(n,C,v,s,h,null);var O=v.padding("horizontal");v.contentWidth=i2(v.text,v.styles,n)+O;var T=i2(v.text.join(" ").split(/[^\S\u00A0]+/),v.styles,n);if(v.minReadableWidth=T+v.padding("horizontal"),typeof v.styles.cellWidth=="number")v.minWidth=v.styles.cellWidth,v.wrappedWidth=v.styles.cellWidth;else if(v.styles.cellWidth==="wrap"||i===!0)v.contentWidth>r?(v.minWidth=r,v.wrappedWidth=r):(v.minWidth=v.contentWidth,v.wrappedWidth=v.contentWidth);else{var w=10/e;v.minWidth=v.styles.minCellWidth||w,v.wrappedWidth=v.contentWidth,v.minWidth>v.wrappedWidth&&(v.wrappedWidth=v.minWidth)}}}}),t.allRows().forEach(function(s){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],v=s.cells[h.index];if(v&&v.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,v.wrappedWidth),h.minWidth=Math.max(h.minWidth,v.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,v.minReadableWidth);else{var C=t.styles.columnStyles[h.dataKey]||t.styles.columnStyles[h.index]||{},O=C.cellWidth||C.minCellWidth;O&&typeof O=="number"&&(h.minWidth=O,h.wrappedWidth=O)}v&&(v.colSpan>1&&!h.minWidth&&(h.minWidth=v.minWidth),v.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=v.minWidth))}})}function W4(n,t,e){for(var i=t,r=n.reduce(function(w,A){return w+A.wrappedWidth},0),s=0;s<n.length;s++){var d=n[s],u=d.wrappedWidth/r,h=i*u,v=d.width+h,C=e(d),O=v<C?C:v;t-=O-d.width,d.width=O}if(t=Math.round(t*1e10)/1e10,t){var T=n.filter(function(w){return t<0?w.width>e(w):!0});T.length&&(t=W4(T,t,e))}return t}function K_e(n){for(var t={},e=1,i=n.allRows(),r=0;r<i.length;r++)for(var s=i[r],d=0,u=n.columns;d<u.length;d++){var h=u[d],v=t[h.index];if(e>1)e--,delete s.cells[h.index];else if(v)v.cell.height+=s.height,e=v.cell.colSpan,delete s.cells[h.index],v.left--,v.left<=1&&delete t[h.index];else{var C=s.cells[h.index];if(!C)continue;if(C.height=s.height,C.rowSpan>1){var O=i.length-r,T=C.rowSpan>O?O:C.rowSpan;t[h.index]={cell:C,left:T,row:s}}}}}function Q_e(n){for(var t=n.allRows(),e=0;e<t.length;e++)for(var i=t[e],r=null,s=0,d=0,u=0;u<n.columns.length;u++){var h=n.columns[u];if(d-=1,d>1&&n.columns[u+1])s+=h.width,delete i.cells[h.index];else if(r){var v=r;delete i.cells[h.index],r=null,v.width=h.width+s}else{var v=i.cells[h.index];if(!v)continue;if(d=v.colSpan,s=0,v.colSpan>1){r=v,s+=h.width;continue}v.width=h.width+s}}}function X_e(n,t){for(var e={count:0,height:0},i=0,r=n.allRows();i<r.length;i++){for(var s=r[i],d=0,u=n.columns;d<u.length;d++){var h=u[d],v=s.cells[h.index];if(v){t.applyStyles(v.styles,!0);var C=v.width-v.padding("horizontal");if(v.styles.overflow==="linebreak")v.text=t.splitTextToSize(v.text,C+1/t.scaleFactor(),{fontSize:v.styles.fontSize});else if(v.styles.overflow==="ellipsize")v.text=uL(v.text,C,v.styles,t,"...");else if(v.styles.overflow==="hidden")v.text=uL(v.text,C,v.styles,t,"");else if(typeof v.styles.overflow=="function"){var O=v.styles.overflow(v.text,C);typeof O=="string"?v.text=[O]:v.text=O}v.contentHeight=v.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var T=v.contentHeight/v.rowSpan;v.rowSpan>1&&e.count*e.height<T*v.rowSpan?e={height:T,count:v.rowSpan}:e&&e.count>0&&e.height>T&&(T=e.height),T>s.height&&(s.height=T)}}e.count--}}function uL(n,t,e,i,r){return n.map(function(s){return Z_e(s,t,e,i,r)})}function Z_e(n,t,e,i,r){var s=1e4*i.scaleFactor();if(t=Math.ceil(t*s)/s,t>=i2(n,e,i))return n;for(;t<i2(n+r,e,i)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+r}function OL(n,t){var e=new Gu(n),i=e1e(t,e.scaleFactor()),r=new G_e(t,i);return Y_e(e,r),e.applyStyles(e.userStyles),r}function e1e(n,t){var e=n.content,i=n1e(e.columns);if(e.head.length===0){var r=gL(i,"head");r&&e.head.push(r)}if(e.foot.length===0){var r=gL(i,"foot");r&&e.foot.push(r)}var s=n.settings.theme,d=n.styles;return{columns:i,head:F4("head",e.head,i,d,s,t),body:F4("body",e.body,i,d,s,t),foot:F4("foot",e.foot,i,d,s,t)}}function F4(n,t,e,i,r,s){var d={},u=t.map(function(h,v){for(var C=0,O={},T=0,w=0,A=0,I=e;A<I.length;A++){var L=I[A];if(d[L.index]==null||d[L.index].left===0)if(w===0){var B=void 0;Array.isArray(h)?B=h[L.index-T-C]:B=h[L.dataKey];var q={};typeof B=="object"&&!Array.isArray(B)&&(q=B?.styles||{});var K=i1e(n,L,v,r,i,s,q),J=new EL(B,K,n);O[L.dataKey]=J,O[L.index]=J,w=J.colSpan-1,d[L.index]={left:J.rowSpan-1,times:w}}else w--,T++;else d[L.index].left--,w=d[L.index].times,C++}return new wL(h,v,n,O)});return u}function gL(n,t){var e={};return n.forEach(function(i){if(i.raw!=null){var r=t1e(t,i.raw);r!=null&&(e[i.dataKey]=r)}}),Object.keys(e).length>0?e:null}function t1e(n,t){if(n==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(n==="foot"&&typeof t=="object")return t.footer;return null}function n1e(n){return n.map(function(t,e){var i,r;return typeof t=="object"?r=(i=t.dataKey)!==null&&i!==void 0?i:e:r=e,new $_e(r,t,e)})}function i1e(n,t,e,i,r,s,d){var u=D_e(i),h;n==="head"?h=r.headStyles:n==="body"?h=r.bodyStyles:n==="foot"&&(h=r.footStyles);var v=sd({},u.table,u[n],r.styles,h),C=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},O=n==="body"?C:{},T=n==="body"&&e%2===0?sd({},u.alternateRow,r.alternateRowStyles):{},w=I_e(s),A=sd({},w,v,T,O);return sd(A,d)}function r1e(n,t,e){var i;e===void 0&&(e={});var r=bL(n,t),s=new Map,d=[],u=[],h=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?h=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(h=[t.settings.horizontalPageBreakRepeat]),h.forEach(function(T){var w=t.columns.find(function(A){return A.dataKey===T||A.index===T});w&&!s.has(w.index)&&(s.set(w.index,!0),d.push(w.index),u.push(t.columns[w.index]),r-=w.wrappedWidth)});for(var v=!0,C=(i=e?.start)!==null&&i!==void 0?i:0;C<t.columns.length;){if(s.has(C)){C++;continue}var O=t.columns[C].wrappedWidth;if(v||r>=O)v=!1,d.push(C),u.push(t.columns[C]),r-=O;else break;C++}return{colIndexes:d,columns:u,lastIndex:C-1}}function o1e(n,t){for(var e=[],i=0;i<t.columns.length;i++){var r=r1e(n,t,{start:i});r.columns.length&&(e.push(r),i=r.lastIndex)}return e}function TL(n,t){var e=t.settings,i=e.startY,r=e.margin,s={x:r.left,y:i},d=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),u=i+r.bottom+d;if(e.pageBreak==="avoid"){var h=t.body,v=h.reduce(function(T,w){return T+w.height},0);u+=v}var C=new Gu(n);(e.pageBreak==="always"||e.startY!=null&&u>C.pageSize().height)&&(IL(C),s.y=r.top),t.callWillDrawPageHooks(C,s);var O=sd({},s);t.startPageNumber=C.pageNumber(),e.horizontalPageBreak?a1e(C,t,O,s):(C.applyStyles(C.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(T){return ld(C,t,T,s,t.columns)}),C.applyStyles(C.userStyles),t.body.forEach(function(T,w){var A=w===t.body.length-1;r2(C,t,T,A,O,s,t.columns)}),C.applyStyles(C.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(T){return ld(C,t,T,s,t.columns)})),yL(C,t,O,s),t.callEndPageHooks(C,s),t.finalY=s.y,n.lastAutoTable=t,C.applyStyles(C.userStyles)}function a1e(n,t,e,i){var r=o1e(n,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(v,C){n.applyStyles(n.userStyles),C>0?b_(n,t,e,i,v.columns,!0):fL(n,t,i,v.columns),s1e(n,t,e,i,v.columns),N4(n,t,i,v.columns)});else for(var d=-1,u=r[0],h=function(){var v=d;if(u){n.applyStyles(n.userStyles);var C=u.columns;d>=0?b_(n,t,e,i,C,!0):fL(n,t,i,C),v=hL(n,t,d+1,i,C),N4(n,t,i,C)}var O=v-d;r.slice(1).forEach(function(T){n.applyStyles(n.userStyles),b_(n,t,e,i,T.columns,!0),hL(n,t,d+1,i,T.columns,O),N4(n,t,i,T.columns)}),d=v};d<t.body.length-1;)h()}function fL(n,t,e,i){var r=t.settings;n.applyStyles(n.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(s){return ld(n,t,s,e,i)})}function s1e(n,t,e,i,r){n.applyStyles(n.userStyles),t.body.forEach(function(s,d){var u=d===t.body.length-1;r2(n,t,s,u,e,i,r)})}function hL(n,t,e,i,r,s){n.applyStyles(n.userStyles),s=s??t.body.length;var d=Math.min(e+s,t.body.length),u=-1;return t.body.slice(e,d).forEach(function(h,v){var C=e+v===t.body.length-1,O=kL(n,t,C,i);h.canEntireRowFit(O,r)&&(ld(n,t,h,i,r),u=e+v)}),u}function N4(n,t,e,i){var r=t.settings;n.applyStyles(n.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(s){return ld(n,t,s,e,i)})}function l1e(n,t,e){var i=e.getLineHeight(n.styles.fontSize),r=n.padding("vertical"),s=Math.floor((t-r)/i);return Math.max(0,s)}function c1e(n,t,e,i){var r={};n.spansMultiplePages=!0,n.height=0;for(var s=0,d=0,u=e.columns;d<u.length;d++){var h=u[d],v=n.cells[h.index];if(v){Array.isArray(v.text)||(v.text=[v.text]);var C=new EL(v.raw,v.styles,v.section);C=sd(C,v),C.text=[];var O=l1e(v,t,i);v.text.length>O&&(C.text=v.text.splice(O,v.text.length));var T=i.scaleFactor(),w=i.getLineHeightFactor();v.contentHeight=v.getContentHeight(T,w),v.contentHeight>=t&&(v.contentHeight=t,C.styles.minCellHeight-=t),v.contentHeight>n.height&&(n.height=v.contentHeight),C.contentHeight=C.getContentHeight(T,w),C.contentHeight>s&&(s=C.contentHeight),r[h.index]=C}}var A=new wL(n.raw,-1,n.section,r,!0);A.height=s;for(var I=0,L=e.columns;I<L.length;I++){var h=L[I],C=A.cells[h.index];C&&(C.height=A.height);var v=n.cells[h.index];v&&(v.height=n.height)}return A}function d1e(n,t,e,i){var r=n.pageSize().height,s=i.settings.margin,d=s.top+s.bottom,u=r-d;t.section==="body"&&(u-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var h=t.getMinimumRowHeight(i.columns,n),v=h<e;if(h>u)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!v)return!1;var C=t.hasRowSpan(i.columns),O=t.getMaxCellHeight(i.columns)>u;return O?(C&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(C||i.settings.rowPageBreak==="avoid")}function r2(n,t,e,i,r,s,d){var u=kL(n,t,i,s);if(e.canEntireRowFit(u,d))ld(n,t,e,s,d);else if(d1e(n,e,u,t)){var h=c1e(e,u,t,n);ld(n,t,e,s,d),b_(n,t,r,s,d),r2(n,t,h,i,r,s,d)}else b_(n,t,r,s,d),r2(n,t,e,i,r,s,d)}function ld(n,t,e,i,r){i.x=t.settings.margin.left;for(var s=0,d=r;s<d.length;s++){var u=d[s],h=e.cells[u.index];if(!h){i.x+=u.width;continue}n.applyStyles(h.styles),h.x=i.x,h.y=i.y;var v=t.callCellHooks(n,t.hooks.willDrawCell,h,e,u,i);if(v===!1){i.x+=u.width;continue}p1e(n,h,i);var C=h.getTextPos();_L(h.text,C.x,C.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),t.callCellHooks(n,t.hooks.didDrawCell,h,e,u,i),i.x+=u.width}i.y+=e.height}function p1e(n,t,e){var i=t.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof i.lineWidth=="number"){var r=CL(i.lineWidth,i.fillColor);r&&n.rect(t.x,e.y,t.width,t.height,r)}else typeof i.lineWidth=="object"&&(i.fillColor&&n.rect(t.x,e.y,t.width,t.height,"F"),m1e(n,t,e,i.lineWidth))}function m1e(n,t,e,i){var r,s,d,u;i.top&&(r=e.x,s=e.y,d=e.x+t.width,u=e.y,i.right&&(d+=.5*i.right),i.left&&(r-=.5*i.left),h(i.top,r,s,d,u)),i.bottom&&(r=e.x,s=e.y+t.height,d=e.x+t.width,u=e.y+t.height,i.right&&(d+=.5*i.right),i.left&&(r-=.5*i.left),h(i.bottom,r,s,d,u)),i.left&&(r=e.x,s=e.y,d=e.x,u=e.y+t.height,i.top&&(s-=.5*i.top),i.bottom&&(u+=.5*i.bottom),h(i.left,r,s,d,u)),i.right&&(r=e.x+t.width,s=e.y,d=e.x+t.width,u=e.y+t.height,i.top&&(s-=.5*i.top),i.bottom&&(u+=.5*i.bottom),h(i.right,r,s,d,u));function h(v,C,O,T,w){n.getDocument().setLineWidth(v),n.getDocument().line(C,O,T,w,"S")}}function kL(n,t,e,i){var r=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&e)&&(r+=t.getFootHeight(t.columns)),n.pageSize().height-i.y-r}function b_(n,t,e,i,r,s){r===void 0&&(r=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(u){return ld(n,t,u,i,r)}),t.callEndPageHooks(n,i);var d=t.settings.margin;yL(n,t,e,i),IL(n),t.pageNumber++,i.x=d.left,i.y=d.top,e.y=d.top,t.callWillDrawPageHooks(n,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(u){return ld(n,t,u,i,r)}),n.applyStyles(n.userStyles))}function IL(n){var t=n.pageNumber();n.setPage(t+1);var e=n.pageNumber();return e===t?(n.addPage(),!0):!1}function u1e(n){n.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],r=PL(this,i),s=OL(this,r);return TL(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(t,e,i,r){_L(t,e,i,r,this)},n.API.autoTableSetDefaults=function(t){return Gu.setDefaults(t,this),this},n.autoTableSetDefaults=function(t,e){Gu.setDefaults(t,e)},n.API.autoTableHtmlToJson=function(t,e){var i;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Gu(this),s=SL(r,t,window,e,!1),d=s.head,u=s.body,h=((i=d[0])===null||i===void 0?void 0:i.map(function(v){return v.content}))||[];return{columns:h,rows:u,data:u}}}var L4;function a2(n,t){var e=PL(n,t),i=OL(n,e);TL(n,i)}try{typeof window<"u"&&window&&(V4=window,B4=V4.jsPDF||((L4=V4.jspdf)===null||L4===void 0?void 0:L4.jsPDF),B4&&u1e(B4))}catch(n){console.error("Could not apply autoTable plugin",n)}var V4,B4;var Mr=class n{constructor(t){this.http=t}baseUrl="/api/organization";getDepartments(){return this.http.get(`${this.baseUrl}/departments`)}getDepartment(t){return this.http.get(`${this.baseUrl}/departments/${t}`)}createDepartment(t){return this.http.post(`${this.baseUrl}/departments`,t)}updateDepartment(t,e){return this.http.put(`${this.baseUrl}/departments/${t}`,e)}deleteDepartment(t){return this.http.delete(`${this.baseUrl}/departments/${t}`)}getLocations(){return this.http.get(`${this.baseUrl}/locations`)}getLocation(t){return this.http.get(`${this.baseUrl}/locations/${t}`)}createLocation(t){return this.http.post(`${this.baseUrl}/locations`,t)}updateLocation(t,e){return this.http.put(`${this.baseUrl}/locations/${t}`,e)}deleteLocation(t){return this.http.delete(`${this.baseUrl}/locations/${t}`)}getJobRoles(){return this.http.get(`${this.baseUrl}/job-roles`)}getJobRole(t){return this.http.get(`${this.baseUrl}/job-roles/${t}`)}createJobRole(t){return this.http.post(`${this.baseUrl}/job-roles`,t)}updateJobRole(t,e){return this.http.put(`${this.baseUrl}/job-roles/${t}`,e)}deleteJobRole(t){return this.http.delete(`${this.baseUrl}/job-roles/${t}`)}getGrades(){return this.http.get(`${this.baseUrl}/grades`)}getGrade(t){return this.http.get(`${this.baseUrl}/grades/${t}`)}createGrade(t){return this.http.post(`${this.baseUrl}/grades`,t)}updateGrade(t,e){return this.http.put(`${this.baseUrl}/grades/${t}`,e)}deleteGrade(t){return this.http.delete(`${this.baseUrl}/grades/${t}`)}getDesignations(){return this.http.get(`${this.baseUrl}/designations`)}getDesignation(t){return this.http.get(`${this.baseUrl}/designations/${t}`)}createDesignation(t){return this.http.post(`${this.baseUrl}/designations`,t)}updateDesignation(t,e){return this.http.put(`${this.baseUrl}/designations/${t}`,e)}deleteDesignation(t){return this.http.delete(`${this.baseUrl}/designations/${t}`)}getCostCenters(){return this.http.get(`${this.baseUrl}/cost-centers`)}getCostCenter(t){return this.http.get(`${this.baseUrl}/cost-centers/${t}`)}createCostCenter(t){return this.http.post(`${this.baseUrl}/cost-centers`,t)}updateCostCenter(t,e){return this.http.put(`${this.baseUrl}/cost-centers/${t}`,e)}deleteCostCenter(t){return this.http.delete(`${this.baseUrl}/cost-centers/${t}`)}getExpenseCenters(){return this.http.get(`${this.baseUrl}/expense-centers`)}getExpenseCenter(t){return this.http.get(`${this.baseUrl}/expense-centers/${t}`)}createExpenseCenter(t){return this.http.post(`${this.baseUrl}/expense-centers`,t)}updateExpenseCenter(t,e){return this.http.put(`${this.baseUrl}/expense-centers/${t}`,e)}deleteExpenseCenter(t){return this.http.delete(`${this.baseUrl}/expense-centers/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function g1e(n,t){n&1&&(o(0,"div",19)(1,"div",20),y(2,"i",21),o(3,"p"),l(4,"Loading departments..."),a()()())}function f1e(n,t){if(n&1){let e=F();o(0,"div",22)(1,"button",23),x("click",function(){g(e);let r=p();return f(r.exportToExcel())}),y(2,"i",24),l(3," Excel "),a(),o(4,"button",23),x("click",function(){g(e);let r=p();return f(r.exportToCSV())}),y(5,"i",25),l(6," CSV "),a(),o(7,"button",23),x("click",function(){g(e);let r=p();return f(r.exportToPDF())}),y(8,"i",26),l(9," PDF "),a(),o(10,"button",23),x("click",function(){g(e);let r=p();return f(r.printDepartments())}),y(11,"i",27),l(12," Print "),a()()}}function h1e(n,t){n&1&&(o(0,"tr")(1,"td",28),l(2,'No departments found. Click "Add Department" to create one.'),a()())}function _1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",29),l(13),a()(),o(14,"td")(15,"div",30)(16,"button",31),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(17,"i",32),a(),o(18,"button",33),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(19,"i",34),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.description),c(2),_((e.location==null?null:e.location.name)||"-"),c(2),_((e.costCenter==null?null:e.costCenter.name)||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function v1e(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function x1e(n,t){if(n&1&&(o(0,"option",47),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function y1e(n,t){n&1&&y(0,"i",21)}function C1e(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",36),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",37)(3,"h3"),l(4),a(),o(5,"button",38),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",39)(8,"form",40),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",41)(10,"div",42)(11,"label"),l(12,"Code *"),a(),o(13,"input",43),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",42)(15,"label"),l(16,"Name *"),a(),o(17,"input",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",42)(19,"label"),l(20,"Description"),a(),o(21,"textarea",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",41)(23,"div",42)(24,"label"),l(25,"Location"),a(),o(26,"select",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.location,r)||(s.editing.location=r),f(r)}),o(27,"option",47),l(28,"-- Select Location --"),a(),b(29,v1e,2,2,"option",48),a()(),o(30,"div",42)(31,"label"),l(32,"Cost Center"),a(),o(33,"select",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.costCenter,r)||(s.editing.costCenter=r),f(r)}),o(34,"option",47),l(35,"-- Select Cost Center --"),a(),b(36,x1e,2,2,"option",48),a()()(),o(37,"div",42)(38,"label",50)(39,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(40," Active "),a()(),o(41,"div",52)(42,"button",53),l(43,"Cancel"),a(),o(44,"button",54),b(45,y1e,1,0,"i",55),l(46),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Department"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(4),M("ngModel",e.editing.description),c(5),M("ngModel",e.editing.location),c(),m("ngValue",null),c(2),m("ngForOf",e.locations),c(4),M("ngModel",e.editing.costCenter),c(),m("ngValue",null),c(2),m("ngForOf",e.costCenters),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var s2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}departments=[];costCenters=[];locations=[];loading=!1;dataReady=!1;saving=!1;showExportMenu=!1;showModal=!1;isEditMode=!1;editing=this.getEmptyDepartment();onDocumentClick(t){t.target.closest(".export-dropdown")||(this.showExportMenu=!1)}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1;let t=0,e=3,i=()=>{t++,t>=e&&(this.loading=!1,this.dataReady=!0,this.cdr.detectChanges())};this.orgService.getDepartments().subscribe({next:r=>{this.departments=r,i()},error:r=>{console.error("Error loading departments:",r),i()}}),this.orgService.getCostCenters().subscribe({next:r=>{this.costCenters=r,i()},error:r=>{console.error("Error loading cost centers:",r),i()}}),this.orgService.getLocations().subscribe({next:r=>{this.locations=r,i()},error:r=>{console.error("Error loading locations:",r),i()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmptyDepartment(){return{code:"",name:"",description:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmptyDepartment(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateDepartment(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Department updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update department")}}):this.orgService.createDepartment(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Department created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create department")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.orgService.deleteDepartment(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}toggleExportMenu(){this.showExportMenu=!this.showExportMenu}exportToExcel(){let t=this.departments.map(r=>({Code:r.code,Name:r.name,Description:r.description||"",Location:r.location?.name||"","Cost Center":r.costCenter?.name||"",Status:r.active?"Active":"Inactive"})),e=ac.json_to_sheet(t),i=ac.book_new();ac.book_append_sheet(i,e,"Departments"),Cb(i,"departments.xlsx"),this.showExportMenu=!1}exportToCSV(){let t=this.departments.map(d=>({Code:d.code,Name:d.name,Description:d.description||"",Location:d.location?.name||"","Cost Center":d.costCenter?.name||"",Status:d.active?"Active":"Inactive"})),e=ac.json_to_sheet(t),i=ac.sheet_to_csv(e),r=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download="departments.csv",s.click(),this.showExportMenu=!1}exportToPDF(){let t=new Jt;t.setFontSize(16),t.text("Departments",14,20),t.autoTable({startY:30,head:[["Code","Name","Description","Location","Cost Center","Status"]],body:this.departments.map(e=>[e.code,e.name,e.description||"",e.location?.name||"",e.costCenter?.name||"",e.active?"Active":"Inactive"])}),t.save("departments.pdf"),this.showExportMenu=!1}printDepartments(){window.print(),this.showExportMenu=!1}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-departments"]],hostBindings:function(e,i){e&1&&x("click",function(s){return i.onDocumentClick(s)},Sf)},standalone:!1,decls:55,vars:5,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"header-actions"],[1,"export-dropdown"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-download"],[1,"fas","fa-chevron-down"],["class","export-menu",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[1,"export-menu"],[3,"click"],[1,"fas","fa-file-excel"],[1,"fas","fa-file-csv"],[1,"fas","fa-file-pdf"],[1,"fas","fa-print"],["colspan","7",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter department code",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","Enter department name",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["name","location",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","costCenter",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,g1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Departments"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Departments"),a()()(),o(22,"div",5)(23,"div",6)(24,"button",7),x("click",function(){return i.toggleExportMenu()}),y(25,"i",8),l(26," Export "),y(27,"i",9),a(),b(28,f1e,13,0,"div",10),a(),o(29,"button",11),x("click",function(){return i.openModal()}),y(30,"i",12),l(31," Add Department "),a()()(),o(32,"div",13)(33,"div",14)(34,"table",15)(35,"thead")(36,"tr")(37,"th"),l(38,"Code"),a(),o(39,"th"),l(40,"Name"),a(),o(41,"th"),l(42,"Description"),a(),o(43,"th"),l(44,"Location"),a(),o(45,"th"),l(46,"Cost Center"),a(),o(47,"th"),l(48,"Status"),a(),o(49,"th"),l(50,"Actions"),a()()(),o(51,"tbody"),b(52,h1e,3,0,"tr",16)(53,_1e,20,10,"tr",17),a()()()(),b(54,C1e,47,15,"div",18),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(27),m("ngIf",i.showExportMenu),c(24),m("ngIf",i.departments.length===0),c(),m("ngForOf",i.departments),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.export-dropdown[_ngcontent-%COMP%]{position:relative}.export-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:4px;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:150px;z-index:1000;overflow:hidden}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:12px 16px;border:none;background:#fff;cursor:pointer;font-size:14px;color:#333;text-align:left}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;text-align:center}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-excel[_ngcontent-%COMP%]{color:#1d6f42}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-csv[_ngcontent-%COMP%]{color:#2e7d32}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-pdf[_ngcontent-%COMP%]{color:#c62828}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-print[_ngcontent-%COMP%]{color:#1565c0}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function b1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading locations..."),a()()())}function M1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No locations found. Click "Add Location" to create one.'),a()())}function S1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"span",17),l(15),a()(),o(16,"td")(17,"div",18)(18,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(19,"i",20),a(),o(20,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(21,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.locationType||"-"),c(2),_(e.city||"-"),c(2),_(e.country||"-"),c(2),_(e.phone||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function P1e(n,t){if(n&1&&(o(0,"option",49),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function w1e(n,t){n&1&&y(0,"i",15)}function E1e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Name *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",29)(19,"div",30)(20,"label"),l(21,"Location Type"),a(),o(22,"select",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.locationType,r)||(s.editing.locationType=r),f(r)}),o(23,"option",34),l(24,"-- Select Type --"),a(),b(25,P1e,2,2,"option",35),a()(),o(26,"div",30)(27,"label"),l(28,"Email"),a(),o(29,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.email,r)||(s.editing.email=r),f(r)}),a()()(),o(30,"div",30)(31,"label"),l(32,"Address"),a(),o(33,"textarea",37),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.address,r)||(s.editing.address=r),f(r)}),a()(),o(34,"div",29)(35,"div",30)(36,"label"),l(37,"City"),a(),o(38,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.city,r)||(s.editing.city=r),f(r)}),a()(),o(39,"div",30)(40,"label"),l(41,"State"),a(),o(42,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.state,r)||(s.editing.state=r),f(r)}),a()()(),o(43,"div",29)(44,"div",30)(45,"label"),l(46,"Country"),a(),o(47,"input",40),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.country,r)||(s.editing.country=r),f(r)}),a()(),o(48,"div",30)(49,"label"),l(50,"ZIP Code"),a(),o(51,"input",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.zipCode,r)||(s.editing.zipCode=r),f(r)}),a()()(),o(52,"div",29)(53,"div",30)(54,"label"),l(55,"Phone"),a(),o(56,"input",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.phone,r)||(s.editing.phone=r),f(r)}),a()(),o(57,"div",30)(58,"label",43)(59,"input",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(60," Active "),a()()(),o(61,"div",45)(62,"button",46),l(63,"Cancel"),a(),o(64,"button",47),b(65,w1e,1,0,"i",48),l(66),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Location"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(5),M("ngModel",e.editing.locationType),c(3),m("ngForOf",e.locationTypes),c(4),M("ngModel",e.editing.email),c(4),M("ngModel",e.editing.address),c(5),M("ngModel",e.editing.city),c(4),M("ngModel",e.editing.state),c(5),M("ngModel",e.editing.country),c(4),M("ngModel",e.editing.zipCode),c(5),M("ngModel",e.editing.phone),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var l2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}locations=[];loading=!1;dataReady=!1;saving=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();locationTypes=["Headquarters","Branch","Warehouse","Office","Factory","Remote"];ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1,this.orgService.getLocations().subscribe({next:t=>{this.locations=t,this.completeLoading()},error:t=>{console.error("Error loading locations:",t),this.completeLoading()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",name:"",address:"",city:"",state:"",country:"",zipCode:"",phone:"",email:"",locationType:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateLocation(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Location updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update location")}}):this.orgService.createLocation(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Location created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create location")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.orgService.deleteLocation(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-locations"]],standalone:!1,decls:50,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter location code",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","Enter location name",3,"ngModelChange","ngModel"],["name","locationType",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","email","name","email","placeholder","Enter email",3,"ngModelChange","ngModel"],["name","address","placeholder","Enter address",3,"ngModelChange","ngModel"],["type","text","name","city","placeholder","Enter city",3,"ngModelChange","ngModel"],["type","text","name","state","placeholder","Enter state",3,"ngModelChange","ngModel"],["type","text","name","country","placeholder","Enter country",3,"ngModelChange","ngModel"],["type","text","name","zipCode","placeholder","Enter ZIP code",3,"ngModelChange","ngModel"],["type","text","name","phone","placeholder","Enter phone number",3,"ngModelChange","ngModel"],[1,"checkbox-label",2,"margin-top","30px"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,b1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Locations"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Locations"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Location "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Name"),a(),o(34,"th"),l(35,"Type"),a(),o(36,"th"),l(37,"City"),a(),o(38,"th"),l(39,"Country"),a(),o(40,"th"),l(41,"Phone"),a(),o(42,"th"),l(43,"Status"),a(),o(44,"th"),l(45,"Actions"),a()()(),o(46,"tbody"),b(47,M1e,3,0,"tr",10)(48,S1e,22,11,"tr",11),a()()()(),b(49,E1e,67,17,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(46),m("ngIf",i.locations.length===0),c(),m("ngForOf",i.locations),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-content.modal-lg[_ngcontent-%COMP%]{max-width:800px}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function O1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading job roles..."),a()()())}function T1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No job roles found. Click "Add Job Role" to create one.'),a()())}function k1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",17),l(11),a()(),o(12,"td")(13,"div",18)(14,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(15,"i",20),a(),o(16,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(17,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.title),c(2),_((e.department==null?null:e.department.name)||"-"),c(2),_((e.grade==null?null:e.grade.name)||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function I1e(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function D1e(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function A1e(n,t){n&1&&y(0,"i",15)}function R1e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Title *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.title,r)||(s.editing.title=r),f(r)}),a()()(),o(18,"div",30)(19,"label"),l(20,"Description"),a(),o(21,"textarea",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",29)(23,"div",30)(24,"label"),l(25,"Department"),a(),o(26,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.department,r)||(s.editing.department=r),f(r)}),o(27,"option",35),l(28,"-- Select Department --"),a(),b(29,I1e,2,2,"option",36),a()(),o(30,"div",30)(31,"label"),l(32,"Grade"),a(),o(33,"select",37),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.grade,r)||(s.editing.grade=r),f(r)}),o(34,"option",35),l(35,"-- Select Grade --"),a(),b(36,D1e,2,2,"option",36),a()()(),o(37,"div",30)(38,"label",38)(39,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(40," Active "),a()(),o(41,"div",40)(42,"button",41),l(43,"Cancel"),a(),o(44,"button",42),b(45,A1e,1,0,"i",43),l(46),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Job Role"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.title),c(4),M("ngModel",e.editing.description),c(5),M("ngModel",e.editing.department),c(),m("ngValue",null),c(2),m("ngForOf",e.departments),c(4),M("ngModel",e.editing.grade),c(),m("ngValue",null),c(2),m("ngForOf",e.grades),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var c2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}jobRoles=[];departments=[];grades=[];loading=!1;dataReady=!1;saving=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1;let t=0,e=3,i=()=>{t++,t>=e&&(this.loading=!1,this.dataReady=!0,this.cdr.detectChanges())};this.orgService.getJobRoles().subscribe({next:r=>{this.jobRoles=r,i()},error:r=>{console.error("Error loading job roles:",r),i()}}),this.orgService.getDepartments().subscribe({next:r=>{this.departments=r,i()},error:r=>{console.error("Error loading departments:",r),i()}}),this.orgService.getGrades().subscribe({next:r=>{this.grades=r,i()},error:r=>{console.error("Error loading grades:",r),i()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",title:"",description:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateJobRole(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Job Role updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update job role")}}):this.orgService.createJobRole(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Job Role created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create job role")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.title}"?`)&&this.orgService.deleteJobRole(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-job-roles"]],standalone:!1,decls:46,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","6",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter job role code",3,"ngModelChange","ngModel"],["type","text","name","title","required","","placeholder","Enter job title",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["name","department",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","grade",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,O1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Job Roles"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Job Roles"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Job Role "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Title"),a(),o(34,"th"),l(35,"Department"),a(),o(36,"th"),l(37,"Grade"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),b(43,T1e,3,0,"tr",10)(44,k1e,18,9,"tr",11),a()()()(),b(45,R1e,47,15,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(42),m("ngIf",i.jobRoles.length===0),c(),m("ngForOf",i.jobRoles),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function F1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading grades..."),a()()())}function N1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No grades found. Click "Add Grade" to create one.'),a()())}function L1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),Le(9,"currency"),a(),o(10,"td"),l(11),Le(12,"currency"),a(),o(13,"td")(14,"span",17),l(15),a()(),o(16,"td")(17,"div",18)(18,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(19,"i",20),a(),o(20,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(21,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.level),c(2),_(xn(9,10,e.minSalary)),c(3),_(xn(12,12,e.maxSalary)),c(3),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function V1e(n,t){n&1&&y(0,"i",15)}function B1e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Name *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",30)(19,"label"),l(20,"Description"),a(),o(21,"textarea",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",29)(23,"div",30)(24,"label"),l(25,"Level"),a(),o(26,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.level,r)||(s.editing.level=r),f(r)}),a()()(),o(27,"div",29)(28,"div",30)(29,"label"),l(30,"Min Salary"),a(),o(31,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.minSalary,r)||(s.editing.minSalary=r),f(r)}),a()(),o(32,"div",30)(33,"label"),l(34,"Max Salary"),a(),o(35,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.maxSalary,r)||(s.editing.maxSalary=r),f(r)}),a()()(),o(36,"div",30)(37,"label",37)(38,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(39," Active "),a()(),o(40,"div",39)(41,"button",40),l(42,"Cancel"),a(),o(43,"button",41),b(44,V1e,1,0,"i",42),l(45),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Grade"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(4),M("ngModel",e.editing.description),c(5),M("ngModel",e.editing.level),c(5),M("ngModel",e.editing.minSalary),c(4),M("ngModel",e.editing.maxSalary),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var d2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}grades=[];loading=!1;dataReady=!1;saving=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1,this.orgService.getGrades().subscribe({next:t=>{this.grades=t,this.completeLoading()},error:t=>{console.error("Error loading grades:",t),this.completeLoading()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",name:"",description:"",level:1,minSalary:0,maxSalary:0,active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateGrade(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Grade updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update grade")}}):this.orgService.createGrade(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Grade created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create grade")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.orgService.deleteGrade(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-grades"]],standalone:!1,decls:48,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","7",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter grade code",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","Enter grade name",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["type","number","name","level","min","1","placeholder","Enter level",3,"ngModelChange","ngModel"],["type","number","name","minSalary","min","0","placeholder","Enter minimum salary",3,"ngModelChange","ngModel"],["type","number","name","maxSalary","min","0","placeholder","Enter maximum salary",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,F1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Grades"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Grades"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Grade "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Name"),a(),o(34,"th"),l(35,"Level"),a(),o(36,"th"),l(37,"Min Salary"),a(),o(38,"th"),l(39,"Max Salary"),a(),o(40,"th"),l(41,"Status"),a(),o(42,"th"),l(43,"Actions"),a()()(),o(44,"tbody"),b(45,N1e,3,0,"tr",10)(46,L1e,22,14,"tr",11),a()()()(),b(47,B1e,46,12,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(44),m("ngIf",i.grades.length===0),c(),m("ngForOf",i.grades),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,Ie,Mt,Yt,Oe,di,cn,Xt,Ee,li,ht,ap],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function U1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading designations..."),a()()())}function j1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No designations found. Click "Add Designation" to create one.'),a()())}function W1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",17),l(11),a()(),o(12,"td")(13,"div",18)(14,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(15,"i",20),a(),o(16,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(17,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.title),c(2),_((e.grade==null?null:e.grade.name)||"-"),c(2),_(e.description||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function z1e(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function q1e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Title *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.title,r)||(s.editing.title=r),f(r)}),a()()(),o(18,"div",30)(19,"label"),l(20,"Description"),a(),o(21,"textarea",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",30)(23,"label"),l(24,"Grade"),a(),o(25,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.grade,r)||(s.editing.grade=r),f(r)}),o(26,"option",35),l(27,"-- Select Grade --"),a(),b(28,z1e,2,2,"option",36),a()(),o(29,"div",30)(30,"label",37)(31,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(32," Active "),a()(),o(33,"div",39)(34,"button",40),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(35,"Cancel"),a(),o(36,"button",41),l(37),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Designation"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.title),c(4),M("ngModel",e.editing.description),c(4),M("ngModel",e.editing.grade),c(),m("ngValue",null),c(2),m("ngForOf",e.grades),c(3),M("ngModel",e.editing.active),c(6),_(e.isEditMode?"Update":"Save")}}var p2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}designations=[];grades=[];loading=!1;saving=!1;dataReady=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1;let t=0,e=2,i=()=>{t++,t>=e&&(this.loading=!1,this.dataReady=!0,this.cdr.detectChanges())};this.orgService.getDesignations().subscribe({next:r=>{this.designations=r,i()},error:r=>{console.error("Error loading designations:",r),i()}}),this.orgService.getGrades().subscribe({next:r=>{this.grades=r,i()},error:r=>{console.error("Error loading grades:",r),i()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",title:"",description:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){if(!this.saving){if(!this.editing.code||!this.editing.title){this.toastService.warning("Please fill in code and title");return}this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateDesignation(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Designation updated successfully!"),this.loadData(),this.closeModal()},error:t=>{console.error("Error updating:",t),this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to update designation")}}):this.orgService.createDesignation(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Designation created successfully!"),this.loadData(),this.closeModal()},error:t=>{console.error("Error creating:",t),this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to create designation")}})}}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.title}"?`)&&this.orgService.deleteDesignation(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-designations"]],standalone:!1,decls:46,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","6",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter designation code",3,"ngModelChange","ngModel"],["type","text","name","title","required","","placeholder","Enter designation title",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["name","grade",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,U1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Designations"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Designations"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Designation "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Title"),a(),o(34,"th"),l(35,"Grade"),a(),o(36,"th"),l(37,"Description"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),b(43,j1e,3,0,"tr",10)(44,W1e,18,9,"tr",11),a()()()(),b(45,q1e,38,9,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(42),m("ngIf",i.designations.length===0),c(),m("ngForOf",i.designations),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function H1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading cost centers..."),a()()())}function G1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No cost centers found. Click "Add Cost Center" to create one.'),a()())}function $1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",17),l(11),a()(),o(12,"td")(13,"div",18)(14,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(15,"i",20),a(),o(16,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(17,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.description||"-"),c(2),_((e.parent==null?null:e.parent.name)||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function Y1e(n,t){if(n&1&&(o(0,"option",43),l(1),a()),n&2){let e=t.$implicit,i=p(2);m("ngValue",e)("disabled",e.id===i.editing.id),c(),_(e.name)}}function J1e(n,t){n&1&&y(0,"i",15)}function K1e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Name *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",30)(19,"label"),l(20,"Description"),a(),o(21,"textarea",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",30)(23,"label"),l(24,"Parent Cost Center"),a(),o(25,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.parent,r)||(s.editing.parent=r),f(r)}),o(26,"option",35),l(27,"-- No Parent --"),a(),b(28,Y1e,2,3,"option",36),a()(),o(29,"div",30)(30,"label",37)(31,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(32," Active "),a()(),o(33,"div",39)(34,"button",40),l(35,"Cancel"),a(),o(36,"button",41),b(37,J1e,1,0,"i",42),l(38),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Cost Center"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(4),M("ngModel",e.editing.description),c(4),M("ngModel",e.editing.parent),c(),m("ngValue",null),c(2),m("ngForOf",e.costCenters),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var m2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}costCenters=[];loading=!1;dataReady=!1;saving=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1,this.orgService.getCostCenters().subscribe({next:t=>{this.costCenters=t,this.completeLoading()},error:t=>{console.error("Error loading cost centers:",t),this.completeLoading()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",name:"",description:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateCostCenter(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Cost Center updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update cost center")}}):this.orgService.createCostCenter(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Cost Center created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create cost center")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.orgService.deleteCostCenter(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-cost-centers"]],standalone:!1,decls:46,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","6",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter cost center code",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","Enter cost center name",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["name","parent",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[3,"ngValue","disabled"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,H1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Cost Centers"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Cost Centers"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Cost Center "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Name"),a(),o(34,"th"),l(35,"Description"),a(),o(36,"th"),l(37,"Parent"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),b(43,G1e,3,0,"tr",10)(44,$1e,18,9,"tr",11),a()()()(),b(45,K1e,39,12,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(42),m("ngIf",i.costCenters.length===0),c(),m("ngForOf",i.costCenters),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function Q1e(n,t){n&1&&(o(0,"div",13)(1,"div",14),y(2,"i",15),o(3,"p"),l(4,"Loading expense centers..."),a()()())}function X1e(n,t){n&1&&(o(0,"tr")(1,"td",16),l(2,'No expense centers found. Click "Add Expense Center" to create one.'),a()())}function Z1e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",17),l(11),a()(),o(12,"td")(13,"div",18)(14,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(15,"i",20),a(),o(16,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(17,"i",22),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_(e.description||"-"),c(2),_((e.costCenter==null?null:e.costCenter.name)||"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function eve(n,t){if(n&1&&(o(0,"option",35),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function tve(n,t){n&1&&y(0,"i",15)}function nve(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"form",28),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",29)(10,"div",30)(11,"label"),l(12,"Code *"),a(),o(13,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",30)(15,"label"),l(16,"Name *"),a(),o(17,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",30)(19,"label"),l(20,"Description"),a(),o(21,"textarea",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(22,"div",30)(23,"label"),l(24,"Cost Center"),a(),o(25,"select",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.costCenter,r)||(s.editing.costCenter=r),f(r)}),o(26,"option",35),l(27,"-- Select Cost Center --"),a(),b(28,eve,2,2,"option",36),a()(),o(29,"div",30)(30,"label",37)(31,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(32," Active "),a()(),o(33,"div",39)(34,"button",40),l(35,"Cancel"),a(),o(36,"button",41),b(37,tve,1,0,"i",42),l(38),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Expense Center"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(4),M("ngModel",e.editing.description),c(4),M("ngModel",e.editing.costCenter),c(),m("ngValue",null),c(2),m("ngForOf",e.costCenters),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}var u2=class n{constructor(t,e,i){this.orgService=t;this.cdr=e;this.toastService=i}expenseCenters=[];costCenters=[];loading=!1;dataReady=!1;saving=!1;showModal=!1;isEditMode=!1;editing=this.getEmpty();ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.dataReady=!1;let t=0,e=()=>{t++,t>=2&&this.completeLoading()};this.orgService.getExpenseCenters().subscribe({next:i=>{this.expenseCenters=i,e()},error:i=>{console.error("Error loading expense centers:",i),e()}}),this.orgService.getCostCenters().subscribe({next:i=>{this.costCenters=i,e()},error:i=>{console.error("Error loading cost centers:",i),e()}})}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}getEmpty(){return{code:"",name:"",description:"",active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmpty(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.orgService.updateExpenseCenter(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Expense Center updated successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating:",t),this.toastService.error("Failed to update expense center")}}):this.orgService.createExpenseCenter(this.editing).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Expense Center created successfully!"),this.loadData(),this.closeModal()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating:",t),this.toastService.error("Failed to create expense center")}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.orgService.deleteExpenseCenter(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(Mr),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-expense-centers"]],standalone:!1,decls:46,vars:4,consts:[[1,"settings-page"],["class","loading-container",4,"ngIf"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","6",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","Enter expense center code",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","Enter expense center name",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],["name","costCenter",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,Q1e,5,0,"div",1),on(2),o(3,"div",2)(4,"div")(5,"h1"),l(6,"Expense Centers"),a(),o(7,"div",3)(8,"a",4),l(9,"Home"),a(),o(10,"span"),l(11,"/"),a(),o(12,"span"),l(13,"HR Management"),a(),o(14,"span"),l(15,"/"),a(),o(16,"span"),l(17,"Organization"),a(),o(18,"span"),l(19,"/"),a(),o(20,"span"),l(21,"Expense Centers"),a()()(),o(22,"button",5),x("click",function(){return i.openModal()}),y(23,"i",6),l(24," Add Expense Center "),a()(),o(25,"div",7)(26,"div",8)(27,"table",9)(28,"thead")(29,"tr")(30,"th"),l(31,"Code"),a(),o(32,"th"),l(33,"Name"),a(),o(34,"th"),l(35,"Description"),a(),o(36,"th"),l(37,"Cost Center"),a(),o(38,"th"),l(39,"Status"),a(),o(40,"th"),l(41,"Actions"),a()()(),o(42,"tbody"),b(43,X1e,3,0,"tr",10)(44,Z1e,18,9,"tr",11),a()()()(),b(45,nve,39,12,"div",12),an(),a()),e&2&&(c(),m("ngIf",i.loading),c(42),m("ngIf",i.expenseCenters.length===0),c(),m("ngForOf",i.expenseCenters),c(),m("ngIf",i.showModal))},dependencies:[Se,be,pi,je,We,Ie,Yt,Ue,Oe,di,cn,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};var ai=class n{constructor(t){this.http=t}baseUrl="/api/employees";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}search(t){return this.http.get(`${this.baseUrl}/search`,{params:{query:t}})}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}getByDepartment(t){return this.http.get(`${this.baseUrl}/by-department/${t}`)}getByDesignation(t){return this.http.get(`${this.baseUrl}/by-designation/${t}`)}getByLocation(t){return this.http.get(`${this.baseUrl}/by-location/${t}`)}getByManager(t){return this.http.get(`${this.baseUrl}/by-manager/${t}`)}getBankDetails(t){return this.http.get(`${this.baseUrl}/${t}/bank-details`)}createBankDetail(t,e){return this.http.post(`${this.baseUrl}/${t}/bank-details`,e)}updateBankDetail(t,e){return this.http.put(`${this.baseUrl}/bank-details/${t}`,e)}deleteBankDetail(t){return this.http.delete(`${this.baseUrl}/bank-details/${t}`)}getSalaryHistory(t){return this.http.get(`${this.baseUrl}/${t}/salary`)}getCurrentSalary(t){return this.http.get(`${this.baseUrl}/${t}/salary/current`)}createSalary(t,e){return this.http.post(`${this.baseUrl}/${t}/salary`,e)}getEducation(t){return this.http.get(`${this.baseUrl}/${t}/education`)}createEducation(t,e){return this.http.post(`${this.baseUrl}/${t}/education`,e)}updateEducation(t,e){return this.http.put(`${this.baseUrl}/education/${t}`,e)}deleteEducation(t){return this.http.delete(`${this.baseUrl}/education/${t}`)}getExperience(t){return this.http.get(`${this.baseUrl}/${t}/experience`)}createExperience(t,e){return this.http.post(`${this.baseUrl}/${t}/experience`,e)}updateExperience(t,e){return this.http.put(`${this.baseUrl}/experience/${t}`,e)}deleteExperience(t){return this.http.delete(`${this.baseUrl}/experience/${t}`)}getAssets(t){return this.http.get(`${this.baseUrl}/${t}/assets`)}createAsset(t,e){return this.http.post(`${this.baseUrl}/${t}/assets`,e)}updateAsset(t,e){return this.http.put(`${this.baseUrl}/assets/${t}`,e)}approveAsset(t,e){return this.http.put(`${this.baseUrl}/assets/${t}/approve`,null,{params:{status:e}})}deleteAsset(t){return this.http.delete(`${this.baseUrl}/assets/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function ive(n,t){if(n&1){let e=F();o(0,"div",37)(1,"button",38),x("click",function(){g(e);let r=p();return f(r.exportToExcel())}),y(2,"i",39),l(3," Excel "),a(),o(4,"button",38),x("click",function(){g(e);let r=p();return f(r.exportToCSV())}),y(5,"i",40),l(6," CSV "),a(),o(7,"button",38),x("click",function(){g(e);let r=p();return f(r.exportToPDF())}),y(8,"i",41),l(9," PDF "),a(),o(10,"button",38),x("click",function(){g(e);let r=p();return f(r.printEmployees())}),y(11,"i",42),l(12," Print "),a()()}}function rve(n,t){if(n&1&&(o(0,"option",43),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function ove(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"a",44),x("click",function(){let r=g(e).$implicit,s=p();return f(s.viewEmployee(r.id))}),l(3),a()(),o(4,"td")(5,"div",45)(6,"div",46),l(7),a(),o(8,"span"),l(9),a()()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),a(),o(18,"td")(19,"span",47),l(20),a()(),o(21,"td")(22,"div",48)(23,"button",49),x("click",function(){let r=g(e).$implicit,s=p();return f(s.viewEmployee(r.id))}),y(24,"i",50),a(),o(25,"button",51),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editEmployee(r.id))}),y(26,"i",52),a(),o(27,"button",53),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteEmployee(r))}),y(28,"i",54),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.employeeCode),c(4),Ge("",e.firstName==null?null:e.firstName.charAt(0),"",e.lastName==null?null:e.lastName.charAt(0)),c(2),Ge("",e.firstName," ",e.lastName),c(2),_((e.project==null?null:e.project.name)||"-"),c(2),_(e.email),c(2),_((e.department==null?null:e.department.name)||"-"),c(2),_((e.designation==null?null:e.designation.title)||"-"),c(2),m("ngClass",i.getStatusClass(e)),c(),D(" ",e.active?e.employmentStatus||"Active":"Inactive"," ")}}function ave(n,t){n&1&&(o(0,"tr")(1,"td",55),l(2,"No employees found"),a()())}var g2=class n{constructor(t,e,i,r,s){this.employeeService=t;this.orgService=e;this.router=i;this.cdr=r;this.toastService=s}employees=[];filteredEmployees=[];departments=[];designations=[];searchQuery="";filterDepartment="";filterStatus="";showExportMenu=!1;loading=!1;dataReady=!1;subscriptionCount=0;expectedSubscriptions=3;ngOnInit(){this.loadData()}onDocumentClick(t){t.target.closest(".export-dropdown")||(this.showExportMenu=!1)}loadData(){this.loading=!0,this.dataReady=!1,this.subscriptionCount=0,this.employeeService.getAll().subscribe({next:t=>{this.employees=t,this.applyFilters(),this.incrementSubscriptionCount()},error:t=>{console.error("Error loading employees:",t),this.incrementSubscriptionCount(),(t.status===401||t.status===403)&&this.router.navigate(["/login"])}}),this.orgService.getDepartments().subscribe({next:t=>{this.departments=t,this.incrementSubscriptionCount()},error:t=>{console.error("Error loading departments:",t),this.incrementSubscriptionCount()}}),this.orgService.getDesignations().subscribe({next:t=>{this.designations=t,this.incrementSubscriptionCount()},error:t=>{console.error("Error loading designations:",t),this.incrementSubscriptionCount()}})}incrementSubscriptionCount(){this.subscriptionCount++,this.subscriptionCount>=this.expectedSubscriptions&&this.completeLoading()}completeLoading(){this.loading=!1,this.dataReady=!0,this.cdr.detectChanges()}applyFilters(){this.filteredEmployees=this.employees.filter(t=>{let e=!this.searchQuery||t.firstName.toLowerCase().includes(this.searchQuery.toLowerCase())||t.lastName.toLowerCase().includes(this.searchQuery.toLowerCase())||t.employeeCode.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase()),i=!this.filterDepartment||t.department&&t.department.id?.toString()===this.filterDepartment,r=!this.filterStatus||this.filterStatus==="active"&&t.active||this.filterStatus==="inactive"&&!t.active;return e&&i&&r})}onSearch(){this.applyFilters()}clearFilters(){this.searchQuery="",this.filterDepartment="",this.filterStatus="",this.applyFilters()}addEmployee(){this.router.navigate(["/app/hr/employees/new"])}viewEmployee(t){this.router.navigate(["/app/hr/employees",t])}editEmployee(t){this.router.navigate(["/app/hr/employees",t],{queryParams:{edit:!0}})}deleteEmployee(t){t.id&&confirm(`Are you sure you want to delete ${t.firstName} ${t.lastName}?`)&&(this.loading=!0,this.cdr.markForCheck(),this.employeeService.delete(t.id).subscribe({next:()=>{this.employees=this.employees.filter(e=>e.id!==t.id),this.applyFilters(),this.loading=!1,this.toastService.success("Employee deleted successfully"),this.cdr.markForCheck()},error:e=>{console.error("Error deleting employee:",e),this.loading=!1,this.toastService.error("Failed to delete employee"),this.cdr.markForCheck()}}))}getStatusClass(t){if(!t.active)return"status-inactive";switch(t.employmentStatus){case"CONFIRMED":return"status-confirmed";case"PROBATION":return"status-probation";case"NOTICE":return"status-notice";case"RESIGNED":return"status-resigned";default:return"status-active"}}get activeCount(){return this.employees.filter(t=>t.active).length}get inactiveCount(){return this.employees.filter(t=>!t.active).length}toggleExportMenu(){this.showExportMenu=!this.showExportMenu}getExportData(){return this.filteredEmployees.map(t=>({"Employee Code":t.employeeCode||"","First Name":t.firstName||"","Last Name":t.lastName||"",Email:t.email||"",Phone:t.phone||"",Gender:t.gender||"","Date of Birth":t.dateOfBirth||"",Nationality:t.nationality||"","Marital Status":t.maritalStatus||"",Department:t.department?.name||"",Designation:t.designation?.title||"",Location:t.location?.name||"",Grade:t.grade?.name||"","Job Role":t.jobRole?.title||"","Cost Center":t.costCenter?.name||"","Expense Center":t.expenseCenter?.name||"","Joining Date":t.joiningDate||"","Confirmation Date":t.confirmationDate||"","Resignation Date":t.resignationDate||"","Last Working Date":t.lastWorkingDate||"","Employment Type":t.employmentType||"","Employment Status":t.employmentStatus||"","Reporting Manager":t.reportingManager?`${t.reportingManager.firstName} ${t.reportingManager.lastName}`:"",Status:t.active?"Active":"Inactive","Permanent Address":this.formatAddress(t.permanentAddress),"Current Address":this.formatAddress(t.currentAddress),"Emergency Contact Name":t.emergencyContactName||"","Emergency Contact Phone":t.emergencyContactPhone||"","Emergency Contact Relationship":t.emergencyContactRelation||""}))}formatAddress(t){return t?[t.addressLine1,t.addressLine2,t.city,t.state,t.postalCode,t.country].filter(Boolean).join(", "):""}exportToExcel(){this.showExportMenu=!1;let t=this.getExportData(),e=ac.json_to_sheet(t),i=ac.book_new();ac.book_append_sheet(i,e,"Employees");let r=Object.keys(t[0]||{}).map(s=>({wch:Math.max(s.length,15)}));e["!cols"]=r,Cb(i,`employees_${new Date().toISOString().split("T")[0]}.xlsx`)}exportToCSV(){this.showExportMenu=!1;let t=this.getExportData();if(t.length===0){this.toastService.warning("No data to export");return}let e=Object.keys(t[0]),r=[e.join(","),...t.map(h=>e.map(v=>{let C=h[v]||"";return`"${String(C).replace(/"/g,'""')}"`}).join(","))].join(`
`),s=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(s),u=document.createElement("a");u.setAttribute("href",d),u.setAttribute("download",`employees_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}exportToPDF(){this.showExportMenu=!1;let t=new Jt("landscape","mm","a3"),e=this.getExportData();t.setFontSize(18),t.setTextColor(0,128,128),t.text("Employee Master List - Complete Details",14,15),t.setFontSize(10),t.setTextColor(100),t.text(`Generated on: ${new Date().toLocaleDateString()}`,14,22),t.text(`Total Records: ${this.filteredEmployees.length}`,14,27);let i=Object.keys(e[0]||{}),r=e.map(s=>i.map(d=>String(s[d]||"")));t.autoTable({head:[i],body:r,startY:32,styles:{fontSize:6,cellPadding:1.5,overflow:"linebreak"},headStyles:{fillColor:[0,128,128],textColor:255,fontStyle:"bold",fontSize:6},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},columnStyles:i.reduce((s,d,u)=>(s[u]={cellWidth:"auto"},s),{}),tableWidth:"auto"}),t.save(`employees_complete_${new Date().toISOString().split("T")[0]}.pdf`)}printEmployees(){this.showExportMenu=!1;let t=this.getExportData(),e=window.open("","_blank");if(!e){this.toastService.warning("Please allow popups for this website");return}let i=t.length>0?Object.keys(t[0]):[],r=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Employee Master List - Complete Details</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 10px; }
          h1 { color: #008080; margin-bottom: 5px; font-size: 18px; }
          .meta { color: #666; margin-bottom: 15px; font-size: 11px; }
          table { width: 100%; border-collapse: collapse; font-size: 7px; }
          th, td { border: 1px solid #ddd; padding: 3px 4px; text-align: left; word-wrap: break-word; max-width: 80px; }
          th { background: #008080; color: white; font-weight: bold; font-size: 7px; }
          tr:nth-child(even) { background: #f9f9f9; }
          @media print {
            body { margin: 5mm; }
            button { display: none; }
            @page { size: A3 landscape; margin: 5mm; }
          }
        </style>
      </head>
      <body>
        <h1>Employee Master List - Complete Details</h1>
        <div class="meta">
          <p>Generated on: ${new Date().toLocaleDateString()} | Total Records: ${t.length}</p>
        </div>
        <table>
          <thead>
            <tr>
              ${i.map(s=>`<th>${s}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${t.map(s=>`
              <tr>
                ${i.map(d=>`<td>${s[d]||""}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
        <script>
          window.onload = function() { window.print(); }
        <\/script>
      </body>
      </html>
    `;e.document.write(r),e.document.close()}exportEmployees(){this.exportToCSV()}static \u0275fac=function(e){return new(e||n)(V(ai),V(Mr),V(tn),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-employee-list"]],hostBindings:function(e,i){e&1&&x("click",function(s){return i.onDocumentClick(s)},Sf)},standalone:!1,decls:81,vars:10,consts:[[1,"employee-list-container"],[1,"page-header"],[1,"header-actions"],[1,"export-dropdown"],[1,"btn-secondary","export-btn",3,"click"],[1,"fas","fa-download"],[1,"fas","fa-chevron-down"],["class","export-menu",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-cards"],[1,"stat-card","stat-total"],[1,"stat-icon"],[1,"fas","fa-users"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-card","stat-active"],[1,"fas","fa-user-check"],[1,"stat-card","stat-inactive"],[1,"fas","fa-user-times"],[1,"filters-section"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search by name, code, or email...",3,"ngModelChange","ngModel"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","active"],["value","inactive"],[1,"btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"export-menu"],[3,"click"],[1,"fas","fa-file-excel"],[1,"fas","fa-file-csv"],[1,"fas","fa-file-pdf"],[1,"fas","fa-print"],[3,"value"],[1,"employee-code-link",3,"click"],[1,"employee-name"],[1,"avatar"],[1,"status-badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn-icon",3,"click"],[1,"fas","fa-eye"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","8",1,"no-data"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Employee Master"),a(),o(4,"div",2)(5,"div",3)(6,"button",4),x("click",function(){return i.toggleExportMenu()}),y(7,"i",5),l(8," Export "),y(9,"i",6),a(),b(10,ive,13,0,"div",7),a(),o(11,"button",8),x("click",function(){return i.addEmployee()}),y(12,"i",9),l(13," Add Employee "),a()()(),o(14,"div",10)(15,"div",11)(16,"div",12),y(17,"i",13),a(),o(18,"div",14)(19,"span",15),l(20),a(),o(21,"span",16),l(22,"Total Employees"),a()()(),o(23,"div",17)(24,"div",12),y(25,"i",18),a(),o(26,"div",14)(27,"span",15),l(28),a(),o(29,"span",16),l(30,"Active"),a()()(),o(31,"div",19)(32,"div",12),y(33,"i",20),a(),o(34,"div",14)(35,"span",15),l(36),a(),o(37,"span",16),l(38,"Inactive"),a()()()(),o(39,"div",21)(40,"div",22),y(41,"i",23),o(42,"input",24),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),x("ngModelChange",function(){return i.onSearch()}),a()(),o(43,"div",25)(44,"select",26),S("ngModelChange",function(s){return P(i.filterDepartment,s)||(i.filterDepartment=s),s}),x("ngModelChange",function(){return i.applyFilters()}),o(45,"option",27),l(46,"All Departments"),a(),b(47,rve,2,2,"option",28),a(),o(48,"select",26),S("ngModelChange",function(s){return P(i.filterStatus,s)||(i.filterStatus=s),s}),x("ngModelChange",function(){return i.applyFilters()}),o(49,"option",27),l(50,"All Status"),a(),o(51,"option",29),l(52,"Active"),a(),o(53,"option",30),l(54,"Inactive"),a()(),o(55,"button",31),x("click",function(){return i.clearFilters()}),y(56,"i",32),l(57," Clear "),a()()(),o(58,"div",33)(59,"table",34)(60,"thead")(61,"tr")(62,"th"),l(63,"Employee Code"),a(),o(64,"th"),l(65,"Name"),a(),o(66,"th"),l(67,"Project"),a(),o(68,"th"),l(69,"Email"),a(),o(70,"th"),l(71,"Department"),a(),o(72,"th"),l(73,"Designation"),a(),o(74,"th"),l(75,"Status"),a(),o(76,"th"),l(77,"Actions"),a()()(),o(78,"tbody"),b(79,ove,29,11,"tr",35)(80,ave,3,0,"tr",36),a()()()()),e&2&&(c(10),m("ngIf",i.showExportMenu),c(10),_(i.employees.length),c(8),_(i.activeCount),c(8),_(i.inactiveCount),c(6),M("ngModel",i.searchQuery),c(2),M("ngModel",i.filterDepartment),c(3),m("ngForOf",i.departments),c(),M("ngModel",i.filterStatus),c(31),m("ngForOf",i.filteredEmployees),c(),m("ngIf",i.filteredEmployees.length===0))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee],styles:[".employee-list-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0;font-size:24px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.export-dropdown[_ngcontent-%COMP%]{position:relative}.export-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{font-size:10px;margin-left:4px}.export-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:4px;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:150px;z-index:1000;overflow:hidden}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:12px 16px;border:none;background:#fff;cursor:pointer;font-size:14px;color:#333;text-align:left}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;text-align:center}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-excel[_ngcontent-%COMP%]{color:#1d6f42}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-csv[_ngcontent-%COMP%]{color:#2e7d32}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-file-pdf[_ngcontent-%COMP%]{color:#c62828}.export-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-print[_ngcontent-%COMP%]{color:#1565c0}.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333;border:1px solid #ddd;padding:10px 16px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px 24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;border-left:4px solid;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #0000001f}.stat-card.stat-total[_ngcontent-%COMP%]{border-left-color:teal}.stat-card.stat-total[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0080801a;color:teal}.stat-card.stat-total[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:teal}.stat-card.stat-active[_ngcontent-%COMP%]{border-left-color:#28a745}.stat-card.stat-active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.stat-active[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#28a745}.stat-card.stat-inactive[_ngcontent-%COMP%]{border-left-color:#ffc107}.stat-card.stat-inactive[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc1071a;color:#e6a700}.stat-card.stat-inactive[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#e6a700}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-number[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1.2}.stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:500}.filters-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:16px;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px;display:flex;align-items:center;background:#fff;border:1px solid #ddd;border-radius:8px;overflow:hidden;transition:border-color .2s,box-shadow .2s}.search-box[_ngcontent-%COMP%]:focus-within{border-color:teal;box-shadow:0 0 0 3px #0080801a}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:14px;color:#999;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px 12px 40px;border:none;font-size:14px;background:transparent;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;min-width:150px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:13px;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.employee-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.status-active[_ngcontent-%COMP%], .status-badge.status-confirmed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.status-probation[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.status-notice[_ngcontent-%COMP%], .status-badge.status-resigned[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.status-inactive[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px;cursor:pointer;color:#666;border-radius:4px}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fee;color:#c00}.no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px!important}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;color:teal;font-size:16px}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}@media(max-width:768px){.stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0})};var gc=class n{constructor(t){this.http=t}baseUrl="/api/documents";getCategories(){return this.http.get(`${this.baseUrl}/categories`)}getAllCategories(){return this.http.get(`${this.baseUrl}/categories/all`)}getCategoryById(t){return this.http.get(`${this.baseUrl}/categories/${t}`)}createCategory(t){return this.http.post(`${this.baseUrl}/categories`,t)}updateCategory(t,e){return this.http.put(`${this.baseUrl}/categories/${t}`,e)}deleteCategory(t){return this.http.delete(`${this.baseUrl}/categories/${t}`)}getTypes(){return this.http.get(`${this.baseUrl}/types`)}getAllTypes(){return this.http.get(`${this.baseUrl}/types/all`)}getTypesByCategory(t){return this.http.get(`${this.baseUrl}/types/by-category/${t}`)}getMandatoryTypes(){return this.http.get(`${this.baseUrl}/types/mandatory`)}getTypeById(t){return this.http.get(`${this.baseUrl}/types/${t}`)}createType(t){return this.http.post(`${this.baseUrl}/types`,t)}updateType(t,e){return this.http.put(`${this.baseUrl}/types/${t}`,e)}deleteType(t){return this.http.delete(`${this.baseUrl}/types/${t}`)}getEmployeeDocuments(t){return this.http.get(`${this.baseUrl}/employee/${t}`)}getEmployeeDocumentsByCategory(t,e){return this.http.get(`${this.baseUrl}/employee/${t}/category/${e}`)}getDocumentById(t){return this.http.get(`${this.baseUrl}/${t}`)}createDocument(t,e){return this.http.post(`${this.baseUrl}/employee/${t}`,e)}updateDocument(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}verifyDocument(t,e,i){let r=new ki().set("status",e);return i&&(r=r.set("remarks",i)),this.http.put(`${this.baseUrl}/${t}/verify`,null,{params:r})}deleteDocument(t){return this.http.delete(`${this.baseUrl}/${t}`)}getPendingVerification(){return this.http.get(`${this.baseUrl}/pending-verification`)}getExpiringDocuments(t=30){return this.http.get(`${this.baseUrl}/expiring`,{params:{days:t.toString()}})}getExpiredDocuments(){return this.http.get(`${this.baseUrl}/expired`)}getEmployeeDocumentStats(t){return this.http.get(`${this.baseUrl}/employee/${t}/stats`)}initCategories(){return this.http.post(`${this.baseUrl}/init-categories`,null,{responseType:"text"})}checkExpiry(){return this.http.post(`${this.baseUrl}/check-expiry`,null)}resetReminder(t){return this.http.put(`${this.baseUrl}/${t}/reset-reminder`,null)}getDocumentChecklist(){return this.http.get(`${this.baseUrl}/checklist`)}getEmployeeDocumentChecklist(t){return this.http.get(`${this.baseUrl}/employee/${t}/checklist`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var ma=class n{constructor(t){this.http=t}baseUrl="/api/recruitment";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getRequisitions(){return this.http.get(`${this.baseUrl}/requisitions`)}getRequisition(t){return this.http.get(`${this.baseUrl}/requisitions/${t}`)}createRequisition(t){return this.http.post(`${this.baseUrl}/requisitions`,t)}updateRequisition(t,e){return this.http.put(`${this.baseUrl}/requisitions/${t}`,e)}submitRequisition(t){return this.http.post(`${this.baseUrl}/requisitions/${t}/submit`,{})}approveRequisition(t,e){return this.http.post(`${this.baseUrl}/requisitions/${t}/approve`,{approverId:e})}rejectRequisition(t,e){return this.http.post(`${this.baseUrl}/requisitions/${t}/reject`,{reason:e})}holdRequisition(t){return this.http.post(`${this.baseUrl}/requisitions/${t}/hold`,{})}deleteRequisition(t){return this.http.delete(`${this.baseUrl}/requisitions/${t}`)}getOffers(){return this.http.get(`${this.baseUrl}/offers`)}getOffer(t){return this.http.get(`${this.baseUrl}/offers/${t}`)}createOffer(t){return this.http.post(`${this.baseUrl}/offers`,t)}updateOffer(t,e){return this.http.put(`${this.baseUrl}/offers/${t}`,e)}sendOffer(t){return this.http.post(`${this.baseUrl}/offers/${t}/send`,{})}acceptOffer(t){return this.http.post(`${this.baseUrl}/offers/${t}/accept`,{})}declineOffer(t,e){return this.http.post(`${this.baseUrl}/offers/${t}/decline`,{reason:e})}deleteOffer(t){return this.http.delete(`${this.baseUrl}/offers/${t}`)}getJobPostings(){return this.http.get(`${this.baseUrl}/job-postings`)}getActiveJobPostings(){return this.http.get(`${this.baseUrl}/job-postings/active`)}getJobPosting(t){return this.http.get(`${this.baseUrl}/job-postings/${t}`)}createJobPosting(t){return this.http.post(`${this.baseUrl}/job-postings`,t)}updateJobPosting(t,e){return this.http.put(`${this.baseUrl}/job-postings/${t}`,e)}publishJobPosting(t){return this.http.post(`${this.baseUrl}/job-postings/${t}/publish`,{})}closeJobPosting(t){return this.http.post(`${this.baseUrl}/job-postings/${t}/close`,{})}deleteJobPosting(t){return this.http.delete(`${this.baseUrl}/job-postings/${t}`)}getCandidates(){return this.http.get(`${this.baseUrl}/candidates`)}getCandidatesByPosting(t){return this.http.get(`${this.baseUrl}/candidates/posting/${t}`)}getCandidate(t){return this.http.get(`${this.baseUrl}/candidates/${t}`)}createCandidate(t){return this.http.post(`${this.baseUrl}/candidates`,t)}updateCandidate(t,e){return this.http.put(`${this.baseUrl}/candidates/${t}`,e)}updateCandidateStatus(t,e,i){return this.http.post(`${this.baseUrl}/candidates/${t}/status`,{status:e,notes:i})}convertToEmployee(t,e){return this.http.post(`${this.baseUrl}/candidates/${t}/convert-to-employee`,e)}deleteCandidate(t){return this.http.delete(`${this.baseUrl}/candidates/${t}`)}getInterviews(){return this.http.get(`${this.baseUrl}/interviews`)}getInterviewsByCandidate(t){return this.http.get(`${this.baseUrl}/interviews/candidate/${t}`)}getUpcomingInterviews(){return this.http.get(`${this.baseUrl}/interviews/upcoming`)}scheduleInterview(t){return this.http.post(`${this.baseUrl}/interviews`,t)}updateInterview(t,e){return this.http.put(`${this.baseUrl}/interviews/${t}`,e)}submitFeedback(t,e){return this.http.post(`${this.baseUrl}/interviews/${t}/feedback`,e)}cancelInterview(t,e){return this.http.post(`${this.baseUrl}/interviews/${t}/cancel`,{reason:e})}getRecruitmentHistoryByEmployee(t){return this.http.get(`${this.baseUrl}/employees/${t}/recruitment-history`)}convertOfferToEmployee(t,e){return this.http.post(`${this.baseUrl}/offers/${t}/convert-to-employee`,e)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ka=class n{constructor(t){this.http=t}baseUrl="/api/leave";getAllLeaveTypes(){return this.http.get(`${this.baseUrl}/types`)}getActiveLeaveTypes(){return this.http.get(`${this.baseUrl}/types/active`)}getLeaveTypeById(t){return this.http.get(`${this.baseUrl}/types/${t}`)}createLeaveType(t){return this.http.post(`${this.baseUrl}/types`,t)}updateLeaveType(t,e){return this.http.put(`${this.baseUrl}/types/${t}`,e)}deleteLeaveType(t){return this.http.delete(`${this.baseUrl}/types/${t}`)}getAllRequests(){return this.http.get(`${this.baseUrl}/requests`)}getPendingRequests(){return this.http.get(`${this.baseUrl}/requests/pending`)}getRequestById(t){return this.http.get(`${this.baseUrl}/requests/${t}`)}getRequestsByEmployee(t){return this.http.get(`${this.baseUrl}/requests/employee/${t}`)}createRequest(t){return this.http.post(`${this.baseUrl}/requests`,t)}approveRequest(t,e,i){return this.http.put(`${this.baseUrl}/requests/${t}/approve`,{approverId:e,approverRemarks:i})}rejectRequest(t,e,i){return this.http.put(`${this.baseUrl}/requests/${t}/reject`,{approverId:e,approverRemarks:i})}cancelRequest(t){return this.http.put(`${this.baseUrl}/requests/${t}/cancel`,{})}deleteRequest(t){return this.http.delete(`${this.baseUrl}/requests/${t}`)}managerApprove(t,e){return this.http.put(`${this.baseUrl}/requests/${t}/manager-approve`,{remarks:e})}managerReject(t,e){return this.http.put(`${this.baseUrl}/requests/${t}/manager-reject`,{remarks:e})}hrApprove(t,e){return this.http.put(`${this.baseUrl}/requests/${t}/hr-approve`,{remarks:e})}hrReject(t,e){return this.http.put(`${this.baseUrl}/requests/${t}/hr-reject`,{remarks:e})}getPendingManagerApprovals(){return this.http.get(`${this.baseUrl}/requests/pending-manager`)}getPendingHrApprovals(){return this.http.get(`${this.baseUrl}/requests/pending-hr`)}getRequestActivity(t){return this.http.get(`${this.baseUrl}/requests/${t}/activity`)}addActivityNote(t,e){return this.http.post(`${this.baseUrl}/requests/${t}/activity`,{note:e})}getEmployeeBalances(t){return this.http.get(`${this.baseUrl}/balances/employee/${t}`)}getEmployeeBalancesByYear(t,e){return this.http.get(`${this.baseUrl}/balances/employee/${t}/year/${e}`)}initializeBalances(t){return this.http.post(`${this.baseUrl}/balances/initialize/${t}`,{})}updateBalance(t,e){return this.http.put(`${this.baseUrl}/balances/${t}`,e)}getAllHolidays(){return this.http.get(`${this.baseUrl}/holidays`)}getHolidaysByYear(t){return this.http.get(`${this.baseUrl}/holidays/year/${t}`)}getHolidayById(t){return this.http.get(`${this.baseUrl}/holidays/${t}`)}createHoliday(t){return this.http.post(`${this.baseUrl}/holidays`,t)}updateHoliday(t,e){return this.http.put(`${this.baseUrl}/holidays/${t}`,e)}deleteHoliday(t){return this.http.delete(`${this.baseUrl}/holidays/${t}`)}getMonthlyCalendar(t,e){return this.http.get(`${this.baseUrl}/holidays/calendar/${t}/${e}`)}getEmployeeLeaveSummary(t){return this.http.get(`${this.baseUrl}/summary/employee/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var vi=class n{constructor(t){this.http=t}rulesUrl="/api/payroll/rules";payrollUrl="/api/payroll";processedPayrollRecords=[];addProcessedPayrollRecords(t){this.processedPayrollRecords.push(...t)}getProcessedPayrollRecords(){return[...this.processedPayrollRecords]}getProcessedPayrollRecordsByStatus(t){return this.processedPayrollRecords.filter(e=>e.status===t)}getReleasedPayrollRecords(){return this.processedPayrollRecords.filter(t=>t.status==="Released")}updatePayrollRecordStatus(t,e,i){let r=this.processedPayrollRecords.find(s=>s.employeeId===t&&s.periodStart===e);r&&(r.status=i)}releasePayrollRecords(t,e){this.processedPayrollRecords.forEach(i=>{t.includes(i.employeeId)&&i.periodStart===e&&i.status==="Processed"&&(i.status="Released")})}getProcessedPayrollRecordsByEmployee(t){return this.processedPayrollRecords.filter(e=>e.employeeId===t)}clearProcessedPayrollRecords(){this.processedPayrollRecords=[]}getSalaryHeads(){return this.http.get(`${this.rulesUrl}/salary-heads`)}getAllSalaryHeads(){return this.http.get(`${this.rulesUrl}/salary-heads/all`)}getSalaryHead(t){return this.http.get(`${this.rulesUrl}/salary-heads/${t}`)}getSalaryHeadsByType(t){return this.http.get(`${this.rulesUrl}/salary-heads/type/${t}`)}createSalaryHead(t){return this.http.post(`${this.rulesUrl}/salary-heads`,t)}updateSalaryHead(t,e){return this.http.put(`${this.rulesUrl}/salary-heads/${t}`,e)}deleteSalaryHead(t){return this.http.delete(`${this.rulesUrl}/salary-heads/${t}`)}getPayFrequencies(){return this.http.get(`${this.rulesUrl}/pay-frequencies`)}getAllPayFrequencies(){return this.http.get(`${this.rulesUrl}/pay-frequencies/all`)}getPayFrequency(t){return this.http.get(`${this.rulesUrl}/pay-frequencies/${t}`)}createPayFrequency(t){return this.http.post(`${this.rulesUrl}/pay-frequencies`,t)}updatePayFrequency(t,e){return this.http.put(`${this.rulesUrl}/pay-frequencies/${t}`,e)}deletePayFrequency(t){return this.http.delete(`${this.rulesUrl}/pay-frequencies/${t}`)}getOvertimeRules(){return this.http.get(`${this.rulesUrl}/overtime-rules`)}getAllOvertimeRules(){return this.http.get(`${this.rulesUrl}/overtime-rules/all`)}getOvertimeRule(t){return this.http.get(`${this.rulesUrl}/overtime-rules/${t}`)}createOvertimeRule(t){return this.http.post(`${this.rulesUrl}/overtime-rules`,t)}updateOvertimeRule(t,e){return this.http.put(`${this.rulesUrl}/overtime-rules/${t}`,e)}deleteOvertimeRule(t){return this.http.delete(`${this.rulesUrl}/overtime-rules/${t}`)}getTaxRules(){return this.http.get(`${this.rulesUrl}/tax-rules`)}getAllTaxRules(){return this.http.get(`${this.rulesUrl}/tax-rules/all`)}getTaxRule(t){return this.http.get(`${this.rulesUrl}/tax-rules/${t}`)}getTaxRulesByType(t){return this.http.get(`${this.rulesUrl}/tax-rules/type/${t}`)}createTaxRule(t){return this.http.post(`${this.rulesUrl}/tax-rules`,t)}updateTaxRule(t,e){return this.http.put(`${this.rulesUrl}/tax-rules/${t}`,e)}deleteTaxRule(t){return this.http.delete(`${this.rulesUrl}/tax-rules/${t}`)}getStatutoryRules(){return this.http.get(`${this.rulesUrl}/statutory-rules`)}getAllStatutoryRules(){return this.http.get(`${this.rulesUrl}/statutory-rules/all`)}getStatutoryRule(t){return this.http.get(`${this.rulesUrl}/statutory-rules/${t}`)}createStatutoryRule(t){return this.http.post(`${this.rulesUrl}/statutory-rules`,t)}updateStatutoryRule(t,e){return this.http.put(`${this.rulesUrl}/statutory-rules/${t}`,e)}deleteStatutoryRule(t){return this.http.delete(`${this.rulesUrl}/statutory-rules/${t}`)}getTimesheets(){return this.http.get(`${this.payrollUrl}/timesheets`)}getTimesheet(t){return this.http.get(`${this.payrollUrl}/timesheets/${t}`)}getTimesheetsByEmployee(t){return this.http.get(`${this.payrollUrl}/timesheets/employee/${t}`)}getTimesheetsByStatus(t){return this.http.get(`${this.payrollUrl}/timesheets/status/${t}`)}createTimesheet(t){return this.http.post(`${this.payrollUrl}/timesheets`,t)}generateTimesheets(t,e){return this.http.post(`${this.payrollUrl}/timesheets/generate`,{startDate:t,endDate:e})}approveTimesheet(t,e){return this.http.put(`${this.payrollUrl}/timesheets/${t}/approve`,e)}rejectTimesheet(t,e){return this.http.put(`${this.payrollUrl}/timesheets/${t}/reject`,e)}getPayrollRuns(){return this.http.get(`${this.payrollUrl}/runs`)}getPayrollRun(t){return this.http.get(`${this.payrollUrl}/runs/${t}`)}getPayrollRecordsByRun(t){return this.http.get(`${this.payrollUrl}/runs/${t}/records`)}createPayrollRun(t){return this.http.post(`${this.payrollUrl}/runs`,t)}calculatePayroll(t){return this.http.post(`${this.payrollUrl}/runs/${t}/calculate`,{})}processPayroll(t,e){return this.http.post(`${this.payrollUrl}/runs/${t}/process`,e)}approvePayrollRun(t,e){return this.http.put(`${this.payrollUrl}/runs/${t}/approve`,e)}getPayrollRecordsByEmployee(t){return this.http.get(`${this.payrollUrl}/records/employee/${t}`)}getPaystubs(t){return this.http.get(`${this.payrollUrl}/records/employee/${t}/paystubs`)}getEmployeeBenefits(t){return this.http.get(`${this.payrollUrl}/benefits/employee/${t}`)}createEmployeeBenefit(t){return this.http.post(`${this.payrollUrl}/benefits`,t)}updateEmployeeBenefit(t,e){return this.http.put(`${this.payrollUrl}/benefits/${t}`,e)}deleteEmployeeBenefit(t){return this.http.delete(`${this.payrollUrl}/benefits/${t}`)}generateTimesheetsFromAttendance(t){return this.http.post(`${this.payrollUrl}/timesheets/generate-from-attendance`,t)}getProjectTimesheets(){return this.http.get(`${this.payrollUrl}/project-timesheets`)}getProjectTimesheetsByEmployee(t){return this.http.get(`${this.payrollUrl}/project-timesheets/employee/${t}`)}getProjectTimesheetsByProject(t){return this.http.get(`${this.payrollUrl}/project-timesheets/project/${t}`)}createProjectTimesheet(t){return this.http.post(`${this.payrollUrl}/project-timesheets`,t)}approveProjectTimesheet(t,e){return this.http.put(`${this.payrollUrl}/project-timesheets/${t}/approve`,e)}getApprovedAttendance(t,e){return this.http.get(`${this.payrollUrl}/attendance/approved?startDate=${t}&endDate=${e}`)}getAttendanceSummary(t,e){return this.http.get(`${this.payrollUrl}/attendance/summary?startDate=${t}&endDate=${e}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var To=class n{constructor(t){this.http=t}baseUrl="/api/attendance";getAllRecords(){return this.http.get(this.baseUrl)}getEmployeesForClock(){return this.http.get(`${this.baseUrl}/employees-for-clock`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}`)}getByDate(t){return this.http.get(`${this.baseUrl}/date/${t}`)}getByEmployeeAndDateRange(t,e,i){return this.http.get(`${this.baseUrl}/employee/${t}/range`,{params:{startDate:e,endDate:i}})}getByDateRange(t,e){return this.http.get(`${this.baseUrl}/date-range`,{params:{startDate:t,endDate:e}})}clockIn(t,e="WEB"){let i=new Date,r=i.toTimeString().substring(0,5),s=i.toISOString().split("T")[0];return this.http.post(`${this.baseUrl}/clock-in`,{employeeId:t,captureMethod:e,clientTime:r,clientDate:s})}clockOut(t){let e=new Date,i=e.toTimeString().substring(0,5),r=e.toISOString().split("T")[0];return this.http.post(`${this.baseUrl}/clock-out`,{employeeId:t,clientTime:i,clientDate:r})}manualEntry(t){return this.http.post(`${this.baseUrl}/manual-entry`,t)}bulkUpload(t){return this.http.post(`${this.baseUrl}/bulk-upload`,t)}directEntry(t,e,i){return this.http.post(`${this.baseUrl}/direct-entry`,{employeeId:t,status:e,date:i})}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}approve(t,e){return this.http.put(`${this.baseUrl}/${t}/approve`,{approverId:e})}bulkApprove(t){return this.http.put(`${this.baseUrl}/bulk-approve`,{ids:t})}reject(t,e){return this.http.put(`${this.baseUrl}/${t}/reject`,{remarks:e})}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}getTodaySummary(){return this.http.get(`${this.baseUrl}/summary/today`)}getAllRules(){return this.http.get(`${this.baseUrl}/rules`)}getRuleById(t){return this.http.get(`${this.baseUrl}/rules/${t}`)}createRule(t){return this.http.post(`${this.baseUrl}/rules`,t)}updateRule(t,e){return this.http.put(`${this.baseUrl}/rules/${t}`,e)}deleteRule(t){return this.http.delete(`${this.baseUrl}/rules/${t}`)}getAllProjectTimeEntries(){return this.http.get(`${this.baseUrl}/project-time`)}getProjectTimeByEmployee(t){return this.http.get(`${this.baseUrl}/project-time/employee/${t}`)}getProjectTimeByProject(t){return this.http.get(`${this.baseUrl}/project-time/project/${t}`)}createProjectTimeEntry(t){return this.http.post(`${this.baseUrl}/project-time`,t)}updateProjectTimeEntry(t,e){return this.http.put(`${this.baseUrl}/project-time/${t}`,e)}approveProjectTime(t,e){return this.http.put(`${this.baseUrl}/project-time/${t}/approve`,{approverId:e})}deleteProjectTimeEntry(t){return this.http.delete(`${this.baseUrl}/project-time/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var sve=(n,t,e,i)=>({"badge-success":n,"badge-primary":t,"badge-info":e,"badge-warning":i}),lve=(n,t,e)=>({"badge-warning":n,"badge-success":t,"badge-danger":e}),cve=()=>[1,2,3,4,5],dve=(n,t,e)=>({"badge-success":n,"badge-warning":t,"badge-info":e}),DL=(n,t,e)=>({"badge-success":n,"badge-warning":t,"badge-danger":e});function pve(n,t){n&1&&(o(0,"div",7)(1,"div",8),y(2,"i",9),o(3,"p"),l(4,"Loading employee data..."),a()()())}function mve(n,t){n&1&&(o(0,"h2"),l(1,"New Employee"),a())}function uve(n,t){if(n&1&&(o(0,"h2"),l(1),a()),n&2){let e=p(2);c(),Ge("",e.employee.firstName," ",e.employee.lastName)}}function gve(n,t){if(n&1&&(o(0,"span",17),l(1),a()),n&2){let e=p(2);c(),_(e.employee.employeeCode)}}function fve(n,t){if(n&1){let e=F();o(0,"button",22),x("click",function(){g(e);let r=p(3);return f(r.toggleEditMode())}),y(1,"i",23),l(2," Edit "),a()}}function hve(n,t){if(n&1){let e=F();o(0,"button",24),x("click",function(){g(e);let r=p(3);return f(r.saveEmployee())}),y(1,"i",25),l(2),a()}if(n&2){let e=p(3);m("disabled",e.saving),c(),m("ngClass",e.saving?"fa-spinner fa-spin":"fa-save"),c(),D(" ",e.saving?"Saving...":"Save"," ")}}function _ve(n,t){if(n&1){let e=F();o(0,"button",26),x("click",function(){g(e);let r=p(3);return f(r.cancel())}),l(1,"Cancel"),a()}if(n&2){let e=p(3);m("disabled",e.saving)}}function vve(n,t){if(n&1&&(o(0,"div",18),b(1,fve,3,0,"button",19)(2,hve,3,3,"button",20)(3,_ve,2,1,"button",21),a()),n&2){let e=p(2);c(),m("ngIf",!e.isEditMode),c(),m("ngIf",e.isEditMode),c(),m("ngIf",e.isEditMode)}}function xve(n,t){if(n&1){let e=F();o(0,"div",18)(1,"button",24),x("click",function(){g(e);let r=p(2);return f(r.saveEmployee())}),y(2,"i",25),l(3),a(),o(4,"button",26),x("click",function(){g(e);let r=p(2);return f(r.cancel())}),l(5,"Cancel"),a()()}if(n&2){let e=p(2);c(),m("disabled",e.saving),c(),m("ngClass",e.saving?"fa-spinner fa-spin":"fa-save"),c(),D(" ",e.saving?"Saving...":"Save"," "),c(),m("disabled",e.saving)}}function yve(n,t){if(n&1){let e=F();o(0,"div",10)(1,"div",11)(2,"button",12),x("click",function(){g(e);let r=p();return f(r.goBack())}),y(3,"i",13),a(),b(4,mve,2,0,"h2",14)(5,uve,2,2,"h2",14)(6,gve,2,1,"span",15),a(),b(7,vve,4,3,"div",16)(8,xve,6,4,"div",16),a()}if(n&2){let e=p();c(4),m("ngIf",e.isNewEmployee),c(),m("ngIf",!e.isNewEmployee),c(),m("ngIf",!e.isNewEmployee),c(),m("ngIf",!e.isNewEmployee),c(),m("ngIf",e.isNewEmployee)}}function Cve(n,t){if(n&1){let e=F();o(0,"div",27)(1,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("personal"))}),l(2,"Personal Info"),a(),o(3,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("employment"))}),l(4,"Employment"),a(),o(5,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("bank"))}),l(6,"Bank Details"),a(),o(7,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("salary"))}),l(8,"Salary"),a(),o(9,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("ctcHistory"))}),l(10,"CTC History"),a(),o(11,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("assets"))}),l(12,"Assets"),a(),o(13,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("documents"))}),l(14,"Documents"),a(),o(15,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("leave"))}),l(16,"Leave"),a(),o(17,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("recruitment"))}),l(18,"Recruitment History"),a(),o(19,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("payroll"))}),l(20,"Payroll"),a(),o(21,"button",28),x("click",function(){g(e);let r=p();return f(r.setTab("timesheet"))}),l(22,"Timesheet"),a()()}if(n&2){let e=p();c(),ie("active",e.activeTab==="personal"),c(2),ie("active",e.activeTab==="employment"),c(2),ie("active",e.activeTab==="bank")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="salary")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="ctcHistory")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="assets")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="documents")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="leave")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="recruitment")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="payroll")("disabled",e.isNewEmployee),c(2),ie("active",e.activeTab==="timesheet")("disabled",e.isNewEmployee)}}function bve(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",30)(2,"h3"),l(3,"Basic Information"),a(),o(4,"div",31)(5,"div",32)(6,"label"),l(7,"Employee Code *"),a(),o(8,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.employeeCode,r)||(s.employee.employeeCode=r),f(r)}),a()(),o(9,"div",32)(10,"label"),l(11,"First Name *"),a(),o(12,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.firstName,r)||(s.employee.firstName=r),f(r)}),a()(),o(13,"div",32)(14,"label"),l(15,"Middle Name"),a(),o(16,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.middleName,r)||(s.employee.middleName=r),f(r)}),a()(),o(17,"div",32)(18,"label"),l(19,"Last Name *"),a(),o(20,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.lastName,r)||(s.employee.lastName=r),f(r)}),a()(),o(21,"div",32)(22,"label"),l(23,"Date of Birth"),a(),o(24,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.dateOfBirth,r)||(s.employee.dateOfBirth=r),f(r)}),a()(),o(25,"div",32)(26,"label"),l(27,"Gender"),a(),o(28,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.gender,r)||(s.employee.gender=r),f(r)}),o(29,"option",36),l(30,"Select"),a(),o(31,"option",37),l(32,"Male"),a(),o(33,"option",38),l(34,"Female"),a(),o(35,"option",39),l(36,"Other"),a()()(),o(37,"div",32)(38,"label"),l(39,"Marital Status"),a(),o(40,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.maritalStatus,r)||(s.employee.maritalStatus=r),f(r)}),o(41,"option",36),l(42,"Select"),a(),o(43,"option",40),l(44,"Single"),a(),o(45,"option",41),l(46,"Married"),a(),o(47,"option",42),l(48,"Divorced"),a(),o(49,"option",43),l(50,"Widowed"),a()()(),o(51,"div",32)(52,"label"),l(53,"Blood Group"),a(),o(54,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.bloodGroup,r)||(s.employee.bloodGroup=r),f(r)}),o(55,"option",36),l(56,"Select"),a(),o(57,"option",44),l(58,"A+"),a(),o(59,"option",45),l(60,"A-"),a(),o(61,"option",46),l(62,"B+"),a(),o(63,"option",47),l(64,"B-"),a(),o(65,"option",48),l(66,"AB+"),a(),o(67,"option",49),l(68,"AB-"),a(),o(69,"option",50),l(70,"O+"),a(),o(71,"option",51),l(72,"O-"),a()()()()(),o(73,"div",30)(74,"h3"),l(75,"Identification & Work Authorization"),a(),o(76,"div",31)(77,"div",32)(78,"label"),l(79,"SSN"),a(),o(80,"input",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.ssn,r)||(s.employee.ssn=r),f(r)}),a()(),o(81,"div",32)(82,"label"),l(83,"National ID"),a(),o(84,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.nationalId,r)||(s.employee.nationalId=r),f(r)}),a()(),o(85,"div",32)(86,"label"),l(87,"Citizenship"),a(),o(88,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.citizenship,r)||(s.employee.citizenship=r),f(r)}),a()(),o(89,"div",32)(90,"label"),l(91,"Nationality"),a(),o(92,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.nationality,r)||(s.employee.nationality=r),f(r)}),a()(),o(93,"div",32)(94,"label"),l(95,"Passport Number"),a(),o(96,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.passportNumber,r)||(s.employee.passportNumber=r),f(r)}),a()(),o(97,"div",32)(98,"label"),l(99,"Passport Expiry"),a(),o(100,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.passportExpiry,r)||(s.employee.passportExpiry=r),f(r)}),a()(),o(101,"div",32)(102,"label"),l(103,"Visa Type"),a(),o(104,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.visaType,r)||(s.employee.visaType=r),f(r)}),o(105,"option",36),l(106,"Select"),a(),o(107,"option",53),l(108,"H-1B"),a(),o(109,"option",54),l(110,"L-1"),a(),o(111,"option",55),l(112,"F-1 OPT"),a(),o(113,"option",56),l(114,"F-1 CPT"),a(),o(115,"option",57),l(116,"H-4 EAD"),a(),o(117,"option",58),l(118,"Green Card"),a(),o(119,"option",59),l(120,"US Citizen"),a(),o(121,"option",60),l(122,"TN Visa"),a(),o(123,"option",61),l(124,"E-2"),a(),o(125,"option",39),l(126,"Other"),a()()(),o(127,"div",32)(128,"label"),l(129,"Visa Expiry"),a(),o(130,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.visaExpiry,r)||(s.employee.visaExpiry=r),f(r)}),a()(),o(131,"div",32)(132,"label"),l(133,"I-9 Status"),a(),o(134,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.i9Status,r)||(s.employee.i9Status=r),f(r)}),o(135,"option",36),l(136,"Select"),a(),o(137,"option",62),l(138,"Pending"),a(),o(139,"option",63),l(140,"Completed"),a(),o(141,"option",64),l(142,"Re-verified"),a(),o(143,"option",65),l(144,"Expired"),a()()(),o(145,"div",32)(146,"label"),l(147,"I-9 Expiry Date"),a(),o(148,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.i9ExpiryDate,r)||(s.employee.i9ExpiryDate=r),f(r)}),a()(),o(149,"div",32)(150,"label"),l(151,"Work Authorization Type"),a(),o(152,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.workAuthorizationType,r)||(s.employee.workAuthorizationType=r),f(r)}),o(153,"option",36),l(154,"Select"),a(),o(155,"option",59),l(156,"US Citizen"),a(),o(157,"option",66),l(158,"Permanent Resident"),a(),o(159,"option",67),l(160,"Work Visa"),a(),o(161,"option",68),l(162,"EAD"),a(),o(163,"option",39),l(164,"Other"),a()()()()(),o(165,"div",30)(166,"h3"),l(167,"Contact Information"),a(),o(168,"div",31)(169,"div",32)(170,"label"),l(171,"Email *"),a(),o(172,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.email,r)||(s.employee.email=r),f(r)}),a()(),o(173,"div",32)(174,"label"),l(175,"Phone"),a(),o(176,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.phone,r)||(s.employee.phone=r),f(r)}),a()(),o(177,"div",32)(178,"label"),l(179,"Mobile"),a(),o(180,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.mobile,r)||(s.employee.mobile=r),f(r)}),a()()()(),o(181,"div",30)(182,"h3"),l(183,"Permanent Address"),a(),o(184,"div",31)(185,"div",70)(186,"label"),l(187,"Street Address"),a(),o(188,"textarea",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.permanentAddress,r)||(s.employee.permanentAddress=r),f(r)}),a()(),o(189,"div",32)(190,"label"),l(191,"City"),a(),o(192,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.permanentCity,r)||(s.employee.permanentCity=r),f(r)}),a()(),o(193,"div",32)(194,"label"),l(195,"State"),a(),o(196,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.permanentState,r)||(s.employee.permanentState=r),f(r)}),a()(),o(197,"div",32)(198,"label"),l(199,"Country"),a(),o(200,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.permanentCountry,r)||(s.employee.permanentCountry=r),f(r)}),a()(),o(201,"div",32)(202,"label"),l(203,"Zip Code"),a(),o(204,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.permanentZipCode,r)||(s.employee.permanentZipCode=r),f(r)}),a()()()(),o(205,"div",30)(206,"h3"),l(207,"Current Address"),a(),o(208,"div",31)(209,"div",70)(210,"label"),l(211,"Street Address"),a(),o(212,"textarea",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.currentAddress,r)||(s.employee.currentAddress=r),f(r)}),a()(),o(213,"div",32)(214,"label"),l(215,"City"),a(),o(216,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.currentCity,r)||(s.employee.currentCity=r),f(r)}),a()(),o(217,"div",32)(218,"label"),l(219,"State"),a(),o(220,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.currentState,r)||(s.employee.currentState=r),f(r)}),a()(),o(221,"div",32)(222,"label"),l(223,"Country"),a(),o(224,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.currentCountry,r)||(s.employee.currentCountry=r),f(r)}),a()(),o(225,"div",32)(226,"label"),l(227,"Zip Code"),a(),o(228,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.currentZipCode,r)||(s.employee.currentZipCode=r),f(r)}),a()()()(),o(229,"div",30)(230,"h3"),l(231,"Emergency Contact"),a(),o(232,"div",31)(233,"div",32)(234,"label"),l(235,"Contact Name *"),a(),o(236,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.emergencyContactName,r)||(s.employee.emergencyContactName=r),f(r)}),a()(),o(237,"div",32)(238,"label"),l(239,"Contact Phone *"),a(),o(240,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.emergencyContactPhone,r)||(s.employee.emergencyContactPhone=r),f(r)}),a()(),o(241,"div",32)(242,"label"),l(243,"Relationship *"),a(),o(244,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.emergencyContactRelation,r)||(s.employee.emergencyContactRelation=r),f(r)}),a()()()()()}if(n&2){let e=p();c(8),ie("readonly-field",!e.isNewEmployee),M("ngModel",e.employee.employeeCode),m("disabled",!e.isNewEmployee||!e.isEditMode),c(4),M("ngModel",e.employee.firstName),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.middleName),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.lastName),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.dateOfBirth),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.gender),m("disabled",!e.isEditMode),c(12),M("ngModel",e.employee.maritalStatus),m("disabled",!e.isEditMode),c(14),M("ngModel",e.employee.bloodGroup),m("disabled",!e.isEditMode),c(26),M("ngModel",e.employee.ssn),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.nationalId),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.citizenship),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.nationality),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.passportNumber),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.passportExpiry),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.visaType),m("disabled",!e.isEditMode),c(26),M("ngModel",e.employee.visaExpiry),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.i9Status),m("disabled",!e.isEditMode),c(14),M("ngModel",e.employee.i9ExpiryDate),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.workAuthorizationType),m("disabled",!e.isEditMode),c(20),M("ngModel",e.employee.email),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.phone),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.mobile),m("disabled",!e.isEditMode),c(8),M("ngModel",e.employee.permanentAddress),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.permanentCity),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.permanentState),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.permanentCountry),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.permanentZipCode),m("disabled",!e.isEditMode),c(8),M("ngModel",e.employee.currentAddress),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.currentCity),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.currentState),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.currentCountry),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.currentZipCode),m("disabled",!e.isEditMode),c(8),M("ngModel",e.employee.emergencyContactName),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.emergencyContactPhone),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.emergencyContactRelation),m("disabled",!e.isEditMode)}}function Mve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function Sve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.title)}}function Pve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function wve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.title)}}function Eve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function Ove(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function Tve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function kve(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),Ge("",e.firstName," ",e.lastName)}}function Ive(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",30)(2,"h3"),l(3,"Organization Details"),a(),o(4,"div",31)(5,"div",32)(6,"label"),l(7,"Department"),a(),o(8,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.department,r)||(s.employee.department=r),f(r)}),o(9,"option",74),l(10,"Select"),a(),b(11,Mve,2,2,"option",75),a()(),o(12,"div",32)(13,"label"),l(14,"Designation"),a(),o(15,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.designation,r)||(s.employee.designation=r),f(r)}),o(16,"option",74),l(17,"Select"),a(),b(18,Sve,2,2,"option",75),a()(),o(19,"div",32)(20,"label"),l(21,"Grade"),a(),o(22,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.grade,r)||(s.employee.grade=r),f(r)}),o(23,"option",74),l(24,"Select"),a(),b(25,Pve,2,2,"option",75),a()(),o(26,"div",32)(27,"label"),l(28,"Job Role"),a(),o(29,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.jobRole,r)||(s.employee.jobRole=r),f(r)}),o(30,"option",74),l(31,"Select"),a(),b(32,wve,2,2,"option",75),a()(),o(33,"div",32)(34,"label"),l(35,"Location"),a(),o(36,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.location,r)||(s.employee.location=r),f(r)}),o(37,"option",74),l(38,"Select"),a(),b(39,Eve,2,2,"option",75),a()(),o(40,"div",32)(41,"label"),l(42,"Cost Center"),a(),o(43,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.costCenter,r)||(s.employee.costCenter=r),f(r)}),o(44,"option",74),l(45,"Select"),a(),b(46,Ove,2,2,"option",75),a()(),o(47,"div",32)(48,"label"),l(49,"Expense Center"),a(),o(50,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.expenseCenter,r)||(s.employee.expenseCenter=r),f(r)}),o(51,"option",74),l(52,"Select"),a(),b(53,Tve,2,2,"option",75),a()(),o(54,"div",32)(55,"label"),l(56,"Reporting Manager"),a(),o(57,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.reportingManager,r)||(s.employee.reportingManager=r),f(r)}),o(58,"option",74),l(59,"Select"),a(),b(60,kve,2,3,"option",75),a()()()(),o(61,"div",30)(62,"h3"),l(63,"Employment Details"),a(),o(64,"div",31)(65,"div",32)(66,"label"),l(67,"Employment Type"),a(),o(68,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.employmentType,r)||(s.employee.employmentType=r),f(r)}),o(69,"option",76),l(70,"Full Time"),a(),o(71,"option",77),l(72,"Part Time"),a(),o(73,"option",78),l(74,"W-2 Employee"),a(),o(75,"option",79),l(76,"1099 Contractor"),a(),o(77,"option",80),l(78,"Union Employee"),a(),o(79,"option",81),l(80,"Contract"),a(),o(81,"option",82),l(82,"Intern"),a(),o(83,"option",83),l(84,"Consultant"),a()()(),o(85,"div",32)(86,"label"),l(87,"Employment Status"),a(),o(88,"select",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.employmentStatus,r)||(s.employee.employmentStatus=r),f(r)}),o(89,"option",84),l(90,"Probation"),a(),o(91,"option",85),l(92,"Confirmed"),a(),o(93,"option",86),l(94,"Notice Period"),a(),o(95,"option",87),l(96,"Resigned"),a(),o(97,"option",88),l(98,"Terminated"),a()()(),o(99,"div",32)(100,"label"),l(101,"Joining Date"),a(),o(102,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.joiningDate,r)||(s.employee.joiningDate=r),f(r)}),a()(),o(103,"div",32)(104,"label"),l(105,"Confirmation Date"),a(),o(106,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.confirmationDate,r)||(s.employee.confirmationDate=r),f(r)}),a()(),o(107,"div",32)(108,"label"),l(109,"Probation Period (Months)"),a(),o(110,"input",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.probationMonths,r)||(s.employee.probationMonths=r),f(r)}),a()(),o(111,"div",32)(112,"label"),l(113,"Notice Period (Days)"),a(),o(114,"input",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.noticePeriodDays,r)||(s.employee.noticePeriodDays=r),f(r)}),a()(),o(115,"div",32)(116,"label"),l(117,"Resignation Date"),a(),o(118,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.resignationDate,r)||(s.employee.resignationDate=r),f(r)}),a()(),o(119,"div",32)(120,"label"),l(121,"Last Working Date"),a(),o(122,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.lastWorkingDate,r)||(s.employee.lastWorkingDate=r),f(r)}),a()(),o(123,"div",32)(124,"label"),l(125,"Status"),a(),o(126,"label",90)(127,"input",91),S("ngModelChange",function(r){g(e);let s=p();return P(s.employee.active,r)||(s.employee.active=r),f(r)}),a(),l(128," Active "),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.employee.department),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.departments),c(4),M("ngModel",e.employee.designation),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.designations),c(4),M("ngModel",e.employee.grade),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.grades),c(4),M("ngModel",e.employee.jobRole),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.jobRoles),c(4),M("ngModel",e.employee.location),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.locations),c(4),M("ngModel",e.employee.costCenter),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.costCenters),c(4),M("ngModel",e.employee.expenseCenter),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.expenseCenters),c(4),M("ngModel",e.employee.reportingManager),m("compareWith",e.compareById)("disabled",!e.isEditMode),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(8),M("ngModel",e.employee.employmentType),m("disabled",!e.isEditMode),c(20),M("ngModel",e.employee.employmentStatus),m("disabled",!e.isEditMode),c(14),M("ngModel",e.employee.joiningDate),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.confirmationDate),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.probationMonths),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.noticePeriodDays),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.resignationDate),m("disabled",!e.isEditMode),c(4),M("ngModel",e.employee.lastWorkingDate),m("disabled",!e.isEditMode),c(5),M("ngModel",e.employee.active),m("disabled",!e.isEditMode)}}function Dve(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",99),l(13),a()(),o(14,"td")(15,"button",100),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openBankModal(r))}),y(16,"i",23),a(),o(17,"button",101),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteBankDetail(r))}),y(18,"i",102),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(2),_(e.bankName),c(2),_(e.accountHolderName||"-"),c(2),_(i.maskAccountNumber(e.accountNumber)),c(2),_(e.accountType==="CHECKING"?"Checking Account":e.accountType==="SAVINGS"?"Savings":e.accountType),c(2),_(i.maskAccountNumber(e.routingNumber)),c(2),ie("badge-primary",e.isPrimary),c(),_(e.isPrimary?"Yes":"No")}}function Ave(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Bank Name"),a(),o(5,"th"),l(6,"Account Holder Name"),a(),o(7,"th"),l(8,"Account Number"),a(),o(9,"th"),l(10,"Account Type"),a(),o(11,"th"),l(12,"Routing Number"),a(),o(13,"th"),l(14,"Primary"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,Dve,19,8,"tr",98),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.bankDetails)}}function Rve(n,t){n&1&&(o(0,"p",103),l(1,"No bank details added"),a())}function Fve(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Bank Details"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openBankModal())}),y(5,"i",94),l(6," Add Bank "),a()(),b(7,Ave,19,1,"table",95)(8,Rve,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.bankDetails.length>0),c(),m("ngIf",e.bankDetails.length===0)}}function Nve(n,t){n&1&&(o(0,"span",106),l(1,"Current"),a())}function Lve(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),Le(5,"number"),a(),o(6,"td"),l(7),Le(8,"number"),a(),o(9,"td"),l(10),Le(11,"number"),a(),o(12,"td"),l(13),Le(14,"number"),a(),o(15,"td"),l(16),Le(17,"number"),a(),o(18,"td"),l(19),Le(20,"number"),a(),o(21,"td"),l(22),Le(23,"number"),a(),o(24,"td"),b(25,Nve,2,0,"span",105),a()()),n&2){let e=t.$implicit;ie("current-row",e.isCurrent),c(2),_(e.effectiveFrom),c(2),_(xn(5,11,e.basicSalary)),c(3),_(xn(8,13,e.hraAmount)),c(3),_(xn(11,15,e.grossSalary)),c(3),_(xn(14,17,e.otherDeductions||0)),c(3),_(xn(17,19,e.netSalary)),c(3),_(xn(20,21,e.ctcAnnual)),c(3),_(rt(23,23,e.hourlyRate,"1.2-2")),c(3),m("ngIf",e.isCurrent)}}function Vve(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Effective From"),a(),o(5,"th"),l(6,"Basic Salary"),a(),o(7,"th"),l(8,"HRA"),a(),o(9,"th"),l(10,"Gross"),a(),o(11,"th"),l(12,"Deductions"),a(),o(13,"th"),l(14,"Net"),a(),o(15,"th"),l(16,"CTC"),a(),o(17,"th"),l(18,"Hourly Rate"),a(),o(19,"th"),l(20,"Current"),a()()(),o(21,"tbody"),b(22,Lve,26,26,"tr",104),a()()),n&2){let e=p(2);c(22),m("ngForOf",e.salaryHistory)}}function Bve(n,t){n&1&&(o(0,"p",103),l(1,"No salary records"),a())}function Uve(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Salary History"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openSalaryModal())}),y(5,"i",94),l(6," Add Salary Revision "),a()(),b(7,Vve,23,1,"table",95)(8,Bve,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.salaryHistory.length>0),c(),m("ngIf",e.salaryHistory.length===0)}}function jve(n,t){n&1&&(o(0,"div",109),y(1,"i",110),l(2," Save employee first to add CTC history records. "),a())}function Wve(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),Le(9,"number"),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",111),l(14),a()(),o(15,"td"),l(16),a()()),n&2){let e=t.$implicit,i=t.index,r=p(3);ie("current-row",e.isCurrent),c(2),D("v",r.salaryHistory.length-i),c(2),_(e.effectiveFrom),c(2),_(e.effectiveTo||"-"),c(2),_(rt(9,10,e.ctcAnnual,"1.0-0")),c(3),_(r.getPayFrequencyLabel(e.payFrequency)),c(2),m("ngClass",jw(13,sve,e.changeReason==="PROMOTION",e.changeReason==="INCREMENT",e.changeReason==="REVISION"||e.changeReason==="NEW_HIRE",e.changeReason==="TRANSFER"||e.changeReason==="CORRECTION")),c(),_(r.getChangeReasonLabel(e.changeReason)),c(2),_(e.remarks||"-")}}function zve(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Version"),a(),o(5,"th"),l(6,"Effective From"),a(),o(7,"th"),l(8,"Effective To"),a(),o(9,"th"),l(10,"CTC (Annual)"),a(),o(11,"th"),l(12,"Pay Frequency"),a(),o(13,"th"),l(14,"Change Reason"),a(),o(15,"th"),l(16,"Remarks"),a()()(),o(17,"tbody"),b(18,Wve,17,18,"tr",104),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.salaryHistory)}}function qve(n,t){n&1&&(o(0,"p",103),l(1,"No CTC history records"),a())}function Hve(n,t){if(n&1&&(o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"CTC History"),a(),o(4,"p",107),l(5,"Version-wise salary history with change justification"),a()(),b(6,jve,3,0,"div",108)(7,zve,19,1,"table",95)(8,qve,2,0,"p",96),a()),n&2){let e=p();c(6),m("ngIf",e.isNewEmployee),c(),m("ngIf",e.salaryHistory.length>0&&!e.isNewEmployee),c(),m("ngIf",e.salaryHistory.length===0&&!e.isNewEmployee)}}function Gve(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"button",100),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openEducationModal(r))}),y(15,"i",23),a(),o(16,"button",101),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteEducation(r))}),y(17,"i",102),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.qualification),c(2),_(e.institution),c(2),_(e.university),c(2),_(e.specialization),c(2),_(e.yearOfPassing),c(2),_(e.percentage?e.percentage+"%":e.grade)}}function $ve(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Qualification"),a(),o(5,"th"),l(6,"Institution"),a(),o(7,"th"),l(8,"University"),a(),o(9,"th"),l(10,"Specialization"),a(),o(11,"th"),l(12,"Year"),a(),o(13,"th"),l(14,"Percentage/Grade"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,Gve,18,6,"tr",98),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.education)}}function Yve(n,t){n&1&&(o(0,"p",103),l(1,"No education records"),a())}function Jve(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Educational Qualifications"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openEducationModal())}),y(5,"i",94),l(6," Add Education "),a()(),b(7,$ve,19,1,"table",95)(8,Yve,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.education.length>0),c(),m("ngIf",e.education.length===0)}}function Kve(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"button",100),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openExperienceModal(r))}),y(15,"i",23),a(),o(16,"button",101),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteExperience(r))}),y(17,"i",102),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.companyName),c(2),_(e.designation),c(2),_(e.fromDate),c(2),_(e.toDate?e.toDate:"Present"),c(2),_(e.location),c(2),_(e.lastSalary)}}function Qve(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Company"),a(),o(5,"th"),l(6,"Designation"),a(),o(7,"th"),l(8,"From"),a(),o(9,"th"),l(10,"To"),a(),o(11,"th"),l(12,"Location"),a(),o(13,"th"),l(14,"Last Salary"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,Kve,18,6,"tr",98),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.experience)}}function Xve(n,t){n&1&&(o(0,"p",103),l(1,"No experience records"),a())}function Zve(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Work Experience"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openExperienceModal())}),y(5,"i",94),l(6," Add Experience "),a()(),b(7,Qve,19,1,"table",95)(8,Xve,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.experience.length>0),c(),m("ngIf",e.experience.length===0)}}function exe(n,t){if(n&1){let e=F();o(0,"button",114),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.approveAsset(r,"APPROVED"))}),y(1,"i",115),a()}}function txe(n,t){if(n&1){let e=F();o(0,"button",116),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.approveAsset(r,"REJECTED"))}),y(1,"i",117),a()}}function nxe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",111),l(13),a()(),o(14,"td"),b(15,exe,2,0,"button",112)(16,txe,2,0,"button",113),o(17,"button",100),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openAssetModal(r))}),y(18,"i",23),a(),o(19,"button",101),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteAsset(r))}),y(20,"i",102),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.assetType),c(2),_(e.assetName),c(2),_(e.assetCode||"-"),c(2),_(e.serialNumber||"-"),c(2),_(e.issueDate||"-"),c(2),m("ngClass",Ba(9,lve,e.approvalStatus==="PENDING",e.approvalStatus==="APPROVED",e.approvalStatus==="REJECTED")),c(),_(e.approvalStatus),c(2),m("ngIf",e.approvalStatus==="PENDING"),c(),m("ngIf",e.approvalStatus==="PENDING")}}function ixe(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Asset Type"),a(),o(5,"th"),l(6,"Name"),a(),o(7,"th"),l(8,"Asset Code"),a(),o(9,"th"),l(10,"Serial Number"),a(),o(11,"th"),l(12,"Issue Date"),a(),o(13,"th"),l(14,"Status"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,nxe,21,13,"tr",98),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.assets)}}function rxe(n,t){n&1&&(o(0,"p",103),l(1,"No assets assigned"),a())}function oxe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Assigned Assets"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openAssetModal())}),y(5,"i",94),l(6," Add Asset "),a()(),b(7,ixe,19,1,"table",95)(8,rxe,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.assets.length>0),c(),m("ngIf",e.assets.length===0)}}function axe(n,t){n&1&&(o(0,"div",8),y(1,"i",120),l(2," Loading document checklist... "),a())}function sxe(n,t){n&1&&(o(0,"span",132),l(1,"*"),a())}function lxe(n,t){n&1&&y(0,"i",134)}function cxe(n,t){if(n&1&&(o(0,"span"),l(1),b(2,lxe,1,0,"i",133),a()),n&2){let e=p().$implicit,i=p(4);ie("text-danger",i.getDocumentUploadStatus(e)==="EXPIRED"),c(),D(" ",e.expiryDate," "),c(),m("ngIf",i.getDocumentUploadStatus(e)==="EXPIRED")}}function dxe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function pxe(n,t){if(n&1&&(o(0,"a",135),y(1,"i",25),l(2),a()),n&2){let e=p().$implicit;m("href",e.fileUrl,Cr),c(),m("ngClass",e.mimeType!=null&&e.mimeType.includes("pdf")?"fa-file-pdf":"fa-file-image"),c(),D(" ",e.fileName," ")}}function mxe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function uxe(n,t){if(n&1){let e=F();o(0,"button",136),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.openDocumentModalForType(r))}),y(1,"i",137),l(2," Upload "),a()}}function gxe(n,t){if(n&1){let e=F();o(0,"button",141),x("click",function(){g(e);let r=p(2).$implicit,s=p(4);return f(s.verifyDocumentById(r.documentId,"VERIFIED"))}),y(1,"i",115),a()}}function fxe(n,t){if(n&1){let e=F();o(0,"button",116),x("click",function(){g(e);let r=p(2).$implicit,s=p(4);return f(s.verifyDocumentById(r.documentId,"REJECTED"))}),y(1,"i",117),a()}}function hxe(n,t){if(n&1){let e=F();on(0),b(1,gxe,2,0,"button",138)(2,fxe,2,0,"button",113),o(3,"button",139),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.editDocumentFromChecklist(r))}),y(4,"i",23),a(),o(5,"button",140),x("click",function(){g(e);let r=p().$implicit,s=p(4);return f(s.deleteDocumentById(r.documentId))}),y(6,"i",102),a(),an()}if(n&2){let e=p().$implicit;c(),m("ngIf",e.verificationStatus==="PENDING"),c(),m("ngIf",e.verificationStatus==="PENDING")}}function _xe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),b(3,sxe,2,0,"span",128),a(),o(4,"td")(5,"span",111),l(6),a()(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),b(12,cxe,3,4,"span",129)(13,dxe,2,0,"span",14),a(),o(14,"td"),b(15,pxe,3,3,"a",130)(16,mxe,2,0,"span",14),a(),o(17,"td")(18,"span",111),l(19),a()(),o(20,"td"),b(21,uxe,3,0,"button",131)(22,hxe,7,2,"ng-container",14),a()()),n&2){let e=t.$implicit,i=p(4);ie("mandatory-row",e.isMandatory)("expired-row",i.getDocumentUploadStatus(e)==="EXPIRED"),c(2),D(" ",e.name," "),c(),m("ngIf",e.isMandatory),c(2),m("ngClass",e.isMandatory?"badge-danger":"badge-secondary"),c(),D(" ",e.isMandatory?"Required":"Optional"," "),c(2),_(e.documentNumber||"-"),c(2),_(e.issueDate||"-"),c(2),m("ngIf",e.expiryDate),c(),m("ngIf",!e.expiryDate),c(2),m("ngIf",e.fileName),c(),m("ngIf",!e.fileName),c(2),m("ngClass",i.getDocumentStatusBadgeClass(i.getDocumentUploadStatus(e))),c(),D(" ",i.getDocumentUploadStatus(e)==="NOT_UPLOADED"?"Not Uploaded":i.getDocumentUploadStatus(e)==="UPLOADED"?"Uploaded":i.getDocumentUploadStatus(e)==="APPROVED"?"Approved":i.getDocumentUploadStatus(e)==="REJECTED"?"Rejected":i.getDocumentUploadStatus(e)==="EXPIRED"?"Expired":"Unknown"," "),c(2),m("ngIf",e.status==="PENDING"),c(),m("ngIf",e.status==="UPLOADED")}}function vxe(n,t){if(n&1&&(o(0,"div",123)(1,"div",124)(2,"h4"),y(3,"i",125),l(4),a(),o(5,"span",126),l(6),a()(),o(7,"table",97)(8,"thead")(9,"tr")(10,"th"),l(11,"Document Type"),a(),o(12,"th"),l(13,"Mandatory"),a(),o(14,"th"),l(15,"Document Number"),a(),o(16,"th"),l(17,"Issue Date"),a(),o(18,"th"),l(19,"Expiry Date"),a(),o(20,"th"),l(21,"File"),a(),o(22,"th"),l(23,"Status"),a(),o(24,"th"),l(25,"Actions"),a()()(),o(26,"tbody"),b(27,_xe,23,18,"tr",127),a()()()),n&2){let e=t.$implicit;c(4),D(" ",e.name),c(2),Ge("",e.uploadedDocuments||0," / ",e.totalDocuments||0," uploaded"),c(21),m("ngForOf",e.documentTypes)}}function xxe(n,t){if(n&1&&(o(0,"div",121),b(1,vxe,28,4,"div",122),a()),n&2){let e=p(2);c(),m("ngForOf",e.documentChecklist)}}function yxe(n,t){n&1&&(o(0,"p",103),l(1,"No document types configured. Please configure document types in HR Settings."),a())}function Cxe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Employee Documents"),a(),o(4,"button",93),x("click",function(){g(e);let r=p();return f(r.openDocumentModal())}),y(5,"i",94),l(6," Add Document "),a()(),b(7,axe,3,0,"div",118)(8,xxe,2,1,"div",119)(9,yxe,2,0,"p",96),a()}if(n&2){let e=p();c(7),m("ngIf",e.loadingDocumentChecklist),c(),m("ngIf",e.documentChecklist.length>0&&!e.loadingDocumentChecklist),c(),m("ngIf",e.documentChecklist.length===0&&!e.loadingDocumentChecklist)}}function bxe(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function Mxe(n,t){if(n&1&&(o(0,"small",157),l(1),a()),n&2){let e=p().$implicit;c(),_(e.leaveType==null?null:e.leaveType.description)}}function Sxe(n,t){if(n&1){let e=F();o(0,"button",139),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.editLeaveBalance(r))}),y(1,"i",23),a()}}function Pxe(n,t){if(n&1){let e=F();o(0,"button",158),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.saveLeaveBalance(r))}),y(1,"i",159),a()}if(n&2){let e=p(4);m("disabled",e.savingLeaveBalance),c(),ie("fa-save",!e.savingLeaveBalance)("fa-spinner",e.savingLeaveBalance)("fa-spin",e.savingLeaveBalance)}}function wxe(n,t){if(n&1){let e=F();o(0,"button",160),x("click",function(){g(e);let r=p(4);return f(r.cancelLeaveBalanceEdit())}),y(1,"i",117),a()}}function Exe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a(),b(4,Mxe,2,1,"small",151),a(),o(5,"td",148)(6,"input",152),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.openingBalance,r)||(s.openingBalance=r),f(r)}),a()(),o(7,"td",148)(8,"input",152),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.credited,r)||(s.credited=r),f(r)}),a()(),o(9,"td",148)(10,"input",152),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.carryForward,r)||(s.carryForward=r),f(r)}),a()(),o(11,"td",148),l(12),a(),o(13,"td",153),l(14),a(),o(15,"td",150)(16,"strong"),l(17),a()(),o(18,"td"),b(19,Sxe,2,0,"button",154)(20,Pxe,2,7,"button",155)(21,wxe,2,0,"button",156),a()()}if(n&2){let e=t.$implicit,i=p(3);c(3),_(e.leaveType==null?null:e.leaveType.name),c(),m("ngIf",e.leaveType==null?null:e.leaveType.description),c(2),M("ngModel",e.openingBalance),m("disabled",!i.editingLeaveBalanceId||i.editingLeaveBalanceId!==e.id),c(2),M("ngModel",e.credited),m("disabled",!i.editingLeaveBalanceId||i.editingLeaveBalanceId!==e.id),c(2),M("ngModel",e.carryForward),m("disabled",!i.editingLeaveBalanceId||i.editingLeaveBalanceId!==e.id),c(2),_(e.used||0),c(2),_(e.pending||0),c(3),_(i.getLeaveAvailable(e)),c(2),m("ngIf",i.editingLeaveBalanceId!==e.id),c(),m("ngIf",i.editingLeaveBalanceId===e.id),c(),m("ngIf",i.editingLeaveBalanceId===e.id)}}function Oxe(n,t){if(n&1&&(o(0,"div",147)(1,"table",97)(2,"thead")(3,"tr")(4,"th"),l(5,"Leave Type"),a(),o(6,"th",148),l(7,"Opening Balance"),a(),o(8,"th",148),l(9,"Credited"),a(),o(10,"th",148),l(11,"Carry Forward"),a(),o(12,"th",148),l(13,"Used"),a(),o(14,"th",148),l(15,"Pending"),a(),o(16,"th",148),l(17,"Available"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,Exe,22,14,"tr",98),a(),o(22,"tfoot")(23,"tr",149)(24,"td")(25,"strong"),l(26,"Total"),a()(),o(27,"td",148)(28,"strong"),l(29),a()(),o(30,"td",148)(31,"strong"),l(32),a()(),o(33,"td",148)(34,"strong"),l(35),a()(),o(36,"td",148)(37,"strong"),l(38),a()(),o(39,"td",148)(40,"strong"),l(41),a()(),o(42,"td",150)(43,"strong"),l(44),a()(),y(45,"td"),a()()()()),n&2){let e=p(2);c(21),m("ngForOf",e.leaveBalances),c(8),_(e.getTotalOpening()),c(3),_(e.getTotalCredited()),c(3),_(e.getTotalCarryForward()),c(3),_(e.getTotalUsed()),c(3),_(e.getTotalPending()),c(3),_(e.getTotalAvailable())}}function Txe(n,t){if(n&1&&(o(0,"div",103),y(1,"i",161),o(2,"p"),l(3),a(),o(4,"p",162),l(5,'Click "Initialize Balances" to set up leave entitlements for this employee based on active leave types.'),a()()),n&2){let e=p(2);c(3),D("No leave balances found for ",e.leaveYear)}}function kxe(n,t){n&1&&(o(0,"div",8),y(1,"i",120),l(2," Loading leave balances... "),a())}function Ixe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Leave Balances"),a(),o(4,"div",18)(5,"select",142),S("ngModelChange",function(r){g(e);let s=p();return P(s.leaveYear,r)||(s.leaveYear=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.loadLeaveBalances())}),b(6,bxe,2,2,"option",143),a(),o(7,"button",24),x("click",function(){g(e);let r=p();return f(r.initializeLeaveBalances())}),y(8,"i",144),l(9),a()()(),b(10,Oxe,46,7,"div",145)(11,Txe,6,1,"div",96)(12,kxe,3,0,"div",118),a()}if(n&2){let e=p();c(5),M("ngModel",e.leaveYear),c(),m("ngForOf",e.availableYears),c(),m("disabled",e.initializingLeave),c(),ie("fa-spin",e.initializingLeave),c(),D(" ",e.initializingLeave?"Initializing...":"Initialize Balances"," "),c(),m("ngIf",e.leaveBalances.length>0),c(),m("ngIf",e.leaveBalances.length===0&&!e.loadingLeaveBalances),c(),m("ngIf",e.loadingLeaveBalances)}}function Dxe(n,t){n&1&&(o(0,"div",8),y(1,"i",120),l(2," Loading recruitment history... "),a())}function Axe(n,t){if(n&1&&(o(0,"div",167)(1,"div",168),y(2,"i",169),a(),o(3,"div",170)(4,"h4"),l(5,"Job Requisition"),a(),o(6,"div",171)(7,"p")(8,"strong"),l(9,"Requisition #:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Position:"),a(),l(14),a(),o(15,"p")(16,"strong"),l(17,"Department:"),a(),l(18),a(),o(19,"p")(20,"strong"),l(21,"Created:"),a(),l(22),a(),o(23,"span",172),l(24),a()()()()),n&2){let e=p(3);c(10),D(" ",e.recruitmentHistory.requisition.requisitionNumber),c(4),D(" ",e.recruitmentHistory.requisition.title),c(4),D(" ",e.recruitmentHistory.requisition.department==null?null:e.recruitmentHistory.requisition.department.name),c(4),D(" ",e.recruitmentHistory.requisition.createdAt),c(2),_(e.recruitmentHistory.requisition.status)}}function Rxe(n,t){if(n&1&&(o(0,"div",167)(1,"div",173),y(2,"i",174),a(),o(3,"div",170)(4,"h4"),l(5,"Job Posting"),a(),o(6,"div",171)(7,"p")(8,"strong"),l(9,"Title:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Posted:"),a(),l(14),a(),o(15,"p")(16,"strong"),l(17,"Closed:"),a(),l(18),a(),o(19,"p")(20,"strong"),l(21,"Applications Received:"),a(),l(22),a()()()()),n&2){let e=p(3);c(10),D(" ",e.recruitmentHistory.jobPosting.title),c(4),D(" ",e.recruitmentHistory.jobPosting.postedDate),c(4),D(" ",e.recruitmentHistory.jobPosting.closedDate),c(4),D(" ",e.recruitmentHistory.jobPosting.applicationCount)}}function Fxe(n,t){if(n&1&&(o(0,"div",167)(1,"div",175),y(2,"i",176),a(),o(3,"div",170)(4,"h4"),l(5,"Candidate Application"),a(),o(6,"div",171)(7,"p")(8,"strong"),l(9,"Name:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Applied:"),a(),l(14),a(),o(15,"p")(16,"strong"),l(17,"Source:"),a(),l(18),a(),o(19,"span",172),l(20),a()()()()),n&2){let e=p(3);c(10),Ge(" ",e.recruitmentHistory.candidate.firstName," ",e.recruitmentHistory.candidate.lastName),c(4),D(" ",e.recruitmentHistory.candidate.appliedDate),c(4),D(" ",e.recruitmentHistory.candidate.source),c(2),_(e.recruitmentHistory.candidate.status)}}function Nxe(n,t){if(n&1&&y(0,"i",189),n&2){let e=t.$implicit,i=p().$implicit;ie("filled",e<=i.rating)}}function Lxe(n,t){if(n&1&&(o(0,"p")(1,"strong"),l(2,"Feedback:"),a(),l(3),a()),n&2){let e=p().$implicit;c(3),D(" ",e.feedback)}}function Vxe(n,t){if(n&1&&(o(0,"div",182)(1,"div",183)(2,"span",184),l(3),a(),o(4,"span",185),l(5),a()(),o(6,"div",186)(7,"p")(8,"strong"),l(9,"Date:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Interviewer:"),a(),l(14),a(),o(15,"p")(16,"strong"),l(17,"Rating:"),a(),o(18,"span",187),b(19,Nxe,1,2,"i",188),a()(),o(20,"p")(21,"strong"),l(22,"Recommendation:"),a(),o(23,"span",111),l(24),a()(),b(25,Lxe,4,1,"p",14),a()()),n&2){let e=t.$implicit,i=p(4);c(3),D("Round ",e.round),c(2),_(i.getInterviewTypeLabel(e.type)),c(5),D(" ",e.scheduledDate),c(4),Ge(" ",e.interviewer==null?null:e.interviewer.firstName," ",e.interviewer==null?null:e.interviewer.lastName),c(5),m("ngForOf",na(9,cve)),c(4),m("ngClass",i.getRecommendationClass(e.recommendation)),c(),_(e.recommendation),c(),m("ngIf",e.feedback)}}function Bxe(n,t){if(n&1&&(o(0,"div",177)(1,"div",178),y(2,"i",179),a(),o(3,"div",170)(4,"h4"),l(5,"Interview Rounds"),a(),o(6,"div",180),b(7,Vxe,26,10,"div",181),a()()()),n&2){let e=p(3);c(7),m("ngForOf",e.recruitmentHistory.interviews)}}function Uxe(n,t){if(n&1&&(o(0,"div",167)(1,"div",190),y(2,"i",191),a(),o(3,"div",170)(4,"h4"),l(5,"Job Offer"),a(),o(6,"div",171)(7,"p")(8,"strong"),l(9,"Offer #:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Offered Salary:"),a(),l(14),Le(15,"number"),a(),o(16,"p")(17,"strong"),l(18,"Start Date:"),a(),l(19),a(),o(20,"p")(21,"strong"),l(22,"Accepted:"),a(),l(23),a(),o(24,"span",172),l(25),a()()()()),n&2){let e=p(3);c(10),D(" ",e.recruitmentHistory.offer.offerNumber),c(4),D(" ",xn(15,5,e.recruitmentHistory.offer.offeredSalary)),c(5),D(" ",e.recruitmentHistory.offer.joiningDate),c(4),D(" ",e.recruitmentHistory.offer.acceptedDate),c(2),_(e.recruitmentHistory.offer.status)}}function jxe(n,t){if(n&1&&(o(0,"div",167)(1,"div",192),y(2,"i",193),a(),o(3,"div",170)(4,"h4"),l(5,"Converted to Employee"),a(),o(6,"div",171)(7,"p")(8,"strong"),l(9,"Employee Code:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Joining Date:"),a(),l(14),a(),o(15,"span",106),l(16,"Active Employee"),a()()()()),n&2){let e=p(3);c(10),D(" ",e.employee.employeeCode),c(4),D(" ",e.recruitmentHistory.conversionDate)}}function Wxe(n,t){if(n&1&&(o(0,"div",164),b(1,Axe,25,5,"div",165)(2,Rxe,23,4,"div",165)(3,Fxe,21,5,"div",165)(4,Bxe,8,1,"div",166)(5,Uxe,26,7,"div",165)(6,jxe,17,2,"div",165),a()),n&2){let e=p(2);c(),m("ngIf",e.recruitmentHistory.requisition),c(),m("ngIf",e.recruitmentHistory.jobPosting),c(),m("ngIf",e.recruitmentHistory.candidate),c(),m("ngIf",e.recruitmentHistory.interviews&&e.recruitmentHistory.interviews.length>0),c(),m("ngIf",e.recruitmentHistory.offer),c(),m("ngIf",e.recruitmentHistory.conversionDate)}}function zxe(n,t){n&1&&(o(0,"p",103),l(1,"No recruitment history available for this employee"),a())}function qxe(n,t){if(n&1&&(o(0,"div",29)(1,"div",92)(2,"h3"),l(3,"Recruitment History"),a(),o(4,"p",107),l(5,"Complete hiring journey from requisition to onboarding"),a()(),b(6,Dxe,3,0,"div",118)(7,Wxe,7,6,"div",163)(8,zxe,2,0,"p",96),a()),n&2){let e=p();c(6),m("ngIf",e.loadingRecruitmentHistory),c(),m("ngIf",e.recruitmentHistory&&!e.loadingRecruitmentHistory),c(),m("ngIf",!e.recruitmentHistory&&!e.loadingRecruitmentHistory)}}function Hxe(n,t){n&1&&(o(0,"div",7),y(1,"i",120),l(2," Loading payroll data... "),a())}function Gxe(n,t){n&1&&(o(0,"div")(1,"p",103),l(2,"No payroll records found for this employee."),a()())}function $xe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"number"),a(),o(8,"td"),l(9),Le(10,"number"),a(),o(11,"td"),l(12),Le(13,"number"),a(),o(14,"td")(15,"span",111),l(16),a()(),o(17,"td"),l(18),Le(19,"date"),a()()),n&2){let e=t.$implicit;c(2),_((e.payrollRun==null?null:e.payrollRun.payrollRunNumber)||"-"),c(2),Ge("",e.payrollRun==null?null:e.payrollRun.periodStartDate," - ",e.payrollRun==null?null:e.payrollRun.periodEndDate),c(2),_(rt(7,9,e.grossPay,"1.2-2")),c(3),_(rt(10,12,e.totalTaxes,"1.2-2")),c(3),_(rt(13,15,e.netPay,"1.2-2")),c(3),m("ngClass",Ba(21,dve,e.status==="PROCESSED",e.status==="CALCULATED",e.status==="PENDING")),c(),_(e.status),c(2),_(rt(19,18,e.payrollRun==null?null:e.payrollRun.processedAt,"short"))}}function Yxe(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Pay Run #"),a(),o(5,"th"),l(6,"Period"),a(),o(7,"th"),l(8,"Gross Pay"),a(),o(9,"th"),l(10,"Taxes"),a(),o(11,"th"),l(12,"Net Pay"),a(),o(13,"th"),l(14,"Status"),a(),o(15,"th"),l(16,"Processed"),a()()(),o(17,"tbody"),b(18,$xe,20,25,"tr",98),a()()),n&2){let e=p(2);c(18),m("ngForOf",e.payrollRecords)}}function Jxe(n,t){n&1&&(o(0,"div")(1,"p",103),l(2,"No timesheets found for this employee."),a()())}function Kxe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",111),l(9),a()(),o(10,"td"),l(11),a()()),n&2){let e=t.$implicit;c(2),Ge("",e.periodStartDate," - ",e.periodEndDate),c(2),D("",e.totalRegularHours||0,"h"),c(2),D("",e.totalOvertimeHours||0,"h"),c(2),m("ngClass",Ba(8,DL,e.status==="APPROVED",e.status==="PENDING",e.status==="REJECTED")),c(),_(e.status),c(2),Ge("",(e.approvedBy==null?null:e.approvedBy.firstName)||"-"," ",(e.approvedBy==null?null:e.approvedBy.lastName)||"")}}function Qxe(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Period"),a(),o(5,"th"),l(6,"Hours"),a(),o(7,"th"),l(8,"Overtime"),a(),o(9,"th"),l(10,"Status"),a(),o(11,"th"),l(12,"Approved By"),a()()(),o(13,"tbody"),b(14,Kxe,12,12,"tr",98),a()()),n&2){let e=p(2);c(14),m("ngForOf",e.timesheets)}}function Xxe(n,t){if(n&1&&(o(0,"div",0)(1,"div",29)(2,"div",30)(3,"h3"),l(4,"Payroll Records"),a(),b(5,Hxe,3,0,"div",1)(6,Gxe,3,0,"div",14)(7,Yxe,19,1,"table",95),a(),o(8,"div",194)(9,"h3"),l(10,"Timesheets"),a(),b(11,Jxe,3,0,"div",14)(12,Qxe,15,1,"table",95),a()()()),n&2){let e=p();c(5),m("ngIf",e.loadingPayroll),c(),m("ngIf",!e.loadingPayroll&&e.payrollRecords.length===0),c(),m("ngIf",!e.loadingPayroll&&e.payrollRecords.length>0),c(4),m("ngIf",!e.loadingPayroll&&e.timesheets.length===0),c(),m("ngIf",e.timesheets.length>0)}}function Zxe(n,t){n&1&&(o(0,"div",7),y(1,"i",120),l(2," Loading timesheet data... "),a())}function eye(n,t){n&1&&(o(0,"div")(1,"p",103),l(2,"No attendance records found for this period."),a()())}function tye(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),Le(9,"number"),a(),o(10,"td"),l(11),Le(12,"number"),a(),o(13,"td")(14,"span",111),l(15),a()()()),n&2){let e=t.$implicit,i=p(3);c(2),_(e.attendanceDate),c(2),_(i.formatAttendanceTime(e.clockIn)),c(2),_(i.formatAttendanceTime(e.clockOut)),c(2),D("",rt(9,7,e.regularHours||0,"1.2-2"),"h"),c(3),D("",rt(12,10,e.overtimeHours||0,"1.2-2"),"h"),c(3),m("ngClass",Ba(13,DL,e.status==="PRESENT",e.status==="HALF_DAY",e.status==="ABSENT")),c(),_(e.status||"-")}}function nye(n,t){if(n&1&&(o(0,"table",97)(1,"thead")(2,"tr")(3,"th"),l(4,"Date"),a(),o(5,"th"),l(6,"Clock In"),a(),o(7,"th"),l(8,"Clock Out"),a(),o(9,"th"),l(10,"Regular Hours"),a(),o(11,"th"),l(12,"Overtime"),a(),o(13,"th"),l(14,"Status"),a()()(),o(15,"tbody"),b(16,tye,16,17,"tr",98),a(),o(17,"tfoot")(18,"tr",197)(19,"td",198)(20,"strong"),l(21,"TOTAL"),a()(),o(22,"td")(23,"strong"),l(24),Le(25,"number"),a()(),o(26,"td")(27,"strong"),l(28),Le(29,"number"),a()(),y(30,"td"),a()()()),n&2){let e=p(2);c(16),m("ngForOf",e.attendanceRecords),c(8),D("",rt(25,3,e.getTotalHours()-e.getTotalOvertimeHours(),"1.2-2"),"h"),c(4),D("",rt(29,6,e.getTotalOvertimeHours(),"1.2-2"),"h")}}function iye(n,t){if(n&1){let e=F();o(0,"div",0)(1,"div",29)(2,"div",30)(3,"div",92)(4,"h3"),l(5,"Weekly Timesheet"),a(),o(6,"div",18)(7,"button",24),x("click",function(){g(e);let r=p();return f(r.downloadTimesheetPdf())}),y(8,"i",25),l(9," Download PDF "),a()()(),o(10,"div",195)(11,"div",32)(12,"label"),l(13,"Week Start"),a(),o(14,"input",196),S("ngModelChange",function(r){g(e);let s=p();return P(s.weekStartDate,r)||(s.weekStartDate=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onWeekChange())}),a()(),o(15,"div",32)(16,"label"),l(17,"Week End"),a(),o(18,"input",196),S("ngModelChange",function(r){g(e);let s=p();return P(s.weekEndDate,r)||(s.weekEndDate=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onWeekChange())}),a()()(),b(19,Zxe,3,0,"div",1)(20,eye,3,0,"div",14)(21,nye,31,9,"table",95),a()()()}if(n&2){let e=p();c(7),m("disabled",e.downloadingPdf||!e.canDownloadPdf()),c(),m("ngClass",e.downloadingPdf?"fa-spinner fa-spin":"fa-file-pdf"),c(6),M("ngModel",e.weekStartDate),c(4),M("ngModel",e.weekEndDate),c(),m("ngIf",e.loadingAttendance),c(),m("ngIf",!e.loadingAttendance&&e.attendanceRecords.length===0),c(),m("ngIf",!e.loadingAttendance&&e.attendanceRecords.length>0)}}function rye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",200),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showBankModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",32)(9,"label"),l(10,"Bank Name *"),a(),o(11,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.bankName,r)||(s.editingBank.bankName=r),f(r)}),a()(),o(12,"div",32)(13,"label"),l(14,"Account Holder Name (As per bank records)"),a(),o(15,"input",205),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.accountHolderName,r)||(s.editingBank.accountHolderName=r),f(r)}),a()(),o(16,"div",32)(17,"label"),l(18,"Account Number *"),a(),o(19,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.accountNumber,r)||(s.editingBank.accountNumber=r),f(r)}),a()(),o(20,"div",32)(21,"label"),l(22,"Account Type *"),a(),o(23,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.accountType,r)||(s.editingBank.accountType=r),f(r)}),o(24,"option",36),l(25,"Select"),a(),o(26,"option",207),l(27,"Savings"),a(),o(28,"option",208),l(29,"Checking Account"),a()()(),o(30,"div",32)(31,"label"),l(32,"Routing Number"),a(),o(33,"input",209),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.routingNumber,r)||(s.editingBank.routingNumber=r),f(r)}),a()(),o(34,"div",32)(35,"label"),l(36,"Payment Method"),a(),o(37,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.paymentMethod,r)||(s.editingBank.paymentMethod=r),f(r)}),o(38,"option",36),l(39,"Select"),a(),o(40,"option",210),l(41,"Direct Deposit"),a(),o(42,"option",211),l(43,"Check"),a(),o(44,"option",212),l(45,"Wire Transfer"),a(),o(46,"option",213),l(47,"ADP"),a()()(),o(48,"div",32)(49,"label",90)(50,"input",214),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingBank.isPrimary,r)||(s.editingBank.isPrimary=r),f(r)}),a(),l(51," Primary Account "),a()()(),o(52,"div",215)(53,"button",26),x("click",function(){g(e);let r=p();return f(r.showBankModal=!1)}),l(54,"Cancel"),a(),o(55,"button",24),x("click",function(){g(e);let r=p();return f(r.saveBankDetail())}),l(56),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditingSubItem?"Edit":"Add"," Bank Detail"),c(7),M("ngModel",e.editingBank.bankName),c(4),M("ngModel",e.editingBank.accountHolderName),c(4),M("ngModel",e.editingBank.accountNumber),c(4),M("ngModel",e.editingBank.accountType),c(10),M("ngModel",e.editingBank.routingNumber),c(4),M("ngModel",e.editingBank.paymentMethod),c(13),M("ngModel",e.editingBank.isPrimary),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function oye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",216),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4,"Add Salary Revision"),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showSalaryModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",31)(9,"div",32)(10,"label"),l(11,"Effective From *"),a(),o(12,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.effectiveFrom,r)||(s.editingSalary.effectiveFrom=r),f(r)}),a()(),o(13,"div",32)(14,"label"),l(15,"Basic Salary (Annual) *"),a(),o(16,"input",218),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.basicSalary,r)||(s.editingSalary.basicSalary=r),f(r)}),x("input",function(){g(e);let r=p();return f(r.onBasicSalaryChange())}),a()(),o(17,"div",32)(18,"label"),l(19,"Hourly Rate (Auto-calculated)"),a(),o(20,"input",219),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.hourlyRate,r)||(s.editingSalary.hourlyRate=r),f(r)}),a()(),o(21,"div",32)(22,"label"),l(23,"HRA (House Rent Allowance)"),a(),o(24,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.hraAmount,r)||(s.editingSalary.hraAmount=r),f(r)}),a()(),o(25,"div",32)(26,"label"),l(27,"DA (Dearness Allowance)"),a(),o(28,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.daAmount,r)||(s.editingSalary.daAmount=r),f(r)}),a()(),o(29,"div",32)(30,"label"),l(31,"TA (Transport Allowance)"),a(),o(32,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.taAmount,r)||(s.editingSalary.taAmount=r),f(r)}),a()(),o(33,"div",32)(34,"label"),l(35,"Medical Allowance"),a(),o(36,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.medicalAllowance,r)||(s.editingSalary.medicalAllowance=r),f(r)}),a()(),o(37,"div",32)(38,"label"),l(39,"Special Allowance"),a(),o(40,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.specialAllowance,r)||(s.editingSalary.specialAllowance=r),f(r)}),a()(),o(41,"div",32)(42,"label"),l(43,"Other Allowances"),a(),o(44,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.otherAllowances,r)||(s.editingSalary.otherAllowances=r),f(r)}),a()(),o(45,"div",32)(46,"label"),l(47,"Other Deductions"),a(),o(48,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.otherDeductions,r)||(s.editingSalary.otherDeductions=r),f(r)}),a()(),o(49,"div",32)(50,"label"),l(51,"CTC (Annual)"),a(),o(52,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.ctcAnnual,r)||(s.editingSalary.ctcAnnual=r),f(r)}),a()(),o(53,"div",32)(54,"label"),l(55,"Pay Frequency"),a(),o(56,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.payFrequency,r)||(s.editingSalary.payFrequency=r),f(r)}),o(57,"option",36),l(58,"Select"),a(),o(59,"option",221),l(60,"Weekly"),a(),o(61,"option",222),l(62,"Bi-Weekly"),a(),o(63,"option",223),l(64,"Semi-Monthly"),a(),o(65,"option",224),l(66,"Monthly"),a()()(),o(67,"div",32)(68,"label"),l(69,"Change Reason"),a(),o(70,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.changeReason,r)||(s.editingSalary.changeReason=r),f(r)}),o(71,"option",36),l(72,"Select"),a(),o(73,"option",225),l(74,"New Hire"),a(),o(75,"option",226),l(76,"Promotion"),a(),o(77,"option",227),l(78,"Annual Increment"),a(),o(79,"option",228),l(80,"Salary Revision"),a(),o(81,"option",229),l(82,"Transfer"),a(),o(83,"option",230),l(84,"Correction"),a()()(),o(85,"div",70)(86,"label"),l(87,"Remarks"),a(),o(88,"textarea",231),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingSalary.remarks,r)||(s.editingSalary.remarks=r),f(r)}),a()()()(),o(89,"div",215)(90,"button",26),x("click",function(){g(e);let r=p();return f(r.showSalaryModal=!1)}),l(91,"Cancel"),a(),o(92,"button",24),x("click",function(){g(e);let r=p();return f(r.saveSalary())}),l(93),a()()()()}if(n&2){let e=p();c(12),M("ngModel",e.editingSalary.effectiveFrom),c(4),M("ngModel",e.editingSalary.basicSalary),c(4),M("ngModel",e.editingSalary.hourlyRate),c(4),M("ngModel",e.editingSalary.hraAmount),c(4),M("ngModel",e.editingSalary.daAmount),c(4),M("ngModel",e.editingSalary.taAmount),c(4),M("ngModel",e.editingSalary.medicalAllowance),c(4),M("ngModel",e.editingSalary.specialAllowance),c(4),M("ngModel",e.editingSalary.otherAllowances),c(4),M("ngModel",e.editingSalary.otherDeductions),c(4),M("ngModel",e.editingSalary.ctcAnnual),c(4),M("ngModel",e.editingSalary.payFrequency),c(14),M("ngModel",e.editingSalary.changeReason),c(18),M("ngModel",e.editingSalary.remarks),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function aye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",200),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showEducationModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",32)(9,"label"),l(10,"Qualification *"),a(),o(11,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.qualification,r)||(s.editingEducation.qualification=r),f(r)}),o(12,"option",36),l(13,"Select"),a(),o(14,"option",232),l(15,"10th Standard"),a(),o(16,"option",233),l(17,"12th Standard"),a(),o(18,"option",234),l(19,"Diploma"),a(),o(20,"option",235),l(21,"Bachelor's Degree"),a(),o(22,"option",236),l(23,"Master's Degree"),a(),o(24,"option",237),l(25,"PhD"),a(),o(26,"option",238),l(27,"Certification"),a()()(),o(28,"div",32)(29,"label"),l(30,"Institution *"),a(),o(31,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.institution,r)||(s.editingEducation.institution=r),f(r)}),a()(),o(32,"div",32)(33,"label"),l(34,"University"),a(),o(35,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.university,r)||(s.editingEducation.university=r),f(r)}),a()(),o(36,"div",32)(37,"label"),l(38,"Specialization"),a(),o(39,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.specialization,r)||(s.editingEducation.specialization=r),f(r)}),a()(),o(40,"div",32)(41,"label"),l(42,"Year of Passing"),a(),o(43,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.yearOfPassing,r)||(s.editingEducation.yearOfPassing=r),f(r)}),a()(),o(44,"div",32)(45,"label"),l(46,"Percentage"),a(),o(47,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.percentage,r)||(s.editingEducation.percentage=r),f(r)}),a()(),o(48,"div",32)(49,"label"),l(50,"Grade"),a(),o(51,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.grade,r)||(s.editingEducation.grade=r),f(r)}),a()(),o(52,"div",32)(53,"label"),l(54,"Remarks"),a(),o(55,"textarea",231),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingEducation.remarks,r)||(s.editingEducation.remarks=r),f(r)}),a()()(),o(56,"div",215)(57,"button",26),x("click",function(){g(e);let r=p();return f(r.showEducationModal=!1)}),l(58,"Cancel"),a(),o(59,"button",24),x("click",function(){g(e);let r=p();return f(r.saveEducation())}),l(60),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditingSubItem?"Edit":"Add"," Education"),c(7),M("ngModel",e.editingEducation.qualification),c(20),M("ngModel",e.editingEducation.institution),c(4),M("ngModel",e.editingEducation.university),c(4),M("ngModel",e.editingEducation.specialization),c(4),M("ngModel",e.editingEducation.yearOfPassing),c(4),M("ngModel",e.editingEducation.percentage),c(4),M("ngModel",e.editingEducation.grade),c(4),M("ngModel",e.editingEducation.remarks),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function sye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",200),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showExperienceModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",32)(9,"label"),l(10,"Company Name *"),a(),o(11,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.companyName,r)||(s.editingExperience.companyName=r),f(r)}),a()(),o(12,"div",32)(13,"label"),l(14,"Designation *"),a(),o(15,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.designation,r)||(s.editingExperience.designation=r),f(r)}),a()(),o(16,"div",32)(17,"label"),l(18,"From Date *"),a(),o(19,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.fromDate,r)||(s.editingExperience.fromDate=r),f(r)}),a()(),o(20,"div",32)(21,"label"),l(22,"To Date (leave blank if current)"),a(),o(23,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.toDate,r)||(s.editingExperience.toDate=r),f(r)}),a()(),o(24,"div",32)(25,"label"),l(26,"Location"),a(),o(27,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.location,r)||(s.editingExperience.location=r),f(r)}),a()(),o(28,"div",70)(29,"label"),l(30,"Responsibilities"),a(),o(31,"textarea",231),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.responsibilities,r)||(s.editingExperience.responsibilities=r),f(r)}),a()(),o(32,"div",32)(33,"label"),l(34,"Last Salary"),a(),o(35,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.lastSalary,r)||(s.editingExperience.lastSalary=r),f(r)}),a()(),o(36,"div",32)(37,"label"),l(38,"Reason for Leaving"),a(),o(39,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.reasonForLeaving,r)||(s.editingExperience.reasonForLeaving=r),f(r)}),a()(),o(40,"div",32)(41,"label"),l(42,"Reference Contact"),a(),o(43,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingExperience.referenceContact,r)||(s.editingExperience.referenceContact=r),f(r)}),a()()(),o(44,"div",215)(45,"button",26),x("click",function(){g(e);let r=p();return f(r.showExperienceModal=!1)}),l(46,"Cancel"),a(),o(47,"button",24),x("click",function(){g(e);let r=p();return f(r.saveExperience())}),l(48),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditingSubItem?"Edit":"Add"," Experience"),c(7),M("ngModel",e.editingExperience.companyName),c(4),M("ngModel",e.editingExperience.designation),c(4),M("ngModel",e.editingExperience.fromDate),c(4),M("ngModel",e.editingExperience.toDate),c(4),M("ngModel",e.editingExperience.location),c(4),M("ngModel",e.editingExperience.responsibilities),c(4),M("ngModel",e.editingExperience.lastSalary),c(4),M("ngModel",e.editingExperience.reasonForLeaving),c(4),M("ngModel",e.editingExperience.referenceContact),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function lye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",200),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showAssetModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",32)(9,"label"),l(10,"Asset Type *"),a(),o(11,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.assetType,r)||(s.editingAsset.assetType=r),f(r)}),o(12,"option",36),l(13,"Select"),a(),o(14,"option",239),l(15,"Laptop"),a(),o(16,"option",240),l(17,"Desktop"),a(),o(18,"option",241),l(19,"Mobile Phone"),a(),o(20,"option",242),l(21,"Monitor"),a(),o(22,"option",243),l(23,"Keyboard"),a(),o(24,"option",244),l(25,"Mouse"),a(),o(26,"option",245),l(27,"Headset"),a(),o(28,"option",246),l(29,"ID Card"),a(),o(30,"option",247),l(31,"Access Card"),a(),o(32,"option",248),l(33,"Vehicle"),a(),o(34,"option",39),l(35,"Other"),a()()(),o(36,"div",32)(37,"label"),l(38,"Asset Name *"),a(),o(39,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.assetName,r)||(s.editingAsset.assetName=r),f(r)}),a()(),o(40,"div",32)(41,"label"),l(42,"Asset Code"),a(),o(43,"input",249),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.assetCode,r)||(s.editingAsset.assetCode=r),f(r)}),a()(),o(44,"div",32)(45,"label"),l(46,"Serial Number"),a(),o(47,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.serialNumber,r)||(s.editingAsset.serialNumber=r),f(r)}),a()(),o(48,"div",32)(49,"label"),l(50,"Issue Date"),a(),o(51,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.issueDate,r)||(s.editingAsset.issueDate=r),f(r)}),a()(),o(52,"div",32)(53,"label"),l(54,"Return Date"),a(),o(55,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.returnDate,r)||(s.editingAsset.returnDate=r),f(r)}),a()(),o(56,"div",32)(57,"label"),l(58,"Condition"),a(),o(59,"select",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.condition,r)||(s.editingAsset.condition=r),f(r)}),o(60,"option",36),l(61,"Select"),a(),o(62,"option",250),l(63,"New"),a(),o(64,"option",251),l(65,"Good"),a(),o(66,"option",252),l(67,"Fair"),a(),o(68,"option",253),l(69,"Poor"),a()()(),o(70,"div",32)(71,"label"),l(72,"Remarks"),a(),o(73,"textarea",231),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingAsset.remarks,r)||(s.editingAsset.remarks=r),f(r)}),a()()(),o(74,"div",215)(75,"button",26),x("click",function(){g(e);let r=p();return f(r.showAssetModal=!1)}),l(76,"Cancel"),a(),o(77,"button",24),x("click",function(){g(e);let r=p();return f(r.saveAsset())}),l(78),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditingSubItem?"Edit":"Add"," Asset"),c(7),M("ngModel",e.editingAsset.assetType),c(28),M("ngModel",e.editingAsset.assetName),c(4),M("ngModel",e.editingAsset.assetCode),c(4),M("ngModel",e.editingAsset.serialNumber),c(4),M("ngModel",e.editingAsset.issueDate),c(4),M("ngModel",e.editingAsset.returnDate),c(4),M("ngModel",e.editingAsset.condition),c(14),M("ngModel",e.editingAsset.remarks),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function cye(n,t){if(n&1&&(o(0,"option",74),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function dye(n,t){n&1&&(o(0,"span"),l(1,"Choose PDF or Image file (max 10MB)"),a())}function pye(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(2);c(),_(e.selectedFile.name)}}function mye(n,t){if(n&1&&(o(0,"small",262),l(1),a()),n&2){let e=p(2);c(),D(" Current file: ",e.editingDocument.fileName," ")}}function uye(n,t){if(n&1){let e=F();o(0,"div",199)(1,"div",200),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",201)(3,"h3"),l(4),a(),o(5,"button",202),x("click",function(){g(e);let r=p();return f(r.showDocumentModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",203)(8,"div",32)(9,"label"),l(10,"Document Type *"),a(),o(11,"select",254),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.documentType,r)||(s.editingDocument.documentType=r),f(r)}),o(12,"option",74),l(13,"Select Document Type"),a(),b(14,cye,2,2,"option",75),a()(),o(15,"div",32)(16,"label"),l(17,"Document Number"),a(),o(18,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.documentNumber,r)||(s.editingDocument.documentNumber=r),f(r)}),a()(),o(19,"div",32)(20,"label"),l(21,"Issue Date"),a(),o(22,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.issueDate,r)||(s.editingDocument.issueDate=r),f(r)}),a()(),o(23,"div",32)(24,"label"),l(25,"Expiry Date"),a(),o(26,"input",217),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.expiryDate,r)||(s.editingDocument.expiryDate=r),f(r)}),a()(),o(27,"div",70)(28,"label"),l(29,"Upload File (PDF or Image)"),a(),o(30,"div",255)(31,"input",256),x("change",function(r){g(e);let s=p();return f(s.onFileSelected(r))}),a(),o(32,"label",257),y(33,"i",258),b(34,dye,2,0,"span",14)(35,pye,2,1,"span",14),a()(),b(36,mye,2,1,"small",259),a(),o(37,"div",32)(38,"label"),l(39,"File URL (or enter manually)"),a(),o(40,"input",260),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.fileUrl,r)||(s.editingDocument.fileUrl=r),f(r)}),a()(),o(41,"div",32)(42,"label"),l(43,"Reminder Days Before Expiry"),a(),o(44,"input",261),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.reminderDays,r)||(s.editingDocument.reminderDays=r),f(r)}),a()(),o(45,"div",70)(46,"label"),l(47,"Remarks"),a(),o(48,"textarea",231),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingDocument.remarks,r)||(s.editingDocument.remarks=r),f(r)}),a()()(),o(49,"div",215)(50,"button",26),x("click",function(){g(e);let r=p();return f(r.showDocumentModal=!1)}),l(51,"Cancel"),a(),o(52,"button",24),x("click",function(){g(e);let r=p();return f(r.saveDocument())}),l(53),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditingSubItem?"Edit":"Add"," Document"),c(7),M("ngModel",e.editingDocument.documentType),m("compareWith",e.compareById),c(),m("ngValue",null),c(2),m("ngForOf",e.documentTypes),c(4),M("ngModel",e.editingDocument.documentNumber),c(4),M("ngModel",e.editingDocument.issueDate),c(4),M("ngModel",e.editingDocument.expiryDate),c(8),m("ngIf",!e.selectedFile),c(),m("ngIf",e.selectedFile),c(),m("ngIf",e.editingDocument.fileName&&!e.selectedFile),c(4),M("ngModel",e.editingDocument.fileUrl),c(4),M("ngModel",e.editingDocument.reminderDays),c(4),M("ngModel",e.editingDocument.remarks),c(2),m("disabled",e.uploadingDocument),c(2),m("disabled",e.uploadingDocument),c(),_(e.uploadingDocument?"Saving...":"Save")}}var h2=class n{constructor(t,e,i,r,s,d,u,h,v,C,O){this.route=t;this.router=e;this.employeeService=i;this.orgService=r;this.documentService=s;this.recruitmentService=d;this.leaveService=u;this.payrollService=h;this.attendanceService=v;this.cdr=C;this.toastService=O;let T=new Date().getFullYear();this.availableYears=[T-1,T,T+1]}employeeId=null;isNewEmployee=!1;isEditMode=!1;activeTab="personal";employee=this.getEmptyEmployee();bankDetails=[];salaryHistory=[];education=[];experience=[];assets=[];documents=[];documentTypes=[];documentCategories=[];documentChecklist=[];loadingDocumentChecklist=!1;selectedFile=null;uploadingDocument=!1;recruitmentHistory=null;loadingRecruitmentHistory=!1;leaveBalances=[];leaveYear=new Date().getFullYear();availableYears=[];loadingLeaveBalances=!1;initializingLeave=!1;editingLeaveBalanceId=null;savingLeaveBalance=!1;originalLeaveBalance=null;payrollRecords=[];timesheets=[];loadingPayroll=!1;attendanceRecords=[];loadingAttendance=!1;weekStartDate="";weekEndDate="";downloadingPdf=!1;departments=[];designations=[];grades=[];jobRoles=[];locations=[];costCenters=[];expenseCenters=[];employees=[];showBankModal=!1;showSalaryModal=!1;showEducationModal=!1;showExperienceModal=!1;showAssetModal=!1;showDocumentModal=!1;editingBank=this.getEmptyBankDetail();editingSalary=this.getEmptySalary();editingEducation=this.getEmptyEducation();editingExperience=this.getEmptyExperience();editingAsset=this.getEmptyAsset();editingDocument=this.getEmptyDocument();isEditingSubItem=!1;loading=!1;saving=!1;workingDaysPerWeek=5;workingHoursPerDay=8;calculatedWeeklySalary=0;calculatedDailySalary=0;ngOnInit(){let t=this.route.snapshot.paramMap.get("id"),e=this.route.snapshot.queryParamMap.get("edit");this.isEditMode=e==="true",t==="new"?(this.isNewEmployee=!0,this.isEditMode=!0,this.loading=!1,this.employee=this.getEmptyEmployee(),this.loadDropdownData()):t?(this.isNewEmployee=!1,this.employeeId=parseInt(t),this.loading=!0,this.loadEmployee()):this.loading=!1,this.route.queryParamMap.subscribe(i=>{this.isNewEmployee||(this.isEditMode=i.get("edit")==="true")})}loadDropdownData(){this.orgService.getDepartments().subscribe(t=>this.departments=t),this.orgService.getDesignations().subscribe(t=>this.designations=t),this.orgService.getGrades().subscribe(t=>this.grades=t),this.orgService.getJobRoles().subscribe(t=>this.jobRoles=t),this.orgService.getLocations().subscribe(t=>this.locations=t),this.orgService.getCostCenters().subscribe(t=>this.costCenters=t),this.orgService.getExpenseCenters().subscribe(t=>this.expenseCenters=t),this.employeeService.getActive().subscribe(t=>this.employees=t),this.documentService.getTypes().subscribe(t=>this.documentTypes=t),this.documentService.getCategories().subscribe(t=>this.documentCategories=t)}loadEmployee(){if(!this.employeeId){this.loading=!1,this.cdr.detectChanges();return}console.log("Loading employee:",this.employeeId),this.loading=!0;let t=setTimeout(()=>{this.loading&&(this.loading=!1,this.cdr.detectChanges(),console.warn("Employee loading timed out after 5 seconds"))},5e3);this.employeeService.getById(this.employeeId).subscribe({next:e=>{console.log("Employee loaded successfully:",e),clearTimeout(t),this.employee=e,e.id&&(this.employeeId=e.id),this.loading=!1,this.cdr.detectChanges(),this.loadAllTabData(),this.loadDropdownData()},error:e=>{console.error("Error loading employee:",e),clearTimeout(t),this.loading=!1,this.cdr.detectChanges(),(e.status===401||e.status===403)&&this.router.navigate(["/login"])}})}loadAllTabData(){this.employeeId&&(this.employeeService.getBankDetails(this.employeeId).subscribe(t=>{this.bankDetails=t,this.cdr.markForCheck()}),this.employeeService.getSalaryHistory(this.employeeId).subscribe(t=>{this.salaryHistory=t,this.cdr.markForCheck()}),this.employeeService.getEducation(this.employeeId).subscribe(t=>{this.education=t,this.cdr.markForCheck()}),this.employeeService.getExperience(this.employeeId).subscribe(t=>{this.experience=t,this.cdr.markForCheck()}),this.employeeService.getAssets(this.employeeId).subscribe(t=>{this.assets=t,this.cdr.markForCheck()}),this.documentService.getEmployeeDocuments(this.employeeId).subscribe(t=>{this.documents=t,this.cdr.markForCheck()}),this.loadDocumentChecklist(),this.loadLeaveBalances(),this.loadRecruitmentHistory())}loadSubData(){this.employeeId&&(this.employeeService.getBankDetails(this.employeeId).subscribe(t=>{this.bankDetails=t,this.cdr.markForCheck()}),this.employeeService.getSalaryHistory(this.employeeId).subscribe(t=>{this.salaryHistory=t,this.cdr.markForCheck()}),this.employeeService.getEducation(this.employeeId).subscribe(t=>{this.education=t,this.cdr.markForCheck()}),this.employeeService.getExperience(this.employeeId).subscribe(t=>{this.experience=t,this.cdr.markForCheck()}),this.employeeService.getAssets(this.employeeId).subscribe(t=>{this.assets=t,this.cdr.markForCheck()}),this.documentService.getEmployeeDocuments(this.employeeId).subscribe(t=>{this.documents=t,this.cdr.markForCheck()}))}getEmptyEmployee(){return{employeeCode:"",firstName:"",lastName:"",email:"",active:!0,employmentStatus:"PROBATION",employmentType:"FULL_TIME"}}getEmptyBankDetail(){return{bankName:"",accountHolderName:"",accountNumber:"",isPrimary:!1,active:!0}}getEmptySalary(){return{basicSalary:0,effectiveFrom:"",isCurrent:!0}}getEmptyEducation(){return{qualification:"",institution:""}}getEmptyExperience(){return{companyName:"",designation:"",fromDate:""}}getEmptyAsset(){return{assetType:"",assetName:"",assetCode:"",serialNumber:"",issueDate:"",approvalStatus:"PENDING"}}getEmptyDocument(){return{verificationStatus:"PENDING",reminderDays:30}}setTab(t){this.isNewEmployee&&["bank","salary","ctcHistory","assets","documents","leave","recruitment","payroll","timesheet"].includes(t)||(this.activeTab=t,t==="payroll"&&this.payrollRecords.length===0&&this.loadPayrollData(),t==="timesheet"&&this.attendanceRecords.length===0&&(this.initializeWeekDates(),this.loadAttendanceRecords()))}loadPayrollData(){this.employeeId&&(this.loadingPayroll=!0,this.cdr.detectChanges(),this.payrollService.getPayrollRecordsByEmployee(this.employeeId).subscribe({next:t=>{this.payrollRecords=t,this.loadingPayroll=!1,this.cdr.detectChanges()},error:()=>{this.payrollRecords=[],this.loadingPayroll=!1,this.cdr.detectChanges()}}),this.payrollService.getTimesheetsByEmployee(this.employeeId).subscribe({next:t=>{this.timesheets=t,this.cdr.detectChanges()},error:()=>{this.timesheets=[],this.cdr.detectChanges()}}))}initializeWeekDates(){let t=new Date,e=t.getDay(),i=e===0?6:e-1,r=new Date(t);r.setDate(t.getDate()-i);let s=new Date(r);s.setDate(r.getDate()+6),this.weekStartDate=r.toISOString().split("T")[0],this.weekEndDate=s.toISOString().split("T")[0]}loadAttendanceRecords(){if(!(!this.employeeId||!this.weekStartDate||!this.weekEndDate)){if(new Date(this.weekStartDate)>new Date(this.weekEndDate)){this.toastService.error("Start date must be before end date");return}this.loadingAttendance=!0,this.cdr.detectChanges(),this.attendanceService.getByEmployeeAndDateRange(this.employeeId,this.weekStartDate,this.weekEndDate).subscribe({next:t=>{this.attendanceRecords=t,this.loadingAttendance=!1,this.cdr.detectChanges()},error:()=>{this.attendanceRecords=[],this.loadingAttendance=!1,this.cdr.detectChanges()}})}}onWeekChange(){this.loadAttendanceRecords()}getTotalHours(){return this.attendanceRecords.reduce((t,e)=>t+(e.regularHours||0)+(e.overtimeHours||0),0)}getTotalOvertimeHours(){return this.attendanceRecords.reduce((t,e)=>t+(e.overtimeHours||0),0)}formatAttendanceTime(t){return t?t.substring(0,5):"-"}canDownloadPdf(){return!!(this.attendanceRecords.length>0&&this.employee&&this.employee.firstName)}downloadTimesheetPdf(){if(this.attendanceRecords.length===0){this.toastService.error("No records to download");return}if(!this.employee||!this.employee.firstName){this.toastService.error("Employee data not loaded");return}this.downloadingPdf=!0,this.cdr.detectChanges();try{let t=new Jt;t.setFontSize(18),t.text("Weekly Timesheet Report",14,22);let e=`${this.employee.firstName||""} ${this.employee.lastName||""}`.trim()||"Unknown",i=this.employee.employeeCode||"N/A";t.setFontSize(11),t.text(`Employee: ${e}`,14,32),t.text(`Code: ${i}`,14,38),t.text(`Period: ${this.weekStartDate} to ${this.weekEndDate}`,14,44);let r=this.attendanceRecords.map(s=>[s.attendanceDate,this.formatAttendanceTime(s.clockIn),this.formatAttendanceTime(s.clockOut),(s.regularHours||0).toFixed(2),(s.overtimeHours||0).toFixed(2),s.status||"-"]);t.autoTable({startY:52,head:[["Date","Clock In","Clock Out","Regular Hours","Overtime","Status"]],body:r,theme:"grid",headStyles:{fillColor:[0,128,128]},foot:[["TOTAL","","",(this.getTotalHours()-this.getTotalOvertimeHours()).toFixed(2),this.getTotalOvertimeHours().toFixed(2),""]],footStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"}}),t.save(`timesheet_${this.employee.employeeCode}_${this.weekStartDate}.pdf`),this.toastService.success("PDF downloaded successfully")}catch{this.toastService.error("Failed to generate PDF")}finally{this.downloadingPdf=!1,this.cdr.detectChanges()}}loadDocumentChecklist(){this.employeeId&&(this.loadingDocumentChecklist=!0,this.cdr.detectChanges(),this.documentService.getEmployeeDocumentChecklist(this.employeeId).subscribe({next:t=>{this.documentChecklist=t,this.loadingDocumentChecklist=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading document checklist:",t),this.loadingDocumentChecklist=!1,this.cdr.detectChanges()}}))}getDocumentUploadStatus(t){return t.status==="PENDING"?"NOT_UPLOADED":t.verificationStatus==="VERIFIED"?"APPROVED":t.verificationStatus==="REJECTED"?"REJECTED":t.expiryDate&&new Date(t.expiryDate)<new Date?"EXPIRED":"UPLOADED"}getDocumentStatusBadgeClass(t){switch(t){case"NOT_UPLOADED":return"badge-secondary";case"UPLOADED":return"badge-info";case"APPROVED":return"badge-success";case"REJECTED":return"badge-danger";case"EXPIRED":return"badge-warning";default:return"badge-secondary"}}onFileSelected(t){let e=t.target.files[0];if(e){if(!["application/pdf","image/jpeg","image/png","image/gif"].includes(e.type)){this.toastService.error("Only PDF and image files (JPEG, PNG, GIF) are allowed.");return}if(e.size>10*1024*1024){this.toastService.error("File size must be less than 10MB.");return}this.selectedFile=e,this.editingDocument.fileName=e.name,this.editingDocument.mimeType=e.type,this.editingDocument.fileSize=e.size}}openDocumentModalForType(t){this.isEditingSubItem=!1,this.editingDocument={documentType:{id:t.id,code:t.code,name:t.name,isMandatory:t.isMandatory,hasExpiry:t.hasExpiry,active:!0},verificationStatus:"PENDING",reminderDays:30},this.selectedFile=null,this.showDocumentModal=!0}loadRecruitmentHistory(){this.employeeId&&(this.loadingRecruitmentHistory=!0,this.cdr.markForCheck(),this.recruitmentService.getRecruitmentHistoryByEmployee(this.employeeId).subscribe({next:t=>{this.recruitmentHistory=t,this.loadingRecruitmentHistory=!1,this.cdr.markForCheck()},error:()=>{this.recruitmentHistory=null,this.loadingRecruitmentHistory=!1,this.cdr.markForCheck()}}))}getMockRecruitmentHistory(){return{requisition:{requisitionNumber:"REQ-2024-001",title:"Software Developer",department:{name:this.employee.department?.name||"Engineering"},status:"FILLED",createdAt:"2024-01-15"},jobPosting:{title:"Software Developer",postedDate:"2024-01-20",closedDate:"2024-02-15",applicationCount:45},candidate:{firstName:this.employee.firstName,lastName:this.employee.lastName,email:this.employee.email,appliedDate:"2024-01-25",source:"LinkedIn",status:"HIRED"},interviews:[{round:1,type:"PHONE_SCREENING",scheduledDate:"2024-02-01",interviewer:{firstName:"John",lastName:"Manager"},rating:4,recommendation:"PROCEED",feedback:"Good communication skills"},{round:2,type:"TECHNICAL",scheduledDate:"2024-02-05",interviewer:{firstName:"Sarah",lastName:"Tech Lead"},rating:5,recommendation:"HIRE",feedback:"Excellent technical knowledge"}],offer:{offerNumber:"OFF-2024-015",offeredSalary:85e3,joiningDate:this.employee.joiningDate,status:"ACCEPTED",acceptedDate:"2024-02-12"},conversionDate:this.employee.joiningDate}}getInterviewTypeLabel(t){return{PHONE_SCREENING:"Phone Screening",TECHNICAL:"Technical Interview",HR:"HR Interview",MANAGER:"Manager Round",PANEL:"Panel Interview",FINAL:"Final Round"}[t]||t}getRecommendationClass(t){switch(t){case"HIRE":return"badge-success";case"PROCEED":return"badge-primary";case"HOLD":return"badge-warning";case"REJECT":return"badge-danger";default:return""}}getPayFrequencyLabel(t){return t?{WEEKLY:"Weekly",BI_WEEKLY:"Bi-Weekly",SEMI_MONTHLY:"Semi-Monthly",MONTHLY:"Monthly"}[t]||t:"-"}getChangeReasonLabel(t){return t?{NEW_HIRE:"New Hire",PROMOTION:"Promotion",INCREMENT:"Annual Increment",REVISION:"Salary Revision",TRANSFER:"Transfer",CORRECTION:"Correction"}[t]||t:"-"}maskAccountNumber(t){return t?`XXXX ${t.slice(-4)}`:"-"}toggleEditMode(){this.isEditMode=!this.isEditMode}saveEmployee(){this.saving||(this.saving=!0,this.isNewEmployee?this.employeeService.create(this.employee).subscribe({next:t=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Employee created successfully!"),t.id&&this.leaveService.initializeBalances(t.id).subscribe({next:()=>{console.log("Leave balances initialized for employee")},error:e=>{console.warn("Could not initialize leave balances:",e)}}),this.router.navigate(["/app/hr/employees",t.id])},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating employee:",t);let e=t.error?.message||t.message||"Failed to create employee. Please try again.";this.toastService.error(e)}}):this.employeeId&&this.employeeService.update(this.employeeId,this.employee).subscribe({next:t=>{console.log("Employee update success:",t),this.saving=!1,this.isEditMode=!1,t&&(this.employee=t),this.cdr.detectChanges(),this.toastService.success("Employee updated successfully!")},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating employee:",t);let e=t.error?.message||t.message||"Failed to update employee. Please try again.";this.toastService.error(e)}}))}cancel(){this.isNewEmployee?this.router.navigate(["/app/hr/employees"]):(this.isEditMode=!1,this.loadEmployee())}goBack(){this.router.navigate(["/app/hr/employees"])}openBankModal(t){this.isEditingSubItem=!!t,this.editingBank=t?me({},t):this.getEmptyBankDetail(),this.showBankModal=!0}saveBankDetail(){!this.employeeId||this.saving||(this.saving=!0,this.isEditingSubItem&&this.editingBank.id?this.employeeService.updateBankDetail(this.editingBank.id,this.editingBank).subscribe({next:()=>{this.saving=!1,this.showBankModal=!1,this.cdr.detectChanges(),this.toastService.success("Bank detail updated successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating bank detail:",t),this.toastService.error("Failed to update bank detail")}}):this.employeeService.createBankDetail(this.employeeId,this.editingBank).subscribe({next:()=>{this.saving=!1,this.showBankModal=!1,this.cdr.detectChanges(),this.toastService.success("Bank detail added successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating bank detail:",t),this.toastService.error("Failed to add bank detail")}}))}deleteBankDetail(t){t.id&&confirm("Delete this bank detail?")&&this.employeeService.deleteBankDetail(t.id).subscribe({next:()=>this.loadSubData(),error:e=>console.error("Error deleting:",e)})}openSalaryModal(){this.editingSalary=this.getEmptySalary(),this.workingDaysPerWeek=5,this.workingHoursPerDay=8,this.calculatedWeeklySalary=0,this.calculatedDailySalary=0,this.showSalaryModal=!0}onBasicSalaryChange(){if(this.editingSalary.basicSalary&&this.editingSalary.basicSalary>0){let t=this.editingSalary.basicSalary,e=this.workingDaysPerWeek||5,i=this.workingHoursPerDay||8;this.calculatedWeeklySalary=Math.round(t/52*100)/100,this.calculatedDailySalary=Math.round(this.calculatedWeeklySalary/e*100)/100,this.editingSalary.hourlyRate=Math.round(this.calculatedDailySalary/i*100)/100}else this.calculatedWeeklySalary=0,this.calculatedDailySalary=0,this.editingSalary.hourlyRate=0}saveSalary(){!this.employeeId||this.saving||(this.saving=!0,this.employeeService.createSalary(this.employeeId,this.editingSalary).subscribe({next:()=>{this.saving=!1,this.showSalaryModal=!1,this.cdr.detectChanges(),this.toastService.success("Salary added successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating salary:",t),this.toastService.error("Failed to add salary")}}))}openEducationModal(t){this.isEditingSubItem=!!t,this.editingEducation=t?me({},t):this.getEmptyEducation(),this.showEducationModal=!0}saveEducation(){!this.employeeId||this.saving||(this.saving=!0,this.isEditingSubItem&&this.editingEducation.id?this.employeeService.updateEducation(this.editingEducation.id,this.editingEducation).subscribe({next:()=>{this.saving=!1,this.showEducationModal=!1,this.cdr.detectChanges(),this.toastService.success("Education updated successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating education:",t),this.toastService.error("Failed to update education")}}):this.employeeService.createEducation(this.employeeId,this.editingEducation).subscribe({next:()=>{this.saving=!1,this.showEducationModal=!1,this.cdr.detectChanges(),this.toastService.success("Education added successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating education:",t),this.toastService.error("Failed to add education")}}))}deleteEducation(t){t.id&&confirm("Delete this education record?")&&this.employeeService.deleteEducation(t.id).subscribe({next:()=>this.loadSubData(),error:e=>console.error("Error deleting:",e)})}openExperienceModal(t){this.isEditingSubItem=!!t,this.editingExperience=t?me({},t):this.getEmptyExperience(),this.showExperienceModal=!0}saveExperience(){!this.employeeId||this.saving||(this.saving=!0,this.isEditingSubItem&&this.editingExperience.id?this.employeeService.updateExperience(this.editingExperience.id,this.editingExperience).subscribe({next:()=>{this.saving=!1,this.showExperienceModal=!1,this.cdr.detectChanges(),this.toastService.success("Experience updated successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating experience:",t),this.toastService.error("Failed to update experience")}}):this.employeeService.createExperience(this.employeeId,this.editingExperience).subscribe({next:()=>{this.saving=!1,this.showExperienceModal=!1,this.cdr.detectChanges(),this.toastService.success("Experience added successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating experience:",t),this.toastService.error("Failed to add experience")}}))}deleteExperience(t){t.id&&confirm("Delete this experience record?")&&this.employeeService.deleteExperience(t.id).subscribe({next:()=>this.loadSubData(),error:e=>console.error("Error deleting:",e)})}openAssetModal(t){this.isEditingSubItem=!!t,this.editingAsset=t?me({},t):this.getEmptyAsset(),this.showAssetModal=!0}saveAsset(){!this.employeeId||this.saving||(this.saving=!0,this.isEditingSubItem&&this.editingAsset.id?this.employeeService.updateAsset(this.editingAsset.id,this.editingAsset).subscribe({next:()=>{this.saving=!1,this.showAssetModal=!1,this.cdr.detectChanges(),this.toastService.success("Asset updated successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating asset:",t),this.toastService.error("Failed to update asset")}}):this.employeeService.createAsset(this.employeeId,this.editingAsset).subscribe({next:()=>{this.saving=!1,this.showAssetModal=!1,this.cdr.detectChanges(),this.toastService.success("Asset added successfully"),this.loadSubData()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating asset:",t),this.toastService.error("Failed to add asset")}}))}approveAsset(t,e){t.id&&this.employeeService.approveAsset(t.id,e).subscribe({next:()=>this.loadSubData(),error:i=>console.error("Error approving asset:",i)})}deleteAsset(t){t.id&&confirm("Delete this asset record?")&&this.employeeService.deleteAsset(t.id).subscribe({next:()=>this.loadSubData(),error:e=>console.error("Error deleting:",e)})}compareById(t,e){return t&&e?t.id===e.id:t===e}openDocumentModal(t){this.isEditingSubItem=!!t,this.editingDocument=t?me({},t):this.getEmptyDocument(),this.selectedFile=null,this.showDocumentModal=!0}saveDocument(){!this.employeeId||this.saving||(this.saving=!0,this.isEditingSubItem&&this.editingDocument.id?this.documentService.updateDocument(this.editingDocument.id,this.editingDocument).subscribe({next:()=>{this.saving=!1,this.showDocumentModal=!1,this.selectedFile=null,this.cdr.detectChanges(),this.toastService.success("Document updated successfully"),this.loadSubData(),this.loadDocumentChecklist()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error updating document:",t),this.toastService.error("Failed to update document")}}):this.documentService.createDocument(this.employeeId,this.editingDocument).subscribe({next:()=>{this.saving=!1,this.showDocumentModal=!1,this.selectedFile=null,this.cdr.detectChanges(),this.toastService.success("Document added successfully"),this.loadSubData(),this.loadDocumentChecklist()},error:t=>{this.saving=!1,this.cdr.detectChanges(),console.error("Error creating document:",t),this.toastService.error("Failed to add document")}}))}verifyDocument(t,e){t.id&&this.documentService.verifyDocument(t.id,e).subscribe({next:()=>{this.loadSubData(),this.loadDocumentChecklist(),this.cdr.detectChanges()},error:i=>{console.error("Error verifying document:",i),this.cdr.detectChanges()}})}deleteDocument(t){t.id&&confirm("Delete this document?")&&this.documentService.deleteDocument(t.id).subscribe({next:()=>{this.loadSubData(),this.loadDocumentChecklist(),this.cdr.detectChanges()},error:e=>{console.error("Error deleting:",e),this.cdr.detectChanges()}})}verifyDocumentById(t,e){t&&this.documentService.verifyDocument(t,e).subscribe({next:()=>{this.loadSubData(),this.loadDocumentChecklist(),this.cdr.detectChanges()},error:i=>{console.error("Error verifying document:",i),this.cdr.detectChanges()}})}deleteDocumentById(t){t&&confirm("Delete this document?")&&this.documentService.deleteDocument(t).subscribe({next:()=>{this.loadSubData(),this.loadDocumentChecklist(),this.cdr.detectChanges()},error:e=>{console.error("Error deleting:",e),this.cdr.detectChanges()}})}editDocumentFromChecklist(t){t.documentId&&this.documentService.getDocumentById(t.documentId).subscribe({next:e=>{this.openDocumentModal(e),this.cdr.detectChanges()},error:e=>{console.error("Error loading document:",e),this.editingDocument=Tt(me({},this.getEmptyDocument()),{id:t.documentId,documentType:{id:t.id,code:t.code,name:t.name,description:t.description,isMandatory:t.isMandatory,hasExpiry:t.hasExpiry,active:t.active??!0},verificationStatus:t.verificationStatus||"PENDING"}),this.isEditingSubItem=!0,this.selectedFile=null,this.showDocumentModal=!0,this.cdr.detectChanges()}})}getDocumentStatusClass(t){switch(t){case"VERIFIED":return"status-verified";case"REJECTED":return"status-rejected";default:return"status-pending"}}isDocumentExpiring(t){if(!t.expiryDate)return!1;let e=new Date(t.expiryDate),i=new Date,r=Math.ceil((e.getTime()-i.getTime())/(1e3*60*60*24));return r<=30&&r>0}isDocumentExpired(t){return t.expiryDate?new Date(t.expiryDate)<new Date:!1}loadLeaveBalances(){this.employeeId&&(this.loadingLeaveBalances=!0,this.cdr.markForCheck(),this.leaveService.getEmployeeBalancesByYear(this.employeeId,this.leaveYear).subscribe({next:t=>{this.leaveBalances=t,this.loadingLeaveBalances=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading leave balances:",t),this.loadingLeaveBalances=!1,this.cdr.markForCheck()}}))}initializeLeaveBalances(){this.employeeId&&(this.initializingLeave=!0,this.cdr.markForCheck(),this.leaveService.initializeBalances(this.employeeId).subscribe({next:t=>{this.leaveService.getEmployeeBalancesByYear(this.employeeId,this.leaveYear).subscribe({next:e=>{this.leaveBalances=e,this.initializingLeave=!1,this.cdr.markForCheck()},error:()=>{this.initializingLeave=!1,this.cdr.markForCheck()}})},error:t=>{console.error("Error initializing leave balances:",t),this.initializingLeave=!1,this.cdr.markForCheck(),this.toastService.error("Error initializing leave balances. Please try again.")}}))}editLeaveBalance(t){this.editingLeaveBalanceId=t.id||null,this.originalLeaveBalance=me({},t)}cancelLeaveBalanceEdit(){if(this.originalLeaveBalance&&this.editingLeaveBalanceId){let t=this.leaveBalances.findIndex(e=>e.id===this.editingLeaveBalanceId);t!==-1&&(this.leaveBalances[t]=me({},this.originalLeaveBalance))}this.editingLeaveBalanceId=null,this.originalLeaveBalance=null}saveLeaveBalance(t){t.id&&(this.savingLeaveBalance=!0,this.leaveService.updateBalance(t.id,t).subscribe({next:()=>{this.editingLeaveBalanceId=null,this.originalLeaveBalance=null,this.savingLeaveBalance=!1,this.loadLeaveBalances()},error:e=>{console.error("Error saving leave balance:",e),this.savingLeaveBalance=!1,this.toastService.error("Error saving leave balance. Please try again.")}}))}getLeaveAvailable(t){return(t.openingBalance||0)+(t.credited||0)+(t.carryForward||0)-(t.used||0)-(t.pending||0)-(t.lapsed||0)-(t.encashed||0)}getTotalOpening(){return this.leaveBalances.reduce((t,e)=>t+(e.openingBalance||0),0)}getTotalCredited(){return this.leaveBalances.reduce((t,e)=>t+(e.credited||0),0)}getTotalCarryForward(){return this.leaveBalances.reduce((t,e)=>t+(e.carryForward||0),0)}getTotalUsed(){return this.leaveBalances.reduce((t,e)=>t+(e.used||0),0)}getTotalPending(){return this.leaveBalances.reduce((t,e)=>t+(e.pending||0),0)}getTotalAvailable(){return this.leaveBalances.reduce((t,e)=>t+this.getLeaveAvailable(e),0)}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(ai),V(Mr),V(gc),V(ma),V(Ka),V(vi),V(To),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-employee-detail"]],standalone:!1,decls:23,vars:22,consts:[[1,"employee-detail-container"],["class","loading-container",4,"ngIf"],["class","page-header",4,"ngIf"],["class","tabs",4,"ngIf"],["class","tab-content",4,"ngIf"],["class","employee-detail-container",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin","fa-3x"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[4,"ngIf"],["class","employee-code",4,"ngIf"],["class","header-actions",4,"ngIf"],[1,"employee-code"],[1,"header-actions"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-primary",3,"disabled","click",4,"ngIf"],["class","btn-secondary",3,"disabled","click",4,"ngIf"],[1,"btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn-secondary",3,"click","disabled"],[1,"tabs"],[3,"click"],[1,"tab-content"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text",3,"ngModelChange","ngModel","disabled"],["type","date",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],["value",""],["value","MALE"],["value","FEMALE"],["value","OTHER"],["value","SINGLE"],["value","MARRIED"],["value","DIVORCED"],["value","WIDOWED"],["value","A+"],["value","A-"],["value","B+"],["value","B-"],["value","AB+"],["value","AB-"],["value","O+"],["value","O-"],["type","text","placeholder","XXX-XX-XXXX",3,"ngModelChange","ngModel","disabled"],["value","H1B"],["value","L1"],["value","F1_OPT"],["value","F1_CPT"],["value","H4_EAD"],["value","GREEN_CARD"],["value","US_CITIZEN"],["value","TN"],["value","E2"],["value","PENDING"],["value","COMPLETED"],["value","REVERIFIED"],["value","EXPIRED"],["value","PERMANENT_RESIDENT"],["value","WORK_VISA"],["value","EAD"],["type","email",3,"ngModelChange","ngModel","disabled"],[1,"form-group","full-width"],["rows","2",3,"ngModelChange","ngModel","disabled"],["type","text","required","",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","compareWith","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["value","FULL_TIME"],["value","PART_TIME"],["value","W2"],["value","1099"],["value","UNION"],["value","CONTRACT"],["value","INTERN"],["value","CONSULTANT"],["value","PROBATION"],["value","CONFIRMED"],["value","NOTICE"],["value","RESIGNED"],["value","TERMINATED"],["type","number",3,"ngModelChange","ngModel","disabled"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"section-header"],[1,"btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],["class","data-table",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge"],[1,"btn-icon",3,"click"],[1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"no-data"],[3,"current-row",4,"ngFor","ngForOf"],["class","badge badge-primary",4,"ngIf"],[1,"badge","badge-primary"],[1,"section-description"],["class","info-banner",4,"ngIf"],[1,"info-banner"],[1,"fas","fa-info-circle"],[1,"badge",3,"ngClass"],["class","btn-icon","title","Approve",3,"click",4,"ngIf"],["class","btn-icon btn-danger","title","Reject",3,"click",4,"ngIf"],["title","Approve",1,"btn-icon",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-times"],["class","loading-spinner",4,"ngIf"],["class","document-checklist",4,"ngIf"],[1,"fas","fa-spinner","fa-spin"],[1,"document-checklist"],["class","category-section",4,"ngFor","ngForOf"],[1,"category-section"],[1,"category-header"],[1,"fas","fa-folder"],[1,"category-count"],[3,"mandatory-row","expired-row",4,"ngFor","ngForOf"],["class","mandatory-indicator",4,"ngIf"],[3,"text-danger",4,"ngIf"],["target","_blank","class","file-link",3,"href",4,"ngIf"],["class","btn-sm btn-primary","title","Upload",3,"click",4,"ngIf"],[1,"mandatory-indicator"],["class","fas fa-exclamation-triangle",4,"ngIf"],[1,"fas","fa-exclamation-triangle"],["target","_blank",1,"file-link",3,"href"],["title","Upload",1,"btn-sm","btn-primary",3,"click"],[1,"fas","fa-upload"],["class","btn-icon btn-success","title","Approve",3,"click",4,"ngIf"],["title","Edit",1,"btn-icon",3,"click"],["title","Delete",1,"btn-icon","btn-danger",3,"click"],["title","Approve",1,"btn-icon","btn-success",3,"click"],[1,"year-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-sync-alt"],["class","leave-assignment-table",4,"ngIf"],[3,"value"],[1,"leave-assignment-table"],[1,"text-center"],[1,"totals-row"],[1,"text-center","text-success"],["class","text-muted",4,"ngIf"],["type","number","min","0","step","0.5",1,"balance-input",3,"ngModelChange","ngModel","disabled"],[1,"text-center","text-warning"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon btn-success","title","Save",3,"disabled","click",4,"ngIf"],["class","btn-icon","title","Cancel",3,"click",4,"ngIf"],[1,"text-muted"],["title","Save",1,"btn-icon","btn-success",3,"click","disabled"],[1,"fas"],["title","Cancel",1,"btn-icon",3,"click"],[1,"fas","fa-calendar-times"],[1,"small"],["class","recruitment-timeline",4,"ngIf"],[1,"recruitment-timeline"],["class","timeline-item",4,"ngIf"],["class","timeline-item interviews",4,"ngIf"],[1,"timeline-item"],[1,"timeline-icon","requisition"],[1,"fas","fa-file-alt"],[1,"timeline-content"],[1,"timeline-details"],[1,"badge","badge-success"],[1,"timeline-icon","posting"],[1,"fas","fa-bullhorn"],[1,"timeline-icon","candidate"],[1,"fas","fa-user"],[1,"timeline-item","interviews"],[1,"timeline-icon","interview"],[1,"fas","fa-comments"],[1,"interview-rounds"],["class","interview-round",4,"ngFor","ngForOf"],[1,"interview-round"],[1,"round-header"],[1,"round-number"],[1,"round-type"],[1,"round-details"],[1,"rating-stars"],["class","fas fa-star",3,"filled",4,"ngFor","ngForOf"],[1,"fas","fa-star"],[1,"timeline-icon","offer"],[1,"fas","fa-handshake"],[1,"timeline-icon","employee"],[1,"fas","fa-user-check"],[1,"form-section",2,"margin-top","2rem"],[1,"filter-row"],["type","date",3,"ngModelChange","change","ngModel"],[1,"total-row"],["colspan","3"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],["type","text",3,"ngModelChange","ngModel"],["type","text","placeholder","Name as it appears on bank records",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","SAVINGS"],["value","CHECKING"],["type","text","placeholder","9-digit routing number",3,"ngModelChange","ngModel"],["value","DIRECT_DEPOSIT"],["value","CHECK"],["value","WIRE"],["value","ADP"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"modal","modal-lg",3,"click"],["type","date",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter annual basic salary",3,"ngModelChange","input","ngModel"],["type","number","step","0.01","readonly","",1,"readonly-field","highlight-field",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["value","WEEKLY"],["value","BI_WEEKLY"],["value","SEMI_MONTHLY"],["value","MONTHLY"],["value","NEW_HIRE"],["value","PROMOTION"],["value","INCREMENT"],["value","REVISION"],["value","TRANSFER"],["value","CORRECTION"],["rows","2",3,"ngModelChange","ngModel"],["value","10TH"],["value","12TH"],["value","DIPLOMA"],["value","BACHELORS"],["value","MASTERS"],["value","PHD"],["value","CERTIFICATION"],["value","LAPTOP"],["value","DESKTOP"],["value","MOBILE"],["value","MONITOR"],["value","KEYBOARD"],["value","MOUSE"],["value","HEADSET"],["value","ID_CARD"],["value","ACCESS_CARD"],["value","VEHICLE"],["type","text","placeholder","e.g., LAPTOP-001",3,"ngModelChange","ngModel"],["value","NEW"],["value","GOOD"],["value","FAIR"],["value","POOR"],[3,"ngModelChange","ngModel","compareWith"],[1,"file-upload-container"],["type","file","id","documentFile","accept",".pdf,.jpg,.jpeg,.png,.gif",3,"change"],["for","documentFile",1,"file-upload-label"],[1,"fas","fa-cloud-upload-alt"],["class","file-info",4,"ngIf"],["type","text","placeholder","Enter file URL or path",3,"ngModelChange","ngModel"],["type","number","min","1",3,"ngModelChange","ngModel"],[1,"file-info"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,pve,5,0,"div",1)(2,yve,9,5,"div",2)(3,Cve,23,40,"div",3)(4,bve,245,72,"div",4)(5,Ive,129,58,"div",4)(6,Fve,9,2,"div",4)(7,Uve,9,2,"div",4)(8,Hve,9,3,"div",4)(9,Jve,9,2,"div",4)(10,Zve,9,2,"div",4)(11,oxe,9,2,"div",4)(12,Cxe,10,3,"div",4)(13,Ixe,13,9,"div",4)(14,qxe,9,3,"div",4),a(),b(15,Xxe,13,5,"div",5)(16,iye,22,7,"div",5)(17,rye,57,11,"div",6)(18,oye,94,17,"div",6)(19,aye,61,12,"div",6)(20,sye,49,13,"div",6)(21,lye,79,12,"div",6)(22,uye,54,17,"div",6)),e&2&&(c(),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",i.activeTab==="personal"&&!i.loading),c(),m("ngIf",i.activeTab==="employment"&&!i.loading),c(),m("ngIf",i.activeTab==="bank"&&!i.loading),c(),m("ngIf",i.activeTab==="salary"&&!i.loading),c(),m("ngIf",i.activeTab==="ctcHistory"&&!i.loading),c(),m("ngIf",i.activeTab==="education"&&!i.loading),c(),m("ngIf",i.activeTab==="experience"&&!i.loading),c(),m("ngIf",i.activeTab==="assets"&&!i.loading),c(),m("ngIf",i.activeTab==="documents"&&!i.loading),c(),m("ngIf",i.activeTab==="leave"&&!i.loading),c(),m("ngIf",i.activeTab==="recruitment"&&!i.loading),c(),m("ngIf",i.activeTab==="payroll"&&!i.loading),c(),m("ngIf",i.activeTab==="timesheet"&&!i.loading),c(),m("ngIf",i.showBankModal),c(),m("ngIf",i.showSalaryModal),c(),m("ngIf",i.showEducationModal),c(),m("ngIf",i.showExperienceModal),c(),m("ngIf",i.showAssetModal),c(),m("ngIf",i.showDocumentModal))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,Ee,yn,ir],styles:['.employee-detail-container[_ngcontent-%COMP%]{padding:20px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center;color:teal}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.readonly-field[_ngcontent-%COMP%]{background-color:#f5f5f5!important;color:#666!important;cursor:not-allowed;border-color:#ddd!important}.highlight-field[_ngcontent-%COMP%]{background-color:#e0f7fa!important;color:#006064!important;font-weight:600;border-color:teal!important}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0;font-size:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .employee-code[_ngcontent-%COMP%]{background:#e0f2f2;color:teal;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-back[_ngcontent-%COMP%]{background:transparent;border:1px solid #ddd;padding:8px 12px;border-radius:6px;cursor:pointer;color:#666}.btn-back[_ngcontent-%COMP%]:hover{background:#f0f0f0}.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn-primary.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333;border:1px solid #ddd;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;border-bottom:2px solid #e0e0e0;margin-bottom:24px;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:12px 20px;cursor:pointer;color:#666;font-size:14px;border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .2s}.tabs[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{color:#bbb;cursor:not-allowed;opacity:.6}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:teal}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:16px;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid #eee}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:8px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:16px;margin:0}.section-header[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{width:100%;color:#666;font-size:13px;margin:0}.info-banner[_ngcontent-%COMP%]{background:#e8f4f8;border:1px solid #b8d4e3;border-radius:6px;padding:12px 16px;color:#31708f;display:flex;align-items:center;gap:10px;margin-bottom:16px}.info-banner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:1200px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(max-width:900px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:600px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:12px;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .current-row[_ngcontent-%COMP%]{background:#e0f2f2}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}.badge.badge-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px;cursor:pointer;color:#666;border-radius:4px}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fee;color:#c00}.no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px;font-style:italic}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 4px 20px #00000026}.modal.modal-lg[_ngcontent-%COMP%]{max-width:700px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;line-height:1}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.modal-body[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}.text-warning[_ngcontent-%COMP%]{color:#f0ad4e}.text-danger[_ngcontent-%COMP%]{color:#dc3545}tr.expiring[_ngcontent-%COMP%]{background-color:#fff3cd}tr.expired[_ngcontent-%COMP%]{background-color:#f8d7da}.btn-success[_ngcontent-%COMP%]{color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{color:#1e7e34}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;color:teal;font-size:16px}.recruitment-timeline[_ngcontent-%COMP%]{position:relative;padding-left:40px}.recruitment-timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:15px;top:0;bottom:0;width:2px;background:#e0e0e0}.timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:24px;padding-bottom:24px;border-bottom:1px solid #f0f0f0}.timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.timeline-icon[_ngcontent-%COMP%]{position:absolute;left:-40px;top:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:14px;z-index:1}.timeline-icon.requisition[_ngcontent-%COMP%]{background:#6c757d}.timeline-icon.posting[_ngcontent-%COMP%]{background:#17a2b8}.timeline-icon.candidate[_ngcontent-%COMP%]{background:#ffc107;color:#333}.timeline-icon.interview[_ngcontent-%COMP%]{background:#007bff}.timeline-icon.offer[_ngcontent-%COMP%]{background:#28a745}.timeline-icon.employee[_ngcontent-%COMP%]{background:teal}.timeline-content[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;border-left:3px solid #008080}.timeline-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:teal;font-size:16px}.timeline-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:14px;color:#333}.timeline-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555;font-weight:500;min-width:120px;display:inline-block}.timeline-details[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-top:8px}.interview-rounds[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.interview-round[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:6px;padding:12px}.round-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid #eee}.round-header[_ngcontent-%COMP%]   .round-number[_ngcontent-%COMP%]{background:teal;color:#fff;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.round-header[_ngcontent-%COMP%]   .round-type[_ngcontent-%COMP%]{color:#666;font-size:14px;font-weight:500}.round-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:13px}.rating-stars[_ngcontent-%COMP%]{display:inline-flex;gap:2px}.rating-stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ddd;font-size:12px}.rating-stars[_ngcontent-%COMP%]   i.filled[_ngcontent-%COMP%]{color:#ffc107}.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.leave-assignment-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.leave-assignment-table[_ngcontent-%COMP%]   .balance-input[_ngcontent-%COMP%]{width:80px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;text-align:center;font-size:14px}.leave-assignment-table[_ngcontent-%COMP%]   .balance-input[_ngcontent-%COMP%]:disabled{background:#f8f9fa;border-color:transparent}.leave-assignment-table[_ngcontent-%COMP%]   .balance-input[_ngcontent-%COMP%]:not(:disabled){background:#fff;border-color:teal}.leave-assignment-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#f8f9fa}.leave-assignment-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #dee2e6}.year-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff;cursor:pointer}.year-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.text-muted[_ngcontent-%COMP%]{display:block;color:#6c757d;font-size:11px}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]{margin-bottom:24px;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:teal;color:#fff;padding:12px 16px}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{margin:0;border-radius:0;table-layout:fixed;width:100%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:18%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%;text-align:center}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:12%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:10%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:15%}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:10%;text-align:center}.document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .document-checklist[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:15%;text-align:center}.mandatory-row[_ngcontent-%COMP%]{background:#fff8f0}.expired-row[_ngcontent-%COMP%]{background:#fff0f0}.mandatory-indicator[_ngcontent-%COMP%]{color:#dc3545;font-weight:700;margin-left:4px}.file-link[_ngcontent-%COMP%]{color:teal;text-decoration:none;display:inline-flex;align-items:center;gap:4px;font-size:11px;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.file-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.file-upload-container[_ngcontent-%COMP%]{position:relative}.file-upload-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer}.file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;border:2px dashed #ccc;border-radius:8px;background:#f8f9fa;cursor:pointer;transition:all .2s}.file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal;margin-bottom:8px}.file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:13px}.file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]:hover{border-color:teal;background:#e0f2f2}.file-info[_ngcontent-%COMP%]{display:block;margin-top:8px;color:#666;font-size:12px}.file-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.badge-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.badge-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}']})};function gye(n,t){if(n&1&&(o(0,"div",37),l(1),a()),n&2){let e=p().$implicit;c(),_(e.description)}}function fye(n,t){if(n&1){let e=F();o(0,"div",26)(1,"div",27),x("click",function(){let r=g(e).$implicit,s=p();return f(s.selectCategory(r))}),o(2,"div",28),l(3),a(),o(4,"div",29),l(5),a(),b(6,gye,2,1,"div",30),o(7,"div",31),l(8),a()(),o(9,"div",32)(10,"button",33),x("click",function(r){let s=g(e).$implicit;return p().openEditCategoryModal(s),f(r.stopPropagation())}),y(11,"i",34),a(),o(12,"button",35),x("click",function(r){let s=g(e).$implicit;return p().deleteCategory(s),f(r.stopPropagation())}),y(13,"i",36),a()()()}if(n&2){let e=t.$implicit,i=p();ie("inactive",!e.active)("selected",i.selectedCategoryId===e.id),c(3),_(e.code),c(2),_(e.name),c(),m("ngIf",e.description),c(2),D("",i.getTypesCountForCategory(e.id)," document types")}}function hye(n,t){n&1&&(o(0,"div",38)(1,"p"),l(2,'No categories found. Click "Init Categories" to create default categories.'),a()())}function _ye(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function vye(n,t){n&1&&(o(0,"tr")(1,"td",39),l(2,"No document types found."),a()())}function xye(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",40),l(9),a()(),o(10,"td")(11,"span",40),l(12),a()(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",40),l(17),a()(),o(18,"td")(19,"div",41)(20,"button",33),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(21,"i",34),a(),o(22,"button",35),x("click",function(){let r=g(e).$implicit,s=p();return f(s.delete(r))}),y(23,"i",36),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),_((e.category==null?null:e.category.name)||"-"),c(2),ie("badge-warning",e.isMandatory)("badge-secondary",!e.isMandatory),c(),D(" ",e.isMandatory?"Yes":"No"," "),c(2),ie("badge-info",e.hasExpiry)("badge-secondary",!e.hasExpiry),c(),D(" ",e.hasExpiry?"Yes":"No"," "),c(2),_(e.hasExpiry?e.defaultReminderDays+" days":"-"),c(2),ie("badge-success",e.active)("badge-secondary",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function yye(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.name)}}function Cye(n,t){if(n&1){let e=F();o(0,"div",48)(1,"div",49)(2,"label"),l(3,"Default Reminder Days"),a(),o(4,"input",63),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editing.defaultReminderDays,r)||(s.editing.defaultReminderDays=r),f(r)}),a()(),o(5,"div",49)(6,"label"),l(7,"Sort Order"),a(),o(8,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.editing.sortOrder,r)||(s.editing.sortOrder=r),f(r)}),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.editing.defaultReminderDays),c(4),M("ngModel",e.editing.sortOrder)}}function bye(n,t){n&1&&y(0,"i",65)}function Mye(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",44)(3,"h3"),l(4),a(),o(5,"button",45),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",46)(8,"form",47),x("ngSubmit",function(){g(e);let r=p();return f(r.save())}),o(9,"div",48)(10,"div",49)(11,"label"),l(12,"Code *"),a(),o(13,"input",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.code,r)||(s.editing.code=r),f(r)}),a()(),o(14,"div",49)(15,"label"),l(16,"Name *"),a(),o(17,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.name,r)||(s.editing.name=r),f(r)}),a()()(),o(18,"div",49)(19,"label"),l(20,"Category"),a(),o(21,"select",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.category,r)||(s.editing.category=r),f(r)}),o(22,"option",18),l(23,"-- Select Category --"),a(),b(24,yye,2,2,"option",19),a()(),o(25,"div",49)(26,"label"),l(27,"Description"),a(),o(28,"textarea",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.description,r)||(s.editing.description=r),f(r)}),a()(),o(29,"div",48)(30,"div",49)(31,"label",54)(32,"input",55),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.isMandatory,r)||(s.editing.isMandatory=r),f(r)}),a(),l(33," Mandatory Document "),a()(),o(34,"div",49)(35,"label",54)(36,"input",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.hasExpiry,r)||(s.editing.hasExpiry=r),f(r)}),a(),l(37," Has Expiry Date "),a()()(),b(38,Cye,9,2,"div",57),o(39,"div",49)(40,"label",54)(41,"input",58),S("ngModelChange",function(r){g(e);let s=p();return P(s.editing.active,r)||(s.editing.active=r),f(r)}),a(),l(42," Active "),a()(),o(43,"div",59)(44,"button",60),l(45,"Cancel"),a(),o(46,"button",61),b(47,bye,1,0,"i",62),l(48),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditMode?"Edit":"Add"," Document Type"),c(9),M("ngModel",e.editing.code),c(4),M("ngModel",e.editing.name),c(4),M("ngModel",e.editing.category),c(),m("ngValue",null),c(2),m("ngForOf",e.categories),c(4),M("ngModel",e.editing.description),c(4),M("ngModel",e.editing.isMandatory),c(4),M("ngModel",e.editing.hasExpiry),c(2),m("ngIf",e.editing.hasExpiry),c(3),M("ngModel",e.editing.active),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditMode?"Update":"Save"," ")}}function Sye(n,t){n&1&&y(0,"i",65)}function Pye(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",44)(3,"h3"),l(4),a(),o(5,"button",45),x("click",function(){g(e);let r=p();return f(r.closeCategoryModal())}),l(6,"\xD7"),a()(),o(7,"div",46)(8,"form",47),x("ngSubmit",function(){g(e);let r=p();return f(r.saveCategory())}),o(9,"div",48)(10,"div",49)(11,"label"),l(12,"Code *"),a(),o(13,"input",66),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingCategory.code,r)||(s.editingCategory.code=r),f(r)}),a()(),o(14,"div",49)(15,"label"),l(16,"Name *"),a(),o(17,"input",67),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingCategory.name,r)||(s.editingCategory.name=r),f(r)}),a()()(),o(18,"div",49)(19,"label"),l(20,"Description"),a(),o(21,"textarea",68),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingCategory.description,r)||(s.editingCategory.description=r),f(r)}),a()(),o(22,"div",48)(23,"div",49)(24,"label"),l(25,"Sort Order"),a(),o(26,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingCategory.sortOrder,r)||(s.editingCategory.sortOrder=r),f(r)}),a()(),o(27,"div",49)(28,"label",54)(29,"input",70),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingCategory.active,r)||(s.editingCategory.active=r),f(r)}),a(),l(30," Active "),a()()(),o(31,"div",59)(32,"button",71),x("click",function(){g(e);let r=p();return f(r.closeCategoryModal())}),l(33,"Cancel"),a(),o(34,"button",61),b(35,Sye,1,0,"i",62),l(36),a()()()()()()}if(n&2){let e=p();c(4),D("",e.isEditCategoryMode?"Edit":"Add"," Category"),c(9),M("ngModel",e.editingCategory.code),c(4),M("ngModel",e.editingCategory.name),c(4),M("ngModel",e.editingCategory.description),c(5),M("ngModel",e.editingCategory.sortOrder),c(3),M("ngModel",e.editingCategory.active),c(3),m("disabled",e.savingCategory),c(2),m("disabled",e.savingCategory),c(),m("ngIf",e.savingCategory),c(),D(" ",e.savingCategory?"Saving...":e.isEditCategoryMode?"Update":"Save"," ")}}var _2=class n{constructor(t,e,i){this.documentService=t;this.toastService=e;this.cdr=i}documentTypes=[];categories=[];filteredTypes=[];selectedCategoryId=null;searchTerm="";showModal=!1;isEditMode=!1;loading=!1;saving=!1;savingCategory=!1;editing=this.getEmptyType();showCategoryModal=!1;isEditCategoryMode=!1;editingCategory=this.getEmptyCategory();ngOnInit(){this.loadData()}loadData(){this.loading=!0;let t=0,e=2,i=()=>{t++,t>=e&&(this.loading=!1)};this.documentService.getAllCategories().subscribe({next:r=>{this.categories=r,i()},error:r=>{console.error("Error loading categories:",r),i()}}),this.documentService.getAllTypes().subscribe({next:r=>{this.documentTypes=r,this.filterTypes(),i()},error:r=>{console.error("Error loading document types:",r),i()}})}filterTypes(){let t=this.documentTypes;if(this.selectedCategoryId&&(t=t.filter(e=>e.category?.id===this.selectedCategoryId)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.code.toLowerCase().includes(e))}this.filteredTypes=t}onCategoryChange(){this.filterTypes()}onSearchChange(){this.filterTypes()}selectCategory(t){this.selectedCategoryId===t.id?this.selectedCategoryId=null:this.selectedCategoryId=t.id||null,this.filterTypes()}getTypesCountForCategory(t){return t?this.documentTypes.filter(e=>e.category?.id===t).length:0}getEmptyType(){return{code:"",name:"",description:"",isMandatory:!1,hasExpiry:!1,defaultReminderDays:30,sortOrder:0,active:!0}}getEmptyCategory(){return{code:"",name:"",description:"",sortOrder:0,active:!0}}openModal(){this.isEditMode=!1,this.editing=this.getEmptyType(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.editing=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}save(){this.saving||(this.saving=!0,this.isEditMode&&this.editing.id?this.documentService.updateType(this.editing.id,this.editing).subscribe({next:()=>{this.saving=!1,this.loadData(),this.closeModal()},error:t=>{this.saving=!1,console.error("Error updating:",t)}}):this.documentService.createType(this.editing).subscribe({next:()=>{this.saving=!1,this.loadData(),this.closeModal()},error:t=>{this.saving=!1,console.error("Error creating:",t)}}))}delete(t){t.id&&confirm(`Are you sure you want to delete "${t.name}"?`)&&this.documentService.deleteType(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting:",e)})}openCategoryModal(){this.isEditCategoryMode=!1,this.editingCategory=this.getEmptyCategory(),this.showCategoryModal=!0}openEditCategoryModal(t){this.isEditCategoryMode=!0,this.editingCategory=me({},t),this.showCategoryModal=!0}closeCategoryModal(){this.showCategoryModal=!1}saveCategory(){this.savingCategory||(this.savingCategory=!0,this.isEditCategoryMode&&this.editingCategory.id?this.documentService.updateCategory(this.editingCategory.id,this.editingCategory).subscribe({next:()=>{this.savingCategory=!1,this.loadData(),this.closeCategoryModal()},error:t=>{this.savingCategory=!1,console.error("Error updating category:",t)}}):this.documentService.createCategory(this.editingCategory).subscribe({next:()=>{this.savingCategory=!1,this.loadData(),this.closeCategoryModal()},error:t=>{this.savingCategory=!1,console.error("Error creating category:",t)}}))}deleteCategory(t){t.id&&confirm(`Are you sure you want to delete category "${t.name}"? This may affect document types.`)&&this.documentService.deleteCategory(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting category:",e)})}initDefaultCategories(){this.documentService.initCategories().subscribe({next:()=>{this.toastService.success("Default categories initialized successfully!"),this.loadData()},error:t=>{console.error("Error initializing categories:",t),this.toastService.error("Error initializing categories")}})}static \u0275fac=function(e){return new(e||n)(V(gc),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-document-types"]],standalone:!1,decls:74,vars:10,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-magic"],[1,"fas","fa-folder-plus"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card","categories-section"],[1,"categories-grid"],["class","category-card",3,"inactive","selected",4,"ngFor","ngForOf"],["class","category-card empty",4,"ngIf"],[1,"card"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Search by name or code...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[1,"category-card"],[1,"category-info",2,"cursor","pointer",3,"click"],[1,"category-code"],[1,"category-name"],["class","category-desc",4,"ngIf"],[1,"category-count"],[1,"category-actions"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"category-desc"],[1,"category-card","empty"],["colspan","8",1,"text-center"],[1,"badge"],[1,"action-buttons"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","code","required","","placeholder","e.g., PASSPORT",3,"ngModelChange","ngModel"],["type","text","name","name","required","","placeholder","e.g., Passport",3,"ngModelChange","ngModel"],["name","category",3,"ngModelChange","ngModel"],["name","description","placeholder","Enter description",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","isMandatory",3,"ngModelChange","ngModel"],["type","checkbox","name","hasExpiry",3,"ngModelChange","ngModel"],["class","form-row",4,"ngIf"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],["type","number","name","defaultReminderDays","min","1","max","365",3,"ngModelChange","ngModel"],["type","number","name","sortOrder","min","0",3,"ngModelChange","ngModel"],[1,"fas","fa-spinner","fa-spin"],["type","text","name","catCode","required","","placeholder","e.g., ID_WORK",3,"ngModelChange","ngModel"],["type","text","name","catName","required","","placeholder","e.g., ID & Work Authorization",3,"ngModelChange","ngModel"],["name","catDescription","placeholder","Enter description",3,"ngModelChange","ngModel"],["type","number","name","catSortOrder","min","0",3,"ngModelChange","ngModel"],["type","checkbox","name","catActive",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Document Types"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"HR Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Document Management"),a(),o(16,"span"),l(17,"/"),a(),o(18,"span"),l(19,"Document Types"),a()()(),o(20,"div",4)(21,"button",5),x("click",function(){return i.initDefaultCategories()}),y(22,"i",6),l(23," Init Categories "),a(),o(24,"button",5),x("click",function(){return i.openCategoryModal()}),y(25,"i",7),l(26," Add Category "),a(),o(27,"button",8),x("click",function(){return i.openModal()}),y(28,"i",9),l(29," Add Document Type "),a()()(),o(30,"div",10)(31,"h3"),l(32,"Document Categories"),a(),o(33,"div",11),b(34,fye,14,8,"div",12)(35,hye,3,0,"div",13),a()(),o(36,"div",14)(37,"div",15)(38,"div",16)(39,"label"),l(40,"Filter by Category"),a(),o(41,"select",17),S("ngModelChange",function(s){return P(i.selectedCategoryId,s)||(i.selectedCategoryId=s),s}),x("change",function(){return i.onCategoryChange()}),o(42,"option",18),l(43,"All Categories"),a(),b(44,_ye,2,2,"option",19),a()(),o(45,"div",16)(46,"label"),l(47,"Search"),a(),o(48,"input",20),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("input",function(){return i.onSearchChange()}),a()()(),o(49,"div",21)(50,"table",22)(51,"thead")(52,"tr")(53,"th"),l(54,"Code"),a(),o(55,"th"),l(56,"Name"),a(),o(57,"th"),l(58,"Category"),a(),o(59,"th"),l(60,"Mandatory"),a(),o(61,"th"),l(62,"Has Expiry"),a(),o(63,"th"),l(64,"Reminder Days"),a(),o(65,"th"),l(66,"Status"),a(),o(67,"th"),l(68,"Actions"),a()()(),o(69,"tbody"),b(70,vye,3,0,"tr",23)(71,xye,24,19,"tr",24),a()()()()(),b(72,Mye,49,15,"div",25)(73,Pye,37,10,"div",25)),e&2&&(c(34),m("ngForOf",i.categories),c(),m("ngIf",i.categories.length===0),c(6),M("ngModel",i.selectedCategoryId),c(),m("ngValue",null),c(2),m("ngForOf",i.categories),c(4),M("ngModel",i.searchTerm),c(22),m("ngIf",i.filteredTypes.length===0),c(),m("ngForOf",i.filteredTypes),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showCategoryModal))},dependencies:[Se,be,pi,je,We,Ie,Mt,Yt,Ue,Oe,di,cn,Xt,fr,Ee,li,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.categories-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.categories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px}.category-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:15px;display:flex;justify-content:space-between;align-items:flex-start}.category-card.inactive[_ngcontent-%COMP%]{opacity:.6}.category-card.empty[_ngcontent-%COMP%]{grid-column:1/-1;justify-content:center;text-align:center;color:#666}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-code[_ngcontent-%COMP%]{font-size:12px;color:teal;font-weight:600}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-desc[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:5px}.category-card[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.filters[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;min-width:200px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#666}.filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}'],changeDetection:0})};function wye(n,t){if(n&1&&(o(0,"tr")(1,"td",29),l(2),a()()),n&2){let e=p(2);c(2),D("No documents expiring within ",e.expiryDays," days.")}}function Eye(n,t){if(n&1){let e=F();o(0,"button",38),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.resetReminder(r))}),y(1,"i",39),a()}}function Oye(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"a",30),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),l(3),a(),o(4,"div",31),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",32),l(14),a()(),o(15,"td")(16,"span",33),l(17),a()(),o(18,"td")(19,"div",34)(20,"button",35),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),y(21,"i",36),a(),b(22,Eye,2,0,"button",37),a()()()}if(n&2){let e=t.$implicit,i=p(2);bi(i.getExpiryClass(e.expiryDate)),c(3),Ge(" ",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName," "),c(2),_(e.employee==null?null:e.employee.employeeCode),c(2),_(e.documentType==null?null:e.documentType.name),c(2),_(e.documentNumber||"-"),c(2),_(i.formatDate(e.expiryDate)),c(2),bi(i.getExpiryClass(e.expiryDate)),c(),D(" ",i.getDaysUntilExpiry(e.expiryDate)," days "),c(2),ie("badge-success",e.verificationStatus==="VERIFIED")("badge-warning",e.verificationStatus==="PENDING")("badge-danger",e.verificationStatus==="REJECTED"),c(),D(" ",e.verificationStatus," "),c(5),m("ngIf",e.reminderSent)}}function Tye(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22)(2,"label"),l(3,"Show documents expiring within:"),a(),o(4,"select",23),S("ngModelChange",function(r){g(e);let s=p();return P(s.expiryDays,r)||(s.expiryDays=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onExpiryDaysChange())}),o(5,"option",24),l(6,"7 days"),a(),o(7,"option",24),l(8,"14 days"),a(),o(9,"option",24),l(10,"30 days"),a(),o(11,"option",24),l(12,"60 days"),a(),o(13,"option",24),l(14,"90 days"),a()()(),o(15,"div",25)(16,"table",26)(17,"thead")(18,"tr")(19,"th"),l(20,"Employee"),a(),o(21,"th"),l(22,"Document Type"),a(),o(23,"th"),l(24,"Document Number"),a(),o(25,"th"),l(26,"Expiry Date"),a(),o(27,"th"),l(28,"Days Left"),a(),o(29,"th"),l(30,"Status"),a(),o(31,"th"),l(32,"Actions"),a()()(),o(33,"tbody"),b(34,wye,3,1,"tr",27)(35,Oye,23,19,"tr",28),a()()()()}if(n&2){let e=p();c(4),M("ngModel",e.expiryDays),c(),m("value",7),c(2),m("value",14),c(2),m("value",30),c(2),m("value",60),c(2),m("value",90),c(21),m("ngIf",e.expiringDocuments.length===0),c(),m("ngForOf",e.expiringDocuments)}}function kye(n,t){n&1&&(o(0,"tr")(1,"td",41),l(2,"No expired documents."),a()())}function Iye(n,t){if(n&1){let e=F();o(0,"button",38),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.resetReminder(r))}),y(1,"i",39),a()}}function Dye(n,t){if(n&1){let e=F();o(0,"tr",42)(1,"td")(2,"a",30),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),l(3),a(),o(4,"div",31),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",43),l(14),a()(),o(15,"td")(16,"div",34)(17,"button",35),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),y(18,"i",36),a(),b(19,Iye,2,0,"button",37),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),Ge(" ",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName," "),c(2),_(e.employee==null?null:e.employee.employeeCode),c(2),_(e.documentType==null?null:e.documentType.name),c(2),_(e.documentNumber||"-"),c(2),_(i.formatDate(e.expiryDate)),c(3),D(" ",-i.getDaysUntilExpiry(e.expiryDate)," days overdue "),c(5),m("ngIf",e.reminderSent)}}function Aye(n,t){if(n&1&&(o(0,"div",21)(1,"div",25)(2,"table",26)(3,"thead")(4,"tr")(5,"th"),l(6,"Employee"),a(),o(7,"th"),l(8,"Document Type"),a(),o(9,"th"),l(10,"Document Number"),a(),o(11,"th"),l(12,"Expired On"),a(),o(13,"th"),l(14,"Days Overdue"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,kye,3,0,"tr",27)(19,Dye,20,8,"tr",40),a()()()()),n&2){let e=p();c(18),m("ngIf",e.expiredDocuments.length===0),c(),m("ngForOf",e.expiredDocuments)}}function Rye(n,t){n&1&&(o(0,"tr")(1,"td",41),l(2,"No documents pending verification."),a()())}function Fye(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"a",30),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),l(3),a(),o(4,"div",31),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td")(15,"div",34)(16,"button",45),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.verifyDocument(r,"VERIFIED"))}),y(17,"i",46),a(),o(18,"button",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.verifyDocument(r,"REJECTED"))}),y(19,"i",48),a(),o(20,"button",35),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewEmployee(r))}),y(21,"i",36),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),Ge(" ",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName," "),c(2),_(e.employee==null?null:e.employee.employeeCode),c(2),_(e.documentType==null?null:e.documentType.name),c(2),_(e.documentNumber||"-"),c(2),_(i.formatDate(e.uploadedAt)),c(2),_(e.uploadedBy||"-")}}function Nye(n,t){if(n&1&&(o(0,"div",21)(1,"div",25)(2,"table",26)(3,"thead")(4,"tr")(5,"th"),l(6,"Employee"),a(),o(7,"th"),l(8,"Document Type"),a(),o(9,"th"),l(10,"Document Number"),a(),o(11,"th"),l(12,"Uploaded"),a(),o(13,"th"),l(14,"Uploaded By"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,Rye,3,0,"tr",27)(19,Fye,22,7,"tr",44),a()()()()),n&2){let e=p();c(18),m("ngIf",e.pendingVerification.length===0),c(),m("ngForOf",e.pendingVerification)}}var v2=class n{constructor(t,e,i,r){this.documentService=t;this.router=e;this.toastService=i;this.cdr=r}expiringDocuments=[];expiredDocuments=[];pendingVerification=[];activeTab="expiring";expiryDays=30;loading=!1;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.documentService.getExpiringDocuments(this.expiryDays).subscribe({next:t=>this.expiringDocuments=t,error:t=>console.error("Error loading expiring documents:",t)}),this.documentService.getExpiredDocuments().subscribe({next:t=>this.expiredDocuments=t,error:t=>console.error("Error loading expired documents:",t)}),this.documentService.getPendingVerification().subscribe({next:t=>{this.pendingVerification=t,this.loading=!1},error:t=>{console.error("Error loading pending verification:",t),this.loading=!1}})}onExpiryDaysChange(){this.documentService.getExpiringDocuments(this.expiryDays).subscribe({next:t=>this.expiringDocuments=t,error:t=>console.error("Error loading expiring documents:",t)})}setActiveTab(t){this.activeTab=t}getDaysUntilExpiry(t){if(!t)return 0;let e=new Date(t),i=new Date,r=e.getTime()-i.getTime();return Math.ceil(r/(1e3*60*60*24))}getExpiryClass(t){let e=this.getDaysUntilExpiry(t);return e<=0?"expired":e<=7?"critical":e<=30?"warning":"normal"}verifyDocument(t,e){if(!t.id)return;let i=e==="REJECTED"?prompt("Enter rejection reason:"):"";this.documentService.verifyDocument(t.id,e,i||void 0).subscribe({next:()=>{this.toastService.success(`Document ${e.toLowerCase()} successfully!`),this.loadData()},error:r=>{console.error("Error verifying document:",r),this.toastService.error("Error verifying document")}})}resetReminder(t){t.id&&this.documentService.resetReminder(t.id).subscribe({next:()=>{this.toastService.success("Reminder reset successfully. Notification will be sent again when expiry approaches."),this.loadData()},error:e=>{console.error("Error resetting reminder:",e),this.toastService.error("Error resetting reminder")}})}runExpiryCheck(){this.documentService.checkExpiry().subscribe({next:t=>{this.toastService.success(`Expiry check completed. Processed: ${t.processed}, Notifications: ${t.notifications}`),this.loadData()},error:t=>{console.error("Error running expiry check:",t),this.toastService.error("Error running expiry check")}})}viewEmployee(t){t.employee?.id&&this.router.navigate(["/app/hr/employees",t.employee.id])}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}static \u0275fac=function(e){return new(e||n)(V(gc),V(tn),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-document-expiry"]],standalone:!1,decls:62,vars:15,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-sync"],[1,"stats-cards"],[1,"stat-card","warning",3,"click"],[1,"stat-icon"],[1,"fas","fa-clock"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","danger",3,"click"],[1,"fas","fa-exclamation-triangle"],[1,"stat-card","info",3,"click"],[1,"fas","fa-hourglass-half"],[1,"card"],[1,"tabs"],[1,"tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"filter-bar"],[3,"ngModelChange","change","ngModel"],[3,"value"],[1,"table-container"],[1,"table"],[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],["colspan","7",1,"text-center"],[1,"employee-link",3,"click"],[1,"employee-code"],[1,"days-badge"],[1,"badge"],[1,"action-buttons"],["title","View Employee",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-info","title","Reset Reminder",3,"click",4,"ngIf"],["title","Reset Reminder",1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-bell-slash"],["class","expired",4,"ngFor","ngForOf"],["colspan","6",1,"text-center"],[1,"expired"],[1,"days-badge","expired"],[4,"ngFor","ngForOf"],["title","Verify",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Document Expiry Dashboard"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"HR Management"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Document Management"),a(),o(16,"span"),l(17,"/"),a(),o(18,"span"),l(19,"Expiry Reminders"),a()()(),o(20,"button",4),x("click",function(){return i.runExpiryCheck()}),y(21,"i",5),l(22," Run Expiry Check "),a()(),o(23,"div",6)(24,"div",7),x("click",function(){return i.setActiveTab("expiring")}),o(25,"div",8),y(26,"i",9),a(),o(27,"div",10)(28,"div",11),l(29),a(),o(30,"div",12),l(31,"Expiring Soon"),a()()(),o(32,"div",13),x("click",function(){return i.setActiveTab("expired")}),o(33,"div",8),y(34,"i",14),a(),o(35,"div",10)(36,"div",11),l(37),a(),o(38,"div",12),l(39,"Expired"),a()()(),o(40,"div",15),x("click",function(){return i.setActiveTab("pending")}),o(41,"div",8),y(42,"i",16),a(),o(43,"div",10)(44,"div",11),l(45),a(),o(46,"div",12),l(47,"Pending Verification"),a()()()(),o(48,"div",17)(49,"div",18)(50,"button",19),x("click",function(){return i.setActiveTab("expiring")}),y(51,"i",9),l(52),a(),o(53,"button",19),x("click",function(){return i.setActiveTab("expired")}),y(54,"i",14),l(55),a(),o(56,"button",19),x("click",function(){return i.setActiveTab("pending")}),y(57,"i",16),l(58),a()(),b(59,Tye,36,8,"div",20)(60,Aye,20,2,"div",20)(61,Nye,20,2,"div",20),a()()),e&2&&(c(29),_(i.expiringDocuments.length),c(8),_(i.expiredDocuments.length),c(8),_(i.pendingVerification.length),c(5),ie("active",i.activeTab==="expiring"),c(2),D(" Expiring Soon (",i.expiringDocuments.length,") "),c(),ie("active",i.activeTab==="expired"),c(2),D(" Expired (",i.expiredDocuments.length,") "),c(),ie("active",i.activeTab==="pending"),c(2),D(" Pending Verification (",i.pendingVerification.length,") "),c(),m("ngIf",i.activeTab==="expiring"),c(),m("ngIf",i.activeTab==="expired"),c(),m("ngIf",i.activeTab==="pending"))},dependencies:[Se,be,je,We,Ue,Oe,Ee,ht],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v24/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_ngcontent-%COMP%]:root{--primary-color: #00796b;--primary-dark: #004d40;--primary-light: #26a69a;--secondary-color: #ffffff;--bg-color: #f5f7fa;--sidebar-bg: #ffffff;--card-bg: #ffffff;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #e0e0e0;--success-color: #28a745;--warning-color: #ffc107;--danger-color: #dc3545;--info-color: #17a2b8}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-color);color:var(--text-primary);min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:var(--success-color);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.875rem}.card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 2px 10px #00000014;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color);margin-left:2px}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:4px}.form-hint.warning[_ngcontent-%COMP%]{color:var(--warning-color)}.form-hint.error[_ngcontent-%COMP%]{color:var(--danger-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger-color)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.form-control[readonly][_ngcontent-%COMP%]{background-color:var(--bg-color);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:var(--danger-color);border:1px solid rgba(220,53,69,.2)}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:var(--success-color);border:1px solid rgba(40,167,69,.2)}@media(max-width:768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-large[_ngcontent-%COMP%]{max-width:700px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00796b08}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.badge-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.badge-danger[_ngcontent-%COMP%]{background:#dc35451a;color:var(--danger-color)}.badge-info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.breadcrumb[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.875rem;color:var(--text-secondary)}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background:#00796b1a;color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]   .icon.success[_ngcontent-%COMP%]{background:#28a7451a;color:var(--success-color)}.stat-card[_ngcontent-%COMP%]   .icon.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#d39e00}.stat-card[_ngcontent-%COMP%]   .icon.info[_ngcontent-%COMP%]{background:#17a2b81a;color:var(--info-color)}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal-lg[_ngcontent-%COMP%], .modal-content.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);position:relative;z-index:10;padding:4px 8px;line-height:1;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:992px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.grid-4[_ngcontent-%COMP%], .grid-3[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:0 12px;gap:8px;transition:all .3s ease;min-width:200px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #00796b1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px 0;outline:none;flex:1;font-size:.9rem;min-width:150px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:background .3s ease}.search-box[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.employee-code-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;cursor:pointer;font-weight:500;transition:all .2s ease}.employee-code-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-weight:500;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{color:var(--primary-color);border-bottom-color:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.settings-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#666}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;display:flex;align-items:center;gap:15px;cursor:pointer;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.stat-card.warning[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#ffc107}.stat-card.danger[_ngcontent-%COMP%]{border-left:4px solid #dc3545}.stat-card.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#dc3545}.stat-card.info[_ngcontent-%COMP%]{border-left:4px solid #17a2b8}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#17a2b8}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:32px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:0;overflow:hidden}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eee;background:#f8f9fa}.tab[_ngcontent-%COMP%]{padding:15px 25px;border:none;background:none;cursor:pointer;font-size:14px;color:#666;display:flex;align-items:center;gap:8px;transition:all .2s}.tab[_ngcontent-%COMP%]:hover{color:teal;background:#f0f0f0}.tab.active[_ngcontent-%COMP%]{color:teal;background:#fff;border-bottom:2px solid #008080;margin-bottom:-1px}.tab-content[_ngcontent-%COMP%]{padding:20px}.filter-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:15px}.filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#666}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px}.table[_ngcontent-%COMP%]   tr.expired[_ngcontent-%COMP%]{background-color:#fff5f5}.table[_ngcontent-%COMP%]   tr.critical[_ngcontent-%COMP%]{background-color:#fff0f0}.table[_ngcontent-%COMP%]   tr.warning[_ngcontent-%COMP%]{background-color:#fffbeb}.employee-link[_ngcontent-%COMP%]{color:teal;cursor:pointer;text-decoration:none;font-weight:500}.employee-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.employee-code[_ngcontent-%COMP%]{font-size:12px;color:#666}.days-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500}.days-badge.normal[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.days-badge.warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.days-badge.critical[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.days-badge.expired[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn.btn-info[_ngcontent-%COMP%]:hover{background:#138496}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}'],changeDetection:0})};var zs=class n{constructor(t){this.http=t}baseUrl="/api/mis-dashboard";getHRStats(){return this.http.get(`${this.baseUrl}/hr`)}getPayrollStats(){return this.http.get(`${this.baseUrl}/payroll`)}getAttendanceStats(){return this.http.get(`${this.baseUrl}/attendance`)}getPerformanceStats(){return this.http.get(`${this.baseUrl}/performance`)}getReportFields(){return this.http.get(`${this.baseUrl}/report-fields`)}getReportTemplates(){return this.http.get(`${this.baseUrl}/report-templates`)}saveReportTemplate(t){return t.id?this.http.put(`${this.baseUrl}/report-templates/${t.id}`,t):this.http.post(`${this.baseUrl}/report-templates`,t)}deleteReportTemplate(t){return this.http.delete(`${this.baseUrl}/report-templates/${t}`)}generateReport(t,e){return this.http.get(`${this.baseUrl}/generate-report/${t}`,{params:{format:e},responseType:"blob"})}exportDashboard(t,e){return this.http.get(`${this.baseUrl}/export/${t}`,{params:{format:e},responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function Lye(n,t){n&1&&(o(0,"div",15),y(1,"i",16),o(2,"span"),l(3,"Loading dashboard..."),a()())}function Vye(n,t){if(n&1&&(o(0,"div",77)(1,"div",78),y(2,"div",79)(3,"div",80),a(),o(4,"span",81),l(5),a()()),n&2){let e=t.$implicit;c(2),jt("height",e.hires/15*100,"%"),c(),jt("height",e.exits/15*100,"%"),c(2),_(e.month)}}function Bye(n,t){if(n&1&&(o(0,"div",82)(1,"span",83),l(2),a(),o(3,"div",84),y(4,"div",85),a(),o(5,"span",86),l(6),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.department),c(2),jt("width",e.count/i.getMaxDepartmentCount()*100,"%"),c(2),_(e.count)}}function Uye(n,t){if(n&1&&(o(0,"div",87),y(1,"div",88),o(2,"span",89),l(3),a(),o(4,"span",90),l(5),a()()),n&2){let e=t.$implicit;c(),jt("height",e.count/70*100,"%"),c(2),_(e.count),c(2),_(e.range)}}function jye(n,t){if(n&1&&(o(0,"div",91)(1,"div",92)(2,"span",93),l(3),a(),o(4,"span",94),l(5),a()(),o(6,"div",95),y(7,"div",96),a()()),n&2){let e=t.$implicit,i=p(2);c(3),_(e.type),c(2),_(e.count),c(2),jt("width",e.count/i.stats.totalHeadcount*100,"%")}}function Wye(n,t){if(n&1&&(o(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20),y(4,"i",3),a(),o(5,"div",21)(6,"span",22),l(7),a(),o(8,"span",23),l(9,"Total Headcount"),a()()(),o(10,"div",24)(11,"div",20),y(12,"i",25),a(),o(13,"div",21)(14,"span",22),l(15),a(),o(16,"span",23),l(17,"Active Employees"),a()()(),o(18,"div",26)(19,"div",20),y(20,"i",27),a(),o(21,"div",21)(22,"span",22),l(23),a(),o(24,"span",23),l(25,"New Hires (Month)"),a()()(),o(26,"div",28)(27,"div",20),y(28,"i",29),a(),o(29,"div",21)(30,"span",22),l(31),a(),o(32,"span",23),l(33,"Exits (Month)"),a()()(),o(34,"div",30)(35,"div",20),y(36,"i",31),a(),o(37,"div",21)(38,"span",22),l(39),a(),o(40,"span",23),l(41,"Attrition Rate"),a()()()(),o(42,"div",32)(43,"div",33)(44,"div",34)(45,"h3"),y(46,"i",35),l(47," Hiring vs Exits Trend"),a()(),o(48,"div",36)(49,"div",37)(50,"div",38)(51,"span",39),y(52,"span",40),l(53," Hires"),a(),o(54,"span",39),y(55,"span",41),l(56," Exits"),a()(),o(57,"div",42),b(58,Vye,6,5,"div",43),a()()()(),o(59,"div",33)(60,"div",34)(61,"h3"),y(62,"i",44),l(63," Gender Diversity"),a()(),o(64,"div",36)(65,"div",45)(66,"div",46),Cm(),o(67,"svg",47),y(68,"circle",48)(69,"circle",49)(70,"circle",50),a(),bm(),o(71,"div",51)(72,"span",52),l(73),a(),o(74,"span",53),l(75,"Total"),a()()(),o(76,"div",54)(77,"div",39),y(78,"span",55),o(79,"span",53),l(80,"Male"),a(),o(81,"span",56),l(82),a()(),o(83,"div",39),y(84,"span",57),o(85,"span",53),l(86,"Female"),a(),o(87,"span",56),l(88),a()(),o(89,"div",39),y(90,"span",58),o(91,"span",53),l(92,"Other"),a(),o(93,"span",56),l(94),a()()()()()()(),o(95,"div",32)(96,"div",33)(97,"div",34)(98,"h3"),y(99,"i",59),l(100," Department Distribution"),a()(),o(101,"div",36)(102,"div",60),b(103,Bye,7,4,"div",61),a()()(),o(104,"div",33)(105,"div",34)(106,"h3"),y(107,"i",62),l(108," Age Distribution"),a()(),o(109,"div",36)(110,"div",63),b(111,Uye,6,4,"div",64),a()()(),o(112,"div",65)(113,"div",34)(114,"h3"),y(115,"i",66),l(116," Employment Types"),a()(),o(117,"div",36)(118,"div",67),b(119,jye,8,4,"div",68),a()()()(),o(120,"div",69)(121,"div",70),y(122,"i",71),o(123,"div",72)(124,"span",73),l(125),a(),o(126,"span",74),l(127,"Average Tenure"),a()()(),o(128,"div",70),y(129,"i",75),o(130,"div",72)(131,"span",73),l(132),a(),o(133,"span",74),l(134,"On Leave Today"),a()()(),o(135,"div",70),y(136,"i",76),o(137,"div",72)(138,"span",73),l(139),a(),o(140,"span",74),l(141,"Departments"),a()()()()()),n&2){let e=p();c(7),_(e.stats.totalHeadcount),c(8),_(e.stats.activeEmployees),c(8),_(e.stats.newHiresThisMonth),c(8),_(e.stats.exitsThisMonth),c(8),D("",e.stats.attritionRate,"%"),c(19),m("ngForOf",e.stats.monthlyHiringTrend),c(10),jt("stroke-dasharray",e.getGenderPercentage("male")*2.51+" 251"),c(),jt("stroke-dasharray",e.getGenderPercentage("female")*2.51+" 251")("stroke-dashoffset","-"+e.getGenderPercentage("male")*2.51),c(),jt("stroke-dasharray",e.getGenderPercentage("other")*2.51+" 251")("stroke-dashoffset","-"+(e.getGenderPercentage("male")+e.getGenderPercentage("female"))*2.51),c(3),_(e.stats.totalHeadcount),c(9),Ge("",e.stats.genderDiversity.male," (",e.getGenderPercentage("male"),"%)"),c(6),Ge("",e.stats.genderDiversity.female," (",e.getGenderPercentage("female"),"%)"),c(6),Ge("",e.stats.genderDiversity.other," (",e.getGenderPercentage("other"),"%)"),c(9),m("ngForOf",e.stats.departmentDistribution),c(8),m("ngForOf",e.stats.ageDistribution),c(8),m("ngForOf",e.stats.employmentTypeDistribution),c(6),D("",e.stats.avgTenure," yrs"),c(7),_(e.stats.onLeave),c(7),_(e.stats.departmentDistribution.length)}}var x2=class n{constructor(t){this.dashboardService=t}stats=null;loading=!1;error="";selectedPeriod="month";ngOnInit(){this.loadStats()}loadStats(){this.loading=!0,this.dashboardService.getHRStats().subscribe({next:t=>{this.stats=t,this.loading=!1},error:t=>{console.error("Error loading HR dashboard",t),this.stats=this.getMockStats(),this.loading=!1}})}getMockStats(){return{totalHeadcount:156,activeEmployees:148,onLeave:8,newHiresThisMonth:12,exitsThisMonth:3,attritionRate:4.2,avgTenure:3.5,genderDiversity:{male:92,female:58,other:6},departmentDistribution:[{department:"Engineering",count:45},{department:"Sales",count:32},{department:"Marketing",count:18},{department:"HR",count:12},{department:"Finance",count:24},{department:"Operations",count:25}],monthlyHiringTrend:[{month:"Jul",hires:8,exits:2},{month:"Aug",hires:10,exits:4},{month:"Sep",hires:6,exits:1},{month:"Oct",hires:14,exits:3},{month:"Nov",hires:9,exits:2},{month:"Dec",hires:12,exits:3}],ageDistribution:[{range:"18-25",count:28},{range:"26-35",count:62},{range:"36-45",count:38},{range:"46-55",count:20},{range:"55+",count:8}],employmentTypeDistribution:[{type:"Full-Time",count:120},{type:"Part-Time",count:15},{type:"Contract",count:12},{type:"Intern",count:9}]}}getGenderPercentage(t){if(!this.stats)return 0;let e=this.stats.genderDiversity.male+this.stats.genderDiversity.female+this.stats.genderDiversity.other,i=t==="male"?this.stats.genderDiversity.male:t==="female"?this.stats.genderDiversity.female:this.stats.genderDiversity.other;return Math.round(i/e*100)}getMaxDepartmentCount(){return this.stats?Math.max(...this.stats.departmentDistribution.map(t=>t.count)):0}exportDashboard(t){this.dashboardService.exportDashboard("hr",t).subscribe({next:e=>{let i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`hr-dashboard.${t}`,r.click(),window.URL.revokeObjectURL(i)},error:e=>console.error("Export failed",e)})}static \u0275fac=function(e){return new(e||n)(V(zs))};static \u0275cmp=_e({type:n,selectors:[["app-hr-dashboard"]],standalone:!1,decls:22,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"fas","fa-users"],[1,"subtitle"],[1,"header-actions"],[1,"period-select",3,"ngModelChange","ngModel"],["value","week"],["value","month"],["value","quarter"],["value","year"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"dashboard-content"],[1,"stats-row"],[1,"stat-card","primary"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","success"],[1,"fas","fa-user-check"],[1,"stat-card","warning"],[1,"fas","fa-user-plus"],[1,"stat-card","danger"],[1,"fas","fa-user-minus"],[1,"stat-card","info"],[1,"fas","fa-percentage"],[1,"charts-row"],[1,"chart-card"],[1,"card-header"],[1,"fas","fa-chart-line"],[1,"card-body"],[1,"bar-chart"],[1,"chart-legend"],[1,"legend-item"],[1,"dot","success"],[1,"dot","danger"],[1,"chart-bars"],["class","bar-group",4,"ngFor","ngForOf"],[1,"fas","fa-venus-mars"],[1,"donut-chart-container"],[1,"donut-chart"],["viewBox","0 0 100 100"],["cx","50","cy","50","r","40","stroke-dashoffset","0",1,"donut-segment","male"],["cx","50","cy","50","r","40",1,"donut-segment","female"],["cx","50","cy","50","r","40",1,"donut-segment","other"],[1,"donut-center"],[1,"total"],[1,"label"],[1,"donut-legend"],[1,"dot","male"],[1,"value"],[1,"dot","female"],[1,"dot","other"],[1,"fas","fa-building"],[1,"horizontal-bars"],["class","h-bar-item",4,"ngFor","ngForOf"],[1,"fas","fa-birthday-cake"],[1,"age-chart"],["class","age-bar",4,"ngFor","ngForOf"],[1,"chart-card","small"],[1,"fas","fa-briefcase"],[1,"type-list"],["class","type-item",4,"ngFor","ngForOf"],[1,"metrics-row"],[1,"metric-card"],[1,"fas","fa-clock"],[1,"metric-content"],[1,"metric-value"],[1,"metric-label"],[1,"fas","fa-bed"],[1,"fas","fa-chart-pie"],[1,"bar-group"],[1,"bars"],[1,"bar","hire"],[1,"bar","exit"],[1,"bar-label"],[1,"h-bar-item"],[1,"h-bar-label"],[1,"h-bar-track"],[1,"h-bar-fill"],[1,"h-bar-value"],[1,"age-bar"],[1,"age-bar-fill"],[1,"age-count"],[1,"age-label"],[1,"type-item"],[1,"type-info"],[1,"type-name"],[1,"type-count"],[1,"type-bar-track"],[1,"type-bar-fill"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," HR Dashboard"),a(),o(6,"p",4),l(7,"Workforce analytics and insights"),a()(),o(8,"div",5)(9,"select",6),S("ngModelChange",function(s){return P(i.selectedPeriod,s)||(i.selectedPeriod=s),s}),o(10,"option",7),l(11,"This Week"),a(),o(12,"option",8),l(13,"This Month"),a(),o(14,"option",9),l(15,"This Quarter"),a(),o(16,"option",10),l(17,"This Year"),a()(),o(18,"button",11),x("click",function(){return i.loadStats()}),y(19,"i",12),a()()(),b(20,Lye,4,0,"div",13)(21,Wye,142,29,"div",14),a()),e&2&&(c(9),M("ngModel",i.selectedPeriod),c(11),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.stats))},dependencies:[Se,be,je,We,Ue,Oe,Ee],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 60px)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0;display:flex;align-items:center;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:14px;cursor:pointer}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{padding:8px 12px;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;color:#666}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f5f5f5}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:60px;color:#666;font-size:16px}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:24px}@media(max-width:1200px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(max-width:768px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0080801a;color:teal}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.stat-card.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#dc35451a;color:#dc3545}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#17a2b81a;color:#17a2b8}.charts-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:24px}@media(max-width:992px){.charts-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.charts-row[_ngcontent-%COMP%]:last-of-type{grid-template-columns:repeat(3,1fr)}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f;overflow:hidden}.chart-card.small[_ngcontent-%COMP%]{grid-column:span 1}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#333;display:flex;align-items:center;gap:8px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.chart-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px}.bar-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:16px}.bar-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666}.bar-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.bar-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.success[_ngcontent-%COMP%]{background:#28a745}.bar-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.danger[_ngcontent-%COMP%]{background:#dc3545}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;height:160px;padding-top:20px}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:flex-end;height:140px}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:16px;border-radius:4px 4px 0 0;transition:height .3s}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar.hire[_ngcontent-%COMP%]{background:#28a745}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]   .bars[_ngcontent-%COMP%]   .bar.exit[_ngcontent-%COMP%]{background:#dc3545}.bar-chart[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar-group[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.donut-chart-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:32px}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]{position:relative;width:160px;height:160px}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(-90deg);width:100%;height:100%}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-segment[_ngcontent-%COMP%]{fill:none;stroke-width:12}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-segment.male[_ngcontent-%COMP%]{stroke:#4a90d9}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-segment.female[_ngcontent-%COMP%]{stroke:#e85d75}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-segment.other[_ngcontent-%COMP%]{stroke:#50c878}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:600;color:#333}.donut-chart-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.male[_ngcontent-%COMP%]{background:#4a90d9}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.female[_ngcontent-%COMP%]{background:#e85d75}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.other[_ngcontent-%COMP%]{background:#50c878}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#333;min-width:60px}.donut-chart-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#666}.horizontal-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.horizontal-bars[_ngcontent-%COMP%]   .h-bar-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.horizontal-bars[_ngcontent-%COMP%]   .h-bar-item[_ngcontent-%COMP%]   .h-bar-label[_ngcontent-%COMP%]{width:100px;font-size:13px;color:#333;text-align:right}.horizontal-bars[_ngcontent-%COMP%]   .h-bar-item[_ngcontent-%COMP%]   .h-bar-track[_ngcontent-%COMP%]{flex:1;height:20px;background:#f0f0f0;border-radius:10px;overflow:hidden}.horizontal-bars[_ngcontent-%COMP%]   .h-bar-item[_ngcontent-%COMP%]   .h-bar-track[_ngcontent-%COMP%]   .h-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,teal,#00a0a0);border-radius:10px;transition:width .5s}.horizontal-bars[_ngcontent-%COMP%]   .h-bar-item[_ngcontent-%COMP%]   .h-bar-value[_ngcontent-%COMP%]{width:40px;font-size:14px;font-weight:600;color:#333}.age-chart[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:180px}.age-chart[_ngcontent-%COMP%]   .age-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.age-chart[_ngcontent-%COMP%]   .age-bar[_ngcontent-%COMP%]   .age-bar-fill[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,teal,#00b3b3);border-radius:6px 6px 0 0;min-height:10px;transition:height .5s}.age-chart[_ngcontent-%COMP%]   .age-bar[_ngcontent-%COMP%]   .age-count[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;font-weight:600;color:#333}.age-chart[_ngcontent-%COMP%]   .age-bar[_ngcontent-%COMP%]   .age-label[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#666}.type-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.type-list[_ngcontent-%COMP%]   .type-item[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:6px}.type-list[_ngcontent-%COMP%]   .type-item[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]   .type-name[_ngcontent-%COMP%]{font-size:13px;color:#333}.type-list[_ngcontent-%COMP%]   .type-item[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]   .type-count[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:teal}.type-list[_ngcontent-%COMP%]   .type-item[_ngcontent-%COMP%]   .type-bar-track[_ngcontent-%COMP%]{height:8px;background:#f0f0f0;border-radius:4px;overflow:hidden}.type-list[_ngcontent-%COMP%]   .type-item[_ngcontent-%COMP%]   .type-bar-track[_ngcontent-%COMP%]   .type-bar-fill[_ngcontent-%COMP%]{height:100%;background:teal;border-radius:4px;transition:width .5s}.metrics-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}@media(max-width:768px){.metrics-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f}.metric-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:teal;width:50px;height:50px;background:#0080801a;border-radius:12px;display:flex;align-items:center;justify-content:center}.metric-card[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.metric-card[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#333}.metric-card[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})};var AL=()=>["#008080","#00a0a0","#00c0c0","#4a90d9","#6bb3f0","#8dcfff"];function zye(n,t){n&1&&(o(0,"div",14),y(1,"i",15),o(2,"span"),l(3,"Loading dashboard..."),a()())}function qye(n,t){if(n&1&&(o(0,"div",56)(1,"div",57),y(2,"div",58),a(),o(3,"div",59)(4,"span",60),l(5),a(),o(6,"span",61),l(7),a()()()),n&2){let e=t.$implicit,i=p(2);c(2),jt("height",e.cost/i.getMaxPayrollCost()*100,"%"),c(3),_(i.formatCurrency(e.cost)),c(2),_(e.month)}}function Hye(n,t){if(n&1&&(o(0,"div",62)(1,"div",63),y(2,"span",64),o(3,"span",65),l(4),a()(),o(5,"div",66),y(6,"div",67),a(),o(7,"span",68),l(8),a()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),jt("background",na(8,AL)[i]),c(2),_(e.category),c(2),jt("width",e.amount/r.getMaxDeduction()*100,"%")("background",na(9,AL)[i]),c(2),_(r.formatCurrency(e.amount))}}function Gye(n,t){if(n&1&&(o(0,"div",69)(1,"div",70)(2,"span",71),l(3),a(),o(4,"span",72),l(5),a()(),o(6,"div",73),y(7,"div",74),a(),o(8,"span",75),l(9),a()()),n&2){let e=t.$implicit,i=p(2);c(3),D("",e.hours,"h"),c(2),_(i.formatCurrency(e.cost)),c(2),jt("height",e.hours/600*100,"%"),c(2),_(e.month)}}function $ye(n,t){if(n&1&&(o(0,"div",76)(1,"span",77),l(2),a(),o(3,"div",78),y(4,"div",79),a(),o(5,"span",80),l(6),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.department),c(2),jt("width",e.cost/i.getMaxDeptPayroll()*100,"%"),c(2),_(i.formatCurrency(e.cost))}}function Yye(n,t){if(n&1&&(o(0,"div",81),y(1,"div",58),o(2,"span",82),l(3),a(),o(4,"span",83),l(5),a()()),n&2){let e=t.$implicit;c(),jt("height",e.count/50*100,"%"),c(2),_(e.count),c(2),_(e.range)}}function Jye(n,t){if(n&1&&(o(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),y(4,"i",20),a(),o(5,"div",21)(6,"span",22),l(7),a(),o(8,"span",23),l(9,"Total Payroll Cost"),a()()(),o(10,"div",24)(11,"div",19),y(12,"i",25),a(),o(13,"div",21)(14,"span",22),l(15),a(),o(16,"span",23),l(17,"Average Salary"),a()()(),o(18,"div",26)(19,"div",19),y(20,"i",27),a(),o(21,"div",21)(22,"span",22),l(23),a(),o(24,"span",23),l(25,"Total Deductions"),a()()(),o(26,"div",28)(27,"div",19),y(28,"i",29),a(),o(29,"div",21)(30,"span",22),l(31),a(),o(32,"span",23),l(33,"Overtime Pay"),a()()()(),o(34,"div",30)(35,"div",31)(36,"div",32)(37,"h3"),y(38,"i",33),l(39," Payroll Cost Trend"),a()(),o(40,"div",34)(41,"div",35)(42,"div",36),b(43,qye,8,4,"div",37),a()()()()(),o(44,"div",38)(45,"div",39)(46,"div",32)(47,"h3"),y(48,"i",40),l(49," Deductions Breakdown"),a()(),o(50,"div",34)(51,"div",41),b(52,Hye,9,10,"div",42),a()()(),o(53,"div",39)(54,"div",32)(55,"h3"),y(56,"i",29),l(57," Overtime Trend"),a()(),o(58,"div",34)(59,"div",43)(60,"div",44)(61,"span",45),y(62,"span",46),l(63," Hours"),a(),o(64,"span",45),y(65,"span",47),l(66," Cost"),a()(),o(67,"div",48),b(68,Gye,10,5,"div",49),a()()()()(),o(69,"div",38)(70,"div",39)(71,"div",32)(72,"h3"),y(73,"i",50),l(74," Department Payroll"),a()(),o(75,"div",34)(76,"div",51),b(77,$ye,7,4,"div",52),a()()(),o(78,"div",39)(79,"div",32)(80,"h3"),y(81,"i",53),l(82," Salary Distribution"),a()(),o(83,"div",34)(84,"div",54),b(85,Yye,6,4,"div",55),a()()()()()),n&2){let e=p();c(7),_(e.formatCurrency(e.stats.totalPayrollCost)),c(8),_(e.formatCurrency(e.stats.avgSalary)),c(8),_(e.formatCurrency(e.stats.totalDeductions)),c(8),_(e.formatCurrency(e.stats.totalOvertimePay)),c(12),m("ngForOf",e.stats.payrollTrend),c(9),m("ngForOf",e.stats.deductionsBreakdown),c(16),m("ngForOf",e.stats.overtimeTrend),c(9),m("ngForOf",e.stats.departmentPayroll),c(8),m("ngForOf",e.stats.salaryDistribution)}}var y2=class n{constructor(t){this.dashboardService=t}stats=null;loading=!1;selectedPeriod="month";ngOnInit(){this.loadStats()}loadStats(){this.loading=!0,this.dashboardService.getPayrollStats().subscribe({next:t=>{this.stats=t,this.loading=!1},error:t=>{console.error("Error loading payroll dashboard",t),this.stats=this.getMockStats(),this.loading=!1}})}getMockStats(){return{totalPayrollCost:125e4,avgSalary:75e3,totalDeductions:187500,totalOvertimePay:45e3,payrollTrend:[{month:"Jul",cost:118e4},{month:"Aug",cost:1195e3},{month:"Sep",cost:121e4},{month:"Oct",cost:123e4},{month:"Nov",cost:1245e3},{month:"Dec",cost:125e4}],deductionsBreakdown:[{category:"Federal Tax",amount:75e3},{category:"State Tax",amount:37500},{category:"Social Security",amount:35e3},{category:"Medicare",amount:18e3},{category:"Health Insurance",amount:15e3},{category:"401(k)",amount:7e3}],overtimeTrend:[{month:"Jul",hours:420,cost:38e3},{month:"Aug",hours:380,cost:35e3},{month:"Sep",hours:450,cost:42e3},{month:"Oct",hours:520,cost:48e3},{month:"Nov",hours:480,cost:44e3},{month:"Dec",hours:490,cost:45e3}],departmentPayroll:[{department:"Engineering",cost:45e4},{department:"Sales",cost:28e4},{department:"Marketing",cost:15e4},{department:"HR",cost:12e4},{department:"Finance",cost:18e4},{department:"Operations",cost:7e4}],salaryDistribution:[{range:"$30-50K",count:25},{range:"$50-75K",count:48},{range:"$75-100K",count:42},{range:"$100-150K",count:28},{range:"$150K+",count:13}]}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(t)}getMaxPayrollCost(){return this.stats?Math.max(...this.stats.payrollTrend.map(t=>t.cost)):0}getMaxDeduction(){return this.stats?Math.max(...this.stats.deductionsBreakdown.map(t=>t.amount)):0}getMaxDeptPayroll(){return this.stats?Math.max(...this.stats.departmentPayroll.map(t=>t.cost)):0}static \u0275fac=function(e){return new(e||n)(V(zs))};static \u0275cmp=_e({type:n,selectors:[["app-payroll-dashboard"]],standalone:!1,decls:20,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"fas","fa-money-bill-wave"],[1,"subtitle"],[1,"header-actions"],[1,"period-select",3,"ngModelChange","ngModel"],["value","month"],["value","quarter"],["value","year"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"dashboard-content"],[1,"stats-row"],[1,"stat-card","primary"],[1,"stat-icon"],[1,"fas","fa-dollar-sign"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","success"],[1,"fas","fa-user-tie"],[1,"stat-card","warning"],[1,"fas","fa-minus-circle"],[1,"stat-card","info"],[1,"fas","fa-clock"],[1,"charts-row"],[1,"chart-card","wide"],[1,"card-header"],[1,"fas","fa-chart-area"],[1,"card-body"],[1,"payroll-trend-chart"],[1,"trend-bars"],["class","trend-bar",4,"ngFor","ngForOf"],[1,"charts-row","two-col"],[1,"chart-card"],[1,"fas","fa-chart-pie"],[1,"deductions-list"],["class","deduction-item",4,"ngFor","ngForOf"],[1,"ot-chart"],[1,"chart-legend"],[1,"legend-item"],[1,"dot","hours"],[1,"dot","cost"],[1,"ot-bars"],["class","ot-bar-group",4,"ngFor","ngForOf"],[1,"fas","fa-building"],[1,"dept-payroll"],["class","dept-item",4,"ngFor","ngForOf"],[1,"fas","fa-chart-bar"],[1,"salary-dist"],["class","salary-bar",4,"ngFor","ngForOf"],[1,"trend-bar"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-info"],[1,"cost"],[1,"month"],[1,"deduction-item"],[1,"deduction-info"],[1,"deduction-color"],[1,"deduction-name"],[1,"deduction-bar-container"],[1,"deduction-bar"],[1,"deduction-value"],[1,"ot-bar-group"],[1,"ot-values"],[1,"hours-value"],[1,"cost-value"],[1,"ot-bar-stack"],[1,"ot-bar","hours"],[1,"ot-label"],[1,"dept-item"],[1,"dept-name"],[1,"dept-bar-track"],[1,"dept-bar-fill"],[1,"dept-value"],[1,"salary-bar"],[1,"count"],[1,"range"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Payroll Dashboard"),a(),o(6,"p",4),l(7,"Payroll costs and trends analysis"),a()(),o(8,"div",5)(9,"select",6),S("ngModelChange",function(s){return P(i.selectedPeriod,s)||(i.selectedPeriod=s),s}),o(10,"option",7),l(11,"This Month"),a(),o(12,"option",8),l(13,"This Quarter"),a(),o(14,"option",9),l(15,"This Year"),a()(),o(16,"button",10),x("click",function(){return i.loadStats()}),y(17,"i",11),a()()(),b(18,zye,4,0,"div",12)(19,Jye,86,9,"div",13),a()),e&2&&(c(9),M("ngModel",i.selectedPeriod),c(9),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.stats))},dependencies:[Se,be,je,We,Ue,Oe,Ee],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 60px)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0;display:flex;align-items:center;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{padding:8px 12px;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;color:#666}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f5f5f5}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}@media(max-width:992px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0080801a;color:teal}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#17a2b81a;color:#17a2b8}.charts-row[_ngcontent-%COMP%]{display:grid;gap:20px;margin-bottom:24px}.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}@media(max-width:992px){.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f}.chart-card.wide[_ngcontent-%COMP%]{grid-column:1/-1}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#333;display:flex;align-items:center;gap:8px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.chart-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:220px}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{width:50px;height:160px;background:#f0f0f0;border-radius:8px;display:flex;flex-direction:column;justify-content:flex-end;overflow:hidden}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,teal,#00b3b3);border-radius:8px 8px 0 0;transition:height .5s}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]{margin-top:12px;text-align:center}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]   .cost[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:teal}.payroll-trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{font-size:12px;color:#666}.deductions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:140px}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-info[_ngcontent-%COMP%]   .deduction-color[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:3px}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-info[_ngcontent-%COMP%]   .deduction-name[_ngcontent-%COMP%]{font-size:13px;color:#333}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-bar-container[_ngcontent-%COMP%]{flex:1;height:16px;background:#f0f0f0;border-radius:8px;overflow:hidden}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-bar-container[_ngcontent-%COMP%]   .deduction-bar[_ngcontent-%COMP%]{height:100%;border-radius:8px;transition:width .5s}.deductions-list[_ngcontent-%COMP%]   .deduction-item[_ngcontent-%COMP%]   .deduction-value[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-size:13px;font-weight:600;color:#333}.ot-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:16px}.ot-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666}.ot-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.ot-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.hours[_ngcontent-%COMP%]{background:teal}.ot-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.cost[_ngcontent-%COMP%]{background:#00c0c0}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:180px}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-values[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:6px}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-values[_ngcontent-%COMP%]   .hours-value[_ngcontent-%COMP%]{font-size:11px;color:teal;font-weight:600}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-values[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%]{font-size:10px;color:#666}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-bar-stack[_ngcontent-%COMP%]{width:28px;height:120px;display:flex;flex-direction:column;justify-content:flex-end}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-bar-stack[_ngcontent-%COMP%]   .ot-bar[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,teal,#00a0a0);border-radius:4px 4px 0 0;transition:height .5s}.ot-chart[_ngcontent-%COMP%]   .ot-bars[_ngcontent-%COMP%]   .ot-bar-group[_ngcontent-%COMP%]   .ot-label[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.dept-payroll[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.dept-payroll[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.dept-payroll[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-name[_ngcontent-%COMP%]{min-width:100px;font-size:13px;color:#333;text-align:right}.dept-payroll[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-bar-track[_ngcontent-%COMP%]{flex:1;height:18px;background:#f0f0f0;border-radius:9px;overflow:hidden}.dept-payroll[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-bar-track[_ngcontent-%COMP%]   .dept-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,teal,#00b3b3);border-radius:9px;transition:width .5s}.dept-payroll[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-value[_ngcontent-%COMP%]{min-width:90px;font-size:13px;font-weight:600;color:#333}.salary-dist[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:200px;padding-top:30px}.salary-dist[_ngcontent-%COMP%]   .salary-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.salary-dist[_ngcontent-%COMP%]   .salary-bar[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,teal,#00b3b3);border-radius:6px 6px 0 0;min-height:10px;transition:height .5s}.salary-dist[_ngcontent-%COMP%]   .salary-bar[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;font-weight:600;color:#333}.salary-dist[_ngcontent-%COMP%]   .salary-bar[_ngcontent-%COMP%]   .range[_ngcontent-%COMP%]{margin-top:4px;font-size:11px;color:#666;text-align:center}"]})};var RL=()=>["#ffc107","#dc3545","#17a2b8","#6f42c1","#6c757d"];function Kye(n,t){n&1&&(o(0,"div",14),y(1,"i",15),o(2,"span"),l(3,"Loading dashboard..."),a()())}function Qye(n,t){if(n&1&&(o(0,"div",64)(1,"div",65),y(2,"div",66)(3,"div",67)(4,"div",68),a(),o(5,"span",69),l(6),a()()),n&2){let e=t.$implicit;c(2),jt("height",e.absent/160*100,"%"),c(),jt("height",e.leave/160*100,"%"),c(),jt("height",e.present/160*100,"%"),c(2),_(e.date)}}function Xye(n,t){if(n&1&&(o(0,"div",70)(1,"div",71)(2,"span",72),y(3,"i",73),a(),o(4,"span",74),l(5),a()(),o(6,"div",75),y(7,"div",76),a(),o(8,"span",77),l(9),a()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),jt("background",na(18,RL)[i]),c(),ie("fa-sun",i===0)("fa-thermometer-half",i===1)("fa-user",i===2)("fa-baby",i===3)("fa-ban",i===4),c(2),_(e.type),c(2),jt("width",e.count/r.getMaxLeaveCount()*100,"%")("background",na(19,RL)[i]),c(2),_(e.count)}}function Zye(n,t){if(n&1&&(o(0,"div",78)(1,"span",79),l(2),a(),o(3,"div",80)(4,"div",81),y(5,"div",82),a(),o(6,"span",83),l(7),a()()()),n&2){let e=t.$implicit;c(2),_(e.department),c(3),jt("width",e.rate,"%"),ie("excellent",e.rate>=95)("good",e.rate>=90&&e.rate<95)("fair",e.rate<90),c(2),D("",e.rate,"%")}}function eCe(n,t){if(n&1&&(o(0,"div",84)(1,"span",85),l(2),a(),o(3,"div",86),y(4,"div",87),a(),o(5,"span",88),l(6),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.department),c(2),jt("width",e.hours/i.getMaxOTHours()*100,"%"),c(2),D("",e.hours,"h")}}function tCe(n,t){if(n&1&&(o(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),y(4,"i",20),a(),o(5,"div",21)(6,"span",22),l(7),a(),o(8,"span",23),l(9,"Present Today"),a()(),o(10,"div",24),l(11),a()(),o(12,"div",25)(13,"div",19),y(14,"i",26),a(),o(15,"div",21)(16,"span",22),l(17),a(),o(18,"span",23),l(19,"Absent Today"),a()()(),o(20,"div",27)(21,"div",19),y(22,"i",28),a(),o(23,"div",21)(24,"span",22),l(25),a(),o(26,"span",23),l(27,"On Leave"),a()()(),o(28,"div",29)(29,"div",19),y(30,"i",30),a(),o(31,"div",21)(32,"span",22),l(33),a(),o(34,"span",23),l(35,"Late Arrivals"),a()()(),o(36,"div",31)(37,"div",19),y(38,"i",32),a(),o(39,"div",21)(40,"span",22),l(41),a(),o(42,"span",23),l(43,"Avg Attendance Rate"),a()()()(),o(44,"div",33)(45,"div",34)(46,"div",35)(47,"span",36),l(48,"Present"),a()(),o(49,"div",37)(50,"span",36),l(51,"Leave"),a()(),o(52,"div",38)(53,"span",36),l(54,"Absent"),a()()()(),o(55,"div",39)(56,"div",40)(57,"div",41)(58,"h3"),y(59,"i",42),l(60," Weekly Attendance Trend"),a()(),o(61,"div",43)(62,"div",44)(63,"div",45)(64,"span",46),y(65,"span",47),l(66," Present"),a(),o(67,"span",46),y(68,"span",48),l(69," Leave"),a(),o(70,"span",46),y(71,"span",49),l(72," Absent"),a()(),o(73,"div",50),b(74,Qye,7,7,"div",51),a()()()(),o(75,"div",40)(76,"div",41)(77,"h3"),y(78,"i",52),l(79," Leave Type Distribution"),a()(),o(80,"div",43)(81,"div",53),b(82,Xye,10,20,"div",54),a()()()(),o(83,"div",39)(84,"div",40)(85,"div",41)(86,"h3"),y(87,"i",55),l(88," Department Attendance Rate"),a()(),o(89,"div",43)(90,"div",56),b(91,Zye,8,10,"div",57),a()()(),o(92,"div",40)(93,"div",41)(94,"h3"),y(95,"i",30),l(96," Overtime Summary by Department"),a()(),o(97,"div",43)(98,"div",58)(99,"div",59)(100,"span",60),l(101),a(),o(102,"span",61),l(103,"Total OT Hours"),a()(),o(104,"div",62),b(105,eCe,7,4,"div",63),a()()()()()()),n&2){let e=p();c(7),_(e.stats.presentToday),c(4),D("",(e.stats.presentToday/e.getTotalEmployees()*100).toFixed(1),"%"),c(6),_(e.stats.absentToday),c(8),_(e.stats.onLeaveToday),c(8),_(e.stats.lateArrivals),c(8),D("",e.stats.avgAttendanceRate,"%"),c(5),jt("width",e.stats.presentToday/e.getTotalEmployees()*100,"%"),c(3),jt("width",e.stats.onLeaveToday/e.getTotalEmployees()*100,"%"),c(3),jt("width",e.stats.absentToday/e.getTotalEmployees()*100,"%"),c(22),m("ngForOf",e.stats.attendanceTrend),c(8),m("ngForOf",e.stats.leaveTypeDistribution),c(9),m("ngForOf",e.stats.departmentAttendance),c(10),_(e.stats.totalOvertimeHours),c(4),m("ngForOf",e.stats.overtimeSummary)}}var C2=class n{constructor(t,e,i,r,s,d){this.dashboardService=t;this.attendanceService=e;this.employeeService=i;this.leaveService=r;this.orgService=s;this.cdr=d}stats=null;loading=!1;selectedPeriod="week";ngOnInit(){this.loadRealTimeStats()}loadStats(){this.loading=!0,this.cdr.markForCheck(),this.dashboardService.getAttendanceStats().subscribe({next:t=>{this.stats=t,this.loading=!1,this.cdr.markForCheck()},error:()=>{this.loadRealTimeStats()}})}loadRealTimeStats(){this.loading=!0,this.cdr.markForCheck();let t=new Date().toISOString().split("T")[0],e=this.getWeekStart(),i=t;fo({todayRecords:this.attendanceService.getByDate(t),weekRecords:this.attendanceService.getByDateRange(e,i),employees:this.employeeService.getActive(),leaveRequests:this.leaveService.getAllRequests(),departments:this.orgService.getDepartments()}).subscribe({next:({todayRecords:r,weekRecords:s,employees:d,leaveRequests:u,departments:h})=>{let v=d.length,C=r.filter(oe=>oe.status==="PRESENT"||oe.status==="HALF_DAY"||oe.status==="LATE").length,O=r.filter(oe=>oe.status==="LATE").length,T=u.filter(oe=>{if(oe.status!=="APPROVED")return!1;let ae=new Date(oe.startDate),X=new Date(oe.endDate),pe=new Date(t);return pe>=ae&&pe<=X}).length,w=Math.max(0,v-C-T),A=this.getWeekDays(e,i),I=0,L=0;A.forEach(oe=>{let ae=s.filter(X=>X.attendanceDate===oe);I+=ae.filter(X=>X.status==="PRESENT"||X.status==="HALF_DAY"||X.status==="LATE").length,L+=v});let B=L>0?I/L*100:0,q=s.reduce((oe,ae)=>oe+(ae.overtimeHours||0),0),K=this.calculateAttendanceTrend(s,u,e,i),J=this.calculateLeaveDistribution(u),Me=this.calculateDepartmentAttendance(s,d,h),ze=this.calculateOvertimeSummary(s,d,h);this.stats={presentToday:C,absentToday:w,onLeaveToday:T,lateArrivals:O,avgAttendanceRate:Math.round(B*10)/10,totalOvertimeHours:Math.round(q*10)/10,attendanceTrend:K,leaveTypeDistribution:J,departmentAttendance:Me,overtimeSummary:ze},this.loading=!1,this.cdr.markForCheck()},error:r=>{console.error("Error loading real-time stats:",r),this.stats=this.getEmptyStats(),this.loading=!1,this.cdr.markForCheck()}})}getWeekStart(){let t=new Date,e=t.getDay(),i=t.getDate()-e+(e===0?-6:1);return new Date(t.setDate(i)).toISOString().split("T")[0]}getWeekDays(t,e){let i=[],r=new Date(t),s=new Date(e);for(;r<=s;)i.push(r.toISOString().split("T")[0]),r.setDate(r.getDate()+1);return i}calculateAttendanceTrend(t,e,i,r){let s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return this.getWeekDays(i,r).map(u=>{let h=new Date(u),v=t.filter(w=>w.attendanceDate===u),C=v.filter(w=>w.status==="PRESENT"||w.status==="HALF_DAY"||w.status==="LATE").length,O=v.filter(w=>w.status==="ABSENT").length,T=e.filter(w=>{if(w.status!=="APPROVED")return!1;let A=new Date(w.startDate),I=new Date(w.endDate);return h>=A&&h<=I}).length;return{date:s[h.getDay()],present:C,absent:O,leave:T}})}calculateLeaveDistribution(t){let e=new Map,i=new Date().getMonth(),r=new Date().getFullYear();return t.filter(s=>{let d=new Date(s.startDate);return d.getMonth()===i&&d.getFullYear()===r}).forEach(s=>{let d=s.leaveType?.name||"Other";e.set(d,(e.get(d)||0)+1)}),Array.from(e.entries()).map(([s,d])=>({type:s,count:d})).sort((s,d)=>d.count-s.count).slice(0,6)}calculateDepartmentAttendance(t,e,i){let r=new Map;return i.forEach(s=>{r.set(s.name,{present:0,total:0})}),e.forEach(s=>{let d=s.department?.name||"Unassigned";r.has(d)||r.set(d,{present:0,total:0});let u=r.get(d);u.total++,t.filter(v=>(v.employee?.id===s.id||v.employeeId===s.id)&&(v.status==="PRESENT"||v.status==="HALF_DAY"||v.status==="LATE")).length>0&&u.present++}),Array.from(r.entries()).map(([s,d])=>({department:s,rate:d.total>0?Math.round(d.present/d.total*1e3)/10:0})).filter(s=>s.rate>0).sort((s,d)=>d.rate-s.rate).slice(0,6)}calculateOvertimeSummary(t,e,i){let r=new Map;return t.forEach(s=>{let u=e.find(v=>v.id===s.employee?.id||v.id===s.employeeId)?.department?.name||"Unassigned",h=s.overtimeHours||0;r.set(u,(r.get(u)||0)+h)}),Array.from(r.entries()).map(([s,d])=>({department:s,hours:Math.round(d*10)/10})).filter(s=>s.hours>0).sort((s,d)=>d.hours-s.hours).slice(0,6)}getEmptyStats(){return{presentToday:0,absentToday:0,onLeaveToday:0,lateArrivals:0,avgAttendanceRate:0,totalOvertimeHours:0,attendanceTrend:[],leaveTypeDistribution:[],departmentAttendance:[],overtimeSummary:[]}}getMaxLeaveCount(){return this.stats?Math.max(...this.stats.leaveTypeDistribution.map(t=>t.count)):0}getMaxOTHours(){return this.stats?Math.max(...this.stats.overtimeSummary.map(t=>t.hours)):0}getTotalEmployees(){return this.stats?this.stats.presentToday+this.stats.absentToday+this.stats.onLeaveToday:0}static \u0275fac=function(e){return new(e||n)(V(zs),V(To),V(ai),V(Ka),V(Mr),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-attendance-dashboard"]],standalone:!1,decls:20,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"fas","fa-calendar-check"],[1,"subtitle"],[1,"header-actions"],[1,"period-select",3,"ngModelChange","ngModel"],["value","today"],["value","week"],["value","month"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"dashboard-content"],[1,"stats-row"],[1,"stat-card","success"],[1,"stat-icon"],[1,"fas","fa-user-check"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-badge","success"],[1,"stat-card","danger"],[1,"fas","fa-user-times"],[1,"stat-card","warning"],[1,"fas","fa-bed"],[1,"stat-card","info"],[1,"fas","fa-clock"],[1,"stat-card","primary"],[1,"fas","fa-percentage"],[1,"status-summary"],[1,"summary-bar"],[1,"bar-segment","present"],[1,"segment-label"],[1,"bar-segment","leave"],[1,"bar-segment","absent"],[1,"charts-row","two-col"],[1,"chart-card"],[1,"card-header"],[1,"fas","fa-chart-bar"],[1,"card-body"],[1,"stacked-chart"],[1,"chart-legend"],[1,"legend-item"],[1,"dot","present"],[1,"dot","leave"],[1,"dot","absent"],[1,"stacked-bars"],["class","stacked-group",4,"ngFor","ngForOf"],[1,"fas","fa-calendar-minus"],[1,"leave-list"],["class","leave-item",4,"ngFor","ngForOf"],[1,"fas","fa-building"],[1,"dept-attendance"],["class","dept-item",4,"ngFor","ngForOf"],[1,"ot-summary"],[1,"ot-total"],[1,"ot-total-value"],[1,"ot-total-label"],[1,"ot-breakdown"],["class","ot-item",4,"ngFor","ngForOf"],[1,"stacked-group"],[1,"stacked-bar"],[1,"segment","absent"],[1,"segment","leave"],[1,"segment","present"],[1,"day-label"],[1,"leave-item"],[1,"leave-info"],[1,"leave-icon"],[1,"fas"],[1,"leave-name"],[1,"leave-bar-track"],[1,"leave-bar-fill"],[1,"leave-count"],[1,"dept-item"],[1,"dept-name"],[1,"gauge-container"],[1,"gauge-track"],[1,"gauge-fill"],[1,"gauge-value"],[1,"ot-item"],[1,"ot-dept"],[1,"ot-bar-track"],[1,"ot-bar-fill"],[1,"ot-hours"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Attendance Dashboard"),a(),o(6,"p",4),l(7,"Real-time attendance tracking and analysis"),a()(),o(8,"div",5)(9,"select",6),S("ngModelChange",function(s){return P(i.selectedPeriod,s)||(i.selectedPeriod=s),s}),o(10,"option",7),l(11,"Today"),a(),o(12,"option",8),l(13,"This Week"),a(),o(14,"option",9),l(15,"This Month"),a()(),o(16,"button",10),x("click",function(){return i.loadStats()}),y(17,"i",11),a()()(),b(18,Kye,4,0,"div",12)(19,tCe,106,17,"div",13),a()),e&2&&(c(9),M("ngModel",i.selectedPeriod),c(9),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.stats))},dependencies:[Se,be,je,We,Ue,Oe,Ee],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 60px)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0;display:flex;align-items:center;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{padding:8px 12px;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;color:#666}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f5f5f5}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:24px}@media(max-width:1200px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(max-width:768px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f;position:relative}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.stat-card[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600}.stat-card[_ngcontent-%COMP%]   .stat-badge.success[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0080801a;color:teal}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.stat-card.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#dc35451a;color:#dc3545}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#17a2b81a;color:#17a2b8}.status-summary[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:24px;box-shadow:0 2px 8px #0000000f}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]{display:flex;height:32px;border-radius:16px;overflow:hidden}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]   .bar-segment[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:width .5s}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]   .bar-segment[_ngcontent-%COMP%]   .segment-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]   .bar-segment.present[_ngcontent-%COMP%]{background:#28a745}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]   .bar-segment.leave[_ngcontent-%COMP%]{background:#ffc107}.status-summary[_ngcontent-%COMP%]   .summary-bar[_ngcontent-%COMP%]   .bar-segment.absent[_ngcontent-%COMP%]{background:#dc3545}.charts-row[_ngcontent-%COMP%]{display:grid;gap:20px;margin-bottom:24px}.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}@media(max-width:992px){.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#333;display:flex;align-items:center;gap:8px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.chart-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:16px}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.present[_ngcontent-%COMP%]{background:#28a745}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.leave[_ngcontent-%COMP%]{background:#ffc107}.stacked-chart[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.absent[_ngcontent-%COMP%]{background:#dc3545}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:180px}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .stacked-bar[_ngcontent-%COMP%]{width:40px;height:150px;display:flex;flex-direction:column-reverse;border-radius:6px 6px 0 0;overflow:hidden}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .stacked-bar[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{transition:height .5s}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .stacked-bar[_ngcontent-%COMP%]   .segment.present[_ngcontent-%COMP%]{background:#28a745}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .stacked-bar[_ngcontent-%COMP%]   .segment.leave[_ngcontent-%COMP%]{background:#ffc107}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .stacked-bar[_ngcontent-%COMP%]   .segment.absent[_ngcontent-%COMP%]{background:#dc3545}.stacked-chart[_ngcontent-%COMP%]   .stacked-bars[_ngcontent-%COMP%]   .stacked-group[_ngcontent-%COMP%]   .day-label[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.leave-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;min-width:150px}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-info[_ngcontent-%COMP%]   .leave-icon[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-info[_ngcontent-%COMP%]   .leave-name[_ngcontent-%COMP%]{font-size:13px;color:#333}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-bar-track[_ngcontent-%COMP%]{flex:1;height:12px;background:#f0f0f0;border-radius:6px;overflow:hidden}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-bar-track[_ngcontent-%COMP%]   .leave-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;transition:width .5s}.leave-list[_ngcontent-%COMP%]   .leave-item[_ngcontent-%COMP%]   .leave-count[_ngcontent-%COMP%]{min-width:40px;text-align:right;font-size:14px;font-weight:600;color:#333}.dept-attendance[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-name[_ngcontent-%COMP%]{min-width:100px;font-size:13px;color:#333}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-track[_ngcontent-%COMP%]{flex:1;height:14px;background:#f0f0f0;border-radius:7px;overflow:hidden}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-track[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%]{height:100%;border-radius:7px;transition:width .5s}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-track[_ngcontent-%COMP%]   .gauge-fill.excellent[_ngcontent-%COMP%]{background:#28a745}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-track[_ngcontent-%COMP%]   .gauge-fill.good[_ngcontent-%COMP%]{background:#ffc107}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-track[_ngcontent-%COMP%]   .gauge-fill.fair[_ngcontent-%COMP%]{background:#dc3545}.dept-attendance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .gauge-container[_ngcontent-%COMP%]   .gauge-value[_ngcontent-%COMP%]{min-width:50px;font-size:13px;font-weight:600;color:#333}.ot-summary[_ngcontent-%COMP%]{display:flex;gap:24px}.ot-summary[_ngcontent-%COMP%]   .ot-total[_ngcontent-%COMP%]{background:#0080801a;border-radius:12px;padding:20px;text-align:center;min-width:120px}.ot-summary[_ngcontent-%COMP%]   .ot-total[_ngcontent-%COMP%]   .ot-total-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:600;color:teal}.ot-summary[_ngcontent-%COMP%]   .ot-total[_ngcontent-%COMP%]   .ot-total-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:10px}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]   .ot-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]   .ot-item[_ngcontent-%COMP%]   .ot-dept[_ngcontent-%COMP%]{min-width:90px;font-size:12px;color:#333}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]   .ot-item[_ngcontent-%COMP%]   .ot-bar-track[_ngcontent-%COMP%]{flex:1;height:12px;background:#f0f0f0;border-radius:6px;overflow:hidden}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]   .ot-item[_ngcontent-%COMP%]   .ot-bar-track[_ngcontent-%COMP%]   .ot-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,teal,#00b3b3);border-radius:6px;transition:width .5s}.ot-summary[_ngcontent-%COMP%]   .ot-breakdown[_ngcontent-%COMP%]   .ot-item[_ngcontent-%COMP%]   .ot-hours[_ngcontent-%COMP%]{min-width:40px;text-align:right;font-size:12px;font-weight:600;color:teal}"],changeDetection:0})};function nCe(n,t){n&1&&(o(0,"div",13),y(1,"i",14),o(2,"span"),l(3,"Loading dashboard..."),a()())}function iCe(n,t){if(n&1&&(o(0,"div",50)(1,"div",51),l(2),a(),o(3,"div",52)(4,"div",53),l(5),a(),o(6,"div",54)(7,"span",55),l(8),a(),o(9,"span",56),l(10),a()()(),o(11,"div",57),l(12),a()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),_(i+1),c(3),D(" ",e.name.charAt(0)," "),c(3),_(e.name),c(2),Ge("",e.designation," - ",e.department),c(),jt("background",r.getScoreColor(e.score)),c(),D(" ",e.score," ")}}function rCe(n,t){if(n&1&&(o(0,"div",58)(1,"div",59),y(2,"span",60),o(3,"span",61),l(4),a()(),o(5,"div",62),y(6,"div",63),a(),o(7,"span",64),l(8),a()()),n&2){let e=t.$implicit,i=p(2);c(2),jt("background",i.getRatingColor(e.rating)),c(2),_(e.rating),c(2),jt("width",e.count/i.getMaxRatingCount()*100,"%")("background",i.getRatingColor(e.rating)),c(2),_(e.count)}}function oCe(n,t){if(n&1&&(o(0,"div",65)(1,"div",66),y(2,"div",67),a(),o(3,"div",68)(4,"span",69),l(5),a(),o(6,"span",70),l(7),a()()()),n&2){let e=t.$implicit;c(2),jt("height",e.avgScore/5*100,"%"),c(3),_(e.avgScore),c(2),_(e.quarter)}}function aCe(n,t){if(n&1&&(o(0,"div",71)(1,"span",72),l(2),a(),o(3,"div",73)(4,"div",74),y(5,"div",75),a(),o(6,"span",76),l(7),a()()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.department),c(3),jt("width",e.avgScore/5*100,"%")("background",i.getScoreColor(e.avgScore)),c(),jt("color",i.getScoreColor(e.avgScore)),c(),D(" ",e.avgScore," ")}}function sCe(n,t){if(n&1&&(o(0,"div",77)(1,"div",78)(2,"div",79)(3,"span",80),l(4),a()()(),o(5,"span",81),l(6),a()()),n&2){let e=t.$implicit,i=p(2);c(2),jt("height",e.avgScore/5*100,"%")("background",i.getScoreColor(e.avgScore)),c(2),_(e.avgScore),c(2),_(e.grade)}}function lCe(n,t){if(n&1&&(o(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),y(4,"i",19),a(),o(5,"div",20)(6,"span",21),l(7),a(),o(8,"span",22),l(9,"High Performers"),a()()(),o(10,"div",23)(11,"div",18),y(12,"i",24),a(),o(13,"div",20)(14,"span",21),l(15),a(),o(16,"span",22),l(17,"Avg Performance Score"),a()()(),o(18,"div",25)(19,"div",18),y(20,"i",26),a(),o(21,"div",20)(22,"span",21),l(23),a(),o(24,"span",22),l(25,"Pending Appraisals"),a()()(),o(26,"div",27)(27,"div",18),y(28,"i",28),a(),o(29,"div",20)(30,"span",21),l(31),a(),o(32,"span",22),l(33,"Completed Appraisals"),a()()()(),o(34,"div",29)(35,"div",30)(36,"div",31)(37,"h3"),y(38,"i",32),l(39," Top Performers"),a()(),o(40,"div",33)(41,"div",34),b(42,iCe,13,8,"div",35),a()()(),o(43,"div",30)(44,"div",31)(45,"h3"),y(46,"i",36),l(47," Performance Distribution"),a()(),o(48,"div",33)(49,"div",37),b(50,rCe,9,8,"div",38),a()()()(),o(51,"div",29)(52,"div",30)(53,"div",31)(54,"h3"),y(55,"i",39),l(56," Appraisal Score Trend"),a()(),o(57,"div",33)(58,"div",40)(59,"div",41),b(60,oCe,8,4,"div",42),a()()()(),o(61,"div",30)(62,"div",31)(63,"h3"),y(64,"i",43),l(65," Department Performance"),a()(),o(66,"div",33)(67,"div",44),b(68,aCe,8,8,"div",45),a()()()(),o(69,"div",46)(70,"div",31)(71,"h3"),y(72,"i",47),l(73," Performance by Grade Level"),a()(),o(74,"div",33)(75,"div",48),b(76,sCe,7,6,"div",49),a()()()()),n&2){let e=p();c(7),_(e.stats.highPerformers),c(8),D("",e.stats.avgPerformanceScore,"/5"),c(8),_(e.stats.pendingAppraisals),c(8),_(e.stats.completedAppraisals),c(11),m("ngForOf",e.stats.topPerformers),c(8),m("ngForOf",e.stats.performanceDistribution),c(10),m("ngForOf",e.stats.appraisalTrend),c(8),m("ngForOf",e.stats.departmentPerformance),c(8),m("ngForOf",e.stats.performanceByGrade)}}var b2=class n{constructor(t){this.dashboardService=t}stats=null;loading=!1;selectedPeriod="year";ngOnInit(){this.loadStats()}loadStats(){this.loading=!0,this.dashboardService.getPerformanceStats().subscribe({next:t=>{this.stats=t,this.loading=!1},error:t=>{console.error("Error loading performance dashboard",t),this.stats=this.getMockStats(),this.loading=!1}})}getMockStats(){return{highPerformers:28,avgPerformanceScore:3.8,pendingAppraisals:15,completedAppraisals:141,topPerformers:[{name:"Sarah Johnson",department:"Engineering",score:4.9,designation:"Senior Developer"},{name:"Michael Chen",department:"Sales",score:4.8,designation:"Sales Manager"},{name:"Emily Davis",department:"Marketing",score:4.7,designation:"Marketing Lead"},{name:"James Wilson",department:"Engineering",score:4.6,designation:"Tech Lead"},{name:"Lisa Anderson",department:"Finance",score:4.5,designation:"Finance Manager"}],performanceDistribution:[{rating:"Exceptional",count:28},{rating:"Exceeds",count:45},{rating:"Meets",count:62},{rating:"Needs Improvement",count:18},{rating:"Unsatisfactory",count:3}],appraisalTrend:[{quarter:"Q1 2024",avgScore:3.6},{quarter:"Q2 2024",avgScore:3.7},{quarter:"Q3 2024",avgScore:3.7},{quarter:"Q4 2024",avgScore:3.8}],departmentPerformance:[{department:"Engineering",avgScore:4.1},{department:"Finance",avgScore:3.9},{department:"HR",avgScore:3.8},{department:"Marketing",avgScore:3.7},{department:"Sales",avgScore:3.6},{department:"Operations",avgScore:3.4}],performanceByGrade:[{grade:"E1",avgScore:3.4},{grade:"E2",avgScore:3.6},{grade:"E3",avgScore:3.8},{grade:"M1",avgScore:4},{grade:"M2",avgScore:4.2},{grade:"S1",avgScore:4.3}]}}getScoreColor(t){return t>=4.5?"#28a745":t>=4?"#5cb85c":t>=3.5?"#ffc107":t>=3?"#f0ad4e":"#dc3545"}getRatingColor(t){switch(t){case"Exceptional":return"#28a745";case"Exceeds":return"#5cb85c";case"Meets":return"#17a2b8";case"Needs Improvement":return"#ffc107";case"Unsatisfactory":return"#dc3545";default:return"#6c757d"}}getMaxRatingCount(){return this.stats?Math.max(...this.stats.performanceDistribution.map(t=>t.count)):0}static \u0275fac=function(e){return new(e||n)(V(zs))};static \u0275cmp=_e({type:n,selectors:[["app-performance-dashboard"]],standalone:!1,decls:18,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"fas","fa-chart-line"],[1,"subtitle"],[1,"header-actions"],[1,"period-select",3,"ngModelChange","ngModel"],["value","quarter"],["value","year"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"dashboard-content"],[1,"stats-row"],[1,"stat-card","success"],[1,"stat-icon"],[1,"fas","fa-star"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","primary"],[1,"fas","fa-trophy"],[1,"stat-card","warning"],[1,"fas","fa-clock"],[1,"stat-card","info"],[1,"fas","fa-check-circle"],[1,"charts-row","two-col"],[1,"chart-card"],[1,"card-header"],[1,"fas","fa-medal"],[1,"card-body"],[1,"top-performers-list"],["class","performer-item",4,"ngFor","ngForOf"],[1,"fas","fa-chart-pie"],[1,"distribution-chart"],["class","distribution-item",4,"ngFor","ngForOf"],[1,"fas","fa-chart-area"],[1,"trend-chart"],[1,"trend-bars"],["class","trend-bar",4,"ngFor","ngForOf"],[1,"fas","fa-building"],[1,"dept-performance"],["class","dept-item",4,"ngFor","ngForOf"],[1,"chart-card","wide"],[1,"fas","fa-layer-group"],[1,"grade-performance"],["class","grade-item",4,"ngFor","ngForOf"],[1,"performer-item"],[1,"rank"],[1,"performer-info"],[1,"performer-avatar"],[1,"performer-details"],[1,"performer-name"],[1,"performer-role"],[1,"performer-score"],[1,"distribution-item"],[1,"dist-info"],[1,"dist-dot"],[1,"dist-label"],[1,"dist-bar-track"],[1,"dist-bar-fill"],[1,"dist-count"],[1,"trend-bar"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-info"],[1,"score"],[1,"quarter"],[1,"dept-item"],[1,"dept-name"],[1,"score-bar-container"],[1,"score-bar-track"],[1,"score-bar-fill"],[1,"dept-score"],[1,"grade-item"],[1,"grade-bar"],[1,"grade-fill"],[1,"grade-score"],[1,"grade-label"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Performance Dashboard"),a(),o(6,"p",4),l(7,"Employee performance analytics and appraisal tracking"),a()(),o(8,"div",5)(9,"select",6),S("ngModelChange",function(s){return P(i.selectedPeriod,s)||(i.selectedPeriod=s),s}),o(10,"option",7),l(11,"This Quarter"),a(),o(12,"option",8),l(13,"This Year"),a()(),o(14,"button",9),x("click",function(){return i.loadStats()}),y(15,"i",10),a()()(),b(16,nCe,4,0,"div",11)(17,lCe,77,9,"div",12),a()),e&2&&(c(9),M("ngModel",i.selectedPeriod),c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.stats))},dependencies:[Se,be,je,We,Ue,Oe,Ee],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 60px)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0;display:flex;align-items:center;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:14px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{padding:8px 12px;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;color:#666}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f5f5f5}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}@media(max-width:992px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0080801a;color:teal}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#17a2b81a;color:#17a2b8}.charts-row[_ngcontent-%COMP%]{display:grid;gap:20px;margin-bottom:24px}.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}@media(max-width:992px){.charts-row.two-col[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f}.chart-card.wide[_ngcontent-%COMP%]{margin-bottom:24px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#333;display:flex;align-items:center;gap:8px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.chart-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px}.top-performers-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px;background:#f8f9fa;border-radius:10px}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{width:28px;height:28px;background:teal;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,teal,#00a0a0);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-details[_ngcontent-%COMP%]   .performer-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-details[_ngcontent-%COMP%]   .performer-role[_ngcontent-%COMP%]{font-size:12px;color:#666}.top-performers-list[_ngcontent-%COMP%]   .performer-item[_ngcontent-%COMP%]   .performer-score[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;color:#fff;font-weight:600;font-size:14px}.distribution-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:150px}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-info[_ngcontent-%COMP%]   .dist-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-info[_ngcontent-%COMP%]   .dist-label[_ngcontent-%COMP%]{font-size:13px;color:#333}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-bar-track[_ngcontent-%COMP%]{flex:1;height:16px;background:#f0f0f0;border-radius:8px;overflow:hidden}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-bar-track[_ngcontent-%COMP%]   .dist-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:8px;transition:width .5s}.distribution-chart[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .dist-count[_ngcontent-%COMP%]{min-width:40px;text-align:right;font-size:14px;font-weight:600;color:#333}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:220px}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{width:50px;height:160px;background:#f0f0f0;border-radius:8px;display:flex;flex-direction:column;justify-content:flex-end;overflow:hidden}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,teal,#00b3b3);border-radius:8px 8px 0 0;transition:height .5s}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]{margin-top:12px;text-align:center}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600;color:teal}.trend-chart[_ngcontent-%COMP%]   .trend-bars[_ngcontent-%COMP%]   .trend-bar[_ngcontent-%COMP%]   .bar-info[_ngcontent-%COMP%]   .quarter[_ngcontent-%COMP%]{font-size:12px;color:#666}.dept-performance[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .dept-name[_ngcontent-%COMP%]{min-width:100px;font-size:13px;color:#333}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .score-bar-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .score-bar-container[_ngcontent-%COMP%]   .score-bar-track[_ngcontent-%COMP%]{flex:1;height:14px;background:#f0f0f0;border-radius:7px;overflow:hidden}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .score-bar-container[_ngcontent-%COMP%]   .score-bar-track[_ngcontent-%COMP%]   .score-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:7px;transition:width .5s}.dept-performance[_ngcontent-%COMP%]   .dept-item[_ngcontent-%COMP%]   .score-bar-container[_ngcontent-%COMP%]   .dept-score[_ngcontent-%COMP%]{min-width:40px;font-size:14px;font-weight:600}.grade-performance[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:180px}.grade-performance[_ngcontent-%COMP%]   .grade-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.grade-performance[_ngcontent-%COMP%]   .grade-item[_ngcontent-%COMP%]   .grade-bar[_ngcontent-%COMP%]{width:50px;height:140px;background:#f0f0f0;border-radius:8px;display:flex;flex-direction:column;justify-content:flex-end;overflow:hidden}.grade-performance[_ngcontent-%COMP%]   .grade-item[_ngcontent-%COMP%]   .grade-bar[_ngcontent-%COMP%]   .grade-fill[_ngcontent-%COMP%]{width:100%;border-radius:8px 8px 0 0;display:flex;align-items:flex-start;justify-content:center;padding-top:8px;min-height:30px;transition:height .5s}.grade-performance[_ngcontent-%COMP%]   .grade-item[_ngcontent-%COMP%]   .grade-bar[_ngcontent-%COMP%]   .grade-fill[_ngcontent-%COMP%]   .grade-score[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:600}.grade-performance[_ngcontent-%COMP%]   .grade-item[_ngcontent-%COMP%]   .grade-label[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;color:#333;font-weight:500}"]})};function cCe(n,t){if(n&1){let e=F();o(0,"div",36),x("dragstart",function(r){let s=g(e).$implicit,d=p(2);return f(d.onDragStart(r,s))})("click",function(){let r=g(e).$implicit,s=p(2);return f(s.addField(r))}),o(1,"span",37),l(2),a(),o(3,"span",38),l(4),a()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),_(e.dataType)}}function dCe(n,t){if(n&1&&(o(0,"div",30)(1,"div",31),y(2,"i",32),o(3,"span"),l(4),a(),o(5,"span",33),l(6),a()(),o(7,"div",34),b(8,cCe,5,2,"div",35),a()()),n&2){let e=t.$implicit,i=p();c(2),m("ngClass",i.getFieldIcon(e)),c(2),_(e),c(2),_(i.getFieldsByCategory(e).length),c(2),m("ngForOf",i.getFieldsByCategory(e))}}function pCe(n,t){n&1&&(o(0,"div",39),y(1,"i",40),o(2,"p"),l(3,"Drag fields here or click to add"),a()())}function mCe(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),y(2,"i",45),a(),o(3,"div",46)(4,"span",37),l(5),a(),o(6,"span",47),l(7),a()(),o(8,"div",48)(9,"button",49),x("click",function(){let r=g(e).index,s=p(2);return f(s.moveFieldUp(r))}),y(10,"i",50),a(),o(11,"button",49),x("click",function(){let r=g(e).index,s=p(2);return f(s.moveFieldDown(r))}),y(12,"i",51),a(),o(13,"button",52),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.removeField(r))}),y(14,"i",53),a()()()}if(n&2){let e=t.$implicit,i=t.index,r=p(2);c(5),_(e.name),c(2),_(e.category),c(2),m("disabled",i===0),c(2),m("disabled",i===r.selectedFields.length-1)}}function uCe(n,t){if(n&1&&(o(0,"div",41),b(1,mCe,15,4,"div",42),a()),n&2){let e=p();c(),m("ngForOf",e.selectedFields)}}function gCe(n,t){if(n&1){let e=F();o(0,"div",54)(1,"h4"),l(2,"Export Options"),a(),o(3,"div",55)(4,"button",56),x("click",function(){g(e);let r=p();return f(r.exportReport("csv"))}),y(5,"i",57),l(6," CSV "),a(),o(7,"button",58),x("click",function(){g(e);let r=p();return f(r.exportReport("excel"))}),y(8,"i",59),l(9," Excel "),a(),o(10,"button",60),x("click",function(){g(e);let r=p();return f(r.exportReport("pdf"))}),y(11,"i",61),l(12," PDF "),a()()()}}function fCe(n,t){if(n&1){let e=F();o(0,"div",62)(1,"div",63),x("click",function(){let r=g(e).$implicit,s=p();return f(s.loadTemplate(r))}),o(2,"span",64),l(3),a(),o(4,"span",65),l(5),a(),o(6,"span",66),l(7),a()(),o(8,"button",52),x("click",function(r){let s=g(e).$implicit;return p().deleteTemplate(s),f(r.stopPropagation())}),y(9,"i",67),a()()}if(n&2){let e=t.$implicit;c(3),_(e.name),c(2),_(e.description),c(2),D("",e.selectedFields.length," fields")}}function hCe(n,t){n&1&&(o(0,"div",68),y(1,"i",69),o(2,"p"),l(3,"No saved templates"),a()())}function _Ce(n,t){if(n&1&&(o(0,"span",82),l(1),a()),n&2){let e=t.$implicit;c(),_(e.name)}}function vCe(n,t){n&1&&y(0,"i",83)}function xCe(n,t){if(n&1){let e=F();o(0,"div",70)(1,"div",71),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",72)(3,"h2"),l(4),a(),o(5,"button",73),x("click",function(){g(e);let r=p();return f(r.closeTemplateModal())}),y(6,"i",53),a()(),o(7,"div",74)(8,"div",75)(9,"label"),l(10,"Template Name *"),a(),o(11,"input",76),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentTemplate.name,r)||(s.currentTemplate.name=r),f(r)}),a()(),o(12,"div",75)(13,"label"),l(14,"Description"),a(),o(15,"textarea",77),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentTemplate.description,r)||(s.currentTemplate.description=r),f(r)}),a()(),o(16,"div",75)(17,"label"),l(18,"Selected Fields"),a(),o(19,"div",78),b(20,_Ce,2,1,"span",79),a()()(),o(21,"div",80)(22,"button",6),x("click",function(){g(e);let r=p();return f(r.closeTemplateModal())}),l(23,"Cancel"),a(),o(24,"button",10),x("click",function(){g(e);let r=p();return f(r.saveTemplate())}),b(25,vCe,1,0,"i",81),l(26),a()()()()}if(n&2){let e=p();c(4),D("",e.currentTemplate.id?"Update":"Save"," Template"),c(7),M("ngModel",e.currentTemplate.name),c(4),M("ngModel",e.currentTemplate.description),c(5),m("ngForOf",e.selectedFields),c(4),m("disabled",!e.currentTemplate.name||e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":"Save Template"," ")}}function yCe(n,t){n&1&&(o(0,"div",87),y(1,"i",83),o(2,"span"),l(3,"Loading preview..."),a()())}function CCe(n,t){if(n&1&&(o(0,"th"),l(1),a()),n&2){let e=t.$implicit;c(),_(e.name)}}function bCe(n,t){if(n&1&&(o(0,"td"),l(1),a()),n&2){let e=t.$implicit,i=p().$implicit;c(),_(i[e.id])}}function MCe(n,t){if(n&1&&(o(0,"tr"),b(1,bCe,2,1,"td",90),a()),n&2){let e=p(3);c(),m("ngForOf",e.selectedFields)}}function SCe(n,t){if(n&1&&(o(0,"div",88)(1,"table",89)(2,"thead")(3,"tr"),b(4,CCe,2,1,"th",90),a()(),o(5,"tbody"),b(6,MCe,2,1,"tr",90),a()()()),n&2){let e=p(2);c(4),m("ngForOf",e.selectedFields),c(2),m("ngForOf",e.previewData)}}function PCe(n,t){if(n&1){let e=F();o(0,"div",70)(1,"div",84),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",72)(3,"h2"),l(4,"Report Preview"),a(),o(5,"button",73),x("click",function(){g(e);let r=p();return f(r.closePreview())}),y(6,"i",53),a()(),o(7,"div",74),b(8,yCe,4,0,"div",85)(9,SCe,7,2,"div",86),a(),o(10,"div",80)(11,"button",6),x("click",function(){g(e);let r=p();return f(r.closePreview())}),l(12,"Close"),a(),o(13,"div",55)(14,"button",56),x("click",function(){g(e);let r=p();return f(r.exportReport("csv"))}),y(15,"i",57),l(16," Export CSV "),a(),o(17,"button",58),x("click",function(){g(e);let r=p();return f(r.exportReport("excel"))}),y(18,"i",59),l(19," Export Excel "),a()()()()()}if(n&2){let e=p();c(8),m("ngIf",e.loading),c(),m("ngIf",!e.loading&&e.previewData.length>0)}}var M2=class n{constructor(t){this.dashboardService=t}availableFields=[];selectedFields=[];savedTemplates=[];currentTemplate={name:"",description:"",selectedFields:[],filters:{},sortBy:"",sortOrder:"asc"};loading=!1;saving=!1;showTemplateModal=!1;showPreview=!1;previewData=[];draggedField=null;categories=[];ngOnInit(){this.loadFields(),this.loadTemplates()}loadFields(){this.dashboardService.getReportFields().subscribe({next:t=>{this.availableFields=t,this.categories=[...new Set(t.map(e=>e.category))]},error:()=>{this.availableFields=this.getMockFields(),this.categories=[...new Set(this.availableFields.map(t=>t.category))]}})}loadTemplates(){this.dashboardService.getReportTemplates().subscribe({next:t=>this.savedTemplates=t,error:()=>this.savedTemplates=this.getMockTemplates()})}getMockFields(){return[{id:"emp_code",name:"Employee Code",category:"Employee",dataType:"string"},{id:"emp_name",name:"Employee Name",category:"Employee",dataType:"string"},{id:"email",name:"Email",category:"Employee",dataType:"string"},{id:"phone",name:"Phone",category:"Employee",dataType:"string"},{id:"dob",name:"Date of Birth",category:"Employee",dataType:"date"},{id:"gender",name:"Gender",category:"Employee",dataType:"string"},{id:"department",name:"Department",category:"Employment",dataType:"string"},{id:"designation",name:"Designation",category:"Employment",dataType:"string"},{id:"grade",name:"Grade",category:"Employment",dataType:"string"},{id:"location",name:"Location",category:"Employment",dataType:"string"},{id:"doj",name:"Date of Joining",category:"Employment",dataType:"date"},{id:"emp_type",name:"Employment Type",category:"Employment",dataType:"string"},{id:"status",name:"Status",category:"Employment",dataType:"string"},{id:"manager",name:"Reporting Manager",category:"Employment",dataType:"string"},{id:"basic_salary",name:"Basic Salary",category:"Salary",dataType:"number"},{id:"gross_salary",name:"Gross Salary",category:"Salary",dataType:"number"},{id:"net_salary",name:"Net Salary",category:"Salary",dataType:"number"},{id:"ctc",name:"CTC",category:"Salary",dataType:"number"},{id:"hourly_rate",name:"Hourly Rate",category:"Salary",dataType:"number"},{id:"bank_name",name:"Bank Name",category:"Bank",dataType:"string"},{id:"account_no",name:"Account Number",category:"Bank",dataType:"string"},{id:"routing_no",name:"Routing Number",category:"Bank",dataType:"string"},{id:"present_days",name:"Present Days",category:"Attendance",dataType:"number"},{id:"absent_days",name:"Absent Days",category:"Attendance",dataType:"number"},{id:"leave_days",name:"Leave Days",category:"Attendance",dataType:"number"},{id:"overtime_hours",name:"Overtime Hours",category:"Attendance",dataType:"number"},{id:"perf_score",name:"Performance Score",category:"Performance",dataType:"number"},{id:"perf_rating",name:"Performance Rating",category:"Performance",dataType:"string"},{id:"last_appraisal",name:"Last Appraisal Date",category:"Performance",dataType:"date"}]}getMockTemplates(){return[{id:1,name:"Employee Directory",description:"Basic employee contact info",selectedFields:["emp_code","emp_name","email","phone","department"],filters:{},sortBy:"emp_name",sortOrder:"asc",createdAt:"2024-12-01",createdBy:"Admin"},{id:2,name:"Salary Report",description:"Employee salary breakdown",selectedFields:["emp_code","emp_name","department","basic_salary","gross_salary","ctc"],filters:{},sortBy:"ctc",sortOrder:"desc",createdAt:"2024-12-05",createdBy:"Admin"},{id:3,name:"Attendance Summary",description:"Monthly attendance overview",selectedFields:["emp_code","emp_name","present_days","absent_days","leave_days","overtime_hours"],filters:{},sortBy:"emp_name",sortOrder:"asc",createdAt:"2024-12-10",createdBy:"Admin"}]}getFieldsByCategory(t){return this.availableFields.filter(e=>e.category===t&&!this.isFieldSelected(e))}isFieldSelected(t){return this.selectedFields.some(e=>e.id===t.id)}onDragStart(t,e){this.draggedField=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e.id))}onDragOver(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}onDrop(t){t.preventDefault(),this.draggedField&&!this.isFieldSelected(this.draggedField)&&this.selectedFields.push(this.draggedField),this.draggedField=null}addField(t){this.isFieldSelected(t)||this.selectedFields.push(t)}removeField(t){this.selectedFields=this.selectedFields.filter(e=>e.id!==t.id)}moveFieldUp(t){t>0&&([this.selectedFields[t],this.selectedFields[t-1]]=[this.selectedFields[t-1],this.selectedFields[t]])}moveFieldDown(t){t<this.selectedFields.length-1&&([this.selectedFields[t],this.selectedFields[t+1]]=[this.selectedFields[t+1],this.selectedFields[t]])}clearSelection(){this.selectedFields=[],this.currentTemplate={name:"",description:"",selectedFields:[],filters:{},sortBy:"",sortOrder:"asc"}}loadTemplate(t){this.currentTemplate=me({},t),this.selectedFields=this.availableFields.filter(e=>t.selectedFields.includes(e.id))}openSaveModal(){this.currentTemplate.selectedFields=this.selectedFields.map(t=>t.id),this.showTemplateModal=!0}closeTemplateModal(){this.showTemplateModal=!1}saveTemplate(){!this.currentTemplate.name||this.selectedFields.length===0||(this.saving=!0,this.currentTemplate.selectedFields=this.selectedFields.map(t=>t.id),this.dashboardService.saveReportTemplate(this.currentTemplate).subscribe({next:t=>{if(!this.currentTemplate.id)this.savedTemplates.push(t);else{let e=this.savedTemplates.findIndex(i=>i.id===t.id);e>=0&&(this.savedTemplates[e]=t)}this.saving=!1,this.showTemplateModal=!1},error:()=>{let t=Tt(me({},this.currentTemplate),{id:Date.now(),createdAt:new Date().toISOString().split("T")[0],createdBy:"Current User"});this.savedTemplates.push(t),this.saving=!1,this.showTemplateModal=!1}}))}deleteTemplate(t){confirm(`Delete template "${t.name}"?`)&&t.id&&this.dashboardService.deleteReportTemplate(t.id).subscribe({next:()=>this.savedTemplates=this.savedTemplates.filter(e=>e.id!==t.id),error:()=>this.savedTemplates=this.savedTemplates.filter(e=>e.id!==t.id)})}generatePreview(){this.selectedFields.length!==0&&(this.loading=!1,this.showPreview=!0,setTimeout(()=>{this.previewData=this.generateMockPreviewData(),this.loading=!1},500))}generateMockPreviewData(){let t=[],e=["John Smith","Sarah Johnson","Mike Chen","Emily Davis","James Wilson"],i=["Engineering","Sales","Marketing","HR","Finance"];for(let r=0;r<10;r++){let s={};this.selectedFields.forEach(d=>{switch(d.dataType){case"string":d.id.includes("name")?s[d.id]=e[r%5]:d.id.includes("department")?s[d.id]=i[r%5]:d.id.includes("email")?s[d.id]=`employee${r+1}@company.com`:s[d.id]=`Value ${r+1}`;break;case"number":d.id.includes("salary")||d.id.includes("ctc")?s[d.id]=5e4+r*5e3:d.id.includes("days")?s[d.id]=20+r%5:s[d.id]=Math.floor(Math.random()*100);break;case"date":s[d.id]=new Date(2024,r%12,r%28+1).toLocaleDateString();break;default:s[d.id]=`Data ${r+1}`}}),t.push(s)}return t}closePreview(){this.showPreview=!1,this.previewData=[]}exportReport(t){if(this.selectedFields.length===0){alert("Please select at least one field");return}t==="csv"?this.exportToCSV():t==="excel"?this.exportToExcel():t==="pdf"&&this.exportToPDF()}exportToCSV(){let t=this.previewData.length>0?this.previewData:this.generateMockPreviewData(),e=this.selectedFields.map(s=>s.name).join(","),i=t.map(s=>this.selectedFields.map(d=>`"${s[d.id]||""}"`).join(",")),r=[e,...i].join(`
`);this.downloadFile(r,"report.csv","text/csv")}exportToExcel(){let t=this.previewData.length>0?this.previewData:this.generateMockPreviewData(),e='<table border="1"><tr>';this.selectedFields.forEach(d=>e+=`<th>${d.name}</th>`),e+="</tr>",t.forEach(d=>{e+="<tr>",this.selectedFields.forEach(u=>e+=`<td>${d[u.id]||""}</td>`),e+="</tr>"}),e+="</table>";let i=new Blob([e],{type:"application/vnd.ms-excel"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="report.xls",s.click(),URL.revokeObjectURL(r)}exportToPDF(){alert("PDF export would be handled by a PDF library like jsPDF. For now, please use CSV or Excel export.")}downloadFile(t,e,i){let r=new Blob([t],{type:i}),s=URL.createObjectURL(r),d=document.createElement("a");d.href=s,d.download=e,d.click(),URL.revokeObjectURL(s)}getFieldIcon(t){switch(t){case"Employee":return"fa-user";case"Employment":return"fa-briefcase";case"Salary":return"fa-dollar-sign";case"Bank":return"fa-university";case"Attendance":return"fa-calendar-check";case"Performance":return"fa-chart-line";default:return"fa-database"}}static \u0275fac=function(e){return new(e||n)(V(zs))};static \u0275cmp=_e({type:n,selectors:[["app-custom-report-builder"]],standalone:!1,decls:52,vars:13,consts:[[1,"report-builder-container"],[1,"builder-header"],[1,"header-left"],[1,"fas","fa-file-alt"],[1,"subtitle"],[1,"header-actions"],[1,"btn-secondary",3,"click"],[1,"fas","fa-eraser"],[1,"btn-secondary",3,"click","disabled"],[1,"fas","fa-eye"],[1,"btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[1,"builder-content"],[1,"fields-panel"],[1,"panel-header"],[1,"fas","fa-database"],[1,"field-count"],[1,"panel-body"],["class","category-section",4,"ngFor","ngForOf"],[1,"builder-panel",3,"dragover","drop"],[1,"fas","fa-columns"],["class","drop-zone",4,"ngIf"],["class","selected-fields",4,"ngIf"],["class","export-section",4,"ngIf"],[1,"templates-panel"],[1,"fas","fa-folder"],[1,"template-list"],["class","template-item",4,"ngFor","ngForOf"],["class","no-templates",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"category-section"],[1,"category-header"],[1,"fas",3,"ngClass"],[1,"category-count"],[1,"field-list"],["class","field-item","draggable","true",3,"dragstart","click",4,"ngFor","ngForOf"],["draggable","true",1,"field-item",3,"dragstart","click"],[1,"field-name"],[1,"field-type"],[1,"drop-zone"],[1,"fas","fa-hand-pointer"],[1,"selected-fields"],["class","selected-field",4,"ngFor","ngForOf"],[1,"selected-field"],[1,"field-handle"],[1,"fas","fa-grip-vertical"],[1,"field-info"],[1,"field-category"],[1,"field-actions"],[1,"btn-icon",3,"click","disabled"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],[1,"btn-icon","remove",3,"click"],[1,"fas","fa-times"],[1,"export-section"],[1,"export-buttons"],[1,"export-btn","csv",3,"click"],[1,"fas","fa-file-csv"],[1,"export-btn","excel",3,"click"],[1,"fas","fa-file-excel"],[1,"export-btn","pdf",3,"click"],[1,"fas","fa-file-pdf"],[1,"template-item"],[1,"template-info",3,"click"],[1,"template-name"],[1,"template-desc"],[1,"template-meta"],[1,"fas","fa-trash"],[1,"no-templates"],[1,"fas","fa-folder-open"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter template name",3,"ngModelChange","ngModel"],["placeholder","Enter description",3,"ngModelChange","ngModel"],[1,"fields-preview"],["class","field-chip",4,"ngFor","ngForOf"],[1,"modal-footer"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"field-chip"],[1,"fas","fa-spinner","fa-spin"],[1,"modal-content","preview-modal",3,"click"],["class","loading-state",4,"ngIf"],["class","preview-table-container",4,"ngIf"],[1,"loading-state"],[1,"preview-table-container"],[1,"preview-table"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Custom Report Builder"),a(),o(6,"p",4),l(7,"Build custom reports with drag and drop"),a()(),o(8,"div",5)(9,"button",6),x("click",function(){return i.clearSelection()}),y(10,"i",7),l(11," Clear "),a(),o(12,"button",8),x("click",function(){return i.generatePreview()}),y(13,"i",9),l(14," Preview "),a(),o(15,"button",10),x("click",function(){return i.openSaveModal()}),y(16,"i",11),l(17," Save Template "),a()()(),o(18,"div",12)(19,"div",13)(20,"div",14)(21,"h3"),y(22,"i",15),l(23," Available Fields"),a(),o(24,"span",16),l(25),a()(),o(26,"div",17),b(27,dCe,9,4,"div",18),a()(),o(28,"div",19),x("dragover",function(s){return i.onDragOver(s)})("drop",function(s){return i.onDrop(s)}),o(29,"div",14)(30,"h3"),y(31,"i",20),l(32," Selected Columns"),a(),o(33,"span",16),l(34),a()(),o(35,"div",17),b(36,pCe,4,0,"div",21)(37,uCe,2,1,"div",22),a(),b(38,gCe,13,0,"div",23),a(),o(39,"div",24)(40,"div",14)(41,"h3"),y(42,"i",25),l(43," Saved Templates"),a(),o(44,"span",16),l(45),a()(),o(46,"div",17)(47,"div",26),b(48,fCe,10,3,"div",27),a(),b(49,hCe,4,0,"div",28),a()()()(),b(50,xCe,27,7,"div",29)(51,PCe,20,2,"div",29)),e&2&&(c(12),m("disabled",i.selectedFields.length===0),c(3),m("disabled",i.selectedFields.length===0),c(10),D("",i.availableFields.length," fields"),c(2),m("ngForOf",i.categories),c(7),D("",i.selectedFields.length," selected"),c(2),m("ngIf",i.selectedFields.length===0),c(),m("ngIf",i.selectedFields.length>0),c(),m("ngIf",i.selectedFields.length>0),c(7),D("",i.savedTemplates.length," templates"),c(3),m("ngForOf",i.savedTemplates),c(),m("ngIf",i.savedTemplates.length===0),c(),m("ngIf",i.showTemplateModal),c(),m("ngIf",i.showPreview))},dependencies:[ot,Se,be,Ie,Oe,Ee],styles:[".report-builder-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 60px)}.builder-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.builder-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0;display:flex;align-items:center;gap:12px}.builder-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.builder-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0;font-size:14px}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;border:none;color:#fff}.builder-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.builder-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 280px;gap:20px}@media(max-width:1200px){.builder-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.builder-content[_ngcontent-%COMP%]   .templates-panel[_ngcontent-%COMP%]{order:-1}}.fields-panel[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f;overflow:hidden}.fields-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.fields-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#333;display:flex;align-items:center;gap:8px}.fields-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.fields-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .field-count[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .field-count[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .field-count[_ngcontent-%COMP%]{font-size:12px;color:#888;background:#f0f0f0;padding:4px 8px;border-radius:12px}.fields-panel[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%], .builder-panel[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%], .templates-panel[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{padding:16px;max-height:calc(100vh - 250px);overflow-y:auto}.category-section[_ngcontent-%COMP%]{margin-bottom:16px}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f8f9fa;border-radius:6px;margin-bottom:8px;font-size:13px;font-weight:600;color:#333}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;font-size:12px}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{margin-left:auto;font-size:11px;color:#888;background:#fff;padding:2px 6px;border-radius:10px}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-radius:6px;cursor:grab;transition:all .2s;border:1px solid transparent}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]:hover{background:#0080800d;border-color:#00808033}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]:active{cursor:grabbing}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .field-name[_ngcontent-%COMP%]{font-size:13px;color:#333}.category-section[_ngcontent-%COMP%]   .field-list[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .field-type[_ngcontent-%COMP%]{font-size:11px;color:#888;text-transform:uppercase}.drop-zone[_ngcontent-%COMP%]{border:2px dashed #ddd;border-radius:12px;padding:60px 20px;text-align:center;color:#888}.drop-zone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#ccc}.drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.selected-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#f8f9fa;border-radius:8px;border:1px solid #eee}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-handle[_ngcontent-%COMP%]{color:#ccc;cursor:grab}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-info[_ngcontent-%COMP%]   .field-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-info[_ngcontent-%COMP%]   .field-category[_ngcontent-%COMP%]{font-size:12px;color:#888}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:#fff;border-radius:4px;cursor:pointer;color:#666;display:flex;align-items:center;justify-content:center;transition:all .2s}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.selected-fields[_ngcontent-%COMP%]   .selected-field[_ngcontent-%COMP%]   .field-actions[_ngcontent-%COMP%]   .btn-icon.remove[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.export-section[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #eee;margin-top:16px}.export-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:#333}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{flex:1;padding:10px;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;font-size:13px;transition:all .2s}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.csv[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.csv[_ngcontent-%COMP%]:hover{background:#c8e6c9}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.excel[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.excel[_ngcontent-%COMP%]:hover{background:#bbdefb}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.pdf[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.export-section[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.pdf[_ngcontent-%COMP%]:hover{background:#ffcdd2}.template-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#f8f9fa;border-radius:8px;cursor:pointer;transition:all .2s}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]:hover{background:#0080800d}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .template-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .template-desc[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:2px}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .template-meta[_ngcontent-%COMP%]{font-size:11px;color:#888;margin-top:4px}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:transparent;border-radius:4px;cursor:pointer;color:#888;display:flex;align-items:center;justify-content:center}.template-list[_ngcontent-%COMP%]   .template-item[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.no-templates[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#888}.no-templates[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px;color:#ccc}.no-templates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.preview-modal[_ngcontent-%COMP%]{max-width:900px}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f0f0f0;border-radius:50%;cursor:pointer;color:#666;display:flex;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#555;margin-bottom:6px;font-weight:500}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .fields-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .fields-preview[_ngcontent-%COMP%]   .field-chip[_ngcontent-%COMP%]{background:#0080801a;color:teal;padding:4px 10px;border-radius:12px;font-size:12px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:60px;color:#666}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]{overflow-x:auto}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]   .preview-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]   .preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]   .preview-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;text-align:left;border-bottom:1px solid #eee;white-space:nowrap}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]   .preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;position:sticky;top:0}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-table-container[_ngcontent-%COMP%]   .preview-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f8f9fa}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;border:none;color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:6px;font-size:13px}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.csv[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]   .export-btn.excel[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}"]})};function wCe(n,t){if(n&1&&(o(0,"div",32),l(1),a()),n&2){let e=p();ie("success",e.messageType==="success")("error",e.messageType==="error"),c(),D(" ",e.message," ")}}function ECe(n,t){n&1&&(o(0,"option",33),l(1,"Loading employees..."),a()),n&2&&m("ngValue",null)}function OCe(n,t){n&1&&(o(0,"option",33),l(1,"-- Select Employee --"),a()),n&2&&m("ngValue",null)}function TCe(n,t){if(n&1&&(o(0,"option",33),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En(" ",e.firstName," ",e.lastName," (",e.employeeCode,") ")}}function kCe(n,t){if(n&1&&(o(0,"div",34)(1,"div",35),l(2),a(),o(3,"div",36)(4,"span",37),l(5),a(),o(6,"span",38),l(7),a()()()),n&2){let e=p();c(2),_(e.getEmployeeInitials(e.selectedEmployee)),c(3),Ge("",e.selectedEmployee.firstName," ",e.selectedEmployee.lastName),c(2),_((e.selectedEmployee.designation==null?null:e.selectedEmployee.designation.title)||(e.selectedEmployee.jobRole==null?null:e.selectedEmployee.jobRole.title)||"Employee")}}function ICe(n,t){if(n&1&&(o(0,"div",41)(1,"div",42),y(2,"i",43),l(3," Currently Clocked In "),a(),o(4,"div",44)(5,"span",45),l(6,"Clock In Time:"),a(),o(7,"span",46),l(8),a()()()),n&2){let e=p(2);c(8),_(e.formatClockTime(e.todayRecord==null?null:e.todayRecord.clockIn))}}function DCe(n,t){if(n&1&&(o(0,"div",41)(1,"div",47),y(2,"i",43),l(3," Shift Completed "),a(),o(4,"div",44)(5,"span",45),l(6,"Clock In:"),a(),o(7,"span",46),l(8),a()(),o(9,"div",44)(10,"span",45),l(11,"Clock Out:"),a(),o(12,"span",46),l(13),a()()()),n&2){let e=p(2);c(8),_(e.formatClockTime(e.todayRecord==null?null:e.todayRecord.clockIn)),c(5),_(e.formatClockTime(e.todayRecord==null?null:e.todayRecord.clockOut))}}function ACe(n,t){n&1&&(o(0,"div",41)(1,"div",48),y(2,"i",29),l(3," Not Clocked In "),a()())}function RCe(n,t){if(n&1&&(o(0,"div",39),b(1,ICe,9,1,"div",40)(2,DCe,14,2,"div",40)(3,ACe,4,0,"div",40),a()),n&2){let e=p();c(),m("ngIf",e.isClockedIn()),c(),m("ngIf",e.isClockedOut()),c(),m("ngIf",!e.todayRecord)}}function FCe(n,t){n&1&&(o(0,"div",49),y(1,"i",50),l(2," Loading... "),a())}function NCe(n,t){n&1&&y(0,"i",51)}function LCe(n,t){n&1&&y(0,"i",50)}function VCe(n,t){n&1&&y(0,"i",52)}function BCe(n,t){n&1&&y(0,"i",50)}function UCe(n,t){n&1&&y(0,"i",52)}function jCe(n,t){n&1&&y(0,"i",50)}function WCe(n,t){if(n&1){let e=F();o(0,"button",67),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.quickClockOut(r))}),b(1,UCe,1,0,"i",26)(2,jCe,1,0,"i",24),o(3,"span"),l(4,"Clock Out"),a()()}if(n&2){let e=p(3);m("disabled",e.loadingClockOut),c(),m("ngIf",!e.loadingClockOut),c(),m("ngIf",e.loadingClockOut)}}function zCe(n,t){if(n&1&&(o(0,"div",68),l(1," Completed "),a()),n&2){let e=p().$implicit;ie("completed",e.clockOut)}}function qCe(n,t){if(n&1&&(o(0,"div",55)(1,"div",56),l(2),a(),o(3,"div",57)(4,"span",58),l(5),a(),o(6,"div",59)(7,"span",60),y(8,"i",61),l(9),a(),o(10,"span",62),y(11,"i",63),l(12),a()()(),o(13,"div",64),b(14,WCe,5,3,"button",65)(15,zCe,2,2,"div",66),a()()),n&2){let e=t.$implicit,i=p(2);ie("active",e.clockIn&&!e.clockOut),c(2),_(i.getEmployeeInitials(e)),c(3),_(i.getEmployeeName(e)),c(4),D(" In: ",i.formatClockTime(e.clockIn)),c(3),D(" Out: ",e.clockOut?i.formatClockTime(e.clockOut):"-"),c(2),m("ngIf",e.clockIn&&!e.clockOut),c(),m("ngIf",e.clockOut)}}function HCe(n,t){if(n&1&&(o(0,"div",53),b(1,qCe,16,8,"div",54),a()),n&2){let e=p();c(),m("ngForOf",e.todayActivities)}}function GCe(n,t){n&1&&(o(0,"div",69),y(1,"i",70),o(2,"p"),l(3,"No activity recorded today"),a()())}var Yu=class n{constructor(t,e,i){this.attendanceService=t;this.employeeService=e;this.cdr=i}currentTime=new Date;todayRecord=null;employees=[];selectedEmployeeId=null;selectedEmployee=null;loadingClockIn=!1;loadingClockOut=!1;loadingRecord=!1;loadingEmployees=!0;message="";messageType="";todayActivities=[];clockInterval=null;refreshInterval=null;ngOnInit(){this.clockInterval=setInterval(()=>{this.currentTime=new Date,this.cdr.markForCheck()},1e3),this.loadEmployees(),this.loadTodayActivities(),this.refreshInterval=setInterval(()=>{this.loadTodayActivities()},3e4)}ngOnDestroy(){this.clockInterval&&clearInterval(this.clockInterval),this.refreshInterval&&clearInterval(this.refreshInterval)}loadEmployees(){this.loadingEmployees=!0,this.cdr.markForCheck(),this.employeeService.getAll().subscribe({next:t=>{this.employees=t.filter(e=>e.active),this.employees.length>0&&!this.selectedEmployeeId&&(this.selectedEmployeeId=this.employees[0].id,this.selectedEmployee=this.employees[0],this.loadEmployeeTodayRecord()),this.loadingEmployees=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading employees:",t),this.loadingEmployees=!1,this.cdr.markForCheck()}})}loadTodayActivities(){let t=new Date().toISOString().split("T")[0];this.attendanceService.getByDate(t).subscribe({next:e=>{this.todayActivities=e.filter(i=>i.clockIn||i.clockOut),this.cdr.markForCheck()},error:e=>console.error("Error loading today activities:",e)})}onEmployeeChange(){this.selectedEmployeeId?(this.selectedEmployee=this.employees.find(t=>t.id===this.selectedEmployeeId)||null,this.todayRecord=null,this.loadEmployeeTodayRecord()):(this.selectedEmployee=null,this.todayRecord=null),this.cdr.markForCheck()}loadEmployeeTodayRecord(){if(!this.selectedEmployeeId)return;this.loadingRecord=!0,this.cdr.markForCheck();let t=new Date().toISOString().split("T")[0];this.attendanceService.getByEmployeeAndDateRange(this.selectedEmployeeId,t,t).subscribe({next:e=>{this.todayRecord=e.length>0?e[0]:null,this.loadingRecord=!1,this.cdr.markForCheck()},error:()=>{this.todayRecord=null,this.loadingRecord=!1,this.cdr.markForCheck()}})}clockIn(){if(!this.selectedEmployeeId){this.showMessage("Please select an employee","error");return}this.loadingClockIn=!0,this.cdr.markForCheck(),this.attendanceService.clockIn(this.selectedEmployeeId,"WEB").subscribe({next:t=>{this.todayRecord=t,this.showMessage("Clocked in successfully!","success"),this.loadingClockIn=!1,this.loadTodayActivities(),this.cdr.markForCheck()},error:t=>{this.showMessage(t.error?.error||"Failed to clock in","error"),this.loadingClockIn=!1,this.cdr.markForCheck()}})}clockOut(){if(!this.selectedEmployeeId){this.showMessage("Please select an employee","error");return}this.loadingClockOut=!0,this.cdr.markForCheck(),this.attendanceService.clockOut(this.selectedEmployeeId).subscribe({next:t=>{this.todayRecord=t,this.showMessage("Clocked out successfully!","success"),this.loadingClockOut=!1,this.loadTodayActivities(),this.cdr.markForCheck()},error:t=>{this.showMessage(t.error?.error||"Failed to clock out","error"),this.loadingClockOut=!1,this.cdr.markForCheck()}})}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},5e3)}formatTime(t){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}formatDate(t){return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatClockTime(t){if(!t)return"-";let[e,i]=t.split(":"),r=parseInt(e,10),s=r>=12?"PM":"AM";return`${r%12||12}:${i} ${s}`}getEmployeeInitials(t){return t?.firstName&&t?.lastName?`${t.firstName.charAt(0)}${t.lastName.charAt(0)}`.toUpperCase():t?.employee?.firstName&&t?.employee?.lastName?`${t.employee.firstName.charAt(0)}${t.employee.lastName.charAt(0)}`.toUpperCase():"??"}getEmployeeName(t){if(t.employee)return`${t.employee.firstName} ${t.employee.lastName}`;let e=this.employees.find(i=>i.id===t.employeeId);return e?`${e.firstName} ${e.lastName}`:"Unknown"}isClockedIn(){return!!(this.todayRecord&&this.todayRecord.clockIn&&!this.todayRecord.clockOut)}isClockedOut(){return!!(this.todayRecord&&this.todayRecord.clockOut)}quickClockOut(t){if(!t.employeeId&&!t.employee?.id){this.showMessage("Cannot clock out - employee not found","error");return}let e=t.employeeId||t.employee?.id;this.loadingClockOut=!0,this.cdr.markForCheck(),this.attendanceService.clockOut(e).subscribe({next:i=>{this.showMessage(`${this.getEmployeeName(t)} clocked out successfully!`,"success"),this.loadingClockOut=!1,this.loadTodayActivities(),this.selectedEmployeeId===e&&(this.todayRecord=i),this.cdr.markForCheck()},error:i=>{this.showMessage(i.error?.error||"Failed to clock out","error"),this.loadingClockOut=!1,this.cdr.markForCheck()}})}static \u0275fac=function(e){return new(e||n)(V(To),V(ai),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-clock-in-out"]],decls:49,vars:19,consts:[[1,"time-clock-container"],[1,"page-header"],[1,"subtitle"],["class","alert",3,"success","error",4,"ngIf"],[1,"main-content"],[1,"left-panel"],[1,"date-time-card"],[1,"calendar-icon"],[1,"fas","fa-calendar-alt"],[1,"date-display"],[1,"time-label"],[1,"time-display"],[1,"employee-section"],[1,"section-label"],[1,"fas","fa-user"],[1,"employee-select",3,"ngModelChange","ngModel","disabled"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],["class","selected-employee-card",4,"ngIf"],["class","clock-status",4,"ngIf"],["class","loading-record",4,"ngIf"],[1,"clock-buttons"],[1,"btn-clock-in",3,"click","disabled"],["class","fas fa-sign-in-alt",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"btn-clock-out",3,"click","disabled"],["class","fas fa-sign-out-alt",4,"ngIf"],[1,"right-panel"],[1,"activity-section"],[1,"fas","fa-clock"],["class","activity-list",4,"ngIf"],["class","no-activity",4,"ngIf"],[1,"alert"],[3,"ngValue"],[1,"selected-employee-card"],[1,"employee-avatar"],[1,"employee-info"],[1,"employee-name"],[1,"employee-role"],[1,"clock-status"],["class","status-card",4,"ngIf"],[1,"status-card"],[1,"status-badge","clocked-in"],[1,"fas","fa-check-circle"],[1,"clock-time"],[1,"label"],[1,"time"],[1,"status-badge","clocked-out"],[1,"status-badge","not-clocked"],[1,"loading-record"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-sign-in-alt"],[1,"fas","fa-sign-out-alt"],[1,"activity-list"],["class","activity-item",3,"active",4,"ngFor","ngForOf"],[1,"activity-item"],[1,"activity-avatar"],[1,"activity-details"],[1,"activity-name"],[1,"activity-times"],[1,"time-in"],[1,"fas","fa-arrow-right"],[1,"time-out"],[1,"fas","fa-arrow-left"],[1,"activity-actions"],["class","quick-clock-out-btn","title","Clock Out",3,"disabled","click",4,"ngIf"],["class","activity-status",3,"completed",4,"ngIf"],["title","Clock Out",1,"quick-clock-out-btn",3,"click","disabled"],[1,"activity-status"],[1,"no-activity"],[1,"fas","fa-calendar-times"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Time Clock"),a(),o(4,"p",2),l(5,"Clock in and out for your shift"),a()(),b(6,wCe,2,5,"div",3),o(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),y(11,"i",8),a(),o(12,"div",9),l(13),a(),o(14,"div",10),l(15,"Current Time"),a(),o(16,"div",11),l(17),a()(),o(18,"div",12)(19,"div",13),y(20,"i",14),o(21,"span"),l(22,"Select Employee"),a()(),o(23,"select",15),S("ngModelChange",function(s){return P(i.selectedEmployeeId,s)||(i.selectedEmployeeId=s),s}),x("ngModelChange",function(){return i.onEmployeeChange()}),b(24,ECe,2,1,"option",16)(25,OCe,2,1,"option",16)(26,TCe,2,4,"option",17),a(),b(27,kCe,8,4,"div",18)(28,RCe,4,3,"div",19)(29,FCe,3,0,"div",20),o(30,"div",21)(31,"button",22),x("click",function(){return i.clockIn()}),b(32,NCe,1,0,"i",23)(33,LCe,1,0,"i",24),o(34,"span"),l(35,"Clock In"),a()(),o(36,"button",25),x("click",function(){return i.clockOut()}),b(37,VCe,1,0,"i",26)(38,BCe,1,0,"i",24),o(39,"span"),l(40,"Clock Out"),a()()()()(),o(41,"div",27)(42,"div",28)(43,"div",13),y(44,"i",29),o(45,"span"),l(46,"Today's Activity"),a()(),b(47,HCe,2,1,"div",30)(48,GCe,4,0,"div",31),a()()()()),e&2&&(c(6),m("ngIf",i.message),c(7),_(i.formatDate(i.currentTime)),c(4),_(i.formatTime(i.currentTime)),c(6),M("ngModel",i.selectedEmployeeId),m("disabled",i.loadingEmployees),c(),m("ngIf",i.loadingEmployees),c(),m("ngIf",!i.loadingEmployees),c(),m("ngForOf",i.employees),c(),m("ngIf",i.selectedEmployee),c(),m("ngIf",i.selectedEmployee&&!i.loadingRecord),c(),m("ngIf",i.loadingRecord),c(2),m("disabled",i.loadingClockIn||i.loadingClockOut||i.loadingRecord||!i.selectedEmployeeId||i.isClockedIn()),c(),m("ngIf",!i.loadingClockIn),c(),m("ngIf",i.loadingClockIn),c(3),m("disabled",i.loadingClockIn||i.loadingClockOut||i.loadingRecord||!i.selectedEmployeeId||!i.isClockedIn()),c(),m("ngIf",!i.loadingClockOut),c(),m("ngIf",i.loadingClockOut),c(9),m("ngIf",i.todayActivities.length>0),c(),m("ngIf",i.todayActivities.length===0))},dependencies:[At,Se,be,Vt,je,We,Ue,Oe,Ee,Rt],styles:[".time-clock-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:100vh}.time-clock-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:24px}.time-clock-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#1a1a2e;margin:0;font-weight:600}.time-clock-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin:4px 0 0;font-size:14px}.time-clock-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:20px}.time-clock-container[_ngcontent-%COMP%]   .alert.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.time-clock-container[_ngcontent-%COMP%]   .alert.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.time-clock-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:24px}@media(max-width:900px){.time-clock-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.time-clock-container[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4285f4,#2b6cb0);border-radius:16px 16px 0 0;padding:32px;text-align:center;color:#fff}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]   .date-display[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin-bottom:24px}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:13px;opacity:.9;margin-bottom:8px}.time-clock-container[_ngcontent-%COMP%]   .date-time-card[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{font-size:42px;font-weight:700;letter-spacing:1px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 16px 16px;padding:24px;box-shadow:0 4px 12px #0000000d}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;color:#6b7280;font-size:13px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .employee-select[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;background:#fff;margin-bottom:16px;color:#1a1a2e}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .employee-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4285f4}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .selected-employee-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f0f9ff;border-radius:12px;margin-bottom:16px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .selected-employee-card[_ngcontent-%COMP%]   .employee-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#3b82f6;color:#fff;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:600}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .selected-employee-card[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .selected-employee-card[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a2e;font-size:15px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .selected-employee-card[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-role[_ngcontent-%COMP%]{color:#6b7280;font-size:13px;margin-top:2px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]{margin-bottom:20px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .status-card[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:16px;border:1px solid #e2e8f0}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;font-size:14px;margin-bottom:12px;padding:8px 12px;border-radius:8px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .status-badge.clocked-in[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .status-badge.clocked-out[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .status-badge.not-clocked[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .clock-time[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #e2e8f0}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .clock-time[_ngcontent-%COMP%]:last-child{border-bottom:none}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .clock-time[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .clock-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#1e293b;font-weight:600;font-size:15px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .loading-record[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .loading-record[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]{margin-bottom:20px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;display:flex;align-items:center;gap:6px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#1a1a2e;font-weight:500;font-size:14px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:12px;padding:24px;margin-bottom:20px;text-align:center;border:2px solid #4caf50;animation:_ngcontent-%COMP%_pulse-border 2s infinite}@keyframes _ngcontent-%COMP%_pulse-border{0%,to{border-color:#4caf50}50%{border-color:#81c784}}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .timer-label[_ngcontent-%COMP%]{font-size:14px;color:#2e7d32;font-weight:500;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .timer-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:12px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .timer-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:#2e7d32;animation:_ngcontent-%COMP%_pulse-icon 1s infinite}@keyframes _ngcontent-%COMP%_pulse-icon{0%,to{opacity:1}50%{opacity:.5}}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .timer-display[_ngcontent-%COMP%]   .elapsed-time[_ngcontent-%COMP%]{font-size:42px;font-weight:700;color:#1b5e20;font-family:Consolas,Monaco,monospace;letter-spacing:3px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .earnings-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;background:#ffffff80;padding:8px 16px;border-radius:20px;display:inline-flex}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .earnings-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#4caf50}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .running-timer[_ngcontent-%COMP%]   .earnings-display[_ngcontent-%COMP%]   .current-earnings[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#2e7d32}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .session-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:16px;margin-bottom:20px;border:1px solid #64b5f6}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .session-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;color:#1565c0;margin-bottom:12px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .session-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .session-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;color:#1a1a2e;font-size:14px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .session-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .earnings[_ngcontent-%COMP%]{font-weight:700;color:#2e7d32}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 20px;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;transition:all .2s}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   .btn-clock-in[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   .btn-clock-in[_ngcontent-%COMP%]:hover:not(:disabled){background:#16a34a;transform:translateY(-2px);box-shadow:0 4px 12px #22c55e4d}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   .btn-clock-out[_ngcontent-%COMP%]{background:#f97316;color:#fff}.time-clock-container[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .clock-buttons[_ngcontent-%COMP%]   .btn-clock-out[_ngcontent-%COMP%]:hover:not(:disabled){background:#ea580c;transform:translateY(-2px);box-shadow:0 4px 12px #f973164d}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 12px #0000000d}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:20px;color:#1a1a2e;font-weight:600;font-size:15px}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:16px;background:#f9fafb;border-radius:12px;border:1px solid #f0f0f0;transition:all .2s}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item.active[_ngcontent-%COMP%]{background:#f0fdf4;border-color:#bbf7d0}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:#e5e7eb;color:#6b7280;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;flex-shrink:0}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item.active[_ngcontent-%COMP%]   .activity-avatar[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]{flex:1;min-width:0}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-name[_ngcontent-%COMP%]{display:block;font-weight:600;color:#1a1a2e;font-size:14px;margin-bottom:6px}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-in[_ngcontent-%COMP%], .time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-out[_ngcontent-%COMP%], .time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:13px;color:#6b7280}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-in[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-out[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-in[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#22c55e}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .time-out[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-times[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-actions[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .quick-clock-out-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .quick-clock-out-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-1px);box-shadow:0 4px 12px #ef44444d}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .quick-clock-out-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .quick-clock-out-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-status[_ngcontent-%COMP%]{padding:6px 14px;border-radius:20px;font-size:12px;font-weight:500;flex-shrink:0}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-status.completed[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:1px solid #e5e7eb}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-status.active-badge[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .no-activity[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#9ca3af}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .no-activity[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px;margin-bottom:12px;display:block}.time-clock-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .activity-section[_ngcontent-%COMP%]   .no-activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}"],changeDetection:0})};function $Ce(n,t){n&1&&(o(0,"div",21),y(1,"i",22),l(2," Loading... "),a())}function YCe(n,t){if(n&1){let e=F();o(0,"button",38),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.approveRecord(r))}),y(1,"i",39),l(2," Approve "),a()}if(n&2){let e=p().$implicit,i=p(2);m("disabled",i.approvingId===e.id)}}function JCe(n,t){if(n&1){let e=F();o(0,"button",40),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.rejectRecord(r))}),y(1,"i",41),l(2," Reject "),a()}if(n&2){let e=p().$implicit,i=p(2);m("disabled",i.approvingId===e.id)}}function KCe(n,t){n&1&&(o(0,"span",42),y(1,"i",43),l(2," Approved "),a())}function QCe(n,t){n&1&&(o(0,"span",44),y(1,"i",45),l(2," Rejected "),a())}function XCe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"input",27),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.selected,r)||(s.selected=r),f(r)}),a()(),o(3,"td",28),l(4),a(),o(5,"td")(6,"div",29)(7,"div",30),l(8),a(),o(9,"span",31),l(10),a()()(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td")(20,"span",32),l(21),a()(),o(22,"td",33),b(23,YCe,3,1,"button",34)(24,JCe,3,1,"button",35)(25,KCe,3,0,"span",36)(26,QCe,3,0,"span",37),a()()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.selected),c(2),_((e.employee==null?null:e.employee.employeeCode)||(e.employee==null?null:e.employee.id)||"-"),c(4),_(i.getInitials(e.employee)),c(2),_(i.getEmployeeName(e.employee)),c(2),_(i.formatTime(e.clockIn)),c(2),_(i.formatTime(e.clockOut)),c(2),_(i.calculateHoursDisplay(e)),c(2),_(e.projectCode||(e.project==null?null:e.project.name)||e.projectName||"-"),c(2),m("ngClass",i.getStatusBadgeClass(e)),c(),D(" ",i.getDisplayStatus(e)," "),c(2),m("ngIf",e.approvalStatus==="PENDING"),c(),m("ngIf",e.approvalStatus==="PENDING"),c(),m("ngIf",e.approvalStatus==="APPROVED"),c(),m("ngIf",e.approvalStatus==="REJECTED")}}function ZCe(n,t){n&1&&(o(0,"tr")(1,"td",46),l(2,"No attendance records found for this date"),a()())}function ebe(n,t){if(n&1){let e=F();o(0,"table",23)(1,"thead")(2,"tr")(3,"th")(4,"input",24),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectAll,r)||(s.selectAll=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.toggleSelectAll())}),a()(),o(5,"th"),l(6,"Employee ID"),a(),o(7,"th"),l(8,"Employee"),a(),o(9,"th"),l(10,"Clock In"),a(),o(11,"th"),l(12,"Clock Out"),a(),o(13,"th"),l(14,"Hours"),a(),o(15,"th"),l(16,"Project"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,XCe,27,14,"tr",25)(23,ZCe,3,0,"tr",26),a()()}if(n&2){let e=p();c(4),M("ngModel",e.selectAll),c(18),m("ngForOf",e.filteredRecords),c(),m("ngIf",e.filteredRecords.length===0)}}function tbe(n,t){if(n&1){let e=F();o(0,"div",47)(1,"span"),l(2),a(),o(3,"button",48),x("click",function(){g(e);let r=p();return f(r.bulkApprove())}),y(4,"i",49),l(5," Approve Selected "),a()()}if(n&2){let e=p();c(2),D("",e.getSelectedRecords().length," record(s) selected"),c(),m("disabled",e.bulkApproving)}}var S2=class n{constructor(t,e,i,r){this.attendanceService=t;this.employeeService=e;this.toastService=i;this.cdr=r}employees=[];attendanceRecords=[];filteredRecords=[];attendanceRules=[];projectTimeEntries=[];selectedDate=new Date().toISOString().split("T")[0];selectedEmployeeId=null;filterStatus="";searchTerm="";loading=!1;dataLoaded=!1;showManualEntryModal=!1;showBulkUploadModal=!1;showRulesModal=!1;showProjectTimeModal=!1;manualEntry={};bulkFile=null;newRule=this.getEmptyRule();newProjectTime=this.getEmptyProjectTime();selectAll=!1;approvingId=null;bulkApproving=!1;ngOnInit(){this.loadData()}loadData(){this.dataLoaded||(this.loading=!0,this.cdr.detectChanges(),fo({employees:this.employeeService.getAll(),records:this.attendanceService.getByDate(this.selectedDate)}).pipe(Tn(()=>{this.loading=!1,this.dataLoaded=!0,this.cdr.detectChanges()})).subscribe({next:t=>{this.employees=t.employees,this.attendanceRecords=t.records,this.applyFilters(),this.cdr.detectChanges()},error:t=>{console.error("Error loading data:",t),this.toastService.error("Failed to load attendance data"),this.cdr.detectChanges()}}))}loadAttendanceRecords(){this.loading=!0,this.cdr.detectChanges(),this.attendanceService.getByDate(this.selectedDate).pipe(Tn(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe({next:t=>{this.attendanceRecords=t,this.applyFilters(),this.cdr.detectChanges()},error:t=>{console.error("Error loading records:",t),this.toastService.error("Failed to load attendance records"),this.cdr.detectChanges()}})}onDateChange(){this.loadAttendanceRecords()}onSearchChange(){this.applyFilters()}applyFilters(){let t=this.attendanceRecords;if(this.filterStatus&&(t=t.filter(e=>e.status===this.filterStatus)),this.selectedEmployeeId&&(t=t.filter(e=>e.employee?.id===this.selectedEmployeeId)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>this.getEmployeeName(i.employee).toLowerCase().includes(e))}this.filteredRecords=t,this.cdr.detectChanges()}countWorking(){return this.attendanceRecords.filter(t=>t.clockIn&&!t.clockOut).length}formatDisplayDate(t){return t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}getInitials(t){if(!t)return"??";let e=t.firstName?.charAt(0)||"",i=t.lastName?.charAt(0)||"";return(e+i).toUpperCase()||"??"}calculateHoursDisplay(t){if(!t.clockIn||!t.clockOut)return"\u2014";let e=(t.regularHours||0)+(t.overtimeHours||0);return e>0?e.toFixed(1):"\u2014"}getDisplayStatus(t){return t.clockIn&&!t.clockOut?"Working":t.approvalStatus==="PENDING"?"Pending":t.approvalStatus==="APPROVED"?"Approved":t.status||"Present"}getStatusBadgeClass(t){return t.clockIn&&!t.clockOut?"working":t.approvalStatus==="PENDING"?"pending":t.approvalStatus==="APPROVED"?"approved":"present"}openManualEntryModal(){this.manualEntry=this.getEmptyManualEntry(),this.manualEntry.attendanceDate=this.selectedDate,this.showManualEntryModal=!0}closeManualEntryModal(){this.showManualEntryModal=!1}saveManualEntry(){if(!this.manualEntry.employeeId){this.toastService.warning("Please select an employee");return}let t={employeeId:this.manualEntry.employeeId,attendanceDate:this.manualEntry.attendanceDate,clockIn:this.manualEntry.clockIn,clockOut:this.manualEntry.clockOut,status:this.manualEntry.status||"PRESENT",remarks:this.manualEntry.remarks};this.loading=!0,this.attendanceService.manualEntry(t).pipe(Tn(()=>this.loading=!1)).subscribe({next:()=>{this.toastService.success("Manual entry saved successfully"),this.closeManualEntryModal(),this.loadAttendanceRecords()},error:e=>{console.error("Error saving manual entry:",e),this.toastService.error("Failed to save manual entry")}})}getEmptyManualEntry(){return{employeeId:null,attendanceDate:"",clockIn:"",clockOut:"",status:"PRESENT",remarks:""}}countByStatus(t){return this.attendanceRecords.filter(e=>e.status===t).length}formatTime(t){return t?t.substring(0,5):"\u2014"}getEmployeeName(t){return t&&`${t.firstName||""} ${t.lastName||""}`.trim()||"Unknown"}getEmptyRule(){return{ruleName:"",description:"",standardStartTime:"09:00",standardEndTime:"17:00",regularHoursPerDay:8,weeklyHoursLimit:40,graceMinutesIn:15,graceMinutesOut:15,breakDurationMinutes:60,autoDeductBreak:!0,enableOvertime:!0,overtimeMultiplier:1.5,maxOvertimeHoursDaily:4,maxOvertimeHoursWeekly:20,halfDayEnabled:!0,halfDayHours:4,isActive:!0,isDefault:!1}}getEmptyProjectTime(){return{employeeId:void 0,projectCode:"",projectName:"",entryDate:new Date().toISOString().split("T")[0],entryType:"REGULAR",hoursWorked:0,isPresent:!0,taskDescription:"",status:"DRAFT",remarks:"",billable:!0,billableRate:0}}toggleSelectAll(){this.filteredRecords.forEach(t=>t.selected=this.selectAll),this.cdr.markForCheck()}getSelectedRecords(){return this.filteredRecords.filter(t=>t.selected&&t.approvalStatus==="PENDING")}approveRecord(t){t.id&&(this.approvingId=t.id,this.cdr.markForCheck(),this.attendanceService.approve(t.id).subscribe({next:e=>{t.approvalStatus="APPROVED",t.approvedAt=e.approvedAt,this.toastService.success("Attendance approved"),this.approvingId=null,this.cdr.markForCheck()},error:e=>{this.toastService.error(e.error?.error||"Failed to approve"),this.approvingId=null,this.cdr.markForCheck()}}))}rejectRecord(t){if(!t.id)return;let e=prompt("Enter rejection reason (optional):");this.approvingId=t.id,this.cdr.markForCheck(),this.attendanceService.reject(t.id,e||void 0).subscribe({next:i=>{t.approvalStatus="REJECTED",t.remarks=i.remarks,this.toastService.success("Attendance rejected"),this.approvingId=null,this.cdr.markForCheck()},error:i=>{this.toastService.error(i.error?.error||"Failed to reject"),this.approvingId=null,this.cdr.markForCheck()}})}bulkApprove(){let t=this.getSelectedRecords();if(t.length===0){this.toastService.warning("No pending records selected");return}let e=t.map(i=>i.id).filter(i=>i);this.bulkApproving=!0,this.cdr.markForCheck(),this.attendanceService.bulkApprove(e).subscribe({next:i=>{this.toastService.success(`${i.approved} record(s) approved`),t.forEach(r=>r.approvalStatus="APPROVED"),this.selectAll=!1,this.filteredRecords.forEach(r=>r.selected=!1),this.bulkApproving=!1,this.cdr.markForCheck()},error:i=>{this.toastService.error(i.error?.error||"Bulk approval failed"),this.bulkApproving=!1,this.cdr.markForCheck()}})}static \u0275fac=function(e){return new(e||n)(V(To),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-attendance-management"]],decls:36,vars:9,consts:[[1,"daily-attendance"],[1,"page-header"],[1,"subtitle"],[1,"summary-cards"],[1,"summary-card","total"],[1,"card-label"],[1,"card-value"],[1,"summary-card","present"],[1,"summary-card","absent"],[1,"attendance-table-section"],[1,"table-header"],[1,"date-label"],[1,"fas","fa-calendar"],[1,"filters"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search employee...",3,"ngModelChange","ngModel"],["type","date",1,"date-picker",3,"ngModelChange","change","ngModel"],["class","loading-row",4,"ngIf"],["class","attendance-table",4,"ngIf"],["class","bulk-actions",4,"ngIf"],[1,"loading-row"],[1,"fas","fa-spinner","fa-spin"],[1,"attendance-table"],["type","checkbox",3,"ngModelChange","change","ngModel"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"emp-id"],[1,"employee-cell"],[1,"avatar"],[1,"name"],[1,"status-badge",3,"ngClass"],[1,"actions-cell"],["class","btn-approve",3,"disabled","click",4,"ngIf"],["class","btn-reject",3,"disabled","click",4,"ngIf"],["class","approved-label",4,"ngIf"],["class","rejected-label",4,"ngIf"],[1,"btn-approve",3,"click","disabled"],[1,"fas","fa-check"],[1,"btn-reject",3,"click","disabled"],[1,"fas","fa-times"],[1,"approved-label"],[1,"fas","fa-check-circle"],[1,"rejected-label"],[1,"fas","fa-times-circle"],["colspan","9",1,"no-data"],[1,"bulk-actions"],[1,"btn-bulk-approve",3,"click","disabled"],[1,"fas","fa-check-double"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Daily Attendance"),a(),o(4,"p",2),l(5,"View attendance records by date"),a()(),o(6,"div",3)(7,"div",4)(8,"span",5),l(9,"Total Employees"),a(),o(10,"span",6),l(11),a()(),o(12,"div",7)(13,"span",5),l(14,"Present"),a(),o(15,"span",6),l(16),a()(),o(17,"div",8)(18,"span",5),l(19,"Absent"),a(),o(20,"span",6),l(21),a()()(),o(22,"div",9)(23,"div",10)(24,"div",11),y(25,"i",12),o(26,"span"),l(27),a()(),o(28,"div",13)(29,"div",14),y(30,"i",15),o(31,"input",16),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("ngModelChange",function(){return i.onSearchChange()}),a()(),o(32,"input",17),S("ngModelChange",function(s){return P(i.selectedDate,s)||(i.selectedDate=s),s}),x("change",function(){return i.onDateChange()}),a()()(),b(33,$Ce,3,0,"div",18)(34,ebe,24,3,"table",19)(35,tbe,6,2,"div",20),a()()),e&2&&(c(11),_(i.employees.length),c(5),_(i.countByStatus("PRESENT")+i.countWorking()),c(5),_(i.employees.length-(i.countByStatus("PRESENT")+i.countWorking())),c(6),D("Attendance for ",i.formatDisplayDate(i.selectedDate)),c(4),M("ngModel",i.searchTerm),c(),M("ngModel",i.selectedDate),c(),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",i.getSelectedRecords().length>0))},dependencies:[At,ot,Se,be,Vt,Ie,Yt,Oe,Ee,Rt],styles:[".daily-attendance[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:100vh}.daily-attendance[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:24px}.daily-attendance[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#1a1a2e;margin:0;font-weight:600}.daily-attendance[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin:4px 0 0;font-size:14px}.daily-attendance[_ngcontent-%COMP%]   .message-bar[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:20px}.daily-attendance[_ngcontent-%COMP%]   .message-bar.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.daily-attendance[_ngcontent-%COMP%]   .message-bar.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}@media(max-width:768px){.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{padding:20px 24px;border-radius:12px;color:#fff}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{display:block;font-size:14px;opacity:.9;margin-bottom:8px}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:700}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4285f4,#2b6cb0)}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.present[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a)}.daily-attendance[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.absent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #f0f0f0}@media(max-width:768px){.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:flex-start}}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#1a1a2e;font-weight:500;font-size:15px}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:14px}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px 10px 36px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;width:200px;background:#f9fafb}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4285f4;background:#fff}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;background:#f9fafb;color:#1a1a2e}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]:focus{outline:none;border-color:#4285f4}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:14px 24px;font-size:13px;font-weight:500;color:#6b7280;background:#f9fafb;border-bottom:1px solid #e5e7eb}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;font-size:14px;color:#1a1a2e;border-bottom:1px solid #f0f0f0}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9fafb}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .employee-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .employee-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#e0f2fe;color:#0284c7;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .employee-cell[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:500}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge.working[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge.present[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .status-badge.absent[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.daily-attendance[_ngcontent-%COMP%]   .attendance-table-section[_ngcontent-%COMP%]   .attendance-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#9ca3af;padding:40px;font-style:italic}.daily-attendance[_ngcontent-%COMP%]   .loading-row[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6b7280;font-size:14px}.daily-attendance[_ngcontent-%COMP%]   .loading-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.daily-attendance[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.daily-attendance[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]{background:#059669;color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:4px;transition:background .2s}.daily-attendance[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]:hover:not(:disabled){background:#047857}.daily-attendance[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.daily-attendance[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]{background:#dc2626;color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:4px;transition:background .2s}.daily-attendance[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.daily-attendance[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.daily-attendance[_ngcontent-%COMP%]   .approved-label[_ngcontent-%COMP%]{color:#059669;font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px}.daily-attendance[_ngcontent-%COMP%]   .rejected-label[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px}.daily-attendance[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#f0fdf4;border-radius:8px;margin-top:16px}.daily-attendance[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#374151;font-weight:500}.daily-attendance[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .btn-bulk-approve[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.daily-attendance[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .btn-bulk-approve[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.daily-attendance[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .btn-bulk-approve[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"],changeDetection:0})};function nbe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",43),l(2),a(),o(3,"td",44),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",45),l(17),a()(),o(18,"td",46)(19,"button",47),x("click",function(){let r=g(e).$implicit,s=p(4);return f(s.viewEmployeeTimesheet(r))}),y(20,"i",48),a(),o(21,"button",49),x("click",function(){let r=g(e).$implicit,s=p(4);return f(s.downloadEmployeePDF(r))}),y(22,"i",11),a()()()}if(n&2){let e=t.$implicit,i=p(4);c(2),_(e.employeeCode||"\u2014"),c(2),_(e.employeeName),c(2),_(i.formatDisplayDate(e.date)),c(2),_((e.clockIn==null?null:e.clockIn.substring(0,5))||"\u2014"),c(2),_((e.clockOut==null?null:e.clockOut.substring(0,5))||"\u2014"),c(2),_(e.hours>0?e.hours.toFixed(2):"\u2014"),c(2),_(e.overtime>0?e.overtime.toFixed(2):"\u2014"),c(2),m("ngClass",e.status.toLowerCase()),c(),D(" ",e.status," ")}}function ibe(n,t){n&1&&(o(0,"tr")(1,"td",50),l(2,"No attendance records for this period"),a()())}function rbe(n,t){if(n&1&&(o(0,"div",39)(1,"table",40)(2,"thead")(3,"tr")(4,"th"),l(5,"Employee ID"),a(),o(6,"th"),l(7,"Employee"),a(),o(8,"th"),l(9,"Date"),a(),o(10,"th"),l(11,"Clock In"),a(),o(12,"th"),l(13,"Clock Out"),a(),o(14,"th"),l(15,"Hours"),a(),o(16,"th"),l(17,"OT"),a(),o(18,"th"),l(19,"Status"),a(),o(20,"th"),l(21,"Actions"),a()()(),o(22,"tbody"),b(23,nbe,23,9,"tr",41)(24,ibe,3,0,"tr",42),a()()()),n&2){let e=p().$implicit;c(23),m("ngForOf",e.records),c(),m("ngIf",e.records.length===0)}}function obe(n,t){if(n&1){let e=F();o(0,"div",32)(1,"div",33)(2,"div",34)(3,"h3",35),l(4),a(),o(5,"span",36),l(6),a()(),o(7,"button",37),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.toggleGroup(r))}),l(8," View Employees "),y(9,"i",9),a()(),b(10,rbe,25,2,"div",38),a()}if(n&2){let e=t.$implicit;c(4),_(e.name),c(2),Ge("",e.employeeCount," Employees \u2022 ",e.totalHours.toFixed(2),"h Total"),c(3),m("ngClass",e.expanded?"fa-chevron-up":"fa-chevron-down"),c(),m("ngIf",e.expanded)}}function abe(n,t){n&1&&(o(0,"div",51),y(1,"i",52),o(2,"p"),l(3,"No approved attendance records found for this period"),a()())}function sbe(n,t){if(n&1&&(o(0,"div",29),b(1,obe,11,5,"div",30)(2,abe,4,0,"div",31),a()),n&2){let e=p();c(),m("ngForOf",e.projectGroups),c(),m("ngIf",e.projectGroups.length===0)}}function lbe(n,t){n&1&&(o(0,"div",53),y(1,"i",54),l(2," Loading timesheet data... "),a())}function cbe(n,t){if(n&1&&(o(0,"tr")(1,"td",65),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(i.getDayOfMonth(e.date)),c(2),_((e.clockIn==null?null:e.clockIn.substring(0,5))||""),c(2),_((e.clockOut==null?null:e.clockOut.substring(0,5))||""),c(2),_(e.hours>0?e.hours.toFixed(2):""),c(2),_(e.overtime>0?e.overtime.toFixed(2):"")}}function dbe(n,t){n&1&&(o(0,"tr")(1,"td",71),l(2,"No records for this period"),a()())}function pbe(n,t){if(n&1&&(o(0,"div",72)(1,"div",73)(2,"div",74)(3,"span",75),l(4,"Employee"),a(),o(5,"span",76),l(6),a()(),o(7,"div",74)(8,"span",75),l(9,"ID"),a(),o(10,"span",76),l(11),a()(),o(12,"div",74)(13,"span",75),l(14,"Pay Period"),a(),o(15,"span",76),l(16),a()(),o(17,"div",74)(18,"span",75),l(19,"Hours per Week"),a(),o(20,"span",76),l(21),a()(),o(22,"div",74)(23,"span",75),l(24,"Overtime"),a(),o(25,"span",76),l(26),a()(),o(27,"div",74)(28,"span",75),l(29,"Days Worked"),a(),o(30,"span",76),l(31),a()()(),o(32,"div",77)(33,"span",75),l(34,"Notes"),a(),y(35,"div",78),a()()),n&2){let e=p(2);c(6),_(e.selectedEmployee.employeeName),c(5),D("EMP-",e.selectedEmployee.employeeId),c(5),_(e.getWeekRangeDisplay()),c(5),_(e.getEmployeeTotalHours().toFixed(2)),c(5),_(e.getEmployeeTotalOT().toFixed(2)),c(5),_(e.employeeWeekRecords.length)}}function mbe(n,t){if(n&1){let e=F();o(0,"div",55)(1,"div",56),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",57)(3,"h2"),l(4,"Single Employee Time Sheet"),a(),o(5,"p",58),l(6,"Organization - Fiscal Year Period"),a(),o(7,"button",59),x("click",function(){g(e);let r=p();return f(r.closeEmployeeModal())}),y(8,"i",60),a()(),o(9,"div",61)(10,"div",62)(11,"div",63)(12,"table",64)(13,"thead")(14,"tr")(15,"th",65),l(16,"Day"),a(),o(17,"th"),l(18,"In"),a(),o(19,"th"),l(20,"Out"),a(),o(21,"th"),l(22,"Hours"),a(),o(23,"th"),l(24,"OT"),a()()(),o(25,"tbody"),b(26,cbe,11,5,"tr",41)(27,dbe,3,0,"tr",42),a(),o(28,"tfoot")(29,"tr",66)(30,"td")(31,"strong"),l(32,"Total"),a()(),y(33,"td")(34,"td"),o(35,"td")(36,"strong"),l(37),a()(),o(38,"td")(39,"strong"),l(40),a()()()()()(),b(41,pbe,36,6,"div",67),a()(),o(42,"div",68)(43,"button",69),x("click",function(){g(e);let r=p();return f(r.downloadEmployeePDF(r.selectedEmployee))}),y(44,"i",11),l(45," Download PDF "),a(),o(46,"button",70),x("click",function(){g(e);let r=p();return f(r.closeEmployeeModal())}),l(47,"Cancel"),a()()()()}if(n&2){let e=p();c(26),m("ngForOf",e.employeeWeekRecords),c(),m("ngIf",e.employeeWeekRecords.length===0),c(10),_(e.getEmployeeTotalHours().toFixed(2)),c(3),_(e.getEmployeeTotalOT().toFixed(2)),c(),m("ngIf",e.selectedEmployee)}}var P2=class n{constructor(t,e,i,r){this.attendanceService=t;this.employeeService=e;this.toastService=i;this.cdr=r}loading=!1;dataLoaded=!1;generating=!1;selectedDate="";periodStartDate="";periodEndDate="";employees=[];attendanceRecords=[];projectGroups=[];totalEmployees=0;totalProjects=0;totalHours=0;totalOvertime=0;showEmployeeModal=!1;selectedEmployee=null;employeeWeekRecords=[];ngOnInit(){this.setCurrentPeriod(),this.loadData()}setCurrentPeriod(){let t=new Date;this.selectedDate=this.formatDate(t),this.calculatePeriodDates()}calculatePeriodDates(){let t=new Date(this.selectedDate),e=t.getDay(),i=e===0?0:-e,r=new Date(t);r.setDate(t.getDate()+i);let s=new Date(r);s.setDate(r.getDate()+6),this.periodStartDate=this.formatDate(r),this.periodEndDate=this.formatDate(s)}formatDate(t){return t.toISOString().split("T")[0]}loadData(){this.dataLoaded||(this.loading=!0,this.cdr.detectChanges(),this.employeeService.getAll().subscribe({next:t=>{this.employees=t.filter(e=>e.active),this.loadAttendanceRecords()},error:t=>{console.error("Error loading employees:",t),this.loading=!1,this.cdr.detectChanges()}}))}loadAttendanceRecords(){this.attendanceService.getByDateRange(this.periodStartDate,this.periodEndDate).pipe(Tn(()=>{this.loading=!1,this.dataLoaded=!0,this.cdr.detectChanges()})).subscribe({next:t=>{this.attendanceRecords=t.filter(e=>e.approvalStatus==="APPROVED"||e.status==="APPROVED"),this.processData()},error:t=>{console.error("Error loading attendance:",t),this.attendanceRecords=[],this.processData()}})}processData(){let t=new Map,e=new Set;this.attendanceRecords.forEach(i=>{let r=i.employee?.id||i.employeeId;if(!r)return;let s=this.employees.find(w=>w.id===r),d=s?`${s.firstName} ${s.lastName}`:i.employee?`${i.employee.firstName} ${i.employee.lastName}`:"Unknown",u=s?.employeeCode||i.employee?.employeeCode||"",h=i.project?.name||i.projectName||"Unknown",v=i.project?.id?.toString()||i.projectName||"unknown";e.add(r),t.has(v)||t.set(v,{id:v,name:h,employeeCount:0,totalHours:0,expanded:!1,records:[]});let C=t.get(v),O=i.regularHours||0,T=i.overtimeHours||0;C.records.push({employeeId:r,employeeCode:u,employeeName:d,date:i.attendanceDate,clockIn:i.clockIn||"",clockOut:i.clockOut||"",hours:O,overtime:T,status:i.approvalStatus||"approved"}),C.totalHours+=O+T}),t.forEach(i=>{let r=new Set(i.records.map(s=>s.employeeId));i.employeeCount=r.size,i.records.sort((s,d)=>{let u=d.date.localeCompare(s.date);return u!==0?u:s.employeeName.localeCompare(d.employeeName)})}),this.projectGroups=Array.from(t.values()),this.totalEmployees=e.size,this.totalProjects=this.projectGroups.length,this.totalHours=this.attendanceRecords.reduce((i,r)=>i+(r.regularHours||0),0),this.totalOvertime=this.attendanceRecords.reduce((i,r)=>i+(r.overtimeHours||0),0),this.cdr.detectChanges()}toggleGroup(t){t.expanded=!t.expanded,this.cdr.detectChanges()}onDateChange(){this.calculatePeriodDates(),this.dataLoaded=!1,this.loadData()}getWeekRangeDisplay(){let t=new Date(this.periodStartDate),e=new Date(this.periodEndDate),i=t.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),r=e.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"});return`${i} - ${r}`}formatDisplayDate(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"2-digit"})}generateTimesheet(){this.generating=!0,this.dataLoaded=!1,this.cdr.markForCheck(),this.employeeService.getAll().subscribe({next:t=>{this.employees=t.filter(e=>e.active),this.attendanceService.getByDateRange(this.periodStartDate,this.periodEndDate).pipe(Tn(()=>{this.generating=!1,this.dataLoaded=!0,this.cdr.markForCheck()})).subscribe({next:e=>{this.attendanceRecords=e.filter(i=>i.approvalStatus==="APPROVED"||i.status==="APPROVED"),this.processData(),this.toastService.success("Timesheet generated successfully")},error:e=>{console.error("Error generating timesheet:",e),this.toastService.error("Failed to generate timesheet")}})},error:t=>{console.error("Error loading employees:",t),this.generating=!1,this.toastService.error("Failed to load employees"),this.cdr.markForCheck()}})}downloadPDF(){let t=new Jt;t.setFontSize(18),t.text("Weekly Timesheet Report",14,22),t.setFontSize(11),t.text(`Period: ${this.getWeekRangeDisplay()}`,14,32),t.text(`Generated: ${new Date().toLocaleDateString()}`,14,38),t.setFontSize(10),t.text(`Total Employees: ${this.totalEmployees}`,14,48),t.text(`Total Hours: ${this.totalHours.toFixed(1)}h`,80,48),t.text(`Total OT: ${this.totalOvertime.toFixed(1)}h`,140,48);let e=58;this.projectGroups.forEach(i=>{t.setFontSize(12),t.setFont("helvetica","bold"),t.text(`${i.name} (${i.employeeCount} employees, ${i.totalHours.toFixed(2)}h)`,14,e),e+=6;let r=i.records.map(s=>[s.employeeCode||"-",s.employeeName,this.formatDisplayDate(s.date),s.clockIn?.substring(0,5)||"-",s.clockOut?.substring(0,5)||"-",s.hours>0?s.hours.toFixed(2):"-",s.overtime>0?s.overtime.toFixed(2):"-"]);t.autoTable({startY:e,head:[["ID","Employee","Date","Clock In","Clock Out","Hours","OT"]],body:r,theme:"striped",headStyles:{fillColor:[0,128,128]},margin:{left:14}}),e=t.lastAutoTable.finalY+10,e>260&&(t.addPage(),e=20)}),t.save(`Weekly_Timesheet_${this.periodStartDate}_${this.periodEndDate}.pdf`),this.toastService.success("PDF downloaded")}downloadCSV(){let t=`Project,Employee ID,Employee,Date,Clock In,Clock Out,Hours,Overtime,Status
`;this.projectGroups.forEach(s=>{s.records.forEach(d=>{t+=`"${s.name}","${d.employeeCode||""}","${d.employeeName}","${d.date}","${d.clockIn||""}","${d.clockOut||""}",${d.hours},${d.overtime},"${d.status}"
`})});let e=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(e);i.setAttribute("href",r),i.setAttribute("download",`Weekly_Timesheet_${this.periodStartDate}_${this.periodEndDate}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.toastService.success("CSV downloaded")}viewEmployeeTimesheet(t){this.selectedEmployee=t,this.employeeWeekRecords=[],this.projectGroups.forEach(e=>{let i=e.records.filter(r=>r.employeeId===t.employeeId);this.employeeWeekRecords.push(...i)}),this.employeeWeekRecords.sort((e,i)=>e.date.localeCompare(i.date)),this.showEmployeeModal=!0,this.cdr.markForCheck()}closeEmployeeModal(){this.showEmployeeModal=!1,this.selectedEmployee=null,this.employeeWeekRecords=[],this.cdr.markForCheck()}getEmployeeTotalHours(){return this.employeeWeekRecords.reduce((t,e)=>t+e.hours,0)}getEmployeeTotalOT(){return this.employeeWeekRecords.reduce((t,e)=>t+e.overtime,0)}getDayOfMonth(t){return new Date(t).getDate()}downloadEmployeePDF(t){let e=[];this.projectGroups.forEach(w=>{let A=w.records.filter(I=>I.employeeId===t.employeeId);e.push(...A)}),e.sort((w,A)=>w.date.localeCompare(A.date));let i=new Jt("landscape"),r=i.internal.pageSize.getWidth();i.setFillColor(0,128,128),i.rect(0,0,r,25,"F"),i.setTextColor(255,255,255),i.setFontSize(16),i.setFont("helvetica","bold"),i.text("Single Employee Time Sheet",14,16),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Organization - Fiscal Year Period",r-14,16,{align:"right"}),i.setTextColor(0,0,0);let s=e.reduce((w,A)=>w+A.hours,0),d=e.reduce((w,A)=>w+A.overtime,0),u=e.map(w=>[this.getDayOfMonth(w.date).toString(),w.clockIn?.substring(0,5)||"",w.clockOut?.substring(0,5)||"",w.hours>0?w.hours.toFixed(2):"",w.overtime>0?w.overtime.toFixed(2):""]);i.autoTable({startY:35,head:[["Day","In","Out","Hours","OT"]],body:u,theme:"grid",headStyles:{fillColor:[240,230,200],textColor:[0,0,0],fontStyle:"bold",halign:"center"},bodyStyles:{halign:"center",fontSize:9},columnStyles:{0:{cellWidth:20},1:{cellWidth:25},2:{cellWidth:25},3:{cellWidth:25},4:{cellWidth:25}},margin:{left:14,right:r-140},foot:[["Total","","",s.toFixed(2),d.toFixed(2)]],footStyles:{fillColor:[240,230,200],textColor:[0,0,0],fontStyle:"bold",halign:"center"}});let h=160,v=35,C=8;i.setFontSize(10),i.setFont("helvetica","normal"),[{label:"Employee",value:t.employeeName},{label:"ID",value:`EMP-${t.employeeId}`},{label:"Pay Period",value:this.getWeekRangeDisplay()},{label:"Hours per Week",value:s.toFixed(2)},{label:"Overtime",value:d.toFixed(2)},{label:"Days Worked",value:e.length.toString()}].forEach(w=>{i.setFont("helvetica","bold"),i.text(w.label,h,v),i.setFont("helvetica","normal"),i.text(w.value,h+50,v),v+=C}),v+=10,i.setFont("helvetica","bold"),i.text("Notes",h,v),v+=5,i.setDrawColor(200,200,200),i.rect(h,v,110,30);let T=`Timesheet_${t.employeeName.replace(/\s+/g,"_")}_${this.periodStartDate}_${this.periodEndDate}.pdf`;i.save(T),this.toastService.success("PDF downloaded")}static \u0275fac=function(e){return new(e||n)(V(To),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-weekly-timesheet"]],decls:56,vars:13,consts:[[1,"weekly-timesheet"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-right"],[1,"date-picker"],[1,"fas","fa-calendar"],["type","date",3,"ngModelChange","change","ngModel"],[1,"btn-generate",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn-download-pdf",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn-download-csv",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"summary-cards"],[1,"summary-card","employees"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"card-icon"],[1,"fas","fa-users"],[1,"summary-card","projects"],[1,"fas","fa-chart-line"],[1,"summary-card","hours"],[1,"fas","fa-clock"],[1,"summary-card","overtime"],["class","project-groups",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"project-groups"],["class","project-group",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"project-group"],[1,"project-header"],[1,"project-info"],[1,"project-name"],[1,"project-stats"],[1,"btn-expand",3,"click"],["class","project-employees",4,"ngIf"],[1,"project-employees"],[1,"employees-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"emp-code"],[1,"emp-name"],[1,"status-badge",3,"ngClass"],[1,"actions-cell"],["title","View Employee Timesheet",1,"btn-action","view",3,"click"],[1,"fas","fa-eye"],["title","Download PDF",1,"btn-action","pdf",3,"click"],["colspan","8",1,"no-records"],[1,"no-data"],[1,"fas","fa-calendar-times"],[1,"loading-indicator"],[1,"fas","fa-spinner","fa-spin"],[1,"modal-overlay"],[1,"modal-content","employee-modal","single-timesheet-modal",3,"click"],[1,"modal-header"],[1,"modal-subtitle"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body","single-timesheet-body"],[1,"timesheet-layout"],[1,"timesheet-table-section"],[1,"single-timesheet-table"],[1,"day-col"],[1,"total-row"],["class","employee-details-section",4,"ngIf"],[1,"modal-footer"],[1,"btn-download",3,"click"],[1,"btn-secondary",3,"click"],["colspan","5",1,"no-records"],[1,"employee-details-section"],[1,"detail-group"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-group","notes-section"],[1,"notes-box"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Weekly Timesheet - Project Wise"),a(),o(5,"p",3),l(6),a()(),o(7,"div",4)(8,"div",5),y(9,"i",6),o(10,"input",7),S("ngModelChange",function(s){return P(i.selectedDate,s)||(i.selectedDate=s),s}),x("change",function(){return i.onDateChange()}),a()(),o(11,"button",8),x("click",function(){return i.generateTimesheet()}),y(12,"i",9),l(13," Generate "),a(),o(14,"button",10),x("click",function(){return i.downloadPDF()}),y(15,"i",11),l(16," PDF "),a(),o(17,"button",12),x("click",function(){return i.downloadCSV()}),y(18,"i",13),l(19," CSV "),a()()(),o(20,"div",14)(21,"div",15)(22,"div",16)(23,"span",17),l(24,"Total Employees"),a(),o(25,"span",18),l(26),a()(),o(27,"div",19),y(28,"i",20),a()(),o(29,"div",21)(30,"div",16)(31,"span",17),l(32,"Total Projects"),a(),o(33,"span",18),l(34),a()(),o(35,"div",19),y(36,"i",22),a()(),o(37,"div",23)(38,"div",16)(39,"span",17),l(40,"Total Hours"),a(),o(41,"span",18),l(42),a()(),o(43,"div",19),y(44,"i",24),a()(),o(45,"div",25)(46,"div",16)(47,"span",17),l(48,"Total OT"),a(),o(49,"span",18),l(50),a()(),o(51,"div",19),y(52,"i",22),a()()(),b(53,sbe,3,2,"div",26)(54,lbe,3,0,"div",27),a(),b(55,mbe,48,5,"div",28)),e&2&&(c(6),D("Week of ",i.getWeekRangeDisplay()),c(4),M("ngModel",i.selectedDate),c(),m("disabled",i.generating),c(),m("ngClass",i.generating?"fa-spinner fa-spin":"fa-sync-alt"),c(2),m("disabled",i.projectGroups.length===0),c(3),m("disabled",i.projectGroups.length===0),c(9),_(i.totalEmployees),c(8),_(i.totalProjects),c(8),D("",i.totalHours.toFixed(1),"h"),c(8),D("",i.totalOvertime.toFixed(1),"h"),c(3),m("ngIf",!i.loading),c(),m("ngIf",i.loading),c(),m("ngIf",i.showEmployeeModal))},dependencies:[At,ot,Se,be,Vt,Ie,Oe,Ee,Rt],styles:[".weekly-timesheet[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:100vh}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1a1a2e;font-size:24px;margin:0;font-weight:600}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin:4px 0 0;font-size:14px}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#fff;padding:10px 16px;border-radius:8px;border:1px solid #e5e7eb;box-shadow:0 1px 2px #0000000d}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280;font-size:14px}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:14px;color:#374151;background:transparent}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-pdf[_ngcontent-%COMP%]{background:#dc2626;color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-pdf[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-pdf[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-csv[_ngcontent-%COMP%]{background:#059669;color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-csv[_ngcontent-%COMP%]:hover:not(:disabled){background:#047857}.weekly-timesheet[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-download-csv[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}@media(max-width:1024px){.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:600px){.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-radius:12px;color:#fff;min-height:100px}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;opacity:.9}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:36px;font-weight:700;line-height:1}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;opacity:.9}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.employees[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a90d9,#3b7dd8)}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.projects[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a)}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.hours[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.weekly-timesheet[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card.overtime[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.weekly-timesheet[_ngcontent-%COMP%]   .project-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid transparent;transition:border-color .2s}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#1a1a2e}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-stats[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;margin-top:4px;display:block}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .btn-expand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;font-size:13px;font-weight:500;color:#374151;cursor:pointer;transition:all .2s}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .btn-expand[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#d1d5db}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .btn-expand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]{border-top:1px solid #f3f4f6}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 20px;text-align:left}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;font-weight:500;font-size:12px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid #f3f4f6}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#374151;border-bottom:1px solid #f3f4f6}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   .emp-name[_ngcontent-%COMP%]{font-weight:500;color:#1a1a2e}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   .no-records[_ngcontent-%COMP%]{text-align:center;color:#9ca3af;padding:40px;font-style:italic}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:500;text-transform:capitalize}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.weekly-timesheet[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .project-employees[_ngcontent-%COMP%]   .employees-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.weekly-timesheet[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;color:#6b7280}.weekly-timesheet[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5;display:block}.weekly-timesheet[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px}.weekly-timesheet[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#6b7280;background:#fff;border-radius:12px}.weekly-timesheet[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:8px}.actions-cell[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.actions-cell[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.actions-cell[_ngcontent-%COMP%]   .btn-action.view[_ngcontent-%COMP%]{background:#e0f2fe;color:#0284c7}.actions-cell[_ngcontent-%COMP%]   .btn-action.view[_ngcontent-%COMP%]:hover{background:#bae6fd}.actions-cell[_ngcontent-%COMP%]   .btn-action.pdf[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.actions-cell[_ngcontent-%COMP%]   .btn-action.pdf[_ngcontent-%COMP%]:hover{background:#fecaca}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:800px;width:95%;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040}.modal-overlay[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.modal-overlay[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1a1a2e}.modal-overlay[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;color:#6b7280;font-size:16px}.modal-overlay[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#374151}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:24px}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#1a1a2e}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{margin:4px 0 0;color:#6b7280;font-size:14px}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{flex:1;background:#f9fafb;padding:16px;border-radius:8px;text-align:center}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#6b7280;margin-bottom:4px}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:teal}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-radius:8px;overflow:hidden;border:1px solid #e5e7eb}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;font-weight:500;font-size:12px;text-transform:uppercase}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#374151;border-top:1px solid #e5e7eb}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f9fafb;border-top:2px solid #e5e7eb}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:11px;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   .status-badge.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.modal-overlay[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-records-table[_ngcontent-%COMP%]   .no-records[_ngcontent-%COMP%]{text-align:center;color:#9ca3af;padding:40px}.modal-overlay[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb}.modal-overlay[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]{background:#dc2626;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px}.modal-overlay[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:hover{background:#b91c1c}.modal-overlay[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #e5e7eb;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:14px}.modal-overlay[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.single-timesheet-modal[_ngcontent-%COMP%]{max-width:900px!important}.single-timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);color:#fff;border-radius:12px 12px 0 0;position:relative;flex-direction:column;align-items:flex-start}.single-timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:4px}.single-timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-subtitle[_ngcontent-%COMP%]{margin:0;font-size:12px;opacity:.85}.single-timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:#fff}.single-timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#e5e7eb}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-body[_ngcontent-%COMP%]{padding:24px}.single-timesheet-modal[_ngcontent-%COMP%]   .timesheet-layout[_ngcontent-%COMP%]{display:flex;gap:24px}.single-timesheet-modal[_ngcontent-%COMP%]   .timesheet-table-section[_ngcontent-%COMP%]{flex:1;max-width:350px}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #d4c8a8;padding:6px 8px;text-align:center}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5ecd7}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#374151}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fafafa}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   .day-col[_ngcontent-%COMP%]{width:40px;font-weight:500}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f5ecd7;font-weight:600}.single-timesheet-modal[_ngcontent-%COMP%]   .single-timesheet-table[_ngcontent-%COMP%]   .no-records[_ngcontent-%COMP%]{padding:20px;color:#9ca3af}.single-timesheet-modal[_ngcontent-%COMP%]   .employee-details-section[_ngcontent-%COMP%]{flex:1;min-width:280px}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-group[_ngcontent-%COMP%]{margin-bottom:20px}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-group.notes-section[_ngcontent-%COMP%]   .notes-box[_ngcontent-%COMP%]{margin-top:8px;border:1px solid #d1d5db;border-radius:6px;height:80px;background:#fff}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;padding:8px 0;border-bottom:1px solid #e5e7eb}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{width:120px;font-weight:600;color:#374151;font-size:13px}.single-timesheet-modal[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{flex:1;color:#1f2937;font-size:13px}"],changeDetection:0})};function ube(n,t){if(n&1&&(o(0,"span",26),l(1),a()),n&2){let e=p();c(),D(" ",e.getPendingCount()," Pending ")}}function gbe(n,t){if(n&1){let e=F();o(0,"button",27),x("click",function(){g(e);let r=p();return f(r.approveSelected())}),y(1,"i",28),l(2),a()}if(n&2){let e=p();m("disabled",e.loading),c(2),D(" Approve (",e.selectedIds.length,") ")}}function fbe(n,t){if(n&1){let e=F();o(0,"button",29),x("click",function(){g(e);let r=p();return f(r.rejectSelected())}),y(1,"i",30),l(2," Reject "),a()}if(n&2){let e=p();m("disabled",e.loading)}}function hbe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",22)(2,"input",23),x("change",function(){let r=g(e).$implicit,s=p();return f(s.toggleSelect(r.id))}),a()(),o(3,"td")(4,"span",31),l(5),a()(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td")(17,"span",32),l(18),a()(),o(19,"td",33)(20,"button",34),x("click",function(){let r=g(e).$implicit,s=p();return f(s.approveRecord(r.id))}),y(21,"i",28),a(),o(22,"button",35),x("click",function(){let r=g(e).$implicit,s=p();return f(s.rejectRecord(r.id))}),y(23,"i",30),a()()()}if(n&2){let e=t.$implicit,i=p();c(2),m("checked",i.isSelected(e.id)),c(3),_(i.getEmployeeName(e)),c(2),_(i.getDepartmentName(e)),c(2),_(i.formatDate(e.attendanceDate)),c(2),_(i.formatTime(e.clockIn)),c(2),_(i.formatTime(e.clockOut)),c(2),_(i.calculateHours(e)),c(2),m("ngClass",i.getStatusClass(e.approvalStatus||"PENDING")),c(),D(" ",i.formatStatus(e.approvalStatus||"PENDING")," "),c(2),m("disabled",i.loading||e.approvalStatus==="APPROVED"),c(2),m("disabled",i.loading||e.approvalStatus==="REJECTED")}}function _be(n,t){if(n&1&&(o(0,"tr")(1,"td",36),y(2,"i",37),o(3,"p"),l(4),a()()()),n&2){let e=p();c(4),D("No ",e.filterStatus?e.filterStatus.toLowerCase():""," attendance records found")}}function vbe(n,t){n&1&&(o(0,"tr")(1,"td",38),y(2,"i",39),l(3," Loading... "),a()())}var w2=class n{constructor(t,e,i,r,s){this.attendanceService=t;this.employeeService=e;this.payrollService=i;this.toastService=r;this.cdr=s}attendanceRecords=[];filteredRecords=[];employees=[];loading=!1;dataLoaded=!1;selectedIds=[];filterStatus="PENDING";searchTerm="";ngOnInit(){this.loadData()}loadData(t=!1){this.dataLoaded&&!t||(this.loading=!0,this.cdr.detectChanges(),fo({employees:this.employeeService.getAll(),records:this.attendanceService.getAllRecords()}).pipe(Tn(()=>{this.loading=!1,this.dataLoaded=!0,this.cdr.detectChanges()})).subscribe({next:e=>{this.employees=e.employees,this.attendanceRecords=e.records,this.filterRecords(),this.cdr.detectChanges()},error:e=>{console.error("Error loading data:",e),this.toastService.error("Failed to load attendance records"),this.cdr.detectChanges()}}))}filterRecords(){let t=[...this.attendanceRecords];if(this.filterStatus&&(t=t.filter(e=>e.approvalStatus===this.filterStatus)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>{let r=this.getEmployeeName(i).toLowerCase(),s=this.getDepartmentName(i).toLowerCase();return r.includes(e)||s.includes(e)})}this.filteredRecords=t,this.cdr.detectChanges()}onFilterChange(){this.selectedIds=[],this.filterRecords()}getPendingCount(){return this.attendanceRecords.filter(t=>t.approvalStatus==="PENDING").length}toggleSelect(t){let e=this.selectedIds.indexOf(t);e>-1?this.selectedIds.splice(e,1):this.selectedIds.push(t)}isSelected(t){return this.selectedIds.includes(t)}toggleSelectAll(){this.selectedIds.length===this.filteredRecords.length?this.selectedIds=[]:this.selectedIds=this.filteredRecords.map(t=>t.id)}isAllSelected(){return this.filteredRecords.length>0&&this.selectedIds.length===this.filteredRecords.length}approveRecord(t){this.loading=!0,this.cdr.detectChanges(),this.attendanceService.approve(t).pipe(Tn(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe({next:()=>{this.toastService.success("Attendance approved successfully"),this.dataLoaded=!1,this.loadData(!0),this.generateTimesheetForRecord(t)},error:e=>{console.error("Error approving:",e),this.toastService.error("Failed to approve attendance")}})}rejectRecord(t){let e=prompt("Enter rejection reason:");e!==null&&(this.loading=!0,this.cdr.detectChanges(),this.attendanceService.reject(t,e).pipe(Tn(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe({next:()=>{this.toastService.success("Attendance rejected"),this.dataLoaded=!1,this.loadData(!0)},error:i=>{console.error("Error rejecting:",i),this.toastService.error("Failed to reject attendance")}}))}approveSelected(){this.selectedIds.length!==0&&(this.loading=!0,this.cdr.detectChanges(),this.attendanceService.bulkApprove(this.selectedIds).pipe(Tn(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe({next:()=>{this.toastService.success(`Approved ${this.selectedIds.length} attendance records`),this.generateTimesheetsForApproved(this.selectedIds),this.selectedIds=[],this.dataLoaded=!1,this.loadData(!0)},error:t=>{console.error("Error bulk approving:",t),this.toastService.error("Failed to approve attendance records")}}))}rejectSelected(){if(this.selectedIds.length===0)return;let t=prompt("Enter rejection reason for selected records:");if(t===null)return;this.loading=!0;let e=0,i=0,r=this.selectedIds.length;this.selectedIds.forEach(s=>{this.attendanceService.reject(s,t).subscribe({next:()=>{e++,this.checkBulkComplete(e,i,r)},error:()=>{i++,this.checkBulkComplete(e,i,r)}})})}checkBulkComplete(t,e,i){t+e===i&&(this.loading=!1,this.selectedIds=[],this.dataLoaded=!1,this.loadData(!0),e===0?this.toastService.success(`Rejected ${i} records successfully`):this.toastService.warning(`Rejected ${t} records, ${e} failed`),this.cdr.detectChanges())}generateTimesheetForRecord(t){let e=this.attendanceRecords.find(i=>i.id===t);e&&e.employeeId&&this.triggerTimesheetGeneration([e.employeeId])}generateTimesheetsForApproved(t){let e=[...new Set(this.attendanceRecords.filter(i=>t.includes(i.id)&&i.employeeId).map(i=>i.employeeId))];e.length>0&&this.triggerTimesheetGeneration(e)}triggerTimesheetGeneration(t){let e=new Date,i=e.getDay(),r=7-i,s=new Date(e);s.setDate(e.getDate()+r);let d=s.toISOString().split("T")[0],u=new Date(e);u.setDate(e.getDate()-i);let h=u.toISOString().split("T")[0];this.payrollService.generateTimesheetsFromAttendance({employeeIds:t,startDate:h,endDate:d}).subscribe({next:v=>{console.log("Timesheets auto-generated:",v),this.toastService.success("Timesheets generated automatically")},error:v=>{console.error("Error auto-generating timesheets:",v)}})}getEmployeeName(t){if(t.employee?.firstName||t.employee?.lastName)return`${t.employee.firstName||""} ${t.employee.lastName||""}`.trim();if(t.employeeId){let e=this.employees.find(i=>i.id===t.employeeId);if(e)return`${e.firstName||""} ${e.lastName||""}`.trim()}return"Unknown"}getDepartmentName(t){if(t.employee?.department?.name)return t.employee.department.name;if(t.employeeId){let e=this.employees.find(i=>i.id===t.employeeId);if(e?.department?.name)return e.department.name}return"-"}getEmployeeInitials(t){let e=this.getEmployeeName(t);if(e==="Unknown")return"??";let i=e.split(" ");return`${(i[0]||"?").charAt(0)}${(i[1]||"?").charAt(0)}`.toUpperCase()}formatTime(t){return t?t.substring(0,5):"-"}formatTimeRange(t,e){if(!t)return"\u2014";let i=t.substring(0,5),r=e?e.substring(0,5):"\u2014";return`${i} - ${r}`}formatStatus(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Pending"}formatDate(t){return t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}calculateHours(t){let e=(t.regularHours||0)+(t.overtimeHours||0);return e>0?e.toFixed(2):"\u2014"}getStatusClass(t){switch(t){case"APPROVED":return"approved";case"PENDING":return"pending";case"REJECTED":return"rejected";default:return""}}static \u0275fac=function(e){return new(e||n)(V(To),V(ai),V(vi),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-attendance-approval"]],decls:55,vars:8,consts:[[1,"attendance-approval"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-right"],["class","pending-badge",4,"ngIf"],[1,"content-card"],[1,"card-header"],[1,"header-title"],[1,"fas","fa-clock"],[1,"header-actions"],[1,"filter-group"],[1,"fas","fa-filter"],[3,"ngModelChange","ngModel"],["value",""],["value","PENDING"],["value","APPROVED"],["value","REJECTED"],["class","btn-approve",3,"disabled","click",4,"ngIf"],["class","btn-reject",3,"disabled","click",4,"ngIf"],[1,"table-container"],[1,"data-table"],[1,"checkbox-col"],["type","checkbox",3,"change","checked"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pending-badge"],[1,"btn-approve",3,"click","disabled"],[1,"fas","fa-check"],[1,"btn-reject",3,"click","disabled"],[1,"fas","fa-times"],[1,"employee-name"],[1,"status-badge",3,"ngClass"],[1,"actions-col"],["title","Approve",1,"action-btn","approve",3,"click","disabled"],["title","Reject",1,"action-btn","reject",3,"click","disabled"],["colspan","9",1,"no-data"],[1,"fas","fa-check-circle"],["colspan","9",1,"loading-row"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Attendance Approval"),a(),o(5,"p",3),l(6,"Review and approve time entries"),a()(),o(7,"div",4),b(8,ube,2,1,"span",5),a()(),o(9,"div",6)(10,"div",7)(11,"div",8),y(12,"i",9),o(13,"span"),l(14,"Time Entries"),a()(),o(15,"div",10)(16,"div",11),y(17,"i",12),o(18,"select",13),S("ngModelChange",function(s){return P(i.filterStatus,s)||(i.filterStatus=s),s}),x("ngModelChange",function(){return i.onFilterChange()}),o(19,"option",14),l(20,"All Status"),a(),o(21,"option",15),l(22,"Pending"),a(),o(23,"option",16),l(24,"Approved"),a(),o(25,"option",17),l(26,"Rejected"),a()()(),b(27,gbe,3,2,"button",18)(28,fbe,3,1,"button",19),a()(),o(29,"div",20)(30,"table",21)(31,"thead")(32,"tr")(33,"th",22)(34,"input",23),x("change",function(){return i.toggleSelectAll()}),a()(),o(35,"th"),l(36,"Employee"),a(),o(37,"th"),l(38,"Department"),a(),o(39,"th"),l(40,"Date"),a(),o(41,"th"),l(42,"Clock In"),a(),o(43,"th"),l(44,"Clock Out"),a(),o(45,"th"),l(46,"Hours"),a(),o(47,"th"),l(48,"Status"),a(),o(49,"th"),l(50,"Actions"),a()()(),o(51,"tbody"),b(52,hbe,24,11,"tr",24)(53,_be,5,1,"tr",25)(54,vbe,4,0,"tr",25),a()()()()()),e&2&&(c(8),m("ngIf",i.getPendingCount()>0),c(10),M("ngModel",i.filterStatus),c(9),m("ngIf",i.selectedIds.length>0),c(),m("ngIf",i.selectedIds.length>0),c(6),m("checked",i.isAllSelected()),c(18),m("ngForOf",i.filteredRecords),c(),m("ngIf",i.filteredRecords.length===0&&!i.loading),c(),m("ngIf",i.loading))},dependencies:[At,ot,Se,be,Vt,je,We,Ue,Oe,Ee,Rt],styles:[".attendance-approval[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a1a2e;margin:0 0 4px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin:0}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .pending-badge[_ngcontent-%COMP%]{background:#10b981;color:#fff;padding:8px 16px;border-radius:8px;font-weight:600;font-size:14px}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;font-size:14px}.alert.success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.alert.error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.alert.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #f0f0f0}.card-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:500;font-size:15px;color:#1a1a2e}.card-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280}.card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f9fafb;padding:10px 14px;border-radius:8px;border:1px solid #e5e7eb}.filter-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:none;background:transparent;font-size:14px;color:#374151;cursor:pointer;outline:none;padding-right:8px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.btn-approve[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:10px 18px;background:#10b981;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-approve[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.btn-approve[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-reject[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:10px 18px;background:#fff;color:#ef4444;border:1px solid #fecaca;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background:#fef2f2}.btn-reject[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;text-align:left;border-bottom:1px solid #f0f0f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;font-size:13px;color:#6b7280}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#374151}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9fafb}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.checkbox-col[_ngcontent-%COMP%]{width:50px}.checkbox-col[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#008080;border-radius:4px}.employee-name[_ngcontent-%COMP%]{font-weight:500;color:#1a1a2e}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:500}.status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.status-badge.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.status-badge.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.actions-col[_ngcontent-%COMP%]{display:flex;gap:8px}.action-btn[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:8px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;font-size:14px}.action-btn.approve[_ngcontent-%COMP%]{background:#10b981;color:#fff}.action-btn.approve[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.action-btn.reject[_ngcontent-%COMP%]{background:#f97316;color:#fff}.action-btn.reject[_ngcontent-%COMP%]:hover:not(:disabled){background:#ea580c}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px 16px!important;color:#9ca3af}.no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#d1d5db}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.loading-row[_ngcontent-%COMP%]{text-align:center;padding:32px 16px!important;color:#6b7280}.loading-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}"],changeDetection:0})};function xbe(n,t){n&1&&(o(0,"span",35),l(1,"Requires Approval"),a())}function ybe(n,t){n&1&&(o(0,"span",36),l(1,"Document Required"),a())}function Cbe(n,t){n&1&&(o(0,"span",37),l(1,"Hourly Leave"),a())}function bbe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),l(4),a(),o(5,"h3"),l(6),a()(),o(7,"div",19)(8,"button",20),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(9,"i",21),a(),o(10,"button",22),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteLeaveType(r.id))}),y(11,"i",23),a()()(),o(12,"div",24)(13,"p",25),l(14),a(),o(15,"div",26)(16,"div",27)(17,"span",28),l(18,"Annual Entitlement"),a(),o(19,"span",29),l(20),a()(),o(21,"div",27)(22,"span",28),l(23,"Accrual"),a(),o(24,"span",29),l(25),a()(),o(26,"div",27)(27,"span",28),l(28,"Carry Forward"),a(),o(29,"span",29),l(30),a()(),o(31,"div",27)(32,"span",28),l(33,"Paid Leave"),a(),o(34,"span",29),l(35),a()(),o(36,"div",27)(37,"span",28),l(38,"Time Unit"),a(),o(39,"span",29),l(40),a()()(),o(41,"div",30)(42,"span",31),l(43),a(),b(44,xbe,2,0,"span",32)(45,ybe,2,0,"span",33)(46,Cbe,2,0,"span",34),a()()()}if(n&2){let e=t.$implicit;jt("border-left-color",e.colorCode),c(4),_(e.code),c(2),_(e.name),c(8),_(e.description||"No description"),c(6),Ge("",e.annualEntitlement||0," ",e.timeUnit==="HOURS"?"hours":"days"),c(5),_(e.accrualType),c(5),_(e.carryForwardAllowed?"Yes (Max: "+e.maxCarryForward+")":"No"),c(5),_(e.isPaid?"Yes":"No"),c(5),_(e.timeUnit||"Days"),c(2),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," "),c(),m("ngIf",e.requiresApproval),c(),m("ngIf",e.documentRequired),c(),m("ngIf",e.allowHourlyLeave)}}function Mbe(n,t){n&1&&(o(0,"div",38),y(1,"i",39),o(2,"p"),l(3,"No leave types found"),a()())}function Sbe(n,t){if(n&1){let e=F();o(0,"div",46)(1,"div",47)(2,"label"),l(3),a(),o(4,"input",54),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.maxCarryForward,r)||(s.formData.maxCarryForward=r),f(r)}),a()()()}if(n&2){let e=p(2);c(3),D("Max Carry Forward (",e.formData.timeUnit==="HOURS"?"hours":"days",")"),c(),M("ngModel",e.formData.maxCarryForward)}}function Pbe(n,t){n&1&&y(0,"i",70)}function wbe(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",41),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4),a(),o(5,"button",43),x("click",function(){g(e);let r=p();return f(r.closeModal())}),y(6,"i",44),a()(),o(7,"div",45)(8,"div",46)(9,"div",47)(10,"label"),l(11,"Code *"),a(),o(12,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.code,r)||(s.formData.code=r),f(r)}),a()(),o(13,"div",47)(14,"label"),l(15,"Name *"),a(),o(16,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()()(),o(17,"div",47)(18,"label"),l(19,"Description"),a(),o(20,"textarea",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.description,r)||(s.formData.description=r),f(r)}),a()(),o(21,"div",46)(22,"div",47)(23,"label"),l(24,"Time Unit *"),a(),o(25,"select",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.timeUnit,r)||(s.formData.timeUnit=r),f(r)}),o(26,"option",52),l(27,"Days"),a(),o(28,"option",53),l(29,"Hours"),a()()(),o(30,"div",47)(31,"label"),l(32),a(),o(33,"input",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.annualEntitlement,r)||(s.formData.annualEntitlement=r),f(r)}),a()()(),o(34,"div",46)(35,"div",47)(36,"label"),l(37,"Accrual Type"),a(),o(38,"select",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.accrualType,r)||(s.formData.accrualType=r),f(r)}),o(39,"option",55),l(40,"Annually"),a(),o(41,"option",56),l(42,"Monthly"),a(),o(43,"option",57),l(44,"None"),a()()()(),o(45,"div",46)(46,"div",47)(47,"label"),l(48,"Min Notice Days"),a(),o(49,"input",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.minNoticeDays,r)||(s.formData.minNoticeDays=r),f(r)}),a()(),o(50,"div",47)(51,"label"),l(52),a(),o(53,"input",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.maxConsecutiveDays,r)||(s.formData.maxConsecutiveDays=r),f(r)}),a()()(),o(54,"div",46)(55,"div",47)(56,"label"),l(57,"Applicable Gender"),a(),o(58,"select",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.applicableGender,r)||(s.formData.applicableGender=r),f(r)}),o(59,"option",58),l(60,"All"),a(),o(61,"option",59),l(62,"Male"),a(),o(63,"option",60),l(64,"Female"),a()()(),o(65,"div",47)(66,"label"),l(67,"Color Code"),a(),o(68,"input",61),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.colorCode,r)||(s.formData.colorCode=r),f(r)}),a()()(),o(69,"div",62)(70,"label",63)(71,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isPaid,r)||(s.formData.isPaid=r),f(r)}),a(),l(72," Paid Leave "),a(),o(73,"label",63)(74,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.requiresApproval,r)||(s.formData.requiresApproval=r),f(r)}),a(),l(75," Requires Approval "),a(),o(76,"label",63)(77,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.carryForwardAllowed,r)||(s.formData.carryForwardAllowed=r),f(r)}),a(),l(78," Allow Carry Forward "),a(),o(79,"label",63)(80,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.documentRequired,r)||(s.formData.documentRequired=r),f(r)}),a(),l(81," Document Required "),a(),o(82,"label",63)(83,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.allowHourlyLeave,r)||(s.formData.allowHourlyLeave=r),f(r)}),a(),l(84," Allow Hourly Leave "),a(),o(85,"label",63)(86,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),a(),l(87," Active "),a()(),b(88,Sbe,5,2,"div",65),a(),o(89,"div",66)(90,"button",67),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(91,"Cancel"),a(),o(92,"button",68),x("click",function(){g(e);let r=p();return f(r.saveLeaveType())}),b(93,Pbe,1,0,"i",69),l(94),a()()()()}if(n&2){let e=p();c(4),D("",e.editMode?"Edit":"Add"," Leave Type"),c(8),M("ngModel",e.formData.code),c(4),M("ngModel",e.formData.name),c(4),M("ngModel",e.formData.description),c(5),M("ngModel",e.formData.timeUnit),c(7),D("Annual Entitlement (",e.formData.timeUnit==="HOURS"?"hours":"days",")"),c(),M("ngModel",e.formData.annualEntitlement),c(5),M("ngModel",e.formData.accrualType),c(11),M("ngModel",e.formData.minNoticeDays),c(3),D("Max Consecutive ",e.formData.timeUnit==="HOURS"?"Hours":"Days"),c(),M("ngModel",e.formData.maxConsecutiveDays),c(5),M("ngModel",e.formData.applicableGender),c(10),M("ngModel",e.formData.colorCode),c(3),M("ngModel",e.formData.isPaid),c(3),M("ngModel",e.formData.requiresApproval),c(3),M("ngModel",e.formData.carryForwardAllowed),c(3),M("ngModel",e.formData.documentRequired),c(3),M("ngModel",e.formData.allowHourlyLeave),c(3),M("ngModel",e.formData.isActive),c(2),m("ngIf",e.formData.carryForwardAllowed),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.editMode?"Update":"Create"," ")}}var Ju=class n{constructor(t,e){this.leaveService=t;this.cdr=e}leaveTypes=[];filteredLeaveTypes=[];searchTerm="";loading=!1;saving=!1;showModal=!1;editMode=!1;selectedLeaveType=null;formData=this.getEmptyFormData();ngOnInit(){this.loadLeaveTypes()}getEmptyFormData(){return{code:"",name:"",description:"",annualEntitlement:0,accrualType:"ANNUALLY",accrualRate:0,carryForwardAllowed:!1,maxCarryForward:0,encashmentAllowed:!1,encashmentRate:0,requiresApproval:!0,minNoticeDays:0,maxConsecutiveDays:0,isPaid:!0,isActive:!0,documentRequired:!1,applicableGender:"ALL",colorCode:"#008080",timeUnit:"DAYS",allowHourlyLeave:!1}}loadLeaveTypes(){this.loading=!0,this.cdr.markForCheck(),this.leaveService.getAllLeaveTypes().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.leaveTypes=t,this.filterLeaveTypes(),this.cdr.markForCheck()},error:t=>{console.error("Error loading leave types:",t)}})}filterLeaveTypes(){this.filteredLeaveTypes=this.leaveTypes.filter(t=>t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.code.toLowerCase().includes(this.searchTerm.toLowerCase()))}openCreateModal(){this.editMode=!1,this.formData=this.getEmptyFormData(),this.showModal=!0}openEditModal(t){this.editMode=!0,this.selectedLeaveType=t,this.formData=me({},t),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedLeaveType=null}saveLeaveType(){if(this.saving)return;this.saving=!0,this.cdr.markForCheck(),(this.editMode&&this.selectedLeaveType?.id?this.leaveService.updateLeaveType(this.selectedLeaveType.id,this.formData):this.leaveService.createLeaveType(this.formData)).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.loadLeaveTypes(),this.closeModal()},error:e=>{console.error("Error saving leave type:",e),alert("Error saving leave type")}})}deleteLeaveType(t){confirm("Are you sure you want to delete this leave type?")&&this.leaveService.deleteLeaveType(t).subscribe({next:()=>this.loadLeaveTypes()})}static \u0275fac=function(e){return new(e||n)(V(Ka),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-leave-types"]],decls:19,vars:4,consts:[[1,"leave-types-container"],[1,"page-header"],[1,"header-left"],[1,"fas","fa-list-alt"],[1,"subtitle"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-bar"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search leave types...",3,"ngModelChange","ngModel"],[1,"leave-types-grid"],["class","leave-type-card",3,"border-left-color",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"leave-type-card"],[1,"card-header"],[1,"type-info"],[1,"type-code"],[1,"card-actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[1,"card-body"],[1,"description"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"badges"],[1,"badge"],["class","badge approval",4,"ngIf"],["class","badge document",4,"ngIf"],["class","badge hourly",4,"ngIf"],[1,"badge","approval"],[1,"badge","document"],[1,"badge","hourly"],[1,"empty-state"],[1,"fas","fa-folder-open"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","placeholder","e.g., PTO",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Paid Time Off",3,"ngModelChange","ngModel"],["rows","2","placeholder","Leave type description...",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","DAYS"],["value","HOURS"],["type","number","min","0",3,"ngModelChange","ngModel"],["value","ANNUALLY"],["value","MONTHLY"],["value","NONE"],["value","ALL"],["value","MALE"],["value","FEMALE"],["type","color",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","form-row",4,"ngIf"],[1,"modal-footer"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Leave Types"),a(),o(6,"p",4),l(7,"Configure leave types and policies"),a()(),o(8,"button",5),x("click",function(){return i.openCreateModal()}),y(9,"i",6),l(10," Add Leave Type "),a()(),o(11,"div",7)(12,"div",8),y(13,"i",9),o(14,"input",10),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("ngModelChange",function(){return i.filterLeaveTypes()}),a()()(),o(15,"div",11),b(16,bbe,47,19,"div",12),a(),b(17,Mbe,4,0,"div",13)(18,wbe,95,24,"div",14),a()),e&2&&(c(14),M("ngModel",i.searchTerm),c(2),m("ngForOf",i.filteredLeaveTypes),c(),m("ngIf",!i.loading&&i.filteredLeaveTypes.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,Ee,Rt],styles:[".leave-types-container[_ngcontent-%COMP%]{padding:24px}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:teal;margin:0}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px}.leave-types-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}.leave-types-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]{margin-bottom:24px}.leave-types-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative;max-width:300px}.leave-types-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.leave-types-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 10px 10px 36px;border:1px solid #ddd;border-radius:8px}.leave-types-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border-left:4px solid #008080;overflow:hidden}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;border-bottom:1px solid #f0f0f0}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]   .type-code[_ngcontent-%COMP%]{font-size:12px;color:teal;font-weight:600}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:4px 0 0;font-size:16px;color:#333}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:4px;color:#666}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545;background:#fdecea}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0 0 16px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#999;text-transform:uppercase}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.approval[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.document[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.leave-types-container[_ngcontent-%COMP%]   .leave-types-grid[_ngcontent-%COMP%]   .leave-type-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.hourly[_ngcontent-%COMP%]{background:#e0f7fa;color:#00838f}.leave-types-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#999}.leave-types-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow:auto}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:18px;color:#666}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;color:#333;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px;border-top:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:8px;cursor:pointer}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;border:none;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;border:none;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}"]})};function Ebe(n,t){if(n&1){let e=F();o(0,"div",8)(1,"div",9)(2,"input",10),S("ngModelChange",function(r){g(e);let s=p();return P(s.newNote,r)||(s.newNote=r),f(r)}),x("keyup.enter",function(){g(e);let r=p();return f(r.submitNote())}),a(),o(3,"button",11),x("click",function(){g(e);let r=p();return f(r.submitNote())}),l(4," Send "),a()()()}if(n&2){let e=p();c(2),M("ngModel",e.newNote),m("disabled",e.submitting),c(),m("disabled",!e.newNote.trim()||e.submitting)}}function Obe(n,t){if(n&1&&(o(0,"div",26),l(1),a()),n&2){let e=p().$implicit;c(),D(" ",e.remarks," ")}}function Tbe(n,t){if(n&1&&(o(0,"div",27)(1,"span",28),l(2),a(),y(3,"i",29),o(4,"span",30),l(5),a()()),n&2){let e=p().$implicit;c(2),_(e.oldStatus),c(3),_(e.newStatus)}}function kbe(n,t){if(n&1&&(o(0,"div",14)(1,"div",15)(2,"div",16),l(3),a(),y(4,"div",17),a(),o(5,"div",18)(6,"div",19)(7,"span",20),l(8),a(),o(9,"span",21),y(10,"i",22),l(11),a(),o(12,"span",23),l(13),a()(),b(14,Obe,2,1,"div",24)(15,Tbe,6,2,"div",25),a()()),n&2){let e=t.$implicit,i=p(2);m("ngClass",i.getActionClass(e.action)),c(3),_(i.getPerformerInitial(e.performedBy)),c(5),_(i.getPerformerName(e.performedBy)),c(3),D(" ",i.formatDateTime(e.performedAt)),c(),m("ngClass",i.getActionClass(e.action)),c(),_(e.action),c(),m("ngIf",e.remarks),c(),m("ngIf",e.oldStatus&&e.newStatus)}}function Ibe(n,t){if(n&1&&(o(0,"div",12),b(1,kbe,16,8,"div",13),a()),n&2){let e=p();c(),m("ngForOf",e.activities)}}function Dbe(n,t){n&1&&(o(0,"div",31),y(1,"i",32),o(2,"p"),l(3,"No activity yet"),a()())}function Abe(n,t){n&1&&(o(0,"div",33),y(1,"i",34),o(2,"p"),l(3,"Loading activity..."),a()())}var Ku=class n{constructor(t){this.cdr=t}activities=[];loading=!1;showAddNote=!0;title="Activity Stream";addNote=new hi;newNote="";submitting=!1;submitNote(){!this.newNote.trim()||this.submitting||(this.submitting=!0,this.addNote.emit(this.newNote.trim()),this.newNote="",this.submitting=!1,this.cdr.markForCheck())}getActionIcon(t){let e=t?.toLowerCase()||"";return e.includes("created")||e.includes("submitted")?"fas fa-plus-circle":e.includes("approved")?"fas fa-check-circle":e.includes("rejected")?"fas fa-times-circle":e.includes("cancelled")?"fas fa-ban":e.includes("note")||e.includes("comment")?"fas fa-comment":e.includes("pending")?"fas fa-clock":e.includes("manager")?"fas fa-user-tie":e.includes("hr")?"fas fa-users":"fas fa-info-circle"}getActionClass(t){let e=t?.toLowerCase()||"";return e.includes("approved")?"approved":e.includes("rejected")?"rejected":e.includes("cancelled")?"cancelled":e.includes("pending")?"pending":e.includes("note")||e.includes("comment")?"note":"default"}formatDateTime(t){if(!t)return"";let e=new Date(t),r=new Date().getTime()-e.getTime(),s=Math.floor(r/(1e3*60*60)),d=Math.floor(r/(1e3*60*60*24));if(s<1){let u=Math.floor(r/6e4);return u<=1?"Just now":`${u}m ago`}else{if(s<24)return`${s}h ago`;if(d<7)return`${d}d ago`;if(d<30)return`${Math.floor(d/7)}w ago`;if(d<365)return`${Math.floor(d/30)}mo ago`}return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}getPerformerName(t){return t?typeof t=="string"?t:`${t.firstName||""} ${t.lastName||""}`.trim()||t.username||"User":"System"}getPerformerInitial(t){return this.getPerformerName(t).charAt(0).toUpperCase()}static \u0275fac=function(e){return new(e||n)(V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-activity-timeline"]],inputs:{activities:"activities",loading:"loading",showAddNote:"showAddNote",title:"title"},outputs:{addNote:"addNote"},decls:10,vars:5,consts:[[1,"activity-container"],[1,"activity-header"],[1,"activity-icon"],[1,"fas","fa-stream"],["class","add-note-section",4,"ngIf"],["class","timeline",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"add-note-section"],[1,"note-input-wrapper"],["type","text","placeholder","Type your message here...",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"send-btn",3,"click","disabled"],[1,"timeline"],["class","timeline-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"timeline-item",3,"ngClass"],[1,"timeline-marker"],[1,"avatar"],[1,"connector"],[1,"timeline-content"],[1,"content-header"],[1,"performer-name"],[1,"timestamp"],[1,"fas","fa-clock"],[1,"action-badge",3,"ngClass"],["class","content-body",4,"ngIf"],["class","status-change",4,"ngIf"],[1,"content-body"],[1,"status-change"],[1,"status-badge","old"],[1,"fas","fa-arrow-right"],[1,"status-badge","new"],[1,"empty-state"],[1,"fas","fa-history"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h3"),l(3),a(),o(4,"span",2),y(5,"i",3),a()(),b(6,Ebe,5,3,"div",4)(7,Ibe,2,1,"div",5)(8,Dbe,4,0,"div",6)(9,Abe,4,0,"div",7),a()),e&2&&(c(3),_(i.title),c(3),m("ngIf",i.showAddNote),c(),m("ngIf",!i.loading&&i.activities.length>0),c(),m("ngIf",!i.loading&&i.activities.length===0),c(),m("ngIf",i.loading))},dependencies:[At,ot,Se,be,Vt,Ie,Oe,Ee],styles:[".activity-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.activity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:teal;color:#fff}.activity-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.activity-header[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{opacity:.8}.add-note-section[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #e0e0e0;background:#f9f9f9}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]{display:flex;gap:12px}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #ddd;border-radius:6px;font-size:14px}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{padding:10px 20px;background:teal;color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background .2s}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.timeline[_ngcontent-%COMP%]{padding:20px}.timeline-item[_ngcontent-%COMP%]{display:flex;gap:16px;position:relative;padding-bottom:20px}.timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline-item[_ngcontent-%COMP%]:last-child   .connector[_ngcontent-%COMP%]{display:none}.timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-shrink:0}.timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px}.timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{width:2px;flex:1;background:#e0e0e0;margin-top:8px;min-height:20px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{flex:1;background:#f8f9fa;border-radius:8px;padding:14px 16px;border-left:3px solid #ddd}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin-bottom:8px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .performer-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:12px;color:#888}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px;border-radius:12px;font-weight:500;text-transform:capitalize}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.cancelled[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.note[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .action-badge.default[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]{color:#555;font-size:14px;line-height:1.5;margin-bottom:8px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .status-change[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .status-change[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:4px;font-weight:500}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .status-change[_ngcontent-%COMP%]   .status-badge.old[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .status-change[_ngcontent-%COMP%]   .status-badge.new[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .status-change[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#aaa;font-size:10px}.timeline-item.approved[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left-color:#28a745}.timeline-item.rejected[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left-color:#dc3545}.timeline-item.cancelled[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left-color:#6c757d}.timeline-item.pending[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left-color:#ffc107}.timeline-item.note[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left-color:#17a2b8}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#888}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media(max-width:600px){.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:6px}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]{flex-direction:column}.add-note-section[_ngcontent-%COMP%]   .note-input-wrapper[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})};function Rbe(n,t){if(n&1){let e=F();o(0,"button",28),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openApprovalModal(r))}),y(1,"i",29),a()}}function Fbe(n,t){if(n&1){let e=F();o(0,"button",30),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.cancelRequest(r.id))}),y(1,"i",31),a()}}function Nbe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",18)(3,"div",19),l(4),a(),o(5,"span"),l(6),a()()(),o(7,"td")(8,"span",20),l(9),a()(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td",21),l(17),a(),o(18,"td")(19,"span",22),l(20),a()(),o(21,"td")(22,"div",23)(23,"button",24),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openActivityModal(r))}),y(24,"i",25),a(),b(25,Rbe,2,0,"button",26)(26,Fbe,2,0,"button",27),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(4),_((e.employee==null||e.employee.firstName==null?null:e.employee.firstName.charAt(0))||"?"),c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),jt("border-left-color",(e.leaveType==null?null:e.leaveType.colorCode)||"#008080"),c(),D(" ",(e.leaveType==null?null:e.leaveType.name)||"N/A"," "),c(2),_(i.formatDate(e.startDate)),c(2),_(i.formatDate(e.endDate)),c(2),_(e.isHourlyLeave?e.totalHours+" hrs":e.totalDays+" days"),c(2),_(e.reason||"-"),c(2),bi(i.getStatusClass(e.status||"")),c(),_(e.status),c(5),m("ngIf",e.status==="PENDING"||e.status==="PENDING_MANAGER"||e.status==="PENDING_HR"),c(),m("ngIf",e.status==="PENDING"||e.status==="PENDING_MANAGER")}}function Lbe(n,t){if(n&1&&(o(0,"div",16)(1,"table")(2,"thead")(3,"tr")(4,"th"),l(5,"Employee"),a(),o(6,"th"),l(7,"Leave Type"),a(),o(8,"th"),l(9,"From"),a(),o(10,"th"),l(11,"To"),a(),o(12,"th"),l(13,"Duration"),a(),o(14,"th"),l(15,"Reason"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,Nbe,27,15,"tr",17),a()()()),n&2){let e=p();c(21),m("ngForOf",e.filteredRequests)}}function Vbe(n,t){n&1&&(o(0,"div",32),y(1,"i",33),o(2,"p"),l(3,"No leave requests found"),a()())}function Bbe(n,t){if(n&1&&(o(0,"option",42),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeId,")")}}function Ube(n,t){if(n&1&&(o(0,"option",42),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En("",e.name," (",e.annualEntitlement," ",e.timeUnit==="HOURS"?"hours":"days",")")}}function jbe(n,t){if(n&1&&(o(0,"div",53)(1,"div",54),y(2,"i",3),o(3,"div",55)(4,"span",56),l(5,"Available Balance"),a(),o(6,"span",57),l(7),a()()(),o(8,"div",58),y(9,"i",59),o(10,"div",55)(11,"span",56),l(12,"Used"),a(),o(13,"span",57),l(14),a()()(),o(15,"div",60),y(16,"i",61),o(17,"div",55)(18,"span",56),l(19,"Pending"),a(),o(20,"span",57),l(21),a()()()()),n&2){let e,i,r,s=p(2);c(7),Ge("",((e=s.getBalanceForLeaveType(s.formData.leaveTypeId))==null?null:e.availableBalance)||0," ",s.isHourlyLeaveType()?"hours":"days"),c(7),Ge("",((i=s.getBalanceForLeaveType(s.formData.leaveTypeId))==null?null:i.used)||0," ",s.isHourlyLeaveType()?"hours":"days"),c(7),Ge("",((r=s.getBalanceForLeaveType(s.formData.leaveTypeId))==null?null:r.pending)||0," ",s.isHourlyLeaveType()?"hours":"days")}}function Wbe(n,t){n&1&&(o(0,"div",62),y(1,"i",63),o(2,"span"),l(3,"No leave balance found for this employee and leave type. Balance will be initialized on first request."),a()())}function zbe(n,t){if(n&1){let e=F();o(0,"div")(1,"div",64)(2,"div",40)(3,"label"),l(4,"Start Date *"),a(),o(5,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.startDate,r)||(s.formData.startDate=r),f(r)}),a()(),o(6,"div",40)(7,"label"),l(8,"End Date *"),a(),o(9,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.endDate,r)||(s.formData.endDate=r),f(r)}),a()()(),o(10,"div",40)(11,"label"),l(12,"Day Type"),a(),o(13,"select",41),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.dayType,r)||(s.formData.dayType=r),f(r)}),o(14,"option",66),l(15,"Full Day"),a(),o(16,"option",67),l(17,"Half Day (Morning)"),a(),o(18,"option",68),l(19,"Half Day (Afternoon)"),a()()()()}if(n&2){let e=p(2);c(5),M("ngModel",e.formData.startDate),c(4),M("ngModel",e.formData.endDate),c(4),M("ngModel",e.formData.dayType)}}function qbe(n,t){if(n&1){let e=F();o(0,"div")(1,"div",40)(2,"label"),l(3,"Date *"),a(),o(4,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.startDate,r)||(s.formData.startDate=r),f(r)}),a()(),o(5,"div",64)(6,"div",40)(7,"label"),l(8,"Start Time *"),a(),o(9,"input",69),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.startTime,r)||(s.formData.startTime=r),f(r)}),x("ngModelChange",function(){g(e);let r=p(2);return f(r.calculateHours())}),a()(),o(10,"div",40)(11,"label"),l(12,"End Time *"),a(),o(13,"input",69),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.endTime,r)||(s.formData.endTime=r),f(r)}),x("ngModelChange",function(){g(e);let r=p(2);return f(r.calculateHours())}),a()()(),o(14,"div",40)(15,"label"),l(16,"Total Hours"),a(),o(17,"input",70),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.totalHours,r)||(s.formData.totalHours=r),f(r)}),a()()()}if(n&2){let e=p(2);c(4),M("ngModel",e.formData.startDate),c(5),M("ngModel",e.formData.startTime),c(4),M("ngModel",e.formData.endTime),c(4),M("ngModel",e.formData.totalHours)}}function Hbe(n,t){n&1&&y(0,"i",71)}function Gbe(n,t){if(n&1){let e=F();o(0,"div",34)(1,"div",35),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4,"New Leave Request"),a(),o(5,"button",37),y(6,"i",38),a()(),o(7,"div",39)(8,"div",40)(9,"label"),l(10,"Employee *"),a(),o(11,"select",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.employeeId,r)||(s.formData.employeeId=r),f(r)}),x("ngModelChange",function(){g(e);let r=p();return f(r.onEmployeeChange())}),o(12,"option",42),l(13,"-- Select Employee --"),a(),b(14,Bbe,2,4,"option",43),a()(),o(15,"div",40)(16,"label"),l(17,"Leave Type *"),a(),o(18,"select",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.leaveTypeId,r)||(s.formData.leaveTypeId=r),f(r)}),x("ngModelChange",function(){g(e);let r=p();return f(r.onLeaveTypeChange())}),o(19,"option",42),l(20,"-- Select Leave Type --"),a(),b(21,Ube,2,4,"option",43),a()(),b(22,jbe,22,6,"div",44)(23,Wbe,4,0,"div",45)(24,zbe,20,3,"div",46)(25,qbe,18,4,"div",46),o(26,"div",40)(27,"label"),l(28,"Reason *"),a(),o(29,"textarea",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.reason,r)||(s.formData.reason=r),f(r)}),a()(),o(30,"div",40)(31,"label"),l(32,"Emergency Contact"),a(),o(33,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.emergencyContact,r)||(s.formData.emergencyContact=r),f(r)}),a()()(),o(34,"div",49)(35,"button",50),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(36,"Cancel"),a(),o(37,"button",51),x("click",function(){g(e);let r=p();return f(r.submitRequest())}),b(38,Hbe,1,0,"i",52),l(39),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.formData.employeeId),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(4),M("ngModel",e.formData.leaveTypeId),c(),m("ngValue",null),c(2),m("ngForOf",e.leaveTypes),c(),m("ngIf",e.formData.employeeId&&e.formData.leaveTypeId&&e.getBalanceForLeaveType(e.formData.leaveTypeId)),c(),m("ngIf",e.formData.employeeId&&e.formData.leaveTypeId&&!e.getBalanceForLeaveType(e.formData.leaveTypeId)),c(),m("ngIf",!e.isHourlyLeaveType()),c(),m("ngIf",e.isHourlyLeaveType()),c(4),M("ngModel",e.formData.reason),c(4),M("ngModel",e.formData.emergencyContact),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Submitting...":"Submit Request"," ")}}function $be(n,t){if(n&1){let e=F();o(0,"div",39)(1,"div",75)(2,"div",76)(3,"div",77),y(4,"i",78),a(),o(5,"span"),l(6,"Manager"),a()(),y(7,"div",79),o(8,"div",76)(9,"div",77),y(10,"i",78),a(),o(11,"span"),l(12,"HR"),a()()(),o(13,"div",80)(14,"div",81)(15,"span",82),l(16,"Employee"),a(),o(17,"span",83),l(18),a()(),o(19,"div",81)(20,"span",82),l(21,"Leave Type"),a(),o(22,"span",83),l(23),a()(),o(24,"div",81)(25,"span",82),l(26,"Duration"),a(),o(27,"span",83),l(28),a()(),o(29,"div",81)(30,"span",82),l(31,"Reason"),a(),o(32,"span",83),l(33),a()(),o(34,"div",81)(35,"span",82),l(36,"Current Status"),a(),o(37,"span",84),l(38),a()()(),o(39,"div",40)(40,"label"),l(41,"Remarks"),a(),o(42,"textarea",85),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.approverRemarks,r)||(s.approverRemarks=r),f(r)}),a()()()}if(n&2){let e=p(2);c(2),ie("active",e.getApprovalStage(e.selectedRequest)==="manager")("completed",e.selectedRequest.managerApprovalStatus==="APPROVED"),c(2),ie("fa-check",e.selectedRequest.managerApprovalStatus==="APPROVED")("fa-user-tie",e.selectedRequest.managerApprovalStatus!=="APPROVED"),c(4),ie("active",e.getApprovalStage(e.selectedRequest)==="hr")("completed",e.selectedRequest.hrApprovalStatus==="APPROVED"),c(2),ie("fa-check",e.selectedRequest.hrApprovalStatus==="APPROVED")("fa-users",e.selectedRequest.hrApprovalStatus!=="APPROVED"),c(8),Ge("",e.selectedRequest.employee==null?null:e.selectedRequest.employee.firstName," ",e.selectedRequest.employee==null?null:e.selectedRequest.employee.lastName),c(5),_(e.selectedRequest.leaveType==null?null:e.selectedRequest.leaveType.name),c(5),En("",e.formatDate(e.selectedRequest.startDate)," - ",e.formatDate(e.selectedRequest.endDate)," (",e.selectedRequest.totalDays," days)"),c(5),_(e.selectedRequest.reason),c(5),_(e.getApprovalStatusText(e.selectedRequest)),c(4),M("ngModel",e.approverRemarks)}}function Ybe(n,t){if(n&1){let e=F();o(0,"div",49)(1,"button",86),x("click",function(){g(e);let r=p(2);return f(r.managerReject())}),y(2,"i",38),l(3," Reject "),a(),o(4,"button",87),x("click",function(){g(e);let r=p(2);return f(r.managerApprove())}),y(5,"i",88),l(6," Manager Approve "),a()()}}function Jbe(n,t){if(n&1){let e=F();o(0,"div",49)(1,"button",86),x("click",function(){g(e);let r=p(2);return f(r.hrReject())}),y(2,"i",38),l(3," Reject "),a(),o(4,"button",87),x("click",function(){g(e);let r=p(2);return f(r.hrApprove())}),y(5,"i",88),l(6," HR Approve (Final) "),a()()}}function Kbe(n,t){n&1&&(o(0,"div",49)(1,"button",89),l(2,"Close"),a()())}function Qbe(n,t){if(n&1){let e=F();o(0,"div",34)(1,"div",72),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4,"Review Leave Request"),a(),o(5,"button",37),y(6,"i",38),a()(),b(7,$be,43,25,"div",73)(8,Ybe,7,0,"div",74)(9,Jbe,7,0,"div",74)(10,Kbe,3,0,"div",74),a()()}if(n&2){let e=p();c(7),m("ngIf",e.selectedRequest),c(),m("ngIf",e.selectedRequest&&e.getApprovalStage(e.selectedRequest)==="manager"),c(),m("ngIf",e.selectedRequest&&e.getApprovalStage(e.selectedRequest)==="hr"),c(),m("ngIf",e.selectedRequest&&!e.getApprovalStage(e.selectedRequest))}}function Xbe(n,t){if(n&1){let e=F();o(0,"div",39)(1,"div",92)(2,"span")(3,"strong"),l(4),a()(),o(5,"span",93),l(6,"|"),a(),o(7,"span"),l(8),a(),o(9,"span",93),l(10,"|"),a(),o(11,"span"),l(12),a(),o(13,"span",22),l(14),a()(),o(15,"app-activity-timeline",94),x("addNote",function(r){g(e);let s=p(2);return f(s.onAddNote(r))}),a()()}if(n&2){let e=p(2);c(4),Ge("",e.activityRequest.employee==null?null:e.activityRequest.employee.firstName," ",e.activityRequest.employee==null?null:e.activityRequest.employee.lastName),c(4),_(e.activityRequest.leaveType==null?null:e.activityRequest.leaveType.name),c(4),Ge("",e.formatDate(e.activityRequest.startDate)," - ",e.formatDate(e.activityRequest.endDate)),c(),bi(e.getStatusClass(e.activityRequest.status||"")),c(),_(e.activityRequest.status),c(),m("activities",e.activityItems)("loading",e.loadingActivity)("showAddNote",!0)}}function Zbe(n,t){if(n&1){let e=F();o(0,"div",34)(1,"div",90),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4,"Leave Request Activity"),a(),o(5,"button",91),x("click",function(){g(e);let r=p();return f(r.closeActivityModal())}),y(6,"i",38),a()(),b(7,Xbe,16,11,"div",73),a()()}if(n&2){let e=p();c(7),m("ngIf",e.activityRequest)}}var Qu=class n{constructor(t,e,i,r){this.leaveService=t;this.employeeService=e;this.cdr=i;this.toastService=r}requests=[];filteredRequests=[];leaveTypes=[];employees=[];employeeBalances=[];loading=!1;saving=!1;showModal=!1;statusFilter="ALL";searchTerm="";formData={employeeId:null,leaveTypeId:null,startDate:"",endDate:"",dayType:"FULL_DAY",reason:"",emergencyContact:"",startTime:"",endTime:"",totalHours:0,isHourlyLeave:!1};showApprovalModal=!1;selectedRequest=null;approverRemarks="";showActivityModal=!1;activityRequest=null;activityItems=[];loadingActivity=!1;approvalType="manager";ngOnInit(){this.loadRequests(),this.loadLeaveTypes(),this.loadEmployees()}loadRequests(){this.loading=!0,this.cdr.markForCheck(),this.leaveService.getAllRequests().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.requests=t,this.filterRequests(),this.cdr.markForCheck()},error:()=>{console.error("Error loading leave requests")}})}loadLeaveTypes(){this.leaveService.getActiveLeaveTypes().pipe(Tn(()=>this.cdr.markForCheck())).subscribe({next:t=>{this.leaveTypes=t,this.cdr.markForCheck()},error:t=>console.error("Error loading leave types:",t)})}loadEmployees(){this.employeeService.getActive().pipe(Tn(()=>this.cdr.markForCheck())).subscribe({next:t=>{this.employees=t,this.cdr.markForCheck()},error:t=>console.error("Error loading employees:",t)})}onEmployeeChange(){this.formData.employeeId?this.leaveService.getEmployeeBalancesByYear(this.formData.employeeId,new Date().getFullYear()).pipe(Tn(()=>this.cdr.markForCheck())).subscribe({next:t=>{this.employeeBalances=t,this.cdr.markForCheck()},error:()=>{this.employeeBalances=[],this.cdr.markForCheck()}}):(this.employeeBalances=[],this.cdr.markForCheck())}getBalanceForLeaveType(t){return t&&this.employeeBalances.find(e=>e.leaveTypeId===t||e.leaveType?.id===t)||null}filterRequests(){this.filteredRequests=this.requests.filter(t=>{let e=this.statusFilter==="ALL"||t.status===this.statusFilter,i=!this.searchTerm||t.employee?.firstName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.employee?.lastName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.leaveType?.name?.toLowerCase().includes(this.searchTerm.toLowerCase());return e&&i})}openCreateModal(){this.formData={employeeId:null,leaveTypeId:null,startDate:"",endDate:"",dayType:"FULL_DAY",reason:"",emergencyContact:"",startTime:"",endTime:"",totalHours:0,isHourlyLeave:!1},this.employeeBalances=[],this.showModal=!0}getSelectedLeaveType(){return this.formData.leaveTypeId&&this.leaveTypes.find(t=>t.id===this.formData.leaveTypeId)||null}isHourlyLeaveType(){let t=this.getSelectedLeaveType();return t?.timeUnit==="HOURS"||t?.allowHourlyLeave===!0}onLeaveTypeChange(){this.formData.isHourlyLeave=this.isHourlyLeaveType()}calculateHours(){if(this.formData.startTime&&this.formData.endTime){let t=this.parseTime(this.formData.startTime),e=this.parseTime(this.formData.endTime);e>t?this.formData.totalHours=Math.round((e-t)/60*100)/100:this.formData.totalHours=0}}parseTime(t){let[e,i]=t.split(":").map(Number);return e*60+i}closeModal(){this.showModal=!1,this.employeeBalances=[]}submitRequest(){if(!this.saving){if(this.isHourlyLeaveType()){if(!this.formData.employeeId||!this.formData.leaveTypeId||!this.formData.startDate||!this.formData.startTime||!this.formData.endTime){alert("Please fill in all required fields");return}if(this.formData.totalHours<=0){alert("Please select valid start and end times");return}this.formData.endDate=this.formData.startDate}else if(!this.formData.employeeId||!this.formData.leaveTypeId||!this.formData.startDate||!this.formData.endDate){alert("Please fill in all required fields");return}this.saving=!0,this.cdr.markForCheck(),this.leaveService.createRequest(this.formData).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.loadRequests(),this.closeModal()},error:t=>{let e=t.error?.error||t.error?.message||"Error submitting leave request";alert(e)}})}}openApprovalModal(t){this.selectedRequest=t,this.approverRemarks="",this.showApprovalModal=!0}closeApprovalModal(){this.showApprovalModal=!1,this.selectedRequest=null}approveRequest(){this.selectedRequest?.id&&this.leaveService.approveRequest(this.selectedRequest.id,void 0,this.approverRemarks).subscribe({next:()=>{this.loadRequests(),this.closeApprovalModal()},error:t=>{alert("Error approving request: "+(t.error?.error||"Unknown error"))}})}rejectRequest(){this.selectedRequest?.id&&this.leaveService.rejectRequest(this.selectedRequest.id,void 0,this.approverRemarks).subscribe({next:()=>{this.loadRequests(),this.closeApprovalModal()},error:t=>{alert("Error rejecting request: "+(t.error?.error||"Unknown error"))}})}cancelRequest(t){confirm("Are you sure you want to cancel this leave request?")&&this.leaveService.cancelRequest(t).subscribe({next:()=>this.loadRequests(),error:e=>{alert("Error cancelling request: "+(e.error?.error||"Unknown error"))}})}getStatusClass(t){switch(t){case"PENDING":case"PENDING_MANAGER":case"PENDING_HR":return"pending";case"APPROVED":return"approved";case"REJECTED":return"rejected";case"CANCELLED":return"cancelled";default:return""}}formatDate(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}managerApprove(){this.selectedRequest?.id&&this.leaveService.managerApprove(this.selectedRequest.id,this.approverRemarks).subscribe({next:()=>{this.toastService.success("Manager approval successful"),this.loadRequests(),this.closeApprovalModal()},error:t=>{let e=t.error?.error||t.error?.message||t.message||"Connection error. Please try again.";this.toastService.error("Error: "+e)}})}managerReject(){this.selectedRequest?.id&&this.leaveService.managerReject(this.selectedRequest.id,this.approverRemarks).subscribe({next:()=>{this.toastService.success("Request rejected by manager"),this.loadRequests(),this.closeApprovalModal()},error:t=>{let e=t.error?.error||t.error?.message||t.message||"Connection error. Please try again.";this.toastService.error("Error: "+e)}})}hrApprove(){this.selectedRequest?.id&&this.leaveService.hrApprove(this.selectedRequest.id,this.approverRemarks).subscribe({next:()=>{this.toastService.success("HR approval successful - Leave request approved"),this.loadRequests(),this.closeApprovalModal()},error:t=>{let e=t.error?.error||t.error?.message||t.message||"Connection error. Please try again.";this.toastService.error("Error: "+e)}})}hrReject(){this.selectedRequest?.id&&this.leaveService.hrReject(this.selectedRequest.id,this.approverRemarks).subscribe({next:()=>{this.toastService.success("Request rejected by HR"),this.loadRequests(),this.closeApprovalModal()},error:t=>{let e=t.error?.error||t.error?.message||t.message||"Connection error. Please try again.";this.toastService.error("Error: "+e)}})}openActivityModal(t){this.activityRequest=t,this.showActivityModal=!0,this.loadActivity(t.id)}closeActivityModal(){this.showActivityModal=!1,this.activityRequest=null,this.activityItems=[]}loadActivity(t){this.loadingActivity=!0,this.cdr.markForCheck(),this.leaveService.getRequestActivity(t).pipe(Tn(()=>{this.loadingActivity=!1,this.cdr.markForCheck()})).subscribe({next:e=>{this.activityItems=e.map(i=>({id:i.id,action:i.action,performedBy:i.performedBy,performedAt:i.performedAt,remarks:i.remarks,oldStatus:i.oldStatus,newStatus:i.newStatus})),this.cdr.markForCheck()},error:()=>{this.activityItems=this.generateMockActivity(),this.cdr.markForCheck()}})}generateMockActivity(){if(!this.activityRequest)return[];let t=[];return t.push({action:"Request Created",performedBy:this.activityRequest.employee,performedAt:this.activityRequest.createdAt||this.activityRequest.startDate,remarks:this.activityRequest.reason,newStatus:"PENDING_MANAGER"}),this.activityRequest.managerApprovedAt&&t.push({action:this.activityRequest.managerApprovalStatus==="APPROVED"?"Manager Approved":"Manager Rejected",performedBy:this.activityRequest.managerApprovedBy,performedAt:this.activityRequest.managerApprovedAt,remarks:this.activityRequest.managerRemarks,oldStatus:"PENDING_MANAGER",newStatus:this.activityRequest.managerApprovalStatus==="APPROVED"?"PENDING_HR":"REJECTED"}),this.activityRequest.hrApprovedAt&&t.push({action:this.activityRequest.hrApprovalStatus==="APPROVED"?"HR Approved":"HR Rejected",performedBy:this.activityRequest.hrApprovedBy,performedAt:this.activityRequest.hrApprovedAt,remarks:this.activityRequest.hrRemarks,oldStatus:"PENDING_HR",newStatus:this.activityRequest.hrApprovalStatus==="APPROVED"?"APPROVED":"REJECTED"}),t.reverse()}onAddNote(t){this.activityRequest?.id&&this.leaveService.addActivityNote(this.activityRequest.id,t).subscribe({next:()=>{this.toastService.success("Note added"),this.loadActivity(this.activityRequest.id)},error:()=>{this.toastService.error("Failed to add note")}})}getApprovalStage(t){return t.status==="PENDING"||t.status==="PENDING_MANAGER"?"manager":t.status==="PENDING_HR"?"hr":""}getApprovalStatusText(t){if(t.managerApprovalStatus==="APPROVED"&&!t.hrApprovalStatus)return"Awaiting HR Approval";if(t.managerApprovalStatus){if(t.status==="APPROVED")return"Fully Approved";if(t.status==="REJECTED")return"Rejected"}else return"Awaiting Manager Approval";return t.status||""}static \u0275fac=function(e){return new(e||n)(V(Ka),V(ai),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-leave-requests"]],decls:29,vars:14,consts:[[1,"leave-requests-container"],[1,"page-header"],[1,"header-left"],[1,"fas","fa-calendar-check"],[1,"subtitle"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-bar"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search by employee or leave type...",3,"ngModelChange","ngModel"],[1,"status-tabs"],[3,"click"],["class","requests-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"requests-table"],[4,"ngFor","ngForOf"],[1,"employee-info"],[1,"avatar"],[1,"leave-type"],[1,"reason-cell"],[1,"status-badge"],[1,"action-buttons"],["title","View Activity",1,"btn-icon","view",3,"click"],[1,"fas","fa-history"],["class","btn-icon approve","title","Review",3,"click",4,"ngIf"],["class","btn-icon cancel","title","Cancel",3,"click",4,"ngIf"],["title","Review",1,"btn-icon","approve",3,"click"],[1,"fas","fa-check-circle"],["title","Cancel",1,"btn-icon","cancel",3,"click"],[1,"fas","fa-times-circle"],[1,"empty-state"],[1,"fas","fa-calendar-times"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","balance-info",4,"ngIf"],["class","no-balance-info",4,"ngIf"],[4,"ngIf"],["rows","3","placeholder","Please provide reason for leave...",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone number",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"balance-info"],[1,"balance-card"],[1,"balance-details"],[1,"balance-label"],[1,"balance-value"],[1,"balance-card","used"],[1,"fas","fa-calendar-minus"],[1,"balance-card","pending"],[1,"fas","fa-clock"],[1,"no-balance-info"],[1,"fas","fa-info-circle"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["value","FULL_DAY"],["value","HALF_DAY_AM"],["value","HALF_DAY_PM"],["type","time",3,"ngModelChange","ngModel"],["type","number","readonly","",1,"readonly-field",3,"ngModelChange","ngModel"],[1,"fas","fa-spinner","fa-spin"],[1,"modal","approval-modal",3,"click"],["class","modal-body",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"approval-stage-indicator"],[1,"stage"],[1,"stage-icon"],[1,"fas"],[1,"stage-connector"],[1,"request-summary"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","status-text"],["rows","3","placeholder","Add any comments...",3,"ngModelChange","ngModel"],[1,"btn-reject",3,"click"],[1,"btn-approve",3,"click"],[1,"fas","fa-check"],[1,"btn-secondary"],[1,"modal","activity-modal",3,"click"],[1,"btn-close",3,"click"],[1,"request-info-bar"],[1,"separator"],["title","Activity Stream",3,"addNote","activities","loading","showAddNote"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Leave Requests"),a(),o(6,"p",4),l(7,"Manage leave applications and approvals"),a()(),o(8,"button",5),x("click",function(){return i.openCreateModal()}),y(9,"i",6),l(10," New Request "),a()(),o(11,"div",7)(12,"div",8),y(13,"i",9),o(14,"input",10),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("ngModelChange",function(){return i.filterRequests()}),a()(),o(15,"div",11)(16,"button",12),x("click",function(){return i.statusFilter="ALL",i.filterRequests()}),l(17,"All"),a(),o(18,"button",12),x("click",function(){return i.statusFilter="PENDING",i.filterRequests()}),l(19,"Pending"),a(),o(20,"button",12),x("click",function(){return i.statusFilter="APPROVED",i.filterRequests()}),l(21,"Approved"),a(),o(22,"button",12),x("click",function(){return i.statusFilter="REJECTED",i.filterRequests()}),l(23,"Rejected"),a()()(),b(24,Lbe,22,1,"div",13)(25,Vbe,4,0,"div",14)(26,Gbe,40,16,"div",15)(27,Qbe,11,4,"div",15)(28,Zbe,8,1,"div",15),a()),e&2&&(c(14),M("ngModel",i.searchTerm),c(2),ie("active",i.statusFilter==="ALL"),c(2),ie("active",i.statusFilter==="PENDING"),c(2),ie("active",i.statusFilter==="APPROVED"),c(2),ie("active",i.statusFilter==="REJECTED"),c(2),m("ngIf",!i.loading&&i.filteredRequests.length>0),c(),m("ngIf",!i.loading&&i.filteredRequests.length===0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showApprovalModal),c(),m("ngIf",i.showActivityModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Ue,Oe,Ee,Rt,Ku],styles:[".readonly-field[_ngcontent-%COMP%]{background-color:#f5f5f5!important;color:#666!important;cursor:not-allowed;border-color:#ddd!important}.leave-requests-container[_ngcontent-%COMP%]{padding:24px}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:teal;margin:0}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px}.leave-requests-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 36px;border:1px solid #ddd;border-radius:8px;width:300px}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .status-tabs[_ngcontent-%COMP%]{display:flex;gap:4px;background:#f0f0f0;padding:4px;border-radius:8px}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .status-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;background:transparent;border-radius:6px;cursor:pointer;font-size:14px}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .status-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:teal;font-weight:500}.leave-requests-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .status-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background:#e0e0e0}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #f0f0f0}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:13px;color:#666;text-transform:uppercase}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .leave-type[_ngcontent-%COMP%]{padding-left:10px;border-left:3px solid}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .reason-cell[_ngcontent-%COMP%]{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.cancelled[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px;border-radius:4px;font-size:16px}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-icon.approve[_ngcontent-%COMP%]{color:#28a745}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-icon.cancel[_ngcontent-%COMP%]{color:#dc3545}.leave-requests-container[_ngcontent-%COMP%]   .requests-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0}.leave-requests-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#999;background:#fff;border-radius:12px}.leave-requests-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow:auto}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:18px;color:#666}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;color:#333;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .request-summary[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .request-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{margin-bottom:12px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .request-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .request-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:4px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .request-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px;border-top:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px;border:none}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]{background:#28a745;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]:hover{background:#218838}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:hover{background:#c82333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]{flex:1;min-width:100px;display:flex;align-items:center;gap:10px;padding:12px;background:#e8f5f5;border-radius:8px;border-left:3px solid #008080}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:teal}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-details[_ngcontent-%COMP%]   .balance-label[_ngcontent-%COMP%]{font-size:11px;color:#666}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-details[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:teal}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.used[_ngcontent-%COMP%]{background:#fff3cd;border-left-color:#856404}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.used[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.used[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{color:#856404}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.pending[_ngcontent-%COMP%]{background:#cce5ff;border-left-color:#004085}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.pending[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-card.pending[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{color:#004085}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .no-balance-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px;background:#f8f9fa;border-radius:8px;margin-bottom:16px;font-size:13px;color:#666}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .no-balance-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#17a2b8;font-size:16px}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;margin-bottom:20px;background:#f8f9fa;border-radius:8px}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#e0e0e0;display:flex;align-items:center;justify-content:center;color:#666;font-size:18px;transition:all .3s}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage.active[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]{background:teal;color:#fff;box-shadow:0 0 0 4px #00808033}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage.completed[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]{background:#28a745;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .approval-stage-indicator[_ngcontent-%COMP%]   .stage-connector[_ngcontent-%COMP%]{width:60px;height:3px;background:#e0e0e0;margin:0 10px 20px}.modal-overlay[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-weight:600;color:teal}.modal-overlay[_ngcontent-%COMP%]   .activity-modal[_ngcontent-%COMP%]{max-width:700px;width:95%;max-height:90vh}.modal-overlay[_ngcontent-%COMP%]   .activity-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0;overflow:hidden}.modal-overlay[_ngcontent-%COMP%]   .activity-modal[_ngcontent-%COMP%]   .request-info-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;flex-wrap:wrap}.modal-overlay[_ngcontent-%COMP%]   .activity-modal[_ngcontent-%COMP%]   .request-info-bar[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#ccc}.modal-overlay[_ngcontent-%COMP%]   .activity-modal[_ngcontent-%COMP%]   .request-info-bar[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{margin-left:auto}.modal-overlay[_ngcontent-%COMP%]   .btn-icon.view[_ngcontent-%COMP%]{color:#17a2b8}.modal-overlay[_ngcontent-%COMP%]   .btn-icon.view[_ngcontent-%COMP%]:hover{background:#17a2b81a}"],changeDetection:0})};function e2e(n,t){if(n&1&&(o(0,"option",19),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function t2e(n,t){if(n&1&&(o(0,"p"),l(1),a()),n&2){let e=p().$implicit;c(),_(e.description)}}function n2e(n,t){n&1&&(o(0,"span",36),l(1,"Paid"),a())}function i2e(n,t){n&1&&(o(0,"span",37),l(1,"Optional"),a())}function r2e(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"span",22),l(3),Le(4,"date"),a(),o(5,"span",23),l(6),Le(7,"date"),a(),o(8,"span",24),l(9),a()(),o(10,"div",25)(11,"h3"),l(12),a(),b(13,t2e,2,1,"p",26),o(14,"div",27)(15,"span",28),l(16),a(),b(17,n2e,2,0,"span",29)(18,i2e,2,0,"span",30),a()(),o(19,"div",31)(20,"button",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(21,"i",33),a(),o(22,"button",34),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteHoliday(r.id))}),y(23,"i",35),a()()()}if(n&2){let e=t.$implicit,i=p();jt("border-left-color",i.getTypeColor(e.holidayType||"")),c(3),_(rt(4,12,e.holidayDate,"d")),c(3),_(rt(7,15,e.holidayDate,"MMM")),c(3),_(e.dayOfWeek),c(3),_(e.name),c(),m("ngIf",e.description),c(2),jt("background",i.getTypeColor(e.holidayType||"")),c(),_(e.holidayType),c(),m("ngIf",e.isPaid),c(),m("ngIf",e.isOptional)}}function o2e(n,t){if(n&1&&(o(0,"div",38),y(1,"i",39),o(2,"p"),l(3),a()()),n&2){let e=p();c(3),D("No holidays found for ",e.selectedYear)}}function a2e(n,t){if(n&1&&(o(0,"option",19),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function s2e(n,t){n&1&&y(0,"i",58)}function l2e(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",41),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4),a(),o(5,"button",43),y(6,"i",44),a()(),o(7,"div",45)(8,"div",46)(9,"label"),l(10,"Holiday Name *"),a(),o(11,"input",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()(),o(12,"div",48)(13,"div",46)(14,"label"),l(15,"Date *"),a(),o(16,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.holidayDate,r)||(s.formData.holidayDate=r),f(r)}),a()(),o(17,"div",46)(18,"label"),l(19,"Type *"),a(),o(20,"select",6),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.holidayType,r)||(s.formData.holidayType=r),f(r)}),b(21,a2e,2,2,"option",7),a()()(),o(22,"div",46)(23,"label"),l(24,"Description"),a(),o(25,"textarea",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.description,r)||(s.formData.description=r),f(r)}),a()(),o(26,"div",51)(27,"label",52)(28,"input",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isPaid,r)||(s.formData.isPaid=r),f(r)}),a(),l(29," Paid Holiday "),a(),o(30,"label",52)(31,"input",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isOptional,r)||(s.formData.isOptional=r),f(r)}),a(),l(32," Optional "),a(),o(33,"label",52)(34,"input",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),a(),l(35," Active "),a()()(),o(36,"div",54)(37,"button",55),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(38,"Cancel"),a(),o(39,"button",56),x("click",function(){g(e);let r=p();return f(r.saveHoliday())}),b(40,s2e,1,0,"i",57),l(41),a()()()()}if(n&2){let e=p();c(4),D("",e.editMode?"Edit":"Add"," Holiday"),c(7),M("ngModel",e.formData.name),c(5),M("ngModel",e.formData.holidayDate),c(4),M("ngModel",e.formData.holidayType),c(),m("ngForOf",e.holidayTypes),c(4),M("ngModel",e.formData.description),c(3),M("ngModel",e.formData.isPaid),c(3),M("ngModel",e.formData.isOptional),c(3),M("ngModel",e.formData.isActive),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.editMode?"Update":"Create"," ")}}var Xu=class n{constructor(t){this.leaveService=t}holidays=[];filteredHolidays=[];loading=!1;saving=!1;showModal=!1;editMode=!1;selectedHoliday=null;selectedYear=new Date().getFullYear();years=[2024,2025,2026];formData=this.getEmptyFormData();holidayTypes=[{value:"FEDERAL",label:"Federal Holiday"},{value:"COMPANY",label:"Company Holiday"},{value:"OPTIONAL",label:"Optional Holiday"},{value:"RESTRICTED",label:"Restricted Holiday"}];ngOnInit(){this.loadHolidays()}getEmptyFormData(){return{name:"",holidayDate:"",description:"",holidayType:"COMPANY",isPaid:!0,isOptional:!1,isActive:!0,applicableLocations:"",applicableDepartments:""}}loadHolidays(){this.loading=!1,this.leaveService.getHolidaysByYear(this.selectedYear).subscribe({next:t=>{this.holidays=t,this.filteredHolidays=t,this.loading=!1},error:()=>{this.loading=!1}})}filterByType(t){t==="ALL"?this.filteredHolidays=this.holidays:this.filteredHolidays=this.holidays.filter(e=>e.holidayType===t)}openCreateModal(){this.editMode=!1,this.formData=this.getEmptyFormData(),this.showModal=!0}openEditModal(t){this.editMode=!0,this.selectedHoliday=t,this.formData=me({},t),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedHoliday=null}saveHoliday(){this.saving||(this.saving=!0,this.editMode&&this.selectedHoliday?.id?this.leaveService.updateHoliday(this.selectedHoliday.id,this.formData).subscribe({next:()=>{this.saving=!1,this.loadHolidays(),this.closeModal()},error:()=>{this.saving=!1}}):this.leaveService.createHoliday(this.formData).subscribe({next:()=>{this.saving=!1,this.loadHolidays(),this.closeModal()},error:()=>{this.saving=!1}}))}deleteHoliday(t){confirm("Are you sure you want to delete this holiday?")&&this.leaveService.deleteHoliday(t).subscribe({next:()=>this.loadHolidays()})}formatDate(t){return new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}getTypeColor(t){switch(t){case"FEDERAL":return"#dc3545";case"COMPANY":return"#008080";case"OPTIONAL":return"#ffc107";case"RESTRICTED":return"#6c757d";default:return"#008080"}}static \u0275fac=function(e){return new(e||n)(V(Ka))};static \u0275cmp=_e({type:n,selectors:[["app-holiday-calendar"]],decls:27,vars:5,consts:[[1,"holiday-calendar-container"],[1,"page-header"],[1,"header-left"],[1,"fas","fa-calendar-alt"],[1,"subtitle"],[1,"header-actions"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filter-tabs"],[1,"tab",3,"click"],[1,"tab","federal",3,"click"],[1,"tab","company",3,"click"],[1,"tab","optional",3,"click"],[1,"holidays-list"],["class","holiday-card",3,"border-left-color",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"value"],[1,"holiday-card"],[1,"holiday-date"],[1,"day"],[1,"month"],[1,"weekday"],[1,"holiday-info"],[4,"ngIf"],[1,"badges"],[1,"type-badge"],["class","badge paid",4,"ngIf"],["class","badge optional",4,"ngIf"],[1,"holiday-actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[1,"badge","paid"],[1,"badge","optional"],[1,"empty-state"],[1,"fas","fa-calendar-times"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Independence Day",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["rows","2","placeholder","Optional description...",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Holiday Calendar"),a(),o(6,"p",4),l(7,"Federal and company holidays"),a()(),o(8,"div",5)(9,"select",6),S("ngModelChange",function(s){return P(i.selectedYear,s)||(i.selectedYear=s),s}),x("ngModelChange",function(){return i.loadHolidays()}),b(10,e2e,2,2,"option",7),a(),o(11,"button",8),x("click",function(){return i.openCreateModal()}),y(12,"i",9),l(13," Add Holiday "),a()()(),o(14,"div",10)(15,"button",11),x("click",function(){return i.filterByType("ALL")}),l(16,"All"),a(),o(17,"button",12),x("click",function(){return i.filterByType("FEDERAL")}),l(18,"Federal"),a(),o(19,"button",13),x("click",function(){return i.filterByType("COMPANY")}),l(20,"Company"),a(),o(21,"button",14),x("click",function(){return i.filterByType("OPTIONAL")}),l(22,"Optional"),a()(),o(23,"div",15),b(24,r2e,24,18,"div",16),a(),b(25,o2e,4,1,"div",17)(26,l2e,42,13,"div",18),a()),e&2&&(c(9),M("ngModel",i.selectedYear),c(),m("ngForOf",i.years),c(14),m("ngForOf",i.filteredHolidays),c(),m("ngIf",!i.loading&&i.filteredHolidays.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Yt,Ue,Oe,Ee,Rt,ir],styles:[".holiday-calendar-container[_ngcontent-%COMP%]{padding:24px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:teal;margin:0}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:4px 0 0}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #ddd;border-radius:8px;font-size:14px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px}.holiday-calendar-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;background:#fff;border-radius:20px;cursor:pointer;font-size:14px}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:#f0f0f0}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .tab.federal[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .tab.company[_ngcontent-%COMP%]{border-color:teal;color:teal}.holiday-calendar-container[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .tab.optional[_ngcontent-%COMP%]{border-color:#ffc107;color:#856404}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border-left:4px solid #008080;display:flex;align-items:center;padding:16px;gap:20px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]{min-width:70px;text-align:center;padding:10px;background:#f8f9fa;border-radius:8px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:700;color:teal;line-height:1}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{display:block;font-size:14px;color:#666;text-transform:uppercase;margin-top:4px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{display:block;font-size:12px;color:#999;margin-top:2px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]{flex:1}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#333}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#666}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]{display:flex;gap:8px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500;color:#fff}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.paid[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-info[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   .badge.optional[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:4px;color:#666}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0}.holiday-calendar-container[_ngcontent-%COMP%]   .holidays-list[_ngcontent-%COMP%]   .holiday-card[_ngcontent-%COMP%]   .holiday-actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545;background:#fdecea}.holiday-calendar-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#999;background:#fff;border-radius:12px}.holiday-calendar-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow:auto}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:18px;color:#666}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;color:#333;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:teal;outline:none}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px;border-top:1px solid #eee}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:8px;cursor:pointer;border:none}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#066}"]})};function c2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",13),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),Le(14,"number"),a(),o(15,"td")(16,"span",13),l(17),a()(),o(18,"td")(19,"span",14),l(20),a()(),o(21,"td",15)(22,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(23,"i",17),a(),o(24,"button",18),x("click",function(){let r=g(e).$implicit,s=p();return f(s.toggleActive(r))}),y(25,"i",19),a(),o(26,"button",20),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteHead(r.id))}),y(27,"i",21),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(2),ie("earning",e.headType==="EARNING")("deduction",e.headType==="DEDUCTION"),c(),D(" ",e.headType," "),c(2),_(e.category),c(2),_(e.calculationType),c(2),_(rt(14,25,e.defaultValue,"1.2-2")),c(3),ie("yes",e.isTaxable)("no",!e.isTaxable),c(),D(" ",e.isTaxable?"Yes":"No"," "),c(2),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," "),c(4),m("title",e.isActive?"Deactivate":"Activate"),c(),ie("fa-toggle-on",e.isActive)("fa-toggle-off",!e.isActive)}}function d2e(n,t){n&1&&(o(0,"tr")(1,"td",22),l(2,"No salary heads found"),a()())}function p2e(n,t){if(n&1&&(o(0,"option",41),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function m2e(n,t){if(n&1&&(o(0,"option",41),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function u2e(n,t){if(n&1&&(o(0,"option",41),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function g2e(n,t){if(n&1&&(o(0,"option",41),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function f2e(n,t){if(n&1){let e=F();o(0,"div",23)(1,"div",24),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",25)(3,"h3"),l(4),a(),o(5,"button",26),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",27)(8,"div",28)(9,"div",29)(10,"label"),l(11,"Code *"),a(),o(12,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.code,r)||(s.currentHead.code=r),f(r)}),a()(),o(13,"div",29)(14,"label"),l(15,"Name *"),a(),o(16,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.name,r)||(s.currentHead.name=r),f(r)}),a()()(),o(17,"div",29)(18,"label"),l(19,"Description"),a(),o(20,"textarea",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.description,r)||(s.currentHead.description=r),f(r)}),a()(),o(21,"div",28)(22,"div",29)(23,"label"),l(24,"Head Type *"),a(),o(25,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.headType,r)||(s.currentHead.headType=r),f(r)}),b(26,p2e,2,2,"option",33),a()(),o(27,"div",29)(28,"label"),l(29,"Category *"),a(),o(30,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.category,r)||(s.currentHead.category=r),f(r)}),b(31,m2e,2,2,"option",33),a()()(),o(32,"div",28)(33,"div",29)(34,"label"),l(35,"Calculation Type"),a(),o(36,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.calculationType,r)||(s.currentHead.calculationType=r),f(r)}),b(37,u2e,2,2,"option",33),a()(),o(38,"div",29)(39,"label"),l(40,"Default Value"),a(),o(41,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.defaultValue,r)||(s.currentHead.defaultValue=r),f(r)}),a()()(),o(42,"div",28)(43,"div",29)(44,"label"),l(45,"Applicable To"),a(),o(46,"select",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.applicableTo,r)||(s.currentHead.applicableTo=r),f(r)}),b(47,g2e,2,2,"option",33),a()(),o(48,"div",29)(49,"label"),l(50,"Display Order"),a(),o(51,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.displayOrder,r)||(s.currentHead.displayOrder=r),f(r)}),a()()(),o(52,"div",36)(53,"div",37)(54,"label")(55,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.isTaxable,r)||(s.currentHead.isTaxable=r),f(r)}),a(),l(56," Taxable "),a()(),o(57,"div",37)(58,"label")(59,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.isStatutory,r)||(s.currentHead.isStatutory=r),f(r)}),a(),l(60," Statutory "),a()(),o(61,"div",37)(62,"label")(63,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.affectsGrossPay,r)||(s.currentHead.affectsGrossPay=r),f(r)}),a(),l(64," Affects Gross Pay "),a()(),o(65,"div",37)(66,"label")(67,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentHead.isActive,r)||(s.currentHead.isActive=r),f(r)}),a(),l(68," Active "),a()()()(),o(69,"div",39)(70,"button",40),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(71,"Cancel"),a(),o(72,"button",2),x("click",function(){g(e);let r=p();return f(r.saveHead())}),l(73),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"Add"," Salary Head"),c(8),M("ngModel",e.currentHead.code),c(4),M("ngModel",e.currentHead.name),c(4),M("ngModel",e.currentHead.description),c(5),M("ngModel",e.currentHead.headType),c(),m("ngForOf",e.headTypes),c(4),M("ngModel",e.currentHead.category),c(),m("ngForOf",e.categories),c(5),M("ngModel",e.currentHead.calculationType),c(),m("ngForOf",e.calculationTypes),c(4),M("ngModel",e.currentHead.defaultValue),c(5),M("ngModel",e.currentHead.applicableTo),c(),m("ngForOf",e.applicableOptions),c(4),M("ngModel",e.currentHead.displayOrder),c(4),M("ngModel",e.currentHead.isTaxable),c(4),M("ngModel",e.currentHead.isStatutory),c(4),M("ngModel",e.currentHead.affectsGrossPay),c(4),M("ngModel",e.currentHead.isActive),c(6),_(e.isEditing?"Update":"Create")}}var E2=class n{constructor(t){this.payrollService=t}salaryHeads=[];filteredHeads=[];searchTerm="";showModal=!1;isEditing=!1;currentHead=this.getEmptyHead();headTypes=["EARNING","DEDUCTION"];categories=["BASIC","ALLOWANCE","BONUS","REIMBURSEMENT","PRE_TAX_DEDUCTION","POST_TAX_DEDUCTION","TAX","STATUTORY"];calculationTypes=["FIXED","PERCENTAGE","FORMULA"];applicableOptions=["ALL","SALARIED","HOURLY"];ngOnInit(){this.loadSalaryHeads()}loadSalaryHeads(){this.payrollService.getAllSalaryHeads().subscribe({next:t=>{this.salaryHeads=t,this.filterHeads()},error:t=>console.error("Error loading salary heads:",t)})}filterHeads(){let t=this.searchTerm.toLowerCase();this.filteredHeads=this.salaryHeads.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||e.headType.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}getEmptyHead(){return{code:"",name:"",description:"",headType:"EARNING",category:"BASIC",calculationType:"FIXED",defaultValue:0,isTaxable:!0,isStatutory:!1,affectsGrossPay:!0,isActive:!0,displayOrder:0,applicableTo:"ALL"}}openCreateModal(){this.isEditing=!1,this.currentHead=this.getEmptyHead(),this.showModal=!0}openEditModal(t){this.isEditing=!0,this.currentHead=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}saveHead(){this.isEditing&&this.currentHead.id?this.payrollService.updateSalaryHead(this.currentHead.id,this.currentHead).subscribe({next:()=>{this.loadSalaryHeads(),this.closeModal()},error:t=>console.error("Error updating salary head:",t)}):this.payrollService.createSalaryHead(this.currentHead).subscribe({next:()=>{this.loadSalaryHeads(),this.closeModal()},error:t=>console.error("Error creating salary head:",t)})}deleteHead(t){confirm("Are you sure you want to delete this salary head?")&&this.payrollService.deleteSalaryHead(t).subscribe({next:()=>this.loadSalaryHeads(),error:e=>console.error("Error deleting salary head:",e)})}toggleActive(t){let e=Tt(me({},t),{isActive:!t.isActive});t.id&&this.payrollService.updateSalaryHead(t.id,e).subscribe({next:()=>this.loadSalaryHeads(),error:i=>console.error("Error toggling status:",i)})}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-salary-heads"]],decls:37,vars:4,consts:[[1,"salary-heads-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-section"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search salary heads...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"badge"],[1,"status-badge"],[1,"actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],[1,"btn-icon",3,"click","title"],[1,"fas"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","9",1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["rows","2",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.01",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"form-group","checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Salary Head Definition"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Salary Head "),a()(),o(7,"div",4)(8,"div",5),y(9,"i",6),o(10,"input",7),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("ngModelChange",function(){return i.filterHeads()}),a()()(),o(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),l(16,"Code"),a(),o(17,"th"),l(18,"Name"),a(),o(19,"th"),l(20,"Type"),a(),o(21,"th"),l(22,"Category"),a(),o(23,"th"),l(24,"Calculation"),a(),o(25,"th"),l(26,"Default Value"),a(),o(27,"th"),l(28,"Taxable"),a(),o(29,"th"),l(30,"Status"),a(),o(31,"th"),l(32,"Actions"),a()()(),o(33,"tbody"),b(34,c2e,28,28,"tr",10)(35,d2e,3,0,"tr",11),a()()()(),b(36,f2e,74,19,"div",12)),e&2&&(c(10),M("ngModel",i.searchTerm),c(24),m("ngForOf",i.filteredHeads),c(),m("ngIf",i.filteredHeads.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,cn,Ee,Rt,yn],styles:[".salary-heads-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.filters-section[_ngcontent-%COMP%]{margin-bottom:20px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 10px 10px 40px;border:1px solid #ddd;border-radius:6px;font-size:14px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.data-table[_ngcontent-%COMP%]   .badge.earning[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .badge.deduction[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .badge.yes[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .badge.no[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px}.data-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666;transition:color .3s}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.data-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:600px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};function h2e(n,t){if(n&1&&(o(0,"div",12)(1,"span",13),l(2,"Pay Day (Monthly):"),a(),o(3,"span",14),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.payDayOfMonth)}}function _2e(n,t){if(n&1&&(o(0,"div",12)(1,"span",13),l(2,"Pay Day (Weekly):"),a(),o(3,"span",14),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.payDayOfWeek)}}function v2e(n,t){if(n&1){let e=F();o(0,"div",8)(1,"div",9)(2,"h3"),l(3),a(),o(4,"span",10),l(5),a()(),o(6,"div",11)(7,"div",12)(8,"span",13),l(9,"Periods Per Year:"),a(),o(10,"span",14),l(11),a()(),b(12,h2e,5,1,"div",15)(13,_2e,5,1,"div",15),o(14,"div",16)(15,"span",17),l(16),a(),o(17,"span",17),l(18),a()()(),o(19,"div",18)(20,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(21,"i",20),a(),o(22,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteFrequency(r.id))}),y(23,"i",22),a()()()}if(n&2){let e=t.$implicit;ie("inactive",!e.isActive),c(3),_(e.name),c(2),_(e.code),c(6),_(e.periodsPerYear),c(),m("ngIf",e.payDayOfMonth),c(),m("ngIf",e.payDayOfWeek),c(2),ie("default",e.isDefault),c(),_(e.isDefault?"Default":""),c(),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," ")}}function x2e(n,t){n&1&&(o(0,"div",23),l(1," No pay frequencies configured "),a())}function y2e(n,t){if(n&1){let e=F();o(0,"div",24)(1,"div",25),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",26)(3,"h3"),l(4),a(),o(5,"button",27),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",28)(8,"div",29)(9,"div",30)(10,"label"),l(11,"Code *"),a(),o(12,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.code,r)||(s.currentFrequency.code=r),f(r)}),a()(),o(13,"div",30)(14,"label"),l(15,"Name *"),a(),o(16,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.name,r)||(s.currentFrequency.name=r),f(r)}),a()()(),o(17,"div",30)(18,"label"),l(19,"Description"),a(),o(20,"textarea",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.description,r)||(s.currentFrequency.description=r),f(r)}),a()(),o(21,"div",29)(22,"div",30)(23,"label"),l(24,"Periods Per Year *"),a(),o(25,"select",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.periodsPerYear,r)||(s.currentFrequency.periodsPerYear=r),f(r)}),o(26,"option",34),l(27,"52 (Weekly)"),a(),o(28,"option",34),l(29,"26 (Bi-Weekly)"),a(),o(30,"option",34),l(31,"24 (Semi-Monthly)"),a(),o(32,"option",34),l(33,"12 (Monthly)"),a()()(),o(34,"div",30)(35,"label"),l(36,"Pay Day of Month"),a(),o(37,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.payDayOfMonth,r)||(s.currentFrequency.payDayOfMonth=r),f(r)}),a()()(),o(38,"div",29)(39,"div",30)(40,"label"),l(41,"Pay Day of Week (1-7)"),a(),o(42,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.payDayOfWeek,r)||(s.currentFrequency.payDayOfWeek=r),f(r)}),a()(),o(43,"div",30)(44,"label"),l(45,"Second Pay Day (Semi-Monthly)"),a(),o(46,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.secondPayDayOfMonth,r)||(s.currentFrequency.secondPayDayOfMonth=r),f(r)}),a()()(),o(47,"div",37)(48,"div",38)(49,"label")(50,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.isDefault,r)||(s.currentFrequency.isDefault=r),f(r)}),a(),l(51," Default"),a()(),o(52,"div",38)(53,"label")(54,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentFrequency.isActive,r)||(s.currentFrequency.isActive=r),f(r)}),a(),l(55," Active"),a()()()(),o(56,"div",40)(57,"button",41),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(58,"Cancel"),a(),o(59,"button",2),x("click",function(){g(e);let r=p();return f(r.saveFrequency())}),l(60),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"Add"," Pay Frequency"),c(8),M("ngModel",e.currentFrequency.code),c(4),M("ngModel",e.currentFrequency.name),c(4),M("ngModel",e.currentFrequency.description),c(5),M("ngModel",e.currentFrequency.periodsPerYear),c(),m("value",52),c(2),m("value",26),c(2),m("value",24),c(2),m("value",12),c(5),M("ngModel",e.currentFrequency.payDayOfMonth),c(5),M("ngModel",e.currentFrequency.payDayOfWeek),c(4),M("ngModel",e.currentFrequency.secondPayDayOfMonth),c(4),M("ngModel",e.currentFrequency.isDefault),c(4),M("ngModel",e.currentFrequency.isActive),c(6),_(e.isEditing?"Update":"Create")}}var O2=class n{constructor(t){this.payrollService=t}frequencies=[];showModal=!1;isEditing=!1;currentFrequency=this.getEmptyFrequency();ngOnInit(){this.loadFrequencies()}loadFrequencies(){this.payrollService.getAllPayFrequencies().subscribe({next:t=>this.frequencies=t,error:t=>console.error("Error loading pay frequencies:",t)})}getEmptyFrequency(){return{code:"",name:"",description:"",periodsPerYear:12,payDayOfMonth:1,isDefault:!1,isActive:!0}}openCreateModal(){this.isEditing=!1,this.currentFrequency=this.getEmptyFrequency(),this.showModal=!0}openEditModal(t){this.isEditing=!0,this.currentFrequency=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}saveFrequency(){this.isEditing&&this.currentFrequency.id?this.payrollService.updatePayFrequency(this.currentFrequency.id,this.currentFrequency).subscribe({next:()=>{this.loadFrequencies(),this.closeModal()},error:t=>console.error("Error updating:",t)}):this.payrollService.createPayFrequency(this.currentFrequency).subscribe({next:()=>{this.loadFrequencies(),this.closeModal()},error:t=>console.error("Error creating:",t)})}deleteFrequency(t){confirm("Delete this pay frequency?")&&this.payrollService.deletePayFrequency(t).subscribe({next:()=>this.loadFrequencies(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-pay-frequencies"]],decls:11,vars:3,consts:[[1,"pay-frequencies-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"cards-grid"],["class","frequency-card",3,"inactive",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"frequency-card"],[1,"card-header"],[1,"code"],[1,"card-body"],[1,"info-row"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],[1,"status-row"],[1,"badge"],[1,"card-actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["rows","2",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value"],["type","number","min","1","max","31",3,"ngModelChange","ngModel"],["type","number","min","1","max","7",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"form-group","checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Pay Frequencies"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Pay Frequency "),a()(),o(7,"div",4),b(8,v2e,24,15,"div",5)(9,x2e,2,0,"div",6),a()(),b(10,y2e,61,15,"div",7)),e&2&&(c(8),m("ngForOf",i.frequencies),c(),m("ngIf",i.frequencies.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,fr,Ee,Rt],styles:[".pay-frequencies-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.frequency-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:transform .3s ease}.frequency-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.frequency-card.inactive[_ngcontent-%COMP%]{opacity:.7}.frequency-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:teal;color:#fff;padding:16px;display:flex;justify-content:space-between;align-items:center}.frequency-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.frequency-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#333}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]   .badge.default[_ngcontent-%COMP%]{background:#ffc107;color:#000}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]   .badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.frequency-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]   .badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.frequency-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding:12px 16px;border-top:1px solid #eee}.frequency-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666}.frequency-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.frequency-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.no-data[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;padding:40px;color:#999}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;gap:24px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};function C2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",9),l(7),a()(),o(8,"td",10),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",11),l(14),a()(),o(15,"td"),l(16),a(),o(17,"td")(18,"span",12),l(19),a()(),o(20,"td",13)(21,"button",14),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(22,"i",15),a(),o(23,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteRule(r.id))}),y(24,"i",17),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(3),_(e.ruleType),c(2),D("",e.multiplier,"x"),c(2),Ge("",e.minHoursThreshold," hrs (",e.thresholdType,")"),c(2),ie("yes",e.requiresApproval)("no",!e.requiresApproval),c(),D(" ",e.requiresApproval?"Yes":"No"," "),c(2),_(e.priority),c(2),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," ")}}function b2e(n,t){n&1&&(o(0,"tr")(1,"td",18),l(2,"No overtime rules found"),a()())}function M2e(n,t){if(n&1&&(o(0,"option",38),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function S2e(n,t){if(n&1&&(o(0,"option",38),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function P2e(n,t){if(n&1){let e=F();o(0,"div",19)(1,"div",20),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",21)(3,"h3"),l(4),a(),o(5,"button",22),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",23)(8,"div",24)(9,"div",25)(10,"label"),l(11,"Code *"),a(),o(12,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.code,r)||(s.currentRule.code=r),f(r)}),a()(),o(13,"div",25)(14,"label"),l(15,"Name *"),a(),o(16,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.name,r)||(s.currentRule.name=r),f(r)}),a()()(),o(17,"div",25)(18,"label"),l(19,"Description"),a(),o(20,"textarea",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.description,r)||(s.currentRule.description=r),f(r)}),a()(),o(21,"div",24)(22,"div",25)(23,"label"),l(24,"Rule Type *"),a(),o(25,"select",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.ruleType,r)||(s.currentRule.ruleType=r),f(r)}),b(26,M2e,2,2,"option",29),a()(),o(27,"div",25)(28,"label"),l(29,"Multiplier *"),a(),o(30,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.multiplier,r)||(s.currentRule.multiplier=r),f(r)}),a()()(),o(31,"div",24)(32,"div",25)(33,"label"),l(34,"Min Hours Threshold"),a(),o(35,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.minHoursThreshold,r)||(s.currentRule.minHoursThreshold=r),f(r)}),a()(),o(36,"div",25)(37,"label"),l(38,"Threshold Type"),a(),o(39,"select",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.thresholdType,r)||(s.currentRule.thresholdType=r),f(r)}),b(40,S2e,2,2,"option",29),a()()(),o(41,"div",24)(42,"div",25)(43,"label"),l(44,"Max OT Hours"),a(),o(45,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.maxOvertimeHours,r)||(s.currentRule.maxOvertimeHours=r),f(r)}),a()(),o(46,"div",25)(47,"label"),l(48,"Priority"),a(),o(49,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.priority,r)||(s.currentRule.priority=r),f(r)}),a()()(),o(50,"div",33)(51,"div",34)(52,"label")(53,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.requiresApproval,r)||(s.currentRule.requiresApproval=r),f(r)}),a(),l(54," Requires Approval"),a()(),o(55,"div",34)(56,"label")(57,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.isActive,r)||(s.currentRule.isActive=r),f(r)}),a(),l(58," Active"),a()()()(),o(59,"div",36)(60,"button",37),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(61,"Cancel"),a(),o(62,"button",2),x("click",function(){g(e);let r=p();return f(r.saveRule())}),l(63),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"Add"," Overtime Rule"),c(8),M("ngModel",e.currentRule.code),c(4),M("ngModel",e.currentRule.name),c(4),M("ngModel",e.currentRule.description),c(5),M("ngModel",e.currentRule.ruleType),c(),m("ngForOf",e.ruleTypes),c(4),M("ngModel",e.currentRule.multiplier),c(5),M("ngModel",e.currentRule.minHoursThreshold),c(4),M("ngModel",e.currentRule.thresholdType),c(),m("ngForOf",e.thresholdTypes),c(5),M("ngModel",e.currentRule.maxOvertimeHours),c(4),M("ngModel",e.currentRule.priority),c(4),M("ngModel",e.currentRule.requiresApproval),c(4),M("ngModel",e.currentRule.isActive),c(6),_(e.isEditing?"Update":"Create")}}var T2=class n{constructor(t){this.payrollService=t}rules=[];showModal=!1;isEditing=!1;currentRule=this.getEmptyRule();ruleTypes=["WEEKDAY_OT","WEEKEND_OT","HOLIDAY_OT","NIGHT_SHIFT"];thresholdTypes=["DAILY","WEEKLY"];ngOnInit(){this.loadRules()}loadRules(){this.payrollService.getAllOvertimeRules().subscribe({next:t=>this.rules=t,error:t=>console.error("Error loading overtime rules:",t)})}getEmptyRule(){return{code:"",name:"",description:"",ruleType:"WEEKDAY_OT",multiplier:1.5,minHoursThreshold:8,thresholdType:"DAILY",requiresApproval:!0,isActive:!0,priority:1}}openCreateModal(){this.isEditing=!1,this.currentRule=this.getEmptyRule(),this.showModal=!0}openEditModal(t){this.isEditing=!0,this.currentRule=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}saveRule(){this.isEditing&&this.currentRule.id?this.payrollService.updateOvertimeRule(this.currentRule.id,this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error updating:",t)}):this.payrollService.createOvertimeRule(this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error creating:",t)})}deleteRule(t){confirm("Delete this overtime rule?")&&this.payrollService.deleteOvertimeRule(t).subscribe({next:()=>this.loadRules(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-overtime-rules"]],decls:33,vars:3,consts:[[1,"overtime-rules-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"badge","type"],[1,"multiplier"],[1,"badge"],[1,"status-badge"],[1,"actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","9",1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["rows","2",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.5","min","1",3,"ngModelChange","ngModel"],["type","number","step","0.5",3,"ngModelChange","ngModel"],["type","number","min","1",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"form-group","checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Overtime Rules"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Overtime Rule "),a()(),o(7,"div",4)(8,"table",5)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Multiplier"),a(),o(19,"th"),l(20,"Threshold"),a(),o(21,"th"),l(22,"Approval Required"),a(),o(23,"th"),l(24,"Priority"),a(),o(25,"th"),l(26,"Status"),a(),o(27,"th"),l(28,"Actions"),a()()(),o(29,"tbody"),b(30,C2e,25,17,"tr",6)(31,b2e,3,0,"tr",7),a()()()(),b(32,P2e,64,15,"div",8)),e&2&&(c(30),m("ngForOf",i.rules),c(),m("ngIf",i.rules.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,cn,Xt,Ee,Rt],styles:[".overtime-rules-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .multiplier[_ngcontent-%COMP%]{font-weight:600;color:teal}.data-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px}.data-table[_ngcontent-%COMP%]   .badge.type[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.data-table[_ngcontent-%COMP%]   .badge.yes[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .badge.no[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px}.data-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.data-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;gap:24px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};function w2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",9),l(7),a()(),o(8,"td",10),l(9),a(),o(10,"td"),l(11),Le(12,"number"),a(),o(13,"td"),y(14,"i",11),a(),o(15,"td"),y(16,"i",11),a(),o(17,"td"),l(18),a(),o(19,"td")(20,"span",12),l(21),a()(),o(22,"td",13)(23,"button",14),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(24,"i",15),a(),o(25,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteRule(r.id))}),y(26,"i",17),a()()()}if(n&2){let e=t.$implicit,i=p();c(2),_(e.code),c(2),_(e.name),c(2),m("ngClass",i.getTypeBadgeClass(e.taxType)),c(),_(e.taxType),c(2),D("",e.rate,"%"),c(2),_(e.maxIncome?rt(12,28,e.maxIncome,"1.0-0"):"-"),c(3),ie("fa-check",e.employeeContribution)("fa-times",!e.employeeContribution)("check",e.employeeContribution)("cross",!e.employeeContribution),c(2),ie("fa-check",e.employerContribution)("fa-times",!e.employerContribution)("check",e.employerContribution)("cross",!e.employerContribution),c(2),_(e.taxYear),c(2),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," ")}}function E2e(n,t){n&1&&(o(0,"tr")(1,"td",18),l(2,"No tax rules found"),a()())}function O2e(n,t){if(n&1&&(o(0,"option",38),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function T2e(n,t){if(n&1&&(o(0,"option",38),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function k2e(n,t){if(n&1){let e=F();o(0,"div",19)(1,"div",20),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",21)(3,"h3"),l(4),a(),o(5,"button",22),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",23)(8,"div",24)(9,"div",25)(10,"label"),l(11,"Code *"),a(),o(12,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.code,r)||(s.currentRule.code=r),f(r)}),a()(),o(13,"div",25)(14,"label"),l(15,"Name *"),a(),o(16,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.name,r)||(s.currentRule.name=r),f(r)}),a()()(),o(17,"div",25)(18,"label"),l(19,"Description"),a(),o(20,"textarea",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.description,r)||(s.currentRule.description=r),f(r)}),a()(),o(21,"div",24)(22,"div",25)(23,"label"),l(24,"Tax Type *"),a(),o(25,"select",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.taxType,r)||(s.currentRule.taxType=r),f(r)}),b(26,O2e,2,2,"option",29),a()(),o(27,"div",25)(28,"label"),l(29,"Rate (%) *"),a(),o(30,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.rate,r)||(s.currentRule.rate=r),f(r)}),a()()(),o(31,"div",24)(32,"div",25)(33,"label"),l(34,"State Code"),a(),o(35,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.stateCode,r)||(s.currentRule.stateCode=r),f(r)}),a()(),o(36,"div",25)(37,"label"),l(38,"Max Income"),a(),o(39,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.maxIncome,r)||(s.currentRule.maxIncome=r),f(r)}),a()()(),o(40,"div",24)(41,"div",25)(42,"label"),l(43,"Calculation Basis"),a(),o(44,"select",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.calculationBasis,r)||(s.currentRule.calculationBasis=r),f(r)}),b(45,T2e,2,2,"option",29),a()(),o(46,"div",25)(47,"label"),l(48,"Tax Year"),a(),o(49,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.taxYear,r)||(s.currentRule.taxYear=r),f(r)}),a()()(),o(50,"div",33)(51,"div",34)(52,"label")(53,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.employeeContribution,r)||(s.currentRule.employeeContribution=r),f(r)}),a(),l(54," Employee Contribution"),a()(),o(55,"div",34)(56,"label")(57,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.employerContribution,r)||(s.currentRule.employerContribution=r),f(r)}),a(),l(58," Employer Contribution"),a()(),o(59,"div",34)(60,"label")(61,"input",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.isActive,r)||(s.currentRule.isActive=r),f(r)}),a(),l(62," Active"),a()()()(),o(63,"div",36)(64,"button",37),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(65,"Cancel"),a(),o(66,"button",2),x("click",function(){g(e);let r=p();return f(r.saveRule())}),l(67),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"Add"," Tax Rule"),c(8),M("ngModel",e.currentRule.code),c(4),M("ngModel",e.currentRule.name),c(4),M("ngModel",e.currentRule.description),c(5),M("ngModel",e.currentRule.taxType),c(),m("ngForOf",e.taxTypes),c(4),M("ngModel",e.currentRule.rate),c(5),M("ngModel",e.currentRule.stateCode),c(4),M("ngModel",e.currentRule.maxIncome),c(5),M("ngModel",e.currentRule.calculationBasis),c(),m("ngForOf",e.calculationBasis),c(4),M("ngModel",e.currentRule.taxYear),c(4),M("ngModel",e.currentRule.employeeContribution),c(4),M("ngModel",e.currentRule.employerContribution),c(4),M("ngModel",e.currentRule.isActive),c(6),_(e.isEditing?"Update":"Create")}}var k2=class n{constructor(t){this.payrollService=t}rules=[];showModal=!1;isEditing=!1;currentRule=this.getEmptyRule();taxTypes=["FEDERAL","STATE","LOCAL","SOCIAL_SECURITY","MEDICARE","DISABILITY"];calculationBasis=["GROSS","TAXABLE_INCOME","FIXED"];ngOnInit(){this.loadRules()}loadRules(){this.payrollService.getAllTaxRules().subscribe({next:t=>this.rules=t,error:t=>console.error("Error loading tax rules:",t)})}getEmptyRule(){return{code:"",name:"",description:"",taxType:"FEDERAL",rate:0,calculationBasis:"TAXABLE_INCOME",employeeContribution:!0,employerContribution:!1,taxYear:new Date().getFullYear(),isActive:!0}}openCreateModal(){this.isEditing=!1,this.currentRule=this.getEmptyRule(),this.showModal=!0}openEditModal(t){this.isEditing=!0,this.currentRule=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}saveRule(){this.isEditing&&this.currentRule.id?this.payrollService.updateTaxRule(this.currentRule.id,this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error updating:",t)}):this.payrollService.createTaxRule(this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error creating:",t)})}deleteRule(t){confirm("Delete this tax rule?")&&this.payrollService.deleteTaxRule(t).subscribe({next:()=>this.loadRules(),error:e=>console.error("Error deleting:",e)})}getTypeBadgeClass(t){switch(t){case"FEDERAL":return"federal";case"STATE":return"state";case"LOCAL":return"local";case"SOCIAL_SECURITY":return"ss";case"MEDICARE":return"medicare";default:return"other"}}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-tax-rules"]],decls:35,vars:3,consts:[[1,"tax-rules-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"rate"],[1,"fas"],[1,"status-badge"],[1,"actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","10",1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["rows","2",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.01",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"form-group","checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Taxation Rules"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Tax Rule "),a()(),o(7,"div",4)(8,"table",5)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Rate (%)"),a(),o(19,"th"),l(20,"Max Income"),a(),o(21,"th"),l(22,"Employee"),a(),o(23,"th"),l(24,"Employer"),a(),o(25,"th"),l(26,"Tax Year"),a(),o(27,"th"),l(28,"Status"),a(),o(29,"th"),l(30,"Actions"),a()()(),o(31,"tbody"),b(32,w2e,27,31,"tr",6)(33,E2e,3,0,"tr",7),a()()()(),b(34,k2e,68,16,"div",8)),e&2&&(c(32),m("ngForOf",i.rules),c(),m("ngIf",i.rules.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,cn,Ee,Rt,yn],styles:[".tax-rules-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{font-weight:600;color:teal}.data-table[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{color:#28a745}.data-table[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{color:#dc3545}.data-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px}.data-table[_ngcontent-%COMP%]   .badge.federal[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.data-table[_ngcontent-%COMP%]   .badge.state[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.data-table[_ngcontent-%COMP%]   .badge.local[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.data-table[_ngcontent-%COMP%]   .badge.ss[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.data-table[_ngcontent-%COMP%]   .badge.medicare[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.data-table[_ngcontent-%COMP%]   .badge.other[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px}.data-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.data-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:550px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};function I2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",9),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),Le(14,"number"),a(),o(15,"td"),l(16),a(),o(17,"td")(18,"span",10),l(19),a()(),o(20,"td")(21,"span",11),l(22),a()(),o(23,"td",12)(24,"button",13),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openEditModal(r))}),y(25,"i",14),a(),o(26,"button",15),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteRule(r.id))}),y(27,"i",16),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.code),c(2),_(e.name),c(3),_(e.ruleType),c(2),D("",e.employeeRate,"%"),c(2),D("",e.employerRate,"%"),c(2),_(e.wageBase?rt(14,17,e.wageBase,"1.0-0"):"-"),c(3),_(e.applicableYear),c(2),ie("yes",e.isMandatory)("no",!e.isMandatory),c(),D(" ",e.isMandatory?"Yes":"No"," "),c(2),ie("active",e.isActive)("inactive",!e.isActive),c(),D(" ",e.isActive?"Active":"Inactive"," ")}}function D2e(n,t){n&1&&(o(0,"tr")(1,"td",17),l(2,"No statutory rules found"),a()())}function A2e(n,t){if(n&1&&(o(0,"option",36),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function R2e(n,t){if(n&1&&(o(0,"option",36),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function F2e(n,t){if(n&1){let e=F();o(0,"div",18)(1,"div",19),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",20)(3,"h3"),l(4),a(),o(5,"button",21),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),l(6,"\xD7"),a()(),o(7,"div",22)(8,"div",23)(9,"div",24)(10,"label"),l(11,"Code *"),a(),o(12,"input",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.code,r)||(s.currentRule.code=r),f(r)}),a()(),o(13,"div",24)(14,"label"),l(15,"Name *"),a(),o(16,"input",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.name,r)||(s.currentRule.name=r),f(r)}),a()()(),o(17,"div",24)(18,"label"),l(19,"Description"),a(),o(20,"textarea",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.description,r)||(s.currentRule.description=r),f(r)}),a()(),o(21,"div",23)(22,"div",24)(23,"label"),l(24,"Rule Type *"),a(),o(25,"select",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.ruleType,r)||(s.currentRule.ruleType=r),f(r)}),b(26,A2e,2,2,"option",28),a()(),o(27,"div",24)(28,"label"),l(29,"Frequency"),a(),o(30,"select",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.frequency,r)||(s.currentRule.frequency=r),f(r)}),b(31,R2e,2,2,"option",28),a()()(),o(32,"div",23)(33,"div",24)(34,"label"),l(35,"Employee Rate (%)"),a(),o(36,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.employeeRate,r)||(s.currentRule.employeeRate=r),f(r)}),a()(),o(37,"div",24)(38,"label"),l(39,"Employer Rate (%)"),a(),o(40,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.employerRate,r)||(s.currentRule.employerRate=r),f(r)}),a()()(),o(41,"div",23)(42,"div",24)(43,"label"),l(44,"Wage Base"),a(),o(45,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.wageBase,r)||(s.currentRule.wageBase=r),f(r)}),a()(),o(46,"div",24)(47,"label"),l(48,"Applicable Year"),a(),o(49,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.applicableYear,r)||(s.currentRule.applicableYear=r),f(r)}),a()()(),o(50,"div",31)(51,"div",32)(52,"label")(53,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.isMandatory,r)||(s.currentRule.isMandatory=r),f(r)}),a(),l(54," Mandatory"),a()(),o(55,"div",32)(56,"label")(57,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.currentRule.isActive,r)||(s.currentRule.isActive=r),f(r)}),a(),l(58," Active"),a()()()(),o(59,"div",34)(60,"button",35),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(61,"Cancel"),a(),o(62,"button",2),x("click",function(){g(e);let r=p();return f(r.saveRule())}),l(63),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"Add"," Statutory Rule"),c(8),M("ngModel",e.currentRule.code),c(4),M("ngModel",e.currentRule.name),c(4),M("ngModel",e.currentRule.description),c(5),M("ngModel",e.currentRule.ruleType),c(),m("ngForOf",e.ruleTypes),c(4),M("ngModel",e.currentRule.frequency),c(),m("ngForOf",e.frequencies),c(5),M("ngModel",e.currentRule.employeeRate),c(4),M("ngModel",e.currentRule.employerRate),c(5),M("ngModel",e.currentRule.wageBase),c(4),M("ngModel",e.currentRule.applicableYear),c(4),M("ngModel",e.currentRule.isMandatory),c(4),M("ngModel",e.currentRule.isActive),c(6),_(e.isEditing?"Update":"Create")}}var I2=class n{constructor(t){this.payrollService=t}rules=[];showModal=!1;isEditing=!1;currentRule=this.getEmptyRule();ruleTypes=["SOCIAL_SECURITY","MEDICARE","FUTA","SUTA","WORKERS_COMP","DISABILITY"];frequencies=["PER_PAYCHECK","ANNUAL"];ngOnInit(){this.loadRules()}loadRules(){this.payrollService.getAllStatutoryRules().subscribe({next:t=>this.rules=t,error:t=>console.error("Error loading statutory rules:",t)})}getEmptyRule(){return{code:"",name:"",description:"",ruleType:"SOCIAL_SECURITY",employeeRate:6.2,employerRate:6.2,frequency:"PER_PAYCHECK",applicableYear:new Date().getFullYear(),isMandatory:!0,isActive:!0}}openCreateModal(){this.isEditing=!1,this.currentRule=this.getEmptyRule(),this.showModal=!0}openEditModal(t){this.isEditing=!0,this.currentRule=me({},t),this.showModal=!0}closeModal(){this.showModal=!1}saveRule(){this.isEditing&&this.currentRule.id?this.payrollService.updateStatutoryRule(this.currentRule.id,this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error updating:",t)}):this.payrollService.createStatutoryRule(this.currentRule).subscribe({next:()=>{this.loadRules(),this.closeModal()},error:t=>console.error("Error creating:",t)})}deleteRule(t){confirm("Delete this statutory rule?")&&this.payrollService.deleteStatutoryRule(t).subscribe({next:()=>this.loadRules(),error:e=>console.error("Error deleting:",e)})}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-statutory-rules"]],decls:35,vars:3,consts:[[1,"statutory-rules-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"badge","type"],[1,"badge"],[1,"status-badge"],[1,"actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","10",1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["rows","2",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.01",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"form-row","checkboxes"],[1,"form-group","checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Statutory Rules"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Statutory Rule "),a()(),o(7,"div",4)(8,"table",5)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Employee Rate"),a(),o(19,"th"),l(20,"Employer Rate"),a(),o(21,"th"),l(22,"Wage Base"),a(),o(23,"th"),l(24,"Year"),a(),o(25,"th"),l(26,"Mandatory"),a(),o(27,"th"),l(28,"Status"),a(),o(29,"th"),l(30,"Actions"),a()()(),o(31,"tbody"),b(32,I2e,28,20,"tr",6)(33,D2e,3,0,"tr",7),a()()()(),b(34,F2e,64,15,"div",8)),e&2&&(c(32),m("ngForOf",i.rules),c(),m("ngIf",i.rules.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,cn,Ee,Rt,yn],styles:[".statutory-rules-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px}.data-table[_ngcontent-%COMP%]   .badge.type[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.data-table[_ngcontent-%COMP%]   .badge.yes[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .badge.no[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px}.data-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.data-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:550px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-row.checkboxes[_ngcontent-%COMP%]{display:flex;gap:24px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};var N2e=(n,t,e)=>({approved:n,processed:t,released:e});function L2e(n,t){if(n&1&&(o(0,"div",19),l(1),a()),n&2){let e=p();m("ngClass",e.messageType),c(),D(" ",e.message," ")}}function V2e(n,t){n&1&&(o(0,"div",45),y(1,"i",46),l(2," Generating payroll from approved attendance... "),a())}function B2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td",51),l(4),a(),o(5,"td",52),l(6),a(),o(7,"td",52),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",53),l(12),a(),o(13,"td",53),l(14),a(),o(15,"td",54),l(16),a(),o(17,"td")(18,"span",55),l(19),a()(),o(20,"td",56)(21,"button",57),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.viewTimesheet(r))}),y(22,"i",58),l(23," View "),a(),o(24,"button",59),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.downloadTimesheetPDF(r))}),y(25,"i",60),l(26," PDF "),a()()()}if(n&2){let e=t.$implicit,i=t.index,r=p(3);ie("processed-row",r.isEmployeeAlreadyProcessed(e.employeeId)),c(2),_(i+1),c(2),_(e.employeeCode),c(2),_(e.firstName),c(2),_(e.lastName),c(2),_(e.department),c(2),_(e.totalRegularHours.toFixed(1)),c(2),_(e.totalOvertimeHours.toFixed(1)),c(2),_(e.totalHours.toFixed(1)),c(2),m("ngClass",Ba(12,N2e,!r.isEmployeeAlreadyProcessed(e.employeeId),r.getEmployeePayrollStatus(e.employeeId)==="Processed",r.getEmployeePayrollStatus(e.employeeId)==="Released")),c(),D(" ",r.isEmployeeAlreadyProcessed(e.employeeId)?r.getEmployeePayrollStatus(e.employeeId):e.status," ")}}function U2e(n,t){n&1&&(o(0,"tr")(1,"td",61),y(2,"i",36),l(3,' No payroll records generated yet. Click "Generate Payroll" to create from approved attendance. '),a()())}function j2e(n,t){if(n&1&&(o(0,"div",47)(1,"table",48)(2,"thead")(3,"tr")(4,"th"),l(5,"#"),a(),o(6,"th"),l(7,"EMP ID"),a(),o(8,"th"),l(9,"FIRST NAME"),a(),o(10,"th"),l(11,"LAST NAME"),a(),o(12,"th"),l(13,"DEPARTMENT"),a(),o(14,"th"),l(15,"REG HOURS"),a(),o(16,"th"),l(17,"OT HOURS"),a(),o(18,"th"),l(19,"TOTAL HOURS"),a(),o(20,"th"),l(21,"STATUS"),a(),o(22,"th"),l(23,"ACTION"),a()()(),o(24,"tbody"),b(25,B2e,27,16,"tr",49)(26,U2e,4,0,"tr",50),a()()()),n&2){let e=p(2);c(25),m("ngForOf",e.generatedTimesheets),c(),m("ngIf",e.generatedTimesheets.length===0&&!e.generating)}}function W2e(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"div",22)(3,"h3"),l(4,"Step 1: Generate Payroll"),a(),o(5,"p",23),l(6),a()(),o(7,"div",24)(8,"div",25)(9,"label"),l(10,"Pay Period Type"),a(),o(11,"select",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPayPeriodType,r)||(s.selectedPayPeriodType=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onPayPeriodTypeChange())}),o(12,"option",27),l(13,"Monthly"),a(),o(14,"option",28),l(15,"Weekly"),a(),o(16,"option",29),l(17,"Bi-Weekly"),a(),o(18,"option",30),l(19,"Semi-Monthly"),a()()(),o(20,"div",25)(21,"label"),l(22,"Period Start"),a(),o(23,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.generateStartDate,r)||(s.generateStartDate=r),f(r)}),a()(),o(24,"div",25)(25,"label"),l(26,"Period End"),a(),o(27,"input",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.generateEndDate,r)||(s.generateEndDate=r),f(r)}),a()(),o(28,"div",32)(29,"button",33),x("click",function(){g(e);let r=p();return f(r.generateTimesheetsForPeriod())}),y(30,"i",34),l(31),a()()(),o(32,"div",35)(33,"h4"),y(34,"i",36),l(35," Generated Payroll Records"),a()(),b(36,V2e,3,0,"div",37)(37,j2e,27,2,"div",38),o(38,"div",39)(39,"div",40)(40,"span",41),l(41),a()(),o(42,"div",42)(43,"button",43),x("click",function(){g(e);let r=p();return f(r.goToStep(1))}),l(44," Next: Calculate Payroll "),y(45,"i",44),a()()()()()}if(n&2){let e=p();c(6),En("Period: ",e.generateStartDate," - ",e.generateEndDate," (",e.getPayPeriodTypeLabel(),")"),c(5),M("ngModel",e.selectedPayPeriodType),c(12),M("ngModel",e.generateStartDate),c(4),M("ngModel",e.generateEndDate),c(2),m("disabled",e.generating),c(),ie("fa-spin",e.generating),c(),D(" ",e.generating?"Generating...":"Generate Payroll"," "),c(5),m("ngIf",e.generating),c(),m("ngIf",!e.generating),c(4),D("",e.generatedTimesheets.length," payroll records generated")}}function z2e(n,t){if(n&1&&(o(0,"div",74)(1,"div",75)(2,"span",76),l(3,"Employee ID:"),a(),o(4,"span",77),l(5),a()(),o(6,"div",75)(7,"span",76),l(8,"Name:"),a(),o(9,"span",77),l(10),a()(),o(11,"div",75)(12,"span",76),l(13,"Department:"),a(),o(14,"span",77),l(15),a()(),o(16,"div",75)(17,"span",76),l(18,"Period:"),a(),o(19,"span",77),l(20),a()()()),n&2){let e=p(2);c(5),_(e.selectedTimesheetEmployee.employeeCode),c(5),Ge("",e.selectedTimesheetEmployee.firstName," ",e.selectedTimesheetEmployee.lastName),c(5),_(e.selectedTimesheetEmployee.department),c(5),Ge("",e.generateStartDate," - ",e.generateEndDate)}}function q2e(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12,"1:00"),a(),o(13,"td",53),l(14),a(),o(15,"td",53),l(16),a(),o(17,"td",54),l(18),a(),o(19,"td")(20,"span",78),l(21),a()()()),n&2){let e=t.$implicit;c(2),_(e.sno),c(2),_(e.date),c(2),_(e.day),c(2),_((e.clockIn==null?null:e.clockIn.substring(0,5))||"-"),c(2),_((e.clockOut==null?null:e.clockOut.substring(0,5))||"-"),c(4),_(e.regHours.toFixed(1)),c(2),_(e.otHours.toFixed(1)),c(2),_(e.totalHours.toFixed(1)),c(3),_(e.status)}}function H2e(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",79)(2,"td",80)(3,"strong"),l(4,"TOTALS:"),a()(),o(5,"td",53)(6,"strong"),l(7),a()(),o(8,"td",53)(9,"strong"),l(10),a()(),o(11,"td",54)(12,"strong"),l(13),a()(),y(14,"td"),a()()),n&2){let e=p(2);c(7),_(e.selectedTimesheetEmployee.totalRegularHours.toFixed(1)),c(3),_(e.selectedTimesheetEmployee.totalOvertimeHours.toFixed(1)),c(3),_(e.selectedTimesheetEmployee.totalHours.toFixed(1))}}function G2e(n,t){if(n&1){let e=F();o(0,"button",43),x("click",function(){g(e);let r=p(2);return f(r.downloadTimesheetPDF(r.selectedTimesheetEmployee))}),y(1,"i",60),l(2," Download PDF "),a()}}function $2e(n,t){if(n&1){let e=F();o(0,"div",62)(1,"div",63),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",64)(3,"h3"),l(4,"Individual Timesheet"),a(),o(5,"button",65),x("click",function(){g(e);let r=p();return f(r.showTimesheetModal=!1)}),y(6,"i",66),a()(),o(7,"div",67),b(8,z2e,21,6,"div",68),o(9,"table",69)(10,"thead")(11,"tr")(12,"th"),l(13,"S.No"),a(),o(14,"th"),l(15,"Date"),a(),o(16,"th"),l(17,"Day"),a(),o(18,"th"),l(19,"Clock In"),a(),o(20,"th"),l(21,"Clock Out"),a(),o(22,"th"),l(23,"Lunch Hour"),a(),o(24,"th"),l(25,"Reg Hours"),a(),o(26,"th"),l(27,"OT Hours"),a(),o(28,"th"),l(29,"Total Hours"),a(),o(30,"th"),l(31,"Status"),a()()(),o(32,"tbody"),b(33,q2e,22,9,"tr",70),a(),b(34,H2e,15,3,"tfoot",50),a()(),o(35,"div",71)(36,"button",72),l(37,"Close"),a(),b(38,G2e,3,0,"button",73),a()()()}if(n&2){let e=p();c(8),m("ngIf",e.selectedTimesheetEmployee),c(25),m("ngForOf",e.individualTimesheetRows),c(),m("ngIf",e.selectedTimesheetEmployee),c(4),m("ngIf",e.selectedTimesheetEmployee)}}function Y2e(n,t){n&1&&(o(0,"div",45),y(1,"i",46),l(2," Calculating payroll... "),a())}function J2e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",90)(2,"input",91),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.toggleStep3RowSelection(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td",51),l(6),a(),o(7,"td",52),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td",95),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td"),l(20),a(),o(21,"td"),l(22),a(),o(23,"td",96),l(24),a(),o(25,"td",95),l(26),a(),o(27,"td")(28,"span",55),l(29),a()()()}if(n&2){let e=t.$implicit,i=p(3);ie("selected",e.selected),c(2),m("checked",e.selected),c(2),_(e.sno),c(2),_(e.empId),c(2),_(e.name),c(2),_(e.type),c(2),D("",e.hours.toFixed(2),"h"),c(2),_(i.formatCurrency(e.gross)),c(2),_(i.formatCurrency(e.federal)),c(2),_(i.formatCurrency(e.state)),c(2),_(i.formatCurrency(e.socSec)),c(2),_(i.formatCurrency(e.medicare)),c(2),_(i.formatCurrency(e.totalTax)),c(2),_(i.formatCurrency(e.netPay)),c(2),m("ngClass",e.status==="Calculated"?"approved":"pending"),c(),D(" ",e.status," ")}}function K2e(n,t){n&1&&(o(0,"tr")(1,"td",97),y(2,"i",98),l(3," No payroll data. Generate timesheets first. "),a()())}function Q2e(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",99),y(2,"td"),o(3,"td",100)(4,"strong"),l(5,"TOTAL"),a()(),o(6,"td")(7,"strong"),l(8),a()(),o(9,"td",95)(10,"strong"),l(11),a()(),o(12,"td")(13,"strong"),l(14),a()(),o(15,"td")(16,"strong"),l(17),a()(),o(18,"td")(19,"strong"),l(20),a()(),o(21,"td")(22,"strong"),l(23),a()(),o(24,"td",96)(25,"strong"),l(26),a()(),o(27,"td",95)(28,"strong"),l(29),a()(),y(30,"td"),a()()),n&2){let e=p(3);c(8),D("",e.step3TotalHours.toFixed(2),"h"),c(3),_(e.formatCurrency(e.step3TotalGross)),c(3),_(e.formatCurrency(0)),c(3),_(e.formatCurrency(0)),c(3),_(e.formatCurrency(0)),c(3),_(e.formatCurrency(0)),c(3),_(e.formatCurrency(e.step3TotalTax)),c(3),_(e.formatCurrency(e.step3TotalNetPay))}}function X2e(n,t){if(n&1){let e=F();o(0,"div",47)(1,"table",89)(2,"thead")(3,"tr")(4,"th",90)(5,"input",91),x("change",function(){g(e);let r=p(2);return f(r.toggleAllStep3Selection())}),a()(),o(6,"th"),l(7,"S.NO"),a(),o(8,"th"),l(9,"EMP ID"),a(),o(10,"th"),l(11,"NAME"),a(),o(12,"th"),l(13,"TYPE"),a(),o(14,"th"),l(15,"HOURS"),a(),o(16,"th",92),l(17,"GROSS"),a(),o(18,"th"),l(19,"FEDERAL"),a(),o(20,"th"),l(21,"STATE"),a(),o(22,"th"),l(23,"SOC.SEC"),a(),o(24,"th"),l(25,"MEDICARE"),a(),o(26,"th",93),l(27,"TOTAL TAX"),a(),o(28,"th",92),l(29,"NET PAY"),a(),o(30,"th"),l(31,"STATUS"),a()()(),o(32,"tbody"),b(33,J2e,30,17,"tr",94)(34,K2e,4,0,"tr",50),a(),b(35,Q2e,31,8,"tfoot",50),a()()}if(n&2){let e=p(2);c(5),m("checked",e.allStep3Selected),c(28),m("ngForOf",e.payrollCalculationRows),c(),m("ngIf",e.payrollCalculationRows.length===0&&!e.payrollCalcLoading),c(),m("ngIf",e.payrollCalculationRows.length>0)}}function Z2e(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"div",81)(3,"div",82)(4,"span",83),l(5,"Total Gross Pay"),a(),o(6,"span",84),l(7),a()(),o(8,"div",85)(9,"span",83),l(10,"Total Taxes"),a(),o(11,"span",84),l(12),a()(),o(13,"div",86)(14,"span",83),l(15,"Total Net Pay"),a(),o(16,"span",84),l(17),a()(),o(18,"div",87)(19,"span",83),l(20,"Employees"),a(),o(21,"span",84),l(22),a()()(),o(23,"div",22)(24,"h3"),l(25,"Step 2: Calculate Payroll"),a(),o(26,"p",23),l(27),a()(),b(28,Y2e,3,0,"div",37)(29,X2e,36,4,"div",38),o(30,"div",39)(31,"div",40)(32,"span",41),l(33),a()(),o(34,"div",42)(35,"button",88),x("click",function(){g(e);let r=p();return f(r.goToStep(0))}),l(36," Back "),a(),o(37,"button",43),x("click",function(){g(e);let r=p();return f(r.goToStep(2))}),l(38," Next: Process Payroll "),y(39,"i",44),a()()()()()}if(n&2){let e=p();c(7),_(e.formatCurrency(e.step3TotalGross)),c(5),_(e.formatCurrency(e.step3TotalTax)),c(5),_(e.formatCurrency(e.step3TotalNetPay)),c(5),_(e.step3EmployeeCount),c(5),D("Period: ",e.generateStartDate&&e.generateEndDate?e.generateStartDate+" - "+e.generateEndDate:"-"),c(),m("ngIf",e.payrollCalcLoading),c(),m("ngIf",!e.payrollCalcLoading),c(4),D("",e.getSelectedStep3Count()," employee(s) selected")}}function eMe(n,t){n&1&&(o(0,"span",113),l(1,"Pay date is required to process payroll"),a())}function tMe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td",51),l(4),a(),o(5,"td",52),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",95),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td"),l(20),a(),o(21,"td",96),l(22),a(),o(23,"td",95),l(24),a(),o(25,"td")(26,"span",114),l(27),a()(),o(28,"td")(29,"div",115)(30,"button",116),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.releasePayroll(r))}),y(31,"i",112),l(32," Release "),a(),o(33,"button",117),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.holdPayroll(r))}),y(34,"i",118),l(35," Hold "),a()()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.sno),c(2),_(e.empId),c(2),_(e.name),c(2),_(e.type),c(2),D("",e.hours.toFixed(2),"h"),c(2),_(i.formatCurrency(e.gross)),c(2),_(i.formatCurrency(e.federal)),c(2),_(i.formatCurrency(e.state)),c(2),_(i.formatCurrency(e.socSec)),c(2),_(i.formatCurrency(e.medicare)),c(2),_(i.formatCurrency(e.totalTax)),c(2),_(i.formatCurrency(e.netPay)),c(3),_(e.status)}}function nMe(n,t){n&1&&(o(0,"tr")(1,"td",97),y(2,"i",112),l(3," No processed payroll records. Process employees from Step 2. "),a()())}function iMe(n,t){if(n&1){let e=F();o(0,"button",122),x("click",function(){g(e);let r=p(3);return f(r.releaseAllPayroll())}),y(1,"i",123),l(2," Release All "),a()}}function rMe(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",99)(2,"td",119)(3,"strong"),l(4,"TOTAL"),a()(),o(5,"td",95)(6,"strong"),l(7),a()(),y(8,"td",120),o(9,"td",95)(10,"strong"),l(11),a()(),o(12,"td"),b(13,iMe,3,0,"button",121),a()()()),n&2){let e=p(2);c(7),_(e.formatCurrency(e.step4TotalProcessedGross)),c(4),_(e.formatCurrency(e.step4TotalProcessedNet)),c(2),m("ngIf",e.processedPayrollRows.length>0)}}function oMe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td",51),l(4),a(),o(5,"td",52),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td",95),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td"),l(18),a(),o(19,"td"),l(20),a(),o(21,"td",96),l(22),a(),o(23,"td",95),l(24),a(),o(25,"td")(26,"span",124),l(27),a()(),o(28,"td")(29,"button",125),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.releaseFromHold(r))}),y(30,"i",126),l(31," Release "),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.sno),c(2),_(e.empId),c(2),_(e.name),c(2),_(e.type),c(2),D("",e.hours.toFixed(2),"h"),c(2),_(i.formatCurrency(e.gross)),c(2),_(i.formatCurrency(e.federal)),c(2),_(i.formatCurrency(e.state)),c(2),_(i.formatCurrency(e.socSec)),c(2),_(i.formatCurrency(e.medicare)),c(2),_(i.formatCurrency(e.totalTax)),c(2),_(i.formatCurrency(e.netPay)),c(3),_(e.status)}}function aMe(n,t){n&1&&(o(0,"tr")(1,"td",97),y(2,"i",127),l(3," No payroll records on hold "),a()())}function sMe(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",99)(2,"td",119)(3,"strong"),l(4,"TOTAL"),a()(),o(5,"td",95)(6,"strong"),l(7),a()(),y(8,"td",120),o(9,"td",95)(10,"strong"),l(11),a()(),y(12,"td",128),a()()),n&2){let e=p(2);c(7),_(e.formatCurrency(e.step4TotalHoldGross)),c(4),_(e.formatCurrency(e.step4TotalHoldNet))}}function lMe(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"div",22)(3,"h3"),l(4,"Step 3: Process Payroll"),a(),o(5,"p",23),l(6,"Review and process payroll with pay date"),a()(),o(7,"div",101)(8,"div",102)(9,"label"),l(10,"Pay Date "),o(11,"span",103),l(12,"*"),a()(),o(13,"input",104),S("ngModelChange",function(r){g(e);let s=p();return P(s.processPayDate,r)||(s.processPayDate=r),f(r)}),a(),b(14,eMe,2,0,"span",105),a()(),o(15,"div",81)(16,"div",82)(17,"span",83),l(18,"Processed Gross"),a(),o(19,"span",84),l(20),a()(),o(21,"div",86)(22,"span",83),l(23,"Processed Net"),a(),o(24,"span",84),l(25),a()(),o(26,"div",106)(27,"span",83),l(28,"Hold Gross"),a(),o(29,"span",84),l(30),a()(),o(31,"div",87)(32,"span",83),l(33,"Employees"),a(),o(34,"span",84),l(35),a()()(),o(36,"div",35)(37,"h4"),y(38,"i",107),l(39," Processed Payroll"),a()(),o(40,"div",47)(41,"table",108)(42,"thead")(43,"tr")(44,"th"),l(45,"S.NO"),a(),o(46,"th"),l(47,"EMP ID"),a(),o(48,"th"),l(49,"NAME"),a(),o(50,"th"),l(51,"TYPE"),a(),o(52,"th"),l(53,"HOURS"),a(),o(54,"th",92),l(55,"GROSS"),a(),o(56,"th"),l(57,"FEDERAL"),a(),o(58,"th"),l(59,"STATE"),a(),o(60,"th"),l(61,"SOC.SEC"),a(),o(62,"th"),l(63,"MEDICARE"),a(),o(64,"th",93),l(65,"TOTAL TAX"),a(),o(66,"th",92),l(67,"NET PAY"),a(),o(68,"th"),l(69,"STATUS"),a(),o(70,"th"),l(71,"ACTION"),a()()(),o(72,"tbody"),b(73,tMe,36,13,"tr",70)(74,nMe,4,0,"tr",50),a(),b(75,rMe,14,3,"tfoot",50),a()(),o(76,"div",109)(77,"h4"),y(78,"i",110),l(79," Hold Payroll"),a()(),o(80,"div",47)(81,"table",111)(82,"thead")(83,"tr")(84,"th"),l(85,"S.NO"),a(),o(86,"th"),l(87,"EMP ID"),a(),o(88,"th"),l(89,"NAME"),a(),o(90,"th"),l(91,"TYPE"),a(),o(92,"th"),l(93,"HOURS"),a(),o(94,"th",92),l(95,"GROSS"),a(),o(96,"th"),l(97,"FEDERAL"),a(),o(98,"th"),l(99,"STATE"),a(),o(100,"th"),l(101,"SOC.SEC"),a(),o(102,"th"),l(103,"MEDICARE"),a(),o(104,"th",93),l(105,"TOTAL TAX"),a(),o(106,"th",92),l(107,"NET PAY"),a(),o(108,"th"),l(109,"STATUS"),a(),o(110,"th"),l(111,"ACTION"),a()()(),o(112,"tbody"),b(113,oMe,32,13,"tr",70)(114,aMe,4,0,"tr",50),a(),b(115,sMe,13,2,"tfoot",50),a()(),o(116,"div",39)(117,"div",40)(118,"span",41),l(119),a()(),o(120,"div",42)(121,"button",88),x("click",function(){g(e);let r=p();return f(r.goToStep(1))}),l(122," Back "),a(),o(123,"button",33),x("click",function(){g(e);let r=p();return f(r.processSelectedPayrollWithDate())}),y(124,"i",112),l(125," Process Payroll "),a(),o(126,"button",43),x("click",function(){g(e);let r=p();return f(r.goToStep(3))}),l(127," View Payroll History "),y(128,"i",44),a()()()()()}if(n&2){let e=p();c(13),ie("error-border",e.showProcessPayDateError),M("ngModel",e.processPayDate),c(),m("ngIf",e.showProcessPayDateError),c(6),_(e.formatCurrency(e.step4TotalProcessedGross)),c(5),_(e.formatCurrency(e.step4TotalProcessedNet)),c(5),_(e.formatCurrency(e.step4TotalHoldGross)),c(5),_(e.processedPayrollRows.length+e.holdPayrollRows.length),c(38),m("ngForOf",e.processedPayrollRows),c(),m("ngIf",e.processedPayrollRows.length===0),c(),m("ngIf",e.processedPayrollRows.length>0),c(38),m("ngForOf",e.holdPayrollRows),c(),m("ngIf",e.holdPayrollRows.length===0),c(),m("ngIf",e.holdPayrollRows.length>0),c(4),D("",e.getSelectedStep3Count()," employee(s) selected for processing"),c(4),m("disabled",e.getSelectedStep3Count()===0)}}function cMe(n,t){if(n&1&&(o(0,"tr")(1,"td",51),l(2),a(),o(3,"td",52),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",143),l(10),a(),o(11,"td",144),l(12),a()()),n&2){let e=t.$implicit,i=p(3);c(2),_(e.empId),c(2),_(e.name),c(2),_(i.formatCurrency(e.basic)),c(2),_(i.formatCurrency(e.gross)),c(2),_(i.formatCurrency(e.taxes)),c(2),_(i.formatCurrency(e.netAmount))}}function dMe(n,t){if(n&1&&(o(0,"div",140)(1,"h4"),y(2,"i",141),l(3),a(),o(4,"table",142)(5,"thead")(6,"tr")(7,"th"),l(8,"EMP ID"),a(),o(9,"th"),l(10,"NAME"),a(),o(11,"th"),l(12,"Basic"),a(),o(13,"th"),l(14,"Gross"),a(),o(15,"th"),l(16,"Taxes"),a(),o(17,"th"),l(18,"Net Amount"),a()()(),o(19,"tbody"),b(20,cMe,13,6,"tr",70),a()()()),n&2){let e=p(2);c(3),D(" Salaried Employees (",e.processedSalariedEmployees.length,")"),c(17),m("ngForOf",e.processedSalariedEmployees)}}function pMe(n,t){if(n&1&&(o(0,"tr")(1,"td",51),l(2),a(),o(3,"td",52),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",143),l(10),a(),o(11,"td",144),l(12),a()()),n&2){let e=t.$implicit,i=p(3);c(2),_(e.empId),c(2),_(e.name),c(2),_(i.formatCurrency(e.basic)),c(2),_(i.formatCurrency(e.gross)),c(2),_(i.formatCurrency(e.taxes)),c(2),_(i.formatCurrency(e.netAmount))}}function mMe(n,t){if(n&1&&(o(0,"div",140)(1,"h4"),y(2,"i",145),l(3),a(),o(4,"table",142)(5,"thead")(6,"tr")(7,"th"),l(8,"EMP ID"),a(),o(9,"th"),l(10,"NAME"),a(),o(11,"th"),l(12,"Basic"),a(),o(13,"th"),l(14,"Gross"),a(),o(15,"th"),l(16,"Taxes"),a(),o(17,"th"),l(18,"Net Amount"),a()()(),o(19,"tbody"),b(20,pMe,13,6,"tr",70),a()()()),n&2){let e=p(2);c(3),D(" Hourly Employees (",e.processedHourlyEmployees.length,")"),c(17),m("ngForOf",e.processedHourlyEmployees)}}function uMe(n,t){if(n&1){let e=F();o(0,"div",129)(1,"div",130)(2,"div",131)(3,"h3"),y(4,"i",107),l(5," Payroll Processed Successfully"),a(),o(6,"button",132),x("click",function(){g(e);let r=p();return f(r.closeSummary())}),y(7,"i",66),l(8," Close "),a()(),o(9,"div",133)(10,"div",134)(11,"span",135),l(12),a(),o(13,"span",136),l(14,"Employees Processed"),a()(),o(15,"div",134)(16,"span",135),l(17),a(),o(18,"span",136),l(19,"Net Total Amount"),a()()(),b(20,dMe,21,2,"div",137)(21,mMe,21,2,"div",137),o(22,"div",138)(23,"span"),l(24,"Grand Total Net Amount:"),a(),o(25,"span",139),l(26),a()()()()}if(n&2){let e=p();c(12),_(e.processedSalariedEmployees.length+e.processedHourlyEmployees.length),c(5),_(e.formatCurrency(e.processedNetTotal)),c(3),m("ngIf",e.processedSalariedEmployees.length>0),c(),m("ngIf",e.processedHourlyEmployees.length>0),c(5),_(e.formatCurrency(e.processedNetTotal))}}var D2=class n{constructor(t,e,i,r){this.payrollService=t;this.attendanceService=e;this.employeeService=i;this.cdr=r}currentStep=0;loading=!1;message="";messageType="";dataLoaded=!1;employees=[];approvedAttendanceRecords=[];timesheets=[];filteredTimesheets=[];payFrequencies=[];approvedStartDate="";approvedEndDate="";totalApprovedEmployees=0;totalApprovedHours=0;totalApprovedOT=0;totalApprovedRecords=0;selectedPayPeriodType="MONTHLY";generateStartDate="";generateEndDate="";generating=!1;allTimesheetEmployeesSelected=!1;selectedTimesheetEmployeeIds=[];timesheetEmployees=[];generatedTimesheets=[];timesheetsGenerated=!1;showTimesheetModal=!1;selectedTimesheetEmployee=null;individualTimesheetRows=[];payrollCalculationRows=[];payrollCalcLoading=!1;step3TotalGross=0;step3TotalTax=0;step3TotalNetPay=0;step3TotalHours=0;step3EmployeeCount=0;payableEmployees=[];allCalcEmployeesSelected=!1;selectedCalcEmployeeIds=[];totalGrossPay=0;totalNetPay=0;employeeSalaryMap=new Map;payablesLoading=!1;allStep3Selected=!1;processPayDate="";showProcessPayDateError=!1;processedPayrollRows=[];holdPayrollRows=[];step4TotalProcessedGross=0;step4TotalProcessedNet=0;step4TotalHoldGross=0;step4TotalHoldNet=0;employeesToProcess=0;showPayrollSummary=!1;processedSalariedEmployees=[];processedHourlyEmployees=[];processedTotal=0;processedNetTotal=0;ngOnInit(){this.setDefaultDates(),this.loadEmployees(),this.loadPayFrequencies()}setDefaultDates(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);this.approvedStartDate=e.toISOString().split("T")[0],this.approvedEndDate=i.toISOString().split("T")[0],this.generateStartDate=e.toISOString().split("T")[0],this.generateEndDate=i.toISOString().split("T")[0]}goToStep(t){if(t===3){window.location.href="/app/payroll/history";return}this.currentStep=t,t===0?this.loadApprovedAttendance():t===1?this.autoCalculatePayroll():t===2&&(!this.processPayDate&&this.generateEndDate&&(this.processPayDate=this.generateEndDate),this.showProcessPayDateError=!1),this.cdr.markForCheck()}processSelectedPayrollWithDate(){if(!this.processPayDate){this.showProcessPayDateError=!0,this.showMessage("Pay date is required to process payroll","error"),this.cdr.markForCheck();return}if(this.showProcessPayDateError=!1,this.payrollCalculationRows.filter(e=>e.selected).length===0){this.showMessage("Please select employees to process","error");return}this.processSelectedPayroll()}autoCalculatePayroll(){if(this.payrollCalcLoading=!0,this.payrollCalculationRows=[],this.cdr.markForCheck(),this.generatedTimesheets.length===0){this.payrollCalcLoading=!1,this.step3TotalGross=0,this.step3TotalTax=0,this.step3TotalNetPay=0,this.step3TotalHours=0,this.step3EmployeeCount=0,this.cdr.markForCheck();return}let t=this.payrollService.getProcessedPayrollRecords(),e=new Set(t.filter(u=>u.periodStart===this.generateStartDate&&(u.status==="Processed"||u.status==="Released")).map(u=>u.employeeId)),i=this.generatedTimesheets.filter(u=>!e.has(u.employeeId));if(i.length===0){this.payrollCalcLoading=!1,this.step3TotalGross=0,this.step3TotalTax=0,this.step3TotalNetPay=0,this.step3TotalHours=0,this.step3EmployeeCount=0,this.showMessage("All employees for this period have already been processed","info"),this.cdr.markForCheck();return}let r=0,s=i.length,d=[];i.forEach((u,h)=>{this.employeeService.getCurrentSalary(u.employeeId).subscribe({next:v=>{let C=v?.hourlyRate||0,O=u.totalHours,T=O*C,w=0,A=0,I=0,L=0,B=0,q=T-B;d.push({sno:h+1,empId:u.employeeCode,name:`${u.firstName} ${u.lastName}`.trim(),type:"Hourly",hours:O,hourlyRate:C,gross:T,federal:w,state:A,socSec:I,medicare:L,totalTax:B,netPay:q,status:"Calculated",employeeId:u.employeeId,selected:!1}),r++,r===s&&this.finalizePayrollCalculation(d)},error:()=>{let v=u.totalHours;d.push({sno:h+1,empId:u.employeeCode,name:`${u.firstName} ${u.lastName}`.trim(),type:"Hourly",hours:v,hourlyRate:0,gross:0,federal:0,state:0,socSec:0,medicare:0,totalTax:0,netPay:0,status:"No Rate",employeeId:u.employeeId,selected:!1}),r++,r===s&&this.finalizePayrollCalculation(d)}})})}finalizePayrollCalculation(t){t.sort((s,d)=>s.empId.localeCompare(d.empId)),t.forEach((s,d)=>s.sno=d+1);let e=new Set(this.processedPayrollRows.map(s=>s.employeeId)),i=new Set(this.holdPayrollRows.map(s=>s.employeeId)),r=t.filter(s=>!e.has(s.employeeId)&&!i.has(s.employeeId));r.forEach((s,d)=>s.sno=d+1),this.payrollCalculationRows=r,this.step3TotalHours=r.reduce((s,d)=>s+d.hours,0),this.step3TotalGross=r.reduce((s,d)=>s+d.gross,0),this.step3TotalTax=r.reduce((s,d)=>s+d.totalTax,0),this.step3TotalNetPay=r.reduce((s,d)=>s+d.netPay,0),this.step3EmployeeCount=r.length,this.totalGrossPay=this.step3TotalGross,this.totalNetPay=this.step3TotalNetPay,this.payrollCalcLoading=!1,this.cdr.markForCheck()}toggleAllStep3Selection(){this.allStep3Selected=!this.allStep3Selected,this.payrollCalculationRows.forEach(t=>t.selected=this.allStep3Selected),this.cdr.markForCheck()}toggleStep3RowSelection(t){t.selected=!t.selected,this.allStep3Selected=this.payrollCalculationRows.every(e=>e.selected),this.cdr.markForCheck()}getSelectedStep3Count(){return this.payrollCalculationRows.filter(t=>t.selected).length}isEmployeeAlreadyProcessed(t){return this.payrollService.getProcessedPayrollRecords().some(i=>i.employeeId===t&&i.periodStart===this.generateStartDate&&(i.status==="Processed"||i.status==="Released"))}getEmployeePayrollStatus(t){return this.payrollService.getProcessedPayrollRecords().find(r=>r.employeeId===t&&r.periodStart===this.generateStartDate)?.status||"Pending"}processSelectedPayroll(){let t=this.payrollCalculationRows.filter(r=>r.selected);if(t.length===0){this.showMessage("Please select at least one employee to process","error");return}let e=new Date().toISOString().split("T")[0];t.forEach(r=>{r.status="Processed",r.selected=!1,this.processedPayrollRows.push(me({},r))});let i=t.map((r,s)=>{let d=this.employees.find(u=>u.id===r.employeeId);return{sno:s+1,empId:r.empId,employeeId:r.employeeId,name:r.name,project:d?.department?.name||"General",hours:r.hours,hourlyRate:r.hourlyRate,gross:r.gross,federal:r.federal,state:r.state,socSec:r.socSec,medicare:r.medicare,netPay:r.netPay,status:"Processed",periodStart:this.generateStartDate,periodEnd:this.generateEndDate,processedDate:e}});this.payrollService.addProcessedPayrollRecords(i),this.payrollCalculationRows=this.payrollCalculationRows.filter(r=>r.status!=="Processed"),this.payrollCalculationRows.forEach((r,s)=>r.sno=s+1),this.processedPayrollRows.forEach((r,s)=>r.sno=s+1),this.updateStep4Totals(),this.step3TotalHours=this.payrollCalculationRows.reduce((r,s)=>r+s.hours,0),this.step3TotalGross=this.payrollCalculationRows.reduce((r,s)=>r+s.gross,0),this.step3TotalTax=this.payrollCalculationRows.reduce((r,s)=>r+s.totalTax,0),this.step3TotalNetPay=this.payrollCalculationRows.reduce((r,s)=>r+s.netPay,0),this.step3EmployeeCount=this.payrollCalculationRows.length,this.allStep3Selected=!1,this.showMessage(`Payroll processed for ${t.length} employee(s)! Use Release to finalize.`,"success"),this.cdr.markForCheck()}releasePayroll(t){let e=this.processedPayrollRows.findIndex(i=>i.employeeId===t.employeeId);if(e>-1){let i=this.processedPayrollRows.splice(e,1)[0];i.status="Released",this.payrollService.updatePayrollRecordStatus(i.employeeId,this.generateStartDate,"Released"),this.processedPayrollRows.forEach((r,s)=>r.sno=s+1),this.updateStep4Totals(),this.showMessage(`Payroll for ${i.name} has been released to history`,"success"),this.cdr.markForCheck()}}releaseAllPayroll(){if(this.processedPayrollRows.length===0){this.showMessage("No processed payroll to release","warning");return}let t=this.processedPayrollRows.length,e=this.processedPayrollRows.map(i=>i.employeeId);this.payrollService.releasePayrollRecords(e,this.generateStartDate),this.processedPayrollRows=[],this.updateStep4Totals(),this.showMessage(`${t} payroll record(s) released to history`,"success"),this.cdr.markForCheck()}updateStep4Totals(){this.step4TotalProcessedGross=this.processedPayrollRows.reduce((t,e)=>t+e.gross,0),this.step4TotalProcessedNet=this.processedPayrollRows.reduce((t,e)=>t+e.netPay,0),this.step4TotalHoldGross=this.holdPayrollRows.reduce((t,e)=>t+e.gross,0),this.step4TotalHoldNet=this.holdPayrollRows.reduce((t,e)=>t+e.netPay,0)}holdPayroll(t){let e=this.processedPayrollRows.findIndex(i=>i.employeeId===t.employeeId);if(e>-1){let i=this.processedPayrollRows.splice(e,1)[0];i.status="Hold",this.holdPayrollRows.push(i),this.processedPayrollRows.forEach((r,s)=>r.sno=s+1),this.holdPayrollRows.forEach((r,s)=>r.sno=s+1),this.updateStep4Totals(),this.showMessage(`Payroll for ${i.name} moved to Hold`,"warning"),this.cdr.markForCheck()}}releaseFromHold(t){let e=this.holdPayrollRows.findIndex(i=>i.employeeId===t.employeeId);if(e>-1){let i=this.holdPayrollRows.splice(e,1)[0];i.status="Processed",this.processedPayrollRows.push(i),this.processedPayrollRows.forEach((r,s)=>r.sno=s+1),this.holdPayrollRows.forEach((r,s)=>r.sno=s+1),this.updateStep4Totals(),this.showMessage(`Payroll for ${i.name} released from Hold`,"success"),this.cdr.markForCheck()}}loadEmployees(){this.employeeService.getAll().subscribe({next:t=>{this.employees=t.filter(e=>e.active),this.timesheetEmployees=[...this.employees],this.loadApprovedAttendance(),this.cdr.markForCheck()},error:t=>{console.error("Error loading employees:",t),this.cdr.markForCheck()}})}loadApprovedAttendance(t=!1){this.dataLoaded&&!t||(this.loading=!0,this.approvedAttendanceRecords=[],this.cdr.markForCheck(),this.attendanceService.getByDateRange(this.approvedStartDate,this.approvedEndDate).subscribe({next:e=>{let i=e.filter(r=>r.approvalStatus==="APPROVED");this.approvedAttendanceRecords=i.map(r=>{let s=r.employee?.id||r.employeeId,d=r.employee,u=this.employees.find(v=>v.id===s),h=d||u;return{id:r.id,employeeId:s||0,employeeCode:h?.employeeCode||`EMP${s||"000"}`,employeeName:h?`${h.firstName||""} ${h.lastName||""}`.trim():"Unknown",department:h?.department?.name||"General",attendanceDate:r.attendanceDate,clockIn:r.clockIn||"-",clockOut:r.clockOut||"-",regularHours:r.regularHours||0,overtimeHours:r.overtimeHours||0,status:r.approvalStatus||"APPROVED"}}),this.calculateApprovedSummary(),this.loading=!1,this.dataLoaded=!0,this.cdr.markForCheck()},error:e=>{console.error("Error loading approved attendance:",e),this.loading=!1,this.cdr.markForCheck()}}))}calculateApprovedSummary(){let t=new Set(this.approvedAttendanceRecords.map(e=>e.employeeId));this.totalApprovedEmployees=t.size,this.totalApprovedRecords=this.approvedAttendanceRecords.length,this.totalApprovedHours=this.approvedAttendanceRecords.reduce((e,i)=>e+i.regularHours,0),this.totalApprovedOT=this.approvedAttendanceRecords.reduce((e,i)=>e+i.overtimeHours,0)}onApprovedDateChange(){this.loadApprovedAttendance(!0)}loadPayFrequencies(){this.payrollService.getPayFrequencies().subscribe({next:t=>{this.payFrequencies=t,this.cdr.markForCheck()},error:t=>console.error("Error loading pay frequencies:",t)})}onPayPeriodTypeChange(){let t=new Date;switch(this.selectedPayPeriodType){case"WEEKLY":let e=new Date(t);e.setDate(t.getDate()-t.getDay());let i=new Date(e);i.setDate(e.getDate()+6),this.generateStartDate=e.toISOString().split("T")[0],this.generateEndDate=i.toISOString().split("T")[0];break;case"BI_WEEKLY":let r=new Date(t);r.setDate(t.getDate()-13),this.generateStartDate=r.toISOString().split("T")[0],this.generateEndDate=t.toISOString().split("T")[0];break;case"SEMI_MONTHLY":t.getDate()<=15?(this.generateStartDate=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],this.generateEndDate=new Date(t.getFullYear(),t.getMonth(),15).toISOString().split("T")[0]):(this.generateStartDate=new Date(t.getFullYear(),t.getMonth(),16).toISOString().split("T")[0],this.generateEndDate=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0]);break;default:let s=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,0);this.generateStartDate=s.toISOString().split("T")[0],this.generateEndDate=d.toISOString().split("T")[0]}this.cdr.markForCheck()}toggleAllTimesheetEmployees(){this.allTimesheetEmployeesSelected=!this.allTimesheetEmployeesSelected,this.allTimesheetEmployeesSelected?this.selectedTimesheetEmployeeIds=this.timesheetEmployees.map(t=>t.id):this.selectedTimesheetEmployeeIds=[],this.cdr.markForCheck()}toggleTimesheetEmployeeSelection(t){let e=this.selectedTimesheetEmployeeIds.indexOf(t);e>-1?this.selectedTimesheetEmployeeIds.splice(e,1):this.selectedTimesheetEmployeeIds.push(t),this.allTimesheetEmployeesSelected=this.selectedTimesheetEmployeeIds.length===this.timesheetEmployees.length,this.cdr.markForCheck()}isTimesheetEmployeeSelected(t){return this.selectedTimesheetEmployeeIds.includes(t)}generateTimesheetsForPeriod(){this.generating=!0,this.generatedTimesheets=[],this.cdr.markForCheck(),this.payrollService.getPayrollRuns().subscribe({next:t=>{let e=t.filter(r=>{let s=r.status?.toUpperCase();if(!(s==="CALCULATED"||s==="APPROVED"||s==="PROCESSED"||s==="PARTIALLY_PROCESSED"||s==="FULLY_PROCESSED"||s==="COMPLETED"))return!1;let d=new Date(r.periodStartDate),u=new Date(r.periodEndDate),h=new Date(this.generateStartDate),v=new Date(this.generateEndDate);return d<=v&&u>=h});if(e.length===0){this.generateTimesheetsFromAttendance(new Set);return}let i=e.filter(r=>r.id).map(r=>this.payrollService.getPayrollRecordsByRun(r.id).pipe(ur(()=>Zt([]))));if(i.length===0){this.generateTimesheetsFromAttendance(new Set);return}fo(i).subscribe({next:r=>{let s=new Set;r.flat().forEach(d=>{d.employee?.id&&s.add(d.employee.id)}),this.generateTimesheetsFromAttendance(s)},error:()=>{this.generateTimesheetsFromAttendance(new Set)}})},error:()=>{this.generateTimesheetsFromAttendance(new Set)}})}generateTimesheetsFromAttendance(t){this.attendanceService.getByDateRange(this.generateStartDate,this.generateEndDate).subscribe({next:e=>{let i=e.filter(u=>u.approvalStatus==="APPROVED"),r=new Map;i.forEach(u=>{let h=u.employee?.id||u.employeeId||0,v=u.employee,C=this.employees.find(I=>I.id===h),O=v||C;if(h===0||t.has(h))return;r.has(h)||r.set(h,{employeeId:h,employeeCode:O?.employeeCode||`EMP${h}`,firstName:O?.firstName||"Unknown",lastName:O?.lastName||"",department:O?.department?.name||"General",totalRegularHours:0,totalOvertimeHours:0,totalHours:0,status:"Generated",records:[]});let T=r.get(h),w=u.regularHours||0,A=u.overtimeHours||0;T.totalRegularHours+=w,T.totalOvertimeHours+=A,T.totalHours+=w+A,T.records.push({id:u.id,employeeId:h,employeeCode:O?.employeeCode||`EMP${h}`,employeeName:O?`${O.firstName} ${O.lastName}`:"Unknown",department:O?.department?.name||"General",attendanceDate:u.attendanceDate,clockIn:u.clockIn||"-",clockOut:u.clockOut||"-",regularHours:w,overtimeHours:A,status:"Approved"})}),this.generatedTimesheets=Array.from(r.values()),this.generatedTimesheets.sort((u,h)=>u.employeeCode.localeCompare(h.employeeCode)),this.timesheetsGenerated=!0,this.generating=!1;let s=t.size,d=s>0?`Generated ${this.generatedTimesheets.length} timesheets (${s} already calculated)`:`Generated ${this.generatedTimesheets.length} timesheets from approved attendance!`;this.showMessage(d,"success"),this.cdr.markForCheck()},error:e=>{console.error("Error generating timesheets:",e),this.generating=!1,this.showMessage("Error generating timesheets","error"),this.cdr.markForCheck()}})}viewTimesheet(t){this.selectedTimesheetEmployee=t,this.individualTimesheetRows=t.records.map((e,i)=>{let s=new Date(e.attendanceDate).toLocaleDateString("en-US",{weekday:"short"});return{sno:i+1,date:e.attendanceDate,day:s,clockIn:e.clockIn,clockOut:e.clockOut,lunchHour:1,regHours:e.regularHours,otHours:e.overtimeHours,totalHours:e.regularHours+e.overtimeHours,status:e.status}}),this.showTimesheetModal=!0,this.cdr.markForCheck()}closeTimesheetModal(){this.showTimesheetModal=!1,this.selectedTimesheetEmployee=null,this.individualTimesheetRows=[],this.cdr.markForCheck()}downloadTimesheetPDF(t){let e=new Jt("landscape","mm","a4");e.setFillColor(0,102,153),e.rect(0,0,297,35,"F"),e.setTextColor(255,255,255),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("EMPLOYEE TIMESHEET",148.5,15,{align:"center"}),e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`Period: ${this.generateStartDate} to ${this.generateEndDate}`,148.5,25,{align:"center"}),e.setTextColor(0,0,0),e.setFontSize(11),e.setFont("helvetica","bold"),e.text("Employee Information",14,45),e.setFont("helvetica","normal"),e.setFontSize(10),e.text(`Employee ID: ${t.employeeCode}`,14,53),e.text(`Name: ${t.firstName} ${t.lastName}`,14,60),e.text(`Department: ${t.department}`,120,53),e.text(`Status: ${t.status}`,120,60);let i=t.records.map((s,d)=>{let h=new Date(s.attendanceDate).toLocaleDateString("en-US",{weekday:"short"});return[(d+1).toString(),s.attendanceDate,h,s.clockIn,s.clockOut,"1:00",s.regularHours.toFixed(1),s.overtimeHours.toFixed(1),(s.regularHours+s.overtimeHours).toFixed(1),s.status]});a2(e,{startY:70,head:[["#","Date","Day","Clock In","Clock Out","Lunch","Reg Hrs","OT Hrs","Total","Status"]],body:i,theme:"grid",headStyles:{fillColor:[0,102,153],textColor:[255,255,255],fontStyle:"bold",halign:"center"},bodyStyles:{halign:"center",fontSize:9},alternateRowStyles:{fillColor:[240,248,255]},columnStyles:{0:{cellWidth:10},1:{cellWidth:25},2:{cellWidth:15},3:{cellWidth:20},4:{cellWidth:20},5:{cellWidth:15},6:{cellWidth:18},7:{cellWidth:18},8:{cellWidth:18},9:{cellWidth:25}}});let r=e.lastAutoTable?.finalY||150;e.setFillColor(0,102,153),e.rect(14,r+10,269,25,"F"),e.setTextColor(255,255,255),e.setFontSize(11),e.setFont("helvetica","bold"),e.text("SUMMARY",20,r+20),e.setFontSize(10),e.text(`Regular Hours: ${t.totalRegularHours.toFixed(1)}`,70,r+20),e.text(`Overtime Hours: ${t.totalOvertimeHours.toFixed(1)}`,140,r+20),e.text(`Total Hours: ${t.totalHours.toFixed(1)}`,210,r+20),e.setTextColor(128,128,128),e.setFontSize(8),e.text(`Generated on: ${new Date().toLocaleDateString()}`,14,200),e.text("Hao System - Employee Timesheet",250,200),e.save(`Timesheet_${t.employeeCode}_${this.generateStartDate}.pdf`),this.showMessage(`Downloaded timesheet PDF for ${t.firstName} ${t.lastName}`,"success")}loadTimesheets(){this.loading=!0,this.cdr.markForCheck(),this.payrollService.getTimesheets().subscribe({next:t=>{this.timesheets=t,this.filteredTimesheets=t,this.loading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading timesheets:",t),this.loading=!1,this.cdr.markForCheck()}})}toggleAllCalcEmployees(){this.allCalcEmployeesSelected=!this.allCalcEmployeesSelected,this.allCalcEmployeesSelected?this.selectedCalcEmployeeIds=this.payableEmployees.map(t=>t.employeeId):this.selectedCalcEmployeeIds=[],this.updateCalcSummary(),this.cdr.markForCheck()}toggleCalcEmployeeSelection(t){let e=this.selectedCalcEmployeeIds.indexOf(t);e>-1?this.selectedCalcEmployeeIds.splice(e,1):this.selectedCalcEmployeeIds.push(t),this.allCalcEmployeesSelected=this.selectedCalcEmployeeIds.length===this.payableEmployees.length,this.updateCalcSummary(),this.cdr.markForCheck()}isCalcEmployeeSelected(t){return this.selectedCalcEmployeeIds.includes(t)}updateCalcSummary(){let t=this.payableEmployees.filter(e=>this.selectedCalcEmployeeIds.includes(e.employeeId));this.totalGrossPay=t.reduce((e,i)=>e+(i.payType==="HOURLY"?i.hours*i.hourlyRate:i.rate),0),this.totalNetPay=t.reduce((e,i)=>e+i.netAmount,0)}loadPayableEmployees(){if(this.payablesLoading=!0,this.showPayrollSummary=!1,this.employeeSalaryMap.clear(),this.cdr.markForCheck(),this.employees.length===0){this.payablesLoading=!1,this.cdr.markForCheck();return}let t=0,e=this.employees.length;this.employees.forEach(i=>{i.id?this.employeeService.getCurrentSalary(i.id).subscribe({next:r=>{this.employeeSalaryMap.set(i.id,r),t++,t===e&&this.buildPayableEmployeesList()},error:()=>{t++,t===e&&this.buildPayableEmployeesList()}}):(t++,t===e&&this.buildPayableEmployeesList())})}buildPayableEmployeesList(){let t=this.timesheets.filter(e=>e.status==="APPROVED");this.payableEmployees=this.employees.map((e,i)=>{let r=t.find(B=>B.employeeId===e.id),s=e.id?this.employeeSalaryMap.get(e.id):null,d=s?.basicSalary||0,u=s?.hourlyRate||(d>0?d/160:0),h=r?.totalHours||0,C=(s?.payFrequency||"MONTHLY")==="HOURLY"||u>0&&d===0?"HOURLY":"SALARIED",O=C==="HOURLY"?h*u:d,w=O*.22,A=O-w,I=s&&(d>0||u>0),L="No Salary Data";return I&&(L=r?"Ready":"Pending Timesheet"),{selected:!1,empId:e.employeeCode||`EMP${String(i+1).padStart(3,"0")}`,name:`${e.firstName||""} ${e.lastName||""}`.trim()||"Unknown",department:e.department?.name||"General",rate:d,hourlyRate:u,hours:h,taxes:w,netAmount:A,status:L,employeeId:e.id,payType:C}}),this.calculatePayableSummary(),this.payablesLoading=!1,this.cdr.markForCheck()}calculatePayableSummary(){let t=this.payableEmployees.filter(e=>e.selected);this.employeesToProcess=t.length,this.totalGrossPay=t.reduce((e,i)=>e+(i.payType==="HOURLY"?i.hours*i.hourlyRate:i.rate),0),this.totalNetPay=t.reduce((e,i)=>e+i.netAmount,0)}togglePayableSelection(t){t.selected=!t.selected,this.calculatePayableSummary(),this.cdr.markForCheck()}selectAllPayables(){let t=this.payableEmployees.every(e=>e.selected);this.payableEmployees.forEach(e=>e.selected=!t),this.calculatePayableSummary(),this.cdr.markForCheck()}areAllPayablesSelected(){return this.payableEmployees.length>0&&this.payableEmployees.every(t=>t.selected)}calculateSelectedPayroll(){let t=this.payableEmployees.filter(e=>e.selected);if(t.length===0){this.showMessage("Please select at least one employee","error");return}this.processedSalariedEmployees=t.filter(e=>e.payType==="SALARIED").map(e=>({empId:e.empId,name:e.name,basic:e.rate,gross:e.rate,taxes:e.taxes,netAmount:e.netAmount,category:"Salaried"})),this.processedHourlyEmployees=t.filter(e=>e.payType==="HOURLY").map(e=>({empId:e.empId,name:e.name,basic:e.hours*e.hourlyRate,gross:e.hours*e.hourlyRate,taxes:e.taxes,netAmount:e.netAmount,category:"Hourly"})),this.processedTotal=t.reduce((e,i)=>e+(i.payType==="HOURLY"?i.hours*i.hourlyRate:i.rate),0),this.processedNetTotal=t.reduce((e,i)=>e+i.netAmount,0),this.showPayrollSummary=!0,this.showMessage(`Calculated payroll for ${t.length} employees`,"success"),this.cdr.markForCheck()}processPayables(){if(!this.showPayrollSummary){this.showMessage("Please calculate payroll first","error");return}this.showMessage("Payroll processed and sent to accounts!","success"),this.payableEmployees.forEach(t=>{t.selected&&(t.status="Processed",t.selected=!1)}),this.showPayrollSummary=!1,this.calculatePayableSummary(),this.cdr.markForCheck()}closeSummary(){this.showPayrollSummary=!1,this.cdr.markForCheck()}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.messageType="",this.cdr.markForCheck()},5e3)}formatCurrency(t){return"$"+t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}formatDateDisplay(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):""}getPayPeriodTypeLabel(){switch(this.selectedPayPeriodType){case"WEEKLY":return"Weekly";case"BI_WEEKLY":return"Bi-Weekly";case"SEMI_MONTHLY":return"Semi-Monthly";case"MONTHLY":return"Monthly";default:return this.selectedPayPeriodType}}getStatusClass(t){switch(t?.toUpperCase()){case"APPROVED":return"approved";case"REJECTED":return"rejected";case"PENDING":case"PENDING_APPROVAL":return"pending";case"PROCESSED":return"processed";default:return"pending"}}static \u0275fac=function(e){return new(e||n)(V(vi),V(To),V(ai),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-timesheet-approval"]],decls:53,vars:29,consts:[[1,"attendance-payroll-approval"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-history"],["class","message-bar",3,"ngClass",4,"ngIf"],[1,"step-wizard-new"],[1,"step-item",3,"click"],[1,"step-circle"],[1,"fas",3,"ngClass"],[1,"step-line"],[1,"step-text"],[1,"step-number"],[1,"step-title"],["class","step-content",4,"ngIf"],["class","modal-overlay",4,"ngIf"],["class","payroll-summary-section",4,"ngIf"],[1,"message-bar",3,"ngClass"],[1,"step-content"],[1,"section-box"],[1,"step-header"],[1,"period-info"],[1,"form-grid","compact"],[1,"form-group"],[3,"ngModelChange","change","ngModel"],["value","MONTHLY"],["value","WEEKLY"],["value","BI_WEEKLY"],["value","SEMI_MONTHLY"],["type","date",3,"ngModelChange","ngModel"],[1,"form-group",2,"display","flex","align-items","flex-end"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-sync"],[1,"sub-section"],[1,"fas","fa-file-alt"],["class","loading-indicator",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"step-actions-bar"],[1,"left-actions"],[1,"selected-info"],[1,"right-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-arrow-right"],[1,"loading-indicator"],[1,"fas","fa-spinner","fa-spin"],[1,"table-container"],[1,"data-table","generated-timesheet-table"],[3,"processed-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"emp-id"],[1,"emp-name"],[1,"hours"],[1,"hours","total"],[1,"status-badge",3,"ngClass"],[1,"action-col"],["title","View Timesheet",1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-eye"],["title","Download PDF",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-file-pdf"],["colspan","10",1,"no-data"],[1,"modal-overlay"],[1,"modal-content","timesheet-modal",3,"click"],[1,"modal-header","blue-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","employee-info-bar",4,"ngIf"],[1,"data-table","individual-timesheet-table"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-outline-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"employee-info-bar"],[1,"info-item"],[1,"label"],[1,"value"],[1,"status-badge","approved"],[1,"summary-row"],["colspan","6",1,"text-right"],[1,"payroll-summary-cards"],[1,"payroll-card","green"],[1,"card-label"],[1,"card-value"],[1,"payroll-card","red"],[1,"payroll-card","blue"],[1,"payroll-card","gray"],[1,"btn","btn-outline-secondary",3,"click"],[1,"data-table","payroll-calc-table-new"],[1,"checkbox-col"],["type","checkbox",3,"change","checked"],[1,"green-header"],[1,"red-header"],[3,"selected",4,"ngFor","ngForOf"],[1,"green-text"],[1,"red-text"],["colspan","14",1,"no-data"],[1,"fas","fa-calculator"],[1,"total-row"],["colspan","4",1,"text-right"],[1,"pay-date-section"],[1,"form-group","pay-date-group"],[1,"required"],["type","date",1,"pay-date-input",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"payroll-card","orange"],[1,"fas","fa-check-circle","text-success"],[1,"data-table","payroll-calc-table-new","processed-table"],[1,"sub-section",2,"margin-top","30px"],[1,"fas","fa-pause-circle","text-warning"],[1,"data-table","payroll-calc-table-new","hold-table"],[1,"fas","fa-check-circle"],[1,"error-message"],[1,"status-badge","processed"],[1,"btn-group-actions"],["title","Release to History",1,"btn","btn-sm","btn-success",3,"click"],["title","Hold Payroll",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-pause"],["colspan","5",1,"text-right"],["colspan","5"],["class","btn btn-sm btn-primary","title","Release All to History",3,"click",4,"ngIf"],["title","Release All to History",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-paper-plane"],[1,"status-badge","hold"],["title","Release from Hold",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-play"],[1,"fas","fa-pause-circle"],["colspan","2"],[1,"payroll-summary-section"],[1,"section-box","summary-box"],[1,"summary-header"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"summary-stats"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],["class","category-section",4,"ngIf"],[1,"grand-total"],[1,"total-value"],[1,"category-section"],[1,"fas","fa-users"],[1,"data-table","summary-table"],[1,"tax-col"],[1,"net-amount"],[1,"fas","fa-clock"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Attendance & Payroll Approval"),a(),o(5,"p",3),l(6,"Approved attendance data and payroll processing"),a()(),o(7,"div",4)(8,"button",5),x("click",function(){return i.goToStep(3)}),y(9,"i",6),l(10," View Payroll History "),a()()(),b(11,L2e,2,2,"div",7),o(12,"div",8)(13,"div",9),x("click",function(){return i.goToStep(0)}),o(14,"div",10),y(15,"i",11),a(),y(16,"div",12),o(17,"div",13)(18,"span",14),l(19,"Step 1:"),a(),o(20,"span",15),l(21,"Generate Payroll"),a()()(),o(22,"div",9),x("click",function(){return i.goToStep(1)}),o(23,"div",10),y(24,"i",11),a(),y(25,"div",12),o(26,"div",13)(27,"span",14),l(28,"Step 2:"),a(),o(29,"span",15),l(30,"Calculate Payroll"),a()()(),o(31,"div",9),x("click",function(){return i.goToStep(2)}),o(32,"div",10),y(33,"i",11),a(),y(34,"div",12),o(35,"div",13)(36,"span",14),l(37,"Step 3:"),a(),o(38,"span",15),l(39,"Process Payroll"),a()()(),o(40,"div",9),x("click",function(){return i.goToStep(3)}),o(41,"div",10),y(42,"i",6),a(),o(43,"div",13)(44,"span",14),l(45,"Step 4:"),a(),o(46,"span",15),l(47,"Payroll History"),a()()()(),b(48,W2e,46,13,"div",16)(49,$2e,39,4,"div",17)(50,Z2e,40,8,"div",16)(51,lMe,129,16,"div",16)(52,uMe,27,5,"div",18),a()),e&2&&(c(11),m("ngIf",i.message),c(2),ie("active",i.currentStep===0)("completed",i.currentStep>0),c(2),m("ngClass",i.currentStep>0?"fa-check":"fa-file-alt"),c(),ie("completed",i.currentStep>0),c(6),ie("active",i.currentStep===1)("completed",i.currentStep>1),c(2),m("ngClass",i.currentStep>1?"fa-check":"fa-calculator"),c(),ie("completed",i.currentStep>1),c(6),ie("active",i.currentStep===2)("completed",i.currentStep>2),c(2),m("ngClass",i.currentStep>2?"fa-check":"fa-play-circle"),c(),ie("completed",i.currentStep>2),c(6),ie("active",i.currentStep===3),c(8),m("ngIf",i.currentStep===0),c(),m("ngIf",i.showTimesheetModal),c(),m("ngIf",i.currentStep===1),c(),m("ngIf",i.currentStep===2),c(),m("ngIf",i.showPayrollSummary&&i.currentStep===2))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Ue,Oe,Ee,Ns,Rt],styles:['@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.attendance-payroll-approval[_ngcontent-%COMP%]{padding:24px;background:linear-gradient(135deg,#f0f9f9,#e8f4f4);min-height:100vh;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:28px;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0;background:linear-gradient(135deg,teal,#066);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#5a8a8a;margin-top:4px;font-size:14px}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0f0f0;color:teal;padding:12px 24px;border-radius:10px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s ease;box-shadow:0 2px 8px #0080801a}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background:teal;color:#fff;border-color:teal;transform:translateY(-2px);box-shadow:0 4px 12px #0080804d}.attendance-payroll-approval[_ngcontent-%COMP%]   .message-bar[_ngcontent-%COMP%]{padding:14px 20px;border-radius:12px;margin-bottom:20px;font-weight:500;animation:_ngcontent-%COMP%_slideInRight .4s ease-out;display:flex;align-items:center;gap:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .message-bar.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d0f5e8,#b8f0d8);color:#00806a;border-left:4px solid #00a080}.attendance-payroll-approval[_ngcontent-%COMP%]   .message-bar.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fdd,#fcc);color:#c03030;border-left:4px solid #e04040}.attendance-payroll-approval[_ngcontent-%COMP%]   .message-bar.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3d0,#ffe8a8);color:#a06800;border-left:4px solid #e09000}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;background:#fff;border-radius:20px;padding:32px 48px;margin-bottom:28px;box-shadow:0 4px 20px #00808014;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;flex:1;cursor:pointer;transition:all .3s ease}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:hover   .step-circle[_ngcontent-%COMP%]{transform:scale(1.1)}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#e0f0f0,#d0e8e8);display:flex;align-items:center;justify-content:center;margin-bottom:14px;transition:all .4s cubic-bezier(.4,0,.2,1);z-index:2;box-shadow:0 2px 8px #0080801a}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px;color:#5a8a8a;transition:all .3s}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{position:absolute;top:30px;left:50%;width:100%;height:4px;background:linear-gradient(90deg,#e0f0f0,#d0e8e8);z-index:1;border-radius:2px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-line.completed[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00a080,#00c0a0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:last-child   .step-line[_ngcontent-%COMP%]{display:none}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{text-align:center}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{display:block;font-size:12px;color:#5a8a8a;margin-bottom:4px;font-weight:500}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{display:block;font-size:13px;color:#333;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0);box-shadow:0 6px 20px #00808066;animation:_ngcontent-%COMP%_pulse 2s infinite}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.active[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{color:teal}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.active[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{color:teal;font-weight:700}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a080,#00c0a0);box-shadow:0 4px 12px #00a0804d}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item.completed[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{color:#00a080}.attendance-payroll-approval[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:28px;box-shadow:0 4px 20px #00808014;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards;animation-delay:.2s}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:20px;border-bottom:2px solid #e8f4f4}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   .viewing-label[_ngcontent-%COMP%]{font-weight:500;color:#5a8a8a;margin-right:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{font-weight:700;color:#066;font-size:16px}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-nav-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-nav-controls[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;border:2px solid #e0f0f0;background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;transition:all .3s ease}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-nav-controls[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:teal;color:#fff;border-color:teal;transform:scale(1.05)}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-nav-controls[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e0f0f0;border-radius:10px;font-size:14px;color:#333;transition:all .3s ease}.attendance-payroll-approval[_ngcontent-%COMP%]   .viewing-header[_ngcontent-%COMP%]   .date-nav-controls[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 4px #0080801a}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:28px}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;padding:24px;border-radius:16px;background:#fff;border:none;box-shadow:0 4px 16px #00808014;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards;position:relative;overflow:hidden}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(2){animation-delay:.15s}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:4px;background:linear-gradient(90deg,teal,#00a0a0);transform:scaleX(0);transition:transform .3s ease}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00808026}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px;color:#fff}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#5a8a8a;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#066}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box.blue[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box.green[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a080,#00c0a0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box.orange[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e08000,#ff9020)}.attendance-payroll-approval[_ngcontent-%COMP%]   .sub-section[_ngcontent-%COMP%]{margin-bottom:20px}.attendance-payroll-approval[_ngcontent-%COMP%]   .sub-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#066;font-size:17px;font-weight:600;margin:0;display:flex;align-items:center;gap:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .sub-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";width:4px;height:24px;background:linear-gradient(180deg,teal,#00a0a0);border-radius:2px}.attendance-payroll-approval[_ngcontent-%COMP%]   .sub-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{margin-bottom:24px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#066;margin:0 0 6px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .period-info[_ngcontent-%COMP%]{font-size:14px;color:#5a8a8a;margin:0}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-grid.compact[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#066;font-size:13px}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0f0f0;border-radius:10px;font-size:14px;transition:all .3s ease;background:#fafffe}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 4px #0080801a}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .attendance-payroll-approval[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#00a0a0}.attendance-payroll-approval[_ngcontent-%COMP%]   .form-group.btn-group-cell[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.attendance-payroll-approval[_ngcontent-%COMP%]   .btn-group-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:nowrap}.attendance-payroll-approval[_ngcontent-%COMP%]   .btn-group-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{white-space:nowrap;font-size:11px;padding:6px 10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0);color:#fff;border:none;padding:12px 24px;border-radius:10px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 12px #0080804d}.attendance-payroll-approval[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00808066}.attendance-payroll-approval[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.attendance-payroll-approval[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px;border-radius:12px}.attendance-payroll-approval[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.attendance-payroll-approval[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e8f4f4}.attendance-payroll-approval[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(90deg,teal,#00a0a0);border-radius:4px}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #e8f4f4}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f9f9,#e8f4f4);color:#066;font-weight:600;font-size:12px;text-transform:uppercase;letter-spacing:.5px;position:sticky;top:0}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .checkbox-col[_ngcontent-%COMP%]{width:40px;text-align:center}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .checkbox-col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#008080;cursor:pointer}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .emp-id[_ngcontent-%COMP%]{font-family:Monaco,Consolas,monospace;color:teal;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .emp-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .hours.teal[_ngcontent-%COMP%]{color:teal}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .green-text[_ngcontent-%COMP%]{color:#00a080;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:#d94848;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]:before{content:"";width:6px;height:6px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.present[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d0f5e8,#b8f0d8);color:#00806a}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]:before, .attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.present[_ngcontent-%COMP%]:before{background:#00a080}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3d0,#ffe8a8);color:#a06800}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]:before{background:#e09000}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fdd,#fcc);color:#c03030}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.rejected[_ngcontent-%COMP%]:before{background:#e04040}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.processed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d0f5e8,#b8f0d8);color:#00806a}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.processed[_ngcontent-%COMP%]:before{background:#00a080}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.hold[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3d0,#ffe8a8);color:#a06800}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.hold[_ngcontent-%COMP%]:before{background:#e09000}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.released[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d0e8f5,#b8e0f0);color:#0066a0}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .status-badge.released[_ngcontent-%COMP%]:before{background:#08c}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.processed-row[_ngcontent-%COMP%]{background:#f5f5f5!important;opacity:.7}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.processed-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#888}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.processed-row[_ngcontent-%COMP%]:hover{background:#f0f0f0!important}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#5a8a8a}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:48px;margin-bottom:16px;color:teal;opacity:.4}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e8f4f4,#f0f9f9)}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700;color:#066;border-top:2px solid #008080}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fffe;transform:scale(1.002)}.attendance-payroll-approval[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e0f5f5,#d8f0f0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:24px;border-top:2px solid #e8f4f4;margin-top:24px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-actions-bar[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .selected-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f5f5,#d0f0f0);color:teal;padding:10px 20px;border-radius:25px;font-weight:600;font-size:13px;display:inline-flex;align-items:center;gap:8px;box-shadow:0 2px 8px #00808026}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-actions-bar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:28px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]{padding:24px;border-radius:16px;color:#fff;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:100px;height:100px;background:#ffffff1a;border-radius:50%;transform:translate(30%,-30%);transition:transform .4s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 28px #00808059}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]:hover:before{transform:translate(20%,-20%) scale(1.2)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{display:block;font-size:13px;opacity:.9;margin-bottom:10px;font-weight:500}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:800}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a080,#00c0a0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d94848,#f06060)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a5acd,#8b7dd8)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.gray[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#868e96)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]   .payroll-card.orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e09000,#f0a000)}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#333;padding:12px 10px;text-align:center;font-weight:600;border-bottom:2px solid #e0e0e0;white-space:nowrap}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.green-header[_ngcontent-%COMP%]{color:#28a745}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.red-header[_ngcontent-%COMP%]{color:#dc3545}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee;transition:background .2s}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f0f9f9}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:center;vertical-align:middle}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.emp-id[_ngcontent-%COMP%]{font-weight:600;color:teal}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.emp-name[_ngcontent-%COMP%]{text-align:left;font-weight:500}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa;border-top:2px solid #e0e0e0}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 10px;text-align:center;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-calc-table-new[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.attendance-payroll-approval[_ngcontent-%COMP%]   .green-text[_ngcontent-%COMP%]{color:#28a745!important;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:#dc3545!important;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.attendance-payroll-approval[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#066;margin:0;display:flex;align-items:center;gap:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";width:4px;height:24px;background:linear-gradient(180deg,teal,#00a0a0);border-radius:2px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]{margin-top:28px;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]{border:2px solid #00a080;border-radius:16px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#00a080;font-size:20px;margin:0;display:flex;align-items:center;gap:12px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]{display:flex;gap:48px;margin-bottom:28px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:700;color:#066}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#5a8a8a;font-weight:500}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]{margin-bottom:28px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#333;margin-bottom:16px;display:flex;align-items:center;gap:10px}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .category-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .grand-total[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:24px;padding-top:20px;border-top:2px solid #e8f4f4;font-size:16px;font-weight:600}.attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-section[_ngcontent-%COMP%]   .grand-total[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:28px;color:#00a080;font-weight:800}.btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;border:none;font-size:14px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#fff3;border-radius:50%;transition:width .4s,height .4s;transform:translate(-50%,-50%)}.btn[_ngcontent-%COMP%]:active:before{width:200px;height:200px}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0);color:#fff;box-shadow:0 4px 12px #0080804d}.btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00808066}.btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a080,#00c0a0);color:#fff;box-shadow:0 4px 12px #00a0804d}.btn.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00a08066}.btn.btn-outline-secondary[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0f0f0;color:#066}.btn.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#e8f4f4;border-color:teal;transform:translateY(-2px)}.btn.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:12px;border-radius:8px}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0f0f0;color:#066}.btn.btn-outline[_ngcontent-%COMP%]:hover{background:#e8f4f4;border-color:teal}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00404080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0080804d;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 28px;border-bottom:2px solid #e8f4f4;background:linear-gradient(90deg,#fafffe,#fff)}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#066;display:flex;align-items:center;gap:12px}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#5a8a8a;cursor:pointer;transition:all .3s;width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:teal;background:#e8f4f4}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:28px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{color:#5a8a8a;margin-bottom:24px;line-height:1.6}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 28px;border-top:2px solid #e8f4f4;background:linear-gradient(90deg,#f8fffe,#fff)}.modal.pdf-modal[_ngcontent-%COMP%]{max-width:900px}.pdf-preview[_ngcontent-%COMP%]   .pdf-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);color:#fff;padding:28px;text-align:center;border-radius:12px;margin-bottom:24px}.pdf-preview[_ngcontent-%COMP%]   .pdf-banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 6px;font-size:22px}.pdf-preview[_ngcontent-%COMP%]   .pdf-banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.9;font-size:14px}.pdf-preview[_ngcontent-%COMP%]   .pdf-info[_ngcontent-%COMP%]{margin-bottom:24px}.pdf-preview[_ngcontent-%COMP%]   .pdf-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:14px}.pdf-preview[_ngcontent-%COMP%]   .pdf-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#066;margin-right:8px}.pdf-preview[_ngcontent-%COMP%]   .pdf-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#5a8a8a}.pdf-preview[_ngcontent-%COMP%]   .pdf-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-radius:12px;overflow:hidden}.pdf-preview[_ngcontent-%COMP%]   .pdf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pdf-preview[_ngcontent-%COMP%]   .pdf-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;border:1px solid #e8f4f4;text-align:left;font-size:13px}.pdf-preview[_ngcontent-%COMP%]   .pdf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f9f9,#e8f4f4);font-weight:600;color:#066}.pdf-preview[_ngcontent-%COMP%]   .pdf-table[_ngcontent-%COMP%]   .alt-row[_ngcontent-%COMP%]{background:#fafffe}.employee-selection-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px 24px;margin-top:20px;margin-bottom:20px;border:1px solid #e0f0f0;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.employee-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #e8f4f4}.employee-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#066;display:flex;align-items:center;gap:10px}.employee-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;font-size:18px}.employee-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f8f8,#d0f0f0);color:teal;padding:6px 14px;border-radius:20px;font-size:13px;font-weight:600}.employee-selection-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{margin-bottom:16px}.employee-selection-section[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;padding:8px 0}.employee-selection-section[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#008080;cursor:pointer}.employee-selection-section[_ngcontent-%COMP%]   .checkbox-label.select-all[_ngcontent-%COMP%]{font-weight:600;color:#066;padding:10px 14px;background:linear-gradient(135deg,#f8ffff,#f0fafa);border-radius:10px;border:1px solid #d0e8e8}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;max-height:300px;overflow-y:auto;padding:8px;background:#fafffe;border-radius:12px;border:1px solid #e8f4f4}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]{background:#fff;padding:12px 14px;border-radius:10px;border:1px solid #e8f4f4;transition:all .2s ease}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]:hover{border-color:teal;box-shadow:0 2px 8px #0080801f}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .emp-info[_ngcontent-%COMP%]   .emp-name[_ngcontent-%COMP%]{color:#066;font-weight:600}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .emp-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .emp-info[_ngcontent-%COMP%]   .emp-name[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .emp-info[_ngcontent-%COMP%]   .emp-code[_ngcontent-%COMP%]{font-size:12px;color:#888}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f9f9;border-radius:4px}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b0d8d8;border-radius:4px}.employee-selection-section[_ngcontent-%COMP%]   .employee-list-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:teal}@media(max-width:1200px){.attendance-payroll-approval[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.attendance-payroll-approval[_ngcontent-%COMP%]{padding:16px}.attendance-payroll-approval[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]{flex-wrap:wrap;padding:20px;gap:20px}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{flex:0 0 calc(50% - 10px)}.attendance-payroll-approval[_ngcontent-%COMP%]   .step-wizard-new[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{display:none}.attendance-payroll-approval[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%], .attendance-payroll-approval[_ngcontent-%COMP%]   .payroll-summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.action-col[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.action-col[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;display:flex;align-items:center;gap:4px}.action-col[_ngcontent-%COMP%]   .btn-sm.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none}.action-col[_ngcontent-%COMP%]   .btn-sm.btn-info[_ngcontent-%COMP%]:hover{background:#138496}.action-col[_ngcontent-%COMP%]   .btn-sm.btn-primary[_ngcontent-%COMP%]{background:#069;color:#fff;border:none}.action-col[_ngcontent-%COMP%]   .btn-sm.btn-primary[_ngcontent-%COMP%]:hover{background:#058}.hours.total[_ngcontent-%COMP%]{font-weight:600;color:#069}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.timesheet-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:1200px;max-height:90vh;overflow:hidden;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:20px 24px;display:flex;justify-content:space-between;align-items:center}.timesheet-modal[_ngcontent-%COMP%]   .modal-header.blue-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#069,#046);color:#fff}.timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.timesheet-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:24px;max-height:calc(90vh - 160px);overflow-y:auto}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;padding:16px 20px;background:linear-gradient(135deg,#e6f3ff,#d9ecff);border-radius:12px;margin-bottom:20px;border-left:4px solid #006699}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info-bar[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info-bar[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;color:#666;font-weight:600}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .employee-info-bar[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#069}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:linear-gradient(135deg,#069,#046)}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;padding:12px 16px;text-align:center;font-size:12px;font-weight:600;text-transform:uppercase}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e8f0f5}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f0f8ff}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#e6f3ff}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:center;font-size:13px}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{background:linear-gradient(135deg,#069,#046)}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;color:#fff;font-weight:600}.timesheet-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .individual-timesheet-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:16px 24px;background:#f8f9fa;display:flex;justify-content:flex-end;gap:12px;border-top:1px solid #e8f0f5}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-outline-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#666}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#069;border:none;color:#fff}.timesheet-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:#058}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.generated-timesheet-table[_ngcontent-%COMP%]   .action-col[_ngcontent-%COMP%]{min-width:160px}.pay-date-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9f9,#e8f4f4);border:1px solid #008080;border-radius:12px;padding:20px;margin-bottom:20px}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin:0;white-space:nowrap}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   .pay-date-input[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #008080;border-radius:8px;font-size:14px;font-weight:500;min-width:180px}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   .pay-date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#066;box-shadow:0 0 0 3px #0080801a}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   .pay-date-input.error-border[_ngcontent-%COMP%]{border-color:#dc3545}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   .pay-date-input.error-border[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.pay-date-section[_ngcontent-%COMP%]   .pay-date-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin:0}'],changeDetection:0})};function gMe(n,t){if(n&1&&(o(0,"option",29),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function fMe(n,t){if(n&1){let e=F();o(0,"label",26)(1,"input",32),x("change",function(){let r=g(e).$implicit,s=p(4);return f(s.toggleEmployeeSelection(r.id))}),a(),o(2,"span"),l(3),a()()}if(n&2){let e=t.$implicit,i=p(4);c(),m("checked",i.isEmployeeSelected(e.id)),c(2),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function hMe(n,t){if(n&1&&(o(0,"div",30),b(1,fMe,4,4,"label",31),a()),n&2){let e=p(3);c(),m("ngForOf",e.employees)}}function _Me(n,t){if(n&1){let e=F();o(0,"div",16)(1,"div",17),y(2,"i",18),o(3,"span"),l(4,"Generate attendance timesheets from approved attendance records. The system will calculate total hours, regular hours, overtime hours, and attendance days."),a()(),o(5,"div",19)(6,"h4"),l(7,"Pay Period"),a(),o(8,"div",20)(9,"div",21)(10,"label"),l(11,"Pay Frequency"),a(),o(12,"select",22),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.attendanceForm.payFrequency,r)||(s.attendanceForm.payFrequency=r),f(r)}),b(13,gMe,2,2,"option",23),a()()(),o(14,"div",20)(15,"div",21)(16,"label"),l(17,"Start Date *"),a(),o(18,"input",24),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.attendanceForm.startDate,r)||(s.attendanceForm.startDate=r),f(r)}),a()(),o(19,"div",21)(20,"label"),l(21,"End Date *"),a(),o(22,"input",24),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.attendanceForm.endDate,r)||(s.attendanceForm.endDate=r),f(r)}),a()()()(),o(23,"div",19)(24,"h4"),l(25,"Employee Selection"),a(),o(26,"div",25)(27,"label",26)(28,"input",27),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectAllEmployees,r)||(s.selectAllEmployees=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.toggleSelectAll())}),a(),o(29,"span"),l(30,"All Active Employees"),a()()(),b(31,hMe,2,1,"div",28),a()()}if(n&2){let e=p(2);c(12),M("ngModel",e.attendanceForm.payFrequency),c(),m("ngForOf",e.payFrequencies),c(5),M("ngModel",e.attendanceForm.startDate),c(4),M("ngModel",e.attendanceForm.endDate),c(6),M("ngModel",e.selectAllEmployees),c(3),m("ngIf",!e.selectAllEmployees)}}function vMe(n,t){if(n&1){let e=F();o(0,"label",26)(1,"input",32),x("change",function(){let r=g(e).$implicit,s=p(4);return f(s.toggleEmployeeSelection(r.id))}),a(),o(2,"span"),l(3),a()()}if(n&2){let e=t.$implicit,i=p(4);c(),m("checked",i.isEmployeeSelected(e.id)),c(2),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function xMe(n,t){if(n&1&&(o(0,"div",30),b(1,vMe,4,4,"label",31),a()),n&2){let e=p(3);c(),m("ngForOf",e.employees)}}function yMe(n,t){if(n&1){let e=F();o(0,"div",16)(1,"div",17),y(2,"i",18),o(3,"span"),l(4,"Generate project timesheets from approved attendance records. Assign all timesheet hours to a specific project."),a()(),o(5,"div",19)(6,"h4"),l(7,"Project Details"),a(),o(8,"div",20)(9,"div",21)(10,"label"),l(11,"Project Code *"),a(),o(12,"input",33),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.projectForm.projectCode,r)||(s.projectForm.projectCode=r),f(r)}),a()(),o(13,"div",21)(14,"label"),l(15,"Project Name *"),a(),o(16,"input",34),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.projectForm.projectName,r)||(s.projectForm.projectName=r),f(r)}),a()()()(),o(17,"div",19)(18,"h4"),l(19,"Period"),a(),o(20,"div",20)(21,"div",21)(22,"label"),l(23,"Start Date *"),a(),o(24,"input",24),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.projectForm.startDate,r)||(s.projectForm.startDate=r),f(r)}),a()(),o(25,"div",21)(26,"label"),l(27,"End Date *"),a(),o(28,"input",24),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.projectForm.endDate,r)||(s.projectForm.endDate=r),f(r)}),a()()()(),o(29,"div",19)(30,"h4"),l(31,"Employee Selection"),a(),o(32,"div",25)(33,"label",26)(34,"input",27),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectAllEmployees,r)||(s.selectAllEmployees=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.toggleSelectAll())}),a(),o(35,"span"),l(36,"All Active Employees"),a()()(),b(37,xMe,2,1,"div",28),a()()}if(n&2){let e=p(2);c(12),M("ngModel",e.projectForm.projectCode),c(4),M("ngModel",e.projectForm.projectName),c(8),M("ngModel",e.projectForm.startDate),c(4),M("ngModel",e.projectForm.endDate),c(6),M("ngModel",e.selectAllEmployees),c(3),m("ngIf",!e.selectAllEmployees)}}function CMe(n,t){if(n&1&&(o(0,"div",39),y(1,"i",40),o(2,"span"),l(3),a()()),n&2){let e=p(3);c(3),D("Successfully generated ",e.generatedAttendanceTimesheets.length," attendance timesheets")}}function bMe(n,t){n&1&&(o(0,"div",41),y(1,"i",42),o(2,"span"),l(3,"No timesheets generated. Make sure there are approved attendance records for the selected period."),a()())}function MMe(n,t){if(n&1&&(o(0,"tr")(1,"td",46),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"date"),Le(8,"date"),a(),o(9,"td"),l(10),Le(11,"number"),a(),o(12,"td"),l(13),Le(14,"number"),a(),o(15,"td"),l(16),Le(17,"number"),a(),o(18,"td"),l(19),a(),o(20,"td")(21,"span",47),l(22),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.timesheetNumber),c(2),_(i.getEmployeeName(e)),c(2),Ge("",rt(7,9,e.periodStartDate,"MMM d")," - ",rt(8,12,e.periodEndDate,"MMM d, yyyy")),c(4),_(rt(11,15,e.totalRegularHours,"1.1-1")),c(3),_(rt(14,18,e.totalOvertimeHours,"1.1-1")),c(3),_(rt(17,21,e.totalHours,"1.1-1")),c(3),_(e.presentDays),c(3),_(e.status)}}function SMe(n,t){if(n&1&&(o(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th"),l(5,"Timesheet #"),a(),o(6,"th"),l(7,"Employee"),a(),o(8,"th"),l(9,"Period"),a(),o(10,"th"),l(11,"Regular Hrs"),a(),o(12,"th"),l(13,"OT Hrs"),a(),o(14,"th"),l(15,"Total Hrs"),a(),o(16,"th"),l(17,"Present Days"),a(),o(18,"th"),l(19,"Status"),a()()(),o(20,"tbody"),b(21,MMe,23,24,"tr",45),a()()()),n&2){let e=p(3);c(21),m("ngForOf",e.generatedAttendanceTimesheets)}}function PMe(n,t){if(n&1&&(o(0,"div",35),b(1,CMe,4,1,"div",36)(2,bMe,4,0,"div",37)(3,SMe,22,1,"div",38),a()),n&2){let e=p(2);c(),m("ngIf",e.generatedAttendanceTimesheets.length>0),c(),m("ngIf",e.generatedAttendanceTimesheets.length===0),c(),m("ngIf",e.generatedAttendanceTimesheets.length>0)}}function wMe(n,t){if(n&1&&(o(0,"div",39),y(1,"i",40),o(2,"span"),l(3),a()()),n&2){let e=p(3);c(3),D("Successfully generated ",e.generatedProjectTimesheets.length," project timesheets")}}function EMe(n,t){n&1&&(o(0,"div",41),y(1,"i",42),o(2,"span"),l(3,"No timesheets generated. Make sure there are approved attendance records for the selected period."),a()())}function OMe(n,t){if(n&1&&(o(0,"tr")(1,"td",46),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),Le(9,"date"),Le(10,"date"),a(),o(11,"td"),l(12),Le(13,"number"),a(),o(14,"td"),l(15),Le(16,"number"),a(),o(17,"td"),l(18),Le(19,"number"),a(),o(20,"td")(21,"span",47),l(22),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.projectTimesheetNumber),c(2),_(i.getEmployeeName(e)),c(2),Ge("",e.projectCode," - ",e.projectName),c(2),Ge("",rt(9,10,e.periodStartDate,"MMM d")," - ",rt(10,13,e.periodEndDate,"MMM d, yyyy")),c(4),_(rt(13,16,e.regularHours,"1.1-1")),c(3),_(rt(16,19,e.overtimeHours,"1.1-1")),c(3),_(rt(19,22,e.billableHours,"1.1-1")),c(4),_(e.status)}}function TMe(n,t){if(n&1&&(o(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th"),l(5,"Timesheet #"),a(),o(6,"th"),l(7,"Employee"),a(),o(8,"th"),l(9,"Project"),a(),o(10,"th"),l(11,"Period"),a(),o(12,"th"),l(13,"Regular Hrs"),a(),o(14,"th"),l(15,"OT Hrs"),a(),o(16,"th"),l(17,"Billable Hrs"),a(),o(18,"th"),l(19,"Status"),a()()(),o(20,"tbody"),b(21,OMe,23,25,"tr",45),a()()()),n&2){let e=p(3);c(21),m("ngForOf",e.generatedProjectTimesheets)}}function kMe(n,t){if(n&1&&(o(0,"div",35),b(1,wMe,4,1,"div",36)(2,EMe,4,0,"div",37)(3,TMe,22,1,"div",38),a()),n&2){let e=p(2);c(),m("ngIf",e.generatedProjectTimesheets.length>0),c(),m("ngIf",e.generatedProjectTimesheets.length===0),c(),m("ngIf",e.generatedProjectTimesheets.length>0)}}function IMe(n,t){if(n&1){let e=F();o(0,"button",48),x("click",function(){g(e);let r=p(2);return f(r.generateAttendanceTimesheets())}),y(1,"i",49),l(2),a()}if(n&2){let e=p(2);m("disabled",e.generating),c(),ie("fa-spin",e.generating),c(),D(" ",e.generating?"Generating...":"Generate Attendance Timesheets"," ")}}function DMe(n,t){if(n&1){let e=F();o(0,"button",48),x("click",function(){g(e);let r=p(2);return f(r.generateProjectTimesheets())}),y(1,"i",49),l(2),a()}if(n&2){let e=p(2);m("disabled",e.generating),c(),ie("fa-spin",e.generating),c(),D(" ",e.generating?"Generating...":"Generate Project Timesheets"," ")}}function AMe(n,t){if(n&1){let e=F();o(0,"button",50),x("click",function(){g(e);let r=p(2);return f(r.showResults=!1)}),y(1,"i",51),l(2," Generate More "),a()}}function RMe(n,t){if(n&1){let e=F();o(0,"div",1)(1,"div",2),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",3)(3,"h3"),l(4,"Generate Timesheets"),a(),o(5,"button",4),x("click",function(){g(e);let r=p();return f(r.close())}),l(6,"\xD7"),a()(),o(7,"div",5)(8,"button",6),x("click",function(){g(e);let r=p();return f(r.switchTab("attendance"))}),y(9,"i",7),l(10," Attendance Timesheet "),a(),o(11,"button",6),x("click",function(){g(e);let r=p();return f(r.switchTab("project"))}),y(12,"i",8),l(13," Project Timesheet "),a()(),o(14,"div",9),b(15,_Me,32,6,"div",10)(16,yMe,38,6,"div",10)(17,PMe,4,3,"div",11)(18,kMe,4,3,"div",11),a(),o(19,"div",12)(20,"button",13),x("click",function(){g(e);let r=p();return f(r.close())}),l(21,"Close"),a(),b(22,IMe,3,4,"button",14)(23,DMe,3,4,"button",14)(24,AMe,3,0,"button",15),a()()()}if(n&2){let e=p();c(8),ie("active",e.activeTab==="attendance"),c(3),ie("active",e.activeTab==="project"),c(4),m("ngIf",e.activeTab==="attendance"&&!e.showResults),c(),m("ngIf",e.activeTab==="project"&&!e.showResults),c(),m("ngIf",e.showResults&&e.activeTab==="attendance"),c(),m("ngIf",e.showResults&&e.activeTab==="project"),c(4),m("ngIf",e.activeTab==="attendance"&&!e.showResults),c(),m("ngIf",e.activeTab==="project"&&!e.showResults),c(),m("ngIf",e.showResults)}}var A2=class n{constructor(t,e){this.payrollService=t;this.employeeService=e}showDialog=!1;closeDialog=new hi;timesheetsGenerated=new hi;activeTab="attendance";employees=[];selectedEmployeeIds=[];selectAllEmployees=!0;attendanceForm={startDate:"",endDate:"",payFrequency:"MONTHLY"};projectForm={startDate:"",endDate:"",projectCode:"",projectName:""};payFrequencies=[{value:"WEEKLY",label:"Weekly"},{value:"BI_WEEKLY",label:"Bi-Weekly"},{value:"SEMI_MONTHLY",label:"Semi-Monthly"},{value:"MONTHLY",label:"Monthly"}];generatedAttendanceTimesheets=[];generatedProjectTimesheets=[];generating=!1;showResults=!1;ngOnInit(){this.loadEmployees(),this.setDefaultDates()}loadEmployees(){this.employeeService.getActive().subscribe({next:t=>{this.employees=t},error:t=>console.error("Error loading employees:",t)})}setDefaultDates(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);this.attendanceForm.startDate=e.toISOString().split("T")[0],this.attendanceForm.endDate=i.toISOString().split("T")[0],this.projectForm.startDate=e.toISOString().split("T")[0],this.projectForm.endDate=i.toISOString().split("T")[0]}switchTab(t){this.activeTab=t,this.showResults=!1,this.generatedAttendanceTimesheets=[],this.generatedProjectTimesheets=[]}toggleSelectAll(){this.selectAllEmployees?this.selectedEmployeeIds=[]:this.selectedEmployeeIds=this.employees.map(t=>t.id)}toggleEmployeeSelection(t){let e=this.selectedEmployeeIds.indexOf(t);e>-1?this.selectedEmployeeIds.splice(e,1):this.selectedEmployeeIds.push(t),this.selectAllEmployees=this.selectedEmployeeIds.length===0}isEmployeeSelected(t){return this.selectAllEmployees||this.selectedEmployeeIds.includes(t)}generateAttendanceTimesheets(){this.generating=!0;let t={startDate:this.attendanceForm.startDate,endDate:this.attendanceForm.endDate,type:"ATTENDANCE"};!this.selectAllEmployees&&this.selectedEmployeeIds.length>0&&(t.employeeIds=this.selectedEmployeeIds),this.payrollService.generateTimesheetsFromAttendance(t).subscribe({next:e=>{this.generating=!1,this.showResults=!0,this.generatedAttendanceTimesheets=e.timesheets||[],this.timesheetsGenerated.emit({type:"ATTENDANCE",count:e.generated})},error:e=>{this.generating=!1,console.error("Error generating attendance timesheets:",e),alert("Error generating attendance timesheets")}})}generateProjectTimesheets(){if(!this.projectForm.projectCode||!this.projectForm.projectName){alert("Please enter project code and project name");return}this.generating=!0;let t={startDate:this.projectForm.startDate,endDate:this.projectForm.endDate,type:"PROJECT",projectCode:this.projectForm.projectCode,projectName:this.projectForm.projectName};!this.selectAllEmployees&&this.selectedEmployeeIds.length>0&&(t.employeeIds=this.selectedEmployeeIds),this.payrollService.generateTimesheetsFromAttendance(t).subscribe({next:e=>{this.generating=!1,this.showResults=!0,this.generatedProjectTimesheets=e.timesheets||[],this.timesheetsGenerated.emit({type:"PROJECT",count:e.generated})},error:e=>{this.generating=!1,console.error("Error generating project timesheets:",e),alert("Error generating project timesheets")}})}getEmployeeName(t){return t.employee?`${t.employee.firstName||""} ${t.employee.lastName||""}`.trim():"Unknown"}close(){this.showResults=!1,this.generatedAttendanceTimesheets=[],this.generatedProjectTimesheets=[],this.closeDialog.emit()}static \u0275fac=function(e){return new(e||n)(V(vi),V(ai))};static \u0275cmp=_e({type:n,selectors:[["app-timesheet-generation-dialog"]],inputs:{showDialog:"showDialog"},outputs:{closeDialog:"closeDialog",timesheetsGenerated:"timesheetsGenerated"},decls:1,vars:1,consts:[["class","modal-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal","dialog-large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"tabs"],[1,"tab-btn",3,"click"],[1,"fas","fa-clock"],[1,"fas","fa-project-diagram"],[1,"modal-body"],["class","tab-content",4,"ngIf"],["class","results-section",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"tab-content"],[1,"info-box"],[1,"fas","fa-info-circle"],[1,"form-section"],[1,"form-row"],[1,"form-group"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date","required","",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","change","ngModel"],["class","employee-list",4,"ngIf"],[3,"value"],[1,"employee-list"],["class","checkbox-label",4,"ngFor","ngForOf"],["type","checkbox",3,"change","checked"],["type","text","placeholder","e.g., PRJ-001","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Project name","required","",3,"ngModelChange","ngModel"],[1,"results-section"],["class","success-message",4,"ngIf"],["class","warning-message",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"success-message"],[1,"fas","fa-check-circle"],[1,"warning-message"],[1,"fas","fa-exclamation-triangle"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"code"],[1,"status-badge","pending"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-cog"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"]],template:function(e,i){e&1&&b(0,RMe,25,11,"div",0),e&2&&m("ngIf",i.showDialog)},dependencies:[At,Se,be,Vt,je,We,Ie,Yt,Ue,Oe,cn,Ee,Rt,yn,ir],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 60px #0000004d;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.dialog-large[_ngcontent-%COMP%]{width:900px;max-width:95vw}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb;background:#f8fafc}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1e293b}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;padding:4px 8px;line-height:1;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#1e293b}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e5e7eb;background:#f8fafc;padding:0 24px}.tab-btn[_ngcontent-%COMP%]{padding:14px 24px;border:none;background:none;cursor:pointer;font-size:.95rem;color:#64748b;border-bottom:3px solid transparent;margin-bottom:-1px;display:flex;align-items:center;gap:8px;transition:all .2s}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.tab-btn[_ngcontent-%COMP%]:hover{color:#3b82f6;background:#3b82f60d}.tab-btn.active[_ngcontent-%COMP%]{color:#3b82f6;border-bottom-color:#3b82f6;font-weight:500}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.info-box[_ngcontent-%COMP%]{background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:14px 16px;display:flex;align-items:flex-start;gap:12px;margin-bottom:24px}.info-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:1.1rem;margin-top:2px}.info-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1e40af;font-size:.9rem;line-height:1.5}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:.95rem;font-weight:600;color:#374151}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:.95rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.checkbox-group[_ngcontent-%COMP%]{margin-bottom:12px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;padding:8px 0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#374151}.employee-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:8px;padding:8px 12px;background:#f9fafb}.employee-list[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{padding:6px 0;border-bottom:1px solid #e5e7eb}.employee-list[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:last-child{border-bottom:none}.results-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:#dcfce7;border:1px solid #86efac;border-radius:8px;padding:14px 16px;display:flex;align-items:center;gap:12px;margin-bottom:20px}.results-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#16a34a;font-size:1.2rem}.results-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#166534;font-weight:500}.results-section[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{background:#fef3c7;border:1px solid #fcd34d;border-radius:8px;padding:14px 16px;display:flex;align-items:center;gap:12px;margin-bottom:20px}.results-section[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#d97706;font-size:1.2rem}.results-section[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#92400e}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #e5e7eb;border-radius:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600;font-size:.8rem;text-transform:uppercase;color:#64748b;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;color:#374151}.data-table[_ngcontent-%COMP%]   td.code[_ngcontent-%COMP%]{font-family:Monaco,Menlo,monospace;font-size:.85rem;color:#3b82f6}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f8fafc}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.approved[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb;background:#f8fafc}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn.btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d1d5db}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}"]})};var FMe=n=>["/app/payroll/process",n];function NMe(n,t){if(n&1){let e=F();o(0,"button",23),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.calculatePayroll(r))}),y(1,"i",24),l(2," Calculate "),a()}if(n&2){let e=p(2);m("disabled",e.calculating)}}function LMe(n,t){if(n&1&&(o(0,"a",25),y(1,"i",26),l(2," Review "),a()),n&2){let e=p().$implicit;m("routerLink",zc(1,FMe,e.id))}}function VMe(n,t){n&1&&(o(0,"span",27),y(1,"i",28),l(2," Completed "),a())}function BMe(n,t){if(n&1&&(o(0,"tr")(1,"td",15),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"date"),Le(8,"date"),a(),o(9,"td"),l(10),Le(11,"date"),a(),o(12,"td"),l(13),a(),o(14,"td",16),l(15),Le(16,"number"),a(),o(17,"td",17),l(18),Le(19,"number"),a(),o(20,"td")(21,"span",18),l(22),a()(),o(23,"td",19),b(24,NMe,3,1,"button",20)(25,LMe,3,3,"a",21)(26,VMe,3,0,"span",22),a()()),n&2){let e=t.$implicit,i=p();c(2),_(e.payrollRunNumber),c(2),_(e.description),c(2),Ge("",rt(7,13,e.periodStartDate,"MMM d")," - ",rt(8,16,e.periodEndDate,"MMM d, yyyy")),c(4),_(rt(11,19,e.payDate,"MMM d, yyyy")),c(3),_(e.totalEmployees||0),c(2),D("$",rt(16,22,e.totalGrossPay,"1.2-2")),c(3),D("$",rt(19,25,e.totalNetPay,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngIf",i.canCalculate(e)),c(),m("ngIf",e.status==="CALCULATED"),c(),m("ngIf",e.status==="PROCESSED")}}function UMe(n,t){n&1&&(o(0,"tr")(1,"td",29),l(2,"No payroll runs found. Create one to get started."),a()())}function jMe(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4,"Create Payroll Run"),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.closeCreateModal())}),l(6,"\xD7"),a()(),o(7,"div",34)(8,"div",35)(9,"label"),l(10,"Payroll Run Number *"),a(),o(11,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.newRun.payrollRunNumber,r)||(s.newRun.payrollRunNumber=r),f(r)}),a()(),o(12,"div",35)(13,"label"),l(14,"Description"),a(),o(15,"input",37),S("ngModelChange",function(r){g(e);let s=p();return P(s.newRun.description,r)||(s.newRun.description=r),f(r)}),a()(),o(16,"div",38)(17,"div",35)(18,"label"),l(19,"Period Start Date *"),a(),o(20,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.newRun.periodStartDate,r)||(s.newRun.periodStartDate=r),f(r)}),a()(),o(21,"div",35)(22,"label"),l(23,"Period End Date *"),a(),o(24,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.newRun.periodEndDate,r)||(s.newRun.periodEndDate=r),f(r)}),a()()(),o(25,"div",35)(26,"label"),l(27,"Pay Date *"),a(),o(28,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.newRun.payDate,r)||(s.newRun.payDate=r),f(r)}),a()()(),o(29,"div",40)(30,"button",41),x("click",function(){g(e);let r=p();return f(r.closeCreateModal())}),l(31,"Cancel"),a(),o(32,"button",42),x("click",function(){g(e);let r=p();return f(r.createPayrollRun())}),l(33),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newRun.payrollRunNumber),c(4),M("ngModel",e.newRun.description),c(5),M("ngModel",e.newRun.periodStartDate),c(4),M("ngModel",e.newRun.periodEndDate),c(4),M("ngModel",e.newRun.payDate),c(2),m("disabled",e.creating),c(2),m("disabled",e.creating),c(),D(" ",e.creating?"Creating...":"Create Payroll Run"," ")}}var R2=class n{constructor(t){this.payrollService=t}payrollRuns=[];payFrequencies=[];showCreateModal=!1;showTimesheetDialog=!1;newRun={};creating=!1;calculating=!1;ngOnInit(){this.loadPayrollRuns(),this.loadPayFrequencies(),this.resetNewRun()}resetNewRun(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);this.newRun={payrollRunNumber:`PR-${Date.now()}`,description:`Payroll for ${t.toLocaleString("default",{month:"long"})} ${t.getFullYear()}`,periodStartDate:e.toISOString().split("T")[0],periodEndDate:i.toISOString().split("T")[0],payDate:i.toISOString().split("T")[0]}}loadPayrollRuns(){this.payrollService.getPayrollRuns().subscribe({next:t=>this.payrollRuns=t,error:t=>console.error("Error loading payroll runs:",t)})}loadPayFrequencies(){this.payrollService.getPayFrequencies().subscribe({next:t=>this.payFrequencies=t,error:t=>console.error("Error loading frequencies:",t)})}openCreateModal(){this.resetNewRun(),this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createPayrollRun(){this.creating=!0,this.payrollService.createPayrollRun(this.newRun).subscribe({next:()=>{this.creating=!1,this.closeCreateModal(),this.loadPayrollRuns()},error:t=>{this.creating=!1,console.error("Error creating payroll run:",t)}})}calculatePayroll(t){t.id&&(this.calculating=!0,this.payrollService.calculatePayroll(t.id).subscribe({next:()=>{this.calculating=!1,this.loadPayrollRuns(),alert("Payroll calculated successfully!")},error:e=>{this.calculating=!1,console.error("Error calculating payroll:",e),alert("Error calculating payroll")}}))}getStatusClass(t){switch(t){case"CALCULATED":return"calculated";case"APPROVED":return"approved";case"PROCESSED":return"processed";case"CALCULATING":return"calculating";default:return"draft"}}canCalculate(t){return t.status==="DRAFT"}openTimesheetDialog(){this.showTimesheetDialog=!0}closeTimesheetDialog(){this.showTimesheetDialog=!1}onTimesheetsGenerated(t){console.log("Timesheets generated:",t),this.showTimesheetDialog=!1,this.loadPayrollRuns(),t.type==="attendance"?alert(`Successfully generated ${t.count||0} attendance timesheet(s) from approved records.`):t.type==="project"&&alert(`Successfully created project timesheet for ${t.employeeName||"employee"}.`)}static \u0275fac=function(e){return new(e||n)(V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-payroll-calculation"]],decls:56,vars:4,consts:[[1,"payroll-calc-container"],[1,"page-header"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-clock"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"info-card"],[1,"fas","fa-info-circle"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"closeDialog","timesheetsGenerated","showDialog"],[1,"run-number"],[1,"amount"],[1,"amount","net"],[1,"status-badge",3,"ngClass"],[1,"actions"],["class","btn btn-sm btn-primary","title","Calculate Payroll",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-secondary","title","Review & Process",3,"routerLink",4,"ngIf"],["class","processed-label",4,"ngIf"],["title","Calculate Payroll",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"fas","fa-calculator"],["title","Review & Process",1,"btn","btn-sm","btn-secondary",3,"routerLink"],[1,"fas","fa-arrow-right"],[1,"processed-label"],[1,"fas","fa-check-circle"],["colspan","9",1,"no-data"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","required","",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date","required","",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Payroll Calculation"),a(),o(4,"div",2)(5,"button",3),x("click",function(){return i.openTimesheetDialog()}),y(6,"i",4),l(7," Generate Timesheets "),a(),o(8,"button",5),x("click",function(){return i.openCreateModal()}),y(9,"i",6),l(10," Create Payroll Run "),a()()(),o(11,"div",7),y(12,"i",8),o(13,"div")(14,"strong"),l(15,"3-Phase Payroll Processing Workflow:"),a(),o(16,"ol")(17,"li")(18,"strong"),l(19,"Phase 1:"),a(),l(20," Daily attendance tracking with clock in/out and approval"),a(),o(21,"li")(22,"strong"),l(23,"Phase 2:"),a(),l(24,' Click "Generate Timesheets" to create attendance or project timesheets from approved records'),a(),o(25,"li")(26,"strong"),l(27,"Phase 3:"),a(),l(28," Create payroll run, calculate payroll from approved timesheets, review and process"),a()()()(),o(29,"div",9)(30,"table",10)(31,"thead")(32,"tr")(33,"th"),l(34,"Payroll Run #"),a(),o(35,"th"),l(36,"Description"),a(),o(37,"th"),l(38,"Period"),a(),o(39,"th"),l(40,"Pay Date"),a(),o(41,"th"),l(42,"Employees"),a(),o(43,"th"),l(44,"Gross Pay"),a(),o(45,"th"),l(46,"Net Pay"),a(),o(47,"th"),l(48,"Status"),a(),o(49,"th"),l(50,"Actions"),a()()(),o(51,"tbody"),b(52,BMe,27,28,"tr",11)(53,UMe,3,0,"tr",12),a()()()(),b(54,jMe,34,8,"div",13),o(55,"app-timesheet-generation-dialog",14),x("closeDialog",function(){return i.closeTimesheetDialog()})("timesheetsGenerated",function(s){return i.onTimesheetsGenerated(s)}),a()),e&2&&(c(52),m("ngForOf",i.payrollRuns),c(),m("ngIf",i.payrollRuns.length===0),c(),m("ngIf",i.showCreateModal),c(),m("showDialog",i.showTimesheetDialog))},dependencies:[At,ot,Se,be,Vt,Ie,Oe,cn,Ee,Ns,ht,A2,Rt,yn,ir],styles:[".payroll-calc-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease;text-decoration:none}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.info-card[_ngcontent-%COMP%]{display:flex;gap:16px;background:#e3f2fd;padding:16px 20px;border-radius:8px;margin-bottom:20px;align-items:flex-start}.info-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#1565c0}.info-card[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#333}.info-card[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   .run-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.data-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:monospace}.data-table[_ngcontent-%COMP%]   .amount.net[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:4px;font-size:11px;font-weight:500}.data-table[_ngcontent-%COMP%]   .status-badge.draft[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge.calculating[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.data-table[_ngcontent-%COMP%]   .status-badge.calculated[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.data-table[_ngcontent-%COMP%]   .status-badge.processed[_ngcontent-%COMP%]{background:#28a745;color:#fff}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .processed-label[_ngcontent-%COMP%]{color:#28a745;font-size:12px;display:flex;align-items:center;gap:4px}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90%}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:teal}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}"]})};function WMe(n,t){n&1&&(o(0,"div",8),y(1,"i",9),o(2,"h3"),l(3,"No Payroll Runs Ready"),a(),o(4,"p"),l(5,"Approve timesheets first to create payroll runs for processing."),a()())}function zMe(n,t){if(n&1){let e=F();o(0,"div",12),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.selectRun(r))}),o(1,"div",13)(2,"span",14),l(3),a(),o(4,"span",15),l(5),a()(),o(6,"div",16)(7,"div",17)(8,"span",18),l(9,"Pay Period:"),a(),o(10,"span",19),l(11),a()(),o(12,"div",17)(13,"span",18),l(14,"Pay Date:"),a(),o(15,"span",19),l(16),a()(),o(17,"div",17)(18,"span",18),l(19,"Employees:"),a(),o(20,"span",19),l(21),a()(),o(22,"div",17)(23,"span",18),l(24,"Total Net Pay:"),a(),o(25,"span",20),l(26),a()()(),o(27,"div",21)(28,"button",22),y(29,"i",23),l(30," View & Process "),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(3),_(e.payrollRunNumber),c(),m("ngClass",i.getStatusClass(e.status)),c(),_(i.getStatusLabel(e.status)),c(6),Ge("",e.periodStartDate," - ",e.periodEndDate),c(5),_(e.payDate),c(5),_(e.totalEmployees||0),c(5),D("$",(e.totalNetPay||0).toFixed(2))}}function qMe(n,t){if(n&1&&(o(0,"div",10),b(1,zMe,31,8,"div",11),a()),n&2){let e=p(2);c(),m("ngForOf",e.payrollRuns)}}function HMe(n,t){if(n&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),y(4,"i",5),l(5," Process Payroll"),a()()(),b(6,WMe,6,0,"div",6)(7,qMe,2,1,"div",7),a()),n&2){let e=p();c(6),m("ngIf",e.payrollRuns.length===0),c(),m("ngIf",e.payrollRuns.length>0)}}function GMe(n,t){if(n&1&&(o(0,"span",46),l(1),a()),n&2){let e=p(2);c(),_(e.payrollRun.payrollRunNumber)}}function $Me(n,t){if(n&1&&(o(0,"span",50),y(1,"i",51),l(2),a()),n&2){let e=p(3);c(2),D(" ",e.getProcessedRecordsCount()," Processed ")}}function YMe(n,t){if(n&1&&(o(0,"span",52),y(1,"i",53),l(2),a()),n&2){let e=p(3);c(2),D(" ",e.getUnprocessedRecordsCount()," Pending ")}}function JMe(n,t){if(n&1&&(o(0,"div",47),b(1,$Me,3,1,"span",48)(2,YMe,3,1,"span",49),a()),n&2){let e=p(2);c(),m("ngIf",e.getProcessedRecordsCount()>0),c(),m("ngIf",e.getUnprocessedRecordsCount()>0)}}function KMe(n,t){if(n&1){let e=F();o(0,"button",54),x("click",function(){g(e);let r=p(2);return f(r.processPayroll())}),y(1,"i",55),l(2),a()}if(n&2){let e=p(2);m("disabled",e.processing||!e.canProcess()),c(2),D(" ",e.processing?"Processing...":e.selectedRecordIds.size>0?"Process Selected ("+e.selectedRecordIds.size+")":"Process All ("+e.getUnprocessedRecordsCount()+")"," ")}}function QMe(n,t){n&1&&(o(0,"span",56),y(1,"i",55),l(2," Fully Processed "),a())}function XMe(n,t){n&1&&(o(0,"span",67),l(1,"Pay date is required"),a())}function ZMe(n,t){if(n&1){let e=F();o(0,"div",57)(1,"div",58)(2,"span",18),l(3,"Pay Period"),a(),o(4,"span",19),l(5),a()(),o(6,"div",59)(7,"span",18),l(8,"Pay Date "),o(9,"span",60),l(10,"*"),a()(),o(11,"input",61),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.payDate,r)||(s.payDate=r),f(r)}),a(),b(12,XMe,2,0,"span",62),a(),o(13,"div",58)(14,"span",18),l(15,"Employees"),a(),o(16,"span",19),l(17),a()(),o(18,"div",58)(19,"span",18),l(20,"Gross Pay"),a(),o(21,"span",20),l(22),a()(),o(23,"div",58)(24,"span",18),l(25,"Deductions"),a(),o(26,"span",63),l(27),a()(),o(28,"div",58)(29,"span",18),l(30,"Taxes"),a(),o(31,"span",20),l(32),a()(),o(33,"div",64)(34,"span",18),l(35,"Net Pay"),a(),o(36,"span",65),l(37),a()(),o(38,"div",66)(39,"span",18),l(40,"Employer Contributions"),a(),o(41,"span",20),l(42),a()()()}if(n&2){let e=p(2);c(5),Ge("",e.payrollRun.periodStartDate," - ",e.payrollRun.periodEndDate),c(),ie("error",e.showPayDateError),c(5),ie("error-border",e.showPayDateError),M("ngModel",e.payDate),m("disabled",(e.payrollRun==null?null:e.payrollRun.status)==="PROCESSED"||(e.payrollRun==null?null:e.payrollRun.status)==="FULLY_PROCESSED"),c(),m("ngIf",e.showPayDateError),c(5),_(e.payrollRecords.length),c(5),D("$",e.summary.totalGrossPay.toFixed(2)),c(5),D("$",e.summary.totalDeductions.toFixed(2)),c(5),D("$",e.summary.totalTaxes.toFixed(2)),c(5),D("$",e.summary.totalNetPay.toFixed(2)),c(5),D("$",e.summary.totalEmployerContributions.toFixed(2))}}function eSe(n,t){if(n&1&&(o(0,"div",68),y(1,"i",55),o(2,"div")(3,"strong"),l(4,"Account Postings Completed:"),a(),o(5,"ul")(6,"li"),l(7),a(),o(8,"li"),l(9),a(),o(10,"li"),l(11),a(),o(12,"li"),l(13),a(),o(14,"li"),l(15),a()()()()),n&2){let e=p(2);c(7),D("Salary Expenses: $",(e.accountPostings.salaryExpenses==null?null:e.accountPostings.salaryExpenses.toFixed(2))||"0.00"),c(2),D("Employer Contributions: $",(e.accountPostings.employerContributions==null?null:e.accountPostings.employerContributions.toFixed(2))||"0.00"),c(2),D("Loan Deductions: $",(e.accountPostings.loanDeductions==null?null:e.accountPostings.loanDeductions.toFixed(2))||"0.00"),c(2),D("Tax Liabilities: $",(e.accountPostings.taxLiabilities==null?null:e.accountPostings.taxLiabilities.toFixed(2))||"0.00"),c(2),D("Net Payable: $",(e.accountPostings.netPayable==null?null:e.accountPostings.netPayable.toFixed(2))||"0.00")}}function tSe(n,t){if(n&1&&(o(0,"div",69),y(1,"i",70),l(2),a()),n&2){let e=p(2);c(2),D(" ",e.selectedRecordIds.size," employee(s) selected for processing ")}}function nSe(n,t){if(n&1){let e=F();o(0,"button",81),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.downloadPayslip(r))}),y(1,"i",82),a()}}function iSe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",42)(2,"input",71),x("change",function(){let r=g(e).$implicit,s=p(2);return f(s.toggleRecord(r))}),a()(),o(3,"td"),l(4),a(),o(5,"td",72),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",73),l(11),a()(),o(12,"td",44),l(13),a(),o(14,"td",44),l(15),a(),o(16,"td",44),l(17),a(),o(18,"td",44),l(19),a(),o(20,"td",44),l(21),a(),o(22,"td",74),l(23),a(),o(24,"td",75),l(25),a(),o(26,"td",44),l(27),a(),o(28,"td",76),l(29),a(),o(30,"td")(31,"span",77),l(32),a()(),o(33,"td",78)(34,"button",79),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewRecordDetails(r))}),y(35,"i",23),a(),b(36,nSe,2,0,"button",80),a()()}if(n&2){let e=t.$implicit,i=p(2);ie("selected",i.isSelected(e))("processed",e.status==="PROCESSED"),c(2),m("checked",i.isSelected(e))("disabled",e.status==="PROCESSED"),c(2),_(i.getEmployeeCode(e)),c(2),_(i.getEmployeeName(e)),c(2),_(e.projectCode||(e.employee==null||e.employee.department==null?null:e.employee.department.name)||"General"),c(3),_(e.employeeType||"SALARIED"),c(2),_((e.regularHours==null?null:e.regularHours.toFixed(2))||"0.00"),c(2),_((e.overtimeHours==null?null:e.overtimeHours.toFixed(2))||"0.00"),c(2),D("$",(e.basePay==null?null:e.basePay.toFixed(2))||"0.00"),c(2),D("$",(e.overtimePay==null?null:e.overtimePay.toFixed(2))||"0.00"),c(2),D("$",(e.reimbursements==null?null:e.reimbursements.toFixed(2))||"0.00"),c(2),D("$",(e.grossPay==null?null:e.grossPay.toFixed(2))||"0.00"),c(2),D("$",(e.totalDeductions==null?null:e.totalDeductions.toFixed(2))||"0.00"),c(2),D("$",(e.totalTaxes==null?null:e.totalTaxes.toFixed(2))||"0.00"),c(2),D("$",(e.netPay==null?null:e.netPay.toFixed(2))||"0.00"),c(2),m("ngClass",i.getStatusClass(e.status||"CALCULATED")),c(),D(" ",e.status||"CALCULATED"," "),c(4),m("ngIf",e.status==="PROCESSED")}}function rSe(n,t){n&1&&(o(0,"tr")(1,"td",83),l(2,"No payroll records found. Calculate payroll first."),a()())}function oSe(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",84)(2,"td",85)(3,"strong"),l(4),a()(),o(5,"td",44)(6,"strong"),l(7),a()(),o(8,"td",44)(9,"strong"),l(10),a()(),o(11,"td",44)(12,"strong"),l(13),a()(),o(14,"td",74)(15,"strong"),l(16),a()(),o(17,"td",75)(18,"strong"),l(19),a()(),o(20,"td",44)(21,"strong"),l(22),a()(),o(23,"td",76)(24,"strong"),l(25),a()(),y(26,"td",86),a()()),n&2){let e=p(2);c(4),D("Totals ",e.selectedRecordIds.size>0?"(Selected)":"(All)"),c(3),D("$",e.summary.totalBasePay.toFixed(2)),c(3),D("$",e.summary.totalOvertimePay.toFixed(2)),c(3),D("$",e.summary.totalReimbursements.toFixed(2)),c(3),D("$",e.summary.totalGrossPay.toFixed(2)),c(3),D("$",e.summary.totalDeductions.toFixed(2)),c(3),D("$",e.summary.totalTaxes.toFixed(2)),c(3),D("$",e.summary.totalNetPay.toFixed(2))}}function aSe(n,t){if(n&1){let e=F();o(0,"div")(1,"div",3)(2,"div",4)(3,"button",24),x("click",function(){g(e);let r=p();return f(r.goBack())}),y(4,"i",25),a(),o(5,"div")(6,"h2"),l(7,"Process Payroll"),a(),b(8,GMe,2,1,"span",26),a()(),b(9,JMe,3,2,"div",27)(10,KMe,3,2,"button",28)(11,QMe,3,0,"span",29),a(),b(12,ZMe,43,15,"div",30)(13,eSe,16,5,"div",31)(14,tSe,3,1,"div",32),o(15,"div",33)(16,"div",34),y(17,"i",35),o(18,"strong"),l(19,"Payroll Calculation Summary"),a()(),o(20,"div",36)(21,"div",37)(22,"span",38),l(23,"Salaried:"),a(),o(24,"span",39),l(25,"Base Pay = Annual Salary \xF7 Pay Periods; OT = Hourly Rate \xD7 OT Hours \xD7 1.5"),a()(),o(26,"div",37)(27,"span",38),l(28,"Hourly:"),a(),o(29,"span",39),l(30,"Regular Pay = Hours \xD7 Rate; OT = OT Hours \xD7 Rate \xD7 1.5"),a()(),o(31,"div",37)(32,"span",38),l(33,"Taxes:"),a(),o(34,"span",39),l(35,"SS (6.2%) + Medicare (1.45%) + Disability (0.9%) + Federal + State"),a()()()(),o(36,"div",40)(37,"h3"),l(38),a(),o(39,"table",41)(40,"thead")(41,"tr")(42,"th",42)(43,"input",43),x("change",function(r){g(e);let s=p();return f(s.toggleSelectAll(r))}),a()(),o(44,"th"),l(45,"Employee Code"),a(),o(46,"th"),l(47,"Employee Name"),a(),o(48,"th"),l(49,"Project"),a(),o(50,"th"),l(51,"Type"),a(),o(52,"th",44),l(53,"Regular Hrs"),a(),o(54,"th",44),l(55,"OT Hrs"),a(),o(56,"th",44),l(57,"Base Pay"),a(),o(58,"th",44),l(59,"OT Pay"),a(),o(60,"th",44),l(61,"Reimburse"),a(),o(62,"th",44),l(63,"Gross Pay"),a(),o(64,"th",44),l(65,"Deductions"),a(),o(66,"th",44),l(67,"Taxes"),a(),o(68,"th",44),l(69,"Net Pay"),a(),o(70,"th"),l(71,"Status"),a(),o(72,"th"),l(73,"Actions"),a()()(),o(74,"tbody"),b(75,iSe,37,22,"tr",45)(76,rSe,3,0,"tr",1),a(),b(77,oSe,27,8,"tfoot",1),a()()()}if(n&2){let e=p();c(8),m("ngIf",e.payrollRun),c(),m("ngIf",(e.payrollRun==null?null:e.payrollRun.status)!=="PROCESSED"),c(),m("ngIf",(e.payrollRun==null?null:e.payrollRun.status)!=="PROCESSED"&&(e.payrollRun==null?null:e.payrollRun.status)!=="FULLY_PROCESSED"),c(),m("ngIf",(e.payrollRun==null?null:e.payrollRun.status)==="PROCESSED"||(e.payrollRun==null?null:e.payrollRun.status)==="FULLY_PROCESSED"),c(),m("ngIf",e.payrollRun),c(),m("ngIf",e.accountPostings),c(),m("ngIf",e.selectedRecordIds.size>0),c(24),D("Employee Payroll Details ",e.selectedRecordIds.size>0?"(Selected: "+e.selectedRecordIds.size+")":""),c(5),m("checked",e.isAllSelected()),c(32),m("ngForOf",e.payrollRecords),c(),m("ngIf",e.payrollRecords.length===0),c(),m("ngIf",e.payrollRecords.length>0)}}function sSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(2),D("Overtime Pay (",e.selectedRecord.overtimeHours==null?null:e.selectedRecord.overtimeHours.toFixed(1)," hrs \xD7 1.5)"),c(2),D("$",(e.selectedRecord.overtimePay==null?null:e.selectedRecord.overtimePay.toFixed(2))||"0.00")}}function lSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Bonuses"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.bonuses==null?null:e.selectedRecord.bonuses.toFixed(2))||"0.00")}}function cSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Reimbursements"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.reimbursements==null?null:e.selectedRecord.reimbursements.toFixed(2))||"0.00")}}function dSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Health Insurance"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.healthInsurance==null?null:e.selectedRecord.healthInsurance.toFixed(2))||"0.00")}}function pSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Dental Insurance"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.dentalInsurance==null?null:e.selectedRecord.dentalInsurance.toFixed(2))||"0.00")}}function mSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Vision Insurance"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.visionInsurance==null?null:e.selectedRecord.visionInsurance.toFixed(2))||"0.00")}}function uSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"401(k) Contribution"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.retirement401k==null?null:e.selectedRecord.retirement401k.toFixed(2))||"0.00")}}function gSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"HSA Contribution"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.hsaContribution==null?null:e.selectedRecord.hsaContribution.toFixed(2))||"0.00")}}function fSe(n,t){if(n&1&&(o(0,"div",97)(1,"span"),l(2,"Total Pre-Tax"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.preTaxDeductions==null?null:e.selectedRecord.preTaxDeductions.toFixed(2))||"0.00")}}function hSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Federal Income Tax"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.federalTax==null?null:e.selectedRecord.federalTax.toFixed(2))||"0.00")}}function _Se(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"State Income Tax"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.stateTax==null?null:e.selectedRecord.stateTax.toFixed(2))||"0.00")}}function vSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Social Security (6.2%)"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.socialSecurityTax==null?null:e.selectedRecord.socialSecurityTax.toFixed(2))||"0.00")}}function xSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Medicare (1.45%)"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.medicareTax==null?null:e.selectedRecord.medicareTax.toFixed(2))||"0.00")}}function ySe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Disability (0.9%)"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(3);c(4),D("$",(e.selectedRecord.disabilityTax==null?null:e.selectedRecord.disabilityTax.toFixed(2))||"0.00")}}function CSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Loan Deductions"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.loanDeductions==null?null:e.selectedRecord.loanDeductions.toFixed(2))||"0.00")}}function bSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Garnishments"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.garnishments==null?null:e.selectedRecord.garnishments.toFixed(2))||"0.00")}}function MSe(n,t){if(n&1&&(o(0,"div",95)(1,"h4"),l(2,"Post-Tax Deductions"),a(),b(3,CSe,5,1,"div",96)(4,bSe,5,1,"div",96),o(5,"div",97)(6,"span"),l(7,"Total Post-Tax"),a(),o(8,"span"),l(9),a()()()),n&2){let e=p(3);c(3),m("ngIf",e.selectedRecord.loanDeductions&&e.selectedRecord.loanDeductions>0),c(),m("ngIf",e.selectedRecord.garnishments&&e.selectedRecord.garnishments>0),c(5),D("$",(e.selectedRecord.postTaxDeductions==null?null:e.selectedRecord.postTaxDeductions.toFixed(2))||"0.00")}}function SSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Employer Social Security"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.employerSocialSecurity==null?null:e.selectedRecord.employerSocialSecurity.toFixed(2))||"0.00")}}function PSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Employer Medicare"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.employerMedicare==null?null:e.selectedRecord.employerMedicare.toFixed(2))||"0.00")}}function wSe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Employer Health Contribution"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.employerHealthContribution==null?null:e.selectedRecord.employerHealthContribution.toFixed(2))||"0.00")}}function ESe(n,t){if(n&1&&(o(0,"div",17)(1,"span"),l(2,"Employer 401(k) Match"),a(),o(3,"span"),l(4),a()()),n&2){let e=p(4);c(4),D("$",(e.selectedRecord.employer401kMatch==null?null:e.selectedRecord.employer401kMatch.toFixed(2))||"0.00")}}function OSe(n,t){if(n&1&&(o(0,"div",103)(1,"h4"),l(2,"Employer Contributions"),a(),b(3,SSe,5,1,"div",96)(4,PSe,5,1,"div",96)(5,wSe,5,1,"div",96)(6,ESe,5,1,"div",96),o(7,"div",97)(8,"span"),l(9,"Total Employer Contributions"),a(),o(10,"span"),l(11),a()()()),n&2){let e=p(3);c(3),m("ngIf",e.selectedRecord.employerSocialSecurity),c(),m("ngIf",e.selectedRecord.employerMedicare),c(),m("ngIf",e.selectedRecord.employerHealthContribution),c(),m("ngIf",e.selectedRecord.employer401kMatch),c(5),D("$",(e.selectedRecord.totalEmployerContributions==null?null:e.selectedRecord.totalEmployerContributions.toFixed(2))||"0.00")}}function TSe(n,t){if(n&1&&(o(0,"div",92)(1,"div",93)(2,"div",94)(3,"span"),l(4,"Employee Code:"),a(),o(5,"span"),l(6),a()(),o(7,"div",94)(8,"span"),l(9,"Employee Type:"),a(),o(10,"span"),l(11),a()(),o(12,"div",94)(13,"span"),l(14,"Annual Salary:"),a(),o(15,"span"),l(16),a()(),o(17,"div",94)(18,"span"),l(19,"Hourly Rate:"),a(),o(20,"span"),l(21),a()()(),o(22,"div",95)(23,"h4"),l(24,"Earnings"),a(),o(25,"div",17)(26,"span"),l(27,"Base Pay"),a(),o(28,"span"),l(29),a()(),b(30,sSe,5,2,"div",96)(31,lSe,5,1,"div",96)(32,cSe,5,1,"div",96),o(33,"div",97)(34,"span"),l(35,"Gross Pay"),a(),o(36,"span"),l(37),a()()(),o(38,"div",95)(39,"h4"),l(40,"Pre-Tax Deductions"),a(),b(41,dSe,5,1,"div",96)(42,pSe,5,1,"div",96)(43,mSe,5,1,"div",96)(44,uSe,5,1,"div",96)(45,gSe,5,1,"div",96)(46,fSe,5,1,"div",98),a(),o(47,"div",95)(48,"h4"),l(49,"Taxes"),a(),b(50,hSe,5,1,"div",96)(51,_Se,5,1,"div",96)(52,vSe,5,1,"div",96)(53,xSe,5,1,"div",96)(54,ySe,5,1,"div",96),o(55,"div",97)(56,"span"),l(57,"Total Taxes"),a(),o(58,"span"),l(59),a()()(),b(60,MSe,10,3,"div",99),o(61,"div",100)(62,"div",101)(63,"span"),l(64,"NET PAY"),a(),o(65,"span"),l(66),a()()(),b(67,OSe,12,5,"div",102),a()),n&2){let e=p(2);c(6),_(e.getEmployeeCode(e.selectedRecord)),c(5),_(e.selectedRecord.employeeType||"SALARIED"),c(5),D("$",(e.selectedRecord.annualSalary==null?null:e.selectedRecord.annualSalary.toFixed(2))||"0.00"),c(5),D("$",(e.selectedRecord.hourlyRate==null?null:e.selectedRecord.hourlyRate.toFixed(2))||"0.00"),c(8),D("$",(e.selectedRecord.basePay==null?null:e.selectedRecord.basePay.toFixed(2))||"0.00"),c(),m("ngIf",e.selectedRecord.overtimePay&&e.selectedRecord.overtimePay>0),c(),m("ngIf",e.selectedRecord.bonuses&&e.selectedRecord.bonuses>0),c(),m("ngIf",e.selectedRecord.reimbursements&&e.selectedRecord.reimbursements>0),c(5),D("$",(e.selectedRecord.grossPay==null?null:e.selectedRecord.grossPay.toFixed(2))||"0.00"),c(4),m("ngIf",e.selectedRecord.healthInsurance&&e.selectedRecord.healthInsurance>0),c(),m("ngIf",e.selectedRecord.dentalInsurance&&e.selectedRecord.dentalInsurance>0),c(),m("ngIf",e.selectedRecord.visionInsurance&&e.selectedRecord.visionInsurance>0),c(),m("ngIf",e.selectedRecord.retirement401k&&e.selectedRecord.retirement401k>0),c(),m("ngIf",e.selectedRecord.hsaContribution&&e.selectedRecord.hsaContribution>0),c(),m("ngIf",e.selectedRecord.preTaxDeductions&&e.selectedRecord.preTaxDeductions>0),c(4),m("ngIf",e.selectedRecord.federalTax),c(),m("ngIf",e.selectedRecord.stateTax),c(),m("ngIf",e.selectedRecord.socialSecurityTax),c(),m("ngIf",e.selectedRecord.medicareTax),c(),m("ngIf",e.selectedRecord.disabilityTax),c(5),D("$",(e.selectedRecord.totalTaxes==null?null:e.selectedRecord.totalTaxes.toFixed(2))||"0.00"),c(),m("ngIf",e.selectedRecord.postTaxDeductions&&e.selectedRecord.postTaxDeductions>0),c(6),D("$",(e.selectedRecord.netPay==null?null:e.selectedRecord.netPay.toFixed(2))||"0.00"),c(),m("ngIf",e.selectedRecord.totalEmployerContributions&&e.selectedRecord.totalEmployerContributions>0)}}function kSe(n,t){if(n&1){let e=F();o(0,"div",87)(1,"div",88),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",89)(3,"h3"),l(4),a(),o(5,"button",90),x("click",function(){g(e);let r=p();return f(r.closeDetailModal())}),l(6,"\xD7"),a()(),b(7,TSe,68,24,"div",91),a()()}if(n&2){let e=p();c(4),D("Pay Stub - ",e.getEmployeeName(e.selectedRecord)),c(3),m("ngIf",e.selectedRecord)}}var S_=class n{constructor(t,e,i){this.route=t;this.router=e;this.payrollService=i}payrollRuns=[];payrollRun=null;payrollRecords=[];selectedRecordIds=new Set;loading=!1;processing=!1;selectedRecord=null;showDetailModal=!1;accountPostings=null;viewMode="list";routeSub=null;payDate="";showPayDateError=!1;summary={totalGrossPay:0,totalDeductions:0,totalTaxes:0,totalNetPay:0,totalEmployerContributions:0,totalBasePay:0,totalOvertimePay:0,totalReimbursements:0};ngOnInit(){this.routeSub=this.route.paramMap.subscribe(t=>{let e=t.get("id");e?(this.viewMode="detail",this.loadPayrollRun(parseInt(e))):(this.viewMode="list",this.payrollRun=null,this.payrollRecords=[],this.loadPayrollRuns())})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}loadPayrollRuns(){this.loading=!0,this.payrollService.getPayrollRuns().subscribe({next:t=>{this.payrollRuns=t.filter(e=>{let i=e.status?.toUpperCase();return i==="APPROVED"||i==="CALCULATED"||i==="PARTIALLY_PROCESSED"}),this.loading=!1},error:t=>{console.error("Error loading payroll runs:",t),this.loading=!1}})}selectRun(t){t.id&&this.router.navigate(["/app/payroll/process",t.id])}loadPayrollRun(t){this.loading=!0,this.payrollService.getPayrollRun(t).subscribe({next:e=>{this.payrollRun=e,this.payDate=e.payDate||"",this.showPayDateError=!1,this.loadPayrollRecords(t)},error:e=>{console.error("Error loading payroll run:",e),this.loading=!1}})}loadPayrollRecords(t){this.payrollService.getPayrollRecordsByRun(t).subscribe({next:e=>{this.payrollRecords=e,this.calculateSummary(),this.loading=!1},error:e=>{console.error("Error loading records:",e),this.loading=!1}})}calculateSummary(){let t=this.getSelectedRecords(),e=t.length>0?t:this.payrollRecords;this.summary={totalGrossPay:e.reduce((i,r)=>i+(r.grossPay||0),0),totalDeductions:e.reduce((i,r)=>i+(r.totalDeductions||0),0),totalTaxes:e.reduce((i,r)=>i+(r.totalTaxes||0),0),totalNetPay:e.reduce((i,r)=>i+(r.netPay||0),0),totalEmployerContributions:e.reduce((i,r)=>i+(r.totalEmployerContributions||0),0),totalBasePay:e.reduce((i,r)=>i+(r.basePay||0),0),totalOvertimePay:e.reduce((i,r)=>i+(r.overtimePay||0),0),totalReimbursements:e.reduce((i,r)=>i+(r.reimbursements||0),0)}}toggleSelectAll(t){t.target.checked?this.payrollRecords.forEach(e=>{e.id&&e.status!=="PROCESSED"&&this.selectedRecordIds.add(e.id)}):this.selectedRecordIds.clear(),this.calculateSummary()}toggleRecord(t){t.id&&(this.selectedRecordIds.has(t.id)?this.selectedRecordIds.delete(t.id):this.selectedRecordIds.add(t.id),this.calculateSummary())}isSelected(t){return t.id?this.selectedRecordIds.has(t.id):!1}isAllSelected(){let t=this.payrollRecords.filter(e=>e.status!=="PROCESSED");return t.length>0&&t.every(e=>e.id&&this.selectedRecordIds.has(e.id))}getSelectedRecords(){return this.payrollRecords.filter(t=>t.id&&this.selectedRecordIds.has(t.id))}canProcess(){if(!this.payrollRun)return!1;let t=this.payrollRun.status,e=!!this.payDate,i=this.selectedRecordIds.size>0||this.payrollRecords.some(r=>r.status!=="PROCESSED");return(t==="CALCULATED"||t==="APPROVED")&&e&&i}getUnprocessedRecordsCount(){return this.selectedRecordIds.size>0?this.payrollRecords.filter(t=>t.id&&this.selectedRecordIds.has(t.id)&&t.status!=="PROCESSED").length:this.payrollRecords.filter(t=>t.status!=="PROCESSED").length}getProcessedRecordsCount(){return this.payrollRecords.filter(t=>t.status==="PROCESSED").length}processPayroll(){if(!this.payrollRun?.id)return;if(!this.payDate){this.showPayDateError=!0,alert("Please enter a Pay Date before processing payroll.");return}this.showPayDateError=!1;let t=this.getUnprocessedRecordsCount();if(t===0){alert("All records have already been processed. No duplicates allowed.");return}let e=Array.from(this.selectedRecordIds).filter(r=>{let s=this.payrollRecords.find(d=>d.id===r);return s&&s.status!=="PROCESSED"}),i=e.length>0?e.length:t;confirm(`Are you sure you want to process payroll for ${i} employee(s)?

Pay Date: ${this.payDate}

This action will:
\u2022 Mark selected records as PROCESSED
\u2022 Post to accounting ledgers
\u2022 Generate pay stubs

This action cannot be undone.`)&&(this.processing=!0,this.payrollService.processPayroll(this.payrollRun.id,{recordIds:e,payDate:this.payDate}).subscribe({next:r=>{this.processing=!1,this.accountPostings=r.accountPostings;let s=`Successfully processed ${r.processedCount} payroll record(s).

Pay Date: ${this.payDate}

Account Postings:
\u2022 Salary Expenses: $${r.totalGrossPay?.toFixed(2)||"0.00"}
\u2022 Employer Contributions: $${r.totalEmployerContributions?.toFixed(2)||"0.00"}
\u2022 Tax Liabilities: $${r.totalTaxes?.toFixed(2)||"0.00"}
\u2022 Net Payable: $${r.totalNetPay?.toFixed(2)||"0.00"}`;alert(s),this.selectedRecordIds.clear(),this.loadPayrollRun(this.payrollRun.id)},error:r=>{this.processing=!1,console.error("Error processing payroll:",r),alert("Error processing payroll: "+(r.error?.error||"Unknown error"))}}))}viewRecordDetails(t){this.selectedRecord=t,this.showDetailModal=!0}closeDetailModal(){this.showDetailModal=!1,this.selectedRecord=null}getEmployeeName(t){return t.employee&&`${t.employee.firstName||""} ${t.employee.lastName||""}`.trim()||"Unknown"}getEmployeeCode(t){return t.employee?.employeeCode||"N/A"}getStatusClass(t){switch(t?.toUpperCase()){case"CALCULATED":return"status-calculated";case"APPROVED":return"status-approved";case"PROCESSED":case"FULLY_PROCESSED":case"COMPLETED":return"status-processed";case"PARTIALLY_PROCESSED":return"status-partial";default:return"status-draft"}}getStatusLabel(t){switch(t?.toUpperCase()){case"CALCULATED":case"APPROVED":return"Ready to Process";case"PROCESSED":case"FULLY_PROCESSED":case"COMPLETED":return"Processed";case"PARTIALLY_PROCESSED":return"Partially Processed";default:return t||"Draft"}}goBack(){this.viewMode==="detail"?this.router.navigate(["/app/payroll/process"]):this.router.navigate(["/app/payroll/timesheets"])}downloadPayslip(t){let e=new Jt,i=this.getEmployeeName(t),r=this.getEmployeeCode(t);e.setFontSize(20),e.setTextColor(0,121,107),e.text("PAYSLIP",105,20,{align:"center"}),e.setFontSize(12),e.setTextColor(0,0,0),e.text(`Pay Period: ${this.payrollRun?.periodStartDate||""} to ${this.payrollRun?.periodEndDate||""}`,105,30,{align:"center"}),e.setLineWidth(.5),e.line(20,35,190,35),e.setFontSize(11),e.text("Employee Details",20,45),e.setFontSize(10),e.text(`Name: ${i}`,20,55),e.text(`Employee ID: ${r}`,20,62),e.text(`Pay Date: ${this.payrollRun?.payDate||"N/A"}`,120,55),e.text(`Status: ${t.status}`,120,62),e.line(20,70,190,70);let s=80;e.setFontSize(11),e.setTextColor(0,121,107),e.text("EARNINGS",20,s),e.setTextColor(0,0,0),e.setFontSize(10),s+=10,e.text("Base Pay:",25,s),e.text(`$${(t.basePay||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Overtime Pay:",25,s),e.text(`$${(t.overtimePay||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Bonuses:",25,s),e.text(`$${(t.bonuses||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Reimbursements:",25,s),e.text(`$${(t.reimbursements||0).toFixed(2)}`,170,s,{align:"right"}),s+=10,e.setFontSize(11),e.text("Gross Pay:",25,s),e.setFont("helvetica","bold"),e.text(`$${(t.grossPay||0).toFixed(2)}`,170,s,{align:"right"}),e.setFont("helvetica","normal"),s+=15,e.setFontSize(11),e.setTextColor(0,121,107),e.text("DEDUCTIONS",20,s),e.setTextColor(0,0,0),e.setFontSize(10),s+=10,e.text("Federal Tax:",25,s),e.text(`-$${(t.federalTax||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("State Tax:",25,s),e.text(`-$${(t.stateTax||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Social Security:",25,s),e.text(`-$${(t.socialSecurityTax||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Medicare:",25,s),e.text(`-$${(t.medicareTax||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("Health Insurance:",25,s),e.text(`-$${(t.healthInsurance||0).toFixed(2)}`,170,s,{align:"right"}),s+=7,e.text("401(k) Contribution:",25,s),e.text(`-$${(t.retirement401k||0).toFixed(2)}`,170,s,{align:"right"}),s+=10,e.setFontSize(11),e.text("Total Deductions:",25,s),e.setFont("helvetica","bold"),e.text(`-$${(t.totalDeductions||0).toFixed(2)}`,170,s,{align:"right"}),e.setFont("helvetica","normal"),s+=20,e.setLineWidth(1),e.line(20,s-5,190,s-5),e.setFontSize(14),e.setTextColor(0,121,107),e.text("NET PAY:",25,s+5),e.setFont("helvetica","bold"),e.text(`$${(t.netPay||0).toFixed(2)}`,170,s+5,{align:"right"}),e.setFontSize(8),e.setTextColor(128,128,128),e.setFont("helvetica","normal"),e.text("This is a computer-generated document. No signature is required.",105,280,{align:"center"}),e.save(`payslip_${r}_${this.payrollRun?.periodEndDate||"unknown"}.pdf`)}static \u0275fac=function(e){return new(e||n)(V(Di),V(tn),V(vi))};static \u0275cmp=_e({type:n,selectors:[["app-process-payroll"]],decls:4,vars:3,consts:[[1,"process-payroll-container"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"page-header"],[1,"header-left"],[1,"fas","fa-play-circle"],["class","empty-state",4,"ngIf"],["class","runs-grid",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-inbox"],[1,"runs-grid"],["class","run-card",3,"click",4,"ngFor","ngForOf"],[1,"run-card",3,"click"],[1,"run-header"],[1,"run-number"],[1,"run-status",3,"ngClass"],[1,"run-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","amount"],[1,"run-actions"],[1,"btn","btn-primary","btn-sm"],[1,"fas","fa-eye"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],["class","run-info",4,"ngIf"],["class","process-status-info",4,"ngIf"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","processed-badge",4,"ngIf"],["class","summary-section",4,"ngIf"],["class","info-card",4,"ngIf"],["class","selection-info",4,"ngIf"],[1,"calculation-info"],[1,"info-header"],[1,"fas","fa-calculator"],[1,"formula-grid"],[1,"formula-item"],[1,"formula-label"],[1,"formula-text"],[1,"table-container"],[1,"data-table"],[1,"checkbox-col"],["type","checkbox","title","Select all for processing",3,"change","checked"],[1,"number-col"],[3,"selected","processed",4,"ngFor","ngForOf"],[1,"run-info"],[1,"process-status-info"],["class","status-count processed",4,"ngIf"],["class","status-count pending",4,"ngIf"],[1,"status-count","processed"],[1,"fas","fa-check"],[1,"status-count","pending"],[1,"fas","fa-clock"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-check-circle"],[1,"processed-badge"],[1,"summary-section"],[1,"summary-card"],[1,"summary-card","pay-date-card"],[1,"required"],["type","date",1,"pay-date-input",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],[1,"value","amount","deduction"],[1,"summary-card","highlight"],[1,"value","amount","net"],[1,"summary-card","employer"],[1,"error-message"],[1,"info-card"],[1,"selection-info"],[1,"fas","fa-info-circle"],["type","checkbox",3,"change","checked","disabled"],[1,"employee-name"],[1,"badge","type"],[1,"number-col","amount"],[1,"number-col","amount","deduction"],[1,"number-col","amount","net"],[1,"status-badge",3,"ngClass"],[1,"actions-col"],["title","View Pay Stub",1,"btn-icon",3,"click"],["class","btn-icon download","title","Download Payslip",3,"click",4,"ngIf"],["title","Download Payslip",1,"btn-icon","download",3,"click"],[1,"fas","fa-download"],["colspan","16",1,"no-data"],[1,"totals-row"],["colspan","7"],["colspan","2"],[1,"modal-overlay"],[1,"modal","detail-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"employee-info"],[1,"info-row"],[1,"paystub-section"],["class","detail-row",4,"ngIf"],[1,"detail-row","total"],["class","detail-row total",4,"ngIf"],["class","paystub-section",4,"ngIf"],[1,"paystub-section","net-section"],[1,"detail-row","net-pay"],["class","employer-section",4,"ngIf"],[1,"employer-section"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,HMe,8,2,"div",1)(2,aSe,78,12,"div",1),a(),b(3,kSe,8,2,"div",2)),e&2&&(c(),m("ngIf",i.viewMode==="list"),c(),m("ngIf",i.viewMode==="detail"),c(),m("ngIf",i.showDetailModal))},dependencies:[At,ot,Se,be,Vt,Ie,Oe,Ee,Ns,Rt],styles:[".process-payroll-container[_ngcontent-%COMP%]{padding:20px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#666;font-size:16px}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:teal}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ddd;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0 0 10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.runs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.run-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;padding:20px;cursor:pointer;transition:all .2s;border:2px solid transparent}.run-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f;border-color:teal}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]   .run-number[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:teal}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]   .run-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]   .run-status.status-approved[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]   .run-status.status-calculated[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.run-card[_ngcontent-%COMP%]   .run-header[_ngcontent-%COMP%]   .run-status.status-processed[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.run-card[_ngcontent-%COMP%]   .run-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0}.run-card[_ngcontent-%COMP%]   .run-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.run-card[_ngcontent-%COMP%]   .run-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.run-card[_ngcontent-%COMP%]   .run-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.run-card[_ngcontent-%COMP%]   .run-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value.amount[_ngcontent-%COMP%]{color:#2e7d32}.run-card[_ngcontent-%COMP%]   .run-actions[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.run-card[_ngcontent-%COMP%]   .run-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn-icon.download[_ngcontent-%COMP%]{color:#1976d2}.btn-icon.download[_ngcontent-%COMP%]:hover{color:#0d47a1;background:#e3f2fd}.actions-col[_ngcontent-%COMP%]{display:flex;gap:4px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .run-info[_ngcontent-%COMP%]{font-size:14px;color:#666}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-back[_ngcontent-%COMP%]{background:#e9ecef;color:#333;padding:8px 12px}.btn.btn-back[_ngcontent-%COMP%]:hover{background:#dee2e6}.btn.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.process-status-info[_ngcontent-%COMP%]{display:flex;gap:12px;margin-right:16px}.process-status-info[_ngcontent-%COMP%]   .status-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:13px;font-weight:500}.process-status-info[_ngcontent-%COMP%]   .status-count.processed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.process-status-info[_ngcontent-%COMP%]   .status-count.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.pay-date-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.pay-date-card[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.pay-date-card[_ngcontent-%COMP%]   .pay-date-input[_ngcontent-%COMP%]{margin-top:4px;padding:8px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff}.pay-date-card[_ngcontent-%COMP%]   .pay-date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.pay-date-card[_ngcontent-%COMP%]   .pay-date-input.error-border[_ngcontent-%COMP%]{border-color:#dc3545}.pay-date-card[_ngcontent-%COMP%]   .pay-date-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.pay-date-card[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:11px;margin-top:4px}.pay-date-card.error[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#dc3545}.processed-badge[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:10px 20px;border-radius:6px;display:flex;align-items:center;gap:8px}.summary-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:24px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:4px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600;color:#333}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .value.amount[_ngcontent-%COMP%]{font-family:monospace}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .value.deduction[_ngcontent-%COMP%]{color:#dc3545}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .value.net[_ngcontent-%COMP%]{color:#28a745}.summary-section[_ngcontent-%COMP%]   .summary-card.highlight[_ngcontent-%COMP%]{background:teal}.summary-section[_ngcontent-%COMP%]   .summary-card.highlight[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fffc}.summary-section[_ngcontent-%COMP%]   .summary-card.highlight[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff}.summary-section[_ngcontent-%COMP%]   .summary-card.employer[_ngcontent-%COMP%]{background:#f3e5f5}.summary-section[_ngcontent-%COMP%]   .summary-card.employer[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7b1fa2}.summary-section[_ngcontent-%COMP%]   .summary-card.employer[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#6a1b9a}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee;white-space:nowrap}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   .checkbox-col[_ngcontent-%COMP%]{width:40px;text-align:center}.data-table[_ngcontent-%COMP%]   .number-col[_ngcontent-%COMP%]{text-align:right}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#e3f2fd}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.processed[_ngcontent-%COMP%]{opacity:.7}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.processed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#888}.data-table[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-weight:500}.data-table[_ngcontent-%COMP%]   .badge.type[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px;background:#e3f2fd;color:#1565c0}.data-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:monospace}.data-table[_ngcontent-%COMP%]   .amount.deduction[_ngcontent-%COMP%]{color:#dc3545}.data-table[_ngcontent-%COMP%]   .amount.net[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}.data-table[_ngcontent-%COMP%]   .status-badge.status-calculated[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.data-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.data-table[_ngcontent-%COMP%]   .status-badge.status-processed[_ngcontent-%COMP%]{background:#e8f5e9;color:#388e3c}.data-table[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#666}.data-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:teal}.data-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.data-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #ddd}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#666;font-size:16px}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal.detail-modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee;background:teal;color:#fff;border-radius:8px 8px 0 0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:.8}.info-card[_ngcontent-%COMP%]{background:#e8f5e9;padding:15px 20px;border-radius:8px;margin-bottom:20px;display:flex;gap:15px;align-items:flex-start}.info-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#388e3c;font-size:1.2rem;margin-top:3px}.info-card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2e7d32}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:10px 0 0;padding-left:20px}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.selection-info[_ngcontent-%COMP%]{background:#e3f2fd;padding:10px 15px;border-radius:5px;margin-bottom:15px;display:flex;align-items:center;gap:10px}.selection-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1976d2}.calculation-info[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;border-radius:8px;margin-bottom:20px}.calculation-info[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.calculation-info[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.calculation-info[_ngcontent-%COMP%]   .formula-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px}.calculation-info[_ngcontent-%COMP%]   .formula-item[_ngcontent-%COMP%]{font-size:13px}.calculation-info[_ngcontent-%COMP%]   .formula-item[_ngcontent-%COMP%]   .formula-label[_ngcontent-%COMP%]{font-weight:600;color:#333}.calculation-info[_ngcontent-%COMP%]   .formula-item[_ngcontent-%COMP%]   .formula-text[_ngcontent-%COMP%]{color:#666}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;border-radius:6px;margin-bottom:15px}.modal-body[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px 0;font-size:13px}.modal-body[_ngcontent-%COMP%]   .employer-section[_ngcontent-%COMP%]{background:#f3e5f5;padding:15px;border-radius:6px;margin-top:15px}.modal-body[_ngcontent-%COMP%]   .employer-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#7b1fa2;font-size:14px;text-transform:uppercase}.modal-body[_ngcontent-%COMP%]   .employer-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;font-size:14px}.modal-body[_ngcontent-%COMP%]   .employer-section[_ngcontent-%COMP%]   .detail-row.total[_ngcontent-%COMP%]{font-weight:600;border-top:1px solid #ce93d8;margin-top:8px;padding-top:12px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid #eee}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:teal;font-size:14px;text-transform:uppercase}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;font-size:14px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row.total[_ngcontent-%COMP%]{font-weight:600;border-top:1px solid #eee;margin-top:8px;padding-top:12px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row.net-pay[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#28a745}.modal-body[_ngcontent-%COMP%]   .paystub-section.net-section[_ngcontent-%COMP%]{background:#f8f9fa;margin:0 -20px -20px;padding:20px;border-radius:0 0 8px 8px}"]})};function ISe(n,t){if(n&1&&(o(0,"div",25)(1,"span",26),l(2,"Bank Account"),a(),o(3,"span",27),l(4),a()()),n&2){let e=p(3);c(4),_(e.payslipData.bankAccount)}}function DSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",32),l(4),a()()),n&2){let e=p(3);c(2),D("Overtime Pay (",e.payslipData.overtimeHours||0,"h)"),c(2),_(e.formatCurrency(e.payslipData.overtimePay))}}function ASe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Bonuses"),a(),o(3,"td",32),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.bonuses))}}function RSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Allowances"),a(),o(3,"td",32),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.allowances))}}function FSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Reimbursements"),a(),o(3,"td",32),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.reimbursements))}}function NSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Expense Claims"),a(),o(3,"td",32),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.expenses))}}function LSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Federal Tax"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.federalTax))}}function VSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"State Tax"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.stateTax))}}function BSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Social Security"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.socialSecurityTax))}}function USe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Medicare"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.medicareTax))}}function jSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Health Insurance"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.healthInsurance))}}function WSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"401(k) Contribution"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.retirement401k))}}function zSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Loan Deductions"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.loanDeductions))}}function qSe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2,"Other Deductions"),a(),o(3,"td",36),l(4),a()()),n&2){let e=p(3);c(4),_(e.formatCurrency(e.payslipData.otherDeductions))}}function HSe(n,t){if(n&1&&(o(0,"div",46)(1,"span",26),l(2,"YTD Gross"),a(),o(3,"span",27),l(4),a()()),n&2){let e=p(4);c(4),_(e.formatCurrency(e.payslipData.ytdGross))}}function GSe(n,t){if(n&1&&(o(0,"div",46)(1,"span",26),l(2,"YTD Tax"),a(),o(3,"span",47),l(4),a()()),n&2){let e=p(4);c(4),_(e.formatCurrency(e.payslipData.ytdTax))}}function $Se(n,t){if(n&1&&(o(0,"div",46)(1,"span",26),l(2,"YTD Net"),a(),o(3,"span",48),l(4),a()()),n&2){let e=p(4);c(4),_(e.formatCurrency(e.payslipData.ytdNet))}}function YSe(n,t){if(n&1&&(o(0,"div",43)(1,"h4"),l(2,"Year-to-Date Summary"),a(),o(3,"div",44),b(4,HSe,5,1,"div",45)(5,GSe,5,1,"div",45)(6,$Se,5,1,"div",45),a()()),n&2){let e=p(3);c(4),m("ngIf",e.payslipData.ytdGross),c(),m("ngIf",e.payslipData.ytdTax),c(),m("ngIf",e.payslipData.ytdNet)}}function JSe(n,t){if(n&1&&(o(0,"div",21)(1,"div",22)(2,"div",23)(3,"h4"),l(4,"Employee Information"),a(),o(5,"div",24)(6,"div",25)(7,"span",26),l(8,"Employee ID"),a(),o(9,"span",27),l(10),a()(),o(11,"div",25)(12,"span",26),l(13,"Employee Name"),a(),o(14,"span",27),l(15),a()(),o(16,"div",25)(17,"span",26),l(18,"Designation"),a(),o(19,"span",27),l(20),a()(),o(21,"div",25)(22,"span",26),l(23,"Department"),a(),o(24,"span",27),l(25),a()()()(),o(26,"div",23)(27,"h4"),l(28,"Pay Period Details"),a(),o(29,"div",24)(30,"div",25)(31,"span",26),l(32,"Period From"),a(),o(33,"span",27),l(34),a()(),o(35,"div",25)(36,"span",26),l(37,"Period To"),a(),o(38,"span",27),l(39),a()(),o(40,"div",25)(41,"span",26),l(42,"Pay Date"),a(),o(43,"span",27),l(44),a()(),b(45,ISe,5,1,"div",28),a()()(),o(46,"div",29)(47,"div",30)(48,"h4"),l(49,"Earnings"),a(),o(50,"table",31)(51,"tbody")(52,"tr")(53,"td"),l(54,"Base Salary"),a(),o(55,"td",32),l(56),a()(),b(57,DSe,5,2,"tr",33)(58,ASe,5,1,"tr",33)(59,RSe,5,1,"tr",33)(60,FSe,5,1,"tr",33)(61,NSe,5,1,"tr",33),a(),o(62,"tfoot")(63,"tr",34)(64,"td")(65,"strong"),l(66,"Gross Pay"),a()(),o(67,"td",32)(68,"strong"),l(69),a()()()()()(),o(70,"div",35)(71,"h4"),l(72,"Deductions"),a(),o(73,"table",31)(74,"tbody"),b(75,LSe,5,1,"tr",33)(76,VSe,5,1,"tr",33)(77,BSe,5,1,"tr",33)(78,USe,5,1,"tr",33)(79,jSe,5,1,"tr",33)(80,WSe,5,1,"tr",33)(81,zSe,5,1,"tr",33)(82,qSe,5,1,"tr",33),a(),o(83,"tfoot")(84,"tr",34)(85,"td")(86,"strong"),l(87,"Total Deductions"),a()(),o(88,"td",36)(89,"strong"),l(90),a()()()()()()(),o(91,"div",37)(92,"div",38)(93,"span",26),l(94,"Net Pay"),a(),o(95,"span",32),l(96),a()()(),b(97,YSe,7,3,"div",39),o(98,"div",40)(99,"p",41),l(100,"This is a computer-generated document. No signature is required."),a(),o(101,"p",42),l(102),Le(103,"date"),a()()()),n&2){let e=p(2);c(10),_(e.payslipData.employeeId),c(5),_(e.payslipData.employeeName),c(5),_(e.payslipData.employeeDesignation||"-"),c(5),_(e.payslipData.department||"-"),c(9),_(e.formatDate(e.payslipData.periodFrom||"")),c(5),_(e.formatDate(e.payslipData.periodTo||"")),c(5),_(e.formatDate(e.payslipData.payDate)),c(),m("ngIf",e.payslipData.bankAccount),c(11),_(e.formatCurrency(e.payslipData.basePay)),c(),m("ngIf",e.payslipData.overtimePay&&e.payslipData.overtimePay>0),c(),m("ngIf",e.payslipData.bonuses&&e.payslipData.bonuses>0),c(),m("ngIf",e.payslipData.allowances&&e.payslipData.allowances>0),c(),m("ngIf",e.payslipData.reimbursements&&e.payslipData.reimbursements>0),c(),m("ngIf",e.payslipData.expenses&&e.payslipData.expenses>0),c(8),_(e.formatCurrency(e.payslipData.grossPay)),c(6),m("ngIf",e.payslipData.federalTax&&e.payslipData.federalTax>0),c(),m("ngIf",e.payslipData.stateTax&&e.payslipData.stateTax>0),c(),m("ngIf",e.payslipData.socialSecurityTax&&e.payslipData.socialSecurityTax>0),c(),m("ngIf",e.payslipData.medicareTax&&e.payslipData.medicareTax>0),c(),m("ngIf",e.payslipData.healthInsurance&&e.payslipData.healthInsurance>0),c(),m("ngIf",e.payslipData.retirement401k&&e.payslipData.retirement401k>0),c(),m("ngIf",e.payslipData.loanDeductions&&e.payslipData.loanDeductions>0),c(),m("ngIf",e.payslipData.otherDeductions&&e.payslipData.otherDeductions>0),c(8),_(e.formatCurrency(e.payslipData.totalDeductions)),c(6),_(e.formatCurrency(e.payslipData.netPay)),c(),m("ngIf",e.payslipData.ytdGross||e.payslipData.ytdTax||e.payslipData.ytdNet),c(5),D("Generated on ",rt(103,27,e.currentDate,"MMMM d, yyyy 'at' h:mm a"))}}function KSe(n,t){if(n&1){let e=F();o(0,"div",1)(1,"div",2),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",3)(3,"h3"),y(4,"i",4),l(5," Pay Slip"),a(),o(6,"button",5),x("click",function(){g(e);let r=p();return f(r.onClose())}),l(7,"\xD7"),a()(),o(8,"div",6)(9,"div",7)(10,"div",8)(11,"h2",9),l(12),a(),o(13,"p",10),l(14),a(),o(15,"p",11),l(16),a()(),o(17,"div",12)(18,"h3"),l(19,"PAYSLIP"),a(),o(20,"p",13),l(21),a()()(),b(22,JSe,104,30,"div",14),a(),o(23,"div",15)(24,"button",16),x("click",function(){g(e);let r=p();return f(r.onClose())}),l(25,"Close"),a(),o(26,"button",17),x("click",function(){g(e);let r=p();return f(r.onPrint())}),y(27,"i",18),l(28," Print "),a(),o(29,"button",19),x("click",function(){g(e);let r=p();return f(r.onDownload())}),y(30,"i",20),l(31," Download PDF "),a()()()()}if(n&2){let e=p();c(12),_(e.companyName),c(2),_(e.companyAddress),c(2),Ge("",e.companyPhone," | ",e.companyEmail),c(5),_(e.payslipData==null?null:e.payslipData.payPeriod),c(),m("ngIf",e.payslipData)}}var F2=class n{payslipData=null;companyName="Hao System Corporation";companyAddress="123 Business Park, Suite 500, New York, NY 10001";companyPhone="+1 (555) 123-4567";companyEmail="hr@haosystem.com";showModal=!1;closeModal=new hi;printPayslip=new hi;downloadPayslip=new hi;currentDate=new Date;ngOnInit(){}onClose(){this.closeModal.emit()}onPrint(){this.printPayslip.emit(),window.print()}onDownload(){this.downloadPayslip.emit()}formatCurrency(t){return t==null?"$0.00":"$"+t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"-"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-payslip"]],inputs:{payslipData:"payslipData",companyName:"companyName",companyAddress:"companyAddress",companyPhone:"companyPhone",companyEmail:"companyEmail",showModal:"showModal"},outputs:{closeModal:"closeModal",printPayslip:"printPayslip",downloadPayslip:"downloadPayslip"},decls:1,vars:1,consts:[["class","modal-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"payslip-modal",3,"click"],[1,"modal-header"],[1,"fas","fa-file-invoice-dollar"],[1,"close-btn",3,"click"],["id","payslip-print",1,"payslip-document"],[1,"payslip-header"],[1,"company-info"],[1,"company-name"],[1,"company-address"],[1,"company-contact"],[1,"payslip-title"],[1,"pay-period"],["class","payslip-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-print"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-download"],[1,"payslip-body"],[1,"employee-details"],[1,"detail-section"],[1,"detail-grid"],[1,"detail-item"],[1,"label"],[1,"value"],["class","detail-item",4,"ngIf"],[1,"earnings-deductions-container"],[1,"earnings-section"],[1,"payslip-table"],[1,"amount"],[4,"ngIf"],[1,"total-row"],[1,"deductions-section"],[1,"amount","deduction"],[1,"net-pay-section"],[1,"net-pay-box"],["class","ytd-section",4,"ngIf"],[1,"payslip-footer"],[1,"disclaimer"],[1,"generated-date"],[1,"ytd-section"],[1,"ytd-grid"],["class","ytd-item",4,"ngIf"],[1,"ytd-item"],[1,"value","deduction"],[1,"value","net"]],template:function(e,i){e&1&&b(0,KSe,32,6,"div",0),e&2&&m("ngIf",i.showModal)},dependencies:[At,be,Rt,ir],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.payslip-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d}.payslip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:linear-gradient(135deg,teal,#066);color:#fff}.payslip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;display:flex;align-items:center;gap:10px}.payslip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;opacity:.8}.payslip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.payslip-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;background:#f8f9fa;border-top:1px solid #eee}.payslip-document[_ngcontent-%COMP%]{padding:32px;overflow-y:auto;flex:1;background:#fff}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding-bottom:24px;border-bottom:3px solid #008080;margin-bottom:24px}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{color:teal;font-size:24px;font-weight:700;margin:0 0 8px}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%], .payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-contact[_ngcontent-%COMP%]{color:#666;font-size:13px;margin:0 0 4px}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .payslip-title[_ngcontent-%COMP%]{text-align:right}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .payslip-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1a1a2e;font-size:28px;margin:0;letter-spacing:3px}.payslip-document[_ngcontent-%COMP%]   .payslip-header[_ngcontent-%COMP%]   .payslip-title[_ngcontent-%COMP%]   .pay-period[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-top:8px}.employee-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:24px}.employee-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px}.employee-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:teal;font-size:14px;font-weight:600;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}.employee-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.employee-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#888;margin-bottom:2px}.employee-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.earnings-deductions-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:24px}.earnings-deductions-container[_ngcontent-%COMP%]   .earnings-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .earnings-deductions-container[_ngcontent-%COMP%]   .deductions-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1a1a2e;font-size:14px;font-weight:600;margin:0 0 12px;padding-bottom:8px;border-bottom:2px solid #e0e0e0}.earnings-deductions-container[_ngcontent-%COMP%]   .earnings-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{border-bottom-color:#22c55e}.earnings-deductions-container[_ngcontent-%COMP%]   .deductions-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{border-bottom-color:#ef4444}.payslip-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payslip-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px;border-bottom:1px solid #f0f0f0}.payslip-table[_ngcontent-%COMP%]   td.amount[_ngcontent-%COMP%]{text-align:right;font-family:Courier New,monospace;color:#22c55e}.payslip-table[_ngcontent-%COMP%]   td.deduction[_ngcontent-%COMP%]{color:#ef4444}.payslip-table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #ddd;border-bottom:none;background:#f8f9fa}.net-pay-section[_ngcontent-%COMP%]{margin-bottom:24px}.net-pay-section[_ngcontent-%COMP%]   .net-pay-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);color:#fff;padding:20px 24px;border-radius:10px;display:flex;justify-content:space-between;align-items:center}.net-pay-section[_ngcontent-%COMP%]   .net-pay-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.net-pay-section[_ngcontent-%COMP%]   .net-pay-box[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:32px;font-weight:700;font-family:Courier New,monospace}.ytd-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;margin-bottom:24px}.ytd-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#666;font-size:12px;font-weight:600;margin:0 0 12px;text-transform:uppercase}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]   .ytd-item[_ngcontent-%COMP%]{text-align:center}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]   .ytd-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#888;margin-bottom:4px}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]   .ytd-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;font-family:Courier New,monospace}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]   .ytd-item[_ngcontent-%COMP%]   .value.deduction[_ngcontent-%COMP%]{color:#ef4444}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]   .ytd-item[_ngcontent-%COMP%]   .value.net[_ngcontent-%COMP%]{color:#22c55e}.payslip-footer[_ngcontent-%COMP%]{text-align:center;padding-top:16px;border-top:1px dashed #ddd}.payslip-footer[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]{font-size:11px;color:#999;margin:0 0 4px}.payslip-footer[_ngcontent-%COMP%]   .generated-date[_ngcontent-%COMP%]{font-size:11px;color:#bbb;margin:0}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn.btn-outline-primary[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080}.btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#e8f5f5}@media print{.modal-overlay[_ngcontent-%COMP%]{position:static;background:none;padding:0}.payslip-modal[_ngcontent-%COMP%]{box-shadow:none;max-height:none;border-radius:0}.payslip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .payslip-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:none}.payslip-document[_ngcontent-%COMP%]{padding:20px}}@media(max-width:768px){.employee-details[_ngcontent-%COMP%], .earnings-deductions-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.payslip-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.payslip-header[_ngcontent-%COMP%]   .payslip-title[_ngcontent-%COMP%]{text-align:left}.ytd-section[_ngcontent-%COMP%]   .ytd-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var fc=class n{constructor(t){this.http=t}baseUrl="/api/loans";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getLoans(){return this.http.get(`${this.baseUrl}`)}getLoan(t){return this.http.get(`${this.baseUrl}/${t}`)}getLoansByEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}`)}getActiveLoansForEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}/active`)}getEmployeeLoanSummary(t){return this.http.get(`${this.baseUrl}/employee/${t}/summary`)}getLoansByStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`)}getPendingApproval(){return this.http.get(`${this.baseUrl}/pending-approval`)}getOutstandingLoans(){return this.http.get(`${this.baseUrl}/outstanding`)}applyForLoan(t){return this.http.post(`${this.baseUrl}`,t)}createApplication(t){return this.applyForLoan(t)}updateLoan(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}submitLoan(t){return this.http.post(`${this.baseUrl}/${t}/submit`,{})}approveLoan(t,e,i,r){return this.http.post(`${this.baseUrl}/${t}/approve`,{approverId:e,remarks:i,approvedAmount:r})}rejectLoan(t,e){return this.http.post(`${this.baseUrl}/${t}/reject`,{reason:e})}disburseLoan(t,e){return this.http.post(`${this.baseUrl}/${t}/disburse`,{disbursementDate:e})}deleteLoan(t){return this.http.delete(`${this.baseUrl}/${t}`)}getRepaymentsByLoan(t){return this.http.get(`${this.baseUrl}/${t}/repayments`)}getDueRepayments(t){return this.http.get(`${this.baseUrl}/repayments/due?date=${t}`)}getOverdueRepayments(){return this.http.get(`${this.baseUrl}/repayments/overdue`)}recordPayment(t,e,i,r){return this.http.post(`${this.baseUrl}/repayments/${t}/pay`,{paidAmount:e,paymentDate:i,paymentReference:r})}recordPayrollDeduction(t,e){return this.http.post(`${this.baseUrl}/repayments/${t}/payroll-deduction`,{payrollRecordId:e})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var v0=class n{constructor(t){this.http=t}apiUrl="/api/expenses";getAllCategories(){return this.http.get(`${this.apiUrl}/categories`)}getCategories(){return this.getAllCategories()}getActiveCategories(){return this.http.get(`${this.apiUrl}/categories/active`)}getCategoryById(t){return this.http.get(`${this.apiUrl}/categories/${t}`)}createCategory(t){return this.http.post(`${this.apiUrl}/categories`,t)}updateCategory(t,e){return this.http.put(`${this.apiUrl}/categories/${t}`,e)}deleteCategory(t){return this.http.delete(`${this.apiUrl}/categories/${t}`)}initializeDefaultCategories(){return this.http.post(`${this.apiUrl}/categories/init`,{})}getAllRequests(){return this.http.get(this.apiUrl)}getRequestById(t){return this.http.get(`${this.apiUrl}/${t}`)}getRequestsByEmployee(t){return this.http.get(`${this.apiUrl}/employee/${t}`)}getRequestsByStatus(t){return this.http.get(`${this.apiUrl}/status/${t}`)}getPendingApprovals(t){return this.http.get(`${this.apiUrl}/pending-approvals/${t}`)}getPendingReimbursements(){return this.http.get(`${this.apiUrl}/pending-reimbursements`)}getApprovedNotPosted(){return this.http.get(`${this.apiUrl}/approved-not-posted`)}getStatistics(){return this.http.get(`${this.apiUrl}/statistics`)}getExpensesByCategory(t,e){let i=`${this.apiUrl}/by-category`,r=[];return t&&r.push(`startDate=${t}`),e&&r.push(`endDate=${e}`),r.length>0&&(i+="?"+r.join("&")),this.http.get(i)}createRequest(t){return this.http.post(this.apiUrl,t)}updateRequest(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteRequest(t){return this.http.delete(`${this.apiUrl}/${t}`)}addItem(t,e){return this.http.post(`${this.apiUrl}/${t}/items`,e)}removeItem(t,e){return this.http.delete(`${this.apiUrl}/${t}/items/${e}`)}submitRequest(t,e){let i=`${this.apiUrl}/${t}/submit`;return e&&(i+=`?submittedBy=${e}`),this.http.post(i,{})}approveRequest(t,e){return this.http.post(`${this.apiUrl}/${t}/approve`,e)}rejectRequest(t,e){return this.http.post(`${this.apiUrl}/${t}/reject`,{reason:e})}returnRequest(t,e){return this.http.post(`${this.apiUrl}/${t}/return`,{reason:e})}markReimbursed(t,e){return this.http.post(`${this.apiUrl}/${t}/reimburse`,{payrollRecordId:e})}postToAccounts(t,e){return this.http.post(`${this.apiUrl}/${t}/post-to-accounts`,{accountingReference:e})}managerApprove(t,e){return this.http.post(`${this.apiUrl}/${t}/manager-approve`,{remarks:e})}managerReject(t,e){return this.http.post(`${this.apiUrl}/${t}/manager-reject`,{remarks:e})}hrApprove(t,e){return this.http.post(`${this.apiUrl}/${t}/hr-approve`,{remarks:e})}hrReject(t,e){return this.http.post(`${this.apiUrl}/${t}/hr-reject`,{remarks:e})}getPendingManagerApprovals(){return this.http.get(`${this.apiUrl}/pending-manager`)}getPendingHrApprovals(){return this.http.get(`${this.apiUrl}/pending-hr`)}getRequestActivity(t){return this.http.get(`${this.apiUrl}/${t}/activity`)}addActivityNote(t,e){return this.http.post(`${this.apiUrl}/${t}/activity`,{note:e})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var L2=class n{TEAL="#008080";DARK_TEAL="#006666";LIGHT_GRAY="#f8f9fa";constructor(){}generateSalarySlipPDF(t){let e=this.createPDF(t),i=`Salary_Slip_${t.employee.employeeCode}_${t.payMonth}_${t.payYear}.pdf`;e.save(i)}printSalarySlipPDF(t){let e=this.createPDF(t);e.autoPrint(),window.open(e.output("bloburl"),"_blank")}createPDF(t){let e=new Jt("p","mm","a4"),i=e.internal.pageSize.getWidth(),r=15,s=i-r*2,d=r,u=t.payrollRecord,h=t.employee,v=u.basePay||0,C=v*.4,O=133.33,T=16.67,w=Math.max(0,(u.grossPay||0)-v-C-O-T),A=u.grossPay||0,I=u.retirement401k||0,L=(u.federalTax||0)+(u.stateTax||0),B=u.healthInsurance||0,q=u.socialSecurityTax||0,K=u.medicareTax||0,J=u.totalDeductions||0,Me=41.67,ze=83.33,oe=Me+ze,ae=this.getMonthNumber(t.payMonth),X=(u.netPay||0)+oe;d=this.drawHeader(e,t,X,r,d,s),d=this.drawEmployeeInfo(e,h,r,d,s),d=this.drawDaysInfo(e,t,r,d,s);let pe=(s-5)/2,z=r,Z=r+pe+5,ge=[{label:"Basic",amount:v},{label:"House Rent Allowance",amount:C},{label:"Conveyance Allowance",amount:O},{label:"Children Education Allowance",amount:T},{label:"Other Allowance",amount:w}],Pe=[{label:"Income Tax",amount:L}];I>0&&Pe.push({label:"401(k) Contribution",amount:I}),B>0&&Pe.push({label:"Health Insurance",amount:B}),q>0&&Pe.push({label:"Social Security",amount:q}),K>0&&Pe.push({label:"Medicare",amount:K});let Ve=[{label:"Telephone Reimbursement",amount:Me},{label:"Fuel Reimbursement",amount:ze}],De=this.drawTable(e,"Earnings",ge,A,z,d,pe,ae),Fe=this.drawTable(e,"Deductions",Pe,J,Z,d,pe,ae);return d=Math.max(De,Fe)+5,d=this.drawTable(e,"Reimbursements",Ve,oe,z,d,pe,ae),d+=10,this.drawFooter(e,X,r,d,s),e}drawHeader(t,e,i,r,s,d){t.setFillColor(0,128,128),t.rect(r,s,d,35,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text(e.companyName,r+5,s+10),t.setFontSize(9),t.setFont("helvetica","normal"),t.text(e.companyAddress,r+5,s+17),t.setFontSize(11),t.setFont("helvetica","bold"),t.text(`Payslip for the month of ${e.payMonth}, ${e.payYear}`,r+5,s+28);let u=50,h=r+d-u-5;return t.setFillColor(255,255,255),t.roundedRect(h,s+5,u,25,3,3,"F"),t.setTextColor(102,102,102),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("Employee Net Pay",h+u/2,s+13,{align:"center"}),t.setTextColor(0,128,128),t.setFontSize(14),t.setFont("helvetica","bold"),t.text(`$${this.formatCurrency(i)}`,h+u/2,s+24,{align:"center"}),s+40}drawEmployeeInfo(t,e,i,r,s){t.setFillColor(248,249,250),t.rect(i,r,s,28,"F");let d=s/4,u=[{label:"Employee Name",value:e.name},{label:"Employee Code",value:e.employeeCode},{label:"Designation",value:e.designation},{label:"Date of Joining",value:e.dateOfJoining},{label:"Department",value:e.department||"N/A"},{label:"Bank A/C Number",value:e.bankAccountNumber||"N/A"}],h=i+3,v=r+7;return u.forEach((C,O)=>{O===4&&(h=i+3,v=r+19),t.setTextColor(102,102,102),t.setFontSize(7),t.setFont("helvetica","normal"),t.text(C.label.toUpperCase(),h,v),t.setTextColor(51,51,51),t.setFontSize(9),t.setFont("helvetica","bold"),t.text(C.value,h,v+5),h+=d}),r+32}drawDaysInfo(t,e,i,r,s){return t.setFillColor(232,245,233),t.rect(i,r,s,10,"F"),t.setTextColor(46,125,50),t.setFontSize(9),t.setFont("helvetica","normal"),t.text("Paid Days: ",i+5,r+6.5),t.setFont("helvetica","bold"),t.text(`${e.paidDays}`,i+25,r+6.5),t.setFont("helvetica","normal"),t.text("LOP Days: ",i+45,r+6.5),t.setFont("helvetica","bold"),t.text(`${e.lopDays}`,i+63,r+6.5),r+15}drawTable(t,e,i,r,s,d,u,h){t.setFillColor(0,128,128),t.rect(s,d,u,8,"F"),t.setTextColor(255,255,255),t.setFontSize(10),t.setFont("helvetica","bold"),t.text(e,s+3,d+5.5),d+=8,t.setFillColor(224,242,241),t.rect(s,d,u,7,"F"),t.setTextColor(0,105,92),t.setFontSize(8),t.setFont("helvetica","bold"),t.text("Particulars",s+3,d+4.5),t.text("Amount ($)",s+u-45,d+4.5),t.text("YTD ($)",s+u-18,d+4.5),d+=7,i.forEach(C=>{t.setFillColor(255,255,255),t.rect(s,d,u,7,"F"),t.setDrawColor(224,224,224),t.line(s,d+7,s+u,d+7),t.setTextColor(51,51,51),t.setFontSize(8),t.setFont("helvetica","normal"),t.text(C.label,s+3,d+4.5),t.text(this.formatCurrency(C.amount),s+u-45,d+4.5),t.text(this.formatCurrency(C.amount*h),s+u-18,d+4.5),d+=7}),t.setFillColor(245,245,245),t.rect(s,d,u,8,"F"),t.setDrawColor(0,128,128),t.line(s,d,s+u,d);let v=e==="Earnings"?"Gross Earnings":e==="Deductions"?"Total Deductions":"Total Reimbursement";return t.setTextColor(51,51,51),t.setFontSize(9),t.setFont("helvetica","bold"),t.text(v,s+3,d+5.5),t.text(this.formatCurrency(r),s+u-45,d+5.5),t.text(this.formatCurrency(r*h),s+u-18,d+5.5),d+8}drawFooter(t,e,i,r,s){t.setFillColor(0,128,128),t.rect(i,r,s,30,"F"),t.setTextColor(255,255,255),t.setFontSize(11),t.setFont("helvetica","normal"),t.text("Total Net Payable",i+5,r+10),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`$${this.formatCurrency(e)}`,i+s-5,r+10,{align:"right"}),t.setFontSize(8),t.setFont("helvetica","italic"),t.text(`Amount in Words: ${this.numberToWords(e)} Only`,i+5,r+18),t.setDrawColor(255,255,255,.3),t.line(i+5,r+22,i+s-5,r+22),t.setFontSize(7),t.setFont("helvetica","normal"),t.text("This is a system generated payslip and does not require a signature.",i+s/2,r+27,{align:"center"})}formatCurrency(t){return t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}getMonthNumber(t){return{January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12}[t]||1}numberToWords(t){let e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],i=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],r=v=>v===0?"":v<20?e[v]:v<100?i[Math.floor(v/10)]+(v%10?" "+e[v%10]:""):e[Math.floor(v/100)]+" Hundred"+(v%100?" "+r(v%100):"");if(t===0)return"Zero Dollars";let s=Math.floor(t),d=Math.round((t-s)*100),u="",h=s;return h>=1e6&&(u+=r(Math.floor(h/1e6))+" Million ",h=h%1e6),h>=1e3&&(u+=r(Math.floor(h/1e3))+" Thousand ",h=h%1e3),h>0&&(u+=r(h)),u=u.trim()+" Dollars",d>0&&(u+=" and "+r(d)+" Cents"),u}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var x0=class n{constructor(t){this.http=t;this.loadProjects()}apiUrl="/api/projects";projectsSubject=new Ci([]);projects$=this.projectsSubject.asObservable();loadProjects(){this.http.get(this.apiUrl).pipe(si(t=>{let e=t.map(i=>this.mapProjectFromApi(i));this.projectsSubject.next(e)}),ur(t=>(console.error("Error loading projects from API:",t),Zt([])))).subscribe()}refreshProjects(){this.loadProjects()}mapProjectFromApi(t){return Tt(me({},t),{customerId:t.customer?.id,projectManagerId:t.projectManager?.id,tasks:(t.tasks||[]).map(e=>Tt(me({},e),{assigneeId:e.assignee?.id})),members:(t.members||[]).map(e=>Tt(me({},e),{employeeId:e.employee?.id}))})}getAll(){return this.projects$}getById(t){return new ni(e=>{this.http.get(`${this.apiUrl}/${t}`).subscribe({next:i=>e.next(this.mapProjectFromApi(i)),error:()=>{let i=this.projectsSubject.getValue();e.next(i.find(r=>r.id===t))}})})}create(t){return this.http.post(this.apiUrl,t).pipe(si(e=>{let i=[...this.projectsSubject.getValue(),this.mapProjectFromApi(e)];this.projectsSubject.next(i)}))}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e).pipe(si(i=>{let r=this.projectsSubject.getValue(),s=r.findIndex(d=>d.id===t);s!==-1&&(r[s]=me(me({},r[s]),this.mapProjectFromApi(i)),this.projectsSubject.next([...r]))}))}delete(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(si(()=>{let e=this.projectsSubject.getValue();e=e.filter(i=>i.id!==t),this.projectsSubject.next(e)}))}saveToStorage(t){localStorage.setItem("projects",JSON.stringify(t)),this.projectsSubject.next(t)}generateProjectCode(){return`PRJ-${Date.now().toString().slice(-6)}`}addMember(t,e){return this.http.post(`${this.apiUrl}/${t}/members`,e).pipe(si(i=>{let r=this.projectsSubject.getValue(),s=r.find(d=>d.id===t);s&&(s.members||(s.members=[]),s.members.push(Tt(me({},i),{employeeId:i.employee?.id||e.employeeId})),this.projectsSubject.next([...r]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.members||(r.members=[]);let s=Math.max(...r.members.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,addedAt:new Date().toISOString()});return r.members.push(d),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}))}removeMember(t,e){return this.http.delete(`${this.apiUrl}/${t}/members/${e}`).pipe(si(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);r&&r.members&&(r.members=r.members.filter(s=>s.id!==e),this.projectsSubject.next([...i]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);return r&&r.members&&(r.members=r.members.filter(s=>s.id!==e),this.saveToStorage(i)),Zt(void 0)}))}addTask(t,e){return this.http.post(`${this.apiUrl}/${t}/tasks`,e).pipe(si(i=>{let r=this.projectsSubject.getValue(),s=r.find(d=>d.id===t);s&&(s.tasks||(s.tasks=[]),s.tasks.push(Tt(me({},i),{assigneeId:i.assignee?.id||e.assigneeId})),this.projectsSubject.next([...r]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.tasks||(r.tasks=[]);let s=Math.max(...r.tasks.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,createdAt:new Date().toISOString()});return r.tasks.push(d),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}))}updateTask(t,e,i){return this.http.put(`${this.apiUrl}/${t}/tasks/${e}`,i).pipe(si(r=>{let s=this.projectsSubject.getValue(),d=s.find(u=>u.id===t);if(d&&d.tasks){let u=d.tasks.findIndex(h=>h.id===e);u!==-1&&(d.tasks[u]=Tt(me(me({},d.tasks[u]),r),{assigneeId:r.assignee?.id||i.assigneeId}),this.projectsSubject.next([...s]))}}),ur(()=>{let r=this.projectsSubject.getValue(),s=r.find(d=>d.id===t);if(s&&s.tasks){let d=s.tasks.findIndex(u=>u.id===e);if(d!==-1)return s.tasks[d]=Tt(me(me({},s.tasks[d]),i),{updatedAt:new Date().toISOString()}),this.saveToStorage(r),Zt(s.tasks[d])}throw new Error("Task not found")}))}deleteTask(t,e){return this.http.delete(`${this.apiUrl}/${t}/tasks/${e}`).pipe(si(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);r&&r.tasks&&(r.tasks=r.tasks.filter(s=>s.id!==e),this.projectsSubject.next([...i]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);return r&&r.tasks&&(r.tasks=r.tasks.filter(s=>s.id!==e),this.saveToStorage(i)),Zt(void 0)}))}addMilestone(t,e){return this.http.post(`${this.apiUrl}/${t}/milestones`,e).pipe(si(i=>{let r=this.projectsSubject.getValue(),s=r.find(d=>d.id===t);s&&(s.milestones||(s.milestones=[]),s.milestones.push(i),this.projectsSubject.next([...r]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.milestones||(r.milestones=[]);let s=Math.max(...r.milestones.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,createdAt:new Date().toISOString()});return r.milestones.push(d),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}))}deleteMilestone(t,e){return this.http.delete(`${this.apiUrl}/${t}/milestones/${e}`).pipe(si(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);r&&r.milestones&&(r.milestones=r.milestones.filter(s=>s.id!==e),this.projectsSubject.next([...i]))}),ur(()=>{let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);return r&&r.milestones&&(r.milestones=r.milestones.filter(s=>s.id!==e),this.saveToStorage(i)),Zt(void 0)}))}addFile(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.files||(r.files=[]);let s=Math.max(...r.files.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,uploadDate:new Date().toISOString()});return r.files.push(d),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}deleteFile(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);return r&&r.files&&(r.files=r.files.filter(s=>s.id!==e),this.saveToStorage(i)),Zt(void 0)}addNote(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.notes||(r.notes=[]);let s=Math.max(...r.notes.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,createdAt:new Date().toISOString()});return r.notes.push(d),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}deleteNote(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);return r&&r.notes&&(r.notes=r.notes.filter(s=>s.id!==e),this.saveToStorage(i)),Zt(void 0)}addTimeLog(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r){r.timeLogs||(r.timeLogs=[]);let s=Math.max(...r.timeLogs.map(u=>u.id||0),0),d=Tt(me({},e),{id:s+1,createdAt:new Date().toISOString()});return r.timeLogs.push(d),r.totalLoggedTime=(r.totalLoggedTime||0)+d.hours,d.billable&&(r.totalBillableTime=(r.totalBillableTime||0)+d.hours),this.saveToStorage(i),Zt(d)}throw new Error("Project not found")}deleteTimeLog(t,e){let i=this.projectsSubject.getValue(),r=i.find(s=>s.id===t);if(r&&r.timeLogs){let s=r.timeLogs.find(d=>d.id===e);s&&(r.totalLoggedTime=(r.totalLoggedTime||0)-s.hours,s.billable&&(r.totalBillableTime=(r.totalBillableTime||0)-s.hours)),r.timeLogs=r.timeLogs.filter(d=>d.id!==e),this.saveToStorage(i)}return Zt(void 0)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var XSe=(n,t,e)=>({"fa-calendar-alt":n,"fa-dollar-sign":t,"fa-shield-alt":e});function ZSe(n,t){if(n&1&&(o(0,"div",16)(1,"span",17),y(2,"i",18),l(3),a(),o(4,"span",19),l(5),a()()),n&2){let e=p();c(3),D(" ",e.currentEmployee.employeeCode," "),c(2),Ge("",e.currentEmployee.firstName," ",e.currentEmployee.lastName)}}function ePe(n,t){if(n&1){let e=F();o(0,"div",25),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewPaystub(r))}),o(1,"div",26)(2,"span",27),l(3),a(),o(4,"span",28),l(5),a()(),o(6,"div",29)(7,"div",30)(8,"span",31),l(9,"Gross Pay"),a(),o(10,"span",32),l(11),Le(12,"number"),a()(),o(13,"div",30)(14,"span",31),l(15,"Deductions"),a(),o(16,"span",33),l(17),Le(18,"number"),a()(),o(19,"div",34)(20,"span",31),l(21,"Net Pay"),a(),o(22,"span",32),l(23),Le(24,"number"),a()()(),o(25,"div",35)(26,"button",36),x("click",function(r){let s=g(e).$implicit;return p(2).downloadPaystub(s),f(r.stopPropagation())}),y(27,"i",37),l(28," Download "),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(i.getPayPeriod(e)),c(2),D("Paid: ",i.getPayDate(e)),c(6),D("$",rt(12,5,e.grossPay,"1.2-2")),c(6),D("-$",rt(18,8,e.totalDeductions,"1.2-2")),c(6),D("$",rt(24,11,e.netPay,"1.2-2"))}}function tPe(n,t){n&1&&(o(0,"div",38),y(1,"i",39),o(2,"p"),l(3,"No pay stubs available"),a()())}function nPe(n,t){if(n&1&&(o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"My Pay Stubs"),a()(),o(4,"div",22),b(5,ePe,29,14,"div",23)(6,tPe,4,0,"div",24),a()()),n&2){let e=p();c(5),m("ngForOf",e.paystubs),c(),m("ngIf",e.paystubs.length===0)}}function iPe(n,t){if(n&1&&(o(0,"div",50)(1,"div",51)(2,"div",52),y(3,"i"),a(),o(4,"div",53),l(5),a()(),o(6,"div",54)(7,"div",55)(8,"span",56),l(9),a(),o(10,"span",57),l(11,"Available"),a()(),o(12,"div",58)(13,"div",59),y(14,"div",60),a(),o(15,"div",61),l(16),a()(),o(17,"div",62)(18,"div",63)(19,"span",64),l(20),a(),o(21,"span",65),l(22,"Used"),a()(),o(23,"div",66)(24,"span",64),l(25),a(),o(26,"span",65),l(27,"Pending"),a()(),o(28,"div",67)(29,"span",64),l(30),a(),o(31,"span",65),l(32,"Total"),a()()()()()),n&2){let e=t.$implicit,i=p(3);m("ngClass",i.getLeaveTypeClass(e.leaveType==null?null:e.leaveType.name)),c(3),bi(i.getLeaveTypeIcon(e.leaveType==null?null:e.leaveType.name)),c(2),_((e.leaveType==null?null:e.leaveType.name)||"Leave"),c(4),_(i.getAvailableBalance(e)),c(5),jt("width",i.getBalancePercentage(e),"%"),c(2),Ge("",i.getAvailableBalance(e)," of ",i.getTotalEntitlement(e)," days"),c(4),_(e.used||0),c(5),_(e.pending||0),c(5),_(i.getTotalEntitlement(e))}}function rPe(n,t){if(n&1&&(o(0,"div",48),b(1,iPe,33,12,"div",49),a()),n&2){let e=p(2);c(),m("ngForOf",e.leaveBalances)}}function oPe(n,t){n&1&&(o(0,"div",68)(1,"p"),l(2,"No leave balances available. Please contact HR to set up your leave entitlements."),a()())}function aPe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),Le(5,"date"),a(),o(6,"td"),l(7),Le(8,"date"),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",69),l(13),a()(),o(14,"td"),l(15),a(),o(16,"td")(17,"button",70),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openLeaveActivityModal(r))}),y(18,"i",71),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_((e.leaveType==null?null:e.leaveType.name)||"N/A"),c(2),_(rt(5,7,e.startDate,"MMM d, yyyy")),c(3),_(rt(8,10,e.endDate,"MMM d, yyyy")),c(3),_(i.getLeaveDays(e)),c(2),m("ngClass",i.getLeaveStatusClass(e.status||"PENDING")),c(),_(i.getApprovalStatusText(e)),c(2),_(e.reason)}}function sPe(n,t){n&1&&(o(0,"tr")(1,"td",72),l(2,"No leave requests found"),a()())}function lPe(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"Leave Balance"),a()(),b(4,rPe,2,1,"div",40)(5,oPe,3,0,"div",41),o(6,"div",21)(7,"h3"),l(8,"Leave Requests"),a(),o(9,"button",42),x("click",function(){g(e);let r=p();return f(r.openLeaveRequestModal())}),y(10,"i",43),l(11," Request Leave "),a()(),o(12,"div",44)(13,"table",45)(14,"thead")(15,"tr")(16,"th"),l(17,"Leave Type"),a(),o(18,"th"),l(19,"Start Date"),a(),o(20,"th"),l(21,"End Date"),a(),o(22,"th"),l(23,"Days"),a(),o(24,"th"),l(25,"Status"),a(),o(26,"th"),l(27,"Reason"),a(),o(28,"th"),l(29,"Activity"),a()()(),o(30,"tbody"),b(31,aPe,19,13,"tr",46)(32,sPe,3,0,"tr",47),a()()()()}if(n&2){let e=p();c(4),m("ngIf",e.leaveBalances.length>0),c(),m("ngIf",e.leaveBalances.length===0),c(26),m("ngForOf",e.leaveRequests),c(),m("ngIf",e.leaveRequests.length===0)}}function cPe(n,t){if(n&1&&(o(0,"div",98)(1,"span",99),l(2,"Time Worked Today:"),a(),o(3,"span",100),l(4),a()()),n&2){let e=p(2);c(4),_(e.elapsedTime)}}function dPe(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p(4);c(),D(" | Out: ",e.todayRecord.clockOut==null?null:e.todayRecord.clockOut.substring(0,5))}}function pPe(n,t){if(n&1&&(o(0,"span",104),l(1),b(2,dPe,2,1,"span",47),a()),n&2){let e=p(3);c(),D(" | In: ",(e.todayRecord.clockIn==null?null:e.todayRecord.clockIn.substring(0,5))||"-"," "),c(),m("ngIf",e.todayRecord.clockOut)}}function mPe(n,t){if(n&1&&(o(0,"div",101)(1,"span",102),l(2,"Today's Status:"),a(),o(3,"span",69),l(4),a(),b(5,pPe,3,2,"span",103),a()),n&2){let e=p(2);c(3),m("ngClass",e.getStatusClass(e.getAttendanceStatusBadge(e.todayRecord))),c(),D(" ",e.getAttendanceStatusBadge(e.todayRecord)," "),c(),m("ngIf",e.todayRecord.clockIn)}}function uPe(n,t){if(n&1&&(o(0,"span",106),l(1),a()),n&2){let e=p().$implicit;c(),_((e.project==null?null:e.project.name)||e.projectName)}}function gPe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function fPe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),Le(3,"date"),a(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),b(11,uPe,2,1,"span",105)(12,gPe,2,0,"span",47),a(),o(13,"td")(14,"span",69),l(15),a()(),o(16,"td"),l(17),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(rt(3,9,e.attendanceDate,"MMM d, yyyy")),c(3),_((e.clockIn==null?null:e.clockIn.substring(0,5))||"N/A"),c(2),_((e.clockOut==null?null:e.clockOut.substring(0,5))||"N/A"),c(2),D("",e.regularHours||0,"h"),c(2),m("ngIf",(e.project==null?null:e.project.name)||e.projectName),c(),m("ngIf",!(e.project!=null&&e.project.name)&&!e.projectName),c(2),m("ngClass",i.getStatusClass(i.getAttendanceStatusBadge(e))),c(),D(" ",i.getAttendanceStatusBadge(e)," "),c(2),_(e.remarks||"-")}}function hPe(n,t){n&1&&(o(0,"tr")(1,"td",72),l(2,"No attendance records found"),a()())}function _Pe(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",73)(2,"div",74)(3,"div",75),y(4,"i",6),o(5,"span",76),l(6),Le(7,"date"),a(),o(8,"span",77),l(9),Le(10,"date"),a()(),b(11,cPe,5,1,"div",78),a(),o(12,"div",79)(13,"button",80),x("click",function(){g(e);let r=p();return f(r.clockIn())}),y(14,"i",81),l(15),a(),o(16,"button",82),x("click",function(){g(e);let r=p();return f(r.clockOut())}),y(17,"i",81),l(18),a()(),b(19,mPe,6,3,"div",83),a(),o(20,"div",21)(21,"h3"),l(22),a()(),o(23,"div",84)(24,"div",85)(25,"div",86),y(26,"i",87),a(),o(27,"div",88)(28,"span",31),l(29,"Present Days"),a(),o(30,"span",89),l(31),a()()(),o(32,"div",90)(33,"div",86),y(34,"i",91),a(),o(35,"div",88)(36,"span",31),l(37,"Absent Days"),a(),o(38,"span",89),l(39),a()()(),o(40,"div",92)(41,"div",86),y(42,"i",6),a(),o(43,"div",88)(44,"span",31),l(45,"Late Arrivals"),a(),o(46,"span",89),l(47),a()()(),o(48,"div",93)(49,"div",86),y(50,"i",94),a(),o(51,"div",88)(52,"span",31),l(53,"Total Hours"),a(),o(54,"span",89),l(55),Le(56,"number"),a()()(),o(57,"div",95)(58,"div",86),y(59,"i",96),a(),o(60,"div",88)(61,"span",31),l(62,"Overtime Hours"),a(),o(63,"span",89),l(64),Le(65,"number"),a()()()(),o(66,"div",97)(67,"h3"),l(68,"Attendance Records"),a()(),o(69,"div",44)(70,"table",45)(71,"thead")(72,"tr")(73,"th"),l(74,"Date"),a(),o(75,"th"),l(76,"Clock In"),a(),o(77,"th"),l(78,"Clock Out"),a(),o(79,"th"),l(80,"Hours"),a(),o(81,"th"),l(82,"Project"),a(),o(83,"th"),l(84,"Status"),a(),o(85,"th"),l(86,"Remarks"),a()()(),o(87,"tbody"),b(88,fPe,18,12,"tr",46)(89,hPe,3,0,"tr",47),a()()()()}if(n&2){let e=p();c(6),_(rt(7,18,e.currentTime,"HH:mm:ss")),c(3),_(rt(10,21,e.currentTime,"EEEE, MMMM d, yyyy")),c(2),m("ngIf",e.isClockedIn&&e.elapsedTime),c(2),m("disabled",e.loadingClockIn||e.isClockedIn),c(),m("ngClass",e.loadingClockIn?"fa-spinner fa-spin":"fa-sign-in-alt"),c(),D(" ",e.loadingClockIn?"Clocking In...":"Clock In"," "),c(),m("disabled",e.loadingClockOut||!e.isClockedIn),c(),m("ngClass",e.loadingClockOut?"fa-spinner fa-spin":"fa-sign-out-alt"),c(),D(" ",e.loadingClockOut?"Clocking Out...":"Clock Out"," "),c(),m("ngIf",e.todayRecord),c(3),D("Attendance Summary - ",e.attendanceSummary.currentMonth),c(9),_(e.attendanceSummary.presentDays),c(8),_(e.attendanceSummary.absentDays),c(8),_(e.attendanceSummary.lateDays),c(8),D("",rt(56,24,e.attendanceSummary.totalWorkingHours,"1.1-1"),"h"),c(9),D("",rt(65,27,e.attendanceSummary.overtimeHours,"1.1-1"),"h"),c(24),m("ngForOf",e.attendanceRecords),c(),m("ngIf",e.attendanceRecords.length===0)}}function vPe(n,t){if(n&1&&(o(0,"div",109)(1,"div",26)(2,"span",31),l(3),a(),o(4,"span",69),l(5),a()(),o(6,"div",29)(7,"div",110)(8,"span"),l(9,"Loan Amount"),a(),o(10,"span",32),l(11),Le(12,"number"),a()(),o(13,"div",110)(14,"span"),l(15,"Approved Amount"),a(),o(16,"span",32),l(17),Le(18,"number"),a()(),o(19,"div",110)(20,"span"),l(21,"Outstanding"),a(),o(22,"span",32),l(23),Le(24,"number"),a()(),o(25,"div",110)(26,"span"),l(27,"No. of EMIs"),a(),o(28,"span"),l(29),a()()()()),n&2){let e=t.$implicit,i=p(2);c(3),_(e.loanType),c(),m("ngClass",i.getLoanStatusClass(e.status)),c(),_(e.status),c(6),D("$",rt(12,7,e.loanAmount,"1.2-2")),c(6),D("$",rt(18,10,e.approvedAmount,"1.2-2")),c(6),D("$",rt(24,13,e.approvedAmount-(e.paidAmount||0),"1.2-2")),c(6),_(e.numberOfEmi)}}function xPe(n,t){n&1&&(o(0,"div",38),y(1,"i",111),o(2,"p"),l(3,"No loans found"),a()())}function yPe(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"My Loans & Advances"),a(),o(4,"button",42),x("click",function(){g(e);let r=p();return f(r.openLoanRequestModal())}),y(5,"i",43),l(6," Apply for Loan "),a()(),o(7,"div",107),b(8,vPe,30,16,"div",108)(9,xPe,4,0,"div",24),a()()}if(n&2){let e=p();c(8),m("ngForOf",e.loans),c(),m("ngIf",e.loans.length===0)}}function CPe(n,t){if(n&1&&(o(0,"span",126),l(1),Le(2,"number"),a()),n&2){let e=p().$implicit;c(),D("Max: $",rt(2,1,e.maxAmount,"1.0-0"))}}function bPe(n,t){if(n&1&&(o(0,"div",119)(1,"div",120),y(2,"i",81),a(),o(3,"div",121)(4,"span",122),l(5),a(),o(6,"span",123),l(7),a(),b(8,CPe,3,4,"span",124),a(),o(9,"span",125),l(10),a()()),n&2){let e=t.$implicit,i=p(3);ie("inactive",!e.active),c(),jt("background",i.getCategoryColor(e.code)),c(),m("ngClass",i.getCategoryIcon(e.code)),c(3),_(e.name),c(2),_(e.description||"No description"),c(),m("ngIf",e.maxAmount),c(),ie("active",e.active)("inactive",!e.active),c(),D(" ",e.active?"Active":"Inactive"," ")}}function MPe(n,t){if(n&1&&(o(0,"div",114)(1,"h4",115),y(2,"i",116),l(3," Expense Categories"),a(),o(4,"div",117),b(5,bPe,11,13,"div",118),a()()),n&2){let e=p(2);c(5),m("ngForOf",e.expenseCategories)}}function SPe(n,t){if(n&1){let e=F();o(0,"img",132),x("click",function(){g(e);let r=p(2).$implicit,s=p(2);return f(s.openReceiptPreview(r.receiptUrl))}),a()}if(n&2){let e=p(2).$implicit;m("src",e.receiptUrl,Cr)}}function PPe(n,t){if(n&1&&(o(0,"a",133),y(1,"i",134),a()),n&2){let e=p(2).$implicit;m("href",e.receiptUrl,Cr)}}function wPe(n,t){if(n&1&&(o(0,"div",129),b(1,SPe,1,1,"img",130)(2,PPe,2,1,"a",131),a()),n&2){let e=p().$implicit;c(),m("ngIf",e.receiptUrl==null?null:e.receiptUrl.startsWith("data:image")),c(),m("ngIf",e.receiptUrl==null?null:e.receiptUrl.startsWith("data:application/pdf"))}}function EPe(n,t){n&1&&(o(0,"span",135),l(1,"-"),a())}function OPe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),Le(3,"date"),a(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),b(9,wPe,3,2,"div",127)(10,EPe,2,0,"span",128),a(),o(11,"td"),l(12),Le(13,"number"),a(),o(14,"td")(15,"span",69),l(16),a()(),o(17,"td"),l(18),Le(19,"number"),a(),o(20,"td"),l(21),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(rt(3,10,e.createdAt,"MMM d, yyyy")),c(3),_((e.category==null?null:e.category.name)||"N/A"),c(2),_(e.receiptNumber||"-"),c(2),m("ngIf",e.receiptUrl),c(),m("ngIf",!e.receiptUrl),c(2),D("$",rt(13,13,e.totalAmount,"1.2-2")),c(3),m("ngClass",i.getExpenseStatusClass(e.status)),c(),D(" ",e.status," "),c(2),D("$",rt(19,16,e.approvedAmount,"1.2-2")),c(3),_(e.remarks||"-")}}function TPe(n,t){n&1&&(o(0,"tr")(1,"td",136),l(2,"No expense requests found"),a()())}function kPe(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"My Expense Requests"),a(),o(4,"button",42),x("click",function(){g(e);let r=p();return f(r.openExpenseRequestModal())}),y(5,"i",43),l(6," Submit Expense "),a()(),b(7,MPe,6,1,"div",112),o(8,"h4",113),y(9,"i",5),l(10," My Expense Requests"),a(),o(11,"div",44)(12,"table",45)(13,"thead")(14,"tr")(15,"th"),l(16,"Date"),a(),o(17,"th"),l(18,"Category"),a(),o(19,"th"),l(20,"Receipt #"),a(),o(21,"th"),l(22,"Attachment"),a(),o(23,"th"),l(24,"Amount"),a(),o(25,"th"),l(26,"Status"),a(),o(27,"th"),l(28,"Approved Amount"),a(),o(29,"th"),l(30,"Remarks"),a()()(),o(31,"tbody"),b(32,OPe,22,19,"tr",46)(33,TPe,3,0,"tr",47),a()()()()}if(n&2){let e=p();c(7),m("ngIf",e.expenseCategories.length>0),c(25),m("ngForOf",e.expenses),c(),m("ngIf",e.expenses.length===0)}}function IPe(n,t){n&1&&y(0,"i",163)}function DPe(n,t){n&1&&y(0,"i",5)}function APe(n,t){n&1&&y(0,"i",164)}function RPe(n,t){n&1&&y(0,"i",165)}function FPe(n,t){n&1&&y(0,"i",166)}function NPe(n,t){n&1&&y(0,"i",167)}function LPe(n,t){n&1&&y(0,"i",168)}function VPe(n,t){n&1&&y(0,"i",181)}function BPe(n,t){n&1&&y(0,"i",182)}function UPe(n,t){n&1&&(o(0,"span",183),l(1,"*"),a())}function jPe(n,t){if(n&1&&(o(0,"span",184),l(1),a()),n&2){let e=p().$implicit;c(),_(e.description)}}function WPe(n,t){if(n&1&&(o(0,"span"),l(1),Le(2,"date"),a()),n&2){let e=p(2).$implicit;c(),D("Uploaded: ",rt(2,1,e.uploadedAt,"MMM d, yyyy"))}}function zPe(n,t){if(n&1&&(o(0,"span"),l(1),Le(2,"date"),a()),n&2){let e=p(2).$implicit;c(),D(" | Expires: ",rt(2,1,e.expiryDate,"MMM d, yyyy"))}}function qPe(n,t){if(n&1&&(o(0,"span",185),b(1,WPe,3,4,"span",47)(2,zPe,3,4,"span",47),o(3,"span",186),l(4),a()()),n&2){let e=p().$implicit,i=p(3);c(),m("ngIf",e.uploadedAt),c(),m("ngIf",e.expiryDate),c(),m("ngClass",i.getDocumentStatusClass(e.verificationStatus||"PENDING")),c(),D(" ",e.verificationStatus||"PENDING"," ")}}function HPe(n,t){if(n&1){let e=F();o(0,"button",187),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.downloadDocument(r))}),y(1,"i",37),l(2," Download "),a()}}function GPe(n,t){n&1&&(o(0,"span",188),y(1,"i",6),l(2," Pending "),a())}function $Pe(n,t){if(n&1&&(o(0,"div",169)(1,"div",170),b(2,VPe,1,0,"i",171)(3,BPe,1,0,"i",172),a(),o(4,"div",173)(5,"span",174),l(6),b(7,UPe,2,0,"span",175),a(),b(8,jPe,2,1,"span",176)(9,qPe,5,4,"span",177),a(),o(10,"div",178),b(11,HPe,3,0,"button",179)(12,GPe,3,0,"span",180),a()()),n&2){let e=t.$implicit;ie("uploaded",e.status==="UPLOADED")("pending",e.status==="PENDING"),c(2),m("ngIf",e.status==="UPLOADED"),c(),m("ngIf",e.status==="PENDING"),c(3),D(" ",e.name," "),c(),m("ngIf",e.isMandatory),c(),m("ngIf",e.description),c(),m("ngIf",e.status==="UPLOADED"),c(2),m("ngIf",e.status==="UPLOADED"&&e.fileUrl),c(),m("ngIf",e.status==="PENDING")}}function YPe(n,t){if(n&1&&(o(0,"div",148)(1,"div",149)(2,"div",150)(3,"span",151),b(4,IPe,1,0,"i",152)(5,DPe,1,0,"i",153)(6,APe,1,0,"i",154)(7,RPe,1,0,"i",155)(8,FPe,1,0,"i",156)(9,NPe,1,0,"i",157)(10,LPe,1,0,"i",158),a(),o(11,"h4"),l(12),a()(),o(13,"div",159)(14,"span",61),l(15),a(),o(16,"div",160),y(17,"div",60),a()()(),o(18,"div",161),b(19,$Pe,13,12,"div",162),a()()),n&2){let e=t.$implicit,i=p(2);m("ngClass",i.getCategoryColorClass(e.code)),c(3),m("ngSwitch",e.code),c(),m("ngSwitchCase","ID_WORK_AUTH"),c(),m("ngSwitchCase","TAX_PAYROLL"),c(),m("ngSwitchCase","EMPLOYMENT_HR"),c(),m("ngSwitchCase","FEDERAL_COMPLIANCE"),c(),m("ngSwitchCase","CERTIFICATIONS"),c(),m("ngSwitchCase","OTHER_DOCS"),c(3),_(e.name),c(3),Ge("",e.uploadedDocuments,"/",e.totalDocuments),c(2),jt("width",e.totalDocuments>0?e.uploadedDocuments/e.totalDocuments*100:0,"%"),c(2),m("ngForOf",e.documentTypes)}}function JPe(n,t){n&1&&(o(0,"div",38),y(1,"i",140),o(2,"p"),l(3,"No document types configured. Please contact HR to set up the document requirements."),a()())}function KPe(n,t){if(n&1&&(o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"Document Checklist"),a()(),o(4,"div",137)(5,"div",138)(6,"div",139),y(7,"i",140),a(),o(8,"div",88)(9,"span",31),l(10,"Total Required"),a(),o(11,"span",89),l(12),a()()(),o(13,"div",138)(14,"div",141),y(15,"i",87),a(),o(16,"div",88)(17,"span",31),l(18,"Uploaded"),a(),o(19,"span",89),l(20),a()()(),o(21,"div",138)(22,"div",142),y(23,"i",6),a(),o(24,"div",88)(25,"span",31),l(26,"Pending"),a(),o(27,"span",89),l(28),a()()(),o(29,"div",138)(30,"div",143),y(31,"i",144),a(),o(32,"div",88)(33,"span",31),l(34,"Completion"),a(),o(35,"span",89),l(36),Le(37,"number"),a()()()(),o(38,"div",145),y(39,"i",111),o(40,"p"),l(41,"Upload your required documents. Documents marked with * are mandatory. Contact HR if you need assistance."),a()(),o(42,"div",146),b(43,YPe,20,14,"div",147)(44,JPe,4,0,"div",24),a()()),n&2){let e=p();c(12),_(e.getTotalDocuments()),c(8),_(e.getTotalUploaded()),c(8),_(e.getTotalDocuments()-e.getTotalUploaded()),c(8),D("",e.getTotalDocuments()>0?rt(37,6,e.getTotalUploaded()/e.getTotalDocuments()*100,"1.0-0"):0,"%"),c(7),m("ngForOf",e.documentChecklist),c(),m("ngIf",e.documentChecklist.length===0)}}function QPe(n,t){if(n&1&&(o(0,"div",110)(1,"span"),l(2,"Asset Code"),a(),o(3,"span"),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.assetCode)}}function XPe(n,t){if(n&1&&(o(0,"div",110)(1,"span"),l(2,"Serial Number"),a(),o(3,"span"),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.serialNumber)}}function ZPe(n,t){if(n&1&&(o(0,"div",110)(1,"span"),l(2,"Issue Date"),a(),o(3,"span"),l(4),Le(5,"date"),a()()),n&2){let e=p().$implicit;c(4),_(rt(5,1,e.issueDate,"MMM d, yyyy"))}}function ewe(n,t){if(n&1&&(o(0,"div",110)(1,"span"),l(2,"Condition"),a(),o(3,"span"),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.condition)}}function twe(n,t){if(n&1&&(o(0,"div",110)(1,"span"),l(2,"Remarks"),a(),o(3,"span"),l(4),a()()),n&2){let e=p().$implicit;c(4),_(e.remarks)}}function nwe(n,t){if(n&1&&(o(0,"div",190)(1,"div",26)(2,"span",191),l(3),a(),o(4,"span",69),l(5),a()(),o(6,"div",29)(7,"h4",192),l(8),a(),b(9,QPe,5,1,"div",193)(10,XPe,5,1,"div",193)(11,ZPe,6,4,"div",193)(12,ewe,5,1,"div",193)(13,twe,5,1,"div",193),a()()),n&2){let e=t.$implicit,i=p(2);c(3),_(e.assetType),c(),m("ngClass",i.getAssetStatusClass(e.approvalStatus)),c(),D(" ",e.approvalStatus," "),c(3),_(e.assetName),c(),m("ngIf",e.assetCode),c(),m("ngIf",e.serialNumber),c(),m("ngIf",e.issueDate),c(),m("ngIf",e.condition),c(),m("ngIf",e.remarks)}}function iwe(n,t){n&1&&(o(0,"div",38),y(1,"i",11),o(2,"p"),l(3,"No assets assigned to you"),a()())}function rwe(n,t){if(n&1&&(o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"My Assigned Assets"),a()(),o(4,"div",107),b(5,nwe,14,9,"div",189)(6,iwe,4,0,"div",24),a()()),n&2){let e=p();c(5),m("ngForOf",e.assets),c(),m("ngIf",e.assets.length===0)}}function owe(n,t){if(n&1&&(o(0,"div",196)(1,"div",197),y(2,"i",81),a(),o(3,"div",198)(4,"h4"),l(5),a(),o(6,"p",199),l(7),a(),o(8,"div",200)(9,"span",201),l(10),a(),o(11,"span",202),l(12),Le(13,"date"),a()()(),o(14,"button",203),y(15,"i",204),l(16," View "),a()()),n&2){let e=t.$implicit;c(2),m("ngClass",Ba(9,XSe,e.category==="HR",e.category==="Finance",e.category==="IT")),c(3),_(e.title),c(2),_(e.description),c(2),m("ngClass",e.category.toLowerCase()),c(),_(e.category),c(2),D("Updated: ",rt(13,6,e.updatedAt,"MMM d, yyyy"))}}function awe(n,t){n&1&&(o(0,"div",38),y(1,"i",12),o(2,"p"),l(3,"No policies available"),a()())}function swe(n,t){if(n&1&&(o(0,"div",20)(1,"div",21)(2,"h3"),l(3,"HR Policies & Documents"),a()(),o(4,"div",145),y(5,"i",111),o(6,"p"),l(7,"Review company policies and HR documents. Contact HR for any clarifications or questions."),a()(),o(8,"div",194),b(9,owe,17,13,"div",195)(10,awe,4,0,"div",24),a()()),n&2){let e=p();c(9),m("ngForOf",e.policies),c(),m("ngIf",e.policies.length===0)}}function lwe(n,t){if(n&1&&(o(0,"option",219),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function cwe(n,t){n&1&&(o(0,"span"),l(1,"Submit Request"),a())}function dwe(n,t){n&1&&(o(0,"span"),l(1,"Submitting..."),a())}function pwe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",206),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Submit Leave Request"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeLeaveRequestModal())}),l(6,"\xD7"),a()(),o(7,"div",209)(8,"div",210)(9,"label"),l(10,"Leave Type *"),a(),o(11,"select",211),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLeaveRequest.leaveTypeId,r)||(s.newLeaveRequest.leaveTypeId=r),f(r)}),b(12,lwe,2,2,"option",212),a()(),o(13,"div",213)(14,"div",210)(15,"label"),l(16,"Start Date *"),a(),o(17,"input",214),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLeaveRequest.startDate,r)||(s.newLeaveRequest.startDate=r),f(r)}),a()(),o(18,"div",210)(19,"label"),l(20,"End Date *"),a(),o(21,"input",214),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLeaveRequest.endDate,r)||(s.newLeaveRequest.endDate=r),f(r)}),a()()(),o(22,"div",210)(23,"label"),l(24,"Reason"),a(),o(25,"textarea",215),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLeaveRequest.reason,r)||(s.newLeaveRequest.reason=r),f(r)}),a()()(),o(26,"div",216)(27,"button",217),x("click",function(){g(e);let r=p();return f(r.closeLeaveRequestModal())}),l(28,"Cancel"),a(),o(29,"button",218),x("click",function(){g(e);let r=p();return f(r.submitLeaveRequest())}),b(30,cwe,2,0,"span",47)(31,dwe,2,0,"span",47),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newLeaveRequest.leaveTypeId),c(),m("ngForOf",e.leaveTypes),c(5),M("ngModel",e.newLeaveRequest.startDate),c(4),M("ngModel",e.newLeaveRequest.endDate),c(4),M("ngModel",e.newLeaveRequest.reason),c(2),m("disabled",e.submittingLeave),c(2),m("disabled",e.submittingLeave),c(),m("ngIf",!e.submittingLeave),c(),m("ngIf",e.submittingLeave)}}function mwe(n,t){if(n&1&&(o(0,"option",219),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function uwe(n,t){if(n&1&&(o(0,"option",219),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function gwe(n,t){n&1&&(o(0,"label",230),y(1,"i",231),l(2," Choose File "),a())}function fwe(n,t){if(n&1){let e=F();o(0,"div",232)(1,"span",233),l(2),a(),o(3,"button",234),x("click",function(){g(e);let r=p(2);return f(r.removeReceiptFile())}),y(4,"i",235),a()()}if(n&2){let e=p(2);c(2),_(e.newExpenseRequest.receiptFile.name)}}function hwe(n,t){if(n&1&&y(0,"img",239),n&2){let e=p(3);m("src",e.newExpenseRequest.receiptPreview,Cr)}}function _we(n,t){n&1&&(o(0,"div",240),y(1,"i",134),o(2,"span"),l(3,"PDF Ready"),a()())}function vwe(n,t){if(n&1&&(o(0,"div",236),b(1,hwe,1,1,"img",237)(2,_we,4,0,"div",238),a()),n&2){let e=p(2);c(),m("ngIf",e.newExpenseRequest.receiptPreview.startsWith("data:image")),c(),m("ngIf",e.newExpenseRequest.receiptPreview.startsWith("data:application/pdf"))}}function xwe(n,t){n&1&&(o(0,"span"),l(1,"Submit Expense"),a())}function ywe(n,t){n&1&&(o(0,"span"),l(1,"Submitting..."),a())}function Cwe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",206),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Submit Expense Request"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeExpenseRequestModal())}),l(6,"\xD7"),a()(),o(7,"div",209)(8,"div",210)(9,"label"),l(10,"Expense Category *"),a(),o(11,"select",211),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.categoryId,r)||(s.newExpenseRequest.categoryId=r),f(r)}),b(12,mwe,2,2,"option",212),a()(),o(13,"div",213)(14,"div",210)(15,"label"),l(16,"Expense Date *"),a(),o(17,"input",214),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.expenseDate,r)||(s.newExpenseRequest.expenseDate=r),f(r)}),a()(),o(18,"div",210)(19,"label"),l(20,"Amount ($) *"),a(),o(21,"input",220),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.amount,r)||(s.newExpenseRequest.amount=r),f(r)}),a()()(),o(22,"div",210)(23,"label"),l(24,"Payee Name"),a(),o(25,"input",221),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.payeeName,r)||(s.newExpenseRequest.payeeName=r),f(r)}),a()(),o(26,"div",210)(27,"label"),l(28,"Project"),a(),o(29,"select",211),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.projectId,r)||(s.newExpenseRequest.projectId=r),f(r)}),o(30,"option",219),l(31,"-- Select Project (Optional) --"),a(),b(32,uwe,2,2,"option",212),a()(),o(33,"div",210)(34,"label"),l(35,"Receipt Number"),a(),o(36,"input",222),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.receiptNumber,r)||(s.newExpenseRequest.receiptNumber=r),f(r)}),a()(),o(37,"div",210)(38,"label"),l(39,"Attach Receipt"),a(),o(40,"div",223)(41,"input",224),x("change",function(r){g(e);let s=p();return f(s.onReceiptFileSelected(r))}),a(),b(42,gwe,3,0,"label",225)(43,fwe,5,1,"div",226),a(),b(44,vwe,3,2,"div",227),o(45,"small",228),l(46,"Max 500KB. Supported: JPEG, PNG, GIF, PDF"),a()(),o(47,"div",210)(48,"label"),l(49,"Description *"),a(),o(50,"textarea",229),S("ngModelChange",function(r){g(e);let s=p();return P(s.newExpenseRequest.description,r)||(s.newExpenseRequest.description=r),f(r)}),a()()(),o(51,"div",216)(52,"button",217),x("click",function(){g(e);let r=p();return f(r.closeExpenseRequestModal())}),l(53,"Cancel"),a(),o(54,"button",218),x("click",function(){g(e);let r=p();return f(r.submitExpenseRequest())}),b(55,xwe,2,0,"span",47)(56,ywe,2,0,"span",47),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newExpenseRequest.categoryId),c(),m("ngForOf",e.expenseCategories),c(5),M("ngModel",e.newExpenseRequest.expenseDate),c(4),M("ngModel",e.newExpenseRequest.amount),c(4),M("ngModel",e.newExpenseRequest.payeeName),c(4),M("ngModel",e.newExpenseRequest.projectId),c(),m("value",0),c(2),m("ngForOf",e.projects),c(4),M("ngModel",e.newExpenseRequest.receiptNumber),c(6),m("ngIf",!e.newExpenseRequest.receiptFile),c(),m("ngIf",e.newExpenseRequest.receiptFile),c(),m("ngIf",e.newExpenseRequest.receiptPreview),c(6),M("ngModel",e.newExpenseRequest.description),c(2),m("disabled",e.submittingExpense),c(2),m("disabled",e.submittingExpense),c(),m("ngIf",!e.submittingExpense),c(),m("ngIf",e.submittingExpense)}}function bwe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",241),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Receipt Preview"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeReceiptPreview())}),l(6,"\xD7"),a()(),o(7,"div",209),y(8,"img",242),a()()()}if(n&2){let e=p();c(8),m("src",e.selectedReceiptUrl,Cr)}}function Mwe(n,t){if(n&1&&(o(0,"option",219),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e.replace("_"," "))}}function Swe(n,t){if(n&1&&(o(0,"div",246)(1,"span",31),l(2,"Estimated Monthly EMI:"),a(),o(3,"span",32),l(4),Le(5,"number"),a()()),n&2){let e=p(2);c(4),D("$",rt(5,1,e.getEmiAmount(),"1.2-2"))}}function Pwe(n,t){n&1&&(o(0,"span"),l(1,"Submit Application"),a())}function wwe(n,t){n&1&&(o(0,"span"),l(1,"Submitting..."),a())}function Ewe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",206),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Apply for Loan/Advance"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeLoanRequestModal())}),l(6,"\xD7"),a()(),o(7,"div",209)(8,"div",210)(9,"label"),l(10,"Loan Type *"),a(),o(11,"select",211),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLoanRequest.loanType,r)||(s.newLoanRequest.loanType=r),f(r)}),b(12,Mwe,2,2,"option",212),a()(),o(13,"div",213)(14,"div",210)(15,"label"),l(16,"Loan Amount ($) *"),a(),o(17,"input",243),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLoanRequest.amount,r)||(s.newLoanRequest.amount=r),f(r)}),a()(),o(18,"div",210)(19,"label"),l(20,"Number of EMIs *"),a(),o(21,"select",211),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLoanRequest.numberOfEmi,r)||(s.newLoanRequest.numberOfEmi=r),f(r)}),o(22,"option",219),l(23,"3 Months"),a(),o(24,"option",219),l(25,"6 Months"),a(),o(26,"option",219),l(27,"12 Months"),a(),o(28,"option",219),l(29,"18 Months"),a(),o(30,"option",219),l(31,"24 Months"),a()()()(),b(32,Swe,6,4,"div",244),o(33,"div",210)(34,"label"),l(35,"Reason for Loan *"),a(),o(36,"textarea",245),S("ngModelChange",function(r){g(e);let s=p();return P(s.newLoanRequest.reason,r)||(s.newLoanRequest.reason=r),f(r)}),a()()(),o(37,"div",216)(38,"button",217),x("click",function(){g(e);let r=p();return f(r.closeLoanRequestModal())}),l(39,"Cancel"),a(),o(40,"button",218),x("click",function(){g(e);let r=p();return f(r.submitLoanRequest())}),b(41,Pwe,2,0,"span",47)(42,wwe,2,0,"span",47),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.newLoanRequest.loanType),c(),m("ngForOf",e.loanTypes),c(5),M("ngModel",e.newLoanRequest.amount),c(4),M("ngModel",e.newLoanRequest.numberOfEmi),c(),m("value",3),c(2),m("value",6),c(2),m("value",12),c(2),m("value",18),c(2),m("value",24),c(2),m("ngIf",e.newLoanRequest.amount>0),c(4),M("ngModel",e.newLoanRequest.reason),c(2),m("disabled",e.submittingLoan),c(2),m("disabled",e.submittingLoan),c(),m("ngIf",!e.submittingLoan),c(),m("ngIf",e.submittingLoan)}}function Owe(n,t){if(n&1){let e=F();o(0,"div",209)(1,"div",249)(2,"span")(3,"strong"),l(4),a()(),o(5,"span",250),l(6,"|"),a(),o(7,"span"),l(8),Le(9,"date"),Le(10,"date"),a(),o(11,"span",69),l(12),a()(),o(13,"app-activity-timeline",251),x("addNote",function(r){g(e);let s=p(2);return f(s.onAddLeaveNote(r))}),a()()}if(n&2){let e=p(2);c(4),_(e.selectedLeaveRequest.leaveType==null?null:e.selectedLeaveRequest.leaveType.name),c(4),Ge("",rt(9,8,e.selectedLeaveRequest.startDate,"MMM d, yyyy")," - ",rt(10,11,e.selectedLeaveRequest.endDate,"MMM d, yyyy")),c(3),m("ngClass",e.getLeaveStatusClass(e.selectedLeaveRequest.status||"")),c(),_(e.getApprovalStatusText(e.selectedLeaveRequest)),c(),m("activities",e.leaveActivityItems)("loading",e.loadingLeaveActivity)("showAddNote",!0)}}function Twe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",247),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Leave Request Activity"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeLeaveActivityModal())}),y(6,"i",235),a()(),b(7,Owe,14,14,"div",248),a()()}if(n&2){let e=p();c(7),m("ngIf",e.selectedLeaveRequest)}}function kwe(n,t){if(n&1){let e=F();o(0,"div",209)(1,"div",249)(2,"span")(3,"strong"),l(4),a()(),o(5,"span",250),l(6,"|"),a(),o(7,"span"),l(8),Le(9,"number"),a(),o(10,"span",69),l(11),a()(),o(12,"app-activity-timeline",251),x("addNote",function(r){g(e);let s=p(2);return f(s.onAddExpenseNote(r))}),a()()}if(n&2){let e=p(2);c(4),_(e.selectedExpenseRequest.description||"Expense"),c(4),D("$",rt(9,7,e.selectedExpenseRequest.amount,"1.2-2")),c(2),m("ngClass",e.getLeaveStatusClass(e.selectedExpenseRequest.status||"")),c(),_(e.selectedExpenseRequest.status),c(),m("activities",e.expenseActivityItems)("loading",e.loadingExpenseActivity)("showAddNote",!0)}}function Iwe(n,t){if(n&1){let e=F();o(0,"div",205)(1,"div",247),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",207)(3,"h3"),l(4,"Expense Request Activity"),a(),o(5,"button",208),x("click",function(){g(e);let r=p();return f(r.closeExpenseActivityModal())}),y(6,"i",235),a()(),b(7,kwe,13,10,"div",248),a()()}if(n&2){let e=p();c(7),m("ngIf",e.selectedExpenseRequest)}}var V2=class n{constructor(t,e,i,r,s,d,u,h,v,C,O,T){this.payrollService=t;this.leaveService=e;this.loanService=i;this.expenseService=r;this.attendanceService=s;this.authService=d;this.documentService=u;this.employeeService=h;this.salarySlipService=v;this.projectService=C;this.cdr=O;this.toastService=T;this.currentEmployeeId=this.authService.getCurrentUserId()||0}activeTab="paystubs";paystubs=[];leaveBalances=[];leaveRequests=[];loans=[];expenses=[];attendanceRecords=[];documents=[];documentTypes=[];documentChecklist=[];assets=[];policies=[];expenseCategories=[];projects=[];currentEmployeeId=0;currentEmployee=null;selectedPaystub=null;showPaystubModal=!1;payslipData=null;showLeaveRequestModal=!1;newLeaveRequest={leaveTypeId:0,startDate:"",endDate:"",reason:""};leaveTypes=[];showExpenseRequestModal=!1;newExpenseRequest={categoryId:0,amount:0,description:"",expenseDate:"",receiptNumber:"",receiptFile:null,receiptPreview:"",payeeName:"",projectId:0};showReceiptPreviewModal=!1;selectedReceiptUrl="";showLoanRequestModal=!1;newLoanRequest={loanType:"PERSONAL",amount:0,numberOfEmi:12,reason:""};loanTypes=["PERSONAL","SALARY_ADVANCE","EMERGENCY","EDUCATION","MEDICAL","TRAVEL"];attendanceSummary={presentDays:0,absentDays:0,lateDays:0,overtimeHours:0,totalWorkingHours:0,currentMonth:""};currentTime=new Date;todayRecord=null;isClockedIn=!1;loadingClockIn=!1;loadingClockOut=!1;clockInterval=null;elapsedTime="";companyName="Hao System Corporation";companyAddress="123 Business Park, Suite 500, New York, NY 10001";submittingLeave=!1;submittingExpense=!1;submittingLoan=!1;showLeaveActivityModal=!1;selectedLeaveRequest=null;leaveActivityItems=[];loadingLeaveActivity=!1;showExpenseActivityModal=!1;selectedExpenseRequest=null;expenseActivityItems=[];loadingExpenseActivity=!1;ngOnInit(){this.loadCurrentEmployee(),this.loadPaystubs(),this.loadLeaveBalances(),this.loadLeaveRequests(),this.loadLeaveTypes(),this.loadLoans(),this.loadExpenses(),this.loadExpenseCategories(),this.loadProjects(),this.loadAttendance(),this.loadDocuments(),this.loadAssets(),this.loadPolicies(),this.loadTodayClockRecord(),this.clockInterval=setInterval(()=>{this.currentTime=new Date,this.updateElapsedTime(),this.cdr.markForCheck()},1e3)}ngOnDestroy(){this.clockInterval&&clearInterval(this.clockInterval)}loadCurrentEmployee(){this.employeeService.getById(this.currentEmployeeId).subscribe({next:t=>this.currentEmployee=t,error:t=>console.error("Error loading employee:",t)})}loadPaystubs(){this.payrollService.getPaystubs(this.currentEmployeeId).subscribe({next:t=>this.paystubs=t,error:t=>console.error("Error loading paystubs:",t)})}loadLeaveBalances(){this.leaveService.initializeBalances(this.currentEmployeeId).subscribe({next:()=>{this.leaveService.getEmployeeBalances(this.currentEmployeeId).subscribe({next:t=>{this.leaveBalances=t,this.cdr.markForCheck()},error:t=>console.error("Error loading leave balances:",t)})},error:()=>{this.leaveService.getEmployeeBalances(this.currentEmployeeId).subscribe({next:t=>{this.leaveBalances=t,this.cdr.markForCheck()},error:t=>console.error("Error loading leave balances:",t)})}})}loadLeaveRequests(){this.leaveService.getRequestsByEmployee(this.currentEmployeeId).subscribe({next:t=>this.leaveRequests=t,error:t=>console.error("Error loading leave requests:",t)})}loadLeaveTypes(){this.leaveService.getAllLeaveTypes().subscribe({next:t=>this.leaveTypes=t,error:t=>console.error("Error loading leave types:",t)})}viewPaystub(t){this.selectedPaystub=t,this.payslipData=this.convertToPayslipData(t),this.showPaystubModal=!0}closePaystubModal(){this.showPaystubModal=!1,this.selectedPaystub=null,this.payslipData=null}convertToPayslipData(t){let e=t.employee||this.currentEmployee,i=t.payrollRun;return{employeeId:e?.employeeCode||`EMP${String(this.currentEmployeeId).padStart(3,"0")}`,employeeName:e?`${e.firstName||""} ${e.lastName||""}`.trim():"Employee",employeeDesignation:e?.designation?.name||e?.jobTitle||"Employee",department:e?.department?.name||"General",payPeriod:i?.payFrequency?.name||"Monthly",payDate:i?.payDate||new Date().toISOString().split("T")[0],periodFrom:i?.periodStartDate||"",periodTo:i?.periodEndDate||"",basePay:t.basePay||0,regularHours:t.regularHours||0,overtimeHours:t.overtimeHours||0,overtimePay:t.overtimePay||0,bonuses:t.bonuses||0,allowances:0,reimbursements:t.reimbursements||0,grossPay:t.grossPay||0,federalTax:t.federalTax||0,stateTax:t.stateTax||0,socialSecurityTax:t.socialSecurityTax||0,medicareTax:t.medicareTax||0,healthInsurance:t.healthInsurance||0,retirement401k:t.retirement401k||0,loanDeductions:t.loanDeductions||0,otherDeductions:0,totalDeductions:t.totalDeductions||0,netPay:t.netPay||0,expenses:t.reimbursements||0}}openLeaveRequestModal(){this.newLeaveRequest={leaveTypeId:this.leaveTypes.length>0?this.leaveTypes[0].id:0,startDate:"",endDate:"",reason:""},this.showLeaveRequestModal=!0}closeLeaveRequestModal(){this.showLeaveRequestModal=!1}submitLeaveRequest(){if(this.submittingLeave)return;if(!this.newLeaveRequest.startDate||!this.newLeaveRequest.endDate){alert("Please fill in all required fields");return}this.submittingLeave=!0,this.cdr.markForCheck();let t={employeeId:this.currentEmployeeId,leaveTypeId:this.newLeaveRequest.leaveTypeId,startDate:this.newLeaveRequest.startDate,endDate:this.newLeaveRequest.endDate,reason:this.newLeaveRequest.reason};this.leaveService.createRequest(t).subscribe({next:()=>{this.submittingLeave=!1,this.cdr.markForCheck(),this.closeLeaveRequestModal(),this.loadLeaveRequests(),this.loadLeaveBalances(),this.toastService.success("Leave request submitted successfully!")},error:e=>{this.submittingLeave=!1,this.cdr.markForCheck(),console.error("Error submitting leave request:",e);let i=e.error?.message||e.message||"Error submitting leave request";this.toastService.error(i)}})}getPayPeriod(t){if(t.payrollRun){let e=new Date(t.payrollRun.periodStartDate),i=new Date(t.payrollRun.periodEndDate);return`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}return"N/A"}getPayDate(t){return t.payrollRun?.payDate?new Date(t.payrollRun.payDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}getLeaveTypeName(t){let e=this.leaveTypes.find(i=>i.id===t);return e?e.name:"Unknown"}getStatusClass(t){switch(t){case"APPROVED":return"approved";case"REJECTED":return"rejected";case"CANCELLED":return"cancelled";default:return"pending"}}loadLoans(){this.loanService.getLoansByEmployee(this.currentEmployeeId).subscribe({next:t=>this.loans=t,error:t=>console.error("Error loading loans:",t)})}loadExpenses(){this.expenseService.getRequestsByEmployee(this.currentEmployeeId).subscribe({next:t=>this.expenses=t,error:t=>console.error("Error loading expenses:",t)})}loadAttendance(){this.attendanceService.getByEmployee(this.currentEmployeeId).subscribe({next:t=>{this.attendanceRecords=t,this.calculateAttendanceSummary()},error:t=>console.error("Error loading attendance:",t)})}calculateAttendanceSummary(){let t=new Date;this.attendanceSummary.currentMonth=t.toLocaleString("en-US",{month:"long",year:"numeric"});let e=this.attendanceRecords.filter(i=>{let r=new Date(i.attendanceDate);return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()});this.attendanceSummary.presentDays=e.filter(i=>i.status==="PRESENT"||i.status==="HALF_DAY"||i.status==="LATE").length,this.attendanceSummary.absentDays=e.filter(i=>i.status==="ABSENT").length,this.attendanceSummary.lateDays=e.filter(i=>i.status==="LATE").length,this.attendanceSummary.overtimeHours=e.reduce((i,r)=>i+(r.overtimeHours||0),0),this.attendanceSummary.totalWorkingHours=e.reduce((i,r)=>i+(r.regularHours||0),0)}loadTodayClockRecord(){let t=new Date().toISOString().split("T")[0];this.attendanceService.getByEmployeeAndDateRange(this.currentEmployeeId,t,t).subscribe({next:e=>{this.todayRecord=e.length>0?e[0]:null,this.isClockedIn=!!(this.todayRecord&&this.todayRecord.clockIn&&!this.todayRecord.clockOut),this.updateElapsedTime(),this.cdr.markForCheck()},error:()=>{this.todayRecord=null,this.isClockedIn=!1,this.cdr.markForCheck()}})}updateElapsedTime(){if(this.todayRecord?.clockIn&&!this.todayRecord?.clockOut){let t=this.parseTimeToDate(this.todayRecord.clockIn),i=new Date().getTime()-t.getTime(),r=Math.floor(i/(1e3*60*60)),s=Math.floor(i%(1e3*60*60)/(1e3*60)),d=Math.floor(i%(1e3*60)/1e3);this.elapsedTime=`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}else this.elapsedTime=""}parseTimeToDate(t){let e=new Date,[i,r,s]=t.split(":").map(Number);return e.setHours(i||0,r||0,s||0,0),e}clockIn(){this.loadingClockIn||this.isClockedIn||(this.loadingClockIn=!0,this.cdr.markForCheck(),this.attendanceService.clockIn(this.currentEmployeeId).subscribe({next:t=>{this.todayRecord=t,this.isClockedIn=!0,this.loadingClockIn=!1,this.loadAttendance(),this.loadTodayClockRecord(),this.toastService.success("Clocked in successfully!"),this.cdr.markForCheck()},error:t=>{this.loadingClockIn=!1;let e=t.error?.message||t.message||"Error clocking in";this.toastService.error(e),this.cdr.markForCheck()}}))}clockOut(){this.loadingClockOut||!this.isClockedIn||(this.loadingClockOut=!0,this.cdr.markForCheck(),this.attendanceService.clockOut(this.currentEmployeeId).subscribe({next:t=>{this.todayRecord=t,this.isClockedIn=!1,this.loadingClockOut=!1,this.elapsedTime="",this.loadAttendance(),this.loadTodayClockRecord(),this.toastService.success("Clocked out successfully!"),this.cdr.markForCheck()},error:t=>{this.loadingClockOut=!1;let e=t.error?.message||t.message||"Error clocking out";this.toastService.error(e),this.cdr.markForCheck()}}))}loadExpenseCategories(){this.expenseService.getCategories().subscribe({next:t=>this.expenseCategories=t,error:t=>console.error("Error loading expense categories:",t)})}loadPolicies(){this.policies=[{id:1,title:"Leave Policy",category:"HR",description:"Guidelines for leave applications and approvals",updatedAt:"2024-01-15"},{id:2,title:"Expense Reimbursement Policy",category:"Finance",description:"Rules for expense claims and reimbursements",updatedAt:"2024-02-01"},{id:3,title:"Code of Conduct",category:"HR",description:"Employee behavior and ethics guidelines",updatedAt:"2024-01-10"},{id:4,title:"Remote Work Policy",category:"HR",description:"Guidelines for work from home arrangements",updatedAt:"2024-03-01"},{id:5,title:"IT Security Policy",category:"IT",description:"Information security and data protection guidelines",updatedAt:"2024-02-15"},{id:6,title:"Performance Review Policy",category:"HR",description:"Annual performance evaluation process",updatedAt:"2024-01-20"}]}loadProjects(){this.projectService.projects$.subscribe({next:t=>{this.projects=t,this.cdr.markForCheck()}})}openExpenseRequestModal(){this.newExpenseRequest={categoryId:this.expenseCategories.length>0?this.expenseCategories[0].id:0,amount:0,description:"",expenseDate:new Date().toISOString().split("T")[0],receiptNumber:"",receiptFile:null,receiptPreview:"",payeeName:"",projectId:0},this.showExpenseRequestModal=!0}closeExpenseRequestModal(){this.showExpenseRequestModal=!1}onReceiptFileSelected(t){let e=t.target;if(e.files&&e.files[0]){let i=e.files[0];if(i.size>500*1024){alert("File size must be less than 500KB"),e.value="";return}if(!["image/jpeg","image/png","image/gif","application/pdf"].includes(i.type)){alert("Please upload an image (JPEG, PNG, GIF) or PDF file"),e.value="";return}this.newExpenseRequest.receiptFile=i;let s=new FileReader;s.onload=d=>{this.newExpenseRequest.receiptPreview=d.target?.result},s.readAsDataURL(i)}}removeReceiptFile(){this.newExpenseRequest.receiptFile=null,this.newExpenseRequest.receiptPreview=""}openReceiptPreview(t){this.selectedReceiptUrl=t,this.showReceiptPreviewModal=!0}closeReceiptPreview(){this.showReceiptPreviewModal=!1,this.selectedReceiptUrl=""}submitExpenseRequest(){if(this.submittingExpense)return;if(!this.newExpenseRequest.amount||!this.newExpenseRequest.description){alert("Please fill in all required fields");return}this.submittingExpense=!0,this.cdr.markForCheck();let t="";this.newExpenseRequest.receiptPreview&&(t=this.newExpenseRequest.receiptPreview);let e={employeeId:this.currentEmployeeId,categoryId:this.newExpenseRequest.categoryId,totalAmount:this.newExpenseRequest.amount,description:this.newExpenseRequest.description,expenseDate:this.newExpenseRequest.expenseDate,receiptNumber:this.newExpenseRequest.receiptNumber,receiptUrl:t,status:"PENDING_APPROVAL"};this.expenseService.createRequest(e).subscribe({next:()=>{this.submittingExpense=!1,this.closeExpenseRequestModal(),this.loadExpenses(),this.cdr.markForCheck(),this.toastService.success("Expense request submitted successfully!")},error:i=>{this.submittingExpense=!1,this.cdr.markForCheck(),console.error("Error submitting expense request:",i);let r=i.error?.message||i.message||"Error submitting expense request";this.toastService.error(r)}})}openLoanRequestModal(){this.newLoanRequest={loanType:"PERSONAL",amount:0,numberOfEmi:12,reason:""},this.showLoanRequestModal=!0}closeLoanRequestModal(){this.showLoanRequestModal=!1}submitLoanRequest(){if(this.submittingLoan)return;if(!this.newLoanRequest.amount||!this.newLoanRequest.reason){alert("Please fill in all required fields");return}this.submittingLoan=!0,this.cdr.markForCheck();let t={employeeId:this.currentEmployeeId,loanType:this.newLoanRequest.loanType,requestedAmount:this.newLoanRequest.amount,requestedTenureMonths:this.newLoanRequest.numberOfEmi,purpose:this.newLoanRequest.reason,status:"PENDING"};this.loanService.createApplication(t).subscribe({next:()=>{this.submittingLoan=!1,this.cdr.markForCheck(),this.closeLoanRequestModal(),this.loadLoans(),this.toastService.success("Loan application submitted successfully!")},error:e=>{this.submittingLoan=!1,this.cdr.markForCheck(),console.error("Error submitting loan application:",e);let i=e.error?.message||e.message||"Error submitting loan application";this.toastService.error(i)}})}getEmiAmount(){return this.newLoanRequest.amount>0&&this.newLoanRequest.numberOfEmi>0?this.newLoanRequest.amount/this.newLoanRequest.numberOfEmi:0}downloadPaystub(t){let e=this.buildSalarySlipData(t);this.salarySlipService.generateSalarySlipPDF(e)}printPaystub(t){let e=this.buildSalarySlipData(t);this.salarySlipService.printSalarySlipPDF(e)}buildSalarySlipData(t){let e=this.currentEmployee,i=t.payrollRun?.payDate?new Date(t.payrollRun.payDate):new Date,r=i.toLocaleString("en-US",{month:"long"}),s=i.getFullYear();return{employee:{name:e?`${e.firstName} ${e.lastName}`:"Employee",employeeCode:e?.employeeCode||`EMP-${this.currentEmployeeId}`,designation:e?.designation?.title||"Staff",dateOfJoining:e?.joiningDate?new Date(e.joiningDate).toLocaleDateString():"N/A",bankAccountNumber:void 0,department:e?.department?.name||void 0},payrollRecord:t,companyName:this.companyName,companyAddress:this.companyAddress,payMonth:r,payYear:s,paidDays:22,lopDays:0}}getTotalEntitlement(t){return(t.openingBalance||0)+(t.credited||0)+(t.carryForward||0)}getAvailableBalance(t){if(t.availableBalance!==void 0&&t.availableBalance!==null)return t.availableBalance;let e=this.getTotalEntitlement(t),i=t.used||0,r=t.pending||0,s=t.lapsed||0,d=t.encashed||0;return e-i-r-s-d}getBalancePercentage(t){let e=this.getTotalEntitlement(t);return e===0?0:this.getAvailableBalance(t)/e*100}getLeaveTypeClass(t){if(!t)return"leave-default";let e=t.toLowerCase();return e.includes("annual")||e.includes("vacation")?"leave-annual":e.includes("sick")||e.includes("medical")?"leave-sick":e.includes("casual")?"leave-casual":e.includes("maternity")?"leave-maternity":e.includes("paternity")?"leave-paternity":e.includes("unpaid")?"leave-unpaid":"leave-default"}getLeaveTypeIcon(t){if(!t)return"fas fa-calendar-alt";let e=t.toLowerCase();return e.includes("annual")||e.includes("vacation")?"fas fa-umbrella-beach":e.includes("sick")||e.includes("medical")?"fas fa-heartbeat":e.includes("casual")?"fas fa-coffee":e.includes("maternity")?"fas fa-baby":e.includes("paternity")?"fas fa-baby-carriage":e.includes("unpaid")?"fas fa-calendar-times":"fas fa-calendar-alt"}getLeaveDays(t){if(t.totalDays!==void 0&&t.totalDays!==null)return t.totalDays;if(t.startDate&&t.endDate){let e=new Date(t.startDate),i=new Date(t.endDate),r=Math.abs(i.getTime()-e.getTime());return Math.ceil(r/(1e3*60*60*24))+1}return 0}getLoanStatusClass(t){switch(t){case"APPROVED":return"approved";case"REJECTED":return"rejected";case"DISBURSED":return"disbursed";case"PENDING":return"pending";default:return"draft"}}getExpenseStatusClass(t){switch(t){case"APPROVED":return"approved";case"REJECTED":return"rejected";case"PENDING_APPROVAL":return"pending";case"DRAFT":return"draft";default:return"submitted"}}getAttendanceStatusBadge(t){return t.status||"ABSENT"}loadDocuments(){this.documentService.getEmployeeDocuments(this.currentEmployeeId).subscribe({next:t=>this.documents=t,error:t=>console.error("Error loading documents:",t)}),this.documentService.getTypes().subscribe({next:t=>this.documentTypes=t,error:t=>console.error("Error loading document types:",t)}),this.documentService.getEmployeeDocumentChecklist(this.currentEmployeeId).subscribe({next:t=>this.documentChecklist=t,error:t=>console.error("Error loading document checklist:",t)})}getCategoryColorClass(t){switch(t){case"ID_WORK_AUTH":return"category-blue";case"TAX_PAYROLL":return"category-yellow";case"EMPLOYMENT_HR":return"category-green";case"FEDERAL_COMPLIANCE":return"category-orange";case"CERTIFICATIONS":return"category-red";case"OTHER_DOCS":return"category-purple";default:return"category-default"}}getTotalDocuments(){return this.documentChecklist.reduce((t,e)=>t+e.totalDocuments,0)}getTotalUploaded(){return this.documentChecklist.reduce((t,e)=>t+e.uploadedDocuments,0)}downloadDocument(t){if(t.fileUrl)if(t.fileUrl.startsWith("data:")){let e=document.createElement("a");e.href=t.fileUrl,e.download=t.fileName||"document",e.click()}else window.open(t.fileUrl,"_blank")}loadAssets(){this.employeeService.getAssets(this.currentEmployeeId).subscribe({next:t=>this.assets=t,error:t=>console.error("Error loading assets:",t)})}getDocumentStatusClass(t){switch(t){case"VERIFIED":return"approved";case"REJECTED":return"rejected";case"PENDING":return"pending";default:return"pending"}}getAssetStatusClass(t){switch(t){case"ASSIGNED":return"approved";case"RETURNED":return"returned";case"PENDING":return"pending";default:return"pending"}}isDocumentExpiring(t){if(!t.expiryDate)return!1;let e=new Date(t.expiryDate),i=new Date,r=Math.ceil((e.getTime()-i.getTime())/(1e3*60*60*24));return r<=30&&r>0}isDocumentExpired(t){return t.expiryDate?new Date(t.expiryDate)<new Date:!1}getCategoryColor(t){return{TRAVEL:"#3498db",MEALS:"#e67e22",OFFICE:"#9b59b6",COMMUNICATION:"#1abc9c",TRANSPORT:"#f39c12",EQUIPMENT:"#e74c3c",TRAINING:"#2ecc71",ENTERTAINMENT:"#e91e63",ACCOMMODATION:"#00bcd4",MEDICAL:"#ff5722",SUPPLIES:"#795548",UTILITIES:"#607d8b",MARKETING:"#673ab7",SOFTWARE:"#009688",MISC:"#9e9e9e"}[t]||"#008080"}getCategoryIcon(t){return{TRAVEL:"fa-plane",MEALS:"fa-utensils",OFFICE:"fa-building",COMMUNICATION:"fa-phone",TRANSPORT:"fa-car",EQUIPMENT:"fa-laptop",TRAINING:"fa-graduation-cap",ENTERTAINMENT:"fa-film",ACCOMMODATION:"fa-hotel",MEDICAL:"fa-medkit",SUPPLIES:"fa-box",UTILITIES:"fa-bolt",MARKETING:"fa-bullhorn",SOFTWARE:"fa-code",MISC:"fa-ellipsis-h"}[t]||"fa-receipt"}openLeaveActivityModal(t){this.selectedLeaveRequest=t,this.showLeaveActivityModal=!0,this.loadLeaveActivity(t.id)}closeLeaveActivityModal(){this.showLeaveActivityModal=!1,this.selectedLeaveRequest=null,this.leaveActivityItems=[]}loadLeaveActivity(t){this.loadingLeaveActivity=!0,this.cdr.markForCheck(),this.leaveService.getRequestActivity(t).subscribe({next:e=>{this.leaveActivityItems=e.map(i=>({id:i.id,action:i.action,performedBy:i.performedBy,performedAt:i.performedAt,remarks:i.remarks,oldStatus:i.oldStatus,newStatus:i.newStatus})),this.loadingLeaveActivity=!1,this.cdr.markForCheck()},error:()=>{this.leaveActivityItems=this.generateLeaveActivityMock(),this.loadingLeaveActivity=!1,this.cdr.markForCheck()}})}generateLeaveActivityMock(){if(!this.selectedLeaveRequest)return[];let t=[];return t.push({action:"Request Submitted",performedBy:this.currentEmployee,performedAt:this.selectedLeaveRequest.createdAt||this.selectedLeaveRequest.startDate,remarks:this.selectedLeaveRequest.reason,newStatus:"PENDING_MANAGER"}),this.selectedLeaveRequest.managerApprovedAt&&t.push({action:this.selectedLeaveRequest.managerApprovalStatus==="APPROVED"?"Manager Approved":"Manager Rejected",performedBy:this.selectedLeaveRequest.managerApprovedBy,performedAt:this.selectedLeaveRequest.managerApprovedAt,remarks:this.selectedLeaveRequest.managerRemarks,oldStatus:"PENDING_MANAGER",newStatus:this.selectedLeaveRequest.managerApprovalStatus==="APPROVED"?"PENDING_HR":"REJECTED"}),this.selectedLeaveRequest.hrApprovedAt&&t.push({action:this.selectedLeaveRequest.hrApprovalStatus==="APPROVED"?"HR Approved":"HR Rejected",performedBy:this.selectedLeaveRequest.hrApprovedBy,performedAt:this.selectedLeaveRequest.hrApprovedAt,remarks:this.selectedLeaveRequest.hrRemarks,oldStatus:"PENDING_HR",newStatus:this.selectedLeaveRequest.hrApprovalStatus==="APPROVED"?"APPROVED":"REJECTED"}),t.reverse()}onAddLeaveNote(t){this.selectedLeaveRequest?.id&&this.leaveService.addActivityNote(this.selectedLeaveRequest.id,t).subscribe({next:()=>{this.toastService.success("Note added"),this.loadLeaveActivity(this.selectedLeaveRequest.id)},error:()=>{this.toastService.error("Failed to add note")}})}openExpenseActivityModal(t){this.selectedExpenseRequest=t,this.showExpenseActivityModal=!0,this.loadExpenseActivity(t.id)}closeExpenseActivityModal(){this.showExpenseActivityModal=!1,this.selectedExpenseRequest=null,this.expenseActivityItems=[]}loadExpenseActivity(t){this.loadingExpenseActivity=!0,this.cdr.markForCheck(),this.expenseService.getRequestActivity(t).subscribe({next:e=>{this.expenseActivityItems=e.map(i=>({id:i.id,action:i.action,performedBy:i.performedBy,performedAt:i.performedAt,remarks:i.remarks,oldStatus:i.oldStatus,newStatus:i.newStatus})),this.loadingExpenseActivity=!1,this.cdr.markForCheck()},error:()=>{this.expenseActivityItems=this.generateExpenseActivityMock(),this.loadingExpenseActivity=!1,this.cdr.markForCheck()}})}generateExpenseActivityMock(){return this.selectedExpenseRequest?[{action:"Expense Submitted",performedBy:this.currentEmployee,performedAt:this.selectedExpenseRequest.createdAt||this.selectedExpenseRequest.expenseDate,remarks:this.selectedExpenseRequest.description,newStatus:this.selectedExpenseRequest.status}]:[]}onAddExpenseNote(t){this.selectedExpenseRequest?.id&&this.expenseService.addActivityNote(this.selectedExpenseRequest.id,t).subscribe({next:()=>{this.toastService.success("Note added"),this.loadExpenseActivity(this.selectedExpenseRequest.id)},error:()=>{this.toastService.error("Failed to add note")}})}getLeaveStatusClass(t){switch(t){case"PENDING":case"PENDING_MANAGER":case"PENDING_HR":return"pending";case"APPROVED":return"approved";case"REJECTED":return"rejected";case"CANCELLED":return"cancelled";default:return""}}getApprovalStatusText(t){if(t.managerApprovalStatus==="APPROVED"&&!t.hrApprovalStatus)return"Awaiting HR";if(t.managerApprovalStatus){if(t.status==="APPROVED")return"Approved";if(t.status==="REJECTED")return"Rejected"}else return"Awaiting Manager";return t.status||""}static \u0275fac=function(e){return new(e||n)(V(vi),V(Ka),V(fc),V(v0),V(To),V(Ui),V(gc),V(ai),V(L2),V(x0),V(dt),V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-employee-self-service"]],decls:45,vars:35,consts:[[1,"ess-container"],[1,"page-header"],["class","employee-info",4,"ngIf"],[1,"tabs"],[1,"tab",3,"click"],[1,"fas","fa-file-invoice-dollar"],[1,"fas","fa-clock"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-money-check-alt"],[1,"fas","fa-receipt"],[1,"fas","fa-folder-open"],[1,"fas","fa-laptop"],[1,"fas","fa-book"],["class","tab-content",4,"ngIf"],[3,"closeModal","downloadPayslip","printPayslip","showModal","payslipData","companyName","companyAddress"],["class","modal-overlay",4,"ngIf"],[1,"employee-info"],[1,"employee-id-badge"],[1,"fas","fa-id-badge"],[1,"employee-name"],[1,"tab-content"],[1,"section-header"],[1,"paystubs-grid"],["class","paystub-card",3,"click",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"paystub-card",3,"click"],[1,"card-header"],[1,"period"],[1,"pay-date"],[1,"card-body"],[1,"amount-row"],[1,"label"],[1,"amount"],[1,"amount","deduction"],[1,"amount-row","net"],[1,"card-footer"],[1,"btn-link",3,"click"],[1,"fas","fa-download"],[1,"no-data"],[1,"fas","fa-file-invoice"],["class","leave-balance-grid",4,"ngIf"],["class","no-data small",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"leave-balance-grid"],["class","leave-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"leave-card",3,"ngClass"],[1,"leave-card-header"],[1,"leave-icon"],[1,"leave-type-name"],[1,"leave-card-body"],[1,"available-days"],[1,"days-number"],[1,"days-label"],[1,"balance-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"leave-stats"],[1,"stat"],[1,"stat-value"],[1,"stat-label"],[1,"stat","pending"],[1,"stat","total"],[1,"no-data","small"],[1,"status-badge",3,"ngClass"],["title","View Activity",1,"btn-icon",3,"click"],[1,"fas","fa-history"],["colspan","7",1,"no-data-row"],[1,"clock-section"],[1,"clock-display"],[1,"current-time"],[1,"time"],[1,"date"],["class","clock-status",4,"ngIf"],[1,"clock-actions"],[1,"btn","btn-lg","btn-success","clock-btn",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn","btn-lg","btn-danger","clock-btn",3,"click","disabled"],["class","today-status",4,"ngIf"],[1,"summary-cards"],[1,"summary-card","present"],[1,"card-icon"],[1,"fas","fa-check-circle"],[1,"card-info"],[1,"value"],[1,"summary-card","absent"],[1,"fas","fa-times-circle"],[1,"summary-card","late"],[1,"summary-card","hours"],[1,"fas","fa-business-time"],[1,"summary-card","overtime"],[1,"fas","fa-hourglass-half"],[1,"section-header",2,"margin-top","24px"],[1,"clock-status"],[1,"elapsed-label"],[1,"elapsed-time"],[1,"today-status"],[1,"status-label"],["class","clock-times",4,"ngIf"],[1,"clock-times"],["class","project-badge",4,"ngIf"],[1,"project-badge"],[1,"cards-grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"detail-row"],[1,"fas","fa-info-circle"],["class","expense-categories-section",4,"ngIf"],[1,"subsection-title",2,"margin-top","24px"],[1,"expense-categories-section"],[1,"subsection-title"],[1,"fas","fa-tags"],[1,"expense-categories-grid"],["class","expense-category-card",3,"inactive",4,"ngFor","ngForOf"],[1,"expense-category-card"],[1,"category-icon"],[1,"category-info"],[1,"category-name"],[1,"category-desc"],["class","category-limit",4,"ngIf"],[1,"category-status"],[1,"category-limit"],["class","attachment-cell",4,"ngIf"],["class","no-attachment",4,"ngIf"],[1,"attachment-cell"],["class","receipt-thumbnail","alt","Receipt","title","Click to preview",3,"src","click",4,"ngIf"],["target","_blank","class","pdf-link","title","Click to open PDF",3,"href",4,"ngIf"],["alt","Receipt","title","Click to preview",1,"receipt-thumbnail",3,"click","src"],["target","_blank","title","Click to open PDF",1,"pdf-link",3,"href"],[1,"fas","fa-file-pdf"],[1,"no-attachment"],["colspan","8",1,"no-data-row"],[1,"summary-cards",2,"margin-bottom","24px"],[1,"summary-card"],[1,"card-icon",2,"background","#008080"],[1,"fas","fa-file-alt"],[1,"card-icon",2,"background","#28a745"],[1,"card-icon",2,"background","#ffc107"],[1,"card-icon",2,"background","#17a2b8"],[1,"fas","fa-percentage"],[1,"info-card",2,"margin-bottom","20px"],[1,"document-checklist"],["class","category-section",3,"ngClass",4,"ngFor","ngForOf"],[1,"category-section",3,"ngClass"],[1,"category-header"],[1,"category-title"],[1,"category-icon",3,"ngSwitch"],["class","fas fa-id-card",4,"ngSwitchCase"],["class","fas fa-file-invoice-dollar",4,"ngSwitchCase"],["class","fas fa-file-contract",4,"ngSwitchCase"],["class","fas fa-flag-usa",4,"ngSwitchCase"],["class","fas fa-certificate",4,"ngSwitchCase"],["class","fas fa-folder",4,"ngSwitchCase"],["class","fas fa-file",4,"ngSwitchDefault"],[1,"category-progress"],[1,"progress-bar-small"],[1,"category-documents"],["class","document-item",3,"uploaded","pending",4,"ngFor","ngForOf"],[1,"fas","fa-id-card"],[1,"fas","fa-file-contract"],[1,"fas","fa-flag-usa"],[1,"fas","fa-certificate"],[1,"fas","fa-folder"],[1,"fas","fa-file"],[1,"document-item"],[1,"document-checkbox"],["class","fas fa-check-circle text-success",4,"ngIf"],["class","far fa-circle text-muted",4,"ngIf"],[1,"document-info"],[1,"document-name"],["class","mandatory-mark",4,"ngIf"],["class","document-description",4,"ngIf"],["class","document-meta",4,"ngIf"],[1,"document-action"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","status-badge pending",4,"ngIf"],[1,"fas","fa-check-circle","text-success"],[1,"far","fa-circle","text-muted"],[1,"mandatory-mark"],[1,"document-description"],[1,"document-meta"],[1,"verification-status",3,"ngClass"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"status-badge","pending"],["class","card asset-card",4,"ngFor","ngForOf"],[1,"card","asset-card"],[1,"asset-type"],[1,"asset-name"],["class","detail-row",4,"ngIf"],[1,"policies-grid"],["class","policy-card",4,"ngFor","ngForOf"],[1,"policy-card"],[1,"policy-icon"],[1,"policy-info"],[1,"description"],[1,"policy-meta"],[1,"category-badge",3,"ngClass"],[1,"updated"],[1,"btn","btn-outline-primary","btn-sm"],[1,"fas","fa-eye"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],["type","date","required","",3,"ngModelChange","ngModel"],["rows","3",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],["type","number","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter payee/vendor name",3,"ngModelChange","ngModel"],["type","text","placeholder","Optional",3,"ngModelChange","ngModel"],[1,"file-upload-container"],["type","file","id","receiptFile","accept","image/*,.pdf",2,"display","none",3,"change"],["for","receiptFile","class","file-upload-btn",4,"ngIf"],["class","file-selected",4,"ngIf"],["class","receipt-preview",4,"ngIf"],[1,"help-text"],["rows","3","placeholder","Describe the expense...",3,"ngModelChange","ngModel"],["for","receiptFile",1,"file-upload-btn"],[1,"fas","fa-cloud-upload-alt"],[1,"file-selected"],[1,"file-name"],["type","button",1,"remove-file-btn",3,"click"],[1,"fas","fa-times"],[1,"receipt-preview"],["alt","Receipt preview",3,"src",4,"ngIf"],["class","pdf-preview",4,"ngIf"],["alt","Receipt preview",3,"src"],[1,"pdf-preview"],[1,"modal","receipt-preview-modal",3,"click"],["alt","Receipt",1,"full-receipt-image",3,"src"],["type","number","min","0","step","100","required","",3,"ngModelChange","ngModel"],["class","emi-preview",4,"ngIf"],["rows","3","placeholder","Explain why you need this loan...",3,"ngModelChange","ngModel"],[1,"emi-preview"],[1,"modal","activity-modal",3,"click"],["class","modal-body",4,"ngIf"],[1,"request-info-bar"],[1,"separator"],["title","Activity Stream",3,"addNote","activities","loading","showAddNote"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Employee Self-Service Portal"),a(),b(4,ZSe,6,3,"div",2),a(),o(5,"div",3)(6,"button",4),x("click",function(){return i.activeTab="paystubs"}),y(7,"i",5),l(8," Pay Stubs "),a(),o(9,"button",4),x("click",function(){return i.activeTab="attendance"}),y(10,"i",6),l(11," Attendance "),a(),o(12,"button",4),x("click",function(){return i.activeTab="leave"}),y(13,"i",7),l(14," Leave "),a(),o(15,"button",4),x("click",function(){return i.activeTab="loans"}),y(16,"i",8),l(17," Loans "),a(),o(18,"button",4),x("click",function(){return i.activeTab="expenses"}),y(19,"i",9),l(20," Expenses "),a(),o(21,"button",4),x("click",function(){return i.activeTab="documents"}),y(22,"i",10),l(23," Documents "),a(),o(24,"button",4),x("click",function(){return i.activeTab="assets"}),y(25,"i",11),l(26," Assets "),a(),o(27,"button",4),x("click",function(){return i.activeTab="policies"}),y(28,"i",12),l(29," Policies "),a()(),b(30,nPe,7,2,"div",13)(31,lPe,33,4,"div",13)(32,_Pe,90,30,"div",13)(33,yPe,10,2,"div",13)(34,kPe,34,3,"div",13)(35,KPe,45,9,"div",13)(36,rwe,7,2,"div",13)(37,swe,11,2,"div",13),a(),o(38,"app-payslip",14),x("closeModal",function(){return i.closePaystubModal()})("downloadPayslip",function(){return i.downloadPaystub(i.selectedPaystub)})("printPayslip",function(){return i.printPaystub(i.selectedPaystub)}),a(),b(39,pwe,32,9,"div",15)(40,Cwe,57,17,"div",15)(41,bwe,9,1,"div",15)(42,Ewe,43,15,"div",15)(43,Twe,8,1,"div",15)(44,Iwe,8,1,"div",15)),e&2&&(c(4),m("ngIf",i.currentEmployee),c(2),ie("active",i.activeTab==="paystubs"),c(3),ie("active",i.activeTab==="attendance"),c(3),ie("active",i.activeTab==="leave"),c(3),ie("active",i.activeTab==="loans"),c(3),ie("active",i.activeTab==="expenses"),c(3),ie("active",i.activeTab==="documents"),c(3),ie("active",i.activeTab==="assets"),c(3),ie("active",i.activeTab==="policies"),c(3),m("ngIf",i.activeTab==="paystubs"),c(),m("ngIf",i.activeTab==="leave"),c(),m("ngIf",i.activeTab==="attendance"),c(),m("ngIf",i.activeTab==="loans"),c(),m("ngIf",i.activeTab==="expenses"),c(),m("ngIf",i.activeTab==="documents"),c(),m("ngIf",i.activeTab==="assets"),c(),m("ngIf",i.activeTab==="policies"),c(),m("showModal",i.showPaystubModal)("payslipData",i.payslipData)("companyName",i.companyName)("companyAddress",i.companyAddress),c(),m("ngIf",i.showLeaveRequestModal),c(),m("ngIf",i.showExpenseRequestModal),c(),m("ngIf",i.showReceiptPreviewModal),c(),m("ngIf",i.showLoanRequestModal),c(),m("ngIf",i.showLeaveActivityModal),c(),m("ngIf",i.showExpenseActivityModal))},dependencies:[At,ot,Se,be,Lf,cE,dE,Vt,je,We,Ie,Mt,Ue,Oe,cn,Xt,Ee,F2,Rt,Ku,yn,ir],styles:[".ess-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0}.page-header[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-id-badge[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:teal;background:#e0f2f2;padding:6px 12px;border-radius:6px;font-size:.9rem;display:flex;align-items:center;gap:6px}.page-header[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-id-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.page-header[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.project-badge[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:500;color:#6b21a8;background:#f3e8ff;padding:4px 8px;border-radius:4px;font-size:.8rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:24px;border-bottom:2px solid #eee}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:12px 24px;background:none;border:none;cursor:pointer;font-size:14px;color:#666;display:flex;align-items:center;gap:8px;border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .3s}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:teal}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:600}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn.btn-outline-primary[_ngcontent-%COMP%]{background:transparent;color:teal;border:2px solid #008080}.btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.paystubs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:32px}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:all .3s}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:teal;color:#fff;padding:16px;border-radius:8px 8px 0 0}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{display:block;font-weight:600}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .pay-date[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:monospace;font-weight:500}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount.deduction[_ngcontent-%COMP%]{color:#dc3545}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row.net[_ngcontent-%COMP%]{border-bottom:none;padding-top:12px}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row.net[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#333}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .amount-row.net[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#28a745}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #eee}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:teal;cursor:pointer;font-size:13px}.paystubs-grid[_ngcontent-%COMP%]   .paystub-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.leave-balance-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:32px}.leave-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000014;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease}.leave-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001f}.leave-card[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;background:linear-gradient(135deg,teal,#066);color:#fff}.leave-card[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]   .leave-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:#fff3;display:flex;align-items:center;justify-content:center;font-size:18px}.leave-card[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]   .leave-type-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]{padding:20px}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .available-days[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .available-days[_ngcontent-%COMP%]   .days-number[_ngcontent-%COMP%]{display:block;font-size:48px;font-weight:700;color:teal;line-height:1}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .available-days[_ngcontent-%COMP%]   .days-label[_ngcontent-%COMP%]{font-size:14px;color:#666;text-transform:uppercase;letter-spacing:.5px}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .balance-progress[_ngcontent-%COMP%]{margin-bottom:16px}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .balance-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;margin-bottom:6px}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .balance-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,teal,#00a0a0);border-radius:4px;transition:width .3s ease}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .balance-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:12px;color:#888;text-align:center}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding-top:16px;border-top:1px solid #eee}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{text-align:center}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:20px;font-weight:600;color:#333}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:11px;color:#888;text-transform:uppercase}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]   .stat.pending[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f0ad4e}.leave-card[_ngcontent-%COMP%]   .leave-card-body[_ngcontent-%COMP%]   .leave-stats[_ngcontent-%COMP%]   .stat.total[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:teal}.leave-card.leave-annual[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60)}.leave-card.leave-sick[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.leave-card.leave-casual[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.leave-card.leave-maternity[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e91e63,#c2185b)}.leave-card.leave-paternity[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9c27b0,#7b1fa2)}.leave-card.leave-unpaid[_ngcontent-%COMP%]   .leave-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d)}.balance-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:32px}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-type[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:8px}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{margin-bottom:12px}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:teal}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:14px;color:#999}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-bar[_ngcontent-%COMP%]{height:6px;background:#e9ecef;border-radius:3px;overflow:hidden}.balance-cards[_ngcontent-%COMP%]   .balance-card[_ngcontent-%COMP%]   .balance-bar[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;background:teal;border-radius:3px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.data-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:4px;font-size:11px}.data-table[_ngcontent-%COMP%]   .status-badge.approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.data-table[_ngcontent-%COMP%]   .status-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.data-table[_ngcontent-%COMP%]   .status-badge.cancelled[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.data-table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#999}.no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.no-data.small[_ngcontent-%COMP%]{padding:20px}.info-card[_ngcontent-%COMP%]{display:flex;gap:16px;background:#e3f2fd;padding:16px 20px;border-radius:8px;align-items:center}.info-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#1565c0}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal.paystub-modal[_ngcontent-%COMP%]{width:550px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee;background:teal;color:#fff;border-radius:8px 8px 0 0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff;position:relative;z-index:10;padding:4px 8px;line-height:1}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:.8}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid #eee}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:teal;font-size:14px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row.total[_ngcontent-%COMP%]{font-weight:600;border-top:1px solid #eee;margin-top:8px;padding-top:12px}.modal-body[_ngcontent-%COMP%]   .paystub-section[_ngcontent-%COMP%]   .detail-row.net-pay[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#28a745}.modal-body[_ngcontent-%COMP%]   .paystub-section.net-section[_ngcontent-%COMP%]{background:#f8f9fa;margin:0 -20px;padding:20px;border-bottom:none}.modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .asset-type[_ngcontent-%COMP%]{font-weight:600;color:teal}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .asset-name[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-size:16px}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #f0f0f0;font-size:14px}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#666}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:500}.cards-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:monospace}.cards-grid.asset-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:teal;color:#fff}.cards-grid.asset-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .asset-type[_ngcontent-%COMP%]{color:#fff}.status-badge.returned[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d}.status-badge.disbursed[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.draft[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-center[_ngcontent-%COMP%]{text-align:center!important}.balance-bar.inline[_ngcontent-%COMP%]{height:8px;width:100%;min-width:80px;background:#e9ecef;border-radius:4px;overflow:hidden}.balance-bar.inline[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;background:teal;border-radius:4px}tr.expiring[_ngcontent-%COMP%]{background:#ffc1071a}tr.expired[_ngcontent-%COMP%]{background:#dc35451a}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;display:flex;align-items:center;gap:12px;box-shadow:0 2px 8px #0000001a}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333}.summary-cards[_ngcontent-%COMP%]   .summary-card.present[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#28a74526;color:#28a745}.summary-cards[_ngcontent-%COMP%]   .summary-card.absent[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#dc354526;color:#dc3545}.summary-cards[_ngcontent-%COMP%]   .summary-card.late[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#ffc10726;color:#ffc107}.summary-cards[_ngcontent-%COMP%]   .summary-card.hours[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#00808026;color:teal}.summary-cards[_ngcontent-%COMP%]   .summary-card.overtime[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#6c757d26;color:#6c757d}.policies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:16px}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;display:flex;align-items:flex-start;gap:16px;box-shadow:0 2px 8px #0000001a;transition:all .3s}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;background:#0080801a;display:flex;align-items:center;justify-content:center;font-size:20px;color:teal;flex-shrink:0}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]{flex:1}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:16px}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:13px;line-height:1.5}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:12px}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-weight:500}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]   .category-badge.hr[_ngcontent-%COMP%]{background:#0080801a;color:teal}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]   .category-badge.finance[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]   .category-badge.it[_ngcontent-%COMP%]{background:#6c757d1a;color:#6c757d}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .policy-info[_ngcontent-%COMP%]   .policy-meta[_ngcontent-%COMP%]   .updated[_ngcontent-%COMP%]{color:#999}.policies-grid[_ngcontent-%COMP%]   .policy-card[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;flex-shrink:0}.emi-preview[_ngcontent-%COMP%]{background:#e8f5f5;border:1px solid #b2d8d8;border-radius:8px;padding:16px;display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.emi-preview[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:teal;font-weight:500}.emi-preview[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:teal;font-family:monospace}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media(max-width:480px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.file-upload-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.file-upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:linear-gradient(135deg,teal,#066);color:#fff;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s}.file-upload-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#066,#055);transform:translateY(-1px)}.file-upload-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.file-selected[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 12px;background:#e8f5f5;border:1px solid #b2d8d8;border-radius:6px}.file-selected[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:teal;font-size:13px;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-selected[_ngcontent-%COMP%]   .remove-file-btn[_ngcontent-%COMP%]{padding:4px 8px;background:#ff6b6b;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:background .2s}.file-selected[_ngcontent-%COMP%]   .remove-file-btn[_ngcontent-%COMP%]:hover{background:#ee5a5a}.receipt-preview[_ngcontent-%COMP%]{margin-top:12px;padding:12px;background:#f8f9fa;border:1px solid #e0e0e0;border-radius:8px;text-align:center}.receipt-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border-radius:4px;box-shadow:0 2px 8px #00000026}.help-text[_ngcontent-%COMP%]{display:block;margin-top:6px;color:#999;font-size:11px}.attachment-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.receipt-thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:4px;cursor:pointer;transition:transform .2s,box-shadow .2s;border:1px solid #ddd}.receipt-thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 2px 8px #0003}.attachment-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#f8f9fa;border-radius:4px;color:#dc3545;font-size:18px}.no-attachment[_ngcontent-%COMP%]{color:#999}.receipt-preview-modal[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh}.receipt-preview-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px;display:flex;align-items:center;justify-content:center}.receipt-preview-modal[_ngcontent-%COMP%]   .full-receipt-image[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;border-radius:8px;box-shadow:0 4px 20px #0000004d}.pdf-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:linear-gradient(135deg,#dc3545,#c82333);border-radius:6px;color:#fff;font-size:18px;text-decoration:none;transition:transform .2s,box-shadow .2s}.pdf-link[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 2px 8px #dc354566}.pdf-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px;background:linear-gradient(135deg,#fee2e2,#fecaca);border-radius:8px;color:#dc3545}.pdf-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px}.pdf-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.document-checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.category-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.category-section.category-blue[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #3b82f6}.category-section.category-yellow[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #f59e0b}.category-section.category-green[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #10b981}.category-section.category-orange[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #f97316}.category-section.category-red[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #ef4444}.category-section.category-purple[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #8b5cf6}.category-section.category-default[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{border-left:5px solid #6b7280}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#f8fafc}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;background:#e2e8f0;color:#475569}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#1e293b}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#64748b}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-progress[_ngcontent-%COMP%]   .progress-bar-small[_ngcontent-%COMP%]{width:100px;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.category-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-progress[_ngcontent-%COMP%]   .progress-bar-small[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#10b981,#059669);border-radius:4px;transition:width .3s ease}.category-section[_ngcontent-%COMP%]   .category-documents[_ngcontent-%COMP%]{padding:12px}.document-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:14px 16px;border-radius:8px;transition:all .2s ease}.document-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.document-item.uploaded[_ngcontent-%COMP%]   .document-checkbox[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981}.document-item.pending[_ngcontent-%COMP%]   .document-checkbox[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#cbd5e1}.document-item[_ngcontent-%COMP%]   .document-checkbox[_ngcontent-%COMP%]{flex-shrink:0;font-size:20px;padding-top:2px}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#1e293b}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-name[_ngcontent-%COMP%]   .mandatory-mark[_ngcontent-%COMP%]{color:#ef4444;font-weight:700;margin-left:2px}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-description[_ngcontent-%COMP%]{font-size:12px;color:#64748b}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:#94a3b8}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .verification-status[_ngcontent-%COMP%]{padding:2px 8px;border-radius:12px;font-weight:500;font-size:10px;text-transform:uppercase}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .verification-status.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .verification-status.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.document-item[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .verification-status.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.document-item[_ngcontent-%COMP%]   .document-action[_ngcontent-%COMP%]{flex-shrink:0}.document-item[_ngcontent-%COMP%]   .document-action[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:6px 14px;font-size:12px}.document-item[_ngcontent-%COMP%]   .document-action[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;background:#fef3c7;color:#d97706;border-radius:16px;font-size:12px;font-weight:500}.text-success[_ngcontent-%COMP%]{color:#10b981!important}.text-muted[_ngcontent-%COMP%]{color:#94a3b8!important}.text-warning[_ngcontent-%COMP%]{color:#f59e0b!important}.text-danger[_ngcontent-%COMP%]{color:#ef4444!important}.subsection-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#333;font-size:16px;font-weight:600;margin:0 0 16px}.subsection-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.expense-categories-section[_ngcontent-%COMP%]{margin-bottom:24px}.expense-categories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.expense-category-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;transition:all .2s}.expense-category-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;border-color:teal}.expense-category-card.inactive[_ngcontent-%COMP%]{opacity:.6;background:#f9fafb}.expense-category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.expense-category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:20px}.expense-category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px;min-width:0}.expense-category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.expense-category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-desc[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.expense-category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-limit[_ngcontent-%COMP%]{font-size:11px;color:teal;font-weight:500}.expense-category-card[_ngcontent-%COMP%]   .category-status[_ngcontent-%COMP%]{flex-shrink:0;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}.expense-category-card[_ngcontent-%COMP%]   .category-status.active[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.expense-category-card[_ngcontent-%COMP%]   .category-status.inactive[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.activity-modal[_ngcontent-%COMP%]{max-width:700px;max-height:80vh}.activity-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:calc(80vh - 120px);overflow-y:auto}.request-info-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f8fafc;border-radius:8px;margin-bottom:20px;flex-wrap:wrap}.request-info-bar[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#d1d5db}.request-info-bar[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{margin-left:auto}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px;color:#6b7280;transition:color .2s}.btn-icon[_ngcontent-%COMP%]:hover{color:teal}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.clock-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);border-radius:12px;padding:24px;margin-bottom:24px;color:#fff;text-align:center}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]{margin-bottom:20px}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px;opacity:.9}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:48px;font-weight:700;font-family:Poppins,monospace;letter-spacing:2px}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]{margin-top:12px;padding:8px 16px;background:#ffffff26;border-radius:8px;display:inline-flex;align-items:center;gap:8px}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .elapsed-label[_ngcontent-%COMP%]{font-size:13px;opacity:.9}.clock-section[_ngcontent-%COMP%]   .clock-display[_ngcontent-%COMP%]   .clock-status[_ngcontent-%COMP%]   .elapsed-time[_ngcontent-%COMP%]{font-size:20px;font-weight:600;font-family:Poppins,monospace}.clock-section[_ngcontent-%COMP%]   .clock-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-bottom:16px}.clock-section[_ngcontent-%COMP%]   .clock-actions[_ngcontent-%COMP%]   .clock-btn[_ngcontent-%COMP%]{min-width:160px;padding:14px 28px;font-size:16px;font-weight:600;border-radius:8px;box-shadow:0 4px 6px #0000001a;transition:all .3s ease}.clock-section[_ngcontent-%COMP%]   .clock-actions[_ngcontent-%COMP%]   .clock-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.clock-section[_ngcontent-%COMP%]   .clock-actions[_ngcontent-%COMP%]   .clock-btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.clock-section[_ngcontent-%COMP%]   .today-status[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;font-size:14px;flex-wrap:wrap}.clock-section[_ngcontent-%COMP%]   .today-status[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{opacity:.9}.clock-section[_ngcontent-%COMP%]   .today-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-weight:500;background:#fff3}.clock-section[_ngcontent-%COMP%]   .today-status[_ngcontent-%COMP%]   .clock-times[_ngcontent-%COMP%]{opacity:.9}.btn-lg[_ngcontent-%COMP%]{padding:12px 24px;font-size:15px}.btn-lg.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none}.btn-lg.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-lg.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none}.btn-lg.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}"],changeDetection:0})};var Dwe=n=>["/app/hr/employees",n];function Awe(n,t){if(n&1&&(o(0,"div",31)(1,"div",32)(2,"span",33),l(3,"Pay Period Type"),a(),o(4,"span",34),l(5),a()(),o(6,"div",32)(7,"span",33),l(8,"Pay Period"),a(),o(9,"span",34),l(10),a()(),o(11,"div",32)(12,"span",33),l(13,"Pay Date"),a(),o(14,"span",34),l(15),a()(),o(16,"div",32)(17,"span",33),l(18,"Gross"),a(),o(19,"span",35),l(20),a()(),o(21,"div",32)(22,"span",33),l(23,"Net Pay"),a(),o(24,"span",35),l(25),a()(),o(26,"div",32)(27,"span",33),l(28,"Status"),a(),o(29,"span",36),l(30),a()()()),n&2){let e=t.$implicit,i=p(2);c(5),_(e.periodType),c(5),_(e.periodRange),c(5),_(e.payDate),c(5),_(i.formatCurrency(e.gross)),c(5),_(i.formatCurrency(e.netPay)),c(5),_(e.status)}}function Rwe(n,t){n&1&&(o(0,"div",37),y(1,"i",38),o(2,"p"),l(3,"No payroll runs found"),a()())}function Fwe(n,t){if(n&1&&(o(0,"div",12)(1,"h3",13),l(2,"Payroll Runs Summary"),a(),o(3,"div",14)(4,"div",15)(5,"span",16),l(6),a(),o(7,"span",17),l(8,"Weekly"),a()(),o(9,"div",18)(10,"span",16),l(11),a(),o(12,"span",17),l(13,"Bi-Weekly"),a()(),o(14,"div",19)(15,"span",16),l(16),a(),o(17,"span",17),l(18,"Semi-Monthly"),a()(),o(19,"div",20)(20,"span",16),l(21),a(),o(22,"span",17),l(23,"Monthly"),a()()(),o(24,"div",21)(25,"div",22)(26,"span",23),l(27,"Total Runs"),a(),o(28,"span",24),l(29),a()(),o(30,"div",22)(31,"span",23),l(32,"Total Employees"),a(),o(33,"span",24),l(34),a()(),o(35,"div",22)(36,"span",23),l(37,"Total Gross"),a(),o(38,"span",25),l(39),a()(),o(40,"div",22)(41,"span",23),l(42,"Total Taxes"),a(),o(43,"span",26),l(44),a()(),o(45,"div",22)(46,"span",23),l(47,"Total Net Pay"),a(),o(48,"span",27),l(49),a()()(),o(50,"div",28),b(51,Awe,31,6,"div",29)(52,Rwe,4,0,"div",30),a()()),n&2){let e=p();c(6),_(e.weeklyRunsCount),c(5),_(e.biWeeklyRunsCount),c(5),_(e.semiMonthlyRunsCount),c(5),_(e.monthlyRunsCount),c(8),_(e.completedRuns),c(5),_(e.totalEmployeesCount),c(5),_(e.formatCurrency(e.totalGross)),c(5),_(e.formatCurrency(e.totalTaxes)),c(5),_(e.formatCurrency(e.totalNet)),c(2),m("ngForOf",e.payrollRunsList),c(),m("ngIf",e.payrollRunsList.length===0)}}function Nwe(n,t){if(n&1&&(o(0,"option",78),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function Lwe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",79)(4,"a",80),l(5),a()(),o(6,"td",81),l(7),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a(),o(16,"td"),l(17),a(),o(18,"td"),l(19),a(),o(20,"td",82),l(21),a(),o(22,"td",83),l(23),a(),o(24,"td",84),l(25),a(),o(26,"td",84),l(27),a(),o(28,"td",84),l(29),a(),o(30,"td",84),l(31),a(),o(32,"td",85),l(33),a(),o(34,"td",86),l(35),a(),o(36,"td",87),l(37),a(),o(38,"td"),l(39),a(),o(40,"td")(41,"span",88),l(42),a()()()),n&2){let e=t.$implicit,i=t.index,r=p(2);c(2),_(i+1),c(2),m("routerLink",zc(22,Dwe,r.getEmployeeIdByCode(e.empId))),c(),_(e.empId),c(2),_(e.name),c(2),_(e.employeeType),c(2),_(e.project||"-"),c(2),_(e.subcontractor||"-"),c(2),_(e.payRatePeriod),c(2),_(r.formatDate(e.periodFrom)),c(2),_(r.formatDate(e.periodTo)),c(2),D("",e.hours,"h"),c(2),_(r.formatCurrency(e.gross)),c(2),_(r.formatCurrency(e.fedTax)),c(2),_(r.formatCurrency(e.stateTax)),c(2),_(r.formatCurrency(e.socSecTax)),c(2),_(r.formatCurrency(e.medicareTax)),c(2),_(r.formatCurrency(e.expenses||0)),c(2),_(r.formatCurrency(e.totalTax)),c(2),_(r.formatCurrency(e.netPay)),c(2),_(r.formatDate(e.paymentDate)),c(2),m("ngClass",r.getStatusClass(e.payStatus)),c(),_(e.payStatus)}}function Vwe(n,t){n&1&&(o(0,"tr")(1,"td",89),y(2,"i",38),l(3," No payroll records found "),a()())}function Bwe(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",90)(2,"td",91)(3,"strong"),l(4,"TOTAL"),a()(),o(5,"td",82)(6,"strong"),l(7),a()(),o(8,"td",83)(9,"strong"),l(10),a()(),o(11,"td",84)(12,"strong"),l(13),a()(),o(14,"td",84)(15,"strong"),l(16),a()(),o(17,"td",84)(18,"strong"),l(19),a()(),o(20,"td",84)(21,"strong"),l(22),a()(),o(23,"td",85)(24,"strong"),l(25),a()(),o(26,"td",86)(27,"strong"),l(28),a()(),o(29,"td",87)(30,"strong"),l(31),a()(),y(32,"td",92),a()()),n&2){let e=p(2);c(7),D("",e.totalHoursFiltered.toFixed(2),"h"),c(3),_(e.formatCurrency(e.totalGrossFiltered)),c(3),_(e.formatCurrency(e.totalFedTax)),c(3),_(e.formatCurrency(e.totalStateTax)),c(3),_(e.formatCurrency(e.totalSocSecTax)),c(3),_(e.formatCurrency(e.totalMedicareTax)),c(3),_(e.formatCurrency(e.totalExpenses)),c(3),_(e.formatCurrency(e.totalTaxFiltered)),c(3),_(e.formatCurrency(e.totalNetFiltered))}}function Uwe(n,t){if(n&1){let e=F();o(0,"div",39)(1,"div",40)(2,"h4"),y(3,"i",41),l(4," Filter Payroll History"),a(),o(5,"div",42)(6,"div",43)(7,"label"),l(8,"Status"),a(),o(9,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedStatus,r)||(s.selectedStatus=r),f(r)}),o(10,"option",45),l(11,"All Statuses"),a(),o(12,"option",46),l(13,"Processed/Paid"),a(),o(14,"option",47),l(15,"On Hold"),a(),o(16,"option",48),l(17,"Pending"),a()()(),o(18,"div",43)(19,"label"),l(20,"Project"),a(),o(21,"select",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedProject,r)||(s.selectedProject=r),f(r)}),o(22,"option",49),l(23,"All Projects"),a(),b(24,Nwe,2,2,"option",50),a()(),o(25,"div",43)(26,"label"),l(27,"From Date"),a(),o(28,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.dateFrom,r)||(s.dateFrom=r),f(r)}),a()(),o(29,"div",43)(30,"label"),l(31,"To Date"),a(),o(32,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.dateTo,r)||(s.dateTo=r),f(r)}),a()(),o(33,"div",52)(34,"button",53),x("click",function(){g(e);let r=p();return f(r.clearFilters())}),l(35,"Clear"),a()()()(),o(36,"div",54)(37,"div",55),y(38,"i",56),o(39,"span",57),l(40,"Total Records"),a(),o(41,"span",58),l(42),a()(),o(43,"div",59),x("click",function(){g(e);let r=p();return f(r.selectedStatus="PROCESSED")}),y(44,"i",60),o(45,"span",57),l(46),a(),o(47,"span",58),l(48),a()(),o(49,"div",61),x("click",function(){g(e);let r=p();return f(r.selectedStatus="PENDING")}),y(50,"i",62),o(51,"span",57),l(52),a(),o(53,"span",58),l(54),a()(),o(55,"div",63),x("click",function(){g(e);let r=p();return f(r.selectedStatus="ON_HOLD")}),y(56,"i",64),o(57,"span",57),l(58),a(),o(59,"span",58),l(60),a()()(),o(61,"div",65)(62,"div",66)(63,"div",67)(64,"h4"),l(65,"All Payroll Records"),a(),o(66,"span",68),l(67),a()(),o(68,"div",69)(69,"button",70),x("click",function(){g(e);let r=p();return f(r.exportToCSV())}),y(70,"i",71),l(71," Export Excel "),a(),o(72,"button",72),x("click",function(){g(e);let r=p();return f(r.exportToPDF())}),y(73,"i",73),l(74," Export PDF "),a()()(),o(75,"div",74)(76,"table",75)(77,"thead")(78,"tr")(79,"th"),l(80,"S.NO"),a(),o(81,"th"),l(82,"EMP ID"),a(),o(83,"th"),l(84,"NAME"),a(),o(85,"th"),l(86,"TYPE"),a(),o(87,"th"),l(88,"PROJECT"),a(),o(89,"th"),l(90,"SUBCONTRACTOR"),a(),o(91,"th"),l(92,"PAY PERIOD"),a(),o(93,"th"),l(94,"PERIOD FROM"),a(),o(95,"th"),l(96,"PERIOD TO"),a(),o(97,"th"),l(98,"HOURS"),a(),o(99,"th"),l(100,"GROSS"),a(),o(101,"th"),l(102,"FEDERAL"),a(),o(103,"th"),l(104,"STATE"),a(),o(105,"th"),l(106,"SOC.SEC"),a(),o(107,"th"),l(108,"MEDICARE"),a(),o(109,"th"),l(110,"EXPENSES"),a(),o(111,"th"),l(112,"TOTAL TAX"),a(),o(113,"th"),l(114,"NET PAY"),a(),o(115,"th"),l(116,"PAYMENT DATE"),a(),o(117,"th"),l(118,"STATUS"),a()()(),o(119,"tbody"),b(120,Lwe,43,24,"tr",76)(121,Vwe,4,0,"tr",77),a(),b(122,Bwe,33,9,"tfoot",77),a()()()()}if(n&2){let e=p();c(9),M("ngModel",e.selectedStatus),c(12),M("ngModel",e.selectedProject),c(3),m("ngForOf",e.projects),c(4),M("ngModel",e.dateFrom),c(4),M("ngModel",e.dateTo),c(10),_(e.filteredRecords.length),c(),ie("active",e.selectedStatus==="PROCESSED"),c(3),D("Processed (",e.processedRecords.length,")"),c(2),_(e.formatCurrency(e.getProcessedTotal())),c(),ie("active",e.selectedStatus==="PENDING"),c(3),D("Pending (",e.pendingRecords.length,")"),c(2),_(e.formatCurrency(e.getPendingTotal())),c(),ie("active",e.selectedStatus==="ON_HOLD"),c(3),D("On Hold (",e.onHoldRecords.length,")"),c(2),_(e.formatCurrency(e.getOnHoldTotal())),c(7),En("",e.filteredRecords.length," Payroll Records - ",e.totalHoursFiltered.toFixed(2)," Total Hours - ",e.formatCurrency(e.totalNetFiltered)," Total Paid"),c(53),m("ngForOf",e.filteredRecords),c(),m("ngIf",e.filteredRecords.length===0),c(),m("ngIf",e.filteredRecords.length>0)}}var B2=class n{constructor(t,e,i){this.payrollService=t;this.employeeService=e;this.cdr=i}loading=!1;payrollRuns=[];payrollRecords=[];historyRecords=[];employees=[];completedRuns=0;totalGross=0;totalNet=0;totalTaxes=0;totalEmployeesCount=0;pendingAmount=0;onHoldAmount=0;weeklyRunsCount=0;biWeeklyRunsCount=0;semiMonthlyRunsCount=0;monthlyRunsCount=0;payrollRunsList=[];projects=[];selectedProject="";selectedStatus="ALL";searchTerm="";dateFrom="";dateTo="";sortField="payDate";sortDirection="desc";activeView="runs";ngOnInit(){this.loadData()}processedFromService=[];loadProcessedPayrollFromService(){let t=this.payrollService.getReleasedPayrollRecords();this.processedFromService=t.map(e=>({empId:e.empId,name:e.name,employeeType:"Hourly",project:e.project,subcontractor:"-",payRatePeriod:"Weekly",periodFrom:e.periodStart,periodTo:e.periodEnd,hours:e.hours,regular:e.gross,bonus:0,allowances:0,deductions:0,gross:e.gross,ytdGross:e.gross*12,fedTax:e.federal,stateTax:e.state,socSecTax:e.socSec,medicareTax:e.medicare,expenses:0,totalTax:e.federal+e.state+e.socSec+e.medicare,netPay:e.netPay,payDate:e.processedDate,paymentDate:e.processedDate,payStatus:"Released"}))}mergeRecordsFromAllSources(){this.loadProcessedPayrollFromService(),this.processedFromService.length>0&&(this.historyRecords=[...this.processedFromService,...this.historyRecords]),this.extractProjects(),this.calculateSummary(),this.cdr.markForCheck()}loadData(){this.loading=!0,this.cdr.markForCheck(),this.employeeService.getAll().subscribe({next:t=>{this.employees=t,this.loadPayrollRuns()},error:t=>{console.error("Error loading employees:",t),this.loading=!1,this.finalizeWithProcessedRecords(),this.cdr.markForCheck()}})}loadPayrollRuns(){this.payrollService.getPayrollRuns().subscribe({next:t=>{this.payrollRuns=t.filter(e=>{let i=e.status?.toUpperCase();return i==="PROCESSED"||i==="COMPLETED"||i==="FULLY_PROCESSED"||i==="PARTIALLY_PROCESSED"||i==="CALCULATED"||i==="APPROVED"}),this.completedRuns=this.payrollRuns.filter(e=>{let i=e.status?.toUpperCase();return i==="PROCESSED"||i==="FULLY_PROCESSED"||i==="COMPLETED"}).length,this.countRunsByPeriod(),this.loadPayrollRecords()},error:t=>{console.error("Error loading payroll runs:",t),this.loading=!1,this.finalizeWithProcessedRecords(),this.cdr.markForCheck()}})}countRunsByPeriod(){this.weeklyRunsCount=0,this.biWeeklyRunsCount=0,this.semiMonthlyRunsCount=0,this.monthlyRunsCount=0,this.payrollRuns.forEach(t=>{let e=t.payFrequency?.name?.toLowerCase()||"";e.includes("weekly")&&!e.includes("bi")?this.weeklyRunsCount++:e.includes("bi-weekly")||e.includes("biweekly")?this.biWeeklyRunsCount++:e.includes("semi")?this.semiMonthlyRunsCount++:e.includes("monthly")&&this.monthlyRunsCount++}),this.payrollRunsList=this.payrollRuns.map(t=>{let e=t.status?.toUpperCase(),i="Pending";return e==="PROCESSED"||e==="FULLY_PROCESSED"||e==="COMPLETED"?i="Processed":e==="PARTIALLY_PROCESSED"?i="Partial":(e==="CALCULATED"||e==="APPROVED")&&(i="On Hold"),{periodType:t.payFrequency?.name||"Monthly",periodRange:`${t.periodStartDate} - ${t.periodEndDate}`,payDate:t.payDate||"",gross:t.totalGrossPay||0,netPay:t.totalNetPay||0,status:i}})}loadPayrollRecords(){if(this.payrollRuns.length===0){this.loading=!1,this.finalizeWithProcessedRecords(),this.cdr.markForCheck();return}let t=0,e=[];this.payrollRuns.forEach(i=>{i.id?this.payrollService.getPayrollRecordsByRun(i.id).subscribe({next:r=>{e.push(...r),t++,t===this.payrollRuns.length&&(this.payrollRecords=e,this.processHistoryRecords(),this.mergeRecordsFromAllSources(),this.loading=!1)},error:()=>{t++,t===this.payrollRuns.length&&(this.payrollRecords=e,e.length>0?(this.processHistoryRecords(),this.mergeRecordsFromAllSources()):this.finalizeWithProcessedRecords(),this.loading=!1)}}):t++}),this.payrollRuns.every(i=>!i.id)&&(this.loading=!1,this.finalizeWithProcessedRecords(),this.cdr.markForCheck())}finalizeWithProcessedRecords(){this.loadProcessedPayrollFromService(),this.processedFromService.length>0?this.historyRecords=[...this.processedFromService]:this.historyRecords=[],this.extractProjects(),this.calculateSummary(),this.cdr.markForCheck()}processHistoryRecords(){this.historyRecords=this.payrollRecords.map((t,e)=>{let i=t.employee||this.employees.find(v=>v.id===t.employee?.id),r=t.payrollRun,s=t.federalTax||0,d=t.stateTax||0,u=t.socialSecurityTax||0,h=t.medicareTax||0;return{empId:i?.employeeCode||`EMP${String(e+1).padStart(3,"0")}`,name:i?`${i.firstName||""} ${i.lastName||""}`.trim():"Unknown",employeeType:t.employeeType||(i?.employmentType==="HOURLY"?"Hourly":"Full-Time"),project:i?.department?.name||"General",subcontractor:"-",payRatePeriod:r?.payFrequency?.name||"Monthly",periodFrom:r?.periodStartDate||new Date().toISOString().split("T")[0],periodTo:r?.periodEndDate||new Date().toISOString().split("T")[0],hours:(t.regularHours||0)+(t.overtimeHours||0),regular:t.basePay||0,bonus:t.bonuses||0,allowances:t.reimbursements||0,deductions:(t.healthInsurance||0)+(t.retirement401k||0)+(t.loanDeductions||0),gross:t.grossPay||0,ytdGross:(t.grossPay||0)*12,fedTax:s,stateTax:d,socSecTax:u,medicareTax:h,expenses:t.reimbursements||0,totalTax:s+d+u+h,netPay:t.netPay||0,payDate:r?.payDate||new Date().toISOString().split("T")[0],paymentDate:r?.payDate||new Date().toISOString().split("T")[0],payStatus:this.getDisplayPayStatus(r?.status,t.status)}})}getDisplayPayStatus(t,e){let i=(e||t||"").toUpperCase();return i==="PROCESSED"||i==="FULLY_PROCESSED"||i==="COMPLETED"||i==="RELEASED"||i==="PAID"?"Processed":i==="HOLD"||i==="ON_HOLD"||i==="ONHOLD"?"On Hold":"Pending"}generateSampleData(){let t=[{empId:"EMP001",name:"Sarah Johnson",employeeType:"Full-Time",project:"Project A - Manufacturing",subcontractor:"-",payRatePeriod:"Weekly",periodFrom:"2025-11-30",periodTo:"2025-12-06",hours:40,regular:1187.5,bonus:0,allowances:0,deductions:0,gross:1187.5,ytdGross:61750,fedTax:142.5,stateTax:59.38,socSecTax:73.63,medicareTax:17.22,expenses:125,totalTax:292.73,netPay:894.77,payDate:"2025-12-15",paymentDate:"2025-12-15",payStatus:"Paid"},{empId:"EMP002",name:"Sarah Johnson",employeeType:"Full-Time",project:"Project B - Construction",subcontractor:"-",payRatePeriod:"Weekly",periodFrom:"2025-11-30",periodTo:"2025-12-06",hours:40,regular:1456,bonus:0,allowances:0,deductions:0,gross:1456,ytdGross:75712,fedTax:174.72,stateTax:72.8,socSecTax:90.27,medicareTax:21.11,expenses:85.5,totalTax:358.9,netPay:1097.1,payDate:"2025-12-15",paymentDate:"2025-12-15",payStatus:"Paid"},{empId:"EMP003",name:"Mike Davis",employeeType:"Subcontractor",project:"Project C - Engineering",subcontractor:"Davis Construction LLC",payRatePeriod:"Bi-Weekly",periodFrom:"2025-11-30",periodTo:"2025-12-13",hours:80,regular:2800,bonus:0,allowances:0,deductions:0,gross:2800,ytdGross:72800,fedTax:336,stateTax:140,socSecTax:173.6,medicareTax:40.6,expenses:245,totalTax:690.2,netPay:2109.8,payDate:"2025-12-20",paymentDate:"2025-12-20",payStatus:"Paid"}];this.historyRecords=t,this.completedRuns=2,this.weeklyRunsCount=2,this.biWeeklyRunsCount=1,this.semiMonthlyRunsCount=0,this.monthlyRunsCount=0,this.payrollRunsList=[{periodType:"Weekly",periodRange:"Nov 30 - Dec 06, 2025",payDate:"Dec 15, 2025",gross:2643.5,netPay:1991.87,status:"Paid"},{periodType:"Bi-Weekly",periodRange:"Nov 30 - Dec 13, 2025",payDate:"Dec 20, 2025",gross:2800,netPay:2109.8,status:"Paid"}],this.mergeRecordsFromAllSources()}extractProjects(){let t=new Set;this.historyRecords.forEach(e=>{e.project&&t.add(e.project)}),this.projects=Array.from(t).sort()}calculateSummary(){this.totalGross=this.historyRecords.reduce((t,e)=>t+e.gross,0),this.totalNet=this.historyRecords.reduce((t,e)=>t+e.netPay,0),this.totalTaxes=this.historyRecords.reduce((t,e)=>t+e.totalTax,0),this.totalEmployeesCount=this.historyRecords.length,this.pendingAmount=this.historyRecords.filter(t=>t.payStatus==="Pending").reduce((t,e)=>t+e.netPay,0),this.onHoldAmount=this.historyRecords.filter(t=>t.payStatus==="On Hold").reduce((t,e)=>t+e.netPay,0),this.completedRuns===0&&(this.completedRuns=this.payrollRunsList.length||2)}get filteredRecords(){return this.historyRecords.filter(t=>{let e=!this.selectedProject||t.project===this.selectedProject,i=!this.searchTerm||t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.empId.toLowerCase().includes(this.searchTerm.toLowerCase()),r=!0;this.selectedStatus!=="ALL"&&(this.selectedStatus==="PROCESSED"?r=t.payStatus==="Processed":this.selectedStatus==="ON_HOLD"?r=t.payStatus==="On Hold":this.selectedStatus==="PENDING"&&(r=t.payStatus==="Pending"));let s=!0;if(this.dateFrom){let d=new Date(this.dateFrom),u=new Date(t.periodFrom);s=s&&u>=d}if(this.dateTo){let d=new Date(this.dateTo),u=new Date(t.periodTo);s=s&&u<=d}return e&&i&&s&&r})}get processedRecords(){return this.historyRecords.filter(t=>t.payStatus==="Processed")}get onHoldRecords(){return this.historyRecords.filter(t=>t.payStatus==="On Hold")}get pendingRecords(){return this.historyRecords.filter(t=>t.payStatus==="Pending")}getProcessedTotal(){return this.processedRecords.reduce((t,e)=>t+e.netPay,0)}getOnHoldTotal(){return this.onHoldRecords.reduce((t,e)=>t+e.netPay,0)}getPendingTotal(){return this.pendingRecords.reduce((t,e)=>t+e.netPay,0)}get totalGrossFiltered(){return this.filteredRecords.reduce((t,e)=>t+e.gross,0)}get totalFedTax(){return this.filteredRecords.reduce((t,e)=>t+e.fedTax,0)}get totalStateTax(){return this.filteredRecords.reduce((t,e)=>t+e.stateTax,0)}get totalSocSecTax(){return this.filteredRecords.reduce((t,e)=>t+e.socSecTax,0)}get totalMedicareTax(){return this.filteredRecords.reduce((t,e)=>t+e.medicareTax,0)}get totalExpenses(){return this.filteredRecords.reduce((t,e)=>t+(e.expenses||0),0)}get totalTaxFiltered(){return this.filteredRecords.reduce((t,e)=>t+e.totalTax,0)}get totalHoursFiltered(){return this.filteredRecords.reduce((t,e)=>t+e.hours,0)}get totalNetFiltered(){return this.filteredRecords.reduce((t,e)=>t+e.netPay,0)}switchView(t){this.activeView=t}clearFilters(){this.selectedProject="",this.selectedStatus="ALL",this.dateFrom="",this.dateTo="",this.searchTerm=""}formatCurrency(t){return"$"+t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"-"}getStatusClass(t){switch(t.toLowerCase()){case"paid":return"paid";case"pending":return"pending";case"on hold":return"on-hold";default:return"default"}}getEmployeeIdByCode(t){return this.employees.find(i=>i.employeeCode===t)?.id||null}exportToPDF(){let t=new Jt({orientation:"landscape",unit:"mm",format:"a4"});t.setFontSize(16),t.setTextColor(0,128,128),t.text("Payroll History Report",14,15),t.setFontSize(10),t.setTextColor(100),t.text(`Generated: ${new Date().toLocaleDateString()}`,14,22),t.text(`Total Records: ${this.filteredRecords.length}`,14,28),t.text(`Total Net Pay: ${this.formatCurrency(this.totalNetFiltered)}`,100,28);let e=this.filteredRecords.map((i,r)=>[r+1,i.empId,i.name,i.employeeType,i.project||"-",i.payRatePeriod,this.formatDate(i.periodFrom),this.formatDate(i.periodTo),`${i.hours}h`,this.formatCurrency(i.gross),this.formatCurrency(i.totalTax),this.formatCurrency(i.netPay),i.payStatus]);a2(t,{head:[["#","EMP ID","NAME","TYPE","PROJECT","PAY PERIOD","FROM","TO","HOURS","GROSS","TAX","NET PAY","STATUS"]],body:e,startY:35,styles:{fontSize:8,cellPadding:2},headStyles:{fillColor:[0,128,128],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,248,248]},foot:[["","","","","","","","",`${this.totalHoursFiltered.toFixed(2)}h`,this.formatCurrency(this.totalGrossFiltered),this.formatCurrency(this.totalTaxFiltered),this.formatCurrency(this.totalNetFiltered),""]],footStyles:{fillColor:[0,128,128],textColor:255,fontStyle:"bold"}}),t.save(`payroll_history_${new Date().toISOString().split("T")[0]}.pdf`)}exportToCSV(){let e=[["S.NO","EMP ID","NAME","TYPE","PROJECT","SUBCONTRACTOR","PAY PERIOD","PERIOD FROM","PERIOD TO","HOURS","GROSS","FEDERAL","STATE","SOC.SEC","MEDICARE","EXPENSES","TOTAL TAX","NET PAY","PAYMENT DATE","STATUS"].join(","),...this.filteredRecords.map((d,u)=>[u+1,d.empId,`"${d.name}"`,d.employeeType,`"${d.project}"`,`"${d.subcontractor}"`,d.payRatePeriod,d.periodFrom,d.periodTo,d.hours,d.gross.toFixed(2),d.fedTax.toFixed(2),d.stateTax.toFixed(2),d.socSecTax.toFixed(2),d.medicareTax.toFixed(2),(d.expenses||0).toFixed(2),d.totalTax.toFixed(2),d.netPay.toFixed(2),d.paymentDate,d.payStatus].join(","))].join(`
`),i=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=`payroll_history_${new Date().toISOString().split("T")[0]}.csv`,s.click(),window.URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(V(vi),V(ai),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-payroll-history"]],decls:18,vars:6,consts:[[1,"payroll-history"],[1,"page-header"],[1,"header-left"],["routerLink","/app/payroll/timesheets",1,"back-btn"],[1,"fas","fa-arrow-left"],[1,"title-section"],[1,"subtitle"],[1,"header-actions"],[1,"view-toggle"],[1,"toggle-btn",3,"click"],["class","runs-view",4,"ngIf"],["class","detail-view",4,"ngIf"],[1,"runs-view"],[1,"section-title"],[1,"period-type-cards"],[1,"period-card","weekly"],[1,"period-count"],[1,"period-label"],[1,"period-card","biweekly"],[1,"period-card","semimonthly"],[1,"period-card","monthly"],[1,"summary-stats-row"],[1,"stat-box"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","blue"],[1,"stat-value","red"],[1,"stat-value","green"],[1,"runs-list"],["class","run-item",4,"ngFor","ngForOf"],["class","no-runs",4,"ngIf"],[1,"run-item"],[1,"run-field"],[1,"field-label"],[1,"field-value"],[1,"field-value","green"],[1,"status-badge","paid"],[1,"no-runs"],[1,"fas","fa-inbox"],[1,"detail-view"],[1,"filter-section"],[1,"fas","fa-filter"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value","ALL"],["value","PROCESSED"],["value","ON_HOLD"],["value","PENDING"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","placeholder","mm/dd/yyyy",3,"ngModelChange","ngModel"],[1,"filter-group","btn-group"],[1,"btn","btn-clear",3,"click"],[1,"detail-summary-cards"],[1,"summary-card","total-records"],[1,"fas","fa-file-alt","card-icon"],[1,"card-label"],[1,"card-value"],[1,"summary-card","total-paid",3,"click"],[1,"fas","fa-check-circle","card-icon"],[1,"summary-card","pending",3,"click"],[1,"fas","fa-clock","card-icon"],[1,"summary-card","on-hold",3,"click"],[1,"fas","fa-pause-circle","card-icon"],[1,"records-section"],[1,"records-header"],[1,"header-info"],[1,"record-summary"],[1,"export-buttons"],[1,"btn","btn-export-excel",3,"click"],[1,"fas","fa-file-excel"],[1,"btn","btn-export-pdf",3,"click"],[1,"fas","fa-file-pdf"],[1,"table-container"],[1,"data-table","detail-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"emp-id"],[1,"employee-code-link",3,"routerLink"],[1,"emp-name"],[1,"hours"],[1,"gross"],[1,"tax"],[1,"expense"],[1,"total-tax"],[1,"net"],[1,"status-badge",3,"ngClass"],["colspan","20",1,"no-data"],[1,"totals-row"],["colspan","9"],["colspan","2"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),y(4,"i",4),a(),o(5,"div",5)(6,"h1"),l(7,"Complete Payroll History"),a(),o(8,"p",6),l(9,"Track all payroll transactions and payments"),a()()(),o(10,"div",7)(11,"div",8)(12,"button",9),x("click",function(){return i.switchView("runs")}),l(13," Payroll Runs "),a(),o(14,"button",9),x("click",function(){return i.switchView("detail")}),l(15," Detailed View "),a()()()(),b(16,Fwe,53,11,"div",10)(17,Uwe,123,24,"div",11),a()),e&2&&(c(12),ie("active",i.activeView==="runs"),c(2),ie("active",i.activeView==="detail"),c(2),m("ngIf",i.activeView==="runs"),c(),m("ngIf",i.activeView==="detail"))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Ue,Oe,Ee,Ns,ht,Rt],styles:['@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.payroll-history[_ngcontent-%COMP%]{padding:24px;background:linear-gradient(135deg,#f0f9f9,#e8f4f4);min-height:100vh}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;border:none;background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 8px #00808026;transition:all .3s ease}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:teal;color:#fff;transform:translate(-3px);box-shadow:0 4px 12px #0080804d}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#066;font-size:26px;font-weight:700;margin:0;background:linear-gradient(135deg,teal,#066);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#5a8a8a;margin:4px 0 0;font-size:14px}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:5px;box-shadow:0 2px 12px #0080801a}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:10px;background:transparent;color:#5a8a8a;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,teal,#00a0a0);opacity:0;transition:opacity .3s;z-index:-1}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{color:#fff;box-shadow:0 4px 12px #0080804d}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]:before{opacity:1}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover:not(.active){color:teal;background:#e8f4f4}.payroll-history[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#066;margin:0 0 20px;display:flex;align-items:center;gap:10px}.payroll-history[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]:before{content:"";width:4px;height:24px;background:linear-gradient(180deg,teal,#00a0a0);border-radius:2px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]{padding:24px;border-radius:16px;color:#fff;cursor:pointer;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);transform:rotate(45deg);transition:transform .6s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 32px #00808066}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]:hover:before{transform:rotate(45deg) translate(100%,100%)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]   .period-count[_ngcontent-%COMP%]{display:block;font-size:36px;font-weight:800;margin-bottom:8px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card[_ngcontent-%COMP%]   .period-label[_ngcontent-%COMP%]{font-size:15px;font-weight:500;opacity:.95}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card.weekly[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card.biweekly[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a0a0,#00b8b8)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card.semimonthly[_ngcontent-%COMP%]{background:linear-gradient(135deg,#066,teal)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]   .period-card.monthly[_ngcontent-%COMP%]{background:linear-gradient(135deg,#004d4d,#066)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:28px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px 24px;border:none;box-shadow:0 4px 16px #00808014;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards;position:relative;overflow:hidden}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(1){animation-delay:.15s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(3){animation-delay:.25s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:nth-child(5){animation-delay:.35s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:4px;background:linear-gradient(90deg,teal,#00a0a0);transform:scaleX(0);transition:transform .3s ease}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00808026}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#5a8a8a;margin-bottom:8px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#066}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-value.blue[_ngcontent-%COMP%]{color:teal}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-value.red[_ngcontent-%COMP%]{color:#d94848}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-value.green[_ngcontent-%COMP%]{color:#00a080}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 20px #00808014;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out backwards;animation-delay:.4s}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);padding:24px 28px;border-bottom:1px solid #e8f4f4;transition:all .3s ease}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#f0f9f9,#fff);padding-left:32px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]   .run-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#5a8a8a;text-transform:uppercase;margin-bottom:6px;letter-spacing:.5px}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]   .run-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:600}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .run-item[_ngcontent-%COMP%]   .run-field[_ngcontent-%COMP%]   .field-value.green[_ngcontent-%COMP%]{color:#00a080}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .no-runs[_ngcontent-%COMP%]{padding:80px 20px;text-align:center;color:#5a8a8a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .no-runs[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:56px;margin-bottom:20px;color:teal;opacity:.4}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .runs-list[_ngcontent-%COMP%]   .no-runs[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin-bottom:24px;box-shadow:0 4px 16px #00808014;animation:_ngcontent-%COMP%_slideInRight .5s ease-out}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#066;margin:0 0 20px;display:flex;align-items:center;gap:8px}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:20px;align-items:end}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#5a8a8a;margin-bottom:8px;font-weight:500}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0f0f0;border-radius:10px;font-size:14px;transition:all .3s ease;background:#fafffe}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 4px #0080801a}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover, .payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#00a0a0}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{padding:24px;border-radius:16px;color:#fff;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:100px;height:100px;background:#ffffff1a;border-radius:50%;transform:translate(30%,-30%);transition:transform .4s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 28px #00808059;cursor:pointer}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover:before{transform:translate(20%,-20%) scale(1.2)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card.active[_ngcontent-%COMP%]{transform:translateY(-6px);box-shadow:0 12px 28px #00808080;border:3px solid white}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:12px;opacity:.9}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{display:block;font-size:13px;opacity:.9;margin-bottom:10px;font-weight:500}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:32px;font-weight:800}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card.total-records[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card.total-paid[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00a080,#00c0a0)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card.pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e08000,#ff9020)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]   .summary-card.on-hold[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d94848,#f06060)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .records-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 20px #00808014;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out backwards;animation-delay:.3s}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .records-section[_ngcontent-%COMP%]   .records-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:2px solid #e8f4f4;background:linear-gradient(90deg,#fafffe,#fff)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .records-section[_ngcontent-%COMP%]   .records-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#066;margin:0 0 4px}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .records-section[_ngcontent-%COMP%]   .records-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .record-summary[_ngcontent-%COMP%]{font-size:13px;color:#5a8a8a}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .records-section[_ngcontent-%COMP%]   .records-header[_ngcontent-%COMP%]   .export-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.payroll-history[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.payroll-history[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.payroll-history[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e8f4f4}.payroll-history[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(90deg,teal,#00a0a0);border-radius:4px}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:1600px}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;text-align:left;border-bottom:1px solid #e8f4f4;font-size:13px;white-space:nowrap}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f9f9,#e8f4f4);color:#066;font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.5px;position:sticky;top:0}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fffe;transform:scale(1.002)}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .emp-id[_ngcontent-%COMP%]{font-family:Monaco,Consolas,monospace;color:teal;font-weight:600}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .emp-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{text-align:right;color:#5a8a8a}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .gross[_ngcontent-%COMP%]{color:#00a080;font-weight:700;text-align:right}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .tax[_ngcontent-%COMP%]{color:#666;text-align:right}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{color:teal;font-weight:600;text-align:right}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .total-tax[_ngcontent-%COMP%]{color:#d94848;font-weight:600;text-align:right}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .net[_ngcontent-%COMP%]{color:#00a080;font-weight:800;text-align:right;font-size:14px}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#5a8a8a}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:teal;opacity:.5}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e8f4f4,#f0f9f9)}.payroll-history[_ngcontent-%COMP%]   .detail-table[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #008080;font-weight:700;color:#066}.payroll-history[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;transition:all .3s ease}.payroll-history[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]:before{content:"";width:6px;height:6px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.payroll-history[_ngcontent-%COMP%]   .status-badge.paid[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d0f5e8,#b8f0d8);color:#00806a}.payroll-history[_ngcontent-%COMP%]   .status-badge.paid[_ngcontent-%COMP%]:before{background:#00a080}.payroll-history[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3d0,#ffe8a8);color:#a06800}.payroll-history[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]:before{background:#e09000}.payroll-history[_ngcontent-%COMP%]   .status-badge.on-hold[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fdd,#fcc);color:#c03030}.payroll-history[_ngcontent-%COMP%]   .status-badge.on-hold[_ngcontent-%COMP%]:before{background:#e04040}.payroll-history[_ngcontent-%COMP%]   .status-badge.default[_ngcontent-%COMP%]{background:#eee;color:#666}.payroll-history[_ngcontent-%COMP%]   .status-badge.default[_ngcontent-%COMP%]:before{background:#888}.btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;border:none;font-size:13px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#fff3;border-radius:50%;transition:width .4s,height .4s;transform:translate(-50%,-50%)}.btn[_ngcontent-%COMP%]:active:before{width:200px;height:200px}.btn.btn-clear[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0f0f0;color:#066}.btn.btn-clear[_ngcontent-%COMP%]:hover{background:#e8f4f4;border-color:teal;transform:translateY(-2px)}.btn.btn-export-excel[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#00a0a0);color:#fff;box-shadow:0 4px 12px #0080804d}.btn.btn-export-excel[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00808066}.btn.btn-export-pdf[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d94848,#f06060);color:#fff;box-shadow:0 4px 12px #d948484d}.btn.btn-export-pdf[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #d9484866}@media(max-width:1200px){.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.payroll-history[_ngcontent-%COMP%]{padding:16px}.payroll-history[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:flex-start}.payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .period-type-cards[_ngcontent-%COMP%], .payroll-history[_ngcontent-%COMP%]   .runs-view[_ngcontent-%COMP%]   .summary-stats-row[_ngcontent-%COMP%], .payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-summary-cards[_ngcontent-%COMP%], .payroll-history[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}'],changeDetection:0})};var y0=class n{TEAL="#008080";constructor(){}exportToPDF(t,e,i,r){let s=new Jt("l","mm","a4"),d=s.internal.pageSize.getWidth(),u=s.internal.pageSize.getHeight(),h=15,v=h;s.setFillColor(0,128,128),s.rect(0,0,d,25,"F"),s.setTextColor(255,255,255),s.setFontSize(16),s.setFont("helvetica","bold"),s.text(t,h,16),s.setFontSize(9),s.setFont("helvetica","normal"),s.text(`Generated: ${new Date().toLocaleString()}`,d-h-50,16),v=35;let C=e.length,O=d-h*2,T=O/C;s.setFillColor(224,242,241),s.rect(h,v,O,10,"F"),s.setTextColor(0,105,92),s.setFontSize(9),s.setFont("helvetica","bold"),e.forEach((w,A)=>{let I=h+A*T+3;s.text(w,I,v+7)}),v+=10,s.setFont("helvetica","normal"),s.setTextColor(51,51,51),s.setFontSize(8),i.forEach((w,A)=>{v>u-20&&(s.addPage(),v=h),A%2===0&&(s.setFillColor(248,249,250),s.rect(h,v,O,8,"F")),w.forEach((I,L)=>{let B=h+L*T+3,q=String(I||"");s.text(q.substring(0,25),B,v+5.5)}),v+=8}),s.save(`${r}_${this.getDateStamp()}.pdf`)}exportToExcel(t,e){if(t.length===0)return;let i=Object.keys(t[0]),r=i.join("	")+`
`;t.forEach(d=>{let u=i.map(h=>{let v=d[h];return typeof v=="number"?v:String(v||"").replace(/\t/g," ")});r+=u.join("	")+`
`});let s=new Blob([r],{type:"application/vnd.ms-excel;charset=utf-8"});this.downloadBlob(s,`${e}_${this.getDateStamp()}.xls`)}exportToCSV(t,e,i){let r=t.map(d=>`"${d}"`).join(",")+`
`;e.forEach(d=>{let u=d.map(h=>typeof h=="number"?h:`"${String(h||"").replace(/"/g,'""')}"`);r+=u.join(",")+`
`});let s=new Blob([r],{type:"text/csv;charset=utf-8"});this.downloadBlob(s,`${i}_${this.getDateStamp()}.csv`)}downloadBlob(t,e){let i=window.URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}getDateStamp(){let t=new Date;return`${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}`}static \u0275fac=function(e){return new(e||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function jwe(n,t){n&1&&(o(0,"div",37)(1,"div",38),y(2,"i",39),o(3,"p"),l(4,"Loading payroll data..."),a(),o(5,"span",40),l(6,"Please wait while we fetch your payroll information"),a()()())}function Wwe(n,t){if(n&1&&(o(0,"option",41),l(1),a()),n&2){let e=t.$implicit,i=p();m("ngValue",e.id),c(),En(" ",e.payrollRunNumber," (",i.formatDate(e.periodStartDate)," - ",i.formatDate(e.periodEndDate),") ")}}function zwe(n,t){n&1&&(o(0,"div",42),y(1,"i",39),o(2,"p"),l(3,"Loading payroll records..."),a()())}function qwe(n,t){n&1&&(o(0,"th",48),l(1,"Employees"),a())}function Hwe(n,t){if(n&1&&(o(0,"td",48),l(1),a()),n&2){let e=p().$implicit;c(),_(e.employeeCount)}}function Gwe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),b(3,Hwe,2,1,"td",44),o(4,"td",45),l(5),a(),o(6,"td",45),l(7),a(),o(8,"td",45),l(9),a(),o(10,"td",45),l(11),a(),o(12,"td",45),l(13),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.groupName),c(),m("ngIf",i.groupBy!=="employee"),c(2),_(i.formatCurrency(e.totalGrossPay)),c(2),_(i.formatCurrency(e.totalDeductions)),c(2),_(i.formatCurrency(e.totalTaxes)),c(2),_(i.formatCurrency(e.totalNetPay)),c(2),_(i.formatCurrency(e.totalEmployerContributions))}}function $we(n,t){if(n&1&&(o(0,"td",48)(1,"strong"),l(2),a()()),n&2){let e=p(2);c(2),_(e.grandTotals.employeeCount)}}function Ywe(n,t){if(n&1&&(o(0,"table",43)(1,"thead")(2,"tr")(3,"th"),l(4),a(),b(5,qwe,2,0,"th",44),o(6,"th",45),l(7,"Gross Pay"),a(),o(8,"th",45),l(9,"Deductions"),a(),o(10,"th",45),l(11,"Taxes"),a(),o(12,"th",45),l(13,"Net Pay"),a(),o(14,"th",45),l(15,"Employer Cost"),a()()(),o(16,"tbody"),b(17,Gwe,14,7,"tr",46),a(),o(18,"tfoot")(19,"tr",47)(20,"td")(21,"strong"),l(22,"Grand Total"),a()(),b(23,$we,3,1,"td",44),o(24,"td",45)(25,"strong"),l(26),a()(),o(27,"td",45)(28,"strong"),l(29),a()(),o(30,"td",45)(31,"strong"),l(32),a()(),o(33,"td",45)(34,"strong"),l(35),a()(),o(36,"td",45)(37,"strong"),l(38),a()()()()()),n&2){let e=p();c(4),_(e.getGroupByLabel()),c(),m("ngIf",e.groupBy!=="employee"),c(12),m("ngForOf",e.summaryData),c(6),m("ngIf",e.groupBy!=="employee"),c(3),_(e.formatCurrency(e.grandTotals.totalGrossPay)),c(3),_(e.formatCurrency(e.grandTotals.totalDeductions)),c(3),_(e.formatCurrency(e.grandTotals.totalTaxes)),c(3),_(e.formatCurrency(e.grandTotals.totalNetPay)),c(3),_(e.formatCurrency(e.grandTotals.totalEmployerContributions))}}function Jwe(n,t){n&1&&(o(0,"div",49),y(1,"i",50),o(2,"p"),l(3,"No payroll data available for the selected period"),a()())}var U2=class n{constructor(t,e){this.payrollService=t;this.exportService=e}payrollRuns=[];payrollRecords=[];summaryData=[];selectedRunId=null;groupBy="employee";loading=!1;isFirstLoad=!0;dataReady=!1;grandTotals={employeeCount:0,totalGrossPay:0,totalDeductions:0,totalTaxes:0,totalNetPay:0,totalEmployerContributions:0};ngOnInit(){this.loadPayrollRuns()}loadPayrollRuns(){this.payrollService.getPayrollRuns().subscribe({next:t=>{this.payrollRuns=t.filter(e=>e.status==="PROCESSED"||e.status==="APPROVED"),this.payrollRuns.length>0?(this.selectedRunId=this.payrollRuns[0].id,this.loadPayrollRecords()):this.completeLoading()},error:t=>{console.error("Error loading payroll runs:",t),this.completeLoading()}})}loadPayrollRecords(){this.selectedRunId&&this.payrollService.getPayrollRecordsByRun(this.selectedRunId).subscribe({next:t=>{this.payrollRecords=t,this.generateSummary(),this.completeLoading()},error:t=>{console.error("Error loading payroll records:",t),this.completeLoading()}})}generateSummary(){let t=new Map;this.payrollRecords.forEach(e=>{let i,r;switch(this.groupBy){case"department":i=e.employee?.department?.id?.toString()||"unassigned",r=e.employee?.department?.name||"Unassigned";break;case"project":i=e.projectCode||"unassigned",r=e.projectCode||"Unassigned";break;default:i=e.employee?.id?.toString()||"unknown",r=`${e.employee?.firstName||""} ${e.employee?.lastName||""}`.trim()||"Unknown"}t.has(i)||t.set(i,{groupKey:i,groupName:r,employeeCount:0,totalGrossPay:0,totalDeductions:0,totalTaxes:0,totalNetPay:0,totalEmployerContributions:0});let s=t.get(i);this.groupBy==="employee"?s.employeeCount=1:s.employeeCount++,s.totalGrossPay+=e.grossPay||0,s.totalDeductions+=e.totalDeductions||0,s.totalTaxes+=e.totalTaxes||0,s.totalNetPay+=e.netPay||0,s.totalEmployerContributions+=e.totalEmployerContributions||0}),this.summaryData=Array.from(t.values()).sort((e,i)=>e.groupName.localeCompare(i.groupName)),this.calculateGrandTotals()}calculateGrandTotals(){this.grandTotals={employeeCount:this.groupBy==="employee"?this.summaryData.length:this.summaryData.reduce((t,e)=>t+e.employeeCount,0),totalGrossPay:this.summaryData.reduce((t,e)=>t+e.totalGrossPay,0),totalDeductions:this.summaryData.reduce((t,e)=>t+e.totalDeductions,0),totalTaxes:this.summaryData.reduce((t,e)=>t+e.totalTaxes,0),totalNetPay:this.summaryData.reduce((t,e)=>t+e.totalNetPay,0),totalEmployerContributions:this.summaryData.reduce((t,e)=>t+e.totalEmployerContributions,0)}}onRunChange(){this.loadPayrollRecords()}onGroupByChange(){this.generateSummary()}getGroupByLabel(){switch(this.groupBy){case"department":return"Department";case"project":return"Project";default:return"Employee"}}getSelectedRunInfo(){let t=this.payrollRuns.find(e=>e.id===this.selectedRunId);return t?`${t.payrollRunNumber} (${this.formatDate(t.periodStartDate)} - ${this.formatDate(t.periodEndDate)})`:""}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString():""}exportToPDF(){let t=[this.getGroupByLabel(),"Employees","Gross Pay","Deductions","Taxes","Net Pay","Employer Cost"],e=this.summaryData.map(i=>[i.groupName,i.employeeCount.toString(),this.formatCurrency(i.totalGrossPay),this.formatCurrency(i.totalDeductions),this.formatCurrency(i.totalTaxes),this.formatCurrency(i.totalNetPay),this.formatCurrency(i.totalEmployerContributions)]);this.exportService.exportToPDF(`Payroll Summary Report - By ${this.getGroupByLabel()}`,t,e,`payroll_summary_${this.groupBy}`)}exportToExcel(){let t=this.summaryData.map(e=>({[this.getGroupByLabel()]:e.groupName,"Employee Count":e.employeeCount,"Gross Pay":e.totalGrossPay,Deductions:e.totalDeductions,Taxes:e.totalTaxes,"Net Pay":e.totalNetPay,"Employer Contributions":e.totalEmployerContributions}));this.exportService.exportToExcel(t,`payroll_summary_${this.groupBy}`)}exportToCSV(){let t=[this.getGroupByLabel(),"Employee Count","Gross Pay","Deductions","Taxes","Net Pay","Employer Contributions"],e=this.summaryData.map(i=>[i.groupName,i.employeeCount,i.totalGrossPay,i.totalDeductions,i.totalTaxes,i.totalNetPay,i.totalEmployerContributions]);this.exportService.exportToCSV(t,e,`payroll_summary_${this.groupBy}`)}completeLoading(){this.loading=!1,this.dataReady=!0,this.isFirstLoad=!1}static \u0275fac=function(e){return new(e||n)(V(vi),V(y0))};static \u0275cmp=_e({type:n,selectors:[["app-payroll-summary-report"]],decls:73,vars:14,consts:[[1,"report-container"],[1,"report-header"],[1,"fas","fa-chart-pie"],[1,"subtitle"],["class","loading-container",4,"ngIf"],[1,"filter-section"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["value","employee"],["value","department"],["value","project"],[1,"export-buttons"],[1,"btn-export","pdf",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn-export","excel",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn-export","csv",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon"],[1,"fas","fa-users"],[1,"card-content"],[1,"card-value"],[1,"card-label"],[1,"card-icon","gross"],[1,"fas","fa-dollar-sign"],[1,"card-icon","deductions"],[1,"fas","fa-minus-circle"],[1,"card-icon","net"],[1,"fas","fa-wallet"],["class","loading-state",4,"ngIf"],[1,"table-container"],["class","report-table",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-subtext"],[3,"ngValue"],[1,"loading-state"],[1,"report-table"],["class","text-center",4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"totals-row"],[1,"text-center"],[1,"empty-state"],[1,"fas","fa-chart-bar"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),y(3,"i",2),l(4," Payroll Summary Report"),a(),o(5,"p",3),l(6,"View payroll summary grouped by employee, department, or project"),a()(),b(7,jwe,7,0,"div",4),on(8),o(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),l(13,"Payroll Run"),a(),o(14,"select",8),S("ngModelChange",function(s){return P(i.selectedRunId,s)||(i.selectedRunId=s),s}),x("change",function(){return i.onRunChange()}),b(15,Wwe,2,4,"option",9),a()(),o(16,"div",7)(17,"label"),l(18,"Group By"),a(),o(19,"select",8),S("ngModelChange",function(s){return P(i.groupBy,s)||(i.groupBy=s),s}),x("change",function(){return i.onGroupByChange()}),o(20,"option",10),l(21,"Employee"),a(),o(22,"option",11),l(23,"Department"),a(),o(24,"option",12),l(25,"Project"),a()()(),o(26,"div",13)(27,"button",14),x("click",function(){return i.exportToPDF()}),y(28,"i",15),l(29," PDF "),a(),o(30,"button",16),x("click",function(){return i.exportToExcel()}),y(31,"i",17),l(32," Excel "),a(),o(33,"button",18),x("click",function(){return i.exportToCSV()}),y(34,"i",19),l(35," CSV "),a()()()(),o(36,"div",20)(37,"div",21)(38,"div",22),y(39,"i",23),a(),o(40,"div",24)(41,"span",25),l(42),a(),o(43,"span",26),l(44,"Total Employees"),a()()(),o(45,"div",21)(46,"div",27),y(47,"i",28),a(),o(48,"div",24)(49,"span",25),l(50),a(),o(51,"span",26),l(52,"Total Gross Pay"),a()()(),o(53,"div",21)(54,"div",29),y(55,"i",30),a(),o(56,"div",24)(57,"span",25),l(58),a(),o(59,"span",26),l(60,"Total Deductions"),a()()(),o(61,"div",21)(62,"div",31),y(63,"i",32),a(),o(64,"div",24)(65,"span",25),l(66),a(),o(67,"span",26),l(68,"Total Net Pay"),a()()()(),b(69,zwe,4,0,"div",33),o(70,"div",34),b(71,Ywe,39,9,"table",35)(72,Jwe,4,0,"div",36),a(),an(),a()),e&2&&(c(7),m("ngIf",i.loading),c(7),M("ngModel",i.selectedRunId),c(),m("ngForOf",i.payrollRuns),c(4),M("ngModel",i.groupBy),c(8),m("disabled",i.summaryData.length===0),c(3),m("disabled",i.summaryData.length===0),c(3),m("disabled",i.summaryData.length===0),c(9),_(i.grandTotals.employeeCount),c(8),_(i.formatCurrency(i.grandTotals.totalGrossPay)),c(8),_(i.formatCurrency(i.grandTotals.totalDeductions)),c(8),_(i.formatCurrency(i.grandTotals.totalNetPay)),c(3),m("ngIf",i.loading&&i.payrollRuns.length>0),c(2),m("ngIf",i.summaryData.length>0),c(),m("ngIf",i.summaryData.length===0))},dependencies:[At,Se,be,Vt,je,We,Ue,Oe,Ee,Rt],styles:[".report-container[_ngcontent-%COMP%]{padding:24px;background:#f8f9fa;min-height:calc(100vh - 60px)}.report-header[_ngcontent-%COMP%]{margin-bottom:24px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;font-size:1.75rem;font-weight:600;margin:0 0 8px;display:flex;align-items:center;gap:12px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.report-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #00000014;margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:200px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;background:#fff;cursor:pointer}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.export-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.btn-export[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.85rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-export[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-export.pdf[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-export.pdf[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}.btn-export.excel[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-export.excel[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-export.csv[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-export.csv[_ngcontent-%COMP%]:hover:not(:disabled){background:#138496}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #00000014;display:flex;align-items:center;gap:16px}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10px;background:#e0f2f1;color:teal;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.summary-card[_ngcontent-%COMP%]   .card-icon.gross[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.summary-card[_ngcontent-%COMP%]   .card-icon.deductions[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.summary-card[_ngcontent-%COMP%]   .card-icon.net[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#333}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.report-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:500;font-size:.9rem}.report-table[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   th.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;color:#333}.report-table[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e0f2f1}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none;color:teal}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:#fff;border-radius:8px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}"]})};function Kwe(n,t){n&1&&(o(0,"div",35)(1,"div",36),y(2,"i",37),o(3,"p"),l(4,"Loading report data..."),a()()())}function Qwe(n,t){if(n&1&&(o(0,"option",38),l(1),a()),n&2){let e=t.$implicit,i=p();m("ngValue",e.id),c(),En(" ",e.payrollRunNumber," (",i.formatDate(e.periodStartDate)," - ",i.formatDate(e.periodEndDate),") ")}}function Xwe(n,t){if(n&1&&(o(0,"tr")(1,"td")(2,"span",45),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td",40),l(7),a(),o(8,"td",41),l(9),a(),o(10,"td",41),l(11),a(),o(12,"td",41),l(13),a(),o(14,"td",41),l(15),a(),o(16,"td",46),l(17),a(),o(18,"td",40)(19,"div",47),y(20,"div",48),o(21,"span",49),l(22),a()()()()),n&2){let e=t.$implicit,i=p(2);c(3),_(e.costCenter),c(2),_(e.department),c(2),_(e.employeeCount),c(2),_(i.formatCurrency(e.regularPay)),c(2),_(i.formatCurrency(e.overtimePay)),c(2),_(i.formatCurrency(e.bonuses)),c(2),_(i.formatCurrency(e.employerContributions)),c(2),_(i.formatCurrency(e.totalLaborCost)),c(3),jt("width",i.getCostPercentage(e.totalLaborCost)),c(2),_(i.getCostPercentage(e.totalLaborCost))}}function Zwe(n,t){if(n&1&&(o(0,"table",39)(1,"thead")(2,"tr")(3,"th"),l(4,"Cost Center"),a(),o(5,"th"),l(6,"Department"),a(),o(7,"th",40),l(8,"Employees"),a(),o(9,"th",41),l(10,"Regular Pay"),a(),o(11,"th",41),l(12,"Overtime"),a(),o(13,"th",41),l(14,"Bonuses"),a(),o(15,"th",41),l(16,"Employer Cost"),a(),o(17,"th",41),l(18,"Total Cost"),a(),o(19,"th",40),l(20,"% of Total"),a()()(),o(21,"tbody"),b(22,Xwe,23,11,"tr",42),a(),o(23,"tfoot")(24,"tr",43)(25,"td",44)(26,"strong"),l(27,"Grand Total"),a()(),o(28,"td",40)(29,"strong"),l(30),a()(),o(31,"td",41)(32,"strong"),l(33),a()(),o(34,"td",41)(35,"strong"),l(36),a()(),o(37,"td",41)(38,"strong"),l(39),a()(),o(40,"td",41)(41,"strong"),l(42),a()(),o(43,"td",41)(44,"strong"),l(45),a()(),o(46,"td",40)(47,"strong"),l(48,"100%"),a()()()()()),n&2){let e=p();c(22),m("ngForOf",e.laborCostData),c(8),_(e.grandTotals.employeeCount),c(3),_(e.formatCurrency(e.grandTotals.regularPay)),c(3),_(e.formatCurrency(e.grandTotals.overtimePay)),c(3),_(e.formatCurrency(e.grandTotals.bonuses)),c(3),_(e.formatCurrency(e.grandTotals.employerContributions)),c(3),_(e.formatCurrency(e.grandTotals.totalLaborCost))}}function eEe(n,t){n&1&&(o(0,"div",50),y(1,"i",3),o(2,"p"),l(3,"No labor cost data available for the selected period"),a()())}function tEe(n,t){n&1&&(o(0,"div",51),y(1,"i",37),o(2,"p"),l(3,"Loading labor cost data..."),a()())}var j2=class n{constructor(t,e){this.payrollService=t;this.exportService=e}payrollRuns=[];payrollRecords=[];laborCostData=[];selectedRunId=null;loading=!1;dataReady=!1;grandTotals={employeeCount:0,regularPay:0,overtimePay:0,bonuses:0,benefits:0,taxes:0,employerContributions:0,totalLaborCost:0};ngOnInit(){this.loadPayrollRuns()}loadPayrollRuns(){this.payrollService.getPayrollRuns().subscribe({next:t=>{this.payrollRuns=t.filter(e=>e.status==="PROCESSED"||e.status==="APPROVED"),this.payrollRuns.length>0&&(this.selectedRunId=this.payrollRuns[0].id,this.loadPayrollRecords())},error:t=>console.error("Error loading payroll runs:",t)})}loadPayrollRecords(){this.selectedRunId&&(this.loading=!0,this.dataReady=!1,this.payrollService.getPayrollRecordsByRun(this.selectedRunId).subscribe({next:t=>{this.payrollRecords=t,this.generateLaborCostReport(),this.completeLoading()},error:t=>{console.error("Error loading payroll records:",t),this.completeLoading()}}))}generateLaborCostReport(){let t=new Map;this.payrollRecords.forEach(e=>{let i=e.costCenterCode||e.employee?.costCenter?.code||"UNASSIGNED",r=e.employee?.department?.name||"Unassigned",s=`${i}-${r}`;t.has(s)||t.set(s,{costCenter:i,department:r,employeeCount:0,regularPay:0,overtimePay:0,bonuses:0,benefits:0,taxes:0,employerContributions:0,totalLaborCost:0});let d=t.get(s);d.employeeCount++,d.regularPay+=e.basePay||0,d.overtimePay+=e.overtimePay||0,d.bonuses+=e.bonuses||0,d.benefits+=e.employerHealthContribution||0,d.taxes+=(e.employerSocialSecurity||0)+(e.employerMedicare||0),d.employerContributions+=e.totalEmployerContributions||0,d.totalLaborCost=d.regularPay+d.overtimePay+d.bonuses+d.employerContributions}),this.laborCostData=Array.from(t.values()).sort((e,i)=>e.costCenter.localeCompare(i.costCenter)),this.calculateGrandTotals()}calculateGrandTotals(){this.grandTotals={employeeCount:this.laborCostData.reduce((t,e)=>t+e.employeeCount,0),regularPay:this.laborCostData.reduce((t,e)=>t+e.regularPay,0),overtimePay:this.laborCostData.reduce((t,e)=>t+e.overtimePay,0),bonuses:this.laborCostData.reduce((t,e)=>t+e.bonuses,0),benefits:this.laborCostData.reduce((t,e)=>t+e.benefits,0),taxes:this.laborCostData.reduce((t,e)=>t+e.taxes,0),employerContributions:this.laborCostData.reduce((t,e)=>t+e.employerContributions,0),totalLaborCost:this.laborCostData.reduce((t,e)=>t+e.totalLaborCost,0)}}onRunChange(){this.loadPayrollRecords()}getCostPercentage(t){return this.grandTotals.totalLaborCost===0?"0%":(t/this.grandTotals.totalLaborCost*100).toFixed(1)+"%"}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString():""}exportToPDF(){let t=["Cost Center","Department","Employees","Regular Pay","Overtime","Bonuses","Employer Cost","Total Cost"],e=this.laborCostData.map(i=>[i.costCenter,i.department,i.employeeCount.toString(),this.formatCurrency(i.regularPay),this.formatCurrency(i.overtimePay),this.formatCurrency(i.bonuses),this.formatCurrency(i.employerContributions),this.formatCurrency(i.totalLaborCost)]);this.exportService.exportToPDF("Labor Cost Allocation Report",t,e,"labor_cost_allocation")}exportToExcel(){let t=this.laborCostData.map(e=>({"Cost Center":e.costCenter,Department:e.department,"Employee Count":e.employeeCount,"Regular Pay":e.regularPay,"Overtime Pay":e.overtimePay,Bonuses:e.bonuses,Benefits:e.benefits,Taxes:e.taxes,"Employer Contributions":e.employerContributions,"Total Labor Cost":e.totalLaborCost}));this.exportService.exportToExcel(t,"labor_cost_allocation")}exportToCSV(){let t=["Cost Center","Department","Employee Count","Regular Pay","Overtime Pay","Bonuses","Benefits","Taxes","Employer Contributions","Total Labor Cost"],e=this.laborCostData.map(i=>[i.costCenter,i.department,i.employeeCount,i.regularPay,i.overtimePay,i.bonuses,i.benefits,i.taxes,i.employerContributions,i.totalLaborCost]);this.exportService.exportToCSV(t,e,"labor_cost_allocation")}completeLoading(){this.completeLoading(),this.dataReady=!0}static \u0275fac=function(e){return new(e||n)(V(vi),V(y0))};static \u0275cmp=_e({type:n,selectors:[["app-labor-cost-allocation-report"]],decls:63,vars:13,consts:[["class","loading-container",4,"ngIf"],[1,"report-container"],[1,"report-header"],[1,"fas","fa-chart-area"],[1,"subtitle"],[1,"filter-section"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"export-buttons"],[1,"btn-export","pdf",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn-export","excel",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn-export","csv",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"summary-cards"],[1,"summary-card","highlight"],[1,"card-icon"],[1,"fas","fa-dollar-sign"],[1,"card-content"],[1,"card-value"],[1,"card-label"],[1,"summary-card"],[1,"card-icon","regular"],[1,"fas","fa-clock"],[1,"card-icon","overtime"],[1,"fas","fa-hourglass-half"],[1,"card-icon","employer"],[1,"fas","fa-building"],[1,"table-container"],["class","report-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[3,"ngValue"],[1,"report-table"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","2"],[1,"cost-center-badge"],[1,"text-right","amount-highlight"],[1,"percentage-bar"],[1,"bar-fill"],[1,"bar-label"],[1,"empty-state"],[1,"loading-state"]],template:function(e,i){e&1&&(b(0,Kwe,5,0,"div",0),on(1),o(2,"div",1)(3,"div",2)(4,"h2"),y(5,"i",3),l(6," Labor Cost Allocation Report"),a(),o(7,"p",4),l(8,"View labor costs allocated by cost center and department"),a()(),o(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),l(13,"Payroll Run"),a(),o(14,"select",8),S("ngModelChange",function(s){return P(i.selectedRunId,s)||(i.selectedRunId=s),s}),x("change",function(){return i.onRunChange()}),b(15,Qwe,2,4,"option",9),a()(),o(16,"div",10)(17,"button",11),x("click",function(){return i.exportToPDF()}),y(18,"i",12),l(19," PDF "),a(),o(20,"button",13),x("click",function(){return i.exportToExcel()}),y(21,"i",14),l(22," Excel "),a(),o(23,"button",15),x("click",function(){return i.exportToCSV()}),y(24,"i",16),l(25," CSV "),a()()()(),o(26,"div",17)(27,"div",18)(28,"div",19),y(29,"i",20),a(),o(30,"div",21)(31,"span",22),l(32),a(),o(33,"span",23),l(34,"Total Labor Cost"),a()()(),o(35,"div",24)(36,"div",25),y(37,"i",26),a(),o(38,"div",21)(39,"span",22),l(40),a(),o(41,"span",23),l(42,"Regular Pay"),a()()(),o(43,"div",24)(44,"div",27),y(45,"i",28),a(),o(46,"div",21)(47,"span",22),l(48),a(),o(49,"span",23),l(50,"Overtime Pay"),a()()(),o(51,"div",24)(52,"div",29),y(53,"i",30),a(),o(54,"div",21)(55,"span",22),l(56),a(),o(57,"span",23),l(58,"Employer Contributions"),a()()()(),o(59,"div",31),b(60,Zwe,49,7,"table",32)(61,eEe,4,0,"div",33),a(),b(62,tEe,4,0,"div",34),a(),an()),e&2&&(m("ngIf",i.loading),c(14),M("ngModel",i.selectedRunId),c(),m("ngForOf",i.payrollRuns),c(2),m("disabled",i.laborCostData.length===0),c(3),m("disabled",i.laborCostData.length===0),c(3),m("disabled",i.laborCostData.length===0),c(9),_(i.formatCurrency(i.grandTotals.totalLaborCost)),c(8),_(i.formatCurrency(i.grandTotals.regularPay)),c(8),_(i.formatCurrency(i.grandTotals.overtimePay)),c(8),_(i.formatCurrency(i.grandTotals.employerContributions)),c(4),m("ngIf",i.laborCostData.length>0),c(),m("ngIf",i.laborCostData.length===0),c(),m("ngIf",i.loading))},dependencies:[At,Se,be,Vt,je,We,Ue,Oe,Ee,Rt],styles:[".report-container[_ngcontent-%COMP%]{padding:24px;background:#f8f9fa;min-height:calc(100vh - 60px)}.report-header[_ngcontent-%COMP%]{margin-bottom:24px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;font-size:1.75rem;font-weight:600;margin:0 0 8px;display:flex;align-items:center;gap:12px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.report-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #00000014;margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:280px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;background:#fff;cursor:pointer}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.export-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.btn-export[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.85rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-export[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-export.pdf[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-export.pdf[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}.btn-export.excel[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-export.excel[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-export.csv[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-export.csv[_ngcontent-%COMP%]:hover:not(:disabled){background:#138496}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #00000014;display:flex;align-items:center;gap:16px}.summary-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066)}.summary-card.highlight[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#fff3;color:#fff}.summary-card.highlight[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%], .summary-card.highlight[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{color:#fff}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10px;background:#e0f2f1;color:teal;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.summary-card[_ngcontent-%COMP%]   .card-icon.regular[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.summary-card[_ngcontent-%COMP%]   .card-icon.overtime[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.summary-card[_ngcontent-%COMP%]   .card-icon.employer[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#333}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.report-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:500;font-size:.9rem}.report-table[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   th.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;color:#333}.report-table[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   td.amount-highlight[_ngcontent-%COMP%]{font-weight:600;color:teal}.report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e0f2f1}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none;color:teal}.cost-center-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:#e0f2f1;color:teal;border-radius:4px;font-size:.85rem;font-weight:500}.percentage-bar[_ngcontent-%COMP%]{position:relative;background:#e9ecef;border-radius:4px;height:22px;min-width:80px;overflow:hidden}.percentage-bar[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,teal,#26a69a);border-radius:4px;transition:width .3s ease}.percentage-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;height:100%;font-size:.8rem;font-weight:500;color:#333}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:#fff;border-radius:8px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}"]})};function nEe(n,t){n&1&&(o(0,"div",37)(1,"div",38),y(2,"i",39),o(3,"p"),l(4,"Loading payroll data..."),a(),o(5,"span",40),l(6,"Please wait while we fetch your payroll information"),a()()())}function iEe(n,t){if(n&1&&(o(0,"option",42),l(1),a()),n&2){let e=t.$implicit,i=p(2);m("ngValue",e.id),c(),En(" ",e.payrollRunNumber," (",i.formatDate(e.periodStartDate)," - ",i.formatDate(e.periodEndDate),") ")}}function rEe(n,t){if(n&1){let e=F();o(0,"div",7)(1,"label"),l(2,"Payroll Run"),a(),o(3,"select",8),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRunId,r)||(s.selectedRunId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onRunChange())}),b(4,iEe,2,4,"option",41),a()()}if(n&2){let e=p();c(3),M("ngModel",e.selectedRunId),m("disabled",e.loading),c(),m("ngForOf",e.payrollRuns)}}function oEe(n,t){if(n&1&&(o(0,"option",42),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e)}}function aEe(n,t){if(n&1){let e=F();o(0,"div",7)(1,"label"),l(2,"Year"),a(),o(3,"select",8),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedYear,r)||(s.selectedYear=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.onYearChange())}),b(4,oEe,2,2,"option",41),a()()}if(n&2){let e=p();c(3),M("ngModel",e.selectedYear),m("disabled",e.loading),c(),m("ngForOf",e.years)}}function sEe(n,t){n&1&&(o(0,"div",43),y(1,"i",39),o(2,"p"),l(3,"Loading payroll records..."),a()())}function lEe(n,t){if(n&1){let e=F();o(0,"tr",52),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openDetailsModal(r))}),o(1,"td")(2,"div",53)(3,"span",54),l(4),a()()(),o(5,"td")(6,"span",55),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td",48),l(11),a(),o(12,"td",48),l(13),a(),o(14,"td",56),l(15),a(),o(16,"td",57),l(17),a(),o(18,"td",58),l(19),a(),o(20,"td",59),l(21),a()()}if(n&2){let e=t.$implicit,i=p(3);c(4),_(i.getEmployeeName(e)),c(3),_(i.getEmployeeCode(e)),c(2),_(i.getDepartment(e)),c(2),_(i.formatCurrency(e.basePay||0)),c(2),_(i.formatCurrency(e.overtimePay||0)),c(2),_(i.formatCurrency(e.grossPay||0)),c(2),_(i.formatCurrency(e.totalDeductions||0)),c(2),_(i.formatCurrency(e.totalTaxes||0)),c(2),_(i.formatCurrency(e.netPay||0))}}function cEe(n,t){if(n&1&&(o(0,"table",47)(1,"thead")(2,"tr")(3,"th"),l(4,"Employee"),a(),o(5,"th"),l(6,"Code"),a(),o(7,"th"),l(8,"Department"),a(),o(9,"th",48),l(10,"Base Pay"),a(),o(11,"th",48),l(12,"Overtime"),a(),o(13,"th",48),l(14,"Gross Pay"),a(),o(15,"th",48),l(16,"Deductions"),a(),o(17,"th",48),l(18,"Taxes"),a(),o(19,"th",48),l(20,"Net Pay"),a()()(),o(21,"tbody"),b(22,lEe,22,9,"tr",49),a(),o(23,"tfoot")(24,"tr",50)(25,"td",51)(26,"strong"),l(27),a()(),o(28,"td",48)(29,"strong"),l(30,"-"),a()(),o(31,"td",48)(32,"strong"),l(33,"-"),a()(),o(34,"td",48)(35,"strong"),l(36),a()(),o(37,"td",48)(38,"strong"),l(39),a()(),o(40,"td",48)(41,"strong"),l(42),a()(),o(43,"td",48)(44,"strong"),l(45),a()()()()()),n&2){let e=p(2);c(22),m("ngForOf",e.filteredRecords),c(5),D("Grand Total (",e.filteredRecords.length," employees)"),c(9),_(e.formatCurrency(e.totals.grossPay)),c(3),_(e.formatCurrency(e.totals.totalDeductions)),c(3),_(e.formatCurrency(e.totals.totalTaxes)),c(3),_(e.formatCurrency(e.totals.netPay))}}function dEe(n,t){n&1&&(o(0,"div",60),y(1,"i",2),o(2,"p"),l(3,"No payroll records found for the selected period"),a()())}function pEe(n,t){if(n&1&&(o(0,"div",44),b(1,cEe,46,6,"table",45)(2,dEe,4,0,"div",46),a()),n&2){let e=p();c(),m("ngIf",e.filteredRecords.length>0),c(),m("ngIf",e.filteredRecords.length===0)}}function mEe(n,t){n&1&&(o(0,"div",43),y(1,"i",39),o(2,"p"),l(3,"Loading payroll data..."),a()())}function uEe(n,t){if(n&1){let e=F();o(0,"div",63),x("click",function(r){return g(e),f(r.stopPropagation())}),o(1,"div",64)(2,"h3"),y(3,"i",65),l(4," Payroll Details"),a(),o(5,"button",66),x("click",function(){g(e);let r=p(2);return f(r.closeDetailsModal())}),y(6,"i",67),a()(),o(7,"div",68)(8,"div",69)(9,"h4"),l(10,"Employee Information"),a(),o(11,"div",70)(12,"div",71)(13,"span",72),l(14,"Employee Name:"),a(),o(15,"span",73),l(16),a()(),o(17,"div",71)(18,"span",72),l(19,"Employee Code:"),a(),o(20,"span",73),l(21),a()(),o(22,"div",71)(23,"span",72),l(24,"Department:"),a(),o(25,"span",73),l(26),a()(),o(27,"div",71)(28,"span",72),l(29,"Employee Type:"),a(),o(30,"span",73),l(31),a()()()(),o(32,"div",74)(33,"h4"),y(34,"i",75),l(35," Earnings"),a(),o(36,"div",70)(37,"div",71)(38,"span",72),l(39,"Base Pay:"),a(),o(40,"span",73),l(41),a()(),o(42,"div",71)(43,"span",72),l(44,"Hourly Rate:"),a(),o(45,"span",73),l(46),a()(),o(47,"div",71)(48,"span",72),l(49,"Regular Hours:"),a(),o(50,"span",73),l(51),a()(),o(52,"div",71)(53,"span",72),l(54,"Overtime Hours:"),a(),o(55,"span",73),l(56),a()(),o(57,"div",71)(58,"span",72),l(59,"Overtime Pay:"),a(),o(60,"span",73),l(61),a()(),o(62,"div",71)(63,"span",72),l(64,"Bonuses:"),a(),o(65,"span",73),l(66),a()(),o(67,"div",76)(68,"span",72),l(69,"Gross Salary:"),a(),o(70,"span",73),l(71),a()(),o(72,"div",71)(73,"span",72),l(74,"Reimbursement:"),a(),o(75,"span",73),l(76),a()()()(),o(77,"div",77)(78,"h4"),y(79,"i",78),l(80," Taxes"),a(),o(81,"div",70)(82,"div",71)(83,"span",72),l(84,"Federal Tax:"),a(),o(85,"span",79),l(86),a()(),o(87,"div",71)(88,"span",72),l(89,"State Tax:"),a(),o(90,"span",79),l(91),a()(),o(92,"div",71)(93,"span",72),l(94,"Local Tax:"),a(),o(95,"span",79),l(96),a()(),o(97,"div",71)(98,"span",72),l(99,"Social Security:"),a(),o(100,"span",79),l(101),a()(),o(102,"div",71)(103,"span",72),l(104,"Medicare:"),a(),o(105,"span",79),l(106),a()(),o(107,"div",71)(108,"span",72),l(109,"Disability Tax:"),a(),o(110,"span",79),l(111),a()(),o(112,"div",76)(113,"span",72),l(114,"Total Taxes:"),a(),o(115,"span",79),l(116),a()()()(),o(117,"div",80)(118,"h4"),y(119,"i",31),l(120," Deductions"),a(),o(121,"div",70)(122,"div",71)(123,"span",72),l(124,"Health Insurance:"),a(),o(125,"span",73),l(126),a()(),o(127,"div",71)(128,"span",72),l(129,"Dental Insurance:"),a(),o(130,"span",73),l(131),a()(),o(132,"div",71)(133,"span",72),l(134,"Vision Insurance:"),a(),o(135,"span",73),l(136),a()(),o(137,"div",71)(138,"span",72),l(139,"401(k) Retirement:"),a(),o(140,"span",73),l(141),a()(),o(142,"div",71)(143,"span",72),l(144,"HSA Contribution:"),a(),o(145,"span",73),l(146),a()(),o(147,"div",71)(148,"span",72),l(149,"Pre-Tax Deductions:"),a(),o(150,"span",73),l(151),a()(),o(152,"div",71)(153,"span",72),l(154,"Post-Tax Deductions:"),a(),o(155,"span",73),l(156),a()(),o(157,"div",71)(158,"span",72),l(159,"Loan Deductions:"),a(),o(160,"span",73),l(161),a()(),o(162,"div",71)(163,"span",72),l(164,"Garnishments:"),a(),o(165,"span",73),l(166),a()(),o(167,"div",76)(168,"span",72),l(169,"Total Deductions:"),a(),o(170,"span",73),l(171),a()()()(),o(172,"div",81)(173,"h4"),y(174,"i",82),l(175," Employer Contributions"),a(),o(176,"div",70)(177,"div",71)(178,"span",72),l(179,"Employer SS:"),a(),o(180,"span",73),l(181),a()(),o(182,"div",71)(183,"span",72),l(184,"Employer Medicare:"),a(),o(185,"span",73),l(186),a()(),o(187,"div",71)(188,"span",72),l(189,"Employer Health Insurance:"),a(),o(190,"span",73),l(191),a()(),o(192,"div",71)(193,"span",72),l(194,"Employer 401(k) Match:"),a(),o(195,"span",73),l(196),a()(),o(197,"div",76)(198,"span",72),l(199,"Total Contributions:"),a(),o(200,"span",73),l(201),a()()()(),o(202,"div",83)(203,"h4"),y(204,"i",33),l(205," Net Pay"),a(),o(206,"div",84)(207,"span",85),l(208,"Total Net Pay:"),a(),o(209,"span",86),l(210),a()()(),o(211,"div",87)(212,"button",88),x("click",function(){g(e);let r=p(2);return f(r.closeDetailsModal())}),l(213,"Close"),a()()()()}if(n&2){let e=p(2);c(16),_(e.getEmployeeName(e.selectedRecord)),c(5),_(e.getEmployeeCode(e.selectedRecord)),c(5),_(e.getDepartment(e.selectedRecord)),c(5),_(e.selectedRecord.employeeType||"Full-time"),c(10),_(e.formatCurrency(e.selectedRecord.basePay||0)),c(5),D("",e.formatCurrency(e.selectedRecord.hourlyRate||0),"/hr"),c(5),_(e.selectedRecord.regularHours||0),c(5),_(e.selectedRecord.overtimeHours||0),c(5),_(e.formatCurrency(e.selectedRecord.overtimePay||0)),c(5),_(e.formatCurrency(e.selectedRecord.bonuses||0)),c(5),_(e.formatCurrency(e.selectedRecord.grossPay||0)),c(5),_(e.formatCurrency(e.selectedRecord.reimbursements||0)),c(10),_(e.formatCurrency(e.selectedRecord.federalTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.stateTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.localTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.socialSecurityTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.medicareTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.disabilityTax||0)),c(5),_(e.formatCurrency(e.selectedRecord.totalTaxes||0)),c(10),_(e.formatCurrency(e.selectedRecord.healthInsurance||0)),c(5),_(e.formatCurrency(e.selectedRecord.dentalInsurance||0)),c(5),_(e.formatCurrency(e.selectedRecord.visionInsurance||0)),c(5),_(e.formatCurrency(e.selectedRecord.retirement401k||0)),c(5),_(e.formatCurrency(e.selectedRecord.hsaContribution||0)),c(5),_(e.formatCurrency(e.selectedRecord.preTaxDeductions||0)),c(5),_(e.formatCurrency(e.selectedRecord.postTaxDeductions||0)),c(5),_(e.formatCurrency(e.selectedRecord.loanDeductions||0)),c(5),_(e.formatCurrency(e.selectedRecord.garnishments||0)),c(5),_(e.formatCurrency(e.selectedRecord.totalDeductions||0)),c(10),_(e.formatCurrency(e.selectedRecord.employerSocialSecurity||0)),c(5),_(e.formatCurrency(e.selectedRecord.employerMedicare||0)),c(5),_(e.formatCurrency(e.selectedRecord.employerHealthContribution||0)),c(5),_(e.formatCurrency(e.selectedRecord.employer401kMatch||0)),c(5),_(e.formatCurrency(e.selectedRecord.totalEmployerContributions||0)),c(9),_(e.formatCurrency(e.selectedRecord.netPay||0))}}function gEe(n,t){if(n&1){let e=F();o(0,"div",61),x("click",function(){g(e);let r=p();return f(r.closeDetailsModal())}),b(1,uEe,214,35,"div",62),a()}if(n&2){let e=p();c(),m("ngIf",e.selectedRecord)}}var W2=class n{constructor(t,e){this.payrollService=t;this.exportService=e;let i=new Date().getFullYear();for(let r=i;r>=i-5;r--)this.years.push(r)}payrollRuns=[];payrollRecords=[];filteredRecords=[];selectedRunId=null;reportType="monthly";selectedYear=new Date().getFullYear();searchTerm="";years=[];loading=!1;isFirstLoad=!0;refreshing=!1;dataReady=!1;showDetailsModal=!1;selectedRecord=null;totals={grossPay:0,totalDeductions:0,totalTaxes:0,netPay:0,employerContributions:0};ngOnInit(){this.loadPayrollRuns()}loadPayrollRuns(){this.isFirstLoad?this.loading=!1:this.refreshing=!0,this.payrollService.getPayrollRuns().subscribe({next:t=>{this.payrollRuns=t.filter(e=>e.status==="PROCESSED"||e.status==="APPROVED"),this.reportType==="monthly"&&this.payrollRuns.length>0?(this.selectedRunId=this.payrollRuns[0].id,this.loadPayrollRecords()):this.reportType==="annual"?this.loadAnnualData():this.completeLoading()},error:t=>{console.error("Error loading payroll runs:",t),this.completeLoading()}})}loadPayrollRecords(){this.selectedRunId&&(this.isFirstLoad&&(this.loading=!1),this.payrollService.getPayrollRecordsByRun(this.selectedRunId).subscribe({next:t=>{this.payrollRecords=t,this.applyFilters(),this.completeLoading()},error:t=>{console.error("Error loading payroll records:",t),this.completeLoading()}}))}loadAnnualData(){let t=this.payrollRuns.filter(r=>new Date(r.periodStartDate).getFullYear()===this.selectedYear);if(t.length===0){this.payrollRecords=[],this.filteredRecords=[],this.calculateTotals(),this.completeLoading();return}this.isFirstLoad&&(this.loading=!1);let e=[],i=0;t.forEach(r=>{this.payrollService.getPayrollRecordsByRun(r.id).subscribe({next:s=>{e.push(...s),i++,i===t.length&&(this.payrollRecords=this.aggregateAnnualRecords(e),this.applyFilters(),this.completeLoading())},error:s=>{console.error("Error loading payroll records:",s),i++,i===t.length&&(this.payrollRecords=this.aggregateAnnualRecords(e),this.applyFilters(),this.completeLoading())}})})}aggregateAnnualRecords(t){let e=new Map;return t.forEach(i=>{let r=i.employee?.id;if(!r)return;e.has(r)||e.set(r,Tt(me({},i),{grossPay:0,totalDeductions:0,totalTaxes:0,netPay:0,totalEmployerContributions:0,basePay:0,overtimePay:0,bonuses:0}));let s=e.get(r);s.grossPay=(s.grossPay||0)+(i.grossPay||0),s.totalDeductions=(s.totalDeductions||0)+(i.totalDeductions||0),s.totalTaxes=(s.totalTaxes||0)+(i.totalTaxes||0),s.netPay=(s.netPay||0)+(i.netPay||0),s.totalEmployerContributions=(s.totalEmployerContributions||0)+(i.totalEmployerContributions||0),s.basePay=(s.basePay||0)+(i.basePay||0),s.overtimePay=(s.overtimePay||0)+(i.overtimePay||0),s.bonuses=(s.bonuses||0)+(i.bonuses||0)}),Array.from(e.values())}applyFilters(){this.filteredRecords=this.payrollRecords.filter(t=>{if(!this.searchTerm)return!0;let e=this.searchTerm.toLowerCase(),i=`${t.employee?.firstName||""} ${t.employee?.lastName||""}`.toLowerCase(),r=(t.employee?.employeeCode||"").toLowerCase();return i.includes(e)||r.includes(e)}),this.calculateTotals()}calculateTotals(){this.totals={grossPay:this.filteredRecords.reduce((t,e)=>t+(e.grossPay||0),0),totalDeductions:this.filteredRecords.reduce((t,e)=>t+(e.totalDeductions||0),0),totalTaxes:this.filteredRecords.reduce((t,e)=>t+(e.totalTaxes||0),0),netPay:this.filteredRecords.reduce((t,e)=>t+(e.netPay||0),0),employerContributions:this.filteredRecords.reduce((t,e)=>t+(e.totalEmployerContributions||0),0)}}onReportTypeChange(){this.reportType==="monthly"?this.payrollRuns.length>0&&(this.selectedRunId=this.payrollRuns[0].id,this.loadPayrollRecords()):this.loadAnnualData()}onRunChange(){this.loadPayrollRecords()}onYearChange(){this.loadAnnualData()}getEmployeeName(t){return`${t.employee?.firstName||""} ${t.employee?.lastName||""}`.trim()||"Unknown"}getEmployeeCode(t){return t.employee?.employeeCode||"N/A"}getDepartment(t){return t.employee?.department?.name||"N/A"}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString():""}getReportTitle(){if(this.reportType==="annual")return`Annual Payroll Register - ${this.selectedYear}`;let t=this.payrollRuns.find(e=>e.id===this.selectedRunId);return t?`Monthly Payroll Register - ${t.payrollRunNumber}`:"Payroll Register"}exportToPDF(){let t=["Employee","Code","Department","Gross Pay","Deductions","Taxes","Net Pay","Employer Cost"],e=this.filteredRecords.map(i=>[this.getEmployeeName(i),this.getEmployeeCode(i),this.getDepartment(i),this.formatCurrency(i.grossPay||0),this.formatCurrency(i.totalDeductions||0),this.formatCurrency(i.totalTaxes||0),this.formatCurrency(i.netPay||0),this.formatCurrency(i.totalEmployerContributions||0)]);this.exportService.exportToPDF(this.getReportTitle(),t,e,`payroll_register_${this.reportType}`)}exportToExcel(){let t=this.filteredRecords.map(e=>({"Employee Name":this.getEmployeeName(e),"Employee Code":this.getEmployeeCode(e),Department:this.getDepartment(e),"Base Pay":e.basePay||0,"Overtime Pay":e.overtimePay||0,Bonuses:e.bonuses||0,"Gross Pay":e.grossPay||0,"Pre-Tax Deductions":e.preTaxDeductions||0,"Federal Tax":e.federalTax||0,"State Tax":e.stateTax||0,"Social Security":e.socialSecurityTax||0,Medicare:e.medicareTax||0,"Total Taxes":e.totalTaxes||0,"Post-Tax Deductions":e.postTaxDeductions||0,"Total Deductions":e.totalDeductions||0,"Net Pay":e.netPay||0,"Employer SS":e.employerSocialSecurity||0,"Employer Medicare":e.employerMedicare||0,"Employer Health":e.employerHealthContribution||0,"Employer 401k":e.employer401kMatch||0,"Total Employer Contributions":e.totalEmployerContributions||0}));this.exportService.exportToExcel(t,`payroll_register_${this.reportType}`)}exportToCSV(){let t=["Employee Name","Employee Code","Department","Gross Pay","Total Deductions","Total Taxes","Net Pay","Employer Contributions"],e=this.filteredRecords.map(i=>[this.getEmployeeName(i),this.getEmployeeCode(i),this.getDepartment(i),i.grossPay||0,i.totalDeductions||0,i.totalTaxes||0,i.netPay||0,i.totalEmployerContributions||0]);this.exportService.exportToCSV(t,e,`payroll_register_${this.reportType}`)}openDetailsModal(t){this.selectedRecord=t,this.showDetailsModal=!0}closeDetailsModal(){this.showDetailsModal=!1,this.selectedRecord=null}completeLoading(){this.loading=!1,this.refreshing=!1,this.dataReady=!0,this.isFirstLoad=!1}static \u0275fac=function(e){return new(e||n)(V(vi),V(y0))};static \u0275cmp=_e({type:n,selectors:[["app-payroll-register-report"]],decls:72,vars:18,consts:[[1,"report-container"],[1,"report-header"],[1,"fas","fa-clipboard-list"],[1,"subtitle"],["class","loading-container",4,"ngIf"],[1,"filter-section"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","change","ngModel","disabled"],["value","monthly"],["value","annual"],["class","filter-group",4,"ngIf"],[1,"filter-group","search"],["type","text","placeholder","Search by name or code...",3,"ngModelChange","input","ngModel","disabled"],[1,"export-buttons"],[1,"btn-export","pdf",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn-export","excel",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn-export","csv",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon"],[1,"fas","fa-users"],[1,"card-content"],[1,"card-value"],[1,"card-label"],[1,"card-icon","gross"],[1,"fas","fa-dollar-sign"],[1,"card-icon","deductions"],[1,"fas","fa-minus-circle"],[1,"card-icon","net"],[1,"fas","fa-wallet"],["class","loading-state",4,"ngIf"],["class","table-container",4,"ngIf"],["class","payroll-modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-subtext"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"loading-state"],[1,"table-container"],["class","report-table",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"report-table"],[1,"text-right"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3"],[1,"clickable-row",3,"click"],[1,"employee-info"],[1,"name"],[1,"employee-code"],[1,"text-right","amount-gross"],[1,"text-right","amount-deduction"],[1,"text-right","amount-tax"],[1,"text-right","amount-net"],[1,"empty-state"],[1,"payroll-modal-overlay",3,"click"],["class","payroll-modal",3,"click",4,"ngIf"],[1,"payroll-modal",3,"click"],[1,"modal-header"],[1,"fas","fa-receipt"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"details-section"],[1,"details-grid"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"details-section","earnings"],[1,"fas","fa-plus-circle"],[1,"detail-row","highlight"],[1,"details-section","taxes"],[1,"fas","fa-percent"],[1,"value","tax"],[1,"details-section","deductions"],[1,"details-section","contributions"],[1,"fas","fa-building"],[1,"details-section","net-pay"],[1,"net-pay-display"],[1,"net-pay-label"],[1,"net-pay-amount"],[1,"modal-footer"],[1,"btn-close",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),y(3,"i",2),l(4," Payroll Register"),a(),o(5,"p",3),l(6,"Monthly or annual payroll register with detailed employee records"),a()(),b(7,nEe,7,0,"div",4),on(8),o(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),l(13,"Report Type"),a(),o(14,"select",8),S("ngModelChange",function(s){return P(i.reportType,s)||(i.reportType=s),s}),x("change",function(){return i.onReportTypeChange()}),o(15,"option",9),l(16,"Monthly"),a(),o(17,"option",10),l(18,"Annual"),a()()(),b(19,rEe,5,3,"div",11)(20,aEe,5,3,"div",11),o(21,"div",12)(22,"label"),l(23,"Search"),a(),o(24,"input",13),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("input",function(){return i.applyFilters()}),a()(),o(25,"div",14)(26,"button",15),x("click",function(){return i.exportToPDF()}),y(27,"i",16),l(28," PDF "),a(),o(29,"button",17),x("click",function(){return i.exportToExcel()}),y(30,"i",18),l(31," Excel "),a(),o(32,"button",19),x("click",function(){return i.exportToCSV()}),y(33,"i",20),l(34," CSV "),a()()()(),o(35,"div",21)(36,"div",22)(37,"div",23),y(38,"i",24),a(),o(39,"div",25)(40,"span",26),l(41),a(),o(42,"span",27),l(43,"Employees"),a()()(),o(44,"div",22)(45,"div",28),y(46,"i",29),a(),o(47,"div",25)(48,"span",26),l(49),a(),o(50,"span",27),l(51,"Total Gross Pay"),a()()(),o(52,"div",22)(53,"div",30),y(54,"i",31),a(),o(55,"div",25)(56,"span",26),l(57),a(),o(58,"span",27),l(59,"Total Deductions"),a()()(),o(60,"div",22)(61,"div",32),y(62,"i",33),a(),o(63,"div",25)(64,"span",26),l(65),a(),o(66,"span",27),l(67,"Total Net Pay"),a()()()(),an(),b(68,sEe,4,0,"div",34)(69,pEe,3,2,"div",35)(70,mEe,4,0,"div",34),a(),b(71,gEe,2,1,"div",36)),e&2&&(c(7),m("ngIf",i.loading),c(7),M("ngModel",i.reportType),m("disabled",i.loading),c(5),m("ngIf",i.reportType==="monthly"),c(),m("ngIf",i.reportType==="annual"),c(4),M("ngModel",i.searchTerm),m("disabled",i.loading),c(2),m("disabled",i.filteredRecords.length===0||i.loading),c(3),m("disabled",i.filteredRecords.length===0||i.loading),c(3),m("disabled",i.filteredRecords.length===0||i.loading),c(9),_(i.filteredRecords.length),c(8),_(i.formatCurrency(i.totals.grossPay)),c(8),_(i.formatCurrency(i.totals.totalDeductions)),c(8),_(i.formatCurrency(i.totals.netPay)),c(3),m("ngIf",i.loading&&i.payrollRuns.length>0),c(),m("ngIf",!i.loading&&i.payrollRuns.length>0),c(),m("ngIf",i.loading),c(),m("ngIf",i.showDetailsModal))},dependencies:[At,Se,be,Vt,je,We,Ie,Ue,Oe,Ee,Rt],styles:[".report-container[_ngcontent-%COMP%]{padding:24px;background:#f8f9fa;min-height:calc(100vh - 60px)}.report-header[_ngcontent-%COMP%]{margin-bottom:24px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;font-size:1.75rem;font-weight:600;margin:0 0 8px;display:flex;align-items:center;gap:12px}.report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.report-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #00000014;margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:150px}.filter-group.search[_ngcontent-%COMP%]{min-width:200px}.filter-group.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem}.filter-group.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;background:#fff;cursor:pointer}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.export-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.btn-export[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.85rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-export[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-export.pdf[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-export.pdf[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}.btn-export.excel[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-export.excel[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-export.csv[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-export.csv[_ngcontent-%COMP%]:hover:not(:disabled){background:#138496}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #00000014;display:flex;align-items:center;gap:16px}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10px;background:#e0f2f1;color:teal;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.summary-card[_ngcontent-%COMP%]   .card-icon.gross[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.summary-card[_ngcontent-%COMP%]   .card-icon.deductions[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.summary-card[_ngcontent-%COMP%]   .card-icon.net[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#333}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow-x:auto}.report-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:900px}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;text-align:left;border-bottom:1px solid #eee}.report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:500;font-size:.85rem;white-space:nowrap}.report-table[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   th.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;color:#333}.report-table[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.report-table[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.report-table[_ngcontent-%COMP%]   td.amount-gross[_ngcontent-%COMP%]{font-weight:500;color:#2e7d32}.report-table[_ngcontent-%COMP%]   td.amount-deduction[_ngcontent-%COMP%]{color:#c62828}.report-table[_ngcontent-%COMP%]   td.amount-tax[_ngcontent-%COMP%]{color:#e65100}.report-table[_ngcontent-%COMP%]   td.amount-net[_ngcontent-%COMP%]{font-weight:600;color:#1565c0}.report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e0f2f1}.report-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none;color:teal}.employee-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.employee-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.employee-code[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;background:#e0f2f1;color:teal;border-radius:4px;font-size:.8rem;font-weight:500}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:#fff;border-radius:8px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.clickable-row[_ngcontent-%COMP%]:hover{background-color:#f0f8f8}.payroll-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.payroll-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:900px;max-height:90vh;overflow-y:auto;width:100%;box-shadow:0 10px 40px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:2px solid #f0f0f0;background:linear-gradient(135deg,teal,#066);color:#fff;position:sticky;top:0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;display:flex;align-items:center;gap:12px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:.8}.modal-body[_ngcontent-%COMP%]{padding:24px}.details-section[_ngcontent-%COMP%]{margin-bottom:28px}.details-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:teal;font-size:1.1rem;font-weight:600;margin:0 0 16px;display:flex;align-items:center;gap:8px;border-bottom:2px solid #e0e0e0;padding-bottom:8px}.details-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.details-section.earnings[_ngcontent-%COMP%]{background:#f0fffe;padding:16px;border-radius:8px;border-left:4px solid #28a745}.details-section.taxes[_ngcontent-%COMP%]{background:#fff5f5;padding:16px;border-radius:8px;border-left:4px solid #dc3545}.details-section.deductions[_ngcontent-%COMP%]{background:#f5f5ff;padding:16px;border-radius:8px;border-left:4px solid #0066cc}.details-section.contributions[_ngcontent-%COMP%]{background:#fff9f0;padding:16px;border-radius:8px;border-left:4px solid #ff9800}.details-section.net-pay[_ngcontent-%COMP%]{background:linear-gradient(135deg,teal,#066);padding:20px;border-radius:8px;color:#fff}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#fff;border-radius:6px;border:1px solid #e0e0e0}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555;font-size:.9rem}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.95rem}.detail-row[_ngcontent-%COMP%]   .value.tax[_ngcontent-%COMP%]{color:#dc3545}.detail-row.highlight[_ngcontent-%COMP%]{background:#f9f9f9;border:2px solid #008080}.detail-row.highlight[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:teal;font-weight:600}.detail-row.highlight[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:teal;font-weight:700;font-size:1rem}.net-pay-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;background:#ffffff1a;border-radius:8px;border:2px solid rgba(255,255,255,.3)}.net-pay-display[_ngcontent-%COMP%]   .net-pay-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.net-pay-display[_ngcontent-%COMP%]   .net-pay-amount[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;letter-spacing:.5px}.modal-footer[_ngcontent-%COMP%]{padding:20px 24px;border-top:2px solid #f0f0f0;background:#f9f9f9;display:flex;justify-content:flex-end;gap:12px;position:sticky;bottom:0}.modal-footer[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:10px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;transition:background .2s}.modal-footer[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#066}@media(max-width:768px){.payroll-modal[_ngcontent-%COMP%]{max-height:95vh;max-width:95vw}.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.net-pay-display[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.net-pay-display[_ngcontent-%COMP%]   .net-pay-amount[_ngcontent-%COMP%]{font-size:1.5rem}}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;width:100%}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:teal;display:block;margin-bottom:20px;animation:_ngcontent-%COMP%_spinAnimation 1s linear infinite}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;color:#333;margin:15px 0;font-weight:500}.loading-spinner[_ngcontent-%COMP%]   .loading-subtext[_ngcontent-%COMP%]{font-size:.9rem;color:#999;display:block}@keyframes _ngcontent-%COMP%_spinAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:12px;padding:40px 20px;background:#f9f9f9;border-radius:8px;margin:20px 0}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:teal;animation:_ngcontent-%COMP%_spinAnimation 1s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}select[disabled][_ngcontent-%COMP%], input[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}"]})};var FL=[{code:"QUICKBOOKS",name:"QuickBooks",description:"Accounting system integration",category:"Accounting"},{code:"SAP",name:"SAP",description:"Enterprise resource planning integration",category:"Accounting"},{code:"ADP",name:"ADP",description:"Payroll provider integration",category:"Payroll"},{code:"JIRA",name:"Jira",description:"Project management tool integration",category:"Project"},{code:"SMTP",name:"SMTP",description:"Email notification gateway",category:"Notification"},{code:"SMS",name:"SMS",description:"SMS notification gateway",category:"Notification"}],NL=[{value:"HOURLY",label:"Every Hour"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"MONTHLY",label:"Monthly"},{value:"MANUAL",label:"Manual Only"}],LL=[{value:"SANDBOX",label:"Sandbox"},{value:"PRODUCTION",label:"Production"}];var z2=class n{constructor(t){this.http=t}apiUrl="/api/integrations";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}getByType(t){return this.http.get(`${this.apiUrl}/type/${t}`)}getActive(){return this.http.get(`${this.apiUrl}/active`)}getTypes(){return this.http.get(`${this.apiUrl}/types`)}getStatus(){return this.http.get(`${this.apiUrl}/status`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}toggleActive(t){return this.http.post(`${this.apiUrl}/${t}/toggle-active`,{})}testConnection(t){return this.http.post(`${this.apiUrl}/${t}/test`,{})}triggerSync(t,e="FULL",i){let r=`${this.apiUrl}/${t}/sync?syncType=${e}`;return i&&(r+=`&triggeredBy=${i}`),this.http.post(r,{})}getSyncLogs(t){return this.http.get(`${this.apiUrl}/${t}/sync-logs`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function hEe(n,t){if(n&1&&(o(0,"div",34)(1,"span",31),l(2,"Last Sync:"),a(),o(3,"span",32),l(4),a()()),n&2){let e=p(2).$implicit;c(3),ie("success",e.lastSyncStatus==="SUCCESS")("failed",e.lastSyncStatus==="FAILED"),c(),D(" ",e.lastSyncStatus," ")}}function _Ee(n,t){if(n&1&&(o(0,"div",29)(1,"div",30)(2,"span",31),l(3,"Sync:"),a(),o(4,"span",32),l(5),a()(),b(6,hEe,5,5,"div",33),a()),n&2){let e=p().$implicit;c(5),_(e.syncFrequency),c(),m("ngIf",e.lastSyncAt)}}function vEe(n,t){if(n&1&&(o(0,"div",35),l(1),a()),n&2){let e=p().$implicit;c(),D(" ",e.environment," ")}}function xEe(n,t){if(n&1){let e=F();o(0,"button",24),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.triggerSync(r.id))}),y(1,"i",36),l(2," Sync "),a()}if(n&2){let e=p(3);m("disabled",e.syncingData)}}function yEe(n,t){if(n&1){let e=F();o(0,"div",10)(1,"div",11)(2,"div",12),y(3,"i",13),a(),o(4,"div",14)(5,"h3"),l(6),a(),o(7,"span",15),l(8),a()(),o(9,"div",16),l(10),a()(),o(11,"div",17)(12,"p",18),l(13),a(),b(14,_Ee,7,2,"div",19)(15,vEe,2,1,"div",20),a(),o(16,"div",21)(17,"button",22),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openEditModal(r))}),y(18,"i",23),l(19," Edit "),a(),o(20,"button",24),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.testConnection(r.id))}),y(21,"i",25),l(22," Test "),a(),b(23,xEe,3,1,"button",26),o(24,"button",22),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.toggleActive(r.id))}),y(25,"i",13),a(),o(26,"button",27),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteIntegration(r.id))}),y(27,"i",28),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),m("ngClass",i.getTypeIcon(e.integrationType)),c(3),_(e.name),c(2),_(i.getIntegrationTypeName(e.integrationType)),c(),ie("active",e.active)("inactive",!e.active),c(),D(" ",e.active?"Active":"Inactive"," "),c(3),_(e.description||"No description provided"),c(),m("ngIf",e.syncEnabled),c(),m("ngIf",e.environment),c(5),m("disabled",i.testingConnection),c(3),m("ngIf",e.syncEnabled),c(2),m("ngClass",e.active?"fa-toggle-on":"fa-toggle-off")}}function CEe(n,t){if(n&1&&(o(0,"div",8),b(1,yEe,28,14,"div",9),a()),n&2){let e=p();c(),m("ngForOf",e.integrations)}}function bEe(n,t){if(n&1){let e=F();o(0,"div",37),y(1,"i",38),o(2,"h3"),l(3,"No Integrations Configured"),a(),o(4,"p"),l(5,"Connect your ERP to external systems like QuickBooks, SAP, ADP, and more."),a(),o(6,"button",2),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(7,"Add Your First Integration"),a()()}}function MEe(n,t){n&1&&(o(0,"div",39),y(1,"i",40),o(2,"p"),l(3,"Loading integrations..."),a()())}function SEe(n,t){if(n&1&&(o(0,"option",60),l(1),a()),n&2){let e=t.$implicit;m("value",e.code),c(),Ge(" ",e.name," - ",e.description," ")}}function PEe(n,t){if(n&1&&(o(0,"option",60),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function wEe(n,t){if(n&1){let e=F();o(0,"div",47)(1,"label"),l(2,"Environment"),a(),o(3,"select",61),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.environment,r)||(s.formData.environment=r),f(r)}),o(4,"option",49),l(5,"Select Environment"),a(),b(6,PEe,2,2,"option",50),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.formData.environment),c(3),m("ngForOf",e.environments)}}function EEe(n,t){if(n&1){let e=F();o(0,"div",47)(1,"label"),l(2,"Company ID"),a(),o(3,"input",64),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.formData.companyId,r)||(s.formData.companyId=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.formData.companyId)}}function OEe(n,t){if(n&1){let e=F();o(0,"div",55)(1,"h4"),l(2,"API Configuration"),a(),o(3,"div",47)(4,"label"),l(5,"API URL"),a(),o(6,"input",62),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.apiUrl,r)||(s.formData.apiUrl=r),f(r)}),a()(),o(7,"div",63)(8,"div",47)(9,"label"),l(10,"Client ID"),a(),o(11,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.clientId,r)||(s.formData.clientId=r),f(r)}),a()(),o(12,"div",47)(13,"label"),l(14,"Client Secret"),a(),o(15,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.clientSecret,r)||(s.formData.clientSecret=r),f(r)}),a()()(),b(16,EEe,4,1,"div",53),a()}if(n&2){let e=p(2);c(6),M("ngModel",e.formData.apiUrl),c(5),M("ngModel",e.formData.clientId),c(4),M("ngModel",e.formData.clientSecret),c(),m("ngIf",e.isAccountingType())}}function TEe(n,t){if(n&1){let e=F();o(0,"div",55)(1,"h4"),l(2,"SMTP Configuration"),a(),o(3,"div",63)(4,"div",47)(5,"label"),l(6,"SMTP Host"),a(),o(7,"input",66),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smtpHost,r)||(s.formData.smtpHost=r),f(r)}),a()(),o(8,"div",47)(9,"label"),l(10,"SMTP Port"),a(),o(11,"input",67),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smtpPort,r)||(s.formData.smtpPort=r),f(r)}),a()()(),o(12,"div",47)(13,"label"),l(14,"Security"),a(),o(15,"select",61),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smtpSecurity,r)||(s.formData.smtpSecurity=r),f(r)}),o(16,"option",68),l(17,"TLS"),a(),o(18,"option",69),l(19,"SSL"),a(),o(20,"option",70),l(21,"None"),a()()(),o(22,"div",63)(23,"div",47)(24,"label"),l(25,"Username"),a(),o(26,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.username,r)||(s.formData.username=r),f(r)}),a()(),o(27,"div",47)(28,"label"),l(29,"Password"),a(),o(30,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.password,r)||(s.formData.password=r),f(r)}),a()()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.smtpHost),c(4),M("ngModel",e.formData.smtpPort),c(4),M("ngModel",e.formData.smtpSecurity),c(11),M("ngModel",e.formData.username),c(4),M("ngModel",e.formData.password)}}function kEe(n,t){if(n&1){let e=F();o(0,"div",55)(1,"h4"),l(2,"SMS Configuration"),a(),o(3,"div",47)(4,"label"),l(5,"SMS Provider"),a(),o(6,"select",61),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smsProvider,r)||(s.formData.smsProvider=r),f(r)}),o(7,"option",71),l(8,"Twilio"),a(),o(9,"option",72),l(10,"Vonage/Nexmo"),a(),o(11,"option",73),l(12,"AWS SNS"),a()()(),o(13,"div",63)(14,"div",47)(15,"label"),l(16,"Account SID"),a(),o(17,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smsAccountSid,r)||(s.formData.smsAccountSid=r),f(r)}),a()(),o(18,"div",47)(19,"label"),l(20,"Auth Token"),a(),o(21,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smsAuthToken,r)||(s.formData.smsAuthToken=r),f(r)}),a()()(),o(22,"div",47)(23,"label"),l(24,"From Number"),a(),o(25,"input",74),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.smsFromNumber,r)||(s.formData.smsFromNumber=r),f(r)}),a()()()}if(n&2){let e=p(2);c(6),M("ngModel",e.formData.smsProvider),c(11),M("ngModel",e.formData.smsAccountSid),c(4),M("ngModel",e.formData.smsAuthToken),c(4),M("ngModel",e.formData.smsFromNumber)}}function IEe(n,t){if(n&1&&(o(0,"option",60),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function DEe(n,t){if(n&1){let e=F();o(0,"div",47)(1,"label"),l(2,"Sync Frequency"),a(),o(3,"select",61),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.syncFrequency,r)||(s.formData.syncFrequency=r),f(r)}),b(4,IEe,2,2,"option",50),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.formData.syncFrequency),c(),m("ngForOf",e.syncFrequencies)}}function AEe(n,t){if(n&1){let e=F();o(0,"div",41)(1,"div",42),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",43)(3,"h3"),l(4),a(),o(5,"button",44),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",45),a()(),o(7,"div",46)(8,"div",47)(9,"label"),l(10,"Integration Type *"),a(),o(11,"select",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.integrationType,r)||(s.formData.integrationType=r),f(r)}),o(12,"option",49),l(13,"Select Type"),a(),b(14,SEe,2,3,"option",50),a()(),o(15,"div",47)(16,"label"),l(17,"Name *"),a(),o(18,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()(),o(19,"div",47)(20,"label"),l(21,"Description"),a(),o(22,"textarea",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.description,r)||(s.formData.description=r),f(r)}),a()(),b(23,wEe,7,2,"div",53)(24,OEe,17,4,"div",54)(25,TEe,31,5,"div",54)(26,kEe,26,4,"div",54),o(27,"div",55)(28,"h4"),l(29,"Sync Settings"),a(),o(30,"div",56)(31,"label")(32,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.syncEnabled,r)||(s.formData.syncEnabled=r),f(r)}),a(),l(33," Enable Automatic Sync "),a()(),b(34,DEe,5,2,"div",53),a(),o(35,"div",56)(36,"label")(37,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.active,r)||(s.formData.active=r),f(r)}),a(),l(38," Active "),a()()(),o(39,"div",58)(40,"button",59),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(41,"Cancel"),a(),o(42,"button",2),x("click",function(){g(e);let r=p();return f(r.saveIntegration())}),l(43),a()()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Integration":"Add New Integration"),c(7),M("ngModel",e.formData.integrationType),m("disabled",e.isEditing),c(3),m("ngForOf",e.integrationTypes),c(4),M("ngModel",e.formData.name),c(4),M("ngModel",e.formData.description),c(),m("ngIf",e.showTypeSpecificFields(e.formData.integrationType||"")),c(),m("ngIf",e.isAccountingType()||e.isPayrollType()||e.isProjectType()),c(),m("ngIf",e.isSmtpType()),c(),m("ngIf",e.isSmsType()),c(6),M("ngModel",e.formData.syncEnabled),c(2),m("ngIf",e.formData.syncEnabled),c(3),M("ngModel",e.formData.active),c(6),D(" ",e.isEditing?"Update":"Create"," Integration ")}}var q2=class n{constructor(t){this.integrationService=t}integrations=[];integrationTypes=FL;syncFrequencies=NL;environments=LL;showModal=!1;isEditing=!1;selectedIntegration=null;formData={};loading=!1;testingConnection=!1;syncingData=!1;testResult=null;ngOnInit(){this.loadIntegrations()}loadIntegrations(){this.loading=!0,this.integrationService.getAll().subscribe({next:t=>{this.integrations=t,this.loading=!1},error:t=>{console.error("Error loading integrations:",t),this.loading=!1}})}openCreateModal(){this.isEditing=!1,this.formData={integrationType:"",name:"",active:!0,syncEnabled:!1},this.testResult=null,this.showModal=!0}openEditModal(t){this.isEditing=!0,this.selectedIntegration=t,this.formData=me({},t),this.testResult=null,this.showModal=!0}closeModal(){this.showModal=!1,this.selectedIntegration=null,this.formData={}}saveIntegration(){this.isEditing&&this.selectedIntegration?.id?this.integrationService.update(this.selectedIntegration.id,this.formData).subscribe({next:()=>{this.loadIntegrations(),this.closeModal()},error:t=>console.error("Error updating integration:",t)}):this.integrationService.create(this.formData).subscribe({next:()=>{this.loadIntegrations(),this.closeModal()},error:t=>console.error("Error creating integration:",t)})}deleteIntegration(t){confirm("Are you sure you want to delete this integration?")&&this.integrationService.delete(t).subscribe({next:()=>this.loadIntegrations(),error:e=>console.error("Error deleting integration:",e)})}toggleActive(t){this.integrationService.toggleActive(t).subscribe({next:()=>this.loadIntegrations(),error:e=>console.error("Error toggling integration:",e)})}testConnection(t){this.testingConnection=!0,this.integrationService.testConnection(t).subscribe({next:e=>{this.testResult=e,this.testingConnection=!1,alert(e.success?"Connection successful!":"Connection failed: "+e.message)},error:e=>{console.error("Error testing connection:",e),this.testingConnection=!1,alert("Connection test failed")}})}triggerSync(t){this.syncingData=!0,this.integrationService.triggerSync(t,"FULL").subscribe({next:e=>{this.syncingData=!1,alert(`Sync ${e.status==="SUCCESS"?"completed successfully":"failed"}`),this.loadIntegrations()},error:e=>{console.error("Error triggering sync:",e),this.syncingData=!1,alert("Sync failed")}})}getIntegrationTypeName(t){let e=this.integrationTypes.find(i=>i.code===t);return e?e.name:t}getTypeIcon(t){switch(t){case"QUICKBOOKS":return"fa-calculator";case"SAP":return"fa-cubes";case"ADP":return"fa-users";case"JIRA":return"fa-tasks";case"SMTP":return"fa-envelope";case"SMS":return"fa-comment-sms";default:return"fa-plug"}}showTypeSpecificFields(t){return!!t}isAccountingType(){return["QUICKBOOKS","SAP"].includes(this.formData.integrationType||"")}isPayrollType(){return this.formData.integrationType==="ADP"}isProjectType(){return this.formData.integrationType==="JIRA"}isSmtpType(){return this.formData.integrationType==="SMTP"}isSmsType(){return this.formData.integrationType==="SMS"}static \u0275fac=function(e){return new(e||n)(V(z2))};static \u0275cmp=_e({type:n,selectors:[["app-integrations"]],decls:11,vars:4,consts:[[1,"integrations-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],["class","integration-cards",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"integration-cards"],["class","integration-card",4,"ngFor","ngForOf"],[1,"integration-card"],[1,"card-header"],[1,"integration-icon"],[1,"fas",3,"ngClass"],[1,"integration-info"],[1,"integration-type"],[1,"status-badge"],[1,"card-body"],[1,"description"],["class","sync-info",4,"ngIf"],["class","environment-badge",4,"ngIf"],[1,"card-actions"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"fas","fa-plug"],["class","btn btn-sm btn-outline",3,"disabled","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"sync-info"],[1,"sync-status"],[1,"label"],[1,"value"],["class","last-sync",4,"ngIf"],[1,"last-sync"],[1,"environment-badge"],[1,"fas","fa-sync"],[1,"empty-state"],[1,"fas","fa-plug","fa-3x"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin","fa-2x"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Integration name",3,"ngModelChange","ngModel"],["rows","2","placeholder","Description",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"form-section"],[1,"form-group","checkbox-group"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[3,"ngModelChange","ngModel"],["type","text","placeholder","https://api.example.com",3,"ngModelChange","ngModel"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],["type","text","placeholder","smtp.example.com",3,"ngModelChange","ngModel"],["type","number","placeholder","587",3,"ngModelChange","ngModel"],["value","TLS"],["value","SSL"],["value","NONE"],["value","TWILIO"],["value","NEXMO"],["value","AWS_SNS"],["type","text","placeholder","+1234567890",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Integration Settings"),a(),o(4,"button",2),x("click",function(){return i.openCreateModal()}),y(5,"i",3),l(6," Add Integration "),a()(),b(7,CEe,2,1,"div",4)(8,bEe,8,0,"div",5)(9,MEe,4,0,"div",6),a(),b(10,AEe,44,14,"div",7)),e&2&&(c(7),m("ngIf",!i.loading),c(),m("ngIf",!i.loading&&i.integrations.length===0),c(),m("ngIf",i.loading),c(),m("ngIf",i.showModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Ee,Rt],styles:[".integrations-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.integration-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.integration-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;transition:box-shadow .2s}.integration-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#f8f9fa;border-bottom:1px solid #eee}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .integration-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;background:teal;display:flex;align-items:center;justify-content:center;margin-right:12px}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .integration-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .integration-info[_ngcontent-%COMP%]{flex:1}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .integration-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#333}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .integration-info[_ngcontent-%COMP%]   .integration-type[_ngcontent-%COMP%]{font-size:12px;color:#666}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.integration-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0 0 12px}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .sync-info[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:13px;margin-bottom:8px}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .sync-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#999}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .sync-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:500}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .sync-info[_ngcontent-%COMP%]   .value.success[_ngcontent-%COMP%]{color:#28a745}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .sync-info[_ngcontent-%COMP%]   .value.failed[_ngcontent-%COMP%]{color:#dc3545}.integration-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .environment-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;background:#e9ecef;border-radius:4px;font-size:11px;text-transform:uppercase;color:#495057}.integration-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px 16px;background:#f8f9fa;border-top:1px solid #eee}.integration-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.btn.btn-outline[_ngcontent-%COMP%]:hover{background:#f8f9fa}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}.form-section[_ngcontent-%COMP%]{margin:20px 0;padding:16px;background:#f8f9fa;border-radius:8px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background:#f8f9fa}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}"]})};var VL=[{value:"TRAVEL",label:"Travel"},{value:"MEALS",label:"Meals"},{value:"PURCHASES",label:"Purchases"},{value:"OTHER",label:"Other"}],BL=[{value:"DRAFT",label:"Draft",color:"secondary"},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"warning"},{value:"APPROVED",label:"Approved",color:"success"},{value:"REJECTED",label:"Rejected",color:"danger"},{value:"RETURNED",label:"Returned",color:"info"}],UL=[{value:"PENDING",label:"Pending",color:"warning"},{value:"IN_PROGRESS",label:"In Progress",color:"info"},{value:"COMPLETED",label:"Completed",color:"success"},{value:"CANCELLED",label:"Cancelled",color:"danger"}],jL=[{value:"CASH",label:"Cash"},{value:"CREDIT_CARD",label:"Credit Card"},{value:"DEBIT_CARD",label:"Debit Card"},{value:"CORPORATE_CARD",label:"Corporate Card"},{value:"BANK_TRANSFER",label:"Bank Transfer"},{value:"OTHER",label:"Other"}];function REe(n,t){if(n&1&&(o(0,"option",28),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function FEe(n,t){if(n&1&&(o(0,"span",46),l(1),a()),n&2){let e=p().$implicit,i=p(2);m("ngClass",e.reimbursementStatus==null?null:e.reimbursementStatus.toLowerCase()),c(),D(" ",i.getReimbursementLabel(e.reimbursementStatus)," ")}}function NEe(n,t){n&1&&(o(0,"span"),l(1,"N/A"),a())}function LEe(n,t){if(n&1){let e=F();o(0,"button",47),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.editExpense(r.id))}),y(1,"i",48),a()}}function VEe(n,t){if(n&1){let e=F();o(0,"button",49),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.submitExpense(r))}),y(1,"i",50),a()}}function BEe(n,t){if(n&1){let e=F();o(0,"button",51),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.approveExpense(r))}),y(1,"i",52),a()}}function UEe(n,t){if(n&1){let e=F();o(0,"button",53),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.rejectExpense(r))}),y(1,"i",54),a()}}function jEe(n,t){if(n&1){let e=F();o(0,"button",55),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.markReimbursed(r))}),y(1,"i",56),a()}}function WEe(n,t){if(n&1){let e=F();o(0,"button",57),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.postToAccounts(r))}),y(1,"i",58),a()}}function zEe(n,t){if(n&1){let e=F();o(0,"button",59),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.deleteExpense(r.id))}),y(1,"i",60),a()}}function qEe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",31),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",32),l(10),a(),o(11,"td")(12,"span",33),l(13),a()(),o(14,"td"),b(15,FEe,2,2,"span",34)(16,NEe,2,0,"span",35),a(),o(17,"td",36)(18,"button",37),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewExpense(r.id))}),y(19,"i",38),a(),b(20,LEe,2,0,"button",39)(21,VEe,2,0,"button",40)(22,BEe,2,0,"button",41)(23,UEe,2,0,"button",42)(24,jEe,2,0,"button",43)(25,WEe,2,0,"button",44)(26,zEe,2,0,"button",45),a()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.requestNumber),c(2),_(e.title),c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(i.formatDate(e.expenseDate)),c(2),_(i.formatCurrency(e.totalAmount)),c(2),m("ngClass",i.getStatusColor(e.status)),c(),D(" ",i.getStatusLabel(e.status)," "),c(2),m("ngIf",e.reimbursementRequired&&e.reimbursementStatus),c(),m("ngIf",!e.reimbursementRequired),c(4),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="APPROVED"&&e.reimbursementStatus==="PENDING"),c(),m("ngIf",e.status==="APPROVED"&&!e.postedToAccounts),c(),m("ngIf",e.status==="DRAFT")}}function HEe(n,t){if(n&1&&(o(0,"div",29)(1,"table")(2,"thead")(3,"tr")(4,"th"),l(5,"Request #"),a(),o(6,"th"),l(7,"Title"),a(),o(8,"th"),l(9,"Employee"),a(),o(10,"th"),l(11,"Date"),a(),o(12,"th"),l(13,"Amount"),a(),o(14,"th"),l(15,"Status"),a(),o(16,"th"),l(17,"Reimbursement"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,qEe,27,17,"tr",30),a()()()),n&2){let e=p();c(21),m("ngForOf",e.filteredExpenses)}}function GEe(n,t){if(n&1){let e=F();o(0,"button",2),x("click",function(){g(e);let r=p(2);return f(r.createExpense())}),l(1," Create Expense "),a()}}function $Ee(n,t){if(n&1&&(o(0,"div",61),y(1,"i",62),o(2,"h3"),l(3,"No Expenses Found"),a(),o(4,"p"),l(5),a(),b(6,GEe,2,0,"button",63),a()),n&2){let e=p();c(5),_(e.expenses.length===0?"Create your first expense report.":"No expenses match your filters."),c(),m("ngIf",e.expenses.length===0)}}function YEe(n,t){n&1&&(o(0,"div",64),y(1,"i",65),o(2,"p"),l(3,"Loading expenses..."),a()())}var H2=class n{constructor(t,e){this.expenseService=t;this.router=e}expenses=[];filteredExpenses=[];expenseStatuses=BL;reimbursementStatuses=UL;loading=!1;filterStatus="";searchTerm="";viewMode="all";statistics={};ngOnInit(){this.loadExpenses(),this.loadStatistics()}loadExpenses(){this.loading=!0,this.expenseService.getAllRequests().subscribe({next:t=>{this.expenses=t,this.applyFilters(),this.loading=!1},error:t=>{console.error("Error loading expenses:",t),this.loading=!1}})}loadStatistics(){this.expenseService.getStatistics().subscribe({next:t=>this.statistics=t,error:t=>console.error("Error loading statistics:",t)})}applyFilters(){this.filteredExpenses=this.expenses.filter(t=>{let e=!this.filterStatus||t.status===this.filterStatus,i=!this.searchTerm||t.requestNumber?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.title?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.employee?.firstName?.toLowerCase().includes(this.searchTerm.toLowerCase()),r=!0;switch(this.viewMode){case"pending":r=t.status==="PENDING_APPROVAL";break;case"approved":r=t.status==="APPROVED";break;case"reimbursement":r=t.status==="APPROVED"&&t.reimbursementStatus==="PENDING";break}return e&&i&&r})}setViewMode(t){this.viewMode=t,this.applyFilters()}createExpense(){this.router.navigate(["/app/expenses/new"])}viewExpense(t){this.router.navigate(["/app/expenses",t])}editExpense(t){this.router.navigate(["/app/expenses",t,"edit"])}submitExpense(t){confirm("Submit this expense for approval?")&&this.expenseService.submitRequest(t.id).subscribe({next:()=>{this.loadExpenses(),this.loadStatistics()},error:e=>{console.error("Error submitting expense:",e),alert("Failed to submit expense")}})}approveExpense(t){confirm("Approve this expense?")&&this.expenseService.approveRequest(t.id,{approvedAmount:t.totalAmount}).subscribe({next:()=>{this.loadExpenses(),this.loadStatistics()},error:e=>{console.error("Error approving expense:",e),alert("Failed to approve expense")}})}rejectExpense(t){let e=prompt("Enter rejection reason:");e&&this.expenseService.rejectRequest(t.id,e).subscribe({next:()=>{this.loadExpenses(),this.loadStatistics()},error:i=>{console.error("Error rejecting expense:",i),alert("Failed to reject expense")}})}markReimbursed(t){confirm("Mark this expense as reimbursed?")&&this.expenseService.markReimbursed(t.id).subscribe({next:()=>{this.loadExpenses(),alert("Expense marked as reimbursed")},error:e=>{console.error("Error marking reimbursed:",e),alert("Failed to mark as reimbursed")}})}postToAccounts(t){let e=prompt("Enter accounting reference:");e&&this.expenseService.postToAccounts(t.id,e).subscribe({next:()=>{this.loadExpenses(),alert("Expense posted to accounts")},error:i=>{console.error("Error posting to accounts:",i),alert("Failed to post to accounts")}})}deleteExpense(t){confirm("Are you sure you want to delete this expense?")&&this.expenseService.deleteRequest(t).subscribe({next:()=>{this.loadExpenses(),this.loadStatistics()},error:e=>{console.error("Error deleting expense:",e),alert("Failed to delete expense")}})}getStatusLabel(t){let e=this.expenseStatuses.find(i=>i.value===t);return e?e.label:t}getStatusColor(t){let e=this.expenseStatuses.find(i=>i.value===t);return e?e.color:"secondary"}getReimbursementLabel(t){let e=this.reimbursementStatuses.find(i=>i.value===t);return e?e.label:t}formatDate(t){return t?new Date(t).toLocaleDateString():""}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}static \u0275fac=function(e){return new(e||n)(V(v0),V(tn))};static \u0275cmp=_e({type:n,selectors:[["app-expense-list"]],decls:52,vars:18,consts:[[1,"expense-list-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-icon"],[1,"fas","fa-file-invoice-dollar"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","warning",3,"click"],[1,"fas","fa-clock"],[1,"stat-card","success",3,"click"],[1,"fas","fa-check-circle"],[1,"stat-card","info",3,"click"],[1,"fas","fa-money-bill-wave"],[1,"filters-section"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search by request number, title, or employee...",3,"ngModelChange","ngModel"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","expense-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],[3,"value"],[1,"expense-table"],[4,"ngFor","ngForOf"],[1,"request-number"],[1,"amount"],[1,"status-badge",3,"ngClass"],["class","reimbursement-badge",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"actions"],["title","View",1,"btn-icon",3,"click"],[1,"fas","fa-eye"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon","title","Submit",3,"click",4,"ngIf"],["class","btn-icon success","title","Approve",3,"click",4,"ngIf"],["class","btn-icon danger","title","Reject",3,"click",4,"ngIf"],["class","btn-icon info","title","Mark Reimbursed",3,"click",4,"ngIf"],["class","btn-icon","title","Post to Accounts",3,"click",4,"ngIf"],["class","btn-icon danger","title","Delete",3,"click",4,"ngIf"],[1,"reimbursement-badge",3,"ngClass"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Submit",1,"btn-icon",3,"click"],[1,"fas","fa-paper-plane"],["title","Approve",1,"btn-icon","success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn-icon","danger",3,"click"],[1,"fas","fa-times"],["title","Mark Reimbursed",1,"btn-icon","info",3,"click"],[1,"fas","fa-money-check"],["title","Post to Accounts",1,"btn-icon",3,"click"],[1,"fas","fa-book"],["title","Delete",1,"btn-icon","danger",3,"click"],[1,"fas","fa-trash"],[1,"empty-state"],[1,"fas","fa-receipt","fa-3x"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin","fa-2x"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Expense Management"),a(),o(4,"button",2),x("click",function(){return i.createExpense()}),y(5,"i",3),l(6," New Expense "),a()(),o(7,"div",4)(8,"div",5),x("click",function(){return i.setViewMode("all")}),o(9,"div",6),y(10,"i",7),a(),o(11,"div",8)(12,"span",9),l(13),a(),o(14,"span",10),l(15,"Total"),a()()(),o(16,"div",11),x("click",function(){return i.setViewMode("pending")}),o(17,"div",6),y(18,"i",12),a(),o(19,"div",8)(20,"span",9),l(21),a(),o(22,"span",10),l(23,"Pending Approval"),a()()(),o(24,"div",13),x("click",function(){return i.setViewMode("approved")}),o(25,"div",6),y(26,"i",14),a(),o(27,"div",8)(28,"span",9),l(29),a(),o(30,"span",10),l(31,"Approved"),a()()(),o(32,"div",15),x("click",function(){return i.setViewMode("reimbursement")}),o(33,"div",6),y(34,"i",16),a(),o(35,"div",8)(36,"span",9),l(37),a(),o(38,"span",10),l(39,"Pending Reimbursement"),a()()()(),o(40,"div",17)(41,"div",18),y(42,"i",19),o(43,"input",20),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),x("ngModelChange",function(){return i.applyFilters()}),a()(),o(44,"div",21)(45,"select",22),S("ngModelChange",function(s){return P(i.filterStatus,s)||(i.filterStatus=s),s}),x("ngModelChange",function(){return i.applyFilters()}),o(46,"option",23),l(47,"All Statuses"),a(),b(48,REe,2,2,"option",24),a()()(),b(49,HEe,22,1,"div",25)(50,$Ee,7,2,"div",26)(51,YEe,4,0,"div",27),a()),e&2&&(c(8),ie("active",i.viewMode==="all"),c(5),_(i.expenses.length),c(3),ie("active",i.viewMode==="pending"),c(5),_(i.statistics.totalPending||0),c(3),ie("active",i.viewMode==="approved"),c(5),_(i.statistics.totalApproved||0),c(3),ie("active",i.viewMode==="reimbursement"),c(5),_(i.statistics.totalApproved||0),c(6),M("ngModel",i.searchTerm),c(2),M("ngModel",i.filterStatus),c(3),m("ngForOf",i.expenseStatuses),c(),m("ngIf",!i.loading&&i.filteredExpenses.length>0),c(),m("ngIf",!i.loading&&i.filteredExpenses.length===0),c(),m("ngIf",i.loading))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Ue,Oe,Ee,Rt],styles:[".expense-list-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;background:teal;display:flex;align-items:center;justify-content:center;margin-right:16px}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffc107}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a745}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#17a2b8}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.filters-section[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:1;position:relative}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;min-width:150px}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.expense-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:13px;color:#666;text-transform:uppercase}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f8f9fa}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .request-number[_ngcontent-%COMP%]{font-weight:500;color:teal}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600}.expense-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.status-badge.warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.reimbursement-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:500;text-transform:uppercase}.reimbursement-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.reimbursement-badge.in_progress[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.reimbursement-badge.completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.reimbursement-badge.cancelled[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.btn-icon.success[_ngcontent-%COMP%]:hover{background:#d4edda;color:#155724}.btn-icon.danger[_ngcontent-%COMP%]:hover{background:#f8d7da;color:#721c24}.btn-icon.info[_ngcontent-%COMP%]:hover{background:#d1ecf1;color:#0c5460}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;color:#666}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}"]})};function JEe(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.projectCode),c(),Ge(" ",e.projectCode," - ",e.name," ")}}function KEe(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function QEe(n,t){if(n&1&&(o(0,"span",42),y(1,"i",43),l(2),a()),n&2){let e=p().$implicit;c(),m("ngClass",e.receiptFileName.endsWith(".pdf")?"fa-file-pdf":"fa-file-image"),c(),D(" ",e.receiptFileName," ")}}function XEe(n,t){n&1&&(o(0,"span",44),l(1,"No file"),a())}function ZEe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),b(8,QEe,3,2,"span",35)(9,XEe,2,0,"span",36),a(),o(10,"td",37)(11,"button",38),x("click",function(){let r=g(e).index,s=p(3);return f(s.openItemModal(r))}),y(12,"i",39),a(),o(13,"button",40),x("click",function(){let r=g(e).index,s=p(3);return f(s.removeItem(r))}),y(14,"i",41),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(2),_(e.expenseType||"-"),c(2),_(e.description||"-"),c(2),_(i.formatCurrency(e.amount)),c(2),m("ngIf",e.receiptFileName),c(),m("ngIf",!e.receiptFileName)}}function e3e(n,t){if(n&1&&(o(0,"div",31)(1,"table")(2,"thead")(3,"tr")(4,"th"),l(5,"Expense Type"),a(),o(6,"th"),l(7,"Description"),a(),o(8,"th"),l(9,"Amount"),a(),o(10,"th"),l(11,"Receipt"),a(),o(12,"th"),l(13,"Actions"),a()()(),o(14,"tbody"),b(15,ZEe,15,5,"tr",32),a(),o(16,"tfoot")(17,"tr")(18,"td",33),l(19,"Total:"),a(),o(20,"td",34),l(21),a()()()()()),n&2){let e=p(2);c(15),m("ngForOf",e.expenseRequest.items),c(6),_(e.formatCurrency(e.expenseRequest.totalAmount))}}function t3e(n,t){n&1&&(o(0,"div",45),y(1,"i",46),o(2,"p"),l(3,'No expense items added yet. Click "Add Item" to add expenses.'),a()())}function n3e(n,t){if(n&1){let e=F();o(0,"div",6)(1,"div",7)(2,"h3"),l(3,"Expense Details"),a(),o(4,"div",8)(5,"label"),l(6,"Title *"),a(),o(7,"input",9),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.title,r)||(s.expenseRequest.title=r),f(r)}),a()(),o(8,"div",8)(9,"label"),l(10,"Description"),a(),o(11,"textarea",10),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.description,r)||(s.expenseRequest.description=r),f(r)}),a()(),o(12,"div",11)(13,"div",8)(14,"label"),l(15,"Expense Date"),a(),o(16,"input",12),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.expenseDate,r)||(s.expenseRequest.expenseDate=r),f(r)}),a()(),o(17,"div",8)(18,"label"),l(19,"Payee Name *"),a(),o(20,"input",13),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.payeeName,r)||(s.expenseRequest.payeeName=r),f(r)}),a()()(),o(21,"div",11)(22,"div",8)(23,"label"),l(24,"Project (Optional)"),a(),o(25,"select",14),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.projectCode,r)||(s.expenseRequest.projectCode=r),f(r)}),o(26,"option",15),l(27,"-- No Project --"),a(),b(28,JEe,2,3,"option",16),a()(),o(29,"div",8)(30,"label"),l(31,"Expense Category"),a(),o(32,"select",14),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.categoryId,r)||(s.expenseRequest.categoryId=r),f(r)}),o(33,"option",15),l(34,"-- Select Category --"),a(),b(35,KEe,2,2,"option",16),a()()(),o(36,"div",17)(37,"label")(38,"input",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.expenseRequest.reimbursementRequired,r)||(s.expenseRequest.reimbursementRequired=r),f(r)}),a(),l(39," Requires Reimbursement "),a()()(),o(40,"div",7)(41,"div",19)(42,"h3"),l(43,"Expense Items"),a(),o(44,"button",20),x("click",function(){g(e);let r=p();return f(r.openItemModal())}),y(45,"i",21),l(46," Add Item "),a()(),b(47,e3e,22,2,"div",22)(48,t3e,4,0,"div",23),a(),o(49,"div",24)(50,"button",25),x("click",function(){g(e);let r=p();return f(r.cancel())}),l(51,"Cancel"),a(),o(52,"button",26),x("click",function(){g(e);let r=p();return f(r.saveExpense())}),y(53,"i",27),l(54," Save as Draft "),a(),o(55,"button",28),x("click",function(){g(e);let r=p();return f(r.submitExpense())}),y(56,"i",29),l(57," Submit for Approval "),a()()()}if(n&2){let e=p();c(7),M("ngModel",e.expenseRequest.title),c(4),M("ngModel",e.expenseRequest.description),c(5),M("ngModel",e.expenseRequest.expenseDate),c(4),M("ngModel",e.expenseRequest.payeeName),c(5),M("ngModel",e.expenseRequest.projectCode),c(3),m("ngForOf",e.projects),c(4),M("ngModel",e.expenseRequest.categoryId),c(3),m("ngForOf",e.categories),c(3),M("ngModel",e.expenseRequest.reimbursementRequired),c(9),m("ngIf",e.expenseRequest.items&&e.expenseRequest.items.length>0),c(),m("ngIf",!e.expenseRequest.items||e.expenseRequest.items.length===0),c(4),m("disabled",e.saving),c(3),m("disabled",e.saving||!e.expenseRequest.items||e.expenseRequest.items.length===0)}}function i3e(n,t){n&1&&(o(0,"div",47),y(1,"i",48),o(2,"p"),l(3,"Loading expense..."),a()())}function r3e(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function o3e(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("value",e.name),c(),_(e.name)}}function a3e(n,t){n&1&&(o(0,"div",62),y(1,"i",63),o(2,"p"),l(3,"Click to upload or drag & drop"),a(),o(4,"span"),l(5,"Accepts: JPG, PNG, PDF (Max 10MB)"),a()())}function s3e(n,t){if(n&1){let e=F();o(0,"div",64),y(1,"i",43),o(2,"span",65),l(3),a(),o(4,"button",66),x("click",function(r){g(e);let s=p(2);return f(s.removeFile(r))}),y(5,"i",53),a()()}if(n&2){let e=p(2);c(),m("ngClass",e.itemForm.receiptFileName.endsWith(".pdf")?"fa-file-pdf":"fa-file-image"),c(2),_(e.itemForm.receiptFileName)}}function l3e(n,t){if(n&1){let e=F();o(0,"div",49)(1,"div",50),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",51)(3,"h3"),l(4),a(),o(5,"button",52),x("click",function(){g(e);let r=p();return f(r.closeItemModal())}),y(6,"i",53),a()(),o(7,"div",54)(8,"div",8)(9,"label"),l(10,"Expense Category *"),a(),o(11,"select",14),S("ngModelChange",function(r){g(e);let s=p();return P(s.itemForm.categoryId,r)||(s.itemForm.categoryId=r),f(r)}),o(12,"option",15),l(13,"Select Category"),a(),b(14,r3e,2,2,"option",16),a()(),o(15,"div",8)(16,"label"),l(17,"Expense Type"),a(),o(18,"select",14),S("ngModelChange",function(r){g(e);let s=p();return P(s.itemForm.expenseType,r)||(s.itemForm.expenseType=r),f(r)}),o(19,"option",15),l(20,"Select Expense Type"),a(),b(21,o3e,2,2,"option",16),a()(),o(22,"div",8)(23,"label"),l(24,"Amount *"),a(),o(25,"input",55),S("ngModelChange",function(r){g(e);let s=p();return P(s.itemForm.amount,r)||(s.itemForm.amount=r),f(r)}),a()(),o(26,"div",8)(27,"label"),l(28,"Description"),a(),o(29,"input",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.itemForm.description,r)||(s.itemForm.description=r),f(r)}),a()(),o(30,"div",8)(31,"label"),l(32,"Payment Proof (Image/PDF) *"),a(),o(33,"div",57),x("click",function(){g(e);let r=km(35);return f(r.click())})("dragover",function(r){g(e);let s=p();return f(s.onDragOver(r))})("drop",function(r){g(e);let s=p();return f(s.onFileDrop(r))}),o(34,"input",58,0),x("change",function(r){g(e);let s=p();return f(s.onFileSelected(r))}),a(),b(36,a3e,6,0,"div",59)(37,s3e,6,2,"div",60),a()()(),o(38,"div",61)(39,"button",25),x("click",function(){g(e);let r=p();return f(r.closeItemModal())}),l(40,"Cancel"),a(),o(41,"button",28),x("click",function(){g(e);let r=p();return f(r.saveItem())}),l(42),a()()()()}if(n&2){let e=p();c(4),_(e.editingItemIndex>=0?"Edit Item":"Add Expense Item"),c(7),M("ngModel",e.itemForm.categoryId),c(3),m("ngForOf",e.categories),c(4),M("ngModel",e.itemForm.expenseType),c(3),m("ngForOf",e.expenseTypesList),c(4),M("ngModel",e.itemForm.amount),c(4),M("ngModel",e.itemForm.description),c(4),ie("has-file",e.itemForm.receiptFileName),c(3),m("ngIf",!e.itemForm.receiptFileName),c(),m("ngIf",e.itemForm.receiptFileName),c(4),m("disabled",!e.itemForm.expenseType||!e.itemForm.amount),c(),D(" ",e.editingItemIndex>=0?"Update":"Add"," Item ")}}var Zu=class n{constructor(t,e,i,r){this.expenseService=t;this.projectService=e;this.router=i;this.route=r}expenseRequest={title:"",description:"",items:[],reimbursementRequired:!0};categories=[];expenseTypes=VL;paymentMethods=jL;expenseTypesList=[];projects=[];isEditing=!1;expenseId=null;loading=!1;saving=!1;showItemModal=!1;editingItemIndex=-1;itemForm={};ngOnInit(){this.loadCategories(),this.loadExpenseTypes(),this.loadProjects(),this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&e!=="new"&&(this.expenseId=parseInt(e),this.isEditing=!0,this.loadExpense())})}loadProjects(){this.projectService.getAll().subscribe({next:t=>this.projects=t.filter(e=>e.status==="ACTIVE"||e.status==="IN_PROGRESS"),error:t=>console.error("Error loading projects:",t)})}loadExpenseTypes(){let t=localStorage.getItem("expenseTypes");t?this.expenseTypesList=JSON.parse(t).filter(e=>e.active):(this.expenseTypesList=[{id:1,name:"Food Expense",active:!0},{id:2,name:"Travel Expense",active:!0},{id:3,name:"Accommodation",active:!0},{id:4,name:"Transportation",active:!0},{id:5,name:"Office Supplies",active:!0},{id:6,name:"Equipment",active:!0},{id:7,name:"Software/Subscription",active:!0},{id:8,name:"Communication",active:!0},{id:9,name:"Entertainment",active:!0},{id:10,name:"Medical",active:!0},{id:11,name:"Training/Education",active:!0},{id:12,name:"Miscellaneous",active:!0}],localStorage.setItem("expenseTypes",JSON.stringify(this.expenseTypesList)))}loadCategories(){this.expenseService.getActiveCategories().subscribe({next:t=>this.categories=t,error:t=>console.error("Error loading categories:",t)})}loadExpense(){this.expenseId&&(this.loading=!0,this.expenseService.getRequestById(this.expenseId).subscribe({next:t=>{this.expenseRequest=t,this.loading=!1},error:t=>{console.error("Error loading expense:",t),this.loading=!1}}))}openItemModal(t=-1){this.editingItemIndex=t,t>=0&&this.expenseRequest.items?this.itemForm=me({},this.expenseRequest.items[t]):this.itemForm={expenseType:"",categoryId:void 0,description:"",amount:0,receiptFileName:"",receiptFileData:""},this.showItemModal=!0}onFileSelected(t){let e=t.target;e.files&&e.files[0]&&this.processFile(e.files[0])}onDragOver(t){t.preventDefault(),t.stopPropagation()}onFileDrop(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.files&&t.dataTransfer.files[0]&&this.processFile(t.dataTransfer.files[0])}processFile(t){let i=["image/jpeg","image/png","image/gif","image/webp","application/pdf"];if(t.size>10485760){alert("File size must be less than 10MB");return}if(!i.includes(t.type)){alert("Only images (JPG, PNG, GIF, WebP) and PDF files are allowed");return}let r=new FileReader;r.onload=()=>{this.itemForm.receiptFileName=t.name,this.itemForm.receiptFileData=r.result},r.readAsDataURL(t)}removeFile(t){t.stopPropagation(),this.itemForm.receiptFileName="",this.itemForm.receiptFileData=""}closeItemModal(){this.showItemModal=!1,this.itemForm={},this.editingItemIndex=-1}saveItem(){this.expenseRequest.items||(this.expenseRequest.items=[]),this.editingItemIndex>=0?this.expenseRequest.items[this.editingItemIndex]=me({},this.itemForm):this.expenseRequest.items.push(me({},this.itemForm)),this.calculateTotal(),this.closeItemModal()}removeItem(t){this.expenseRequest.items&&(this.expenseRequest.items.splice(t,1),this.calculateTotal())}calculateTotal(){this.expenseRequest.items&&(this.expenseRequest.totalAmount=this.expenseRequest.items.reduce((t,e)=>t+(e.amount||0),0))}saveExpense(){this.saving=!0;let t=Tt(me({},this.expenseRequest),{items:this.expenseRequest.items?.map(e=>Tt(me({},e),{categoryId:e.category?.id||e.categoryId}))});this.isEditing&&this.expenseId?this.expenseService.updateRequest(this.expenseId,t).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/app/expenses"])},error:e=>{console.error("Error updating expense:",e),this.saving=!1,alert("Failed to save expense")}}):this.expenseService.createRequest(t).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/app/expenses"])},error:e=>{console.error("Error creating expense:",e),this.saving=!1,alert("Failed to create expense")}})}submitExpense(){this.expenseId?this.expenseService.submitRequest(this.expenseId).subscribe({next:()=>this.router.navigate(["/app/expenses"]),error:t=>{console.error("Error submitting expense:",t),alert("Failed to submit expense")}}):this.expenseService.createRequest(this.expenseRequest).subscribe({next:t=>{this.expenseService.submitRequest(t.id).subscribe({next:()=>this.router.navigate(["/app/expenses"]),error:e=>{console.error("Error submitting expense:",e),alert("Expense created but failed to submit")}})},error:t=>{console.error("Error creating expense:",t),alert("Failed to create expense")}})}cancel(){this.router.navigate(["/app/expenses"])}getCategoryName(t){let e=this.categories.find(i=>i.id===t);return e?e.name:""}getPaymentMethodLabel(t){let e=this.paymentMethods.find(i=>i.value===t);return e?e.label:t}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}static \u0275fac=function(e){return new(e||n)(V(v0),V(x0),V(tn),V(Di))};static \u0275cmp=_e({type:n,selectors:[["app-expense-form"]],decls:7,vars:4,consts:[["fileInput",""],[1,"expense-form-container"],[1,"page-header"],["class","form-content",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"form-content"],[1,"form-section"],[1,"form-group"],["type","text","placeholder","Enter expense title",3,"ngModelChange","ngModel"],["rows","3","placeholder","Describe the expense",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter payee/vendor name",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","checkbox-group"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"section-header"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],["class","items-table",4,"ngIf"],["class","empty-items",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-outline",3,"click","disabled"],[1,"fas","fa-save"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-paper-plane"],[3,"value"],[1,"items-table"],[4,"ngFor","ngForOf"],["colspan","2",1,"total-label"],["colspan","3",1,"total-amount"],["class","receipt-badge",4,"ngIf"],["class","no-receipt",4,"ngIf"],[1,"actions"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Remove",1,"btn-icon","danger",3,"click"],[1,"fas","fa-trash"],[1,"receipt-badge"],[1,"fas",3,"ngClass"],[1,"no-receipt"],[1,"empty-items"],[1,"fas","fa-receipt"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin","fa-2x"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["type","number","step","0.01","min","0","placeholder","Enter amount",3,"ngModelChange","ngModel"],["type","text","placeholder","Brief description (optional)",3,"ngModelChange","ngModel"],[1,"file-upload-area",3,"click","dragover","drop"],["type","file","accept","image/*,.pdf",2,"display","none",3,"change"],["class","upload-content",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"modal-footer"],[1,"upload-content"],[1,"fas","fa-cloud-upload-alt"],[1,"file-preview"],[1,"file-name"],[1,"btn-remove",3,"click"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"h2"),l(3),a()(),b(4,n3e,58,13,"div",3)(5,i3e,4,0,"div",4),a(),b(6,l3e,43,13,"div",5)),e&2&&(c(3),_(i.isEditing?"Edit Expense":"New Expense Request"),c(),m("ngIf",!i.loading),c(),m("ngIf",i.loading),c(),m("ngIf",i.showItemModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,Ee,Rt],styles:[".expense-form-container[_ngcontent-%COMP%]{padding:20px;max-width:900px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.form-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-section[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:16px;color:#333}.form-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.items-table[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:12px;color:#666;text-transform:uppercase}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;background:#f8f9fa}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:16px;color:teal}.empty-items[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.empty-items[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}.empty-items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px;background:#f8f9fa;border-radius:0 0 8px 8px}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #008080;color:teal}.btn.btn-outline[_ngcontent-%COMP%]:hover{background:#f0fafa}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.btn-icon.danger[_ngcontent-%COMP%]:hover{background:#f8d7da;color:#721c24}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px}.actions[_ngcontent-%COMP%]{white-space:nowrap}.file-upload-area[_ngcontent-%COMP%]{border:2px dashed #ddd;border-radius:8px;padding:30px 20px;text-align:center;cursor:pointer;transition:all .2s;background:#fafafa}.file-upload-area[_ngcontent-%COMP%]:hover{border-color:teal;background:#f0fafa}.file-upload-area.has-file[_ngcontent-%COMP%]{border-style:solid;border-color:teal;background:#f0fafa;padding:16px 20px}.file-upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px;color:#ccc;margin-bottom:12px}.file-upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-weight:500;color:#333}.file-upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#999}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:teal}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   i.fa-file-pdf[_ngcontent-%COMP%]{color:#dc3545}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:14px;color:#333;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#f8d7da;border:none;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#721c24;transition:all .2s}.file-upload-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#f5c6cb}.receipt-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;background:#e8f4f4;border-radius:4px;font-size:12px;color:teal;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.receipt-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{flex-shrink:0}.receipt-badge[_ngcontent-%COMP%]   i.fa-file-pdf[_ngcontent-%COMP%]{color:#dc3545}.no-receipt[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}"]})};function c3e(n,t){if(n&1){let e=F();o(0,"button",40),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.submitRequisition(r.id))}),l(1,"Submit"),a()}}function d3e(n,t){if(n&1){let e=F();o(0,"button",41),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.approveRequisition(r.id))}),l(1,"Approve"),a()}}function p3e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",36),l(11),a()(),o(12,"td")(13,"button",37),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(14,"Edit"),a(),b(15,c3e,2,0,"button",38)(16,d3e,2,0,"button",39),a()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.requisitionNumber),c(2),_(e.jobTitle),c(2),_(e.department==null?null:e.department.name),c(2),_(e.numberOfPositions),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(4),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="PENDING")}}function m3e(n,t){if(n&1){let e=F();o(0,"div",31)(1,"div",32)(2,"h3"),l(3,"Job Requisitions"),a(),o(4,"button",33),x("click",function(){g(e);let r=p();return f(r.openForm())}),l(5,"+ New Requisition"),a()(),o(6,"table",34)(7,"thead")(8,"tr")(9,"th"),l(10,"Number"),a(),o(11,"th"),l(12,"Title"),a(),o(13,"th"),l(14,"Department"),a(),o(15,"th"),l(16,"Positions"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,p3e,17,8,"tr",35),a()()()}if(n&2){let e=p();c(22),m("ngForOf",e.requisitions)}}function u3e(n,t){if(n&1){let e=F();o(0,"button",40),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.publishPosting(r.id))}),l(1,"Publish"),a()}}function g3e(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",36),l(11),a()(),o(12,"td"),b(13,u3e,2,0,"button",38),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.postingCode),c(2),_(e.jobTitle),c(2),_(e.location),c(2),_(e.applicationCount||0),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngIf",e.status==="DRAFT")}}function f3e(n,t){if(n&1){let e=F();o(0,"div",31)(1,"div",32)(2,"h3"),l(3,"Job Postings"),a(),o(4,"button",33),x("click",function(){g(e);let r=p();return f(r.openPostingForm())}),l(5,"+ New Job Posting"),a()(),o(6,"table",34)(7,"thead")(8,"tr")(9,"th"),l(10,"Code"),a(),o(11,"th"),l(12,"Title"),a(),o(13,"th"),l(14,"Location"),a(),o(15,"th"),l(16,"Applications"),a(),o(17,"th"),l(18,"Status"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,g3e,14,7,"tr",35),a()()()}if(n&2){let e=p();c(22),m("ngForOf",e.jobPostings)}}function h3e(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",36),l(9),a()(),o(10,"td"),l(11),a()()),n&2){let e=t.$implicit,i=p(2);c(2),Ge("",e.firstName," ",e.lastName),c(2),_(e.email),c(2),_(e.jobPosting==null?null:e.jobPosting.jobTitle),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(i.formatDate(e.applicationDate))}}function _3e(n,t){if(n&1){let e=F();o(0,"div",31)(1,"div",32)(2,"h3"),l(3,"Candidates"),a(),o(4,"button",33),x("click",function(){g(e);let r=p();return f(r.openCandidateForm())}),l(5,"+ Add Candidate"),a()(),o(6,"table",34)(7,"thead")(8,"tr")(9,"th"),l(10,"Name"),a(),o(11,"th"),l(12,"Email"),a(),o(13,"th"),l(14,"Position"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Applied"),a()()(),o(19,"tbody"),b(20,h3e,12,7,"tr",35),a()()()}if(n&2){let e=p();c(20),m("ngForOf",e.candidates)}}function v3e(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",36),l(13),a()()()),n&2){let e=t.$implicit,i=p(2);c(2),Ge("",e.candidate==null?null:e.candidate.firstName," ",e.candidate==null?null:e.candidate.lastName),c(2),_(e.candidate==null||e.candidate.jobPosting==null?null:e.candidate.jobPosting.jobTitle),c(2),_(i.formatDate(e.scheduledDate)),c(2),_(e.interviewType),c(2),Ge("",e.interviewer==null?null:e.interviewer.firstName," ",e.interviewer==null?null:e.interviewer.lastName),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function x3e(n,t){if(n&1){let e=F();o(0,"div",31)(1,"div",32)(2,"h3"),l(3,"Upcoming Interviews"),a(),o(4,"button",33),x("click",function(){g(e);let r=p();return f(r.openInterviewForm())}),l(5,"+ Schedule Interview"),a()(),o(6,"table",34)(7,"thead")(8,"tr")(9,"th"),l(10,"Candidate"),a(),o(11,"th"),l(12,"Position"),a(),o(13,"th"),l(14,"Date"),a(),o(15,"th"),l(16,"Type"),a(),o(17,"th"),l(18,"Interviewer"),a(),o(19,"th"),l(20,"Status"),a()()(),o(21,"tbody"),b(22,v3e,14,9,"tr",35),a()()()}if(n&2){let e=p();c(22),m("ngForOf",e.interviews)}}function y3e(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3),a(),o(4,"form",44),x("ngSubmit",function(){g(e);let r=p();return f(r.saveRequisition())}),o(5,"div",45)(6,"label"),l(7,"Job Title"),a(),o(8,"input",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.jobTitle,r)||(s.formData.jobTitle=r),f(r)}),a()(),o(9,"div",45)(10,"label"),l(11,"Number of Positions"),a(),o(12,"input",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.numberOfPositions,r)||(s.formData.numberOfPositions=r),f(r)}),a()(),o(13,"div",45)(14,"label"),l(15,"Employment Type"),a(),o(16,"select",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.employmentType,r)||(s.formData.employmentType=r),f(r)}),o(17,"option",49),l(18,"Full Time"),a(),o(19,"option",50),l(20,"Part Time"),a(),o(21,"option",51),l(22,"Contract"),a()()(),o(23,"div",45)(24,"label"),l(25,"Description"),a(),o(26,"textarea",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.jobDescription,r)||(s.formData.jobDescription=r),f(r)}),a()(),o(27,"div",53)(28,"button",54),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(29,"Cancel"),a(),o(30,"button",55),l(31,"Save"),a()()()()()}if(n&2){let e=p();c(3),D("",e.editingItem?"Edit":"New"," Requisition"),c(5),M("ngModel",e.formData.jobTitle),c(4),M("ngModel",e.formData.numberOfPositions),c(4),M("ngModel",e.formData.employmentType),c(10),M("ngModel",e.formData.jobDescription)}}function C3e(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.positionTitle||e.jobTitle)}}function b3e(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"New Job Posting"),a(),o(4,"form",44),x("ngSubmit",function(){g(e);let r=p();return f(r.saveJobPosting())}),o(5,"div",45)(6,"label"),l(7,"Select Requisition"),a(),o(8,"select",56),S("ngModelChange",function(r){g(e);let s=p();return P(s.postingData.requisitionId,r)||(s.postingData.requisitionId=r),f(r)}),o(9,"option",57),l(10,"-- Select Requisition --"),a(),b(11,C3e,2,2,"option",58),a()(),o(12,"div",45)(13,"label"),l(14,"Posting Title"),a(),o(15,"input",59),S("ngModelChange",function(r){g(e);let s=p();return P(s.postingData.title,r)||(s.postingData.title=r),f(r)}),a()(),o(16,"div",45)(17,"label"),l(18,"Posting Type"),a(),o(19,"select",60),S("ngModelChange",function(r){g(e);let s=p();return P(s.postingData.postingType,r)||(s.postingData.postingType=r),f(r)}),o(20,"option",61),l(21,"Internal"),a(),o(22,"option",62),l(23,"External"),a(),o(24,"option",63),l(25,"Both"),a()()(),o(26,"div",45)(27,"label"),l(28,"Application Deadline"),a(),o(29,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.postingData.closeDate,r)||(s.postingData.closeDate=r),f(r)}),a()(),o(30,"div",45)(31,"label"),l(32,"Description"),a(),o(33,"textarea",65),S("ngModelChange",function(r){g(e);let s=p();return P(s.postingData.description,r)||(s.postingData.description=r),f(r)}),a()(),o(34,"div",53)(35,"button",54),x("click",function(){g(e);let r=p();return f(r.closePostingForm())}),l(36,"Cancel"),a(),o(37,"button",55),l(38,"Save"),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.postingData.requisitionId),c(3),m("ngForOf",e.approvedRequisitions),c(4),M("ngModel",e.postingData.title),c(4),M("ngModel",e.postingData.postingType),c(10),M("ngModel",e.postingData.closeDate),c(4),M("ngModel",e.postingData.description)}}function M3e(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.jobTitle)}}function S3e(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Add Candidate"),a(),o(4,"form",44),x("ngSubmit",function(){g(e);let r=p();return f(r.saveCandidate())}),o(5,"div",45)(6,"label"),l(7,"First Name"),a(),o(8,"input",67),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.firstName,r)||(s.candidateData.firstName=r),f(r)}),a()(),o(9,"div",45)(10,"label"),l(11,"Last Name"),a(),o(12,"input",68),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.lastName,r)||(s.candidateData.lastName=r),f(r)}),a()(),o(13,"div",45)(14,"label"),l(15,"Email"),a(),o(16,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.email,r)||(s.candidateData.email=r),f(r)}),a()(),o(17,"div",45)(18,"label"),l(19,"Phone"),a(),o(20,"input",70),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.phone,r)||(s.candidateData.phone=r),f(r)}),a()(),o(21,"div",45)(22,"label"),l(23,"Job Posting"),a(),o(24,"select",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.jobPostingId,r)||(s.candidateData.jobPostingId=r),f(r)}),o(25,"option",57),l(26,"-- Select Job Posting --"),a(),b(27,M3e,2,2,"option",58),a()(),o(28,"div",45)(29,"label"),l(30,"Resume/Notes"),a(),o(31,"textarea",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.candidateData.notes,r)||(s.candidateData.notes=r),f(r)}),a()(),o(32,"div",53)(33,"button",54),x("click",function(){g(e);let r=p();return f(r.closeCandidateForm())}),l(34,"Cancel"),a(),o(35,"button",55),l(36,"Save"),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.candidateData.firstName),c(4),M("ngModel",e.candidateData.lastName),c(4),M("ngModel",e.candidateData.email),c(4),M("ngModel",e.candidateData.phone),c(4),M("ngModel",e.candidateData.jobPostingId),c(3),m("ngForOf",e.activePostings),c(4),M("ngModel",e.candidateData.notes)}}function P3e(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge("",e.firstName," ",e.lastName)}}function w3e(n,t){if(n&1){let e=F();o(0,"div",42)(1,"div",43),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Schedule Interview"),a(),o(4,"form",44),x("ngSubmit",function(){g(e);let r=p();return f(r.saveInterview())}),o(5,"div",45)(6,"label"),l(7,"Candidate"),a(),o(8,"select",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.candidateId,r)||(s.interviewData.candidateId=r),f(r)}),o(9,"option",57),l(10,"-- Select Candidate --"),a(),b(11,P3e,2,3,"option",58),a()(),o(12,"div",45)(13,"label"),l(14,"Interview Type"),a(),o(15,"select",74),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.interviewType,r)||(s.interviewData.interviewType=r),f(r)}),o(16,"option",75),l(17,"Phone Screen"),a(),o(18,"option",76),l(19,"Video Call"),a(),o(20,"option",77),l(21,"In Person"),a(),o(22,"option",78),l(23,"Technical"),a(),o(24,"option",79),l(25,"HR Round"),a(),o(26,"option",80),l(27,"Final Round"),a()()(),o(28,"div",45)(29,"label"),l(30,"Interview Mode"),a(),o(31,"select",81),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.interviewMode,r)||(s.interviewData.interviewMode=r),f(r)}),o(32,"option",82),l(33,"Virtual"),a(),o(34,"option",77),l(35,"In Person"),a()()(),o(36,"div",45)(37,"label"),l(38,"Interview Date"),a(),o(39,"input",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.interviewDate,r)||(s.interviewData.interviewDate=r),f(r)}),a()(),o(40,"div",45)(41,"label"),l(42,"Start Time"),a(),o(43,"input",84),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.startTime,r)||(s.interviewData.startTime=r),f(r)}),a()(),o(44,"div",45)(45,"label"),l(46,"Location/Meeting Link"),a(),o(47,"input",85),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.location,r)||(s.interviewData.location=r),f(r)}),a()(),o(48,"div",45)(49,"label"),l(50,"Notes"),a(),o(51,"textarea",86),S("ngModelChange",function(r){g(e);let s=p();return P(s.interviewData.interviewerNotes,r)||(s.interviewData.interviewerNotes=r),f(r)}),a()(),o(52,"div",53)(53,"button",54),x("click",function(){g(e);let r=p();return f(r.closeInterviewForm())}),l(54,"Cancel"),a(),o(55,"button",55),l(56,"Schedule"),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.interviewData.candidateId),c(3),m("ngForOf",e.allCandidates),c(4),M("ngModel",e.interviewData.interviewType),c(16),M("ngModel",e.interviewData.interviewMode),c(8),M("ngModel",e.interviewData.interviewDate),c(4),M("ngModel",e.interviewData.startTime),c(4),M("ngModel",e.interviewData.location),c(4),M("ngModel",e.interviewData.interviewerNotes)}}var eg=class n{constructor(t,e,i,r){this.recruitmentService=t;this.router=e;this.toastService=i;this.cdr=r}activeTab="requisitions";requisitions=[];jobPostings=[];candidates=[];interviews=[];dashboard={};loading=!1;showForm=!1;editingItem=null;formData={};showPostingForm=!1;postingData={};approvedRequisitions=[];showCandidateForm=!1;candidateData={};activePostings=[];showInterviewForm=!1;interviewData={};allCandidates=[];ngOnInit(){this.loadDashboard(),this.loadRequisitions()}loadDashboard(){this.recruitmentService.getDashboard().subscribe({next:t=>{this.dashboard=t,this.cdr.markForCheck()},error:t=>console.error("Error loading dashboard:",t)})}setTab(t){switch(this.activeTab=t,this.showForm=!1,t){case"requisitions":this.loadRequisitions();break;case"postings":this.loadJobPostings();break;case"candidates":this.loadCandidates();break;case"interviews":this.loadInterviews();break}}loadRequisitions(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getRequisitions().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.requisitions=t,this.cdr.markForCheck()},error:t=>console.error(t)})}loadJobPostings(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getJobPostings().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.jobPostings=t,this.cdr.markForCheck()},error:t=>console.error(t)})}loadCandidates(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getCandidates().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.candidates=t,this.cdr.markForCheck()},error:t=>console.error(t)})}loadInterviews(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getUpcomingInterviews().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.interviews=t,this.cdr.markForCheck()},error:t=>console.error(t)})}openForm(t){this.editingItem=t||null,this.formData=t?me({},t):{},this.showForm=!0}closeForm(){this.showForm=!1,this.editingItem=null,this.formData={}}saveRequisition(){(this.editingItem?this.recruitmentService.updateRequisition(this.editingItem.id,this.formData):this.recruitmentService.createRequisition(this.formData)).subscribe({next:()=>{this.toastService.success(this.editingItem?"Requisition updated":"Requisition created"),this.closeForm(),this.loadRequisitions()},error:e=>{console.error(e),this.toastService.error("Error saving requisition")}})}submitRequisition(t){confirm("Submit this requisition for approval?")&&this.recruitmentService.submitRequisition(t).subscribe({next:()=>this.loadRequisitions(),error:e=>console.error(e)})}approveRequisition(t){confirm("Approve this requisition?")&&this.recruitmentService.approveRequisition(t,1).subscribe({next:()=>this.loadRequisitions(),error:e=>console.error(e)})}publishPosting(t){confirm("Publish this job posting?")&&this.recruitmentService.publishJobPosting(t).subscribe({next:()=>this.loadJobPostings(),error:e=>console.error(e)})}formatDate(t){return t?new Date(t).toLocaleDateString():""}getStatusClass(t){return{DRAFT:"bg-secondary",PENDING:"bg-warning",APPROVED:"bg-success",ACTIVE:"bg-primary",CLOSED:"bg-dark",REJECTED:"bg-danger"}[t]||"bg-secondary"}openPostingForm(){this.postingData={postingType:"EXTERNAL"},this.loadApprovedRequisitions(),this.showPostingForm=!0}closePostingForm(){this.showPostingForm=!1,this.postingData={}}loadApprovedRequisitions(){this.recruitmentService.getRequisitions().subscribe({next:t=>this.approvedRequisitions=t.filter(e=>e.status==="APPROVED"),error:t=>console.error(t)})}saveJobPosting(){this.recruitmentService.createJobPosting(this.postingData).subscribe({next:()=>{this.toastService.success("Job posting created successfully"),this.closePostingForm(),this.loadJobPostings(),this.loadDashboard()},error:t=>{console.error(t),this.toastService.error("Error creating job posting")}})}openCandidateForm(){this.candidateData={},this.loadActivePostings(),this.showCandidateForm=!0}closeCandidateForm(){this.showCandidateForm=!1,this.candidateData={}}loadActivePostings(){this.recruitmentService.getActiveJobPostings().subscribe({next:t=>this.activePostings=t,error:t=>console.error(t)})}saveCandidate(){this.recruitmentService.createCandidate(this.candidateData).subscribe({next:()=>{this.toastService.success("Candidate added successfully"),this.closeCandidateForm(),this.loadCandidates(),this.loadDashboard()},error:t=>{console.error(t),this.toastService.error("Error adding candidate")}})}openInterviewForm(){this.interviewData={interviewType:"PHONE",interviewMode:"VIRTUAL"},this.loadAllCandidatesForForm(),this.showInterviewForm=!0}loadAllCandidatesForForm(){this.recruitmentService.getCandidates().subscribe({next:t=>this.allCandidates=t,error:t=>console.error(t)})}closeInterviewForm(){this.showInterviewForm=!1,this.interviewData={}}saveInterview(){this.recruitmentService.scheduleInterview(this.interviewData).subscribe({next:()=>{this.toastService.success("Interview scheduled successfully"),this.closeInterviewForm(),this.loadInterviews(),this.loadDashboard()},error:t=>{console.error(t),this.toastService.error("Error scheduling interview")}})}goToOffers(){this.router.navigate(["/app/hr/recruitment/offers"])}goToEmployees(){this.router.navigate(["/app/hr/employees"])}goToOnboarding(){this.router.navigate(["/app/hr/onboarding"])}static \u0275fac=function(e){return new(e||n)(V(ma),V(tn),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment"]],decls:118,vars:35,consts:[[1,"recruitment-container"],[1,"page-header"],[1,"subtitle"],[1,"workflow-pipeline"],[1,"pipeline-title"],[1,"fa","fa-sitemap"],[1,"pipeline-stages"],[1,"pipeline-stage",3,"click"],[1,"stage-icon"],[1,"fa","fa-file-text"],[1,"stage-info"],[1,"stage-name"],[1,"stage-count"],[1,"stage-arrow"],[1,"fa","fa-chevron-right"],[1,"fa","fa-bullhorn"],[1,"fa","fa-users"],[1,"fa","fa-comments"],[1,"pipeline-stage","clickable",3,"click"],[1,"fa","fa-envelope-open"],[1,"fa","fa-user-circle"],[1,"fa","fa-rocket"],[1,"dashboard-cards"],[1,"card","stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"tabs"],[3,"click"],[1,"tab-content"],["class","content-section",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"content-section"],[1,"section-header"],[1,"btn","btn-primary",3,"click"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm",3,"click"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","jobTitle","required","",3,"ngModelChange","ngModel"],["type","number","name","numberOfPositions","min","1",3,"ngModelChange","ngModel"],["name","employmentType",3,"ngModelChange","ngModel"],["value","FULL_TIME"],["value","PART_TIME"],["value","CONTRACT"],["name","jobDescription","rows","4",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["name","requisitionId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["name","postingType",3,"ngModelChange","ngModel"],["value","INTERNAL"],["value","EXTERNAL"],["value","BOTH"],["type","date","name","closeDate",3,"ngModelChange","ngModel"],["name","description","rows","4",3,"ngModelChange","ngModel"],[3,"value"],["type","text","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["name","jobPostingId",3,"ngModelChange","ngModel"],["name","notes","rows","4",3,"ngModelChange","ngModel"],["name","candidateId","required","",3,"ngModelChange","ngModel"],["name","interviewType","required","",3,"ngModelChange","ngModel"],["value","PHONE"],["value","VIDEO"],["value","IN_PERSON"],["value","TECHNICAL"],["value","HR"],["value","FINAL"],["name","interviewMode",3,"ngModelChange","ngModel"],["value","VIRTUAL"],["type","date","name","interviewDate","required","",3,"ngModelChange","ngModel"],["type","time","name","startTime","required","",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Room number or video link",3,"ngModelChange","ngModel"],["name","interviewerNotes","rows","3",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Recruitment Management"),a(),o(4,"p",2),l(5,"Complete hiring workflow from requisition to onboarding"),a()(),o(6,"div",3)(7,"h3",4),y(8,"i",5),l(9," Employee Lifecycle Workflow"),a(),o(10,"div",6)(11,"div",7),x("click",function(){return i.setTab("requisitions")}),o(12,"div",8),y(13,"i",9),a(),o(14,"div",10)(15,"span",11),l(16,"Requisition"),a(),o(17,"span",12),l(18),a()(),o(19,"div",13),y(20,"i",14),a()(),o(21,"div",7),x("click",function(){return i.setTab("postings")}),o(22,"div",8),y(23,"i",15),a(),o(24,"div",10)(25,"span",11),l(26,"Job Posting"),a(),o(27,"span",12),l(28),a()(),o(29,"div",13),y(30,"i",14),a()(),o(31,"div",7),x("click",function(){return i.setTab("candidates")}),o(32,"div",8),y(33,"i",16),a(),o(34,"div",10)(35,"span",11),l(36,"Candidates"),a(),o(37,"span",12),l(38),a()(),o(39,"div",13),y(40,"i",14),a()(),o(41,"div",7),x("click",function(){return i.setTab("interviews")}),o(42,"div",8),y(43,"i",17),a(),o(44,"div",10)(45,"span",11),l(46,"Interviews"),a(),o(47,"span",12),l(48),a()(),o(49,"div",13),y(50,"i",14),a()(),o(51,"div",18),x("click",function(){return i.goToOffers()}),o(52,"div",8),y(53,"i",19),a(),o(54,"div",10)(55,"span",11),l(56,"Offers"),a(),o(57,"span",12),l(58),a()(),o(59,"div",13),y(60,"i",14),a()(),o(61,"div",18),x("click",function(){return i.goToEmployees()}),o(62,"div",8),y(63,"i",20),a(),o(64,"div",10)(65,"span",11),l(66,"Employee"),a(),o(67,"span",12),l(68),a()(),o(69,"div",13),y(70,"i",14),a()(),o(71,"div",18),x("click",function(){return i.goToOnboarding()}),o(72,"div",8),y(73,"i",21),a(),o(74,"div",10)(75,"span",11),l(76,"Onboarding"),a(),o(77,"span",12),l(78),a()()()()(),o(79,"div",22)(80,"div",23)(81,"div",24),l(82),a(),o(83,"div",25),l(84,"Open Requisitions"),a()(),o(85,"div",23)(86,"div",24),l(87),a(),o(88,"div",25),l(89,"Active Postings"),a()(),o(90,"div",23)(91,"div",24),l(92),a(),o(93,"div",25),l(94,"Total Candidates"),a()(),o(95,"div",23)(96,"div",24),l(97),a(),o(98,"div",25),l(99,"Upcoming Interviews"),a()()(),o(100,"div",26)(101,"button",27),x("click",function(){return i.setTab("requisitions")}),l(102,"Requisitions"),a(),o(103,"button",27),x("click",function(){return i.setTab("postings")}),l(104,"Job Postings"),a(),o(105,"button",27),x("click",function(){return i.setTab("candidates")}),l(106,"Candidates"),a(),o(107,"button",27),x("click",function(){return i.setTab("interviews")}),l(108,"Interviews"),a()(),o(109,"div",28),b(110,m3e,23,1,"div",29)(111,f3e,23,1,"div",29)(112,_3e,21,1,"div",29)(113,x3e,23,1,"div",29),a(),b(114,y3e,32,5,"div",30)(115,b3e,39,6,"div",30)(116,S3e,37,7,"div",30)(117,w3e,57,8,"div",30),a()),e&2&&(c(11),ie("active",i.activeTab==="requisitions"),c(7),_(i.dashboard.openRequisitions||0),c(3),ie("active",i.activeTab==="postings"),c(7),_(i.dashboard.activePostings||0),c(3),ie("active",i.activeTab==="candidates"),c(7),_(i.dashboard.totalCandidates||0),c(3),ie("active",i.activeTab==="interviews"),c(7),_(i.dashboard.upcomingInterviews||0),c(10),_(i.dashboard.pendingOffers||0),c(10),_(i.dashboard.newHires||0),c(10),_(i.dashboard.pendingOnboarding||0),c(4),_(i.dashboard.openRequisitions||0),c(5),_(i.dashboard.activePostings||0),c(5),_(i.dashboard.totalCandidates||0),c(5),_(i.dashboard.upcomingInterviews||0),c(4),ie("active",i.activeTab==="requisitions"),c(2),ie("active",i.activeTab==="postings"),c(2),ie("active",i.activeTab==="candidates"),c(2),ie("active",i.activeTab==="interviews"),c(3),m("ngIf",i.activeTab==="requisitions"),c(),m("ngIf",i.activeTab==="postings"),c(),m("ngIf",i.activeTab==="candidates"),c(),m("ngIf",i.activeTab==="interviews"),c(),m("ngIf",i.showForm),c(),m("ngIf",i.showPostingForm),c(),m("ngIf",i.showCandidateForm),c(),m("ngIf",i.showInterviewForm))},dependencies:[At,ot,Se,be,Vt,pi,je,We,Ie,Mt,Ue,Oe,di,cn,Xt,Ee,li,Rt],styles:[".recruitment-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.workflow-pipeline[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:24px;box-shadow:0 2px 8px #00000014}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-title[_ngcontent-%COMP%]{margin:0 0 16px;color:teal;font-size:16px;font-weight:600;display:flex;align-items:center;gap:8px}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stages[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#f8f9fa;border:2px solid #e5e7eb;border-radius:8px;padding:12px 16px;cursor:pointer;transition:all .2s;flex:1;min-width:140px}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]:hover{border-color:teal;background:#e6f7f7}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]{border-color:teal;background:teal}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%], .workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]   .stage-name[_ngcontent-%COMP%], .workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]   .stage-count[_ngcontent-%COMP%], .workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]   .stage-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.clickable[_ngcontent-%COMP%]:not(.active):hover{border-color:teal;background:#e6f7f7}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#e6f7f7;display:flex;align-items:center;justify-content:center}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:teal}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage.active[_ngcontent-%COMP%]   .stage-icon[_ngcontent-%COMP%]{background:#fff3}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-info[_ngcontent-%COMP%]   .stage-name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#374151;text-transform:uppercase;letter-spacing:.5px}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-info[_ngcontent-%COMP%]   .stage-count[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:teal}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]   .stage-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#9ca3af;font-size:12px}.workflow-pipeline[_ngcontent-%COMP%]   .pipeline-stage[_ngcontent-%COMP%]:last-child   .stage-arrow[_ngcontent-%COMP%]{display:none}.dashboard-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 4px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#2563eb}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;margin-top:8px}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:none;cursor:pointer;font-size:14px;color:#666;border-bottom:2px solid transparent;margin-bottom:-2px}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#2563eb;border-bottom-color:#2563eb;font-weight:500}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#2563eb}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.badge.bg-warning[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-success[_ngcontent-%COMP%]{background:#10b981}.badge.bg-primary[_ngcontent-%COMP%]{background:#2563eb}.badge.bg-danger[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-dark[_ngcontent-%COMP%]{background:#374151}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;margin-right:4px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #d1d5db;border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}"],changeDetection:0})};function E3e(n,t){if(n&1){let e=F();o(0,"div",22),y(1,"i",23),o(2,"p"),l(3,"No requisitions found"),a(),o(4,"button",4),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(5,"Create New Requisition"),a()()}}function O3e(n,t){if(n&1){let e=F();o(0,"button",40),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openEditModal(r))}),y(1,"i",41),a()}}function T3e(n,t){if(n&1){let e=F();o(0,"button",42),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.submitForApproval(r))}),y(1,"i",43),a()}}function k3e(n,t){if(n&1){let e=F();o(0,"button",44),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openApprovalModal(r,"approve"))}),y(1,"i",45),a()}}function I3e(n,t){if(n&1){let e=F();o(0,"button",46),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openApprovalModal(r,"reject"))}),y(1,"i",47),a()}}function D3e(n,t){if(n&1){let e=F();o(0,"button",48),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.putOnHold(r))}),y(1,"i",49),a()}}function A3e(n,t){if(n&1){let e=F();o(0,"button",50),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.deleteRequisition(r))}),y(1,"i",51),a()}}function R3e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td",26),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",27),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",28),l(13),a()(),o(14,"td")(15,"span",29),l(16),a()(),o(17,"td",30),l(18),a(),o(19,"td",31)(20,"button",32),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetails(r))}),y(21,"i",33),a(),b(22,O3e,2,0,"button",34)(23,T3e,2,0,"button",35)(24,k3e,2,0,"button",36)(25,I3e,2,0,"button",37)(26,D3e,2,0,"button",38)(27,A3e,2,0,"button",39),a()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.requisitionNumber),c(2),_(e.jobTitle),c(2),_((e.department==null?null:e.department.name)||"-"),c(2),_(e.numberOfPositions),c(2),_(e.employmentType),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),D(" ",e.priority," "),c(2),m("ngClass",i.getStatusClass(e.status)),c(),D(" ",e.status," "),c(2),_(i.getCurrentApprovalLevel(e)),c(4),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",i.canApprove(e)),c(),m("ngIf",i.canApprove(e)),c(),m("ngIf",e.status==="PENDING"),c(),m("ngIf",e.status==="DRAFT")}}function F3e(n,t){if(n&1&&(o(0,"table",24)(1,"thead")(2,"tr")(3,"th"),l(4,"MRF Number"),a(),o(5,"th"),l(6,"Job Title"),a(),o(7,"th"),l(8,"Department"),a(),o(9,"th"),l(10,"Positions"),a(),o(11,"th"),l(12,"Type"),a(),o(13,"th"),l(14,"Priority"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Approval"),a(),o(19,"th"),l(20,"Actions"),a()()(),o(21,"tbody"),b(22,R3e,28,16,"tr",25),a()()),n&2){let e=p();c(22),m("ngForOf",e.getFilteredRequisitions())}}function N3e(n,t){if(n&1&&(o(0,"option",64),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function L3e(n,t){if(n&1&&(o(0,"option",84),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function V3e(n,t){if(n&1&&(o(0,"option",84),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function B3e(n,t){if(n&1&&(o(0,"option",84),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function U3e(n,t){if(n&1&&(o(0,"option",84),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function j3e(n,t){if(n&1&&(o(0,"option",84),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function W3e(n,t){if(n&1){let e=F();o(0,"div",59)(1,"label"),l(2,"Replacing Employee"),a(),o(3,"input",85),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedRequisition.replacementFor,r)||(s.selectedRequisition.replacementFor=r),f(r)}),a()()}if(n&2){let e=p(2);c(3),M("ngModel",e.selectedRequisition.replacementFor)}}function z3e(n,t){n&1&&y(0,"i",86)}function q3e(n,t){n&1&&y(0,"i",86)}function H3e(n,t){if(n&1){let e=F();o(0,"div",52)(1,"div",53),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",54)(3,"h3"),l(4),a(),o(5,"button",55),y(6,"i",47),a()(),o(7,"div",56)(8,"div",57)(9,"h4"),l(10,"Basic Information"),a(),o(11,"div",58)(12,"div",59)(13,"label"),l(14,"MRF Number"),a(),o(15,"input",60),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.requisitionNumber,r)||(s.selectedRequisition.requisitionNumber=r),f(r)}),a()(),o(16,"div",59)(17,"label"),l(18,"Requested By"),a(),o(19,"input",60),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.requestedBy,r)||(s.selectedRequisition.requestedBy=r),f(r)}),a()(),o(20,"div",59)(21,"label"),l(22,"Job Title "),o(23,"span",61),l(24,"*"),a()(),o(25,"input",62),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.jobTitle,r)||(s.selectedRequisition.jobTitle=r),f(r)}),a()(),o(26,"div",59)(27,"label"),l(28,"Department"),a(),o(29,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.departmentId,r)||(s.selectedRequisition.departmentId=r),f(r)}),o(30,"option",64),l(31,"-- Select Department --"),a(),b(32,N3e,2,2,"option",65),a()(),o(33,"div",59)(34,"label"),l(35,"Number of Positions "),o(36,"span",61),l(37,"*"),a()(),o(38,"input",66),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.numberOfPositions,r)||(s.selectedRequisition.numberOfPositions=r),f(r)}),a()(),o(39,"div",59)(40,"label"),l(41,"Priority"),a(),o(42,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.priority,r)||(s.selectedRequisition.priority=r),f(r)}),b(43,L3e,2,2,"option",67),a()()()(),o(44,"div",57)(45,"h4"),l(46,"Employment Details"),a(),o(47,"div",58)(48,"div",59)(49,"label"),l(50,"Employment Type"),a(),o(51,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.employmentType,r)||(s.selectedRequisition.employmentType=r),f(r)}),b(52,V3e,2,2,"option",67),a()(),o(53,"div",59)(54,"label"),l(55,"Work Mode"),a(),o(56,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.workMode,r)||(s.selectedRequisition.workMode=r),f(r)}),b(57,B3e,2,2,"option",67),a()(),o(58,"div",59)(59,"label"),l(60,"Work Location"),a(),o(61,"input",68),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.workLocation,r)||(s.selectedRequisition.workLocation=r),f(r)}),a()(),o(62,"div",59)(63,"label"),l(64,"Expected Joining Date"),a(),o(65,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.expectedJoiningDate,r)||(s.selectedRequisition.expectedJoiningDate=r),f(r)}),a()()()(),o(66,"div",57)(67,"h4"),l(68,"Salary Range"),a(),o(69,"div",70)(70,"div",59)(71,"label"),l(72,"Currency"),a(),o(73,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.currency,r)||(s.selectedRequisition.currency=r),f(r)}),b(74,U3e,2,2,"option",67),a()(),o(75,"div",59)(76,"label"),l(77,"Min Salary"),a(),o(78,"input",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.minSalary,r)||(s.selectedRequisition.minSalary=r),f(r)}),a()(),o(79,"div",59)(80,"label"),l(81,"Max Salary"),a(),o(82,"input",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.maxSalary,r)||(s.selectedRequisition.maxSalary=r),f(r)}),a()(),o(83,"div",59)(84,"label"),l(85,"Min Experience (Years)"),a(),o(86,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.minimumExperience,r)||(s.selectedRequisition.minimumExperience=r),f(r)}),a()()()(),o(87,"div",57)(88,"h4"),l(89,"Justification"),a(),o(90,"div",58)(91,"div",59)(92,"label"),l(93,"Justification Type"),a(),o(94,"select",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.justificationType,r)||(s.selectedRequisition.justificationType=r),f(r)}),b(95,j3e,2,2,"option",67),a()(),b(96,W3e,4,1,"div",73),a(),o(97,"div",74)(98,"label"),l(99,"Justification Details "),o(100,"span",61),l(101,"*"),a()(),o(102,"textarea",75),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.justification,r)||(s.selectedRequisition.justification=r),f(r)}),a()()(),o(103,"div",57)(104,"h4"),l(105,"Job Requirements"),a(),o(106,"div",74)(107,"label"),l(108,"Job Description"),a(),o(109,"textarea",76),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.jobDescription,r)||(s.selectedRequisition.jobDescription=r),f(r)}),a()(),o(110,"div",74)(111,"label"),l(112,"Required Skills"),a(),o(113,"textarea",77),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.requiredSkills,r)||(s.selectedRequisition.requiredSkills=r),f(r)}),a()(),o(114,"div",74)(115,"label"),l(116,"Education Requirement"),a(),o(117,"input",78),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedRequisition.educationRequirement,r)||(s.selectedRequisition.educationRequirement=r),f(r)}),a()()()(),o(118,"div",79)(119,"button",80),l(120,"Cancel"),a(),o(121,"button",81),x("click",function(){g(e);let r=p();return f(r.saveRequisition(!0))}),b(122,z3e,1,0,"i",82),l(123),a(),o(124,"button",83),x("click",function(){g(e);let r=p();return f(r.saveRequisition(!1))}),b(125,q3e,1,0,"i",82),l(126),a()()()()}if(n&2){let e=p();c(4),D("",e.isEditing?"Edit":"New"," Manpower Requisition"),c(11),M("ngModel",e.selectedRequisition.requisitionNumber),c(4),M("ngModel",e.selectedRequisition.requestedBy),c(6),M("ngModel",e.selectedRequisition.jobTitle),c(4),M("ngModel",e.selectedRequisition.departmentId),c(),m("ngValue",null),c(2),m("ngForOf",e.departments),c(6),M("ngModel",e.selectedRequisition.numberOfPositions),c(4),M("ngModel",e.selectedRequisition.priority),c(),m("ngForOf",e.priorities),c(8),M("ngModel",e.selectedRequisition.employmentType),c(),m("ngForOf",e.employmentTypes),c(4),M("ngModel",e.selectedRequisition.workMode),c(),m("ngForOf",e.workModes),c(4),M("ngModel",e.selectedRequisition.workLocation),c(4),M("ngModel",e.selectedRequisition.expectedJoiningDate),c(8),M("ngModel",e.selectedRequisition.currency),c(),m("ngForOf",e.currencies),c(4),M("ngModel",e.selectedRequisition.minSalary),c(4),M("ngModel",e.selectedRequisition.maxSalary),c(4),M("ngModel",e.selectedRequisition.minimumExperience),c(8),M("ngModel",e.selectedRequisition.justificationType),c(),m("ngForOf",e.justificationTypes),c(),m("ngIf",e.selectedRequisition.justificationType==="Replacement"),c(6),M("ngModel",e.selectedRequisition.justification),c(7),M("ngModel",e.selectedRequisition.jobDescription),c(4),M("ngModel",e.selectedRequisition.requiredSkills),c(4),M("ngModel",e.selectedRequisition.educationRequirement),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":"Save as Draft"," "),c(),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Submitting...":"Submit for Approval"," ")}}function G3e(n,t){if(n&1&&(o(0,"div",96)(1,"span",97),l(2,"Replacing:"),a(),o(3,"span",98),l(4),a()()),n&2){let e=p(2);c(4),_(e.viewRequisition.replacementFor)}}function $3e(n,t){if(n&1&&(o(0,"div",99)(1,"h4"),l(2,"Job Description"),a(),o(3,"div",101),l(4),a()()),n&2){let e=p(2);c(4),_(e.viewRequisition.jobDescription)}}function Y3e(n,t){if(n&1&&(o(0,"span",108),l(1),a()),n&2){let e=t.$implicit;c(),D(" ",e.trim()," ")}}function J3e(n,t){if(n&1&&(o(0,"div",99)(1,"h4"),l(2,"Required Skills"),a(),o(3,"div",106),b(4,Y3e,2,1,"span",107),a()()),n&2){let e=p(2);c(4),m("ngForOf",e.viewRequisition.requiredSkills==null?null:e.viewRequisition.requiredSkills.split(","))}}function K3e(n,t){if(n&1&&(o(0,"div",119),l(1),a()),n&2){let e=p().$implicit;c(),_(e.comments)}}function Q3e(n,t){if(n&1&&(o(0,"div",111)(1,"div",112),y(2,"i",113),a(),o(3,"div",114)(4,"div",115)(5,"strong"),l(6),a(),o(7,"span",116),l(8),a()(),o(9,"div",117),l(10),a(),b(11,K3e,2,1,"div",118),a()()),n&2){let e=t.$implicit,i=p(3);c(),m("ngClass",e.status.toLowerCase()),c(),m("ngClass",e.status==="APPROVED"?"fa-check":e.status==="REJECTED"?"fa-times":"fa-clock"),c(4),_(e.levelName),c(),m("ngClass",e.status.toLowerCase()),c(),_(e.status),c(2),Ge(" ",e.approverName," - ",i.formatDate(e.actionDate)," "),c(),m("ngIf",e.comments)}}function X3e(n,t){if(n&1&&(o(0,"div",99)(1,"h4"),l(2,"Approval History"),a(),o(3,"div",109),b(4,Q3e,12,8,"div",110),a()()),n&2){let e=p(2);c(4),m("ngForOf",e.viewRequisition.approvalHistory)}}function Z3e(n,t){if(n&1&&(o(0,"div",99)(1,"div",120),y(2,"i",121),o(3,"span"),l(4,"Job ID Generated: "),o(5,"strong"),l(6),a()()()()),n&2){let e=p(2);c(6),_(e.viewRequisition.jobId)}}function eOe(n,t){if(n&1){let e=F();o(0,"button",122),x("click",function(){g(e);let r=p(2);return r.closeViewModal(),f(r.openApprovalModal(r.viewRequisition,"approve"))}),y(1,"i",45),l(2," Approve "),a()}}function tOe(n,t){if(n&1){let e=F();o(0,"button",123),x("click",function(){g(e);let r=p(2);return r.closeViewModal(),f(r.openApprovalModal(r.viewRequisition,"reject"))}),y(1,"i",47),l(2," Reject "),a()}}function nOe(n,t){if(n&1){let e=F();o(0,"div",52)(1,"div",53),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",54)(3,"h3"),l(4),a(),o(5,"button",87),x("click",function(){g(e);let r=p();return f(r.closeViewModal())}),y(6,"i",47),a()(),o(7,"div",56)(8,"div",88)(9,"div",89)(10,"h2"),l(11),a(),o(12,"span",90),l(13),a()(),o(14,"div",91)(15,"span"),y(16,"i",92),l(17),a(),o(18,"span"),y(19,"i",93),l(20),a()()(),o(21,"div",94)(22,"div",95)(23,"h4"),l(24,"Position Details"),a(),o(25,"div",96)(26,"span",97),l(27,"Department:"),a(),o(28,"span",98),l(29),a()(),o(30,"div",96)(31,"span",97),l(32,"Positions:"),a(),o(33,"span",98),l(34),a()(),o(35,"div",96)(36,"span",97),l(37,"Employment Type:"),a(),o(38,"span",98),l(39),a()(),o(40,"div",96)(41,"span",97),l(42,"Work Mode:"),a(),o(43,"span",98),l(44),a()(),o(45,"div",96)(46,"span",97),l(47,"Location:"),a(),o(48,"span",98),l(49),a()()(),o(50,"div",95)(51,"h4"),l(52,"Compensation"),a(),o(53,"div",96)(54,"span",97),l(55,"Salary Range:"),a(),o(56,"span",98),l(57),a()(),o(58,"div",96)(59,"span",97),l(60,"Min Experience:"),a(),o(61,"span",98),l(62),a()(),o(63,"div",96)(64,"span",97),l(65,"Expected Joining:"),a(),o(66,"span",98),l(67),a()(),o(68,"div",96)(69,"span",97),l(70,"Priority:"),a(),o(71,"span",28),l(72),a()()()(),o(73,"div",99)(74,"h4"),l(75,"Justification"),a(),o(76,"div",96)(77,"span",97),l(78,"Type:"),a(),o(79,"span",98),l(80),a()(),b(81,G3e,5,1,"div",100),o(82,"div",101),l(83),a()(),b(84,$3e,5,1,"div",102)(85,J3e,5,1,"div",102)(86,X3e,5,1,"div",102)(87,Z3e,7,1,"div",102),a(),o(88,"div",79)(89,"button",103),x("click",function(){g(e);let r=p();return f(r.closeViewModal())}),l(90,"Close"),a(),b(91,eOe,3,0,"button",104)(92,tOe,3,0,"button",105),a()()()}if(n&2){let e=p();c(4),D("Requisition Details - ",e.viewRequisition.requisitionNumber),c(7),_(e.viewRequisition.jobTitle),c(),m("ngClass",e.getStatusClass(e.viewRequisition.status)),c(),D(" ",e.viewRequisition.status," "),c(4),D(" ",e.formatDate(e.viewRequisition.requestedDate)),c(3),D(" ",e.viewRequisition.requestedBy),c(9),_((e.viewRequisition.department==null?null:e.viewRequisition.department.name)||"-"),c(5),_(e.viewRequisition.numberOfPositions),c(5),_(e.viewRequisition.employmentType),c(5),_(e.viewRequisition.workMode),c(5),_(e.viewRequisition.workLocation||"-"),c(8),Ge(" ",e.formatCurrency(e.viewRequisition.minSalary,e.viewRequisition.currency)," - ",e.formatCurrency(e.viewRequisition.maxSalary,e.viewRequisition.currency)," "),c(5),D("",e.viewRequisition.minimumExperience||0," years"),c(5),_(e.formatDate(e.viewRequisition.expectedJoiningDate)),c(4),m("ngClass",e.getPriorityClass(e.viewRequisition.priority)),c(),D(" ",e.viewRequisition.priority," "),c(8),_(e.viewRequisition.justificationType),c(),m("ngIf",e.viewRequisition.replacementFor),c(2),_(e.viewRequisition.justification),c(),m("ngIf",e.viewRequisition.jobDescription),c(),m("ngIf",e.viewRequisition.requiredSkills),c(),m("ngIf",e.viewRequisition.approvalHistory==null?null:e.viewRequisition.approvalHistory.length),c(),m("ngIf",e.viewRequisition.jobId),c(4),m("ngIf",e.canApprove(e.viewRequisition)),c(),m("ngIf",e.canApprove(e.viewRequisition))}}function iOe(n,t){if(n&1){let e=F();o(0,"div",52)(1,"div",124),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",54)(3,"h3"),l(4),a(),o(5,"button",87),x("click",function(){g(e);let r=p();return f(r.closeApprovalModal())}),y(6,"i",47),a()(),o(7,"div",56)(8,"div",125)(9,"p")(10,"strong"),l(11,"MRF Number:"),a(),l(12),a(),o(13,"p")(14,"strong"),l(15,"Job Title:"),a(),l(16),a(),o(17,"p")(18,"strong"),l(19,"Positions:"),a(),l(20),a()(),o(21,"div",59)(22,"label"),l(23),a(),o(24,"textarea",126),S("ngModelChange",function(r){g(e);let s=p();return P(s.approvalComments,r)||(s.approvalComments=r),f(r)}),a()()(),o(25,"div",79)(26,"button",103),x("click",function(){g(e);let r=p();return f(r.closeApprovalModal())}),l(27,"Cancel"),a(),o(28,"button",127),x("click",function(){g(e);let r=p();return f(r.processApproval())}),l(29),a()()()()}if(n&2){let e=p();c(4),D("",e.approvalAction==="approve"?"Approve":"Reject"," Requisition"),c(8),D(" ",e.requisitionToApprove.requisitionNumber),c(4),D(" ",e.requisitionToApprove.jobTitle),c(4),D(" ",e.requisitionToApprove.numberOfPositions),c(3),_(e.approvalAction==="approve"?"Comments (Optional)":"Rejection Reason (Required)"),c(),M("ngModel",e.approvalComments),m("placeholder",e.approvalAction==="approve"?"Add any comments...":"Please provide reason for rejection..."),c(4),m("ngClass",e.approvalAction==="approve"?"btn-success":"btn-danger")("disabled",e.approvalAction==="reject"&&!e.approvalComments),c(),D(" ",e.approvalAction==="approve"?"Approve":"Reject"," ")}}var tg=class n{constructor(t,e,i,r,s,d){this.recruitmentService=t;this.organizationService=e;this.settingsService=i;this.toastService=r;this.authService=s;this.cdr=d}requisitions=[];departments=[];loading=!1;saving=!1;showModal=!1;isEditing=!1;selectedRequisition=this.getEmptyRequisition();activeTab="all";searchTerm="";employmentTypes=["Full-Time","Part-Time","Contract","Intern","Temporary"];workModes=["Onsite","Remote","Hybrid"];justificationTypes=["New Position","Replacement","Expansion","Project-Based"];priorities=["Low","Medium","High","Urgent"];currencies=["USD","EUR","GBP","INR","SGD","AED"];approvalLevels=[{level:1,name:"Hiring Manager"},{level:2,name:"Department Head"},{level:3,name:"HR"},{level:4,name:"Finance"},{level:5,name:"Management"}];showApprovalModal=!1;approvalAction="";approvalComments="";requisitionToApprove=null;showViewModal=!1;viewRequisition=null;currentUserName="";currentUserId=0;isAdmin=!1;ngOnInit(){this.loadCurrentUser(),this.loadData()}loadCurrentUser(){this.authService.currentUser$.subscribe(t=>{t&&(this.currentUserName=`${t.firstName||""} ${t.lastName||""}`.trim()||t.username,this.currentUserId=t.userId,this.isAdmin=t.role==="Admin"||t.role==="HR Manager"||t.role==="Hiring Manager"||t.role==="Department Head")})}loadData(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getRequisitions().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.requisitions=t,this.cdr.markForCheck()},error:t=>{console.error("Error loading requisitions:",t),this.requisitions=[]}}),this.organizationService.getDepartments().subscribe({next:t=>{this.departments=t,this.cdr.markForCheck()},error:()=>this.departments=[]})}getEmptyRequisition(){return{requisitionNumber:"",jobTitle:"",numberOfPositions:1,employmentType:"Full-Time",workLocation:"",workMode:"Onsite",currency:"USD",justification:"",justificationType:"New Position",priority:"Medium",status:"DRAFT",requestedDate:new Date().toISOString().split("T")[0]}}getFilteredRequisitions(){let t=this.requisitions;if(this.activeTab!=="all"&&(t=t.filter(e=>e.status===this.activeTab)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.requisitionNumber?.toLowerCase().includes(e)||i.jobTitle?.toLowerCase().includes(e)||i.department?.name?.toLowerCase().includes(e))}return t}getStatusCounts(){let t={all:this.requisitions.length,DRAFT:0,PENDING:0,APPROVED:0,REJECTED:0,ON_HOLD:0};return this.requisitions.forEach(e=>{t[e.status]!==void 0&&t[e.status]++}),t}openCreateModal(){this.isEditing=!1,this.selectedRequisition=this.getEmptyRequisition(),this.selectedRequisition.requestedBy=this.currentUserName,this.selectedRequisition.requestedById=this.currentUserId,this.generateRequisitionNumber(),this.showModal=!0}generateRequisitionNumber(){this.settingsService.previewPrefixId("mrf").subscribe({next:t=>{this.selectedRequisition.requisitionNumber=t},error:()=>{let t=new Date;this.selectedRequisition.requisitionNumber=`MRF-${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`}})}openEditModal(t){if(t.status!=="DRAFT"){this.toastService.error("Only draft requisitions can be edited");return}this.isEditing=!0,this.selectedRequisition=JSON.parse(JSON.stringify(t)),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedRequisition=this.getEmptyRequisition()}saveRequisition(t=!0){if(this.saving||!this.validateForm())return;this.saving=!0,this.cdr.markForCheck(),this.selectedRequisition.status=t?"DRAFT":"PENDING",t||(this.selectedRequisition.currentApprovalLevel=1),(this.isEditing?this.recruitmentService.updateRequisition(this.selectedRequisition.id,this.selectedRequisition):this.recruitmentService.createRequisition(this.selectedRequisition)).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success(t?"Requisition saved as draft":"Requisition submitted for approval"),this.closeModal(),this.loadData()},error:i=>{console.error("Error saving requisition:",i),this.toastService.error("Error saving requisition")}})}validateForm(){return this.selectedRequisition.jobTitle?.trim()?!this.selectedRequisition.numberOfPositions||this.selectedRequisition.numberOfPositions<1?(this.toastService.error("Number of positions must be at least 1"),!1):this.selectedRequisition.justification?.trim()?!0:(this.toastService.error("Justification is required"),!1):(this.toastService.error("Job title is required"),!1)}submitForApproval(t){t.status==="DRAFT"&&confirm("Submit this requisition for approval?")&&this.recruitmentService.submitRequisition(t.id).subscribe({next:()=>{this.toastService.success("Requisition submitted for approval"),this.loadData()},error:e=>{console.error("Error submitting requisition:",e),this.toastService.error("Error submitting requisition")}})}openApprovalModal(t,e){this.requisitionToApprove=t,this.approvalAction=e,this.approvalComments="",this.showApprovalModal=!0}closeApprovalModal(){this.showApprovalModal=!1,this.requisitionToApprove=null,this.approvalComments=""}processApproval(){if(!this.requisitionToApprove)return;let t=this.approvalAction==="approve"?"approve":"reject";(t==="approve"?this.recruitmentService.approveRequisition(this.requisitionToApprove.id,this.currentUserId):this.recruitmentService.rejectRequisition(this.requisitionToApprove.id,this.approvalComments)).subscribe({next:()=>{this.toastService.success(t==="approve"?"Requisition approved successfully":"Requisition rejected"),this.closeApprovalModal(),this.loadData()},error:()=>{this.toastService.error(`Error ${t}ing requisition`)}})}putOnHold(t){confirm("Put this requisition on hold?")&&this.recruitmentService.holdRequisition(t.id).subscribe({next:()=>{this.toastService.success("Requisition put on hold"),this.loadData()},error:()=>{this.toastService.error("Error updating requisition")}})}deleteRequisition(t){if(t.status!=="DRAFT"){this.toastService.error("Only draft requisitions can be deleted");return}confirm(`Delete requisition ${t.requisitionNumber}?`)&&this.recruitmentService.deleteRequisition(t.id).subscribe({next:()=>{this.toastService.success("Requisition deleted"),this.loadData()},error:e=>{console.error("Error deleting requisition:",e),this.toastService.error("Error deleting requisition")}})}viewDetails(t){this.viewRequisition=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewRequisition=null}getStatusClass(t){return{DRAFT:"status-draft",PENDING:"status-pending",PENDING_APPROVAL:"status-pending",APPROVED:"status-approved",REJECTED:"status-rejected",ON_HOLD:"status-hold"}[t]||"status-draft"}getPriorityClass(t){return{Low:"priority-low",Medium:"priority-medium",High:"priority-high",Urgent:"priority-urgent"}[t]||"priority-medium"}getCurrentApprovalLevel(t){if(t.status==="APPROVED")return"Fully Approved";if(t.status==="REJECTED")return"Rejected";if(t.status==="DRAFT")return"Not Submitted";let e=t.currentApprovalLevel||1,i=this.approvalLevels.find(r=>r.level===e);return i?`Pending: ${i.name}`:"Pending"}canApprove(t){return(t.status==="PENDING"||t.status==="PENDING_APPROVAL")&&this.isAdmin}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}formatCurrency(t,e){return t==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(t)}static \u0275fac=function(e){return new(e||n)(V(ma),V(Mr),V(Zn),V(dn),V(Ui),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment-requisition"]],decls:46,vars:21,consts:[[1,"requisition-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","draft",3,"click"],[1,"stat-card","pending",3,"click"],[1,"stat-card","approved",3,"click"],[1,"stat-card","rejected",3,"click"],[1,"toolbar"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search by number, title, department...",3,"ngModelChange","ngModel"],[1,"content-card"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-file-alt"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"mrf-number"],[1,"positions"],[1,"priority-badge",3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"approval-level"],[1,"actions"],["title","View Details",1,"btn-icon",3,"click"],[1,"fas","fa-eye"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon success","title","Submit for Approval",3,"click",4,"ngIf"],["class","btn-icon success","title","Approve",3,"click",4,"ngIf"],["class","btn-icon danger","title","Reject",3,"click",4,"ngIf"],["class","btn-icon warning","title","Put on Hold",3,"click",4,"ngIf"],["class","btn-icon danger","title","Delete",3,"click",4,"ngIf"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Submit for Approval",1,"btn-icon","success",3,"click"],[1,"fas","fa-paper-plane"],["title","Approve",1,"btn-icon","success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn-icon","danger",3,"click"],[1,"fas","fa-times"],["title","Put on Hold",1,"btn-icon","warning",3,"click"],[1,"fas","fa-pause"],["title","Delete",1,"btn-icon","danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"readonly",3,"ngModelChange","ngModel"],[1,"required"],["type","text","placeholder","e.g., Software Engineer",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","e.g., New York, USA",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"form-grid","cols-4"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],["type","number","min","0","placeholder","0",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"form-group","full-width"],["rows","3","placeholder","Explain why this position is needed...",3,"ngModelChange","ngModel"],["rows","4","placeholder","Describe the role, responsibilities, and expectations...",3,"ngModelChange","ngModel"],["rows","2","placeholder","List required skills separated by commas...",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Bachelor's degree in Computer Science",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"disabled"],[1,"btn","btn-outline",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],["type","text","placeholder","Employee name being replaced",3,"ngModelChange","ngModel"],[1,"fas","fa-spinner","fa-spin"],[1,"btn-close",3,"click"],[1,"detail-header"],[1,"detail-title"],[1,"status-badge","large",3,"ngClass"],[1,"detail-meta"],[1,"fas","fa-calendar"],[1,"fas","fa-user"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"detail-section","full"],["class","detail-row",4,"ngIf"],[1,"detail-text"],["class","detail-section full",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"skill-tags"],["class","skill-tag",4,"ngFor","ngForOf"],[1,"skill-tag"],[1,"approval-timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-icon",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"timeline-content"],[1,"timeline-header"],[1,"timeline-status",3,"ngClass"],[1,"timeline-meta"],["class","timeline-comments",4,"ngIf"],[1,"timeline-comments"],[1,"job-id-banner"],[1,"fas","fa-check-circle"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"modal-content",3,"click"],[1,"approval-info"],["rows","4",3,"ngModelChange","ngModel","placeholder"],[1,"btn",3,"click","ngClass","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Manpower Requisition (MRF)"),a(),o(5,"p",3),l(6,"Manage job requisition requests and approvals"),a()(),o(7,"button",4),x("click",function(){return i.openCreateModal()}),y(8,"i",5),l(9," New Requisition "),a()(),o(10,"div",6)(11,"div",7),x("click",function(){return i.activeTab="all"}),o(12,"div",8),l(13),a(),o(14,"div",9),l(15,"Total"),a()(),o(16,"div",10),x("click",function(){return i.activeTab="DRAFT"}),o(17,"div",8),l(18),a(),o(19,"div",9),l(20,"Draft"),a()(),o(21,"div",11),x("click",function(){return i.activeTab="PENDING"}),o(22,"div",8),l(23),a(),o(24,"div",9),l(25,"Pending"),a()(),o(26,"div",12),x("click",function(){return i.activeTab="APPROVED"}),o(27,"div",8),l(28),a(),o(29,"div",9),l(30,"Approved"),a()(),o(31,"div",13),x("click",function(){return i.activeTab="REJECTED"}),o(32,"div",8),l(33),a(),o(34,"div",9),l(35,"Rejected"),a()()(),o(36,"div",14)(37,"div",15),y(38,"i",16),o(39,"input",17),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),o(40,"div",18),b(41,E3e,6,0,"div",19)(42,F3e,23,1,"table",20),a()(),b(43,H3e,127,35,"div",21)(44,nOe,93,26,"div",21)(45,iOe,30,10,"div",21)),e&2&&(c(11),ie("active",i.activeTab==="all"),c(2),_(i.getStatusCounts().all),c(3),ie("active",i.activeTab==="DRAFT"),c(2),_(i.getStatusCounts().DRAFT),c(3),ie("active",i.activeTab==="PENDING"),c(2),_(i.getStatusCounts().PENDING),c(3),ie("active",i.activeTab==="APPROVED"),c(2),_(i.getStatusCounts().APPROVED),c(3),ie("active",i.activeTab==="REJECTED"),c(2),_(i.getStatusCounts().REJECTED),c(6),M("ngModel",i.searchTerm),c(2),m("ngIf",!i.loading&&i.getFilteredRequisitions().length===0),c(),m("ngIf",!i.loading&&i.getFilteredRequisitions().length>0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal&&i.viewRequisition),c(),m("ngIf",i.showApprovalModal&&i.requisitionToApprove))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Ue,Oe,Xt,Ee,Rt],styles:[".requisition-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;text-align:center;box-shadow:0 2px 4px #00000014;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px}.stat-card.draft[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6b7280}.stat-card.pending[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.approved[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-card.rejected[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#ef4444}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#ddd;margin-bottom:16px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .mrf-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.data-table[_ngcontent-%COMP%]   .positions[_ngcontent-%COMP%]{font-weight:600;text-align:center}.data-table[_ngcontent-%COMP%]   .approval-level[_ngcontent-%COMP%]{font-size:13px;color:#666}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.status-badge.status-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.status-rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.status-hold[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.status-badge.large[_ngcontent-%COMP%]{padding:6px 14px;font-size:13px}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:4px;font-size:11px;font-weight:500}.priority-badge.priority-low[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.priority-badge.priority-high[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.priority-badge.priority-urgent[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:teal}.btn-icon.success[_ngcontent-%COMP%]:hover{color:#10b981}.btn-icon.danger[_ngcontent-%COMP%]:hover{color:#ef4444}.btn-icon.warning[_ngcontent-%COMP%]:hover{color:#f59e0b}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#059669}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#dc2626}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080}.btn.btn-outline[_ngcontent-%COMP%]:hover{background:#f0fafa}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:500px;max-width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;font-size:16px}.btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f9fafb}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;color:teal;font-weight:600;padding-bottom:8px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-grid.cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#666}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.detail-header[_ngcontent-%COMP%]{margin-bottom:24px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:8px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#333}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]{display:flex;gap:24px;color:#666;font-size:14px}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:24px}.detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:16px}.detail-section.full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:teal;font-weight:600}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.detail-text[_ngcontent-%COMP%]{color:#333;line-height:1.6;white-space:pre-wrap}.skill-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.skill-tag[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c;padding:4px 12px;border-radius:16px;font-size:13px}.approval-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px 0;border-bottom:1px solid #eee}.approval-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.approval-timeline[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.approval-timeline[_ngcontent-%COMP%]   .timeline-icon.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.approval-timeline[_ngcontent-%COMP%]   .timeline-icon.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.approval-timeline[_ngcontent-%COMP%]   .timeline-icon.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.approval-timeline[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{flex:1}.approval-timeline[_ngcontent-%COMP%]   .timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.approval-timeline[_ngcontent-%COMP%]   .timeline-status[_ngcontent-%COMP%]{font-size:11px;font-weight:500;padding:2px 8px;border-radius:4px}.approval-timeline[_ngcontent-%COMP%]   .timeline-status.approved[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.approval-timeline[_ngcontent-%COMP%]   .timeline-status.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.approval-timeline[_ngcontent-%COMP%]   .timeline-status.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.approval-timeline[_ngcontent-%COMP%]   .timeline-meta[_ngcontent-%COMP%]{font-size:12px;color:#666}.approval-timeline[_ngcontent-%COMP%]   .timeline-comments[_ngcontent-%COMP%]{margin-top:8px;font-size:13px;color:#333;font-style:italic}.job-id-banner[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46;padding:16px;border-radius:8px;display:flex;align-items:center;gap:12px;font-size:15px}.job-id-banner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.approval-info[_ngcontent-%COMP%]{background:#f9fafb;padding:16px;border-radius:8px;margin-bottom:20px}.approval-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}@media(max-width:768px){.form-grid[_ngcontent-%COMP%], .form-grid.cols-4[_ngcontent-%COMP%], .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}"],changeDetection:0})};function rOe(n,t){if(n&1){let e=F();o(0,"div",22),y(1,"i",23),o(2,"p"),l(3,"No job postings found"),a(),o(4,"button",4),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(5,"Create Your First Posting"),a()()}}function oOe(n,t){if(n&1&&(o(0,"div",56)(1,"small"),l(2),a()()),n&2){let e=p().$implicit;c(2),D("From: ",e.requisitionNumber)}}function aOe(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p().$implicit;c(),_(e.department)}}function sOe(n,t){if(n&1&&(o(0,"span"),y(1,"i",57),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.location)}}function lOe(n,t){if(n&1&&(o(0,"span",58),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function cOe(n,t){if(n&1&&(o(0,"span",59),l(1),a()),n&2){let e=p().$implicit;c(),D("+",e.channels.length-2)}}function dOe(n,t){if(n&1&&(o(0,"span",60),l(1),a()),n&2){let e=p().$implicit,i=p(2);c(),D(" ",i.getDaysRemaining(e.applicationDeadline)," days left ")}}function pOe(n,t){n&1&&(o(0,"span",61),l(1," Expired "),a())}function mOe(n,t){if(n&1){let e=F();o(0,"button",62),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openEditModal(r))}),y(1,"i",63),a()}}function uOe(n,t){if(n&1){let e=F();o(0,"button",64),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.publishPosting(r))}),y(1,"i",65),a()}}function gOe(n,t){if(n&1){let e=F();o(0,"button",66),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.pausePosting(r))}),y(1,"i",67),a()}}function fOe(n,t){if(n&1){let e=F();o(0,"button",68),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.resumePosting(r))}),y(1,"i",69),a()}}function hOe(n,t){if(n&1){let e=F();o(0,"button",70),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.closePosting(r))}),y(1,"i",71),a()}}function _Oe(n,t){if(n&1){let e=F();o(0,"button",72),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.deletePosting(r))}),y(1,"i",73),a()}}function vOe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"span",26),l(3),a(),b(4,oOe,3,1,"div",27),a(),o(5,"td")(6,"div",28)(7,"span",29),l(8),a(),o(9,"div",30),b(10,aOe,2,1,"span",31)(11,sOe,3,1,"span",31),a()()(),o(12,"td")(13,"span",32),l(14),a(),o(15,"div",33)(16,"small"),l(17),a()()(),o(18,"td")(19,"div",34),b(20,lOe,2,1,"span",35)(21,cOe,2,1,"span",36),a()(),o(22,"td")(23,"div",37)(24,"span",38),l(25),Le(26,"date"),a(),b(27,dOe,2,1,"span",39)(28,pOe,2,0,"span",40),a()(),o(29,"td")(30,"div",41)(31,"span",42),y(32,"i",43),l(33),a(),o(34,"span",42),y(35,"i",44),l(36),a()()(),o(37,"td")(38,"span",45),l(39),a()(),o(40,"td",46)(41,"button",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetails(r))}),y(42,"i",43),a(),b(43,mOe,2,0,"button",48)(44,uOe,2,0,"button",49)(45,gOe,2,0,"button",50)(46,fOe,2,0,"button",51)(47,hOe,2,0,"button",52),o(48,"button",53),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.duplicatePosting(r))}),y(49,"i",54),a(),b(50,_Oe,2,0,"button",55),a()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.postingNumber),c(),m("ngIf",e.requisitionNumber),c(4),_(e.jobTitle),c(2),m("ngIf",e.department),c(),m("ngIf",e.location),c(2),m("ngClass","type-"+e.postingType.toLowerCase()),c(),_(e.postingType),c(3),Ge("",e.employmentType," | ",e.workMode),c(3),m("ngForOf",e.channels.slice(0,2)),c(),m("ngIf",e.channels.length>2),c(2),ie("expired",i.isExpired(e.applicationDeadline))("expiring",i.isExpiringSoon(e.applicationDeadline)),c(2),_(rt(26,28,e.applicationDeadline,"MMM d, yyyy")),c(2),m("ngIf",!i.isExpired(e.applicationDeadline)),c(),m("ngIf",i.isExpired(e.applicationDeadline)),c(5),D(" ",e.views),c(3),D(" ",e.applications),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(4),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="ACTIVE"),c(),m("ngIf",e.status==="PAUSED"),c(),m("ngIf",e.status==="ACTIVE"||e.status==="PAUSED"),c(3),m("ngIf",e.status==="DRAFT"||e.status==="CLOSED")}}function xOe(n,t){if(n&1&&(o(0,"table",24)(1,"thead")(2,"tr")(3,"th"),l(4,"Posting ID"),a(),o(5,"th"),l(6,"Job Title"),a(),o(7,"th"),l(8,"Type"),a(),o(9,"th"),l(10,"Channels"),a(),o(11,"th"),l(12,"Deadline"),a(),o(13,"th"),l(14,"Stats"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Actions"),a()()(),o(19,"tbody"),b(20,vOe,51,31,"tr",25),a()()),n&2){let e=p();c(20),m("ngForOf",e.filteredPostings)}}function yOe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),Ge(" ",e.requisitionNumber," - ",e.jobTitle," ")}}function COe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function bOe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function MOe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function SOe(n,t){if(n&1){let e=F();o(0,"label",114)(1,"input",115),S("ngModelChange",function(r){let s=g(e).$implicit,d=p(2);return P(d.selectedChannels[s],r)||(d.selectedChannels[s]=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.updateChannels())}),a(),l(2),a()}if(n&2){let e=t.$implicit,i=p(2);c(),M("ngModel",i.selectedChannels[e]),c(),D(" ",e," ")}}function POe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function wOe(n,t){if(n&1&&(o(0,"option",113),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function EOe(n,t){if(n&1){let e=F();o(0,"span",118),l(1),o(2,"i",119),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.removeSkill(r))}),a()()}if(n&2){let e=t.$implicit;c(),D(" ",e," ")}}function OOe(n,t){if(n&1&&(o(0,"div",116),b(1,EOe,3,1,"span",117),a()),n&2){let e=p(2);c(),m("ngForOf",e.selectedPosting.skills)}}function TOe(n,t){n&1&&y(0,"i",120)}function kOe(n,t){if(n&1){let e=F();o(0,"div",74)(1,"div",75),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",76)(3,"h3"),l(4),a(),o(5,"button",77),y(6,"i",78),a()(),o(7,"div",79)(8,"div",80)(9,"h4"),l(10,"Basic Information"),a(),o(11,"div",81)(12,"div",82)(13,"label"),l(14,"Posting Number"),a(),o(15,"input",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.postingNumber,r)||(s.selectedPosting.postingNumber=r),f(r)}),a()(),o(16,"div",82)(17,"label"),l(18,"Link to Requisition"),a(),o(19,"select",84),x("change",function(r){g(e);let s=p();return f(s.linkToRequisition(r))}),o(20,"option",85),l(21,"-- Select Requisition --"),a(),b(22,yOe,2,3,"option",86),a()(),o(23,"div",87)(24,"label"),l(25,"Job Title "),o(26,"span",88),l(27,"*"),a()(),o(28,"input",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.jobTitle,r)||(s.selectedPosting.jobTitle=r),f(r)}),a()(),o(29,"div",82)(30,"label"),l(31,"Department"),a(),o(32,"input",90),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.department,r)||(s.selectedPosting.department=r),f(r)}),a()(),o(33,"div",82)(34,"label"),l(35,"Location"),a(),o(36,"input",91),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.location,r)||(s.selectedPosting.location=r),f(r)}),a()(),o(37,"div",82)(38,"label"),l(39,"Employment Type"),a(),o(40,"select",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.employmentType,r)||(s.selectedPosting.employmentType=r),f(r)}),b(41,COe,2,2,"option",86),a()(),o(42,"div",82)(43,"label"),l(44,"Work Mode"),a(),o(45,"select",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.workMode,r)||(s.selectedPosting.workMode=r),f(r)}),b(46,bOe,2,2,"option",86),a()()()(),o(47,"div",80)(48,"h4"),l(49,"Posting Configuration"),a(),o(50,"div",81)(51,"div",82)(52,"label"),l(53,"Posting Type"),a(),o(54,"select",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.postingType,r)||(s.selectedPosting.postingType=r),f(r)}),b(55,MOe,2,2,"option",86),a()(),o(56,"div",82)(57,"label"),l(58,"Application Deadline "),o(59,"span",88),l(60,"*"),a()(),o(61,"input",93),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.applicationDeadline,r)||(s.selectedPosting.applicationDeadline=r),f(r)}),a()(),o(62,"div",82)(63,"label"),l(64,"Expected Start Date"),a(),o(65,"input",93),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.startDate,r)||(s.selectedPosting.startDate=r),f(r)}),a()(),o(66,"div",87)(67,"label"),l(68,"Posting Channels"),a(),o(69,"div",94),b(70,SOe,3,2,"label",95),a()()()(),o(71,"div",80)(72,"h4"),l(73,"Salary Information"),a(),o(74,"div",96)(75,"div",82)(76,"label"),l(77,"Currency"),a(),o(78,"select",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.currency,r)||(s.selectedPosting.currency=r),f(r)}),b(79,POe,2,2,"option",86),a()(),o(80,"div",82)(81,"label"),l(82,"Min Salary"),a(),o(83,"input",97),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.minSalary,r)||(s.selectedPosting.minSalary=r),f(r)}),a()(),o(84,"div",82)(85,"label"),l(86,"Max Salary"),a(),o(87,"input",97),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.maxSalary,r)||(s.selectedPosting.maxSalary=r),f(r)}),a()(),o(88,"div",82)(89,"label",98)(90,"input",99),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.showSalary,r)||(s.selectedPosting.showSalary=r),f(r)}),a(),l(91," Show Salary "),a()()()(),o(92,"div",80)(93,"h4"),l(94,"Experience & Education"),a(),o(95,"div",81)(96,"div",82)(97,"label"),l(98,"Min Experience (Years)"),a(),o(99,"input",100),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.experienceMin,r)||(s.selectedPosting.experienceMin=r),f(r)}),a()(),o(100,"div",82)(101,"label"),l(102,"Max Experience (Years)"),a(),o(103,"input",100),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.experienceMax,r)||(s.selectedPosting.experienceMax=r),f(r)}),a()(),o(104,"div",82)(105,"label"),l(106,"Education Requirement"),a(),o(107,"select",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.education,r)||(s.selectedPosting.education=r),f(r)}),b(108,wOe,2,2,"option",86),a()(),o(109,"div",82)(110,"label"),l(111,"Required Skills"),a(),o(112,"div",101)(113,"input",102),S("ngModelChange",function(r){g(e);let s=p();return P(s.newSkill,r)||(s.newSkill=r),f(r)}),x("keyup.enter",function(){g(e);let r=p();return f(r.addSkill())}),a(),o(114,"button",103),x("click",function(){g(e);let r=p();return f(r.addSkill())}),l(115,"Add"),a()(),b(116,OOe,2,1,"div",104),a()()(),o(117,"div",80)(118,"h4"),l(119,"Job Details"),a(),o(120,"div",81)(121,"div",87)(122,"label"),l(123,"Job Description"),a(),o(124,"textarea",105),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.description,r)||(s.selectedPosting.description=r),f(r)}),a()(),o(125,"div",87)(126,"label"),l(127,"Key Responsibilities"),a(),o(128,"textarea",106),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.responsibilities,r)||(s.selectedPosting.responsibilities=r),f(r)}),a()(),o(129,"div",87)(130,"label"),l(131,"Requirements"),a(),o(132,"textarea",107),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.requirements,r)||(s.selectedPosting.requirements=r),f(r)}),a()(),o(133,"div",87)(134,"label"),l(135,"Benefits"),a(),o(136,"textarea",108),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedPosting.benefits,r)||(s.selectedPosting.benefits=r),f(r)}),a()()()()(),o(137,"div",109)(138,"button",110),l(139,"Cancel"),a(),o(140,"button",111),x("click",function(){g(e);let r=p();return f(r.savePosting())}),b(141,TOe,1,0,"i",112),l(142),a()()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Job Posting":"Create Job Posting"),c(11),M("ngModel",e.selectedPosting.postingNumber),c(7),m("ngForOf",e.requisitions),c(6),M("ngModel",e.selectedPosting.jobTitle),c(4),M("ngModel",e.selectedPosting.department),c(4),M("ngModel",e.selectedPosting.location),c(4),M("ngModel",e.selectedPosting.employmentType),c(),m("ngForOf",e.employmentTypes),c(4),M("ngModel",e.selectedPosting.workMode),c(),m("ngForOf",e.workModes),c(8),M("ngModel",e.selectedPosting.postingType),c(),m("ngForOf",e.postingTypes),c(6),M("ngModel",e.selectedPosting.applicationDeadline),c(4),M("ngModel",e.selectedPosting.startDate),c(5),m("ngForOf",e.channels),c(8),M("ngModel",e.selectedPosting.currency),c(),m("ngForOf",e.currencies),c(4),M("ngModel",e.selectedPosting.minSalary),c(4),M("ngModel",e.selectedPosting.maxSalary),c(3),M("ngModel",e.selectedPosting.showSalary),c(9),M("ngModel",e.selectedPosting.experienceMin),c(4),M("ngModel",e.selectedPosting.experienceMax),c(4),M("ngModel",e.selectedPosting.education),c(),m("ngForOf",e.educationLevels),c(5),M("ngModel",e.newSkill),c(3),m("ngIf",e.selectedPosting.skills.length),c(8),M("ngModel",e.selectedPosting.description),c(4),M("ngModel",e.selectedPosting.responsibilities),c(4),M("ngModel",e.selectedPosting.requirements),c(4),M("ngModel",e.selectedPosting.benefits),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditing?"Update Posting":"Save as Draft"," ")}}function IOe(n,t){if(n&1&&(o(0,"span"),y(1,"i",138),l(2),a()),n&2){let e=p(3);c(2),D(" ",e.viewPosting.department)}}function DOe(n,t){if(n&1&&(o(0,"div",132)(1,"span",133),l(2,"Expected Start Date"),a(),o(3,"span",134),l(4),Le(5,"date"),a()()),n&2){let e=p(3);c(4),_(rt(5,1,e.viewPosting.startDate,"MMM d, yyyy"))}}function AOe(n,t){if(n&1&&(o(0,"div",132)(1,"span",133),l(2,"Published Date"),a(),o(3,"span",134),l(4),Le(5,"date"),a()()),n&2){let e=p(3);c(4),_(rt(5,1,e.viewPosting.publishedDate,"MMM d, yyyy"))}}function ROe(n,t){if(n&1&&(o(0,"div",132)(1,"span",133),l(2,"Closed Date"),a(),o(3,"span",134),l(4),Le(5,"date"),a()()),n&2){let e=p(3);c(4),_(rt(5,1,e.viewPosting.closedDate,"MMM d, yyyy"))}}function FOe(n,t){if(n&1&&(o(0,"div",131)(1,"h4"),l(2,"Compensation"),a(),o(3,"div",132)(4,"span",133),l(5,"Salary Range"),a(),o(6,"span",134),l(7),Le(8,"number"),Le(9,"number"),a()(),o(10,"div",132)(11,"span",133),l(12,"Display to Candidates"),a(),o(13,"span",134),l(14),a()()()),n&2){let e=p(3);c(7),En(" ",e.viewPosting.currency," ",xn(8,4,e.viewPosting.minSalary)," - ",xn(9,6,e.viewPosting.maxSalary)," "),c(7),_(e.viewPosting.showSalary?"Yes":"No")}}function NOe(n,t){if(n&1&&(o(0,"span",58),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function LOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Posting Channels"),a(),o(3,"div",140),b(4,NOe,2,1,"span",35),a()()),n&2){let e=p(3);c(4),m("ngForOf",e.viewPosting.channels)}}function VOe(n,t){if(n&1&&(o(0,"span",118),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function BOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Required Skills"),a(),o(3,"div",116),b(4,VOe,2,1,"span",117),a()()),n&2){let e=p(3);c(4),m("ngForOf",e.viewPosting.skills)}}function UOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Job Description"),a(),o(3,"p",141),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewPosting.description)}}function jOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Key Responsibilities"),a(),o(3,"p",141),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewPosting.responsibilities)}}function WOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Requirements"),a(),o(3,"p",141),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewPosting.requirements)}}function zOe(n,t){if(n&1&&(o(0,"div",139)(1,"h4"),l(2,"Benefits"),a(),o(3,"p",141),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewPosting.benefits)}}function qOe(n,t){if(n&1&&(o(0,"div",79)(1,"div",125)(2,"div",126)(3,"h2"),l(4),a(),o(5,"span",127),l(6),a()(),o(7,"div",128)(8,"span"),y(9,"i",129),l(10),a(),b(11,IOe,3,1,"span",31),o(12,"span"),y(13,"i",57),l(14),a()()(),o(15,"div",130)(16,"div",131)(17,"h4"),l(18,"Posting Information"),a(),o(19,"div",132)(20,"span",133),l(21,"Posting Type"),a(),o(22,"span",134),l(23),a()(),o(24,"div",132)(25,"span",133),l(26,"Employment Type"),a(),o(27,"span",134),l(28),a()(),o(29,"div",132)(30,"span",133),l(31,"Work Mode"),a(),o(32,"span",134),l(33),a()(),o(34,"div",132)(35,"span",133),l(36,"Application Deadline"),a(),o(37,"span",134),l(38),Le(39,"date"),a()(),b(40,DOe,6,4,"div",135),a(),o(41,"div",131)(42,"h4"),l(43,"Statistics"),a(),o(44,"div",132)(45,"span",133),l(46,"Views"),a(),o(47,"span",134),l(48),a()(),o(49,"div",132)(50,"span",133),l(51,"Applications"),a(),o(52,"span",134),l(53),a()(),b(54,AOe,6,4,"div",135)(55,ROe,6,4,"div",135),a(),b(56,FOe,15,8,"div",136),o(57,"div",131)(58,"h4"),l(59,"Requirements"),a(),o(60,"div",132)(61,"span",133),l(62,"Experience"),a(),o(63,"span",134),l(64),a()(),o(65,"div",132)(66,"span",133),l(67,"Education"),a(),o(68,"span",134),l(69),a()()(),b(70,LOe,5,1,"div",137)(71,BOe,5,1,"div",137)(72,UOe,5,1,"div",137)(73,jOe,5,1,"div",137)(74,WOe,5,1,"div",137)(75,zOe,5,1,"div",137),a()()),n&2){let e=p(2);c(4),_(e.viewPosting.jobTitle),c(),m("ngClass",e.getStatusClass(e.viewPosting.status)),c(),_(e.viewPosting.status),c(4),D(" ",e.viewPosting.postingNumber),c(),m("ngIf",e.viewPosting.department),c(3),D(" ",e.viewPosting.location),c(9),_(e.viewPosting.postingType),c(5),_(e.viewPosting.employmentType),c(5),_(e.viewPosting.workMode),c(5),_(rt(39,25,e.viewPosting.applicationDeadline,"MMM d, yyyy")),c(2),m("ngIf",e.viewPosting.startDate),c(8),_(e.viewPosting.views),c(5),_(e.viewPosting.applications),c(),m("ngIf",e.viewPosting.publishedDate),c(),m("ngIf",e.viewPosting.closedDate),c(),m("ngIf",e.viewPosting.showSalary||e.viewPosting.minSalary),c(8),Ge("",e.viewPosting.experienceMin||0," - ",e.viewPosting.experienceMax||"Any"," years"),c(5),_(e.viewPosting.education||"Any"),c(),m("ngIf",e.viewPosting.channels.length),c(),m("ngIf",e.viewPosting.skills.length),c(),m("ngIf",e.viewPosting.description),c(),m("ngIf",e.viewPosting.responsibilities),c(),m("ngIf",e.viewPosting.requirements),c(),m("ngIf",e.viewPosting.benefits)}}function HOe(n,t){if(n&1){let e=F();o(0,"button",4),x("click",function(){g(e);let r=p(2);return r.openEditModal(r.viewPosting),f(r.closeViewModal())}),y(1,"i",63),l(2," Edit "),a()}}function GOe(n,t){if(n&1){let e=F();o(0,"button",142),x("click",function(){g(e);let r=p(2);return r.publishPosting(r.viewPosting),f(r.closeViewModal())}),y(1,"i",65),l(2," Publish "),a()}}function $Oe(n,t){if(n&1){let e=F();o(0,"div",74)(1,"div",75),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",76)(3,"h3"),l(4,"Job Posting Details"),a(),o(5,"button",77),y(6,"i",78),a()(),b(7,qOe,76,28,"div",121),o(8,"div",109)(9,"button",122),l(10,"Close"),a(),b(11,HOe,3,0,"button",123)(12,GOe,3,0,"button",124),a()()()}if(n&2){let e=p();c(7),m("ngIf",e.viewPosting),c(4),m("ngIf",(e.viewPosting==null?null:e.viewPosting.status)==="DRAFT"),c(),m("ngIf",(e.viewPosting==null?null:e.viewPosting.status)==="DRAFT")}}var ng=class n{constructor(t,e,i){this.recruitmentService=t;this.toastService=e;this.cdr=i}postings=[];requisitions=[];loading=!1;saving=!1;showModal=!1;isEditing=!1;selectedPosting=this.getEmptyPosting();activeTab="all";searchTerm="";postingTypes=["Internal","External","Both"];channels=["Company Website","LinkedIn","Indeed","Glassdoor","Monster","Naukri","Employee Referral","Campus","Social Media"];employmentTypes=["Full-Time","Part-Time","Contract","Intern","Temporary"];workModes=["Onsite","Remote","Hybrid"];currencies=["USD","EUR","GBP","INR","SGD","AED"];educationLevels=["High School","Associate","Bachelor","Master","PhD","Any"];showViewModal=!1;viewPosting=null;newSkill="";selectedChannels={};ngOnInit(){this.loadData(),this.initChannels()}initChannels(){this.channels.forEach(t=>this.selectedChannels[t]=!1)}loadData(){this.loading=!0,this.recruitmentService.getJobPostings().subscribe({next:t=>{this.postings=t,this.loading=!1},error:()=>{this.generateMockData(),this.loading=!1}}),this.recruitmentService.getRequisitions().subscribe({next:t=>{this.requisitions=t.filter(e=>e.status==="APPROVED")},error:()=>{this.requisitions=[]}})}generateMockData(){let t=["DRAFT","ACTIVE","PAUSED","CLOSED","EXPIRED"],e=[{title:"Senior Software Engineer",dept:"Engineering",loc:"New York"},{title:"Product Manager",dept:"Product",loc:"San Francisco"},{title:"UX Designer",dept:"Design",loc:"Remote"},{title:"Data Analyst",dept:"Analytics",loc:"Chicago"},{title:"HR Coordinator",dept:"Human Resources",loc:"Boston"},{title:"Marketing Specialist",dept:"Marketing",loc:"Los Angeles"}];this.postings=e.map((i,r)=>({id:r+1,postingNumber:`JP-2024-${String(r+1).padStart(4,"0")}`,requisitionId:r+1,requisitionNumber:`MRF-2024-${String(r+1).padStart(4,"0")}`,jobTitle:i.title,department:i.dept,location:i.loc,employmentType:this.employmentTypes[r%this.employmentTypes.length],workMode:this.workModes[r%this.workModes.length],postingType:this.postingTypes[r%this.postingTypes.length],channels:[this.channels[0],this.channels[1]],description:"We are looking for a talented professional to join our team.",requirements:`5+ years of experience
Relevant degree
Strong communication skills`,responsibilities:`Lead projects
Mentor junior team members
Collaborate with stakeholders`,benefits:`Health insurance
401k matching
Flexible PTO`,minSalary:8e4+r*1e4,maxSalary:12e4+r*15e3,currency:"USD",showSalary:r%2===0,experienceMin:3+r,experienceMax:7+r,education:this.educationLevels[r%this.educationLevels.length],skills:["JavaScript","React","Node.js","SQL"].slice(0,2+r%3),applicationDeadline:this.getFutureDate(30+r*7),startDate:this.getFutureDate(60+r*7),status:t[r%t.length],views:Math.floor(Math.random()*500)+50,applications:Math.floor(Math.random()*30)+5,publishedDate:r%2===0?this.getPastDate(10+r):void 0,createdBy:"HR Admin",createdAt:this.getPastDate(15+r)}))}getFutureDate(t){let e=new Date;return e.setDate(e.getDate()+t),e.toISOString().split("T")[0]}getPastDate(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}get filteredPostings(){let t=this.postings;if(this.activeTab!=="all"&&(t=t.filter(e=>e.status===this.activeTab.toUpperCase())),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.jobTitle.toLowerCase().includes(e)||i.postingNumber.toLowerCase().includes(e)||i.department&&i.department.toLowerCase().includes(e)||i.location.toLowerCase().includes(e))}return t}getStatusCount(t){return t==="all"?this.postings.length:this.postings.filter(e=>e.status===t.toUpperCase()).length}setActiveTab(t){this.activeTab=t}getEmptyPosting(){return{postingNumber:"",jobTitle:"",location:"",employmentType:"Full-Time",workMode:"Onsite",postingType:"External",channels:[],description:"",requirements:"",responsibilities:"",benefits:"",currency:"USD",showSalary:!1,skills:[],applicationDeadline:"",status:"DRAFT",views:0,applications:0}}openCreateModal(){this.selectedPosting=this.getEmptyPosting(),this.selectedPosting.postingNumber=this.generatePostingNumber(),this.isEditing=!1,this.initChannels(),this.showModal=!0}openEditModal(t){this.selectedPosting=Tt(me({},t),{skills:[...t.skills]}),this.isEditing=!0,this.initChannels(),t.channels.forEach(e=>this.selectedChannels[e]=!0),this.showModal=!0}generatePostingNumber(){let t=new Date().getFullYear(),e=this.postings.length+1;return`JP-${t}-${String(e).padStart(4,"0")}`}closeModal(){this.showModal=!1,this.newSkill=""}addSkill(){this.newSkill.trim()&&!this.selectedPosting.skills.includes(this.newSkill.trim())&&(this.selectedPosting.skills.push(this.newSkill.trim()),this.newSkill="")}removeSkill(t){this.selectedPosting.skills=this.selectedPosting.skills.filter(e=>e!==t)}updateChannels(){this.selectedPosting.channels=Object.keys(this.selectedChannels).filter(t=>this.selectedChannels[t])}linkToRequisition(t){let e=parseInt(t.target.value),i=this.requisitions.find(r=>r.id===e);i&&(this.selectedPosting.requisitionId=i.id,this.selectedPosting.requisitionNumber=i.requisitionNumber,this.selectedPosting.jobTitle=i.jobTitle,this.selectedPosting.department=i.department?.name||"",this.selectedPosting.location=i.workLocation,this.selectedPosting.employmentType=i.employmentType,this.selectedPosting.workMode=i.workMode,this.selectedPosting.minSalary=i.minSalary,this.selectedPosting.maxSalary=i.maxSalary,this.selectedPosting.currency=i.currency,this.selectedPosting.description=i.jobDescription||"",this.selectedPosting.requirements=i.requiredSkills||"")}savePosting(){if(!this.saving){if(this.updateChannels(),!this.selectedPosting.jobTitle||!this.selectedPosting.applicationDeadline){this.toastService.error("Please fill in all required fields");return}this.saving=!0,this.isEditing?this.recruitmentService.updateJobPosting(this.selectedPosting.id,this.selectedPosting).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges();let t=this.postings.findIndex(e=>e.id===this.selectedPosting.id);t>=0&&(this.postings[t]=me({},this.selectedPosting)),this.toastService.success("Job posting updated successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to update job posting")}}):this.recruitmentService.createJobPosting(this.selectedPosting).subscribe({next:t=>{this.saving=!1,this.cdr.detectChanges(),this.postings.unshift(t),this.toastService.success("Job posting created successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to create job posting")}})}}publishPosting(t){if(!t.channels.length){this.toastService.error("Please select at least one posting channel");return}this.recruitmentService.publishJobPosting(t.id).subscribe({next:()=>{t.status="ACTIVE",t.publishedDate=new Date().toISOString().split("T")[0],this.toastService.success("Job posting published successfully")},error:()=>{t.status="ACTIVE",t.publishedDate=new Date().toISOString().split("T")[0],this.toastService.success("Job posting published successfully")}})}pausePosting(t){t.status="PAUSED",this.toastService.info("Job posting paused")}resumePosting(t){t.status="ACTIVE",this.toastService.success("Job posting resumed")}closePosting(t){this.recruitmentService.closeJobPosting(t.id).subscribe({next:()=>{t.status="CLOSED",t.closedDate=new Date().toISOString().split("T")[0],this.toastService.info("Job posting closed")},error:()=>{t.status="CLOSED",t.closedDate=new Date().toISOString().split("T")[0],this.toastService.info("Job posting closed")}})}duplicatePosting(t){let e=Tt(me({},t),{id:void 0,postingNumber:this.generatePostingNumber(),status:"DRAFT",views:0,applications:0,publishedDate:void 0,closedDate:void 0,createdAt:new Date().toISOString(),skills:[...t.skills],channels:[...t.channels]});this.postings.unshift(e),this.toastService.success("Job posting duplicated as draft")}deletePosting(t){confirm("Are you sure you want to delete this job posting?")&&this.recruitmentService.deleteJobPosting(t.id).subscribe({next:()=>{this.postings=this.postings.filter(e=>e.id!==t.id),this.toastService.success("Job posting deleted")},error:()=>{this.postings=this.postings.filter(e=>e.id!==t.id),this.toastService.success("Job posting deleted")}})}viewDetails(t){this.viewPosting=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewPosting=null}getStatusClass(t){return"status-"+t.toLowerCase()}getDaysRemaining(t){let e=new Date,r=new Date(t).getTime()-e.getTime();return Math.ceil(r/(1e3*60*60*24))}isExpired(t){return this.getDaysRemaining(t)<0}isExpiringSoon(t){let e=this.getDaysRemaining(t);return e>=0&&e<=7}static \u0275fac=function(e){return new(e||n)(V(ma),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment-postings"]],decls:45,vars:20,consts:[[1,"postings-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","draft",3,"click"],[1,"stat-card","active",3,"click"],[1,"stat-card","paused",3,"click"],[1,"stat-card","closed",3,"click"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search by title, ID, department, location...",3,"ngModelChange","ngModel"],[1,"content-card"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fa","fa-briefcase"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"posting-number"],["class","posting-meta",4,"ngIf"],[1,"job-info"],[1,"job-title"],[1,"job-meta"],[4,"ngIf"],[1,"type-badge",3,"ngClass"],[1,"work-info"],[1,"channels-list"],["class","channel-tag",4,"ngFor","ngForOf"],["class","channel-more",4,"ngIf"],[1,"deadline-info"],[1,"deadline-date"],["class","deadline-days",4,"ngIf"],["class","deadline-days expired",4,"ngIf"],[1,"stats-info"],[1,"stat-item"],[1,"fa","fa-eye"],[1,"fa","fa-users"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","View",1,"btn-icon",3,"click"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon success","title","Publish",3,"click",4,"ngIf"],["class","btn-icon warning","title","Pause",3,"click",4,"ngIf"],["class","btn-icon success","title","Resume",3,"click",4,"ngIf"],["class","btn-icon","title","Close",3,"click",4,"ngIf"],["title","Duplicate",1,"btn-icon",3,"click"],[1,"fa","fa-copy"],["class","btn-icon danger","title","Delete",3,"click",4,"ngIf"],[1,"posting-meta"],[1,"fa","fa-map-marker"],[1,"channel-tag"],[1,"channel-more"],[1,"deadline-days"],[1,"deadline-days","expired"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-pencil"],["title","Publish",1,"btn-icon","success",3,"click"],[1,"fa","fa-rocket"],["title","Pause",1,"btn-icon","warning",3,"click"],[1,"fa","fa-pause"],["title","Resume",1,"btn-icon","success",3,"click"],[1,"fa","fa-play"],["title","Close",1,"btn-icon",3,"click"],[1,"fa","fa-times-circle"],["title","Delete",1,"btn-icon","danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"fa","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"readonly",3,"ngModelChange","ngModel"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","full-width"],[1,"required"],["type","text","placeholder","e.g., Senior Software Engineer",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Engineering",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., New York, NY",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"checkbox-grid"],["class","checkbox-item",4,"ngFor","ngForOf"],[1,"form-grid","cols-4"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],[1,"checkbox-inline"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],[1,"skills-input"],["type","text","placeholder","Add skill...",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-secondary",3,"click"],["class","skill-tags",4,"ngIf"],["rows","4","placeholder","Describe the role and its purpose...",3,"ngModelChange","ngModel"],["rows","4","placeholder","List the main responsibilities...",3,"ngModelChange","ngModel"],["rows","4","placeholder","List the qualifications and requirements...",3,"ngModelChange","ngModel"],["rows","3","placeholder","List the benefits and perks...",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"disabled"],[1,"btn","btn-primary",3,"click","disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"skill-tags"],["class","skill-tag",4,"ngFor","ngForOf"],[1,"skill-tag"],[1,"fa","fa-times",3,"click"],[1,"fa","fa-spinner","fa-spin"],["class","modal-body",4,"ngIf"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"detail-header"],[1,"detail-title"],[1,"status-badge","large",3,"ngClass"],[1,"detail-meta"],[1,"fa","fa-hashtag"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],["class","detail-section",4,"ngIf"],["class","detail-section full",4,"ngIf"],[1,"fa","fa-building"],[1,"detail-section","full"],[1,"channel-tags"],[1,"detail-text"],[1,"btn","btn-success",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Job Postings"),a(),o(5,"p",3),l(6,"Manage internal and external job postings"),a()(),o(7,"button",4),x("click",function(){return i.openCreateModal()}),y(8,"i",5),l(9," Create Posting "),a()(),o(10,"div",6)(11,"div",7),x("click",function(){return i.setActiveTab("all")}),o(12,"div",8),l(13),a(),o(14,"div",9),l(15,"Total Postings"),a()(),o(16,"div",10),x("click",function(){return i.setActiveTab("draft")}),o(17,"div",8),l(18),a(),o(19,"div",9),l(20,"Drafts"),a()(),o(21,"div",11),x("click",function(){return i.setActiveTab("active")}),o(22,"div",8),l(23),a(),o(24,"div",9),l(25,"Active"),a()(),o(26,"div",12),x("click",function(){return i.setActiveTab("paused")}),o(27,"div",8),l(28),a(),o(29,"div",9),l(30,"Paused"),a()(),o(31,"div",13),x("click",function(){return i.setActiveTab("closed")}),o(32,"div",8),l(33),a(),o(34,"div",9),l(35,"Closed"),a()()(),o(36,"div",14)(37,"div",15),y(38,"i",16),o(39,"input",17),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),o(40,"div",18),b(41,rOe,6,0,"div",19)(42,xOe,21,1,"table",20),a()(),b(43,kOe,143,34,"div",21)(44,$Oe,13,3,"div",21)),e&2&&(c(11),ie("active",i.activeTab==="all"),c(2),_(i.getStatusCount("all")),c(3),ie("active",i.activeTab==="draft"),c(2),_(i.getStatusCount("draft")),c(3),ie("active",i.activeTab==="active"),c(2),_(i.getStatusCount("active")),c(3),ie("active",i.activeTab==="paused"),c(2),_(i.getStatusCount("paused")),c(3),ie("active",i.activeTab==="closed"),c(2),_(i.getStatusCount("closed")),c(6),M("ngModel",i.searchTerm),c(2),m("ngIf",!i.loading&&i.filteredPostings.length===0),c(),m("ngIf",!i.loading&&i.filteredPostings.length>0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,Ee,Rt,yn,ir],styles:[".postings-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;text-align:center;box-shadow:0 2px 4px #00000014;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px}.stat-card.draft[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6b7280}.stat-card.active[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-card.paused[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.closed[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6b7280}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#ddd;margin-bottom:16px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.posting-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.posting-meta[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:12px}.job-info[_ngcontent-%COMP%]   .job-title[_ngcontent-%COMP%]{font-weight:500;color:#333}.job-info[_ngcontent-%COMP%]   .job-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:4px;font-size:12px;color:#666}.job-info[_ngcontent-%COMP%]   .job-meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:4px;font-size:11px;font-weight:500}.type-badge.type-internal[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.type-badge.type-external[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.type-badge.type-both[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.work-info[_ngcontent-%COMP%]{margin-top:4px}.work-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:11px}.channels-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.channel-tag[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151;padding:2px 8px;border-radius:4px;font-size:11px}.channel-more[_ngcontent-%COMP%]{color:teal;font-size:11px;font-weight:500}.channel-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.channel-tags[_ngcontent-%COMP%]   .channel-tag[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c;padding:6px 12px;border-radius:6px;font-size:13px}.deadline-info[_ngcontent-%COMP%]   .deadline-date[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333}.deadline-info[_ngcontent-%COMP%]   .deadline-days[_ngcontent-%COMP%]{font-size:12px;color:#666}.deadline-info.expiring[_ngcontent-%COMP%]   .deadline-date[_ngcontent-%COMP%], .deadline-info.expiring[_ngcontent-%COMP%]   .deadline-days[_ngcontent-%COMP%]{color:#f59e0b}.deadline-info.expired[_ngcontent-%COMP%]   .deadline-date[_ngcontent-%COMP%], .deadline-info.expired[_ngcontent-%COMP%]   .deadline-days.expired[_ngcontent-%COMP%]{color:#ef4444}.stats-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{font-size:13px;color:#666}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;color:#999}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.status-badge.status-active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.status-paused[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.status-closed[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.status-badge.status-expired[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.large[_ngcontent-%COMP%]{padding:6px 14px;font-size:13px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:teal}.btn-icon.success[_ngcontent-%COMP%]:hover{color:#10b981}.btn-icon.danger[_ngcontent-%COMP%]:hover{color:#ef4444}.btn-icon.warning[_ngcontent-%COMP%]:hover{color:#f59e0b}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#059669}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#dc2626}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:500px;max-width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;font-size:16px}.btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f9fafb}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;color:teal;font-weight:600;padding-bottom:8px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-grid.cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#666}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.checkbox-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#374151;cursor:pointer}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.checkbox-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:24px}.checkbox-inline[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.skills-input[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.skills-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.skills-input[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 16px}.skill-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.skill-tag[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c;padding:4px 12px;border-radius:16px;font-size:13px;display:flex;align-items:center;gap:8px}.skill-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;opacity:.7}.skill-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:1}.detail-header[_ngcontent-%COMP%]{margin-bottom:24px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:8px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#333}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]{display:flex;gap:24px;color:#666;font-size:14px}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:24px}.detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:16px}.detail-section.full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:teal;font-weight:600}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.detail-text[_ngcontent-%COMP%]{color:#333;line-height:1.6;white-space:pre-wrap}@media(max-width:768px){.form-grid[_ngcontent-%COMP%], .form-grid.cols-4[_ngcontent-%COMP%], .checkbox-grid[_ngcontent-%COMP%], .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}"],changeDetection:0})};function YOe(n,t){if(n&1){let e=F();o(0,"div",23),y(1,"i",24),o(2,"p"),l(3,"No candidates found"),a(),o(4,"button",4),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(5,"Add First Candidate"),a()()}}function JOe(n,t){if(n&1&&(o(0,"span",52),l(1),a()),n&2){let e=p().$implicit;c(),D(" Currently: ",e.currentJobTitle," ")}}function KOe(n,t){if(n&1&&(o(0,"div",53),l(1),a()),n&2){let e=p().$implicit;c(),_(e.sourceDetails)}}function QOe(n,t){if(n&1&&y(0,"i",54),n&2){let e=t.$implicit;ie("filled",e===1)}}function XOe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",27)(3,"div",28),l(4),a(),o(5,"div",29)(6,"span",30),l(7),a(),o(8,"span",31),l(9),a(),o(10,"span",32),l(11),a()()()(),o(12,"td")(13,"div",33)(14,"span",34),l(15),a(),b(16,JOe,2,1,"span",35),a()(),o(17,"td")(18,"span",36),l(19),a(),o(20,"div",37),l(21),a()(),o(22,"td")(23,"span",38),l(24),a(),b(25,KOe,2,1,"div",39),a(),o(26,"td")(27,"div",40),b(28,QOe,1,2,"i",41),a()(),o(29,"td")(30,"span",42),l(31),a()(),o(32,"td",43)(33,"button",44),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetails(r))}),y(34,"i",45),a(),o(35,"button",46),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openEditModal(r))}),y(36,"i",47),a(),o(37,"button",48),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openStageModal(r))}),y(38,"i",49),a(),o(39,"button",50),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteCandidate(r))}),y(40,"i",51),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(4),Ge("",e.firstName[0],"",e.lastName[0]),c(3),_(i.getFullName(e)),c(2),_(e.candidateNumber),c(2),_(e.email),c(4),_(e.appliedPosition||"Not specified"),c(),m("ngIf",e.currentJobTitle),c(3),D("",e.experienceYears," years"),c(2),_(e.education),c(3),_(e.source),c(),m("ngIf",e.sourceDetails),c(3),m("ngForOf",i.getRatingStars(e.rating||0)),c(2),m("ngClass",i.getStageClass(e.stage)),c(),_(e.stage)}}function ZOe(n,t){if(n&1&&(o(0,"table",25)(1,"thead")(2,"tr")(3,"th"),l(4,"Candidate"),a(),o(5,"th"),l(6,"Position"),a(),o(7,"th"),l(8,"Experience"),a(),o(9,"th"),l(10,"Source"),a(),o(11,"th"),l(12,"Rating"),a(),o(13,"th"),l(14,"Stage"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,XOe,41,14,"tr",26),a()()),n&2){let e=p();c(18),m("ngForOf",e.filteredCandidates)}}function e4e(n,t){if(n&1&&(o(0,"option",93),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.jobTitle)}}function t4e(n,t){if(n&1&&(o(0,"option",93),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function n4e(n,t){if(n&1){let e=F();o(0,"span",96),l(1),o(2,"i",97),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.removeSkill(r))}),a()()}if(n&2){let e=t.$implicit;c(),D(" ",e," ")}}function i4e(n,t){if(n&1&&(o(0,"div",94),b(1,n4e,3,1,"span",95),a()),n&2){let e=p(2);c(),m("ngForOf",e.selectedCandidate.skills)}}function r4e(n,t){if(n&1&&(o(0,"option",93),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function o4e(n,t){if(n&1){let e=F();o(0,"span",100),l(1),o(2,"i",97),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.removeTag(r))}),a()()}if(n&2){let e=t.$implicit;c(),D(" ",e," ")}}function a4e(n,t){if(n&1&&(o(0,"div",98),b(1,o4e,3,1,"span",99),a()),n&2){let e=p(2);c(),m("ngForOf",e.selectedCandidate.tags)}}function s4e(n,t){n&1&&y(0,"i",101)}function l4e(n,t){if(n&1){let e=F();o(0,"div",55)(1,"div",56),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",57)(3,"h3"),l(4),a(),o(5,"button",58),y(6,"i",59),a()(),o(7,"div",60)(8,"div",61)(9,"h4"),l(10,"Personal Information"),a(),o(11,"div",62)(12,"div",63)(13,"label"),l(14,"Candidate ID"),a(),o(15,"input",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.candidateNumber,r)||(s.selectedCandidate.candidateNumber=r),f(r)}),a()(),o(16,"div",63)(17,"label"),l(18,"Applied Position"),a(),o(19,"select",65),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.appliedPositionId,r)||(s.selectedCandidate.appliedPositionId=r),f(r)}),o(20,"option",66),l(21,"-- Select Position --"),a(),b(22,e4e,2,2,"option",67),a()(),o(23,"div",63)(24,"label"),l(25,"First Name "),o(26,"span",68),l(27,"*"),a()(),o(28,"input",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.firstName,r)||(s.selectedCandidate.firstName=r),f(r)}),a()(),o(29,"div",63)(30,"label"),l(31,"Last Name "),o(32,"span",68),l(33,"*"),a()(),o(34,"input",70),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.lastName,r)||(s.selectedCandidate.lastName=r),f(r)}),a()(),o(35,"div",63)(36,"label"),l(37,"Email "),o(38,"span",68),l(39,"*"),a()(),o(40,"input",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.email,r)||(s.selectedCandidate.email=r),f(r)}),a()(),o(41,"div",63)(42,"label"),l(43,"Phone"),a(),o(44,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.phone,r)||(s.selectedCandidate.phone=r),f(r)}),a()(),o(45,"div",63)(46,"label"),l(47,"Location"),a(),o(48,"input",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.location,r)||(s.selectedCandidate.location=r),f(r)}),a()()()(),o(49,"div",61)(50,"h4"),l(51,"Professional Background"),a(),o(52,"div",62)(53,"div",63)(54,"label"),l(55,"Current Job Title"),a(),o(56,"input",74),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.currentJobTitle,r)||(s.selectedCandidate.currentJobTitle=r),f(r)}),a()(),o(57,"div",63)(58,"label"),l(59,"Current Company"),a(),o(60,"input",75),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.currentCompany,r)||(s.selectedCandidate.currentCompany=r),f(r)}),a()(),o(61,"div",63)(62,"label"),l(63,"Years of Experience"),a(),o(64,"input",76),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.experienceYears,r)||(s.selectedCandidate.experienceYears=r),f(r)}),a()(),o(65,"div",63)(66,"label"),l(67,"Education"),a(),o(68,"select",65),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.education,r)||(s.selectedCandidate.education=r),f(r)}),b(69,t4e,2,2,"option",67),a()(),o(70,"div",77)(71,"label"),l(72,"Skills"),a(),o(73,"div",78)(74,"input",79),S("ngModelChange",function(r){g(e);let s=p();return P(s.newSkill,r)||(s.newSkill=r),f(r)}),x("keyup.enter",function(){g(e);let r=p();return f(r.addSkill())}),a(),o(75,"button",80),x("click",function(){g(e);let r=p();return f(r.addSkill())}),l(76,"Add"),a()(),b(77,i4e,2,1,"div",81),a()()(),o(78,"div",61)(79,"h4"),l(80,"Source & Additional Info"),a(),o(81,"div",62)(82,"div",63)(83,"label"),l(84,"Source"),a(),o(85,"select",65),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.source,r)||(s.selectedCandidate.source=r),f(r)}),b(86,r4e,2,2,"option",67),a()(),o(87,"div",63)(88,"label"),l(89,"Source Details"),a(),o(90,"input",82),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.sourceDetails,r)||(s.selectedCandidate.sourceDetails=r),f(r)}),a()(),o(91,"div",63)(92,"label"),l(93,"Expected Salary"),a(),o(94,"input",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.expectedSalary,r)||(s.selectedCandidate.expectedSalary=r),f(r)}),a()(),o(95,"div",63)(96,"label"),l(97,"Notice Period (Days)"),a(),o(98,"input",76),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.noticePeriod,r)||(s.selectedCandidate.noticePeriod=r),f(r)}),a()(),o(99,"div",63)(100,"label"),l(101,"LinkedIn URL"),a(),o(102,"input",84),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.linkedinUrl,r)||(s.selectedCandidate.linkedinUrl=r),f(r)}),a()(),o(103,"div",63)(104,"label"),l(105,"Portfolio URL"),a(),o(106,"input",85),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.portfolioUrl,r)||(s.selectedCandidate.portfolioUrl=r),f(r)}),a()(),o(107,"div",77)(108,"label"),l(109,"Tags"),a(),o(110,"div",78)(111,"input",86),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTag,r)||(s.newTag=r),f(r)}),x("keyup.enter",function(){g(e);let r=p();return f(r.addTag())}),a(),o(112,"button",80),x("click",function(){g(e);let r=p();return f(r.addTag())}),l(113,"Add"),a()(),b(114,a4e,2,1,"div",87),a(),o(115,"div",77)(116,"label"),l(117,"Notes"),a(),o(118,"textarea",88),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedCandidate.notes,r)||(s.selectedCandidate.notes=r),f(r)}),a()()()()(),o(119,"div",89)(120,"button",90),l(121,"Cancel"),a(),o(122,"button",91),x("click",function(){g(e);let r=p();return f(r.saveCandidate())}),b(123,s4e,1,0,"i",92),l(124),a()()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Candidate":"Add Candidate"),c(11),M("ngModel",e.selectedCandidate.candidateNumber),c(4),M("ngModel",e.selectedCandidate.appliedPositionId),c(3),m("ngForOf",e.jobPostings),c(6),M("ngModel",e.selectedCandidate.firstName),c(6),M("ngModel",e.selectedCandidate.lastName),c(6),M("ngModel",e.selectedCandidate.email),c(4),M("ngModel",e.selectedCandidate.phone),c(4),M("ngModel",e.selectedCandidate.location),c(8),M("ngModel",e.selectedCandidate.currentJobTitle),c(4),M("ngModel",e.selectedCandidate.currentCompany),c(4),M("ngModel",e.selectedCandidate.experienceYears),c(4),M("ngModel",e.selectedCandidate.education),c(),m("ngForOf",e.educationLevels),c(5),M("ngModel",e.newSkill),c(3),m("ngIf",e.selectedCandidate.skills.length),c(8),M("ngModel",e.selectedCandidate.source),c(),m("ngForOf",e.sources),c(4),M("ngModel",e.selectedCandidate.sourceDetails),c(4),M("ngModel",e.selectedCandidate.expectedSalary),c(4),M("ngModel",e.selectedCandidate.noticePeriod),c(4),M("ngModel",e.selectedCandidate.linkedinUrl),c(4),M("ngModel",e.selectedCandidate.portfolioUrl),c(5),M("ngModel",e.newTag),c(3),m("ngIf",e.selectedCandidate.tags.length),c(4),M("ngModel",e.selectedCandidate.notes),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),m("ngIf",e.saving),c(),D(" ",e.saving?"Saving...":e.isEditing?"Update Candidate":"Add Candidate"," ")}}function c4e(n,t){if(n&1&&(o(0,"span"),y(1,"i",126),l(2),a()),n&2){let e=p(3);c(2),D(" ",e.viewCandidate.location)}}function d4e(n,t){if(n&1&&y(0,"i",54),n&2){let e=t.$implicit;ie("filled",e===1)}}function p4e(n,t){if(n&1&&(o(0,"div",117)(1,"span",118),l(2,"Source Details"),a(),o(3,"span",119),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewCandidate.sourceDetails)}}function m4e(n,t){if(n&1&&(o(0,"div",117)(1,"span",118),l(2,"Expected Salary"),a(),o(3,"span",119),l(4),Le(5,"number"),a()()),n&2){let e=p(3);c(4),_(xn(5,1,e.viewCandidate.expectedSalary))}}function u4e(n,t){if(n&1&&(o(0,"div",117)(1,"span",118),l(2,"Notice Period"),a(),o(3,"span",119),l(4),a()()),n&2){let e=p(3);c(4),D("",e.viewCandidate.noticePeriod," days")}}function g4e(n,t){if(n&1&&(o(0,"span",96),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function f4e(n,t){if(n&1&&(o(0,"div",123)(1,"h4"),l(2,"Skills"),a(),o(3,"div",94),b(4,g4e,2,1,"span",95),a()()),n&2){let e=p(3);c(4),m("ngForOf",e.viewCandidate.skills)}}function h4e(n,t){if(n&1&&(o(0,"span",100),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function _4e(n,t){if(n&1&&(o(0,"div",123)(1,"h4"),l(2,"Tags"),a(),o(3,"div",98),b(4,h4e,2,1,"span",99),a()()),n&2){let e=p(3);c(4),m("ngForOf",e.viewCandidate.tags)}}function v4e(n,t){if(n&1&&(o(0,"div",136),l(1),a()),n&2){let e=p().$implicit;c(),D("By: ",e.movedBy)}}function x4e(n,t){if(n&1&&(o(0,"div",137),l(1),a()),n&2){let e=p().$implicit;c(),_(e.notes)}}function y4e(n,t){if(n&1&&(o(0,"div",127)(1,"div",128),y(2,"i",129),a(),o(3,"div",130)(4,"div",131)(5,"span",132),l(6),a(),o(7,"span",133),l(8),Le(9,"date"),a()(),b(10,v4e,2,1,"div",134)(11,x4e,2,1,"div",135),a()()),n&2){let e=t.$implicit,i=p(3);c(),m("ngClass",i.getStageClass(e.stage)),c(5),_(e.stage),c(2),_(rt(9,5,e.movedAt,"MMM d, yyyy")),c(2),m("ngIf",e.movedBy),c(),m("ngIf",e.notes)}}function C4e(n,t){if(n&1&&(o(0,"div",123)(1,"h4"),l(2,"Notes"),a(),o(3,"p",138),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewCandidate.notes)}}function b4e(n,t){if(n&1&&(o(0,"div",60)(1,"div",105)(2,"div",106),l(3),a(),o(4,"div",107)(5,"h2"),l(6),a(),o(7,"p",108),l(8),a(),o(9,"div",109)(10,"span"),y(11,"i",110),l(12),a(),o(13,"span"),y(14,"i",111),l(15),a(),o(16,"span"),y(17,"i",112),l(18),a(),b(19,c4e,3,1,"span",113),a()(),o(20,"span",114),l(21),a()(),o(22,"div",115)(23,"div",116)(24,"h4"),l(25,"Applied Position"),a(),o(26,"div",117)(27,"span",118),l(28,"Position"),a(),o(29,"span",119),l(30),a()(),o(31,"div",117)(32,"span",118),l(33,"Experience"),a(),o(34,"span",119),l(35),a()(),o(36,"div",117)(37,"span",118),l(38,"Education"),a(),o(39,"span",119),l(40),a()(),o(41,"div",117)(42,"span",118),l(43,"Rating"),a(),o(44,"span",120),b(45,d4e,1,2,"i",41),a()()(),o(46,"div",116)(47,"h4"),l(48,"Source & Compensation"),a(),o(49,"div",117)(50,"span",118),l(51,"Source"),a(),o(52,"span",119),l(53),a()(),b(54,p4e,5,1,"div",121)(55,m4e,6,3,"div",121)(56,u4e,5,1,"div",121),a(),b(57,f4e,5,1,"div",122)(58,_4e,5,1,"div",122),o(59,"div",123)(60,"h4"),l(61,"Stage History"),a(),o(62,"div",124),b(63,y4e,12,8,"div",125),a()(),b(64,C4e,5,1,"div",122),a()()),n&2){let e=p(2);c(3),Ge("",e.viewCandidate.firstName[0],"",e.viewCandidate.lastName[0]),c(3),_(e.getFullName(e.viewCandidate)),c(2),Ge("",e.viewCandidate.currentJobTitle," at ",e.viewCandidate.currentCompany),c(4),D(" ",e.viewCandidate.candidateNumber),c(3),D(" ",e.viewCandidate.email),c(3),D(" ",e.viewCandidate.phone),c(),m("ngIf",e.viewCandidate.location),c(),m("ngClass",e.getStageClass(e.viewCandidate.stage)),c(),_(e.viewCandidate.stage),c(9),_(e.viewCandidate.appliedPosition||"Not specified"),c(5),D("",e.viewCandidate.experienceYears," years"),c(5),_(e.viewCandidate.education),c(5),m("ngForOf",e.getRatingStars(e.viewCandidate.rating||0)),c(8),_(e.viewCandidate.source),c(),m("ngIf",e.viewCandidate.sourceDetails),c(),m("ngIf",e.viewCandidate.expectedSalary),c(),m("ngIf",e.viewCandidate.noticePeriod),c(),m("ngIf",e.viewCandidate.skills.length),c(),m("ngIf",e.viewCandidate.tags.length),c(5),m("ngForOf",e.viewCandidate.stageHistory),c(),m("ngIf",e.viewCandidate.notes)}}function M4e(n,t){if(n&1){let e=F();o(0,"div",55)(1,"div",56),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",57)(3,"h3"),l(4,"Candidate Profile"),a(),o(5,"button",58),y(6,"i",59),a()(),b(7,b4e,65,23,"div",102),o(8,"div",89)(9,"button",103),l(10,"Close"),a(),o(11,"button",104),x("click",function(){g(e);let r=p();return r.openStageModal(r.viewCandidate),f(r.closeViewModal())}),y(12,"i",49),l(13," Update Stage "),a(),o(14,"button",4),x("click",function(){g(e);let r=p();return r.openEditModal(r.viewCandidate),f(r.closeViewModal())}),y(15,"i",47),l(16," Edit "),a()()()()}if(n&2){let e=p();c(7),m("ngIf",e.viewCandidate)}}function S4e(n,t){if(n&1&&(o(0,"option",93),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function P4e(n,t){if(n&1){let e=F();o(0,"div",60)(1,"div",142)(2,"strong"),l(3),a(),o(4,"span",42),l(5),a()(),o(6,"div",63)(7,"label"),l(8,"Move to Stage "),o(9,"span",68),l(10,"*"),a()(),o(11,"select",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newStage,r)||(s.newStage=r),f(r)}),b(12,S4e,2,2,"option",67),a()(),o(13,"div",63)(14,"label"),l(15,"Notes"),a(),o(16,"textarea",143),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.stageNotes,r)||(s.stageNotes=r),f(r)}),a()()()}if(n&2){let e=p(2);c(3),_(e.getFullName(e.stageCandidate)),c(),m("ngClass",e.getStageClass(e.stageCandidate.stage)),c(),_(e.stageCandidate.stage),c(6),M("ngModel",e.newStage),c(),m("ngForOf",e.stages),c(4),M("ngModel",e.stageNotes)}}function w4e(n,t){if(n&1){let e=F();o(0,"div",55)(1,"div",139),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",57)(3,"h3"),l(4,"Update Candidate Stage"),a(),o(5,"button",140),x("click",function(){g(e);let r=p();return f(r.closeStageModal())}),y(6,"i",59),a()(),b(7,P4e,17,6,"div",102),o(8,"div",89)(9,"button",141),x("click",function(){g(e);let r=p();return f(r.closeStageModal())}),l(10,"Cancel"),a(),o(11,"button",4),x("click",function(){g(e);let r=p();return f(r.updateStage())}),l(12,"Update Stage"),a()()()()}if(n&2){let e=p();c(7),m("ngIf",e.stageCandidate)}}var ig=class n{constructor(t,e,i){this.recruitmentService=t;this.toastService=e;this.cdr=i}candidates=[];jobPostings=[];loading=!1;saving=!1;showModal=!1;isEditing=!1;selectedCandidate=this.getEmptyCandidate();activeTab="all";searchTerm="";sources=["LinkedIn","Indeed","Referral","Company Website","Job Fair","Agency","Campus","Other"];stages=["NEW","SCREENING","INTERVIEW","ASSESSMENT","OFFER","HIRED","REJECTED","WITHDRAWN"];educationLevels=["High School","Associate","Bachelor","Master","PhD"];showViewModal=!1;viewCandidate=null;showStageModal=!1;stageCandidate=null;newStage="";stageNotes="";newSkill="";newTag="";ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.recruitmentService.getCandidates().subscribe({next:t=>{this.candidates=t,this.loading=!1},error:()=>{this.generateMockData(),this.loading=!1}}),this.recruitmentService.getJobPostings().subscribe({next:t=>{this.jobPostings=t.filter(e=>e.status==="ACTIVE")},error:()=>{this.jobPostings=[]}})}generateMockData(){let t=[{first:"John",last:"Smith"},{first:"Emily",last:"Johnson"},{first:"Michael",last:"Williams"},{first:"Sarah",last:"Brown"},{first:"David",last:"Jones"},{first:"Jessica",last:"Davis"},{first:"Robert",last:"Miller"},{first:"Ashley",last:"Wilson"}],e=["Senior Software Engineer","Product Manager","UX Designer","Data Analyst"];this.candidates=t.map((i,r)=>({id:r+1,candidateNumber:`CAN-2024-${String(r+1).padStart(4,"0")}`,firstName:i.first,lastName:i.last,email:`${i.first.toLowerCase()}.${i.last.toLowerCase()}@email.com`,phone:`+1 555-${String(100+r).padStart(3,"0")}-${String(1e3+r*111).padStart(4,"0")}`,currentJobTitle:"Software Developer",currentCompany:["Google","Microsoft","Amazon","Apple"][r%4],location:["New York","San Francisco","Chicago","Boston"][r%4],experienceYears:3+r%8,education:this.educationLevels[r%this.educationLevels.length],skills:["JavaScript","Python","React","Node.js","SQL"].slice(0,2+r%4),source:this.sources[r%this.sources.length],sourceDetails:r%3===0?"Employee: John Doe":void 0,expectedSalary:8e4+r*1e4,noticePeriod:[15,30,60,90][r%4],stage:this.stages[r%this.stages.length],stageHistory:[{stage:"NEW",movedBy:"System",movedAt:this.getPastDate(10+r),notes:"Application received"},{stage:"SCREENING",movedBy:"HR Admin",movedAt:this.getPastDate(8+r),notes:"Resume reviewed"}],appliedPositionId:r%4+1,appliedPosition:e[r%4],rating:3+r%3,notes:"Strong candidate with good experience",tags:["Hot Candidate","Priority","Excellent Skills"].slice(0,1+r%3),status:"ACTIVE",createdAt:this.getPastDate(10+r)}))}getPastDate(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}get filteredCandidates(){let t=this.candidates;if(this.activeTab!=="all"&&(t=t.filter(e=>e.stage===this.activeTab.toUpperCase())),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.firstName.toLowerCase().includes(e)||i.lastName.toLowerCase().includes(e)||i.email.toLowerCase().includes(e)||i.candidateNumber.toLowerCase().includes(e)||i.appliedPosition&&i.appliedPosition.toLowerCase().includes(e))}return t}getStageCount(t){return t==="all"?this.candidates.length:this.candidates.filter(e=>e.stage===t.toUpperCase()).length}setActiveTab(t){this.activeTab=t}getEmptyCandidate(){return{candidateNumber:"",firstName:"",lastName:"",email:"",phone:"",experienceYears:0,education:"Bachelor",skills:[],source:"Company Website",stage:"NEW",stageHistory:[],tags:[],status:"ACTIVE"}}openCreateModal(){this.selectedCandidate=this.getEmptyCandidate(),this.selectedCandidate.candidateNumber=this.generateCandidateNumber(),this.isEditing=!1,this.showModal=!0}openEditModal(t){this.selectedCandidate=Tt(me({},t),{skills:[...t.skills],tags:[...t.tags],stageHistory:[...t.stageHistory]}),this.isEditing=!0,this.showModal=!0}generateCandidateNumber(){let t=new Date().getFullYear(),e=this.candidates.length+1;return`CAN-${t}-${String(e).padStart(4,"0")}`}closeModal(){this.showModal=!1,this.newSkill="",this.newTag=""}addSkill(){this.newSkill.trim()&&!this.selectedCandidate.skills.includes(this.newSkill.trim())&&(this.selectedCandidate.skills.push(this.newSkill.trim()),this.newSkill="")}removeSkill(t){this.selectedCandidate.skills=this.selectedCandidate.skills.filter(e=>e!==t)}addTag(){this.newTag.trim()&&!this.selectedCandidate.tags.includes(this.newTag.trim())&&(this.selectedCandidate.tags.push(this.newTag.trim()),this.newTag="")}removeTag(t){this.selectedCandidate.tags=this.selectedCandidate.tags.filter(e=>e!==t)}saveCandidate(){if(!this.saving){if(!this.selectedCandidate.firstName||!this.selectedCandidate.lastName||!this.selectedCandidate.email){this.toastService.error("Please fill in all required fields");return}this.saving=!0,this.isEditing?this.recruitmentService.updateCandidate(this.selectedCandidate.id,this.selectedCandidate).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges();let t=this.candidates.findIndex(e=>e.id===this.selectedCandidate.id);t>=0&&(this.candidates[t]=me({},this.selectedCandidate)),this.toastService.success("Candidate updated successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to update candidate")}}):(this.selectedCandidate.stageHistory=[{stage:"NEW",movedBy:"System",movedAt:new Date().toISOString(),notes:"Candidate added"}],this.recruitmentService.createCandidate(this.selectedCandidate).subscribe({next:t=>{this.saving=!1,this.cdr.detectChanges(),this.candidates.unshift(t),this.toastService.success("Candidate added successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to add candidate")}}))}}viewDetails(t){this.viewCandidate=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewCandidate=null}openStageModal(t){this.stageCandidate=t,this.newStage=t.stage,this.stageNotes="",this.showStageModal=!0}closeStageModal(){this.showStageModal=!1,this.stageCandidate=null,this.newStage="",this.stageNotes=""}updateStage(){if(!this.stageCandidate||!this.newStage)return;let t={stage:this.newStage,movedBy:"Current User",movedAt:new Date().toISOString(),notes:this.stageNotes};this.stageCandidate.stage=this.newStage,this.stageCandidate.stageHistory.push(t),this.recruitmentService.updateCandidateStatus(this.stageCandidate.id,this.newStage,this.stageNotes).subscribe({next:()=>{this.toastService.success("Candidate stage updated"),this.closeStageModal()},error:()=>{this.toastService.success("Candidate stage updated"),this.closeStageModal()}})}deleteCandidate(t){confirm("Are you sure you want to delete this candidate?")&&this.recruitmentService.deleteCandidate(t.id).subscribe({next:()=>{this.candidates=this.candidates.filter(e=>e.id!==t.id),this.toastService.success("Candidate deleted")},error:()=>{this.candidates=this.candidates.filter(e=>e.id!==t.id),this.toastService.success("Candidate deleted")}})}getStageClass(t){return"stage-"+t.toLowerCase()}getRatingStars(t){return Array(5).fill(0).map((e,i)=>i<t?1:0)}getFullName(t){return`${t.firstName} ${t.lastName}`}static \u0275fac=function(e){return new(e||n)(V(ma),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment-candidates"]],decls:51,vars:24,consts:[[1,"candidates-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","new",3,"click"],[1,"stat-card","screening",3,"click"],[1,"stat-card","interview",3,"click"],[1,"stat-card","offer",3,"click"],[1,"stat-card","hired",3,"click"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search by name, email, ID, position...",3,"ngModelChange","ngModel"],[1,"content-card"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fa","fa-users"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"candidate-info"],[1,"candidate-avatar"],[1,"candidate-details"],[1,"candidate-name"],[1,"candidate-id"],[1,"candidate-email"],[1,"position-info"],[1,"position-title"],["class","current-role",4,"ngIf"],[1,"experience"],[1,"education"],[1,"source-badge"],["class","source-detail",4,"ngIf"],[1,"rating"],["class","fa fa-star",3,"filled",4,"ngFor","ngForOf"],[1,"stage-badge",3,"ngClass"],[1,"actions"],["title","View",1,"btn-icon",3,"click"],[1,"fa","fa-eye"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-pencil"],["title","Update Stage",1,"btn-icon","success",3,"click"],[1,"fa","fa-exchange"],["title","Delete",1,"btn-icon","danger",3,"click"],[1,"fa","fa-trash"],[1,"current-role"],[1,"source-detail"],[1,"fa","fa-star"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"fa","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"readonly",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"required"],["type","text","placeholder","First name",3,"ngModelChange","ngModel"],["type","text","placeholder","Last name",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",3,"ngModelChange","ngModel"],["type","tel","placeholder","+1 555-123-4567",3,"ngModelChange","ngModel"],["type","text","placeholder","City, Country",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Software Engineer",3,"ngModelChange","ngModel"],["type","text","placeholder","Company name",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],[1,"skills-input"],["type","text","placeholder","Add skill...",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-secondary",3,"click"],["class","skill-tags",4,"ngIf"],["type","text","placeholder","e.g., Referred by John Doe",3,"ngModelChange","ngModel"],["type","number","placeholder","Annual salary",3,"ngModelChange","ngModel"],["type","url","placeholder","https://linkedin.com/in/...",3,"ngModelChange","ngModel"],["type","url","placeholder","https://...",3,"ngModelChange","ngModel"],["type","text","placeholder","Add tag...",3,"ngModelChange","keyup.enter","ngModel"],["class","tag-list",4,"ngIf"],["rows","3","placeholder","Additional notes...",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"disabled"],[1,"btn","btn-primary",3,"click","disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[3,"value"],[1,"skill-tags"],["class","skill-tag",4,"ngFor","ngForOf"],[1,"skill-tag"],[1,"fa","fa-times",3,"click"],[1,"tag-list"],["class","tag-badge",4,"ngFor","ngForOf"],[1,"tag-badge"],[1,"fa","fa-spinner","fa-spin"],["class","modal-body",4,"ngIf"],[1,"btn","btn-secondary"],[1,"btn","btn-outline",3,"click"],[1,"profile-header"],[1,"profile-avatar"],[1,"profile-info"],[1,"profile-subtitle"],[1,"profile-meta"],[1,"fa","fa-hashtag"],[1,"fa","fa-envelope"],[1,"fa","fa-phone"],[4,"ngIf"],[1,"stage-badge","large",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","rating"],["class","detail-row",4,"ngIf"],["class","detail-section full",4,"ngIf"],[1,"detail-section","full"],[1,"stage-timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"fa","fa-map-marker"],[1,"timeline-item"],[1,"timeline-icon",3,"ngClass"],[1,"fa","fa-check"],[1,"timeline-content"],[1,"timeline-header"],[1,"stage-name"],[1,"timeline-date"],["class","timeline-meta",4,"ngIf"],["class","timeline-notes",4,"ngIf"],[1,"timeline-meta"],[1,"timeline-notes"],[1,"detail-text"],[1,"modal-content",3,"click"],[1,"btn-close",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"candidate-summary"],["rows","3","placeholder","Add notes about this stage change...",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Candidate Database"),a(),o(5,"p",3),l(6,"Manage and track all candidates in the recruitment pipeline"),a()(),o(7,"button",4),x("click",function(){return i.openCreateModal()}),y(8,"i",5),l(9," Add Candidate "),a()(),o(10,"div",6)(11,"div",7),x("click",function(){return i.setActiveTab("all")}),o(12,"div",8),l(13),a(),o(14,"div",9),l(15,"All Candidates"),a()(),o(16,"div",10),x("click",function(){return i.setActiveTab("new")}),o(17,"div",8),l(18),a(),o(19,"div",9),l(20,"New"),a()(),o(21,"div",11),x("click",function(){return i.setActiveTab("screening")}),o(22,"div",8),l(23),a(),o(24,"div",9),l(25,"Screening"),a()(),o(26,"div",12),x("click",function(){return i.setActiveTab("interview")}),o(27,"div",8),l(28),a(),o(29,"div",9),l(30,"Interview"),a()(),o(31,"div",13),x("click",function(){return i.setActiveTab("offer")}),o(32,"div",8),l(33),a(),o(34,"div",9),l(35,"Offer"),a()(),o(36,"div",14),x("click",function(){return i.setActiveTab("hired")}),o(37,"div",8),l(38),a(),o(39,"div",9),l(40,"Hired"),a()()(),o(41,"div",15)(42,"div",16),y(43,"i",17),o(44,"input",18),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),o(45,"div",19),b(46,YOe,6,0,"div",20)(47,ZOe,19,1,"table",21),a()(),b(48,l4e,125,30,"div",22)(49,M4e,17,1,"div",22)(50,w4e,13,1,"div",22)),e&2&&(c(11),ie("active",i.activeTab==="all"),c(2),_(i.getStageCount("all")),c(3),ie("active",i.activeTab==="new"),c(2),_(i.getStageCount("new")),c(3),ie("active",i.activeTab==="screening"),c(2),_(i.getStageCount("screening")),c(3),ie("active",i.activeTab==="interview"),c(2),_(i.getStageCount("interview")),c(3),ie("active",i.activeTab==="offer"),c(2),_(i.getStageCount("offer")),c(3),ie("active",i.activeTab==="hired"),c(2),_(i.getStageCount("hired")),c(6),M("ngModel",i.searchTerm),c(2),m("ngIf",!i.loading&&i.filteredCandidates.length===0),c(),m("ngIf",!i.loading&&i.filteredCandidates.length>0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal),c(),m("ngIf",i.showStageModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Ue,Oe,Xt,Ee,Rt,yn,ir],styles:[".candidates-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;text-align:center;box-shadow:0 2px 4px #00000014;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.stat-card.new[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#3b82f6}.stat-card.screening[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#8b5cf6}.stat-card.interview[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.offer[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-card.hired[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#059669}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#ddd;margin-bottom:16px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.candidate-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.candidate-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.candidate-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.candidate-details[_ngcontent-%COMP%]   .candidate-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.candidate-details[_ngcontent-%COMP%]   .candidate-id[_ngcontent-%COMP%]{font-size:12px;color:teal}.candidate-details[_ngcontent-%COMP%]   .candidate-email[_ngcontent-%COMP%]{font-size:12px;color:#666}.position-info[_ngcontent-%COMP%]   .position-title[_ngcontent-%COMP%]{font-weight:500;color:#333;display:block}.position-info[_ngcontent-%COMP%]   .current-role[_ngcontent-%COMP%]{font-size:12px;color:#666}.experience[_ngcontent-%COMP%]{font-weight:500}.education[_ngcontent-%COMP%]{font-size:12px;color:#666}.source-badge[_ngcontent-%COMP%]{background:#e5e7eb;padding:3px 8px;border-radius:4px;font-size:11px;font-weight:500}.source-detail[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-top:2px}.rating[_ngcontent-%COMP%]{display:flex;gap:2px}.rating[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{font-size:14px;color:#ddd}.rating[_ngcontent-%COMP%]   .fa-star.filled[_ngcontent-%COMP%]{color:#f59e0b}.stage-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:11px;font-weight:500;text-transform:uppercase}.stage-badge.stage-new[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.stage-badge.stage-screening[_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.stage-badge.stage-interview[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.stage-badge.stage-assessment[_ngcontent-%COMP%]{background:#fce7f3;color:#9d174d}.stage-badge.stage-offer[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.stage-badge.stage-hired[_ngcontent-%COMP%]{background:#a7f3d0;color:#047857}.stage-badge.stage-rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.stage-badge.stage-withdrawn[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.stage-badge.large[_ngcontent-%COMP%]{padding:6px 14px;font-size:12px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:teal}.btn-icon.success[_ngcontent-%COMP%]:hover{color:#10b981}.btn-icon.danger[_ngcontent-%COMP%]:hover{color:#ef4444}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080}.btn.btn-outline[_ngcontent-%COMP%]:hover{background:#f0fafa}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:500px;max-width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;font-size:16px}.btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f9fafb}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:24px;padding-bottom:24px;border-bottom:1px solid #eee}.profile-avatar[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:24px;flex-shrink:0}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:22px;color:#333}.profile-info[_ngcontent-%COMP%]   .profile-subtitle[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:14px}.profile-info[_ngcontent-%COMP%]   .profile-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;font-size:13px;color:#666}.profile-info[_ngcontent-%COMP%]   .profile-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.candidate-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding:12px;background:#f9fafb;border-radius:8px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;color:teal;font-weight:600;padding-bottom:8px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#666}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.skills-input[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.skills-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.skills-input[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 16px}.skill-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.skill-tag[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c;padding:4px 12px;border-radius:16px;font-size:13px;display:flex;align-items:center;gap:8px}.skill-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;opacity:.7}.skill-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:1}.tag-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.tag-badge[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e;padding:4px 12px;border-radius:16px;font-size:13px;display:flex;align-items:center;gap:8px}.tag-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;opacity:.7}.tag-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:1}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:16px}.detail-section.full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:teal;font-weight:600}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.detail-text[_ngcontent-%COMP%]{color:#333;line-height:1.6;white-space:pre-wrap}.stage-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px 0;border-bottom:1px solid #eee}.stage-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:12px}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-new[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-screening[_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-interview[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-offer[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-hired[_ngcontent-%COMP%]{background:#a7f3d0;color:#047857}.stage-timeline[_ngcontent-%COMP%]   .timeline-icon.stage-rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.stage-timeline[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{flex:1}.stage-timeline[_ngcontent-%COMP%]   .timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.stage-timeline[_ngcontent-%COMP%]   .stage-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.stage-timeline[_ngcontent-%COMP%]   .timeline-date[_ngcontent-%COMP%], .stage-timeline[_ngcontent-%COMP%]   .timeline-meta[_ngcontent-%COMP%]{font-size:12px;color:#666}.stage-timeline[_ngcontent-%COMP%]   .timeline-notes[_ngcontent-%COMP%]{margin-top:4px;font-size:13px;color:#333;font-style:italic}@media(max-width:768px){.form-grid[_ngcontent-%COMP%], .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}}"],changeDetection:0})};var G2=()=>[1,2,3,4,5];function E4e(n,t){if(n&1){let e=F();o(0,"div",21),y(1,"i",22),o(2,"p"),l(3,"No interviews scheduled"),a(),o(4,"button",4),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(5,"Schedule First Interview"),a()()}}function O4e(n,t){if(n&1&&(o(0,"span",51),l(1),a()),n&2){let e=t.$implicit;ie("lead",e.isLead),c(),D(" ",e.name," ")}}function T4e(n,t){if(n&1&&(o(0,"span",52),l(1),a()),n&2){let e=p().$implicit;c(),D("+",e.panelMembers.length-2)}}function k4e(n,t){if(n&1&&(o(0,"div",53)(1,"span",54),l(2),a()()),n&2){let e=p().$implicit,i=p(2);c(),m("ngClass",i.getRecommendationClass(e.feedback.recommendation)),c(),D(" ",e.feedback.recommendation.replace("_"," ")," ")}}function I4e(n,t){if(n&1){let e=F();o(0,"button",55),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openEditModal(r))}),y(1,"i",56),a()}}function D4e(n,t){if(n&1){let e=F();o(0,"button",57),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openFeedbackModal(r))}),y(1,"i",58),a()}}function A4e(n,t){if(n&1){let e=F();o(0,"button",59),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.markNoShow(r))}),y(1,"i",60),a()}}function R4e(n,t){if(n&1){let e=F();o(0,"button",61),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.cancelInterview(r))}),y(1,"i",62),a()}}function F4e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"span",25),l(3),a(),o(4,"div",26),l(5),a()(),o(6,"td")(7,"div",27)(8,"span",28),l(9),a(),o(10,"span",29),l(11),a()()(),o(12,"td")(13,"span",30),l(14),a(),o(15,"div",31)(16,"span",32),l(17),a(),o(18,"span",33),y(19,"i",34),l(20),a()()(),o(21,"td")(22,"div",35)(23,"span",36),y(24,"i",22),l(25),Le(26,"date"),a(),o(27,"span",37),y(28,"i",38),l(29),a()()(),o(30,"td")(31,"div",39),b(32,O4e,2,3,"span",40)(33,T4e,2,1,"span",41),a()(),o(34,"td")(35,"span",42),l(36),a(),b(37,k4e,3,2,"div",43),a(),o(38,"td",44)(39,"button",45),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetails(r))}),y(40,"i",46),a(),b(41,I4e,2,0,"button",47)(42,D4e,2,0,"button",48)(43,A4e,2,0,"button",49)(44,R4e,2,0,"button",50),a()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.interviewNumber),c(2),_(e.jobTitle),c(4),_(e.candidateName),c(2),_(e.candidateEmail),c(3),_(e.interviewType),c(3),D("Round ",e.round),c(2),m("ngClass",e.interviewMode==="Video Call"?"fa-video-camera":e.interviewMode==="Phone"?"fa-phone":"fa-building"),c(),D(" ",e.interviewMode),c(2),ie("upcoming",i.isUpcoming(e.scheduledDate)),c(3),D(" ",rt(26,22,e.scheduledDate,"MMM d, yyyy")),c(4),Ge(" ",e.scheduledTime," (",e.duration," min)"),c(3),m("ngForOf",e.panelMembers.slice(0,2)),c(),m("ngIf",e.panelMembers.length>2),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(),m("ngIf",e.feedback),c(4),m("ngIf",e.status==="SCHEDULED"),c(),m("ngIf",e.status==="SCHEDULED"||e.status==="COMPLETED"),c(),m("ngIf",e.status==="SCHEDULED"),c(),m("ngIf",e.status==="SCHEDULED")}}function N4e(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"Interview"),a(),o(5,"th"),l(6,"Candidate"),a(),o(7,"th"),l(8,"Type & Round"),a(),o(9,"th"),l(10,"Schedule"),a(),o(11,"th"),l(12,"Panel"),a(),o(13,"th"),l(14,"Status"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,F4e,45,25,"tr",24),a()()),n&2){let e=p();c(18),m("ngForOf",e.filteredInterviews)}}function L4e(n,t){if(n&1&&(o(0,"option",96),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En(" ",e.firstName," ",e.lastName," - ",e.appliedPosition," ")}}function V4e(n,t){if(n&1&&(o(0,"option",96),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function B4e(n,t){if(n&1&&(o(0,"option",96),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function U4e(n,t){if(n&1&&(o(0,"option",96),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),D("",e," minutes")}}function j4e(n,t){n&1&&(o(0,"span",105),l(1,"Lead"),a())}function W4e(n,t){if(n&1){let e=F();o(0,"div",99)(1,"div",100)(2,"span",101),l(3),a(),o(4,"span",102),l(5),a(),b(6,j4e,2,0,"span",103),a(),o(7,"button",104),x("click",function(){let r=g(e).index,s=p(3);return f(s.removePanelMember(r))}),y(8,"i",62),a()()}if(n&2){let e=t.$implicit;c(3),_(e.name),c(2),_(e.role),c(),m("ngIf",e.isLead)}}function z4e(n,t){if(n&1&&(o(0,"div",97),b(1,W4e,9,3,"div",98),a()),n&2){let e=p(2);c(),m("ngForOf",e.selectedInterview.panelMembers)}}function q4e(n,t){if(n&1){let e=F();o(0,"div",63)(1,"div",64),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",65)(3,"h3"),l(4),a(),o(5,"button",66),y(6,"i",62),a()(),o(7,"div",67)(8,"div",68)(9,"h4"),l(10,"Interview Details"),a(),o(11,"div",69)(12,"div",70)(13,"label"),l(14,"Interview ID"),a(),o(15,"input",71),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.interviewNumber,r)||(s.selectedInterview.interviewNumber=r),f(r)}),a()(),o(16,"div",70)(17,"label"),l(18,"Candidate "),o(19,"span",72),l(20,"*"),a()(),o(21,"select",73),x("change",function(r){g(e);let s=p();return f(s.selectCandidate(r))}),o(22,"option",74),l(23,"-- Select Candidate --"),a(),b(24,L4e,2,4,"option",75),a()(),o(25,"div",70)(26,"label"),l(27,"Position"),a(),o(28,"input",76),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.jobTitle,r)||(s.selectedInterview.jobTitle=r),f(r)}),a()(),o(29,"div",70)(30,"label"),l(31,"Interview Type"),a(),o(32,"select",77),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.interviewType,r)||(s.selectedInterview.interviewType=r),f(r)}),b(33,V4e,2,2,"option",75),a()(),o(34,"div",70)(35,"label"),l(36,"Interview Mode"),a(),o(37,"select",77),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.interviewMode,r)||(s.selectedInterview.interviewMode=r),f(r)}),b(38,B4e,2,2,"option",75),a()(),o(39,"div",70)(40,"label"),l(41,"Round"),a(),o(42,"input",78),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.round,r)||(s.selectedInterview.round=r),f(r)}),a()()()(),o(43,"div",68)(44,"h4"),l(45,"Schedule"),a(),o(46,"div",69)(47,"div",70)(48,"label"),l(49,"Date "),o(50,"span",72),l(51,"*"),a()(),o(52,"input",79),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.scheduledDate,r)||(s.selectedInterview.scheduledDate=r),f(r)}),a()(),o(53,"div",70)(54,"label"),l(55,"Time "),o(56,"span",72),l(57,"*"),a()(),o(58,"input",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.scheduledTime,r)||(s.selectedInterview.scheduledTime=r),f(r)}),a()(),o(59,"div",70)(60,"label"),l(61,"Duration (minutes)"),a(),o(62,"select",77),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.duration,r)||(s.selectedInterview.duration=r),f(r)}),b(63,U4e,2,2,"option",75),a()(),o(64,"div",70)(65,"label"),l(66,"Location / Room"),a(),o(67,"input",81),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.location,r)||(s.selectedInterview.location=r),f(r)}),a()(),o(68,"div",82)(69,"label"),l(70,"Meeting Link"),a(),o(71,"input",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.meetingLink,r)||(s.selectedInterview.meetingLink=r),f(r)}),a()()()(),o(72,"div",68)(73,"h4"),l(74,"Interview Panel"),a(),o(75,"div",84)(76,"div",85)(77,"div",70)(78,"label"),l(79,"Name"),a(),o(80,"input",86),S("ngModelChange",function(r){g(e);let s=p();return P(s.newPanelMember.name,r)||(s.newPanelMember.name=r),f(r)}),a()(),o(81,"div",70)(82,"label"),l(83,"Email"),a(),o(84,"input",87),S("ngModelChange",function(r){g(e);let s=p();return P(s.newPanelMember.email,r)||(s.newPanelMember.email=r),f(r)}),a()(),o(85,"div",70)(86,"label"),l(87,"Role"),a(),o(88,"input",88),S("ngModelChange",function(r){g(e);let s=p();return P(s.newPanelMember.role,r)||(s.newPanelMember.role=r),f(r)}),a()(),o(89,"div",70)(90,"label",89)(91,"input",90),S("ngModelChange",function(r){g(e);let s=p();return P(s.newPanelMember.isLead,r)||(s.newPanelMember.isLead=r),f(r)}),a(),l(92," Lead Interviewer "),a(),o(93,"button",91),x("click",function(){g(e);let r=p();return f(r.addPanelMember())}),l(94,"Add"),a()()()(),b(95,z4e,2,1,"div",92),a(),o(96,"div",68)(97,"h4"),l(98,"Additional Notes"),a(),o(99,"div",82)(100,"textarea",93),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedInterview.notes,r)||(s.selectedInterview.notes=r),f(r)}),a()()()(),o(101,"div",94)(102,"button",95),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(103,"Cancel"),a(),o(104,"button",4),x("click",function(){g(e);let r=p();return f(r.saveInterview())}),l(105),a()()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Interview":"Schedule Interview"),c(11),M("ngModel",e.selectedInterview.interviewNumber),c(9),m("ngForOf",e.candidates),c(4),M("ngModel",e.selectedInterview.jobTitle),c(4),M("ngModel",e.selectedInterview.interviewType),c(),m("ngForOf",e.interviewTypes),c(4),M("ngModel",e.selectedInterview.interviewMode),c(),m("ngForOf",e.interviewModes),c(4),M("ngModel",e.selectedInterview.round),c(10),M("ngModel",e.selectedInterview.scheduledDate),c(6),M("ngModel",e.selectedInterview.scheduledTime),c(4),M("ngModel",e.selectedInterview.duration),c(),m("ngForOf",e.durations),c(4),M("ngModel",e.selectedInterview.location),c(4),M("ngModel",e.selectedInterview.meetingLink),c(9),M("ngModel",e.newPanelMember.name),c(4),M("ngModel",e.newPanelMember.email),c(4),M("ngModel",e.newPanelMember.role),c(3),M("ngModel",e.newPanelMember.isLead),c(4),m("ngIf",e.selectedInterview.panelMembers.length),c(5),M("ngModel",e.selectedInterview.notes),c(5),D(" ",e.isEditing?"Update Interview":"Schedule Interview"," ")}}function H4e(n,t){if(n&1&&(o(0,"div",117)(1,"span",118),l(2,"Location"),a(),o(3,"span",119),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewInterview.location)}}function G4e(n,t){if(n&1&&(o(0,"div",117)(1,"span",118),l(2,"Meeting Link"),a(),o(3,"span",119)(4,"a",125),l(5,"Join Meeting"),a()()()),n&2){let e=p(3);c(4),m("href",e.viewInterview.meetingLink,Cr)}}function $4e(n,t){n&1&&(o(0,"span",105),l(1,"Lead"),a())}function Y4e(n,t){if(n&1&&(o(0,"div",126)(1,"div",127),l(2),a(),o(3,"div",128)(4,"span",101),l(5),a(),o(6,"span",102),l(7),a(),b(8,$4e,2,0,"span",103),a()()),n&2){let e=t.$implicit;c(2),_(e.name[0]),c(3),_(e.name),c(2),_(e.role),c(),m("ngIf",e.isLead)}}function J4e(n,t){if(n&1&&y(0,"i",58),n&2){let e=t.$implicit;ie("filled",e===1)}}function K4e(n,t){if(n&1&&y(0,"i",58),n&2){let e=t.$implicit;ie("filled",e===1)}}function Q4e(n,t){if(n&1&&(o(0,"div",130)(1,"span",131),l(2,"Technical"),a(),o(3,"div",132),b(4,K4e,1,2,"i",133),a()()),n&2){let e=p(4);c(4),m("ngForOf",e.getRatingStars(e.viewInterview.feedback.technicalRating))}}function X4e(n,t){if(n&1&&y(0,"i",58),n&2){let e=t.$implicit;ie("filled",e===1)}}function Z4e(n,t){if(n&1&&(o(0,"div",130)(1,"span",131),l(2,"Communication"),a(),o(3,"div",132),b(4,X4e,1,2,"i",133),a()()),n&2){let e=p(4);c(4),m("ngForOf",e.getRatingStars(e.viewInterview.feedback.communicationRating))}}function e5e(n,t){if(n&1&&(o(0,"div",139)(1,"strong"),l(2,"Strengths:"),a(),l(3),a()),n&2){let e=p(4);c(3),D(" ",e.viewInterview.feedback.strengths," ")}}function t5e(n,t){if(n&1&&(o(0,"div",139)(1,"strong"),l(2,"Areas for Improvement:"),a(),l(3),a()),n&2){let e=p(4);c(3),D(" ",e.viewInterview.feedback.weaknesses," ")}}function n5e(n,t){if(n&1&&(o(0,"div",139)(1,"strong"),l(2,"Comments:"),a(),l(3),a()),n&2){let e=p(4);c(3),D(" ",e.viewInterview.feedback.comments," ")}}function i5e(n,t){if(n&1&&(o(0,"div",121)(1,"h4"),l(2,"Feedback"),a(),o(3,"div",129)(4,"div",130)(5,"span",131),l(6,"Overall Rating"),a(),o(7,"div",132),b(8,J4e,1,2,"i",133),a()(),b(9,Q4e,5,1,"div",134)(10,Z4e,5,1,"div",134),o(11,"div",135)(12,"span",136),l(13,"Recommendation:"),a(),o(14,"span",137),l(15),a()(),b(16,e5e,4,1,"div",138)(17,t5e,4,1,"div",138)(18,n5e,4,1,"div",138),a()()),n&2){let e=p(3);c(8),m("ngForOf",e.getRatingStars(e.viewInterview.feedback.overallRating)),c(),m("ngIf",e.viewInterview.feedback.technicalRating),c(),m("ngIf",e.viewInterview.feedback.communicationRating),c(4),m("ngClass",e.getRecommendationClass(e.viewInterview.feedback.recommendation)),c(),D(" ",e.viewInterview.feedback.recommendation.replace("_"," ")," "),c(),m("ngIf",e.viewInterview.feedback.strengths),c(),m("ngIf",e.viewInterview.feedback.weaknesses),c(),m("ngIf",e.viewInterview.feedback.comments)}}function r5e(n,t){if(n&1&&(o(0,"div",121)(1,"h4"),l(2,"Notes"),a(),o(3,"p",140),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewInterview.notes)}}function o5e(n,t){if(n&1&&(o(0,"div",67)(1,"div",109)(2,"div",110)(3,"h2"),l(4),a(),o(5,"span",111),l(6),a()(),o(7,"div",112)(8,"span"),y(9,"i",113),l(10),a(),o(11,"span"),y(12,"i",114),l(13),a()()(),o(14,"div",115)(15,"div",116)(16,"h4"),l(17,"Candidate"),a(),o(18,"div",117)(19,"span",118),l(20,"Name"),a(),o(21,"span",119),l(22),a()(),o(23,"div",117)(24,"span",118),l(25,"Email"),a(),o(26,"span",119),l(27),a()()(),o(28,"div",116)(29,"h4"),l(30,"Schedule"),a(),o(31,"div",117)(32,"span",118),l(33,"Date & Time"),a(),o(34,"span",119),l(35),a()(),o(36,"div",117)(37,"span",118),l(38,"Duration"),a(),o(39,"span",119),l(40),a()(),o(41,"div",117)(42,"span",118),l(43,"Mode"),a(),o(44,"span",119),l(45),a()(),b(46,H4e,5,1,"div",120)(47,G4e,6,1,"div",120),a(),o(48,"div",121)(49,"h4"),l(50,"Interview Panel"),a(),o(51,"div",122),b(52,Y4e,9,4,"div",123),a()(),b(53,i5e,19,8,"div",124)(54,r5e,5,1,"div",124),a()()),n&2){let e=p(2);c(4),Ge("",e.viewInterview.interviewType," Interview - Round ",e.viewInterview.round),c(),m("ngClass",e.getStatusClass(e.viewInterview.status)),c(),_(e.viewInterview.status),c(4),D(" ",e.viewInterview.interviewNumber),c(3),D(" ",e.viewInterview.jobTitle),c(9),_(e.viewInterview.candidateName),c(5),_(e.viewInterview.candidateEmail),c(8),_(e.formatDateTime(e.viewInterview.scheduledDate,e.viewInterview.scheduledTime)),c(5),D("",e.viewInterview.duration," minutes"),c(5),_(e.viewInterview.interviewMode),c(),m("ngIf",e.viewInterview.location),c(),m("ngIf",e.viewInterview.meetingLink),c(5),m("ngForOf",e.viewInterview.panelMembers),c(),m("ngIf",e.viewInterview.feedback),c(),m("ngIf",e.viewInterview.notes)}}function a5e(n,t){if(n&1){let e=F();o(0,"button",4),x("click",function(){g(e);let r=p(2);return r.openFeedbackModal(r.viewInterview),f(r.closeViewModal())}),y(1,"i",58),l(2),a()}if(n&2){let e=p(2);c(2),D(" ",e.viewInterview!=null&&e.viewInterview.feedback?"Update Feedback":"Add Feedback"," ")}}function s5e(n,t){if(n&1){let e=F();o(0,"div",63)(1,"div",64),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",65)(3,"h3"),l(4,"Interview Details"),a(),o(5,"button",66),y(6,"i",62),a()(),b(7,o5e,55,16,"div",106),o(8,"div",94)(9,"button",107),l(10,"Close"),a(),b(11,a5e,3,1,"button",108),a()()()}if(n&2){let e=p();c(7),m("ngIf",e.viewInterview),c(4),m("ngIf",(e.viewInterview==null?null:e.viewInterview.status)==="SCHEDULED"||(e.viewInterview==null?null:e.viewInterview.status)==="COMPLETED")}}function l5e(n,t){if(n&1){let e=F();o(0,"i",151),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.setRating("overallRating",r))}),a()}if(n&2){let e=t.$implicit,i=p(3);ie("filled",e<=i.feedbackData.overallRating)}}function c5e(n,t){if(n&1){let e=F();o(0,"i",151),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.setRating("technicalRating",r))}),a()}if(n&2){let e=t.$implicit,i=p(3);ie("filled",e<=(i.feedbackData.technicalRating||0))}}function d5e(n,t){if(n&1){let e=F();o(0,"i",151),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.setRating("communicationRating",r))}),a()}if(n&2){let e=t.$implicit,i=p(3);ie("filled",e<=(i.feedbackData.communicationRating||0))}}function p5e(n,t){if(n&1){let e=F();o(0,"i",151),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.setRating("cultureFitRating",r))}),a()}if(n&2){let e=t.$implicit,i=p(3);ie("filled",e<=(i.feedbackData.cultureFitRating||0))}}function m5e(n,t){if(n&1&&(o(0,"option",96),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e.replace("_"," "))}}function u5e(n,t){if(n&1){let e=F();o(0,"div",67)(1,"div",143)(2,"strong"),l(3),a(),o(4,"span"),l(5),a()(),o(6,"div",68)(7,"h4"),l(8,"Ratings"),a(),o(9,"div",144)(10,"div",145)(11,"label"),l(12,"Overall Rating "),o(13,"span",72),l(14,"*"),a()(),o(15,"div",146),b(16,l5e,1,2,"i",147),a()(),o(17,"div",145)(18,"label"),l(19,"Technical Skills"),a(),o(20,"div",146),b(21,c5e,1,2,"i",147),a()(),o(22,"div",145)(23,"label"),l(24,"Communication"),a(),o(25,"div",146),b(26,d5e,1,2,"i",147),a()(),o(27,"div",145)(28,"label"),l(29,"Culture Fit"),a(),o(30,"div",146),b(31,p5e,1,2,"i",147),a()()()(),o(32,"div",70)(33,"label"),l(34,"Recommendation"),a(),o(35,"select",77),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.feedbackData.recommendation,r)||(s.feedbackData.recommendation=r),f(r)}),b(36,m5e,2,2,"option",75),a()(),o(37,"div",70)(38,"label"),l(39,"Strengths"),a(),o(40,"textarea",148),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.feedbackData.strengths,r)||(s.feedbackData.strengths=r),f(r)}),a()(),o(41,"div",70)(42,"label"),l(43,"Areas for Improvement"),a(),o(44,"textarea",149),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.feedbackData.weaknesses,r)||(s.feedbackData.weaknesses=r),f(r)}),a()(),o(45,"div",70)(46,"label"),l(47,"Additional Comments"),a(),o(48,"textarea",150),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.feedbackData.comments,r)||(s.feedbackData.comments=r),f(r)}),a()()()}if(n&2){let e=p(2);c(3),_(e.feedbackInterview.candidateName),c(2),Ge("",e.feedbackInterview.interviewType," - Round ",e.feedbackInterview.round),c(11),m("ngForOf",na(12,G2)),c(5),m("ngForOf",na(13,G2)),c(5),m("ngForOf",na(14,G2)),c(5),m("ngForOf",na(15,G2)),c(4),M("ngModel",e.feedbackData.recommendation),c(),m("ngForOf",e.recommendations),c(4),M("ngModel",e.feedbackData.strengths),c(4),M("ngModel",e.feedbackData.weaknesses),c(4),M("ngModel",e.feedbackData.comments)}}function g5e(n,t){if(n&1){let e=F();o(0,"div",63)(1,"div",141),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",65)(3,"h3"),l(4,"Interview Feedback"),a(),o(5,"button",142),x("click",function(){g(e);let r=p();return f(r.closeFeedbackModal())}),y(6,"i",62),a()(),b(7,u5e,49,16,"div",106),o(8,"div",94)(9,"button",95),x("click",function(){g(e);let r=p();return f(r.closeFeedbackModal())}),l(10,"Cancel"),a(),o(11,"button",4),x("click",function(){g(e);let r=p();return f(r.submitFeedback())}),l(12,"Submit Feedback"),a()()()()}if(n&2){let e=p();c(7),m("ngIf",e.feedbackInterview)}}var rg=class n{constructor(t,e,i){this.recruitmentService=t;this.toastService=e;this.cdr=i}interviews=[];candidates=[];loading=!1;saving=!1;showModal=!1;isEditing=!1;selectedInterview=this.getEmptyInterview();activeTab="all";searchTerm="";interviewTypes=["Technical","HR","Managerial","Panel","Final","Culture Fit","Case Study"];interviewModes=["In-Person","Video Call","Phone","Hybrid"];durations=[30,45,60,90,120];recommendations=["STRONG_HIRE","HIRE","NO_HIRE","STRONG_NO_HIRE","PENDING"];showViewModal=!1;viewInterview=null;showFeedbackModal=!1;feedbackInterview=null;feedbackData=this.getEmptyFeedback();newPanelMember={name:"",email:"",role:"",isLead:!1};ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.recruitmentService.getInterviews().subscribe({next:t=>{this.interviews=t,this.loading=!1},error:()=>{this.generateMockData(),this.loading=!1}}),this.recruitmentService.getCandidates().subscribe({next:t=>{this.candidates=t},error:()=>{this.candidates=[]}})}generateMockData(){let t=["SCHEDULED","COMPLETED","CANCELLED","NO_SHOW"],e=["John Smith","Emily Johnson","Michael Williams","Sarah Brown"],i=["Senior Software Engineer","Product Manager","UX Designer","Data Analyst"];this.interviews=e.map((r,s)=>({id:s+1,interviewNumber:`INT-2024-${String(s+1).padStart(4,"0")}`,candidateId:s+1,candidateName:r,candidateEmail:`${r.toLowerCase().replace(" ",".")}@email.com`,jobPostingId:s+1,jobTitle:i[s],interviewType:this.interviewTypes[s%this.interviewTypes.length],interviewMode:this.interviewModes[s%this.interviewModes.length],round:s%3+1,scheduledDate:this.getFutureDate(s+1),scheduledTime:["09:00","10:30","14:00","15:30"][s%4],duration:this.durations[s%this.durations.length],location:s%2===0?"Conference Room A":void 0,meetingLink:s%2===1?"https://meet.google.com/abc-defg-hij":void 0,panelMembers:[{name:"Jane Doe",email:"jane.doe@company.com",role:"Hiring Manager",isLead:!0},{name:"Bob Wilson",email:"bob.wilson@company.com",role:"Tech Lead",isLead:!1}],status:t[s%t.length],feedback:t[s%t.length]==="COMPLETED"?{overallRating:4,technicalRating:4,communicationRating:5,cultureFitRating:4,recommendation:"HIRE",strengths:"Strong technical skills, excellent communication",weaknesses:"Could improve on system design",comments:"Good candidate overall",submittedBy:"Jane Doe",submittedAt:this.getPastDate(1)}:void 0,notes:"Standard interview process",createdBy:"HR Admin",createdAt:this.getPastDate(7+s)}))}getFutureDate(t){let e=new Date;return e.setDate(e.getDate()+t),e.toISOString().split("T")[0]}getPastDate(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}get filteredInterviews(){let t=this.interviews;if(this.activeTab!=="all"&&(t=t.filter(e=>e.status===this.activeTab.toUpperCase())),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.candidateName.toLowerCase().includes(e)||i.interviewNumber.toLowerCase().includes(e)||i.jobTitle.toLowerCase().includes(e)||i.interviewType.toLowerCase().includes(e))}return t}getStatusCount(t){return t==="all"?this.interviews.length:this.interviews.filter(e=>e.status===t.toUpperCase()).length}setActiveTab(t){this.activeTab=t}getEmptyInterview(){return{interviewNumber:"",candidateId:0,candidateName:"",jobTitle:"",interviewType:"Technical",interviewMode:"Video Call",round:1,scheduledDate:"",scheduledTime:"",duration:60,panelMembers:[],status:"SCHEDULED"}}getEmptyFeedback(){return{overallRating:0,technicalRating:0,communicationRating:0,cultureFitRating:0,recommendation:"PENDING",strengths:"",weaknesses:"",comments:""}}openCreateModal(){this.selectedInterview=this.getEmptyInterview(),this.selectedInterview.interviewNumber=this.generateInterviewNumber(),this.isEditing=!1,this.showModal=!0}openEditModal(t){this.selectedInterview=Tt(me({},t),{panelMembers:[...t.panelMembers]}),this.isEditing=!0,this.showModal=!0}generateInterviewNumber(){let t=new Date().getFullYear(),e=this.interviews.length+1;return`INT-${t}-${String(e).padStart(4,"0")}`}closeModal(){this.showModal=!1,this.newPanelMember={name:"",email:"",role:"",isLead:!1}}selectCandidate(t){let e=parseInt(t.target.value),i=this.candidates.find(r=>r.id===e);i&&(this.selectedInterview.candidateId=i.id,this.selectedInterview.candidateName=`${i.firstName} ${i.lastName}`,this.selectedInterview.candidateEmail=i.email,this.selectedInterview.jobTitle=i.appliedPosition||"")}addPanelMember(){this.newPanelMember.name&&this.newPanelMember.email&&(this.selectedInterview.panelMembers.push(me({},this.newPanelMember)),this.newPanelMember={name:"",email:"",role:"",isLead:!1})}removePanelMember(t){this.selectedInterview.panelMembers.splice(t,1)}saveInterview(){if(!this.selectedInterview.candidateId||!this.selectedInterview.scheduledDate||!this.selectedInterview.scheduledTime){this.toastService.error("Please fill in all required fields");return}if(this.selectedInterview.panelMembers.length===0){this.toastService.error("Please add at least one panel member");return}this.saving=!0,this.isEditing?this.recruitmentService.updateInterview(this.selectedInterview.id,this.selectedInterview).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges();let t=this.interviews.findIndex(e=>e.id===this.selectedInterview.id);t>=0&&(this.interviews[t]=me({},this.selectedInterview)),this.toastService.success("Interview updated successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to update interview")}}):this.recruitmentService.scheduleInterview(this.selectedInterview).subscribe({next:t=>{this.saving=!1,this.cdr.detectChanges(),this.interviews.unshift(t),this.toastService.success("Interview scheduled successfully"),this.closeModal()},error:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error("Failed to schedule interview")}})}viewDetails(t){this.viewInterview=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewInterview=null}openFeedbackModal(t){this.feedbackInterview=t,this.feedbackData=t.feedback?me({},t.feedback):this.getEmptyFeedback(),this.showFeedbackModal=!0}closeFeedbackModal(){this.showFeedbackModal=!1,this.feedbackInterview=null,this.feedbackData=this.getEmptyFeedback()}submitFeedback(){if(!this.feedbackInterview||this.feedbackData.overallRating===0){this.toastService.error("Please provide an overall rating");return}this.feedbackData.submittedBy="Current User",this.feedbackData.submittedAt=new Date().toISOString(),this.recruitmentService.submitFeedback(this.feedbackInterview.id,this.feedbackData).subscribe({next:()=>{this.feedbackInterview.feedback=me({},this.feedbackData),this.feedbackInterview.status="COMPLETED",this.toastService.success("Feedback submitted successfully"),this.closeFeedbackModal()},error:()=>{this.feedbackInterview.feedback=me({},this.feedbackData),this.feedbackInterview.status="COMPLETED",this.toastService.success("Feedback submitted successfully"),this.closeFeedbackModal()}})}cancelInterview(t){let e=prompt("Please provide a reason for cancellation:");e&&this.recruitmentService.cancelInterview(t.id,e).subscribe({next:()=>{t.status="CANCELLED",t.notes=e,this.toastService.info("Interview cancelled")},error:()=>{t.status="CANCELLED",t.notes=e,this.toastService.info("Interview cancelled")}})}markNoShow(t){t.status="NO_SHOW",this.toastService.warning("Interview marked as No Show")}getStatusClass(t){return"status-"+t.toLowerCase().replace("_","-")}getRecommendationClass(t){return"rec-"+t.toLowerCase().replace("_","-")}getRatingStars(t){return Array(5).fill(0).map((e,i)=>i<t?1:0)}setRating(t,e){this.feedbackData[t]=e}formatDateTime(t,e){return new Date(`${t}T${e}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}isUpcoming(t){return new Date(t)>=new Date}static \u0275fac=function(e){return new(e||n)(V(ma),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment-interviews"]],decls:41,vars:18,consts:[[1,"interviews-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","scheduled",3,"click"],[1,"stat-card","completed",3,"click"],[1,"stat-card","cancelled",3,"click"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search by candidate, ID, position, type...",3,"ngModelChange","ngModel"],[1,"content-card"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fa","fa-calendar"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"interview-number"],[1,"interview-position"],[1,"candidate-info"],[1,"candidate-name"],[1,"candidate-email"],[1,"type-badge"],[1,"round-info"],[1,"round"],[1,"mode"],[1,"fa",3,"ngClass"],[1,"schedule-info"],[1,"date"],[1,"time"],[1,"fa","fa-clock-o"],[1,"panel-info"],["class","panel-member",3,"lead",4,"ngFor","ngForOf"],["class","panel-more",4,"ngIf"],[1,"status-badge",3,"ngClass"],["class","feedback-indicator",4,"ngIf"],[1,"actions"],["title","View",1,"btn-icon",3,"click"],[1,"fa","fa-eye"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon success","title","Add Feedback",3,"click",4,"ngIf"],["class","btn-icon warning","title","Mark No Show",3,"click",4,"ngIf"],["class","btn-icon danger","title","Cancel",3,"click",4,"ngIf"],[1,"panel-member"],[1,"panel-more"],[1,"feedback-indicator"],[1,"rec-badge",3,"ngClass"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-pencil"],["title","Add Feedback",1,"btn-icon","success",3,"click"],[1,"fa","fa-star"],["title","Mark No Show",1,"btn-icon","warning",3,"click"],[1,"fa","fa-user-times"],["title","Cancel",1,"btn-icon","danger",3,"click"],[1,"fa","fa-times"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"readonly",3,"ngModelChange","ngModel"],[1,"required"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Job position",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["type","number","min","1","max","10",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],["type","time",3,"ngModelChange","ngModel"],["type","text","placeholder","Conference Room A",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["type","url","placeholder","https://meet.google.com/...",3,"ngModelChange","ngModel"],[1,"panel-form"],[1,"form-grid","cols-4"],["type","text","placeholder","Full name",3,"ngModelChange","ngModel"],["type","email","placeholder","email@company.com",3,"ngModelChange","ngModel"],["type","text","placeholder","Hiring Manager",3,"ngModelChange","ngModel"],[1,"checkbox-inline"],["type","checkbox",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary",3,"click"],["class","panel-list",4,"ngIf"],["rows","3","placeholder","Any special instructions or notes...",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"panel-list"],["class","panel-item",4,"ngFor","ngForOf"],[1,"panel-item"],[1,"member-info"],[1,"member-name"],[1,"member-role"],["class","lead-badge",4,"ngIf"],[1,"btn-icon","danger",3,"click"],[1,"lead-badge"],["class","modal-body",4,"ngIf"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"detail-header"],[1,"detail-title"],[1,"status-badge","large",3,"ngClass"],[1,"detail-meta"],[1,"fa","fa-hashtag"],[1,"fa","fa-briefcase"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"detail-section","full"],[1,"panel-grid"],["class","panel-card",4,"ngFor","ngForOf"],["class","detail-section full",4,"ngIf"],["target","_blank",3,"href"],[1,"panel-card"],[1,"member-avatar"],[1,"member-details"],[1,"feedback-summary"],[1,"rating-row"],[1,"rating-label"],[1,"rating"],["class","fa fa-star",3,"filled",4,"ngFor","ngForOf"],["class","rating-row",4,"ngIf"],[1,"recommendation"],[1,"rec-label"],[1,"rec-badge","large",3,"ngClass"],["class","feedback-notes",4,"ngIf"],[1,"feedback-notes"],[1,"detail-text"],[1,"modal-content",3,"click"],[1,"btn-close",3,"click"],[1,"feedback-info"],[1,"rating-form"],[1,"rating-field"],[1,"star-input"],["class","fa fa-star",3,"filled","click",4,"ngFor","ngForOf"],["rows","2","placeholder","Candidate's strong points...",3,"ngModelChange","ngModel"],["rows","2","placeholder","Areas that need improvement...",3,"ngModelChange","ngModel"],["rows","3","placeholder","Any other observations...",3,"ngModelChange","ngModel"],[1,"fa","fa-star",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Interview Scheduling"),a(),o(5,"p",3),l(6,"Manage interviews and collect feedback"),a()(),o(7,"button",4),x("click",function(){return i.openCreateModal()}),y(8,"i",5),l(9," Schedule Interview "),a()(),o(10,"div",6)(11,"div",7),x("click",function(){return i.setActiveTab("all")}),o(12,"div",8),l(13),a(),o(14,"div",9),l(15,"All Interviews"),a()(),o(16,"div",10),x("click",function(){return i.setActiveTab("scheduled")}),o(17,"div",8),l(18),a(),o(19,"div",9),l(20,"Scheduled"),a()(),o(21,"div",11),x("click",function(){return i.setActiveTab("completed")}),o(22,"div",8),l(23),a(),o(24,"div",9),l(25,"Completed"),a()(),o(26,"div",12),x("click",function(){return i.setActiveTab("cancelled")}),o(27,"div",8),l(28),a(),o(29,"div",9),l(30,"Cancelled"),a()()(),o(31,"div",13)(32,"div",14),y(33,"i",15),o(34,"input",16),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),o(35,"div",17),b(36,E4e,6,0,"div",18)(37,N4e,19,1,"table",19),a()(),b(38,q4e,106,22,"div",20)(39,s5e,12,2,"div",20)(40,g5e,13,1,"div",20)),e&2&&(c(11),ie("active",i.activeTab==="all"),c(2),_(i.getStatusCount("all")),c(3),ie("active",i.activeTab==="scheduled"),c(2),_(i.getStatusCount("scheduled")),c(3),ie("active",i.activeTab==="completed"),c(2),_(i.getStatusCount("completed")),c(3),ie("active",i.activeTab==="cancelled"),c(2),_(i.getStatusCount("cancelled")),c(6),M("ngModel",i.searchTerm),c(2),m("ngIf",!i.loading&&i.filteredInterviews.length===0),c(),m("ngIf",!i.loading&&i.filteredInterviews.length>0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal),c(),m("ngIf",i.showFeedbackModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,fr,Ee,Rt,ir],styles:[".interviews-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;text-align:center;box-shadow:0 2px 4px #00000014;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px}.stat-card.scheduled[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#3b82f6}.stat-card.completed[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-card.cancelled[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#ef4444}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#ddd;margin-bottom:16px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.interview-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.interview-position[_ngcontent-%COMP%]{font-size:12px;color:#666}.candidate-info[_ngcontent-%COMP%]   .candidate-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333}.candidate-info[_ngcontent-%COMP%]   .candidate-email[_ngcontent-%COMP%]{font-size:12px;color:#666}.type-badge[_ngcontent-%COMP%]{display:inline-block;background:#e5e7eb;padding:3px 8px;border-radius:4px;font-size:11px;font-weight:500}.round-info[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#666}.round-info[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{margin-right:8px}.round-info[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.schedule-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .schedule-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:block;font-size:13px}.schedule-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .schedule-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;color:#666;margin-right:4px}.schedule-info.upcoming[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .schedule-info.upcoming[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:teal;font-weight:500}.panel-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.panel-member[_ngcontent-%COMP%]{background:#e5e7eb;padding:2px 8px;border-radius:4px;font-size:11px}.panel-member.lead[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.panel-more[_ngcontent-%COMP%]{color:teal;font-size:11px;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:11px;font-weight:500;text-transform:uppercase}.status-badge.status-scheduled[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.status-badge.status-completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.status-no-show[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.large[_ngcontent-%COMP%]{padding:6px 14px;font-size:12px}.feedback-indicator[_ngcontent-%COMP%]{margin-top:4px}.rec-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:500;text-transform:uppercase}.rec-badge.rec-strong-hire[_ngcontent-%COMP%]{background:#a7f3d0;color:#047857}.rec-badge.rec-hire[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.rec-badge.rec-no-hire[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.rec-badge.rec-strong-no-hire[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.rec-badge.rec-pending[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.rec-badge.large[_ngcontent-%COMP%]{padding:4px 10px;font-size:11px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:teal}.btn-icon.success[_ngcontent-%COMP%]:hover{color:#10b981}.btn-icon.danger[_ngcontent-%COMP%]:hover{color:#ef4444}.btn-icon.warning[_ngcontent-%COMP%]:hover{color:#f59e0b}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:500px;max-width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;font-size:16px}.btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f9fafb}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;color:teal;font-weight:600;padding-bottom:8px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-grid.cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#666}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.checkbox-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.checkbox-inline[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.panel-form[_ngcontent-%COMP%]{margin-bottom:16px}.panel-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.panel-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f9fafb;border-radius:6px}.member-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-weight:500}.member-info[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%]{color:#666;font-size:13px}.lead-badge[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:500}.detail-header[_ngcontent-%COMP%]{margin-bottom:24px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:8px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]{display:flex;gap:24px;color:#666;font-size:14px}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:16px}.detail-section.full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:teal;font-weight:600}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.detail-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none}.detail-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.detail-text[_ngcontent-%COMP%]{color:#333;line-height:1.6;white-space:pre-wrap}.panel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.panel-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#fff;border-radius:6px;border:1px solid #eee}.member-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:teal;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600}.member-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.member-details[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-weight:500}.member-details[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%]{font-size:12px;color:#666}.feedback-summary[_ngcontent-%COMP%]   .rating-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #eee}.feedback-summary[_ngcontent-%COMP%]   .rating-row[_ngcontent-%COMP%]   .rating-label[_ngcontent-%COMP%]{color:#666;font-size:13px}.feedback-summary[_ngcontent-%COMP%]   .recommendation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 0;margin-top:8px}.feedback-summary[_ngcontent-%COMP%]   .recommendation[_ngcontent-%COMP%]   .rec-label[_ngcontent-%COMP%]{font-weight:500}.feedback-summary[_ngcontent-%COMP%]   .feedback-notes[_ngcontent-%COMP%]{margin-top:12px;font-size:13px;line-height:1.6}.feedback-summary[_ngcontent-%COMP%]   .feedback-notes[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.rating[_ngcontent-%COMP%]{display:flex;gap:2px}.rating[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{font-size:14px;color:#ddd}.rating[_ngcontent-%COMP%]   .fa-star.filled[_ngcontent-%COMP%]{color:#f59e0b}.feedback-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:12px;background:#f9fafb;border-radius:8px;margin-bottom:20px}.feedback-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.feedback-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:13px}.rating-form[_ngcontent-%COMP%]{display:grid;gap:16px}.rating-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rating-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#374151}.rating-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.star-input[_ngcontent-%COMP%]{display:flex;gap:4px}.star-input[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{font-size:20px;color:#ddd;cursor:pointer;transition:color .2s}.star-input[_ngcontent-%COMP%]   .fa-star.filled[_ngcontent-%COMP%]{color:#f59e0b}.star-input[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]:hover{color:#fbbf24}@media(max-width:768px){.form-grid[_ngcontent-%COMP%], .form-grid.cols-4[_ngcontent-%COMP%], .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"],changeDetection:0})};function f5e(n,t){if(n&1){let e=F();o(0,"div",23),y(1,"i",24),o(2,"p"),l(3,"No offers found"),a(),o(4,"button",4),x("click",function(){g(e);let r=p();return f(r.openCreateModal())}),l(5,"Create First Offer"),a()()}}function h5e(n,t){if(n&1&&(o(0,"span",52),l(1),Le(2,"number"),a()),n&2){let e=p().$implicit;c(),En("+ ",e.currency," ",xn(2,3,e.bonus)," ",e.bonusType)}}function _5e(n,t){if(n&1){let e=F();o(0,"button",53),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openEditModal(r))}),y(1,"i",54),a()}}function v5e(n,t){if(n&1){let e=F();o(0,"button",55),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.submitForApproval(r))}),y(1,"i",56),a()}}function x5e(n,t){if(n&1){let e=F();o(0,"button",57),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openApprovalModal(r,"approve"))}),y(1,"i",58),a()}}function y5e(n,t){if(n&1){let e=F();o(0,"button",59),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openApprovalModal(r,"reject"))}),y(1,"i",60),a()}}function C5e(n,t){if(n&1){let e=F();o(0,"button",61),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.sendOffer(r))}),y(1,"i",62),a()}}function b5e(n,t){if(n&1){let e=F();o(0,"button",63),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.acceptOffer(r))}),y(1,"i",64),a()}}function M5e(n,t){if(n&1){let e=F();o(0,"button",65),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.declineOffer(r))}),y(1,"i",66),a()}}function S5e(n,t){if(n&1){let e=F();o(0,"button",67),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.openConvertModal(r))}),y(1,"i",68),a()}}function P5e(n,t){if(n&1){let e=F();o(0,"button",69),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.deleteOffer(r))}),y(1,"i",70),a()}}function w5e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"span",27),l(3),a(),o(4,"div",28)(5,"span"),l(6),a(),o(7,"span"),l(8),a()()(),o(9,"td")(10,"div",29)(11,"span",30),l(12),a(),o(13,"span",31),l(14),a()()(),o(15,"td")(16,"div",32)(17,"span",33),l(18),a(),b(19,h5e,3,5,"span",34),a()(),o(20,"td")(21,"div",35)(22,"span",36),l(23),Le(24,"date"),a(),o(25,"span",37),l(26),Le(27,"date"),a()()(),o(28,"td")(29,"span",38),l(30),a()(),o(31,"td")(32,"span",39),l(33),a()(),o(34,"td",40)(35,"button",41),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetails(r))}),y(36,"i",42),a(),b(37,_5e,2,0,"button",43)(38,v5e,2,0,"button",44)(39,x5e,2,0,"button",45)(40,y5e,2,0,"button",46)(41,C5e,2,0,"button",47)(42,b5e,2,0,"button",48)(43,M5e,2,0,"button",49)(44,S5e,2,0,"button",50)(45,P5e,2,0,"button",51),a()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.offerNumber),c(3),_(e.jobTitle),c(2),_(e.department),c(4),_(e.candidateName),c(2),_(e.candidateEmail),c(4),_(i.formatSalary(e)),c(),m("ngIf",e.bonus),c(4),_(rt(24,24,e.joiningDate,"MMM d, yyyy")),c(2),ie("expired",i.isExpired(e.expiryDate)),c(),D(" Expires: ",rt(27,27,e.expiryDate,"MMM d")," "),c(3),m("ngClass",i.getApprovalClass(e.approvalStatus)),c(),D(" ",e.approvalStatus," "),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status.replace("_"," ")),c(4),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="APPROVED"),c(),m("ngIf",e.status==="SENT"),c(),m("ngIf",e.status==="SENT"),c(),m("ngIf",e.status==="ACCEPTED"),c(),m("ngIf",e.status==="DRAFT")}}function E5e(n,t){if(n&1&&(o(0,"table",25)(1,"thead")(2,"tr")(3,"th"),l(4,"Offer"),a(),o(5,"th"),l(6,"Candidate"),a(),o(7,"th"),l(8,"Compensation"),a(),o(9,"th"),l(10,"Joining"),a(),o(11,"th"),l(12,"Approval"),a(),o(13,"th"),l(14,"Status"),a(),o(15,"th"),l(16,"Actions"),a()()(),o(17,"tbody"),b(18,w5e,46,30,"tr",26),a()()),n&2){let e=p();c(18),m("ngForOf",e.filteredOffers)}}function O5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function T5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En(" ",e.firstName," ",e.lastName," - ",e.appliedPosition," ")}}function k5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function I5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function D5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function A5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function R5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function F5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function N5e(n,t){if(n&1){let e=F();o(0,"label",100)(1,"input",101),S("ngModelChange",function(r){let s=g(e).$implicit,d=p(2);return P(d.selectedBenefits[s],r)||(d.selectedBenefits[s]=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.updateBenefits())}),a(),l(2),a()}if(n&2){let e=t.$implicit,i=p(2);c(),M("ngModel",i.selectedBenefits[e]),c(),D(" ",e," ")}}function L5e(n,t){if(n&1){let e=F();o(0,"div",71)(1,"div",72),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",73)(3,"h3"),l(4),a(),o(5,"button",74),x("click",function(){g(e);let r=p();return f(r.closeModal())}),y(6,"i",66),a()(),o(7,"div",75)(8,"div",76)(9,"h4"),l(10,"Offer Details"),a(),o(11,"div",77)(12,"div",78)(13,"label"),l(14,"Offer Number"),a(),o(15,"input",79),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.offerNumber,r)||(s.selectedOffer.offerNumber=r),f(r)}),a()(),o(16,"div",78)(17,"label"),l(18,"Template"),a(),o(19,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.template,r)||(s.selectedOffer.template=r),f(r)}),b(20,O5e,2,2,"option",81),a()(),o(21,"div",78)(22,"label"),l(23,"Candidate "),o(24,"span",82),l(25,"*"),a()(),o(26,"select",83),x("change",function(r){g(e);let s=p();return f(s.selectCandidate(r))}),o(27,"option",84),l(28,"-- Select Candidate --"),a(),b(29,T5e,2,4,"option",81),a()(),o(30,"div",78)(31,"label"),l(32,"Offer Type"),a(),o(33,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.offerType,r)||(s.selectedOffer.offerType=r),f(r)}),b(34,k5e,2,2,"option",81),a()()()(),o(35,"div",76)(36,"h4"),l(37,"Position Details"),a(),o(38,"div",77)(39,"div",78)(40,"label"),l(41,"Job Title "),o(42,"span",82),l(43,"*"),a()(),o(44,"input",85),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.jobTitle,r)||(s.selectedOffer.jobTitle=r),f(r)}),a()(),o(45,"div",78)(46,"label"),l(47,"Department"),a(),o(48,"input",86),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.department,r)||(s.selectedOffer.department=r),f(r)}),a()(),o(49,"div",78)(50,"label"),l(51,"Reporting To"),a(),o(52,"input",87),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.reportingTo,r)||(s.selectedOffer.reportingTo=r),f(r)}),a()(),o(53,"div",78)(54,"label"),l(55,"Location"),a(),o(56,"input",88),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.location,r)||(s.selectedOffer.location=r),f(r)}),a()(),o(57,"div",78)(58,"label"),l(59,"Employment Type"),a(),o(60,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.employmentType,r)||(s.selectedOffer.employmentType=r),f(r)}),b(61,I5e,2,2,"option",81),a()(),o(62,"div",78)(63,"label"),l(64,"Work Mode"),a(),o(65,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.workMode,r)||(s.selectedOffer.workMode=r),f(r)}),b(66,D5e,2,2,"option",81),a()()()(),o(67,"div",76)(68,"h4"),l(69,"Compensation"),a(),o(70,"div",77)(71,"div",78)(72,"label"),l(73,"Currency"),a(),o(74,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.currency,r)||(s.selectedOffer.currency=r),f(r)}),b(75,A5e,2,2,"option",81),a()(),o(76,"div",78)(77,"label"),l(78,"Base Salary "),o(79,"span",82),l(80,"*"),a()(),o(81,"input",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.baseSalary,r)||(s.selectedOffer.baseSalary=r),f(r)}),a()(),o(82,"div",78)(83,"label"),l(84,"Frequency"),a(),o(85,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.salaryFrequency,r)||(s.selectedOffer.salaryFrequency=r),f(r)}),b(86,R5e,2,2,"option",81),a()(),o(87,"div",78)(88,"label"),l(89,"Bonus Type"),a(),o(90,"select",80),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.bonusType,r)||(s.selectedOffer.bonusType=r),f(r)}),b(91,F5e,2,2,"option",81),a()(),o(92,"div",78)(93,"label"),l(94,"Bonus Amount"),a(),o(95,"input",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.bonus,r)||(s.selectedOffer.bonus=r),f(r)}),a()(),o(96,"div",78)(97,"label"),l(98,"Stock Options"),a(),o(99,"input",90),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.stockOptions,r)||(s.selectedOffer.stockOptions=r),f(r)}),a()()()(),o(100,"div",76)(101,"h4"),l(102,"Benefits"),a(),o(103,"div",91),b(104,N5e,3,2,"label",92),a()(),o(105,"div",76)(106,"h4"),l(107,"Terms & Dates"),a(),o(108,"div",77)(109,"div",78)(110,"label"),l(111,"Joining Date "),o(112,"span",82),l(113,"*"),a()(),o(114,"input",93),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.joiningDate,r)||(s.selectedOffer.joiningDate=r),f(r)}),a()(),o(115,"div",78)(116,"label"),l(117,"Offer Expiry Date"),a(),o(118,"input",93),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.expiryDate,r)||(s.selectedOffer.expiryDate=r),f(r)}),a()(),o(119,"div",78)(120,"label"),l(121,"Probation Period (Days)"),a(),o(122,"input",94),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.probationPeriod,r)||(s.selectedOffer.probationPeriod=r),f(r)}),a()(),o(123,"div",78)(124,"label"),l(125,"Notice Period (Days)"),a(),o(126,"input",94),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.noticePeriod,r)||(s.selectedOffer.noticePeriod=r),f(r)}),a()(),o(127,"div",95)(128,"label"),l(129,"Custom Terms & Conditions"),a(),o(130,"textarea",96),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedOffer.customTerms,r)||(s.selectedOffer.customTerms=r),f(r)}),a()()()()(),o(131,"div",97)(132,"button",98),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(133,"Cancel"),a(),o(134,"button",4),x("click",function(){g(e);let r=p();return f(r.saveOffer())}),l(135),a()()()()}if(n&2){let e=p();c(4),_(e.isEditing?"Edit Offer":"Create Offer"),c(11),M("ngModel",e.selectedOffer.offerNumber),c(4),M("ngModel",e.selectedOffer.template),c(),m("ngForOf",e.templates),c(9),m("ngForOf",e.candidates),c(4),M("ngModel",e.selectedOffer.offerType),c(),m("ngForOf",e.offerTypes),c(10),M("ngModel",e.selectedOffer.jobTitle),c(4),M("ngModel",e.selectedOffer.department),c(4),M("ngModel",e.selectedOffer.reportingTo),c(4),M("ngModel",e.selectedOffer.location),c(4),M("ngModel",e.selectedOffer.employmentType),c(),m("ngForOf",e.employmentTypes),c(4),M("ngModel",e.selectedOffer.workMode),c(),m("ngForOf",e.workModes),c(8),M("ngModel",e.selectedOffer.currency),c(),m("ngForOf",e.currencies),c(6),M("ngModel",e.selectedOffer.baseSalary),c(4),M("ngModel",e.selectedOffer.salaryFrequency),c(),m("ngForOf",e.salaryFrequencies),c(4),M("ngModel",e.selectedOffer.bonusType),c(),m("ngForOf",e.bonusTypes),c(4),M("ngModel",e.selectedOffer.bonus),c(4),M("ngModel",e.selectedOffer.stockOptions),c(5),m("ngForOf",e.benefitOptions),c(10),M("ngModel",e.selectedOffer.joiningDate),c(4),M("ngModel",e.selectedOffer.expiryDate),c(4),M("ngModel",e.selectedOffer.probationPeriod),c(4),M("ngModel",e.selectedOffer.noticePeriod),c(4),M("ngModel",e.selectedOffer.customTerms),c(5),D(" ",e.isEditing?"Update Offer":"Save as Draft"," ")}}function V5e(n,t){if(n&1&&(o(0,"div",113)(1,"span",114),l(2,"Reporting To"),a(),o(3,"span",115),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewOffer.reportingTo)}}function B5e(n,t){if(n&1&&(o(0,"div",113)(1,"span",114),l(2),a(),o(3,"span",115),l(4),Le(5,"number"),a()()),n&2){let e=p(3);c(2),_(e.viewOffer.bonusType),c(2),Ge("",e.viewOffer.currency," ",xn(5,3,e.viewOffer.bonus))}}function U5e(n,t){if(n&1&&(o(0,"div",113)(1,"span",114),l(2,"Stock Options"),a(),o(3,"span",115),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewOffer.stockOptions)}}function j5e(n,t){if(n&1&&(o(0,"span",124),l(1),a()),n&2){let e=t.$implicit;c(),_(e)}}function W5e(n,t){if(n&1&&(o(0,"div",118)(1,"h4"),l(2,"Benefits"),a(),o(3,"div",122),b(4,j5e,2,1,"span",123),a()()),n&2){let e=p(3);c(4),m("ngForOf",e.viewOffer.benefits)}}function z5e(n,t){if(n&1&&(o(0,"div",125)(1,"span"),l(2),Le(3,"date"),a()()),n&2){let e=p(3);c(2),Ge("Approved by ",e.viewOffer.approvedBy," on ",rt(3,2,e.viewOffer.approvedDate,"MMM d, yyyy"))}}function q5e(n,t){if(n&1&&(o(0,"div",113)(1,"span",114),l(2,"Response Date"),a(),o(3,"span",115),l(4),Le(5,"date"),a()()),n&2){let e=p(4);c(4),_(rt(5,1,e.viewOffer.responseDate,"MMM d, yyyy"))}}function H5e(n,t){if(n&1&&(o(0,"div",113)(1,"span",114),l(2,"Decline Reason"),a(),o(3,"span",115),l(4),a()()),n&2){let e=p(4);c(4),_(e.viewOffer.declineReason)}}function G5e(n,t){if(n&1&&(o(0,"div",118)(1,"h4"),l(2,"Response Timeline"),a(),o(3,"div",113)(4,"span",114),l(5,"Sent Date"),a(),o(6,"span",115),l(7),Le(8,"date"),a()(),b(9,q5e,6,4,"div",116)(10,H5e,5,1,"div",116),a()),n&2){let e=p(3);c(7),_(rt(8,3,e.viewOffer.sentDate,"MMM d, yyyy")),c(2),m("ngIf",e.viewOffer.responseDate),c(),m("ngIf",e.viewOffer.declineReason)}}function $5e(n,t){if(n&1&&(o(0,"div",118)(1,"h4"),l(2,"Custom Terms"),a(),o(3,"p",126),l(4),a()()),n&2){let e=p(3);c(4),_(e.viewOffer.customTerms)}}function Y5e(n,t){if(n&1&&(o(0,"div",75)(1,"div",105)(2,"div",106)(3,"h2"),l(4),a(),o(5,"span",107),l(6),a()(),o(7,"div",108)(8,"span"),y(9,"i",109),l(10),a(),o(11,"span"),y(12,"i",110),l(13),a(),o(14,"span"),y(15,"i",24),l(16),a()()(),o(17,"div",111)(18,"div",112)(19,"h4"),l(20,"Candidate"),a(),o(21,"div",113)(22,"span",114),l(23,"Name"),a(),o(24,"span",115),l(25),a()(),o(26,"div",113)(27,"span",114),l(28,"Email"),a(),o(29,"span",115),l(30),a()()(),o(31,"div",112)(32,"h4"),l(33,"Position"),a(),o(34,"div",113)(35,"span",114),l(36,"Offer Type"),a(),o(37,"span",115),l(38),a()(),o(39,"div",113)(40,"span",114),l(41,"Employment Type"),a(),o(42,"span",115),l(43),a()(),o(44,"div",113)(45,"span",114),l(46,"Work Mode"),a(),o(47,"span",115),l(48),a()(),o(49,"div",113)(50,"span",114),l(51,"Location"),a(),o(52,"span",115),l(53),a()(),b(54,V5e,5,1,"div",116),a(),o(55,"div",112)(56,"h4"),l(57,"Compensation"),a(),o(58,"div",113)(59,"span",114),l(60,"Base Salary"),a(),o(61,"span",115),l(62),a()(),b(63,B5e,6,5,"div",116)(64,U5e,5,1,"div",116),a(),o(65,"div",112)(66,"h4"),l(67,"Timeline"),a(),o(68,"div",113)(69,"span",114),l(70,"Joining Date"),a(),o(71,"span",115),l(72),Le(73,"date"),a()(),o(74,"div",113)(75,"span",114),l(76,"Offer Expiry"),a(),o(77,"span",115),l(78),Le(79,"date"),a()(),o(80,"div",113)(81,"span",114),l(82,"Probation"),a(),o(83,"span",115),l(84),a()(),o(85,"div",113)(86,"span",114),l(87,"Notice Period"),a(),o(88,"span",115),l(89),a()()(),b(90,W5e,5,1,"div",117),o(91,"div",118)(92,"h4"),l(93,"Approval Status"),a(),o(94,"div",119)(95,"span",120),l(96),a(),b(97,z5e,4,5,"div",121),a()(),b(98,G5e,11,6,"div",117)(99,$5e,5,1,"div",117),a()()),n&2){let e=p(2);c(4),_(e.viewOffer.jobTitle),c(),m("ngClass",e.getStatusClass(e.viewOffer.status)),c(),_(e.viewOffer.status.replace("_"," ")),c(4),D(" ",e.viewOffer.offerNumber),c(3),D(" ",e.viewOffer.department),c(3),D(" ",e.viewOffer.template),c(9),_(e.viewOffer.candidateName),c(5),_(e.viewOffer.candidateEmail),c(8),_(e.viewOffer.offerType),c(5),_(e.viewOffer.employmentType),c(5),_(e.viewOffer.workMode),c(5),_(e.viewOffer.location),c(),m("ngIf",e.viewOffer.reportingTo),c(8),_(e.formatSalary(e.viewOffer)),c(),m("ngIf",e.viewOffer.bonus),c(),m("ngIf",e.viewOffer.stockOptions),c(8),_(rt(73,28,e.viewOffer.joiningDate,"MMM d, yyyy")),c(5),ie("expired",e.isExpired(e.viewOffer.expiryDate)),c(),D(" ",rt(79,31,e.viewOffer.expiryDate,"MMM d, yyyy")," "),c(6),D("",e.viewOffer.probationPeriod," days"),c(5),D("",e.viewOffer.noticePeriod," days"),c(),m("ngIf",e.viewOffer.benefits.length),c(5),m("ngClass",e.getApprovalClass(e.viewOffer.approvalStatus)),c(),D(" ",e.viewOffer.approvalStatus," "),c(),m("ngIf",e.viewOffer.approvedBy),c(),m("ngIf",e.viewOffer.sentDate),c(),m("ngIf",e.viewOffer.customTerms)}}function J5e(n,t){if(n&1){let e=F();o(0,"button",4),x("click",function(){g(e);let r=p(2);return r.sendOffer(r.viewOffer),f(r.closeViewModal())}),y(1,"i",62),l(2," Send to Candidate "),a()}}function K5e(n,t){if(n&1){let e=F();o(0,"div",71)(1,"div",72),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",73)(3,"h3"),l(4,"Offer Details"),a(),o(5,"button",74),x("click",function(){g(e);let r=p();return f(r.closeViewModal())}),y(6,"i",66),a()(),b(7,Y5e,100,34,"div",102),o(8,"div",97)(9,"button",103),l(10,"Close"),a(),b(11,J5e,3,0,"button",104),a()()()}if(n&2){let e=p();c(7),m("ngIf",e.viewOffer),c(4),m("ngIf",(e.viewOffer==null?null:e.viewOffer.status)==="APPROVED")}}function Q5e(n,t){if(n&1){let e=F();o(0,"div",75)(1,"div",130)(2,"strong"),l(3),a(),o(4,"span"),l(5),a()(),o(6,"div",78)(7,"label"),l(8,"Comments"),a(),o(9,"textarea",131),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.approvalComments,r)||(s.approvalComments=r),f(r)}),a()()()}if(n&2){let e=p(2);c(3),_(e.approvalOffer.candidateName),c(2),Ge("",e.approvalOffer.jobTitle," - ",e.formatSalary(e.approvalOffer)),c(4),M("ngModel",e.approvalComments),m("placeholder",e.approvalAction==="approve"?"Add approval comments (optional)...":"Provide feedback for revision...")}}function X5e(n,t){if(n&1){let e=F();o(0,"div",71)(1,"div",127),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",73)(3,"h3"),l(4),a(),o(5,"button",128),y(6,"i",66),a()(),b(7,Q5e,10,5,"div",102),o(8,"div",97)(9,"button",98),x("click",function(){g(e);let r=p();return f(r.closeApprovalModal())}),l(10,"Cancel"),a(),o(11,"button",129),x("click",function(){g(e);let r=p();return f(r.submitApproval())}),l(12),a()()()()}if(n&2){let e=p();c(4),_(e.approvalAction==="approve"?"Approve Offer":"Return for Revision"),c(3),m("ngIf",e.approvalOffer),c(4),m("ngClass",e.approvalAction==="approve"?"btn-success":"btn-warning"),c(),D(" ",e.approvalAction==="approve"?"Approve":"Return for Revision"," ")}}function Z5e(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function eTe(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function tTe(n,t){if(n&1&&(o(0,"option",99),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function nTe(n,t){if(n&1){let e=F();o(0,"div",75)(1,"div",132),y(2,"i",133),o(3,"span"),l(4,"Converting accepted offer for "),o(5,"strong"),l(6),a(),l(7," to a new employee record."),a()(),o(8,"div",76)(9,"h4"),l(10,"Employee Information"),a(),o(11,"div",77)(12,"div",78)(13,"label"),l(14,"Employee Code"),a(),o(15,"input",79),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.employeeCode,r)||(s.convertEmployeeData.employeeCode=r),f(r)}),a()(),o(16,"div",78)(17,"label"),l(18,"First Name "),o(19,"span",82),l(20,"*"),a()(),o(21,"input",134),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.firstName,r)||(s.convertEmployeeData.firstName=r),f(r)}),a()(),o(22,"div",78)(23,"label"),l(24,"Last Name "),o(25,"span",82),l(26,"*"),a()(),o(27,"input",134),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.lastName,r)||(s.convertEmployeeData.lastName=r),f(r)}),a()(),o(28,"div",78)(29,"label"),l(30,"Email"),a(),o(31,"input",135),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.email,r)||(s.convertEmployeeData.email=r),f(r)}),a()(),o(32,"div",78)(33,"label"),l(34,"Phone"),a(),o(35,"input",136),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.phone,r)||(s.convertEmployeeData.phone=r),f(r)}),a()()()(),o(36,"div",76)(37,"h4"),l(38,"Position Details"),a(),o(39,"div",77)(40,"div",78)(41,"label"),l(42,"Department "),o(43,"span",82),l(44,"*"),a()(),o(45,"select",80),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.department,r)||(s.convertEmployeeData.department=r),f(r)}),o(46,"option",84),l(47,"Select Department"),a(),b(48,Z5e,2,2,"option",81),a()(),o(49,"div",78)(50,"label"),l(51,"Designation"),a(),o(52,"input",134),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.designation,r)||(s.convertEmployeeData.designation=r),f(r)}),a()(),o(53,"div",78)(54,"label"),l(55,"Grade"),a(),o(56,"select",80),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.grade,r)||(s.convertEmployeeData.grade=r),f(r)}),o(57,"option",84),l(58,"Select Grade"),a(),b(59,eTe,2,2,"option",81),a()(),o(60,"div",78)(61,"label"),l(62,"Location"),a(),o(63,"select",80),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.location,r)||(s.convertEmployeeData.location=r),f(r)}),o(64,"option",84),l(65,"Select Location"),a(),b(66,tTe,2,2,"option",81),a()(),o(67,"div",78)(68,"label"),l(69,"Reporting To"),a(),o(70,"input",134),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.reportingTo,r)||(s.convertEmployeeData.reportingTo=r),f(r)}),a()(),o(71,"div",78)(72,"label"),l(73,"Joining Date"),a(),o(74,"input",93),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.joiningDate,r)||(s.convertEmployeeData.joiningDate=r),f(r)}),a()()()(),o(75,"div",76)(76,"h4"),l(77,"Compensation"),a(),o(78,"div",77)(79,"div",78)(80,"label"),l(81,"Base Salary"),a(),o(82,"input",137),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.convertEmployeeData.baseSalary,r)||(s.convertEmployeeData.baseSalary=r),f(r)}),a()()()()()}if(n&2){let e=p(2);c(6),_(e.convertOffer.candidateName),c(9),M("ngModel",e.convertEmployeeData.employeeCode),c(6),M("ngModel",e.convertEmployeeData.firstName),c(6),M("ngModel",e.convertEmployeeData.lastName),c(4),M("ngModel",e.convertEmployeeData.email),c(4),M("ngModel",e.convertEmployeeData.phone),c(10),M("ngModel",e.convertEmployeeData.department),c(3),m("ngForOf",e.departments),c(4),M("ngModel",e.convertEmployeeData.designation),c(4),M("ngModel",e.convertEmployeeData.grade),c(3),m("ngForOf",e.grades),c(4),M("ngModel",e.convertEmployeeData.location),c(3),m("ngForOf",e.locations),c(4),M("ngModel",e.convertEmployeeData.reportingTo),c(4),M("ngModel",e.convertEmployeeData.joiningDate),c(8),M("ngModel",e.convertEmployeeData.baseSalary)}}function iTe(n,t){if(n&1){let e=F();o(0,"div",71)(1,"div",72),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",73)(3,"h3"),y(4,"i",68),l(5," Convert to Employee"),a(),o(6,"button",74),x("click",function(){g(e);let r=p();return f(r.closeConvertModal())}),y(7,"i",66),a()(),b(8,nTe,83,16,"div",102),o(9,"div",97)(10,"button",98),x("click",function(){g(e);let r=p();return f(r.closeConvertModal())}),l(11,"Cancel"),a(),o(12,"button",4),x("click",function(){g(e);let r=p();return f(r.convertToEmployee())}),y(13,"i",68),l(14," Create Employee "),a()()()()}if(n&2){let e=p();c(8),m("ngIf",e.convertOffer)}}var og=class n{constructor(t,e,i){this.recruitmentService=t;this.toastService=e;this.cdr=i}offers=[];candidates=[];loading=!1;saving=!1;showModal=!1;isEditing=!1;selectedOffer=this.getEmptyOffer();activeTab="all";searchTerm="";offerTypes=["New Hire","Promotion","Transfer","Contract Extension"];employmentTypes=["Full-Time","Part-Time","Contract","Intern"];workModes=["Onsite","Remote","Hybrid"];currencies=["USD","EUR","GBP","INR","SGD","AED"];salaryFrequencies=["Monthly","Annual","Hourly"];bonusTypes=["Signing Bonus","Performance Bonus","Annual Bonus","None"];templates=["Standard Offer","Executive Offer","Contract Offer","Intern Offer"];benefitOptions=["Health Insurance","Dental","Vision","401k Match","Stock Options","Flexible PTO","Remote Work","Gym Membership","Learning Budget"];showViewModal=!1;viewOffer=null;showApprovalModal=!1;approvalOffer=null;approvalAction="";approvalComments="";selectedBenefits={};showConvertModal=!1;convertOffer=null;convertEmployeeData=this.getEmptyConvertData();departments=["Engineering","Product","Design","HR","Finance","Sales","Marketing","Operations"];designations=["Junior","Associate","Senior","Lead","Manager","Director","VP"];locations=["New York","San Francisco","Chicago","Remote","London","Singapore"];grades=["G1","G2","G3","G4","G5","G6","G7"];ngOnInit(){this.loadData(),this.initBenefits()}initBenefits(){this.benefitOptions.forEach(t=>this.selectedBenefits[t]=!1)}loadData(){this.loading=!0,this.cdr.markForCheck(),this.recruitmentService.getOffers().subscribe({next:t=>{this.offers=t,this.loading=!1,this.cdr.markForCheck()},error:()=>{this.generateMockData(),this.loading=!1,this.cdr.markForCheck()}}),this.recruitmentService.getCandidates().subscribe({next:t=>{this.candidates=t.filter(e=>e.stage==="OFFER"||e.stage==="INTERVIEW"),this.cdr.markForCheck()},error:()=>{this.candidates=[],this.cdr.markForCheck()}})}generateMockData(){let t=["DRAFT","PENDING_APPROVAL","APPROVED","SENT","ACCEPTED","DECLINED","EXPIRED"],e=["John Smith","Emily Johnson","Michael Williams","Sarah Brown"],i=["Senior Software Engineer","Product Manager","UX Designer","Data Analyst"];this.offers=e.map((r,s)=>({id:s+1,offerNumber:`OFR-2024-${String(s+1).padStart(4,"0")}`,candidateId:s+1,candidateName:r,candidateEmail:`${r.toLowerCase().replace(" ",".")}@email.com`,jobTitle:i[s],department:["Engineering","Product","Design","Analytics"][s],reportingTo:"John Manager",offerType:this.offerTypes[s%this.offerTypes.length],employmentType:this.employmentTypes[s%this.employmentTypes.length],workMode:this.workModes[s%this.workModes.length],location:["New York","San Francisco","Remote","Chicago"][s],baseSalary:8e4+s*15e3,currency:"USD",salaryFrequency:"Annual",bonus:s%2===0?1e4:void 0,bonusType:s%2===0?"Signing Bonus":void 0,stockOptions:s%3===0?"5000 RSUs vesting over 4 years":void 0,benefits:this.benefitOptions.slice(0,3+s%4),joiningDate:this.getFutureDate(30+s*7),expiryDate:this.getFutureDate(7+s),probationPeriod:90,noticePeriod:30,template:this.templates[s%this.templates.length],status:t[s%t.length],approvalStatus:s<2?"PENDING":"APPROVED",approvedBy:s>=2?"HR Director":void 0,approvedDate:s>=2?this.getPastDate(3):void 0,sentDate:["SENT","ACCEPTED","DECLINED"].includes(t[s%t.length])?this.getPastDate(5):void 0,createdBy:"HR Admin",createdAt:this.getPastDate(10+s)}))}getFutureDate(t){let e=new Date;return e.setDate(e.getDate()+t),e.toISOString().split("T")[0]}getPastDate(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}get filteredOffers(){let t=this.offers;if(this.activeTab!=="all"&&(t=t.filter(e=>e.status===this.activeTab.toUpperCase().replace("-","_"))),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.candidateName.toLowerCase().includes(e)||i.offerNumber.toLowerCase().includes(e)||i.jobTitle.toLowerCase().includes(e)||i.department.toLowerCase().includes(e))}return t}getStatusCount(t){return t==="all"?this.offers.length:this.offers.filter(e=>e.status===t.toUpperCase().replace("-","_")).length}setActiveTab(t){this.activeTab=t}getEmptyOffer(){return{offerNumber:"",candidateId:0,candidateName:"",candidateEmail:"",jobTitle:"",department:"",offerType:"New Hire",employmentType:"Full-Time",workMode:"Onsite",location:"",baseSalary:0,currency:"USD",salaryFrequency:"Annual",benefits:[],joiningDate:"",expiryDate:"",probationPeriod:90,noticePeriod:30,template:"Standard Offer",status:"DRAFT",approvalStatus:"PENDING"}}openCreateModal(){this.selectedOffer=this.getEmptyOffer(),this.selectedOffer.offerNumber=this.generateOfferNumber(),this.isEditing=!1,this.initBenefits(),this.showModal=!0}openEditModal(t){this.selectedOffer=Tt(me({},t),{benefits:[...t.benefits]}),this.isEditing=!0,this.initBenefits(),t.benefits.forEach(e=>this.selectedBenefits[e]=!0),this.showModal=!0}generateOfferNumber(){let t=new Date().getFullYear(),e=this.offers.length+1;return`OFR-${t}-${String(e).padStart(4,"0")}`}closeModal(){this.showModal=!1}selectCandidate(t){let e=parseInt(t.target.value),i=this.candidates.find(r=>r.id===e);i&&(this.selectedOffer.candidateId=i.id,this.selectedOffer.candidateName=`${i.firstName} ${i.lastName}`,this.selectedOffer.candidateEmail=i.email,this.selectedOffer.jobTitle=i.appliedPosition||"")}updateBenefits(){this.selectedOffer.benefits=Object.keys(this.selectedBenefits).filter(t=>this.selectedBenefits[t])}saveOffer(){if(this.updateBenefits(),!this.selectedOffer.candidateId||!this.selectedOffer.baseSalary||!this.selectedOffer.joiningDate){this.toastService.error("Please fill in all required fields");return}this.saving=!0,this.cdr.markForCheck(),this.isEditing?this.recruitmentService.updateOffer(this.selectedOffer.id,this.selectedOffer).subscribe({next:()=>{this.saving=!1;let t=this.offers.findIndex(e=>e.id===this.selectedOffer.id);t>=0&&(this.offers[t]=me({},this.selectedOffer)),this.toastService.success("Offer updated successfully"),this.closeModal(),this.cdr.markForCheck()},error:()=>{this.saving=!1,this.toastService.error("Failed to update offer"),this.cdr.markForCheck()}}):this.recruitmentService.createOffer(this.selectedOffer).subscribe({next:t=>{this.saving=!1,this.offers.unshift(t),this.toastService.success("Offer created successfully"),this.closeModal(),this.cdr.markForCheck()},error:()=>{this.saving=!1,this.toastService.error("Failed to create offer"),this.cdr.markForCheck()}})}viewDetails(t){this.viewOffer=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewOffer=null}openApprovalModal(t,e){this.approvalOffer=t,this.approvalAction=e,this.approvalComments="",this.showApprovalModal=!0}closeApprovalModal(){this.showApprovalModal=!1,this.approvalOffer=null,this.approvalAction="",this.approvalComments=""}submitApproval(){this.approvalOffer&&(this.approvalAction==="approve"?(this.approvalOffer.approvalStatus="APPROVED",this.approvalOffer.status="APPROVED",this.approvalOffer.approvedBy="Current User",this.approvalOffer.approvedDate=new Date().toISOString().split("T")[0],this.toastService.success("Offer approved successfully")):(this.approvalOffer.approvalStatus="REJECTED",this.approvalOffer.status="DRAFT",this.toastService.info("Offer returned for revision")),this.closeApprovalModal())}submitForApproval(t){t.status="PENDING_APPROVAL",t.approvalStatus="PENDING",this.toastService.success("Offer submitted for approval")}sendOffer(t){if(t.approvalStatus!=="APPROVED"){this.toastService.error("Offer must be approved before sending");return}this.recruitmentService.sendOffer(t.id).subscribe({next:()=>{t.status="SENT",t.sentDate=new Date().toISOString().split("T")[0],this.toastService.success("Offer sent to candidate"),this.cdr.markForCheck()},error:()=>{t.status="SENT",t.sentDate=new Date().toISOString().split("T")[0],this.toastService.success("Offer sent to candidate"),this.cdr.markForCheck()}})}acceptOffer(t){this.recruitmentService.acceptOffer(t.id).subscribe({next:()=>{t.status="ACCEPTED",t.responseDate=new Date().toISOString().split("T")[0],this.toastService.success("Offer marked as accepted"),this.cdr.markForCheck()},error:()=>{t.status="ACCEPTED",t.responseDate=new Date().toISOString().split("T")[0],this.toastService.success("Offer marked as accepted"),this.cdr.markForCheck()}})}declineOffer(t){let e=prompt("Please provide the reason for declining:");e&&this.recruitmentService.declineOffer(t.id,e).subscribe({next:()=>{t.status="DECLINED",t.responseDate=new Date().toISOString().split("T")[0],t.declineReason=e,this.toastService.info("Offer marked as declined"),this.cdr.markForCheck()},error:()=>{t.status="DECLINED",t.responseDate=new Date().toISOString().split("T")[0],t.declineReason=e,this.toastService.info("Offer marked as declined"),this.cdr.markForCheck()}})}deleteOffer(t){confirm("Are you sure you want to delete this offer?")&&this.recruitmentService.deleteOffer(t.id).subscribe({next:()=>{this.offers=this.offers.filter(e=>e.id!==t.id),this.toastService.success("Offer deleted"),this.cdr.markForCheck()},error:()=>{this.offers=this.offers.filter(e=>e.id!==t.id),this.toastService.success("Offer deleted"),this.cdr.markForCheck()}})}getStatusClass(t){return"status-"+t.toLowerCase().replace("_","-")}getApprovalClass(t){return"approval-"+t.toLowerCase()}isExpired(t){return new Date(t)<new Date}formatSalary(t){let e=t.baseSalary.toLocaleString();return`${t.currency} ${e} / ${t.salaryFrequency}`}getEmptyConvertData(){return{employeeCode:"",firstName:"",lastName:"",email:"",phone:"",department:"",designation:"",grade:"",location:"",joiningDate:"",baseSalary:0,reportingTo:""}}openConvertModal(t){this.convertOffer=t;let e=t.candidateName.split(" ");this.convertEmployeeData={employeeCode:this.generateEmployeeCode(),firstName:e[0]||"",lastName:e.slice(1).join(" ")||"",email:t.candidateEmail,phone:"",department:t.department,designation:t.jobTitle,grade:"G3",location:t.location,joiningDate:t.joiningDate,baseSalary:t.baseSalary,reportingTo:t.reportingTo||""},this.showConvertModal=!0}closeConvertModal(){this.showConvertModal=!1,this.convertOffer=null,this.convertEmployeeData=this.getEmptyConvertData()}generateEmployeeCode(){let t=new Date().getFullYear(),e=Math.floor(1e3+Math.random()*9e3);return`EMP-${t}-${e}`}convertToEmployee(){if(!this.convertOffer||!this.convertEmployeeData.firstName||!this.convertEmployeeData.department){this.toastService.error("Please fill in all required fields");return}this.recruitmentService.convertToEmployee(this.convertOffer.candidateId,this.convertEmployeeData).subscribe({next:t=>{this.convertOffer.status="CONVERTED",this.toastService.success(`Successfully converted ${this.convertEmployeeData.firstName} ${this.convertEmployeeData.lastName} to employee with code ${this.convertEmployeeData.employeeCode}`),this.closeConvertModal(),this.cdr.markForCheck()},error:()=>{this.convertOffer.status="CONVERTED",this.toastService.success(`Successfully converted ${this.convertEmployeeData.firstName} ${this.convertEmployeeData.lastName} to employee with code ${this.convertEmployeeData.employeeCode}`),this.closeConvertModal(),this.cdr.markForCheck()}})}static \u0275fac=function(e){return new(e||n)(V(ma),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-recruitment-offers"]],decls:52,vars:25,consts:[[1,"offers-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"stats-cards"],[1,"stat-card",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","draft",3,"click"],[1,"stat-card","pending",3,"click"],[1,"stat-card","sent",3,"click"],[1,"stat-card","accepted",3,"click"],[1,"stat-card","declined",3,"click"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search by name, ID, position, department...",3,"ngModelChange","ngModel"],[1,"content-card"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"empty-state"],[1,"fa","fa-file-text-o"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"offer-number"],[1,"offer-meta"],[1,"candidate-info"],[1,"candidate-name"],[1,"candidate-email"],[1,"salary-info"],[1,"salary"],["class","bonus",4,"ngIf"],[1,"date-info"],[1,"join-date"],[1,"expiry"],[1,"approval-badge",3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","View",1,"btn-icon",3,"click"],[1,"fa","fa-eye"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon success","title","Submit for Approval",3,"click",4,"ngIf"],["class","btn-icon success","title","Approve",3,"click",4,"ngIf"],["class","btn-icon warning","title","Return for Revision",3,"click",4,"ngIf"],["class","btn-icon success","title","Send to Candidate",3,"click",4,"ngIf"],["class","btn-icon success","title","Mark Accepted",3,"click",4,"ngIf"],["class","btn-icon danger","title","Mark Declined",3,"click",4,"ngIf"],["class","btn-icon primary","title","Convert to Employee",3,"click",4,"ngIf"],["class","btn-icon danger","title","Delete",3,"click",4,"ngIf"],[1,"bonus"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-pencil"],["title","Submit for Approval",1,"btn-icon","success",3,"click"],[1,"fa","fa-check-circle"],["title","Approve",1,"btn-icon","success",3,"click"],[1,"fa","fa-thumbs-up"],["title","Return for Revision",1,"btn-icon","warning",3,"click"],[1,"fa","fa-undo"],["title","Send to Candidate",1,"btn-icon","success",3,"click"],[1,"fa","fa-paper-plane"],["title","Mark Accepted",1,"btn-icon","success",3,"click"],[1,"fa","fa-check"],["title","Mark Declined",1,"btn-icon","danger",3,"click"],[1,"fa","fa-times"],["title","Convert to Employee",1,"btn-icon","primary",3,"click"],[1,"fa","fa-user-plus"],["title","Delete",1,"btn-icon","danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-overlay"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"readonly",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"required"],[3,"change"],["value",""],["type","text","placeholder","e.g., Senior Software Engineer",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Engineering",3,"ngModelChange","ngModel"],["type","text","placeholder","Manager name",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., New York, NY",3,"ngModelChange","ngModel"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., 5000 RSUs over 4 years",3,"ngModelChange","ngModel"],[1,"checkbox-grid"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","date",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","3","placeholder","Any additional terms...",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"ngModelChange","change","ngModel"],["class","modal-body",4,"ngIf"],[1,"btn","btn-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"detail-header"],[1,"detail-title"],[1,"status-badge","large",3,"ngClass"],[1,"detail-meta"],[1,"fa","fa-hashtag"],[1,"fa","fa-building"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],["class","detail-section full",4,"ngIf"],[1,"detail-section","full"],[1,"approval-info"],[1,"approval-badge","large",3,"ngClass"],["class","approval-details",4,"ngIf"],[1,"benefit-tags"],["class","benefit-tag",4,"ngFor","ngForOf"],[1,"benefit-tag"],[1,"approval-details"],[1,"detail-text"],[1,"modal-content",3,"click"],[1,"btn-close"],[1,"btn",3,"click","ngClass"],[1,"offer-summary"],["rows","3",3,"ngModelChange","ngModel","placeholder"],[1,"convert-info-banner"],[1,"fa","fa-info-circle"],["type","text",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter phone number",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Offer Letters"),a(),o(5,"p",3),l(6,"Create and manage job offers for candidates"),a()(),o(7,"button",4),x("click",function(){return i.openCreateModal()}),y(8,"i",5),l(9," Create Offer "),a()(),o(10,"div",6)(11,"div",7),x("click",function(){return i.setActiveTab("all")}),o(12,"div",8),l(13),a(),o(14,"div",9),l(15,"All Offers"),a()(),o(16,"div",10),x("click",function(){return i.setActiveTab("draft")}),o(17,"div",8),l(18),a(),o(19,"div",9),l(20,"Drafts"),a()(),o(21,"div",11),x("click",function(){return i.setActiveTab("pending-approval")}),o(22,"div",8),l(23),a(),o(24,"div",9),l(25,"Pending"),a()(),o(26,"div",12),x("click",function(){return i.setActiveTab("sent")}),o(27,"div",8),l(28),a(),o(29,"div",9),l(30,"Sent"),a()(),o(31,"div",13),x("click",function(){return i.setActiveTab("accepted")}),o(32,"div",8),l(33),a(),o(34,"div",9),l(35,"Accepted"),a()(),o(36,"div",14),x("click",function(){return i.setActiveTab("declined")}),o(37,"div",8),l(38),a(),o(39,"div",9),l(40,"Declined"),a()()(),o(41,"div",15)(42,"div",16),y(43,"i",17),o(44,"input",18),S("ngModelChange",function(s){return P(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),o(45,"div",19),b(46,f5e,6,0,"div",20)(47,E5e,19,1,"table",21),a()(),b(48,L5e,136,31,"div",22)(49,K5e,12,2,"div",22)(50,X5e,13,4,"div",22)(51,iTe,15,1,"div",22)),e&2&&(c(11),ie("active",i.activeTab==="all"),c(2),_(i.getStatusCount("all")),c(3),ie("active",i.activeTab==="draft"),c(2),_(i.getStatusCount("draft")),c(3),ie("active",i.activeTab==="pending-approval"),c(2),_(i.getStatusCount("pending-approval")),c(3),ie("active",i.activeTab==="sent"),c(2),_(i.getStatusCount("sent")),c(3),ie("active",i.activeTab==="accepted"),c(2),_(i.getStatusCount("accepted")),c(3),ie("active",i.activeTab==="declined"),c(2),_(i.getStatusCount("declined")),c(6),M("ngModel",i.searchTerm),c(2),m("ngIf",!i.loading&&i.filteredOffers.length===0),c(),m("ngIf",!i.loading&&i.filteredOffers.length>0),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showViewModal),c(),m("ngIf",i.showApprovalModal),c(),m("ngIf",i.showConvertModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,Ee,Rt,yn,ir],styles:[".offers-container[_ngcontent-%COMP%]{padding:24px;background:#f5f7fa;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:teal;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;text-align:center;box-shadow:0 2px 4px #00000014;cursor:pointer;transition:all .2s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:teal}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.stat-card.draft[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6b7280}.stat-card.pending[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.sent[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#3b82f6}.stat-card.accepted[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-card.declined[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#ef4444}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 36px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#ddd;margin-bottom:16px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{white-space:nowrap}.offer-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.offer-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:12px;color:#666}.candidate-info[_ngcontent-%COMP%]   .candidate-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333}.candidate-info[_ngcontent-%COMP%]   .candidate-email[_ngcontent-%COMP%]{font-size:12px;color:#666}.salary-info[_ngcontent-%COMP%]   .salary[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333}.salary-info[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%]{font-size:12px;color:#10b981}.date-info[_ngcontent-%COMP%]   .join-date[_ngcontent-%COMP%]{display:block;font-weight:500}.date-info[_ngcontent-%COMP%]   .expiry[_ngcontent-%COMP%]{font-size:12px;color:#666}.date-info[_ngcontent-%COMP%]   .expiry.expired[_ngcontent-%COMP%]{color:#ef4444}.approval-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:4px;font-size:10px;font-weight:500;text-transform:uppercase}.approval-badge.approval-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.approval-badge.approval-approved[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.approval-badge.approval-rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.approval-badge.large[_ngcontent-%COMP%]{padding:4px 12px;font-size:12px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:11px;font-weight:500;text-transform:uppercase}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.status-badge.status-pending-approval[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.status-approved[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.status-badge.status-sent[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.status-badge.status-accepted[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.status-declined[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.status-expired[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.status-converted[_ngcontent-%COMP%]{background:teal;color:#fff}.status-badge.large[_ngcontent-%COMP%]{padding:6px 14px;font-size:12px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:teal}.btn-icon.success[_ngcontent-%COMP%]:hover{color:#10b981}.btn-icon.danger[_ngcontent-%COMP%]:hover{color:#ef4444}.btn-icon.warning[_ngcontent-%COMP%]:hover{color:#f59e0b}.btn-icon.primary[_ngcontent-%COMP%]:hover{color:teal}.convert-info-banner[_ngcontent-%COMP%]{background:#e6f7f7;border:1px solid #008080;border-radius:8px;padding:16px;margin-bottom:20px;display:flex;align-items:center;gap:12px}.convert-info-banner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;font-size:20px}.convert-info-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#005959;font-size:14px}.convert-info-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:teal}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#059669}.btn.btn-warning[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.btn.btn-warning[_ngcontent-%COMP%]:hover{background:#d97706}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:500px;max-width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;font-size:16px}.btn-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f9fafb}.offer-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:12px;background:#f9fafb;border-radius:8px;margin-bottom:20px}.offer-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.offer-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:13px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;color:teal;font-weight:600;padding-bottom:8px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.readonly[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#666}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.checkbox-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#374151;cursor:pointer}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.detail-header[_ngcontent-%COMP%]{margin-bottom:24px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:8px}.detail-header[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]{display:flex;gap:24px;color:#666;font-size:14px}.detail-header[_ngcontent-%COMP%]   .detail-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:16px}.detail-section.full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:teal;font-weight:600}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:13px}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.detail-row[_ngcontent-%COMP%]   .expired[_ngcontent-%COMP%]{color:#ef4444}.detail-text[_ngcontent-%COMP%]{color:#333;line-height:1.6;white-space:pre-wrap}.benefit-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.benefit-tag[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c;padding:6px 12px;border-radius:16px;font-size:13px}.approval-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.approval-info[_ngcontent-%COMP%]   .approval-details[_ngcontent-%COMP%]{color:#666;font-size:13px}@media(max-width:768px){.form-grid[_ngcontent-%COMP%], .checkbox-grid[_ngcontent-%COMP%], .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}"],changeDetection:0})};var $2=class n{constructor(t){this.http=t}baseUrl="/api/training";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getPrograms(){return this.http.get(`${this.baseUrl}/programs`)}getActivePrograms(){return this.http.get(`${this.baseUrl}/programs/active`)}getProgram(t){return this.http.get(`${this.baseUrl}/programs/${t}`)}createProgram(t){return this.http.post(`${this.baseUrl}/programs`,t)}updateProgram(t,e){return this.http.put(`${this.baseUrl}/programs/${t}`,e)}deleteProgram(t){return this.http.delete(`${this.baseUrl}/programs/${t}`)}getSessions(){return this.http.get(`${this.baseUrl}/sessions`)}getSessionsByProgram(t){return this.http.get(`${this.baseUrl}/sessions/program/${t}`)}getUpcomingSessions(){return this.http.get(`${this.baseUrl}/sessions/upcoming`)}getSession(t){return this.http.get(`${this.baseUrl}/sessions/${t}`)}createSession(t){return this.http.post(`${this.baseUrl}/sessions`,t)}updateSession(t,e){return this.http.put(`${this.baseUrl}/sessions/${t}`,e)}startSession(t){return this.http.post(`${this.baseUrl}/sessions/${t}/start`,{})}completeSession(t){return this.http.post(`${this.baseUrl}/sessions/${t}/complete`,{})}cancelSession(t,e){return this.http.post(`${this.baseUrl}/sessions/${t}/cancel`,{reason:e})}deleteSession(t){return this.http.delete(`${this.baseUrl}/sessions/${t}`)}getEnrollmentsBySession(t){return this.http.get(`${this.baseUrl}/enrollments/session/${t}`)}getEnrollmentsByEmployee(t){return this.http.get(`${this.baseUrl}/enrollments/employee/${t}`)}enrollEmployee(t){return this.http.post(`${this.baseUrl}/enrollments`,t)}markAttendance(t,e){return this.http.post(`${this.baseUrl}/enrollments/${t}/attendance`,{attended:e})}submitFeedback(t,e){return this.http.post(`${this.baseUrl}/enrollments/${t}/feedback`,e)}markCompleted(t,e){return this.http.post(`${this.baseUrl}/enrollments/${t}/complete`,{score:e})}generateCertificate(t){return this.http.post(`${this.baseUrl}/enrollments/${t}/certificate`,{})}cancelEnrollment(t){return this.http.delete(`${this.baseUrl}/enrollments/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function oTe(n,t){n&1&&(o(0,"div",16)(1,"p"),l(2,'No training programs yet. Click "New Program" to create one.'),a()())}function aTe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",19),l(11),a()(),o(12,"td")(13,"button",20),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openForm(r))}),l(14,"Edit"),a(),o(15,"button",21),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteProgram(r.id))}),l(16,"Delete"),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.programCode),c(2),_(e.name),c(2),_(e.category),c(2),D("",e.durationHours," hours"),c(2),m("ngClass",e.isActive?"bg-success":"bg-secondary"),c(),_(e.isActive?"Active":"Inactive")}}function sTe(n,t){if(n&1&&(o(0,"table",17)(1,"thead")(2,"tr")(3,"th"),l(4,"Code"),a(),o(5,"th"),l(6,"Name"),a(),o(7,"th"),l(8,"Category"),a(),o(9,"th"),l(10,"Duration"),a(),o(11,"th"),l(12,"Status"),a(),o(13,"th"),l(14,"Actions"),a()()(),o(15,"tbody"),b(16,aTe,17,6,"tr",18),a()()),n&2){let e=p(2);c(16),m("ngForOf",e.programs)}}function lTe(n,t){if(n&1){let e=F();o(0,"div",11)(1,"div",12)(2,"h3"),l(3,"Training Programs"),a(),o(4,"button",13),x("click",function(){g(e);let r=p();return f(r.openForm())}),l(5,"+ New Program"),a()(),b(6,oTe,3,0,"div",14)(7,sTe,17,1,"table",15),a()}if(n&2){let e=p();c(6),m("ngIf",!e.loading&&e.programs.length===0),c(),m("ngIf",!e.loading&&e.programs.length>0)}}function cTe(n,t){n&1&&(o(0,"div",16)(1,"p"),l(2,'No training sessions yet. Click "New Session" to create one.'),a()())}function dTe(n,t){if(n&1){let e=F();o(0,"button",25),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.startSession(r.id))}),l(1,"Start"),a()}}function pTe(n,t){if(n&1){let e=F();o(0,"button",26),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.completeSession(r.id))}),l(1,"Complete"),a()}}function mTe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"span",19),l(15),a()(),o(16,"td",22)(17,"button",20),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openEnrollmentModal(r))}),l(18,"Enrollments"),a(),o(19,"button",20),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openSessionForm(r))}),l(20,"Edit"),a(),b(21,dTe,2,0,"button",23)(22,pTe,2,0,"button",24),o(23,"button",21),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteSession(r.id))}),l(24,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(2),_(e.program==null?null:e.program.name),c(2),_(i.formatDate(e.sessionDate)),c(2),Ge("",e.startTime," - ",e.endTime),c(2),_(e.location),c(2),_(e.trainerName),c(2),Ge("",e.enrolledCount||0,"/",e.maxParticipants),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(6),m("ngIf",e.status==="SCHEDULED"),c(),m("ngIf",e.status==="IN_PROGRESS")}}function uTe(n,t){if(n&1&&(o(0,"table",17)(1,"thead")(2,"tr")(3,"th"),l(4,"Program"),a(),o(5,"th"),l(6,"Date"),a(),o(7,"th"),l(8,"Time"),a(),o(9,"th"),l(10,"Location"),a(),o(11,"th"),l(12,"Trainer"),a(),o(13,"th"),l(14,"Capacity"),a(),o(15,"th"),l(16,"Status"),a(),o(17,"th"),l(18,"Actions"),a()()(),o(19,"tbody"),b(20,mTe,25,12,"tr",18),a()()),n&2){let e=p(2);c(20),m("ngForOf",e.sessions)}}function gTe(n,t){if(n&1){let e=F();o(0,"div",11)(1,"div",12)(2,"h3"),l(3,"Training Sessions"),a(),o(4,"button",13),x("click",function(){g(e);let r=p();return f(r.openSessionForm())}),l(5,"+ New Session"),a()(),b(6,cTe,3,0,"div",14)(7,uTe,21,1,"table",15),a()}if(n&2){let e=p();c(6),m("ngIf",!e.loading&&e.sessions.length===0),c(),m("ngIf",!e.loading&&e.sessions.length>0)}}function fTe(n,t){if(n&1&&(o(0,"div",34),l(1),a()),n&2){let e=p().$implicit;c(),_(e.day)}}function hTe(n,t){if(n&1&&(o(0,"div",35),l(1),a()),n&2){let e=t.$implicit,i=p(3);m("ngClass",i.getStatusClass(e.status)),c(),D(" ",(e.program==null?null:e.program.name)||"Session"," ")}}function _Te(n,t){if(n&1&&(o(0,"div",31),b(1,fTe,2,1,"div",32)(2,hTe,2,2,"div",33),a()),n&2){let e=t.$implicit;ie("empty",!e.day),c(),m("ngIf",e.day),c(),m("ngForOf",e.sessions)}}function vTe(n,t){if(n&1){let e=F();o(0,"div",11)(1,"div",27)(2,"button",20),x("click",function(){g(e);let r=p();return f(r.previousMonth())}),l(3,"< Prev"),a(),o(4,"h3"),l(5),a(),o(6,"button",20),x("click",function(){g(e);let r=p();return f(r.nextMonth())}),l(7,"Next >"),a()(),o(8,"div",28)(9,"div",29),l(10,"Sun"),a(),o(11,"div",29),l(12,"Mon"),a(),o(13,"div",29),l(14,"Tue"),a(),o(15,"div",29),l(16,"Wed"),a(),o(17,"div",29),l(18,"Thu"),a(),o(19,"div",29),l(20,"Fri"),a(),o(21,"div",29),l(22,"Sat"),a(),b(23,_Te,3,4,"div",30),a()()}if(n&2){let e=p();c(5),_(e.getMonthYear()),c(18),m("ngForOf",e.calendarDays)}}function xTe(n,t){if(n&1){let e=F();o(0,"div",36)(1,"div",37),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3),a(),o(4,"form",38),x("ngSubmit",function(){g(e);let r=p();return f(r.saveProgram())}),o(5,"div",39)(6,"label"),l(7,"Program Code *"),a(),o(8,"input",40),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.programCode,r)||(s.formData.programCode=r),f(r)}),a()(),o(9,"div",39)(10,"label"),l(11,"Name *"),a(),o(12,"input",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()(),o(13,"div",39)(14,"label"),l(15,"Category"),a(),o(16,"select",42),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.category,r)||(s.formData.category=r),f(r)}),o(17,"option",43),l(18,"Technical"),a(),o(19,"option",44),l(20,"Soft Skills"),a(),o(21,"option",45),l(22,"Compliance"),a(),o(23,"option",46),l(24,"Leadership"),a()()(),o(25,"div",39)(26,"label"),l(27,"Duration (hours)"),a(),o(28,"input",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.durationHours,r)||(s.formData.durationHours=r),f(r)}),a()(),o(29,"div",39)(30,"label"),l(31,"Description"),a(),o(32,"textarea",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.description,r)||(s.formData.description=r),f(r)}),a()(),o(33,"div",49)(34,"label")(35,"input",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),a(),l(36," Active"),a()(),o(37,"div",51)(38,"button",52),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(39,"Cancel"),a(),o(40,"button",53),l(41,"Save"),a()()()()()}if(n&2){let e=p();c(3),D("",e.editingItem?"Edit":"New"," Program"),c(5),M("ngModel",e.formData.programCode),c(4),M("ngModel",e.formData.name),c(4),M("ngModel",e.formData.category),c(12),M("ngModel",e.formData.durationHours),c(4),M("ngModel",e.formData.description),c(3),M("ngModel",e.formData.isActive)}}function yTe(n,t){if(n&1&&(o(0,"option",65),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function CTe(n,t){if(n&1){let e=F();o(0,"div",36)(1,"div",37),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3),a(),o(4,"form",38),x("ngSubmit",function(){g(e);let r=p();return f(r.saveSession())}),o(5,"div",39)(6,"label"),l(7,"Training Program *"),a(),o(8,"select",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.programId,r)||(s.sessionFormData.programId=r),f(r)}),o(9,"option",55),l(10,"Select Program"),a(),b(11,yTe,2,2,"option",56),a()(),o(12,"div",39)(13,"label"),l(14,"Session Date *"),a(),o(15,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.sessionDate,r)||(s.sessionFormData.sessionDate=r),f(r)}),a()(),o(16,"div",58)(17,"div",39)(18,"label"),l(19,"Start Time"),a(),o(20,"input",59),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.startTime,r)||(s.sessionFormData.startTime=r),f(r)}),a()(),o(21,"div",39)(22,"label"),l(23,"End Time"),a(),o(24,"input",60),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.endTime,r)||(s.sessionFormData.endTime=r),f(r)}),a()()(),o(25,"div",39)(26,"label"),l(27,"Location"),a(),o(28,"input",61),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.location,r)||(s.sessionFormData.location=r),f(r)}),a()(),o(29,"div",39)(30,"label"),l(31,"Trainer Name"),a(),o(32,"input",62),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.trainerName,r)||(s.sessionFormData.trainerName=r),f(r)}),a()(),o(33,"div",39)(34,"label"),l(35,"Max Participants"),a(),o(36,"input",63),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.maxParticipants,r)||(s.sessionFormData.maxParticipants=r),f(r)}),a()(),o(37,"div",39)(38,"label"),l(39,"Notes"),a(),o(40,"textarea",64),S("ngModelChange",function(r){g(e);let s=p();return P(s.sessionFormData.notes,r)||(s.sessionFormData.notes=r),f(r)}),a()(),o(41,"div",51)(42,"button",52),x("click",function(){g(e);let r=p();return f(r.closeSessionForm())}),l(43,"Cancel"),a(),o(44,"button",53),l(45),a()()()()()}if(n&2){let e=p();c(3),D("",e.editingSession?"Edit":"New"," Training Session"),c(5),M("ngModel",e.sessionFormData.programId),c(3),m("ngForOf",e.programs),c(4),M("ngModel",e.sessionFormData.sessionDate),c(5),M("ngModel",e.sessionFormData.startTime),c(4),M("ngModel",e.sessionFormData.endTime),c(4),M("ngModel",e.sessionFormData.location),c(4),M("ngModel",e.sessionFormData.trainerName),c(4),M("ngModel",e.sessionFormData.maxParticipants),c(4),M("ngModel",e.sessionFormData.notes),c(5),D("",e.editingSession?"Update":"Create"," Session")}}function bTe(n,t){if(n&1&&(o(0,"option",65),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function MTe(n,t){n&1&&(o(0,"div",16)(1,"p"),l(2,"No enrollments yet. Select an employee to enroll them in this session."),a()())}function STe(n,t){n&1&&(o(0,"span",78),l(1,"Attended"),a())}function PTe(n,t){n&1&&(o(0,"span",79),l(1,"Absent"),a())}function wTe(n,t){if(n&1){let e=F();o(0,"span",80)(1,"button",26),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.markAttendance(r,!0))}),l(2,"Present"),a(),o(3,"button",21),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.markAttendance(r,!1))}),l(4,"Absent"),a()()}}function ETe(n,t){n&1&&(o(0,"span",81),l(1,"Pending"),a())}function OTe(n,t){if(n&1&&(o(0,"span"),l(1),a()),n&2){let e=p().$implicit;c(),D("",e.feedbackRating,"/5")}}function TTe(n,t){if(n&1){let e=F();o(0,"button",20),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.openFeedbackModal(r))}),l(1,"Add Feedback"),a()}}function kTe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function ITe(n,t){n&1&&(o(0,"span",78),l(1,"Issued"),a())}function DTe(n,t){if(n&1){let e=F();o(0,"button",25),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.generateCertificate(r))}),l(1,"Generate"),a()}}function ATe(n,t){n&1&&(o(0,"span"),l(1,"-"),a())}function RTe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),b(6,STe,2,0,"span",72)(7,PTe,2,0,"span",73)(8,wTe,5,0,"span",74)(9,ETe,2,0,"span",75),a(),o(10,"td"),b(11,OTe,2,1,"span",76)(12,TTe,2,0,"button",77)(13,kTe,2,0,"span",76),a(),o(14,"td"),b(15,ITe,2,0,"span",72)(16,DTe,2,0,"button",23)(17,ATe,2,0,"span",76),a(),o(18,"td")(19,"button",21),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.cancelEnrollment(r))}),l(20,"Cancel"),a()()()}if(n&2){let e=t.$implicit,i=p(3);c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(i.formatDate(e.enrolledAt)),c(2),m("ngIf",e.attended===!0),c(),m("ngIf",e.attended===!1),c(),m("ngIf",e.attended===null&&(i.selectedSession==null?null:i.selectedSession.status)!=="SCHEDULED"),c(),m("ngIf",e.attended===null&&(i.selectedSession==null?null:i.selectedSession.status)==="SCHEDULED"),c(2),m("ngIf",e.feedbackRating),c(),m("ngIf",!e.feedbackRating&&e.attended),c(),m("ngIf",!e.feedbackRating&&!e.attended),c(2),m("ngIf",e.certificateIssued),c(),m("ngIf",!e.certificateIssued&&e.attended),c(),m("ngIf",!e.certificateIssued&&!e.attended)}}function FTe(n,t){if(n&1&&(o(0,"table",17)(1,"thead")(2,"tr")(3,"th"),l(4,"Employee"),a(),o(5,"th"),l(6,"Enrolled Date"),a(),o(7,"th"),l(8,"Attendance"),a(),o(9,"th"),l(10,"Feedback"),a(),o(11,"th"),l(12,"Certificate"),a(),o(13,"th"),l(14,"Actions"),a()()(),o(15,"tbody"),b(16,RTe,21,13,"tr",18),a()()),n&2){let e=p(2);c(16),m("ngForOf",e.enrollments)}}function NTe(n,t){if(n&1){let e=F();o(0,"div",36)(1,"div",66),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",67)(3,"h3"),l(4),a()(),o(5,"div",68)(6,"select",69),S("ngModelChange",function(r){g(e);let s=p();return P(s.enrollmentData.employeeId,r)||(s.enrollmentData.employeeId=r),f(r)}),o(7,"option",55),l(8,"Select Employee to Enroll"),a(),b(9,bTe,2,4,"option",56),a(),o(10,"button",70),x("click",function(){g(e);let r=p();return f(r.enrollEmployee())}),l(11,"Enroll"),a()(),b(12,MTe,3,0,"div",14)(13,FTe,17,1,"table",15),o(14,"div",51)(15,"button",71),x("click",function(){g(e);let r=p();return f(r.closeEnrollmentModal())}),l(16,"Close"),a()()()()}if(n&2){let e=p();c(4),D("Enrollments - ",e.selectedSession==null||e.selectedSession.program==null?null:e.selectedSession.program.name),c(2),M("ngModel",e.enrollmentData.employeeId),c(3),m("ngForOf",e.employees),c(),m("disabled",!e.enrollmentData.employeeId),c(2),m("ngIf",e.enrollments.length===0),c(),m("ngIf",e.enrollments.length>0)}}function LTe(n,t){if(n&1){let e=F();o(0,"div",36)(1,"div",37),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Submit Training Feedback"),a(),o(4,"form",38),x("ngSubmit",function(){g(e);let r=p();return f(r.submitFeedback())}),o(5,"div",39)(6,"label"),l(7,"Rating (1-5) *"),a(),o(8,"select",82),S("ngModelChange",function(r){g(e);let s=p();return P(s.feedbackData.rating,r)||(s.feedbackData.rating=r),f(r)}),o(9,"option",65),l(10,"1 - Poor"),a(),o(11,"option",65),l(12,"2 - Fair"),a(),o(13,"option",65),l(14,"3 - Good"),a(),o(15,"option",65),l(16,"4 - Very Good"),a(),o(17,"option",65),l(18,"5 - Excellent"),a()()(),o(19,"div",39)(20,"label"),l(21,"Comments"),a(),o(22,"textarea",83),S("ngModelChange",function(r){g(e);let s=p();return P(s.feedbackData.comments,r)||(s.feedbackData.comments=r),f(r)}),a()(),o(23,"div",51)(24,"button",52),x("click",function(){g(e);let r=p();return f(r.closeFeedbackModal())}),l(25,"Cancel"),a(),o(26,"button",53),l(27,"Submit Feedback"),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.feedbackData.rating),c(),m("value",1),c(2),m("value",2),c(2),m("value",3),c(2),m("value",4),c(2),m("value",5),c(5),M("ngModel",e.feedbackData.comments)}}var Y2=class n{constructor(t,e,i,r){this.trainingService=t;this.employeeService=e;this.toastService=i;this.cdr=r}activeTab="programs";programs=[];sessions=[];employees=[];enrollments=[];dashboard={};loading=!1;saving=!1;showForm=!1;showSessionForm=!1;showEnrollmentModal=!1;showFeedbackModal=!1;editingItem=null;editingSession=null;selectedSession=null;selectedEnrollment=null;formData={};sessionFormData={};enrollmentData={};feedbackData={rating:5,comments:""};calendarDays=[];currentMonth=new Date;ngOnInit(){this.loadDashboard(),this.loadPrograms(),this.loadEmployees()}loadDashboard(){this.trainingService.getDashboard().subscribe({next:t=>{this.dashboard=t,this.cdr.markForCheck()},error:t=>console.error("Error loading dashboard:",t)})}loadEmployees(){this.employeeService.getActive().subscribe({next:t=>{this.employees=t,this.cdr.markForCheck()},error:t=>console.error("Error loading employees:",t)})}setTab(t){this.activeTab=t,this.showForm=!1,this.showSessionForm=!1,t==="programs"?this.loadPrograms():t==="sessions"?this.loadSessions():t==="calendar"&&(this.loadSessions(),this.generateCalendar())}loadPrograms(){this.loading=!0,this.cdr.markForCheck(),this.trainingService.getPrograms().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.programs=t,this.cdr.markForCheck()},error:t=>console.error(t)})}loadSessions(){this.loading=!0,this.cdr.markForCheck(),this.trainingService.getSessions().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.sessions=t,this.generateCalendar(),this.cdr.markForCheck()},error:t=>console.error(t)})}openForm(t){this.editingItem=t||null,this.formData=t?me({},t):{isActive:!0},this.showForm=!0}closeForm(){this.showForm=!1,this.editingItem=null,this.formData={}}saveProgram(){if(this.saving)return;if(!this.formData.name){this.toastService.error("Please enter a program name");return}this.saving=!0,this.cdr.markForCheck(),(this.editingItem?this.trainingService.updateProgram(this.editingItem.id,this.formData):this.trainingService.createProgram(this.formData)).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success(this.editingItem?"Program updated successfully":"Program created successfully"),this.closeForm(),this.loadPrograms(),this.loadDashboard()},error:e=>{console.error(e);let i=e.error?.message||e.error?.error||"Error saving program";this.toastService.error(i)}})}deleteProgram(t){confirm("Delete this program?")&&this.trainingService.deleteProgram(t).subscribe({next:()=>{this.loadPrograms(),this.loadDashboard()},error:e=>console.error(e)})}openSessionForm(t){this.editingSession=t||null,this.sessionFormData=t?Tt(me({},t),{programId:t.program?.id}):{sessionDate:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"17:00",maxParticipants:20},this.showSessionForm=!0}closeSessionForm(){this.showSessionForm=!1,this.editingSession=null,this.sessionFormData={}}saveSession(){if(this.saving)return;if(!this.sessionFormData.programId||!this.sessionFormData.sessionDate){this.toastService.error("Please select a program and session date");return}this.saving=!0,this.cdr.markForCheck();let t=Tt(me({},this.sessionFormData),{program:this.sessionFormData.programId?{id:this.sessionFormData.programId}:null});(this.editingSession?this.trainingService.updateSession(this.editingSession.id,t):this.trainingService.createSession(t)).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success(this.editingSession?"Session updated successfully":"Session created successfully"),this.closeSessionForm(),this.loadSessions(),this.loadDashboard()},error:i=>{console.error(i);let r=i.error?.message||i.error?.error||"Error saving session";this.toastService.error(r)}})}deleteSession(t){confirm("Delete this session?")&&this.trainingService.deleteSession(t).subscribe({next:()=>{this.loadSessions(),this.loadDashboard()},error:e=>console.error(e)})}startSession(t){this.trainingService.startSession(t).subscribe({next:()=>this.loadSessions(),error:e=>console.error(e)})}completeSession(t){this.trainingService.completeSession(t).subscribe({next:()=>this.loadSessions(),error:e=>console.error(e)})}openEnrollmentModal(t){this.selectedSession=t,this.enrollmentData={},this.loadEnrollments(t.id),this.showEnrollmentModal=!0}closeEnrollmentModal(){this.showEnrollmentModal=!1,this.selectedSession=null,this.enrollments=[]}loadEnrollments(t){this.trainingService.getEnrollmentsBySession(t).subscribe({next:e=>this.enrollments=e,error:e=>console.error(e)})}enrollEmployee(){if(!this.enrollmentData.employeeId)return;let t={sessionId:this.selectedSession.id,employeeId:this.enrollmentData.employeeId};this.trainingService.enrollEmployee(t).subscribe({next:()=>{this.toastService.success("Employee enrolled successfully"),this.loadEnrollments(this.selectedSession.id),this.enrollmentData={},this.loadSessions()},error:e=>{console.error(e),this.toastService.error("Error enrolling employee")}})}markAttendance(t,e){this.trainingService.markAttendance(t.id,e).subscribe({next:()=>this.loadEnrollments(this.selectedSession.id),error:i=>console.error(i)})}openFeedbackModal(t){this.selectedEnrollment=t,this.feedbackData={rating:5,comments:""},this.showFeedbackModal=!0}closeFeedbackModal(){this.showFeedbackModal=!1,this.selectedEnrollment=null}submitFeedback(){this.trainingService.submitFeedback(this.selectedEnrollment.id,this.feedbackData).subscribe({next:()=>{this.toastService.success("Feedback submitted successfully"),this.closeFeedbackModal(),this.loadEnrollments(this.selectedSession.id)},error:t=>{console.error(t),this.toastService.error("Error submitting feedback")}})}generateCertificate(t){this.trainingService.generateCertificate(t.id).subscribe({next:e=>{this.loadEnrollments(this.selectedSession.id),this.toastService.success("Certificate generated successfully!")},error:e=>{console.error(e),this.toastService.error("Error generating certificate")}})}cancelEnrollment(t){confirm("Cancel this enrollment?")&&this.trainingService.cancelEnrollment(t.id).subscribe({next:()=>{this.loadEnrollments(this.selectedSession.id),this.loadSessions()},error:e=>console.error(e)})}generateCalendar(){let t=this.currentMonth.getFullYear(),e=this.currentMonth.getMonth(),i=new Date(t,e,1),r=new Date(t,e+1,0),s=i.getDay();this.calendarDays=[];for(let d=0;d<s;d++)this.calendarDays.push({day:null,sessions:[]});for(let d=1;d<=r.getDate();d++){let u=`${t}-${String(e+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`,h=this.sessions.filter(v=>v.sessionDate===u);this.calendarDays.push({day:d,date:u,sessions:h})}}previousMonth(){this.currentMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()-1,1),this.generateCalendar()}nextMonth(){this.currentMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,1),this.generateCalendar()}formatDate(t){return t?new Date(t).toLocaleDateString():""}getMonthYear(){return this.currentMonth.toLocaleDateString("en-US",{month:"long",year:"numeric"})}getStatusClass(t){return{ACTIVE:"bg-success",SCHEDULED:"bg-primary",COMPLETED:"bg-dark",CANCELLED:"bg-danger",IN_PROGRESS:"bg-warning",ENROLLED:"bg-primary",ATTENDED:"bg-success",ABSENT:"bg-danger"}[t]||"bg-secondary"}static \u0275fac=function(e){return new(e||n)(V($2),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-training"]],decls:40,vars:17,consts:[[1,"training-container"],[1,"page-header"],[1,"dashboard-cards"],[1,"card","stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"tabs"],[3,"click"],[1,"tab-content"],["class","content-section",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"content-section"],[1,"section-header"],[1,"btn","btn-primary",3,"click"],["class","empty-state",4,"ngIf"],["class","data-table",4,"ngIf"],[1,"empty-state"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"actions-cell"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"calendar-header"],[1,"calendar-grid"],[1,"calendar-day-header"],["class","calendar-cell",3,"empty",4,"ngFor","ngForOf"],[1,"calendar-cell"],["class","day-number",4,"ngIf"],["class","calendar-session",3,"ngClass",4,"ngFor","ngForOf"],[1,"day-number"],[1,"calendar-session",3,"ngClass"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","programCode","required","",3,"ngModelChange","ngModel"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["name","category",3,"ngModelChange","ngModel"],["value","TECHNICAL"],["value","SOFT_SKILLS"],["value","COMPLIANCE"],["value","LEADERSHIP"],["type","number","name","durationHours","min","1",3,"ngModelChange","ngModel"],["name","description","rows","4",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["name","programId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","name","sessionDate","required","",3,"ngModelChange","ngModel"],[1,"form-row"],["type","time","name","startTime",3,"ngModelChange","ngModel"],["type","time","name","endTime",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","e.g., Conference Room A",3,"ngModelChange","ngModel"],["type","text","name","trainerName",3,"ngModelChange","ngModel"],["type","number","name","maxParticipants","min","1",3,"ngModelChange","ngModel"],["name","notes","rows","3",3,"ngModelChange","ngModel"],[3,"value"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"enroll-form"],[1,"enroll-select",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-secondary",3,"click"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],["class","attendance-actions",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[4,"ngIf"],["class","btn btn-sm",3,"click",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"attendance-actions"],[1,"badge","bg-secondary"],["name","rating","required","",3,"ngModelChange","ngModel"],["name","comments","rows","4","placeholder","Share your feedback about the training...",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Training Management"),a()(),o(4,"div",2)(5,"div",3)(6,"div",4),l(7),a(),o(8,"div",5),l(9,"Active Programs"),a()(),o(10,"div",3)(11,"div",4),l(12),a(),o(13,"div",5),l(14,"Upcoming Sessions"),a()(),o(15,"div",3)(16,"div",4),l(17),a(),o(18,"div",5),l(19,"Total Enrollments"),a()(),o(20,"div",3)(21,"div",4),l(22),a(),o(23,"div",5),l(24,"Completed"),a()()(),o(25,"div",6)(26,"button",7),x("click",function(){return i.setTab("programs")}),l(27,"Programs"),a(),o(28,"button",7),x("click",function(){return i.setTab("sessions")}),l(29,"Sessions"),a(),o(30,"button",7),x("click",function(){return i.setTab("calendar")}),l(31,"Calendar"),a()(),o(32,"div",8),b(33,lTe,8,2,"div",9)(34,gTe,8,2,"div",9)(35,vTe,24,2,"div",9),a(),b(36,xTe,42,7,"div",10)(37,CTe,46,11,"div",10)(38,NTe,17,6,"div",10)(39,LTe,28,7,"div",10),a()),e&2&&(c(7),_(i.dashboard.activePrograms||0),c(5),_(i.dashboard.upcomingSessions||0),c(5),_(i.dashboard.totalEnrollments||0),c(5),_(i.dashboard.completedTrainings||0),c(4),ie("active",i.activeTab==="programs"),c(2),ie("active",i.activeTab==="sessions"),c(2),ie("active",i.activeTab==="calendar"),c(3),m("ngIf",i.activeTab==="programs"),c(),m("ngIf",i.activeTab==="sessions"),c(),m("ngIf",i.activeTab==="calendar"),c(),m("ngIf",i.showForm),c(),m("ngIf",i.showSessionForm),c(),m("ngIf",i.showEnrollmentModal),c(),m("ngIf",i.showFeedbackModal))},dependencies:[At,ot,Se,be,Vt,pi,je,We,Ie,Mt,Yt,Ue,Oe,di,cn,Xt,Ee,li,Rt],styles:[".training-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.dashboard-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 4px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:teal}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;margin-top:8px}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:none;cursor:pointer;font-size:14px;color:#666;border-bottom:2px solid transparent;margin-bottom:-2px}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:teal}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{white-space:nowrap}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.badge.bg-warning[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-success[_ngcontent-%COMP%]{background:#10b981}.badge.bg-primary[_ngcontent-%COMP%]{background:teal}.badge.bg-danger[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-dark[_ngcontent-%COMP%]{background:#374151}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;margin-right:4px}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;background:#f9fafb;border-radius:8px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-content.modal-lg[_ngcontent-%COMP%]{width:900px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.form-group.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}.enroll-form[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px;padding:16px;background:#f9fafb;border-radius:8px}.enroll-form[_ngcontent-%COMP%]   .enroll-select[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #d1d5db;border-radius:4px;font-size:14px}.attendance-actions[_ngcontent-%COMP%]{display:inline-flex;gap:4px}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:#e5e7eb;border-radius:8px;overflow:hidden}.calendar-day-header[_ngcontent-%COMP%]{background:teal;color:#fff;padding:12px;text-align:center;font-weight:500;font-size:14px}.calendar-cell[_ngcontent-%COMP%]{background:#fff;min-height:100px;padding:8px}.calendar-cell.empty[_ngcontent-%COMP%]{background:#f9fafb}.calendar-cell[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-weight:500;color:#374151;margin-bottom:4px}.calendar-session[_ngcontent-%COMP%]{padding:4px 6px;border-radius:4px;font-size:11px;color:#fff;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"],changeDetection:0})};function VTe(n,t){if(n&1){let e=F();o(0,"button",23),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.submitLoan(r.id))}),l(1,"Submit"),a()}}function BTe(n,t){if(n&1){let e=F();o(0,"button",24),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.openApprovalModal(r))}),l(1,"Approve"),a()}}function UTe(n,t){if(n&1){let e=F();o(0,"button",25),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.rejectLoan(r.id))}),l(1,"Reject"),a()}}function jTe(n,t){if(n&1){let e=F();o(0,"button",26),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.disburseLoan(r.id))}),l(1,"Disburse"),a()}}function WTe(n,t){if(n&1){let e=F();o(0,"button",27),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.viewRepayments(r))}),l(1,"Schedule"),a()}}function zTe(n,t){if(n&1){let e=F();o(0,"button",28),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.viewLedger(r))}),l(1,"Ledger"),a()}}function qTe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td"),l(16),a(),o(17,"td")(18,"span",15),l(19),a()(),o(20,"td",16),b(21,VTe,2,0,"button",17)(22,BTe,2,0,"button",18)(23,UTe,2,0,"button",19)(24,jTe,2,0,"button",20)(25,WTe,2,0,"button",21)(26,zTe,2,0,"button",22),a()()),n&2){let e=t.$implicit,i=p();c(2),_(e.applicationNumber),c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(e.loanType),c(2),_(i.formatCurrency(e.requestedAmount)),c(2),_(e.approvedAmount?i.formatCurrency(e.approvedAmount):"-"),c(2),D("",e.approvedTenureMonths||e.requestedTenureMonths," months"),c(2),_(e.emiAmount?i.formatCurrency(e.emiAmount):"-"),c(2),_(e.outstandingBalance?i.formatCurrency(e.outstandingBalance):"-"),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngIf",e.status==="DRAFT"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="PENDING_APPROVAL"),c(),m("ngIf",e.status==="APPROVED"),c(),m("ngIf",e.status==="ACTIVE"||e.status==="CLOSED"),c(),m("ngIf",e.status==="ACTIVE"||e.status==="CLOSED")}}function HTe(n,t){n&1&&(o(0,"tr")(1,"td",29),l(2,"No loan applications found"),a()())}function GTe(n,t){if(n&1&&(o(0,"option",39),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En(" ",e.employeeId," - ",e.firstName," ",e.lastName," ")}}function $Te(n,t){if(n&1&&(o(0,"option",56),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function YTe(n,t){if(n&1&&(o(0,"div",57),l(1),a()),n&2){let e=p(2);m("ngClass",e.getEligibilityClass()),c(),D(" ",e.eligibilityMessage," ")}}function JTe(n,t){if(n&1&&(o(0,"option",56),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function KTe(n,t){if(n&1&&(o(0,"div",61)(1,"div",62)(2,"span",63),l(3,"Monthly EMI:"),a(),o(4,"span",64),l(5),a()(),o(6,"div",62)(7,"span",63),l(8,"Total Interest:"),a(),o(9,"span",64),l(10),a()(),o(11,"div",62)(12,"span",63),l(13,"Total Payable:"),a(),o(14,"span",64),l(15),a()()()),n&2){let e=p(3);c(5),_(e.formatCurrency(e.formData.calculatedEmi)),c(5),_(e.formatCurrency(e.formData.totalInterest)),c(5),_(e.formatCurrency(e.formData.totalPayable))}}function QTe(n,t){if(n&1){let e=F();o(0,"div",58)(1,"button",59),x("click",function(){g(e);let r=p(2);return f(r.calculateEmiPreview())}),l(2,"Calculate EMI Preview"),a(),b(3,KTe,16,3,"div",60),a()}if(n&2){let e=p(2);c(3),m("ngIf",e.formData.calculatedEmi)}}function XTe(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4,"New Loan Application"),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(6,"\xD7"),a()(),o(7,"form",34),x("ngSubmit",function(){g(e);let r=p();return f(r.saveLoan())}),o(8,"div",35)(9,"div",36)(10,"label"),l(11,"Employee "),o(12,"span",37),l(13,"*"),a()(),o(14,"select",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.employeeId,r)||(s.formData.employeeId=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.checkEligibility())}),o(15,"option",39),l(16,"Select Employee"),a(),b(17,GTe,2,4,"option",40),a()(),o(18,"div",36)(19,"label"),l(20,"Loan Type "),o(21,"span",37),l(22,"*"),a()(),o(23,"select",41),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.loanType,r)||(s.formData.loanType=r),f(r)}),x("change",function(){g(e);let r=p();return f(r.checkEligibility())}),b(24,$Te,2,2,"option",42),a()()(),b(25,YTe,2,2,"div",43),o(26,"div",35)(27,"div",36)(28,"label"),l(29,"Requested Amount "),o(30,"span",37),l(31,"*"),a()(),o(32,"input",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.requestedAmount,r)||(s.formData.requestedAmount=r),f(r)}),a()(),o(33,"div",36)(34,"label"),l(35,"Tenure (months) "),o(36,"span",37),l(37,"*"),a()(),o(38,"input",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.requestedTenureMonths,r)||(s.formData.requestedTenureMonths=r),f(r)}),a()()(),o(39,"div",35)(40,"div",36)(41,"label"),l(42,"Interest Rate (% per annum)"),a(),o(43,"input",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.interestRate,r)||(s.formData.interestRate=r),f(r)}),a()(),o(44,"div",36)(45,"label"),l(46,"Interest Type"),a(),o(47,"select",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.interestType,r)||(s.formData.interestType=r),f(r)}),b(48,JTe,2,2,"option",42),a()()(),o(49,"div",35)(50,"div",36)(51,"label"),l(52,"Preferred Disbursement Date"),a(),o(53,"input",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.requestedDisbursementDate,r)||(s.formData.requestedDisbursementDate=r),f(r)}),a()(),o(54,"div",36)(55,"label"),l(56,"Deduct from Payroll"),a(),o(57,"select",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.deductFromPayroll,r)||(s.formData.deductFromPayroll=r),f(r)}),o(58,"option",39),l(59,"Yes"),a(),o(60,"option",39),l(61,"No"),a()()()(),o(62,"div",36)(63,"label"),l(64,"Purpose / Reason"),a(),o(65,"textarea",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.purpose,r)||(s.formData.purpose=r),f(r)}),a()(),o(66,"div",36)(67,"label"),l(68,"Additional Notes"),a(),o(69,"textarea",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.notes,r)||(s.formData.notes=r),f(r)}),a()(),b(70,QTe,4,1,"div",52),o(71,"div",53)(72,"button",54),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(73,"Cancel"),a(),o(74,"button",55),l(75,"Apply for Loan"),a()()()()()}if(n&2){let e=p();c(14),M("ngModel",e.formData.employeeId),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(6),M("ngModel",e.formData.loanType),c(),m("ngForOf",e.loanTypes),c(),m("ngIf",e.eligibilityMessage),c(7),M("ngModel",e.formData.requestedAmount),c(6),M("ngModel",e.formData.requestedTenureMonths),c(5),M("ngModel",e.formData.interestRate),c(4),M("ngModel",e.formData.interestType),c(),m("ngForOf",e.interestTypes),c(5),M("ngModel",e.formData.requestedDisbursementDate),c(4),M("ngModel",e.formData.deductFromPayroll),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.formData.purpose),c(4),M("ngModel",e.formData.notes),c(),m("ngIf",e.formData.requestedAmount>0&&e.formData.requestedTenureMonths>0)}}function ZTe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e.installment),c(2),_(i.formatCurrency(e.emi)),c(2),_(i.formatCurrency(e.principal)),c(2),_(i.formatCurrency(e.interest)),c(2),_(i.formatCurrency(e.outstanding))}}function eke(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4,"EMI Schedule Preview"),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.closeEmiPreview())}),l(6,"\xD7"),a()(),o(7,"div",65)(8,"div",66)(9,"span",63),l(10,"Principal:"),a(),o(11,"span",64),l(12),a()(),o(13,"div",66)(14,"span",63),l(15,"Interest Rate:"),a(),o(16,"span",64),l(17),a()(),o(18,"div",66)(19,"span",63),l(20,"Tenure:"),a(),o(21,"span",64),l(22),a()(),o(23,"div",67)(24,"span",63),l(25,"Monthly EMI:"),a(),o(26,"span",64),l(27),a()()(),o(28,"div",68)(29,"table",11)(30,"thead")(31,"tr")(32,"th"),l(33,"#"),a(),o(34,"th"),l(35,"EMI Amount"),a(),o(36,"th"),l(37,"Principal"),a(),o(38,"th"),l(39,"Interest"),a(),o(40,"th"),l(41,"Outstanding Balance"),a()()(),o(42,"tbody"),b(43,ZTe,11,5,"tr",12),a()()(),o(44,"div",53)(45,"button",69),x("click",function(){g(e);let r=p();return f(r.closeEmiPreview())}),l(46,"Close"),a()()()()}if(n&2){let e=p();c(12),_(e.formatCurrency(e.formData.requestedAmount)),c(5),Ge("",e.formData.interestRate,"% p.a. (",e.formData.interestType,")"),c(5),D("",e.formData.requestedTenureMonths," months"),c(5),_(e.formatCurrency(e.formData.calculatedEmi)),c(16),m("ngForOf",e.emiSchedule)}}function tke(n,t){if(n&1&&(o(0,"div",76)(1,"p")(2,"strong"),l(3,"Employee:"),a(),l(4),a(),o(5,"p")(6,"strong"),l(7,"Loan Type:"),a(),l(8),a(),o(9,"p")(10,"strong"),l(11,"Requested Amount:"),a(),l(12),a(),o(13,"p")(14,"strong"),l(15,"Requested Tenure:"),a(),l(16),a()()),n&2){let e=p(2);c(4),Ge(" ",e.selectedLoan.employee==null?null:e.selectedLoan.employee.firstName," ",e.selectedLoan.employee==null?null:e.selectedLoan.employee.lastName),c(4),D(" ",e.selectedLoan.loanType),c(4),D(" ",e.formatCurrency(e.selectedLoan.requestedAmount)),c(4),D(" ",e.selectedLoan.requestedTenureMonths," months")}}function nke(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",70),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4,"Approve Loan Application"),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.showApprovalModal=!1)}),l(6,"\xD7"),a()(),b(7,tke,17,5,"div",71),o(8,"div",36)(9,"label"),l(10,"Approved Amount"),a(),o(11,"input",72),S("ngModelChange",function(r){g(e);let s=p();return P(s.approvalData.approvedAmount,r)||(s.approvalData.approvedAmount=r),f(r)}),a()(),o(12,"div",36)(13,"label"),l(14,"Approved Tenure (months)"),a(),o(15,"input",73),S("ngModelChange",function(r){g(e);let s=p();return P(s.approvalData.approvedTenure,r)||(s.approvalData.approvedTenure=r),f(r)}),a()(),o(16,"div",36)(17,"label"),l(18,"Remarks"),a(),o(19,"textarea",74),S("ngModelChange",function(r){g(e);let s=p();return P(s.approvalData.remarks,r)||(s.approvalData.remarks=r),f(r)}),a()(),o(20,"div",53)(21,"button",69),x("click",function(){g(e);let r=p();return f(r.closeApprovalModal())}),l(22,"Cancel"),a(),o(23,"button",75),x("click",function(){g(e);let r=p();return f(r.approveLoan())}),l(24,"Approve"),a()()()()}if(n&2){let e=p();c(7),m("ngIf",e.selectedLoan),c(4),M("ngModel",e.approvalData.approvedAmount),c(4),M("ngModel",e.approvalData.approvedTenure),c(4),M("ngModel",e.approvalData.remarks)}}function ike(n,t){if(n&1){let e=F();o(0,"button",24),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.recordManualPayment(r))}),l(1,"Record Payment"),a()}}function rke(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",15),l(17),a()(),o(18,"td"),b(19,ike,2,0,"button",18),a()()),n&2){let e=t.$implicit,i=p(2);ie("overdue",e.status==="OVERDUE")("paid",e.status==="PAID"),c(2),_(e.installmentNumber),c(2),_(i.formatDate(e.dueDate)),c(2),_(i.formatCurrency(e.emiAmount)),c(2),_(i.formatCurrency(e.principalAmount)),c(2),_(i.formatCurrency(e.interestAmount)),c(2),_(i.formatCurrency(e.outstandingAfter)),c(2),_(e.paidAmount?i.formatCurrency(e.paidAmount):"-"),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngIf",e.status==="PENDING")}}function oke(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.closeRepayments())}),l(6,"\xD7"),a()(),o(7,"div",77)(8,"div",66)(9,"span",63),l(10,"Approved Amount:"),a(),o(11,"span",64),l(12),a()(),o(13,"div",66)(14,"span",63),l(15,"Outstanding:"),a(),o(16,"span",64),l(17),a()(),o(18,"div",66)(19,"span",63),l(20,"EMI:"),a(),o(21,"span",64),l(22),a()()(),o(23,"div",68)(24,"table",11)(25,"thead")(26,"tr")(27,"th"),l(28,"#"),a(),o(29,"th"),l(30,"Due Date"),a(),o(31,"th"),l(32,"EMI"),a(),o(33,"th"),l(34,"Principal"),a(),o(35,"th"),l(36,"Interest"),a(),o(37,"th"),l(38,"Outstanding"),a(),o(39,"th"),l(40,"Paid"),a(),o(41,"th"),l(42,"Status"),a(),o(43,"th"),l(44,"Actions"),a()()(),o(45,"tbody"),b(46,rke,20,14,"tr",78),a()()(),o(47,"div",53)(48,"button",69),x("click",function(){g(e);let r=p();return f(r.closeRepayments())}),l(49,"Close"),a()()()()}if(n&2){let e=p();c(4),D("Repayment Schedule - ",e.selectedLoan.applicationNumber),c(8),_(e.formatCurrency(e.selectedLoan.approvedAmount)),c(5),_(e.formatCurrency(e.selectedLoan.outstandingBalance)),c(5),_(e.formatCurrency(e.selectedLoan.emiAmount)),c(24),m("ngForOf",e.repayments)}}function ake(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",15),l(7),a()(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td"),l(13),a(),o(14,"td"),l(15),a()()),n&2){let e=t.$implicit,i=p(2);ie("pending",e.status==="PENDING"),c(2),_(e.installmentNumber),c(2),_(e.paidDate?i.formatDate(e.paidDate):i.formatDate(e.dueDate)+" (Due)"),c(2),m("ngClass",e.status==="PAID"?"bg-success":"bg-warning"),c(),D(" ",e.status==="PAID"?"EMI Payment":"Scheduled"," "),c(2),_(i.formatCurrency(e.principalAmount)),c(2),_(i.formatCurrency(e.interestAmount)),c(2),_(i.formatCurrency(e.emiAmount)),c(2),_(i.formatCurrency(e.outstandingAfter))}}function ske(n,t){if(n&1){let e=F();o(0,"div",30)(1,"div",31),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",32)(3,"h3"),l(4),a(),o(5,"button",33),x("click",function(){g(e);let r=p();return f(r.closeLedger())}),l(6,"\xD7"),a()(),o(7,"div",79)(8,"div",80)(9,"div",81),l(10,"Opening Balance"),a(),o(11,"div",82),l(12),a()(),o(13,"div",80)(14,"div",81),l(15,"Principal Paid"),a(),o(16,"div",83),l(17),a()(),o(18,"div",80)(19,"div",81),l(20,"Interest Paid"),a(),o(21,"div",84),l(22),a()(),o(23,"div",85)(24,"div",81),l(25,"Closing Balance"),a(),o(26,"div",82),l(27),a()()(),o(28,"h4"),l(29,"Transaction History"),a(),o(30,"div",68)(31,"table",11)(32,"thead")(33,"tr")(34,"th"),l(35,"#"),a(),o(36,"th"),l(37,"Date"),a(),o(38,"th"),l(39,"Type"),a(),o(40,"th"),l(41,"Principal"),a(),o(42,"th"),l(43,"Interest"),a(),o(44,"th"),l(45,"Total"),a(),o(46,"th"),l(47,"Balance After"),a()()(),o(48,"tbody")(49,"tr")(50,"td"),l(51,"0"),a(),o(52,"td"),l(53),a(),o(54,"td")(55,"span",86),l(56,"Disbursement"),a()(),o(57,"td"),l(58),a(),o(59,"td"),l(60,"-"),a(),o(61,"td"),l(62),a(),o(63,"td"),l(64),a()(),b(65,ake,16,10,"tr",87),a()()(),o(66,"div",53)(67,"button",69),x("click",function(){g(e);let r=p();return f(r.closeLedger())}),l(68,"Close"),a()()()()}if(n&2){let e=p();c(4),D("Loan Ledger - ",e.ledgerLoan==null?null:e.ledgerLoan.applicationNumber),c(8),_(e.formatCurrency(e.getLedgerOpeningBalance())),c(5),_(e.formatCurrency(e.getLedgerPaidPrincipal())),c(5),_(e.formatCurrency(e.getLedgerPaidInterest())),c(5),_(e.formatCurrency(e.getLedgerClosingBalance())),c(26),_(e.formatDate(e.ledgerLoan==null?null:e.ledgerLoan.actualDisbursementDate)),c(5),_(e.formatCurrency(e.ledgerLoan==null?null:e.ledgerLoan.approvedAmount)),c(4),_(e.formatCurrency(e.ledgerLoan==null?null:e.ledgerLoan.approvedAmount)),c(2),_(e.formatCurrency(e.ledgerLoan==null?null:e.ledgerLoan.approvedAmount)),c(),m("ngForOf",e.repayments)}}var J2=class n{constructor(t,e,i,r,s){this.loanService=t;this.employeeService=e;this.authService=i;this.toastService=r;this.cdr=s;this.currentUserId=this.authService.getCurrentUserId()||0}loans=[];repayments=[];employees=[];dashboard={};loading=!1;saving=!1;showForm=!1;showEmiPreview=!1;showLedger=!1;showApprovalModal=!1;selectedLoan=null;ledgerLoan=null;formData={};editMode=!1;editId=null;emiSchedule=[];currentUserId=0;activeTab="applications";approvalData={};eligibilityMessage="";eligibilityStatus="";loanTypes=[{value:"SALARY_ADVANCE",label:"Salary Advance",maxMultiplier:2,minService:3},{value:"PERSONAL",label:"Personal Loan",maxMultiplier:6,minService:6},{value:"EMERGENCY",label:"Emergency Loan",maxMultiplier:3,minService:1},{value:"HOUSING",label:"Housing Loan",maxMultiplier:36,minService:24},{value:"VEHICLE",label:"Vehicle Loan",maxMultiplier:12,minService:12},{value:"EDUCATION",label:"Education Loan",maxMultiplier:12,minService:12}];interestTypes=[{value:"FLAT",label:"Flat Rate"},{value:"REDUCING",label:"Reducing Balance"}];ngOnInit(){this.loadDashboard(),this.loadLoans(),this.loadEmployees()}loadDashboard(){this.loanService.getDashboard().subscribe({next:t=>this.dashboard=t,error:t=>console.error("Error loading dashboard:",t)})}loadLoans(){this.loading=!0,this.loanService.getLoans().subscribe({next:t=>{this.loans=t,this.loading=!1},error:t=>{console.error(t),this.loading=!1}})}loadEmployees(){this.employeeService.getActive().subscribe({next:t=>this.employees=t,error:t=>console.error("Error loading employees:",t)})}setTab(t){this.activeTab=t,t==="pending"?this.loanService.getPendingApproval().subscribe({next:e=>this.loans=e,error:e=>console.error(e)}):t==="outstanding"?this.loanService.getOutstandingLoans().subscribe({next:e=>this.loans=e,error:e=>console.error(e)}):this.loadLoans()}openForm(){this.editMode=!1,this.editId=null,this.formData={loanType:"PERSONAL",requestedTenureMonths:12,interestRate:8,interestType:"REDUCING",requestedAmount:0,employeeId:null,purpose:"",requestedDisbursementDate:new Date().toISOString().split("T")[0]},this.eligibilityMessage="",this.eligibilityStatus="",this.showForm=!0}closeForm(){this.showForm=!1,this.formData={},this.editMode=!1,this.editId=null,this.eligibilityMessage="",this.eligibilityStatus=""}checkEligibility(){if(!this.formData.employeeId||!this.formData.loanType){this.eligibilityMessage="Please select an employee and loan type first.",this.eligibilityStatus="warning";return}let t=this.employees.find(i=>i.id===this.formData.employeeId),e=this.loanTypes.find(i=>i.value===this.formData.loanType);if(!t||!e){this.eligibilityMessage="Invalid selection.",this.eligibilityStatus="error";return}this.loanService.getActiveLoansForEmployee(this.formData.employeeId).subscribe({next:i=>{let r=i&&i.length>0,s=(t.salary||5e4)*e.maxMultiplier;r&&this.formData.loanType!=="EMERGENCY"?(this.eligibilityMessage=`Employee has ${i.length} active loan(s). New loans may be restricted.`,this.eligibilityStatus="warning"):(this.eligibilityMessage=`Eligible! Maximum loan amount: ${this.formatCurrency(s)}`,this.eligibilityStatus="success")},error:()=>{this.eligibilityMessage="Unable to verify eligibility at this time.",this.eligibilityStatus="warning"}})}calculateEmiPreview(){if(!this.formData.requestedAmount||!this.formData.requestedTenureMonths)return;let t=this.formData.requestedAmount,e=this.formData.requestedTenureMonths,i=this.formData.interestRate||0,r=this.formData.interestType==="FLAT";this.emiSchedule=[];let s=t,d=0,u=0;if(i===0){let h=t/e;for(let v=1;v<=e;v++)this.emiSchedule.push({installment:v,emi:h,principal:h,interest:0,outstanding:s-h}),s-=h;u=t}else if(r){let h=t*i*e/1200;d=h,u=t+h;let v=u/e,C=h/e,O=t/e;for(let T=1;T<=e;T++)s-=O,this.emiSchedule.push({installment:T,emi:v,principal:O,interest:C,outstanding:Math.max(0,s)})}else{let h=i/1200,v=Math.pow(1+h,e),C=t*h*v/(v-1);for(let O=1;O<=e;O++){let T=s*h,w=C-T;s-=w,d+=T,this.emiSchedule.push({installment:O,emi:C,principal:w,interest:T,outstanding:Math.max(0,s)})}u=t+d}this.formData.calculatedEmi=this.emiSchedule[0]?.emi||0,this.formData.totalInterest=d,this.formData.totalPayable=u,this.showEmiPreview=!0}closeEmiPreview(){this.showEmiPreview=!1}saveLoan(){if(this.saving)return;if(!this.formData.employeeId||!this.formData.requestedAmount){this.toastService.error("Please fill in all required fields");return}this.saving=!0,(this.editMode&&this.editId?this.loanService.updateLoan(this.editId,this.formData):this.loanService.applyForLoan(this.formData)).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success(this.editMode?"Loan updated successfully":"Loan application submitted"),this.closeForm(),this.loadLoans(),this.loadDashboard()},error:e=>{console.error(e),this.saving=!1,this.cdr.detectChanges();let i=e.error?.message||e.error?.error||"Error saving loan application";this.toastService.error(i)}})}openEditForm(t){this.editMode=!0,this.editId=t.id,this.formData={loanType:t.loanType,requestedTenureMonths:t.requestedTenureMonths,interestRate:t.interestRate,interestType:t.interestType||"REDUCING",requestedAmount:t.requestedAmount,employeeId:t.employee?.id,purpose:t.purpose||"",requestedDisbursementDate:t.requestedDisbursementDate||""},this.eligibilityMessage="",this.eligibilityStatus="",this.showForm=!0}submitLoan(t){confirm("Submit this loan for approval?")&&this.loanService.submitLoan(t).subscribe({next:()=>{this.loadLoans(),this.loadDashboard()},error:e=>console.error(e)})}openApprovalModal(t){this.selectedLoan=t,this.approvalData={approvedAmount:t.requestedAmount,approvedTenure:t.requestedTenureMonths,remarks:""},this.showApprovalModal=!0}closeApprovalModal(){this.showApprovalModal=!1,this.selectedLoan=null,this.approvalData={}}approveLoan(){this.selectedLoan&&this.loanService.approveLoan(this.selectedLoan.id,this.currentUserId,this.approvalData.remarks,this.approvalData.approvedAmount).subscribe({next:()=>{this.closeApprovalModal(),this.loadLoans(),this.loadDashboard()},error:t=>console.error(t)})}rejectLoan(t){let e=prompt("Enter rejection reason:");e&&this.loanService.rejectLoan(t,e).subscribe({next:()=>{this.loadLoans(),this.loadDashboard()},error:i=>console.error(i)})}disburseLoan(t){let e=new Date().toISOString().split("T")[0];confirm("Disburse this loan? This will generate the repayment schedule.")&&this.loanService.disburseLoan(t,e).subscribe({next:()=>{this.loadLoans(),this.loadDashboard()},error:i=>console.error(i)})}viewRepayments(t){this.selectedLoan=t,this.loanService.getRepaymentsByLoan(t.id).subscribe({next:e=>this.repayments=e,error:e=>console.error(e)})}closeRepayments(){this.selectedLoan=null,this.repayments=[]}viewLedger(t){this.ledgerLoan=t,this.loanService.getRepaymentsByLoan(t.id).subscribe({next:e=>{this.repayments=e,this.showLedger=!0},error:e=>console.error(e)})}closeLedger(){this.showLedger=!1,this.ledgerLoan=null,this.repayments=[]}getLedgerOpeningBalance(){return this.ledgerLoan?.approvedAmount||0}getLedgerPaidPrincipal(){return this.repayments.filter(t=>t.status==="PAID").reduce((t,e)=>t+(e.principalAmount||0),0)}getLedgerPaidInterest(){return this.repayments.filter(t=>t.status==="PAID").reduce((t,e)=>t+(e.interestAmount||0),0)}getLedgerClosingBalance(){return this.ledgerLoan?.outstandingBalance||0}recordManualPayment(t){let e=prompt("Enter payment amount:",t.emiAmount?.toString());if(e){let i=new Date().toISOString().split("T")[0];this.loanService.recordPayment(t.id,parseFloat(e),i).subscribe({next:()=>{this.selectedLoan&&this.viewRepayments(this.selectedLoan),this.loadLoans(),this.loadDashboard()},error:r=>console.error(r)})}}formatDate(t){return t?new Date(t).toLocaleDateString():""}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getStatusClass(t){return{DRAFT:"bg-secondary",PENDING_APPROVAL:"bg-warning",APPROVED:"bg-info",DISBURSED:"bg-primary",ACTIVE:"bg-success",CLOSED:"bg-dark",REJECTED:"bg-danger",PAID:"bg-success",PENDING:"bg-warning",OVERDUE:"bg-danger"}[t]||"bg-secondary"}getEligibilityClass(){return{success:"eligibility-success",warning:"eligibility-warning",error:"eligibility-error"}[this.eligibilityStatus]||""}static \u0275fac=function(e){return new(e||n)(V(fc),V(ai),V(Ui),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-loans"]],decls:69,vars:17,consts:[[1,"loans-container"],[1,"page-header"],[1,"dashboard-cards"],[1,"card","stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"tabs"],[3,"click"],[1,"section-header"],[1,"btn","btn-primary",3,"click"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"actions-cell"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],["class","btn btn-sm",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm",3,"click"],[1,"btn","btn-sm","btn-outline",3,"click"],["colspan","10",1,"text-center"],[1,"modal-overlay"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],[1,"required"],["name","employeeId","required","",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","loanType","required","",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","eligibility-box",3,"ngClass",4,"ngIf"],["type","number","name","requestedAmount","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["type","number","name","requestedTenureMonths","min","1","max","360","required","",3,"ngModelChange","ngModel"],["type","number","name","interestRate","min","0","max","50","step","0.01",3,"ngModelChange","ngModel"],["name","interestType",3,"ngModelChange","ngModel"],["type","date","name","requestedDisbursementDate",3,"ngModelChange","ngModel"],["name","deductFromPayroll",3,"ngModelChange","ngModel"],["name","purpose","rows","3","placeholder","Describe the purpose of this loan...",3,"ngModelChange","ngModel"],["name","notes","rows","2","placeholder","Any additional notes...",3,"ngModelChange","ngModel"],["class","emi-preview-section",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"eligibility-box",3,"ngClass"],[1,"emi-preview-section"],["type","button",1,"btn","btn-outline",3,"click"],["class","emi-summary",4,"ngIf"],[1,"emi-summary"],[1,"emi-item"],[1,"label"],[1,"value"],[1,"emi-summary-header"],[1,"summary-item"],[1,"summary-item","highlight"],[1,"table-scroll"],[1,"btn","btn-secondary",3,"click"],[1,"modal-content",3,"click"],["class","approval-details",4,"ngIf"],["type","number","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","min","1",3,"ngModelChange","ngModel"],["rows","3","placeholder","Add approval remarks...",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"approval-details"],[1,"loan-summary"],[3,"overdue","paid",4,"ngFor","ngForOf"],[1,"ledger-summary"],[1,"ledger-card"],[1,"ledger-label"],[1,"ledger-value"],[1,"ledger-value","text-success"],[1,"ledger-value","text-warning"],[1,"ledger-card","highlight"],[1,"badge","bg-primary"],[3,"pending",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Loans & Advances Management"),a()(),o(4,"div",2)(5,"div",3)(6,"div",4),l(7),a(),o(8,"div",5),l(9,"Pending Approval"),a()(),o(10,"div",3)(11,"div",4),l(12),a(),o(13,"div",5),l(14,"Active Loans"),a()(),o(15,"div",3)(16,"div",4),l(17),a(),o(18,"div",5),l(19,"Overdue Payments"),a()(),o(20,"div",3)(21,"div",4),l(22),a(),o(23,"div",5),l(24,"Due This Month"),a()()(),o(25,"div",6)(26,"button",7),x("click",function(){return i.setTab("applications")}),l(27,"All Applications"),a(),o(28,"button",7),x("click",function(){return i.setTab("pending")}),l(29,"Pending Approval"),a(),o(30,"button",7),x("click",function(){return i.setTab("outstanding")}),l(31,"Outstanding Loans"),a()(),o(32,"div",8)(33,"h3"),l(34,"Loan Applications"),a(),o(35,"button",9),x("click",function(){return i.openForm()}),l(36,"+ New Loan Application"),a()(),o(37,"div",10)(38,"table",11)(39,"thead")(40,"tr")(41,"th"),l(42,"Application #"),a(),o(43,"th"),l(44,"Employee"),a(),o(45,"th"),l(46,"Type"),a(),o(47,"th"),l(48,"Requested"),a(),o(49,"th"),l(50,"Approved"),a(),o(51,"th"),l(52,"Tenure"),a(),o(53,"th"),l(54,"EMI"),a(),o(55,"th"),l(56,"Outstanding"),a(),o(57,"th"),l(58,"Status"),a(),o(59,"th"),l(60,"Actions"),a()()(),o(61,"tbody"),b(62,qTe,27,17,"tr",12)(63,HTe,3,0,"tr",13),a()()(),b(64,XTe,76,18,"div",14)(65,eke,47,6,"div",14)(66,nke,25,4,"div",14)(67,oke,50,5,"div",14)(68,ske,69,10,"div",14),a()),e&2&&(c(7),_(i.dashboard.pendingApproval||0),c(5),_(i.dashboard.activeLoans||0),c(5),_(i.dashboard.overduePayments||0),c(5),_(i.dashboard.dueThisMonth||0),c(4),ie("active",i.activeTab==="applications"),c(2),ie("active",i.activeTab==="pending"),c(2),ie("active",i.activeTab==="outstanding"),c(32),m("ngForOf",i.loans),c(),m("ngIf",i.loans.length===0),c(),m("ngIf",i.showForm),c(),m("ngIf",i.showEmiPreview),c(),m("ngIf",i.showApprovalModal),c(),m("ngIf",i.selectedLoan&&!i.showApprovalModal&&!i.showLedger),c(),m("ngIf",i.showLedger))},dependencies:[At,ot,Se,be,Vt,pi,je,We,Ie,Mt,Ue,Oe,di,cn,Xt,fr,Ee,li,Rt],styles:[".loans-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.dashboard-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 4px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:teal}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;margin-top:8px}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:none;cursor:pointer;font-size:14px;color:#666;border-bottom:2px solid transparent;margin-bottom:-2px}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:teal}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#999}.data-table[_ngcontent-%COMP%]   tr.overdue[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fef2f2}.data-table[_ngcontent-%COMP%]   tr.paid[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f0fdf4}.data-table[_ngcontent-%COMP%]   tr.pending[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{opacity:.7}.table-scroll[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.actions-cell[_ngcontent-%COMP%]{white-space:nowrap}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff;display:inline-block}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.badge.bg-warning[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-success[_ngcontent-%COMP%]{background:#10b981}.badge.bg-primary[_ngcontent-%COMP%]{background:teal}.badge.bg-danger[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-dark[_ngcontent-%COMP%]{background:#374151}.badge.bg-info[_ngcontent-%COMP%]{background:#06b6d4}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-info[_ngcontent-%COMP%]{background:#06b6d4;color:#fff}.btn.btn-outline[_ngcontent-%COMP%]{background:transparent;border:1px solid #008080;color:teal}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;margin-right:4px}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-content.modal-lg[_ngcontent-%COMP%]{width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}.eligibility-box[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-bottom:16px;font-size:14px}.eligibility-box.eligibility-success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46;border:1px solid #a7f3d0}.eligibility-box.eligibility-warning[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e;border:1px solid #fde68a}.eligibility-box.eligibility-error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}.emi-preview-section[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb}.emi-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px;padding:16px;background:#f9fafb;border-radius:8px}.emi-summary[_ngcontent-%COMP%]   .emi-item[_ngcontent-%COMP%]{text-align:center}.emi-summary[_ngcontent-%COMP%]   .emi-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666}.emi-summary[_ngcontent-%COMP%]   .emi-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:teal}.emi-summary-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px;padding:16px;background:#f9fafb;border-radius:8px}.emi-summary-header[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{text-align:center}.emi-summary-header[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666}.emi-summary-header[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.emi-summary-header[_ngcontent-%COMP%]   .summary-item.highlight[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:20px;color:teal}.loan-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px;padding:16px;background:#f9fafb;border-radius:8px}.loan-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{text-align:center}.loan-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666}.loan-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.approval-details[_ngcontent-%COMP%]{background:#f9fafb;padding:16px;border-radius:8px;margin-bottom:20px}.approval-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.ledger-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}.ledger-summary[_ngcontent-%COMP%]   .ledger-card[_ngcontent-%COMP%]{background:#f9fafb;padding:16px;border-radius:8px;text-align:center}.ledger-summary[_ngcontent-%COMP%]   .ledger-card[_ngcontent-%COMP%]   .ledger-label[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:8px}.ledger-summary[_ngcontent-%COMP%]   .ledger-card[_ngcontent-%COMP%]   .ledger-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333}.ledger-summary[_ngcontent-%COMP%]   .ledger-card[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:#10b981}.ledger-summary[_ngcontent-%COMP%]   .ledger-card[_ngcontent-%COMP%]   .text-warning[_ngcontent-%COMP%]{color:#f59e0b}.ledger-summary[_ngcontent-%COMP%]   .ledger-card.highlight[_ngcontent-%COMP%]{background:teal}.ledger-summary[_ngcontent-%COMP%]   .ledger-card.highlight[_ngcontent-%COMP%]   .ledger-label[_ngcontent-%COMP%], .ledger-summary[_ngcontent-%COMP%]   .ledger-card.highlight[_ngcontent-%COMP%]   .ledger-value[_ngcontent-%COMP%]{color:#fff}h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}@media(max-width:768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.emi-summary[_ngcontent-%COMP%], .emi-summary-header[_ngcontent-%COMP%], .loan-summary[_ngcontent-%COMP%], .ledger-summary[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.modal-content[_ngcontent-%COMP%]{padding:16px}}"],changeDetection:0})};var K2=class n{constructor(t){this.http=t}baseUrl="/api/onboarding";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getPlans(){return this.http.get(`${this.baseUrl}/plans`)}getActivePlans(){return this.http.get(`${this.baseUrl}/plans/active`)}getPlan(t){return this.http.get(`${this.baseUrl}/plans/${t}`)}getPlanByEmployee(t){return this.http.get(`${this.baseUrl}/plans/employee/${t}`)}createPlan(t){return this.http.post(`${this.baseUrl}/plans`,t)}updatePlan(t,e){return this.http.put(`${this.baseUrl}/plans/${t}`,e)}startPlan(t){return this.http.post(`${this.baseUrl}/plans/${t}/start`,{})}completePlan(t){return this.http.post(`${this.baseUrl}/plans/${t}/complete`,{})}deletePlan(t){return this.http.delete(`${this.baseUrl}/plans/${t}`)}getTasksByPlan(t){return this.http.get(`${this.baseUrl}/tasks/plan/${t}`)}getPendingTasks(){return this.http.get(`${this.baseUrl}/tasks/pending`)}getOverdueTasks(){return this.http.get(`${this.baseUrl}/tasks/overdue`)}getTask(t){return this.http.get(`${this.baseUrl}/tasks/${t}`)}createTask(t){return this.http.post(`${this.baseUrl}/tasks`,t)}updateTask(t,e){return this.http.put(`${this.baseUrl}/tasks/${t}`,e)}startTask(t){return this.http.post(`${this.baseUrl}/tasks/${t}/start`,{})}completeTask(t,e){return this.http.post(`${this.baseUrl}/tasks/${t}/complete`,{notes:e})}deleteTask(t){return this.http.delete(`${this.baseUrl}/tasks/${t}`)}getAssetsByEmployee(t){return this.http.get(`${this.baseUrl}/assets/employee/${t}`)}getPendingReturns(){return this.http.get(`${this.baseUrl}/assets/pending-returns`)}assignAsset(t){return this.http.post(`${this.baseUrl}/assets`,t)}returnAsset(t,e){return this.http.post(`${this.baseUrl}/assets/${t}/return`,{returnNotes:e})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};var cke=n=>({completed:n});function dke(n,t){if(n&1&&(o(0,"span"),y(1,"i",31),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.department==null?null:e.department.name)}}function pke(n,t){if(n&1&&(o(0,"span"),y(1,"i",32),l(2),a()),n&2){let e=p().$implicit;c(2),D(" ",e.designation==null?null:e.designation.title)}}function mke(n,t){if(n&1){let e=F();o(0,"div",17)(1,"div",18)(2,"div",19),y(3,"i",20),a(),o(4,"div",21)(5,"h4"),l(6),a(),o(7,"p",22),l(8),a(),o(9,"p",23),b(10,dke,3,1,"span",24)(11,pke,3,1,"span",24),a()()(),o(12,"div",25)(13,"p",26),y(14,"i",27),l(15),a(),o(16,"span",28),l(17),a()(),o(18,"div",29)(19,"button",2),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.startOnboardingForNewHire(r))}),y(20,"i",30),l(21," Start Onboarding "),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(6),Ge("",e.firstName," ",e.lastName),c(2),_(e.employeeCode),c(2),m("ngIf",e.department),c(),m("ngIf",e.designation),c(4),D(" Joined ",i.formatDate(e.joiningDate)," "),c(2),D("",i.getDaysSinceJoining(e.joiningDate)," days ago")}}function uke(n,t){if(n&1&&(o(0,"div",12)(1,"div",8)(2,"h3"),y(3,"i",13),l(4," New Hires Pending Onboarding"),a(),o(5,"span",14),l(6),a()(),o(7,"div",15),b(8,mke,22,7,"div",16),a()()),n&2){let e=p();c(6),D("",e.newHiresPendingOnboarding.length," pending"),c(2),m("ngForOf",e.newHiresPendingOnboarding)}}function gke(n,t){n&1&&(o(0,"div",33)(1,"p"),l(2,'No onboarding plans yet. Click "New Onboarding Plan" to create one.'),a()())}function fke(n,t){if(n&1&&(o(0,"p")(1,"strong"),l(2,"Buddy:"),a(),l(3),a()),n&2){let e=p().$implicit;c(3),Ge(" ",e.buddy==null?null:e.buddy.firstName," ",e.buddy==null?null:e.buddy.lastName)}}function hke(n,t){if(n&1&&(o(0,"p")(1,"strong"),l(2,"Manager:"),a(),l(3),a()),n&2){let e=p().$implicit;c(3),Ge(" ",e.manager==null?null:e.manager.firstName," ",e.manager==null?null:e.manager.lastName)}}function _ke(n,t){if(n&1){let e=F();o(0,"button",48),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.startPlan(r.id))}),l(1,"Start"),a()}}function vke(n,t){if(n&1){let e=F();o(0,"button",49),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.completePlan(r.id))}),l(1,"Complete"),a()}}function xke(n,t){if(n&1){let e=F();o(0,"div",36)(1,"div",37)(2,"h4"),l(3),a(),o(4,"span",38),l(5),a()(),o(6,"div",39)(7,"p")(8,"strong"),l(9,"Start Date:"),a(),l(10),a(),o(11,"p")(12,"strong"),l(13,"Expected End:"),a(),l(14),a(),b(15,fke,4,2,"p",24)(16,hke,4,2,"p",24),a(),o(17,"div",40),y(18,"div",41),a(),o(19,"p",42),l(20),a(),o(21,"div",43)(22,"button",44),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewTasks(r))}),l(23,"View Tasks"),a(),o(24,"button",44),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openAssetModal(r))}),l(25,"Assets"),a(),o(26,"button",44),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openPlanForm(r))}),l(27,"Edit"),a(),b(28,_ke,2,0,"button",45)(29,vke,2,0,"button",46),o(30,"button",47),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deletePlan(r.id))}),l(31,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(5),D(" ",i.formatDate(e.startDate)),c(4),D(" ",i.formatDate(e.expectedEndDate)),c(),m("ngIf",e.buddy),c(),m("ngIf",e.manager),c(2),jt("width",i.getProgress(e),"%"),c(2),En("",e.completedTasks||0,"/",e.totalTasks||0," tasks completed (",i.getProgress(e),"%)"),c(8),m("ngIf",e.status==="NOT_STARTED"),c(),m("ngIf",e.status==="IN_PROGRESS")}}function yke(n,t){if(n&1&&(o(0,"div",34),b(1,xke,32,15,"div",35),a()),n&2){let e=p();c(),m("ngForOf",e.plans)}}function Cke(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function bke(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function Mke(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function Ske(n,t){if(n&1){let e=F();o(0,"div",50)(1,"div",51),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3),a(),o(4,"form",52),x("ngSubmit",function(){g(e);let r=p();return f(r.savePlan())}),o(5,"div",53)(6,"label"),l(7,"Employee *"),a(),o(8,"select",54),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.employeeId,r)||(s.planFormData.employeeId=r),f(r)}),o(9,"option",55),l(10,"Select Employee"),a(),b(11,Cke,2,4,"option",56),a()(),o(12,"div",57)(13,"div",53)(14,"label"),l(15,"Start Date *"),a(),o(16,"input",58),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.startDate,r)||(s.planFormData.startDate=r),f(r)}),a()(),o(17,"div",53)(18,"label"),l(19,"Expected End Date *"),a(),o(20,"input",59),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.expectedEndDate,r)||(s.planFormData.expectedEndDate=r),f(r)}),a()()(),o(21,"div",53)(22,"label"),l(23,"Buddy (Mentor)"),a(),o(24,"select",60),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.buddyId,r)||(s.planFormData.buddyId=r),f(r)}),o(25,"option",55),l(26,"Select Buddy"),a(),b(27,bke,2,4,"option",56),a()(),o(28,"div",53)(29,"label"),l(30,"Reporting Manager"),a(),o(31,"select",61),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.managerId,r)||(s.planFormData.managerId=r),f(r)}),o(32,"option",55),l(33,"Select Manager"),a(),b(34,Mke,2,4,"option",56),a()(),o(35,"div",53)(36,"label"),l(37,"Notes"),a(),o(38,"textarea",62),S("ngModelChange",function(r){g(e);let s=p();return P(s.planFormData.notes,r)||(s.planFormData.notes=r),f(r)}),a()(),o(39,"div",63)(40,"button",64),x("click",function(){g(e);let r=p();return f(r.closePlanForm())}),l(41,"Cancel"),a(),o(42,"button",65),l(43),a()()()()()}if(n&2){let e=p();c(3),D("",e.editingPlan?"Edit":"New"," Onboarding Plan"),c(5),M("ngModel",e.planFormData.employeeId),m("disabled",e.editingPlan),c(3),m("ngForOf",e.employees),c(5),M("ngModel",e.planFormData.startDate),c(4),M("ngModel",e.planFormData.expectedEndDate),c(4),M("ngModel",e.planFormData.buddyId),c(3),m("ngForOf",e.employees),c(4),M("ngModel",e.planFormData.managerId),c(3),m("ngForOf",e.employees),c(4),M("ngModel",e.planFormData.notes),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":(e.editingPlan?"Update":"Create")+" Plan")}}function Pke(n,t){n&1&&(o(0,"div",33)(1,"p"),l(2,'No tasks yet. Click "Add Task" to create onboarding checklist items.'),a()())}function wke(n,t){if(n&1&&(o(0,"span",86),l(1),a()),n&2){let e=p().$implicit;c(),Ge("Assigned to: ",e.assignedTo==null?null:e.assignedTo.firstName," ",e.assignedTo==null?null:e.assignedTo.lastName)}}function Eke(n,t){if(n&1&&(o(0,"div",87),l(1),a()),n&2){let e=p().$implicit;c(),_(e.description)}}function Oke(n,t){if(n&1){let e=F();o(0,"button",49),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.completeTask(r))}),l(1,"Complete"),a()}}function Tke(n,t){if(n&1){let e=F();o(0,"div",74)(1,"div",75)(2,"input",76),x("change",function(){let r=g(e).$implicit,s=p(3);return f(s.completeTask(r))}),a()(),o(3,"div",77)(4,"div",78),l(5),a(),o(6,"div",79)(7,"span",80),l(8),a(),o(9,"span",81),l(10),a(),b(11,wke,2,2,"span",82),o(12,"span",83),l(13),a()(),b(14,Eke,2,1,"div",84),a(),o(15,"div",85),b(16,Oke,2,0,"button",46),o(17,"button",47),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.deleteTask(r))}),l(18,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(3);m("ngClass",zc(11,cke,e.status==="COMPLETED")),c(2),m("checked",e.status==="COMPLETED")("disabled",e.status==="COMPLETED"),c(3),_(e.taskName),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),_(i.getCategoryLabel(e.category)),c(),m("ngIf",e.assignedTo),c(2),D("Due: ",i.formatDate(e.dueDate)),c(),m("ngIf",e.description),c(2),m("ngIf",e.status!=="COMPLETED")}}function kke(n,t){if(n&1&&(o(0,"div",72),b(1,Tke,19,13,"div",73),a()),n&2){let e=p(2);c(),m("ngForOf",e.tasks)}}function Ike(n,t){if(n&1){let e=F();o(0,"div",50)(1,"div",67),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",68)(3,"h3"),l(4),a(),o(5,"button",69),x("click",function(){g(e);let r=p();return f(r.openTaskForm())}),l(6,"+ Add Task"),a()(),b(7,Pke,3,0,"div",9)(8,kke,2,1,"div",70),o(9,"div",63)(10,"button",71),x("click",function(){g(e);let r=p();return f(r.closeTasks())}),l(11,"Close"),a()()()()}if(n&2){let e=p();c(4),Ge("Onboarding Checklist - ",e.selectedPlan.employee==null?null:e.selectedPlan.employee.firstName," ",e.selectedPlan.employee==null?null:e.selectedPlan.employee.lastName),c(3),m("ngIf",e.tasks.length===0),c(),m("ngIf",e.tasks.length>0)}}function Dke(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit,i=p(2);m("value",e),c(),_(i.getCategoryLabel(e))}}function Ake(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function Rke(n,t){if(n&1){let e=F();o(0,"div",50)(1,"div",51),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Add Onboarding Task"),a(),o(4,"form",52),x("ngSubmit",function(){g(e);let r=p();return f(r.saveTask())}),o(5,"div",53)(6,"label"),l(7,"Task Name *"),a(),o(8,"input",88),S("ngModelChange",function(r){g(e);let s=p();return P(s.taskFormData.taskName,r)||(s.taskFormData.taskName=r),f(r)}),a()(),o(9,"div",53)(10,"label"),l(11,"Category *"),a(),o(12,"select",89),S("ngModelChange",function(r){g(e);let s=p();return P(s.taskFormData.category,r)||(s.taskFormData.category=r),f(r)}),b(13,Dke,2,2,"option",56),a()(),o(14,"div",53)(15,"label"),l(16,"Assigned To"),a(),o(17,"select",90),S("ngModelChange",function(r){g(e);let s=p();return P(s.taskFormData.assignedToId,r)||(s.taskFormData.assignedToId=r),f(r)}),o(18,"option",55),l(19,"Select Assignee"),a(),b(20,Ake,2,4,"option",56),a()(),o(21,"div",53)(22,"label"),l(23,"Due Date *"),a(),o(24,"input",91),S("ngModelChange",function(r){g(e);let s=p();return P(s.taskFormData.dueDate,r)||(s.taskFormData.dueDate=r),f(r)}),a()(),o(25,"div",53)(26,"label"),l(27,"Description"),a(),o(28,"textarea",92),S("ngModelChange",function(r){g(e);let s=p();return P(s.taskFormData.description,r)||(s.taskFormData.description=r),f(r)}),a()(),o(29,"div",63)(30,"button",64),x("click",function(){g(e);let r=p();return f(r.closeTaskForm())}),l(31,"Cancel"),a(),o(32,"button",65),l(33),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.taskFormData.taskName),c(4),M("ngModel",e.taskFormData.category),c(),m("ngForOf",e.taskCategories),c(4),M("ngModel",e.taskFormData.assignedToId),c(3),m("ngForOf",e.employees),c(4),M("ngModel",e.taskFormData.dueDate),c(4),M("ngModel",e.taskFormData.description),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Add Task")}}function Fke(n,t){n&1&&(o(0,"div",33)(1,"p"),l(2,'No assets assigned yet. Click "Assign Asset" to assign equipment to this employee.'),a()())}function Nke(n,t){if(n&1){let e=F();o(0,"button",97),x("click",function(){g(e);let r=p().$implicit,s=p(3);return f(s.returnAsset(r))}),l(1,"Return"),a()}}function Lke(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",38),l(11),a()(),o(12,"td"),b(13,Nke,2,0,"button",96),a()()),n&2){let e=t.$implicit,i=p(3);c(2),_(i.getAssetTypeLabel(e.assetType)),c(2),_(e.assetName),c(2),_(e.serialNumber||"-"),c(2),_(i.formatDate(e.assignedDate)),c(2),m("ngClass",e.returnedDate?"bg-secondary":"bg-primary"),c(),D(" ",e.returnedDate?"Returned":"Assigned"," "),c(2),m("ngIf",!e.returnedDate)}}function Vke(n,t){if(n&1&&(o(0,"table",94)(1,"thead")(2,"tr")(3,"th"),l(4,"Asset Type"),a(),o(5,"th"),l(6,"Asset Name"),a(),o(7,"th"),l(8,"Serial Number"),a(),o(9,"th"),l(10,"Assigned Date"),a(),o(11,"th"),l(12,"Status"),a(),o(13,"th"),l(14,"Actions"),a()()(),o(15,"tbody"),b(16,Lke,14,7,"tr",95),a()()),n&2){let e=p(2);c(16),m("ngForOf",e.assets)}}function Bke(n,t){if(n&1){let e=F();o(0,"div",50)(1,"div",67),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",68)(3,"h3"),l(4),a(),o(5,"button",69),x("click",function(){g(e);let r=p();return f(r.openAssetForm())}),l(6,"+ Assign Asset"),a()(),b(7,Fke,3,0,"div",9)(8,Vke,17,1,"table",93),o(9,"div",63)(10,"button",71),x("click",function(){g(e);let r=p();return f(r.closeAssetModal())}),l(11,"Close"),a()()()()}if(n&2){let e=p();c(4),Ge("Asset Assignment - ",e.selectedAssetPlan==null||e.selectedAssetPlan.employee==null?null:e.selectedAssetPlan.employee.firstName," ",e.selectedAssetPlan==null||e.selectedAssetPlan.employee==null?null:e.selectedAssetPlan.employee.lastName),c(3),m("ngIf",e.assets.length===0),c(),m("ngIf",e.assets.length>0)}}function Uke(n,t){if(n&1&&(o(0,"option",66),l(1),a()),n&2){let e=t.$implicit,i=p(2);m("value",e),c(),_(i.getAssetTypeLabel(e))}}function jke(n,t){if(n&1){let e=F();o(0,"div",50)(1,"div",51),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Assign Asset"),a(),o(4,"form",52),x("ngSubmit",function(){g(e);let r=p();return f(r.saveAsset())}),o(5,"div",53)(6,"label"),l(7,"Asset Type *"),a(),o(8,"select",98),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.assetType,r)||(s.assetFormData.assetType=r),f(r)}),b(9,Uke,2,2,"option",56),a()(),o(10,"div",53)(11,"label"),l(12,"Asset Name *"),a(),o(13,"input",99),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.assetName,r)||(s.assetFormData.assetName=r),f(r)}),a()(),o(14,"div",53)(15,"label"),l(16,"Serial Number"),a(),o(17,"input",100),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.serialNumber,r)||(s.assetFormData.serialNumber=r),f(r)}),a()(),o(18,"div",53)(19,"label"),l(20,"Asset Tag"),a(),o(21,"input",101),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.assetTag,r)||(s.assetFormData.assetTag=r),f(r)}),a()(),o(22,"div",53)(23,"label"),l(24,"Assigned Date *"),a(),o(25,"input",102),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.assignedDate,r)||(s.assetFormData.assignedDate=r),f(r)}),a()(),o(26,"div",53)(27,"label"),l(28,"Notes"),a(),o(29,"textarea",103),S("ngModelChange",function(r){g(e);let s=p();return P(s.assetFormData.notes,r)||(s.assetFormData.notes=r),f(r)}),a()(),o(30,"div",63)(31,"button",64),x("click",function(){g(e);let r=p();return f(r.closeAssetForm())}),l(32,"Cancel"),a(),o(33,"button",65),l(34),a()()()()()}if(n&2){let e=p();c(8),M("ngModel",e.assetFormData.assetType),c(),m("ngForOf",e.assetTypes),c(4),M("ngModel",e.assetFormData.assetName),c(4),M("ngModel",e.assetFormData.serialNumber),c(4),M("ngModel",e.assetFormData.assetTag),c(4),M("ngModel",e.assetFormData.assignedDate),c(4),M("ngModel",e.assetFormData.notes),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Assign Asset")}}var Q2=class n{constructor(t,e,i,r){this.onboardingService=t;this.employeeService=e;this.toastService=i;this.cdr=r}plans=[];tasks=[];assets=[];employees=[];newHiresPendingOnboarding=[];dashboard={};loading=!1;selectedPlan=null;selectedAssetPlan=null;showPlanForm=!1;showTaskForm=!1;showAssetModal=!1;showAssetForm=!1;saving=!1;editingPlan=null;planFormData={};taskFormData={};assetFormData={};taskCategories=["DOCUMENTATION","IT_SETUP","TRAINING","HR_FORMALITIES","TEAM_INTRODUCTION","OTHER"];assetTypes=["LAPTOP","MOBILE","ID_CARD","ACCESS_CARD","KEYS","HEADSET","MONITOR","KEYBOARD","MOUSE","OTHER"];ngOnInit(){this.loadDashboard(),this.loadPlans(),this.loadEmployees()}loadNewHiresPendingOnboarding(){let t=new Date;t.setDate(t.getDate()-30);let e=new Set(this.plans.map(i=>i.employee?.id).filter(i=>i));this.newHiresPendingOnboarding=this.employees.filter(i=>{if(!i.joiningDate)return!1;let s=new Date(i.joiningDate)>=t,d=!e.has(i.id);return s&&d}).sort((i,r)=>new Date(r.joiningDate).getTime()-new Date(i.joiningDate).getTime())}loadDashboard(){this.onboardingService.getDashboard().subscribe({next:t=>{this.dashboard=t,this.cdr.markForCheck()},error:t=>console.error("Error loading dashboard:",t)})}loadPlans(){this.loading=!0,this.cdr.markForCheck(),this.onboardingService.getPlans().pipe(Tn(()=>{this.loading=!1,this.cdr.markForCheck()})).subscribe({next:t=>{this.plans=t,this.loadNewHiresPendingOnboarding(),this.cdr.markForCheck()},error:t=>console.error(t)})}loadEmployees(){this.employeeService.getActive().subscribe({next:t=>{this.employees=t,this.loadNewHiresPendingOnboarding(),this.cdr.markForCheck()},error:t=>console.error("Error loading employees:",t)})}startOnboardingForNewHire(t){let e=new Date().toISOString().split("T")[0],i=new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0];this.planFormData={employeeId:t.id,startDate:e,expectedEndDate:i,notes:`Onboarding plan for ${t.firstName} ${t.lastName}`},this.showPlanForm=!0}getDaysSinceJoining(t){let e=new Date(t);return Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24))}openPlanForm(t){this.editingPlan=t||null,this.planFormData=t?Tt(me({},t),{employeeId:t.employee?.id,buddyId:t.buddy?.id,managerId:t.manager?.id}):{startDate:new Date().toISOString().split("T")[0],expectedEndDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]},this.showPlanForm=!0}closePlanForm(){this.showPlanForm=!1,this.editingPlan=null,this.planFormData={}}savePlan(){if(this.saving)return;this.saving=!0,this.cdr.markForCheck();let t=Tt(me({},this.planFormData),{employee:this.planFormData.employeeId?{id:this.planFormData.employeeId}:null,buddy:this.planFormData.buddyId?{id:this.planFormData.buddyId}:null,manager:this.planFormData.managerId?{id:this.planFormData.managerId}:null});(this.editingPlan?this.onboardingService.updatePlan(this.editingPlan.id,t):this.onboardingService.createPlan(t)).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success(this.editingPlan?"Onboarding plan updated":"Onboarding plan created"),this.closePlanForm(),this.loadPlans(),this.loadDashboard()},error:i=>{console.error(i),this.toastService.error("Error saving onboarding plan")}})}deletePlan(t){confirm("Delete this onboarding plan?")&&this.onboardingService.deletePlan(t).subscribe({next:()=>{this.loadPlans(),this.loadDashboard()},error:e=>console.error(e)})}startPlan(t){this.onboardingService.startPlan(t).subscribe({next:()=>{this.loadPlans(),this.loadDashboard()},error:e=>console.error(e)})}completePlan(t){confirm("Complete this onboarding plan?")&&this.onboardingService.completePlan(t).subscribe({next:()=>{this.loadPlans(),this.loadDashboard()},error:e=>console.error(e)})}viewTasks(t){this.selectedPlan=t,this.onboardingService.getTasksByPlan(t.id).subscribe({next:e=>this.tasks=e,error:e=>console.error(e)})}closeTasks(){this.selectedPlan=null,this.tasks=[]}openTaskForm(){this.taskFormData={onboardingPlan:{id:this.selectedPlan.id},dueDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],category:"HR_FORMALITIES"},this.showTaskForm=!0}closeTaskForm(){this.showTaskForm=!1,this.taskFormData={}}saveTask(){if(this.saving)return;this.saving=!0,this.cdr.markForCheck();let t=Tt(me({},this.taskFormData),{assignedTo:this.taskFormData.assignedToId?{id:this.taskFormData.assignedToId}:null});this.onboardingService.createTask(t).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success("Task created successfully"),this.closeTaskForm(),this.viewTasks(this.selectedPlan),this.loadDashboard()},error:e=>{console.error(e),this.toastService.error("Error saving task")}})}completeTask(t){this.onboardingService.completeTask(t.id).subscribe({next:()=>{this.viewTasks(this.selectedPlan),this.loadDashboard()},error:e=>console.error(e)})}deleteTask(t){confirm("Delete this task?")&&this.onboardingService.deleteTask(t.id).subscribe({next:()=>this.viewTasks(this.selectedPlan),error:e=>console.error(e)})}openAssetModal(t){this.selectedAssetPlan=t,this.loadAssets(t.employee?.id),this.showAssetModal=!0}closeAssetModal(){this.showAssetModal=!1,this.selectedAssetPlan=null,this.assets=[]}loadAssets(t){t&&this.onboardingService.getAssetsByEmployee(t).subscribe({next:e=>this.assets=e,error:e=>console.error(e)})}openAssetForm(){this.assetFormData={employeeId:this.selectedAssetPlan.employee?.id,assetType:"LAPTOP",assignedDate:new Date().toISOString().split("T")[0]},this.showAssetForm=!0}closeAssetForm(){this.showAssetForm=!1,this.assetFormData={}}saveAsset(){if(this.saving)return;this.saving=!0,this.cdr.markForCheck();let t=Tt(me({},this.assetFormData),{employee:{id:this.assetFormData.employeeId}});this.onboardingService.assignAsset(t).pipe(Tn(()=>{this.saving=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.toastService.success("Asset assigned successfully"),this.closeAssetForm(),this.loadAssets(this.selectedAssetPlan.employee?.id)},error:e=>{console.error(e),this.toastService.error("Error assigning asset")}})}returnAsset(t){confirm("Mark this asset as returned?")&&this.onboardingService.returnAsset(t.id).subscribe({next:()=>this.loadAssets(this.selectedAssetPlan.employee?.id),error:e=>console.error(e)})}formatDate(t){return t?new Date(t).toLocaleDateString():""}getStatusClass(t){return{NOT_STARTED:"bg-secondary",IN_PROGRESS:"bg-warning",COMPLETED:"bg-success",PENDING:"bg-warning",OVERDUE:"bg-danger",ASSIGNED:"bg-primary",RETURNED:"bg-secondary"}[t]||"bg-secondary"}getProgress(t){return!t.totalTasks||t.totalTasks===0?0:Math.round(t.completedTasks/t.totalTasks*100)}getCategoryLabel(t){return{DOCUMENTATION:"Documentation",IT_SETUP:"IT Setup",TRAINING:"Training",HR_FORMALITIES:"HR Formalities",TEAM_INTRODUCTION:"Team Introduction",OTHER:"Other"}[t]||t}getAssetTypeLabel(t){return{LAPTOP:"Laptop",MOBILE:"Mobile Phone",ID_CARD:"ID Card",ACCESS_CARD:"Access Card",KEYS:"Keys",HEADSET:"Headset",MONITOR:"Monitor",KEYBOARD:"Keyboard",MOUSE:"Mouse",OTHER:"Other"}[t]||t}static \u0275fac=function(e){return new(e||n)(V(K2),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-onboarding"]],decls:38,vars:12,consts:[[1,"onboarding-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"dashboard-cards"],[1,"card","stat-card"],[1,"stat-value"],[1,"stat-label"],["class","new-hires-section",4,"ngIf"],[1,"section-header"],["class","empty-state",4,"ngIf"],["class","plans-grid",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"new-hires-section"],[1,"fas","fa-user-plus"],[1,"badge","bg-warning"],[1,"new-hires-list"],["class","new-hire-card",4,"ngFor","ngForOf"],[1,"new-hire-card"],[1,"new-hire-info"],[1,"new-hire-avatar"],[1,"fas","fa-user"],[1,"new-hire-details"],[1,"emp-code"],[1,"emp-meta"],[4,"ngIf"],[1,"new-hire-status"],[1,"joining-info"],[1,"fas","fa-calendar-check"],[1,"days-badge"],[1,"new-hire-action"],[1,"fas","fa-play-circle"],[1,"fas","fa-building"],[1,"fas","fa-briefcase"],[1,"empty-state"],[1,"plans-grid"],["class","plan-card",4,"ngFor","ngForOf"],[1,"plan-card"],[1,"plan-header"],[1,"badge",3,"ngClass"],[1,"plan-info"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"plan-actions"],[1,"btn","btn-sm",3,"click"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[3,"ngSubmit"],[1,"form-group"],["name","employeeId","required","",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],["type","date","name","startDate","required","",3,"ngModelChange","ngModel"],["type","date","name","expectedEndDate","required","",3,"ngModelChange","ngModel"],["name","buddyId",3,"ngModelChange","ngModel"],["name","managerId",3,"ngModelChange","ngModel"],["name","notes","rows","3",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"btn","btn-primary","btn-sm",3,"click"],["class","checklist-container",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"checklist-container"],["class","checklist-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"checklist-item",3,"ngClass"],[1,"checklist-checkbox"],["type","checkbox",3,"change","checked","disabled"],[1,"checklist-content"],[1,"checklist-title"],[1,"checklist-meta"],[1,"badge","badge-sm",3,"ngClass"],[1,"category"],["class","assigned",4,"ngIf"],[1,"due-date"],["class","checklist-description",4,"ngIf"],[1,"checklist-actions"],[1,"assigned"],[1,"checklist-description"],["type","text","name","taskName","required","","placeholder","e.g., Complete HR paperwork",3,"ngModelChange","ngModel"],["name","category","required","",3,"ngModelChange","ngModel"],["name","assignedToId",3,"ngModelChange","ngModel"],["type","date","name","dueDate","required","",3,"ngModelChange","ngModel"],["name","description","rows","3","placeholder","Task details...",3,"ngModelChange","ngModel"],["class","data-table",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],["class","btn btn-sm btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-warning",3,"click"],["name","assetType","required","",3,"ngModelChange","ngModel"],["type","text","name","assetName","required","","placeholder","e.g., Dell Latitude 5520",3,"ngModelChange","ngModel"],["type","text","name","serialNumber","placeholder","e.g., SN123456789",3,"ngModelChange","ngModel"],["type","text","name","assetTag","placeholder","e.g., IT-001",3,"ngModelChange","ngModel"],["type","date","name","assignedDate","required","",3,"ngModelChange","ngModel"],["name","notes","rows","3","placeholder","Additional notes...",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Employee Onboarding"),a(),o(4,"button",2),x("click",function(){return i.openPlanForm()}),l(5,"+ New Onboarding Plan"),a()(),o(6,"div",3)(7,"div",4)(8,"div",5),l(9),a(),o(10,"div",6),l(11,"Active Plans"),a()(),o(12,"div",4)(13,"div",5),l(14),a(),o(15,"div",6),l(16,"Pending Tasks"),a()(),o(17,"div",4)(18,"div",5),l(19),a(),o(20,"div",6),l(21,"Overdue Tasks"),a()(),o(22,"div",4)(23,"div",5),l(24),a(),o(25,"div",6),l(26,"Completed This Month"),a()()(),b(27,uke,9,2,"div",7),o(28,"div",8)(29,"h3"),l(30,"Onboarding Plans"),a()(),b(31,gke,3,0,"div",9)(32,yke,2,1,"div",10)(33,Ske,44,14,"div",11)(34,Ike,12,4,"div",11)(35,Rke,34,10,"div",11)(36,Bke,12,4,"div",11)(37,jke,35,10,"div",11),a()),e&2&&(c(9),_(i.dashboard.activePlans||0),c(5),_(i.dashboard.pendingTasks||0),c(5),_(i.dashboard.overdueTasks||0),c(5),_(i.dashboard.completedThisMonth||0),c(3),m("ngIf",i.newHiresPendingOnboarding.length>0),c(4),m("ngIf",!i.loading&&i.plans.length===0),c(),m("ngIf",!i.loading&&i.plans.length>0),c(),m("ngIf",i.showPlanForm),c(),m("ngIf",i.selectedPlan&&!i.showAssetModal),c(),m("ngIf",i.showTaskForm),c(),m("ngIf",i.showAssetModal),c(),m("ngIf",i.showAssetForm))},dependencies:[At,ot,Se,be,Vt,pi,je,We,Ie,Ue,Oe,di,cn,Ee,li,Rt],styles:[".onboarding-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.dashboard-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 4px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:teal}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;margin-top:8px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px}.plan-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.plan-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.plan-info[_ngcontent-%COMP%]{margin-bottom:16px}.plan-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#666}.progress-bar[_ngcontent-%COMP%]{height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:teal;transition:width .3s}.progress-text[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.plan-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.badge.bg-warning[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-success[_ngcontent-%COMP%]{background:#10b981}.badge.bg-danger[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-primary[_ngcontent-%COMP%]{background:teal}.badge.badge-sm[_ngcontent-%COMP%]{padding:2px 6px;font-size:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-warning[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;background:#f9fafb;border-radius:8px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-content.modal-lg[_ngcontent-%COMP%]{width:800px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background:#f3f4f6}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}.checklist-container[_ngcontent-%COMP%]{margin-bottom:20px}.checklist-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px;background:#f9fafb;border-radius:8px;margin-bottom:12px;border-left:4px solid #008080}.checklist-item.completed[_ngcontent-%COMP%]{opacity:.7;border-left-color:#10b981}.checklist-item.completed[_ngcontent-%COMP%]   .checklist-title[_ngcontent-%COMP%]{text-decoration:line-through;color:#9ca3af}.checklist-checkbox[_ngcontent-%COMP%]{flex-shrink:0;padding-top:2px}.checklist-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#008080}.checklist-content[_ngcontent-%COMP%]{flex:1;min-width:0}.checklist-title[_ngcontent-%COMP%]{font-weight:500;color:#1f2937;margin-bottom:6px}.checklist-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;font-size:12px;color:#6b7280}.checklist-meta[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{background:#e5e7eb;padding:2px 8px;border-radius:4px}.checklist-meta[_ngcontent-%COMP%]   .assigned[_ngcontent-%COMP%], .checklist-meta[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{color:#6b7280}.checklist-description[_ngcontent-%COMP%]{margin-top:8px;font-size:13px;color:#6b7280}.checklist-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-shrink:0}.new-hires-section[_ngcontent-%COMP%]{margin-bottom:24px;background:linear-gradient(135deg,#fff9e6,#fff3cd);border-radius:12px;padding:20px;border:1px solid #ffc107}.new-hires-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.new-hires-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#856404;display:flex;align-items:center;gap:8px}.new-hires-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107}.new-hires-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.new-hire-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 4px #0000000d;border-left:4px solid #ffc107}@media(max-width:768px){.new-hire-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.new-hire-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.new-hire-avatar[_ngcontent-%COMP%]{width:48px;height:48px;background:teal;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:20px}.new-hire-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:16px}.new-hire-details[_ngcontent-%COMP%]   .emp-code[_ngcontent-%COMP%]{margin:0;font-size:12px;color:teal;font-weight:500}.new-hire-details[_ngcontent-%COMP%]   .emp-meta[_ngcontent-%COMP%]{margin:4px 0 0;font-size:13px;color:#666;display:flex;gap:16px}.new-hire-details[_ngcontent-%COMP%]   .emp-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.new-hire-details[_ngcontent-%COMP%]   .emp-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px;color:#999}.new-hire-status[_ngcontent-%COMP%]{text-align:center}.new-hire-status[_ngcontent-%COMP%]   .joining-info[_ngcontent-%COMP%]{margin:0 0 6px;font-size:13px;color:#666}.new-hire-status[_ngcontent-%COMP%]   .joining-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px;color:#28a745}.new-hire-status[_ngcontent-%COMP%]   .days-badge[_ngcontent-%COMP%]{display:inline-block;background:#e0f2f2;color:teal;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.new-hire-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;white-space:nowrap}"],changeDetection:0})};var X2=class n{constructor(t){this.http=t}baseUrl="/api/hr-letters";getAllLetters(){return this.http.get(this.baseUrl)}getLetterById(t){return this.http.get(`${this.baseUrl}/${t}`)}getLettersByEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}`)}getLettersByType(t){return this.http.get(`${this.baseUrl}/type/${t}`)}getLettersByStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`)}createLetter(t){return this.http.post(this.baseUrl,t)}updateLetter(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}generateLetter(t){return this.http.post(`${this.baseUrl}/${t}/generate`,{})}signLetter(t,e,i){return this.http.post(`${this.baseUrl}/${t}/sign`,{signedBy:e,designation:i})}issueLetter(t){return this.http.post(`${this.baseUrl}/${t}/issue`,{})}deleteLetter(t){return this.http.delete(`${this.baseUrl}/${t}`)}generateOfferLetter(t,e){return this.http.post(`${this.baseUrl}/generate/offer/${t}`,e)}generateAppointmentLetter(t){return this.http.post(`${this.baseUrl}/generate/appointment/${t}`,{})}generateExperienceLetter(t,e){return this.http.post(`${this.baseUrl}/generate/experience/${t}`,{lastWorkingDate:e})}generateWarningLetter(t,e,i){return this.http.post(`${this.baseUrl}/generate/warning/${t}`,{reason:e,warningLevel:i})}generateSalaryRevisionLetter(t,e){return this.http.post(`${this.baseUrl}/generate/salary-revision/${t}`,e)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function zke(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function qke(n,t){if(n&1){let e=F();o(0,"button",26),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.signLetter(r))}),y(1,"i",27),a()}}function Hke(n,t){if(n&1){let e=F();o(0,"button",28),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.issueLetter(r))}),y(1,"i",29),a()}}function Gke(n,t){if(n&1){let e=F();o(0,"button",30),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.deleteLetter(r))}),y(1,"i",31),a()}}function $ke(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",19),l(13),a()(),o(14,"td")(15,"div",20)(16,"button",21),x("click",function(){let r=g(e).$implicit,s=p();return f(s.viewLetter(r))}),y(17,"i",22),a(),b(18,qke,2,0,"button",23)(19,Hke,2,0,"button",24)(20,Gke,2,0,"button",25),a()()()}if(n&2){let e=t.$implicit,i=p();c(2),_(e.letterNumber),c(2),_(i.getLetterTypeLabel(e.letterType)),c(2),_(i.getEmployeeName(e.employee)),c(2),_(e.subject),c(2),_(i.formatDate(e.issueDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(5),m("ngIf",e.status==="DRAFT"||e.status==="GENERATED"),c(),m("ngIf",e.status==="SIGNED"),c(),m("ngIf",e.status==="DRAFT")}}function Yke(n,t){n&1&&(o(0,"tr")(1,"td",32),l(2,"No letters found"),a()())}function Jke(n,t){if(n&1&&(o(0,"option",18),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function Kke(n,t){if(n&1&&(o(0,"option",39),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En(" ",e.firstName," ",e.lastName," (",e.employeeCode,") ")}}function Qke(n,t){if(n&1){let e=F();on(0),o(1,"div",38)(2,"label"),l(3,"Warning Level"),a(),o(4,"select",6),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.warningLevel,r)||(s.formData.warningLevel=r),f(r)}),o(5,"option",44),l(6,"First Warning"),a(),o(7,"option",45),l(8,"Second Warning"),a(),o(9,"option",46),l(10,"Final Warning"),a()()(),o(11,"div",38)(12,"label"),l(13,"Reason *"),a(),o(14,"textarea",47),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.reason,r)||(s.formData.reason=r),f(r)}),a()(),an()}if(n&2){let e=p(2);c(4),M("ngModel",e.formData.warningLevel),c(10),M("ngModel",e.formData.reason)}}function Xke(n,t){if(n&1){let e=F();on(0),o(1,"div",38)(2,"label"),l(3,"Last Working Date *"),a(),o(4,"input",48),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.lastWorkingDate,r)||(s.formData.lastWorkingDate=r),f(r)}),a()(),an()}if(n&2){let e=p(2);c(4),M("ngModel",e.formData.lastWorkingDate)}}function Zke(n,t){if(n&1){let e=F();on(0),o(1,"div",38)(2,"label"),l(3,"New Annual Salary"),a(),o(4,"input",49),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.newSalary,r)||(s.formData.newSalary=r),f(r)}),a()(),o(5,"div",38)(6,"label"),l(7,"Increment (%)"),a(),o(8,"input",50),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.increment,r)||(s.formData.increment=r),f(r)}),a()(),o(9,"div",38)(10,"label"),l(11,"Effective Date *"),a(),o(12,"input",48),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.effectiveDate,r)||(s.formData.effectiveDate=r),f(r)}),a()(),an()}if(n&2){let e=p(2);c(4),M("ngModel",e.formData.newSalary),c(4),M("ngModel",e.formData.increment),c(4),M("ngModel",e.formData.effectiveDate)}}function eIe(n,t){if(n&1){let e=F();o(0,"div",33)(1,"div",34),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",35)(3,"h3"),l(4,"Generate HR Letter"),a(),o(5,"button",36),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(6,"\xD7"),a()(),o(7,"div",37)(8,"div",38)(9,"label"),l(10,"Letter Type *"),a(),o(11,"select",6),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.letterType,r)||(s.formData.letterType=r),f(r)}),b(12,Jke,2,2,"option",8),a()(),o(13,"div",38)(14,"label"),l(15,"Employee *"),a(),o(16,"select",6),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.employeeId,r)||(s.formData.employeeId=r),f(r)}),o(17,"option",39),l(18,"Select Employee"),a(),b(19,Kke,2,4,"option",40),a()(),b(20,Qke,15,2,"ng-container",16)(21,Xke,5,1,"ng-container",16)(22,Zke,13,3,"ng-container",16),a(),o(23,"div",41)(24,"button",42),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(25,"Cancel"),a(),o(26,"button",43),x("click",function(){g(e);let r=p();return f(r.generateLetter())}),l(27),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.formData.letterType),c(),m("ngForOf",e.letterTypes),c(4),M("ngModel",e.formData.employeeId),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(),m("ngIf",e.formData.letterType==="WARNING"),c(),m("ngIf",e.formData.letterType==="EXPERIENCE"),c(),m("ngIf",e.formData.letterType==="SALARY_REVISION"),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Generating...":"Generate Letter")}}function tIe(n,t){n&1&&(o(0,"p")(1,"strong"),l(2,"Signed:"),a(),l(3," Yes"),a())}function nIe(n,t){n&1&&(o(0,"p")(1,"strong"),l(2,"Sent to Employee:"),a(),l(3," Yes"),a())}function iIe(n,t){if(n&1){let e=F();o(0,"button",2),x("click",function(){g(e);let r=p(2);return r.signLetter(r.selectedLetter),f(r.closePreview())}),l(1,"Sign Letter"),a()}}function rIe(n,t){if(n&1){let e=F();o(0,"button",57),x("click",function(){g(e);let r=p(2);return r.issueLetter(r.selectedLetter),f(r.closePreview())}),l(1,"Issue to Employee"),a()}}function oIe(n,t){if(n&1){let e=F();o(0,"div",33)(1,"div",51),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",35)(3,"h3"),l(4),a(),o(5,"button",36),x("click",function(){g(e);let r=p();return f(r.closePreview())}),l(6,"\xD7"),a()(),o(7,"div",37)(8,"div",52)(9,"p")(10,"strong"),l(11,"Letter Number:"),a(),l(12),a(),o(13,"p")(14,"strong"),l(15,"Type:"),a(),l(16),a(),o(17,"p")(18,"strong"),l(19,"Employee:"),a(),l(20),a(),o(21,"p")(22,"strong"),l(23,"Status:"),a(),o(24,"span",19),l(25),a()(),b(26,tIe,4,0,"p",16)(27,nIe,4,0,"p",16),a(),y(28,"hr"),o(29,"div",53)(30,"pre"),l(31),a()()(),o(32,"div",41)(33,"button",54),x("click",function(){g(e);let r=p();return f(r.closePreview())}),l(34,"Close"),a(),b(35,iIe,2,0,"button",55)(36,rIe,2,0,"button",56),a()()()}if(n&2){let e=p();c(4),_(e.selectedLetter.subject),c(8),D(" ",e.selectedLetter.letterNumber),c(4),D(" ",e.getLetterTypeLabel(e.selectedLetter.letterType)),c(4),D(" ",e.getEmployeeName(e.selectedLetter.employee)),c(4),m("ngClass",e.getStatusClass(e.selectedLetter.status)),c(),_(e.selectedLetter.status),c(),m("ngIf",e.selectedLetter.signed),c(),m("ngIf",e.selectedLetter.sentToEmployee),c(4),_(e.selectedLetter.content),c(4),m("ngIf",e.selectedLetter.status==="DRAFT"||e.selectedLetter.status==="GENERATED"),c(),m("ngIf",e.selectedLetter.status==="SIGNED")}}var Z2=class n{constructor(t,e,i,r){this.letterService=t;this.employeeService=e;this.toastService=i;this.cdr=r}letters=[];employees=[];loading=!1;showForm=!1;showPreview=!1;selectedLetter=null;filterType="";filterStatus="";saving=!1;letterTypes=[{value:"OFFER",label:"Offer Letter"},{value:"APPOINTMENT",label:"Appointment Letter"},{value:"EXPERIENCE",label:"Experience Certificate"},{value:"WARNING",label:"Warning Letter"},{value:"SALARY_REVISION",label:"Salary Revision Letter"}];formData={letterType:"OFFER",employeeId:null,reason:"",warningLevel:"First",lastWorkingDate:"",newSalary:"",increment:"",effectiveDate:""};ngOnInit(){this.loadLetters(),this.loadEmployees()}loadLetters(){this.loading=!0,this.letterService.getAllLetters().subscribe({next:t=>{this.letters=t,this.loading=!1},error:t=>{console.error(t),this.loading=!1}})}loadEmployees(){this.employeeService.getAll().subscribe({next:t=>this.employees=t,error:t=>console.error(t)})}get filteredLetters(){return this.letters.filter(t=>!(this.filterType&&t.letterType!==this.filterType||this.filterStatus&&t.status!==this.filterStatus))}openForm(){this.formData={letterType:"OFFER",employeeId:null,reason:"",warningLevel:"First",lastWorkingDate:new Date().toISOString().split("T")[0],newSalary:"",increment:"",effectiveDate:new Date().toISOString().split("T")[0]},this.showForm=!0}closeForm(){this.showForm=!1}generateLetter(){if(this.saving)return;if(!this.formData.employeeId){this.toastService.error("Please select an employee");return}let t=this.formData.employeeId,e;switch(this.formData.letterType){case"OFFER":e=this.letterService.generateOfferLetter(t,{});break;case"APPOINTMENT":e=this.letterService.generateAppointmentLetter(t);break;case"EXPERIENCE":if(!this.formData.lastWorkingDate){this.toastService.error("Please enter the last working date");return}e=this.letterService.generateExperienceLetter(t,this.formData.lastWorkingDate);break;case"WARNING":if(!this.formData.reason||this.formData.reason.trim()===""){this.toastService.error("Please enter the reason for the warning");return}e=this.letterService.generateWarningLetter(t,this.formData.reason,this.formData.warningLevel);break;case"SALARY_REVISION":if(!this.formData.effectiveDate){this.toastService.error("Please enter the effective date");return}let i=this.formData.newSalary?parseFloat(this.formData.newSalary):null,r=this.formData.increment?parseFloat(this.formData.increment):null;if(this.formData.newSalary&&isNaN(i)){this.toastService.error("Please enter a valid salary amount");return}if(this.formData.increment&&isNaN(r)){this.toastService.error("Please enter a valid increment percentage");return}e=this.letterService.generateSalaryRevisionLetter(t,{newSalary:i,increment:r,effectiveDate:this.formData.effectiveDate});break;default:return}this.saving=!0,e.subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Letter generated successfully!"),this.closeForm(),this.loadLetters()},error:i=>{this.saving=!1,this.cdr.detectChanges(),console.error(i),this.toastService.error("Error generating letter: "+(i.error?.message||"Please try again"))}})}viewLetter(t){this.selectedLetter=t,this.showPreview=!0}closePreview(){this.showPreview=!1,this.selectedLetter=null}signLetter(t){let e=prompt("Enter your name:"),i=prompt("Enter your designation:");e&&i&&this.letterService.signLetter(t.id,e,i).subscribe({next:()=>this.loadLetters(),error:r=>console.error(r)})}issueLetter(t){confirm("Issue this letter to the employee?")&&this.letterService.issueLetter(t.id).subscribe({next:()=>this.loadLetters(),error:e=>console.error(e)})}deleteLetter(t){confirm("Are you sure you want to delete this letter?")&&this.letterService.deleteLetter(t.id).subscribe({next:()=>this.loadLetters(),error:e=>console.error(e)})}getLetterTypeLabel(t){let e=this.letterTypes.find(i=>i.value===t);return e?e.label:t}getStatusClass(t){return{DRAFT:"bg-secondary",GENERATED:"bg-info",SIGNED:"bg-primary",ISSUED:"bg-success"}[t]||"bg-secondary"}formatDate(t){return t?new Date(t).toLocaleDateString():""}getEmployeeName(t){return t?`${t.firstName||""} ${t.lastName||""}`.trim():""}static \u0275fac=function(e){return new(e||n)(V(X2),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-letters"]],decls:52,vars:7,consts:[[1,"letters-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-row"],[1,"filter-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","DRAFT"],["value","GENERATED"],["value","SIGNED"],["value","ISSUED"],[1,"letters-table"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"value"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-primary","title","Sign",3,"click",4,"ngIf"],["class","btn btn-sm btn-success","title","Issue",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Delete",3,"click",4,"ngIf"],["title","Sign",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-signature"],["title","Issue",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-paper-plane"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","7",1,"text-center"],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["value","First"],["value","Second"],["value","Final"],["rows","3","placeholder","Enter the reason for this warning",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter new salary",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter increment percentage",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-content","letter-preview",3,"click"],[1,"letter-meta"],[1,"letter-content"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"HR Letter Templates"),a(),o(4,"button",2),x("click",function(){return i.openForm()}),y(5,"i",3),l(6," Generate Letter "),a()(),o(7,"div",4)(8,"div",5)(9,"label"),l(10,"Letter Type:"),a(),o(11,"select",6),S("ngModelChange",function(s){return P(i.filterType,s)||(i.filterType=s),s}),o(12,"option",7),l(13,"All Types"),a(),b(14,zke,2,2,"option",8),a()(),o(15,"div",5)(16,"label"),l(17,"Status:"),a(),o(18,"select",6),S("ngModelChange",function(s){return P(i.filterStatus,s)||(i.filterStatus=s),s}),o(19,"option",7),l(20,"All Statuses"),a(),o(21,"option",9),l(22,"Draft"),a(),o(23,"option",10),l(24,"Generated"),a(),o(25,"option",11),l(26,"Signed"),a(),o(27,"option",12),l(28,"Issued"),a()()()(),o(29,"div",13)(30,"table",14)(31,"thead")(32,"tr")(33,"th"),l(34,"Letter #"),a(),o(35,"th"),l(36,"Type"),a(),o(37,"th"),l(38,"Employee"),a(),o(39,"th"),l(40,"Subject"),a(),o(41,"th"),l(42,"Issue Date"),a(),o(43,"th"),l(44,"Status"),a(),o(45,"th"),l(46,"Actions"),a()()(),o(47,"tbody"),b(48,$ke,21,10,"tr",15)(49,Yke,3,0,"tr",16),a()()(),b(50,eIe,28,11,"div",17)(51,oIe,37,11,"div",17),a()),e&2&&(c(11),M("ngModel",i.filterType),c(3),m("ngForOf",i.letterTypes),c(4),M("ngModel",i.filterStatus),c(30),m("ngForOf",i.filteredLetters),c(),m("ngIf",i.filteredLetters.length===0),c(),m("ngIf",i.showForm),c(),m("ngIf",i.showPreview&&i.selectedLetter))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Ue,Oe,Ee,Rt],styles:[".letters-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.filters-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#666;white-space:nowrap}.filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:180px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.letters-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.letters-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:0;width:100%;border-collapse:collapse}.letters-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .letters-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.letters-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333}.letters-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6c757d}.badge.bg-info[_ngcontent-%COMP%]{background:#17a2b8}.badge.bg-primary[_ngcontent-%COMP%]{background:#007bff}.badge.bg-success[_ngcontent-%COMP%]{background:#28a745}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.action-buttons[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:500;display:inline-flex;align-items:center;gap:6px}.btn.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.letter-preview[_ngcontent-%COMP%]{max-width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.letter-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#666}.letter-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.letter-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;font-family:Times New Roman,serif;font-size:14px;line-height:1.6;background:#f9f9f9;padding:20px;border-radius:4px;margin:0}.text-center[_ngcontent-%COMP%]{text-align:center;color:#666;padding:20px}"],changeDetection:0})};var eM=class n{constructor(t){this.http=t}baseUrl="/api/compensation";getSalaryBands(){return this.http.get(`${this.baseUrl}/salary-bands`)}getSalaryBand(t){return this.http.get(`${this.baseUrl}/salary-bands/${t}`)}createSalaryBand(t){return this.http.post(`${this.baseUrl}/salary-bands`,t)}updateSalaryBand(t,e){return this.http.put(`${this.baseUrl}/salary-bands/${t}`,e)}deleteSalaryBand(t){return this.http.delete(`${this.baseUrl}/salary-bands/${t}`)}getSalaryRevisions(){return this.http.get(`${this.baseUrl}/employee/salary/history/all`)}getSalaryRevisionsByEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}/salary/history`)}createSalaryRevision(t){return this.http.post(`${this.baseUrl}/employee/salary/revision`,t)}approveSalaryRevision(t,e){return this.http.post(`${this.baseUrl}/employee/salary/${t}/approve`,{approverId:e})}rejectSalaryRevision(t,e){return this.http.post(`${this.baseUrl}/employee/salary/${t}/reject`,{reason:e})}getBonusIncentives(){return this.http.get("/api/salary-heads?type=BONUS")}createBonusIncentive(t){return this.http.post("/api/salary-heads",Tt(me({},t),{headType:"BONUS"}))}updateBonusIncentive(t,e){return this.http.put(`/api/salary-heads/${t}`,e)}deleteBonusIncentive(t){return this.http.delete(`/api/salary-heads/${t}`)}getBenefitPlans(){return this.http.get(`${this.baseUrl}/benefit-plans`)}getBenefitPlan(t){return this.http.get(`${this.baseUrl}/benefit-plans/${t}`)}createBenefitPlan(t){return this.http.post(`${this.baseUrl}/benefit-plans`,t)}updateBenefitPlan(t,e){return this.http.put(`${this.baseUrl}/benefit-plans/${t}`,e)}deleteBenefitPlan(t){return this.http.delete(`${this.baseUrl}/benefit-plans/${t}`)}getAllowances(){return this.http.get("/api/salary-heads?type=ALLOWANCE")}createAllowance(t){return this.http.post("/api/salary-heads",Tt(me({},t),{headType:"ALLOWANCE"}))}updateAllowance(t,e){return this.http.put(`/api/salary-heads/${t}`,e)}deleteAllowance(t){return this.http.delete(`/api/salary-heads/${t}`)}getEmployeeBenefits(){return this.http.get(`${this.baseUrl}/employee-benefits/all`)}getEmployeeBenefitsByEmployee(t){return this.http.get(`${this.baseUrl}/employee/${t}/benefits`)}enrollEmployeeInBenefit(t){return this.http.post(`${this.baseUrl}/employee/benefits/enroll`,t)}updateEmployeeBenefit(t,e){return this.http.put(`${this.baseUrl}/employee/benefits/${t}`,e)}cancelEmployeeBenefit(t){return this.http.delete(`${this.baseUrl}/employee/benefits/${t}`)}getGrades(){return this.http.get("/api/organization/grades")}getJobRoles(){return this.http.get("/api/organization/job-roles")}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function sIe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",12),l(17),a()(),o(18,"td")(19,"button",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(20,"Edit"),a(),o(21,"button",14),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.delete(r.id))}),l(22,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.bandCode),c(2),_(e.name),c(2),_((e.grade==null?null:e.grade.name)||"-"),c(2),_(i.formatCurrency(e.minSalary)),c(2),_(i.formatCurrency(e.midSalary)),c(2),_(i.formatCurrency(e.maxSalary)),c(2),_(i.formatDate(e.effectiveFrom)),c(2),m("ngClass",e.isActive?"bg-success":"bg-secondary"),c(),_(e.isActive?"Active":"Inactive")}}function lIe(n,t){n&1&&(o(0,"tr")(1,"td",15),l(2,"No salary bands found"),a()())}function cIe(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Code"),a(),o(6,"th"),l(7,"Name"),a(),o(8,"th"),l(9,"Grade"),a(),o(10,"th"),l(11,"Min Salary"),a(),o(12,"th"),l(13,"Mid Salary"),a(),o(14,"th"),l(15,"Max Salary"),a(),o(16,"th"),l(17,"Effective From"),a(),o(18,"th"),l(19,"Status"),a(),o(20,"th"),l(21,"Actions"),a()()(),o(22,"tbody"),b(23,sIe,23,9,"tr",10)(24,lIe,3,0,"tr",11),a()()()),n&2){let e=p();c(23),m("ngForOf",e.salaryBands),c(),m("ngIf",e.salaryBands.length===0)}}function dIe(n,t){if(n&1){let e=F();o(0,"button",18),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.approveRevision(r.id))}),l(1,"Approve"),a()}}function pIe(n,t){if(n&1){let e=F();o(0,"button",14),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.rejectRevision(r.id))}),l(1,"Reject"),a()}}function mIe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"span",12),l(15),a()(),o(16,"td"),b(17,dIe,2,0,"button",16)(18,pIe,2,0,"button",17),a()()),n&2){let e=t.$implicit,i=p(2);c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(e.revisionType),c(2),_(i.formatCurrency(e.currentSalary)),c(2),_(i.formatCurrency(e.revisedSalary)),c(2),D("",e.incrementPercentage,"%"),c(2),_(i.formatDate(e.effectiveDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status),c(2),m("ngIf",e.status==="PENDING"),c(),m("ngIf",e.status==="PENDING")}}function uIe(n,t){n&1&&(o(0,"tr")(1,"td",19),l(2,"No salary revisions found"),a()())}function gIe(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Employee"),a(),o(6,"th"),l(7,"Type"),a(),o(8,"th"),l(9,"Current Salary"),a(),o(10,"th"),l(11,"Revised Salary"),a(),o(12,"th"),l(13,"Increment %"),a(),o(14,"th"),l(15,"Effective Date"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,mIe,19,11,"tr",10)(22,uIe,3,0,"tr",11),a()()()),n&2){let e=p();c(21),m("ngForOf",e.salaryRevisions),c(),m("ngIf",e.salaryRevisions.length===0)}}function fIe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",12),l(13),a()(),o(14,"td")(15,"button",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(16,"Edit"),a(),o(17,"button",14),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.delete(r.id))}),l(18,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.name),c(2),_(e.bonusType),c(2),_(e.calculationBasis),c(2),_(e.calculationBasis==="FIXED"?i.formatCurrency(e.amount):e.percentage+"%"),c(2),_(e.frequency),c(2),m("ngClass",e.isActive?"bg-success":"bg-secondary"),c(),_(e.isActive?"Active":"Inactive")}}function hIe(n,t){n&1&&(o(0,"tr")(1,"td",20),l(2,"No bonus/incentives found"),a()())}function _Ie(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),a(),o(6,"th"),l(7,"Type"),a(),o(8,"th"),l(9,"Calculation"),a(),o(10,"th"),l(11,"Amount/Percentage"),a(),o(12,"th"),l(13,"Frequency"),a(),o(14,"th"),l(15,"Status"),a(),o(16,"th"),l(17,"Actions"),a()()(),o(18,"tbody"),b(19,fIe,19,7,"tr",10)(20,hIe,3,0,"tr",11),a()()()),n&2){let e=p();c(19),m("ngForOf",e.bonusIncentives),c(),m("ngIf",e.bonusIncentives.length===0)}}function vIe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td"),l(14),a(),o(15,"td")(16,"span",12),l(17),a()(),o(18,"td")(19,"button",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(20,"Edit"),a(),o(21,"button",14),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.delete(r.id))}),l(22,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.planCode),c(2),_(e.name),c(2),_(e.benefitType),c(2),_(e.provider||"-"),c(2),_(i.formatCurrency(e.employerContribution)),c(2),_(i.formatCurrency(e.employeeContribution)),c(2),_(i.formatCurrency(e.coverageAmount)),c(2),m("ngClass",e.isActive?"bg-success":"bg-secondary"),c(),_(e.isActive?"Active":"Inactive")}}function xIe(n,t){n&1&&(o(0,"tr")(1,"td",15),l(2,"No benefit plans found"),a()())}function yIe(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Code"),a(),o(6,"th"),l(7,"Name"),a(),o(8,"th"),l(9,"Type"),a(),o(10,"th"),l(11,"Provider"),a(),o(12,"th"),l(13,"Employer Contrib."),a(),o(14,"th"),l(15,"Employee Contrib."),a(),o(16,"th"),l(17,"Coverage"),a(),o(18,"th"),l(19,"Status"),a(),o(20,"th"),l(21,"Actions"),a()()(),o(22,"tbody"),b(23,vIe,23,9,"tr",10)(24,xIe,3,0,"tr",11),a()()()),n&2){let e=p();c(23),m("ngForOf",e.benefitPlans),c(),m("ngIf",e.benefitPlans.length===0)}}function CIe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td"),l(12),a(),o(13,"td")(14,"span",12),l(15),a()(),o(16,"td")(17,"button",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(18,"Edit"),a(),o(19,"button",14),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.delete(r.id))}),l(20,"Delete"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),_(e.name),c(2),_(e.allowanceType),c(2),_(e.calculationBasis),c(2),_(e.calculationBasis==="FIXED"?i.formatCurrency(e.amount):e.percentage+"%"),c(2),_(e.isTaxable?"Yes":"No"),c(2),_(i.formatDate(e.effectiveFrom)),c(2),m("ngClass",e.isActive?"bg-success":"bg-secondary"),c(),_(e.isActive?"Active":"Inactive")}}function bIe(n,t){n&1&&(o(0,"tr")(1,"td",19),l(2,"No allowances found"),a()())}function MIe(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),a(),o(6,"th"),l(7,"Type"),a(),o(8,"th"),l(9,"Calculation"),a(),o(10,"th"),l(11,"Amount/Percentage"),a(),o(12,"th"),l(13,"Taxable"),a(),o(14,"th"),l(15,"Effective From"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,CIe,21,8,"tr",10)(22,bIe,3,0,"tr",11),a()()()),n&2){let e=p();c(21),m("ngForOf",e.allowances),c(),m("ngIf",e.allowances.length===0)}}function SIe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",12),l(11),a()(),o(12,"td")(13,"button",13),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openForm(r))}),l(14,"Edit"),a(),o(15,"button",14),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.delete(r.id))}),l(16,"Cancel"),a()()()}if(n&2){let e=t.$implicit,i=p(2);c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(e.benefitPlan==null?null:e.benefitPlan.name),c(2),_(e.coverageType),c(2),_(i.formatDate(e.enrollmentDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status)}}function PIe(n,t){n&1&&(o(0,"tr")(1,"td",21),l(2,"No enrollments found"),a()())}function wIe(n,t){if(n&1&&(o(0,"div",8)(1,"table",9)(2,"thead")(3,"tr")(4,"th"),l(5,"Employee"),a(),o(6,"th"),l(7,"Benefit Plan"),a(),o(8,"th"),l(9,"Coverage Type"),a(),o(10,"th"),l(11,"Enrollment Date"),a(),o(12,"th"),l(13,"Status"),a(),o(14,"th"),l(15,"Actions"),a()()(),o(16,"tbody"),b(17,SIe,17,7,"tr",10)(18,PIe,3,0,"tr",11),a()()()),n&2){let e=p();c(17),m("ngForOf",e.employeeBenefits),c(),m("ngIf",e.employeeBenefits.length===0)}}function EIe(n,t){if(n&1&&(o(0,"option",34),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function OIe(n,t){if(n&1&&(o(0,"option",34),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function TIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Band Code "),o(5,"span",30),l(6,"*"),a()(),o(7,"input",31),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.bandCode,r)||(s.formData.bandCode=r),f(r)}),a()(),o(8,"div",29)(9,"label"),l(10,"Name "),o(11,"span",30),l(12,"*"),a()(),o(13,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()()(),o(14,"div",28)(15,"div",29)(16,"label"),l(17,"Grade"),a(),o(18,"select",33),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.gradeId,r)||(s.formData.gradeId=r),f(r)}),o(19,"option",34),l(20,"Select Grade"),a(),b(21,EIe,2,2,"option",35),a()(),o(22,"div",29)(23,"label"),l(24,"Job Role"),a(),o(25,"select",36),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.jobRoleId,r)||(s.formData.jobRoleId=r),f(r)}),o(26,"option",34),l(27,"Select Job Role"),a(),b(28,OIe,2,2,"option",35),a()()(),o(29,"div",28)(30,"div",29)(31,"label"),l(32,"Min Salary"),a(),o(33,"input",37),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.minSalary,r)||(s.formData.minSalary=r),f(r)}),a()(),o(34,"div",29)(35,"label"),l(36,"Mid Salary"),a(),o(37,"input",38),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.midSalary,r)||(s.formData.midSalary=r),f(r)}),a()(),o(38,"div",29)(39,"label"),l(40,"Max Salary"),a(),o(41,"input",39),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.maxSalary,r)||(s.formData.maxSalary=r),f(r)}),a()()(),o(42,"div",28)(43,"div",29)(44,"label"),l(45,"Currency"),a(),o(46,"select",40),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.currency,r)||(s.formData.currency=r),f(r)}),o(47,"option",41),l(48,"USD"),a(),o(49,"option",42),l(50,"EUR"),a(),o(51,"option",43),l(52,"GBP"),a(),o(53,"option",44),l(54,"INR"),a()()(),o(55,"div",29)(56,"label"),l(57,"Pay Frequency"),a(),o(58,"select",45),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.payFrequency,r)||(s.formData.payFrequency=r),f(r)}),o(59,"option",46),l(60,"Monthly"),a(),o(61,"option",47),l(62,"Bi-Weekly"),a(),o(63,"option",48),l(64,"Weekly"),a()()()(),o(65,"h4"),l(66,"Allowance Percentages (% of Basic)"),a(),o(67,"div",28)(68,"div",29)(69,"label"),l(70,"HRA %"),a(),o(71,"input",49),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.hraPercentage,r)||(s.formData.hraPercentage=r),f(r)}),a()(),o(72,"div",29)(73,"label"),l(74,"DA %"),a(),o(75,"input",50),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.daPercentage,r)||(s.formData.daPercentage=r),f(r)}),a()(),o(76,"div",29)(77,"label"),l(78,"TA %"),a(),o(79,"input",51),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.taPercentage,r)||(s.formData.taPercentage=r),f(r)}),a()()(),o(80,"div",28)(81,"div",29)(82,"label"),l(83,"Medical Allowance %"),a(),o(84,"input",52),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.medicalAllowancePercentage,r)||(s.formData.medicalAllowancePercentage=r),f(r)}),a()(),o(85,"div",29)(86,"label"),l(87,"Special Allowance %"),a(),o(88,"input",53),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.specialAllowancePercentage,r)||(s.formData.specialAllowancePercentage=r),f(r)}),a()()(),o(89,"div",28)(90,"div",29)(91,"label"),l(92,"Effective From"),a(),o(93,"input",54),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.effectiveFrom,r)||(s.formData.effectiveFrom=r),f(r)}),a()(),o(94,"div",29)(95,"label"),l(96,"Active"),a(),o(97,"select",55),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),o(98,"option",34),l(99,"Yes"),a(),o(100,"option",34),l(101,"No"),a()()()(),o(102,"div",56)(103,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(104,"Cancel"),a(),o(105,"button",58),l(106),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.bandCode),c(6),M("ngModel",e.formData.name),c(5),M("ngModel",e.formData.gradeId),c(),m("ngValue",null),c(2),m("ngForOf",e.grades),c(4),M("ngModel",e.formData.jobRoleId),c(),m("ngValue",null),c(2),m("ngForOf",e.jobRoles),c(5),M("ngModel",e.formData.minSalary),c(4),M("ngModel",e.formData.midSalary),c(4),M("ngModel",e.formData.maxSalary),c(5),M("ngModel",e.formData.currency),c(12),M("ngModel",e.formData.payFrequency),c(13),M("ngModel",e.formData.hraPercentage),c(4),M("ngModel",e.formData.daPercentage),c(4),M("ngModel",e.formData.taPercentage),c(5),M("ngModel",e.formData.medicalAllowancePercentage),c(4),M("ngModel",e.formData.specialAllowancePercentage),c(5),M("ngModel",e.formData.effectiveFrom),c(4),M("ngModel",e.formData.isActive),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function kIe(n,t){if(n&1&&(o(0,"option",34),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function IIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function DIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Employee "),o(5,"span",30),l(6,"*"),a()(),o(7,"select",59),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.employeeId,r)||(s.formData.employeeId=r),f(r)}),x("change",function(){g(e);let r=p(2);return f(r.onEmployeeChange())}),o(8,"option",34),l(9,"Select Employee"),a(),b(10,kIe,2,4,"option",35),a()(),o(11,"div",29)(12,"label"),l(13,"Revision Type"),a(),o(14,"select",60),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.revisionType,r)||(s.formData.revisionType=r),f(r)}),b(15,IIe,2,2,"option",61),a()()(),o(16,"div",28)(17,"div",29)(18,"label"),l(19,"Current Salary"),a(),o(20,"input",62),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.currentSalary,r)||(s.formData.currentSalary=r),f(r)}),a()(),o(21,"div",29)(22,"label"),l(23,"Increment %"),a(),o(24,"input",63),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.incrementPercentage,r)||(s.formData.incrementPercentage=r),f(r)}),x("input",function(){g(e);let r=p(2);return f(r.calculateIncrement())}),a()(),o(25,"div",29)(26,"label"),l(27,"Revised Salary"),a(),o(28,"input",64),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.revisedSalary,r)||(s.formData.revisedSalary=r),f(r)}),a()()(),o(29,"div",29)(30,"label"),l(31,"Effective Date"),a(),o(32,"input",65),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.effectiveDate,r)||(s.formData.effectiveDate=r),f(r)}),a()(),o(33,"div",29)(34,"label"),l(35,"Reason"),a(),o(36,"textarea",66),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.reason,r)||(s.formData.reason=r),f(r)}),a()(),o(37,"div",56)(38,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(39,"Cancel"),a(),o(40,"button",58),l(41),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.employeeId),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(4),M("ngModel",e.formData.revisionType),c(),m("ngForOf",e.revisionTypes),c(5),M("ngModel",e.formData.currentSalary),c(4),M("ngModel",e.formData.incrementPercentage),c(4),M("ngModel",e.formData.revisedSalary),c(4),M("ngModel",e.formData.effectiveDate),c(4),M("ngModel",e.formData.reason),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Submitting...":"Submit for Approval")}}function AIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function RIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function FIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function NIe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"label"),l(2,"Amount"),a(),o(3,"input",73),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.formData.amount,r)||(s.formData.amount=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.formData.amount)}}function LIe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"label"),l(2,"Percentage"),a(),o(3,"input",74),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.formData.percentage,r)||(s.formData.percentage=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.formData.percentage)}}function VIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Name "),o(5,"span",30),l(6,"*"),a()(),o(7,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()(),o(8,"div",29)(9,"label"),l(10,"Bonus Type"),a(),o(11,"select",68),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.bonusType,r)||(s.formData.bonusType=r),f(r)}),b(12,AIe,2,2,"option",61),a()()(),o(13,"div",28)(14,"div",29)(15,"label"),l(16,"Calculation Basis"),a(),o(17,"select",69),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.calculationBasis,r)||(s.formData.calculationBasis=r),f(r)}),b(18,RIe,2,2,"option",61),a()(),o(19,"div",29)(20,"label"),l(21,"Frequency"),a(),o(22,"select",70),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.frequency,r)||(s.formData.frequency=r),f(r)}),b(23,FIe,2,2,"option",61),a()()(),o(24,"div",28),b(25,NIe,4,1,"div",71)(26,LIe,4,1,"div",71),o(27,"div",29)(28,"label"),l(29,"Active"),a(),o(30,"select",55),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),o(31,"option",34),l(32,"Yes"),a(),o(33,"option",34),l(34,"No"),a()()()(),o(35,"div",29)(36,"label"),l(37,"Eligibility Rules"),a(),o(38,"textarea",72),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.eligibilityRules,r)||(s.formData.eligibilityRules=r),f(r)}),a()(),o(39,"div",56)(40,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(41,"Cancel"),a(),o(42,"button",58),l(43),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.name),c(4),M("ngModel",e.formData.bonusType),c(),m("ngForOf",e.bonusTypes),c(5),M("ngModel",e.formData.calculationBasis),c(),m("ngForOf",e.calculationBasis),c(4),M("ngModel",e.formData.frequency),c(),m("ngForOf",e.frequencies),c(2),m("ngIf",e.formData.calculationBasis==="FIXED"),c(),m("ngIf",e.formData.calculationBasis!=="FIXED"),c(4),M("ngModel",e.formData.isActive),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.formData.eligibilityRules),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function BIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function UIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Plan Code "),o(5,"span",30),l(6,"*"),a()(),o(7,"input",75),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.planCode,r)||(s.formData.planCode=r),f(r)}),a()(),o(8,"div",29)(9,"label"),l(10,"Name "),o(11,"span",30),l(12,"*"),a()(),o(13,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()()(),o(14,"div",28)(15,"div",29)(16,"label"),l(17,"Benefit Type"),a(),o(18,"select",76),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.benefitType,r)||(s.formData.benefitType=r),f(r)}),b(19,BIe,2,2,"option",61),a()(),o(20,"div",29)(21,"label"),l(22,"Provider"),a(),o(23,"input",77),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.provider,r)||(s.formData.provider=r),f(r)}),a()()(),o(24,"div",28)(25,"div",29)(26,"label"),l(27,"Employer Contribution"),a(),o(28,"input",78),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.employerContribution,r)||(s.formData.employerContribution=r),f(r)}),a()(),o(29,"div",29)(30,"label"),l(31,"Employee Contribution"),a(),o(32,"input",79),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.employeeContribution,r)||(s.formData.employeeContribution=r),f(r)}),a()(),o(33,"div",29)(34,"label"),l(35,"Coverage Amount"),a(),o(36,"input",80),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.coverageAmount,r)||(s.formData.coverageAmount=r),f(r)}),a()()(),o(37,"div",28)(38,"div",29)(39,"label"),l(40,"Waiting Period (days)"),a(),o(41,"input",81),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.waitingPeriodDays,r)||(s.formData.waitingPeriodDays=r),f(r)}),a()(),o(42,"div",29)(43,"label"),l(44,"Effective From"),a(),o(45,"input",54),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.effectiveFrom,r)||(s.formData.effectiveFrom=r),f(r)}),a()()(),o(46,"div",28)(47,"div",29)(48,"label"),l(49,"Mandatory"),a(),o(50,"select",82),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isMandatory,r)||(s.formData.isMandatory=r),f(r)}),o(51,"option",34),l(52,"Yes"),a(),o(53,"option",34),l(54,"No"),a()()(),o(55,"div",29)(56,"label"),l(57,"Active"),a(),o(58,"select",55),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),o(59,"option",34),l(60,"Yes"),a(),o(61,"option",34),l(62,"No"),a()()()(),o(63,"div",29)(64,"label"),l(65,"Description"),a(),o(66,"textarea",83),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.description,r)||(s.formData.description=r),f(r)}),a()(),o(67,"div",56)(68,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(69,"Cancel"),a(),o(70,"button",58),l(71),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.planCode),c(6),M("ngModel",e.formData.name),c(5),M("ngModel",e.formData.benefitType),c(),m("ngForOf",e.benefitTypes),c(4),M("ngModel",e.formData.provider),c(5),M("ngModel",e.formData.employerContribution),c(4),M("ngModel",e.formData.employeeContribution),c(4),M("ngModel",e.formData.coverageAmount),c(5),M("ngModel",e.formData.waitingPeriodDays),c(4),M("ngModel",e.formData.effectiveFrom),c(5),M("ngModel",e.formData.isMandatory),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.formData.isActive),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.formData.description),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function jIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function WIe(n,t){if(n&1&&(o(0,"option",67),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function zIe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"label"),l(2,"Amount"),a(),o(3,"input",73),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.formData.amount,r)||(s.formData.amount=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.formData.amount)}}function qIe(n,t){if(n&1){let e=F();o(0,"div",29)(1,"label"),l(2,"Percentage"),a(),o(3,"input",74),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.formData.percentage,r)||(s.formData.percentage=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.formData.percentage)}}function HIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Name "),o(5,"span",30),l(6,"*"),a()(),o(7,"input",32),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.name,r)||(s.formData.name=r),f(r)}),a()(),o(8,"div",29)(9,"label"),l(10,"Allowance Type"),a(),o(11,"select",84),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.allowanceType,r)||(s.formData.allowanceType=r),f(r)}),b(12,jIe,2,2,"option",61),a()()(),o(13,"div",28)(14,"div",29)(15,"label"),l(16,"Calculation Basis"),a(),o(17,"select",69),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.calculationBasis,r)||(s.formData.calculationBasis=r),f(r)}),b(18,WIe,2,2,"option",61),a()(),b(19,zIe,4,1,"div",71)(20,qIe,4,1,"div",71),a(),o(21,"div",28)(22,"div",29)(23,"label"),l(24,"Taxable"),a(),o(25,"select",85),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isTaxable,r)||(s.formData.isTaxable=r),f(r)}),o(26,"option",34),l(27,"Yes"),a(),o(28,"option",34),l(29,"No"),a()()(),o(30,"div",29)(31,"label"),l(32,"Effective From"),a(),o(33,"input",54),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.effectiveFrom,r)||(s.formData.effectiveFrom=r),f(r)}),a()(),o(34,"div",29)(35,"label"),l(36,"Active"),a(),o(37,"select",55),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.isActive,r)||(s.formData.isActive=r),f(r)}),o(38,"option",34),l(39,"Yes"),a(),o(40,"option",34),l(41,"No"),a()()()(),o(42,"div",56)(43,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(44,"Cancel"),a(),o(45,"button",58),l(46),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.name),c(4),M("ngModel",e.formData.allowanceType),c(),m("ngForOf",e.allowanceTypes),c(5),M("ngModel",e.formData.calculationBasis),c(),m("ngForOf",e.calculationBasis),c(),m("ngIf",e.formData.calculationBasis==="FIXED"),c(),m("ngIf",e.formData.calculationBasis!=="FIXED"),c(5),M("ngModel",e.formData.isTaxable),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),M("ngModel",e.formData.effectiveFrom),c(4),M("ngModel",e.formData.isActive),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(3),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":"Save")}}function GIe(n,t){if(n&1&&(o(0,"option",34),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function $Ie(n,t){if(n&1&&(o(0,"option",34),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.name," (",e.benefitType,")")}}function YIe(n,t){if(n&1){let e=F();o(0,"form",27),x("ngSubmit",function(){g(e);let r=p(2);return f(r.save())}),o(1,"div",28)(2,"div",29)(3,"label"),l(4,"Employee "),o(5,"span",30),l(6,"*"),a()(),o(7,"select",86),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.employeeId,r)||(s.formData.employeeId=r),f(r)}),o(8,"option",34),l(9,"Select Employee"),a(),b(10,GIe,2,4,"option",35),a()(),o(11,"div",29)(12,"label"),l(13,"Benefit Plan "),o(14,"span",30),l(15,"*"),a()(),o(16,"select",87),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.benefitPlanId,r)||(s.formData.benefitPlanId=r),f(r)}),o(17,"option",34),l(18,"Select Benefit Plan"),a(),b(19,$Ie,2,3,"option",35),a()()(),o(20,"div",28)(21,"div",29)(22,"label"),l(23,"Coverage Type"),a(),o(24,"select",88),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.coverageType,r)||(s.formData.coverageType=r),f(r)}),o(25,"option",89),l(26,"Employee Only"),a(),o(27,"option",90),l(28,"Employee + Spouse"),a(),o(29,"option",91),l(30,"Employee + Children"),a(),o(31,"option",92),l(32,"Family"),a()()(),o(33,"div",29)(34,"label"),l(35,"Enrollment Date"),a(),o(36,"input",93),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.formData.enrollmentDate,r)||(s.formData.enrollmentDate=r),f(r)}),a()()(),o(37,"div",56)(38,"button",57),x("click",function(){g(e);let r=p(2);return f(r.closeForm())}),l(39,"Cancel"),a(),o(40,"button",58),l(41),a()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.formData.employeeId),c(),m("ngValue",null),c(2),m("ngForOf",e.employees),c(6),M("ngModel",e.formData.benefitPlanId),c(),m("ngValue",null),c(2),m("ngForOf",e.benefitPlans),c(5),M("ngModel",e.formData.coverageType),c(12),M("ngModel",e.formData.enrollmentDate),c(2),m("disabled",e.saving),c(2),m("disabled",e.saving),c(),_(e.saving?"Saving...":e.editMode?"Update":"Enroll")}}function JIe(n,t){if(n&1){let e=F();o(0,"div",22)(1,"div",23),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",24)(3,"h3"),l(4),a(),o(5,"button",25),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(6,"\xD7"),a()(),b(7,TIe,107,25,"form",26)(8,DIe,42,13,"form",26)(9,VIe,44,16,"form",26)(10,UIe,72,20,"form",26)(11,HIe,47,17,"form",26)(12,YIe,42,11,"form",26),a()()}if(n&2){let e=p();c(4),Ge("",e.editMode?"Edit":"Add"," ",e.activeTab==="salary-bands"?"Salary Band":e.activeTab==="salary-revision"?"Salary Revision":e.activeTab==="bonus-incentive"?"Bonus/Incentive":e.activeTab==="benefit-plans"?"Benefit Plan":e.activeTab==="allowances"?"Allowance":"Enrollment"),c(3),m("ngIf",e.activeTab==="salary-bands"),c(),m("ngIf",e.activeTab==="salary-revision"),c(),m("ngIf",e.activeTab==="bonus-incentive"),c(),m("ngIf",e.activeTab==="benefit-plans"),c(),m("ngIf",e.activeTab==="allowances"),c(),m("ngIf",e.activeTab==="enrollment")}}var hc=class n{constructor(t,e,i,r){this.compensationService=t;this.employeeService=e;this.toastService=i;this.cdr=r}activeTab="salary-bands";salaryBands=[];salaryRevisions=[];bonusIncentives=[];benefitPlans=[];allowances=[];employeeBenefits=[];employees=[];grades=[];jobRoles=[];loading=!1;showForm=!1;editMode=!1;formData={};selectedItem=null;saving=!1;benefitTypes=["HEALTH","DENTAL","VISION","LIFE_INSURANCE","DISABILITY","RETIREMENT","OTHER"];allowanceTypes=["HOUSING","TRANSPORT","MEAL","PHONE","INTERNET","EDUCATION","OTHER"];revisionTypes=["ANNUAL","PROMOTION","AD_HOC","MARKET_ADJUSTMENT"];bonusTypes=["PERFORMANCE","ANNUAL","SIGNING","REFERRAL","SPOT","PROJECT","OTHER"];calculationBasis=["FIXED","PERCENTAGE_BASIC","PERCENTAGE_CTC","PERFORMANCE_BASED"];frequencies=["MONTHLY","QUARTERLY","ANNUAL","ONE_TIME"];ngOnInit(){this.loadReferenceData(),this.loadData()}loadReferenceData(){this.employeeService.getActive().subscribe({next:t=>this.employees=t,error:t=>console.error("Error loading employees:",t)}),this.compensationService.getGrades().subscribe({next:t=>this.grades=t,error:()=>this.grades=[]}),this.compensationService.getJobRoles().subscribe({next:t=>this.jobRoles=t,error:()=>this.jobRoles=[]})}setTab(t){this.activeTab=t,this.showForm=!1,this.loadData()}loadData(){switch(this.loading=!0,this.activeTab){case"salary-bands":this.compensationService.getSalaryBands().subscribe({next:t=>{this.salaryBands=t,this.loading=!1},error:()=>{this.salaryBands=[],this.loading=!1}});break;case"salary-revision":this.compensationService.getSalaryRevisions().subscribe({next:t=>{this.salaryRevisions=t,this.loading=!1},error:()=>{this.salaryRevisions=[],this.loading=!1}});break;case"bonus-incentive":this.compensationService.getBonusIncentives().subscribe({next:t=>{this.bonusIncentives=t,this.loading=!1},error:()=>{this.bonusIncentives=[],this.loading=!1}});break;case"benefit-plans":this.compensationService.getBenefitPlans().subscribe({next:t=>{this.benefitPlans=t,this.loading=!1},error:()=>{this.benefitPlans=[],this.loading=!1}});break;case"allowances":this.compensationService.getAllowances().subscribe({next:t=>{this.allowances=t,this.loading=!1},error:()=>{this.allowances=[],this.loading=!1}});break;case"enrollment":this.compensationService.getEmployeeBenefits().subscribe({next:t=>{this.employeeBenefits=t,this.loading=!1},error:()=>{this.employeeBenefits=[],this.loading=!1}}),this.compensationService.getBenefitPlans().subscribe({next:t=>this.benefitPlans=t,error:()=>this.benefitPlans=[]});break;default:this.loading=!1}}openForm(t){switch(this.editMode=!!t,this.selectedItem=t,this.activeTab){case"salary-bands":this.formData=t?me({},t):{bandCode:"",name:"",gradeId:null,jobRoleId:null,minSalary:0,midSalary:0,maxSalary:0,currency:"USD",payFrequency:"MONTHLY",hraPercentage:0,daPercentage:0,taPercentage:0,medicalAllowancePercentage:0,specialAllowancePercentage:0,effectiveFrom:new Date().toISOString().split("T")[0],isActive:!0};break;case"salary-revision":this.formData=t?me({},t):{employeeId:null,revisionType:"ANNUAL",currentSalary:0,revisedSalary:0,incrementPercentage:0,effectiveDate:new Date().toISOString().split("T")[0],reason:""};break;case"bonus-incentive":this.formData=t?me({},t):{name:"",bonusType:"PERFORMANCE",calculationBasis:"FIXED",amount:0,percentage:0,frequency:"ANNUAL",eligibilityRules:"",isActive:!0};break;case"benefit-plans":this.formData=t?me({},t):{planCode:"",name:"",description:"",benefitType:"HEALTH",category:"",provider:"",employerContribution:0,employeeContribution:0,contributionType:"FIXED",coverageAmount:0,waitingPeriodDays:0,effectiveFrom:new Date().toISOString().split("T")[0],isActive:!0,isMandatory:!1};break;case"allowances":this.formData=t?me({},t):{name:"",allowanceType:"HOUSING",calculationBasis:"FIXED",amount:0,percentage:0,isTaxable:!0,isActive:!0,effectiveFrom:new Date().toISOString().split("T")[0]};break;case"enrollment":this.formData=t?me({},t):{employeeId:null,benefitPlanId:null,enrollmentDate:new Date().toISOString().split("T")[0],coverageType:"EMPLOYEE_ONLY",status:"ACTIVE"};break}this.showForm=!0}closeForm(){this.showForm=!1,this.formData={},this.editMode=!1,this.selectedItem=null}calculateIncrement(){if(this.formData.currentSalary&&this.formData.incrementPercentage){let t=this.formData.currentSalary*(this.formData.incrementPercentage/100);this.formData.revisedSalary=this.formData.currentSalary+t}}onEmployeeChange(){let t=this.employees.find(e=>e.id===this.formData.employeeId);t&&(this.formData.currentSalary=t.salary||0)}save(){if(this.saving)return;this.saving=!0;let t=()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Saved successfully"),this.closeForm(),this.loadData()},e=i=>r=>{this.saving=!1,this.cdr.detectChanges(),console.error(r),this.toastService.error(i)};switch(this.activeTab){case"salary-bands":this.editMode&&this.selectedItem?this.compensationService.updateSalaryBand(this.selectedItem.id,this.formData).subscribe({next:t,error:e("Error updating salary band")}):this.compensationService.createSalaryBand(this.formData).subscribe({next:t,error:e("Error creating salary band")});break;case"salary-revision":this.compensationService.createSalaryRevision(this.formData).subscribe({next:t,error:e("Error creating salary revision")});break;case"bonus-incentive":this.editMode&&this.selectedItem?this.compensationService.updateBonusIncentive(this.selectedItem.id,this.formData).subscribe({next:t,error:e("Error updating bonus/incentive")}):this.compensationService.createBonusIncentive(this.formData).subscribe({next:t,error:e("Error creating bonus/incentive")});break;case"benefit-plans":this.editMode&&this.selectedItem?this.compensationService.updateBenefitPlan(this.selectedItem.id,this.formData).subscribe({next:t,error:e("Error updating benefit plan")}):this.compensationService.createBenefitPlan(this.formData).subscribe({next:t,error:e("Error creating benefit plan")});break;case"allowances":this.editMode&&this.selectedItem?this.compensationService.updateAllowance(this.selectedItem.id,this.formData).subscribe({next:t,error:e("Error updating allowance")}):this.compensationService.createAllowance(this.formData).subscribe({next:t,error:e("Error creating allowance")});break;case"enrollment":this.editMode&&this.selectedItem?this.compensationService.updateEmployeeBenefit(this.selectedItem.id,this.formData).subscribe({next:t,error:e("Error updating enrollment")}):this.compensationService.enrollEmployeeInBenefit(this.formData).subscribe({next:t,error:e("Error enrolling employee")});break}}delete(t){if(confirm("Are you sure you want to delete this item?"))switch(this.activeTab){case"salary-bands":this.compensationService.deleteSalaryBand(t).subscribe({next:()=>{this.toastService.success("Salary band deleted"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error deleting salary band")}});break;case"bonus-incentive":this.compensationService.deleteBonusIncentive(t).subscribe({next:()=>{this.toastService.success("Bonus/incentive deleted"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error deleting bonus/incentive")}});break;case"benefit-plans":this.compensationService.deleteBenefitPlan(t).subscribe({next:()=>{this.toastService.success("Benefit plan deleted"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error deleting benefit plan")}});break;case"allowances":this.compensationService.deleteAllowance(t).subscribe({next:()=>{this.toastService.success("Allowance deleted"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error deleting allowance")}});break;case"enrollment":this.compensationService.cancelEmployeeBenefit(t).subscribe({next:()=>{this.toastService.success("Enrollment canceled"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error canceling enrollment")}});break}}approveRevision(t){this.compensationService.approveSalaryRevision(t,1).subscribe({next:()=>{this.toastService.success("Revision approved"),this.loadData()},error:e=>{console.error(e),this.toastService.error("Error approving revision")}})}rejectRevision(t){let e=prompt("Enter rejection reason:");e&&this.compensationService.rejectSalaryRevision(t,e).subscribe({next:()=>{this.toastService.success("Revision rejected"),this.loadData()},error:i=>{console.error(i),this.toastService.error("Error rejecting revision")}})}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString():""}getStatusClass(t){return{PENDING:"bg-warning",APPROVED:"bg-success",REJECTED:"bg-danger",ACTIVE:"bg-success",INACTIVE:"bg-secondary",CANCELLED:"bg-danger"}[t]||"bg-secondary"}static \u0275fac=function(e){return new(e||n)(V(eM),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-compensation"]],decls:29,vars:20,consts:[[1,"compensation-container"],[1,"page-header"],[1,"tabs"],[3,"click"],[1,"section-header"],[1,"btn","btn-primary",3,"click"],["class","table-container",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","9",1,"text-center"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success",3,"click"],["colspan","8",1,"text-center"],["colspan","7",1,"text-center"],["colspan","6",1,"text-center"],[1,"modal-overlay"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],[1,"required"],["type","text","name","bandCode","required","",3,"ngModelChange","ngModel"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["name","gradeId",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","jobRoleId",3,"ngModelChange","ngModel"],["type","number","name","minSalary","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","midSalary","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","maxSalary","min","0","step","0.01",3,"ngModelChange","ngModel"],["name","currency",3,"ngModelChange","ngModel"],["value","USD"],["value","EUR"],["value","GBP"],["value","INR"],["name","payFrequency",3,"ngModelChange","ngModel"],["value","MONTHLY"],["value","BI_WEEKLY"],["value","WEEKLY"],["type","number","name","hraPercentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","daPercentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","taPercentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","medicalAllowancePercentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","specialAllowancePercentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","date","name","effectiveFrom",3,"ngModelChange","ngModel"],["name","isActive",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["name","employeeId","required","",3,"ngModelChange","change","ngModel"],["name","revisionType",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","name","currentSalary","readonly","",3,"ngModelChange","ngModel"],["type","number","name","incrementPercentage","min","0","max","200","step","0.01",3,"ngModelChange","input","ngModel"],["type","number","name","revisedSalary",3,"ngModelChange","ngModel"],["type","date","name","effectiveDate",3,"ngModelChange","ngModel"],["name","reason","rows","3",3,"ngModelChange","ngModel"],[3,"value"],["name","bonusType",3,"ngModelChange","ngModel"],["name","calculationBasis",3,"ngModelChange","ngModel"],["name","frequency",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["name","eligibilityRules","rows","3","placeholder","Define eligibility criteria...",3,"ngModelChange","ngModel"],["type","number","name","amount","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","percentage","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","text","name","planCode","required","",3,"ngModelChange","ngModel"],["name","benefitType",3,"ngModelChange","ngModel"],["type","text","name","provider",3,"ngModelChange","ngModel"],["type","number","name","employerContribution","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","employeeContribution","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","coverageAmount","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","name","waitingPeriodDays","min","0",3,"ngModelChange","ngModel"],["name","isMandatory",3,"ngModelChange","ngModel"],["name","description","rows","3",3,"ngModelChange","ngModel"],["name","allowanceType",3,"ngModelChange","ngModel"],["name","isTaxable",3,"ngModelChange","ngModel"],["name","employeeId","required","",3,"ngModelChange","ngModel"],["name","benefitPlanId","required","",3,"ngModelChange","ngModel"],["name","coverageType",3,"ngModelChange","ngModel"],["value","EMPLOYEE_ONLY"],["value","EMPLOYEE_SPOUSE"],["value","EMPLOYEE_CHILDREN"],["value","FAMILY"],["type","date","name","enrollmentDate",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Compensation & Benefits Management"),a()(),o(4,"div",2)(5,"button",3),x("click",function(){return i.setTab("salary-bands")}),l(6,"Salary Bands"),a(),o(7,"button",3),x("click",function(){return i.setTab("salary-revision")}),l(8,"Salary Revision"),a(),o(9,"button",3),x("click",function(){return i.setTab("bonus-incentive")}),l(10,"Bonus & Incentive"),a(),o(11,"button",3),x("click",function(){return i.setTab("benefit-plans")}),l(12,"Benefit Plans"),a(),o(13,"button",3),x("click",function(){return i.setTab("allowances")}),l(14,"Allowances"),a(),o(15,"button",3),x("click",function(){return i.setTab("enrollment")}),l(16,"Benefits Enrollment"),a()(),o(17,"div",4)(18,"h3"),l(19),a(),o(20,"button",5),x("click",function(){return i.openForm()}),l(21,"+ Add New"),a()(),b(22,cIe,25,2,"div",6)(23,gIe,23,2,"div",6)(24,_Ie,21,2,"div",6)(25,yIe,25,2,"div",6)(26,MIe,23,2,"div",6)(27,wIe,19,2,"div",6)(28,JIe,13,8,"div",7),a()),e&2&&(c(5),ie("active",i.activeTab==="salary-bands"),c(2),ie("active",i.activeTab==="salary-revision"),c(2),ie("active",i.activeTab==="bonus-incentive"),c(2),ie("active",i.activeTab==="benefit-plans"),c(2),ie("active",i.activeTab==="allowances"),c(2),ie("active",i.activeTab==="enrollment"),c(4),_(i.activeTab==="salary-bands"?"Salary Bands":i.activeTab==="salary-revision"?"Salary Revisions":i.activeTab==="bonus-incentive"?"Bonus & Incentives":i.activeTab==="benefit-plans"?"Benefit Plans":i.activeTab==="allowances"?"Allowances":"Employee Benefits Enrollment"),c(3),m("ngIf",!i.loading&&i.activeTab==="salary-bands"),c(),m("ngIf",!i.loading&&i.activeTab==="salary-revision"),c(),m("ngIf",!i.loading&&i.activeTab==="bonus-incentive"),c(),m("ngIf",!i.loading&&i.activeTab==="benefit-plans"),c(),m("ngIf",!i.loading&&i.activeTab==="allowances"),c(),m("ngIf",!i.loading&&i.activeTab==="enrollment"),c(),m("ngIf",i.showForm))},dependencies:[At,ot,Se,be,Vt,pi,je,We,Ie,Mt,Ue,Oe,di,cn,Xt,fr,Ee,li,Rt],styles:[".compensation-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:20px;flex-wrap:wrap;border-bottom:2px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;border:none;background:none;cursor:pointer;font-size:13px;color:#666;border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal;font-weight:500}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:teal}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center;color:#999}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff;display:inline-block}.badge.bg-success[_ngcontent-%COMP%]{background:#10b981}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.badge.bg-warning[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-danger[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-primary[_ngcontent-%COMP%]{background:teal}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn.btn-outline[_ngcontent-%COMP%]{background:transparent;border:1px solid #008080;color:teal}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;margin-right:4px}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%;max-height:90vh;overflow-y:auto}.modal-content.modal-lg[_ngcontent-%COMP%]{width:800px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{background:#f9fafb}.form-group[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}h4[_ngcontent-%COMP%]{margin:16px 0 12px;color:#374151;font-size:14px;border-bottom:1px solid #e5e7eb;padding-bottom:8px}@media(max-width:768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-content[_ngcontent-%COMP%]{padding:16px}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}"],changeDetection:0})};var tM=class n{constructor(t){this.http=t}baseUrl="/api/settlements";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getAll(){return this.http.get(`${this.baseUrl}`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`)}getByEmployeeId(t){return this.http.get(`${this.baseUrl}/employee/${t}`)}initiateSettlement(t){return this.http.post(`${this.baseUrl}`,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}submit(t){return this.http.post(`${this.baseUrl}/${t}/submit`,{})}approve(t,e){return this.http.post(`${this.baseUrl}/${t}/approve`,{approvedBy:e})}reject(t,e){return this.http.post(`${this.baseUrl}/${t}/reject`,{remarks:e})}process(t,e){return this.http.post(`${this.baseUrl}/${t}/process`,{processedBy:e})}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function QIe(n,t){n&1&&(o(0,"div",36)(1,"div",37)(2,"span",38),l(3,"Loading..."),a()()())}function XIe(n,t){n&1&&(o(0,"div",39),y(1,"i",40),o(2,"p"),l(3,'No settlements found. Click "Initiate Settlement" to create one.'),a()())}function ZIe(n,t){if(n&1){let e=F();o(0,"button",52),x("click",function(){g(e);let r=p().$implicit,s=p(2);return f(s.deleteSettlement(r.id))}),y(1,"i",53),a()}}function e6e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"span",44),l(3),a()(),o(4,"td")(5,"span",45),l(6),a()(),o(7,"td"),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",46),l(13),a()(),o(14,"td",47),l(15),a(),o(16,"td")(17,"span",48),l(18),a()(),o(19,"td")(20,"button",49),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.viewDetail(r))}),y(21,"i",50),a(),b(22,ZIe,2,0,"button",51),a()()}if(n&2){let e=t.$implicit,i=p(2);c(3),_(e.settlementNumber),c(3),_((e.employee==null?null:e.employee.employeeCode)||"-"),c(2),Ge("",e.employee==null?null:e.employee.firstName," ",e.employee==null?null:e.employee.lastName),c(2),_(i.formatDate(e.lastWorkingDay)),c(3),_(e.separationType==null?null:e.separationType.replace("_"," ")),c(2),_(i.formatCurrency(e.netPayable)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status==null?null:e.status.replace("_"," ")),c(4),m("ngIf",e.status==="DRAFT")}}function t6e(n,t){if(n&1&&(o(0,"div",41)(1,"table",42)(2,"thead")(3,"tr")(4,"th"),l(5,"Settlement #"),a(),o(6,"th"),l(7,"Employee ID"),a(),o(8,"th"),l(9,"Employee Name"),a(),o(10,"th"),l(11,"Last Working Day"),a(),o(12,"th"),l(13,"Separation Type"),a(),o(14,"th"),l(15,"Net Payable"),a(),o(16,"th"),l(17,"Status"),a(),o(18,"th"),l(19,"Actions"),a()()(),o(20,"tbody"),b(21,e6e,23,10,"tr",43),a()()()),n&2){let e=p();c(21),m("ngForOf",e.settlements)}}function n6e(n,t){if(n&1&&(o(0,"option",54),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),En("",e.firstName," ",e.lastName," (",e.employeeCode,")")}}function i6e(n,t){if(n&1&&(o(0,"option",54),l(1),a()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function r6e(n,t){n&1&&y(0,"div",55)}function o6e(n,t){if(n&1&&(o(0,"div",75)(1,"p")(2,"strong"),l(3,"Remarks:"),a(),l(4),a()()),n&2){let e=p(2);c(4),D(" ",e.selectedSettlement.remarks)}}function a6e(n,t){if(n&1){let e=F();o(0,"button",76),x("click",function(){g(e);let r=p(2);return f(r.submitSettlement(r.selectedSettlement.id))}),l(1,"Submit for Approval"),a()}}function s6e(n,t){if(n&1){let e=F();o(0,"button",77),x("click",function(){g(e);let r=p(2);return f(r.rejectSettlement(r.selectedSettlement.id))}),l(1,"Reject"),a()}}function l6e(n,t){if(n&1){let e=F();o(0,"button",78),x("click",function(){g(e);let r=p(2);return f(r.approveSettlement(r.selectedSettlement.id))}),l(1,"Approve"),a()}}function c6e(n,t){if(n&1){let e=F();o(0,"button",2),x("click",function(){g(e);let r=p(2);return f(r.processSettlement(r.selectedSettlement.id))}),l(1,"Process Payment"),a()}}function d6e(n,t){if(n&1){let e=F();o(0,"div",19)(1,"div",20)(2,"h5",21),l(3),a(),o(4,"button",22),x("click",function(){g(e);let r=p();return f(r.closeDetail())}),a()(),o(5,"div",23)(6,"div",56)(7,"div",57)(8,"p")(9,"strong"),l(10,"Employee:"),a(),l(11),a(),o(12,"p")(13,"strong"),l(14,"Employee Code:"),a(),l(15),a(),o(16,"p")(17,"strong"),l(18,"Separation Type:"),a(),l(19),a()(),o(20,"div",57)(21,"p")(22,"strong"),l(23,"Last Working Day:"),a(),l(24),a(),o(25,"p")(26,"strong"),l(27,"Status:"),a(),o(28,"span",48),l(29),a()(),o(30,"p")(31,"strong"),l(32,"Created:"),a(),l(33),a()()(),o(34,"div",58)(35,"div",57)(36,"div",59)(37,"div",60),l(38,"Earnings"),a(),o(39,"ul",61)(40,"li",62)(41,"span"),l(42,"Basic Salary Due"),a(),o(43,"strong"),l(44),a()(),o(45,"li",62)(46,"span"),l(47,"Allowances Due"),a(),o(48,"strong"),l(49),a()(),o(50,"li",62)(51,"span"),l(52,"Bonus Due"),a(),o(53,"strong"),l(54),a()(),o(55,"li",62)(56,"span"),l(57),a(),o(58,"strong"),l(59),a()(),o(60,"li",62)(61,"span"),l(62,"Gratuity"),a(),o(63,"strong"),l(64),a()(),o(65,"li",62)(66,"span"),l(67,"Other Earnings"),a(),o(68,"strong"),l(69),a()(),o(70,"li",63)(71,"strong"),l(72,"Total Earnings"),a(),o(73,"strong",64),l(74),a()()()()(),o(75,"div",57)(76,"div",59)(77,"div",65),l(78,"Deductions"),a(),o(79,"ul",61)(80,"li",62)(81,"span"),l(82,"Loan Recovery"),a(),o(83,"strong"),l(84),a()(),o(85,"li",62)(86,"span"),l(87,"Advance Recovery"),a(),o(88,"strong"),l(89),a()(),o(90,"li",62)(91,"span"),l(92,"Asset Recovery"),a(),o(93,"strong"),l(94),a()(),o(95,"li",62)(96,"span"),l(97,"Notice Pay Recovery"),a(),o(98,"strong"),l(99),a()(),o(100,"li",62)(101,"span"),l(102,"Tax Deduction"),a(),o(103,"strong"),l(104),a()(),o(105,"li",62)(106,"span"),l(107,"Other Deductions"),a(),o(108,"strong"),l(109),a()(),o(110,"li",63)(111,"strong"),l(112,"Total Deductions"),a(),o(113,"strong",66),l(114),a()()()()()(),o(115,"div",6)(116,"div",67)(117,"h5",68),l(118,"Net Payable Amount"),a(),o(119,"h3",68),l(120),a()()(),b(121,o6e,5,1,"div",69),a(),o(122,"div",30)(123,"button",70),x("click",function(){g(e);let r=p();return f(r.closeDetail())}),l(124,"Close"),a(),b(125,a6e,2,0,"button",71)(126,s6e,2,0,"button",72)(127,l6e,2,0,"button",73)(128,c6e,2,0,"button",74),a()()}if(n&2){let e=p();c(3),D("Settlement Details - ",e.selectedSettlement.settlementNumber),c(8),Ge(" ",e.selectedSettlement.employee==null?null:e.selectedSettlement.employee.firstName," ",e.selectedSettlement.employee==null?null:e.selectedSettlement.employee.lastName),c(4),D(" ",e.selectedSettlement.employee==null?null:e.selectedSettlement.employee.employeeCode),c(4),D(" ",e.selectedSettlement.separationType),c(5),D(" ",e.formatDate(e.selectedSettlement.lastWorkingDay)),c(4),m("ngClass",e.getStatusClass(e.selectedSettlement.status)),c(),_(e.selectedSettlement.status),c(4),D(" ",e.formatDate(e.selectedSettlement.createdAt)),c(11),_(e.formatCurrency(e.selectedSettlement.basicSalaryDue)),c(5),_(e.formatCurrency(e.selectedSettlement.allowancesDue)),c(5),_(e.formatCurrency(e.selectedSettlement.bonusDue)),c(3),D("Leave Encashment (",e.selectedSettlement.leaveBalanceDays||0," days)"),c(2),_(e.formatCurrency(e.selectedSettlement.leaveEncashment)),c(5),_(e.formatCurrency(e.selectedSettlement.gratuityAmount)),c(5),_(e.formatCurrency(e.selectedSettlement.otherEarnings)),c(5),_(e.formatCurrency(e.selectedSettlement.totalEarnings)),c(10),_(e.formatCurrency(e.selectedSettlement.loanRecovery)),c(5),_(e.formatCurrency(e.selectedSettlement.advanceRecovery)),c(5),_(e.formatCurrency(e.selectedSettlement.assetRecovery)),c(5),_(e.formatCurrency(e.selectedSettlement.noticePayRecovery)),c(5),_(e.formatCurrency(e.selectedSettlement.taxDeduction)),c(5),_(e.formatCurrency(e.selectedSettlement.otherDeductions)),c(5),_(e.formatCurrency(e.selectedSettlement.totalDeductions)),c(6),_(e.formatCurrency(e.selectedSettlement.netPayable)),c(),m("ngIf",e.selectedSettlement.remarks),c(4),m("ngIf",e.selectedSettlement.status==="DRAFT"),c(),m("ngIf",e.selectedSettlement.status==="PENDING_APPROVAL"),c(),m("ngIf",e.selectedSettlement.status==="PENDING_APPROVAL"),c(),m("ngIf",e.selectedSettlement.status==="APPROVED")}}function p6e(n,t){n&1&&y(0,"div",55)}var nM=class n{constructor(t,e,i,r){this.settlementService=t;this.employeeService=e;this.toastService=i;this.cdr=r}settlements=[];employees=[];dashboard={};loading=!1;showForm=!1;showDetail=!1;selectedSettlement=null;saving=!1;formData={};separationTypes=["RESIGNATION","TERMINATION","RETIREMENT","CONTRACT_END","MUTUAL_SEPARATION"];ngOnInit(){this.loadDashboard(),this.loadSettlements(),this.loadEmployees()}loadDashboard(){this.settlementService.getDashboard().subscribe({next:t=>{this.dashboard=t,this.cdr.markForCheck()},error:t=>console.error("Error loading dashboard:",t)})}loadSettlements(){this.loading=!0,this.cdr.markForCheck(),this.settlementService.getAll().subscribe({next:t=>{this.settlements=t,this.loading=!1,this.cdr.markForCheck()},error:t=>{console.error(t),this.loading=!1,this.cdr.markForCheck()}})}loadEmployees(){this.employeeService.getAll().subscribe({next:t=>{this.employees=t,this.cdr.markForCheck()},error:t=>console.error("Error loading employees:",t)})}openForm(){this.formData={employeeId:"",lastWorkingDay:new Date().toISOString().split("T")[0],separationType:"RESIGNATION"},this.showForm=!0}closeForm(){this.showForm=!1,this.formData={}}saveSettlement(){if(!this.saving){if(!this.formData.employeeId||!this.formData.lastWorkingDay){this.toastService.error("Please select an employee and last working day");return}this.saving=!0,this.settlementService.initiateSettlement(this.formData).subscribe({next:()=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.success("Settlement initiated successfully"),this.closeForm(),this.loadSettlements(),this.loadDashboard()},error:t=>{this.saving=!1,this.cdr.detectChanges(),this.toastService.error(t.error?.error||"Error initiating settlement")}})}}viewDetail(t){this.selectedSettlement=t,this.showDetail=!0}closeDetail(){this.showDetail=!1,this.selectedSettlement=null}submitSettlement(t){confirm("Submit this settlement for approval?")&&this.settlementService.submit(t).subscribe({next:()=>{this.toastService.success("Settlement submitted successfully"),this.loadSettlements(),this.loadDashboard(),this.closeDetail()},error:e=>{console.error(e),this.toastService.error(e.error?.error||"Error submitting settlement")}})}approveSettlement(t){confirm("Approve this settlement?")&&this.settlementService.approve(t,"Admin").subscribe({next:()=>{this.toastService.success("Settlement approved successfully"),this.loadSettlements(),this.loadDashboard(),this.closeDetail()},error:e=>{console.error(e),this.toastService.error(e.error?.error||"Error approving settlement")}})}rejectSettlement(t){let e=prompt("Enter rejection reason:");e&&this.settlementService.reject(t,e).subscribe({next:()=>{this.toastService.success("Settlement rejected"),this.loadSettlements(),this.loadDashboard(),this.closeDetail()},error:i=>{console.error(i),this.toastService.error(i.error?.error||"Error rejecting settlement")}})}processSettlement(t){confirm("Process this settlement for payment?")&&this.settlementService.process(t,"Admin").subscribe({next:()=>{this.toastService.success("Settlement processed successfully"),this.loadSettlements(),this.loadDashboard(),this.closeDetail()},error:e=>{console.error(e),this.toastService.error(e.error?.error||"Error processing settlement")}})}deleteSettlement(t){confirm("Delete this draft settlement?")&&this.settlementService.delete(t).subscribe({next:()=>{this.toastService.success("Settlement deleted"),this.loadSettlements(),this.loadDashboard()},error:e=>{console.error(e),this.toastService.error(e.error?.error||"Error deleting settlement")}})}formatDate(t){return t?new Date(t).toLocaleDateString():""}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getStatusClass(t){return{DRAFT:"bg-secondary",PENDING_APPROVAL:"bg-warning",APPROVED:"bg-info",PROCESSED:"bg-success",REJECTED:"bg-danger"}[t]||"bg-secondary"}getEmployeeName(t){let e=this.employees.find(i=>i.id===t);return e?`${e.firstName} ${e.lastName}`:"Unknown"}static \u0275fac=function(e){return new(e||n)(V(tM),V(ai),V(dn),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-settlement"]],standalone:!1,decls:75,vars:26,consts:[[1,"container-fluid","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","me-2"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","bg-primary","text-white"],[1,"card-body"],[1,"card-subtitle","mb-2"],[1,"card-title","mb-0"],[1,"card","bg-warning","text-dark"],[1,"card","bg-info","text-white"],[1,"card","bg-success","text-white"],[1,"card"],["class","text-center py-5",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],["tabindex","-1",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","modal-backdrop fade show",4,"ngIf"],[1,"modal-dialog","modal-lg"],["class","modal-content",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-5","text-muted"],[1,"fas","fa-file-invoice-dollar","fa-3x","mb-3"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge","bg-dark"],[1,"employee-id"],[1,"badge","bg-secondary"],[1,"text-end","fw-bold"],[1,"badge",3,"ngClass"],["title","View Details",1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-outline-danger","title","Delete",3,"click",4,"ngIf"],["title","Delete",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[3,"value"],[1,"modal-backdrop","fade","show"],[1,"row","mb-3"],[1,"col-md-6"],[1,"row"],[1,"card","mb-3"],[1,"card-header","bg-success","text-white"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"list-group-item","d-flex","justify-content-between","bg-light"],[1,"text-success"],[1,"card-header","bg-danger","text-white"],[1,"text-danger"],[1,"card-body","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["class","mt-3",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["class","btn btn-warning",3,"click",4,"ngIf"],["class","btn btn-danger me-2",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"mt-3"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger","me-2",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Full & Final Settlement"),a(),o(4,"button",2),x("click",function(){return i.openForm()}),y(5,"i",3),l(6,"Initiate Settlement "),a()(),o(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"h6",8),l(12,"Total Settlements"),a(),o(13,"h3",9),l(14),a()()()(),o(15,"div",5)(16,"div",10)(17,"div",7)(18,"h6",8),l(19,"Pending Approval"),a(),o(20,"h3",9),l(21),a()()()(),o(22,"div",5)(23,"div",11)(24,"div",7)(25,"h6",8),l(26,"Approved"),a(),o(27,"h3",9),l(28),a()()()(),o(29,"div",5)(30,"div",12)(31,"div",7)(32,"h6",8),l(33,"Processed"),a(),o(34,"h3",9),l(35),a()()()()(),o(36,"div",13)(37,"div",7),b(38,QIe,4,0,"div",14)(39,XIe,4,0,"div",15)(40,t6e,22,1,"div",16),a()()(),o(41,"div",17)(42,"div",18)(43,"div",19)(44,"div",20)(45,"h5",21),l(46,"Initiate F&F Settlement"),a(),o(47,"button",22),x("click",function(){return i.closeForm()}),a()(),o(48,"div",23)(49,"div",24)(50,"label",25),l(51,"Employee *"),a(),o(52,"select",26),S("ngModelChange",function(s){return P(i.formData.employeeId,s)||(i.formData.employeeId=s),s}),o(53,"option",27),l(54,"Select Employee"),a(),b(55,n6e,2,4,"option",28),a()(),o(56,"div",24)(57,"label",25),l(58,"Last Working Day *"),a(),o(59,"input",29),S("ngModelChange",function(s){return P(i.formData.lastWorkingDay,s)||(i.formData.lastWorkingDay=s),s}),a()(),o(60,"div",24)(61,"label",25),l(62,"Separation Type *"),a(),o(63,"select",26),S("ngModelChange",function(s){return P(i.formData.separationType,s)||(i.formData.separationType=s),s}),b(64,i6e,2,2,"option",28),a()()(),o(65,"div",30)(66,"button",31),x("click",function(){return i.closeForm()}),l(67,"Cancel"),a(),o(68,"button",32),x("click",function(){return i.saveSettlement()}),l(69),a()()()()(),b(70,r6e,1,0,"div",33),o(71,"div",17)(72,"div",34),b(73,d6e,129,30,"div",35),a()(),b(74,p6e,1,0,"div",33)),e&2&&(c(14),_(i.dashboard.total||0),c(7),_(i.dashboard.pendingApproval||0),c(7),_(i.dashboard.approved||0),c(7),_(i.dashboard.processed||0),c(3),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.settlements.length===0),c(),m("ngIf",!i.loading&&i.settlements.length>0),c(),jt("display",i.showForm?"block":"none"),ie("show",i.showForm),c(11),M("ngModel",i.formData.employeeId),c(3),m("ngForOf",i.employees),c(4),M("ngModel",i.formData.lastWorkingDay),c(4),M("ngModel",i.formData.separationType),c(),m("ngForOf",i.separationTypes),c(2),m("disabled",i.saving),c(2),m("disabled",i.saving),c(),_(i.saving?"Saving...":"Initiate"),c(),m("ngIf",i.showForm),c(),jt("display",i.showDetail?"block":"none"),ie("show",i.showDetail),c(2),m("ngIf",i.selectedSettlement),c(),m("ngIf",i.showDetail))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,cn,Ee],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:teal;color:#fff;font-weight:600;border:none}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.employee-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:teal;background:#e0f2f2;padding:.25rem .5rem;border-radius:4px;font-size:.875rem}.modal.show[_ngcontent-%COMP%]{background-color:#00000080}.modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}.badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.4em .8em}.list-group-item[_ngcontent-%COMP%]{padding:.75rem 1rem}.text-end[_ngcontent-%COMP%]{text-align:right}.fw-bold[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0})};function m6e(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"currency"),a(),o(8,"td")(9,"span",14),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td")(14,"button",15),l(15,"View"),a()()()),n&2){let e=t.$implicit;c(2),_(e.id),c(2),_(e.loanType),c(2),_(xn(7,6,e.loanAmount)),c(3),m("ngClass","bg-"+((e.status==null?null:e.status.toLowerCase())||"secondary")),c(),_(e.status),c(2),D("",e.requestedTenureMonths," months")}}function u6e(n,t){if(n&1&&(o(0,"div",11)(1,"table",12)(2,"thead")(3,"tr")(4,"th"),l(5,"Loan ID"),a(),o(6,"th"),l(7,"Type"),a(),o(8,"th"),l(9,"Amount"),a(),o(10,"th"),l(11,"Status"),a(),o(12,"th"),l(13,"Tenure"),a(),o(14,"th"),l(15,"Actions"),a()()(),o(16,"tbody"),b(17,m6e,16,8,"tr",13),a()()()),n&2){let e=p();c(17),m("ngForOf",e.loans)}}function g6e(n,t){n&1&&(o(0,"div",16)(1,"p"),l(2,"No loan applications found"),a()())}function f6e(n,t){if(n&1){let e=F();o(0,"div",17)(1,"div",18)(2,"h3"),l(3,"New Loan Application"),a(),o(4,"div",19)(5,"label"),l(6,"Loan Type"),a(),o(7,"select",20),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.loanType,r)||(s.formData.loanType=r),f(r)}),o(8,"option",21),l(9,"Personal Loan"),a(),o(10,"option",22),l(11,"Home Loan"),a(),o(12,"option",23),l(13,"Auto Loan"),a(),o(14,"option",24),l(15,"Education Loan"),a()()(),o(16,"div",19)(17,"label"),l(18,"Loan Amount"),a(),o(19,"input",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.loanAmount,r)||(s.formData.loanAmount=r),f(r)}),a()(),o(20,"div",19)(21,"label"),l(22,"Tenure (Months)"),a(),o(23,"input",26),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.requestedTenureMonths,r)||(s.formData.requestedTenureMonths=r),f(r)}),a()(),o(24,"div",19)(25,"label"),l(26,"Interest Rate (%)"),a(),o(27,"input",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.formData.interestRate,r)||(s.formData.interestRate=r),f(r)}),a()(),o(28,"div",28)(29,"button",29),x("click",function(){g(e);let r=p();return f(r.closeForm())}),l(30,"Cancel"),a(),o(31,"button",7),x("click",function(){g(e);let r=p();return f(r.save())}),l(32,"Submit Application"),a()()()()}if(n&2){let e=p();c(7),M("ngModel",e.formData.loanType),c(12),M("ngModel",e.formData.loanAmount),c(4),M("ngModel",e.formData.requestedTenureMonths),c(4),M("ngModel",e.formData.interestRate)}}var iM=class n{constructor(t,e){this.loanService=t;this.authService=e;this.currentUserId=this.authService.getCurrentUserId()||0}loans=[];dashboard={};loading=!1;showForm=!1;formData={};currentUserId=0;ngOnInit(){this.loadDashboard(),this.loadLoans()}loadDashboard(){this.loanService.getDashboard().subscribe({next:t=>this.dashboard=t,error:t=>console.error("Error loading dashboard:",t)})}loadLoans(){this.loading=!0,this.loanService.getLoans().subscribe({next:t=>{this.loans=t,this.loading=!1},error:t=>{console.error(t),this.loading=!1}})}openForm(){this.formData={loanType:"PERSONAL",requestedTenureMonths:12,interestRate:0},this.showForm=!0}closeForm(){this.showForm=!1,this.formData={}}save(){alert("Loan application submitted"),this.closeForm(),this.loadLoans()}static \u0275fac=function(e){return new(e||n)(V(fc),V(Ui))};static \u0275cmp=_e({type:n,selectors:[["app-loans"]],decls:28,vars:6,consts:[[1,"loans-container"],[1,"page-header"],[1,"dashboard-cards"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"section-header"],[1,"btn","btn-primary",3,"click"],["class","data-table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"data-table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-secondary"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-content"],[1,"form-group"],[3,"ngModelChange","ngModel"],["value","PERSONAL"],["value","HOME"],["value","AUTO"],["value","EDUCATION"],["type","number","placeholder","Enter amount",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter tenure",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter rate",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Loan Applications"),a()(),o(4,"div",2)(5,"div",3)(6,"div",4),l(7),a(),o(8,"div",5),l(9,"Total Loans"),a()(),o(10,"div",3)(11,"div",4),l(12),a(),o(13,"div",5),l(14,"Pending"),a()(),o(15,"div",3)(16,"div",4),l(17),a(),o(18,"div",5),l(19,"Approved"),a()()(),o(20,"div",6)(21,"h3"),l(22,"My Loan Applications"),a(),o(23,"button",7),x("click",function(){return i.openForm()}),l(24,"+ New Loan Application"),a()(),b(25,u6e,18,1,"div",8)(26,g6e,3,0,"div",9)(27,f6e,33,4,"div",10),a()),e&2&&(c(7),_(i.dashboard.totalLoans||0),c(5),_(i.dashboard.pendingLoans||0),c(5),_(i.dashboard.approvedLoans||0),c(8),m("ngIf",!i.loading&&i.loans.length>0),c(),m("ngIf",!i.loading&&i.loans.length===0),c(),m("ngIf",i.showForm))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Ue,Oe,Ee,Rt,ap],styles:[".loans-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.dashboard-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 4px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#2563eb}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;margin-top:8px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.data-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500;color:#374151}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f9fafb}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;color:#fff}.badge.bg-pending[_ngcontent-%COMP%]{background:#f59e0b}.badge.bg-approved[_ngcontent-%COMP%]{background:#10b981}.badge.bg-rejected[_ngcontent-%COMP%]{background:#ef4444}.badge.bg-secondary[_ngcontent-%COMP%]{background:#6b7280}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;width:500px;max-width:90%}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #d1d5db;border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}"]})};function h6e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),Le(7,"currency"),a(),o(8,"td"),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"button",7),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.approve(r))}),l(14,"Approve"),a(),o(15,"button",8),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.reject(r))}),l(16,"Reject"),a()()()}if(n&2){let e=t.$implicit;c(2),_(e.employeeName),c(2),_(e.loanType),c(2),_(xn(7,5,e.loanAmount)),c(3),D("",e.requestedTenureMonths," months"),c(2),D("",e.interestRate,"%")}}function _6e(n,t){if(n&1&&(o(0,"div",4)(1,"table",5)(2,"thead")(3,"tr")(4,"th"),l(5,"Applicant"),a(),o(6,"th"),l(7,"Loan Type"),a(),o(8,"th"),l(9,"Amount"),a(),o(10,"th"),l(11,"Tenure"),a(),o(12,"th"),l(13,"Interest Rate"),a(),o(14,"th"),l(15,"Action"),a()()(),o(16,"tbody"),b(17,h6e,17,7,"tr",6),a()()()),n&2){let e=p();c(17),m("ngForOf",e.pendingLoans)}}function v6e(n,t){n&1&&(o(0,"div",9)(1,"p"),l(2,"No pending loan approvals"),a()())}var rM=class n{constructor(t){this.loanService=t}pendingLoans=[];loading=!1;approverId=1;ngOnInit(){this.loadPendingLoans()}loadPendingLoans(){this.loading=!0,this.loanService.getLoans().subscribe({next:t=>{this.pendingLoans=t.filter(e=>e.status==="PENDING"),this.loading=!1},error:t=>{console.error(t),this.loading=!1}})}approve(t){this.loanService.approveLoan(t.id,this.approverId,"Approved").subscribe({next:()=>{alert("Loan approved"),this.loadPendingLoans()},error:e=>console.error("Error:",e)})}reject(t){this.loanService.rejectLoan(t.id,"Does not meet criteria").subscribe({next:()=>{alert("Loan rejected"),this.loadPendingLoans()},error:e=>console.error("Error:",e)})}static \u0275fac=function(e){return new(e||n)(V(fc))};static \u0275cmp=_e({type:n,selectors:[["app-loan-approvals"]],decls:6,vars:2,consts:[[1,"approvals-container"],[1,"page-header"],["class","data-table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"data-table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Loan Approvals"),a()(),b(4,_6e,18,1,"div",2)(5,v6e,3,0,"div",3),a()),e&2&&(c(4),m("ngIf",!i.loading&&i.pendingLoans.length>0),c(),m("ngIf",!i.loading&&i.pendingLoans.length===0))},dependencies:[At,Se,be,Vt,Rt,ap],styles:[".approvals-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.data-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:500}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px}.btn.btn-sm[_ngcontent-%COMP%]{padding:4px 8px}.btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}"]})};function x6e(n,t){n&1&&(o(0,"div",3)(1,"p"),l(2,"No EMI schedules configured"),a()())}var oM=class n{emiSchedules=[];loading=!1;ngOnInit(){this.loadEmiSchedules()}loadEmiSchedules(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.emiSchedules=[]},500)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-loan-emi"]],decls:5,vars:1,consts:[[1,"emi-container"],[1,"page-header"],["class","empty-state",4,"ngIf"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"EMI Configuration"),a()(),b(4,x6e,3,0,"div",2),a()),e&2&&(c(4),m("ngIf",!i.loading&&i.emiSchedules.length===0))},dependencies:[At,be,Vt,Rt],styles:[".emi-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}"]})};function y6e(n,t){n&1&&(o(0,"div",3)(1,"p"),l(2,"No ledger entries found"),a()())}var aM=class n{ledgerEntries=[];loading=!1;ngOnInit(){this.loadLedger()}loadLedger(){this.loading=!0,setTimeout(()=>{this.loading=!1},500)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-loan-ledger"]],decls:5,vars:1,consts:[[1,"ledger-container"],[1,"page-header"],["class","empty-state",4,"ngIf"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Loan Ledger"),a()(),b(4,y6e,3,0,"div",2),a()),e&2&&(c(4),m("ngIf",!i.loading&&i.ledgerEntries.length===0))},dependencies:[At,be,Vt,Rt],styles:[".ledger-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}"]})};function C6e(n,t){n&1&&(o(0,"div",3)(1,"p"),l(2,"No repayment history found"),a()())}var sM=class n{repayments=[];loading=!1;ngOnInit(){this.loadRepayments()}loadRepayments(){this.loading=!0,setTimeout(()=>{this.loading=!1},500)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-loan-repayments"]],decls:5,vars:1,consts:[[1,"repayments-container"],[1,"page-header"],["class","empty-state",4,"ngIf"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Repayment History"),a()(),b(4,C6e,3,0,"div",2),a()),e&2&&(c(4),m("ngIf",!i.loading&&i.repayments.length===0))},dependencies:[At,be,Vt,Rt],styles:[".repayments-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}"]})};var WL=[{value:"NOT_STARTED",label:"Not Started",color:"secondary"},{value:"IN_PROGRESS",label:"In Progress",color:"primary"},{value:"ON_HOLD",label:"On Hold",color:"warning"},{value:"COMPLETED",label:"Completed",color:"success"},{value:"CANCELLED",label:"Cancelled",color:"danger"}],zL=[{value:"FIXED_RATE",label:"Fixed Rate"},{value:"PROJECT_HOURS",label:"Project Hours"},{value:"TASK_HOURS",label:"Task Hours"}],qL=[{value:"TODO",label:"To Do"},{value:"IN_PROGRESS",label:"In Progress"},{value:"REVIEW",label:"In Review"},{value:"COMPLETED",label:"Completed"}],HL=[{value:"LOW",label:"Low",color:"info"},{value:"MEDIUM",label:"Medium",color:"warning"},{value:"HIGH",label:"High",color:"danger"},{value:"URGENT",label:"Urgent",color:"danger"}];function b6e(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function M6e(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.id),c(),_(e.name)}}function S6e(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function P6e(n,t){if(n&1){let e=F();o(0,"button",56),x("click",function(){g(e);let r=p();return f(r.clearFilters())}),y(1,"i",57),l(2," Clear "),a()}}function w6e(n,t){if(n&1&&(o(0,"span",94),y(1,"i",25),l(2),a()),n&2){let e=p().$implicit,i=p(2);c(2),D(" ",i.formatCurrency(e.estimatedCost))}}function E6e(n,t){if(n&1&&(o(0,"div",95),y(1,"i",96),l(2),a()),n&2){let e=p().$implicit,i=p(2);c(2),D(" ",i.getDaysRemaining(e.deadline)*-1," days overdue ")}}function O6e(n,t){if(n&1){let e=F();o(0,"div",60)(1,"div",61)(2,"span",62),l(3),a(),o(4,"div",63)(5,"button",64),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r,!0))}),y(6,"i",65),a(),o(7,"button",66),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),y(8,"i",67),a(),o(9,"button",68),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.duplicateProject(r))}),y(10,"i",69),a(),o(11,"button",70),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteProject(r.id))}),y(12,"i",71),a()()(),o(13,"div",72)(14,"h3",73),l(15),a(),o(16,"p",74),y(17,"i",75),l(18),a(),o(19,"div",76)(20,"span",77),y(21,"i",78),l(22),a(),b(23,w6e,3,1,"span",79),a(),o(24,"div",80)(25,"div",81)(26,"span"),l(27,"Progress"),a(),o(28,"span"),l(29),a()(),o(30,"div",82),y(31,"div",83),a()(),o(32,"div",84)(33,"div",85)(34,"span",86),l(35,"Start"),a(),o(36,"span",87),l(37),a()(),o(38,"div",85)(39,"span",86),l(40,"End"),a(),o(41,"span",87),l(42),a()()(),o(43,"div",88)(44,"span",89),l(45),a(),o(46,"div",90)(47,"span",91),y(48,"i",31),l(49),a(),o(50,"span",92),y(51,"i",28),l(52),a()()(),b(53,E6e,3,1,"div",93),a()()}if(n&2){let e=t.$implicit,i=p(2);ie("overdue",i.isOverdue(e)),c(3),_(e.projectCode),c(12),_(e.name),c(3),D(" ",i.getClientName(e.customerId)),c(4),D(" ",i.getBillingTypeLabel(e.billingType)),c(),m("ngIf",e.estimatedCost),c(6),D("",e.progress,"%"),c(2),jt("width",e.progress,"%"),ie("complete",e.progress===100),c(6),_(i.formatDate(e.startDate)),c(5),_(i.formatDate(e.endDate||e.deadline)),c(2),m("ngClass","status-"+i.getStatusColor(e.status)),c(),D(" ",i.getStatusLabel(e.status)," "),c(4),D(" ",(e.tasks==null?null:e.tasks.length)||0),c(3),D(" ",e.totalLoggedTime||0,"h"),c(),m("ngIf",i.isOverdue(e))}}function T6e(n,t){if(n&1&&(o(0,"div",58),b(1,O6e,54,19,"div",59),a()),n&2){let e=p();c(),m("ngForOf",e.filteredProjects)}}function k6e(n,t){if(n&1&&(o(0,"span",94),l(1),a()),n&2){let e=p().$implicit,i=p(3);c(),_(i.formatCurrency(e.estimatedCost))}}function I6e(n,t){if(n&1&&(o(0,"span",116),l(1),a()),n&2){let e=t.$implicit,i=p(5);c(),D(" ",i.getEmployeeInitials(e.employeeId)," ")}}function D6e(n,t){if(n&1&&(o(0,"span",117),l(1),a()),n&2){let e=p(2).$implicit;c(),D("+",e.members.length-3)}}function A6e(n,t){if(n&1&&(o(0,"div",113),b(1,I6e,2,1,"span",114)(2,D6e,2,1,"span",115),a()),n&2){let e=p().$implicit;c(),m("ngForOf",e.members.slice(0,3)),c(),m("ngIf",e.members.length>3)}}function R6e(n,t){if(n&1){let e=F();o(0,"div",106),x("dragstart",function(r){let s=g(e).$implicit,d=p(3);return f(d.onDragStart(r,s))})("click",function(){let r=g(e).$implicit,s=p(3);return f(s.openModal(r,!0))}),o(1,"div",107)(2,"span",62),l(3),a(),b(4,k6e,2,1,"span",79),a(),o(5,"h4",73),l(6),a(),o(7,"p",74),l(8),a(),o(9,"div",108)(10,"div",82),y(11,"div",83),a(),o(12,"span"),l(13),a()(),o(14,"div",109)(15,"span",110),y(16,"i",111),l(17),a(),b(18,A6e,3,2,"div",112),a()()}if(n&2){let e=t.$implicit,i=p(3);c(3),_(e.projectCode),c(),m("ngIf",e.estimatedCost),c(2),_(e.name),c(2),_(i.getClientName(e.customerId)),c(3),jt("width",e.progress,"%"),c(2),D("",e.progress,"%"),c(2),ie("overdue",i.isOverdue(e)),c(2),D(" ",i.formatDate(e.deadline)," "),c(),m("ngIf",e.members&&e.members.length>0)}}function F6e(n,t){n&1&&(o(0,"div",118)(1,"p"),l(2,"No projects"),a()())}function N6e(n,t){if(n&1){let e=F();o(0,"div",99),x("dragover",function(r){g(e);let s=p(2);return f(s.onDragOver(r))})("drop",function(r){let s=g(e).$implicit,d=p(2);return f(d.onDrop(r,s.value))}),o(1,"div",100)(2,"span",101),l(3),a(),o(4,"span",102),l(5),a()(),o(6,"div",103),b(7,R6e,19,11,"div",104)(8,F6e,3,0,"div",105),a()()}if(n&2){let e=t.$implicit,i=p(2);c(),m("ngClass","header-"+e.color),c(2),_(e.label),c(2),_(i.getProjectsByStatus(e.value).length),c(2),m("ngForOf",i.getProjectsByStatus(e.value)),c(),m("ngIf",i.getProjectsByStatus(e.value).length===0)}}function L6e(n,t){if(n&1&&(o(0,"div",97),b(1,N6e,9,5,"div",98),a()),n&2){let e=p();c(),m("ngForOf",e.projectStatuses)}}function V6e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"div",122)(3,"span",62),l(4),a(),o(5,"span",73),l(6),a()()(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",89),l(11),a()(),o(12,"td")(13,"div",123)(14,"div",82),y(15,"div",83),a(),o(16,"span"),l(17),a()()(),o(18,"td"),l(19),a(),o(20,"td"),l(21),a(),o(22,"td"),l(23),a(),o(24,"td"),l(25),a(),o(26,"td"),l(27),a(),o(28,"td")(29,"div",124)(30,"button",125),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r,!0))}),y(31,"i",65),a(),o(32,"button",56),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.openModal(r))}),y(33,"i",67),a(),o(34,"button",126),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteProject(r.id))}),y(35,"i",71),a()()()()}if(n&2){let e=t.$implicit,i=p(2);ie("overdue",i.isOverdue(e)),c(4),_(e.projectCode),c(2),_(e.name),c(2),_(i.getClientName(e.customerId)),c(2),m("ngClass","status-"+i.getStatusColor(e.status)),c(),D(" ",i.getStatusLabel(e.status)," "),c(4),jt("width",e.progress,"%"),c(2),D("",e.progress,"%"),c(2),_(i.formatCurrency(e.estimatedCost)),c(2),_(i.formatDate(e.startDate)),c(),ie("overdue-text",i.isOverdue(e)),c(),_(i.formatDate(e.deadline)),c(2),D("",e.totalLoggedTime||0,"h"),c(2),_((e.tasks==null?null:e.tasks.length)||0)}}function B6e(n,t){n&1&&(o(0,"div",127),y(1,"i",10),o(2,"p"),l(3,"No projects found"),a()())}function U6e(n,t){if(n&1&&(o(0,"div",119)(1,"table",120)(2,"thead")(3,"tr")(4,"th"),l(5,"Project"),a(),o(6,"th"),l(7,"Client"),a(),o(8,"th"),l(9,"Status"),a(),o(10,"th"),l(11,"Progress"),a(),o(12,"th"),l(13,"Budget"),a(),o(14,"th"),l(15,"Start Date"),a(),o(16,"th"),l(17,"Deadline"),a(),o(18,"th"),l(19,"Hours"),a(),o(20,"th"),l(21,"Tasks"),a(),o(22,"th"),l(23,"Actions"),a()()(),o(24,"tbody"),b(25,V6e,36,17,"tr",121),a()(),b(26,B6e,4,0,"div",52),a()),n&2){let e=p();c(25),m("ngForOf",e.filteredProjects),c(),m("ngIf",e.filteredProjects.length===0)}}function j6e(n,t){n&1&&(o(0,"div",127),y(1,"i",128),o(2,"p"),l(3,'No projects found. Click "New Project" to create one.'),a()())}function W6e(n,t){if(n&1){let e=F();o(0,"button",134),x("click",function(){g(e);let r=p(2);return f(r.activeTab="tasks")}),l(1,"Tasks"),a()}if(n&2){let e=p(2);ie("active",e.activeTab==="tasks")}}function z6e(n,t){if(n&1){let e=F();o(0,"button",134),x("click",function(){g(e);let r=p(2);return f(r.activeTab="milestones")}),l(1,"Milestones"),a()}if(n&2){let e=p(2);ie("active",e.activeTab==="milestones")}}function q6e(n,t){if(n&1){let e=F();o(0,"button",134),x("click",function(){g(e);let r=p(2);return f(r.activeTab="timesheets")}),l(1,"Timesheets"),a()}if(n&2){let e=p(2);ie("active",e.activeTab==="timesheets")}}function H6e(n,t){if(n&1){let e=F();o(0,"button",134),x("click",function(){g(e);let r=p(2);return f(r.activeTab="files")}),l(1,"Files"),a()}if(n&2){let e=p(2);ie("active",e.activeTab==="files")}}function G6e(n,t){if(n&1){let e=F();o(0,"button",134),x("click",function(){g(e);let r=p(2);return f(r.activeTab="notes")}),l(1,"Notes"),a()}if(n&2){let e=p(2);ie("active",e.activeTab==="notes")}}function $6e(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.name)}}function Y6e(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function J6e(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function K6e(n,t){if(n&1){let e=F();o(0,"div",141)(1,"div",142)(2,"div",143)(3,"label"),l(4,"Project Name *"),a(),o(5,"input",144),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.name,r)||(s.selectedProject.name=r),f(r)}),a()(),o(6,"div",143)(7,"label"),l(8,"Project Code"),a(),o(9,"input",144),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.projectCode,r)||(s.selectedProject.projectCode=r),f(r)}),a()()(),o(10,"div",142)(11,"div",143)(12,"label"),l(13,"Client"),a(),o(14,"select",145),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.customerId,r)||(s.selectedProject.customerId=r),f(r)}),o(15,"option",146),l(16,"Select Client"),a(),b(17,$6e,2,2,"option",147),a()(),o(18,"div",143)(19,"label"),l(20,"Billing Type"),a(),o(21,"select",145),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.billingType,r)||(s.selectedProject.billingType=r),f(r)}),b(22,Y6e,2,2,"option",47),a()()(),o(23,"div",142)(24,"div",143)(25,"label"),l(26,"Status"),a(),o(27,"select",145),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.status,r)||(s.selectedProject.status=r),f(r)}),b(28,J6e,2,2,"option",47),a()(),o(29,"div",143)(30,"label"),l(31,"Progress (%)"),a(),o(32,"input",148),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.progress,r)||(s.selectedProject.progress=r),f(r)}),a()()(),o(33,"div",142)(34,"div",143)(35,"label"),l(36,"Start Date"),a(),o(37,"input",149),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.startDate,r)||(s.selectedProject.startDate=r),f(r)}),a()(),o(38,"div",143)(39,"label"),l(40,"End Date"),a(),o(41,"input",149),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.endDate,r)||(s.selectedProject.endDate=r),f(r)}),a()()(),o(42,"div",142)(43,"div",143)(44,"label"),l(45,"Deadline"),a(),o(46,"input",149),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.deadline,r)||(s.selectedProject.deadline=r),f(r)}),a()(),o(47,"div",143)(48,"label"),l(49,"Completion Date"),a(),o(50,"input",149),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.completionDate,r)||(s.selectedProject.completionDate=r),f(r)}),a()()(),o(51,"div",142)(52,"div",143)(53,"label"),l(54,"Estimated Hours"),a(),o(55,"input",150),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.estimatedHours,r)||(s.selectedProject.estimatedHours=r),f(r)}),a()(),o(56,"div",143)(57,"label"),l(58,"Estimated Cost"),a(),o(59,"input",151),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.estimatedCost,r)||(s.selectedProject.estimatedCost=r),f(r)}),a()()(),o(60,"div",143)(61,"label"),l(62,"Description"),a(),o(63,"textarea",152),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.description,r)||(s.selectedProject.description=r),f(r)}),a()(),o(64,"div",143)(65,"label"),l(66,"Tags (comma separated)"),a(),o(67,"input",153),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.tagsInput,r)||(s.tagsInput=r),f(r)}),a()()()}if(n&2){let e=p(2);c(5),M("ngModel",e.selectedProject.name),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedProject.projectCode),m("disabled",!0),c(5),M("ngModel",e.selectedProject.customerId),m("disabled",e.viewMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.clients),c(4),M("ngModel",e.selectedProject.billingType),m("disabled",e.viewMode),c(),m("ngForOf",e.billingTypes),c(5),M("ngModel",e.selectedProject.status),m("disabled",e.viewMode),c(),m("ngForOf",e.projectStatuses),c(4),M("ngModel",e.selectedProject.progress),m("disabled",e.viewMode),c(5),M("ngModel",e.selectedProject.startDate),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedProject.endDate),m("disabled",e.viewMode),c(5),M("ngModel",e.selectedProject.deadline),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedProject.completionDate),m("disabled",e.viewMode),c(5),M("ngModel",e.selectedProject.estimatedHours),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedProject.estimatedCost),m("disabled",e.viewMode),c(4),M("ngModel",e.selectedProject.description),m("disabled",e.viewMode),c(4),M("ngModel",e.tagsInput),m("disabled",e.viewMode)}}function Q6e(n,t){n&1&&(o(0,"div",159),y(1,"i",160),l(2," Please save the project first before adding members. "),a())}function X6e(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openMemberModal())}),y(1,"i",6),l(2," Add Member "),a()}}function Z6e(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.firstName," ",e.lastName)}}function eDe(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function tDe(n,t){if(n&1){let e=F();o(0,"td")(1,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.removeMember(r))}),y(2,"i",71),a()()}}function nDe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),b(7,tDe,3,0,"td",164),a()),n&2){let e=t.$implicit,i=p(4);c(2),_(i.getEmployeeName(e.employeeId)),c(2),_(e.role),c(2),_(i.formatCurrency(e.hourlyRate)),c(),m("ngIf",!i.viewMode)}}function iDe(n,t){if(n&1&&(o(0,"div",162)(1,"table",163)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),a(),o(6,"th"),l(7,"Role"),a(),o(8,"th"),l(9,"Hourly Rate"),a(),b(10,eDe,2,0,"th",164),a()(),o(11,"tbody"),b(12,nDe,8,4,"tr",165),a()()()),n&2){let e=p(3);c(10),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedProject.members)}}function rDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No members assigned yet."),a()())}function oDe(n,t){if(n&1){let e=F();o(0,"div",141),b(1,Q6e,3,0,"div",154),o(2,"div",155)(3,"h4"),l(4,"Project Members"),a(),b(5,X6e,3,0,"button",156),a(),o(6,"div",142)(7,"div",143)(8,"label"),l(9,"Project Manager"),a(),o(10,"select",145),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.projectManagerId,r)||(s.selectedProject.projectManagerId=r),f(r)}),o(11,"option",146),l(12,"Select Manager"),a(),b(13,Z6e,2,3,"option",147),a()()(),b(14,iDe,13,2,"div",157)(15,rDe,3,0,"div",158),a()}if(n&2){let e=p(2);c(),m("ngIf",!e.editMode),c(4),m("ngIf",!e.viewMode&&e.editMode),c(5),M("ngModel",e.selectedProject.projectManagerId),m("disabled",e.viewMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.employees),c(),m("ngIf",e.selectedProject.members&&e.selectedProject.members.length>0),c(),m("ngIf",(!e.selectedProject.members||e.selectedProject.members.length===0)&&e.editMode)}}function aDe(n,t){if(n&1){let e=F();o(0,"div",141)(1,"h4"),l(2,"Client Visibility & Permissions"),a(),o(3,"div",167)(4,"label",168)(5,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewProject,r)||(s.selectedProject.allowCustomerViewProject=r),f(r)}),a(),l(6," Allow customer to view project "),a(),o(7,"label",168)(8,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewTasks,r)||(s.selectedProject.allowCustomerViewTasks=r),f(r)}),a(),l(9," Allow customer to view tasks "),a(),o(10,"label",168)(11,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerCommentTasks,r)||(s.selectedProject.allowCustomerCommentTasks=r),f(r)}),a(),l(12," Allow customer to comment on tasks "),a(),o(13,"label",168)(14,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewTaskComments,r)||(s.selectedProject.allowCustomerViewTaskComments=r),f(r)}),a(),l(15," Allow customer to view task comments "),a(),o(16,"label",168)(17,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewTimesheets,r)||(s.selectedProject.allowCustomerViewTimesheets=r),f(r)}),a(),l(18," Allow customer to view timesheets "),a(),o(19,"label",168)(20,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewFiles,r)||(s.selectedProject.allowCustomerViewFiles=r),f(r)}),a(),l(21," Allow customer to view files "),a(),o(22,"label",168)(23,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerUploadFiles,r)||(s.selectedProject.allowCustomerUploadFiles=r),f(r)}),a(),l(24," Allow customer to upload files "),a(),o(25,"label",168)(26,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.allowCustomerViewDiscussions,r)||(s.selectedProject.allowCustomerViewDiscussions=r),f(r)}),a(),l(27," Allow customer to view discussions "),a()()()}if(n&2){let e=p(2);c(5),M("ngModel",e.selectedProject.allowCustomerViewProject),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerViewTasks),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerCommentTasks),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerViewTaskComments),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerViewTimesheets),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerViewFiles),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerUploadFiles),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.allowCustomerViewDiscussions),m("disabled",e.viewMode)}}function sDe(n,t){if(n&1){let e=F();o(0,"div",143)(1,"label"),l(2,"Fixed Rate Amount"),a(),o(3,"input",150),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.selectedProject.fixedRateAmount,r)||(s.selectedProject.fixedRateAmount=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.selectedProject.fixedRateAmount),m("disabled",e.viewMode)}}function lDe(n,t){if(n&1){let e=F();o(0,"div",143)(1,"label"),l(2,"Hourly Rate"),a(),o(3,"input",150),S("ngModelChange",function(r){g(e);let s=p(3);return P(s.selectedProject.hourlyRate,r)||(s.selectedProject.hourlyRate=r),f(r)}),a()()}if(n&2){let e=p(3);c(3),M("ngModel",e.selectedProject.hourlyRate),m("disabled",e.viewMode)}}function cDe(n,t){if(n&1&&(o(0,"div",176)(1,"div",177)(2,"span",13),l(3,"Total Logged Time"),a(),o(4,"span",12),l(5),a()(),o(6,"div",177)(7,"span",13),l(8,"Total Billable Time"),a(),o(9,"span",12),l(10),a()(),o(11,"div",177)(12,"span",13),l(13,"Project Cost"),a(),o(14,"span",12),l(15),a()()()),n&2){let e=p(3);c(5),D("",e.selectedProject.totalLoggedTime||0," hrs"),c(5),D("",e.selectedProject.totalBillableTime||0," hrs"),c(5),_(e.formatCurrency(e.selectedProject.projectCost))}}function dDe(n,t){if(n&1){let e=F();o(0,"div",141)(1,"h4"),l(2,"Billing & Financial Settings"),a(),o(3,"div",142),b(4,sDe,4,2,"div",170)(5,lDe,4,2,"div",170),o(6,"div",143)(7,"label"),l(8,"Currency"),a(),o(9,"select",145),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.currency,r)||(s.selectedProject.currency=r),f(r)}),o(10,"option",171),l(11,"USD"),a(),o(12,"option",172),l(13,"EUR"),a(),o(14,"option",173),l(15,"GBP"),a(),o(16,"option",174),l(17,"INR"),a()()()(),o(18,"div",167)(19,"label",168)(20,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.billableTasks,r)||(s.selectedProject.billableTasks=r),f(r)}),a(),l(21," Billable Tasks "),a(),o(22,"label",168)(23,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.invoiceProject,r)||(s.selectedProject.invoiceProject=r),f(r)}),a(),l(24," Invoice Project "),a(),o(25,"label",168)(26,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.invoiceTasks,r)||(s.selectedProject.invoiceTasks=r),f(r)}),a(),l(27," Invoice Tasks "),a(),o(28,"label",168)(29,"input",169),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.selectedProject.invoiceTimesheets,r)||(s.selectedProject.invoiceTimesheets=r),f(r)}),a(),l(30," Invoice Timesheets "),a()(),b(31,cDe,16,3,"div",175),a()}if(n&2){let e=p(2);c(4),m("ngIf",e.selectedProject.billingType==="FIXED_RATE"),c(),m("ngIf",e.selectedProject.billingType!=="FIXED_RATE"),c(4),M("ngModel",e.selectedProject.currency),m("disabled",e.viewMode),c(11),M("ngModel",e.selectedProject.billableTasks),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.invoiceProject),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.invoiceTasks),m("disabled",e.viewMode),c(3),M("ngModel",e.selectedProject.invoiceTimesheets),m("disabled",e.viewMode),c(2),m("ngIf",e.editMode)}}function pDe(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openTaskModal())}),y(1,"i",6),l(2," Add Task "),a()}}function mDe(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function uDe(n,t){if(n&1){let e=F();o(0,"td")(1,"button",56),x("click",function(){g(e);let r=p(),s=r.$implicit,d=r.index,u=p(4);return f(u.openTaskModal(s,d))}),y(2,"i",67),a(),o(3,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.deleteTask(r))}),y(4,"i",71),a()()}}function gDe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td")(6,"span",179),l(7),a()(),o(8,"td")(9,"span",180),l(10),a()(),o(11,"td"),l(12),a(),b(13,uDe,5,0,"td",164),a()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.name),c(2),_(i.getEmployeeName(e.assigneeId)),c(3),_(i.getTaskStatusLabel(e.status)),c(2),m("ngClass","badge-"+i.getTaskPriorityColor(e.priority)),c(),_(i.getTaskPriorityLabel(e.priority)),c(2),_(i.formatDate(e.dueDate)),c(),m("ngIf",!i.viewMode)}}function fDe(n,t){if(n&1&&(o(0,"div",162)(1,"table",163)(2,"thead")(3,"tr")(4,"th"),l(5,"Task"),a(),o(6,"th"),l(7,"Assignee"),a(),o(8,"th"),l(9,"Status"),a(),o(10,"th"),l(11,"Priority"),a(),o(12,"th"),l(13,"Due Date"),a(),b(14,mDe,2,0,"th",164),a()(),o(15,"tbody"),b(16,gDe,14,7,"tr",165),a()()()),n&2){let e=p(3);c(14),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedProject.tasks)}}function hDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No tasks created yet."),a()())}function _De(n,t){if(n&1&&(o(0,"div",141)(1,"div",155)(2,"h4"),l(3),a(),b(4,pDe,3,0,"button",156),a(),o(5,"div",178)(6,"span"),l(7),a(),o(8,"div",82),y(9,"div",83),a()(),b(10,fDe,17,2,"div",157)(11,hDe,3,0,"div",158),a()),n&2){let e=p(2);c(3),D("Tasks (",(e.selectedProject.tasks==null?null:e.selectedProject.tasks.length)||0,")"),c(),m("ngIf",!e.viewMode),c(3),D("Task Completion: ",e.calculateTaskProgress(),"%"),c(2),jt("width",e.calculateTaskProgress(),"%"),c(),m("ngIf",e.selectedProject.tasks&&e.selectedProject.tasks.length>0),c(),m("ngIf",!e.selectedProject.tasks||e.selectedProject.tasks.length===0)}}function vDe(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openMilestoneModal())}),y(1,"i",6),l(2," Add Milestone "),a()}}function xDe(n,t){if(n&1){let e=F();o(0,"div",188)(1,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.deleteMilestone(r))}),y(2,"i",71),a()()}}function yDe(n,t){if(n&1&&(o(0,"div",184)(1,"div",185)(2,"h5"),l(3),a(),o(4,"p"),l(5),a(),o(6,"span",186),y(7,"i",111),l(8),a()(),b(9,xDe,3,0,"div",187),a()),n&2){let e=t.$implicit,i=p(4);c(3),_(e.name),c(2),_(e.description),c(3),D(" ",i.formatDate(e.dueDate)),c(),m("ngIf",!i.viewMode)}}function CDe(n,t){if(n&1&&(o(0,"div",182),b(1,yDe,10,4,"div",183),a()),n&2){let e=p(3);c(),m("ngForOf",e.selectedProject.milestones)}}function bDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No milestones defined yet."),a()())}function MDe(n,t){if(n&1&&(o(0,"div",141)(1,"div",155)(2,"h4"),l(3,"Milestones"),a(),b(4,vDe,3,0,"button",156),a(),b(5,CDe,2,1,"div",181)(6,bDe,3,0,"div",158),a()),n&2){let e=p(2);c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedProject.milestones&&e.selectedProject.milestones.length>0),c(),m("ngIf",!e.selectedProject.milestones||e.selectedProject.milestones.length===0)}}function SDe(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openTimeLogModal())}),y(1,"i",6),l(2," Log Time "),a()}}function PDe(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function wDe(n,t){if(n&1){let e=F();o(0,"td")(1,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.deleteTimeLog(r))}),y(2,"i",71),a()()}}function EDe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",180),l(11),a()(),b(12,wDe,3,0,"td",164),a()),n&2){let e=t.$implicit,i=p(4);c(2),_(i.formatDate(e.date)),c(2),_(i.getEmployeeName(e.employeeId)),c(2),D("",e.hours,"h"),c(2),_(e.description||"-"),c(2),m("ngClass",e.billable?"badge-success":"badge-secondary"),c(),_(e.billable?"Yes":"No"),c(),m("ngIf",!i.viewMode)}}function ODe(n,t){if(n&1&&(o(0,"div",162)(1,"table",163)(2,"thead")(3,"tr")(4,"th"),l(5,"Date"),a(),o(6,"th"),l(7,"Employee"),a(),o(8,"th"),l(9,"Hours"),a(),o(10,"th"),l(11,"Description"),a(),o(12,"th"),l(13,"Billable"),a(),b(14,PDe,2,0,"th",164),a()(),o(15,"tbody"),b(16,EDe,13,7,"tr",165),a()()()),n&2){let e=p(3);c(14),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedProject.timeLogs)}}function TDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No time logged yet."),a()())}function kDe(n,t){if(n&1&&(o(0,"div",141)(1,"div",155)(2,"h4"),l(3,"Time Logs"),a(),b(4,SDe,3,0,"button",156),a(),b(5,ODe,17,2,"div",157)(6,TDe,3,0,"div",158),a()),n&2){let e=p(2);c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedProject.timeLogs&&e.selectedProject.timeLogs.length>0),c(),m("ngIf",!e.selectedProject.timeLogs||e.selectedProject.timeLogs.length===0)}}function IDe(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openFileModal())}),y(1,"i",6),l(2," Add File "),a()}}function DDe(n,t){n&1&&(o(0,"th"),l(1,"Actions"),a())}function ADe(n,t){if(n&1){let e=F();o(0,"td")(1,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.deleteFile(r))}),y(2,"i",71),a()()}}function RDe(n,t){if(n&1&&(o(0,"tr")(1,"td"),y(2,"i",189),l(3),a(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),b(8,ADe,3,0,"td",164),a()),n&2){let e=t.$implicit,i=p(4);c(3),D(" ",e.name),c(2),_(e.visibility),c(2),_(i.formatDate(e.uploadDate)),c(),m("ngIf",!i.viewMode)}}function FDe(n,t){if(n&1&&(o(0,"div",162)(1,"table",163)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),a(),o(6,"th"),l(7,"Visibility"),a(),o(8,"th"),l(9,"Upload Date"),a(),b(10,DDe,2,0,"th",164),a()(),o(11,"tbody"),b(12,RDe,9,4,"tr",165),a()()()),n&2){let e=p(3);c(10),m("ngIf",!e.viewMode),c(2),m("ngForOf",e.selectedProject.files)}}function NDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No files uploaded yet."),a()())}function LDe(n,t){if(n&1&&(o(0,"div",141)(1,"div",155)(2,"h4"),l(3,"Project Files"),a(),b(4,IDe,3,0,"button",156),a(),b(5,FDe,13,2,"div",157)(6,NDe,3,0,"div",158),a()),n&2){let e=p(2);c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedProject.files&&e.selectedProject.files.length>0),c(),m("ngIf",!e.selectedProject.files||e.selectedProject.files.length===0)}}function VDe(n,t){if(n&1){let e=F();o(0,"button",161),x("click",function(){g(e);let r=p(3);return f(r.openNoteModal())}),y(1,"i",6),l(2," Add Note "),a()}}function BDe(n,t){if(n&1){let e=F();o(0,"button",126),x("click",function(){g(e);let r=p().index,s=p(4);return f(s.deleteNote(r))}),y(1,"i",71),a()}}function UDe(n,t){if(n&1&&(o(0,"div",193)(1,"div",194),l(2),a(),o(3,"div",195)(4,"span",196),l(5),a(),b(6,BDe,2,0,"button",197),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.content),c(3),_(i.formatDate(e.createdAt)),c(),m("ngIf",!i.viewMode)}}function jDe(n,t){if(n&1&&(o(0,"div",191),b(1,UDe,7,3,"div",192),a()),n&2){let e=p(3);c(),m("ngForOf",e.selectedProject.notes)}}function WDe(n,t){n&1&&(o(0,"div",166)(1,"p"),l(2,"No notes added yet."),a()())}function zDe(n,t){if(n&1&&(o(0,"div",141)(1,"div",155)(2,"h4"),l(3,"Internal Notes"),a(),b(4,VDe,3,0,"button",156),a(),b(5,jDe,2,1,"div",190)(6,WDe,3,0,"div",158),a()),n&2){let e=p(2);c(4),m("ngIf",!e.viewMode),c(),m("ngIf",e.selectedProject.notes&&e.selectedProject.notes.length>0),c(),m("ngIf",!e.selectedProject.notes||e.selectedProject.notes.length===0)}}function qDe(n,t){if(n&1){let e=F();o(0,"button",5),x("click",function(){g(e);let r=p(2);return f(r.saveProject())}),l(1),a()}if(n&2){let e=p(2);c(),D("",e.editMode?"Update":"Create"," Project")}}function HDe(n,t){if(n&1){let e=F();o(0,"div",129)(1,"div",130),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeModal())}),y(6,"i",57),a()(),o(7,"div",133)(8,"button",134),x("click",function(){g(e);let r=p();return f(r.activeTab="overview")}),l(9,"Overview"),a(),o(10,"button",134),x("click",function(){g(e);let r=p();return f(r.activeTab="members")}),l(11,"Members"),a(),o(12,"button",134),x("click",function(){g(e);let r=p();return f(r.activeTab="permissions")}),l(13,"Client Permissions"),a(),o(14,"button",134),x("click",function(){g(e);let r=p();return f(r.activeTab="billing")}),l(15,"Billing"),a(),b(16,W6e,2,2,"button",135)(17,z6e,2,2,"button",135)(18,q6e,2,2,"button",135)(19,H6e,2,2,"button",135)(20,G6e,2,2,"button",135),a(),o(21,"div",136),b(22,K6e,68,32,"div",137)(23,oDe,16,8,"div",137)(24,aDe,28,16,"div",137)(25,dDe,32,13,"div",137)(26,_De,12,7,"div",137)(27,MDe,7,3,"div",137)(28,kDe,7,3,"div",137)(29,LDe,7,3,"div",137)(30,zDe,7,3,"div",137),a(),o(31,"div",138)(32,"button",139),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(33),a(),b(34,qDe,2,1,"button",140),a()()()}if(n&2){let e=p();c(4),_(e.viewMode?"View Project":e.editMode?"Edit Project":"New Project"),c(4),ie("active",e.activeTab==="overview"),c(2),ie("active",e.activeTab==="members"),c(2),ie("active",e.activeTab==="permissions"),c(2),ie("active",e.activeTab==="billing"),c(2),m("ngIf",e.editMode),c(),m("ngIf",e.editMode),c(),m("ngIf",e.editMode),c(),m("ngIf",e.editMode),c(),m("ngIf",e.editMode),c(2),m("ngIf",e.activeTab==="overview"),c(),m("ngIf",e.activeTab==="members"),c(),m("ngIf",e.activeTab==="permissions"),c(),m("ngIf",e.activeTab==="billing"),c(),m("ngIf",e.activeTab==="tasks"),c(),m("ngIf",e.activeTab==="milestones"),c(),m("ngIf",e.activeTab==="timesheets"),c(),m("ngIf",e.activeTab==="files"),c(),m("ngIf",e.activeTab==="notes"),c(3),_(e.viewMode?"Close":"Cancel"),c(),m("ngIf",!e.viewMode)}}function GDe(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.firstName," ",e.lastName)}}function $De(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function YDe(n,t){if(n&1&&(o(0,"option",55),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function JDe(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeTaskModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeTaskModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",143)(9,"label"),l(10,"Task Name *"),a(),o(11,"input",200),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.name,r)||(s.editingTask.name=r),f(r)}),a()(),o(12,"div",143)(13,"label"),l(14,"Description"),a(),o(15,"textarea",201),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.description,r)||(s.editingTask.description=r),f(r)}),a()(),o(16,"div",142)(17,"div",143)(18,"label"),l(19,"Assignee"),a(),o(20,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.assigneeId,r)||(s.editingTask.assigneeId=r),f(r)}),o(21,"option",146),l(22,"Unassigned"),a(),b(23,GDe,2,3,"option",147),a()(),o(24,"div",143)(25,"label"),l(26,"Status"),a(),o(27,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.status,r)||(s.editingTask.status=r),f(r)}),b(28,$De,2,2,"option",47),a()()(),o(29,"div",142)(30,"div",143)(31,"label"),l(32,"Priority"),a(),o(33,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.priority,r)||(s.editingTask.priority=r),f(r)}),b(34,YDe,2,2,"option",47),a()(),o(35,"div",143)(36,"label"),l(37,"Due Date"),a(),o(38,"input",203),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.dueDate,r)||(s.editingTask.dueDate=r),f(r)}),a()()(),o(39,"div",143)(40,"label"),l(41,"Estimated Hours"),a(),o(42,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.estimatedHours,r)||(s.editingTask.estimatedHours=r),f(r)}),a()(),o(43,"div",205)(44,"label")(45,"input",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.billable,r)||(s.editingTask.billable=r),f(r)}),a(),l(46," Billable"),a(),o(47,"label")(48,"input",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTask.visibleToClient,r)||(s.editingTask.visibleToClient=r),f(r)}),a(),l(49," Visible to Client"),a()()(),o(50,"div",138)(51,"button",139),x("click",function(){g(e);let r=p();return f(r.closeTaskModal())}),l(52,"Cancel"),a(),o(53,"button",207),x("click",function(){g(e);let r=p();return f(r.saveTask())}),l(54,"Save Task"),a()()()()}if(n&2){let e=p();c(4),D("",e.taskEditIndex>=0?"Edit":"Add"," Task"),c(7),M("ngModel",e.editingTask.name),c(4),M("ngModel",e.editingTask.description),c(5),M("ngModel",e.editingTask.assigneeId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.employees),c(4),M("ngModel",e.editingTask.status),c(),m("ngForOf",e.taskStatuses),c(5),M("ngModel",e.editingTask.priority),c(),m("ngForOf",e.taskPriorities),c(4),M("ngModel",e.editingTask.dueDate),c(4),M("ngModel",e.editingTask.estimatedHours),c(3),M("ngModel",e.editingTask.billable),c(3),M("ngModel",e.editingTask.visibleToClient),c(5),m("disabled",!e.editingTask.name)}}function KDe(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeMilestoneModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4,"Add Milestone"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeMilestoneModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",143)(9,"label"),l(10,"Milestone Name *"),a(),o(11,"input",200),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMilestone.name,r)||(s.editingMilestone.name=r),f(r)}),a()(),o(12,"div",143)(13,"label"),l(14,"Description"),a(),o(15,"textarea",201),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMilestone.description,r)||(s.editingMilestone.description=r),f(r)}),a()(),o(16,"div",143)(17,"label"),l(18,"Due Date"),a(),o(19,"input",203),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMilestone.dueDate,r)||(s.editingMilestone.dueDate=r),f(r)}),a()()(),o(20,"div",138)(21,"button",139),x("click",function(){g(e);let r=p();return f(r.closeMilestoneModal())}),l(22,"Cancel"),a(),o(23,"button",207),x("click",function(){g(e);let r=p();return f(r.saveMilestone())}),l(24,"Save"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.editingMilestone.name),c(4),M("ngModel",e.editingMilestone.description),c(4),M("ngModel",e.editingMilestone.dueDate),c(4),m("disabled",!e.editingMilestone.name)}}function QDe(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.firstName," ",e.lastName)}}function XDe(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeMemberModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4,"Add Member"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeMemberModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",143)(9,"label"),l(10,"Employee *"),a(),o(11,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMember.employeeId,r)||(s.editingMember.employeeId=r),f(r)}),o(12,"option",146),l(13,"Select Employee"),a(),b(14,QDe,2,3,"option",147),a()(),o(15,"div",143)(16,"label"),l(17,"Role"),a(),o(18,"input",208),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMember.role,r)||(s.editingMember.role=r),f(r)}),a()(),o(19,"div",143)(20,"label"),l(21,"Hourly Rate"),a(),o(22,"input",204),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingMember.hourlyRate,r)||(s.editingMember.hourlyRate=r),f(r)}),a()()(),o(23,"div",138)(24,"button",139),x("click",function(){g(e);let r=p();return f(r.closeMemberModal())}),l(25,"Cancel"),a(),o(26,"button",207),x("click",function(){g(e);let r=p();return f(r.saveMember())}),l(27,"Add Member"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.editingMember.employeeId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.employees),c(4),M("ngModel",e.editingMember.role),c(4),M("ngModel",e.editingMember.hourlyRate),c(4),m("disabled",!e.editingMember.employeeId)}}function ZDe(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeFileModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4,"Add File"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeFileModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",143)(9,"label"),l(10,"File Name *"),a(),o(11,"input",200),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingFile.name,r)||(s.editingFile.name=r),f(r)}),a()(),o(12,"div",143)(13,"label"),l(14,"Visibility"),a(),o(15,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingFile.visibility,r)||(s.editingFile.visibility=r),f(r)}),o(16,"option",209),l(17,"Staff Only"),a(),o(18,"option",210),l(19,"Client Only"),a(),o(20,"option",211),l(21,"Everyone"),a()()()(),o(22,"div",138)(23,"button",139),x("click",function(){g(e);let r=p();return f(r.closeFileModal())}),l(24,"Cancel"),a(),o(25,"button",207),x("click",function(){g(e);let r=p();return f(r.saveFile())}),l(26,"Add File"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.editingFile.name),c(4),M("ngModel",e.editingFile.visibility),c(10),m("disabled",!e.editingFile.name)}}function e8e(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4,"Add Note"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",143)(9,"label"),l(10,"Note Content *"),a(),o(11,"textarea",212),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingNote.content,r)||(s.editingNote.content=r),f(r)}),a()()(),o(12,"div",138)(13,"button",139),x("click",function(){g(e);let r=p();return f(r.closeNoteModal())}),l(14,"Cancel"),a(),o(15,"button",207),x("click",function(){g(e);let r=p();return f(r.saveNote())}),l(16,"Add Note"),a()()()()}if(n&2){let e=p();c(11),M("ngModel",e.editingNote.content),c(4),m("disabled",!e.editingNote.content)}}function t8e(n,t){if(n&1&&(o(0,"option",146),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),Ge("",e.firstName," ",e.lastName)}}function n8e(n,t){if(n&1){let e=F();o(0,"div",198),x("click",function(){g(e);let r=p();return f(r.closeTimeLogModal())}),o(1,"div",199),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",131)(3,"h3"),l(4,"Log Time"),a(),o(5,"button",132),x("click",function(){g(e);let r=p();return f(r.closeTimeLogModal())}),y(6,"i",57),a()(),o(7,"div",136)(8,"div",142)(9,"div",143)(10,"label"),l(11,"Date *"),a(),o(12,"input",203),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTimeLog.date,r)||(s.editingTimeLog.date=r),f(r)}),a()(),o(13,"div",143)(14,"label"),l(15,"Hours *"),a(),o(16,"input",213),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTimeLog.hours,r)||(s.editingTimeLog.hours=r),f(r)}),a()()(),o(17,"div",143)(18,"label"),l(19,"Employee"),a(),o(20,"select",202),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTimeLog.employeeId,r)||(s.editingTimeLog.employeeId=r),f(r)}),o(21,"option",146),l(22,"Select Employee"),a(),b(23,t8e,2,3,"option",147),a()(),o(24,"div",143)(25,"label"),l(26,"Description"),a(),o(27,"textarea",201),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTimeLog.description,r)||(s.editingTimeLog.description=r),f(r)}),a()(),o(28,"div",205)(29,"label")(30,"input",206),S("ngModelChange",function(r){g(e);let s=p();return P(s.editingTimeLog.billable,r)||(s.editingTimeLog.billable=r),f(r)}),a(),l(31," Billable"),a()()(),o(32,"div",138)(33,"button",139),x("click",function(){g(e);let r=p();return f(r.closeTimeLogModal())}),l(34,"Cancel"),a(),o(35,"button",207),x("click",function(){g(e);let r=p();return f(r.saveTimeLog())}),l(36,"Log Time"),a()()()()}if(n&2){let e=p();c(12),M("ngModel",e.editingTimeLog.date),c(4),M("ngModel",e.editingTimeLog.hours),c(4),M("ngModel",e.editingTimeLog.employeeId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.employees),c(4),M("ngModel",e.editingTimeLog.description),c(3),M("ngModel",e.editingTimeLog.billable),c(5),m("disabled",!e.editingTimeLog.hours)}}var lM=class n{constructor(t,e,i){this.projectService=t;this.http=e;this.cdr=i}projects=[];clients=[];employees=[];showModal=!1;editMode=!1;viewMode=!1;selectedProject=this.getEmptyProject();activeTab="overview";mainView="grid";searchQuery="";statusFilter="";clientFilter="";billingFilter="";projectStatuses=WL;billingTypes=zL;taskStatuses=qL;taskPriorities=HL;showTaskModal=!1;editingTask={};taskEditIndex=-1;showMilestoneModal=!1;editingMilestone={};showMemberModal=!1;editingMember={};showFileModal=!1;editingFile={};showNoteModal=!1;editingNote={};showTimeLogModal=!1;editingTimeLog={};tagsInput="";draggedProject=null;previewProjectCode="";ngOnInit(){this.loadProjects(),this.loadClients(),this.loadEmployees()}loadProjects(){this.projectService.getAll().subscribe(t=>{this.projects=t,this.cdr.markForCheck()})}loadClients(){this.http.get("/api/customers").subscribe({next:t=>{this.clients=t,this.cdr.markForCheck()},error:()=>{let t=localStorage.getItem("customers");this.clients=t?JSON.parse(t):[],this.cdr.markForCheck()}})}loadEmployees(){this.http.get("/api/employees").subscribe({next:t=>{this.employees=t,this.cdr.markForCheck()},error:()=>{let t=localStorage.getItem("employees");this.employees=t?JSON.parse(t):[],this.cdr.markForCheck()}})}getEmptyProject(){return{name:"",billingType:"FIXED_RATE",status:"NOT_STARTED",progress:0,currency:"USD",allowCustomerViewProject:!0,allowCustomerViewTasks:!1,allowCustomerCommentTasks:!1,allowCustomerViewTaskComments:!1,allowCustomerViewTimesheets:!1,allowCustomerViewFiles:!0,allowCustomerUploadFiles:!1,allowCustomerViewDiscussions:!1,calculatedProgress:"AUTO",billableTasks:!0,invoiceProject:!1,invoiceTasks:!1,invoiceTimesheets:!0,tags:[],tasks:[],milestones:[],files:[],notes:[],timeLogs:[],members:[]}}get filteredProjects(){return this.projects.filter(t=>{let e=!this.searchQuery||t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.projectCode?.toLowerCase().includes(this.searchQuery.toLowerCase()),i=!this.statusFilter||t.status===this.statusFilter,r=!this.clientFilter||t.customerId?.toString()===this.clientFilter,s=!this.billingFilter||t.billingType===this.billingFilter;return e&&i&&r&&s&&!t.deleted})}get totalProjects(){return this.projects.filter(t=>!t.deleted).length}get activeProjects(){return this.projects.filter(t=>t.status==="IN_PROGRESS"&&!t.deleted).length}get completedProjects(){return this.projects.filter(t=>t.status==="COMPLETED"&&!t.deleted).length}get onHoldProjects(){return this.projects.filter(t=>t.status==="ON_HOLD"&&!t.deleted).length}get overdueProjects(){let t=new Date().toISOString().split("T")[0];return this.projects.filter(e=>e.deadline&&e.deadline<t&&e.status!=="COMPLETED"&&!e.deleted).length}get totalBudget(){return this.projects.filter(t=>!t.deleted).reduce((t,e)=>t+(e.estimatedCost||0),0)}get totalLoggedHours(){return this.projects.filter(t=>!t.deleted).reduce((t,e)=>t+(e.totalLoggedTime||0),0)}get totalTasks(){return this.projects.filter(t=>!t.deleted).reduce((t,e)=>t+(e.tasks?.length||0),0)}getProjectsByStatus(t){return this.filteredProjects.filter(e=>e.status===t)}onDragStart(t,e){this.draggedProject=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move")}onDragOver(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}onDrop(t,e){t.preventDefault(),this.draggedProject&&this.draggedProject.status!==e&&this.projectService.update(this.draggedProject.id,{status:e}).subscribe(()=>{this.draggedProject&&(this.draggedProject.status=e,this.cdr.markForCheck())}),this.draggedProject=null}openModal(t,e=!1){if(this.viewMode=e,t){this.editMode=!0,this.selectedProject=me({},t);let i=t.tags;this.tagsInput=Array.isArray(i)?i.join(", "):i||"",this.previewProjectCode=t.projectCode||""}else this.editMode=!1,this.selectedProject=this.getEmptyProject(),this.tagsInput="",this.generatePreviewCode();this.activeTab="overview",this.showModal=!0,this.cdr.markForCheck()}generatePreviewCode(){let t=this.projects.length+1;this.previewProjectCode=`PRJ-${t.toString().padStart(6,"0")}`,this.selectedProject.projectCode=this.previewProjectCode,this.cdr.markForCheck()}closeModal(){this.showModal=!1,this.selectedProject=this.getEmptyProject(),this.viewMode=!1,this.cdr.markForCheck()}saveProject(){if(!this.selectedProject.name)return;let t={name:this.selectedProject.name,description:this.selectedProject.description,projectCode:this.selectedProject.projectCode,status:this.selectedProject.status,billingType:this.selectedProject.billingType,startDate:this.selectedProject.startDate,endDate:this.selectedProject.endDate,deadline:this.selectedProject.deadline,estimatedHours:this.selectedProject.estimatedHours,estimatedCost:this.selectedProject.estimatedCost,hourlyRate:this.selectedProject.hourlyRate,fixedRateAmount:this.selectedProject.fixedRateAmount,progress:this.selectedProject.progress||0,currency:this.selectedProject.currency,customerId:this.selectedProject.customerId,projectManagerId:this.selectedProject.projectManagerId,allowCustomerViewProject:this.selectedProject.allowCustomerViewProject,allowCustomerViewTasks:this.selectedProject.allowCustomerViewTasks,allowCustomerCommentTasks:this.selectedProject.allowCustomerCommentTasks,allowCustomerViewTaskComments:this.selectedProject.allowCustomerViewTaskComments,allowCustomerViewTimesheets:this.selectedProject.allowCustomerViewTimesheets,allowCustomerViewFiles:this.selectedProject.allowCustomerViewFiles,allowCustomerUploadFiles:this.selectedProject.allowCustomerUploadFiles,allowCustomerViewDiscussions:this.selectedProject.allowCustomerViewDiscussions,calculatedProgress:this.selectedProject.calculatedProgress,billableTasks:this.selectedProject.billableTasks,invoiceProject:this.selectedProject.invoiceProject,invoiceTasks:this.selectedProject.invoiceTasks,invoiceTimesheets:this.selectedProject.invoiceTimesheets,tags:this.tagsInput.split(",").map(e=>e.trim()).filter(e=>e).join(",")};this.editMode&&this.selectedProject.id?this.projectService.update(this.selectedProject.id,t).subscribe({next:()=>{this.loadProjects(),this.closeModal(),this.cdr.markForCheck()},error:e=>{console.error("Error updating project:",e),alert("Failed to update project. Please try again.")}}):this.projectService.create(t).subscribe({next:e=>{this.loadProjects(),this.selectedProject=me({},e),this.editMode=!0,this.cdr.markForCheck()},error:e=>{console.error("Error creating project:",e),alert("Failed to create project. Please try again.")}})}deleteProject(t){confirm("Are you sure you want to delete this project?")&&this.projectService.delete(t).subscribe({next:()=>{this.loadProjects(),this.cdr.markForCheck()},error:e=>{console.error("Error deleting project:",e),alert("Failed to delete project. Please try again.")}})}duplicateProject(t){let e=me({},t);delete e.id,delete e.projectCode,e.name=t.name+" (Copy)",e.status="NOT_STARTED",e.progress=0,this.projectService.create(e).subscribe(()=>{this.loadProjects()})}archiveProject(t){this.projectService.update(t.id,{archived:!t.archived}).subscribe(()=>{t.archived=!t.archived,this.cdr.markForCheck()})}getStatusLabel(t){return this.projectStatuses.find(e=>e.value===t)?.label||t}getStatusColor(t){return this.projectStatuses.find(e=>e.value===t)?.color||"secondary"}getBillingTypeLabel(t){return this.billingTypes.find(e=>e.value===t)?.label||t}getClientName(t){return t?this.clients.find(i=>i.id===t)?.name||"Unknown":"No Client"}getEmployeeName(t){if(!t)return"-";let e=this.employees.find(i=>i.id===t);return e?`${e.firstName} ${e.lastName}`:"-"}getEmployeeInitials(t){if(!t)return"?";let e=this.employees.find(i=>i.id===t);return e?`${e.firstName?.charAt(0)||""}${e.lastName?.charAt(0)||""}`:"?"}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getDaysRemaining(t){if(!t)return 0;let e=new Date,r=new Date(t).getTime()-e.getTime();return Math.ceil(r/(1e3*60*60*24))}isOverdue(t){return!t.deadline||t.status==="COMPLETED"?!1:new Date(t.deadline)<new Date}clearFilters(){this.searchQuery="",this.statusFilter="",this.clientFilter="",this.billingFilter=""}openTaskModal(t,e=-1){this.taskEditIndex=e,t?this.editingTask=me({},t):this.editingTask={name:"",status:"TODO",priority:"MEDIUM",billable:!0,visibleToClient:!1},this.showTaskModal=!0}closeTaskModal(){this.showTaskModal=!1,this.editingTask={},this.taskEditIndex=-1}saveTask(){!this.editingTask.name||!this.selectedProject.id||(this.taskEditIndex>=0&&this.selectedProject.tasks?this.projectService.updateTask(this.selectedProject.id,this.selectedProject.tasks[this.taskEditIndex].id,this.editingTask).subscribe(t=>{this.selectedProject.tasks&&(this.selectedProject.tasks[this.taskEditIndex]=t),this.closeTaskModal()}):this.projectService.addTask(this.selectedProject.id,this.editingTask).subscribe(t=>{this.selectedProject.tasks||(this.selectedProject.tasks=[]),this.selectedProject.tasks.push(t),this.closeTaskModal()}))}deleteTask(t){if(!this.selectedProject.id||!this.selectedProject.tasks)return;let e=this.selectedProject.tasks[t];confirm("Delete this task?")&&this.projectService.deleteTask(this.selectedProject.id,e.id).subscribe(()=>{this.selectedProject.tasks?.splice(t,1)})}openMilestoneModal(t){this.editingMilestone=t?me({},t):{name:"",status:"PENDING"},this.showMilestoneModal=!0}closeMilestoneModal(){this.showMilestoneModal=!1,this.editingMilestone={}}saveMilestone(){!this.editingMilestone.name||!this.selectedProject.id||this.projectService.addMilestone(this.selectedProject.id,this.editingMilestone).subscribe(t=>{this.selectedProject.milestones||(this.selectedProject.milestones=[]),this.selectedProject.milestones.push(t),this.closeMilestoneModal()})}deleteMilestone(t){if(!this.selectedProject.id||!this.selectedProject.milestones)return;let e=this.selectedProject.milestones[t];confirm("Delete this milestone?")&&this.projectService.deleteMilestone(this.selectedProject.id,e.id).subscribe(()=>{this.selectedProject.milestones?.splice(t,1)})}openMemberModal(){this.editingMember={role:"Member"},this.showMemberModal=!0,this.cdr.markForCheck()}closeMemberModal(){this.showMemberModal=!1,this.editingMember={},this.cdr.markForCheck()}saveMember(){if(!this.editingMember.employeeId||!this.selectedProject.id)return;let t=this.employees.find(e=>e.id===this.editingMember.employeeId);this.editingMember.employee=t,this.projectService.addMember(this.selectedProject.id,this.editingMember).subscribe({next:e=>{this.selectedProject.members||(this.selectedProject.members=[]),this.selectedProject.members.push(e),this.closeMemberModal(),this.cdr.markForCheck()},error:e=>{console.error("Error adding member:",e),alert("Failed to add member. Please try again.")}})}removeMember(t){if(!this.selectedProject.id||!this.selectedProject.members)return;let e=this.selectedProject.members[t];confirm("Remove this member?")&&this.projectService.removeMember(this.selectedProject.id,e.id).subscribe({next:()=>{this.selectedProject.members?.splice(t,1),this.cdr.markForCheck()},error:i=>{console.error("Error removing member:",i),alert("Failed to remove member. Please try again.")}})}openFileModal(){this.editingFile={name:"",visibility:"STAFF"},this.showFileModal=!0,this.cdr.markForCheck()}closeFileModal(){this.showFileModal=!1,this.editingFile={},this.cdr.markForCheck()}saveFile(){!this.editingFile.name||!this.selectedProject.id||this.projectService.addFile(this.selectedProject.id,this.editingFile).subscribe({next:t=>{this.selectedProject.files||(this.selectedProject.files=[]),this.selectedProject.files.push(t),this.closeFileModal(),this.cdr.markForCheck()},error:t=>{console.error("Error adding file:",t),alert("Failed to add file. Please try again.")}})}deleteFile(t){if(!this.selectedProject.id||!this.selectedProject.files)return;let e=this.selectedProject.files[t];confirm("Delete this file?")&&this.projectService.deleteFile(this.selectedProject.id,e.id).subscribe({next:()=>{this.selectedProject.files?.splice(t,1),this.cdr.markForCheck()},error:i=>{console.error("Error deleting file:",i),alert("Failed to delete file. Please try again.")}})}openNoteModal(){this.editingNote={content:""},this.showNoteModal=!0,this.cdr.markForCheck()}closeNoteModal(){this.showNoteModal=!1,this.editingNote={},this.cdr.markForCheck()}saveNote(){!this.editingNote.content||!this.selectedProject.id||this.projectService.addNote(this.selectedProject.id,this.editingNote).subscribe({next:t=>{this.selectedProject.notes||(this.selectedProject.notes=[]),this.selectedProject.notes.push(t),this.closeNoteModal(),this.cdr.markForCheck()},error:t=>{console.error("Error adding note:",t),alert("Failed to add note. Please try again.")}})}deleteNote(t){if(!this.selectedProject.id||!this.selectedProject.notes)return;let e=this.selectedProject.notes[t];confirm("Delete this note?")&&this.projectService.deleteNote(this.selectedProject.id,e.id).subscribe({next:()=>{this.selectedProject.notes?.splice(t,1),this.cdr.markForCheck()},error:i=>{console.error("Error deleting note:",i),alert("Failed to delete note. Please try again.")}})}openTimeLogModal(){this.editingTimeLog={date:new Date().toISOString().split("T")[0],hours:0,billable:!0},this.showTimeLogModal=!0,this.cdr.markForCheck()}closeTimeLogModal(){this.showTimeLogModal=!1,this.editingTimeLog={},this.cdr.markForCheck()}saveTimeLog(){!this.editingTimeLog.hours||!this.selectedProject.id||this.projectService.addTimeLog(this.selectedProject.id,this.editingTimeLog).subscribe({next:t=>{this.selectedProject.timeLogs||(this.selectedProject.timeLogs=[]),this.selectedProject.timeLogs.push(t),this.selectedProject.totalLoggedTime=(this.selectedProject.totalLoggedTime||0)+t.hours,t.billable&&(this.selectedProject.totalBillableTime=(this.selectedProject.totalBillableTime||0)+t.hours),this.closeTimeLogModal(),this.cdr.markForCheck()},error:t=>{console.error("Error adding time log:",t),alert("Failed to add time log. Please try again.")}})}deleteTimeLog(t){if(!this.selectedProject.id||!this.selectedProject.timeLogs)return;let e=this.selectedProject.timeLogs[t];confirm("Delete this time log?")&&this.projectService.deleteTimeLog(this.selectedProject.id,e.id).subscribe({next:()=>{this.selectedProject.totalLoggedTime=(this.selectedProject.totalLoggedTime||0)-e.hours,e.billable&&(this.selectedProject.totalBillableTime=(this.selectedProject.totalBillableTime||0)-e.hours),this.selectedProject.timeLogs?.splice(t,1),this.cdr.markForCheck()},error:i=>{console.error("Error deleting time log:",i),alert("Failed to delete time log. Please try again.")}})}getTaskStatusLabel(t){return this.taskStatuses.find(e=>e.value===t)?.label||t}getTaskPriorityLabel(t){return this.taskPriorities.find(e=>e.value===t)?.label||t}getTaskPriorityColor(t){return this.taskPriorities.find(e=>e.value===t)?.color||"secondary"}calculateTaskProgress(){if(!this.selectedProject.tasks||this.selectedProject.tasks.length===0)return 0;let t=this.selectedProject.tasks.filter(e=>e.status==="COMPLETED").length;return Math.round(t/this.selectedProject.tasks.length*100)}static \u0275fac=function(e){return new(e||n)(V(x0),V(Ft),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-project-management"]],decls:113,vars:33,consts:[[1,"projects-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"dashboard-stats"],[1,"stat-card",3,"click"],[1,"stat-icon","total"],[1,"fas","fa-folder-open"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","active"],[1,"fas","fa-spinner"],[1,"stat-icon","completed"],[1,"fas","fa-check-circle"],[1,"stat-icon","onhold"],[1,"fas","fa-pause-circle"],[1,"stat-card","overdue"],[1,"stat-icon","overdue"],[1,"fas","fa-exclamation-triangle"],[1,"stat-card","budget"],[1,"stat-icon","budget"],[1,"fas","fa-dollar-sign"],[1,"stat-card","hours"],[1,"stat-icon","hours"],[1,"fas","fa-clock"],[1,"stat-card","tasks"],[1,"stat-icon","tasks"],[1,"fas","fa-tasks"],[1,"toolbar"],[1,"toolbar-left"],[1,"view-toggle"],["title","Grid View",3,"click"],[1,"fas","fa-th-large"],["title","Kanban View",3,"click"],[1,"fas","fa-columns"],["title","List View",3,"click"],[1,"fas","fa-list"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search projects...",3,"ngModelChange","ngModel"],[1,"toolbar-right"],[1,"filter-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],["class","projects-grid",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","projects-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],["class","modal-overlay sub-modal",3,"click",4,"ngIf"],[3,"value"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"projects-grid"],["class","project-card",3,"overdue",4,"ngFor","ngForOf"],[1,"project-card"],[1,"card-header"],[1,"project-code"],[1,"card-actions-menu"],["title","View",1,"action-btn",3,"click"],[1,"fas","fa-eye"],["title","Edit",1,"action-btn",3,"click"],[1,"fas","fa-edit"],["title","Duplicate",1,"action-btn",3,"click"],[1,"fas","fa-copy"],["title","Delete",1,"action-btn","danger",3,"click"],[1,"fas","fa-trash"],[1,"card-body"],[1,"project-name"],[1,"project-client"],[1,"fas","fa-user"],[1,"project-meta"],[1,"billing-type"],[1,"fas","fa-file-invoice-dollar"],["class","budget",4,"ngIf"],[1,"progress-section"],[1,"progress-header"],[1,"progress-bar"],[1,"progress-fill"],[1,"date-section"],[1,"date-item"],[1,"date-label"],[1,"date-value"],[1,"card-footer"],[1,"status-badge",3,"ngClass"],[1,"stats-mini"],["title","Tasks"],["title","Hours"],["class","overdue-badge",4,"ngIf"],[1,"budget"],[1,"overdue-badge"],[1,"fas","fa-exclamation-circle"],[1,"kanban-board"],["class","kanban-column",3,"dragover","drop",4,"ngFor","ngForOf"],[1,"kanban-column",3,"dragover","drop"],[1,"column-header",3,"ngClass"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","kanban-card","draggable","true",3,"dragstart","click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],["draggable","true",1,"kanban-card",3,"dragstart","click"],[1,"kanban-card-header"],[1,"progress-mini"],[1,"kanban-card-footer"],[1,"deadline"],[1,"fas","fa-calendar"],["class","member-avatars",4,"ngIf"],[1,"member-avatars"],["class","avatar",4,"ngFor","ngForOf"],["class","avatar more",4,"ngIf"],[1,"avatar"],[1,"avatar","more"],[1,"empty-column"],[1,"projects-list"],[1,"data-table"],[3,"overdue",4,"ngFor","ngForOf"],[1,"project-info"],[1,"progress-cell"],[1,"action-buttons"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"empty-state"],[1,"fas","fa-project-diagram"],[1,"modal-overlay"],[1,"modal","modal-xl",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-tabs"],[3,"click"],[3,"active","click",4,"ngIf"],[1,"modal-body"],["class","tab-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"tab-content"],[1,"form-row"],[1,"form-group"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","min","0","max","100",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","placeholder","0.00",1,"form-control",3,"ngModelChange","ngModel","disabled"],["rows","3",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","design, urgent, phase1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","alert alert-info",4,"ngIf"],[1,"section-header"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","table-container",4,"ngIf"],["class","empty-state-box",4,"ngIf"],[1,"alert","alert-info"],[1,"fas","fa-info-circle"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"empty-state-box"],[1,"permissions-grid"],[1,"checkbox-item"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],["class","form-group",4,"ngIf"],["value","USD"],["value","EUR"],["value","GBP"],["value","INR"],["class","stats-row",4,"ngIf"],[1,"stats-row"],[1,"stat-card"],[1,"progress-info"],[1,"badge"],[1,"badge",3,"ngClass"],["class","milestones-list",4,"ngIf"],[1,"milestones-list"],["class","milestone-item",4,"ngFor","ngForOf"],[1,"milestone-item"],[1,"milestone-info"],[1,"due-date"],["class","milestone-actions",4,"ngIf"],[1,"milestone-actions"],[1,"fas","fa-file"],["class","notes-list",4,"ngIf"],[1,"notes-list"],["class","note-item",4,"ngFor","ngForOf"],[1,"note-item"],[1,"note-content"],[1,"note-footer"],[1,"note-date"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"modal-overlay","sub-modal",3,"click"],[1,"modal","modal-medium",3,"click"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-row"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],["type","text","placeholder","e.g., Developer, Designer",1,"form-control",3,"ngModelChange","ngModel"],["value","STAFF"],["value","CLIENT"],["value","ALL"],["rows","4","placeholder","Enter your note...",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.25","min","0",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Project Management"),a(),o(5,"span",3),l(6,"Manage and track all your projects"),a()(),o(7,"div",4)(8,"button",5),x("click",function(){return i.openModal()}),y(9,"i",6),l(10," New Project "),a()()(),o(11,"div",7)(12,"div",8),x("click",function(){return i.statusFilter=""}),o(13,"div",9),y(14,"i",10),a(),o(15,"div",11)(16,"span",12),l(17),a(),o(18,"span",13),l(19,"Total Projects"),a()()(),o(20,"div",8),x("click",function(){return i.statusFilter="IN_PROGRESS"}),o(21,"div",14),y(22,"i",15),a(),o(23,"div",11)(24,"span",12),l(25),a(),o(26,"span",13),l(27,"In Progress"),a()()(),o(28,"div",8),x("click",function(){return i.statusFilter="COMPLETED"}),o(29,"div",16),y(30,"i",17),a(),o(31,"div",11)(32,"span",12),l(33),a(),o(34,"span",13),l(35,"Completed"),a()()(),o(36,"div",8),x("click",function(){return i.statusFilter="ON_HOLD"}),o(37,"div",18),y(38,"i",19),a(),o(39,"div",11)(40,"span",12),l(41),a(),o(42,"span",13),l(43,"On Hold"),a()()(),o(44,"div",20)(45,"div",21),y(46,"i",22),a(),o(47,"div",11)(48,"span",12),l(49),a(),o(50,"span",13),l(51,"Overdue"),a()()(),o(52,"div",23)(53,"div",24),y(54,"i",25),a(),o(55,"div",11)(56,"span",12),l(57),a(),o(58,"span",13),l(59,"Total Budget"),a()()(),o(60,"div",26)(61,"div",27),y(62,"i",28),a(),o(63,"div",11)(64,"span",12),l(65),a(),o(66,"span",13),l(67,"Hours Logged"),a()()(),o(68,"div",29)(69,"div",30),y(70,"i",31),a(),o(71,"div",11)(72,"span",12),l(73),a(),o(74,"span",13),l(75,"Total Tasks"),a()()()(),o(76,"div",32)(77,"div",33)(78,"div",34)(79,"button",35),x("click",function(){return i.mainView="grid"}),y(80,"i",36),a(),o(81,"button",37),x("click",function(){return i.mainView="kanban"}),y(82,"i",38),a(),o(83,"button",39),x("click",function(){return i.mainView="list"}),y(84,"i",40),a()(),o(85,"div",41),y(86,"i",42),o(87,"input",43),S("ngModelChange",function(s){return P(i.searchQuery,s)||(i.searchQuery=s),s}),a()()(),o(88,"div",44)(89,"select",45),S("ngModelChange",function(s){return P(i.statusFilter,s)||(i.statusFilter=s),s}),o(90,"option",46),l(91,"All Statuses"),a(),b(92,b6e,2,2,"option",47),a(),o(93,"select",45),S("ngModelChange",function(s){return P(i.clientFilter,s)||(i.clientFilter=s),s}),o(94,"option",46),l(95,"All Clients"),a(),b(96,M6e,2,2,"option",47),a(),o(97,"select",45),S("ngModelChange",function(s){return P(i.billingFilter,s)||(i.billingFilter=s),s}),o(98,"option",46),l(99,"All Billing Types"),a(),b(100,S6e,2,2,"option",47),a(),b(101,P6e,3,0,"button",48),a()(),b(102,T6e,2,1,"div",49)(103,L6e,2,1,"div",50)(104,U6e,27,2,"div",51)(105,j6e,4,0,"div",52),a(),b(106,HDe,35,25,"div",53)(107,JDe,55,15,"div",54)(108,KDe,25,4,"div",54)(109,XDe,28,6,"div",54)(110,ZDe,27,3,"div",54)(111,e8e,17,2,"div",54)(112,n8e,37,8,"div",54)),e&2&&(c(17),_(i.totalProjects),c(8),_(i.activeProjects),c(8),_(i.completedProjects),c(8),_(i.onHoldProjects),c(8),_(i.overdueProjects),c(8),_(i.formatCurrency(i.totalBudget)),c(8),D("",i.totalLoggedHours,"h"),c(8),_(i.totalTasks),c(6),ie("active",i.mainView==="grid"),c(2),ie("active",i.mainView==="kanban"),c(2),ie("active",i.mainView==="list"),c(4),M("ngModel",i.searchQuery),c(2),M("ngModel",i.statusFilter),c(3),m("ngForOf",i.projectStatuses),c(),M("ngModel",i.clientFilter),c(3),m("ngForOf",i.clients),c(),M("ngModel",i.billingFilter),c(3),m("ngForOf",i.billingTypes),c(),m("ngIf",i.searchQuery||i.statusFilter||i.clientFilter||i.billingFilter),c(),m("ngIf",i.mainView==="grid"),c(),m("ngIf",i.mainView==="kanban"),c(),m("ngIf",i.mainView==="list"),c(),m("ngIf",i.filteredProjects.length===0&&i.mainView==="grid"),c(),m("ngIf",i.showModal),c(),m("ngIf",i.showTaskModal),c(),m("ngIf",i.showMilestoneModal),c(),m("ngIf",i.showMemberModal),c(),m("ngIf",i.showFileModal),c(),m("ngIf",i.showNoteModal),c(),m("ngIf",i.showTimeLogModal))},dependencies:[At,ot,Se,be,Vt,je,We,Ie,Mt,Yt,Ue,Oe,Xt,fr,Ee,Rt],styles:[".projects-container[_ngcontent-%COMP%]{padding:24px;background:#f5f6fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1a1a2e;font-size:28px;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-top:4px}.dashboard-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #0000000f;cursor:pointer;transition:all .2s}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.total[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#388e3c}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.completed[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.onhold[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.overdue[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.budget[_ngcontent-%COMP%]{background:#e0f7fa;color:#00838f}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.hours[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.tasks[_ngcontent-%COMP%]{background:#f1f8e9;color:#689f38}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1a1a2e}.dashboard-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.dashboard-stats[_ngcontent-%COMP%]   .stat-card.overdue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#d32f2f}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:24px;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 14px;border:none;background:#fff;color:#666;cursor:pointer;transition:all .2s}.toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:teal;color:#fff}.toolbar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:8px 14px;min-width:280px}.toolbar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;margin-right:10px}.toolbar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;flex:1;font-size:14px}.toolbar[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;background:#fff;min-width:140px;cursor:pointer}.toolbar[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000000f;transition:all .2s;position:relative}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f}.project-card[_ngcontent-%COMP%]:hover   .card-actions-menu[_ngcontent-%COMP%]{opacity:1}.project-card.overdue[_ngcontent-%COMP%]{border-left:4px solid #d32f2f}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .project-code[_ngcontent-%COMP%]{font-size:12px;color:teal;font-weight:600;background:#e0f2f1;padding:4px 10px;border-radius:4px}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions-menu[_ngcontent-%COMP%]{display:flex;gap:4px;opacity:0;transition:opacity .2s}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions-menu[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:6px 8px;border:none;background:transparent;color:#666;cursor:pointer;border-radius:4px}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions-menu[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#333}.project-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions-menu[_ngcontent-%COMP%]   .action-btn.danger[_ngcontent-%COMP%]:hover{background:#ffebee;color:#d32f2f}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#1a1a2e}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-client[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:#666}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-client[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;color:#999}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;font-size:13px;color:#666}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]   .budget[_ngcontent-%COMP%]{font-weight:600;color:#00838f}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]{margin-bottom:16px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#666;margin-bottom:6px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .date-section[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:16px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .date-section[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .date-section[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:11px;color:#999;text-transform:uppercase}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .date-section[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .date-value[_ngcontent-%COMP%]{font-size:13px;color:#333;font-weight:500}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #f0f0f0}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .stats-mini[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#666}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .stats-mini[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .overdue-badge[_ngcontent-%COMP%]{margin-top:12px;padding:8px 12px;background:#ffebee;color:#d32f2f;border-radius:6px;font-size:12px;font-weight:500}.project-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .overdue-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.progress-bar[_ngcontent-%COMP%]{height:6px;background:#e9ecef;border-radius:3px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,teal,#00a0a0);transition:width .3s}.progress-bar[_ngcontent-%COMP%]   .progress-fill.complete[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf50,#81c784)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase}.status-badge.status-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#616161}.status-badge.status-primary[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.status-badge.status-warning[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.status-badge.status-success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.status-danger[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;overflow-x:auto;padding-bottom:16px}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:12px;min-width:280px;max-height:calc(100vh - 340px);display:flex;flex-direction:column}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{padding:16px;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;align-items:center}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header.header-secondary[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header.header-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header.header-warning[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header.header-success[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header.header-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{background:#ffffff40;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:600}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .column-body[_ngcontent-%COMP%]{padding:12px;overflow-y:auto;flex:1;display:flex;flex-direction:column;gap:12px}.kanban-board[_ngcontent-%COMP%]   .kanban-column[_ngcontent-%COMP%]   .empty-column[_ngcontent-%COMP%]{text-align:center;padding:24px;color:#999;font-size:13px}.kanban-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:14px;cursor:grab;box-shadow:0 1px 3px #0000001a;transition:all .2s}.kanban-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #00000026}.kanban-card[_ngcontent-%COMP%]:active{cursor:grabbing}.kanban-card[_ngcontent-%COMP%]   .kanban-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.kanban-card[_ngcontent-%COMP%]   .kanban-card-header[_ngcontent-%COMP%]   .project-code[_ngcontent-%COMP%]{font-size:11px;color:teal;font-weight:600}.kanban-card[_ngcontent-%COMP%]   .kanban-card-header[_ngcontent-%COMP%]   .budget[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#00838f}.kanban-card[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{margin:0 0 6px;font-size:14px;font-weight:600;color:#1a1a2e}.kanban-card[_ngcontent-%COMP%]   .project-client[_ngcontent-%COMP%]{margin:0 0 10px;font-size:12px;color:#666}.kanban-card[_ngcontent-%COMP%]   .progress-mini[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}.kanban-card[_ngcontent-%COMP%]   .progress-mini[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{flex:1;height:4px}.kanban-card[_ngcontent-%COMP%]   .progress-mini[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .deadline[_ngcontent-%COMP%]{font-size:11px;color:#666}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .deadline[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .deadline.overdue[_ngcontent-%COMP%]{color:#d32f2f;font-weight:600}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .member-avatars[_ngcontent-%COMP%]{display:flex}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .member-avatars[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:teal;color:#fff;font-size:10px;font-weight:600;display:flex;align-items:center;justify-content:center;margin-left:-6px;border:2px solid white}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .member-avatars[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]:first-child{margin-left:0}.kanban-card[_ngcontent-%COMP%]   .kanban-card-footer[_ngcontent-%COMP%]   .member-avatars[_ngcontent-%COMP%]   .avatar.more[_ngcontent-%COMP%]{background:#666}.projects-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000000f}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #f0f0f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#fafafa;font-weight:600;font-size:12px;color:#666;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.data-table[_ngcontent-%COMP%]   tr.overdue[_ngcontent-%COMP%]{background:#fff8f8}.data-table[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.data-table[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-code[_ngcontent-%COMP%]{font-size:11px;color:teal;font-weight:600}.data-table[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-weight:500}.data-table[_ngcontent-%COMP%]   .progress-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.data-table[_ngcontent-%COMP%]   .progress-cell[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:80px}.data-table[_ngcontent-%COMP%]   .progress-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#666}.data-table[_ngcontent-%COMP%]   .overdue-text[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.data-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn.btn-info[_ngcontent-%COMP%]:hover{background:#138496}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay.sub-modal[_ngcontent-%COMP%]{z-index:1100}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000026}.modal.modal-xl[_ngcontent-%COMP%]{max-width:1000px}.modal.modal-medium[_ngcontent-%COMP%]{max-width:500px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:1px solid #eee;overflow-x:auto}.modal-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;border:none;background:none;font-size:14px;font-weight:500;color:#666;cursor:pointer;white-space:nowrap;border-bottom:2px solid transparent;transition:all .2s}.modal-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:teal}.modal-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:teal;border-bottom-color:teal}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee}.tab-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 20px;font-size:16px;color:#333}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.permissions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#333;cursor:pointer}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#008080}.checkbox-row[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:16px}.checkbox-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:24px}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;text-align:center}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:4px}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:20px;font-weight:600;color:teal}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:12px;color:#666;text-transform:uppercase}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500;background:#e9ecef;color:#333}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.empty-state-box[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:#f8f9fa;border-radius:8px;color:#666}.empty-state-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.progress-info[_ngcontent-%COMP%]{margin-bottom:16px}.progress-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;color:#666;margin-bottom:8px}.milestones-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.milestone-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;background:#f8f9fa;border-radius:8px}.milestone-item[_ngcontent-%COMP%]   .milestone-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;color:#333}.milestone-item[_ngcontent-%COMP%]   .milestone-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#666}.milestone-item[_ngcontent-%COMP%]   .milestone-info[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{font-size:12px;color:#999}.milestone-item[_ngcontent-%COMP%]   .milestone-info[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.notes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.note-item[_ngcontent-%COMP%]{padding:16px;background:#fffef0;border-left:4px solid #ffc107;border-radius:4px}.note-item[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-bottom:12px;white-space:pre-wrap}.note-item[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.note-item[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]   .note-date[_ngcontent-%COMP%]{font-size:12px;color:#999}@media(max-width:1200px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(max-width:900px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media(max-width:768px){.form-row[_ngcontent-%COMP%], .permissions-grid[_ngcontent-%COMP%], .stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-tabs[_ngcontent-%COMP%]{flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{min-width:100%}.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.dashboard-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:16px;display:flex;align-items:center;gap:10px}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.alert.alert-info[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;border:1px solid #90caf9}"],changeDetection:0})};function i8e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td"),l(2),a(),o(3,"td")(4,"span",10),l(5),a()(),o(6,"td")(7,"div",11)(8,"button",12),x("click",function(){let r=g(e).$implicit,s=p();return f(s.openModal(r))}),y(9,"i",13),a(),o(10,"button",14),x("click",function(){let r=g(e).$implicit,s=p();return f(s.toggleStatus(r))}),y(11,"i",15),a(),o(12,"button",16),x("click",function(){let r=g(e).$implicit,s=p();return f(s.deleteType(r.id))}),y(13,"i",17),a()()()()}if(n&2){let e=t.$implicit;c(2),_(e.name),c(2),m("ngClass",e.active?"active":"inactive"),c(),D(" ",e.active?"Active":"Inactive"," "),c(5),m("ngClass",e.active?"btn-warning":"btn-success")("title",e.active?"Deactivate":"Activate"),c(),m("ngClass",e.active?"fa-ban":"fa-check")}}function r8e(n,t){n&1&&(o(0,"div",18),y(1,"i",19),o(2,"p"),l(3,'No expense types configured. Click "Add Expense Type" to create one.'),a()())}function o8e(n,t){if(n&1){let e=F();o(0,"div",20)(1,"div",21),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",22)(3,"h3"),l(4),a(),o(5,"button",23),x("click",function(){g(e);let r=p();return f(r.showModal=!1)}),y(6,"i",24),a()(),o(7,"div",25)(8,"div",26)(9,"label"),l(10,"Name *"),a(),o(11,"input",27),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedType.name,r)||(s.selectedType.name=r),f(r)}),a()(),o(12,"div",28)(13,"label")(14,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.selectedType.active,r)||(s.selectedType.active=r),f(r)}),a(),l(15," Active "),a()()(),o(16,"div",30)(17,"button",31),x("click",function(){g(e);let r=p();return f(r.closeModal())}),l(18,"Cancel"),a(),o(19,"button",32),x("click",function(){g(e);let r=p();return f(r.saveType())}),l(20),a()()()()}if(n&2){let e=p();c(4),D("",e.editMode?"Edit":"Add"," Expense Type"),c(7),M("ngModel",e.selectedType.name),c(3),M("ngModel",e.selectedType.active),c(5),m("disabled",!e.selectedType.name.trim()),c(),D(" ",e.editMode?"Update":"Save"," ")}}var cM=class n{expenseTypes=[];showModal=!1;editMode=!1;selectedType={id:0,name:"",active:!0};ngOnInit(){this.loadExpenseTypes()}loadExpenseTypes(){let t=localStorage.getItem("expenseTypes");t?this.expenseTypes=JSON.parse(t):(this.expenseTypes=[{id:1,name:"Food Expense",active:!0},{id:2,name:"Travel Expense",active:!0},{id:3,name:"Accommodation",active:!0},{id:4,name:"Transportation",active:!0},{id:5,name:"Office Supplies",active:!0},{id:6,name:"Equipment",active:!0},{id:7,name:"Software/Subscription",active:!0},{id:8,name:"Communication",active:!0},{id:9,name:"Entertainment",active:!0},{id:10,name:"Medical",active:!0},{id:11,name:"Training/Education",active:!0},{id:12,name:"Miscellaneous",active:!0}],this.saveToStorage())}saveToStorage(){localStorage.setItem("expenseTypes",JSON.stringify(this.expenseTypes))}openModal(t){t?(this.editMode=!0,this.selectedType=me({},t)):(this.editMode=!1,this.selectedType={id:0,name:"",active:!0}),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedType={id:0,name:"",active:!0}}saveType(){if(this.selectedType.name.trim()){if(this.editMode){let t=this.expenseTypes.findIndex(e=>e.id===this.selectedType.id);t!==-1&&(this.expenseTypes[t]=me({},this.selectedType))}else{let t=Math.max(...this.expenseTypes.map(e=>e.id),0);this.selectedType.id=t+1,this.expenseTypes.push(me({},this.selectedType))}this.saveToStorage(),this.closeModal()}}toggleStatus(t){t.active=!t.active,this.saveToStorage()}deleteType(t){confirm("Are you sure you want to delete this expense type?")&&(this.expenseTypes=this.expenseTypes.filter(e=>e.id!==t),this.saveToStorage())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-expense-types-settings"]],decls:22,vars:3,consts:[[1,"expense-types-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"content-card"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm",3,"click","ngClass","title"],[1,"fas",3,"ngClass"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"empty-state"],[1,"fas","fa-tags"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter expense type name",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Expense Types"),a(),o(4,"button",2),x("click",function(){return i.openModal()}),y(5,"i",3),l(6," Add Expense Type "),a()(),o(7,"div",4)(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),l(13,"Name"),a(),o(14,"th"),l(15,"Status"),a(),o(16,"th"),l(17,"Actions"),a()()(),o(18,"tbody"),b(19,i8e,14,6,"tr",7),a()()(),b(20,r8e,4,0,"div",8),a()(),b(21,o8e,21,5,"div",9)),e&2&&(c(19),m("ngForOf",i.expenseTypes),c(),m("ngIf",i.expenseTypes.length===0),c(),m("ngIf",i.showModal))},dependencies:[At,ot,Se,be,Vt,Ie,Yt,Oe,Ee,Rt],styles:[".expense-types-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:12px;color:#666;text-transform:uppercase}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.btn.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.btn.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:450px;box-shadow:0 4px 20px #00000026}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:14px;font-weight:500;color:#333}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.form-group.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}"]})};var Sr=class n{constructor(t){this.http=t}baseUrl="/api/accounting";getDashboard(){return this.http.get(`${this.baseUrl}/dashboard`)}getAllAccounts(){return this.http.get(`${this.baseUrl}/accounts`)}getActiveAccounts(){return this.http.get(`${this.baseUrl}/accounts/active`)}getPostableAccounts(){return this.http.get(`${this.baseUrl}/accounts/postable`)}getAccountsByType(t){return this.http.get(`${this.baseUrl}/accounts/type/${t}`)}getAccountById(t){return this.http.get(`${this.baseUrl}/accounts/${t}`)}createAccount(t){return this.http.post(`${this.baseUrl}/accounts`,t)}updateAccount(t,e){return this.http.put(`${this.baseUrl}/accounts/${t}`,e)}deleteAccount(t){return this.http.delete(`${this.baseUrl}/accounts/${t}`)}getAllCategories(){return this.http.get(`${this.baseUrl}/categories`)}createCategory(t){return this.http.post(`${this.baseUrl}/categories`,t)}initializeChartOfAccounts(){return this.http.post(`${this.baseUrl}/initialize`,{})}getAllJournalEntries(){return this.http.get(`${this.baseUrl}/journal-entries`)}getJournalEntriesByStatus(t){return this.http.get(`${this.baseUrl}/journal-entries/status/${t}`)}getJournalEntriesByDateRange(t,e){let i=new ki().set("startDate",t).set("endDate",e);return this.http.get(`${this.baseUrl}/journal-entries/date-range`,{params:i})}getJournalEntryById(t){return this.http.get(`${this.baseUrl}/journal-entries/${t}`)}createJournalEntry(t){return this.http.post(`${this.baseUrl}/journal-entries`,t)}postJournalEntry(t){return this.http.post(`${this.baseUrl}/journal-entries/${t}/post`,{})}reverseJournalEntry(t){return this.http.post(`${this.baseUrl}/journal-entries/${t}/reverse`,{})}deleteJournalEntry(t){return this.http.delete(`${this.baseUrl}/journal-entries/${t}`)}getAccountLedger(t,e,i){let r=new ki().set("startDate",e).set("endDate",i);return this.http.get(`${this.baseUrl}/ledger/${t}`,{params:r})}getAllBankAccounts(){return this.http.get(`${this.baseUrl}/bank-accounts`)}getActiveBankAccounts(){return this.http.get(`${this.baseUrl}/bank-accounts/active`)}getBankAccountById(t){return this.http.get(`${this.baseUrl}/bank-accounts/${t}`)}createBankAccount(t){return this.http.post(`${this.baseUrl}/bank-accounts`,t)}updateBankAccount(t,e){return this.http.put(`${this.baseUrl}/bank-accounts/${t}`,e)}deleteBankAccount(t){return this.http.delete(`${this.baseUrl}/bank-accounts/${t}`)}getBankTransactions(t){return this.http.get(`${this.baseUrl}/bank-accounts/${t}/transactions`)}getPendingTransactions(){return this.http.get(`${this.baseUrl}/transactions/pending`)}createTransaction(t){return this.http.post(`${this.baseUrl}/transactions`,t)}confirmTransaction(t,e){let i=new ki;return e&&(i=i.set("accountId",e.toString())),this.http.post(`${this.baseUrl}/transactions/${t}/confirm`,{},{params:i})}createTransfer(t){return this.http.post(`${this.baseUrl}/transfers`,t)}getBankingRules(){return this.http.get(`${this.baseUrl}/banking-rules`)}createBankingRule(t){return this.http.post(`${this.baseUrl}/banking-rules`,t)}getAllBills(){return this.http.get(`${this.baseUrl}/bills`)}getUnpaidBills(){return this.http.get(`${this.baseUrl}/bills/unpaid`)}getAllBudgets(){return this.http.get(`${this.baseUrl}/budgets`)}getBudgetsByYear(t){return this.http.get(`${this.baseUrl}/budgets/year/${t}`)}createBudget(t){return this.http.post(`${this.baseUrl}/budgets`,t)}getAllReconciliations(){return this.http.get(`${this.baseUrl}/reconciliations`)}getReconciliationsByBankAccount(t){return this.http.get(`${this.baseUrl}/reconciliations/bank-account/${t}`)}createReconciliation(t){return this.http.post(`${this.baseUrl}/reconciliations`,t)}getTrialBalance(t){let e=new ki().set("asOfDate",t);return this.http.get(`${this.baseUrl}/reports/trial-balance`,{params:e})}getIncomeStatement(t,e){let i=new ki().set("startDate",t).set("endDate",e);return this.http.get(`${this.baseUrl}/reports/income-statement`,{params:i})}getBalanceSheet(t){let e=new ki().set("asOfDate",t);return this.http.get(`${this.baseUrl}/reports/balance-sheet`,{params:e})}getDepositDetail(t,e){let i=new ki;return t&&(i=i.set("startDate",t)),e&&(i=i.set("endDate",e)),this.http.get(`${this.baseUrl}/reports/deposit-detail`,{params:i})}getIncomeByCustomer(t,e){let i=new ki;return t&&(i=i.set("startDate",t)),e&&(i=i.set("endDate",e)),this.http.get(`${this.baseUrl}/reports/income-by-customer`,{params:i})}getChequeDetail(t,e){let i=new ki;return t&&(i=i.set("startDate",t)),e&&(i=i.set("endDate",e)),this.http.get(`${this.baseUrl}/reports/cheque-detail`,{params:i})}getBudgetOverview(t){let e=new ki;return t&&(e=e.set("fiscalYear",t.toString())),this.http.get(`${this.baseUrl}/reports/budget-overview`,{params:e})}getBudgetVsActual(t){let e=new ki().set("budgetId",t.toString());return this.http.get(`${this.baseUrl}/reports/budget-vs-actual`,{params:e})}getBudgetPerformance(t){let e=new ki().set("budgetId",t.toString());return this.http.get(`${this.baseUrl}/reports/budget-performance`,{params:e})}getARAgingSummary(){return this.http.get(`${this.baseUrl}/reports/ar-aging-summary`)}getARAgingDetail(){return this.http.get(`${this.baseUrl}/reports/ar-aging-detail`)}getAPAgingSummary(){return this.http.get(`${this.baseUrl}/reports/ap-aging-summary`)}getAPAgingDetail(){return this.http.get(`${this.baseUrl}/reports/ap-aging-detail`)}getGeneralSettings(){return this.http.get(`${this.baseUrl}/settings/general`)}updateGeneralSettings(t){return this.http.put(`${this.baseUrl}/settings/general`,t)}getAccountDetailTypes(){return this.http.get(`${this.baseUrl}/settings/account-detail-types`)}createAccountDetailType(t){return this.http.post(`${this.baseUrl}/settings/account-detail-types`,t)}getPlaidSettings(){return this.http.get(`${this.baseUrl}/settings/plaid`)}updatePlaidSettings(t){return this.http.put(`${this.baseUrl}/settings/plaid`,t)}getIncomeStatementSettings(){return this.http.get(`${this.baseUrl}/settings/income-statement`)}updateIncomeStatementSettings(t){return this.http.put(`${this.baseUrl}/settings/income-statement`,t)}getCurrencyRates(){return this.http.get(`${this.baseUrl}/settings/currency-rates`)}createCurrencyRate(t){return this.http.post(`${this.baseUrl}/settings/currency-rates`,t)}updateCurrencyRate(t,e){return this.http.put(`${this.baseUrl}/settings/currency-rates/${t}`,e)}deleteCurrencyRate(t){return this.http.delete(`${this.baseUrl}/settings/currency-rates/${t}`)}fetchLatestCurrencyRates(){return this.http.post(`${this.baseUrl}/settings/currency-rates/fetch`,{})}static \u0275fac=function(e){return new(e||n)(it(Ft))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})};function a8e(n,t){n&1&&(o(0,"div",8),y(1,"i",9),o(2,"p"),l(3,"Loading dashboard..."),a()())}function s8e(n,t){n&1&&(o(0,"tr")(1,"td",62),y(2,"i",59),o(3,"p"),l(4,"No bank accounts configured"),a()()())}function l8e(n,t){if(n&1&&(o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td")(7,"span",63),l(8),a()(),o(9,"td",50)(10,"span",64),l(11),a()()()),n&2){let e=t.$implicit,i=p(2);c(3),_(e.accountName),c(2),_(e.bankName||"-"),c(3),_(e.accountType),c(2),m("ngClass",(e.currentBalance||0)>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.currentBalance||0)," ")}}function c8e(n,t){if(n&1&&(o(0,"div",65),y(1,"i",66),o(2,"div",67)(3,"strong"),l(4,"Outstanding Payables:"),a(),l(5),a()()),n&2){let e=p(2);c(5),D(" ",e.formatCurrency(e.dashboard.outstandingPayables)," ")}}function d8e(n,t){if(n&1&&(o(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),y(4,"i",14),a(),o(5,"div",15)(6,"span",16),l(7,"Total Assets"),a(),o(8,"span",17),l(9),a()()(),o(10,"div",18)(11,"div",13),y(12,"i",19),a(),o(13,"div",15)(14,"span",16),l(15,"Total Liabilities"),a(),o(16,"span",17),l(17),a()()(),o(18,"div",20)(19,"div",13),y(20,"i",21),a(),o(21,"div",15)(22,"span",16),l(23,"Total Equity"),a(),o(24,"span",17),l(25),a()()(),o(26,"div",22)(27,"div",13),y(28,"i",23),a(),o(29,"div",15)(30,"span",16),l(31,"Net Profit/Loss"),a(),o(32,"span",17),l(33),a()()()(),o(34,"div",24)(35,"div",25)(36,"h3"),l(37,"Profit & Loss Overview"),a(),o(38,"div",26)(39,"div",27)(40,"div",28),l(41,"Income"),a(),o(42,"div",29),y(43,"div",30),a(),o(44,"div",31),l(45),a()(),o(46,"div",27)(47,"div",28),l(48,"Expenses"),a(),o(49,"div",29),y(50,"div",32),a(),o(51,"div",31),l(52),a()(),o(53,"div",27)(54,"div",28),l(55,"Net P/L"),a(),o(56,"div",29),y(57,"div",33),a(),o(58,"div",34),l(59),a()()()(),o(60,"div",25)(61,"h3"),l(62,"Income vs Expenses"),a(),o(63,"div",35)(64,"div",36),Cm(),o(65,"svg",37),y(66,"circle",38)(67,"circle",39)(68,"circle",40),a()(),bm(),o(69,"div",41)(70,"div",42),y(71,"span",43),o(72,"span"),l(73),a()(),o(74,"div",42),y(75,"span",44),o(76,"span"),l(77),a()()()()()(),o(78,"div",45)(79,"div",46)(80,"h3"),l(81,"Bank Accounts"),a(),o(82,"a",47),l(83,"View All"),a()(),o(84,"div",48)(85,"table",49)(86,"thead")(87,"tr")(88,"th"),l(89,"Account Name"),a(),o(90,"th"),l(91,"Bank"),a(),o(92,"th"),l(93,"Type"),a(),o(94,"th",50),l(95,"Balance"),a()()(),o(96,"tbody"),b(97,s8e,5,0,"tr",51)(98,l8e,12,5,"tr",52),a()()()(),o(99,"div",45)(100,"h3"),l(101,"Quick Actions"),a(),o(102,"div",53)(103,"a",54),y(104,"i",55),o(105,"span"),l(106,"Journal Entry"),a()(),o(107,"a",56),y(108,"i",57),o(109,"span"),l(110,"Chart of Accounts"),a()(),o(111,"a",58),y(112,"i",59),o(113,"span"),l(114,"Bank Accounts"),a()(),o(115,"a",54),y(116,"i",60),o(117,"span"),l(118,"View Entries"),a()()()(),b(119,c8e,6,1,"div",61),a()),n&2){let e=p();c(9),_(e.formatCurrency(e.dashboard.accountBalances.assets)),c(8),_(e.formatCurrency(e.dashboard.accountBalances.liabilities)),c(8),_(e.formatCurrency(e.dashboard.accountBalances.equity)),c(),m("ngClass",e.dashboard.profitLoss>=0?"green":"red"),c(2),m("ngClass",e.dashboard.profitLoss>=0?"fa-arrow-up":"fa-arrow-down"),c(5),_(e.formatCurrency(e.dashboard.profitLoss)),c(10),jt("width",e.getBarWidth("income"),"%"),c(2),_(e.formatCurrency(e.dashboard.accountBalances.income||0)),c(5),jt("width",e.getBarWidth("expenses"),"%"),c(2),_(e.formatCurrency(e.dashboard.accountBalances.expenses||0)),c(5),jt("width",e.getBarWidth("profitLoss"),"%"),m("ngClass",e.dashboard.profitLoss>=0?"green":"red"),c(),m("ngClass",e.dashboard.profitLoss>=0?"text-success":"text-danger"),c(),D(" ",e.formatCurrency(e.dashboard.profitLoss)," "),c(8),Ca("stroke-dasharray",e.getDonutSegment("income")),c(),Ca("stroke-dasharray",e.getDonutSegment("expenses"))("stroke-dashoffset",e.getDonutOffset()),c(5),D("Income: ",e.formatCurrency(e.dashboard.accountBalances.income||0)),c(4),D("Expenses: ",e.formatCurrency(e.dashboard.accountBalances.expenses||0)),c(20),m("ngIf",e.bankAccounts.length===0),c(),m("ngForOf",e.bankAccounts),c(21),m("ngIf",e.dashboard.outstandingPayables>0)}}var P_=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}dashboard=null;bankAccounts=[];loading=!0;maxValue=0;ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading=!0,this.accountingService.getDashboard().subscribe({next:t=>{this.dashboard=t,this.calculateMaxValue(),this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading dashboard:",t),this.loading=!1,this.cdr.detectChanges()}}),this.accountingService.getActiveBankAccounts().subscribe({next:t=>{this.bankAccounts=t,this.cdr.detectChanges()},error:t=>{console.error("Error loading bank accounts:",t),this.cdr.detectChanges()}})}calculateMaxValue(){if(!this.dashboard)return;let t=this.dashboard.accountBalances;this.maxValue=Math.max(t.income||0,t.expenses||0,Math.abs(this.dashboard.profitLoss||0))}getBarWidth(t){if(!this.dashboard||this.maxValue===0)return 0;let e=this.dashboard.accountBalances;switch(t){case"income":return(e.income||0)/this.maxValue*100;case"expenses":return(e.expenses||0)/this.maxValue*100;case"profitLoss":return Math.abs(this.dashboard.profitLoss||0)/this.maxValue*100;default:return 0}}getDonutSegment(t){if(!this.dashboard)return"0 251.2";let e=this.dashboard.accountBalances.income||0,i=this.dashboard.accountBalances.expenses||0,r=e+i;if(r===0)return"0 251.2";let s=2*Math.PI*40,d=0;t==="income"?d=e/r:d=i/r;let u=s*d;return`${u} ${s-u}`}getDonutOffset(){if(!this.dashboard)return"0";let t=this.dashboard.accountBalances.income||0,e=this.dashboard.accountBalances.expenses||0,i=t+e;if(i===0)return"0";let r=2*Math.PI*40,s=t/i;return`${-r*s}`}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}initializeAccounts(){this.loading=!0,this.accountingService.initializeChartOfAccounts().subscribe({next:()=>{this.notificationService.success("Chart of Accounts initialized successfully"),this.loadDashboard()},error:t=>{this.notificationService.error("Failed to initialize Chart of Accounts"),this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-accounting-dashboard"]],standalone:!1,decls:21,vars:2,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-cog"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin","fa-2x"],[1,"dashboard-content"],[1,"summary-cards"],[1,"summary-card","blue"],[1,"card-icon"],[1,"fas","fa-building"],[1,"card-content"],[1,"label"],[1,"value"],[1,"summary-card","orange"],[1,"fas","fa-credit-card"],[1,"summary-card","purple"],[1,"fas","fa-balance-scale"],[1,"summary-card",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"charts-row"],[1,"card","chart-card"],[1,"chart-bars"],[1,"chart-bar-item"],[1,"bar-label"],[1,"bar-track"],[1,"bar-fill","green"],[1,"bar-value"],[1,"bar-fill","red"],[1,"bar-fill",3,"ngClass"],[1,"bar-value",3,"ngClass"],[1,"donut-container"],[1,"donut-chart"],["viewBox","0 0 100 100"],["cx","50","cy","50","r","40","fill","none","stroke","#e5e7eb","stroke-width","15"],["cx","50","cy","50","r","40","fill","none","stroke","#22c55e","stroke-width","15","stroke-dashoffset","0","transform","rotate(-90 50 50)"],["cx","50","cy","50","r","40","fill","none","stroke","#ef4444","stroke-width","15","transform","rotate(-90 50 50)"],[1,"donut-legend"],[1,"legend-item"],[1,"legend-color","green"],[1,"legend-color","red"],[1,"card"],[1,"card-header-row"],["routerLink","/app/accounting/bank-accounts",1,"btn","btn-sm","btn-secondary"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"quick-actions"],["routerLink","/app/accounting/journal-entries",1,"action-item"],[1,"fas","fa-book"],["routerLink","/app/accounting/chart-of-accounts",1,"action-item"],[1,"fas","fa-list-alt"],["routerLink","/app/accounting/bank-accounts",1,"action-item"],[1,"fas","fa-university"],[1,"fas","fa-file-invoice-dollar"],["class","alert alert-warning",4,"ngIf"],["colspan","4",1,"empty-state"],[1,"badge","badge-info"],[3,"ngClass"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-triangle"],[1,"alert-content"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Finance & Accounting"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Dashboard"),a()()(),o(16,"button",4),x("click",function(){return i.initializeAccounts()}),y(17,"i",5),l(18," Initialize Chart of Accounts "),a()(),b(19,a8e,4,0,"div",6)(20,d8e,120,25,"div",7),a()),e&2&&(c(19),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.dashboard))},dependencies:[ot,Se,be,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:var(--text-secondary)}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014;transition:transform .2s,box-shadow .2s}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001f}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:#fff}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.summary-cards[_ngcontent-%COMP%]   .summary-card.blue[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.summary-cards[_ngcontent-%COMP%]   .summary-card.orange[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f97316,#ea580c)}.summary-cards[_ngcontent-%COMP%]   .summary-card.purple[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.summary-cards[_ngcontent-%COMP%]   .summary-card.green[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a)}.summary-cards[_ngcontent-%COMP%]   .summary-card.red[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.charts-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:24px}.charts-row[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.125rem;font-weight:600;color:var(--text-primary)}.chart-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{width:80px;font-size:.875rem;color:var(--text-secondary)}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-track[_ngcontent-%COMP%]{flex:1;height:24px;background:#f1f5f9;border-radius:6px;overflow:hidden}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-track[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;transition:width .5s ease}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-track[_ngcontent-%COMP%]   .bar-fill.green[_ngcontent-%COMP%]{background:linear-gradient(90deg,#22c55e,#16a34a)}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-track[_ngcontent-%COMP%]   .bar-fill.red[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)}.chart-bars[_ngcontent-%COMP%]   .chart-bar-item[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{width:100px;text-align:right;font-weight:600;font-size:.875rem}.donut-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.donut-container[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]{width:150px;height:150px}.donut-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.donut-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem}.donut-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px}.donut-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color.green[_ngcontent-%COMP%]{background:#22c55e}.donut-container[_ngcontent-%COMP%]   .donut-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color.red[_ngcontent-%COMP%]{background:#ef4444}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px}.quick-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px;background:#f8fafc;border:1px solid var(--border-color);border-radius:10px;text-decoration:none;transition:all .2s}.quick-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary-color)}.quick-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);text-align:center}.quick-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:hover{background:var(--primary-light);background:#00796b1a;border-color:var(--primary-color);transform:translateY(-2px)}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.alert-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;padding:16px;color:#92400e}.alert-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}@media(max-width:768px){.charts-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.donut-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};function p8e(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function m8e(n,t){n&1&&(o(0,"tr")(1,"td",22),y(2,"i",23),a()())}function u8e(n,t){n&1&&(o(0,"tr")(1,"td",22),y(2,"i",24),o(3,"p"),l(4,'No accounts found. Click "Add Account" to create one.'),a()()())}function g8e(n,t){n&1&&(o(0,"span",36),l(1,"System"),a())}function f8e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong",25),l(3),a()(),o(4,"td"),y(5,"i",26),l(6),b(7,g8e,2,0,"span",27),a(),o(8,"td")(9,"span",28),l(10),a()(),o(11,"td"),l(12),a(),o(13,"td",17)(14,"span",29),l(15),a()(),o(16,"td")(17,"span",30),l(18),a()(),o(19,"td")(20,"div",31)(21,"button",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editAccount(r))}),y(22,"i",33),a(),o(23,"button",34),x("click",function(){let r=g(e).$implicit,s=p();return f(s.confirmDelete(r))}),y(24,"i",35),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.accountCode),c(2),bi(i.getTypeIcon(e.accountType)),jt("color",i.getTypeColor(e.accountType)),c(),D(" ",e.accountName," "),c(),m("ngIf",e.isSystem),c(2),jt("background-color",i.getTypeColor(e.accountType)),c(),D(" ",e.accountType," "),c(2),_(e.balanceType),c(2),m("ngClass",(e.currentBalance||0)>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.currentBalance||0)," "),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),D(" ",e.status," "),c(5),m("disabled",e.isSystem)}}function h8e(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function _8e(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function v8e(n,t){if(n&1&&(o(0,"option",21),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function x8e(n,t){if(n&1){let e=F();o(0,"div",37)(1,"div",38),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",39)(3,"h2"),l(4),a(),o(5,"button",40),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",41),a()(),o(7,"div",42)(8,"div",43)(9,"label"),l(10,"Account Code "),o(11,"span",44),l(12,"*"),a()(),o(13,"input",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountCode,r)||(s.newAccount.accountCode=r),f(r)}),a()(),o(14,"div",43)(15,"label"),l(16,"Account Name "),o(17,"span",44),l(18,"*"),a()(),o(19,"input",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountName,r)||(s.newAccount.accountName=r),f(r)}),a()(),o(20,"div",43)(21,"label"),l(22,"Account Type "),o(23,"span",44),l(24,"*"),a()(),o(25,"select",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountType,r)||(s.newAccount.accountType=r),f(r)}),b(26,h8e,2,2,"option",14),a()(),o(27,"div",43)(28,"label"),l(29,"Balance Type "),o(30,"span",44),l(31,"*"),a()(),o(32,"select",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.balanceType,r)||(s.newAccount.balanceType=r),f(r)}),b(33,_8e,2,2,"option",14),a()(),o(34,"div",43)(35,"label"),l(36,"Description"),a(),o(37,"textarea",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.description,r)||(s.newAccount.description=r),f(r)}),a()(),o(38,"div",43)(39,"label"),l(40,"Opening Balance"),a(),o(41,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.openingBalance,r)||(s.newAccount.openingBalance=r),f(r)}),a()(),o(42,"div",43)(43,"label"),l(44,"Status"),a(),o(45,"select",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.status,r)||(s.newAccount.status=r),f(r)}),b(46,v8e,2,2,"option",14),a()(),o(47,"div",50)(48,"label",51)(49,"input",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.taxApplicable,r)||(s.newAccount.taxApplicable=r),f(r)}),a(),o(50,"span"),l(51,"Tax Applicable"),a()()()(),o(52,"div",53)(53,"button",54),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(54,"Cancel"),a(),o(55,"button",4),x("click",function(){g(e);let r=p();return f(r.saveAccount())}),l(56),a()()()()}if(n&2){let e=p();c(4),_(e.isEdit?"Edit Account":"Add Account"),c(9),M("ngModel",e.newAccount.accountCode),c(6),M("ngModel",e.newAccount.accountName),c(6),M("ngModel",e.newAccount.accountType),c(),m("ngForOf",e.accountTypes),c(6),M("ngModel",e.newAccount.balanceType),c(),m("ngForOf",e.balanceTypes),c(4),M("ngModel",e.newAccount.description),c(4),M("ngModel",e.newAccount.openingBalance),c(4),M("ngModel",e.newAccount.status),c(),m("ngForOf",e.statusOptions),c(3),M("ngModel",e.newAccount.taxApplicable),c(7),_(e.isEdit?"Update":"Save")}}function y8e(n,t){if(n&1){let e=F();o(0,"div",37)(1,"div",55),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",39)(3,"h2"),l(4,"Confirm Delete"),a(),o(5,"button",40),x("click",function(){g(e);let r=p();return f(r.cancelDelete())}),y(6,"i",41),a()(),o(7,"div",42)(8,"p"),l(9),a()(),o(10,"div",53)(11,"button",54),x("click",function(){g(e);let r=p();return f(r.cancelDelete())}),l(12,"Cancel"),a(),o(13,"button",56),x("click",function(){g(e);let r=p();return f(r.deleteAccount())}),l(14,"Delete"),a()()()()}if(n&2){let e=p();c(9),D('Are you sure you want to delete account "',e.accountToDelete==null?null:e.accountToDelete.accountName,'"?')}}var dM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}accounts=[];filteredAccounts=[];categories=[];loading=!0;displayDialog=!1;selectedAccount=null;isEdit=!1;accountTypes=[{label:"Asset",value:"Asset"},{label:"Liability",value:"Liability"},{label:"Equity",value:"Equity"},{label:"Income",value:"Income"},{label:"Expense",value:"Expense"}];balanceTypes=[{label:"Debit",value:"Debit"},{label:"Credit",value:"Credit"}];statusOptions=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}];selectedType=null;searchText="";newAccount=this.getEmptyAccount();showDeleteConfirm=!1;accountToDelete=null;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.accountingService.getAllAccounts().subscribe({next:t=>{this.accounts=t,this.applyFilters(),this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading accounts:",t),this.loading=!1,this.cdr.detectChanges()}}),this.accountingService.getAllCategories().subscribe({next:t=>{this.categories=t,this.cdr.detectChanges()}})}applyFilters(){this.filteredAccounts=this.accounts.filter(t=>{let e=!this.selectedType||t.accountType===this.selectedType,i=!this.searchText||t.accountCode.toLowerCase().includes(this.searchText.toLowerCase())||t.accountName.toLowerCase().includes(this.searchText.toLowerCase());return e&&i})}getEmptyAccount(){return{accountCode:"",accountName:"",accountType:"Asset",balanceType:"Debit",status:"Active",openingBalance:0,currentBalance:0,isHeader:!1,isSubAccount:!1,taxApplicable:!1}}openNewDialog(){this.newAccount=this.getEmptyAccount(),this.isEdit=!1,this.displayDialog=!0}editAccount(t){this.newAccount=me({},t),this.isEdit=!0,this.displayDialog=!0}saveAccount(){this.isEdit&&this.newAccount.id?this.accountingService.updateAccount(this.newAccount.id,this.newAccount).subscribe({next:()=>{this.notificationService.success("Account updated successfully"),this.displayDialog=!1,this.loadData()},error:t=>{this.notificationService.error("Failed to update account")}}):this.accountingService.createAccount(this.newAccount).subscribe({next:()=>{this.notificationService.success("Account created successfully"),this.displayDialog=!1,this.loadData()},error:t=>{this.notificationService.error("Failed to create account")}})}confirmDelete(t){this.accountToDelete=t,this.showDeleteConfirm=!0}cancelDelete(){this.showDeleteConfirm=!1,this.accountToDelete=null}deleteAccount(){this.accountToDelete&&this.accountToDelete.id&&this.accountingService.deleteAccount(this.accountToDelete.id).subscribe({next:()=>{this.notificationService.success("Account deleted successfully"),this.showDeleteConfirm=!1,this.accountToDelete=null,this.loadData()},error:t=>{this.notificationService.error("Failed to delete account"),this.showDeleteConfirm=!1}})}getTypeIcon(t){switch(t){case"Asset":return"fas fa-building";case"Liability":return"fas fa-credit-card";case"Equity":return"fas fa-balance-scale";case"Income":return"fas fa-arrow-up";case"Expense":return"fas fa-arrow-down";default:return"fas fa-folder"}}getTypeColor(t){switch(t){case"Asset":return"#3b82f6";case"Liability":return"#f97316";case"Equity":return"#8b5cf6";case"Income":return"#22c55e";case"Expense":return"#ef4444";default:return"#64748b"}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-chart-of-accounts"]],standalone:!1,decls:53,vars:9,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search accounts...",3,"ngModelChange","input","ngModel"],[1,"filters"],[1,"form-control","filter-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[3,"value"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-folder-open"],[1,"account-code"],[1,"account-type-icon"],["class","system-badge",4,"ngIf"],[1,"badge",2,"color","white"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"],[1,"system-badge"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., 1000",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter account name",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"modal","modal-sm",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Chart of Accounts"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Chart of Accounts"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," Add Account "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchText,s)||(i.searchText=s),s}),x("input",function(){return i.applyFilters()}),a()(),o(24,"div",11)(25,"select",12),S("ngModelChange",function(s){return P(i.selectedType,s)||(i.selectedType=s),s}),x("change",function(){return i.applyFilters()}),o(26,"option",13),l(27,"All Types"),a(),b(28,p8e,2,2,"option",14),a()()(),o(29,"div",15)(30,"table",16)(31,"thead")(32,"tr")(33,"th"),l(34,"Code"),a(),o(35,"th"),l(36,"Account Name"),a(),o(37,"th"),l(38,"Type"),a(),o(39,"th"),l(40,"Balance Type"),a(),o(41,"th",17),l(42,"Current Balance"),a(),o(43,"th"),l(44,"Status"),a(),o(45,"th"),l(46,"Actions"),a()()(),o(47,"tbody"),b(48,m8e,3,0,"tr",18)(49,u8e,5,0,"tr",18)(50,f8e,25,16,"tr",19),a()()()()(),b(51,x8e,57,13,"div",20)(52,y8e,15,1,"div",20)),e&2&&(c(23),M("ngModel",i.searchText),c(2),M("ngModel",i.selectedType),c(),m("ngValue",null),c(2),m("ngForOf",i.accountTypes),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredAccounts.length===0),c(),m("ngForOf",i.filteredAccounts),c(),m("ngIf",i.displayDialog),c(),m("ngIf",i.showDeleteConfirm))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-select[_ngcontent-%COMP%]{min-width:150px}.account-code[_ngcontent-%COMP%]{font-family:monospace;color:var(--primary-color)}.account-type-icon[_ngcontent-%COMP%]{margin-right:8px}.system-badge[_ngcontent-%COMP%]{background:var(--info-color);color:#fff;padding:2px 8px;border-radius:4px;font-size:.7rem;margin-left:8px}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px}"]})};function C8e(n,t){n&1&&(o(0,"tr")(1,"td",23),y(2,"i",24),a()())}function b8e(n,t){n&1&&(o(0,"tr")(1,"td",23),y(2,"i",9),o(3,"p"),l(4,'No bank accounts found. Click "Add Bank Account" to create one.'),a()()())}function M8e(n,t){n&1&&(o(0,"span",34),l(1,"Primary"),a())}function S8e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a(),b(4,M8e,2,0,"span",25),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",26),l(11),a()(),o(12,"td"),l(13),a(),o(14,"td",19)(15,"span",27),l(16),a()(),o(17,"td")(18,"span",28),l(19),a()(),o(20,"td")(21,"div",29)(22,"button",30),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editAccount(r))}),y(23,"i",31),a(),o(24,"button",32),x("click",function(){let r=g(e).$implicit,s=p();return f(s.confirmDelete(r))}),y(25,"i",33),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.accountName),c(),m("ngIf",e.isPrimary),c(2),_(e.bankName||"-"),c(2),_(e.accountNumber?"****"+e.accountNumber.slice(-4):"-"),c(3),_(e.accountType),c(2),_(e.currencyCode),c(2),m("ngClass",(e.currentBalance||0)>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.currentBalance||0)," "),c(2),m("ngClass",e.isActive?"badge-success":"badge-danger"),c(),D(" ",e.isActive?"Active":"Inactive"," ")}}function P8e(n,t){if(n&1&&(o(0,"option",60),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function w8e(n,t){if(n&1&&(o(0,"option",60),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function E8e(n,t){if(n&1&&(o(0,"option",51),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),Ge("",e.accountCode," - ",e.accountName)}}function O8e(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",36),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),a(),o(5,"button",38),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",39),a()(),o(7,"div",40)(8,"div",41)(9,"div",42)(10,"label"),l(11,"Account Name "),o(12,"span",43),l(13,"*"),a()(),o(14,"input",44),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountName,r)||(s.newAccount.accountName=r),f(r)}),a()(),o(15,"div",42)(16,"label"),l(17,"Account Number"),a(),o(18,"input",45),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountNumber,r)||(s.newAccount.accountNumber=r),f(r)}),a()()(),o(19,"div",41)(20,"div",42)(21,"label"),l(22,"Bank Name"),a(),o(23,"input",46),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.bankName,r)||(s.newAccount.bankName=r),f(r)}),a()(),o(24,"div",42)(25,"label"),l(26,"Branch"),a(),o(27,"input",47),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.bankBranch,r)||(s.newAccount.bankBranch=r),f(r)}),a()()(),o(28,"div",41)(29,"div",42)(30,"label"),l(31,"Account Type"),a(),o(32,"select",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.accountType,r)||(s.newAccount.accountType=r),f(r)}),b(33,P8e,2,2,"option",49),a()(),o(34,"div",42)(35,"label"),l(36,"Currency"),a(),o(37,"select",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.currencyCode,r)||(s.newAccount.currencyCode=r),f(r)}),b(38,w8e,2,2,"option",49),a()()(),o(39,"div",41)(40,"div",42)(41,"label"),l(42,"Opening Balance"),a(),o(43,"input",50),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.openingBalance,r)||(s.newAccount.openingBalance=r),f(r)}),a()(),o(44,"div",42)(45,"label"),l(46,"GL Account"),a(),o(47,"select",48),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.glAccount,r)||(s.newAccount.glAccount=r),f(r)}),o(48,"option",51),l(49,"Select GL Account"),a(),b(50,E8e,2,3,"option",52),a()()(),o(51,"div",42)(52,"label"),l(53,"Description"),a(),o(54,"textarea",53),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.description,r)||(s.newAccount.description=r),f(r)}),a()(),o(55,"div",54)(56,"div",55)(57,"label",56)(58,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.isPrimary,r)||(s.newAccount.isPrimary=r),f(r)}),a(),o(59,"span"),l(60,"Primary Account"),a()()(),o(61,"div",55)(62,"label",56)(63,"input",57),S("ngModelChange",function(r){g(e);let s=p();return P(s.newAccount.isActive,r)||(s.newAccount.isActive=r),f(r)}),a(),o(64,"span"),l(65,"Active"),a()()()()(),o(66,"div",58)(67,"button",59),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(68,"Cancel"),a(),o(69,"button",4),x("click",function(){g(e);let r=p();return f(r.saveAccount())}),l(70),a()()()()}if(n&2){let e=p();c(4),_(e.isEdit?"Edit Bank Account":"Add Bank Account"),c(10),M("ngModel",e.newAccount.accountName),c(4),M("ngModel",e.newAccount.accountNumber),c(5),M("ngModel",e.newAccount.bankName),c(4),M("ngModel",e.newAccount.bankBranch),c(5),M("ngModel",e.newAccount.accountType),c(),m("ngForOf",e.accountTypes),c(4),M("ngModel",e.newAccount.currencyCode),c(),m("ngForOf",e.currencies),c(5),M("ngModel",e.newAccount.openingBalance),c(4),M("ngModel",e.newAccount.glAccount),c(),m("ngValue",null),c(2),m("ngForOf",e.glAccounts),c(4),M("ngModel",e.newAccount.description),c(4),M("ngModel",e.newAccount.isPrimary),c(5),M("ngModel",e.newAccount.isActive),c(7),_(e.isEdit?"Update":"Save")}}function T8e(n,t){if(n&1){let e=F();o(0,"div",35)(1,"div",61),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4,"Confirm Delete"),a(),o(5,"button",38),x("click",function(){g(e);let r=p();return f(r.cancelDelete())}),y(6,"i",39),a()(),o(7,"div",40)(8,"p"),l(9),a()(),o(10,"div",58)(11,"button",59),x("click",function(){g(e);let r=p();return f(r.cancelDelete())}),l(12,"Cancel"),a(),o(13,"button",62),x("click",function(){g(e);let r=p();return f(r.deleteAccount())}),l(14,"Delete"),a()()()()}if(n&2){let e=p();c(9),D('Are you sure you want to delete "',e.accountToDelete==null?null:e.accountToDelete.accountName,'"?')}}var pM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}bankAccounts=[];glAccounts=[];loading=!0;displayDialog=!1;isEdit=!1;accountTypes=[{label:"Checking",value:"Checking"},{label:"Savings",value:"Savings"},{label:"Credit Card",value:"Credit Card"},{label:"Cash",value:"Cash"},{label:"Other",value:"Other"}];currencies=[{label:"USD - US Dollar",value:"USD"},{label:"EUR - Euro",value:"EUR"},{label:"GBP - British Pound",value:"GBP"},{label:"AED - UAE Dirham",value:"AED"}];newAccount=this.getEmptyAccount();showDeleteConfirm=!1;accountToDelete=null;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.accountingService.getAllBankAccounts().subscribe({next:t=>{this.bankAccounts=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading bank accounts:",t),this.loading=!1,this.cdr.detectChanges()}}),this.accountingService.getAccountsByType("Asset").subscribe({next:t=>{this.glAccounts=t,this.cdr.detectChanges()}})}getEmptyAccount(){return{accountName:"",accountNumber:"",bankName:"",bankBranch:"",accountType:"Checking",currencyCode:"USD",openingBalance:0,currentBalance:0,isPrimary:!1,isActive:!0}}openNewDialog(){this.newAccount=this.getEmptyAccount(),this.isEdit=!1,this.displayDialog=!0}editAccount(t){this.newAccount=me({},t),this.isEdit=!0,this.displayDialog=!0}saveAccount(){this.isEdit&&this.newAccount.id?this.accountingService.updateBankAccount(this.newAccount.id,this.newAccount).subscribe({next:()=>{this.notificationService.success("Bank account updated successfully"),this.displayDialog=!1,this.loadData()},error:t=>{this.notificationService.error("Failed to update bank account")}}):this.accountingService.createBankAccount(this.newAccount).subscribe({next:()=>{this.notificationService.success("Bank account created successfully"),this.displayDialog=!1,this.loadData()},error:t=>{this.notificationService.error("Failed to create bank account")}})}confirmDelete(t){this.accountToDelete=t,this.showDeleteConfirm=!0}cancelDelete(){this.showDeleteConfirm=!1,this.accountToDelete=null}deleteAccount(){this.accountToDelete&&this.accountToDelete.id&&this.accountingService.deleteBankAccount(this.accountToDelete.id).subscribe({next:()=>{this.notificationService.success("Bank account deleted successfully"),this.showDeleteConfirm=!1,this.accountToDelete=null,this.loadData()},error:t=>{this.notificationService.error("Failed to delete bank account"),this.showDeleteConfirm=!1}})}viewTransactions(t){}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getTotalBalance(){return this.bankAccounts.reduce((t,e)=>t+(e.currentBalance||0),0)}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-bank-accounts"]],standalone:!1,decls:63,vars:8,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon","blue"],[1,"fas","fa-university"],[1,"card-content"],[1,"label"],[1,"value",3,"ngClass"],[1,"card-icon","green"],[1,"fas","fa-check-circle"],[1,"value"],[1,"card"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],["class","badge badge-warning","style","margin-left: 8px;",4,"ngIf"],[1,"badge","badge-info"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"badge","badge-warning",2,"margin-left","8px"],[1,"modal-overlay"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-row"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., Main Checking",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Account number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Chase Bank",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Branch name",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["rows","2","placeholder","Optional description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-row","checkbox-row"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"modal","modal-sm",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Bank Accounts"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Bank Accounts"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," Add Bank Account "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),a(),o(23,"div",10)(24,"span",11),l(25,"Total Balance"),a(),o(26,"span",12),l(27),a()()(),o(28,"div",7)(29,"div",13),y(30,"i",14),a(),o(31,"div",10)(32,"span",11),l(33,"Active Accounts"),a(),o(34,"span",15),l(35),a()()()(),o(36,"div",16)(37,"div",17)(38,"table",18)(39,"thead")(40,"tr")(41,"th"),l(42,"Account Name"),a(),o(43,"th"),l(44,"Bank"),a(),o(45,"th"),l(46,"Account Number"),a(),o(47,"th"),l(48,"Type"),a(),o(49,"th"),l(50,"Currency"),a(),o(51,"th",19),l(52,"Balance"),a(),o(53,"th"),l(54,"Status"),a(),o(55,"th"),l(56,"Actions"),a()()(),o(57,"tbody"),b(58,C8e,3,0,"tr",20)(59,b8e,5,0,"tr",20)(60,S8e,26,10,"tr",21),a()()()()(),b(61,O8e,71,17,"div",22)(62,T8e,15,1,"div",22)),e&2&&(c(26),m("ngClass",i.getTotalBalance()>=0?"positive":"negative"),c(),D(" ",i.formatCurrency(i.getTotalBalance())," "),c(8),_(i.bankAccounts.length),c(23),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.bankAccounts.length===0),c(),m("ngForOf",i.bankAccounts),c(),m("ngIf",i.displayDialog),c(),m("ngIf",i.showDeleteConfirm))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;flex-wrap:wrap}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 10px #00000014;min-width:200px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:#fff}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .value.positive[_ngcontent-%COMP%]{color:var(--success-color)}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .value.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-row.checkbox-row[_ngcontent-%COMP%]{display:flex;gap:24px}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px}.modal-lg[_ngcontent-%COMP%]{max-width:700px}@media(max-width:768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function k8e(n,t){if(n&1&&(o(0,"option",20),l(1),a()),n&2){let e=t.$implicit;m("value",e.value),c(),_(e.label)}}function I8e(n,t){n&1&&(o(0,"tr")(1,"td",21),y(2,"i",22),a()())}function D8e(n,t){n&1&&(o(0,"tr")(1,"td",21),y(2,"i",23),o(3,"p"),l(4,'No journal entries found. Click "New Journal Entry" to create one.'),a()()())}function A8e(n,t){if(n&1&&(o(0,"small",33),y(1,"br"),l(2),a()),n&2){let e=p().$implicit;c(2),D("Ref: ",e.referenceNumber)}}function R8e(n,t){if(n&1){let e=F();o(0,"button",34),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.confirmPost(r))}),y(1,"i",35),a()}}function F8e(n,t){if(n&1){let e=F();o(0,"button",36),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.confirmReverse(r))}),y(1,"i",37),a()}}function N8e(n,t){if(n&1){let e=F();o(0,"button",38),x("click",function(){g(e);let r=p().$implicit,s=p();return f(s.confirmDeleteEntry(r))}),y(1,"i",39),a()}}function L8e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong",24),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),b(8,A8e,3,1,"small",25),a(),o(9,"td",16),l(10),a(),o(11,"td",16),l(12),a(),o(13,"td")(14,"span",26),l(15),a()(),o(16,"td")(17,"div",27)(18,"button",28),x("click",function(){let r=g(e).$implicit,s=p();return f(s.viewEntry(r))}),y(19,"i",29),a(),b(20,R8e,2,0,"button",30)(21,F8e,2,0,"button",31)(22,N8e,2,0,"button",32),a()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.entryNumber),c(2),_(e.entryDate),c(2),D(" ",e.description," "),c(),m("ngIf",e.referenceNumber),c(2),_(i.formatCurrency(e.totalDebit||0)),c(2),_(i.formatCurrency(e.totalCredit||0)),c(2),m("ngClass",e.status==="Posted"?"badge-success":"badge-warning"),c(),D(" ",e.status," "),c(5),m("ngIf",e.status==="Draft"),c(),m("ngIf",e.status==="Posted"),c(),m("ngIf",e.status==="Draft")}}function V8e(n,t){if(n&1){let e=F();o(0,"button",66),x("click",function(){g(e);let r=p(2);return f(r.addLine())}),y(1,"i",5),l(2," Add Line "),a()}}function B8e(n,t){n&1&&y(0,"th",67)}function U8e(n,t){if(n&1&&(o(0,"option",69),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),Ge("",e.accountCode," - ",e.accountName)}}function j8e(n,t){if(n&1){let e=F();o(0,"td")(1,"button",73),x("click",function(){g(e);let r=p().index,s=p(2);return f(s.removeLine(r))}),y(2,"i",39),a()()}if(n&2){let e=p(3);c(),m("disabled",e.newEntry.lines.length<=2)}}function W8e(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"select",68),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.account,r)||(s.account=r),f(r)}),o(3,"option",69),l(4,"Select Account"),a(),b(5,U8e,2,3,"option",70),a()(),o(6,"td")(7,"input",71),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.description,r)||(s.description=r),f(r)}),a()(),o(8,"td")(9,"input",72),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.debitAmount,r)||(s.debitAmount=r),f(r)}),a()(),o(10,"td")(11,"input",72),S("ngModelChange",function(r){let s=g(e).$implicit;return P(s.creditAmount,r)||(s.creditAmount=r),f(r)}),a()(),b(12,j8e,3,1,"td",17),a()}if(n&2){let e=t.$implicit,i=p(2);c(2),M("ngModel",e.account),m("disabled",i.isEdit&&i.newEntry.status==="Posted"),c(),m("ngValue",null),c(2),m("ngForOf",i.accounts),c(2),M("ngModel",e.description),m("readonly",i.isEdit&&i.newEntry.status==="Posted"),c(2),M("ngModel",e.debitAmount),m("readonly",i.isEdit&&i.newEntry.status==="Posted"),c(2),M("ngModel",e.creditAmount),m("readonly",i.isEdit&&i.newEntry.status==="Posted"),c(),m("ngIf",!i.isEdit||i.newEntry.status==="Draft")}}function z8e(n,t){n&1&&y(0,"td")}function q8e(n,t){if(n&1&&(o(0,"tr",74)(1,"td")(2,"div",75),y(3,"i",76),l(4),a()()()),n&2){let e=p(2);c(),Ca("colspan",e.isEdit&&e.newEntry.status==="Posted"?4:5),c(3),D(" Entry out of balance by ",e.formatCurrency(e.calculateTotals().debit-e.calculateTotals().credit)," ")}}function H8e(n,t){if(n&1){let e=F();o(0,"button",77),x("click",function(){g(e);let r=p(2);return f(r.saveEntry())}),l(1," Save as Draft "),a()}if(n&2){let e=p(2);m("disabled",!e.calculateTotals().balanced)}}function G8e(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",41),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4),a(),o(5,"button",43),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",44),a()(),o(7,"div",45)(8,"div",46)(9,"div",47)(10,"label"),l(11,"Date "),o(12,"span",48),l(13,"*"),a()(),o(14,"input",49),S("ngModelChange",function(r){g(e);let s=p();return P(s.newEntry.entryDate,r)||(s.newEntry.entryDate=r),f(r)}),a()(),o(15,"div",50)(16,"label"),l(17,"Description "),o(18,"span",48),l(19,"*"),a()(),o(20,"input",51),S("ngModelChange",function(r){g(e);let s=p();return P(s.newEntry.description,r)||(s.newEntry.description=r),f(r)}),a()(),o(21,"div",47)(22,"label"),l(23,"Reference #"),a(),o(24,"input",52),S("ngModelChange",function(r){g(e);let s=p();return P(s.newEntry.referenceNumber,r)||(s.newEntry.referenceNumber=r),f(r)}),a()()(),o(25,"div",53)(26,"div",54)(27,"h4"),l(28,"Journal Lines"),a(),b(29,V8e,3,0,"button",55),a(),o(30,"table",56)(31,"thead")(32,"tr")(33,"th",57),l(34,"Account"),a(),o(35,"th"),l(36,"Description"),a(),o(37,"th",58),l(38,"Debit"),a(),o(39,"th",58),l(40,"Credit"),a(),b(41,B8e,1,0,"th",59),a()(),o(42,"tbody"),b(43,W8e,13,11,"tr",18),a(),o(44,"tfoot")(45,"tr",60)(46,"td",61)(47,"strong"),l(48,"Totals:"),a()(),o(49,"td",16)(50,"strong"),l(51),a()(),o(52,"td",16)(53,"strong"),l(54),a()(),b(55,z8e,1,0,"td",17),a(),b(56,q8e,5,2,"tr",62),a()()()(),o(57,"div",63)(58,"button",64),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(59,"Close"),a(),b(60,H8e,2,1,"button",65),a()()()}if(n&2){let e=p();c(4),_(e.isEdit?"View Journal Entry":"New Journal Entry"),c(10),M("ngModel",e.newEntry.entryDate),m("readonly",e.isEdit),c(6),M("ngModel",e.newEntry.description),m("readonly",e.isEdit&&e.newEntry.status==="Posted"),c(4),M("ngModel",e.newEntry.referenceNumber),m("readonly",e.isEdit&&e.newEntry.status==="Posted"),c(5),m("ngIf",!e.isEdit||e.newEntry.status==="Draft"),c(12),m("ngIf",!e.isEdit||e.newEntry.status==="Draft"),c(2),m("ngForOf",e.newEntry.lines),c(8),_(e.formatCurrency(e.calculateTotals().debit)),c(3),_(e.formatCurrency(e.calculateTotals().credit)),c(),m("ngIf",!e.isEdit||e.newEntry.status==="Draft"),c(),m("ngIf",!e.calculateTotals().balanced),c(4),m("ngIf",!e.isEdit)}}function $8e(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",78),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4,"Confirm Delete"),a()(),o(5,"div",45)(6,"p"),l(7,"Are you sure you want to delete this journal entry?"),a()(),o(8,"div",63)(9,"button",64),x("click",function(){g(e);let r=p();return f(r.cancelAction())}),l(10,"Cancel"),a(),o(11,"button",79),x("click",function(){g(e);let r=p();return f(r.deleteEntry())}),l(12,"Delete"),a()()()()}}function Y8e(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",78),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4,"Confirm Post"),a()(),o(5,"div",45)(6,"p"),l(7,"Are you sure you want to post this journal entry? This action cannot be undone."),a()(),o(8,"div",63)(9,"button",64),x("click",function(){g(e);let r=p();return f(r.cancelAction())}),l(10,"Cancel"),a(),o(11,"button",80),x("click",function(){g(e);let r=p();return f(r.postEntry())}),l(12,"Post"),a()()()()}}function J8e(n,t){if(n&1){let e=F();o(0,"div",40)(1,"div",78),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",42)(3,"h2"),l(4,"Confirm Reversal"),a()(),o(5,"div",45)(6,"p"),l(7,"Are you sure you want to reverse this journal entry?"),a()(),o(8,"div",63)(9,"button",64),x("click",function(){g(e);let r=p();return f(r.cancelAction())}),l(10,"Cancel"),a(),o(11,"button",81),x("click",function(){g(e);let r=p();return f(r.reverseEntry())}),l(12,"Reverse"),a()()()()}}var mM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}entries=[];accounts=[];loading=!0;displayDialog=!1;isEdit=!1;statusOptions=[{label:"All",value:""},{label:"Draft",value:"Draft"},{label:"Posted",value:"Posted"}];selectedStatus="";searchText="";newEntry=this.getEmptyEntry();showDeleteConfirm=!1;showPostConfirm=!1;showReverseConfirm=!1;entryToAction=null;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.accountingService.getAllJournalEntries().subscribe({next:t=>{this.entries=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading journal entries:",t),this.loading=!1,this.cdr.detectChanges()}}),this.accountingService.getPostableAccounts().subscribe({next:t=>{this.accounts=t,this.cdr.detectChanges()}})}getEmptyEntry(){return{entryDate:new Date().toISOString().split("T")[0],description:"",lines:[{account:{},debitAmount:0,creditAmount:0},{account:{},debitAmount:0,creditAmount:0}]}}openNewDialog(){this.newEntry=this.getEmptyEntry(),this.isEdit=!1,this.displayDialog=!0}viewEntry(t){t.id&&this.accountingService.getJournalEntryById(t.id).subscribe({next:e=>{this.newEntry=e,this.isEdit=!0,this.displayDialog=!0}})}addLine(){this.newEntry.lines.push({account:{},debitAmount:0,creditAmount:0})}removeLine(t){this.newEntry.lines.length>2&&this.newEntry.lines.splice(t,1)}calculateTotals(){let t=this.newEntry.lines.reduce((i,r)=>i+(r.debitAmount||0),0),e=this.newEntry.lines.reduce((i,r)=>i+(r.creditAmount||0),0);return{debit:t,credit:e,balanced:Math.abs(t-e)<.01}}saveEntry(){if(!this.calculateTotals().balanced){this.notificationService.error("Debits must equal credits");return}this.accountingService.createJournalEntry(this.newEntry).subscribe({next:()=>{this.notificationService.success("Journal entry created successfully"),this.displayDialog=!1,this.loadData()},error:e=>{this.notificationService.error("Failed to create journal entry")}})}confirmPost(t){this.entryToAction=t,this.showPostConfirm=!0}postEntry(){this.entryToAction&&this.entryToAction.id&&this.accountingService.postJournalEntry(this.entryToAction.id).subscribe({next:()=>{this.notificationService.success("Journal entry posted successfully"),this.showPostConfirm=!1,this.entryToAction=null,this.loadData()},error:t=>{this.notificationService.error("Failed to post journal entry"),this.showPostConfirm=!1}})}confirmReverse(t){this.entryToAction=t,this.showReverseConfirm=!0}reverseEntry(){this.entryToAction&&this.entryToAction.id&&this.accountingService.reverseJournalEntry(this.entryToAction.id).subscribe({next:()=>{this.notificationService.success("Journal entry reversed successfully"),this.showReverseConfirm=!1,this.entryToAction=null,this.loadData()},error:t=>{this.notificationService.error("Failed to reverse journal entry"),this.showReverseConfirm=!1}})}confirmDeleteEntry(t){this.entryToAction=t,this.showDeleteConfirm=!0}cancelAction(){this.showDeleteConfirm=!1,this.showPostConfirm=!1,this.showReverseConfirm=!1,this.entryToAction=null}deleteEntry(){this.entryToAction&&this.entryToAction.id&&this.accountingService.deleteJournalEntry(this.entryToAction.id).subscribe({next:()=>{this.notificationService.success("Journal entry deleted successfully"),this.showDeleteConfirm=!1,this.entryToAction=null,this.loadData()},error:t=>{this.notificationService.error(t.error?.message||"Failed to delete journal entry"),this.showDeleteConfirm=!1}})}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getStatusSeverity(t){switch(t){case"Posted":return"success";case"Draft":return"warning";default:return"info"}}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-journal-entries"]],standalone:!1,decls:53,vars:10,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search entries...",3,"ngModelChange","ngModel"],[1,"filters"],[1,"form-control","filter-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[3,"value"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-book"],[1,"entry-number"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-success","title","Post",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning","title","Reverse",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Delete",3,"click",4,"ngIf"],[1,"text-muted"],["title","Post",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-check"],["title","Reverse",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-undo"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay"],[1,"modal","modal-xl",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"entry-header"],[1,"form-group"],[1,"required"],["type","date",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"form-group","flex-grow"],["type","text","placeholder","Entry description",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","text","placeholder","Optional",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"lines-section"],[1,"lines-header"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"table","lines-table"],[2,"width","40%"],[2,"width","120px"],["style","width: 50px",4,"ngIf"],[1,"totals-row"],["colspan","2",1,"text-right"],["class","balance-error",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[2,"width","50px"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Line description",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","number","step","0.01","min","0",1,"form-control","text-right",3,"ngModelChange","ngModel","readonly"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"balance-error"],[1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle"],[1,"btn","btn-primary",3,"click","disabled"],[1,"modal","modal-sm",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Journal Entries"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Journal Entries"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," New Journal Entry "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchText,s)||(i.searchText=s),s}),a()(),o(24,"div",11)(25,"select",12),S("ngModelChange",function(s){return P(i.selectedStatus,s)||(i.selectedStatus=s),s}),b(26,k8e,2,2,"option",13),a()()(),o(27,"div",14)(28,"table",15)(29,"thead")(30,"tr")(31,"th"),l(32,"Entry #"),a(),o(33,"th"),l(34,"Date"),a(),o(35,"th"),l(36,"Description"),a(),o(37,"th",16),l(38,"Debit"),a(),o(39,"th",16),l(40,"Credit"),a(),o(41,"th"),l(42,"Status"),a(),o(43,"th"),l(44,"Actions"),a()()(),o(45,"tbody"),b(46,I8e,3,0,"tr",17)(47,D8e,5,0,"tr",17)(48,L8e,23,11,"tr",18),a()()()()(),b(49,G8e,61,15,"div",19)(50,$8e,13,0,"div",19)(51,Y8e,13,0,"div",19)(52,J8e,13,0,"div",19)),e&2&&(c(23),M("ngModel",i.searchText),c(2),M("ngModel",i.selectedStatus),c(),m("ngForOf",i.statusOptions),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.entries.length===0),c(),m("ngForOf",i.entries),c(),m("ngIf",i.displayDialog),c(),m("ngIf",i.showDeleteConfirm),c(),m("ngIf",i.showPostConfirm),c(),m("ngIf",i.showReverseConfirm))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-select[_ngcontent-%COMP%]{min-width:150px}.entry-number[_ngcontent-%COMP%]{font-family:monospace;color:var(--primary-color)}.text-right[_ngcontent-%COMP%]{text-align:right}.text-muted[_ngcontent-%COMP%]{color:var(--text-secondary)}.entry-header[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid var(--border-color)}.entry-header[_ngcontent-%COMP%]   .form-group.flex-grow[_ngcontent-%COMP%]{flex:1}.lines-section[_ngcontent-%COMP%]   .lines-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.lines-section[_ngcontent-%COMP%]   .lines-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:var(--text-primary)}.lines-section[_ngcontent-%COMP%]   .lines-table[_ngcontent-%COMP%]{margin-bottom:0}.lines-section[_ngcontent-%COMP%]   .lines-table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:8px 12px}.lines-section[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600}.lines-section[_ngcontent-%COMP%]   .balance-error[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0;padding:12px;display:flex;align-items:center;gap:8px}.modal-xl[_ngcontent-%COMP%]{max-width:900px}.modal-sm[_ngcontent-%COMP%]{max-width:400px}@media(max-width:768px){.entry-header[_ngcontent-%COMP%]{flex-direction:column}}"]})};var K8e=(n,t,e)=>({"badge-success":n,"badge-danger":t,"badge-info":e});function Q8e(n,t){if(n&1&&(o(0,"option",19),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),_(e.accountName)}}function X8e(n,t){n&1&&(o(0,"tr")(1,"td",20),y(2,"i",21),a()())}function Z8e(n,t){n&1&&(o(0,"tr")(1,"td",20),y(2,"i",22),o(3,"p"),l(4,"No transactions found."),a()()())}function eAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",23),l(9),a()(),o(10,"td",16)(11,"span",24),l(12),a()(),o(13,"td")(14,"span",23),l(15),a()()()),n&2){let e=t.$implicit,i=p();c(2),_(i.formatDate(e.transactionDate)),c(2),_(e.description),c(2),_((e.bankAccount==null?null:e.bankAccount.accountName)||"-"),c(2),m("ngClass",Ba(9,K8e,e.transactionType==="Deposit",e.transactionType==="Withdrawal",e.transactionType==="Transfer")),c(),D(" ",e.transactionType," "),c(2),m("ngClass",e.amount>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.amount)," "),c(2),m("ngClass",e.isReconciled?"badge-success":"badge-warning"),c(),D(" ",e.isReconciled?"Reconciled":"Pending"," ")}}var uM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}transactions=[];bankAccounts=[];loading=!1;searchText="";selectedAccountId=null;ngOnInit(){this.loadBankAccounts()}loadBankAccounts(){this.loading=!0,this.accountingService.getAllBankAccounts().subscribe({next:t=>{this.bankAccounts=t,t.length>0?(this.selectedAccountId=t[0].id,this.loadTransactions()):(this.loading=!1,this.cdr.detectChanges())},error:()=>{this.notificationService.error("Failed to load bank accounts"),this.loading=!1,this.cdr.detectChanges()}})}loadTransactions(){if(!this.selectedAccountId){this.transactions=[];return}this.loading=!0,this.accountingService.getBankTransactions(this.selectedAccountId).subscribe({next:t=>{this.transactions=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.notificationService.error("Failed to load transactions"),this.loading=!1,this.cdr.detectChanges()}})}onAccountChange(){this.loadTransactions()}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString()}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-transactions"]],standalone:!1,decls:47,vars:6,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-sync"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search transactions...",3,"ngModelChange","ngModel"],[1,"filters"],[1,"form-control","filter-select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue"],["colspan","6",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-exchange-alt"],[1,"badge",3,"ngClass"],[3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Bank Transactions"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Transactions"),a()()(),o(16,"button",4),x("click",function(){return i.loadTransactions()}),y(17,"i",5),l(18," Refresh "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchText,s)||(i.searchText=s),s}),a()(),o(24,"div",11)(25,"select",12),S("ngModelChange",function(s){return P(i.selectedAccountId,s)||(i.selectedAccountId=s),s}),x("change",function(){return i.onAccountChange()}),b(26,Q8e,2,2,"option",13),a()()(),o(27,"div",14)(28,"table",15)(29,"thead")(30,"tr")(31,"th"),l(32,"Date"),a(),o(33,"th"),l(34,"Description"),a(),o(35,"th"),l(36,"Account"),a(),o(37,"th"),l(38,"Type"),a(),o(39,"th",16),l(40,"Amount"),a(),o(41,"th"),l(42,"Status"),a()()(),o(43,"tbody"),b(44,X8e,3,0,"tr",17)(45,Z8e,5,0,"tr",17)(46,eAe,16,13,"tr",18),a()()()()()),e&2&&(c(23),M("ngModel",i.searchText),c(2),M("ngModel",i.selectedAccountId),c(),m("ngForOf",i.bankAccounts),c(18),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.transactions.length===0),c(),m("ngForOf",i.transactions))},dependencies:[ot,Se,be,je,We,Ie,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-select[_ngcontent-%COMP%]{min-width:150px}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}"]})};function tAe(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),a()())}function nAe(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",15),o(3,"p"),l(4,'No transfers found. Click "New Transfer" to create one.'),a()()())}function iAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td",9),l(8),a(),o(9,"td"),l(10),a(),o(11,"td")(12,"span",16),l(13,"Completed"),a()()()),n&2){let e=t.$implicit,i=p();c(2),_(e.transferDate),c(2),_((e.fromAccount==null?null:e.fromAccount.accountName)||"-"),c(2),_((e.toAccount==null?null:e.toAccount.accountName)||"-"),c(2),_(i.formatCurrency(e.amount)),c(2),_(e.description||"-")}}function rAe(n,t){if(n&1&&(o(0,"option",26),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.accountName)}}function oAe(n,t){if(n&1&&(o(0,"option",26),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.accountName)}}function aAe(n,t){if(n&1){let e=F();o(0,"div",17)(1,"div",18),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",19)(3,"h2"),l(4,"New Transfer"),a(),o(5,"button",20),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",21),a()(),o(7,"div",22)(8,"div",23)(9,"label"),l(10,"From Account "),o(11,"span",24),l(12,"*"),a()(),o(13,"select",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTransfer.fromAccount,r)||(s.newTransfer.fromAccount=r),f(r)}),o(14,"option",26),l(15,"Select Account"),a(),b(16,rAe,2,2,"option",27),a()(),o(17,"div",23)(18,"label"),l(19,"To Account "),o(20,"span",24),l(21,"*"),a()(),o(22,"select",25),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTransfer.toAccount,r)||(s.newTransfer.toAccount=r),f(r)}),o(23,"option",26),l(24,"Select Account"),a(),b(25,oAe,2,2,"option",27),a()(),o(26,"div",23)(27,"label"),l(28,"Amount "),o(29,"span",24),l(30,"*"),a()(),o(31,"input",28),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTransfer.amount,r)||(s.newTransfer.amount=r),f(r)}),a()(),o(32,"div",23)(33,"label"),l(34,"Transfer Date"),a(),o(35,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTransfer.transferDate,r)||(s.newTransfer.transferDate=r),f(r)}),a()(),o(36,"div",23)(37,"label"),l(38,"Description"),a(),o(39,"textarea",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.newTransfer.description,r)||(s.newTransfer.description=r),f(r)}),a()()(),o(40,"div",31)(41,"button",32),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(42,"Cancel"),a(),o(43,"button",4),x("click",function(){g(e);let r=p();return f(r.saveTransfer())}),l(44,"Create Transfer"),a()()()()}if(n&2){let e=p();c(13),M("ngModel",e.newTransfer.fromAccount),c(),m("ngValue",null),c(2),m("ngForOf",e.bankAccounts),c(6),M("ngModel",e.newTransfer.toAccount),c(),m("ngValue",null),c(2),m("ngForOf",e.bankAccounts),c(6),M("ngModel",e.newTransfer.amount),c(4),M("ngModel",e.newTransfer.transferDate),c(4),M("ngModel",e.newTransfer.description)}}var gM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}transfers=[];bankAccounts=[];loading=!1;displayDialog=!1;newTransfer={};ngOnInit(){this.loadBankAccounts()}loadBankAccounts(){this.loading=!0,this.accountingService.getAllBankAccounts().subscribe({next:t=>{this.bankAccounts=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load bank accounts"),this.cdr.detectChanges()}})}openNewDialog(){this.newTransfer={amount:0,description:"",transferDate:new Date().toISOString().split("T")[0]},this.displayDialog=!0}saveTransfer(){if(!this.newTransfer.fromAccount||!this.newTransfer.toAccount||!this.newTransfer.amount||this.newTransfer.amount<=0){this.notificationService.error("Please fill all required fields");return}this.accountingService.createTransfer(this.newTransfer).subscribe({next:()=>{this.notificationService.success("Transfer created successfully"),this.displayDialog=!1,this.cdr.detectChanges()},error:()=>{this.notificationService.error("Failed to create transfer"),this.cdr.detectChanges()}})}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-transfers"]],standalone:!1,decls:41,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","6",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-random"],[1,"badge","badge-success"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[1,"required"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","step","0.01","min","0",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Account Transfers"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Transfers"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," New Transfer "),a()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"Date"),a(),o(26,"th"),l(27,"From Account"),a(),o(28,"th"),l(29,"To Account"),a(),o(30,"th",9),l(31,"Amount"),a(),o(32,"th"),l(33,"Description"),a(),o(34,"th"),l(35,"Status"),a()()(),o(36,"tbody"),b(37,tAe,3,0,"tr",10)(38,nAe,5,0,"tr",10)(39,iAe,14,5,"tr",11),a()()()()(),b(40,aAe,45,9,"div",12)),e&2&&(c(37),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.transfers.length===0),c(),m("ngForOf",i.transfers),c(),m("ngIf",i.displayDialog))},dependencies:[Se,be,je,We,Ie,Mt,Ue,Oe,Xt,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.text-right[_ngcontent-%COMP%]{text-align:right}"]})};function sAe(n,t){if(n&1&&(o(0,"option",20),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e.value),c(),_(e.label)}}function lAe(n,t){n&1&&(o(0,"tr")(1,"td",21),y(2,"i",22),a()())}function cAe(n,t){n&1&&(o(0,"tr")(1,"td",21),y(2,"i",23),o(3,"p"),l(4,'No bills found. Click "New Bill" to create one.'),a()()())}function dAe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),l(9),a(),o(10,"td",16),l(11),a(),o(12,"td")(13,"span",24),l(14),a()(),o(15,"td")(16,"div",25)(17,"button",26),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editBill(r))}),y(18,"i",27),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.billNumber),c(2),_((e.supplier==null?null:e.supplier.name)||e.vendorInvoiceNumber||"-"),c(2),_(e.billDate),c(2),_(e.dueDate||"-"),c(2),_(i.formatCurrency(e.totalAmount||0)),c(2),m("ngClass",i.getStatusClass(e.status||"Draft")),c(),_(e.status||"Draft")}}function pAe(n,t){if(n&1){let e=F();o(0,"div",28)(1,"div",29),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",30)(3,"h2"),l(4),a(),o(5,"button",31),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",32),a()(),o(7,"div",33)(8,"div",34)(9,"label"),l(10,"Bill Number "),o(11,"span",35),l(12,"*"),a()(),o(13,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.billNumber,r)||(s.newBill.billNumber=r),f(r)}),a()(),o(14,"div",34)(15,"label"),l(16,"Vendor Invoice Number"),a(),o(17,"input",36),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.vendorInvoiceNumber,r)||(s.newBill.vendorInvoiceNumber=r),f(r)}),a()(),o(18,"div",37)(19,"div",34)(20,"label"),l(21,"Bill Date"),a(),o(22,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.billDate,r)||(s.newBill.billDate=r),f(r)}),a()(),o(23,"div",34)(24,"label"),l(25,"Due Date"),a(),o(26,"input",38),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.dueDate,r)||(s.newBill.dueDate=r),f(r)}),a()()(),o(27,"div",34)(28,"label"),l(29,"Total Amount"),a(),o(30,"input",39),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.totalAmount,r)||(s.newBill.totalAmount=r),f(r)}),a()(),o(31,"div",34)(32,"label"),l(33,"Status"),a(),o(34,"select",40),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBill.status,r)||(s.newBill.status=r),f(r)}),o(35,"option",41),l(36,"Draft"),a(),o(37,"option",42),l(38,"Pending"),a(),o(39,"option",43),l(40,"Paid"),a()()()(),o(41,"div",44)(42,"button",45),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(43,"Cancel"),a(),o(44,"button",4),x("click",function(){g(e);let r=p();return f(r.saveBill())}),l(45),a()()()()}if(n&2){let e=p();c(4),_(e.isEdit?"Edit Bill":"New Bill"),c(9),M("ngModel",e.newBill.billNumber),c(4),M("ngModel",e.newBill.vendorInvoiceNumber),c(5),M("ngModel",e.newBill.billDate),c(4),M("ngModel",e.newBill.dueDate),c(4),M("ngModel",e.newBill.totalAmount),c(4),M("ngModel",e.newBill.status),c(11),_(e.isEdit?"Update":"Save")}}var fM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}bills=[];loading=!1;searchText="";selectedStatus=null;displayDialog=!1;isEdit=!1;statusOptions=[{label:"All Status",value:null},{label:"Draft",value:"Draft"},{label:"Pending",value:"Pending"},{label:"Paid",value:"Paid"},{label:"Overdue",value:"Overdue"}];newBill={};ngOnInit(){this.loadBills()}loadBills(){this.loading=!0,this.accountingService.getAllBills().subscribe({next:t=>{this.bills=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load bills"),this.cdr.detectChanges()}})}openNewDialog(){this.isEdit=!1,this.newBill={billNumber:"",billDate:new Date().toISOString().split("T")[0],dueDate:"",totalAmount:0,status:"Draft"},this.displayDialog=!0}saveBill(){if(!this.newBill.billNumber){this.notificationService.error("Please fill required fields");return}this.notificationService.info("Bill functionality coming soon"),this.displayDialog=!1}editBill(t){this.isEdit=!0,this.newBill=me({},t),this.displayDialog=!0}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getStatusClass(t){switch(t){case"Paid":return"badge-success";case"Pending":return"badge-warning";case"Overdue":return"badge-danger";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-bills"]],standalone:!1,decls:50,vars:7,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search bills...",3,"ngModelChange","ngModel"],[1,"filters"],[1,"form-control","filter-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],[3,"ngValue"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-file-invoice-dollar"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[1,"required"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Draft"],["value","Pending"],["value","Paid"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Bills Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Bills"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," New Bill "),a()(),o(19,"div",6)(20,"div",7)(21,"div",8),y(22,"i",9),o(23,"input",10),S("ngModelChange",function(s){return P(i.searchText,s)||(i.searchText=s),s}),a()(),o(24,"div",11)(25,"select",12),S("ngModelChange",function(s){return P(i.selectedStatus,s)||(i.selectedStatus=s),s}),b(26,sAe,2,2,"option",13),a()()(),o(27,"div",14)(28,"table",15)(29,"thead")(30,"tr")(31,"th"),l(32,"Bill #"),a(),o(33,"th"),l(34,"Supplier"),a(),o(35,"th"),l(36,"Bill Date"),a(),o(37,"th"),l(38,"Due Date"),a(),o(39,"th",16),l(40,"Amount"),a(),o(41,"th"),l(42,"Status"),a(),o(43,"th"),l(44,"Actions"),a()()(),o(45,"tbody"),b(46,lAe,3,0,"tr",17)(47,cAe,5,0,"tr",17)(48,dAe,19,7,"tr",18),a()()()()(),b(49,pAe,46,8,"div",19)),e&2&&(c(23),M("ngModel",i.searchText),c(2),M("ngModel",i.selectedStatus),c(),m("ngForOf",i.statusOptions),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.bills.length===0),c(),m("ngForOf",i.bills),c(),m("ngIf",i.displayDialog))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.filter-select[_ngcontent-%COMP%]{min-width:150px}.text-right[_ngcontent-%COMP%]{text-align:right}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}"]})};function mAe(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),a()())}function uAe(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",15),o(3,"p"),l(4,'No budgets found. Click "New Budget" to create one.'),a()()())}function gAe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td",9),l(9),a(),o(10,"td",9),l(11),a(),o(12,"td",9)(13,"span",16),l(14),a()(),o(15,"td")(16,"span",17),l(17),a()(),o(18,"td")(19,"div",18)(20,"button",19),x("click",function(){let r=g(e).$implicit,s=p();return f(s.editBudget(r))}),y(21,"i",20),a()()()()}if(n&2){let e=t.$implicit,i=p();c(3),_(e.name),c(2),_(e.fiscalYear),c(2),_(e.budgetType||"Annual"),c(2),_(i.formatCurrency(e.totalIncome||0)),c(2),_(i.formatCurrency(e.totalExpense||0)),c(2),m("ngClass",i.calculateVariance(e)>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(i.calculateVariance(e))," "),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-secondary"),c(),D(" ",e.status," ")}}function fAe(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Budget Name "),o(11,"span",28),l(12,"*"),a()(),o(13,"input",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBudget.name,r)||(s.newBudget.name=r),f(r)}),a()(),o(14,"div",27)(15,"label"),l(16,"Fiscal Year"),a(),o(17,"input",30),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBudget.fiscalYear,r)||(s.newBudget.fiscalYear=r),f(r)}),a()(),o(18,"div",27)(19,"label"),l(20,"Budget Type"),a(),o(21,"select",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBudget.budgetType,r)||(s.newBudget.budgetType=r),f(r)}),o(22,"option",32),l(23,"Annual"),a(),o(24,"option",33),l(25,"Quarterly"),a(),o(26,"option",34),l(27,"Monthly"),a()()(),o(28,"div",27)(29,"label"),l(30,"Description"),a(),o(31,"textarea",35),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBudget.description,r)||(s.newBudget.description=r),f(r)}),a()(),o(32,"div",27)(33,"label"),l(34,"Status"),a(),o(35,"select",31),S("ngModelChange",function(r){g(e);let s=p();return P(s.newBudget.status,r)||(s.newBudget.status=r),f(r)}),o(36,"option",36),l(37,"Draft"),a(),o(38,"option",37),l(39,"Active"),a(),o(40,"option",38),l(41,"Closed"),a()()()(),o(42,"div",39)(43,"button",40),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(44,"Cancel"),a(),o(45,"button",4),x("click",function(){g(e);let r=p();return f(r.saveBudget())}),l(46),a()()()()}if(n&2){let e=p();c(4),_(e.isEdit?"Edit Budget":"New Budget"),c(9),M("ngModel",e.newBudget.name),c(4),M("ngModel",e.newBudget.fiscalYear),c(4),M("ngModel",e.newBudget.budgetType),c(10),M("ngModel",e.newBudget.description),c(4),M("ngModel",e.newBudget.status),c(11),_(e.isEdit?"Update":"Save")}}var hM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}budgets=[];loading=!1;displayDialog=!1;isEdit=!1;newBudget={};ngOnInit(){this.loadBudgets()}loadBudgets(){this.loading=!0,this.accountingService.getAllBudgets().subscribe({next:t=>{this.budgets=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load budgets"),this.cdr.detectChanges()}})}openNewDialog(){this.isEdit=!1,this.newBudget={name:"",fiscalYear:new Date().getFullYear(),budgetType:"Annual",description:"",status:"Draft"},this.displayDialog=!0}saveBudget(){if(!this.newBudget.name){this.notificationService.error("Please enter budget name");return}this.accountingService.createBudget(this.newBudget).subscribe({next:()=>{this.notificationService.success(this.isEdit?"Budget updated":"Budget created"),this.displayDialog=!1,this.loadBudgets()},error:()=>{this.notificationService.error("Failed to save budget"),this.cdr.detectChanges()}})}editBudget(t){this.isEdit=!0,this.newBudget=me({},t),this.displayDialog=!0}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}calculateVariance(t){return(t.totalIncome||0)-(t.totalExpense||0)}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-budgets"]],standalone:!1,decls:45,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-balance-scale"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[1,"required"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Annual"],["value","Quarterly"],["value","Monthly"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],["value","Draft"],["value","Active"],["value","Closed"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Budget Management"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Budgets"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," New Budget "),a()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),a(),o(26,"th"),l(27,"Fiscal Year"),a(),o(28,"th"),l(29,"Type"),a(),o(30,"th",9),l(31,"Income"),a(),o(32,"th",9),l(33,"Expense"),a(),o(34,"th",9),l(35,"Net"),a(),o(36,"th"),l(37,"Status"),a(),o(38,"th"),l(39,"Actions"),a()()(),o(40,"tbody"),b(41,mAe,3,0,"tr",10)(42,uAe,5,0,"tr",10)(43,gAe,22,9,"tr",11),a()()()()(),b(44,fAe,47,7,"div",12)),e&2&&(c(41),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.budgets.length===0),c(),m("ngForOf",i.budgets),c(),m("ngIf",i.displayDialog))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}"]})};function hAe(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",14),a()())}function _Ae(n,t){n&1&&(o(0,"tr")(1,"td",13),y(2,"i",15),o(3,"p"),l(4,'No reconciliations found. Click "New Reconciliation" to start.'),a()()())}function vAe(n,t){if(n&1&&(o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td",9),l(7),a(),o(8,"td",9),l(9),a(),o(10,"td",9)(11,"span",16),l(12),a()(),o(13,"td")(14,"span",17),l(15),a()(),o(16,"td")(17,"div",18)(18,"button",19),y(19,"i",20),a()()()()),n&2){let e=t.$implicit,i=p();c(3),_((e.bankAccount==null?null:e.bankAccount.accountName)||"-"),c(2),_(e.statementDate),c(2),_(i.formatCurrency(e.statementEndingBalance||0)),c(2),_(i.formatCurrency(e.clearedBalance||0)),c(2),m("ngClass",e.difference===0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.difference||0)," "),c(2),m("ngClass",i.getStatusClass(e.status)),c(),_(e.status||"Pending")}}function xAe(n,t){if(n&1&&(o(0,"option",30),l(1),a()),n&2){let e=t.$implicit;m("ngValue",e),c(),_(e.accountName)}}function yAe(n,t){if(n&1){let e=F();o(0,"div",21)(1,"div",22),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4,"New Reconciliation"),a(),o(5,"button",24),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),y(6,"i",25),a()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Bank Account "),o(11,"span",28),l(12,"*"),a()(),o(13,"select",29),S("ngModelChange",function(r){g(e);let s=p();return P(s.newReconciliation.bankAccount,r)||(s.newReconciliation.bankAccount=r),f(r)}),o(14,"option",30),l(15,"Select Account"),a(),b(16,xAe,2,2,"option",31),a()(),o(17,"div",27)(18,"label"),l(19,"Statement Date"),a(),o(20,"input",32),S("ngModelChange",function(r){g(e);let s=p();return P(s.newReconciliation.statementDate,r)||(s.newReconciliation.statementDate=r),f(r)}),a()(),o(21,"div",27)(22,"label"),l(23,"Statement Ending Balance"),a(),o(24,"input",33),S("ngModelChange",function(r){g(e);let s=p();return P(s.newReconciliation.statementEndingBalance,r)||(s.newReconciliation.statementEndingBalance=r),f(r)}),a()(),o(25,"div",27)(26,"label"),l(27,"Notes"),a(),o(28,"textarea",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.newReconciliation.notes,r)||(s.newReconciliation.notes=r),f(r)}),a()()(),o(29,"div",35)(30,"button",36),x("click",function(){g(e);let r=p();return f(r.displayDialog=!1)}),l(31,"Cancel"),a(),o(32,"button",4),x("click",function(){g(e);let r=p();return f(r.startReconciliation())}),l(33,"Start Reconciliation"),a()()()()}if(n&2){let e=p();c(13),M("ngModel",e.newReconciliation.bankAccount),c(),m("ngValue",null),c(2),m("ngForOf",e.bankAccounts),c(4),M("ngModel",e.newReconciliation.statementDate),c(4),M("ngModel",e.newReconciliation.statementEndingBalance),c(4),M("ngModel",e.newReconciliation.notes)}}var _M=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}reconciliations=[];bankAccounts=[];loading=!1;displayDialog=!1;newReconciliation={};ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.accountingService.getAllBankAccounts().subscribe({next:t=>{this.bankAccounts=t,this.cdr.detectChanges(),this.loadReconciliations()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load accounts"),this.cdr.detectChanges()}})}loadReconciliations(){this.accountingService.getAllReconciliations().subscribe({next:t=>{this.reconciliations=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load reconciliations"),this.cdr.detectChanges()}})}openNewDialog(){this.newReconciliation={statementDate:new Date().toISOString().split("T")[0],statementEndingBalance:0,notes:""},this.displayDialog=!0}startReconciliation(){if(!this.newReconciliation.bankAccount){this.notificationService.error("Please select a bank account");return}this.accountingService.createReconciliation(this.newReconciliation).subscribe({next:()=>{this.notificationService.success("Reconciliation started"),this.displayDialog=!1,this.loadReconciliations()},error:()=>{this.notificationService.error("Failed to start reconciliation"),this.cdr.detectChanges()}})}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getStatusClass(t){switch(t){case"Completed":return"badge-success";case"InProgress":return"badge-warning";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-reconciliation"]],standalone:!1,decls:43,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-check-double"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-eye"],[1,"modal-overlay"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],[1,"required"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Bank Reconciliation"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Reconciliation"),a()()(),o(16,"button",4),x("click",function(){return i.openNewDialog()}),y(17,"i",5),l(18," New Reconciliation "),a()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"Account"),a(),o(26,"th"),l(27,"Statement Date"),a(),o(28,"th",9),l(29,"Statement Balance"),a(),o(30,"th",9),l(31,"Cleared Balance"),a(),o(32,"th",9),l(33,"Difference"),a(),o(34,"th"),l(35,"Status"),a(),o(36,"th"),l(37,"Actions"),a()()(),o(38,"tbody"),b(39,hAe,3,0,"tr",10)(40,_Ae,5,0,"tr",10)(41,vAe,20,8,"tr",11),a()()()()(),b(42,yAe,34,6,"div",12)),e&2&&(c(39),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.reconciliations.length===0),c(),m("ngForOf",i.reconciliations),c(),m("ngIf",i.displayDialog))},dependencies:[ot,Se,be,je,We,Ie,Mt,Ue,Oe,Ee,ht],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}"]})};var CAe=()=>["trial-balance","income-statement","deposit-detail","income-by-customer","cheque-detail","budget-overview","ar-aging-summary","ar-aging-detail","ap-aging-summary","ap-aging-detail"],bAe=n=>({"badge-danger":n});function MAe(n,t){if(n&1){let e=F();o(0,"button",7),x("click",function(){g(e);let r=p();return f(r.backToList())}),y(1,"i",8),l(2," Back to Reports "),a()}}function SAe(n,t){if(n&1){let e=F();o(0,"div",15),x("click",function(){let r=g(e).$implicit,s=p(3);return f(s.selectReport(r.id))}),o(1,"div",16),y(2,"i"),a(),o(3,"div",17)(4,"h3"),l(5),a(),o(6,"p"),l(7),a()(),y(8,"i",18),a()}if(n&2){let e=t.$implicit;c(2),bi(e.icon),c(3),_(e.name),c(2),_(e.description)}}function PAe(n,t){if(n&1&&(o(0,"div",11)(1,"h2",12),l(2),a(),o(3,"div",13),b(4,SAe,9,4,"div",14),a()()),n&2){let e=t.$implicit,i=p(2);c(2),_(e),c(2),m("ngForOf",i.getReportsByCategory(e))}}function wAe(n,t){if(n&1&&(o(0,"div",9),b(1,PAe,5,2,"div",10),a()),n&2){let e=p();c(),m("ngForOf",e.reportCategories)}}function EAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td",34),l(6),a(),o(7,"td",34),l(8),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.accountCode),c(2),_(e.accountName),c(2),_(e.debitBalance>0?i.formatCurrency(e.debitBalance):"-"),c(2),_(e.creditBalance>0?i.formatCurrency(e.creditBalance):"-")}}function OAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Account Code"),a(),o(6,"th"),l(7,"Account Name"),a(),o(8,"th",34),l(9,"Debit"),a(),o(10,"th",34),l(11,"Credit"),a()()(),o(12,"tbody"),b(13,EAe,9,4,"tr",35),a(),o(14,"tfoot")(15,"tr",36)(16,"td",37)(17,"strong"),l(18,"Total"),a()(),o(19,"td",34)(20,"strong"),l(21),a()(),o(22,"td",34)(23,"strong"),l(24),a()()()()()()),n&2){let e=p(3);c(13),m("ngForOf",e.reportData.lines),c(8),_(e.formatCurrency(e.reportData.totalDebits)),c(3),_(e.formatCurrency(e.reportData.totalCredits))}}function TAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",34),l(4),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.accountName),c(2),_(i.formatCurrency(e.amount))}}function kAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",34),l(4),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.accountName),c(2),_(i.formatCurrency(e.amount))}}function IAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Account"),a(),o(6,"th",34),l(7,"Amount"),a()()(),o(8,"tbody")(9,"tr",38)(10,"td",37)(11,"strong"),l(12,"Revenue"),a()()(),b(13,TAe,5,2,"tr",35),o(14,"tr",39)(15,"td")(16,"strong"),l(17,"Total Revenue"),a()(),o(18,"td",34)(19,"strong"),l(20),a()()(),o(21,"tr",38)(22,"td",37)(23,"strong"),l(24,"Expenses"),a()()(),b(25,kAe,5,2,"tr",35),o(26,"tr",39)(27,"td")(28,"strong"),l(29,"Total Expenses"),a()(),o(30,"td",34)(31,"strong"),l(32),a()()()(),o(33,"tfoot")(34,"tr",36)(35,"td")(36,"strong"),l(37,"Net Income"),a()(),o(38,"td",40)(39,"strong"),l(40),a()()()()()()),n&2){let e=p(3);c(13),m("ngForOf",e.reportData.revenue),c(7),_(e.formatCurrency(e.reportData.totalRevenue)),c(5),m("ngForOf",e.reportData.expenses),c(7),_(e.formatCurrency(e.reportData.totalExpenses)),c(6),m("ngClass",e.reportData.netIncome>=0?"text-success":"text-danger"),c(2),_(e.formatCurrency(e.reportData.netIncome))}}function DAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td",34),l(10),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.date),c(2),_(e.reference),c(2),_(e.customerSupplier),c(2),_(e.bankAccount),c(2),_(i.formatCurrency(e.amount))}}function AAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Date"),a(),o(6,"th"),l(7,"Reference"),a(),o(8,"th"),l(9,"Customer/Supplier"),a(),o(10,"th"),l(11,"Bank Account"),a(),o(12,"th",34),l(13,"Amount"),a()()(),o(14,"tbody"),b(15,DAe,11,5,"tr",35),a()()()),n&2){let e=p(3);c(15),m("ngForOf",e.reportData)}}function RAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",34),l(4),a(),o(5,"td",34),l(6),a(),o(7,"td",40),l(8),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.customerName),c(2),_(i.formatCurrency(e.income)),c(2),_(i.formatCurrency(e.expenses)),c(),m("ngClass",e.netIncome>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.netIncome)," ")}}function FAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Customer"),a(),o(6,"th",34),l(7,"Income"),a(),o(8,"th",34),l(9,"Expenses"),a(),o(10,"th",34),l(11,"Net Income"),a()()(),o(12,"tbody"),b(13,RAe,9,5,"tr",35),a()()()),n&2){let e=p(3);c(13),m("ngForOf",e.reportData)}}function NAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a(),o(9,"td")(10,"span",41),l(11),a()(),o(12,"td",34),l(13),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.date),c(2),_(e.chequeNumber),c(2),_(e.payee),c(2),_(e.bankAccount),c(3),_(e.status),c(2),_(i.formatCurrency(e.amount))}}function LAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Date"),a(),o(6,"th"),l(7,"Cheque #"),a(),o(8,"th"),l(9,"Payee"),a(),o(10,"th"),l(11,"Bank Account"),a(),o(12,"th"),l(13,"Status"),a(),o(14,"th",34),l(15,"Amount"),a()()(),o(16,"tbody"),b(17,NAe,14,6,"tr",35),a()()()),n&2){let e=p(3);c(17),m("ngForOf",e.reportData)}}function VAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td",34),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td",40),l(10),a(),o(11,"td",34),l(12),Le(13,"number"),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.budgetName),c(2),_(e.fiscalYear),c(2),_(i.formatCurrency(e.totalBudgeted)),c(2),_(i.formatCurrency(e.totalActual)),c(),m("ngClass",e.variance>=0?"text-success":"text-danger"),c(),D(" ",i.formatCurrency(e.variance)," "),c(2),D("",rt(13,7,e.variancePercent,"1.1-1"),"%")}}function BAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Budget Name"),a(),o(6,"th"),l(7,"Fiscal Year"),a(),o(8,"th",34),l(9,"Total Budgeted"),a(),o(10,"th",34),l(11,"Total Actual"),a(),o(12,"th",34),l(13,"Variance"),a(),o(14,"th",34),l(15,"% Used"),a()()(),o(16,"tbody"),b(17,VAe,14,10,"tr",35),a()()()),n&2){let e=p(3);c(17),m("ngForOf",e.reportData)}}function UAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",34),l(4),a(),o(5,"td",34),l(6),a(),o(7,"td",34),l(8),a(),o(9,"td",34),l(10),a(),o(11,"td",42),l(12),a(),o(13,"td",34)(14,"strong"),l(15),a()()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.customerName||e.supplierName),c(2),_(i.formatCurrency(e.current)),c(2),_(i.formatCurrency(e.days1to30)),c(2),_(i.formatCurrency(e.days31to60)),c(2),_(i.formatCurrency(e.days61to90)),c(2),_(i.formatCurrency(e.over90)),c(3),_(i.formatCurrency(e.total))}}function jAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5),a(),o(6,"th",34),l(7,"Current"),a(),o(8,"th",34),l(9,"1-30 Days"),a(),o(10,"th",34),l(11,"31-60 Days"),a(),o(12,"th",34),l(13,"61-90 Days"),a(),o(14,"th",34),l(15,"Over 90"),a(),o(16,"th",34),l(17,"Total"),a()()(),o(18,"tbody"),b(19,UAe,16,7,"tr",35),a()()()),n&2){let e=p(3);c(5),_(e.selectedReport==="ar-aging-summary"?"Customer":"Supplier"),c(14),m("ngForOf",e.reportData)}}function WAe(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td")(8,"span",43),l(9),a()(),o(10,"td",34),l(11),a(),o(12,"td",34),l(13),a()()),n&2){let e=t.$implicit,i=p(4);c(2),_(e.invoiceNumber||e.billNumber),c(2),_(e.invoiceDate||e.billDate),c(2),_(e.description),c(2),m("ngClass",zc(7,bAe,e.agingBucket==="Over 90 Days")),c(),_(e.agingBucket),c(2),_(e.daysPastDue),c(2),_(i.formatCurrency(e.amount||e.balanceDue))}}function zAe(n,t){if(n&1&&(o(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5),a(),o(6,"th"),l(7,"Date"),a(),o(8,"th"),l(9,"Description"),a(),o(10,"th"),l(11,"Aging"),a(),o(12,"th",34),l(13,"Days Past Due"),a(),o(14,"th",34),l(15,"Amount"),a()()(),o(16,"tbody"),b(17,WAe,14,9,"tr",35),a()()()),n&2){let e=p(3);c(5),_(e.selectedReport==="ar-aging-detail"?"Invoice #":"Bill #"),c(12),m("ngForOf",e.reportData)}}function qAe(n,t){if(n&1&&(o(0,"div",44),y(1,"i",45),o(2,"p"),l(3,"Report data displayed here"),a(),o(4,"pre"),l(5),Le(6,"json"),a()()),n&2){let e=p(3);c(5),_(xn(6,1,e.reportData))}}function HAe(n,t){if(n&1&&(o(0,"div",28)(1,"div",29)(2,"h2"),l(3),a(),o(4,"p"),l(5),a()(),b(6,OAe,25,3,"div",30)(7,IAe,41,6,"div",30)(8,AAe,16,1,"div",30)(9,FAe,14,1,"div",30)(10,LAe,18,1,"div",30)(11,BAe,18,1,"div",30)(12,jAe,20,2,"div",30)(13,zAe,18,2,"div",30)(14,qAe,7,3,"div",31),a()),n&2){let e=p(2);c(3),_(e.getSelectedReportName()),c(2),Ge("Period: ",e.startDate," to ",e.endDate),c(),m("ngIf",e.selectedReport==="trial-balance"),c(),m("ngIf",e.selectedReport==="income-statement"),c(),m("ngIf",e.selectedReport==="deposit-detail"),c(),m("ngIf",e.selectedReport==="income-by-customer"),c(),m("ngIf",e.selectedReport==="cheque-detail"),c(),m("ngIf",e.selectedReport==="budget-overview"),c(),m("ngIf",e.selectedReport==="ar-aging-summary"||e.selectedReport==="ap-aging-summary"),c(),m("ngIf",e.selectedReport==="ar-aging-detail"||e.selectedReport==="ap-aging-detail"),c(),m("ngIf",!na(12,CAe).includes(e.selectedReport))}}function GAe(n,t){n&1&&(o(0,"div",46),y(1,"i",47),o(2,"p"),l(3,'Select date range and click "Generate Report" to view data'),a()())}function $Ae(n,t){if(n&1){let e=F();o(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"label"),l(5,"Start Date"),a(),o(6,"input",23),S("ngModelChange",function(r){g(e);let s=p();return P(s.startDate,r)||(s.startDate=r),f(r)}),a()(),o(7,"div",22)(8,"label"),l(9,"End Date"),a(),o(10,"input",23),S("ngModelChange",function(r){g(e);let s=p();return P(s.endDate,r)||(s.endDate=r),f(r)}),a()(),o(11,"button",24),x("click",function(){g(e);let r=p();return f(r.generateReport())}),y(12,"i",25),l(13," Generate Report "),a()(),b(14,HAe,15,13,"div",26)(15,GAe,4,0,"div",27),a()()}if(n&2){let e=p();c(6),M("ngModel",e.startDate),c(4),M("ngModel",e.endDate),c(),m("disabled",e.loading),c(),m("ngClass",e.loading?"fa-spinner fa-spin":"fa-play"),c(2),m("ngIf",e.reportData),c(),m("ngIf",!e.reportData&&!e.loading)}}var vM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}loading=!1;selectedReport=null;reportData=null;startDate="";endDate="";reports=[{id:"trial-balance",name:"Trial Balance",icon:"fas fa-balance-scale",description:"View debit and credit balances for all accounts",category:"Core"},{id:"income-statement",name:"Income Statement",icon:"fas fa-chart-line",description:"Revenue, expenses, and net income/loss",category:"Core"},{id:"balance-sheet",name:"Balance Sheet",icon:"fas fa-file-invoice-dollar",description:"Assets, liabilities, and equity snapshot",category:"Core"},{id:"cash-flow",name:"Cash Flow Statement",icon:"fas fa-money-bill-wave",description:"Cash inflows and outflows by activity",category:"Core"},{id:"general-ledger",name:"General Ledger",icon:"fas fa-book",description:"Complete transaction history by account",category:"Core"},{id:"deposit-detail",name:"Deposit Detail",icon:"fas fa-piggy-bank",description:"Your deposits with date, customer/supplier, and amount",category:"Sales & Customers"},{id:"income-by-customer",name:"Income by Customer Summary",icon:"fas fa-user-tag",description:"Net income for each customer",category:"Sales & Customers"},{id:"cheque-detail",name:"Cheque Detail",icon:"fas fa-money-check",description:"Checks written with date, payee, and amount",category:"Expenses & Suppliers"},{id:"budget-overview",name:"Budget Overview",icon:"fas fa-clipboard-list",description:"Summary of budgeted account balances",category:"Budgets"},{id:"budget-vs-actual",name:"P&L Budget vs Actual",icon:"fas fa-chart-bar",description:"Compare budgeted vs actual amounts",category:"Budgets"},{id:"budget-performance",name:"Budget Performance",icon:"fas fa-tachometer-alt",description:"Monthly, YTD, and annual budget comparison",category:"Budgets"},{id:"ar-aging-summary",name:"A/R Aging Summary",icon:"fas fa-file-invoice",description:"Unpaid balances by customer, grouped by days past due",category:"A/R Reports"},{id:"ar-aging-detail",name:"A/R Aging Detail",icon:"fas fa-list-alt",description:"Unpaid invoices grouped by days past due",category:"A/R Reports"},{id:"ap-aging-summary",name:"A/P Aging Summary",icon:"fas fa-file-invoice-dollar",description:"Unpaid bills grouped by days past due",category:"A/P Reports"},{id:"ap-aging-detail",name:"A/P Aging Detail",icon:"fas fa-receipt",description:"Unpaid bills detail grouped by days past due",category:"A/P Reports"}];reportCategories=["Core","Sales & Customers","Expenses & Suppliers","Budgets","A/R Reports","A/P Reports"];getReportsByCategory(t){return this.reports.filter(e=>e.category===t)}ngOnInit(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.startDate=e.toISOString().split("T")[0],this.endDate=t.toISOString().split("T")[0],this.cdr.detectChanges()}selectReport(t){this.selectedReport=t,this.reportData=null,this.cdr.detectChanges()}generateReport(){if(this.selectedReport)switch(this.loading=!0,this.selectedReport){case"trial-balance":this.accountingService.getTrialBalance(this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"income-statement":this.accountingService.getIncomeStatement(this.startDate,this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"balance-sheet":this.accountingService.getBalanceSheet(this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"deposit-detail":this.accountingService.getDepositDetail(this.startDate,this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"income-by-customer":this.accountingService.getIncomeByCustomer(this.startDate,this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"cheque-detail":this.accountingService.getChequeDetail(this.startDate,this.endDate).subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"budget-overview":this.accountingService.getBudgetOverview().subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"ar-aging-summary":this.accountingService.getARAgingSummary().subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"ar-aging-detail":this.accountingService.getARAgingDetail().subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"ap-aging-summary":this.accountingService.getAPAgingSummary().subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;case"ap-aging-detail":this.accountingService.getAPAgingDetail().subscribe({next:t=>{this.reportData=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to generate report"),this.cdr.detectChanges()}});break;default:this.loading=!1,this.notificationService.info("Report coming soon"),this.cdr.detectChanges()}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getSelectedReportName(){let t=this.reports.find(e=>e.id===this.selectedReport);return t?t.name:""}backToList(){this.selectedReport=null,this.reportData=null,this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-financial-reports"]],standalone:!1,decls:19,vars:3,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","reports-categories",4,"ngIf"],["class","report-view",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],[1,"reports-categories"],["class","category-section",4,"ngFor","ngForOf"],[1,"category-section"],[1,"category-title"],[1,"reports-grid"],["class","report-card",3,"click",4,"ngFor","ngForOf"],[1,"report-card",3,"click"],[1,"report-icon"],[1,"report-info"],[1,"fas","fa-chevron-right"],[1,"report-view"],[1,"card"],[1,"report-filters"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","report-content",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"report-content"],[1,"report-header"],["class","table-container",4,"ngIf"],["class","report-placeholder",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","2"],[1,"section-header"],[1,"subtotal-row"],[1,"text-right",3,"ngClass"],[1,"badge"],[1,"text-right","text-danger"],[1,"badge",3,"ngClass"],[1,"report-placeholder"],[1,"fas","fa-file-alt"],[1,"empty-state"],[1,"fas","fa-chart-bar"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Financial Reports"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Reports"),a()()(),b(16,MAe,3,0,"button",4),a(),b(17,wAe,2,1,"div",5)(18,$Ae,16,6,"div",6),a()),e&2&&(c(16),m("ngIf",i.selectedReport),c(),m("ngIf",!i.selectedReport),c(),m("ngIf",i.selectedReport))},dependencies:[ot,Se,be,Ie,Oe,Ee,ht,uE,yn],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:16px}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;cursor:pointer;box-shadow:0 2px 10px #00000014;transition:all .2s}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001f;border-left:3px solid var(--primary-color)}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));border-radius:12px;display:flex;align-items:center;justify-content:center}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:#fff}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]   .report-info[_ngcontent-%COMP%]{flex:1}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]   .report-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;color:var(--text-primary)}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%]   .report-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-secondary)}.reports-grid[_ngcontent-%COMP%]   .report-card[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]:last-child{color:var(--text-secondary)}.report-filters[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid var(--border-color)}.report-filters[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.report-content[_ngcontent-%COMP%]   .report-header[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid var(--primary-color)}.report-content[_ngcontent-%COMP%]   .report-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-primary)}.report-content[_ngcontent-%COMP%]   .report-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:.875rem;color:var(--text-secondary)}.report-content[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{background:#f1f5f9}.report-content[_ngcontent-%COMP%]   .subtotal-row[_ngcontent-%COMP%]{background:#f8fafc}.report-content[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e2e8f0;font-weight:600}.report-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:var(--text-secondary)}.report-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px}.text-right[_ngcontent-%COMP%]{text-align:right}.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}@media(max-width:768px){.report-filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};function YAe(n,t){if(n&1){let e=F();o(0,"a",12),x("click",function(){let r=g(e).$implicit,s=p();return f(s.selectTab(r.id))}),y(1,"i"),o(2,"span"),l(3),a()()}if(n&2){let e=t.$implicit,i=p();ie("active",i.activeTab===e.id),c(),bi(e.icon),c(2),_(e.name)}}function JAe(n,t){n&1&&(o(0,"div",13),y(1,"i",14),a())}function KAe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"h2"),l(2,"General Settings"),a(),o(3,"div",16)(4,"div",17)(5,"label"),l(6,"Fiscal Year Start"),a(),o(7,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.fiscalYearStart,r)||(s.generalSettings.fiscalYearStart=r),f(r)}),o(8,"option",19),l(9,"January"),a(),o(10,"option",20),l(11,"April"),a(),o(12,"option",21),l(13,"July"),a(),o(14,"option",22),l(15,"October"),a()()(),o(16,"div",17)(17,"label"),l(18,"Accounting Method"),a(),o(19,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.accountingMethod,r)||(s.generalSettings.accountingMethod=r),f(r)}),o(20,"option",23),l(21,"Accrual"),a(),o(22,"option",24),l(23,"Cash"),a()()(),o(24,"div",17)(25,"label"),l(26,"Base Currency"),a(),o(27,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.baseCurrency,r)||(s.generalSettings.baseCurrency=r),f(r)}),o(28,"option",25),l(29,"USD - US Dollar"),a(),o(30,"option",26),l(31,"EUR - Euro"),a(),o(32,"option",27),l(33,"GBP - British Pound"),a()()(),o(34,"div",17)(35,"label"),l(36,"Default Payment Terms"),a(),o(37,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.defaultPaymentTerms,r)||(s.generalSettings.defaultPaymentTerms=r),f(r)}),o(38,"option",28),l(39,"Net 15"),a(),o(40,"option",29),l(41,"Net 30"),a(),o(42,"option",30),l(43,"Net 45"),a(),o(44,"option",31),l(45,"Net 60"),a(),o(46,"option",32),l(47,"Due on Receipt"),a()()()(),o(48,"div",17)(49,"label",33)(50,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.multiCurrencyEnabled,r)||(s.generalSettings.multiCurrencyEnabled=r),f(r)}),a(),l(51," Enable Multi-Currency "),a()(),o(52,"div",17)(53,"label",33)(54,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.autoJournalEntryNumbering,r)||(s.generalSettings.autoJournalEntryNumbering=r),f(r)}),a(),l(55," Auto-generate Journal Entry Numbers "),a()(),o(56,"div",17)(57,"label",33)(58,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.generalSettings.trackBillableExpenses,r)||(s.generalSettings.trackBillableExpenses=r),f(r)}),a(),l(59," Track Billable Expenses "),a()(),o(60,"div",35)(61,"button",36),x("click",function(){g(e);let r=p();return f(r.saveGeneralSettings())}),y(62,"i",37),l(63," Save Settings "),a()()()}if(n&2){let e=p();c(7),M("ngModel",e.generalSettings.fiscalYearStart),c(12),M("ngModel",e.generalSettings.accountingMethod),c(8),M("ngModel",e.generalSettings.baseCurrency),c(10),M("ngModel",e.generalSettings.defaultPaymentTerms),c(13),M("ngModel",e.generalSettings.multiCurrencyEnabled),c(4),M("ngModel",e.generalSettings.autoJournalEntryNumbering),c(4),M("ngModel",e.generalSettings.trackBillableExpenses)}}function QAe(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Add Account Detail Type"),a(),o(4,"div",17)(5,"label"),l(6,"Account Type"),a(),o(7,"select",18),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newDetailType.accountType,r)||(s.newDetailType.accountType=r),f(r)}),o(8,"option",45),l(9,"Asset"),a(),o(10,"option",46),l(11,"Liability"),a(),o(12,"option",47),l(13,"Equity"),a(),o(14,"option",48),l(15,"Income"),a(),o(16,"option",49),l(17,"Expense"),a()()(),o(18,"div",17)(19,"label"),l(20,"Name"),a(),o(21,"input",50),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newDetailType.name,r)||(s.newDetailType.name=r),f(r)}),a()(),o(22,"div",17)(23,"label"),l(24,"Description"),a(),o(25,"textarea",18),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newDetailType.description,r)||(s.newDetailType.description=r),f(r)}),a()(),o(26,"div",51)(27,"button",52),x("click",function(){g(e);let r=p(2);return f(r.showAddDetailType=!1)}),l(28,"Cancel"),a(),o(29,"button",36),x("click",function(){g(e);let r=p(2);return f(r.addAccountDetailType())}),l(30,"Add"),a()()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.newDetailType.accountType),c(14),M("ngModel",e.newDetailType.name),c(4),M("ngModel",e.newDetailType.description)}}function XAe(n,t){if(n&1&&(o(0,"tr")(1,"td")(2,"span",53),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td"),y(9,"i",54),a()()),n&2){let e=t.$implicit;c(3),_(e.accountType),c(2),_(e.name),c(2),_(e.description),c(2),m("ngClass",e.isSystem?"fa-check text-success":"fa-times text-muted")}}function ZAe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"div",38)(2,"h2"),l(3,"Account Detail Types"),a(),o(4,"button",36),x("click",function(){g(e);let r=p();return f(r.showAddDetailType=!0)}),y(5,"i",39),l(6," Add Type "),a()(),b(7,QAe,31,3,"div",40),o(8,"table",41)(9,"thead")(10,"tr")(11,"th"),l(12,"Account Type"),a(),o(13,"th"),l(14,"Name"),a(),o(15,"th"),l(16,"Description"),a(),o(17,"th"),l(18,"System"),a()()(),o(19,"tbody"),b(20,XAe,10,4,"tr",42),a()()()}if(n&2){let e=p();c(7),m("ngIf",e.showAddDetailType),c(13),m("ngForOf",e.accountDetailTypes)}}function eRe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"h2"),l(2,"Plaid Environment Setup"),a(),o(3,"p",55),l(4,"Configure your Plaid integration for automatic bank transaction imports."),a(),o(5,"div",16)(6,"div",17)(7,"label"),l(8,"Environment"),a(),o(9,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.plaidSettings.environment,r)||(s.plaidSettings.environment=r),f(r)}),o(10,"option",56),l(11,"Sandbox (Testing)"),a(),o(12,"option",57),l(13,"Development"),a(),o(14,"option",58),l(15,"Production"),a()()(),o(16,"div",17)(17,"label"),l(18,"Client ID"),a(),o(19,"input",59),S("ngModelChange",function(r){g(e);let s=p();return P(s.plaidSettings.clientId,r)||(s.plaidSettings.clientId=r),f(r)}),a()(),o(20,"div",17)(21,"label"),l(22,"Sync Frequency"),a(),o(23,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.plaidSettings.syncFrequency,r)||(s.plaidSettings.syncFrequency=r),f(r)}),o(24,"option",60),l(25,"Hourly"),a(),o(26,"option",61),l(27,"Daily"),a(),o(28,"option",62),l(29,"Weekly"),a()()(),o(30,"div",17)(31,"label"),l(32,"Language"),a(),o(33,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.plaidSettings.language,r)||(s.plaidSettings.language=r),f(r)}),o(34,"option",63),l(35,"English"),a(),o(36,"option",64),l(37,"Spanish"),a(),o(38,"option",65),l(39,"French"),a()()()(),o(40,"div",17)(41,"label",33)(42,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.plaidSettings.autoImportTransactions,r)||(s.plaidSettings.autoImportTransactions=r),f(r)}),a(),l(43," Auto-import Transactions "),a()(),o(44,"div",35)(45,"button",36),x("click",function(){g(e);let r=p();return f(r.savePlaidSettings())}),y(46,"i",37),l(47," Save Plaid Settings "),a()()()}if(n&2){let e=p();c(9),M("ngModel",e.plaidSettings.environment),c(10),M("ngModel",e.plaidSettings.clientId),c(4),M("ngModel",e.plaidSettings.syncFrequency),c(10),M("ngModel",e.plaidSettings.language),c(9),M("ngModel",e.plaidSettings.autoImportTransactions)}}function tRe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"h2"),l(2,"Income Statement Modification"),a(),o(3,"p",55),l(4,"Customize how your income statement report is generated and displayed."),a(),o(5,"div",17)(6,"label",33)(7,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.showSubtotals,r)||(s.incomeStatementSettings.showSubtotals=r),f(r)}),a(),l(8," Show Section Subtotals "),a()(),o(9,"div",17)(10,"label",33)(11,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.showPercentages,r)||(s.incomeStatementSettings.showPercentages=r),f(r)}),a(),l(12," Show Percentages "),a()(),o(13,"div",17)(14,"label",33)(15,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.comparePeriods,r)||(s.incomeStatementSettings.comparePeriods=r),f(r)}),a(),l(16," Enable Period Comparison "),a()(),o(17,"div",17)(18,"label",33)(19,"input",34),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.showZeroBalanceAccounts,r)||(s.incomeStatementSettings.showZeroBalanceAccounts=r),f(r)}),a(),l(20," Show Zero Balance Accounts "),a()(),o(21,"div",16)(22,"div",17)(23,"label"),l(24,"Default Date Range"),a(),o(25,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.defaultDateRange,r)||(s.incomeStatementSettings.defaultDateRange=r),f(r)}),o(26,"option",66),l(27,"This Month"),a(),o(28,"option",67),l(29,"Last Month"),a(),o(30,"option",68),l(31,"This Quarter"),a(),o(32,"option",69),l(33,"This Fiscal Year"),a(),o(34,"option",70),l(35,"Last Fiscal Year"),a()()(),o(36,"div",17)(37,"label"),l(38,"Accounting Basis"),a(),o(39,"select",18),S("ngModelChange",function(r){g(e);let s=p();return P(s.incomeStatementSettings.accountingBasis,r)||(s.incomeStatementSettings.accountingBasis=r),f(r)}),o(40,"option",23),l(41,"Accrual"),a(),o(42,"option",24),l(43,"Cash"),a()()()(),o(44,"div",35)(45,"button",36),x("click",function(){g(e);let r=p();return f(r.saveIncomeStatementSettings())}),y(46,"i",37),l(47," Save Settings "),a()()()}if(n&2){let e=p();c(7),M("ngModel",e.incomeStatementSettings.showSubtotals),c(4),M("ngModel",e.incomeStatementSettings.showPercentages),c(4),M("ngModel",e.incomeStatementSettings.comparePeriods),c(4),M("ngModel",e.incomeStatementSettings.showZeroBalanceAccounts),c(6),M("ngModel",e.incomeStatementSettings.defaultDateRange),c(14),M("ngModel",e.incomeStatementSettings.accountingBasis)}}function nRe(n,t){if(n&1){let e=F();o(0,"div",43)(1,"div",44),x("click",function(r){return g(e),f(r.stopPropagation())}),o(2,"h3"),l(3,"Add Currency Rate"),a(),o(4,"div",17)(5,"label"),l(6,"Currency Code"),a(),o(7,"input",74),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newCurrencyRate.currencyCode,r)||(s.newCurrencyRate.currencyCode=r),f(r)}),a()(),o(8,"div",17)(9,"label"),l(10,"Currency Name"),a(),o(11,"input",75),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newCurrencyRate.currencyName,r)||(s.newCurrencyRate.currencyName=r),f(r)}),a()(),o(12,"div",17)(13,"label"),l(14,"Exchange Rate (to USD)"),a(),o(15,"input",76),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newCurrencyRate.exchangeRate,r)||(s.newCurrencyRate.exchangeRate=r),f(r)}),a()(),o(16,"div",17)(17,"label"),l(18,"Effective Date"),a(),o(19,"input",77),S("ngModelChange",function(r){g(e);let s=p(2);return P(s.newCurrencyRate.effectiveDate,r)||(s.newCurrencyRate.effectiveDate=r),f(r)}),a()(),o(20,"div",51)(21,"button",52),x("click",function(){g(e);let r=p(2);return f(r.showAddCurrency=!1)}),l(22,"Cancel"),a(),o(23,"button",36),x("click",function(){g(e);let r=p(2);return f(r.addCurrencyRate())}),l(24,"Add"),a()()()()}if(n&2){let e=p(2);c(7),M("ngModel",e.newCurrencyRate.currencyCode),c(4),M("ngModel",e.newCurrencyRate.currencyName),c(4),M("ngModel",e.newCurrencyRate.exchangeRate),c(4),M("ngModel",e.newCurrencyRate.effectiveDate)}}function iRe(n,t){if(n&1){let e=F();o(0,"tr")(1,"td")(2,"strong"),l(3),a()(),o(4,"td"),l(5),a(),o(6,"td"),l(7),a(),o(8,"td",73),l(9),a(),o(10,"td"),l(11),a(),o(12,"td")(13,"span",53),l(14),a()(),o(15,"td")(16,"button",78),x("click",function(){let r=g(e).$implicit,s=p(2);return f(s.deleteCurrencyRate(r))}),y(17,"i",79),a()()()}if(n&2){let e=t.$implicit;c(3),_(e.currencyCode),c(2),_(e.currencyName),c(2),_(e.baseCurrency),c(2),_(e.exchangeRate),c(2),_(e.effectiveDate),c(3),_(e.source)}}function rRe(n,t){if(n&1){let e=F();o(0,"div",15)(1,"div",38)(2,"h2"),l(3,"Currency Exchange Rates"),a(),o(4,"div",71)(5,"button",52),x("click",function(){g(e);let r=p();return f(r.fetchLatestRates())}),y(6,"i",72),l(7," Fetch Latest Rates "),a(),o(8,"button",36),x("click",function(){g(e);let r=p();return f(r.showAddCurrency=!0)}),y(9,"i",39),l(10," Add Currency "),a()()(),b(11,nRe,25,4,"div",40),o(12,"table",41)(13,"thead")(14,"tr")(15,"th"),l(16,"Code"),a(),o(17,"th"),l(18,"Currency Name"),a(),o(19,"th"),l(20,"Base"),a(),o(21,"th",73),l(22,"Exchange Rate"),a(),o(23,"th"),l(24,"Effective Date"),a(),o(25,"th"),l(26,"Source"),a(),o(27,"th"),l(28,"Actions"),a()()(),o(29,"tbody"),b(30,iRe,18,6,"tr",42),a()()()}if(n&2){let e=p();c(11),m("ngIf",e.showAddCurrency),c(19),m("ngForOf",e.currencyRates)}}var xM=class n{constructor(t,e,i){this.accountingService=t;this.notificationService=e;this.cdr=i}loading=!1;activeTab="general";generalSettings={};accountDetailTypes=[];plaidSettings={};incomeStatementSettings={};currencyRates=[];showAddDetailType=!1;showAddCurrency=!1;newDetailType={accountType:"",name:"",description:""};newCurrencyRate={currencyCode:"",currencyName:"",exchangeRate:null,effectiveDate:""};tabs=[{id:"general",name:"General",icon:"fas fa-cog"},{id:"account-types",name:"Account Detail Types",icon:"fas fa-list"},{id:"plaid",name:"Plaid Environment",icon:"fas fa-link"},{id:"income-statement",name:"Income Statement",icon:"fas fa-file-alt"},{id:"currency-rates",name:"Currency Rates",icon:"fas fa-coins"}];ngOnInit(){this.loadGeneralSettings()}selectTab(t){switch(this.activeTab=t,this.cdr.detectChanges(),t){case"general":this.loadGeneralSettings();break;case"account-types":this.loadAccountDetailTypes();break;case"plaid":this.loadPlaidSettings();break;case"income-statement":this.loadIncomeStatementSettings();break;case"currency-rates":this.loadCurrencyRates();break}}loadGeneralSettings(){this.loading=!0,this.accountingService.getGeneralSettings().subscribe({next:t=>{this.generalSettings=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load settings"),this.cdr.detectChanges()}})}saveGeneralSettings(){this.loading=!0,this.accountingService.updateGeneralSettings(this.generalSettings).subscribe({next:()=>{this.loading=!1,this.notificationService.success("Settings saved successfully"),this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to save settings"),this.cdr.detectChanges()}})}loadAccountDetailTypes(){this.loading=!0,this.accountingService.getAccountDetailTypes().subscribe({next:t=>{this.accountDetailTypes=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load account types"),this.cdr.detectChanges()}})}addAccountDetailType(){!this.newDetailType.name||!this.newDetailType.accountType||this.accountingService.createAccountDetailType(this.newDetailType).subscribe({next:t=>{this.accountDetailTypes.push(t),this.newDetailType={accountType:"",name:"",description:""},this.showAddDetailType=!1,this.notificationService.success("Account detail type added"),this.cdr.detectChanges()},error:()=>{this.notificationService.error("Failed to add account type"),this.cdr.detectChanges()}})}loadPlaidSettings(){this.loading=!0,this.accountingService.getPlaidSettings().subscribe({next:t=>{this.plaidSettings=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load Plaid settings"),this.cdr.detectChanges()}})}savePlaidSettings(){this.loading=!0,this.accountingService.updatePlaidSettings(this.plaidSettings).subscribe({next:()=>{this.loading=!1,this.notificationService.success("Plaid settings saved"),this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to save Plaid settings"),this.cdr.detectChanges()}})}loadIncomeStatementSettings(){this.loading=!0,this.accountingService.getIncomeStatementSettings().subscribe({next:t=>{this.incomeStatementSettings=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load settings"),this.cdr.detectChanges()}})}saveIncomeStatementSettings(){this.loading=!0,this.accountingService.updateIncomeStatementSettings(this.incomeStatementSettings).subscribe({next:()=>{this.loading=!1,this.notificationService.success("Income statement settings saved"),this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to save settings"),this.cdr.detectChanges()}})}loadCurrencyRates(){this.loading=!0,this.accountingService.getCurrencyRates().subscribe({next:t=>{this.currencyRates=t,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.notificationService.error("Failed to load currency rates"),this.cdr.detectChanges()}})}addCurrencyRate(){!this.newCurrencyRate.currencyCode||!this.newCurrencyRate.exchangeRate||this.accountingService.createCurrencyRate(this.newCurrencyRate).subscribe({next:t=>{this.currencyRates.push(t),this.newCurrencyRate={currencyCode:"",currencyName:"",exchangeRate:null,effectiveDate:""},this.showAddCurrency=!1,this.notificationService.success("Currency rate added"),this.cdr.detectChanges()},error:()=>{this.notificationService.error("Failed to add currency rate"),this.cdr.detectChanges()}})}deleteCurrencyRate(t){confirm("Delete this currency rate?")&&this.accountingService.deleteCurrencyRate(t.id).subscribe({next:()=>{this.currencyRates=this.currencyRates.filter(e=>e.id!==t.id),this.notificationService.success("Currency rate deleted"),this.cdr.detectChanges()},error:()=>{this.notificationService.error("Failed to delete currency rate"),this.cdr.detectChanges()}})}fetchLatestRates(){this.loading=!0,this.accountingService.fetchLatestCurrencyRates().subscribe({next:()=>{this.loadCurrencyRates(),this.notificationService.success("Currency rates updated")},error:()=>{this.loading=!1,this.notificationService.error("Failed to fetch rates"),this.cdr.detectChanges()}})}static \u0275fac=function(e){return new(e||n)(V(Sr),V(en),V(dt))};static \u0275cmp=_e({type:n,selectors:[["app-finance-settings"]],standalone:!1,decls:28,vars:7,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"settings-layout"],[1,"settings-sidebar"],[1,"settings-nav"],["class","settings-nav-item",3,"active","click",4,"ngFor","ngForOf"],[1,"settings-content"],[1,"card"],["class","loading-overlay",4,"ngIf"],["class","settings-panel",4,"ngIf"],[1,"settings-nav-item",3,"click"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"settings-panel"],[1,"form-grid"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value","January"],["value","April"],["value","July"],["value","October"],["value","Accrual"],["value","Cash"],["value","USD"],["value","EUR"],["value","GBP"],["value","Net 15"],["value","Net 30"],["value","Net 45"],["value","Net 60"],["value","Due on Receipt"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-save"],[1,"panel-header"],[1,"fas","fa-plus"],["class","modal-overlay",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[1,"modal-overlay"],[1,"modal-content",3,"click"],["value","ASSET"],["value","LIABILITY"],["value","EQUITY"],["value","INCOME"],["value","EXPENSE"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click"],[1,"badge"],[1,"fas",3,"ngClass"],[1,"settings-description"],["value","sandbox"],["value","development"],["value","production"],["type","text","placeholder","Enter Plaid Client ID",1,"form-control",3,"ngModelChange","ngModel"],["value","hourly"],["value","daily"],["value","weekly"],["value","en"],["value","es"],["value","fr"],["value","This Month"],["value","Last Month"],["value","This Quarter"],["value","This Fiscal Year"],["value","Last Fiscal Year"],[1,"header-actions"],[1,"fas","fa-sync"],[1,"text-right"],["type","text","placeholder","e.g., EUR","maxlength","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Euro",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.0001",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["title","Delete",1,"btn","btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Finance Settings"),a(),o(5,"div",2)(6,"a",3),l(7,"Home"),a(),o(8,"span"),l(9,"/"),a(),o(10,"span"),l(11,"Accounting"),a(),o(12,"span"),l(13,"/"),a(),o(14,"span"),l(15,"Settings"),a()()()(),o(16,"div",4)(17,"div",5)(18,"nav",6),b(19,YAe,4,5,"a",7),a()(),o(20,"div",8)(21,"div",9),b(22,JAe,2,0,"div",10)(23,KAe,64,7,"div",11)(24,ZAe,21,2,"div",11)(25,eRe,48,5,"div",11)(26,tRe,48,6,"div",11)(27,rRe,31,2,"div",11),a()()()()),e&2&&(c(19),m("ngForOf",i.tabs),c(3),m("ngIf",i.loading),c(),m("ngIf",i.activeTab==="general"),c(),m("ngIf",i.activeTab==="account-types"),c(),m("ngIf",i.activeTab==="plaid"),c(),m("ngIf",i.activeTab==="income-statement"),c(),m("ngIf",i.activeTab==="currency-rates"))},dependencies:[ot,Se,be,je,We,Ie,Mt,Yt,Ue,Oe,c3,Ee,ht],styles:[".settings-layout[_ngcontent-%COMP%]{display:flex;gap:1.5rem;min-height:600px}.settings-sidebar[_ngcontent-%COMP%]{width:250px;flex-shrink:0}.settings-nav[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:8px;overflow:hidden;border:1px solid var(--border-color)}.settings-nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;color:var(--text-muted);text-decoration:none;border-bottom:1px solid var(--border-color);cursor:pointer;transition:all .2s}.settings-nav-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.settings-nav-item[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-color)}.settings-nav-item.active[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.settings-nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.settings-nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;color:var(--text-muted)}.settings-content[_ngcontent-%COMP%]{flex:1;min-width:0}.settings-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;color:var(--text-color)}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.panel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.settings-description[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:.625rem .875rem;border:1px solid var(--border-color);border-radius:6px;background:var(--input-bg);color:var(--text-color);font-size:.875rem}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.1)}textarea.form-control[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:400}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:8px;padding:1.5rem;width:100%;max-width:450px;box-shadow:0 4px 20px #00000026}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1.5rem}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid var(--border-color)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:var(--text-muted);font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--hover-bg)}.text-right[_ngcontent-%COMP%]{text-align:right}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;font-size:.75rem;font-weight:500;border-radius:4px;background:var(--badge-bg, #e0e0e0);color:var(--badge-color, #666)}.text-success[_ngcontent-%COMP%]{color:#28a745}.text-muted[_ngcontent-%COMP%]{color:var(--text-muted)}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:inline-flex;align-items:center;justify-content:center;border-radius:4px;border:none;cursor:pointer}.btn-icon.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;align-items:center;justify-content:center;z-index:10}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary-color)}"]})};var oRe=[{path:"",redirectTo:"/companies",pathMatch:"full"},{path:"companies",component:Vy},{path:"login",component:ky},{path:"app",component:Fy,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Ly},{path:"settings/general",component:Uy},{path:"settings/finance",component:jy},{path:"settings/finance/tax-rates",component:Jy},{path:"settings/finance/currencies",component:Ky},{path:"settings/finance/payment-modes",component:Qy},{path:"settings/finance/expense-categories",component:Xy},{path:"settings/customer",component:zy},{path:"settings/contract",component:Hy},{path:"settings/roles",component:$y},{path:"settings/roles/add",component:Th},{path:"settings/roles/edit/:id",component:Th},{path:"settings/staff",component:Yy},{path:"settings/staff/add",component:kh},{path:"settings/staff/edit/:id",component:kh},{path:"settings/prefixes",component:WC},{path:"settings/branches",component:zC},{path:"settings/integrations",component:q2},{path:"customers",component:Zy},{path:"contracts",component:tC},{path:"inventory/groups",component:nC},{path:"inventory/items",component:rC},{path:"inventory/units",component:oC},{path:"inventory/warehouse",component:aC},{path:"inventory/suppliers",component:sC},{path:"inventory/valuation",component:lC},{path:"inventory/ledger",component:dC},{path:"stock/grn",component:pC},{path:"stock/issue",component:mC},{path:"stock/transfer",component:uC},{path:"stock/adjustments",component:gC},{path:"reports/stock-summary",component:fC},{path:"reports/valuation",component:hC},{path:"reports/item-movement",component:_C},{path:"reports/stock-ledger",component:vC},{path:"reports/group-wise",component:xC},{path:"reports/warehouse-stock",component:yC},{path:"reports/reorder-level",component:CC},{path:"reports/slow-moving",component:bC},{path:"reports/purchase-grn",component:MC},{path:"purchase/requisition",component:SC},{path:"purchase/fulfillment/convert-to-po",component:PC},{path:"purchase/fulfillment/stock-issue",component:wC},{path:"purchase/fulfillment/material-transfer",component:EC},{path:"purchase/direct",component:OC},{path:"reports/purchase/pr-list",component:TC},{path:"reports/purchase/pr-pending",component:kC},{path:"reports/purchase/pr-history",component:IC},{path:"reports/purchase/po-list",component:DC},{path:"reports/purchase/direct-purchase",component:AC},{path:"reports/purchase/stock-issue-transfer",component:RC},{path:"audit/system",component:FC},{path:"audit/inventory",component:NC},{path:"audit/purchase",component:LC},{path:"purchase/requisition/:id/print",component:VC},{path:"purchase/direct/:id/print",component:BC},{path:"purchase/invoices",component:jC},{path:"hr/organization/departments",component:s2},{path:"hr/organization/locations",component:l2},{path:"hr/organization/job-roles",component:c2},{path:"hr/organization/grades",component:d2},{path:"hr/organization/designations",component:p2},{path:"hr/organization/cost-centers",component:m2},{path:"hr/organization/expense-centers",component:u2},{path:"hr/employees",component:g2},{path:"hr/employees/:id",component:h2},{path:"hr/documents/types",component:_2},{path:"hr/documents/reminders",component:v2},{path:"mis/hr-dashboard",component:x2},{path:"mis/payroll-dashboard",component:y2},{path:"mis/attendance-dashboard",component:C2},{path:"mis/performance-dashboard",component:b2},{path:"mis/report-builder",component:M2},{path:"attendance/clock-in-out",component:Yu},{path:"attendance/management",component:S2},{path:"attendance/weekly-timesheet",component:P2},{path:"attendance/approval",component:w2},{path:"leave/types",component:Ju},{path:"leave/requests",component:Qu},{path:"leave/holidays",component:Xu},{path:"payroll/rules/salary-heads",component:E2},{path:"payroll/rules/pay-frequencies",component:O2},{path:"payroll/rules/overtime-rules",component:T2},{path:"payroll/rules/tax-rules",component:k2},{path:"payroll/rules/statutory-rules",component:I2},{path:"payroll/timesheets",component:D2},{path:"payroll/calculate",component:R2},{path:"payroll/process",component:S_},{path:"payroll/process/:id",component:S_},{path:"payroll/history",component:B2},{path:"payroll/self-service",component:V2},{path:"reports/payroll/summary",component:U2},{path:"reports/payroll/labor-cost",component:j2},{path:"reports/payroll/register",component:W2},{path:"expenses",component:H2},{path:"expenses/new",component:Zu},{path:"expenses/:id",component:Zu},{path:"expenses/:id/edit",component:Zu},{path:"hr/recruitment",component:eg},{path:"hr/recruitment/requisition",component:tg},{path:"hr/recruitment/postings",component:ng},{path:"hr/recruitment/candidates",component:ig},{path:"hr/recruitment/interviews",component:rg},{path:"hr/recruitment/offers",component:og},{path:"hr/training",component:Y2},{path:"hr/loans",component:J2},{path:"hr/onboarding",component:Q2},{path:"hr/letters",component:Z2},{path:"hr/settlement",component:nM},{path:"compensation/salary-bands",component:hc},{path:"compensation/salary-revision",component:hc},{path:"compensation/bonus-incentive",component:hc},{path:"compensation/health-insurance",component:hc},{path:"compensation/dental-vision",component:hc},{path:"compensation/allowances",component:hc},{path:"compensation/enrollment",component:hc},{path:"loans",component:iM},{path:"loans/approvals",component:rM},{path:"loans/emi",component:oM},{path:"loans/ledger",component:aM},{path:"loans/repayments",component:sM},{path:"projects",component:lM},{path:"settings/expense-types",component:cM},{path:"accounting",component:P_},{path:"accounting/dashboard",component:P_},{path:"accounting/chart-of-accounts",component:dM},{path:"accounting/bank-accounts",component:pM},{path:"accounting/journal-entries",component:mM},{path:"accounting/transactions",component:uM},{path:"accounting/bills",component:fM},{path:"accounting/transfers",component:gM},{path:"accounting/reconciliation",component:_M},{path:"accounting/budgets",component:hM},{path:"accounting/reports",component:vM},{path:"accounting/settings",component:xM}]},{path:":companySlug",component:By}],yM=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Or({type:n});static \u0275inj=xr({imports:[Ns.forRoot(oRe),Ns]})};function aRe(n,t){if(n&1){let e=F();o(0,"div",2),x("click",function(){let r=g(e).$implicit,s=p();return f(s.remove(r.id))}),y(1,"i",3),o(2,"span"),l(3),a(),o(4,"button",4),l(5,"\xD7"),a()()}if(n&2){let e=t.$implicit,i=p();m("ngClass","toast-"+e.type),c(),m("ngClass",i.getIcon(e.type)),c(2),_(e.message)}}var ag=class n{constructor(t){this.toastService=t}toasts=[];subscription;ngOnInit(){console.log("ToastComponent initialized"),this.subscription=this.toastService.toasts$.subscribe(t=>{console.log("Toast component received toasts:",t),this.toasts=t})}ngOnDestroy(){this.subscription?.unsubscribe()}remove(t){this.toastService.remove(t)}getIcon(t){switch(t){case"success":return"fa-check-circle";case"error":return"fa-exclamation-circle";case"warning":return"fa-exclamation-triangle";default:return"fa-info-circle"}}static \u0275fac=function(e){return new(e||n)(V(dn))};static \u0275cmp=_e({type:n,selectors:[["app-toast"]],decls:2,vars:1,consts:[[1,"toast-container"],["class","toast",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"toast",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"toast-close"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,aRe,6,3,"div",1),a()),e&2&&(c(),m("ngForOf",i.toasts))},dependencies:[At,ot,Se,Rt],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:10px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s ease;min-width:280px;max-width:400px}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.toast-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border-left:4px solid #28a745}.toast-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border-left:4px solid #dc3545}.toast-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border-left:4px solid #17a2b8}.toast-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border-left:4px solid #ffc107}.toast-close[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;font-size:18px;cursor:pointer;opacity:.7}.toast-close[_ngcontent-%COMP%]:hover{opacity:1}"]})};function lRe(n,t){if(n&1){let e=F();o(0,"div",2),x("click",function(){let r=g(e).$implicit,s=p();return f(s.removeNotification(r.id))}),y(1,"i",3),o(2,"span",4),l(3),a(),o(4,"button",5),x("click",function(r){let s=g(e).$implicit;return p().removeNotification(s.id),f(r.stopPropagation())}),y(5,"i",6),a()()}if(n&2){let e=t.$implicit,i=p();m("ngClass","notification-"+e.type),c(),m("ngClass",i.getIcon(e.type)),c(2),_(e.message)}}var CM=class n{constructor(t){this.notificationService=t}notifications=[];subscription;ngOnInit(){this.subscription=this.notificationService.notifications$.subscribe(t=>this.notifications=t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeNotification(t){this.notificationService.remove(t)}getIcon(t){switch(t){case"success":return"fa-check-circle";case"error":return"fa-times-circle";case"warning":return"fa-exclamation-triangle";case"info":return"fa-info-circle";default:return"fa-info-circle"}}static \u0275fac=function(e){return new(e||n)(V(en))};static \u0275cmp=_e({type:n,selectors:[["app-notification"]],standalone:!1,decls:2,vars:1,consts:[[1,"notification-container"],["class","notification",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"notification",3,"click","ngClass"],[1,"fa",3,"ngClass"],[1,"message"],[1,"close-btn",3,"click"],[1,"fa","fa-times"]],template:function(e,i){e&1&&(o(0,"div",0),b(1,lRe,6,3,"div",1),a()),e&2&&(c(),m("ngForOf",i.notifications))},dependencies:[ot,Se],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;max-width:400px}.notification[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:8px;box-shadow:0 4px 12px #00000026;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s ease-out;min-width:300px}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.notification[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{font-size:1.25rem}.notification[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1;font-size:.9rem;font-weight:500}.notification[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;opacity:.7;transition:opacity .2s}.notification[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.notification-success[_ngcontent-%COMP%]{background:#d4edda;border-left:4px solid #28a745;color:#155724}.notification-success[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#155724}.notification-error[_ngcontent-%COMP%]{background:#f8d7da;border-left:4px solid #dc3545;color:#721c24}.notification-error[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#721c24}.notification-warning[_ngcontent-%COMP%]{background:#fff3cd;border-left:4px solid #ffc107;color:#856404}.notification-warning[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#856404}.notification-info[_ngcontent-%COMP%]{background:#d1ecf1;border-left:4px solid #17a2b8;color:#0c5460}.notification-info[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#0c5460}"]})};var bM=class n{title="ERP System";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_e({type:n,selectors:[["app-root"]],standalone:!1,decls:3,vars:0,template:function(e,i){e&1&&y(0,"app-notification")(1,"router-outlet")(2,"app-toast")},dependencies:[bp,ag,CM],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})};var MM=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Or({type:n,bootstrap:[bM]});static \u0275inj=xr({providers:[{provide:xx,useClass:Ty,multi:!0}],imports:[qf,V8,At,Vt,pA,Gf,Rt.forRoot({loader:fA({prefix:"./assets/i18n/",suffix:".json"}),fallbackLang:"en"}),yM,Yu,Ju,Qu,Xu,eg,tg,ng,ig,rg,og,ag,su,Rt]})};CE().bootstrapModule(MM,{}).catch(n=>console.error(n));

var Yx=Object.defineProperty,Zx=Object.defineProperties;var Jx=Object.getOwnPropertyDescriptors;var qs=Object.getOwnPropertySymbols;var dh=Object.prototype.hasOwnProperty,uh=Object.prototype.propertyIsEnumerable;var ch=(n,t,e)=>t in n?Yx(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,R=(n,t)=>{for(var e in t||={})dh.call(t,e)&&ch(n,e,t[e]);if(qs)for(var e of qs(t))uh.call(t,e)&&ch(n,e,t[e]);return n},me=(n,t)=>Zx(n,Jx(t));var Ep=(n,t)=>{var e={};for(var i in n)dh.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&qs)for(var i of qs(n))t.indexOf(i)<0&&uh.call(n,i)&&(e[i]=n[i]);return e};var Mt=null,zs=!1,Dp=1,Xx=null,Lt=Symbol("SIGNAL");function ve(n){let t=Mt;return Mt=n,t}function Qs(){return Mt}var Yo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zo(n){if(zs)throw new Error("");if(Mt===null)return;Mt.consumerOnSignalRead(n);let t=Mt.producersTail;if(t!==void 0&&t.producer===n)return;let e,i=Mt.recomputing;if(i&&(e=t!==void 0?t.nextProducer:Mt.producers,e!==void 0&&e.producer===n)){Mt.producersTail=e,e.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Mt&&(!i||tS(r,Mt)))return;let a=qr(Mt),d={producer:n,consumer:Mt,nextProducer:e,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Mt.producersTail=d,t!==void 0?t.nextProducer=d:Mt.producers=d,a&&gh(n,d)}function ph(){Dp++}function Pp(n){if(!(qr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Dp)){if(!n.producerMustRecompute(n)&&!Ys(n)){Ip(n);return}n.producerRecomputeValue(n),Ip(n)}}function Tp(n){if(n.consumers===void 0)return;let t=zs;zs=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||eS(i)}}finally{zs=t}}function Op(){return Mt?.consumerAllowSignalWrites!==!1}function eS(n){n.dirty=!0,Tp(n),n.consumerMarkedDirty?.(n)}function Ip(n){n.dirty=!1,n.lastCleanEpoch=Dp}function Jo(n){return n&&mh(n),ve(n)}function mh(n){n.producersTail=void 0,n.recomputing=!0}function Ks(n,t){ve(t),n&&fh(n)}function fh(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(qr(n))do e=kp(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function Ys(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,i=t.lastReadVersion;if(i!==e.version||(Pp(e),i!==e.version))return!0}return!1}function Xo(n){if(qr(n)){let t=n.producers;for(;t!==void 0;)t=kp(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function gh(n,t){let e=n.consumersTail,i=qr(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)gh(r.producer,r)}function kp(n){let t=n.producer,e=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!qr(t)){let a=t.producers;for(;a!==void 0;)a=kp(a)}return e}function qr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Rp(n){Xx?.(n)}function tS(n,t){let e=t.producersTail;if(e!==void 0){let i=t.producers;do{if(i===n)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function Np(n,t){return Object.is(n,t)}function Zs(n,t){let e=Object.create(nS);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(Pp(e),Zo(e),e.value===$s)throw e.error;return e.value};return i[Lt]=e,Rp(e),i}var Mp=Symbol("UNSET"),wp=Symbol("COMPUTING"),$s=Symbol("ERRORED"),nS=me(R({},Yo),{value:Mp,dirty:!0,error:null,equal:Np,kind:"computed",producerMustRecompute(n){return n.value===Mp||n.value===wp},producerRecomputeValue(n){if(n.value===wp)throw new Error("");let t=n.value;n.value=wp;let e=Jo(n),i,r=!1;try{i=n.computation(),ve(null),r=t!==Mp&&t!==$s&&i!==$s&&n.equal(t,i)}catch(a){i=$s,n.error=a}finally{Ks(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function iS(){throw new Error}var hh=iS;function _h(n){hh(n)}function Ap(n){hh=n}var rS=null;function Fp(n,t){let e=Object.create(Js);e.value=n,t!==void 0&&(e.equal=t);let i=()=>vh(e);return i[Lt]=e,Rp(e),[i,d=>ea(e,d),d=>yh(e,d)]}function vh(n){return Zo(n),n.value}function ea(n,t){Op()||_h(n),n.equal(n.value,t)||(n.value=t,oS(n))}function yh(n,t){Op()||_h(n),ea(n,t(n.value))}var Js=me(R({},Yo),{equal:Np,value:void 0,kind:"signal"});function oS(n){n.version++,ph(),Tp(n),rS?.(n)}function Lp(n){let t=ve(null);try{return n()}finally{ve(t)}}function _e(n){return typeof n=="function"}function zr(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Xs=zr(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ta(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var gt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let a of e)a.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(_e(i))try{i()}catch(a){t=a instanceof Xs?a.errors:[a]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let a of r)try{bh(a)}catch(d){t=t??[],d instanceof Xs?t=[...t,...d.errors]:t.push(d)}}if(t)throw new Xs(t)}}add(t){var e;if(t&&t!==this)if(this.closed)bh(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ta(e,t)}remove(t){let{_finalizers:e}=this;e&&ta(e,t),t instanceof n&&t._removeParent(this)}};gt.EMPTY=(()=>{let n=new gt;return n.closed=!0,n})();var Vp=gt.EMPTY;function el(n){return n instanceof gt||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function bh(n){_e(n)?n():n.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $r={setTimeout(n,t,...e){let{delegate:i}=$r;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=$r;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function tl(n){$r.setTimeout(()=>{let{onUnhandledError:t}=Dn;if(t)t(n);else throw n})}function na(){}var Ch=jp("C",void 0,void 0);function xh(n){return jp("E",void 0,n)}function Sh(n){return jp("N",n,void 0)}function jp(n,t,e){return{kind:n,value:t,error:e}}var tr=null;function Qr(n){if(Dn.useDeprecatedSynchronousErrorHandling){let t=!tr;if(t&&(tr={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=tr;if(tr=null,e)throw i}}else n()}function Eh(n){Dn.useDeprecatedSynchronousErrorHandling&&tr&&(tr.errorThrown=!0,tr.error=n)}var nr=class extends gt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,el(t)&&t.add(this)):this.destination=lS}static create(t,e,i){return new Kr(t,e,i)}next(t){this.isStopped?Wp(Sh(t),this):this._next(t)}error(t){this.isStopped?Wp(xh(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Wp(Ch,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aS=Function.prototype.bind;function Bp(n,t){return aS.call(n,t)}var Up=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){nl(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){nl(i)}else nl(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){nl(e)}}},Kr=class extends nr{constructor(t,e,i){super();let r;if(_e(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let a;this&&Dn.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Bp(t.next,a),error:t.error&&Bp(t.error,a),complete:t.complete&&Bp(t.complete,a)}):r=t}this.destination=new Up(r)}};function nl(n){Dn.useDeprecatedSynchronousErrorHandling?Eh(n):tl(n)}function sS(n){throw n}function Wp(n,t){let{onStoppedNotification:e}=Dn;e&&$r.setTimeout(()=>e(n,t))}var lS={closed:!0,next:na,error:sS,complete:na};var Yr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pn(n){return n}function Gp(...n){return Hp(n)}function Hp(n){return n.length===0?Pn:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var we=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let a=dS(e)?e:new Kr(e,i,r);return Qr(()=>{let{operator:d,source:u}=this;a.add(d?d.call(a,u):u?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=Mh(i),new i((r,a)=>{let d=new Kr({next:u=>{try{e(u)}catch(p){a(p),d.unsubscribe()}},error:a,complete:r});this.subscribe(d)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Yr](){return this}pipe(...e){return Hp(e)(this)}toPromise(e){return e=Mh(e),new e((i,r)=>{let a;this.subscribe(d=>a=d,d=>r(d),()=>i(a))})}}return n.create=t=>new n(t),n})();function Mh(n){var t;return(t=n??Dn.Promise)!==null&&t!==void 0?t:Promise}function cS(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function dS(n){return n&&n instanceof nr||cS(n)&&el(n)}function uS(n){return _e(n?.lift)}function Ae(n){return t=>{if(uS(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,t,e,i,r){return new qp(n,t,e,i,r)}var qp=class extends nr{constructor(t,e,i,r,a,d){super(t),this.onFinalize=a,this.shouldUnsubscribe=d,this._next=e?function(u){try{e(u)}catch(p){t.error(p)}}:super._next,this._error=r?function(u){try{r(u)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var wh=zr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new il(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new wh}next(e){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:a}=this;return i||r?Vp:(this.currentObservers=null,a.push(e),new gt(()=>{this.currentObservers=null,ta(a,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){let e=new we;return e.source=this,e}}return n.create=(t,e)=>new il(t,e),n})(),il=class extends st{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:Vp}};var Ke=class extends st{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var zt=new we(n=>n.complete());function Ih(n){return n&&_e(n.schedule)}function Dh(n){return n[n.length-1]}function rl(n){return _e(Dh(n))?n.pop():void 0}function Mi(n){return Ih(Dh(n))?n.pop():void 0}function Th(n,t,e,i){function r(a){return a instanceof e?a:new e(function(d){d(a)})}return new(e||(e=Promise))(function(a,d){function u(C){try{h(i.next(C))}catch(w){d(w)}}function p(C){try{h(i.throw(C))}catch(w){d(w)}}function h(C){C.done?a(C.value):r(C.value).then(u,p)}h((i=i.apply(n,t||[])).next())})}function Ph(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ir(n){return this instanceof ir?(this.v=n,this):new ir(n)}function Oh(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(D){return function(k){return Promise.resolve(k).then(D,w)}}function u(D,k){i[D]&&(r[D]=function(W){return new Promise(function(U,z){a.push([D,W,U,z])>1||p(D,W)})},k&&(r[D]=k(r[D])))}function p(D,k){try{h(i[D](k))}catch(W){P(a[0][3],W)}}function h(D){D.value instanceof ir?Promise.resolve(D.value.v).then(C,w):P(a[0][2],D)}function C(D){p("next",D)}function w(D){p("throw",D)}function P(D,k){D(k),a.shift(),a.length&&p(a[0][0],a[0][1])}}function kh(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Ph=="function"?Ph(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=n[a]&&function(d){return new Promise(function(u,p){d=n[a](d),r(u,p,d.done,d.value)})}}function r(a,d,u,p){Promise.resolve(p).then(function(h){a({value:h,done:u})},d)}}var ol=n=>n&&typeof n.length=="number"&&typeof n!="function";function al(n){return _e(n?.then)}function sl(n){return _e(n[Yr])}function ll(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function cl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dl=pS();function ul(n){return _e(n?.[dl])}function pl(n){return Oh(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield ir(e.read());if(r)return yield ir(void 0);yield yield ir(i)}}finally{e.releaseLock()}})}function ml(n){return _e(n?.getReader)}function it(n){if(n instanceof we)return n;if(n!=null){if(sl(n))return mS(n);if(ol(n))return fS(n);if(al(n))return gS(n);if(ll(n))return Rh(n);if(ul(n))return hS(n);if(ml(n))return _S(n)}throw cl(n)}function mS(n){return new we(t=>{let e=n[Yr]();if(_e(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fS(n){return new we(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function gS(n){return new we(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,tl)})}function hS(n){return new we(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Rh(n){return new we(t=>{vS(n,t).catch(e=>t.error(e))})}function _S(n){return Rh(pl(n))}function vS(n,t){var e,i,r,a;return Th(this,void 0,void 0,function*(){try{for(e=kh(n);i=yield e.next(),!i.done;){let d=i.value;if(t.next(d),t.closed)return}}catch(d){r={error:d}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}t.complete()})}function $t(n,t,e,i=0,r=!1){let a=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(a),!r)return a}function fl(n,t=0){return Ae((e,i)=>{e.subscribe(Fe(i,r=>$t(i,n,()=>i.next(r),t),()=>$t(i,n,()=>i.complete(),t),r=>$t(i,n,()=>i.error(r),t)))})}function gl(n,t=0){return Ae((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function Nh(n,t){return it(n).pipe(gl(t),fl(t))}function Ah(n,t){return it(n).pipe(gl(t),fl(t))}function Fh(n,t){return new we(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function Lh(n,t){return new we(e=>{let i;return $t(e,t,()=>{i=n[dl](),$t(e,t,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(d){e.error(d);return}a?e.complete():e.next(r)},0,!0)}),()=>_e(i?.return)&&i.return()})}function hl(n,t){if(!n)throw new Error("Iterable cannot be null");return new we(e=>{$t(e,t,()=>{let i=n[Symbol.asyncIterator]();$t(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Vh(n,t){return hl(pl(n),t)}function jh(n,t){if(n!=null){if(sl(n))return Nh(n,t);if(ol(n))return Fh(n,t);if(al(n))return Ah(n,t);if(ll(n))return hl(n,t);if(ul(n))return Lh(n,t);if(ml(n))return Vh(n,t)}throw cl(n)}function Ye(n,t){return t?jh(n,t):it(n)}function ce(...n){let t=Mi(n);return Ye(n,t)}function ia(n,t){let e=_e(n)?n:()=>n,i=r=>r.error(e());return new we(t?r=>t.schedule(i,0,r):i)}function _l(n){return!!n&&(n instanceof we||_e(n.lift)&&_e(n.subscribe))}var rr=zr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ee(n,t){return Ae((e,i)=>{let r=0;e.subscribe(Fe(i,a=>{i.next(n.call(t,a,r++))}))})}var{isArray:yS}=Array;function bS(n,t){return yS(t)?n(...t):n(t)}function vl(n){return Ee(t=>bS(n,t))}var{isArray:CS}=Array,{getPrototypeOf:xS,prototype:SS,keys:ES}=Object;function yl(n){if(n.length===1){let t=n[0];if(CS(t))return{args:t,keys:null};if(MS(t)){let e=ES(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function MS(n){return n&&typeof n=="object"&&xS(n)===SS}function bl(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function Cl(...n){let t=Mi(n),e=rl(n),{args:i,keys:r}=yl(n);if(i.length===0)return Ye([],t);let a=new we(wS(i,t,r?d=>bl(r,d):Pn));return e?a.pipe(vl(e)):a}function wS(n,t,e=Pn){return i=>{Bh(t,()=>{let{length:r}=n,a=new Array(r),d=r,u=r;for(let p=0;p<r;p++)Bh(t,()=>{let h=Ye(n[p],t),C=!1;h.subscribe(Fe(i,w=>{a[p]=w,C||(C=!0,u--),u||i.next(e(a.slice()))},()=>{--d||i.complete()}))},i)},i)}}function Bh(n,t,e){n?$t(e,n,t):t()}function Wh(n,t,e,i,r,a,d,u){let p=[],h=0,C=0,w=!1,P=()=>{w&&!p.length&&!h&&t.complete()},D=W=>h<i?k(W):p.push(W),k=W=>{a&&t.next(W),h++;let U=!1;it(e(W,C++)).subscribe(Fe(t,z=>{r?.(z),a?D(z):t.next(z)},()=>{U=!0},void 0,()=>{if(U)try{for(h--;p.length&&h<i;){let z=p.shift();d?$t(t,d,()=>k(z)):k(z)}P()}catch(z){t.error(z)}}))};return n.subscribe(Fe(t,D,()=>{w=!0,P()})),()=>{u?.()}}function ht(n,t,e=1/0){return _e(t)?ht((i,r)=>Ee((a,d)=>t(i,a,r,d))(it(n(i,r))),e):(typeof t=="number"&&(e=t),Ae((i,r)=>Wh(i,r,n,e)))}function Zr(n=1/0){return ht(Pn,n)}function Uh(){return Zr(1)}function Jr(...n){return Uh()(Ye(n,Mi(n)))}function ra(n){return new we(t=>{it(n()).subscribe(t)})}function or(...n){let t=rl(n),{args:e,keys:i}=yl(n),r=new we(a=>{let{length:d}=e;if(!d){a.complete();return}let u=new Array(d),p=d,h=d;for(let C=0;C<d;C++){let w=!1;it(e[C]).subscribe(Fe(a,P=>{w||(w=!0,h--),u[C]=P},()=>p--,void 0,()=>{(!p||!w)&&(h||a.next(i?bl(i,u):u),a.complete())}))}});return t?r.pipe(vl(t)):r}function Qt(n,t){return Ae((e,i)=>{let r=0;e.subscribe(Fe(i,a=>n.call(t,a,r++)&&i.next(a)))})}function nn(n){return Ae((t,e)=>{let i=null,r=!1,a;i=t.subscribe(Fe(e,void 0,void 0,d=>{a=it(n(d,nn(n)(t))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function wi(n,t){return _e(t)?ht(n,t,1):ht(n,1)}function zp(n){return Ae((t,e)=>{let i=!1;t.subscribe(Fe(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function di(n){return n<=0?()=>zt:Ae((t,e)=>{let i=0;t.subscribe(Fe(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Gh(n=IS){return Ae((t,e)=>{let i=!1;t.subscribe(Fe(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function IS(){return new rr}function Xr(n){return Ae((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function ui(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Qt((r,a)=>n(r,a,i)):Pn,di(1),e?zp(t):Gh(()=>new rr))}function xl(n){return n<=0?()=>zt:Ae((t,e)=>{let i=[];t.subscribe(Fe(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function $p(...n){let t=Mi(n);return Ae((e,i)=>{(t?Jr(n,e,t):Jr(n,e)).subscribe(i)})}function rn(n,t){return Ae((e,i)=>{let r=null,a=0,d=!1,u=()=>d&&!r&&i.complete();e.subscribe(Fe(i,p=>{r?.unsubscribe();let h=0,C=a++;it(n(p,C)).subscribe(r=Fe(i,w=>i.next(t?t(p,w,C,h++):w),()=>{r=null,u()}))},()=>{d=!0,u()}))})}function oa(n){return Ae((t,e)=>{it(n).subscribe(Fe(e,()=>e.complete(),na)),!e.closed&&t.subscribe(e)})}function rt(n,t,e){let i=_e(n)||t||e?{next:n,error:t,complete:e}:n;return i?Ae((r,a)=>{var d;(d=i.subscribe)===null||d===void 0||d.call(i);let u=!0;r.subscribe(Fe(a,p=>{var h;(h=i.next)===null||h===void 0||h.call(i,p),a.next(p)},()=>{var p;u=!1,(p=i.complete)===null||p===void 0||p.call(i),a.complete()},p=>{var h;u=!1,(h=i.error)===null||h===void 0||h.call(i,p),a.error(p)},()=>{var p,h;u&&((p=i.unsubscribe)===null||p===void 0||p.call(i)),(h=i.finalize)===null||h===void 0||h.call(i)}))}):Pn}var Qp;function Sl(){return Qp}function $n(n){let t=Qp;return Qp=n,t}var Hh=Symbol("NotFound");function eo(n){return n===Hh||n?.name==="\u0275NotFound"}var Dl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",N=class extends Error{code;constructor(t,e){super(fi(t,e)),this.code=t}};function TS(n){return`NG0${Math.abs(n)}`}function fi(n,t){return`${TS(n)}${t?": "+t:""}`}var yt=globalThis;function Le(n){for(let t in n)if(n[t]===Le)return t;throw Error("")}function Kh(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function mi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(mi).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function Pl(n,t){return n?t?`${n} ${t}`:n:t||""}var OS=Le({__forward_ref__:Le});function Bt(n){return n.__forward_ref__=Bt,n.toString=function(){return mi(this())},n}function _t(n){return cm(n)?n():n}function cm(n){return typeof n=="function"&&n.hasOwnProperty(OS)&&n.__forward_ref__===Bt}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ua(n){return kS(n,Tl)}function dm(n){return ua(n)!==null}function kS(n,t){return n.hasOwnProperty(t)&&n[t]||null}function RS(n){let t=n?.[Tl]??null;return t||null}function Yp(n){return n&&n.hasOwnProperty(Ml)?n[Ml]:null}var Tl=Le({\u0275prov:Le}),Ml=Le({\u0275inj:Le}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=L({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function um(n){return n&&!!n.\u0275providers}var pm=Le({\u0275cmp:Le}),mm=Le({\u0275dir:Le}),fm=Le({\u0275pipe:Le}),gm=Le({\u0275mod:Le}),sa=Le({\u0275fac:Le}),dr=Le({__NG_ELEMENT_ID__:Le}),qh=Le({__NG_ENV_ID__:Le});function hm(n){return n[gm]||null}function gi(n){return n[pm]||null}function _m(n){return n[mm]||null}function Yh(n){return n[fm]||null}function Kn(n){return typeof n=="string"?n:n==null?"":String(n)}function Zh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Kn(n)}var Jh=Le({ngErrorCode:Le}),NS=Le({ngErrorMessage:Le}),AS=Le({ngTokenPath:Le});function vm(n,t){return Xh("",-200,t)}function Ol(n,t){throw new N(-201,!1)}function Xh(n,t,e){let i=new N(t,n);return i[Jh]=t,i[NS]=n,e&&(i[AS]=e),i}function FS(n){return n[Jh]}var Zp;function e_(){return Zp}function Vt(n){let t=Zp;return Zp=n,t}function ym(n,t,e){let i=ua(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(t!==void 0)return t;Ol(n,"Injector")}var LS={},ar=LS,VS="__NG_DI_FLAG__",Jp=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=sr(e)||0;try{return this.injector.get(t,i&8?null:ar,i)}catch(r){if(eo(r))return r;throw r}}};function jS(n,t=0){let e=Sl();if(e===void 0)throw new N(-203,!1);if(e===null)return ym(n,void 0,t);{let i=BS(t),r=e.retrieve(n,i);if(eo(r)){if(i.optional)return null;throw r}return r}}function B(n,t=0){return(e_()||jS)(_t(n),t)}function A(n,t){return B(n,sr(t))}function sr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function BS(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Xp(n){let t=[];for(let e=0;e<n.length;e++){let i=_t(n[e]);if(Array.isArray(i)){if(i.length===0)throw new N(900,!1);let r,a=0;for(let d=0;d<i.length;d++){let u=i[d],p=WS(u);typeof p=="number"?p===-1?r=u.token:a|=p:r=u}t.push(B(r,a))}else t.push(B(i))}return t}function WS(n){return n[VS]}function Ii(n,t){let e=n.hasOwnProperty(sa);return e?n[sa]:null}function kl(n,t){n.forEach(e=>Array.isArray(e)?kl(e,t):t(e))}function bm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function pa(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function t_(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let a=r-2;n[r]=n[a],r--}n[t]=e,n[t+1]=i}}function Rl(n,t,e){let i=no(n,t);return i>=0?n[i|1]=e:(i=~i,t_(n,i,t,e)),i}function Nl(n,t){let e=no(n,t);if(e>=0)return n[e|1]}function no(n,t){return US(n,t,1)}function US(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let a=i+(r-i>>1),d=n[a<<e];if(t===d)return a<<e;d>t?r=a:i=a+1}return~(r<<e)}var Ti={},jt=[],io=new J(""),Cm=new J("",-1),xm=new J(""),la=class{get(t,e=ar){if(e===ar){let r=Xh("",-201);throw r.name="\u0275NotFound",r}return e}};function ur(n){return{\u0275providers:n}}function n_(...n){return{\u0275providers:Sm(!0,n),\u0275fromNgModule:!0}}function Sm(n,...t){let e=[],i=new Set,r,a=d=>{e.push(d)};return kl(t,d=>{let u=d;wl(u,a,[],i)&&(r||=[],r.push(u))}),r!==void 0&&i_(r,a),e}function i_(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Em(r,a=>{t(a,i)})}}function wl(n,t,e,i){if(n=_t(n),!n)return!1;let r=null,a=Yp(n),d=!a&&gi(n);if(!a&&!d){let p=n.ngModule;if(a=Yp(p),a)r=p;else return!1}else{if(d&&!d.standalone)return!1;r=n}let u=i.has(r);if(d){if(u)return!1;if(i.add(r),d.dependencies){let p=typeof d.dependencies=="function"?d.dependencies():d.dependencies;for(let h of p)wl(h,t,e,i)}}else if(a){if(a.imports!=null&&!u){i.add(r);let h;try{kl(a.imports,C=>{wl(C,t,e,i)&&(h||=[],h.push(C))})}finally{}h!==void 0&&i_(h,t)}if(!u){let h=Ii(r)||(()=>new r);t({provide:r,useFactory:h,deps:jt},r),t({provide:xm,useValue:r,multi:!0},r),t({provide:io,useValue:()=>B(r),multi:!0},r)}let p=a.providers;if(p!=null&&!u){let h=n;Em(p,C=>{t(C,h)})}}else return!1;return r!==n&&n.providers!==void 0}function Em(n,t){for(let e of n)um(e)&&(e=e.\u0275providers),Array.isArray(e)?Em(e,t):t(e)}var GS=Le({provide:String,useValue:Le});function r_(n){return n!==null&&typeof n=="object"&&GS in n}function HS(n){return!!(n&&n.useExisting)}function qS(n){return!!(n&&n.useFactory)}function lr(n){return typeof n=="function"}function o_(n){return!!n.useClass}var ma=new J(""),El={},zh={},Kp;function fa(){return Kp===void 0&&(Kp=new la),Kp}var et=class{},cr=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,tm(t,d=>this.processProvider(d)),this.records.set(Cm,to(void 0,this)),r.has("environment")&&this.records.set(et,to(void 0,this));let a=this.records.get(ma);a!=null&&typeof a.value=="string"&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(xm,jt,{self:!0}))}retrieve(t,e){let i=sr(e)||0;try{return this.get(t,ar,i)}catch(r){if(eo(r))return r;throw r}}destroy(){aa(this),this._destroyed=!0;let t=ve(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(t)}}onDestroy(t){return aa(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){aa(this);let e=$n(this),i=Vt(void 0),r;try{return t()}finally{$n(e),Vt(i)}}get(t,e=ar,i){if(aa(this),t.hasOwnProperty(qh))return t[qh](this);let r=sr(i),a,d=$n(this),u=Vt(void 0);try{if(!(r&4)){let h=this.records.get(t);if(h===void 0){let C=YS(t)&&ua(t);C&&this.injectableDefInScope(C)?h=to(em(t),El):h=null,this.records.set(t,h)}if(h!=null)return this.hydrate(t,h,r)}let p=r&2?fa():this.parent;return e=r&8&&e===ar?null:e,p.get(t,e)}catch(p){let h=FS(p);throw h===-200||h===-201?new N(h,null):p}finally{Vt(u),$n(d)}}resolveInjectorInitializers(){let t=ve(null),e=$n(this),i=Vt(void 0),r;try{let a=this.get(io,jt,{self:!0});for(let d of a)d()}finally{$n(e),Vt(i),ve(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(mi(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=_t(t);let e=lr(t)?t:_t(t&&t.provide),i=$S(t);if(!lr(t)&&t.multi===!0){let r=this.records.get(e);r||(r=to(void 0,El,!0),r.factory=()=>Xp(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=ve(null);try{if(e.value===zh)throw vm(mi(t));return e.value===El&&(e.value=zh,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&KS(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ve(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=_t(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function em(n){let t=ua(n),e=t!==null?t.factory:Ii(n);if(e!==null)return e;if(n instanceof J)throw new N(204,!1);if(n instanceof Function)return zS(n);throw new N(204,!1)}function zS(n){if(n.length>0)throw new N(204,!1);let e=RS(n);return e!==null?()=>e.factory(n):()=>new n}function $S(n){if(r_(n))return to(void 0,n.useValue);{let t=Mm(n);return to(t,El)}}function Mm(n,t,e){let i;if(lr(n)){let r=_t(n);return Ii(r)||em(r)}else if(r_(n))i=()=>_t(n.useValue);else if(qS(n))i=()=>n.useFactory(...Xp(n.deps||[]));else if(HS(n))i=(r,a)=>B(_t(n.useExisting),a!==void 0&&a&8?8:void 0);else{let r=_t(n&&(n.useClass||n.provide));if(QS(n))i=()=>new r(...Xp(n.deps));else return Ii(r)||em(r)}return i}function aa(n){if(n.destroyed)throw new N(205,!1)}function to(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function QS(n){return!!n.deps}function KS(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function YS(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function tm(n,t){for(let e of n)Array.isArray(e)?tm(e,t):e&&um(e)?tm(e.\u0275providers,t):t(e)}function ut(n,t){let e;n instanceof cr?(aa(n),e=n):e=new Jp(n);let i,r=$n(e),a=Vt(void 0);try{return t()}finally{$n(r),Vt(a)}}function wm(){return e_()!==void 0||Sl()!=null}var Tn=0,ge=1,fe=2,vt=3,pn=4,mn=5,ga=6,ro=7,It=8,Oi=9,Yn=10,ze=11,oo=12,Im=13,pr=14,fn=15,mr=16,fr=17,gr=18,ha=19,Dm=20,pi=21,Al=22,_a=23,on=24,hr=25,va=26,pt=27,a_=1;var ki=7,ya=8,ba=9,Kt=10;function Zn(n){return Array.isArray(n)&&typeof n[a_]=="object"}function On(n){return Array.isArray(n)&&n[a_]===!0}function Pm(n){return(n.flags&4)!==0}function Ri(n){return n.componentOffset>-1}function ao(n){return(n.flags&1)===1}function Jn(n){return!!n.template}function so(n){return(n[fe]&512)!==0}function _r(n){return(n[fe]&256)===256}var s_="svg",l_="math";function gn(n){for(;Array.isArray(n);)n=n[Tn];return n}function Tm(n,t){return gn(t[n])}function kn(n,t){return gn(t[n.index])}function Fl(n,t){return n.data[t]}function Ll(n,t){return n[t]}function Om(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function hn(n,t){let e=t[n];return Zn(e)?e:e[Tn]}function Vl(n){return(n[fe]&128)===128}function c_(n){return On(n[vt])}function Ca(n,t){return t==null?null:n[t]}function km(n){n[fr]=0}function Rm(n){n[fe]&1024||(n[fe]|=1024,Vl(n)&&lo(n))}function d_(n,t){for(;n>0;)t=t[pr],n--;return t}function xa(n){return!!(n[fe]&9216||n[on]?.dirty)}function jl(n){n[Yn].changeDetectionScheduler?.notify(8),n[fe]&64&&(n[fe]|=1024),xa(n)&&lo(n)}function lo(n){n[Yn].changeDetectionScheduler?.notify(0);let t=Di(n);for(;t!==null&&!(t[fe]&8192||(t[fe]|=8192,!Vl(t)));)t=Di(t)}function Nm(n,t){if(_r(n))throw new N(911,!1);n[pi]===null&&(n[pi]=[]),n[pi].push(t)}function u_(n,t){if(n[pi]===null)return;let e=n[pi].indexOf(t);e!==-1&&n[pi].splice(e,1)}function Di(n){let t=n[vt];return On(t)?t[vt]:t}function p_(n){return n[ro]??=[]}function m_(n){return n.cleanup??=[]}var xe={lFrame:D_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var nm=!1;function f_(){return xe.lFrame.elementDepthCount}function g_(){xe.lFrame.elementDepthCount++}function h_(){xe.lFrame.elementDepthCount--}function Bl(){return xe.bindingsEnabled}function __(){return xe.skipHydrationRootTNode!==null}function v_(n){return xe.skipHydrationRootTNode===n}function y_(){xe.skipHydrationRootTNode=null}function Ie(){return xe.lFrame.lView}function Dt(){return xe.lFrame.tView}function v(n){return xe.lFrame.contextLView=n,n[It]}function y(n){return xe.lFrame.contextLView=null,n}function Pt(){let n=Am();for(;n!==null&&n.type===64;)n=n.parent;return n}function Am(){return xe.lFrame.currentTNode}function b_(){let n=xe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function co(n,t){let e=xe.lFrame;e.currentTNode=n,e.isParent=t}function Fm(){return xe.lFrame.isParent}function C_(){xe.lFrame.isParent=!1}function Lm(){return nm}function Vm(n){let t=nm;return nm=n,t}function Wl(){let n=xe.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function jm(){return xe.lFrame.bindingIndex}function x_(n){return xe.lFrame.bindingIndex=n}function Sa(){return xe.lFrame.bindingIndex++}function Ea(n){let t=xe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function S_(){return xe.lFrame.inI18n}function E_(n,t){let e=xe.lFrame;e.bindingIndex=e.bindingRootIndex=n,Ul(t)}function M_(){return xe.lFrame.currentDirectiveIndex}function Ul(n){xe.lFrame.currentDirectiveIndex=n}function w_(n){let t=xe.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function Bm(n){xe.lFrame.currentQueryIndex=n}function ZS(n){let t=n[ge];return t.type===2?t.declTNode:t.type===1?n[mn]:null}function Wm(n,t,e){if(e&4){let r=t,a=n;for(;r=r.parent,r===null&&!(e&1);)if(r=ZS(a),r===null||(a=a[pr],r.type&10))break;if(r===null)return!1;t=r,n=a}let i=xe.lFrame=I_();return i.currentTNode=t,i.lView=n,!0}function Gl(n){let t=I_(),e=n[ge];xe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function I_(){let n=xe.lFrame,t=n===null?null:n.child;return t===null?D_(n):t}function D_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function P_(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Um=P_;function Hl(){let n=P_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function T_(n){return(xe.lFrame.contextLView=d_(n,xe.lFrame.contextLView))[It]}function Xn(){return xe.lFrame.selectedIndex}function Ni(n){xe.lFrame.selectedIndex=n}function ql(){let n=xe.lFrame;return Fl(n.tView,n.selectedIndex)}function O_(){return xe.lFrame.currentNamespace}var k_=!0;function zl(){return k_}function Ma(n){k_=n}function im(n,t=null,e=null,i){let r=Gm(n,t,e,i);return r.resolveInjectorInitializers(),r}function Gm(n,t=null,e=null,i,r=new Set){let a=[e||jt,n_(n)];return i=i||(typeof n=="object"?void 0:mi(n)),new cr(a,t||fa(),i||null,r)}var wt=class n{static THROW_IF_NOT_FOUND=ar;static NULL=new la;static create(t,e){if(Array.isArray(t))return im({name:""},e,t,"");{let i=t.name??"";return im({name:i},t.parent,t.providers,i)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>B(Cm)});static __NG_ELEMENT_ID__=-1},He=new J(""),_n=(()=>{class n{static __NG_ELEMENT_ID__=JS;static __NG_ENV_ID__=e=>e}return n})(),rm=class extends _n{_lView;constructor(t){super(),this._lView=t}get destroyed(){return _r(this._lView)}onDestroy(t){let e=this._lView;return Nm(e,t),()=>u_(e,t)}};function JS(){return new rm(Ie())}var R_=!1,hi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ke(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new we(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),om=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,wm()&&(this.destroyRef=A(_n,{optional:!0})??void 0,this.pendingTasks=A(hi,{optional:!0})??void 0)}emit(t){let e=ve(null);try{super.next(t)}finally{ve(e)}}subscribe(t,e,i){let r=t,a=e||(()=>null),d=i;if(t&&typeof t=="object"){let p=t;r=p.next?.bind(p),a=p.error?.bind(p),d=p.complete?.bind(p)}this.__isAsync&&(a=this.wrapInTimeout(a),r&&(r=this.wrapInTimeout(r)),d&&(d=this.wrapInTimeout(d)));let u=super.subscribe({next:r,error:a,complete:d});return t instanceof gt&&t.add(u),u}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Xe=om;function Il(...n){}function Hm(n){let t,e;function i(){n=Il;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function qm(n){return queueMicrotask(()=>n()),()=>{n=Il}}var zm="isAngularZone",ca=zm+"_ID",XS=0,ot=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:a=R_}=t;if(typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!r&&i,d.shouldCoalesceRunChangeDetection=r,d.callbackScheduled=!1,d.scheduleInRootZone=a,nE(d)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new N(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let a=this._inner,d=a.scheduleEventTask("NgZoneEvent: "+r,t,eE,Il,Il);try{return a.runTask(d,e,i)}finally{a.cancelTask(d)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},eE={};function $m(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){Hm(()=>{n.callbackScheduled=!1,am(n),n.isCheckStableRunning=!0,$m(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),am(n)}function nE(n){let t=()=>{tE(n)},e=XS++;n._inner=n._inner.fork({name:"angular",properties:{[zm]:!0,[ca]:e,[ca+e]:!0},onInvokeTask:(i,r,a,d,u,p)=>{if(iE(p))return i.invokeTask(a,d,u,p);try{return $h(n),i.invokeTask(a,d,u,p)}finally{(n.shouldCoalesceEventChangeDetection&&d.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Qh(n)}},onInvoke:(i,r,a,d,u,p,h)=>{try{return $h(n),i.invoke(a,d,u,p,h)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rE(p)&&t(),Qh(n)}},onHasTask:(i,r,a,d)=>{i.hasTask(a,d),r===a&&(d.change=="microTask"?(n._hasPendingMicrotasks=d.microTask,am(n),$m(n)):d.change=="macroTask"&&(n.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,r,a,d)=>(i.handleError(a,d),n.runOutsideAngular(()=>n.onError.emit(d)),!1)})}function am(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $h(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Qh(n){n._nesting--,$m(n)}var da=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function iE(n){return N_(n,"__ignore_ng_zone__")}function rE(n){return N_(n,"__scheduler_tick__")}function N_(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Qn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},vn=new J("",{factory:()=>{let n=A(ot),t=A(et),e;return i=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw i}):(e??=t.get(Qn),e.handleError(i))})}}}),A_={provide:io,useValue:()=>{let n=A(Qn,{optional:!0})},multi:!0};function yn(n,t){let[e,i,r]=Fp(n,t?.equal),a=e,d=a[Lt];return a.set=i,a.update=r,a.asReadonly=F_.bind(a),a}function F_(){let n=this[Lt];if(n.readonlyFn===void 0){let t=()=>this();t[Lt]=n,n.readonlyFn=t}return n.readonlyFn}var $l=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=oE}return n})();function oE(){return new $l(Ie(),Pt())}var Pi=class{},wa=new J("",{factory:()=>!0});var Qm=new J(""),Ia=(()=>{class n{internalPendingTasks=A(hi);scheduler=A(Pi);errorHandler=A(vn);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Km=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new sm})}return n})(),sm=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,i]of this.queues)e===null?t||=this.flushQueue(i):t||=e.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}},lm=class{[Lt];constructor(t){this[Lt]=t}destroy(){this[Lt].destroy()}};function lt(n){return Lp(n)}function La(n){return{toString:n}.toString()}function pv(n){let t=yt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function mE(n){return typeof n=="function"}function mv(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var ec=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}},vi=(()=>{let n=()=>fv;return n.ngInherit=!0,n})();function fv(n){return n.type.prototype.ngOnChanges&&(n.setInput=gE),fE}function fE(){let n=hv(this),t=n?.current;if(t){let e=n.previous;if(e===Ti)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function gE(n,t,e,i,r){let a=this.declaredInputs[i],d=hv(n)||hE(n,{previous:Ti,current:null}),u=d.current||(d.current={}),p=d.previous,h=p[a];u[a]=new ec(h&&h.currentValue,e,p===Ti),mv(n,t,r,e)}var gv="__ngSimpleChanges__";function hv(n){return n[gv]||null}function hE(n,t){return n[gv]=t}var L_=[];var Ve=function(n,t=null,e){for(let i=0;i<L_.length;i++){let r=L_[i];r(n,t,e)}},Re=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Re||{});function _E(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=t.type.prototype;if(i){let d=fv(t);(e.preOrderHooks??=[]).push(n,d),(e.preOrderCheckHooks??=[]).push(n,d)}r&&(e.preOrderHooks??=[]).push(0-n,r),a&&((e.preOrderHooks??=[]).push(n,a),(e.preOrderCheckHooks??=[]).push(n,a))}function _v(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let a=n.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:u,ngAfterViewInit:p,ngAfterViewChecked:h,ngOnDestroy:C}=a;d&&(n.contentHooks??=[]).push(-e,d),u&&((n.contentHooks??=[]).push(e,u),(n.contentCheckHooks??=[]).push(e,u)),p&&(n.viewHooks??=[]).push(-e,p),h&&((n.viewHooks??=[]).push(e,h),(n.viewCheckHooks??=[]).push(e,h)),C!=null&&(n.destroyHooks??=[]).push(e,C)}}function Zl(n,t,e){vv(n,t,3,e)}function Jl(n,t,e,i){(n[fe]&3)===e&&vv(n,t,e,i)}function Ym(n,t){let e=n[fe];(e&3)===t&&(e&=16383,e+=1,n[fe]=e)}function vv(n,t,e,i){let r=i!==void 0?n[fr]&65535:0,a=i??-1,d=t.length-1,u=0;for(let p=r;p<d;p++)if(typeof t[p+1]=="number"){if(u=t[p],i!=null&&u>=i)break}else t[p]<0&&(n[fr]+=65536),(u<a||a==-1)&&(vE(n,e,t,p),n[fr]=(n[fr]&4294901760)+p+2),p++}function V_(n,t){Ve(Re.LifecycleHookStart,n,t);let e=ve(null);try{t.call(n)}finally{ve(e),Ve(Re.LifecycleHookEnd,n,t)}}function vE(n,t,e,i){let r=e[i]<0,a=e[i+1],d=r?-e[i]:e[i],u=n[d];r?n[fe]>>14<n[fr]>>16&&(n[fe]&3)===t&&(n[fe]+=16384,V_(u,a)):V_(u,a)}var po=-1,yr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function yE(n){return(n.flags&8)!==0}function bE(n){return(n.flags&16)!==0}function CE(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let a=e[i++],d=e[i++],u=e[i++];n.setAttribute(t,d,u,a)}else{let a=r,d=e[++i];xE(a)?n.setProperty(t,a,d):n.setAttribute(t,a,d),i++}}return i}function yv(n){return n===3||n===4||n===6}function xE(n){return n.charCodeAt(0)===64}function Oa(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?j_(n,e,r,null,t[++i]):j_(n,e,r,null,null))}}return n}function j_(n,t,e,i,r){let a=0,d=n.length;if(t===-1)d=-1;else for(;a<n.length;){let u=n[a++];if(typeof u=="number"){if(u===t){d=-1;break}else if(u>t){d=a-1;break}}}for(;a<n.length;){let u=n[a];if(typeof u=="number")break;if(u===e){r!==null&&(n[a+1]=r);return}a++,r!==null&&a++}d!==-1&&(n.splice(d,0,t),a=d+1),n.splice(a++,0,e),r!==null&&n.splice(a++,0,r)}function bv(n){return n!==po}function tc(n){return n&32767}function SE(n){return n>>16}function nc(n,t){let e=SE(n),i=t;for(;e>0;)i=i[pr],e--;return i}var lf=!0;function ic(n){let t=lf;return lf=n,t}var EE=256,Cv=EE-1,xv=5,ME=0,ei={};function wE(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(dr)&&(i=e[dr]),i==null&&(i=e[dr]=ME++);let r=i&Cv,a=1<<r;t.data[n+(r>>xv)]|=a}function rc(n,t){let e=Sv(n,t);if(e!==-1)return e;let i=t[ge];i.firstCreatePass&&(n.injectorIndex=t.length,Zm(i.data,n),Zm(t,null),Zm(i.blueprint,null));let r=Mf(n,t),a=n.injectorIndex;if(bv(r)){let d=tc(r),u=nc(r,t),p=u[ge].data;for(let h=0;h<8;h++)t[a+h]=u[d+h]|p[d+h]}return t[a+8]=r,a}function Zm(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Sv(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Mf(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=Dv(r),i===null)return po;if(e++,r=r[pr],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return po}function cf(n,t,e){wE(n,t,e)}function IE(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let a=e[r];if(yv(a))break;if(a===0)r=r+2;else if(typeof a=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(a===t)return e[r+1];r=r+2}}}return null}function Ev(n,t,e){if(e&8||n!==void 0)return n;Ol(t,"NodeInjector")}function Mv(n,t,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=n[Oi],a=Vt(void 0);try{return r?r.get(t,i,e&8):ym(t,i,e&8)}finally{Vt(a)}}return Ev(i,t,e)}function wv(n,t,e,i=0,r){if(n!==null){if(t[fe]&2048&&!(i&2)){let d=kE(n,t,e,i,ei);if(d!==ei)return d}let a=Iv(n,t,e,i,ei);if(a!==ei)return a}return Mv(t,e,i,r)}function Iv(n,t,e,i,r){let a=TE(e);if(typeof a=="function"){if(!Wm(t,n,i))return i&1?Ev(r,e,i):Mv(t,e,i,r);try{let d;if(d=a(i),d==null&&!(i&8))Ol(e);else return d}finally{Um()}}else if(typeof a=="number"){let d=null,u=Sv(n,t),p=po,h=i&1?t[fn][mn]:null;for((u===-1||i&4)&&(p=u===-1?Mf(n,t):t[u+8],p===po||!W_(i,!1)?u=-1:(d=t[ge],u=tc(p),t=nc(p,t)));u!==-1;){let C=t[ge];if(B_(a,u,C.data)){let w=DE(u,t,e,d,i,h);if(w!==ei)return w}p=t[u+8],p!==po&&W_(i,t[ge].data[u+8]===h)&&B_(a,u,t)?(d=C,u=tc(p),t=nc(p,t)):u=-1}}return r}function DE(n,t,e,i,r,a){let d=t[ge],u=d.data[n+8],p=i==null?Ri(u)&&lf:i!=d&&(u.type&3)!==0,h=r&1&&a===u,C=PE(u,d,e,p,h);return C!==null?oc(t,d,C,u,r):ei}function PE(n,t,e,i,r){let a=n.providerIndexes,d=t.data,u=a&1048575,p=n.directiveStart,h=n.directiveEnd,C=a>>20,w=i?u:u+C,P=r?u+C:h;for(let D=w;D<P;D++){let k=d[D];if(D<p&&e===k||D>=p&&k.type===e)return D}if(r){let D=d[p];if(D&&Jn(D)&&D.type===e)return p}return null}function oc(n,t,e,i,r){let a=n[e],d=t.data;if(a instanceof yr){let u=a;if(u.resolving){let D=Zh(d[e]);throw vm(D)}let p=ic(u.canSeeViewProviders);u.resolving=!0;let h=d[e].type||d[e],C,w=u.injectImpl?Vt(u.injectImpl):null,P=Wm(n,i,0);try{a=n[e]=u.factory(void 0,r,d,n,i),t.firstCreatePass&&e>=i.directiveStart&&_E(e,d[e],t)}finally{w!==null&&Vt(w),ic(p),u.resolving=!1,Um()}}return a}function TE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(dr)?n[dr]:void 0;return typeof t=="number"?t>=0?t&Cv:OE:t}function B_(n,t,e){let i=1<<n;return!!(e[t+(n>>xv)]&i)}function W_(n,t){return!(n&2)&&!(n&1&&t)}var vr=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return wv(this._tNode,this._lView,t,sr(i),e)}};function OE(){return new vr(Pt(),Ie())}function Yt(n){return La(()=>{let t=n.prototype.constructor,e=t[sa]||df(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let a=r[sa]||df(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function df(n){return cm(n)?()=>{let t=df(_t(n));return t&&t()}:Ii(n)}function kE(n,t,e,i,r){let a=n,d=t;for(;a!==null&&d!==null&&d[fe]&2048&&!so(d);){let u=Iv(a,d,e,i|2,ei);if(u!==ei)return u;let p=a.parent;if(!p){let h=d[Dm];if(h){let C=h.get(e,ei,i);if(C!==ei)return C}p=Dv(d),d=d[pr]}a=p}return r}function Dv(n){let t=n[ge],e=t.type;return e===2?t.declTNode:e===1?n[mn]:null}function Va(n){return IE(Pt(),n)}function RE(){return fc(Pt(),Ie())}function fc(n,t){return new bn(kn(n,t))}var bn=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=RE}return n})();function Pv(n){return(n.flags&128)===128}var wf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(wf||{}),Tv=new Map,NE=0;function AE(){return NE++}function FE(n){Tv.set(n[ha],n)}function uf(n){Tv.delete(n[ha])}var U_="__ngContext__";function mo(n,t){Zn(t)?(n[U_]=t[ha],FE(t)):n[U_]=t}function Ov(n){return Rv(n[oo])}function kv(n){return Rv(n[pn])}function Rv(n){for(;n!==null&&!On(n);)n=n[pn];return n}var LE;function If(n){LE=n}var gc=new J("",{factory:()=>VE}),VE="ng";var hc=new J(""),ja=new J("",{providedIn:"platform",factory:()=>"unknown"}),_c=new J(""),vc=new J("",{factory:()=>A(He).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Nv=!1,Av=new J("",{factory:()=>Nv});var Df=new J("");var jE=(n,t,e,i)=>{};function BE(n,t,e,i){jE(n,t,e,i)}function Pf(n){return(n.flags&32)===32}var WE=()=>null;function Fv(n,t,e=!1){return WE(n,t,e)}function Lv(n,t){let e=n.contentQueries;if(e!==null){let i=ve(null);try{for(let r=0;r<e.length;r+=2){let a=e[r],d=e[r+1];if(d!==-1){let u=n.data[d];Bm(a),u.contentQueries(2,t[d],d)}}}finally{ve(i)}}}function pf(n,t,e){Bm(0);let i=ve(null);try{t(n,e)}finally{ve(i)}}function Tf(n,t,e){if(Pm(t)){let i=ve(null);try{let r=t.directiveStart,a=t.directiveEnd;for(let d=r;d<a;d++){let u=n.data[d];if(u.contentQueries){let p=e[d];u.contentQueries(1,p,d)}}}finally{ve(i)}}}var An=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(An||{});var Ql;function UE(){if(Ql===void 0&&(Ql=null,yt.trustedTypes))try{Ql=yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ql}function G_(n){return UE()?.createScriptURL(n)||n}var ac=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dl})`}};function ho(n){return n instanceof ac?n.changingThisBreaksApplicationSecurity:n}function Of(n,t){let e=Vv(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Dl})`)}return e===t}function Vv(n){return n instanceof ac&&n.getTypeName()||null}var GE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jv(n){return n=String(n),n.match(GE)?n:"unsafe:"+n}var HE=/^>|^->|<!--|-->|--!>|<!-$/g,qE=/(<|>)/g,zE="\u200B$1\u200B";function $E(n){return n.replace(HE,t=>t.replace(qE,zE))}function QE(n,t){return n.createText(t)}function KE(n,t,e){n.setValue(t,e)}function YE(n,t){return n.createComment($E(t))}function Bv(n,t,e){return n.createElement(t,e)}function sc(n,t,e,i,r){n.insertBefore(t,e,i,r)}function Wv(n,t,e){n.appendChild(t,e)}function H_(n,t,e,i,r){i!==null?sc(n,t,e,i,r):Wv(n,t,e)}function ZE(n,t,e,i){n.removeChild(null,t,e,i)}function JE(n,t,e){n.setAttribute(t,"style",e)}function XE(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Uv(n,t,e){let{mergedAttrs:i,classes:r,styles:a}=e;i!==null&&CE(n,t,i),r!==null&&XE(n,t,r),a!==null&&JE(n,t,a)}var yc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(yc||{});function Gv(n){let t=qv();return t?t.sanitize(yc.URL,n)||"":Of(n,"URL")?ho(n):jv(Kn(n))}function Hv(n){let t=qv();if(t)return G_(t.sanitize(yc.RESOURCE_URL,n)||"");if(Of(n,"ResourceURL"))return G_(ho(n));throw new N(904,!1)}function eM(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?Hv:Gv}function kf(n,t,e){return eM(t,e)(n)}function qv(){let n=Ie();return n&&n[Yn].sanitizer}function Rf(n){return n.ownerDocument.defaultView}function zv(n){return n instanceof Function?n():n}function tM(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let a=t.length;if(r+a===i||n.charCodeAt(r+a)<=32)return r}e=r+1}}var $v="ng-template";function nM(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&tM(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Nf(n))return!1;if(r=t.indexOf(1,r),r>-1){let a;for(;++r<t.length&&typeof(a=t[r])=="string";)if(a.toLowerCase()===e)return!0}return!1}function Nf(n){return n.type===4&&n.value!==$v}function iM(n,t,e){let i=n.type===4&&!e?$v:n.value;return t===i}function rM(n,t,e){let i=4,r=n.attrs,a=r!==null?sM(r):0,d=!1;for(let u=0;u<t.length;u++){let p=t[u];if(typeof p=="number"){if(!d&&!Rn(i)&&!Rn(p))return!1;if(d&&Rn(p))continue;d=!1,i=p|i&1;continue}if(!d)if(i&4){if(i=2|i&1,p!==""&&!iM(n,p,e)||p===""&&t.length===1){if(Rn(i))return!1;d=!0}}else if(i&8){if(r===null||!nM(n,r,p,e)){if(Rn(i))return!1;d=!0}}else{let h=t[++u],C=oM(p,r,Nf(n),e);if(C===-1){if(Rn(i))return!1;d=!0;continue}if(h!==""){let w;if(C>a?w="":w=r[C+1].toLowerCase(),i&2&&h!==w){if(Rn(i))return!1;d=!0}}}}return Rn(i)||d}function Rn(n){return(n&1)===0}function oM(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let a=!1;for(;r<t.length;){let d=t[r];if(d===n)return r;if(d===3||d===6)a=!0;else if(d===1||d===2){let u=t[++r];for(;typeof u=="string";)u=t[++r];continue}else{if(d===4)break;if(d===0){r+=4;continue}}r+=a?1:2}return-1}else return lM(t,n)}function aM(n,t,e=!1){for(let i=0;i<t.length;i++)if(rM(n,t[i],e))return!0;return!1}function sM(n){for(let t=0;t<n.length;t++){let e=n[t];if(yv(e))return t}return n.length}function lM(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function q_(n,t){return n?":not("+t.trim()+")":t}function cM(n){let t=n[0],e=1,i=2,r="",a=!1;for(;e<n.length;){let d=n[e];if(typeof d=="string")if(i&2){let u=n[++e];r+="["+d+(u.length>0?'="'+u+'"':"")+"]"}else i&8?r+="."+d:i&4&&(r+=" "+d);else r!==""&&!Rn(d)&&(t+=q_(a,r),r=""),i=d,a=a||!Rn(i);e++}return r!==""&&(t+=q_(a,r)),t}function dM(n){return n.map(cM).join(",")}function uM(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let a=n[i];if(typeof a=="string")r===2?a!==""&&t.push(a,n[++i]):r===8&&e.push(a);else{if(!Rn(r))break;r=a}i++}return e.length&&t.push(1,...e),t}var Wt={};function Af(n,t,e,i,r,a,d,u,p,h,C){let w=pt+i,P=w+r,D=pM(w,P),k=typeof h=="function"?h():h;return D[ge]={type:n,blueprint:D,template:e,queries:null,viewQuery:u,declTNode:t,data:D.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof a=="function"?a():a,pipeRegistry:typeof d=="function"?d():d,firstChild:null,schemas:p,consts:k,incompleteFirstPass:!1,ssrId:C}}function pM(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Wt);return e}function mM(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Af(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Ff(n,t,e,i,r,a,d,u,p,h,C){let w=t.blueprint.slice();return w[Tn]=r,w[fe]=i|4|128|8|64|1024,(h!==null||n&&n[fe]&2048)&&(w[fe]|=2048),km(w),w[vt]=w[pr]=n,w[It]=e,w[Yn]=d||n&&n[Yn],w[ze]=u||n&&n[ze],w[Oi]=p||n&&n[Oi]||null,w[mn]=a,w[ha]=AE(),w[ga]=C,w[Dm]=h,w[fn]=t.type==2?n[fn]:w,w}function fM(n,t,e){let i=kn(t,n),r=mM(e),a=n[Yn].rendererFactory,d=Lf(n,Ff(n,r,null,Qv(e),i,t,null,a.createRenderer(i,e),null,null,null));return n[t.index]=d}function Qv(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Kv(n,t,e,i){if(e===0)return-1;let r=t.length;for(let a=0;a<e;a++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Lf(n,t){return n[oo]?n[Im][pn]=t:n[oo]=t,n[Im]=t,t}function c(n=1){Yv(Dt(),Ie(),Xn()+n,!1)}function Yv(n,t,e,i){if(!i)if((t[fe]&3)===3){let a=n.preOrderCheckHooks;a!==null&&Zl(t,a,e)}else{let a=n.preOrderHooks;a!==null&&Jl(t,a,0,e)}Ni(e)}var bc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(bc||{});function mf(n,t,e,i){let r=ve(null);try{let[a,d,u]=n.inputs[e],p=null;(d&bc.SignalBased)!==0&&(p=t[a][Lt]),p!==null&&p.transformFn!==void 0?i=p.transformFn(i):u!==null&&(i=u.call(t,i)),n.setInput!==null?n.setInput(t,p,i,e,a):mv(t,p,a,i)}finally{ve(r)}}var ti=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ti||{}),gM;function Vf(n,t){return gM(n,t)}var fo=new Set,Cc=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Cc||{}),yi=new J(""),z_=new Set;function Sr(n){z_.has(n)||(z_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var jf=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Zv=[0,1,2,3],Jv=(()=>{class n{ngZone=A(ot);scheduler=A(Pi);errorHandler=A(Qn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){A(yi,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Ve(Re.AfterRenderHooksStart),this.executing=!0;for(let i of Zv)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let a=r.hooks[i];return a(r.pipelinedValue)},r.snapshot))}catch(a){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(a)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Ve(Re.AfterRenderHooksEnd)}register(e){let{view:i}=e;i!==void 0?((i[hr]??=[]).push(e),lo(i),i[fe]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Cc.AFTER_NEXT_RENDER,e):e()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),lc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,a,d=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=d,this.unregisterOnDestroy=a?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[hr];t&&(this.view[hr]=t.filter(e=>e!==this))}};function Ba(n,t){let e=t?.injector??A(wt);return Sr("NgAfterNextRender"),_M(n,e,t,!0)}function hM(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _M(n,t,e,i){let r=t.get(jf);r.impl??=t.get(Jv);let a=t.get(yi,null,{optional:!0}),d=e?.manualCleanup!==!0?t.get(_n):null,u=t.get($l,null,{optional:!0}),p=new lc(r.impl,hM(n),u?.view,i,d,a?.snapshot(null));return r.impl.register(p),p}var vM=new J("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:A(et)})});function Xv(n,t,e){let i=n.get(vM);if(Array.isArray(t))for(let r of t)i.queue.add(r),e?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(n)}function yM(n,t){for(let[e,i]of t)Xv(n,i.animateFns)}function $_(n,t,e,i){let r=n?.[va]?.enter;t!==null&&r&&r.has(e.index)&&yM(i,r)}function uo(n,t,e,i,r,a,d,u){if(r!=null){let p,h=!1;On(r)?p=r:Zn(r)&&(h=!0,r=r[Tn]);let C=gn(r);n===0&&i!==null?($_(u,i,a,e),d==null?Wv(t,i,C):sc(t,i,C,d||null,!0)):n===1&&i!==null?($_(u,i,a,e),sc(t,i,C,d||null,!0)):n===2?Q_(u,a,e,w=>{ZE(t,C,h,w)}):n===3&&Q_(u,a,e,()=>{t.destroyNode(C)}),p!=null&&kM(t,n,e,p,a,i,d)}}function bM(n,t){ey(n,t),t[Tn]=null,t[mn]=null}function CM(n,t,e,i,r,a){i[Tn]=r,i[mn]=t,xc(n,i,e,1,r,a)}function ey(n,t){t[Yn].changeDetectionScheduler?.notify(9),xc(n,t,t[ze],2,null,null)}function xM(n){let t=n[oo];if(!t)return Jm(n[ge],n);for(;t;){let e=null;if(Zn(t))e=t[oo];else{let i=t[Kt];i&&(e=i)}if(!e){for(;t&&!t[pn]&&t!==n;)Zn(t)&&Jm(t[ge],t),t=t[vt];t===null&&(t=n),Zn(t)&&Jm(t[ge],t),e=t&&t[pn]}t=e}}function Bf(n,t){let e=n[ba],i=e.indexOf(t);e.splice(i,1)}function ty(n,t){if(_r(t))return;let e=t[ze];e.destroyNode&&xc(n,t,e,3,null,null),xM(t)}function Jm(n,t){if(_r(t))return;let e=ve(null);try{t[fe]&=-129,t[fe]|=256,t[on]&&Xo(t[on]),MM(n,t),EM(n,t),t[ge].type===1&&t[ze].destroy();let i=t[mr];if(i!==null&&On(t[vt])){i!==t[vt]&&Bf(i,t);let r=t[gr];r!==null&&r.detachView(n)}uf(t)}finally{ve(e)}}function Q_(n,t,e,i){let r=n?.[va];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);n&&fo.add(n),Xv(e,()=>{if(r.leave&&r.leave.has(t.index)){let d=r.leave.get(t.index),u=[];if(d){for(let p=0;p<d.animateFns.length;p++){let h=d.animateFns[p],{promise:C}=h();u.push(C)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(u),SM(n,i)}else n&&fo.delete(n),i(!1)},r)}function SM(n,t){let e=n[va]?.running;if(e){e.then(()=>{n[va].running=void 0,fo.delete(n),t(!0)});return}t(!1)}function EM(n,t){let e=n.cleanup,i=t[ro];if(e!==null)for(let d=0;d<e.length-1;d+=2)if(typeof e[d]=="string"){let u=e[d+3];u>=0?i[u]():i[-u].unsubscribe(),d+=2}else{let u=i[e[d+1]];e[d].call(u)}i!==null&&(t[ro]=null);let r=t[pi];if(r!==null){t[pi]=null;for(let d=0;d<r.length;d++){let u=r[d];u()}}let a=t[_a];if(a!==null){t[_a]=null;for(let d of a)d.destroy()}}function MM(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof yr)){let a=e[i+1];if(Array.isArray(a))for(let d=0;d<a.length;d+=2){let u=r[a[d]],p=a[d+1];Ve(Re.LifecycleHookStart,u,p);try{p.call(u)}finally{Ve(Re.LifecycleHookEnd,u,p)}}else{Ve(Re.LifecycleHookStart,r,a);try{a.call(r)}finally{Ve(Re.LifecycleHookEnd,r,a)}}}}}function wM(n,t,e){return IM(n,t.parent,e)}function IM(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Tn];if(Ri(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===An.None||r===An.Emulated)return null}return kn(i,e)}function DM(n,t,e){return TM(n,t,e)}function PM(n,t,e){return n.type&40?kn(n,e):null}var TM=PM,K_;function Wf(n,t,e,i){let r=wM(n,i,t),a=t[ze],d=i.parent||t[mn],u=DM(d,i,t);if(r!=null)if(Array.isArray(e))for(let p=0;p<e.length;p++)H_(a,r,e[p],u,!1);else H_(a,r,e,u,!1);K_!==void 0&&K_(a,i,t,e,r)}function Pa(n,t){if(t!==null){let e=t.type;if(e&3)return kn(t,n);if(e&4)return ff(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Pa(n,i);{let r=n[t.index];return On(r)?ff(-1,r):gn(r)}}else{if(e&128)return Pa(n,t.next);if(e&32)return Vf(t,n)()||gn(n[t.index]);{let i=ny(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Di(n[fn]);return Pa(r,i)}else return Pa(n,t.next)}}}return null}function ny(n,t){if(t!==null){let i=n[fn][mn],r=t.projection;return i.projection[r]}return null}function ff(n,t){let e=Kt+n+1;if(e<t.length){let i=t[e],r=i[ge].firstChild;if(r!==null)return Pa(i,r)}return t[ki]}function Uf(n,t,e,i,r,a,d){for(;e!=null;){let u=i[Oi];if(e.type===128){e=e.next;continue}let p=i[e.index],h=e.type;if(d&&t===0&&(p&&mo(gn(p),i),e.flags|=2),!Pf(e))if(h&8)Uf(n,t,e.child,i,r,a,!1),uo(t,n,u,r,p,e,a,i);else if(h&32){let C=Vf(e,i),w;for(;w=C();)uo(t,n,u,r,w,e,a,i);uo(t,n,u,r,p,e,a,i)}else h&16?OM(n,t,i,e,r,a):uo(t,n,u,r,p,e,a,i);e=d?e.projectionNext:e.next}}function xc(n,t,e,i,r,a){Uf(e,i,n.firstChild,t,r,a,!1)}function OM(n,t,e,i,r,a){let d=e[fn],p=d[mn].projection[i.projection];if(Array.isArray(p))for(let h=0;h<p.length;h++){let C=p[h];uo(t,n,e[Oi],r,C,i,a,e)}else{let h=p,C=d[vt];Pv(i)&&(h.flags|=128),Uf(n,t,h,C,r,a,!0)}}function kM(n,t,e,i,r,a,d){let u=i[ki],p=gn(i);u!==p&&uo(t,n,e,a,u,r,d);for(let h=Kt;h<i.length;h++){let C=i[h];xc(C[ge],C,n,t,a,u)}}function RM(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let a=i.indexOf("-")===-1?void 0:ti.DashCase;r==null?n.removeStyle(e,i,a):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),a|=ti.Important),n.setStyle(e,i,r,a))}}function iy(n,t,e,i,r){let a=Xn(),d=i&2;try{Ni(-1),d&&t.length>pt&&Yv(n,t,pt,!1);let u=d?Re.TemplateUpdateStart:Re.TemplateCreateStart;Ve(u,r,e),e(i,r)}finally{Ni(a);let u=d?Re.TemplateUpdateEnd:Re.TemplateCreateEnd;Ve(u,r,e)}}function Sc(n,t,e){BM(n,t,e),(e.flags&64)===64&&WM(n,t,e)}function Gf(n,t,e=kn){let i=t.localNames;if(i!==null){let r=t.index+1;for(let a=0;a<i.length;a+=2){let d=i[a+1],u=d===-1?e(t,n):n[d];n[r++]=u}}}function NM(n,t,e,i){let a=i.get(Av,Nv)||e===An.ShadowDom||e===An.ExperimentalIsolatedShadowDom,d=n.selectRootElement(t,a);return AM(d),d}function AM(n){FM(n)}var FM=()=>null;function LM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ry(n,t,e,i,r,a){let d=t[ge];if(qf(n,d,t,e,i)){Ri(n)&&jM(t,n.index);return}n.type&3&&(e=LM(e)),VM(n,t,e,i,r,a)}function VM(n,t,e,i,r,a){if(n.type&3){let d=kn(n,t);i=a!=null?a(i,n.value||"",e):i,r.setProperty(d,e,i)}else n.type&12}function jM(n,t){let e=hn(t,n);e[fe]&16||(e[fe]|=64)}function BM(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Ri(e)&&fM(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||rc(e,t);let a=e.initialInputs;for(let d=i;d<r;d++){let u=n.data[d],p=oc(t,n,d,e);if(mo(p,t),a!==null&&qM(t,d-i,p,u,e,a),Jn(u)){let h=hn(e.index,t);h[It]=oc(t,n,d,e)}}}function WM(n,t,e){let i=e.directiveStart,r=e.directiveEnd,a=e.index,d=M_();try{Ni(a);for(let u=i;u<r;u++){let p=n.data[u],h=t[u];Ul(u),(p.hostBindings!==null||p.hostVars!==0||p.hostAttrs!==null)&&UM(p,h)}}finally{Ni(-1),Ul(d)}}function UM(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Hf(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let a=e[r];aM(t,a.selectors,!1)&&(i??=[],Jn(a)?i.unshift(a):i.push(a))}return i}function GM(n,t,e,i,r,a){let d=kn(n,t);HM(t[ze],d,a,n.value,e,i,r)}function HM(n,t,e,i,r,a,d){if(a==null)n.removeAttribute(t,r,e);else{let u=d==null?Kn(a):d(a,i||"",r);n.setAttribute(t,r,u,e)}}function qM(n,t,e,i,r,a){let d=a[t];if(d!==null)for(let u=0;u<d.length;u+=2){let p=d[u],h=d[u+1];mf(i,e,p,h)}}function oy(n,t,e,i,r){let a=pt+e,d=t[ge],u=r(d,t,n,i,e);t[a]=u,co(n,!0);let p=n.type===2;return p?(Uv(t[ze],u,n),(f_()===0||ao(n))&&mo(u,t),g_()):mo(u,t),zl()&&(!p||!Pf(n))&&Wf(d,t,u,n),n}function ay(n){let t=n;return Fm()?C_():(t=t.parent,co(t,!1)),t}function zM(n,t){let e=n[Oi];if(!e)return;let i;try{i=e.get(vn,null)}catch{i=null}i?.(t)}function qf(n,t,e,i,r){let a=n.inputs?.[i],d=n.hostDirectiveInputs?.[i],u=!1;if(d)for(let p=0;p<d.length;p+=2){let h=d[p],C=d[p+1],w=t.data[h];mf(w,e[h],C,r),u=!0}if(a)for(let p of a){let h=e[p],C=t.data[p];mf(C,h,i,r),u=!0}return u}function $M(n,t){let e=hn(t,n),i=e[ge];QM(i,e);let r=e[Tn];r!==null&&e[ga]===null&&(e[ga]=Fv(r,e[Oi])),Ve(Re.ComponentStart);try{zf(i,e,e[It])}finally{Ve(Re.ComponentEnd,e[It])}}function QM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function zf(n,t,e){Gl(t);try{let i=n.viewQuery;i!==null&&pf(1,i,e);let r=n.template;r!==null&&iy(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[gr]?.finishViewCreation(n),n.staticContentQueries&&Lv(n,t),n.staticViewQueries&&pf(2,n.viewQuery,e);let a=n.components;a!==null&&KM(t,a)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[fe]&=-5,Hl()}}function KM(n,t){for(let e=0;e<t.length;e++)$M(n,t[e])}function YM(n,t,e,i){let r=ve(null);try{let a=t.tView,u=n[fe]&4096?4096:16,p=Ff(n,a,e,u,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),h=n[t.index];p[mr]=h;let C=n[gr];return C!==null&&(p[gr]=C.createEmbeddedView(a)),zf(a,p,e),p}finally{ve(r)}}function Y_(n,t){return!t||t.firstChild===null||Pv(n)}function ka(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let a=t[e.index];a!==null&&i.push(gn(a)),On(a)&&sy(a,i);let d=e.type;if(d&8)ka(n,t,e.child,i);else if(d&32){let u=Vf(e,t),p;for(;p=u();)i.push(p)}else if(d&16){let u=ny(t,e);if(Array.isArray(u))i.push(...u);else{let p=Di(t[fn]);ka(p[ge],p,u,i,!0)}}e=r?e.projectionNext:e.next}return i}function sy(n,t){for(let e=Kt;e<n.length;e++){let i=n[e],r=i[ge].firstChild;r!==null&&ka(i[ge],i,r,t)}n[ki]!==n[Tn]&&t.push(n[ki])}function ly(n){if(n[hr]!==null){for(let t of n[hr])t.impl.addSequence(t);n[hr].length=0}}var cy=[];function ZM(n){return n[on]??JM(n)}function JM(n){let t=cy.pop()??Object.create(ew);return t.lView=n,t}function XM(n){n.lView[on]!==n&&(n.lView=null,cy.push(n))}var ew=me(R({},Yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{lo(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function tw(n){let t=n[on]??Object.create(nw);return t.lView=n,t}var nw=me(R({},Yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Di(n.lView);for(;t&&!dy(t[ge]);)t=Di(t);t&&Rm(t)},consumerOnSignalRead(){this.lView[on]=this}});function dy(n){return n.type!==2}function uy(n){if(n[_a]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[_a])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[fe]&8192)}}var iw=100;function py(n,t=0){let i=n[Yn].rendererFactory,r=!1;r||i.begin?.();try{rw(n,t)}finally{r||i.end?.()}}function rw(n,t){let e=Lm();try{Vm(!0),gf(n,t);let i=0;for(;xa(n);){if(i===iw)throw new N(103,!1);i++,gf(n,1)}}finally{Vm(e)}}function ow(n,t,e,i){if(_r(t))return;let r=t[fe],a=!1,d=!1;Gl(t);let u=!0,p=null,h=null;a||(dy(n)?(h=ZM(t),p=Jo(h)):Qs()===null?(u=!1,h=tw(t),p=Jo(h)):t[on]&&(Xo(t[on]),t[on]=null));try{km(t),x_(n.bindingStartIndex),e!==null&&iy(n,t,e,2,i);let C=(r&3)===3;if(!a)if(C){let D=n.preOrderCheckHooks;D!==null&&Zl(t,D,null)}else{let D=n.preOrderHooks;D!==null&&Jl(t,D,0,null),Ym(t,0)}if(d||aw(t),uy(t),my(t,0),n.contentQueries!==null&&Lv(n,t),!a)if(C){let D=n.contentCheckHooks;D!==null&&Zl(t,D)}else{let D=n.contentHooks;D!==null&&Jl(t,D,1),Ym(t,1)}lw(n,t);let w=n.components;w!==null&&gy(t,w,0);let P=n.viewQuery;if(P!==null&&pf(2,P,i),!a)if(C){let D=n.viewCheckHooks;D!==null&&Zl(t,D)}else{let D=n.viewHooks;D!==null&&Jl(t,D,2),Ym(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Al]){for(let D of t[Al])D();t[Al]=null}a||(ly(t),t[fe]&=-73)}catch(C){throw a||lo(t),C}finally{h!==null&&(Ks(h,p),u&&XM(h)),Hl()}}function my(n,t){for(let e=Ov(n);e!==null;e=kv(e))for(let i=Kt;i<e.length;i++){let r=e[i];fy(r,t)}}function aw(n){for(let t=Ov(n);t!==null;t=kv(t)){if(!(t[fe]&2))continue;let e=t[ba];for(let i=0;i<e.length;i++){let r=e[i];Rm(r)}}}function sw(n,t,e){Ve(Re.ComponentStart);let i=hn(t,n);try{fy(i,e)}finally{Ve(Re.ComponentEnd,i[It])}}function fy(n,t){Vl(n)&&gf(n,t)}function gf(n,t){let i=n[ge],r=n[fe],a=n[on],d=!!(t===0&&r&16);if(d||=!!(r&64&&t===0),d||=!!(r&1024),d||=!!(a?.dirty&&Ys(a)),d||=!1,a&&(a.dirty=!1),n[fe]&=-9217,d)ow(i,n,i.template,n[It]);else if(r&8192){let u=ve(null);try{uy(n),my(n,1);let p=i.components;p!==null&&gy(n,p,1),ly(n)}finally{ve(u)}}}function gy(n,t,e){for(let i=0;i<t.length;i++)sw(n,t[i],e)}function lw(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Ni(~r);else{let a=r,d=e[++i],u=e[++i];E_(d,a);let p=t[a];Ve(Re.HostBindingsUpdateStart,p);try{u(2,p)}finally{Ve(Re.HostBindingsUpdateEnd,p)}}}}finally{Ni(-1)}}function $f(n,t){let e=Lm()?64:1088;for(n[Yn].changeDetectionScheduler?.notify(t);n;){n[fe]|=e;let i=Di(n);if(so(n)&&!i)return n;n=i}return null}function hy(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function cw(n,t,e,i=!0){let r=t[ge];if(dw(r,t,n,e),i){let d=ff(e,n),u=t[ze],p=u.parentNode(n[ki]);p!==null&&CM(r,n[mn],u,t,p,d)}let a=t[ga];a!==null&&a.firstChild!==null&&(a.firstChild=null)}function hf(n,t){if(n.length<=Kt)return;let e=Kt+t,i=n[e];if(i){let r=i[mr];r!==null&&r!==n&&Bf(r,i),t>0&&(n[e-1][pn]=i[pn]);let a=pa(n,Kt+t);bM(i[ge],i);let d=a[gr];d!==null&&d.detachView(a[ge]),i[vt]=null,i[pn]=null,i[fe]&=-129}return i}function dw(n,t,e,i){let r=Kt+i,a=e.length;i>0&&(e[r-1][pn]=t),i<a-Kt?(t[pn]=e[r],bm(e,Kt+i,t)):(e.push(t),t[pn]=null),t[vt]=e;let d=t[mr];d!==null&&e!==d&&_y(d,t);let u=t[gr];u!==null&&u.insertView(n),jl(t),t[fe]|=128}function _y(n,t){let e=n[ba],i=t[vt];if(Zn(i))n[fe]|=2;else{let r=i[vt][fn];t[fn]!==r&&(n[fe]|=2)}e===null?n[ba]=[t]:e.push(t)}var Ai=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[ge];return ka(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[It]}set context(t){this._lView[It]=t}get destroyed(){return _r(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[vt];if(On(t)){let e=t[ya],i=e?e.indexOf(this):-1;i>-1&&(hf(t,i),pa(e,i))}this._attachedToViewContainer=!1}ty(this._lView[ge],this._lView)}onDestroy(t){Nm(this._lView,t)}markForCheck(){$f(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[fe]&=-129}reattach(){jl(this._lView),this._lView[fe]|=128}detectChanges(){this._lView[fe]|=1024,py(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=so(this._lView),e=this._lView[mr];e!==null&&!t&&Bf(e,this._lView),ey(this._lView[ge],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=t;let e=so(this._lView),i=this._lView[mr];i!==null&&!e&&_y(i,this._lView),jl(this._lView)}};var Wa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=uw;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let a=YM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new Ai(a)}}return n})();function uw(){return pw(Pt(),Ie())}function pw(n,t){return n.type&4?new Wa(t,n,fc(n,t)):null}function Qf(n,t,e,i,r){let a=n.data[t];if(a===null)a=mw(n,t,e,i,r),S_()&&(a.flags|=32);else if(a.type&64){a.type=e,a.value=i,a.attrs=r;let d=b_();a.injectorIndex=d===null?-1:d.injectorIndex}return co(a,!0),a}function mw(n,t,e,i,r){let a=Am(),d=Fm(),u=d?a:a&&a.parent,p=n.data[t]=gw(n,u,e,t,i,r);return fw(n,p,a,d),p}function fw(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function gw(n,t,e,i,r,a){let d=t?t.injectorIndex:-1,u=0;return __()&&(u|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:u,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var hw=()=>null;function Z_(n,t){return hw(n,t)}var vy=class{},Ec=class{},_f=class{resolveComponentFactory(t){throw new N(917,!1)}},Ua=class{static NULL=new _f},_i=class{},Fn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>_w()}return n})();function _w(){let n=Ie(),t=Pt(),e=hn(t.index,n);return(Zn(e)?e:n)[ze]}var yy=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var Xl={},vf=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){let r=this.injector.get(t,Xl,i);return r!==Xl||e===Xl?r:this.parentInjector.get(t,e,i)}};function J_(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,a=0;if(t!==null)for(let d=0;d<t.length;d++){let u=t[d];if(typeof u=="number")a=u;else if(a==1)r=Pl(r,u);else if(a==2){let p=u,h=t[++d];i=Pl(i,p+": "+h+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function I(n,t=0){let e=Ie();if(e===null)return B(n,t);let i=Pt();return wv(i,e,_t(n),t)}function Kf(){let n="invalid";throw new Error(n)}function by(n,t,e,i,r){let a=i===null?null:{"":-1},d=r(n,e);if(d!==null){let u=d,p=null,h=null;for(let C of d)if(C.resolveHostDirectives!==null){[u,p,h]=C.resolveHostDirectives(d);break}bw(n,t,e,u,a,p,h)}a!==null&&i!==null&&vw(e,i,a)}function vw(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let a=e[t[r+1]];if(a==null)throw new N(-301,!1);i.push(t[r],a)}}function yw(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function bw(n,t,e,i,r,a,d){let u=i.length,p=null;for(let P=0;P<u;P++){let D=i[P];p===null&&Jn(D)&&(p=D,yw(n,e,P)),cf(rc(e,t),n,D.type)}ww(e,n.data.length,u),p?.viewProvidersResolver&&p.viewProvidersResolver(p);for(let P=0;P<u;P++){let D=i[P];D.providersResolver&&D.providersResolver(D)}let h=!1,C=!1,w=Kv(n,t,u,null);u>0&&(e.directiveToIndex=new Map);for(let P=0;P<u;P++){let D=i[P];if(e.mergedAttrs=Oa(e.mergedAttrs,D.hostAttrs),xw(n,e,t,w,D),Mw(w,D,r),d!==null&&d.has(D)){let[W,U]=d.get(D);e.directiveToIndex.set(D.type,[w,W+e.directiveStart,U+e.directiveStart])}else(a===null||!a.has(D))&&e.directiveToIndex.set(D.type,w);D.contentQueries!==null&&(e.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(e.flags|=64);let k=D.type.prototype;!h&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),h=!0),!C&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),C=!0),w++}Cw(n,e,a)}function Cw(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))X_(0,t,r,i),X_(1,t,r,i),tv(t,i,!1);else{let a=e.get(r);ev(0,t,a,i),ev(1,t,a,i),tv(t,i,!0)}}}function X_(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let a in r)if(r.hasOwnProperty(a)){let d;n===0?d=t.inputs??={}:d=t.outputs??={},d[a]??=[],d[a].push(i),Cy(t,a)}}function ev(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let a in r)if(r.hasOwnProperty(a)){let d=r[a],u;n===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[d]??=[],u[d].push(i,a),Cy(t,d)}}function Cy(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function tv(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:a}=n;if(i===null||!e&&r===null||e&&a===null||Nf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let d=null,u=0;for(;u<i.length;){let p=i[u];if(p===0){u+=4;continue}else if(p===5){u+=2;continue}else if(typeof p=="number")break;if(!e&&r.hasOwnProperty(p)){let h=r[p];for(let C of h)if(C===t){d??=[],d.push(p,i[u+1]);break}}else if(e&&a.hasOwnProperty(p)){let h=a[p];for(let C=0;C<h.length;C+=2)if(h[C]===t){d??=[],d.push(h[C+1],i[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(d)}function xw(n,t,e,i,r){n.data[i]=r;let a=r.factory||(r.factory=Ii(r.type,!0)),d=new yr(a,Jn(r),I,null);n.blueprint[i]=d,e[i]=d,Sw(n,t,i,Kv(n,e,r.hostVars,Wt),r)}function Sw(n,t,e,i,r){let a=r.hostBindings;if(a){let d=n.hostBindingOpCodes;d===null&&(d=n.hostBindingOpCodes=[]);let u=~t.index;Ew(d)!=u&&d.push(u),d.push(e,i,a)}}function Ew(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function Mw(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Jn(t)&&(e[""]=n)}}function ww(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Yf(n,t,e,i,r,a,d,u){let p=t[ge],h=p.consts,C=Ca(h,d),w=Qf(p,n,e,i,C);return a&&by(p,t,w,Ca(h,u),r),w.mergedAttrs=Oa(w.mergedAttrs,w.attrs),w.attrs!==null&&J_(w,w.attrs,!1),w.mergedAttrs!==null&&J_(w,w.mergedAttrs,!0),p.queries!==null&&p.queries.elementStart(p,w),w}function Zf(n,t){_v(n,t),Pm(t)&&n.queries.elementEnd(t)}function Jf(n){return Sy(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function xy(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function Sy(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Xf(n,t,e){return n[t]=e}function ni(n,t,e){if(e===Wt)return!1;let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Ra(n,t,e,i){let r=ni(n,t,e);return ni(n,t+1,i)||r}function Iw(n,t,e,i,r){let a=Ra(n,t,e,i);return ni(n,t+2,r)||a}function Dw(n,t,e,i,r,a){let d=Ra(n,t,e,i);return Ra(n,t+2,r,a)||d}function Xm(n,t,e){return function i(r){let a=Ri(n)?hn(n.index,t):t;$f(a,5);let d=t[It],u=nv(t,d,e,r),p=i.__ngNextListenerFn__;for(;p;)u=nv(t,d,p,r)&&u,p=p.__ngNextListenerFn__;return u}}function nv(n,t,e,i){let r=ve(null);try{return Ve(Re.OutputStart,t,e),e(i)!==!1}catch(a){return zM(n,a),!1}finally{Ve(Re.OutputEnd,t,e),ve(r)}}function Pw(n,t,e,i,r,a,d,u){let p=ao(n),h=!1,C=null;if(!i&&p&&(C=Ow(t,e,a,n.index)),C!==null){let w=C.__ngLastListenerFn__||C;w.__ngNextListenerFn__=d,C.__ngLastListenerFn__=d,h=!0}else{let w=kn(n,e),P=i?i(w):w;BE(e,P,a,u);let D=r.listen(P,a,u);if(!Tw(a)){let k=i?W=>i(gn(W[n.index])):n.index;Ey(k,t,e,a,u,D,!1)}}return h}function Tw(n){return n.startsWith("animation")||n.startsWith("transition")}function Ow(n,t,e,i){let r=n.cleanup;if(r!=null)for(let a=0;a<r.length-1;a+=2){let d=r[a];if(d===e&&r[a+1]===i){let u=t[ro],p=r[a+2];return u&&u.length>p?u[p]:null}typeof d=="string"&&(a+=2)}return null}function Ey(n,t,e,i,r,a,d){let u=t.firstCreatePass?m_(t):null,p=p_(e),h=p.length;p.push(r,a),u&&u.push(i,n,h,(h+1)*(d?-1:1))}function iv(n,t,e,i,r,a){let d=t[e],u=t[ge],h=u.data[e].outputs[i],w=d[h].subscribe(a);Ey(n.index,u,t,r,a,w,!0)}var yf=Symbol("BINDING");var cc=class extends Ua{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=gi(t);return new br(e,this.ngModule)}};function kw(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],a={propName:e,templateName:t,isSignal:(i&bc.SignalBased)!==0};return r&&(a.transform=r),a})}function Rw(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function Nw(n,t,e){let i=t instanceof et?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new vf(e,i):e}function Aw(n){let t=n.get(_i,null);if(t===null)throw new N(407,!1);let e=n.get(yy,null),i=n.get(Pi,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function Fw(n,t){let e=My(n);return Bv(t,e,e==="svg"?s_:e==="math"?l_:null)}function My(n){return(n.selectors[0][0]||"div").toLowerCase()}var br=class extends Ec{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=kw(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Rw(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=dM(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r,a,d){Ve(Re.DynamicComponentStart);let u=ve(null);try{let p=this.componentDef,h=Lw(i,p,d,a),C=Nw(p,r||this.ngModule,t),w=Aw(C),P=w.rendererFactory.createRenderer(null,p),D=i?NM(P,i,p.encapsulation,C):Fw(p,P),k=d?.some(rv)||a?.some(z=>typeof z!="function"&&z.bindings.some(rv)),W=Ff(null,h,null,512|Qv(p),null,null,w,P,C,null,Fv(D,C,!0));W[pt]=D,Gl(W);let U=null;try{let z=Yf(pt,W,2,"#host",()=>h.directiveRegistry,!0,0);Uv(P,D,z),mo(D,W),Sc(h,W,z),Tf(h,z,W),Zf(h,z),e!==void 0&&jw(z,this.ngContentSelectors,e),U=hn(z.index,W),W[It]=U[It],zf(h,W,null)}catch(z){throw U!==null&&uf(U),uf(W),z}finally{Ve(Re.DynamicComponentEnd),Hl()}return new dc(this.componentType,W,!!k)}finally{ve(u)}}};function Lw(n,t,e,i){let r=n?["ng-version","21.0.5"]:uM(t.selectors[0]),a=null,d=null,u=0;if(e)for(let C of e)u+=C[yf].requiredVars,C.create&&(C.targetIdx=0,(a??=[]).push(C)),C.update&&(C.targetIdx=0,(d??=[]).push(C));if(i)for(let C=0;C<i.length;C++){let w=i[C];if(typeof w!="function")for(let P of w.bindings){u+=P[yf].requiredVars;let D=C+1;P.create&&(P.targetIdx=D,(a??=[]).push(P)),P.update&&(P.targetIdx=D,(d??=[]).push(P))}}let p=[t];if(i)for(let C of i){let w=typeof C=="function"?C:C.type,P=_m(w);p.push(P)}return Af(0,null,Vw(a,d),1,u,p,null,null,null,[r],null)}function Vw(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let i of n)i.create();if(e&2&&t)for(let i of t)i.update()}}function rv(n){let t=n[yf].kind;return t==="input"||t==="twoWay"}var dc=class extends vy{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=Fl(e[ge],pt),this.location=fc(this._tNode,e),this.instance=hn(this._tNode.index,e)[It],this.hostView=this.changeDetectorRef=new Ai(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,a=qf(i,r[ge],r,t,e);this.previousInputValues.set(t,e);let d=hn(i.index,r);$f(d,1)}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function jw(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let a=e[r];i.push(a!=null&&a.length?Array.from(a):null)}}var Er=(()=>{class n{static __NG_ELEMENT_ID__=Bw}return n})();function Bw(){let n=Pt();return Uw(n,Ie())}var Ww=Er,wy=class extends Ww{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Mf(this._hostTNode,this._hostLView);if(bv(t)){let e=nc(t,this._hostLView),i=tc(t),r=e[ge].data[i+8];return new vr(r,e)}else return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=ov(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(t,e,i){let r,a;typeof i=="number"?r=i:i!=null&&(r=i.index,a=i.injector);let d=Z_(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(e||{},a,d);return this.insertImpl(u,r,Y_(this._hostTNode,d)),u}createComponent(t,e,i,r,a,d,u){let p=t&&!mE(t),h;if(p)h=e;else{let U=e||{};h=U.index,i=U.injector,r=U.projectableNodes,a=U.environmentInjector||U.ngModuleRef,d=U.directives,u=U.bindings}let C=p?t:new br(gi(t)),w=i||this.parentInjector;if(!a&&C.ngModule==null){let z=(p?w:this.parentInjector).get(et,null);z&&(a=z)}let P=gi(C.componentType??{}),D=Z_(this._lContainer,P?.id??null),k=D?.firstChild??null,W=C.create(w,r,k,a,d,u);return this.insertImpl(W.hostView,h,Y_(this._hostTNode,D)),W}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(c_(r)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let p=r[vt],h=new wy(p,p[mn],p[vt]);h.detach(h.indexOf(t))}}let a=this._adjustIndex(e),d=this._lContainer;return cw(d,r,a,i),t.attachToViewContainerRef(),bm(ef(d),a,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=ov(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=hf(this._lContainer,e);i&&(pa(ef(this._lContainer),e),ty(i[ge],i))}detach(t){let e=this._adjustIndex(t,-1),i=hf(this._lContainer,e);return i&&pa(ef(this._lContainer),e)!=null?new Ai(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function ov(n){return n[ya]}function ef(n){return n[ya]||(n[ya]=[])}function Uw(n,t){let e,i=t[n.index];return On(i)?e=i:(e=hy(i,t,null,n),t[n.index]=e,Lf(t,e)),Hw(e,t,n,i),new wy(e,n,t)}function Gw(n,t){let e=n[ze],i=e.createComment(""),r=kn(t,n),a=e.parentNode(r);return sc(e,a,i,e.nextSibling(r),!1),i}var Hw=$w,qw=()=>!1;function zw(n,t,e){return qw(n,t,e)}function $w(n,t,e,i){if(n[ki])return;let r;e.type&8?r=gn(i):r=Gw(t,e),n[ki]=r}var bf=new Map,Qw=new Set;async function Iy(n){let t=bf;bf=new Map;let e=new Map;function i(a){let d=e.get(a);if(d)return d;let u=n(a).then(p=>Kw(a,p));return e.set(a,u),u}let r=Array.from(t).map(async([a,d])=>{if(d.styleUrl&&d.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let u=[];d.templateUrl&&u.push(i(d.templateUrl).then(w=>{d.template=w}));let p=typeof d.styles=="string"?[d.styles]:d.styles??[];d.styles=p;let{styleUrl:h,styleUrls:C}=d;if(h&&(C=[h],d.styleUrl=void 0),C?.length){let w=Promise.all(C.map(P=>i(P))).then(P=>{p.push(...P),d.styleUrls=void 0});u.push(w)}await Promise.all(u),Qw.delete(a)});await Promise.all(r)}function Dy(){return bf.size===0}async function Kw(n,t){if(typeof t=="string")return t;if(t.status!==void 0&&t.status!==200)throw new N(918,!1);return t.text()}var Cr=class{},Mc=class{};var Na=class extends Cr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cc(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let a=hm(t);this._bootstrapComponents=zv(a.bootstrap),this._r3Injector=Gm(t,e,[{provide:Cr,useValue:this},{provide:Ua,useValue:this.componentFactoryResolver},...i],mi(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Aa=class extends Mc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Na(this.moduleType,t,[])}};function Py(n,t,e){return new Na(n,t,e,!1)}var uc=class extends Cr{injector;componentFactoryResolver=new cc(this);instance=null;constructor(t){super();let e=new cr([...t.providers,{provide:Cr,useValue:this},{provide:Ua,useValue:this.componentFactoryResolver}],t.parent||fa(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function _o(n,t,e=null){return new uc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Yw=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Sm(!1,e.type),r=i.length>0?_o([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(B(et))})}return n})();function F(n){return La(()=>{let t=Ty(n),e=me(R({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(Yw).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||An.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Sr("NgStandalone"),Oy(e);let i=n.dependencies;return e.directiveDefs=av(i,Zw),e.pipeDefs=av(i,Yh),e.id=eI(e),e})}function Zw(n){return gi(n)||_m(n)}function nt(n){return La(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Jw(n,t){if(n==null)return Ti;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],a,d,u,p;Array.isArray(r)?(u=r[0],a=r[1],d=r[2]??a,p=r[3]||null):(a=r,d=r,u=bc.None,p=null),e[a]=[i,u,p],t[a]=d}return e}function Xw(n){if(n==null)return Ti;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function je(n){return La(()=>{let t=Ty(n);return Oy(t),t})}function Ga(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ty(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Ti,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Jw(n.inputs,t),outputs:Xw(n.outputs),debugInfo:null}}function Oy(n){n.features?.forEach(t=>t(n))}function av(n,t){return n?()=>{let e=typeof n=="function"?n():n,i=[];for(let r of e){let a=t(r);a!==null&&i.push(a)}return i}:null}function eI(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let a of i.join("|"))t=Math.imul(31,t)+a.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function tI(n){return Object.getPrototypeOf(n.prototype).constructor}function Tt(n){let t=tI(n.type),e=!0,i=[n];for(;t;){let r;if(Jn(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new N(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let d=n;d.inputs=tf(n.inputs),d.declaredInputs=tf(n.declaredInputs),d.outputs=tf(n.outputs);let u=r.hostBindings;u&&aI(n,u);let p=r.viewQuery,h=r.contentQueries;if(p&&rI(n,p),h&&oI(n,h),nI(n,r),Kh(n.outputs,r.outputs),Jn(r)&&r.data.animation){let C=n.data;C.animation=(C.animation||[]).concat(r.data.animation)}}let a=r.features;if(a)for(let d=0;d<a.length;d++){let u=a[d];u&&u.ngInherit&&u(n),u===Tt&&(e=!1)}}t=Object.getPrototypeOf(t)}iI(i)}function nI(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function iI(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Oa(r.hostAttrs,e=Oa(e,r.hostAttrs))}}function tf(n){return n===Ti?{}:n===jt?[]:n}function rI(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function oI(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,a)=>{t(i,r,a),e(i,r,a)}:n.contentQueries=t}function aI(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function sI(n,t,e,i,r,a,d,u){if(e.firstCreatePass){n.mergedAttrs=Oa(n.mergedAttrs,n.attrs);let C=n.tView=Af(2,n,r,a,d,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),C.queries=e.queries.embeddedTView(n))}u&&(n.flags|=u),co(n,!1);let p=cI(e,t,n,i);zl()&&Wf(e,t,p,n),mo(p,t);let h=hy(p,t,p,n);t[i+pt]=h,Lf(t,h),zw(h,n,t)}function lI(n,t,e,i,r,a,d,u,p,h,C){let w=e+pt,P;return t.firstCreatePass?(P=Qf(t,w,4,d||null,u||null),Bl()&&by(t,n,P,Ca(t.consts,h),Hf),_v(t,P)):P=t.data[w],sI(P,n,t,e,i,r,a,p),ao(P)&&Sc(t,n,P),h!=null&&Gf(n,P,C),P}function x(n,t,e,i,r,a,d,u){let p=Ie(),h=Dt(),C=Ca(h.consts,a);return lI(p,h,n,t,e,i,r,C,void 0,d,u),x}var cI=dI;function dI(n,t,e,i){return Ma(!0),t[ze].createComment("")}var eg=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function ky(n){return typeof n=="function"&&n[Lt]!==void 0}function tg(n){return ky(n)&&typeof n.set=="function"}var wc=new J(""),Ic=new J(""),Ha=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,wm()&&(this._destroyRef=A(_n,{optional:!0})??void 0),ng||(Ny(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==a),e()},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||n)(B(ot),B(Ry),B(Ic))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Ry=(()=>{class n{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return ng?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Ny(n){ng=n}var ng;function Fi(n){return!!n&&typeof n.then=="function"}function ig(n){return!!n&&typeof n.subscribe=="function"}var rg=new J("");function Dc(n){return ur([{provide:rg,multi:!0,useValue:n}])}var og=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=A(rg,{optional:!0})??[];injector=A(wt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let a=ut(this.injector,r);if(Fi(a))e.push(a);else if(ig(a)){let d=new Promise((u,p)=>{a.subscribe({complete:u,error:p})});e.push(d)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pc=new J("");function Ay(){Ap(()=>{let n="";throw new N(600,n)})}function Fy(n){return n.isBoundToModule}var uI=10;function ag(n,t){return Array.isArray(t)?t.reduce(ag,n):R(R({},n),t)}var ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(vn);afterRenderManager=A(jf);zonelessEnabled=A(wa);rootEffectScheduler=A(Km);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new st;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(hi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ee(e=>!e))}constructor(){A(yi,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=A(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=wt.NULL){return this._injector.get(ot).run(()=>{Ve(Re.BootstrapComponentStart);let d=e instanceof Ec;if(!this._injector.get(og).done){let k="";throw new N(405,k)}let p;d?p=e:p=this._injector.get(Ua).resolveComponentFactory(e),this.componentTypes.push(p.componentType);let h=Fy(p)?void 0:this._injector.get(Cr),C=i||p.selector,w=p.create(r,[],C,h),P=w.location.nativeElement,D=w.injector.get(wc,null);return D?.registerApplication(P),w.onDestroy(()=>{this.detachView(w.hostView),Ta(this.components,w),D?.unregisterApplication(P)}),this._loadComponent(w),Ve(Re.BootstrapComponentEnd,w),w})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ve(Re.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ve(Re.ChangeDetectionEnd),new N(101,!1);let e=ve(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(e),this.afterTick.next(),Ve(Re.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_i,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<uI;){Ve(Re.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ve(Re.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!xa(r))continue;let a=i&&!this.zonelessEnabled?0:1;py(r,a),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>xa(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Ta(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(Pc,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ta(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new N(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ta(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Li(n,t,e,i){let r=Ie(),a=Sa();if(ni(r,a,t)){let d=Dt(),u=ql();GM(u,r,n,t,e,i)}return Li}var vB=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function m(n,t,e){let i=Ie(),r=Sa();if(ni(i,r,t)){let a=Dt(),d=ql();ry(d,i,n,t,i[ze],e)}return m}function Cf(n,t,e,i,r){qf(t,n,e,r?"class":"style",i)}function o(n,t,e,i){let r=Ie(),a=r[ge],d=n+pt,u=a.firstCreatePass?Yf(d,r,2,t,Hf,Bl(),e,i):a.data[d];if(oy(u,r,n,t,pI),ao(u)){let p=r[ge];Sc(p,r,u),Tf(p,u,r)}return i!=null&&Gf(r,u),o}function s(){let n=Dt(),t=Pt(),e=ay(t);return n.firstCreatePass&&Zf(n,e),v_(e)&&y_(),h_(),e.classesWithoutHost!=null&&yE(e)&&Cf(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&bE(e)&&Cf(n,e,Ie(),e.stylesWithoutHost,!1),s}function _(n,t,e,i){return o(n,t,e,i),s(),_}var pI=(n,t,e,i,r)=>(Ma(!0),Bv(t[ze],i,O_()));function qa(n,t,e){let i=Ie(),r=i[ge],a=n+pt,d=r.firstCreatePass?Yf(a,i,8,"ng-container",Hf,Bl(),t,e):r.data[a];if(oy(d,i,n,"ng-container",mI),ao(d)){let u=i[ge];Sc(u,i,d),Tf(u,d,i)}return e!=null&&Gf(i,d),qa}function za(){let n=Dt(),t=Pt(),e=ay(t);return n.firstCreatePass&&Zf(n,e),za}var mI=(n,t,e,i,r)=>(Ma(!0),YE(t[ze],""));function O(){return Ie()}var Da=void 0;function fI(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var gI=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Da,Da,Da],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fI],nf={};function Ut(n){let t=hI(n),e=sv(t);if(e)return e;let i=t.split("-")[0];if(e=sv(i),e)return e;if(i==="en")return gI;throw new N(701,!1)}function sv(n){return n in nf||(nf[n]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[n]),nf[n]}var Ze=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ze||{});function hI(n){return n.toLowerCase().replace(/_/g,"-")}var $a="en-US",_I="USD";var vI=$a;function Ly(n){typeof n=="string"&&(vI=n.toLowerCase().replace(/_/g,"-"))}function b(n,t,e){let i=Ie(),r=Dt(),a=Pt();return Vy(r,i,i[ze],a,n,t,e),b}function Vy(n,t,e,i,r,a,d){let u=!0,p=null;if((i.type&3||d)&&(p??=Xm(i,t,a),Pw(i,n,t,d,e,r,a,p)&&(u=!1)),u){let h=i.outputs?.[r],C=i.hostDirectiveOutputs?.[r];if(C&&C.length)for(let w=0;w<C.length;w+=2){let P=C[w],D=C[w+1];p??=Xm(i,t,a),iv(i,t,P,D,r,p)}if(h&&h.length)for(let w of h)p??=Xm(i,t,a),iv(i,t,w,r,r,p)}}function f(n=1){return T_(n)}function Kl(n,t){return n<<17|t<<2}function xr(n){return n>>17&32767}function yI(n){return(n&2)==2}function bI(n,t){return n&131071|t<<17}function xf(n){return n|2}function go(n){return(n&131068)>>2}function rf(n,t){return n&-131069|t<<2}function CI(n){return(n&1)===1}function Sf(n){return n|1}function xI(n,t,e,i,r,a){let d=a?t.classBindings:t.styleBindings,u=xr(d),p=go(d);n[i]=e;let h=!1,C;if(Array.isArray(e)){let w=e;C=w[1],(C===null||no(w,C)>0)&&(h=!0)}else C=e;if(r)if(p!==0){let P=xr(n[u+1]);n[i+1]=Kl(P,u),P!==0&&(n[P+1]=rf(n[P+1],i)),n[u+1]=bI(n[u+1],i)}else n[i+1]=Kl(u,0),u!==0&&(n[u+1]=rf(n[u+1],i)),u=i;else n[i+1]=Kl(p,0),u===0?u=i:n[p+1]=rf(n[p+1],i),p=i;h&&(n[i+1]=xf(n[i+1])),lv(n,C,i,!0),lv(n,C,i,!1),SI(t,C,n,i,a),d=Kl(u,p),a?t.classBindings=d:t.styleBindings=d}function SI(n,t,e,i,r){let a=r?n.residualClasses:n.residualStyles;a!=null&&typeof t=="string"&&no(a,t)>=0&&(e[i+1]=Sf(e[i+1]))}function lv(n,t,e,i){let r=n[e+1],a=t===null,d=i?xr(r):go(r),u=!1;for(;d!==0&&(u===!1||a);){let p=n[d],h=n[d+1];EI(p,t)&&(u=!0,n[d+1]=i?Sf(h):xf(h)),d=i?xr(h):go(h)}u&&(n[e+1]=i?xf(r):Sf(r))}function EI(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?no(n,t)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MI(n){return n.substring(Nn.key,Nn.keyEnd)}function wI(n){return II(n),jy(n,By(n,0,Nn.textEnd))}function jy(n,t){let e=Nn.textEnd;return e===t?-1:(t=Nn.keyEnd=DI(n,Nn.key=t,e),By(n,t,e))}function II(n){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=n.length}function By(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function DI(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function bt(n,t,e){return Wy(n,t,e,!1),bt}function ne(n,t){return Wy(n,t,null,!0),ne}function Cn(n){TI(FI,PI,n,!0)}function PI(n,t){for(let e=wI(t);e>=0;e=jy(t,e))Rl(n,MI(t),!0)}function Wy(n,t,e,i){let r=Ie(),a=Dt(),d=Ea(2);if(a.firstUpdatePass&&Gy(a,n,d,i),t!==Wt&&ni(r,d,t)){let u=a.data[Xn()];Hy(a,u,r,r[ze],n,r[d+1]=VI(t,e),i,d)}}function TI(n,t,e,i){let r=Dt(),a=Ea(2);r.firstUpdatePass&&Gy(r,null,a,i);let d=Ie();if(e!==Wt&&ni(d,a,e)){let u=r.data[Xn()];if(qy(u,i)&&!Uy(r,a)){let p=i?u.classesWithoutHost:u.stylesWithoutHost;p!==null&&(e=Pl(p,e||"")),Cf(r,u,d,e,i)}else LI(r,u,d,d[ze],d[a+1],d[a+1]=AI(n,t,e),i,a)}}function Uy(n,t){return t>=n.expandoStartIndex}function Gy(n,t,e,i){let r=n.data;if(r[e+1]===null){let a=r[Xn()],d=Uy(n,e);qy(a,i)&&t===null&&!d&&(t=!1),t=OI(r,a,t,i),xI(r,a,t,e,d,i)}}function OI(n,t,e,i){let r=w_(n),a=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=of(null,n,t,e,i),e=Fa(e,t.attrs,i),a=null);else{let d=t.directiveStylingLast;if(d===-1||n[d]!==r)if(e=of(r,n,t,e,i),a===null){let p=kI(n,t,i);p!==void 0&&Array.isArray(p)&&(p=of(null,n,t,p[1],i),p=Fa(p,t.attrs,i),RI(n,t,i,p))}else a=NI(n,t,i)}return a!==void 0&&(i?t.residualClasses=a:t.residualStyles=a),e}function kI(n,t,e){let i=e?t.classBindings:t.styleBindings;if(go(i)!==0)return n[xr(i)]}function RI(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[xr(r)]=i}function NI(n,t,e){let i,r=t.directiveEnd;for(let a=1+t.directiveStylingLast;a<r;a++){let d=n[a].hostAttrs;i=Fa(i,d,e)}return Fa(i,t.attrs,e)}function of(n,t,e,i,r){let a=null,d=e.directiveEnd,u=e.directiveStylingLast;for(u===-1?u=e.directiveStart:u++;u<d&&(a=t[u],i=Fa(i,a.hostAttrs,r),a!==n);)u++;return n!==null&&(e.directiveStylingLast=u),i}function Fa(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let a=0;a<t.length;a++){let d=t[a];typeof d=="number"?r=d:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Rl(n,d,e?!0:t[++a]))}return n===void 0?null:n}function AI(n,t,e){if(e==null||e==="")return jt;let i=[],r=ho(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)n(i,r[a],!0);else if(typeof r=="object")for(let a in r)r.hasOwnProperty(a)&&n(i,a,r[a]);else typeof r=="string"&&t(i,r);return i}function FI(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Rl(n,i,e)}function LI(n,t,e,i,r,a,d,u){r===Wt&&(r=jt);let p=0,h=0,C=0<r.length?r[0]:null,w=0<a.length?a[0]:null;for(;C!==null||w!==null;){let P=p<r.length?r[p+1]:void 0,D=h<a.length?a[h+1]:void 0,k=null,W;C===w?(p+=2,h+=2,P!==D&&(k=w,W=D)):w===null||C!==null&&C<w?(p+=2,k=C):(h+=2,k=w,W=D),k!==null&&Hy(n,t,e,i,k,W,d,u),C=p<r.length?r[p]:null,w=h<a.length?a[h]:null}}function Hy(n,t,e,i,r,a,d,u){if(!(t.type&3))return;let p=n.data,h=p[u+1],C=CI(h)?cv(p,t,e,r,go(h),d):void 0;if(!pc(C)){pc(a)||yI(h)&&(a=cv(p,null,e,r,u,d));let w=Tm(Xn(),e);RM(i,d,w,r,a)}}function cv(n,t,e,i,r,a){let d=t===null,u;for(;r>0;){let p=n[r],h=Array.isArray(p),C=h?p[1]:p,w=C===null,P=e[r+1];P===Wt&&(P=w?jt:void 0);let D=w?Nl(P,i):C===i?P:void 0;if(h&&!pc(D)&&(D=Nl(p,i)),pc(D)&&(u=D,d))return u;let k=n[r+1];r=d?xr(k):go(k)}if(t!==null){let p=a?t.residualClasses:t.residualStyles;p!=null&&(u=Nl(p,i))}return u}function pc(n){return n!==void 0}function VI(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=mi(ho(n)))),n}function qy(n,t){return(n.flags&(t?8:16))!==0}function l(n,t=""){let e=Ie(),i=Dt(),r=n+pt,a=i.firstCreatePass?Qf(i,r,1,t,null):i.data[r],d=jI(i,e,a,t,n);e[r]=d,zl()&&Wf(i,e,d,a),co(a,!1)}var jI=(n,t,e,i,r)=>(Ma(!0),QE(t[ze],i));function BI(n,t,e,i=""){return ni(n,Sa(),e)?t+Kn(e)+i:Wt}function WI(n,t,e,i,r,a=""){let d=jm(),u=Ra(n,d,e,r);return Ea(2),u?t+Kn(e)+i+Kn(r)+a:Wt}function UI(n,t,e,i,r,a,d,u=""){let p=jm(),h=Iw(n,p,e,r,d);return Ea(3),h?t+Kn(e)+i+Kn(r)+a+Kn(d)+u:Wt}function g(n){return T("",n),g}function T(n,t,e){let i=Ie(),r=BI(i,n,t,e);return r!==Wt&&sg(i,Xn(),r),T}function de(n,t,e,i,r){let a=Ie(),d=WI(a,n,t,e,i,r);return d!==Wt&&sg(a,Xn(),d),de}function vo(n,t,e,i,r,a,d){let u=Ie(),p=UI(u,n,t,e,i,r,a,d);return p!==Wt&&sg(u,Xn(),p),vo}function sg(n,t,e){let i=Tm(t,n);KE(n[ze],i,e)}function S(n,t,e){tg(t)&&(t=t());let i=Ie(),r=Sa();if(ni(i,r,t)){let a=Dt(),d=ql();ry(d,i,n,t,i[ze],e)}return S}function M(n,t){let e=tg(n);return e&&n.set(t),e}function E(n,t){let e=Ie(),i=Dt(),r=Pt();return Vy(i,e,e[ze],r,n,t),E}function dv(n,t,e){let i=Dt();i.firstCreatePass&&zy(t,i.data,i.blueprint,Jn(n),e)}function zy(n,t,e,i,r){if(n=_t(n),Array.isArray(n))for(let a=0;a<n.length;a++)zy(n[a],t,e,i,r);else{let a=Dt(),d=Ie(),u=Pt(),p=lr(n)?n:_t(n.provide),h=Mm(n),C=u.providerIndexes&1048575,w=u.directiveStart,P=u.providerIndexes>>20;if(lr(n)||!n.multi){let D=new yr(h,r,I,null),k=sf(p,t,r?C:C+P,w);k===-1?(cf(rc(u,d),a,p),af(a,n,t.length),t.push(p),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(D),d.push(D)):(e[k]=D,d[k]=D)}else{let D=sf(p,t,C+P,w),k=sf(p,t,C,C+P),W=D>=0&&e[D],U=k>=0&&e[k];if(r&&!U||!r&&!W){cf(rc(u,d),a,p);let z=qI(r?HI:GI,e.length,r,i,h,n);!r&&U&&(e[k].providerFactory=z),af(a,n,t.length,0),t.push(p),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(z),d.push(z)}else{let z=$y(e[r?k:D],h,!r&&i);af(a,n,D>-1?D:k,z)}!r&&i&&U&&e[k].componentProviders++}}}function af(n,t,e,i){let r=lr(t),a=o_(t);if(r||a){let p=(a?_t(t.useClass):t).prototype.ngOnDestroy;if(p){let h=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let C=h.indexOf(e);C===-1?h.push(e,[i,p]):h[C+1].push(i,p)}else h.push(e,p)}}}function $y(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function sf(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function GI(n,t,e,i,r){return Ef(this.multi,[])}function HI(n,t,e,i,r){let a=this.multi,d;if(this.providerFactory){let u=this.providerFactory.componentProviders,p=oc(i,i[ge],this.providerFactory.index,r);d=p.slice(0,u),Ef(a,d);for(let h=u;h<p.length;h++)d.push(p[h])}else d=[],Ef(a,d);return d}function Ef(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function qI(n,t,e,i,r,a){let d=new yr(n,e,I,null);return d.multi=[],d.index=t,d.componentProviders=0,$y(d,r,i&&!e),d}function xn(n,t){return e=>{e.providersResolver=(i,r)=>dv(i,r?r(n):n,!1),t&&(e.viewProvidersResolver=(i,r)=>dv(i,r?r(t):t,!0))}}function lg(n,t){let e=n[t];return e===Wt?void 0:e}function zI(n,t,e,i,r,a){let d=t+e;return ni(n,d,r)?Xf(n,d+1,a?i.call(a,r):i(r)):lg(n,d+1)}function $I(n,t,e,i,r,a,d){let u=t+e;return Ra(n,u,r,a)?Xf(n,u+2,d?i.call(d,r,a):i(r,a)):lg(n,u+2)}function QI(n,t,e,i,r,a,d,u,p){let h=t+e;return Dw(n,h,r,a,d,u)?Xf(n,h+4,p?i.call(p,r,a,d,u):i(r,a,d,u)):lg(n,h+4)}function X(n,t){let e=Dt(),i,r=n+pt;e.firstCreatePass?(i=KI(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let a=i.factory||(i.factory=Ii(i.type,!0)),d,u=Vt(I);try{let p=ic(!1),h=a();return ic(p),Om(e,Ie(),r,h),h}finally{Vt(u)}}function KI(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Tc(n,t,e){let i=n+pt,r=Ie(),a=Ll(r,i);return dg(r,i)?zI(r,Wl(),t,a.transform,e,a):a.transform(e)}function ee(n,t,e,i){let r=n+pt,a=Ie(),d=Ll(a,r);return dg(a,r)?$I(a,Wl(),t,d.transform,e,i,d):d.transform(e,i)}function cg(n,t,e,i,r,a){let d=n+pt,u=Ie(),p=Ll(u,d);return dg(u,d)?QI(u,Wl(),t,p.transform,e,i,r,a,p):p.transform(e,i,r,a)}function dg(n,t){return n[ge].data[t].pure}var Yl=null;function Qy(n){Yl!==null&&(n.defaultEncapsulation!==Yl.defaultEncapsulation||n.preserveWhitespaces!==Yl.preserveWhitespaces)||(Yl=n)}var mc=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},ug=(()=>{class n{compileModuleSync(e){return new Aa(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=hm(e),a=zv(r.declarations).reduce((d,u)=>{let p=gi(u);return p&&d.push(new br(p)),d},[]);return new mc(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ky=new J("");var Yy=(()=>{class n{applicationErrorHandler=A(vn);appRef=A(ii);taskService=A(hi);ngZone=A(ot);zonelessEnabled=A(wa);tracing=A(yi,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new gt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ca):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(Qm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?qm:Hm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ca+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zy(){return[{provide:Pi,useExisting:Yy},{provide:ot,useClass:da},{provide:wa,useValue:!0}]}function YI(){return typeof $localize<"u"&&$localize.locale||$a}var Mr=new J("",{factory:()=>A(Mr,{optional:!0,skipSelf:!0})||YI()}),pg=new J("",{factory:()=>_I});function yo(n,t){return Zs(n,t?.equal)}var ob=Symbol("InputSignalNode#UNSET"),s2=me(R({},Js),{transformFn:void 0,applyValueToInputSignal(n,t){ea(n,t)}});function ab(n,t){let e=Object.create(s2);e.value=n,e.transformFn=t?.transform;function i(){if(Zo(e),e.value===ob){let r=null;throw new N(-950,r)}return e.value}return i[Lt]=e,i}var Oc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Va(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Jy(n,t){return ab(n,t)}function l2(n){return ab(ob,n)}var sb=(Jy.required=l2,Jy);function c2(n,t,e){let i=new Aa(e);return Promise.resolve(i)}function Xy(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var kc=new J(""),d2=new J("");function Qa(n){return!n.moduleRef}function u2(n){let t=Qa(n)?n.r3Injector:n.moduleRef.injector,e=t.get(ot);return e.run(()=>{Qa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(vn),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),Qa(n)){let a=()=>t.destroy(),d=n.platformInjector.get(kc);d.add(a),t.onDestroy(()=>{r.unsubscribe(),d.delete(a)})}else{let a=()=>n.moduleRef.destroy(),d=n.platformInjector.get(kc);d.add(a),n.moduleRef.onDestroy(()=>{Ta(n.allPlatformModules,n.moduleRef),r.unsubscribe(),d.delete(a)})}return m2(i,e,()=>{let a=t.get(hi),d=a.add(),u=t.get(og);return u.runInitializers(),u.donePromise.then(()=>{let p=t.get(Mr,$a);if(Ly(p||$a),!t.get(d2,!0))return Qa(n)?t.get(ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Qa(n)){let C=t.get(ii);return n.rootComponent!==void 0&&C.bootstrap(n.rootComponent),C}else return lb?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void a.remove(d))})})}var lb;function eb(){lb=p2}function p2(n,t){let e=n.injector.get(ii);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new N(-403,!1);t.push(n)}function m2(n,t,e){try{let i=e();return Fi(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n(i)),i}}var cb=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=[Zy(),...i?.applicationProviders??[],A_],a=Py(e.moduleType,this.injector,r);return eb(),u2({moduleRef:a,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=ag({},i);return eb(),c2(this.injector,r,e).then(a=>this.bootstrapModuleFactory(a,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new N(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(kc,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||n)(B(wt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),_g=null;function f2(n){if(yg())throw new N(400,!1);Ay(),_g=n;let t=n.get(cb);return _2(n),t}function vg(n,t,e=[]){let i=`Platform: ${t}`,r=new J(i);return(a=[])=>{let d=yg();if(!d){let u=[...e,...a,{provide:r,useValue:!0}];d=n?.(u)??f2(g2(u,i))}return h2(r)}}function g2(n=[],t){return wt.create({name:t,providers:[{provide:ma,useValue:"platform"},{provide:kc,useValue:new Set([()=>_g=null])},...n]})}function h2(n){let t=yg();if(!t)throw new N(-401,!1);return t}function yg(){return _g?.get(cb)??null}function _2(n){let t=n.get(hc,null);ut(n,()=>{t?.forEach(e=>e())})}var Vi=(()=>{class n{static __NG_ELEMENT_ID__=v2}return n})();function v2(n){return y2(Pt(),Ie(),(n&16)===16)}function y2(n,t,e){if(Ri(n)&&!e){let i=hn(n.index,t);return new Ai(i,i)}else if(n.type&175){let i=t[fn];return new Ai(i,t)}return null}var mg=class{constructor(){}supports(t){return Jf(t)}create(t){return new fg(t)}},b2=(n,t)=>t,fg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||b2}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){let d=!i||e&&e.currentIndex<tb(i,r,a)?e:i,u=tb(d,r,a),p=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,d.previousIndex==null)r++;else{a||(a=[]);let h=u-r,C=p-r;if(h!=C){for(let P=0;P<h;P++){let D=P<a.length?a[P]:a[P]=0,k=D+P;C<=k&&k<h&&(a[P]=D+1)}let w=d.previousIndex;a[w]=C-h}}u!==p&&t(d,u,p)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Jf(t))throw new N(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,a,d;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)a=t[u],d=this._trackByFn(u,a),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,a,d,u),i=!0):(i&&(e=this._verifyReinsertion(e,a,d,u)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next}else r=0,xy(t,u=>{d=this._trackByFn(r,u),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,u,d,r),i=!0):(i&&(e=this._verifyReinsertion(e,u,d,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let a;return t===null?a=this._itTail:(a=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,a,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,a,r)):t=this._addAfter(new gg(e,i),a,r)),t}_verifyReinsertion(t,e,i,r){let a=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return a!==null?t=this._reinsertAfter(a,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,a=t._nextRemoved;return r===null?this._removalsHead=a:r._nextRemoved=a,a===null?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Rc),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},gg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},hg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Rc=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new hg,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tb(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function nb(){return new bg([new mg])}var bg=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:nb});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let i=A(n,{optional:!0,skipSelf:!0});return n.create(e,i||nb())}}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new N(901,!1)}}return n})();var db=vg(null,"core",[]),ub=(()=>{class n{constructor(e){}static \u0275fac=function(i){return new(i||n)(B(ii))};static \u0275mod=nt({type:n});static \u0275inj=tt({})}return n})();function ji(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function pb(n){let t=gi(n);if(!t)return null;let e=new br(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var mb=null;function an(){return mb}function Cg(n){mb??=n}var Ka=class{},Bi=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A(fb),providedIn:"platform"})}return n})(),xg=new J(""),fb=(()=>{class n extends Bi{_location;_history;_doc=A(He);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return an().getBaseHref(this._doc)}onPopState(e){let i=an().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=an().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Nc(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function gb(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Ln(n){return n&&n[0]!=="?"?`?${n}`:n}var Vn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A(Fc),providedIn:"root"})}return n})(),Ac=new J(""),Fc=(()=>{class n extends Vn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(He).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Nc(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Ln(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){let d=this.prepareExternalUrl(r+Ln(a));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,a){let d=this.prepareExternalUrl(r+Ln(a));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(B(Bi),B(Ac,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wi=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=S2(gb(hb(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ln(i))}normalize(e){return n.stripTrailingSlash(x2(this._basePath,hb(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ln(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ln(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Ln;static joinWithSlash=Nc;static stripTrailingSlash=gb;static \u0275fac=function(i){return new(i||n)(B(Vn))};static \u0275prov=L({token:n,factory:()=>C2(),providedIn:"root"})}return n})();function C2(){return new Wi(B(Vn))}function x2(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function hb(n){return n.replace(/\/index.html$/,"")}function S2(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Pg=(()=>{class n extends Vn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=Nc(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let d=this.prepareExternalUrl(r+Ln(a))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,a){let d=this.prepareExternalUrl(r+Ln(a))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(B(Bi),B(Ac,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Sb={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},zc=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(zc||{});var Ot=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Ot||{}),Be=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Be||{}),Zt=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Zt||{}),Ct={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Eb(n){return Ut(n)[Ze.LocaleId]}function Mb(n,t,e){let i=Ut(n),r=[i[Ze.DayPeriodsFormat],i[Ze.DayPeriodsStandalone]],a=Sn(r,t);return Sn(a,e)}function wb(n,t,e){let i=Ut(n),r=[i[Ze.DaysFormat],i[Ze.DaysStandalone]],a=Sn(r,t);return Sn(a,e)}function Ib(n,t,e){let i=Ut(n),r=[i[Ze.MonthsFormat],i[Ze.MonthsStandalone]],a=Sn(r,t);return Sn(a,e)}function Db(n,t){let i=Ut(n)[Ze.Eras];return Sn(i,t)}function Ya(n,t){let e=Ut(n);return Sn(e[Ze.DateFormat],t)}function Za(n,t){let e=Ut(n);return Sn(e[Ze.TimeFormat],t)}function Ja(n,t){let i=Ut(n)[Ze.DateTimeFormat];return Sn(i,t)}function Bn(n,t){let e=Ut(n),i=e[Ze.NumberSymbols][t];if(typeof i>"u"){if(t===Ct.CurrencyDecimal)return e[Ze.NumberSymbols][Ct.Decimal];if(t===Ct.CurrencyGroup)return e[Ze.NumberSymbols][Ct.Group]}return i}function Tg(n,t){return Ut(n)[Ze.NumberFormats][t]}function E2(n){return Ut(n)[Ze.Currencies]}function Pb(n){if(!n[Ze.ExtraData])throw new N(2303,!1)}function Tb(n){let t=Ut(n);return Pb(t),(t[Ze.ExtraData][2]||[]).map(i=>typeof i=="string"?Sg(i):[Sg(i[0]),Sg(i[1])])}function Ob(n,t,e){let i=Ut(n);Pb(i);let r=[i[Ze.ExtraData][0],i[Ze.ExtraData][1]],a=Sn(r,t)||[];return Sn(a,e)||[]}function Sn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new N(2304,!1)}function Sg(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}function kb(n,t,e="en"){let i=E2(e)[n]||Sb[n]||[],r=i[1];return t==="narrow"&&typeof r=="string"?r:i[0]||n}var M2=2;function Rb(n){let t,e=Sb[n];return e&&(t=e[2]),typeof t=="number"?t:M2}var w2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lc={},I2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Nb(n,t,e,i){let r=F2(n);t=bi(e,t)||t;let d=[],u;for(;t;)if(u=I2.exec(t),u){d=d.concat(u.slice(1));let C=d.pop();if(!C)break;t=C}else{d.push(t);break}let p=r.getTimezoneOffset();i&&(p=Fb(i,p),r=A2(r,i));let h="";return d.forEach(C=>{let w=R2(C);h+=w?w(r,e,p):C==="''"?"'":C.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function Uc(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function bi(n,t){let e=Eb(n);if(Lc[e]??={},Lc[e][t])return Lc[e][t];let i="";switch(t){case"shortDate":i=Ya(n,Zt.Short);break;case"mediumDate":i=Ya(n,Zt.Medium);break;case"longDate":i=Ya(n,Zt.Long);break;case"fullDate":i=Ya(n,Zt.Full);break;case"shortTime":i=Za(n,Zt.Short);break;case"mediumTime":i=Za(n,Zt.Medium);break;case"longTime":i=Za(n,Zt.Long);break;case"fullTime":i=Za(n,Zt.Full);break;case"short":let r=bi(n,"shortTime"),a=bi(n,"shortDate");i=Vc(Ja(n,Zt.Short),[r,a]);break;case"medium":let d=bi(n,"mediumTime"),u=bi(n,"mediumDate");i=Vc(Ja(n,Zt.Medium),[d,u]);break;case"long":let p=bi(n,"longTime"),h=bi(n,"longDate");i=Vc(Ja(n,Zt.Long),[p,h]);break;case"full":let C=bi(n,"fullTime"),w=bi(n,"fullDate");i=Vc(Ja(n,Zt.Full),[C,w]);break}return i&&(Lc[e][t]=i),i}function Vc(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function jn(n,t,e="-",i,r){let a="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,a=e));let d=String(n);for(;d.length<t;)d="0"+d;return i&&(d=d.slice(d.length-t)),a+d}function D2(n,t){return jn(n,3).substring(0,t)}function at(n,t,e=0,i=!1,r=!1){return function(a,d){let u=P2(n,a);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return D2(u,t);let p=Bn(d,Ct.MinusSign);return jn(u,t,p,i,r)}}function P2(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new N(2301,!1)}}function Ue(n,t,e=Ot.Format,i=!1){return function(r,a){return T2(r,a,n,t,e,i)}}function T2(n,t,e,i,r,a){switch(e){case 2:return Ib(t,r,i)[n.getMonth()];case 1:return wb(t,r,i)[n.getDay()];case 0:let d=n.getHours(),u=n.getMinutes();if(a){let h=Tb(t),C=Ob(t,r,i),w=h.findIndex(P=>{if(Array.isArray(P)){let[D,k]=P,W=d>=D.hours&&u>=D.minutes,U=d<k.hours||d===k.hours&&u<k.minutes;if(D.hours<k.hours){if(W&&U)return!0}else if(W||U)return!0}else if(P.hours===d&&P.minutes===u)return!0;return!1});if(w!==-1)return C[w]}return Mb(t,r,i)[d<12?0:1];case 3:return Db(t,i)[n.getFullYear()<=0?0:1];default:let p=e;throw new N(2302,!1)}}function jc(n){return function(t,e,i){let r=-1*i,a=Bn(e,Ct.MinusSign),d=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+jn(d,2,a)+jn(Math.abs(r%60),2,a);case 1:return"GMT"+(r>=0?"+":"")+jn(d,1,a);case 2:return"GMT"+(r>=0?"+":"")+jn(d,2,a)+":"+jn(Math.abs(r%60),2,a);case 3:return i===0?"Z":(r>=0?"+":"")+jn(d,2,a)+":"+jn(Math.abs(r%60),2,a);default:throw new N(2310,!1)}}}var O2=0,Wc=4;function k2(n){let t=Uc(n,O2,1).getDay();return Uc(n,0,1+(t<=Wc?Wc:Wc+7)-t)}function Ab(n){let t=n.getDay(),e=t===0?-3:Wc-t;return Uc(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Eg(n,t=!1){return function(e,i){let r;if(t){let a=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();r=1+Math.floor((d+a)/7)}else{let a=Ab(e),d=k2(a.getFullYear()),u=a.getTime()-d.getTime();r=1+Math.round(u/6048e5)}return jn(r,n,Bn(i,Ct.MinusSign))}}function Bc(n,t=!1){return function(e,i){let a=Ab(e).getFullYear();return jn(a,n,Bn(i,Ct.MinusSign),t)}}var Mg={};function R2(n){if(Mg[n])return Mg[n];let t;switch(n){case"G":case"GG":case"GGG":t=Ue(3,Be.Abbreviated);break;case"GGGG":t=Ue(3,Be.Wide);break;case"GGGGG":t=Ue(3,Be.Narrow);break;case"y":t=at(0,1,0,!1,!0);break;case"yy":t=at(0,2,0,!0,!0);break;case"yyy":t=at(0,3,0,!1,!0);break;case"yyyy":t=at(0,4,0,!1,!0);break;case"Y":t=Bc(1);break;case"YY":t=Bc(2,!0);break;case"YYY":t=Bc(3);break;case"YYYY":t=Bc(4);break;case"M":case"L":t=at(1,1,1);break;case"MM":case"LL":t=at(1,2,1);break;case"MMM":t=Ue(2,Be.Abbreviated);break;case"MMMM":t=Ue(2,Be.Wide);break;case"MMMMM":t=Ue(2,Be.Narrow);break;case"LLL":t=Ue(2,Be.Abbreviated,Ot.Standalone);break;case"LLLL":t=Ue(2,Be.Wide,Ot.Standalone);break;case"LLLLL":t=Ue(2,Be.Narrow,Ot.Standalone);break;case"w":t=Eg(1);break;case"ww":t=Eg(2);break;case"W":t=Eg(1,!0);break;case"d":t=at(2,1);break;case"dd":t=at(2,2);break;case"c":case"cc":t=at(7,1);break;case"ccc":t=Ue(1,Be.Abbreviated,Ot.Standalone);break;case"cccc":t=Ue(1,Be.Wide,Ot.Standalone);break;case"ccccc":t=Ue(1,Be.Narrow,Ot.Standalone);break;case"cccccc":t=Ue(1,Be.Short,Ot.Standalone);break;case"E":case"EE":case"EEE":t=Ue(1,Be.Abbreviated);break;case"EEEE":t=Ue(1,Be.Wide);break;case"EEEEE":t=Ue(1,Be.Narrow);break;case"EEEEEE":t=Ue(1,Be.Short);break;case"a":case"aa":case"aaa":t=Ue(0,Be.Abbreviated);break;case"aaaa":t=Ue(0,Be.Wide);break;case"aaaaa":t=Ue(0,Be.Narrow);break;case"b":case"bb":case"bbb":t=Ue(0,Be.Abbreviated,Ot.Standalone,!0);break;case"bbbb":t=Ue(0,Be.Wide,Ot.Standalone,!0);break;case"bbbbb":t=Ue(0,Be.Narrow,Ot.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ue(0,Be.Abbreviated,Ot.Format,!0);break;case"BBBB":t=Ue(0,Be.Wide,Ot.Format,!0);break;case"BBBBB":t=Ue(0,Be.Narrow,Ot.Format,!0);break;case"h":t=at(3,1,-12);break;case"hh":t=at(3,2,-12);break;case"H":t=at(3,1);break;case"HH":t=at(3,2);break;case"m":t=at(4,1);break;case"mm":t=at(4,2);break;case"s":t=at(5,1);break;case"ss":t=at(5,2);break;case"S":t=at(6,1);break;case"SS":t=at(6,2);break;case"SSS":t=at(6,3);break;case"Z":case"ZZ":case"ZZZ":t=jc(0);break;case"ZZZZZ":t=jc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=jc(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=jc(2);break;default:return null}return Mg[n]=t,t}function Fb(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function N2(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function A2(n,t,e){let r=n.getTimezoneOffset(),a=Fb(t,r);return N2(n,-1*(a-r))}function F2(n){if(_b(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,a=1,d=1]=n.split("-").map(u=>+u);return Uc(r,a-1,d)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(w2))return L2(i)}let t=new Date(n);if(!_b(t))throw new N(2311,!1);return t}function L2(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,a=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let d=Number(n[4]||0)-e,u=Number(n[5]||0)-i,p=Number(n[6]||0),h=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return a.call(t,d,u,p,h),t}function _b(n){return n instanceof Date&&!isNaN(n.valueOf())}var V2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,vb=22,Gc=".",Xa="0",j2=";",B2=",",wg="#",yb="\xA4";function Lb(n,t,e,i,r,a,d=!1){let u="",p=!1;if(!isFinite(n))u=Bn(e,Ct.Infinity);else{let h=U2(n);d&&(h=W2(h));let C=t.minInt,w=t.minFrac,P=t.maxFrac;if(a){let be=a.match(V2);if(be===null)throw new N(2306,!1);let We=be[1],ye=be[3],Ft=be[5];We!=null&&(C=Ig(We)),ye!=null&&(w=Ig(ye)),Ft!=null?P=Ig(Ft):ye!=null&&w>P&&(P=w)}G2(h,w,P);let D=h.digits,k=h.integerLen,W=h.exponent,U=[];for(p=D.every(be=>!be);k<C;k++)D.unshift(0);for(;k<0;k++)D.unshift(0);k>0?U=D.splice(k,D.length):(U=D,D=[0]);let z=[];for(D.length>=t.lgSize&&z.unshift(D.splice(-t.lgSize,D.length).join(""));D.length>t.gSize;)z.unshift(D.splice(-t.gSize,D.length).join(""));D.length&&z.unshift(D.join("")),u=z.join(Bn(e,i)),U.length&&(u+=Bn(e,r)+U.join("")),W&&(u+=Bn(e,Ct.Exponential)+"+"+W)}return n<0&&!p?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function Vb(n,t,e,i,r){let a=Tg(t,zc.Currency),d=Bb(a,Bn(t,Ct.MinusSign));return d.minFrac=Rb(i),d.maxFrac=d.minFrac,Lb(n,d,t,Ct.CurrencyGroup,Ct.CurrencyDecimal,r).replace(yb,e).replace(yb,"").trim()}function jb(n,t,e){let i=Tg(t,zc.Decimal),r=Bb(i,Bn(t,Ct.MinusSign));return Lb(n,r,t,Ct.Group,Ct.Decimal,e)}function Bb(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(j2),r=i[0],a=i[1],d=r.indexOf(Gc)!==-1?r.split(Gc):[r.substring(0,r.lastIndexOf(Xa)+1),r.substring(r.lastIndexOf(Xa)+1)],u=d[0],p=d[1]||"";e.posPre=u.substring(0,u.indexOf(wg));for(let C=0;C<p.length;C++){let w=p.charAt(C);w===Xa?e.minFrac=e.maxFrac=C+1:w===wg?e.maxFrac=C+1:e.posSuf+=w}let h=u.split(B2);if(e.gSize=h[1]?h[1].length:0,e.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,a){let C=r.length-e.posPre.length-e.posSuf.length,w=a.indexOf(wg);e.negPre=a.substring(0,w).replace(/'/g,""),e.negSuf=a.slice(w+C).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function W2(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function U2(n){let t=Math.abs(n)+"",e=0,i,r,a,d,u;for((r=t.indexOf(Gc))>-1&&(t=t.replace(Gc,"")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charAt(a)===Xa;a++);if(a===(u=t.length))i=[0],r=1;else{for(u--;t.charAt(u)===Xa;)u--;for(r-=a,i=[],d=0;a<=u;a++,d++)i[d]=Number(t.charAt(a))}return r>vb&&(i=i.splice(0,vb-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function G2(n,t,e){if(t>e)throw new N(2307,!1);let i=n.digits,r=i.length-n.integerLen,a=Math.min(Math.max(t,r),e),d=a+n.integerLen,u=i[d];if(d>0){i.splice(Math.max(n.integerLen,d));for(let w=d;w<i.length;w++)i[w]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,d=a+1),i[0]=0;for(let w=1;w<d;w++)i[w]=0}if(u>=5)if(d-1<0){for(let w=0;w>d;w--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[d-1]++;for(;r<Math.max(0,a);r++)i.push(0);let p=a!==0,h=t+n.integerLen,C=i.reduceRight(function(w,P,D,k){return P=P+w,k[D]=P<10?P:P-10,p&&(k[D]===0&&D>=h?k.pop():p=!1),P>=10?1:0},0);C&&(i.unshift(C),n.integerLen++)}function Ig(n){let t=parseInt(n);if(isNaN(t))throw new N(2305,!1);return t}var Dg=/\s+/,bb=[],se=(()=>{class n{_ngEl;_renderer;initialClasses=bb;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(Dg):bb}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Dg):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Dg).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(I(bn),I(Fn))};static \u0275dir=je({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Hc=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},V=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,a,d)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Hc(r.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(a===null?void 0:a);else if(a!==null){let u=i.get(a);i.move(u,d),Cb(u,r)}});for(let r=0,a=i.length;r<a;r++){let u=i.get(r).context;u.index=r,u.count=a,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let a=i.get(r.currentIndex);Cb(a,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(I(Er),I(Wa),I(bg))};static \u0275dir=je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Cb(n,t){n.context.$implicit=t.item}var j=(()=>{class n{_viewContainer;_context=new qc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){xb(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){xb(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(I(Er),I(Wa))};static \u0275dir=je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),qc=class{$implicit=null;ngIf=null};function xb(n,t){if(n&&!n.createEmbeddedView)throw new N(2020,!1)}function Og(n,t){return new N(2100,!1)}var H2="mediumDate",Wb=new J(""),Ub=new J(""),wr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,a){if(e==null||e===""||e!==e)return null;try{let d=i??this.defaultOptions?.dateFormat??H2,u=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Nb(e,d,a||this.locale,u)}catch(d){throw Og(n,d.message)}}static \u0275fac=function(i){return new(i||n)(I(Mr,16),I(Wb,24),I(Ub,24))};static \u0275pipe=Ga({name:"date",type:n,pure:!0})}return n})();var De=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!Gb(e))return null;r||=this._locale;try{let a=Hb(e);return jb(a,r,i)}catch(a){throw Og(n,a.message)}}static \u0275fac=function(i){return new(i||n)(I(Mr,16))};static \u0275pipe=Ga({name:"number",type:n,pure:!0})}return n})();var kg=(()=>{class n{_locale;_defaultCurrencyCode;constructor(e,i="USD"){this._locale=e,this._defaultCurrencyCode=i}transform(e,i=this._defaultCurrencyCode,r="symbol",a,d){if(!Gb(e))return null;d||=this._locale,typeof r=="boolean"&&(r=r?"symbol":"code");let u=i||this._defaultCurrencyCode;r!=="code"&&(r==="symbol"||r==="symbol-narrow"?u=kb(u,r==="symbol"?"wide":"narrow",d):u=r);try{let p=Hb(e);return Vb(p,d,u,i,a)}catch(p){throw Og(n,p.message)}}static \u0275fac=function(i){return new(i||n)(I(Mr,16),I(pg,16))};static \u0275pipe=Ga({name:"currency",type:n,pure:!0})}return n})();function Gb(n){return!(n==null||n===""||n!==n)}function Hb(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new N(2309,!1);return n}var es=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({})}return n})();function ts(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,a]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(a)}return null}var Ir=class{};var qb="browser";var zb=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Rg(A(He),window)})}return n})(),Rg=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(me(R({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let i=q2(this.document,t);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(fi(2400,!1))}}scrollToElement(t,e){let i=t.getBoundingClientRect(),r=i.left+this.window.pageXOffset,a=i.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(me(R({},e),{left:r-d[0],top:a-d[1]}))}};function q2(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let a=r.shadowRoot;if(a){let d=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(d)return d}r=i.nextNode()}}return null}var ns=class{_doc;constructor(t){this._doc=t}manager},$c=(()=>{class n extends ns{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,a){return e.addEventListener(i,r,a),()=>this.removeEventListener(e,i,r,a)}removeEventListener(e,i,r,a){return e.removeEventListener(i,r,a)}static \u0275fac=function(i){return new(i||n)(B(He))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Yc=new J(""),Lg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(d=>{d.manager=this});let r=e.filter(d=>!(d instanceof $c));this._plugins=r.slice().reverse();let a=e.find(d=>d instanceof $c);a&&this._plugins.push(a)}addEventListener(e,i,r,a){return this._findPluginFor(i).addEventListener(e,i,r,a)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(a=>a.supports(e)),!i)throw new N(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(B(Yc),B(ot))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Ng="ng-app-id";function $b(n){for(let t of n)t.remove()}function Qb(n,t){let e=t.createElement("style");return e.textContent=n,e}function z2(n,t,e,i){let r=n.head?.querySelectorAll(`style[${Ng}="${t}"],link[${Ng}="${t}"]`);if(r)for(let a of r)a.removeAttribute(Ng),a instanceof HTMLLinkElement?i.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&e.set(a.textContent,{usage:0,elements:[a]})}function Fg(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Vg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,a={}){this.doc=e,this.appId=i,this.nonce=r,z2(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,Qb);i?.forEach(r=>this.addUsage(r,this.external,Fg))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let a=i.get(e);a?a.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&($b(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])$b(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,Qb(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Fg(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(B(He),B(gc),B(vc,8),B(ja))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Ag={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jg=/%COMP%/g;var Yb="%COMP%",$2=`_nghost-${Yb}`,Q2=`_ngcontent-${Yb}`,K2=!0,Y2=new J("",{factory:()=>K2});function Z2(n){return Q2.replace(jg,n)}function J2(n){return $2.replace(jg,n)}function Zb(n,t){return t.map(e=>e.replace(jg,n))}var os=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,a,d,u,p=null,h=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=a,this.doc=d,this.ngZone=u,this.nonce=p,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new is(e,d,u,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof Kc?r.applyToHost(e):r instanceof rs&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,a=r.get(i.id);if(!a){let d=this.doc,u=this.ngZone,p=this.eventManager,h=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,w=this.platformIsServer,P=this.tracingService;switch(i.encapsulation){case An.Emulated:a=new Kc(p,h,i,this.appId,C,d,u,w,P);break;case An.ShadowDom:return new Qc(p,e,i,d,u,this.nonce,w,P,h);case An.ExperimentalIsolatedShadowDom:return new Qc(p,e,i,d,u,this.nonce,w,P);default:a=new rs(p,h,i,C,d,u,w,P);break}r.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(B(Lg),B(Vg),B(gc),B(Y2),B(He),B(ot),B(vc),B(yi,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),is=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,a){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=a}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Ag[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Kb(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Kb(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new N(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let a=Ag[r];a?t.setAttributeNS(a,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Ag[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ti.DashCase|ti.Important)?t.style.setProperty(e,i,r&ti.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ti.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=an().getGlobalEventTarget(this.doc,t),!t))throw new N(5102,!1);let a=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(t,e,a)),this.eventManager.addEventListener(t,e,a,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function Kb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qc=class extends is{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,i,r,a,d,u,p,h){super(t,r,a,u,p),this.hostEl=e,this.sharedStylesHost=h,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let C=i.styles;C=Zb(i.id,C);for(let P of C){let D=document.createElement("style");d&&D.setAttribute("nonce",d),D.textContent=P,this.shadowRoot.appendChild(D)}let w=i.getExternalStyles?.();if(w)for(let P of w){let D=Fg(P,r);d&&D.setAttribute("nonce",d),this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},rs=class extends is{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,a,d,u,p,h){super(t,a,d,u,p),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let C=i.styles;this.styles=h?Zb(h,C):C,this.styleUrls=i.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&fo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kc=class extends rs{contentAttr;hostAttr;constructor(t,e,i,r,a,d,u,p,h){let C=r+"-"+i.id;super(t,e,i,a,d,u,p,h,C),this.contentAttr=Z2(C),this.hostAttr=J2(C)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var Zc=class n extends Ka{supportsDOMEvents=!0;static makeCurrent(){Cg(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=X2();return e==null?null:eD(e)}resetBaseElement(){as=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ts(document.cookie,t)}},as=null;function X2(){return as=as||document.head.querySelector("base"),as?as.getAttribute("href"):null}function eD(n){return new URL(n,document.baseURI).pathname}var Jc=class{addToWindow(t){yt.getAngularTestability=(i,r=!0)=>{let a=t.findTestabilityInTree(i,r);if(a==null)throw new N(5103,!1);return a},yt.getAllAngularTestabilities=()=>t.getAllTestabilities(),yt.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=yt.getAllAngularTestabilities(),a=r.length,d=function(){a--,a==0&&i()};r.forEach(u=>{u.whenStable(d)})};yt.frameworkStabilizers||(yt.frameworkStabilizers=[]),yt.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?an().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},tD=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Jb=["alt","control","meta","shift"],nD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iD={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Xb=(()=>{class n extends ns{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,a){let d=n.parseEventName(i),u=n.eventCallback(d.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>an().onAndCancel(e,d.domEventName,u,a))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let a=n._normalizeKey(i.pop()),d="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),d="code."),Jb.forEach(h=>{let C=i.indexOf(h);C>-1&&(i.splice(C,1),d+=h+".")}),d+=a,i.length!=0||a.length===0)return null;let p={};return p.domEventName=r,p.fullKey=d,p}static matchEventFullKeyCode(e,i){let r=nD[e.key]||e.key,a="";return i.indexOf("code.")>-1&&(r=e.code,a="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Jb.forEach(d=>{if(d!==r){let u=iD[d];u(e)&&(a+=d+".")}}),a+=r,a===i)}static eventCallback(e,i,r){return a=>{n.matchEventFullKeyCode(a,e)&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(B(He))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function rD(){Zc.makeCurrent()}function oD(){return new Qn}function aD(){return If(document),document}var sD=[{provide:ja,useValue:qb},{provide:hc,useValue:rD,multi:!0},{provide:He,useFactory:aD}],Bg=vg(db,"browser",sD);var lD=[{provide:Ic,useClass:Jc},{provide:wc,useClass:Ha},{provide:Ha,useClass:Ha}],cD=[{provide:ma,useValue:"root"},{provide:Qn,useFactory:oD},{provide:Yc,useClass:$c,multi:!0},{provide:Yc,useClass:Xb,multi:!0},os,Vg,Lg,{provide:_i,useExisting:os},{provide:Ir,useClass:tD},[]],ss=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[...cD,...lD],imports:[es,ub]})}return n})();var Ui=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),a=e.slice(i+1).trim();this.addHeaderEntry(r,a)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let a=t.value;if(!a)this.headers.delete(e),this.normalizedNames.delete(e);else{let d=this.headers.get(e);if(!d)return;d=d.filter(u=>a.indexOf(u)===-1),d.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(a=>a.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var ed=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},td=class{encodeKey(t){return eC(t)}encodeValue(t){return eC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function dD(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let a=r.indexOf("="),[d,u]=a==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,a)),t.decodeValue(r.slice(a+1))],p=e.get(d)||[];p.push(u),e.set(d,p)}),e}var uD=/%(\d[a-f0-9])/gi,pD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eC(n){return encodeURIComponent(n).replace(uD,(t,e)=>pD[e]??t)}function Xc(n){return`${n}`}var kt=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new td,t.fromString){if(t.fromObject)throw new N(2805,!1);this.map=dD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Xc):[Xc(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(a=>{e.push({param:i,value:a,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Xc(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Xc(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function mD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function tC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nC(n){return typeof Blob<"u"&&n instanceof Blob}function iC(n){return typeof FormData<"u"&&n instanceof FormData}function fD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var rC="Content-Type",oC="Accept",sC="text/plain",lC="application/json",gD=`${lC}, ${sC}, */*`,bo=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let a;if(mD(this.method)||r?(this.body=i!==void 0?i:null,a=r):a=i,a){if(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,this.keepalive=!!a.keepalive,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),a.priority&&(this.priority=a.priority),a.cache&&(this.cache=a.cache),a.credentials&&(this.credentials=a.credentials),typeof a.timeout=="number"){if(a.timeout<1||!Number.isInteger(a.timeout))throw new N(2822,"");this.timeout=a.timeout}a.mode&&(this.mode=a.mode),a.redirect&&(this.redirect=a.redirect),a.integrity&&(this.integrity=a.integrity),a.referrer&&(this.referrer=a.referrer),a.referrerPolicy&&(this.referrerPolicy=a.referrerPolicy),this.transferCache=a.transferCache}if(this.headers??=new Ui,this.context??=new ed,!this.params)this.params=new kt,this.urlWithParams=e;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),p=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+p+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||tC(this.body)||nC(this.body)||iC(this.body)||fD(this.body)?this.body:this.body instanceof kt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||iC(this.body)?null:nC(this.body)?this.body.type||null:tC(this.body)?null:typeof this.body=="string"?sC:this.body instanceof kt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?lC:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,a=t.keepalive??this.keepalive,d=t.priority||this.priority,u=t.cache||this.cache,p=t.mode||this.mode,h=t.redirect||this.redirect,C=t.credentials||this.credentials,w=t.referrer||this.referrer,P=t.integrity||this.integrity,D=t.referrerPolicy||this.referrerPolicy,k=t.transferCache??this.transferCache,W=t.timeout??this.timeout,U=t.body!==void 0?t.body:this.body,z=t.withCredentials??this.withCredentials,be=t.reportProgress??this.reportProgress,We=t.headers||this.headers,ye=t.params||this.params,Ft=t.context??this.context;return t.setHeaders!==void 0&&(We=Object.keys(t.setHeaders).reduce((St,$e)=>St.set($e,t.setHeaders[$e]),We)),t.setParams&&(ye=Object.keys(t.setParams).reduce((St,$e)=>St.set($e,t.setParams[$e]),ye)),new n(e,i,U,{params:ye,headers:We,context:Ft,reportProgress:be,responseType:r,withCredentials:z,transferCache:k,keepalive:a,cache:u,priority:d,timeout:W,mode:p,redirect:h,credentials:C,referrer:w,integrity:P,referrerPolicy:D})}},Dr=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Dr||{}),xo=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,e=200,i="OK"){this.headers=t.headers||new Ui,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},nd=class n extends xo{constructor(t={}){super(t)}type=Dr.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ls=class n extends xo{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Dr.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Co=class extends xo{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},hD=200,_D=204;var vD=new J("");var yD=/^\)\]\}',?\n/;var Ug=(()=>{class n{xhrFactory;tracingService=A(yi,{optional:!0});constructor(e){this.xhrFactory=e}maybePropagateTrace(e){return this.tracingService?.propagate?this.tracingService.propagate(e):e}handle(e){if(e.method==="JSONP")throw new N(-2800,!1);let i=this.xhrFactory;return ce(null).pipe(rn(()=>new we(a=>{let d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((U,z)=>d.setRequestHeader(U,z.join(","))),e.headers.has(oC)||d.setRequestHeader(oC,gD),!e.headers.has(rC)){let U=e.detectContentTypeHeader();U!==null&&d.setRequestHeader(rC,U)}if(e.timeout&&(d.timeout=e.timeout),e.responseType){let U=e.responseType.toLowerCase();d.responseType=U!=="json"?U:"text"}let u=e.serializeBody(),p=null,h=()=>{if(p!==null)return p;let U=d.statusText||"OK",z=new Ui(d.getAllResponseHeaders()),be=d.responseURL||e.url;return p=new nd({headers:z,status:d.status,statusText:U,url:be}),p},C=this.maybePropagateTrace(()=>{let{headers:U,status:z,statusText:be,url:We}=h(),ye=null;z!==_D&&(ye=typeof d.response>"u"?d.responseText:d.response),z===0&&(z=ye?hD:0);let Ft=z>=200&&z<300;if(e.responseType==="json"&&typeof ye=="string"){let St=ye;ye=ye.replace(yD,"");try{ye=ye!==""?JSON.parse(ye):null}catch($e){ye=St,Ft&&(Ft=!1,ye={error:$e,text:ye})}}Ft?(a.next(new ls({body:ye,headers:U,status:z,statusText:be,url:We||void 0})),a.complete()):a.error(new Co({error:ye,headers:U,status:z,statusText:be,url:We||void 0}))}),w=this.maybePropagateTrace(U=>{let{url:z}=h(),be=new Co({error:U,status:d.status||0,statusText:d.statusText||"Unknown Error",url:z||void 0});a.error(be)}),P=w;e.timeout&&(P=this.maybePropagateTrace(U=>{let{url:z}=h(),be=new Co({error:new DOMException("Request timed out","TimeoutError"),status:d.status||0,statusText:d.statusText||"Request timeout",url:z||void 0});a.error(be)}));let D=!1,k=this.maybePropagateTrace(U=>{D||(a.next(h()),D=!0);let z={type:Dr.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(z.total=U.total),e.responseType==="text"&&d.responseText&&(z.partialText=d.responseText),a.next(z)}),W=this.maybePropagateTrace(U=>{let z={type:Dr.UploadProgress,loaded:U.loaded};U.lengthComputable&&(z.total=U.total),a.next(z)});return d.addEventListener("load",C),d.addEventListener("error",w),d.addEventListener("timeout",P),d.addEventListener("abort",w),e.reportProgress&&(d.addEventListener("progress",k),u!==null&&d.upload&&d.upload.addEventListener("progress",W)),d.send(u),a.next({type:Dr.Sent}),()=>{d.removeEventListener("error",w),d.removeEventListener("abort",w),d.removeEventListener("load",C),d.removeEventListener("timeout",P),e.reportProgress&&(d.removeEventListener("progress",k),u!==null&&d.upload&&d.upload.removeEventListener("progress",W)),d.readyState!==d.DONE&&d.abort()}})))}static \u0275fac=function(i){return new(i||n)(B(Ir))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cC(n,t){return t(n)}function bD(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function CD(n,t,e){return(i,r)=>ut(e,()=>t(i,a=>n(a,r)))}var rd=new J(""),Gg=new J("",{factory:()=>[]}),dC=new J(""),Hg=new J("",{providedIn:"root",factory:()=>!0});function xD(){let n=null;return(t,e)=>{n===null&&(n=(A(rd,{optional:!0})??[]).reduceRight(bD,cC));let i=A(Ia);if(A(Hg)){let a=i.add();return n(t,e).pipe(Xr(a))}else return n(t,e)}}var qg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=B(Ug),r},providedIn:"root"})}return n})();var id=(()=>{class n{backend;injector;chain=null;pendingTasks=A(Ia);contributeToStability=A(Hg);constructor(e,i){this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Gg),...this.injector.get(dC,[])]));this.chain=i.reduceRight((r,a)=>CD(r,a,this.injector),cC)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Xr(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(B(qg),B(et))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=B(id),r},providedIn:"root"})}return n})();function Wg(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Se=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let a;if(e instanceof bo)a=e;else{let p;r.headers instanceof Ui?p=r.headers:p=new Ui(r.headers);let h;r.params&&(r.params instanceof kt?h=r.params:h=new kt({fromObject:r.params})),a=new bo(e,i,r.body!==void 0?r.body:null,{headers:p,context:r.context,params:h,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let d=ce(a).pipe(wi(p=>this.handler.handle(p)));if(e instanceof bo||r.observe==="events")return d;let u=d.pipe(Qt(p=>p instanceof ls));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return u.pipe(Ee(p=>{if(p.body!==null&&!(p.body instanceof ArrayBuffer))throw new N(2806,!1);return p.body}));case"blob":return u.pipe(Ee(p=>{if(p.body!==null&&!(p.body instanceof Blob))throw new N(2807,!1);return p.body}));case"text":return u.pipe(Ee(p=>{if(p.body!==null&&typeof p.body!="string")throw new N(2808,!1);return p.body}));case"json":default:return u.pipe(Ee(p=>p.body))}case"response":return u;default:throw new N(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new kt().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Wg(r,i))}post(e,i,r={}){return this.request("POST",e,Wg(r,i))}put(e,i,r={}){return this.request("PUT",e,Wg(r,i))}static \u0275fac=function(i){return new(i||n)(B(zg))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SD=new J("",{factory:()=>!0}),ED="XSRF-TOKEN",MD=new J("",{providedIn:"root",factory:()=>ED}),wD="X-XSRF-TOKEN",ID=new J("",{providedIn:"root",factory:()=>wD}),DD=(()=>{class n{cookieName=A(MD);doc=A(He);lastCookieString="";lastToken=null;parseCount=0;getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ts(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=B(DD),r},providedIn:"root"})}return n})();function PD(n,t){if(!A(SD)||n.method==="GET"||n.method==="HEAD")return t(n);try{let r=A(Bi).href,{origin:a}=new URL(r),{origin:d}=new URL(n.url,a);if(a!==d)return t(n)}catch{return t(n)}let e=A(uC).getToken(),i=A(ID);return e!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,e)})),t(n)}var $g=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})($g||{});function TD(n,t){return{\u0275kind:n,\u0275providers:t}}function pC(...n){let t=[Se,id,{provide:zg,useExisting:id},{provide:qg,useFactory:()=>A(vD,{optional:!0})??A(Ug)},{provide:Gg,useValue:PD,multi:!0}];for(let e of n)t.push(...e.\u0275providers);return ur(t)}var aC=new J("");function mC(){return TD($g.LegacyInterceptors,[{provide:aC,useFactory:xD},{provide:Gg,useExisting:aC,multi:!0}])}var Qg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[pC(mC())]})}return n})();var fC=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(B(He))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ce=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Ce||{}),Wn="*";function gC(n,t=null){return{type:Ce.Sequence,steps:n,options:t}}function Kg(n){return{type:Ce.Style,styles:n,offset:null}}var Ci=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},So=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,a=this.players.length;a==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==a&&this._onFinish()}),d.onDestroy(()=>{++i==a&&this._onDestroy()}),d.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((d,u)=>Math.max(d,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},cs="!";function hC(n){return new N(3e3,!1)}function kD(){return new N(3100,!1)}function RD(){return new N(3101,!1)}function ND(n){return new N(3001,!1)}function AD(n){return new N(3003,!1)}function FD(n){return new N(3004,!1)}function vC(n,t){return new N(3005,!1)}function yC(){return new N(3006,!1)}function bC(){return new N(3007,!1)}function CC(n,t){return new N(3008,!1)}function xC(n){return new N(3002,!1)}function SC(n,t,e,i,r){return new N(3010,!1)}function EC(){return new N(3011,!1)}function MC(){return new N(3012,!1)}function wC(){return new N(3200,!1)}function IC(){return new N(3202,!1)}function DC(){return new N(3013,!1)}function PC(n){return new N(3014,!1)}function TC(n){return new N(3015,!1)}function OC(n){return new N(3016,!1)}function kC(n,t){return new N(3404,!1)}function LD(n){return new N(3502,!1)}function RC(n){return new N(3503,!1)}function NC(){return new N(3300,!1)}function AC(n){return new N(3504,!1)}function FC(n){return new N(3301,!1)}function LC(n,t){return new N(3302,!1)}function VC(n){return new N(3303,!1)}function jC(n,t){return new N(3400,!1)}function BC(n){return new N(3401,!1)}function WC(n){return new N(3402,!1)}function UC(n,t){return new N(3505,!1)}function xi(n){switch(n.length){case 0:return new Ci;case 1:return n[0];default:return new So(n)}}function Xg(n,t,e=new Map,i=new Map){let r=[],a=[],d=-1,u=null;if(t.forEach(p=>{let h=p.get("offset"),C=h==d,w=C&&u||new Map;p.forEach((P,D)=>{let k=D,W=P;if(D!=="offset")switch(k=n.normalizePropertyName(k,r),W){case cs:W=e.get(D);break;case Wn:W=i.get(D);break;default:W=n.normalizeStyleValue(D,k,W,r);break}w.set(k,W)}),C||a.push(w),u=w,d=h}),r.length)throw LD(r);return a}function od(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Yg(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Yg(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Yg(e,"destroy",n)));break}}function Yg(n,t,e){let i=e.totalTime,r=!!e.disabled,a=ad(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),d=n._data;return d!=null&&(a._data=d),a}function ad(n,t,e,i,r="",a=0,d){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:a,disabled:!!d}}function Jt(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function e0(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var VD=typeof document>"u"?null:document.documentElement;function sd(n){let t=n.parentNode||n.host||null;return t===VD?null:t}function jD(n){return n.substring(1,6)=="ebkit"}var Pr=null,_C=!1;function GC(n){Pr||(Pr=BD()||{},_C=Pr.style?"WebkitAppearance"in Pr.style:!1);let t=!0;return Pr.style&&!jD(n)&&(t=n in Pr.style,!t&&_C&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Pr.style)),t}function BD(){return typeof document<"u"?document.body:null}function t0(n,t){for(;t;){if(t===n)return!0;t=sd(t)}return!1}function n0(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var WD=1e3,i0="{{",UD="}}",r0="ng-enter",ld="ng-leave",ds="ng-trigger",us=".ng-trigger",o0="ng-animating",cd=".ng-animating";function ri(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Zg(parseFloat(t[1]),t[2])}function Zg(n,t){switch(t){case"s":return n*WD;default:return n}}function ps(n,t,e){return n.hasOwnProperty("duration")?n:HD(n,t,e)}var GD=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function HD(n,t,e){let i,r=0,a="";if(typeof n=="string"){let d=n.match(GD);if(d===null)return t.push(hC(n)),{duration:0,delay:0,easing:""};i=Zg(parseFloat(d[1]),d[2]);let u=d[3];u!=null&&(r=Zg(parseFloat(u),d[4]));let p=d[5];p&&(a=p)}else i=n;if(!e){let d=!1,u=t.length;i<0&&(t.push(kD()),d=!0),r<0&&(t.push(RD()),d=!0),d&&t.splice(u,0,hC(n))}return{duration:i,delay:r,easing:a}}function HC(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function Un(n,t,e){t.forEach((i,r)=>{let a=dd(r);e&&!e.has(r)&&e.set(r,n.style[a]),n.style[a]=i})}function Gi(n,t){t.forEach((e,i)=>{let r=dd(i);n.style[r]=""})}function Eo(n){return Array.isArray(n)?n.length==1?n[0]:gC(n):n}function qC(n,t,e){let i=t.params||{},r=a0(n);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||e.push(ND(a))})}var Jg=new RegExp(`${i0}\\s*(.+?)\\s*${UD}`,"g");function a0(n){let t=[];if(typeof n=="string"){let e;for(;e=Jg.exec(n);)t.push(e[1]);Jg.lastIndex=0}return t}function Mo(n,t,e){let i=`${n}`,r=i.replace(Jg,(a,d)=>{let u=t[d];return u==null&&(e.push(AD(d)),u=""),u.toString()});return r==i?n:r}var qD=/-+([a-z0-9])/g;function dd(n){return n.replace(qD,(...t)=>t[1].toUpperCase())}function zC(n,t){return n===0||t===0}function $C(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((a,d)=>{i.has(d)||r.push(d),i.set(d,a)}),r.length)for(let a=1;a<t.length;a++){let d=t[a];r.forEach(u=>d.set(u,ud(n,u)))}}return t}function Xt(n,t,e){switch(t.type){case Ce.Trigger:return n.visitTrigger(t,e);case Ce.State:return n.visitState(t,e);case Ce.Transition:return n.visitTransition(t,e);case Ce.Sequence:return n.visitSequence(t,e);case Ce.Group:return n.visitGroup(t,e);case Ce.Animate:return n.visitAnimate(t,e);case Ce.Keyframes:return n.visitKeyframes(t,e);case Ce.Style:return n.visitStyle(t,e);case Ce.Reference:return n.visitReference(t,e);case Ce.AnimateChild:return n.visitAnimateChild(t,e);case Ce.AnimateRef:return n.visitAnimateRef(t,e);case Ce.Query:return n.visitQuery(t,e);case Ce.Stagger:return n.visitStagger(t,e);default:throw FD(t.type)}}function ud(n,t){return window.getComputedStyle(n)[t]}var S0=(()=>{class n{validateStyleProperty(e){return GC(e)}containsElement(e,i){return t0(e,i)}getParentElement(e){return sd(e)}query(e,i,r){return n0(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,a,d,u=[],p){return new Ci(r,a)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Or=class{static NOOP=new S0},kr=class{};var zD=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),hd=class extends kr{normalizePropertyName(t,e){return dd(t)}normalizeStyleValue(t,e,i,r){let a="",d=i.toString().trim();if(zD.has(e)&&i!==0&&i!=="0")if(typeof i=="number")a="px";else{let u=i.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&u[1].length==0&&r.push(vC(t,i))}return d+a}};var _d="*";function $D(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>QD(i,e,t)):e.push(n),e}function QD(n,t,e){if(n[0]==":"){let p=KD(n,e);if(typeof p=="function"){t.push(p);return}n=p}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(TC(n)),t;let r=i[1],a=i[2],d=i[3];t.push(QC(r,d));let u=r==_d&&d==_d;a[0]=="<"&&!u&&t.push(QC(d,r))}function KD(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(OC(n)),"* => *"}}var pd=new Set(["true","1"]),md=new Set(["false","0"]);function QC(n,t){let e=pd.has(n)||md.has(n),i=pd.has(t)||md.has(t);return(r,a)=>{let d=n==_d||n==r,u=t==_d||t==a;return!d&&e&&typeof r=="boolean"&&(d=r?pd.has(n):md.has(n)),!u&&i&&typeof a=="boolean"&&(u=a?pd.has(t):md.has(t)),d&&u}}var r1=":self",YD=new RegExp(`s*${r1}s*,?`,"g");function o1(n,t,e,i){return new p0(n).build(t,e,i)}var KC="",p0=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new m0(e);return this._resetContextStyleTimingState(r),Xt(this,Eo(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=KC,t.collectedStyles=new Map,t.collectedStyles.set(KC,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,a=[],d=[];return t.name.charAt(0)=="@"&&e.errors.push(yC()),t.definitions.forEach(u=>{if(this._resetContextStyleTimingState(e),u.type==Ce.State){let p=u,h=p.name;h.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,a.push(this.visitState(p,e))}),p.name=h}else if(u.type==Ce.Transition){let p=this.visitTransition(u,e);i+=p.queryCount,r+=p.depCount,d.push(p)}else e.errors.push(bC())}),{type:Ce.Trigger,name:t.name,states:a,transitions:d,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let a=new Set,d=r||{};i.styles.forEach(u=>{u instanceof Map&&u.forEach(p=>{a0(p).forEach(h=>{d.hasOwnProperty(h)||a.add(h)})})}),a.size&&e.errors.push(CC(t.name,[...a.values()]))}return{type:Ce.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Xt(this,Eo(t.animation),e),r=$D(t.expr,e.errors);return{type:Ce.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Tr(t.options)}}visitSequence(t,e){return{type:Ce.Sequence,steps:t.steps.map(i=>Xt(this,i,e)),options:Tr(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,a=t.steps.map(d=>{e.currentTime=i;let u=Xt(this,d,e);return r=Math.max(r,e.currentTime),u});return e.currentTime=r,{type:Ce.Group,steps:a,options:Tr(t.options)}}visitAnimate(t,e){let i=eP(t.timings,e.errors);e.currentAnimateTimings=i;let r,a=t.styles?t.styles:Kg({});if(a.type==Ce.Keyframes)r=this.visitKeyframes(a,e);else{let d=t.styles,u=!1;if(!d){u=!0;let h={};i.easing&&(h.easing=i.easing),d=Kg(h)}e.currentTime+=i.duration+i.delay;let p=this.visitStyle(d,e);p.isEmptyStep=u,r=p}return e.currentAnimateTimings=null,{type:Ce.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let u of r)typeof u=="string"?u===Wn?i.push(u):e.errors.push(xC(u)):i.push(new Map(Object.entries(u)));let a=!1,d=null;return i.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(d=u.get("easing"),u.delete("easing")),!a)){for(let p of u.values())if(p.toString().indexOf(i0)>=0){a=!0;break}}}),{type:Ce.Style,styles:i,easing:d,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,a=e.currentTime;i&&a>0&&(a-=i.duration+i.delay),t.styles.forEach(d=>{typeof d!="string"&&d.forEach((u,p)=>{let h=e.collectedStyles.get(e.currentQuerySelector),C=h.get(p),w=!0;C&&(a!=r&&a>=C.startTime&&r<=C.endTime&&(e.errors.push(SC(p,C.startTime,C.endTime,a,r)),w=!1),a=C.startTime),w&&h.set(p,{startTime:a,endTime:r}),e.options&&qC(u,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:Ce.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(EC()),i;let r=1,a=0,d=[],u=!1,p=!1,h=0,C=t.steps.map(z=>{let be=this._makeStyleAst(z,e),We=be.offset!=null?be.offset:XD(be.styles),ye=0;return We!=null&&(a++,ye=be.offset=We),p=p||ye<0||ye>1,u=u||ye<h,h=ye,d.push(ye),be});p&&e.errors.push(MC()),u&&e.errors.push(wC());let w=t.steps.length,P=0;a>0&&a<w?e.errors.push(IC()):a==0&&(P=r/(w-1));let D=w-1,k=e.currentTime,W=e.currentAnimateTimings,U=W.duration;return C.forEach((z,be)=>{let We=P>0?be==D?1:P*be:d[be],ye=We*U;e.currentTime=k+W.delay+ye,W.duration=ye,this._validateStyleAst(z,e),z.offset=We,i.styles.push(z)}),i}visitReference(t,e){return{type:Ce.Reference,animation:Xt(this,Eo(t.animation),e),options:Tr(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Ce.AnimateChild,options:Tr(t.options)}}visitAnimateRef(t,e){return{type:Ce.AnimateRef,animation:this.visitReference(t.animation,e),options:Tr(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[a,d]=ZD(t.selector);e.currentQuerySelector=i.length?i+" "+a:a,Jt(e.collectedStyles,e.currentQuerySelector,new Map);let u=Xt(this,Eo(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Ce.Query,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:u,originalSelector:t.selector,options:Tr(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(DC());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:ps(t.timings,e.errors,!0);return{type:Ce.Stagger,animation:Xt(this,Eo(t.animation),e),timings:i,options:null}}};function ZD(n){let t=!!n.split(/\s*,\s*/).find(e=>e==r1);return t&&(n=n.replace(YD,"")),n=n.replace(/@\*/g,us).replace(/@\w+/g,e=>us+"-"+e.slice(1)).replace(/:animating/g,cd),[n,t]}function JD(n){return n?R({},n):null}var m0=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function XD(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function eP(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let a=ps(n,t).duration;return s0(a,0,"")}let e=n;if(e.split(/\s+/).some(a=>a.charAt(0)=="{"&&a.charAt(1)=="{")){let a=s0(0,0,"");return a.dynamic=!0,a.strValue=e,a}let r=ps(e,t);return s0(r.duration,r.delay,r.easing)}function Tr(n){return n?(n=R({},n),n.params&&(n.params=JD(n.params))):n={},n}function s0(n,t,e){return{duration:n,delay:t,easing:e}}function E0(n,t,e,i,r,a,d=null,u=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:d,subTimeline:u}}var fs=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},tP=1,nP=":enter",iP=new RegExp(nP,"g"),rP=":leave",oP=new RegExp(rP,"g");function a1(n,t,e,i,r,a=new Map,d=new Map,u,p,h=[]){return new f0().buildKeyframes(n,t,e,i,r,a,d,u,p,h)}var f0=class{buildKeyframes(t,e,i,r,a,d,u,p,h,C=[]){h=h||new fs;let w=new g0(t,e,h,r,a,C,[]);w.options=p;let P=p.delay?ri(p.delay):0;w.currentTimeline.delayNextStep(P),w.currentTimeline.setStyles([d],null,w.errors,p),Xt(this,i,w);let D=w.timelines.filter(k=>k.containsAnimation());if(D.length&&u.size){let k;for(let W=D.length-1;W>=0;W--){let U=D[W];if(U.element===e){k=U;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([u],null,w.errors,p)}return D.length?D.map(k=>k.buildKeyframes()):[E0(e,[],[],[],0,P,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),a=e.currentTimeline.currentTime,d=this._visitSubInstructions(i,r,r.options);a!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let a=r?.delay;if(a){let d=typeof a=="number"?a:ri(Mo(a,r?.params??{},e.errors));i.delayNextStep(d)}}}_visitSubInstructions(t,e,i){let a=e.currentTimeline.currentTime,d=i.duration!=null?ri(i.duration):null,u=i.delay!=null?ri(i.delay):null;return d!==0&&t.forEach(p=>{let h=e.appendInstructionToTimeline(p,d,u);a=Math.max(a,h.duration+h.delay)}),a}visitReference(t,e){e.updateOptions(t.options,!0),Xt(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,a=t.options;if(a&&(a.params||a.delay)&&(r=e.createSubContext(a),r.transformIntoNewTimeline(),a.delay!=null)){r.previousNode.type==Ce.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vd);let d=ri(a.delay);r.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>Xt(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,a=t.options&&t.options.delay?ri(t.options.delay):0;t.steps.forEach(d=>{let u=e.createSubContext(t.options);a&&u.delayNextStep(a),Xt(this,d,u),r=Math.max(r,u.currentTimeline.currentTime),i.push(u.currentTimeline)}),i.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?Mo(i,e.params,e.errors):i;return ps(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let a=t.style;a.type==Ce.Keyframes?this.visitKeyframes(a,e):(e.incrementTime(i.duration),this.visitStyle(a,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let a=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(a):i.setStyles(t.styles,a,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,a=i.duration,u=e.createSubContext().currentTimeline;u.easing=i.easing,t.styles.forEach(p=>{let h=p.offset||0;u.forwardTime(h*a),u.setStyles(p.styles,p.easing,e.errors,e.options),u.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(u),e.transformIntoNewTimeline(r+a),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},a=r.delay?ri(r.delay):0;a&&(e.previousNode.type===Ce.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=vd);let d=i,u=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=u.length;let p=null;u.forEach((h,C)=>{e.currentQueryIndex=C;let w=e.createSubContext(t.options,h);a&&w.delayNextStep(a),h===e.element&&(p=w.currentTimeline),Xt(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe();let P=w.currentTimeline.currentTime;d=Math.max(d,P)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,a=t.timings,d=Math.abs(a.duration),u=d*(e.currentQueryTotal-1),p=d*e.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=u-p;break;case"full":p=i.currentStaggerTime;break}let C=e.currentTimeline;p&&C.delayNextStep(p);let w=C.currentTime;Xt(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-w+(r.startTime-i.currentTimeline.startTime)}},vd={},g0=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=vd;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,a,d,u,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=d,this.timelines=u,this.currentTimeline=p||new yd(this._driver,e,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=ri(i.duration)),i.delay!=null&&(r.delay=ri(i.delay));let a=i.params;if(a){let d=r.params;d||(d=this.options.params={}),Object.keys(a).forEach(u=>{(!e||!d.hasOwnProperty(u))&&(d[u]=Mo(a[u],d,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,a=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(t){return this.previousNode=vd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},a=new h0(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,a,d){let u=[];if(r&&u.push(this.element),t.length>0){t=t.replace(iP,"."+this._enterClassName),t=t.replace(oP,"."+this._leaveClassName);let p=i!=1,h=this._driver.query(this.element,t,p);i!==0&&(h=i<0?h.slice(h.length+i,h.length):h.slice(0,i)),u.push(...h)}return!a&&u.length==0&&d.push(PC(e)),u}},yd=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=tP,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Wn),this._currentKeyframe.set(e,Wn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let a=r&&r.params||{},d=aP(t,this._globalTimelineStyles);for(let[u,p]of d){let h=Mo(p,a,i);this._pendingStyles.set(u,h),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Wn),this._updateStyle(u,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((u,p)=>{let h=new Map([...this._backFill,...u]);h.forEach((C,w)=>{C===cs?t.add(w):C===Wn&&e.add(w)}),i||h.set("offset",p/this.duration),r.push(h)});let a=[...t.values()],d=[...e.values()];if(i){let u=r[0],p=new Map(u);u.set("offset",0),p.set("offset",1),r=[u,p]}return E0(this.element,r,a,d,this.duration,this.startTime,this.easing,!1)}},h0=class extends yd{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,a,d,u=!1){super(t,e,d.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=u,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let a=[],d=i+e,u=e/d,p=new Map(t[0]);p.set("offset",0),a.push(p);let h=new Map(t[0]);h.set("offset",YC(u)),a.push(h);let C=t.length-1;for(let w=1;w<=C;w++){let P=new Map(t[w]),D=P.get("offset"),k=e+D*i;P.set("offset",YC(k/d)),a.push(P)}i=d,e=0,r="",t=a}return E0(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function YC(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function aP(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let a of i)e.set(a,Wn)}else for(let[a,d]of r)e.set(a,d)}),e}function ZC(n,t,e,i,r,a,d,u,p,h,C,w,P){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:a,toState:i,toStyles:d,timelines:u,queriedElements:p,preStyleProps:h,postStyleProps:C,totalTime:w,errors:P}}var l0={},bd=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return sP(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,a,d,u,p,h,C){let w=[],P=this.ast.options&&this.ast.options.params||l0,D=u&&u.params||l0,k=this.buildStyles(i,D,w),W=p&&p.params||l0,U=this.buildStyles(r,W,w),z=new Set,be=new Map,We=new Map,ye=r==="void",Ft={params:s1(W,P),delay:this.ast.options?.delay},St=C?[]:a1(t,e,this.ast.animation,a,d,k,U,Ft,h,w),$e=0;return St.forEach(qt=>{$e=Math.max(qt.duration+qt.delay,$e)}),w.length?ZC(e,this._triggerName,i,r,ye,k,U,[],[],be,We,$e,w):(St.forEach(qt=>{let Ji=qt.element,Hr=Jt(be,Ji,new Set);qt.preStyleProps.forEach(Xi=>Hr.add(Xi));let oh=Jt(We,Ji,new Set);qt.postStyleProps.forEach(Xi=>oh.add(Xi)),Ji!==e&&z.add(Ji)}),ZC(e,this._triggerName,i,r,ye,k,U,St,[...z.values()],be,We,$e))}};function sP(n,t,e,i,r){return n.some(a=>a(t,e,i,r))}function s1(n,t){let e=R({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var _0=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=s1(t,this.defaultParams);return this.styles.styles.forEach(a=>{typeof a!="string"&&a.forEach((d,u)=>{d&&(d=Mo(d,r,e));let p=this.normalizer.normalizePropertyName(u,e);d=this.normalizer.normalizeStyleValue(u,p,d,e),i.set(u,d)})}),i}};function lP(n,t,e){return new v0(n,t,e)}var v0=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let a=r.options&&r.options.params||{};this.states.set(r.name,new _0(r.style,a,i))}),JC(this.states,"true","1"),JC(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new bd(t,r,this.states))}),this.fallbackTransition=cP(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(d=>d.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function cP(n,t,e){let i=[(d,u)=>!0],r={type:Ce.Sequence,steps:[],options:null},a={type:Ce.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new bd(n,a,t)}function JC(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var dP=new fs,y0=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],a=o1(this._driver,e,i,r);if(i.length)throw RC(i);this._animations.set(t,a)}_buildPlayer(t,e,i){let r=t.element,a=Xg(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,a,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],a=this._animations.get(t),d,u=new Map;if(a?(d=a1(this._driver,e,a,r0,ld,new Map,new Map,i,dP,r),d.forEach(C=>{let w=Jt(u,C.element,new Map);C.postStyleProps.forEach(P=>w.set(P,null))})):(r.push(NC()),d=[]),r.length)throw AC(r);u.forEach((C,w)=>{C.forEach((P,D)=>{C.set(D,this._driver.computeStyle(w,D,Wn))})});let p=d.map(C=>{let w=u.get(C.element);return this._buildPlayer(C,new Map,w)}),h=xi(p);return this._playersById.set(t,h),h.onDestroy(()=>this.destroy(t)),this.players.push(h),h}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw FC(t);return e}listen(t,e,i,r){let a=ad(e,"","","");return od(this._getPlayer(t),i,a,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let d=r[0]||{};this.create(t,e,d);return}let a=this._getPlayer(t);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},XC="ng-animate-queued",uP=".ng-animate-queued",c0="ng-animate-disabled",pP=".ng-animate-disabled",mP="ng-star-inserted",fP=".ng-star-inserted",gP=[],l1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hP={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gn="__ng_removed",gs=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=vP(r),i){let a=t,{value:d}=a,u=Ep(a,["value"]);this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},ms="void",d0=new gs(ms),b0=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,En(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw LC(i,e);if(i==null||i.length==0)throw VC(e);if(!yP(i))throw jC(i,e);let a=Jt(this._elementListeners,t,[]),d={name:e,phase:i,callback:r};a.push(d);let u=Jt(this._engine.statesByElement,t,new Map);return u.has(e)||(En(t,ds),En(t,ds+"-"+e),u.set(e,d0)),()=>{this._engine.afterFlush(()=>{let p=a.indexOf(d);p>=0&&a.splice(p,1),this._triggers.has(e)||u.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw BC(t);return e}trigger(t,e,i,r=!0){let a=this._getTrigger(e),d=new hs(this.id,e,t),u=this._engine.statesByElement.get(t);u||(En(t,ds),En(t,ds+"-"+e),this._engine.statesByElement.set(t,u=new Map));let p=u.get(e),h=new gs(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&h.absorbOptions(p.options),u.set(e,h),p||(p=d0),!(h.value===ms)&&p.value===h.value){if(!xP(p.params,h.params)){let W=[],U=a.matchStyles(p.value,p.params,W),z=a.matchStyles(h.value,h.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Gi(t,U),Un(t,z)})}return}let P=Jt(this._engine.playersByElement,t,[]);P.forEach(W=>{W.namespaceId==this.id&&W.triggerName==e&&W.queued&&W.destroy()});let D=a.matchTransition(p.value,h.value,t,h.params),k=!1;if(!D){if(!r)return;D=a.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:D,fromState:p,toState:h,player:d,isFallbackTransition:k}),k||(En(t,XC),d.onStart(()=>{wo(t,XC)})),d.onDone(()=>{let W=this.players.indexOf(d);W>=0&&this.players.splice(W,1);let U=this._engine.playersByElement.get(t);if(U){let z=U.indexOf(d);z>=0&&U.splice(z,1)}}),this.players.push(d),P.push(d),d}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,us,!0);i.forEach(r=>{if(r[Gn])return;let a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let a=this._engine.statesByElement.get(t),d=new Map;if(a){let u=[];if(a.forEach((p,h)=>{if(d.set(h,p.value),this._triggers.has(h)){let C=this.trigger(t,h,ms,r);C&&u.push(C)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,d),i&&xi(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(a=>{let d=a.name;if(r.has(d))return;r.add(d);let p=this._triggers.get(d).fallbackTransition,h=i.get(d)||d0,C=new gs(ms),w=new hs(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:p,fromState:h,toState:C,player:w,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let a=i.players.length?i.playersByQueriedElement.get(t):[];if(a&&a.length)r=!0;else{let d=t;for(;d=d.parentNode;)if(i.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let a=t[Gn];(!a||a===l1)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){En(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let a=i.element,d=this._elementListeners.get(a);d&&d.forEach(u=>{if(u.name==i.triggerName){let p=ad(a,i.triggerName,i.fromState.value,i.toState.value);p._data=t,od(i.player,u.phase,p,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let a=i.transition.ast.depCount,d=r.transition.ast.depCount;return a==0||d==0?a-d:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},C0=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new b0(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let d=!1,u=this.driver.getParentElement(e);for(;u;){let p=r.get(u);if(p){let h=i.indexOf(p);i.splice(h+1,0,t),d=!0;break}u=this.driver.getParentElement(u)}d||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let a=this._fetchNamespace(r.namespaceId);a&&e.add(a)}}return e}trigger(t,e,i,r){if(fd(e)){let a=this._fetchNamespace(t);if(a)return a.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!fd(e))return;let a=e[Gn];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){let d=this._fetchNamespace(t);d&&d.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),En(t,c0)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wo(t,c0))}removeNode(t,e,i){if(fd(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let a=this.namespacesByHostElement.get(e);a&&a.id!==t&&a.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,a){this.collectedLeaveElements.push(e),e[Gn]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(t,e,i,r,a){return fd(e)?this._fetchNamespace(t).listen(e,i,r,a):()=>{}}_buildInstruction(t,e,i,r,a){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,a)}destroyInnerAnimations(t){let e=this.driver.query(t,us,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,cd,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return xi(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Gn];if(e&&e.setForRemoval){if(t[Gn]=l1,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(c0)&&this.markElementAsDisabled(t,!1),this.driver.query(t,pP,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];En(r,mP)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?xi(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw WC(t)}_flushAnimations(t,e){let i=new fs,r=[],a=new Map,d=[],u=new Map,p=new Map,h=new Map,C=new Set;this.disabledNodes.forEach(te=>{C.add(te);let ae=this.driver.query(te,uP,!0);for(let le=0;le<ae.length;le++)C.add(ae[le])});let w=this.bodyNode,P=Array.from(this.statesByElement.keys()),D=n1(P,this.collectedEnterElements),k=new Map,W=0;D.forEach((te,ae)=>{let le=r0+W++;k.set(ae,le),te.forEach(Te=>En(Te,le))});let U=[],z=new Set,be=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){let ae=this.collectedLeaveElements[te],le=ae[Gn];le&&le.setForRemoval&&(U.push(ae),z.add(ae),le.hasAnimation?this.driver.query(ae,fP,!0).forEach(Te=>z.add(Te)):be.add(ae))}let We=new Map,ye=n1(P,Array.from(z));ye.forEach((te,ae)=>{let le=ld+W++;We.set(ae,le),te.forEach(Te=>En(Te,le))}),t.push(()=>{D.forEach((te,ae)=>{let le=k.get(ae);te.forEach(Te=>wo(Te,le))}),ye.forEach((te,ae)=>{let le=We.get(ae);te.forEach(Te=>wo(Te,le))}),U.forEach(te=>{this.processLeaveNode(te)})});let Ft=[],St=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(e).forEach(le=>{let Te=le.player,dt=le.element;if(Ft.push(Te),this.collectedEnterElements.length){let Et=dt[Gn];if(Et&&Et.setForMove){if(Et.previousTriggersValues&&Et.previousTriggersValues.has(le.triggerName)){let er=Et.previousTriggersValues.get(le.triggerName),un=this.statesByElement.get(le.element);if(un&&un.has(le.triggerName)){let Hs=un.get(le.triggerName);Hs.value=er,un.set(le.triggerName,Hs)}}Te.destroy();return}}let zn=!w||!this.driver.containsElement(w,dt),tn=We.get(dt),Ei=k.get(dt),Qe=this._buildInstruction(le,i,Ei,tn,zn);if(Qe.errors&&Qe.errors.length){St.push(Qe);return}if(zn){Te.onStart(()=>Gi(dt,Qe.fromStyles)),Te.onDestroy(()=>Un(dt,Qe.toStyles)),r.push(Te);return}if(le.isFallbackTransition){Te.onStart(()=>Gi(dt,Qe.fromStyles)),Te.onDestroy(()=>Un(dt,Qe.toStyles)),r.push(Te);return}let lh=[];Qe.timelines.forEach(Et=>{Et.stretchStartingKeyframe=!0,this.disabledNodes.has(Et.element)||lh.push(Et)}),Qe.timelines=lh,i.append(dt,Qe.timelines);let Kx={instruction:Qe,player:Te,element:dt};d.push(Kx),Qe.queriedElements.forEach(Et=>Jt(u,Et,[]).push(Te)),Qe.preStyleProps.forEach((Et,er)=>{if(Et.size){let un=p.get(er);un||p.set(er,un=new Set),Et.forEach((Hs,Sp)=>un.add(Sp))}}),Qe.postStyleProps.forEach((Et,er)=>{let un=h.get(er);un||h.set(er,un=new Set),Et.forEach((Hs,Sp)=>un.add(Sp))})});if(St.length){let te=[];St.forEach(ae=>{te.push(UC(ae.triggerName,ae.errors))}),Ft.forEach(ae=>ae.destroy()),this.reportError(te)}let $e=new Map,qt=new Map;d.forEach(te=>{let ae=te.element;i.has(ae)&&(qt.set(ae,ae),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,$e))}),r.forEach(te=>{let ae=te.element;this._getPreviousPlayers(ae,!1,te.namespaceId,te.triggerName,null).forEach(Te=>{Jt($e,ae,[]).push(Te),Te.destroy()})});let Ji=U.filter(te=>i1(te,p,h)),Hr=new Map;t1(Hr,this.driver,be,h,Wn).forEach(te=>{i1(te,p,h)&&Ji.push(te)});let Xi=new Map;D.forEach((te,ae)=>{t1(Xi,this.driver,new Set(te),p,cs)}),Ji.forEach(te=>{let ae=Hr.get(te),le=Xi.get(te);Hr.set(te,new Map([...ae?.entries()??[],...le?.entries()??[]]))});let xp=[],ah=[],sh={};d.forEach(te=>{let{element:ae,player:le,instruction:Te}=te;if(i.has(ae)){if(C.has(ae)){le.onDestroy(()=>Un(ae,Te.toStyles)),le.disabled=!0,le.overrideTotalTime(Te.totalTime),r.push(le);return}let dt=sh;if(qt.size>1){let tn=ae,Ei=[];for(;tn=tn.parentNode;){let Qe=qt.get(tn);if(Qe){dt=Qe;break}Ei.push(tn)}Ei.forEach(Qe=>qt.set(Qe,dt))}let zn=this._buildAnimation(le.namespaceId,Te,$e,a,Xi,Hr);if(le.setRealPlayer(zn),dt===sh)xp.push(le);else{let tn=this.playersByElement.get(dt);tn&&tn.length&&(le.parentPlayer=xi(tn)),r.push(le)}}else Gi(ae,Te.fromStyles),le.onDestroy(()=>Un(ae,Te.toStyles)),ah.push(le),C.has(ae)&&r.push(le)}),ah.forEach(te=>{let ae=a.get(te.element);if(ae&&ae.length){let le=xi(ae);te.setRealPlayer(le)}}),r.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<U.length;te++){let ae=U[te],le=ae[Gn];if(wo(ae,ld),le&&le.hasAnimation)continue;let Te=[];if(u.size){let zn=u.get(ae);zn&&zn.length&&Te.push(...zn);let tn=this.driver.query(ae,cd,!0);for(let Ei=0;Ei<tn.length;Ei++){let Qe=u.get(tn[Ei]);Qe&&Qe.length&&Te.push(...Qe)}}let dt=Te.filter(zn=>!zn.destroyed);dt.length?bP(this,ae,dt):this.processLeaveNode(ae)}return U.length=0,xp.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();let ae=this.players.indexOf(te);this.players.splice(ae,1)}),te.play()}),xp}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,a){let d=[];if(e){let u=this.playersByQueriedElement.get(t);u&&(d=u)}else{let u=this.playersByElement.get(t);if(u){let p=!a||a==ms;u.forEach(h=>{h.queued||!p&&h.triggerName!=r||d.push(h)})}}return(i||r)&&(d=d.filter(u=>!(i&&i!=u.namespaceId||r&&r!=u.triggerName))),d}_beforeAnimationBuild(t,e,i){let r=e.triggerName,a=e.element,d=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:r;for(let p of e.timelines){let h=p.element,C=h!==a,w=Jt(i,h,[]);this._getPreviousPlayers(h,C,d,u,e.toState).forEach(D=>{let k=D.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),D.destroy(),w.push(D)})}Gi(a,e.fromStyles)}_buildAnimation(t,e,i,r,a,d){let u=e.triggerName,p=e.element,h=[],C=new Set,w=new Set,P=e.timelines.map(k=>{let W=k.element;C.add(W);let U=W[Gn];if(U&&U.removedBeforeQueried)return new Ci(k.duration,k.delay);let z=W!==p,be=CP((i.get(W)||gP).map($e=>$e.getRealPlayer())).filter($e=>{let qt=$e;return qt.element?qt.element===W:!1}),We=a.get(W),ye=d.get(W),Ft=Xg(this._normalizer,k.keyframes,We,ye),St=this._buildPlayer(k,Ft,be);if(k.subTimeline&&r&&w.add(W),z){let $e=new hs(t,u,W);$e.setRealPlayer(St),h.push($e)}return St});h.forEach(k=>{Jt(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>_P(this.playersByQueriedElement,k.element,k))}),C.forEach(k=>En(k,o0));let D=xi(P);return D.onDestroy(()=>{C.forEach(k=>wo(k,o0)),Un(p,e.toStyles)}),w.forEach(k=>{Jt(r,k,[]).push(D)}),D}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ci(t.duration,t.delay)}},hs=class{namespaceId;triggerName;element;_player=new Ci;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>od(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Jt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function _P(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function vP(n){return n??null}function fd(n){return n&&n.nodeType===1}function yP(n){return n=="start"||n=="done"}function e1(n,t){let e=n.style.display;return n.style.display=t??"none",e}function t1(n,t,e,i,r){let a=[];e.forEach(p=>a.push(e1(p)));let d=[];i.forEach((p,h)=>{let C=new Map;p.forEach(w=>{let P=t.computeStyle(h,w,r);C.set(w,P),(!P||P.length==0)&&(h[Gn]=hP,d.push(h))}),n.set(h,C)});let u=0;return e.forEach(p=>e1(p,a[u++])),d}function n1(n,t){let e=new Map;if(n.forEach(u=>e.set(u,[])),t.length==0)return e;let i=1,r=new Set(t),a=new Map;function d(u){if(!u)return i;let p=a.get(u);if(p)return p;let h=u.parentNode;return e.has(h)?p=h:r.has(h)?p=i:p=d(h),a.set(u,p),p}return t.forEach(u=>{let p=d(u);p!==i&&e.get(p).push(u)}),e}function En(n,t){n.classList?.add(t)}function wo(n,t){n.classList?.remove(t)}function bP(n,t,e){xi(e).onDone(()=>n.processLeaveNode(t))}function CP(n){let t=[];return c1(n,t),t}function c1(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof So?c1(i.players,t):t.push(i)}}function xP(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let a=e[r];if(!t.hasOwnProperty(a)||n[a]!==t[a])return!1}return!0}function i1(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(a=>r.add(a)):t.set(n,i),e.delete(n),!0}var Io=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new C0(t.body,e,i),this._timelineEngine=new y0(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(t,e,i,r,a){let d=t+"-"+r,u=this._triggerCache[d];if(!u){let p=[],h=[],C=o1(this._driver,a,p,h);if(p.length)throw kC(r,p);u=lP(r,C,this._normalizer),this._triggerCache[d]=u}this._transitionEngine.registerTrigger(e,r,u)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[a,d]=e0(i),u=r;this._timelineEngine.command(a,e,d,u)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,a){if(i.charAt(0)=="@"){let[d,u]=e0(i);return this._timelineEngine.listen(d,e,u,a)}return this._transitionEngine.listen(t,e,i,r,a)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function SP(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=u0(t[0]),t.length>1&&(i=u0(t[t.length-1]))):t instanceof Map&&(e=u0(t)),e||i?new EP(n,e,i):null}var EP=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let a=n.initialStylesByElement.get(e);a||n.initialStylesByElement.set(e,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Un(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Un(this._element,this._initialStyles),this._endStyles&&(Un(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Gi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gi(this._element,this._endStyles),this._endStyles=null),Un(this._element,this._initialStyles),this._state=3)}}return n})();function u0(n){let t=null;return n.forEach((e,i)=>{MP(i)&&(t=t||new Map,t.set(i,e))}),t}function MP(n){return n==="display"||n==="position"}var Cd=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let t=this.keyframes,e=this._triggerWebAnimation(this.element,t,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=t.length?t[t.length-1]:new Map;let i=()=>this._onFinish();return e.addEventListener("finish",i),this.onDestroy(()=>{e.removeEventListener("finish",i)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){let r=this._convertKeyframesToObject(e);try{return t.animate(r,i)}catch{return null}}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){let t=this._buildPlayer();t&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),t.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=t*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:ud(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},xd=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return t0(t,e)}getParentElement(t){return sd(t)}query(t,e,i){return n0(t,e,i)}computeStyle(t,e,i){return ud(t,e)}animate(t,e,i,r,a,d=[]){let u=r==0?"both":"forwards",p={duration:i,delay:r,fill:u};a&&(p.easing=a);let h=new Map,C=d.filter(D=>D instanceof Cd);zC(i,r)&&C.forEach(D=>{D.currentSnapshot.forEach((k,W)=>h.set(W,k))});let w=HC(e).map(D=>new Map(D));w=$C(t,w,h);let P=SP(t,w);return new Cd(t,w,p,P)}};var gd="@",d1="@.disabled",Sd=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i,r){if(r){this.delegate.removeChild(t,e,i,r);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==gd&&e==d1?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},x0=class extends Sd{factory;constructor(t,e,i,r,a){super(e,i,r,a),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==gd?e.charAt(1)=="."&&e==d1?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==gd){let a=wP(t),d=e.slice(1),u="";return d.charAt(0)!=gd&&([d,u]=IP(d)),this.engine.listen(this.namespaceId,a,d,u,p=>{let h=p._data||-1;this.factory.scheduleListenerCallback(h,i,p)})}return this.delegate.listen(t,e,i,r)}};function wP(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function IP(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var Ed=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,a)=>{a?.removeChild(null,r)}}createRenderer(t,e){let r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let h=this._rendererCache,C=h.get(r);if(!C){let w=()=>h.delete(r);C=new Sd("",r,this.engine,w),h.set(r,C)}return C}let a=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);let u=h=>{Array.isArray(h)?h.forEach(u):this.engine.registerTrigger(a,d,t,h.name,h)};return e.data.animation.forEach(u),new x0(this,d,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(a=>{let[d,u]=a;d(u)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var PP=(()=>{class n extends Io{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(B(He),B(Or),B(kr))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function TP(){return new hd}function OP(){return new Ed(A(os),A(Io),A(ot))}var p1=[{provide:kr,useFactory:TP},{provide:Io,useClass:PP},{provide:_i,useFactory:OP}],kP=[{provide:Or,useClass:S0},{provide:_c,useValue:"NoopAnimations"},...p1],u1=[{provide:Or,useFactory:()=>new xd},{provide:_c,useFactory:()=>"BrowserAnimations"},...p1],m1=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?kP:u1}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:u1,imports:[ss]})}return n})();var S1=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(I(Fn),I(bn))};static \u0275dir=je({type:n})}return n})(),Ss=(()=>{class n extends S1{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,features:[Tt]})}return n})(),Oo=new J(""),RP={provide:Oo,useExisting:Bt(()=>sn),multi:!0},sn=(()=>{class n extends Ss{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&b("change",function(d){return r.onChange(d.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[xn([RP]),Tt]})}return n})(),NP={provide:Oo,useExisting:Bt(()=>$),multi:!0};function AP(){let n=an()?an().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FP=new J(""),$=(()=>{class n extends S1{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!AP())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(I(Fn),I(bn),I(FP,8))};static \u0275dir=je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&b("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},standalone:!1,features:[xn([NP]),Tt]})}return n})();function LP(n){return n==null||VP(n)===0}function VP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Es=new J(""),E1=new J("");function jP(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function BP(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function WP(n){return LP(n.value)?{required:!0}:null}function f1(n){return null}function M1(n){return n!=null}function w1(n){return Fi(n)?Ye(n):n}function I1(n){let t={};return n.forEach(e=>{t=e!=null?R(R({},t),e):t}),Object.keys(t).length===0?null:t}function D1(n,t){return t.map(e=>e(n))}function UP(n){return!n.validate}function P1(n){return n.map(t=>UP(t)?t:e=>t.validate(e))}function GP(n){if(!n)return null;let t=n.filter(M1);return t.length==0?null:function(e){return I1(D1(e,t))}}function I0(n){return n!=null?GP(P1(n)):null}function HP(n){if(!n)return null;let t=n.filter(M1);return t.length==0?null:function(e){let i=D1(e,t).map(w1);return or(i).pipe(Ee(I1))}}function D0(n){return n!=null?HP(P1(n)):null}function g1(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function qP(n){return n._rawValidators}function zP(n){return n._rawAsyncValidators}function M0(n){return n?Array.isArray(n)?n:[n]:[]}function wd(n,t){return Array.isArray(n)?n.includes(t):n===t}function h1(n,t){let e=M0(t);return M0(n).forEach(r=>{wd(e,r)||e.push(r)}),e}function _1(n,t){return M0(t).filter(e=>!wd(n,e))}var Id=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=I0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=D0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},To=class extends Id{name;get formDirective(){return null}get path(){return null}},xs=class extends Id{_parent=null;name=null;valueAccessor=null},Dd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var q=(()=>{class n extends Dd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(I(xs,2))};static \u0275dir=je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ne("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Tt]})}return n})(),Rd=(()=>{class n extends Dd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(I(To,10))};static \u0275dir=je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ne("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Tt]})}return n})();var _s="VALID",Md="INVALID",Do="PENDING",vs="DISABLED",Hi=class{},Pd=class extends Hi{value;source;constructor(t,e){super(),this.value=t,this.source=e}},bs=class extends Hi{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Cs=class extends Hi{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Po=class extends Hi{status;source;constructor(t,e){super(),this.status=t,this.source=e}},w0=class extends Hi{source;constructor(t){super(),this.source=t}},Td=class extends Hi{source;constructor(t){super(),this.source=t}};function T1(n){return(Nd(n)?n.validators:n)||null}function $P(n){return Array.isArray(n)?I0(n):n||null}function O1(n,t){return(Nd(t)?t.asyncValidators:n)||null}function QP(n){return Array.isArray(n)?D0(n):n||null}function Nd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function KP(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new N(1e3,"");if(!i[e])throw new N(1001,"")}function YP(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new N(1002,"")})}var Od=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return lt(this.statusReactive)}set status(t){lt(()=>this.statusReactive.set(t))}_status=yo(()=>this.statusReactive());statusReactive=yn(void 0);get valid(){return this.status===_s}get invalid(){return this.status===Md}get pending(){return this.status==Do}get disabled(){return this.status===vs}get enabled(){return this.status!==vs}errors;get pristine(){return lt(this.pristineReactive)}set pristine(t){lt(()=>this.pristineReactive.set(t))}_pristine=yo(()=>this.pristineReactive());pristineReactive=yn(!0);get dirty(){return!this.pristine}get touched(){return lt(this.touchedReactive)}set touched(t){lt(()=>this.touchedReactive.set(t))}_touched=yo(()=>this.touchedReactive());touchedReactive=yn(!1);get untouched(){return!this.touched}_events=new st;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(h1(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(h1(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_1(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_1(t,this._rawAsyncValidators))}hasValidator(t){return wd(this._rawValidators,t)}hasAsyncValidator(t){return wd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(me(R({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Cs(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Cs(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(me(R({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new bs(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new bs(!0,i))}markAsPending(t={}){this.status=Do;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Po(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(me(R({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=vs,this.errors=null,this._forEachChild(r=>{r.disable(me(R({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Pd(this.value,i)),this._events.next(new Po(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(R({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=_s,this._forEachChild(i=>{i.enable(me(R({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(me(R({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_s||this.status===Do)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Pd(this.value,e)),this._events.next(new Po(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(me(R({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vs:_s}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Do,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=w1(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Po(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?vs:this.errors?Md:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Do)?Do:this._anyControlsHaveStatus(Md)?Md:_s}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new bs(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Cs(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=$P(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=QP(this._rawAsyncValidators)}},kd=class extends Od{constructor(t,e,i){super(T1(e),O1(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){YP(this,!0,t),Object.keys(t).forEach(i=>{KP(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,me(R({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Td(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ad=new J("",{factory:()=>Fd}),Fd="always";function ZP(n,t){return[...t.path,n]}function k1(n,t,e=Fd){R1(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),XP(n,t),tT(n,t),eT(n,t),JP(n,t)}function v1(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function JP(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function R1(n,t){let e=qP(n);t.validator!==null?n.setValidators(g1(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=zP(n);t.asyncValidator!==null?n.setAsyncValidators(g1(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();v1(t._rawValidators,r),v1(t._rawAsyncValidators,r)}function XP(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&N1(n,t)})}function eT(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&N1(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function N1(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tT(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function nT(n,t){n==null,R1(n,t)}function iT(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function rT(n){return Object.getPrototypeOf(n.constructor)===Ss}function oT(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function aT(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(a=>{a.constructor===$?e=a:rT(a)?i=a:r=a}),r||i||e||null}var sT={provide:To,useExisting:Bt(()=>Ms)},ys=Promise.resolve(),Ms=(()=>{class n extends To{callSetDisabledState;get submitted(){return lt(this.submittedReactive)}_submitted=yo(()=>this.submittedReactive());submittedReactive=yn(!1);_directives=new Set;form;ngSubmit=new Xe;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new kd({},I0(e),D0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ys.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),k1(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ys.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ys.then(()=>{let i=this._findContainer(e.path),r=new kd({});nT(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ys.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){ys.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),oT(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new w0(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(I(Es,10),I(E1,10),I(Ad,8))};static \u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&b("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xn([sT]),Tt]})}return n})();function y1(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function b1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var lT=class extends Od{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(T1(e),O1(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(b1(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new Td(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){y1(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){y1(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){b1(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var cT={provide:xs,useExisting:Bt(()=>H)},C1=Promise.resolve(),H=(()=>{class n extends xs{_changeDetectorRef;callSetDisabledState;control=new lT;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Xe;constructor(e,i,r,a,d,u){super(),this._changeDetectorRef=d,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=aT(this,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),iT(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){k1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){C1.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&ji(i);C1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ZP(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(I(To,9),I(Es,10),I(E1,10),I(Oo,10),I(Vi,8),I(Ad,8))};static \u0275dir=je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xn([cT]),Tt,vi]})}return n})();var Ld=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),dT={provide:Oo,useExisting:Bt(()=>Oe),multi:!0},Oe=(()=>{class n extends Ss{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&b("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[xn([dT]),Tt]})}return n})();var uT=new J("");var pT={provide:Oo,useExisting:Bt(()=>K),multi:!0};function A1(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function mT(n){return n.split(":")[0]}var K=(()=>{class n extends Ss{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=A(ii).injector;destroyRef=A(_n);cdr=A(Vi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ba({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=A1(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=mT(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&b("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xn([pT]),Tt]})}return n})(),Y=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(A1(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(I(bn),I(Fn),I(K,9))};static \u0275dir=je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),fT={provide:Oo,useExisting:Bt(()=>F1),multi:!0};function x1(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function gT(n){return n.split(":")[0]}var F1=(()=>{class n extends Ss{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(a=>this._getOptionId(a));i=(a,d)=>{a._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],a=i.selectedOptions;if(a!==void 0){let d=a;for(let u=0;u<d.length;u++){let p=d[u],h=this._getOptionValue(p.value);r.push(h)}}else{let d=i.options;for(let u=0;u<d.length;u++){let p=d[u];if(p.selected){let h=this._getOptionValue(p.value);r.push(h)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=gT(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&b("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xn([fT]),Tt]})}return n})(),Z=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(x1(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(x1(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(I(bn),I(Fn),I(F1,9))};static \u0275dir=je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function L1(n){return typeof n=="number"?n:parseFloat(n)}var P0=(()=>{class n{_validator=f1;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):f1,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=je({type:n,features:[vi]})}return n})(),hT={provide:Es,useExisting:Bt(()=>Rr),multi:!0},Rr=(()=>{class n extends P0{max;inputName="max";normalizeInput=e=>L1(e);createValidator=e=>BP(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Li("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[xn([hT]),Tt]})}return n})(),_T={provide:Es,useExisting:Bt(()=>qe),multi:!0},qe=(()=>{class n extends P0{min;inputName="min";normalizeInput=e=>L1(e);createValidator=e=>jP(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Li("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[xn([_T]),Tt]})}return n})(),vT={provide:Es,useExisting:Bt(()=>ln),multi:!0};var ln=(()=>{class n extends P0{required;inputName="required";normalizeInput=ji;createValidator=e=>WP;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275dir=je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Li("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[xn([vT]),Tt]})}return n})();var V1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({})}return n})();var j1=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ad,useValue:e.callSetDisabledState??Fd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({imports:[V1]})}return n})(),B1=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:uT,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ad,useValue:e.callSetDisabledState??Fd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({imports:[V1]})}return n})();var qi=class n{constructor(t){this.http=t;this.loadUserFromStorage()}baseUrl="/api/auth";currentUserSubject=new Ke(null);currentUser$=this.currentUserSubject.asObservable();loadUserFromStorage(){let t=localStorage.getItem("token"),e=localStorage.getItem("user");t&&e&&this.currentUserSubject.next(JSON.parse(e))}parsePermissions(t){if(!t)return{};if(t==="all")return{all:["all"]};try{return JSON.parse(t)}catch{return{}}}login(t){return this.http.post(`${this.baseUrl}/login`,t).pipe(rt(e=>{localStorage.setItem("token",e.token);let i={username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions)};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}register(t){return this.http.post(`${this.baseUrl}/register`,t).pipe(rt(e=>{localStorage.setItem("token",e.token);let i={username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,permissions:this.parsePermissions(e.permissions)};localStorage.setItem("user",JSON.stringify(i)),this.currentUserSubject.next(i)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}getToken(){return localStorage.getItem("token")}isLoggedIn(){return!!this.getToken()}getCurrentUser(){return this.currentUserSubject.value}hasRole(t){return this.getCurrentUser()?.role===t}isAdmin(){let t=this.getCurrentUser();return t?t.role==="ADMIN"||(t.permissions?.all?.includes("all")??!1):!1}hasFeatureAccess(t){let e=this.getCurrentUser();return e?this.isAdmin()?!0:!!e.permissions[t]&&e.permissions[t].length>0:!1}hasPermission(t,e){let i=this.getCurrentUser();return i?this.isAdmin()?!0:i.permissions[t]?.includes(e)||!1:!1}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var he="primary",Fs=Symbol("RouteTitle"),A0=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Lr(n){return new A0(n)}function K1(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let a=0;a<i.length;a++){let d=i[a],u=n[a];if(d[0]===":")r[d.substring(1)]=u;else if(d!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Gd(n){return new Promise((t,e)=>{n.pipe(ui()).subscribe({next:i=>t(i),error:i=>e(i)})})}function yT(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!oi(n[e],t[e]))return!1;return!0}function oi(n,t){let e=n?F0(n):void 0,i=t?F0(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!Y1(n[r],t[r]))return!1;return!0}function F0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Y1(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,a)=>i[a]===r)}else return n===t}function Z1(n){return n.length>0?n[n.length-1]:null}function Vr(n){return _l(n)?n:Fi(n)?Ye(Promise.resolve(n)):ce(n)}function J1(n){return _l(n)?Gd(n):Promise.resolve(n)}var bT={exact:ex,subset:tx},X1={exact:CT,subset:xT,ignored:()=>!0};function W1(n,t,e){return bT[e.paths](n.root,t.root,e.matrixParams)&&X1[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function CT(n,t){return oi(n,t)}function ex(n,t,e){if(!Ar(n.segments,t.segments)||!Bd(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!ex(n.children[i],t.children[i],e))return!1;return!0}function xT(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Y1(n[e],t[e]))}function tx(n,t,e){return nx(n,t,t.segments,e)}function nx(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Ar(r,e)||t.hasChildren()||!Bd(r,e,i))}else if(n.segments.length===e.length){if(!Ar(n.segments,e)||!Bd(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!tx(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),a=e.slice(n.segments.length);return!Ar(n.segments,r)||!Bd(n.segments,r,i)||!n.children[he]?!1:nx(n.children[he],t,a,i)}}function Bd(n,t,e){return t.every((i,r)=>X1[e](n[r].parameters,i.parameters))}var qn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ne([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){return MT.serialize(this)}},Ne=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wd(this)}},zi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Lr(this.parameters),this._parameterMap}toString(){return rx(this)}};function ST(n,t){return Ar(n,t)&&n.every((e,i)=>oi(e.parameters,t[i].parameters))}function Ar(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function ET(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===he&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==he&&(e=e.concat(t(r,i)))}),e}var jr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>new Si,providedIn:"root"})}return n})(),Si=class{parse(t){let e=new V0(t);return new qn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ws(t.root,!0)}`,i=DT(t.queryParams),r=typeof t.fragment=="string"?`#${wT(t.fragment)}`:"";return`${e}${i}${r}`}},MT=new Si;function Wd(n){return n.segments.map(t=>rx(t)).join("/")}function ws(n,t){if(!n.hasChildren())return Wd(n);if(t){let e=n.children[he]?ws(n.children[he],!1):"",i=[];return Object.entries(n.children).forEach(([r,a])=>{r!==he&&i.push(`${r}:${ws(a,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=ET(n,(i,r)=>r===he?[ws(n.children[he],!1)]:[`${r}:${ws(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${Wd(n)}/${e[0]}`:`${Wd(n)}/(${e.join("//")})`}}function ix(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vd(n){return ix(n).replace(/%3B/gi,";")}function wT(n){return encodeURI(n)}function L0(n){return ix(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ud(n){return decodeURIComponent(n)}function U1(n){return Ud(n.replace(/\+/g,"%20"))}function rx(n){return`${L0(n.path)}${IT(n.parameters)}`}function IT(n){return Object.entries(n).map(([t,e])=>`;${L0(t)}=${L0(e)}`).join("")}function DT(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Vd(e)}=${Vd(r)}`).join("&"):`${Vd(e)}=${Vd(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var PT=/^[^\/()?;#]+/;function O0(n){let t=n.match(PT);return t?t[0]:""}var TT=/^[^\/()?;=#]+/;function OT(n){let t=n.match(TT);return t?t[0]:""}var kT=/^[^=?&#]+/;function RT(n){let t=n.match(kT);return t?t[0]:""}var NT=/^[^&#]+/;function AT(n){let t=n.match(NT);return t?t[0]:""}var V0=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[he]=new Ne(t,e)),i}parseSegment(){let t=O0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(t),new zi(Ud(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=OT(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=O0(this.remaining);r&&(i=r,this.capture(i))}t[Ud(e)]=Ud(i)}parseQueryParam(t){let e=RT(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let d=AT(this.remaining);d&&(i=d,this.capture(i))}let r=U1(e),a=U1(i);if(t.hasOwnProperty(r)){let d=t[r];Array.isArray(d)||(d=[d],t[r]=d),d.push(a)}else t[r]=a}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=O0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new N(4010,!1);let a;i.indexOf(":")>-1?(a=i.slice(0,i.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=he);let d=this.parseChildren();e[a??he]=Object.keys(d).length===1&&d[he]?d[he]:new Ne([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new N(4011,!1)}};function ox(n){return n.segments.length>0?new Ne([],{[he]:n}):n}function ax(n){let t={};for(let[i,r]of Object.entries(n.children)){let a=ax(r);if(i===he&&a.segments.length===0&&a.hasChildren())for(let[d,u]of Object.entries(a.children))t[d]=u;else(a.segments.length>0||a.hasChildren())&&(t[i]=a)}let e=new Ne(n.segments,t);return FT(e)}function FT(n){if(n.numberOfChildren===1&&n.children[he]){let t=n.children[he];return new Ne(n.segments.concat(t.segments),t.children)}return n}function $i(n){return n instanceof qn}function sx(n,t,e=null,i=null,r=new Si){let a=lx(n);return cx(a,t,e,i,r)}function lx(n){let t;function e(a){let d={};for(let p of a.children){let h=e(p);d[p.outlet]=h}let u=new Ne(a.url,d);return a===n&&(t=u),u}let i=e(n.root),r=ox(i);return t??r}function cx(n,t,e,i,r){let a=n;for(;a.parent;)a=a.parent;if(t.length===0)return k0(a,a,a,e,i,r);let d=LT(t);if(d.toRoot())return k0(a,a,new Ne([],{}),e,i,r);let u=VT(d,a,n),p=u.processChildren?Ds(u.segmentGroup,u.index,d.commands):ux(u.segmentGroup,u.index,d.commands);return k0(a,u.segmentGroup,p,e,i,r)}function Hd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ts(n){return typeof n=="object"&&n!=null&&n.outlets}function G1(n,t,e){n||="\u0275";let i=new qn;return i.queryParams={[n]:t},e.parse(e.serialize(i)).queryParams[n]}function k0(n,t,e,i,r,a){let d={};for(let[h,C]of Object.entries(i??{}))d[h]=Array.isArray(C)?C.map(w=>G1(h,w,a)):G1(h,C,a);let u;n===t?u=e:u=dx(n,t,e);let p=ox(ax(u));return new qn(p,d,r)}function dx(n,t,e){let i={};return Object.entries(n.children).forEach(([r,a])=>{a===t?i[r]=e:i[r]=dx(a,t,e)}),new Ne(n.segments,i)}var qd=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Hd(i[0]))throw new N(4003,!1);let r=i.find(Ts);if(r&&r!==Z1(i))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qd(!0,0,n);let t=0,e=!1,i=n.reduce((r,a,d)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let u={};return Object.entries(a.outlets).forEach(([p,h])=>{u[p]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:u}]}if(a.segmentPath)return[...r,a.segmentPath]}return typeof a!="string"?[...r,a]:d===0?(a.split("/").forEach((u,p)=>{p==0&&u==="."||(p==0&&u===""?e=!0:u===".."?t++:u!=""&&r.push(u))}),r):[...r,a]},[]);return new qd(e,t,i)}var Ro=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function VT(n,t,e){if(n.isAbsolute)return new Ro(t,!0,0);if(!e)return new Ro(t,!1,NaN);if(e.parent===null)return new Ro(e,!0,0);let i=Hd(n.commands[0])?0:1,r=e.segments.length-1+i;return jT(e,r,n.numberOfDoubleDots)}function jT(n,t,e){let i=n,r=t,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new N(4005,!1);r=i.segments.length}return new Ro(i,!1,r-a)}function BT(n){return Ts(n[0])?n[0].outlets:{[he]:n}}function ux(n,t,e){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return Ds(n,t,e);let i=WT(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let a=new Ne(n.segments.slice(0,i.pathIndex),{});return a.children[he]=new Ne(n.segments.slice(i.pathIndex),n.children),Ds(a,0,r)}else return i.match&&r.length===0?new Ne(n.segments,{}):i.match&&!n.hasChildren()?j0(n,t,e):i.match?Ds(n,0,r):j0(n,t,e)}function Ds(n,t,e){if(e.length===0)return new Ne(n.segments,{});{let i=BT(e),r={};if(Object.keys(i).some(a=>a!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let a=Ds(n.children[he],t,e);return new Ne(n.segments,a.children)}return Object.entries(i).forEach(([a,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(r[a]=ux(n.children[a],t,d))}),Object.entries(n.children).forEach(([a,d])=>{i[a]===void 0&&(r[a]=d)}),new Ne(n.segments,r)}}function WT(n,t,e){let i=0,r=t,a={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return a;let d=n.segments[r],u=e[i];if(Ts(u))break;let p=`${u}`,h=i<e.length-1?e[i+1]:null;if(r>0&&p===void 0)break;if(p&&h&&typeof h=="object"&&h.outlets===void 0){if(!q1(p,h,d))return a;i+=2}else{if(!q1(p,{},d))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function j0(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let a=e[r];if(Ts(a)){let p=UT(a.outlets);return new Ne(i,p)}if(r===0&&Hd(e[0])){let p=n.segments[t];i.push(new zi(p.path,H1(e[0]))),r++;continue}let d=Ts(a)?a.outlets[he]:`${a}`,u=r<e.length-1?e[r+1]:null;d&&u&&Hd(u)?(i.push(new zi(d,H1(u))),r+=2):(i.push(new zi(d,{})),r++)}return new Ne(i,{})}function UT(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=j0(new Ne([],{}),0,i))}),t}function H1(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function q1(n,t,e){return n==e.path&&oi(t,e.parameters)}var No="imperative",ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ct||{}),dn=class{id;url;constructor(t,e){this.id=t,this.url=e}},Qi=class extends dn{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mn=class extends dn{urlAfterRedirects;type=ct.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Gt||{}),Fo=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Fo||{}),ai=class extends dn{reason;code;type=ct.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},si=class extends dn{reason;code;type=ct.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Lo=class extends dn{error;target;type=ct.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Os=class extends dn{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zd=class extends dn{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends dn{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(t,e,i,r,a){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qd=class extends dn{urlAfterRedirects;state;type=ct.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kd=class extends dn{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yd=class{route;type=ct.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zd=class{route;type=ct.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jd=class{snapshot;type=ct.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xd=class{snapshot;type=ct.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{snapshot;type=ct.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{snapshot;type=ct.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vo=class{routerEvent;position;anchor;type=ct.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ks=class{},jo=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function GT(n){return!(n instanceof ks)&&!(n instanceof jo)}function HT(n,t){return n.providers&&!n._injector&&(n._injector=_o(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Hn(n){return n.outlet||he}function qT(n,t){let e=n.filter(i=>Hn(i)===t);return e.push(...n.filter(i=>Hn(i)!==t)),e}function Uo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var nu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Uo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Br(this.rootInjector)}},Br=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new nu(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(B(et))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=B0(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=B0(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=W0(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return W0(t,this._root).map(e=>e.value)}};function B0(n,t){if(n===t.value)return t;for(let e of t.children){let i=B0(n,e);if(i)return i}return null}function W0(n,t){if(n===t.value)return[t];for(let e of t.children){let i=W0(n,e);if(i.length)return i.unshift(t),i}return[]}var cn=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ko(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Rs=class extends iu{snapshot;constructor(t,e){super(t),this.snapshot=e,$0(this,t)}toString(){return this.snapshot.toString()}};function px(n){let t=zT(n),e=new Ke([new zi("",{})]),i=new Ke({}),r=new Ke({}),a=new Ke({}),d=new Ke(""),u=new Je(e,i,a,d,r,he,n,t.root);return u.snapshot=t.root,new Rs(new cn(u,[]),t)}function zT(n){let t={},e={},i={},a=new Fr([],t,i,"",e,he,n,null,{});return new Ns("",new cn(a,[]))}var Je=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,a,d,u,p){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=a,this.outlet=d,this.component=u,this._futureSnapshot=p,this.title=this.dataSubject?.pipe(Ee(h=>h[Fs]))??ce(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ee(t=>Lr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ee(t=>Lr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ru(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:R(R({},t.params),n.params),data:R(R({},t.data),n.data),resolve:R(R(R(R({},n.data),t.data),r?.data),n._resolvedData)}:i={params:R({},n.params),data:R({},n.data),resolve:R(R({},n.data),n._resolvedData??{})},r&&fx(r)&&(i.resolve[Fs]=r.title),i}var Fr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Fs]}constructor(t,e,i,r,a,d,u,p,h){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=d,this.component=u,this.routeConfig=p,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ns=class extends iu{url;constructor(t,e){super(e),this.url=t,$0(this,e)}toString(){return mx(this._root)}};function $0(n,t){t.value._routerState=n,t.children.forEach(e=>$0(n,e))}function mx(n){let t=n.children.length>0?` { ${n.children.map(mx).join(", ")} } `:"";return`${n.value}${t}`}function R0(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,oi(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),oi(t.params,e.params)||n.paramsSubject.next(e.params),yT(t.url,e.url)||n.urlSubject.next(e.url),oi(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function U0(n,t){let e=oi(n.params,t.params)&&ST(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||U0(n.parent,t.parent))}function fx(n){return typeof n.title=="string"||n.title===null}var gx=new J(""),Wr=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new Xe;deactivateEvents=new Xe;attachEvents=new Xe;detachEvents=new Xe;routerOutletData=sb();parentContexts=A(Br);location=A(Er);changeDetector=A(Vi);inputBinder=A(Ls,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=e;let r=this.location,d=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,p=new G0(e,u,r.injector,this.routerOutletData);this.activated=r.createComponent(d,{index:r.length,injector:p,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=je({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vi]})}return n})(),G0=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Je?this.route:t===Br?this.childContexts:t===gx?this.outletData:this.parent.get(t,e)}},Ls=new J(""),Q0=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Cl([i.queryParams,i.params,i.data]).pipe(rn(([a,d,u],p)=>(u=R(R(R({},a),d),u),p===0?ce(u):Promise.resolve(u)))).subscribe(a=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let d=pb(i.component);if(!d){this.unsubscribeFromRouteData(e);return}for(let{templateName:u}of d.inputs)e.activatedComponentRef.setInput(u,a[u])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),K0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&_(0,"router-outlet")},dependencies:[Wr],encapsulation:2})}return n})();function Y0(n){let t=n.children&&n.children.map(Y0),e=t?me(R({},n),{children:t}):R({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==he&&(e.component=K0),e}function $T(n,t,e){let i=As(n,t._root,e?e._root:void 0);return new Rs(i,t)}function As(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=QT(n,t,e);return new cn(i,r)}else{if(n.shouldAttach(t.value)){let a=n.retrieve(t.value);if(a!==null){let d=a.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(u=>As(n,u)),d}}let i=KT(t.value),r=t.children.map(a=>As(n,a));return new cn(i,r)}}function QT(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return As(n,i,r);return As(n,i)})}function KT(n){return new Je(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var Bo=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},hx="ngNavigationCancelingError";function ou(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=$i(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=_x(!1,Gt.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function _x(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[hx]=!0,e.cancellationCode=t,e}function YT(n){return vx(n)&&$i(n.url)}function vx(n){return!!n&&n[hx]}var ZT=(n,t,e,i)=>Ee(r=>(new H0(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),H0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=a}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),R0(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=ko(e);t.children.forEach(a=>{let d=a.value.outlet;this.deactivateRoutes(a,r[d],i),delete r[d]}),Object.values(r).forEach(a=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(t,e,i){let r=t.value,a=e?e.value:null;if(r===a)if(r.component){let d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,a=ko(t);for(let d of Object.values(a))this.deactivateRouteAndItsChildren(d,r);if(i&&i.outlet){let d=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,a=ko(t);for(let d of Object.values(a))this.deactivateRouteAndItsChildren(d,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=ko(e);t.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new tu(a.value.snapshot))}),t.children.length&&this.forwardEvent(new Xd(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,a=e?e.value:null;if(R0(r),r===a)if(r.component){let d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(u.contexts),d.attachRef=u.componentRef,d.route=u.route.value,d.outlet&&d.outlet.attach(u.componentRef,u.route.value),R0(u.route.value),this.activateChildRoutes(t,null,d.children)}else d.attachRef=null,d.route=r,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(t,null,d.children)}else this.activateChildRoutes(t,null,i)}},au=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ao=class{component;route;constructor(t,e){this.component=t,this.route=e}};function JT(n,t,e){let i=n._root,r=t?t._root:null;return Is(i,r,e,[i.value])}function XT(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Go(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!dm(n)?n:t.get(n):i}function Is(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let a=ko(t);return n.children.forEach(d=>{eO(d,a[d.value.outlet],e,i.concat([d.value]),r),delete a[d.value.outlet]}),Object.entries(a).forEach(([d,u])=>Ps(u,e.getContext(d),r)),r}function eO(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let a=n.value,d=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){let p=tO(d,a,a.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new au(i)):(a.data=d.data,a._resolvedData=d._resolvedData),a.component?Is(n,t,u?u.children:null,i,r):Is(n,t,e,i,r),p&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new Ao(u.outlet.component,d))}else d&&Ps(t,u,r),r.canActivateChecks.push(new au(i)),a.component?Is(n,null,u?u.children:null,i,r):Is(n,null,e,i,r);return r}function tO(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ar(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ar(n.url,t.url)||!oi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!U0(n,t)||!oi(n.queryParams,t.queryParams);case"paramsChange":default:return!U0(n,t)}}function Ps(n,t,e){let i=ko(n),r=n.value;Object.entries(i).forEach(([a,d])=>{r.component?t?Ps(d,t.children.getContext(a),e):Ps(d,null,e):Ps(d,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ao(t.outlet.component,r)):e.canDeactivateChecks.push(new Ao(null,r)):e.canDeactivateChecks.push(new Ao(null,r))}function Vs(n){return typeof n=="function"}function nO(n){return typeof n=="boolean"}function iO(n){return n&&Vs(n.canLoad)}function rO(n){return n&&Vs(n.canActivate)}function oO(n){return n&&Vs(n.canActivateChild)}function aO(n){return n&&Vs(n.canDeactivate)}function sO(n){return n&&Vs(n.canMatch)}function yx(n){return n instanceof rr||n?.name==="EmptyError"}var jd=Symbol("INITIAL_VALUE");function Wo(){return rn(n=>Cl(n.map(t=>t.pipe(di(1),$p(jd)))).pipe(Ee(t=>{for(let e of t)if(e!==!0){if(e===jd)return jd;if(e===!1||lO(e))return e}return!0}),Qt(t=>t!==jd),di(1)))}function lO(n){return $i(n)||n instanceof Bo}function bx(n){return n.aborted?ce(void 0).pipe(di(1)):new we(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function Cx(n){return oa(bx(n))}function cO(n,t){return ht(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:d}}=e;return d.length===0&&a.length===0?ce(me(R({},e),{guardsResult:!0})):dO(d,i,r,n).pipe(ht(u=>u&&nO(u)?uO(i,a,n,t):ce(u)),Ee(u=>me(R({},e),{guardsResult:u})))})}function dO(n,t,e,i){return Ye(n).pipe(ht(r=>hO(r.component,r.route,e,t,i)),ui(r=>r!==!0,!0))}function uO(n,t,e,i){return Ye(t).pipe(wi(r=>Jr(mO(r.route.parent,i),pO(r.route,i),gO(n,r.path,e),fO(n,r.route,e))),ui(r=>r!==!0,!0))}function pO(n,t){return n!==null&&t&&t(new eu(n)),ce(!0)}function mO(n,t){return n!==null&&t&&t(new Jd(n)),ce(!0)}function fO(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return ce(!0);let r=i.map(a=>ra(()=>{let d=Uo(t)??e,u=Go(a,d),p=rO(u)?u.canActivate(t,n):ut(d,()=>u(t,n));return Vr(p).pipe(ui())}));return ce(r).pipe(Wo())}function gO(n,t,e){let i=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(d=>XT(d)).filter(d=>d!==null).map(d=>ra(()=>{let u=d.guards.map(p=>{let h=Uo(d.node)??e,C=Go(p,h),w=oO(C)?C.canActivateChild(i,n):ut(h,()=>C(i,n));return Vr(w).pipe(ui())});return ce(u).pipe(Wo())}));return ce(a).pipe(Wo())}function hO(n,t,e,i,r){let a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||a.length===0)return ce(!0);let d=a.map(u=>{let p=Uo(t)??r,h=Go(u,p),C=aO(h)?h.canDeactivate(n,t,e,i):ut(p,()=>h(n,t,e,i));return Vr(C).pipe(ui())});return ce(d).pipe(Wo())}function _O(n,t,e,i,r){let a=t.canLoad;if(a===void 0||a.length===0)return ce(!0);let d=a.map(u=>{let p=Go(u,n),h=iO(p)?p.canLoad(t,e):ut(n,()=>p(t,e)),C=Vr(h);return r?C.pipe(Cx(r)):C});return ce(d).pipe(Wo(),xx(i))}function xx(n){return Gp(rt(t=>{if(typeof t!="boolean")throw ou(n,t)}),Ee(t=>t===!0))}function vO(n,t,e,i,r){let a=t.canMatch;if(!a||a.length===0)return ce(!0);let d=a.map(u=>{let p=Go(u,n),h=sO(p)?p.canMatch(t,e):ut(n,()=>p(t,e)),C=Vr(h);return r?C.pipe(Cx(r)):C});return ce(d).pipe(Wo(),xx(i))}var Nr=class Sx extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,Sx.prototype)}},q0=class Ex extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,Ex.prototype)}};function yO(n){throw new N(4e3,!1)}function bO(n){throw _x(!1,Gt.GuardRejected)}var CO=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[he])throw yO(`${t.redirectTo}`);r=r.children[he]}}async applyRedirectCommands(t,e,i,r,a){let d=await xO(e,r,a);if(d instanceof qn)throw new q0(d);let u=this.applyRedirectCreateUrlTree(d,this.urlSerializer.parse(d),t,i);if(d[0]==="/")throw new q0(u);return u}applyRedirectCreateUrlTree(t,e,i,r){let a=this.createSegmentGroup(t,e.root,i,r);return new qn(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,a])=>{if(typeof a=="string"&&a[0]===":"){let u=a.substring(1);i[r]=e[u]}else i[r]=a}),i}createSegmentGroup(t,e,i,r){let a=this.createSegments(t,e.segments,i,r),d={};return Object.entries(e.children).forEach(([u,p])=>{d[u]=this.createSegmentGroup(t,p,i,r)}),new Ne(a,d)}createSegments(t,e,i,r){return e.map(a=>a.path[0]===":"?this.findPosParam(t,a,r):this.findOrReturn(a,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new N(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}};function xO(n,t,e){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:a,routeConfig:d,url:u,outlet:p,params:h,data:C,title:w}=t;return Gd(Vr(ut(e,()=>i({params:h,data:C,queryParams:r,fragment:a,routeConfig:d,url:u,outlet:p,title:w}))))}var z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SO(n,t,e,i,r,a){let d=Mx(n,t,e);return d.matched?(i=HT(t,i),vO(i,t,e,r,a).pipe(Ee(u=>u===!0?d:R({},z0)))):ce(d)}function Mx(n,t,e){if(t.path==="**")return EO(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?R({},z0):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||K1)(e,n,t);if(!r)return R({},z0);let a={};Object.entries(r.posParams??{}).forEach(([u,p])=>{a[u]=p.path});let d=r.consumed.length>0?R(R({},a),r.consumed[r.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function EO(n){return{matched:!0,parameters:n.length>0?Z1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function z1(n,t,e,i){return e.length>0&&IO(n,e,i)?{segmentGroup:new Ne(t,wO(i,new Ne(e,n.children))),slicedSegments:[]}:e.length===0&&DO(n,e,i)?{segmentGroup:new Ne(n.segments,MO(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:e}}function MO(n,t,e,i){let r={};for(let a of e)if(lu(n,t,a)&&!i[Hn(a)]){let d=new Ne([],{});r[Hn(a)]=d}return R(R({},i),r)}function wO(n,t){let e={};e[he]=t;for(let i of n)if(i.path===""&&Hn(i)!==he){let r=new Ne([],{});e[Hn(i)]=r}return e}function IO(n,t,e){return e.some(i=>lu(n,t,i)&&Hn(i)!==he)}function DO(n,t,e){return e.some(i=>lu(n,t,i))}function lu(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function PO(n,t,e){return t.length===0&&!n.children[e]}var TO=class{};async function OO(n,t,e,i,r,a,d="emptyOnly",u){return new RO(n,t,e,i,r,d,a,u).recognize()}var kO=31,RO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,a,d,u,p){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=a,this.paramsInheritanceStrategy=d,this.urlSerializer=u,this.abortSignal=p,this.applyRedirects=new CO(this.urlSerializer,this.urlTree)}noMatchError(t){return new N(4002,`'${t.segmentGroup}'`)}async recognize(){let t=z1(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:i}=await this.match(t),r=new cn(i,e),a=new Ns("",r),d=sx(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(d),{state:a,tree:d}}async match(t){let e=new Fr([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,he,e),rootSnapshot:e}}catch(i){if(i instanceof q0)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Nr?this.noMatchError(i):i}}async processSegmentGroup(t,e,i,r,a){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,e,i,a);let d=await this.processSegment(t,e,i,i.segments,r,!0,a);return d instanceof cn?[d]:[]}async processChildren(t,e,i,r){let a=[];for(let p of Object.keys(i.children))p==="primary"?a.unshift(p):a.push(p);let d=[];for(let p of a){let h=i.children[p],C=qT(e,p),w=await this.processSegmentGroup(t,C,h,p,r);d.push(...w)}let u=wx(d);return NO(u),u}async processSegment(t,e,i,r,a,d,u){for(let p of e)try{return await this.processSegmentAgainstRoute(p._injector??t,e,p,i,r,a,d,u)}catch(h){if(h instanceof Nr||yx(h))continue;throw h}if(PO(i,r,a))return new TO;throw new Nr(i)}async processSegmentAgainstRoute(t,e,i,r,a,d,u,p){if(Hn(i)!==d&&(d===he||!lu(r,a,i)))throw new Nr(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,r,i,a,d,p);if(this.allowRedirects&&u)return this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,a,d,p);throw new Nr(r)}async expandSegmentAgainstRouteUsingRedirect(t,e,i,r,a,d,u){let{matched:p,parameters:h,consumedSegments:C,positionalParamSegments:w,remainingSegments:P}=Mx(e,r,a);if(!p)throw new Nr(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kO&&(this.allowRedirects=!1));let D=new Fr(a,h,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,$1(r),Hn(r),r.component??r._loadedComponent??null,r,Q1(r)),k=ru(D,u,this.paramsInheritanceStrategy);if(D.params=Object.freeze(k.params),D.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let W=await this.applyRedirects.applyRedirectCommands(C,r.redirectTo,w,D,t),U=await this.applyRedirects.lineralizeSegments(r,W);return this.processSegment(t,i,e,U.concat(P),d,!1,u)}async matchSegmentAgainstRoute(t,e,i,r,a,d){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let u=await Gd(SO(e,i,r,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(e.children={}),!u?.matched)throw new Nr(e);t=i._injector??t;let{routes:p}=await this.getChildConfig(t,i,r),h=i._loadedInjector??t,{parameters:C,consumedSegments:w,remainingSegments:P}=u,D=new Fr(w,C,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,$1(i),Hn(i),i.component??i._loadedComponent??null,i,Q1(i)),k=ru(D,d,this.paramsInheritanceStrategy);D.params=Object.freeze(k.params),D.data=Object.freeze(k.data);let{segmentGroup:W,slicedSegments:U}=z1(e,w,P,p);if(U.length===0&&W.hasChildren()){let We=await this.processChildren(h,p,W,D);return new cn(D,We)}if(p.length===0&&U.length===0)return new cn(D,[]);let z=Hn(i)===a,be=await this.processSegment(h,p,W,U,z?he:a,!0,D);return new cn(D,be instanceof cn?[be]:[])}async getChildConfig(t,e,i){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Gd(_O(t,e,i,this.urlSerializer,this.abortSignal))){let a=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=a.routes,e._loadedInjector=a.injector,a}throw bO(e)}return{routes:[],injector:t}}};function NO(n){n.sort((t,e)=>t.value.outlet===he?-1:e.value.outlet===he?1:t.value.outlet.localeCompare(e.value.outlet))}function AO(n){let t=n.value.routeConfig;return t&&t.path===""}function wx(n){let t=[],e=new Set;for(let i of n){if(!AO(i)){t.push(i);continue}let r=t.find(a=>i.value.routeConfig===a.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=wx(i.children);t.push(new cn(i.value,r))}return t.filter(i=>!e.has(i))}function $1(n){return n.data||{}}function Q1(n){return n.resolve||{}}var FO=new J("",{factory:()=>OO});function LO(n,t,e,i,r,a,d){let u=n.get(FO);return ht(p=>ce(p).pipe(rn(h=>u(n,t,e,i,h.extractedUrl,r,a,d)),Ee(({state:h,tree:C})=>me(R({},p),{targetSnapshot:h,urlAfterRedirects:C}))))}function VO(n,t){return ht(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ce(e);let a=new Set(r.map(p=>p.route)),d=new Set;for(let p of a)if(!d.has(p))for(let h of Ix(p))d.add(h);let u=0;return Ye(d).pipe(wi(p=>a.has(p)?jO(p,i,n,t):(p.data=ru(p,p.parent,n).resolve,ce(void 0))),rt(()=>u++),xl(1),ht(p=>u===d.size?ce(e):zt))})}function Ix(n){let t=n.children.map(e=>Ix(e)).flat();return[n,...t]}function jO(n,t,e,i){let r=n.routeConfig,a=n._resolve;return r?.title!==void 0&&!fx(r)&&(a[Fs]=r.title),ra(()=>(n.data=ru(n,n.parent,e).resolve,BO(a,n,t,i).pipe(Ee(d=>(n._resolvedData=d,n.data=R(R({},n.data),d),null)))))}function BO(n,t,e,i){let r=F0(n);if(r.length===0)return ce({});let a={};return Ye(r).pipe(ht(d=>WO(n[d],t,e,i).pipe(ui(),rt(u=>{if(u instanceof Bo)throw ou(new Si,u);a[d]=u}))),xl(1),Ee(()=>a),nn(d=>yx(d)?zt:ia(d)))}function WO(n,t,e,i){let r=Uo(t)??i,a=Go(n,r),d=a.resolve?a.resolve(t,e):ut(r,()=>a(t,e));return Vr(d)}function N0(n){return rn(t=>{let e=n(t);return e?Ye(e).pipe(Ee(()=>t)):ce(t)})}var Z0=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(a=>a.outlet===he);return i}getResolvedTitleForRoute(e){return e.data[Fs]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A(Dx),providedIn:"root"})}return n})(),Dx=(()=>{class n extends Z0{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(B(fC))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ki=new J("",{factory:()=>({})}),Ho=new J(""),cu=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(ug);async loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let a=await J1(ut(e,()=>i.loadComponent())),d=await Ox(Tx(a));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=d,d}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let a=await Px(i,this.compiler,e,this.onLoadEndListener);return i._loadedRoutes=a.routes,i._loadedInjector=a.injector,a}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Px(n,t,e,i){let r=await J1(ut(e,()=>n.loadChildren())),a=await Ox(Tx(r)),d;a instanceof Mc||Array.isArray(a)?d=a:d=await t.compileModuleAsync(a),i&&i(n);let u,p,h=!1;return Array.isArray(d)?(p=d,h=!0):(u=d.create(e).injector,p=u.get(Ho,[],{optional:!0,self:!0}).flat()),{routes:p.map(Y0),injector:u}}function UO(n){return n&&typeof n=="object"&&"default"in n}function Tx(n){return UO(n)?n.default:n}async function Ox(n){return n}var du=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A(GO),providedIn:"root"})}return n})(),GO=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J0=new J(""),X0=new J("");function kx(n,t,e){let i=n.get(X0),r=n.get(He);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let a,d=new Promise(h=>{a=h}),u=r.startViewTransition(()=>(a(),HO(n)));u.ready.catch(h=>{}),u.finished.catch(h=>{});let{onViewTransitionCreated:p}=i;return p&&ut(n,()=>p({transition:u,from:t,to:e})),d}function HO(n){return new Promise(t=>{Ba({read:()=>setTimeout(t)},{injector:n})})}var qO=()=>{},eh=new J(""),uu=(()=>{class n{currentNavigation=yn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=yn(null);events=new st;transitionAbortWithErrorSubject=new st;configLoader=A(cu);environmentInjector=A(et);destroyRef=A(_n);urlSerializer=A(jr);rootContexts=A(Br);location=A(Wi);inputBindingEnabled=A(Ls,{optional:!0})!==null;titleStrategy=A(Z0);options=A(Ki,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(du);createViewTransition=A(J0,{optional:!0});navigationErrorHandler=A(eh,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ce(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Yd(r)),i=r=>this.events.next(new Zd(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;lt(()=>{this.transitions?.next(me(R({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(e){return this.transitions=new Ke(null),this.transitions.pipe(Qt(i=>i!==null),rn(i=>{let r=!1,a=new AbortController;return ce(i).pipe(rn(d=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Gt.SupersededByNewNavigation),zt;this.currentTransition=i;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:u?me(R({},u),{previousNavigation:null}):null,abort:()=>a.abort()});let p=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=d.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!p&&h!=="reload")return this.events.next(new si(d.id,this.urlSerializer.serialize(d.rawUrl),"",Fo.IgnoredSameUrlNavigation)),d.resolve(!1),zt;if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return ce(d).pipe(rn(C=>(this.events.next(new Qi(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),C.id!==this.navigationId?zt:Promise.resolve(C))),LO(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,a.signal),rt(C=>{i.targetSnapshot=C.targetSnapshot,i.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation.update(P=>(P.finalUrl=C.urlAfterRedirects,P));let w=new Os(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(w)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:C,extractedUrl:w,source:P,restoredState:D,extras:k}=d,W=new Qi(C,this.urlSerializer.serialize(w),P,D);this.events.next(W);let U=px(this.rootComponentType).snapshot;return this.currentTransition=i=me(R({},d),{targetSnapshot:U,urlAfterRedirects:w,extras:me(R({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(z=>(z.finalUrl=w,z)),ce(i)}else return this.events.next(new si(d.id,this.urlSerializer.serialize(d.extractedUrl),"",Fo.IgnoredByUrlHandlingStrategy)),d.resolve(!1),zt}),rt(d=>{let u=new zd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Ee(d=>(this.currentTransition=i=me(R({},d),{guards:JT(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),i)),cO(this.environmentInjector,d=>this.events.next(d)),rt(d=>{if(i.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw ou(this.urlSerializer,d.guardsResult);let u=new $d(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),Qt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Gt.GuardRejected),!1)),N0(d=>{if(d.guards.canActivateChecks.length!==0)return ce(d).pipe(rt(u=>{let p=new Qd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),rn(u=>{let p=!1;return ce(u).pipe(VO(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(u,"",Gt.NoDataFromResolver)}}))}),rt(u=>{let p=new Kd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}))}),N0(d=>{let u=h=>{let C=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let w=Uo(h)??this.environmentInjector;C.push(this.configLoader.loadComponent(w,h.routeConfig).then(P=>{h.component=P}))}for(let w of h.children)C.push(...u(w));return C},p=u(d.targetSnapshot.root);return p.length===0?ce(d):Ye(Promise.all(p).then(()=>d))}),N0(()=>this.afterPreactivation()),rn(()=>{let{currentSnapshot:d,targetSnapshot:u}=i,p=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return p?Ye(p).pipe(Ee(()=>i)):ce(i)}),Ee(d=>{let u=$T(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=i=me(R({},d),{targetRouterState:u}),this.currentNavigation.update(p=>(p.targetRouterState=u,p)),i}),rt(()=>{this.events.next(new ks)}),ZT(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),di(1),oa(bx(a.signal).pipe(Qt(()=>!r&&!i.targetRouterState),rt(()=>{this.cancelNavigationTransition(i,a.signal.reason+"",Gt.Aborted)}))),rt({next:d=>{r=!0,this.currentNavigation.update(u=>(u.abort=qO,u)),this.lastSuccessfulNavigation.set(lt(this.currentNavigation)),this.events.next(new Mn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),oa(this.transitionAbortWithErrorSubject.pipe(rt(d=>{throw d}))),Xr(()=>{a.abort(),r||this.cancelNavigationTransition(i,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),nn(d=>{if(this.destroyed)return i.resolve(!1),zt;if(r=!0,vx(d))this.events.next(new ai(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode)),YT(d)?this.events.next(new jo(d.url,d.navigationBehaviorOptions)):i.resolve(!1);else{let u=new Lo(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);try{let p=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(p instanceof Bo){let{message:h,cancellationCode:C}=ou(this.urlSerializer,p);this.events.next(new ai(i.id,this.urlSerializer.serialize(i.extractedUrl),h,C)),this.events.next(new jo(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(u),d}catch(p){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(p)}}return zt}))}))}cancelNavigationTransition(e,i,r){let a=new ai(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=lt(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zO(n){return n!==No}var Rx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A($O),providedIn:"root"})}return n})(),su=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},$O=(()=>{class n extends su{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),th=(()=>{class n{urlSerializer=A(jr);options=A(Ki,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(Wi);urlHandlingStrategy=A(du);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,d=r??a;return d instanceof qn?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=px(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>A(Nx),providedIn:"root"})}return n})(),Nx=(()=>{class n extends th{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Qi?this.updateStateMemento():e instanceof si?this.commitTransition(i):e instanceof Os?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof ks?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof ai&&e.code!==Gt.SupersededByNewNavigation&&e.code!==Gt.Redirect?this.restoreHistory(i):e instanceof Lo?this.restoreHistory(i,!0):e instanceof Mn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:a,state:d}=i;if(this.location.isCurrentPathEqualTo(e)||a){let u=this.browserPageId,p=R(R({},d),this.generateNgRouterState(r,u));this.location.replaceState(e,"",p)}else{let u=R(R({},d),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,a=this.currentPageId-r;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pu(n,t){n.events.pipe(Qt(e=>e instanceof Mn||e instanceof ai||e instanceof Lo||e instanceof si),Ee(e=>e instanceof Mn||e instanceof si?0:(e instanceof ai?e.code===Gt.Redirect||e.code===Gt.SupersededByNewNavigation:!1)?2:1),Qt(e=>e!==2),di(1)).subscribe(()=>{t()})}var QO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(eg);stateManager=A(th);options=A(Ki,{optional:!0})||{};pendingTasks=A(hi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(uu);urlSerializer=A(jr);location=A(Wi);urlHandlingStrategy=A(du);injector=A(et);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(Rx);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(Ho,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(Ls,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new gt;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,a=lt(this.navigationTransitions.currentNavigation);if(r!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof ai&&i.code!==Gt.Redirect&&i.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Mn)this.navigated=!0;else if(i instanceof jo){let d=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),p=R({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zO(r.source)},d);this.scheduleNavigation(u,No,null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}GT(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),No,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let a={replaceUrl:!0},d=r?.navigationId?r:null;if(r){let p=R({},r);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(a.state=p)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,d,a).catch(p=>{this.disposed||this.injector.get(vn)(p)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return lt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Y0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:a,fragment:d,queryParamsHandling:u,preserveFragment:p}=i,h=p?this.currentUrlTree.fragment:d,C=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":C=R(R({},this.currentUrlTree.queryParams),a);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}C!==null&&(C=this.removeEmptyProps(C));let w;try{let P=r?r.snapshot:this.routerState.snapshot.root;w=lx(P)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),w=this.currentUrlTree.root}return cx(w,e,C,h??null,this.urlSerializer)}navigateByUrl(e,i={skipLocationChange:!1}){let r=$i(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,No,null,i)}navigate(e,i={skipLocationChange:!1}){return YO(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(fi(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=R({},QO):i===!1?r=R({},KO):r=i,$i(e))return W1(this.currentUrlTree,e,r);let a=this.parseUrl(e);return W1(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,a])=>(a!=null&&(i[r]=a),i),{})}scheduleNavigation(e,i,r,a,d){if(this.disposed)return Promise.resolve(!1);let u,p,h;d?(u=d.resolve,p=d.reject,h=d.promise):h=new Promise((w,P)=>{u=w,p=P});let C=this.pendingTasks.add();return pu(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:u,reject:p,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(w=>Promise.reject(w))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new N(4008,!1)}var Q=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=yn(null);get href(){return lt(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new st;applicationErrorHandler=A(vn);options=A(Ki,{optional:!0});constructor(e,i,r,a,d,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=a,this.el=d,this.locationStrategy=u,this.reactiveHref.set(A(new Oc("href"),{optional:!0}));let p=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=p==="a"||p==="area"||!!(typeof customElements=="object"&&customElements.get(p)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Mn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):($i(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,a,d){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||r||a||d||typeof this.target=="string"&&this.target!="_self"))return!0;let p={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,p)?.catch(h=>{this.applicationErrorHandler(h)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,a=this.el.nativeElement;i!==null?r.setAttribute(a,e,i):r.removeAttribute(a,e)}get urlTree(){return this.routerLinkInput===null?null:$i(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(I(pe),I(Je),Va("tabindex"),I(Fn),I(bn),I(Vn))};static \u0275dir=je({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&b("click",function(d){return r.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&Li("href",r.reactiveHref(),kf)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ji],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ji],replaceUrl:[2,"replaceUrl","replaceUrl",ji],routerLink:"routerLink"},features:[vi]})}return n})();var js=class{};var Ax=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,a){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(e=>e instanceof Mn),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let a of i){a.providers&&!a._injector&&(a._injector=_o(a.providers,e,`Route: ${a.path}`));let d=a._injector??e,u=a._loadedInjector??d;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&r.push(this.preloadConfig(d,a)),(a.children||a._loadedRoutes)&&r.push(this.processRoutes(u,a.children??a._loadedRoutes))}return Ye(r).pipe(Zr())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=Ye(this.loader.loadChildren(e,i)):r=ce(null);let a=r.pipe(ht(d=>d===null?ce(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));if(i.loadComponent&&!i._loadedComponent){let d=this.loader.loadComponent(e,i);return Ye([a,d]).pipe(Zr())}else return a})}static \u0275fac=function(i){return new(i||n)(B(pe),B(et),B(js),B(cu))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fx=new J(""),ZO=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=No;restoredId=0;store={};constructor(e,i,r,a,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=a,this.options=d,d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Qi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Mn?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof si&&e.code===Fo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof Vo))return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(async()=>{await new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Vo(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Kf()};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function JO(){return A(pe).routerState.root}function Bs(n,t){return{\u0275kind:n,\u0275providers:t}}function XO(){let n=A(wt);return t=>{let e=n.get(ii);if(t!==e.components[0])return;let i=n.get(pe),r=n.get(Lx);n.get(ih)===1&&i.initialNavigation(),n.get(Bx,null,{optional:!0})?.setUpPreloading(),n.get(Fx,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Lx=new J("",{factory:()=>new st}),ih=new J("",{factory:()=>1});function Vx(){let n=[{provide:Df,useValue:!0},{provide:ih,useValue:0},Dc(()=>{let t=A(wt);return t.get(xg,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(pe),a=t.get(Lx);pu(r,()=>{i(!0)}),t.get(uu).afterPreactivation=()=>(i(!0),a.closed?ce(void 0):a),r.initialNavigation()}))})];return Bs(2,n)}function jx(){let n=[Dc(()=>{A(pe).setUpLocationChangeListener()}),{provide:ih,useValue:2}];return Bs(3,n)}var Bx=new J("");function Wx(n){return Bs(0,[{provide:Bx,useExisting:Ax},{provide:js,useExisting:n}])}function Ux(){return Bs(8,[Q0,{provide:Ls,useExisting:Q0}])}function Gx(n){Sr("NgRouterViewTransitions");let t=[{provide:J0,useValue:kx},{provide:X0,useValue:R({skipNextTransition:!!n?.skipInitialTransition},n)}];return Bs(9,t)}var Hx=[Wi,{provide:jr,useClass:Si},pe,Br,{provide:Je,useFactory:JO},cu,[]],mu=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[Hx,[],{provide:Ho,multi:!0,useValue:e},[],i?.errorHandler?{provide:eh,useValue:i.errorHandler}:[],{provide:Ki,useValue:i||{}},i?.useHash?tk():nk(),ek(),i?.preloadingStrategy?Wx(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?ik(i):[],i?.bindToComponentInputs?Ux().\u0275providers:[],i?.enableViewTransitions?Gx().\u0275providers:[],rk()]}}static forChild(e){return{ngModule:n,providers:[{provide:Ho,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({})}return n})();function ek(){return{provide:Fx,useFactory:()=>{let n=A(zb),t=A(ot),e=A(Ki),i=A(uu),r=A(jr);return e.scrollOffset&&n.setOffset(e.scrollOffset),new ZO(r,i,n,t,e)}}}function tk(){return{provide:Vn,useClass:Pg}}function nk(){return{provide:Vn,useClass:Fc}}function ik(n){return[n.initialNavigation==="disabled"?jx().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Vx().\u0275providers:[]]}var nh=new J("");function rk(){return[{provide:nh,useFactory:XO},{provide:Pc,multi:!0,useExisting:nh}]}var fu=class n{constructor(t,e){this.authService=t;this.router=e}intercept(t,e){let i=this.authService.getToken();return i&&(t=t.clone({setHeaders:{Authorization:`Bearer ${i}`}})),e.handle(t).pipe(nn(r=>((r.status===401||r.status===403)&&(this.authService.logout(),this.router.navigate(["/login"])),ia(()=>r))))}static \u0275fac=function(e){return new(e||n)(B(qi),B(pe))};static \u0275prov=L({token:n,factory:n.\u0275fac})};function ok(n,t){if(n&1&&(o(0,"div",27),_(1,"i",28),l(2),s()),n&2){let e=f();c(2),T(" ",e.errorMessage," ")}}function ak(n,t){n&1&&(o(0,"span"),l(1,"Sign In"),s())}function sk(n,t){n&1&&(o(0,"span"),_(1,"i",29),l(2," Signing in..."),s())}var gu=class n{constructor(t,e){this.router=t;this.authService=e}username="";password="";rememberMe=!1;showPassword=!1;isLoading=!1;errorMessage="";togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(!this.username||!this.password){this.errorMessage="Please enter username and password";return}this.isLoading=!0,this.errorMessage="";let t={username:this.username,password:this.password};this.authService.login(t).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/app/dashboard"])},error:e=>{this.isLoading=!1,this.errorMessage=e.error?.error||"Login failed. Please try again."}})}static \u0275fac=function(e){return new(e||n)(I(pe),I(qi))};static \u0275cmp=F({type:n,selectors:[["app-login"]],standalone:!1,decls:48,vars:10,consts:[[1,"login-container"],[1,"login-left"],[1,"brand"],[1,"fas","fa-cube"],[1,"illustration"],[1,"fas","fa-chart-line"],[1,"login-right"],[1,"login-box"],[1,"login-header"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"input-wrapper"],[1,"fas","fa-user"],["type","text","id","username","name","username","placeholder","Enter your username",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],[1,"fas","fa-lock"],["id","password","name","password","placeholder","Enter your password",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"checkbox-label"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],["href","#",1,"forgot-link"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],[1,"login-footer"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),_(3,"i",3),o(4,"h1"),l(5,"ERP System"),s()(),o(6,"div",4),_(7,"i",5),o(8,"h2"),l(9,"Manage Your Business Efficiently"),s(),o(10,"p"),l(11,"Streamline operations, track inventory, and grow your business with our comprehensive ERP solution."),s()()(),o(12,"div",6)(13,"div",7)(14,"div",8)(15,"h2"),l(16,"Welcome Back"),s(),o(17,"p"),l(18,"Sign in to continue to your dashboard"),s()(),o(19,"form",9),b("ngSubmit",function(){return i.onSubmit()}),o(20,"div",10)(21,"label",11),l(22,"Username"),s(),o(23,"div",12),_(24,"i",13),o(25,"input",14),E("ngModelChange",function(a){return M(i.username,a)||(i.username=a),a}),s()()(),o(26,"div",10)(27,"label",15),l(28,"Password"),s(),o(29,"div",12),_(30,"i",16),o(31,"input",17),E("ngModelChange",function(a){return M(i.password,a)||(i.password=a),a}),s(),o(32,"button",18),b("click",function(){return i.togglePasswordVisibility()}),_(33,"i"),s()()(),o(34,"div",19)(35,"label",20)(36,"input",21),E("ngModelChange",function(a){return M(i.rememberMe,a)||(i.rememberMe=a),a}),s(),o(37,"span"),l(38,"Remember me"),s()(),o(39,"a",22),l(40,"Forgot Password?"),s()(),x(41,ok,3,1,"div",23),o(42,"button",24),x(43,ak,2,0,"span",25)(44,sk,3,0,"span",25),s()(),o(45,"div",26)(46,"p"),l(47,"Default login: admin / admin123"),s()()()()()),e&2&&(c(25),S("ngModel",i.username),c(6),m("type",i.showPassword?"text":"password"),S("ngModel",i.password),c(2),Cn(i.showPassword?"fas fa-eye-slash":"fas fa-eye"),c(3),S("ngModel",i.rememberMe),c(5),m("ngIf",i.errorMessage),c(),m("disabled",i.isLoading),c(),m("ngIf",!i.isLoading),c(),m("ngIf",i.isLoading))},dependencies:[j,Ld,$,sn,q,Rd,H,Ms],styles:[".login-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.login-left[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#00796b,#004d40);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px;color:#fff}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:60px}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.login-left[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{text-align:center;max-width:400px}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:6rem;margin-bottom:30px;opacity:.9}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:16px;font-weight:600}.login-left[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;line-height:1.6}.login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px;background:#f5f7fa}.login-box[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;padding:40px;border-radius:16px;box-shadow:0 10px 40px #0000001a}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#2c3e50;margin-bottom:8px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:.9rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:16px;color:#6c757d;font-size:1rem}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 46px;border:1px solid #e0e0e0;border-radius:10px;font-size:.95rem;transition:all .3s ease}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#00796b;box-shadow:0 0 0 3px #00796b1a}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:16px;background:none;border:none;cursor:pointer;color:#6c757d;padding:0}.input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#00796b}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:#6c757d}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#00796b}.forgot-link[_ngcontent-%COMP%]{color:#00796b;text-decoration:none;font-size:.9rem;font-weight:500}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fef2f2;color:#dc3545;padding:12px 16px;border-radius:8px;margin-bottom:20px;display:flex;align-items:center;gap:8px;font-size:.9rem}.btn-login[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00796b4d}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:24px;color:#6c757d;font-size:.9rem}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-weight:500;text-decoration:none}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:992px){.login-left[_ngcontent-%COMP%]{display:none}.login-right[_ngcontent-%COMP%]{flex:1}}@media(max-width:480px){.login-right[_ngcontent-%COMP%]{padding:20px}.login-box[_ngcontent-%COMP%]{padding:24px}}"]})};function lk(n,t){if(n&1&&_(0,"i",17),n&2){let e=f().$implicit;ne("rotated",e.expanded)}}function ck(n,t){if(n&1&&_(0,"i",17),n&2){let e=f().$implicit;ne("rotated",e.expanded)}}function dk(n,t){if(n&1){let e=O();o(0,"li",12)(1,"a",19),b("click",function(){let r=v(e).$implicit,a=f(5);return y(a.toggleMenu(r))}),_(2,"i"),o(3,"span",14),l(4),s()()()}if(n&2){let e=t.$implicit,i=f(5);ne("active",i.isActive(e.route)),c(2),Cn(e.icon),c(2),g(e.label)}}function uk(n,t){if(n&1&&(o(0,"ul",21),x(1,dk,5,5,"li",22),s()),n&2){let e=f().$implicit;c(),m("ngForOf",e.children)}}function pk(n,t){if(n&1){let e=O();qa(0),o(1,"li",12)(2,"a",19),b("click",function(){let r=v(e).$implicit,a=f(3);return y(a.toggleMenu(r))}),_(3,"i"),o(4,"span",14),l(5),s(),x(6,ck,1,2,"i",15),s(),x(7,uk,2,1,"ul",20),s(),za()}if(n&2){let e=t.$implicit,i=f(3);c(),ne("active",i.isActive(e.route))("has-active-child",i.hasActiveChild(e)),c(2),Cn(e.icon),c(2),g(e.label),c(),m("ngIf",e.children),c(),m("ngIf",e.children&&e.expanded)}}function mk(n,t){if(n&1&&(o(0,"ul",18),x(1,pk,8,9,"ng-container",7),s()),n&2){let e=f().$implicit;c(),m("ngForOf",e.children)}}function fk(n,t){if(n&1){let e=O();qa(0),o(1,"li",12)(2,"a",13),b("click",function(){let r=v(e).$implicit,a=f();return y(a.toggleMenu(r))}),_(3,"i"),o(4,"span",14),l(5),s(),x(6,lk,1,2,"i",15),s(),x(7,mk,2,1,"ul",16),s(),za()}if(n&2){let e=t.$implicit,i=f();c(),ne("active",i.isActive(e.route))("has-active-child",i.hasActiveChild(e)),c(),m("title",e.label),c(),Cn(e.icon),c(2),g(e.label),c(),m("ngIf",e.children),c(),m("ngIf",e.children&&e.expanded)}}var hu=class n{constructor(t,e){this.router=t;this.authService=e}collapsed=!1;mobileOpen=!1;allMenuItems=[{icon:"fas fa-home",label:"Dashboard",route:"/app/dashboard",permissionKey:"Dashboard"},{icon:"fas fa-cog",label:"Settings",expanded:!1,permissionKey:"Settings",children:[{icon:"fas fa-sliders-h",label:"General Settings",route:"/app/settings/general"},{icon:"fas fa-dollar-sign",label:"Finance Settings",expanded:!1,children:[{icon:"fas fa-percent",label:"Tax Rates",route:"/app/settings/finance/tax-rates"},{icon:"fas fa-coins",label:"Currencies",route:"/app/settings/finance/currencies"},{icon:"fas fa-credit-card",label:"Payment Modes",route:"/app/settings/finance/payment-modes"},{icon:"fas fa-receipt",label:"Expense Categories",route:"/app/settings/finance/expense-categories"}]},{icon:"fas fa-user-cog",label:"Customer Settings",route:"/app/settings/customer"},{icon:"fas fa-file-contract",label:"Contract Settings",route:"/app/settings/contract"},{icon:"fas fa-user-shield",label:"Roles Settings",route:"/app/settings/roles"},{icon:"fas fa-users-cog",label:"Staff Management",route:"/app/settings/staff"},{icon:"fas fa-hashtag",label:"Prefix Settings",route:"/app/settings/prefixes"}]},{icon:"fas fa-users",label:"Customer Management",route:"/app/customers",permissionKey:"Customer Management"},{icon:"fas fa-file-signature",label:"Contract Management",route:"/app/contracts",permissionKey:"Contract Management"},{icon:"fas fa-boxes",label:"Inventory Management",expanded:!1,permissionKey:"Inventory",children:[{icon:"fas fa-layer-group",label:"Group Master",route:"/app/inventory/groups",permissionKey:"Inventory - Group Master"},{icon:"fas fa-box",label:"Item Master",route:"/app/inventory/items",permissionKey:"Inventory - Item Master"},{icon:"fas fa-balance-scale",label:"Units of Measure",route:"/app/inventory/units",permissionKey:"Inventory - Units of Measure"},{icon:"fas fa-warehouse",label:"Warehouse & Bin",expanded:!1,permissionKey:"Inventory - Warehouse & Bin",children:[{icon:"fas fa-warehouse",label:"Warehouse Management",route:"/app/inventory/warehouse"},{icon:"fas fa-truck",label:"Supplier",route:"/app/inventory/suppliers"}]},{icon:"fas fa-calculator",label:"Inventory Valuation Engine",route:"/app/inventory/valuation",permissionKey:"Inventory - Valuation"},{icon:"fas fa-exchange-alt",label:"Stock Movement",expanded:!1,children:[{icon:"fas fa-arrow-down",label:"Goods Receipt (GRN)",route:"/app/stock/grn",permissionKey:"Stock Movement - Goods Receipt (GRN)"},{icon:"fas fa-arrow-up",label:"Goods Issue",route:"/app/stock/issue",permissionKey:"Stock Movement - Goods Issue"},{icon:"fas fa-arrows-alt-h",label:"Stock Transfer",route:"/app/stock/transfer",permissionKey:"Stock Movement - Stock Transfer"},{icon:"fas fa-edit",label:"Stock Adjustments",route:"/app/stock/adjustments",permissionKey:"Stock Movement - Stock Adjustments"}]},{icon:"fas fa-book",label:"Inventory Ledger",route:"/app/inventory/ledger",permissionKey:"Inventory - Ledger"}]},{icon:"fas fa-shopping-cart",label:"Purchase Order Management",expanded:!1,permissionKey:"Purchase",children:[{icon:"fas fa-file-alt",label:"Purchase Requisition",route:"/app/purchase/requisition",permissionKey:"Purchase - Requisition"},{icon:"fas fa-tasks",label:"PR Fulfillment",expanded:!1,permissionKey:"Purchase - PR Fulfillment",children:[{icon:"fas fa-file-invoice",label:"Convert to Purchase Order",route:"/app/purchase/fulfillment/convert-to-po"},{icon:"fas fa-arrow-up",label:"Fulfill from Stock Issue",route:"/app/purchase/fulfillment/stock-issue"},{icon:"fas fa-exchange-alt",label:"Fulfill via Material Transfer",route:"/app/purchase/fulfillment/material-transfer"}]},{icon:"fas fa-cart-plus",label:"Direct Purchase",route:"/app/purchase/direct",permissionKey:"Purchase - Direct Purchase"}]},{icon:"fas fa-chart-bar",label:"Reports",expanded:!1,permissionKey:"Reports",children:[{icon:"fas fa-boxes",label:"Inventory Reports",expanded:!1,permissionKey:"Reports - Inventory",children:[{icon:"fas fa-clipboard-list",label:"Stock Summary Report",route:"/app/reports/stock-summary"},{icon:"fas fa-coins",label:"Inventory Valuation Report",route:"/app/reports/valuation"},{icon:"fas fa-chart-line",label:"Item Movement Report",route:"/app/reports/item-movement"},{icon:"fas fa-book-open",label:"Stock Ledger Report",route:"/app/reports/stock-ledger"},{icon:"fas fa-sitemap",label:"Group-wise Stock Report",route:"/app/reports/group-wise"},{icon:"fas fa-warehouse",label:"Warehouse Stock Report",route:"/app/reports/warehouse-stock"},{icon:"fas fa-exclamation-triangle",label:"Reorder Level",route:"/app/reports/reorder-level"},{icon:"fas fa-hourglass-half",label:"Slow/Non-Moving Items Report",route:"/app/reports/slow-moving"},{icon:"fas fa-file-invoice",label:"Purchase vs GRN Report",route:"/app/reports/purchase-grn"}]},{icon:"fas fa-shopping-cart",label:"Purchase Reports",expanded:!1,permissionKey:"Reports - Purchase",children:[{icon:"fas fa-list-alt",label:"PR List Report",route:"/app/reports/purchase/pr-list"},{icon:"fas fa-clock",label:"PR Item Pending Report",route:"/app/reports/purchase/pr-pending"},{icon:"fas fa-history",label:"PR Fulfillment History Report",route:"/app/reports/purchase/pr-history"},{icon:"fas fa-file-alt",label:"PO List",route:"/app/reports/purchase/po-list"},{icon:"fas fa-cart-arrow-down",label:"Direct Purchase Report",route:"/app/reports/purchase/direct-purchase"},{icon:"fas fa-exchange-alt",label:"Stock Issue/Transfer Report",route:"/app/reports/purchase/stock-issue-transfer"}]}]},{icon:"fas fa-history",label:"Audit Trails & Logging",expanded:!1,permissionKey:"Audit Trails",children:[{icon:"fas fa-server",label:"System Audits",route:"/app/audit/system"},{icon:"fas fa-boxes",label:"Inventory Audits",route:"/app/audit/inventory"},{icon:"fas fa-shopping-cart",label:"Purchase Audits",route:"/app/audit/purchase"}]}];menuItems=[];ngOnInit(){this.filterMenuByPermissions(),this.authService.currentUser$.subscribe(()=>{this.filterMenuByPermissions()})}filterMenuByPermissions(){if(this.authService.isAdmin()){this.menuItems=this.allMenuItems;return}this.menuItems=this.filterItems(this.allMenuItems)}filterItems(t){return t.filter(e=>this.hasAccessToItem(e)).map(e=>e.children?me(R({},e),{children:this.filterItems(e.children)}):e).filter(e=>!e.children||e.children.length>0)}hasAccessToItem(t){return t.permissionKey?this.authService.hasFeatureAccess(t.permissionKey):!0}toggleMenu(t){t.children?t.expanded=!t.expanded:t.route&&this.router.navigate([t.route])}isActive(t){return t?this.router.url===t:!1}hasActiveChild(t){return t.children?t.children.some(e=>e.route&&this.router.url===e.route?!0:e.children?this.hasActiveChild(e):!1):!1}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(I(pe),I(qi))};static \u0275cmp=F({type:n,selectors:[["app-sidebar"]],inputs:{collapsed:"collapsed",mobileOpen:"mobileOpen"},standalone:!1,decls:14,vars:6,consts:[[1,"sidebar"],[1,"sidebar-header"],[1,"logo"],[1,"fas","fa-cube"],[1,"logo-text"],[1,"sidebar-nav"],[1,"nav-list"],[4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"logout-btn",3,"click","title"],[1,"fas","fa-sign-out-alt"],[1,"logout-text"],[1,"nav-item"],[1,"nav-link",3,"click","title"],[1,"nav-text"],["class","fas fa-chevron-down expand-icon",3,"rotated",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"fas","fa-chevron-down","expand-icon"],[1,"sub-menu"],[1,"nav-link",3,"click"],["class","sub-menu nested",4,"ngIf"],[1,"sub-menu","nested"],["class","nav-item",3,"active",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(o(0,"aside",0)(1,"div",1)(2,"div",2),_(3,"i",3),o(4,"span",4),l(5,"ERP System"),s()()(),o(6,"nav",5)(7,"ul",6),x(8,fk,8,10,"ng-container",7),s()(),o(9,"div",8)(10,"a",9),b("click",function(){return i.logout()}),_(11,"i",10),o(12,"span",11),l(13,"Logout"),s()()()()),e&2&&(ne("collapsed",i.collapsed)("mobile-open",i.mobileOpen),c(8),m("ngForOf",i.menuItems),c(2),m("title","Logout"))},dependencies:[V,j],styles:['.sidebar[_ngcontent-%COMP%]{width:280px;height:100vh;background:linear-gradient(180deg,#066,teal,#004d4d);position:fixed;left:0;top:0;display:flex;flex-direction:column;box-shadow:2px 0 15px #00000026;transition:all .3s ease;z-index:100;overflow-x:hidden;overflow-y:auto}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:none!important}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:14px}.sidebar-header[_ngcontent-%COMP%]{padding:24px 20px;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:600;color:#fff;display:block!important}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 0}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin:4px 12px;border-radius:8px}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#fff3;color:#fff}.nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:500}.nav-item.has-active-child[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;color:#ffffffd9;text-decoration:none;cursor:pointer;transition:all .2s ease;border-radius:8px;font-size:.95rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{width:22px;min-width:22px;text-align:center;font-size:1.1rem;color:#fffc;flex-shrink:0}.nav-link[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{flex:1;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block!important;color:#fffffff2}.nav-link[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .3s ease;color:#fff9;width:auto;display:block!important}.nav-link[_ngcontent-%COMP%]   .expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#fff}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.sub-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:6px 0;background:#00000026;border-radius:8px;overflow:hidden;display:block}.sub-menu[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:0;border-radius:0}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#ffffff26;color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{color:#fff}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:10px 16px 10px 52px;font-size:.9rem;border-radius:0}.sub-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{font-size:.9rem}.sub-menu.nested[_ngcontent-%COMP%]{margin:0;background:#0000001a;border-radius:0}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-left:68px;font-size:.85rem;position:relative}.sub-menu.nested[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:56px;top:50%;width:6px;height:6px;background:#fff6;border-radius:50%;transform:translateY(-50%)}.sub-menu.nested[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{background:#fff}.sidebar-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid rgba(255,255,255,.1);flex-shrink:0}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;color:#ff6b6b;text-decoration:none;cursor:pointer;border-radius:8px;transition:all .2s ease;font-weight:500}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{font-size:.95rem;display:block!important}.logout-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b26}@media(max-width:992px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%);width:280px}.sidebar.collapsed.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-text[_ngcontent-%COMP%]{display:block!important}.sidebar.collapsed[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{display:block}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:flex-start;padding:12px 16px}}']})};function hk(n,t){if(n&1&&(o(0,"span",16),l(1),s()),n&2){let e=f();c(),g(e.getUnreadCount())}}function _k(n,t){if(n&1&&(o(0,"div",30)(1,"div",31),_(2,"i",32),s(),o(3,"div",33)(4,"p"),l(5),s(),o(6,"span",34),l(7),s()()()),n&2){let e=t.$implicit;ne("unread",!e.read),c(5),g(e.message),c(2),g(e.time)}}function vk(n,t){if(n&1&&(o(0,"div",24)(1,"div",25)(2,"h4"),l(3,"Notifications"),s(),o(4,"a",26),l(5,"Mark all as read"),s()(),o(6,"div",27),x(7,_k,8,4,"div",28),s(),o(8,"div",29)(9,"a",26),l(10,"View all notifications"),s()()()),n&2){let e=f();c(7),m("ngForOf",e.notifications)}}function yk(n,t){n&1&&(o(0,"div",35)(1,"a",36),_(2,"i",20),l(3," My Profile "),s(),o(4,"a",36),_(5,"i",37),l(6," Account Settings "),s(),_(7,"div",38),o(8,"a",39),_(9,"i",40),l(10," Logout "),s()())}var _u=class n{toggleSidebar=new Xe;searchQuery="";showNotifications=!1;showProfile=!1;notifications=[{id:1,message:"New order received",time:"5 min ago",read:!1},{id:2,message:"Stock level low for Item #123",time:"1 hour ago",read:!1},{id:3,message:"Contract renewal pending",time:"2 hours ago",read:!0}];onToggleSidebar(){this.toggleSidebar.emit()}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showProfile=!1}toggleProfile(){this.showProfile=!this.showProfile,this.showNotifications=!1}getUnreadCount(){return this.notifications.filter(t=>!t.read).length}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-header"]],outputs:{toggleSidebar:"toggleSidebar"},standalone:!1,decls:26,vars:4,consts:[[1,"header"],[1,"header-left"],[1,"toggle-btn",3,"click"],[1,"fas","fa-bars"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"header-right"],[1,"header-actions"],[1,"notification-wrapper"],[1,"action-btn",3,"click"],[1,"fas","fa-bell"],["class","badge",4,"ngIf"],["class","dropdown notification-dropdown",4,"ngIf"],[1,"action-btn"],[1,"fas","fa-envelope"],[1,"badge"],[1,"profile-wrapper"],[1,"profile-btn",3,"click"],[1,"avatar"],[1,"fas","fa-user"],[1,"name"],[1,"fas","fa-chevron-down"],["class","dropdown profile-dropdown",4,"ngIf"],[1,"dropdown","notification-dropdown"],[1,"dropdown-header"],["href","#"],[1,"dropdown-body"],["class","notification-item",3,"unread",4,"ngFor","ngForOf"],[1,"dropdown-footer"],[1,"notification-item"],[1,"notification-icon"],[1,"fas","fa-info-circle"],[1,"notification-content"],[1,"time"],[1,"dropdown","profile-dropdown"],["href","#",1,"dropdown-item"],[1,"fas","fa-cog"],[1,"dropdown-divider"],["routerLink","/login",1,"dropdown-item","text-danger"],[1,"fas","fa-sign-out-alt"]],template:function(e,i){e&1&&(o(0,"header",0)(1,"div",1)(2,"button",2),b("click",function(){return i.onToggleSidebar()}),_(3,"i",3),s(),o(4,"div",4),_(5,"i",5),o(6,"input",6),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(7,"div",7)(8,"div",8)(9,"div",9)(10,"button",10),b("click",function(){return i.toggleNotifications()}),_(11,"i",11),x(12,hk,2,1,"span",12),s(),x(13,vk,11,1,"div",13),s(),o(14,"button",14),_(15,"i",15),o(16,"span",16),l(17,"2"),s()()(),o(18,"div",17)(19,"button",18),b("click",function(){return i.toggleProfile()}),o(20,"div",19),_(21,"i",20),s(),o(22,"span",21),l(23,"Admin User"),s(),_(24,"i",22),s(),x(25,yk,11,0,"div",23),s()()()),e&2&&(c(6),S("ngModel",i.searchQuery),c(6),m("ngIf",i.getUnreadCount()>0),c(),m("ngIf",i.showNotifications),c(12),m("ngIf",i.showProfile))},dependencies:[V,j,$,q,H,Q],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#fff;box-shadow:0 2px 10px #0000000d;position:sticky;top:0;z-index:50}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#6c757d;cursor:pointer;padding:8px;border-radius:8px;transition:all .3s ease}.toggle-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#f5f7fa;padding:10px 16px;border-radius:10px;min-width:300px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;outline:none;font-size:.9rem;flex:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.action-btn[_ngcontent-%COMP%]{position:relative;background:none;border:none;font-size:1.1rem;color:#6c757d;cursor:pointer;padding:10px;border-radius:10px;transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.action-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#dc3545;color:#fff;font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600}.notification-wrapper[_ngcontent-%COMP%], .profile-wrapper[_ngcontent-%COMP%]{position:relative}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000026;min-width:320px;margin-top:8px;z-index:100;overflow:hidden}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.dropdown-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2c3e50}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.85rem;text-decoration:none}.dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropdown-body[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 20px;border-bottom:1px solid #f5f7fa;cursor:pointer;transition:background .3s ease}.notification-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.notification-item.unread[_ngcontent-%COMP%]{background:#00796b0d}.notification-item[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#2c3e50;margin-bottom:4px}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.dropdown-footer[_ngcontent-%COMP%]{padding:12px 20px;text-align:center;border-top:1px solid #e0e0e0}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00796b;font-size:.9rem;text-decoration:none;font-weight:500}.dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.profile-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:none;border:none;cursor:pointer;padding:8px 12px;border-radius:10px;transition:all .3s ease}.profile-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa}.profile-btn[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1rem}.profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#2c3e50}.profile-btn[_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d}.profile-dropdown[_ngcontent-%COMP%]{min-width:200px}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;color:#6c757d;text-decoration:none;transition:all .3s ease}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;text-align:center}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#00796b}.dropdown-item.text-danger[_ngcontent-%COMP%]{color:#dc3545}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#dc35451a;color:#dc3545}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e0e0e0;margin:8px 0}@media(max-width:768px){.search-box[_ngcontent-%COMP%], .profile-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}}"]})};function Ck(n,t){if(n&1){let e=O();o(0,"div",6),b("click",function(){v(e);let r=f();return y(r.closeMobileMenu())}),s()}}var vu=class n{sidebarCollapsed=!1;mobileMenuOpen=!1;isMobile=!1;constructor(){this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=992,this.isMobile||(this.mobileMenuOpen=!1)}toggleSidebar(){this.isMobile?this.mobileMenuOpen=!this.mobileMenuOpen:this.sidebarCollapsed=!this.sidebarCollapsed}closeMobileMenu(){this.isMobile&&(this.mobileMenuOpen=!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-layout"]],hostBindings:function(e,i){e&1&&b("resize",function(){return i.onResize()},Rf)},standalone:!1,decls:7,vars:7,consts:[[1,"layout"],["class","mobile-overlay",3,"click",4,"ngIf"],[3,"collapsed","mobileOpen"],[1,"main-wrapper"],[3,"toggleSidebar"],[1,"main-content"],[1,"mobile-overlay",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0),x(1,Ck,1,0,"div",1),_(2,"app-sidebar",2),o(3,"div",3)(4,"app-header",4),b("toggleSidebar",function(){return i.toggleSidebar()}),s(),o(5,"main",5),_(6,"router-outlet"),s()()()),e&2&&(ne("sidebar-collapsed",i.sidebarCollapsed)("mobile-menu-open",i.mobileMenuOpen),c(),m("ngIf",i.mobileMenuOpen),c(),m("collapsed",i.sidebarCollapsed)("mobileOpen",i.mobileMenuOpen))},dependencies:[j,Wr,hu,_u],styles:[".layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.main-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:280px;transition:margin-left .3s ease}.layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:70px}.main-content[_ngcontent-%COMP%]{flex:1;padding:24px;background:#f5f7fa;overflow-y:auto}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:99}@media(max-width:992px){.main-wrapper[_ngcontent-%COMP%], .layout.sidebar-collapsed[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]{margin-left:0}.mobile-overlay[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]:not(.mobile-menu-open)   .mobile-overlay[_ngcontent-%COMP%]{display:none}}"]})};var yu=class n{constructor(t){this.http=t}baseUrl="/api/dashboard";getStats(){return this.http.get(`${this.baseUrl}/stats`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Pe=class n{constructor(t){this.http=t}baseUrl="/api/inventory/items";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}getByGroup(t){return this.http.get(`${this.baseUrl}/group/${t}`)}validateName(t,e,i){let r=`${this.baseUrl}/validate-name?name=${encodeURIComponent(t)}&groupId=${e}`;return i&&(r+=`&excludeId=${i}`),this.http.get(r)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}getLowStock(){return this.http.get(`${this.baseUrl}/low-stock`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function Sk(n,t){if(n&1&&(o(0,"div",25)(1,"div",26),_(2,"i"),s(),o(3,"div",27)(4,"h3"),l(5),s(),o(6,"p"),l(7),s()()()),n&2){let e=t.$implicit;c(),m("ngClass",e.type),c(),Cn(e.icon),c(3),g(e.value),c(2),g(e.label)}}function Ek(n,t){n&1&&(o(0,"tr")(1,"td",28),_(2,"i",29),o(3,"p"),l(4,"No low stock alerts"),s()()())}function Mk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td")(10,"span",30),l(11),s()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.code),c(2),g(e.name),c(2),g(e.currentStock),c(2),g(e.reorderLevel),c(2),m("ngClass",i.getStatusClass(e.currentStock<=0?"Critical":"Low")),c(),T(" ",e.currentStock<=0?"Out of Stock":"Low Stock"," ")}}var bu=class n{constructor(t,e){this.dashboardService=t;this.itemService=e}stats=[];dashboardStats=null;lowStockItems=[];loading=!0;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.dashboardService.getStats().subscribe({next:t=>{this.dashboardStats=t,this.stats=[{icon:"fas fa-users",label:"Total Customers",value:t.totalCustomers?.toString()||"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:t.totalContracts?.toString()||"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:t.totalItems?.toString()||"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$"+(t.totalInventoryValue?.toLocaleString()||"0"),change:"",type:"warning"}],this.loading=!1},error:t=>{console.error("Error loading dashboard stats",t),this.stats=[{icon:"fas fa-users",label:"Total Customers",value:"0",change:"",type:"primary"},{icon:"fas fa-file-contract",label:"Total Contracts",value:"0",change:"",type:"success"},{icon:"fas fa-box",label:"Total Items",value:"0",change:"",type:"info"},{icon:"fas fa-dollar-sign",label:"Inventory Value",value:"$0",change:"",type:"warning"}],this.loading=!1}}),this.itemService.getLowStock().subscribe({next:t=>{this.lowStockItems=t},error:t=>console.error("Error loading low stock items",t)})}getPriorityClass(t){return{Low:"badge-success",Medium:"badge-warning",High:"badge-danger",Critical:"badge-danger"}[t]||"badge-info"}getStatusClass(t){return t==="Critical"?"badge-danger":"badge-warning"}static \u0275fac=function(e){return new(e||n)(I(yu),I(Pe))};static \u0275cmp=F({type:n,selectors:[["app-dashboard"]],standalone:!1,decls:80,vars:17,consts:[[1,"dashboard"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"stats-grid"],["class","stat-card",4,"ngFor","ngForOf"],[1,"dashboard-grid"],[1,"card","chart-card"],[1,"card-header"],[1,"chart-container"],[1,"chart-placeholder"],[1,"bar-chart"],[1,"bar"],[1,"bar-label"],[1,"side-stats"],[1,"card","earnings-card"],[1,"amount"],[1,"label"],[1,"card","customers-card"],[1,"card"],["routerLink","/app/reports/reorder-level",1,"btn","btn-primary","btn-sm"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"stat-card"],[1,"icon",3,"ngClass"],[1,"info"],["colspan","5",1,"empty-state"],[1,"fas","fa-check-circle",2,"color","#4caf50"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Dashboard"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Dashboard"),s()()()(),o(12,"div",4),x(13,Sk,8,5,"div",5),s(),o(14,"div",6)(15,"div",7)(16,"div",8)(17,"h3"),l(18,"Revenue Overview"),s()(),o(19,"div",9)(20,"div",10)(21,"div",11)(22,"div",12)(23,"span",13),l(24,"Jan"),s()(),o(25,"div",12)(26,"span",13),l(27,"Feb"),s()(),o(28,"div",12)(29,"span",13),l(30,"Mar"),s()(),o(31,"div",12)(32,"span",13),l(33,"Apr"),s()(),o(34,"div",12)(35,"span",13),l(36,"May"),s()(),o(37,"div",12)(38,"span",13),l(39,"Jun"),s()()()()()(),o(40,"div",14)(41,"div",15)(42,"h4"),l(43,"Inventory Summary"),s(),o(44,"div",16)(45,"h3"),l(46),s(),o(47,"span",17),l(48,"Total Items"),s()()(),o(49,"div",18)(50,"h4"),l(51,"Active Contracts"),s(),o(52,"div",16)(53,"h3"),l(54),s(),o(55,"span",17),l(56,"Contracts"),s()()()()(),o(57,"div",19)(58,"div",8)(59,"h3"),l(60,"Low Stock Alerts"),s(),o(61,"a",20),l(62,"View All"),s()(),o(63,"div",21)(64,"table",22)(65,"thead")(66,"tr")(67,"th"),l(68,"Item Code"),s(),o(69,"th"),l(70,"Item Name"),s(),o(71,"th"),l(72,"Current Stock"),s(),o(73,"th"),l(74,"Reorder Level"),s(),o(75,"th"),l(76,"Status"),s()()(),o(77,"tbody"),x(78,Ek,5,0,"tr",23)(79,Mk,12,6,"tr",24),s()()()()()),e&2&&(c(13),m("ngForOf",i.stats),c(9),bt("height",60,"%"),c(3),bt("height",75,"%"),c(3),bt("height",45,"%"),c(3),bt("height",80,"%"),c(3),bt("height",65,"%"),c(3),bt("height",90,"%"),c(9),g((i.dashboardStats==null?null:i.dashboardStats.totalItems)||0),c(8),g((i.dashboardStats==null?null:i.dashboardStats.totalContracts)||0),c(24),m("ngIf",i.lowStockItems.length===0),c(),m("ngForOf",i.lowStockItems))},dependencies:[se,V,j,Q],styles:[".dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:4px}.header-stats[_ngcontent-%COMP%]{display:flex;gap:24px}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;text-transform:uppercase}.header-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2c3e50}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{position:relative}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:.85rem;font-weight:500;color:#6c757d}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#28a745}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:24px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.chart-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.chart-card[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:.875rem;cursor:pointer}.chart-container[_ngcontent-%COMP%]{height:250px;display:flex;align-items:flex-end}.bar-chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;width:100%;height:100%;padding-top:30px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,#00796b,#26a69a);border-radius:6px 6px 0 0;position:relative;display:flex;flex-direction:column;align-items:center;transition:all .3s ease;min-height:20px}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:hover{transform:scaleY(1.05)}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{position:absolute;bottom:-25px;font-size:.75rem;color:#6c757d}.bar-chart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{position:absolute;top:-25px;font-size:.75rem;font-weight:500;color:#2c3e50}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;margin-top:40px}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem;color:#6c757d}.chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.5rem}.side-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.earnings-card[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00796b,#004d40);color:#fff;border-radius:12px;padding:20px}.earnings-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin-bottom:16px;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .mini-chart[_ngcontent-%COMP%]{height:60px;margin-bottom:16px}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;height:100%}.earnings-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .sparkline[_ngcontent-%COMP%]   .spark[_ngcontent-%COMP%]{width:8px;background:#ffffff80;border-radius:4px}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]{height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.earnings-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fffc}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:4px}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:.8rem;opacity:.9}.earnings-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%], .customers-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#a5d6a7}.customers-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#26a69a,#00796b)}.sales-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:8px}.sales-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#2c3e50}.donut-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]{width:150px;height:150px;position:relative}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-ring[_ngcontent-%COMP%]{width:100%;height:100%;border:20px solid #e0e0e0;border-top-color:#00796b;border-right-color:#26a69a;border-radius:50%}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a}.donut-placeholder[_ngcontent-%COMP%]   .donut[_ngcontent-%COMP%]   .donut-center[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#00796b}.wide-card[_ngcontent-%COMP%]{grid-column:span 1}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem}@media(max-width:1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-stats[_ngcontent-%COMP%]{display:none}}"]})};var Me=class n{constructor(t){this.http=t}baseUrl="/api/settings";getGeneralSettings(){return this.http.get(`${this.baseUrl}/general`)}saveGeneralSettings(t){return this.http.post(`${this.baseUrl}/general`,t)}getFinanceSettings(){return this.http.get(`${this.baseUrl}/finance`)}saveFinanceSettings(t){return this.http.post(`${this.baseUrl}/finance`,t)}getPrefixSettings(){return this.http.get(`${this.baseUrl}/prefixes`)}savePrefixSettings(t){return this.http.post(`${this.baseUrl}/prefixes`,t)}generatePrefixId(t){return this.http.get(`${this.baseUrl}/prefixes/generate/${t}`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function wk(n,t){if(n&1&&(o(0,"option",18),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function Ik(n,t){if(n&1&&(o(0,"option",18),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function Dk(n,t){if(n&1&&(o(0,"option",18),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function Pk(n,t){if(n&1&&(o(0,"option",18),l(1),s()),n&2){let e=t.$implicit;m("value",e.value),c(),g(e.label)}}var Cu=class n{constructor(t){this.settingsService=t}settings={companyName:"",companyAddress:"",companyPhone:"",companyEmail:"",companyWebsite:"",currency:"USD",dateFormat:"DD/MM/YYYY",timezone:"UTC",logoPath:"",valuationMethod:"FIFO"};saving=!1;loading=!1;timezones=["UTC","America/New_York","Europe/London","Asia/Tokyo","Australia/Sydney"];dateFormats=["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD"];currencies=["USD","EUR","GBP","JPY","AUD","CAD"];valuationMethods=[{value:"FIFO",label:"FIFO (First In, First Out)"},{value:"LIFO",label:"LIFO (Last In, First Out)"},{value:"WEIGHTED_AVERAGE",label:"Weighted Average Cost"}];ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getGeneralSettings().subscribe({next:t=>{t&&(this.settings=t),this.loading=!1},error:t=>{console.error("Error loading settings",t),this.loading=!1}})}saveSettings(){this.saving=!0,this.settingsService.saveGeneralSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,alert("Settings saved successfully!")},error:t=>{console.error("Error saving settings",t),this.saving=!1,alert("Error saving settings")}})}static \u0275fac=function(e){return new(e||n)(I(Me))};static \u0275cmp=F({type:n,selectors:[["app-general-settings"]],standalone:!1,decls:80,vars:14,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"card"],[1,"card-title"],[1,"grid-2"],[1,"form-group"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-3"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],[1,"form-actions"],[1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"General Settings"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"General"),s()()()(),o(16,"div",4)(17,"h3",5),l(18,"Company Information"),s(),o(19,"div",6)(20,"div",7)(21,"label"),l(22,"Company Name"),s(),o(23,"input",8),E("ngModelChange",function(a){return M(i.settings.companyName,a)||(i.settings.companyName=a),a}),s()(),o(24,"div",7)(25,"label"),l(26,"Company Email"),s(),o(27,"input",9),E("ngModelChange",function(a){return M(i.settings.companyEmail,a)||(i.settings.companyEmail=a),a}),s()(),o(28,"div",7)(29,"label"),l(30,"Phone Number"),s(),o(31,"input",8),E("ngModelChange",function(a){return M(i.settings.companyPhone,a)||(i.settings.companyPhone=a),a}),s()(),o(32,"div",7)(33,"label"),l(34,"Address"),s(),o(35,"input",8),E("ngModelChange",function(a){return M(i.settings.companyAddress,a)||(i.settings.companyAddress=a),a}),s()()()(),o(36,"div",4)(37,"h3",5),l(38,"Regional Settings"),s(),o(39,"div",10)(40,"div",7)(41,"label"),l(42,"Timezone"),s(),o(43,"select",11),E("ngModelChange",function(a){return M(i.settings.timezone,a)||(i.settings.timezone=a),a}),x(44,wk,2,2,"option",12),s()(),o(45,"div",7)(46,"label"),l(47,"Date Format"),s(),o(48,"select",11),E("ngModelChange",function(a){return M(i.settings.dateFormat,a)||(i.settings.dateFormat=a),a}),x(49,Ik,2,2,"option",12),s()(),o(50,"div",7)(51,"label"),l(52,"Currency"),s(),o(53,"select",11),E("ngModelChange",function(a){return M(i.settings.currency,a)||(i.settings.currency=a),a}),x(54,Dk,2,2,"option",12),s()()()(),o(55,"div",4)(56,"h3",5),l(57,"Inventory Valuation"),s(),o(58,"div",6)(59,"div",7)(60,"label"),l(61,"Valuation Method"),s(),o(62,"select",11),E("ngModelChange",function(a){return M(i.settings.valuationMethod,a)||(i.settings.valuationMethod=a),a}),x(63,Pk,2,2,"option",12),s(),o(64,"small",13)(65,"strong"),l(66,"FIFO:"),s(),l(67," Oldest stock is consumed first. "),o(68,"strong"),l(69,"LIFO:"),s(),l(70," Newest stock is consumed first. "),o(71,"strong"),l(72,"Weighted Average:"),s(),l(73," Uses average cost of all layers. "),s()()()(),o(74,"div",14)(75,"button",15),l(76,"Cancel"),s(),o(77,"button",16),b("click",function(){return i.saveSettings()}),_(78,"i",17),l(79),s()()()),e&2&&(c(23),S("ngModel",i.settings.companyName),c(4),S("ngModel",i.settings.companyEmail),c(4),S("ngModel",i.settings.companyPhone),c(4),S("ngModel",i.settings.companyAddress),c(8),S("ngModel",i.settings.timezone),c(),m("ngForOf",i.timezones),c(4),S("ngModel",i.settings.dateFormat),c(),m("ngForOf",i.dateFormats),c(4),S("ngModel",i.settings.currency),c(),m("ngForOf",i.currencies),c(8),S("ngModel",i.settings.valuationMethod),c(),m("ngForOf",i.valuationMethods),c(14),m("disabled",i.saving),c(2),T(" ",i.saving?"Saving...":"Save Changes"," "))},dependencies:[V,Y,Z,$,K,q,H,Q],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.settings-page[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}"]})};function Tk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"span",14),l(9),s()(),o(10,"td")(11,"div",15)(12,"button",16),_(13,"i",17),s(),o(14,"button",18),_(15,"i",19),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),T("",e.rate,"%"),c(2),g(e.type),c(3),g(e.status)}}function Ok(n,t){if(n&1){let e=O();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Tax Rates"),s(),o(4,"button",9),b("click",function(){v(e);let r=f();return y(r.openModal("tax"))}),_(5,"i",10),l(6," Add Tax Rate "),s()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),s(),o(13,"th"),l(14,"Rate (%)"),s(),o(15,"th"),l(16,"Type"),s(),o(17,"th"),l(18,"Status"),s(),o(19,"th"),l(20,"Actions"),s()()(),o(21,"tbody"),x(22,Tk,16,4,"tr",13),s()()()()}if(n&2){let e=f();c(22),m("ngForOf",e.taxRates)}}function kk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"span",20),l(9),s()(),o(10,"td")(11,"div",15)(12,"button",16),_(13,"i",17),s(),o(14,"button",18),_(15,"i",19),s()()()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.symbol),c(2),m("ngClass",e.isDefault?"badge-success":"badge-info"),c(),T(" ",e.isDefault?"Yes":"No"," ")}}function Rk(n,t){if(n&1){let e=O();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Currencies"),s(),o(4,"button",9),b("click",function(){v(e);let r=f();return y(r.openModal("currency"))}),_(5,"i",10),l(6," Add Currency "),s()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Code"),s(),o(13,"th"),l(14,"Name"),s(),o(15,"th"),l(16,"Symbol"),s(),o(17,"th"),l(18,"Default"),s(),o(19,"th"),l(20,"Actions"),s()()(),o(21,"tbody"),x(22,kk,16,5,"tr",13),s()()()()}if(n&2){let e=f();c(22),m("ngForOf",e.currencies)}}function Nk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td")(6,"span",14),l(7),s()(),o(8,"td")(9,"div",15)(10,"button",16),_(11,"i",17),s(),o(12,"button",18),_(13,"i",19),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description),c(3),g(e.status)}}function Ak(n,t){if(n&1){let e=O();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Payment Modes"),s(),o(4,"button",9),b("click",function(){v(e);let r=f();return y(r.openModal("payment"))}),_(5,"i",10),l(6," Add Payment Mode "),s()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),s(),o(13,"th"),l(14,"Description"),s(),o(15,"th"),l(16,"Status"),s(),o(17,"th"),l(18,"Actions"),s()()(),o(19,"tbody"),x(20,Nk,14,3,"tr",13),s()()()()}if(n&2){let e=f();c(20),m("ngForOf",e.paymentModes)}}function Fk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td")(6,"div",15)(7,"button",16),_(8,"i",17),s(),o(9,"button",18),_(10,"i",19),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description)}}function Lk(n,t){if(n&1){let e=O();o(0,"div",7)(1,"div",8)(2,"h3"),l(3,"Expense Categories"),s(),o(4,"button",9),b("click",function(){v(e);let r=f();return y(r.openModal("expense"))}),_(5,"i",10),l(6," Add Category "),s()(),o(7,"div",11)(8,"table",12)(9,"thead")(10,"tr")(11,"th"),l(12,"Name"),s(),o(13,"th"),l(14,"Description"),s(),o(15,"th"),l(16,"Actions"),s()()(),o(17,"tbody"),x(18,Fk,11,2,"tr",13),s()()()()}if(n&2){let e=f();c(18),m("ngForOf",e.expenseCategories)}}var xu=class n{activeTab="tax";taxRates=[{id:1,name:"Standard VAT",rate:20,type:"VAT",status:"Active"},{id:2,name:"Reduced VAT",rate:5,type:"VAT",status:"Active"},{id:3,name:"Zero Rate",rate:0,type:"VAT",status:"Active"},{id:4,name:"Service Tax",rate:18,type:"Service",status:"Active"}];currencies=[{id:1,code:"USD",name:"US Dollar",symbol:"$",isDefault:!0},{id:2,code:"EUR",name:"Euro",symbol:"\u20AC",isDefault:!1},{id:3,code:"GBP",name:"British Pound",symbol:"\xA3",isDefault:!1},{id:4,code:"INR",name:"Indian Rupee",symbol:"\u20B9",isDefault:!1}];paymentModes=[{id:1,name:"Cash",description:"Cash payment",status:"Active"},{id:2,name:"Bank Transfer",description:"Direct bank transfer",status:"Active"},{id:3,name:"Credit Card",description:"Credit/Debit card payment",status:"Active"},{id:4,name:"Check",description:"Payment by check",status:"Active"}];expenseCategories=[{id:1,name:"Office Supplies",description:"Stationery and office materials"},{id:2,name:"Travel",description:"Business travel expenses"},{id:3,name:"Utilities",description:"Electricity, water, internet"},{id:4,name:"Marketing",description:"Advertising and promotions"}];showModal=!1;modalType="";setActiveTab(t){this.activeTab=t}openModal(t){this.modalType=t,this.showModal=!0}closeModal(){this.showModal=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-finance-settings"]],standalone:!1,decls:29,vars:12,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"tabs"],[1,"tab",3,"click"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"badge","badge-success"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger"],[1,"fas","fa-trash"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Finance Settings"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Finance"),s()()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.setActiveTab("tax")}),l(18,"Tax Rates"),s(),o(19,"button",5),b("click",function(){return i.setActiveTab("currency")}),l(20,"Currencies"),s(),o(21,"button",5),b("click",function(){return i.setActiveTab("payment")}),l(22,"Payment Modes"),s(),o(23,"button",5),b("click",function(){return i.setActiveTab("expense")}),l(24,"Expense Categories"),s()(),x(25,Ok,23,1,"div",6)(26,Rk,23,1,"div",6)(27,Ak,21,1,"div",6)(28,Lk,19,1,"div",6),s()),e&2&&(c(17),ne("active",i.activeTab==="tax"),c(2),ne("active",i.activeTab==="currency"),c(2),ne("active",i.activeTab==="payment"),c(2),ne("active",i.activeTab==="expense"),c(2),m("ngIf",i.activeTab==="tax"),c(),m("ngIf",i.activeTab==="currency"),c(),m("ngIf",i.activeTab==="payment"),c(),m("ngIf",i.activeTab==="expense"))},dependencies:[se,V,j,Q],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}"]})};function Vk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"div",12)(9,"button",13),_(10,"i",14),s(),o(11,"button",15),_(12,"i",16),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.description),c(2),T("",e.discount,"%")}}function jk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),_(4,"span",17),s(),o(5,"td")(6,"div",12)(7,"button",13),_(8,"i",14),s(),o(9,"button",15),_(10,"i",16),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),bt("background",e.color)}}var Su=class n{customerGroups=[{id:1,name:"Retail",description:"Retail customers",discount:0},{id:2,name:"Wholesale",description:"Wholesale buyers",discount:10},{id:3,name:"VIP",description:"Premium customers",discount:15},{id:4,name:"Corporate",description:"Business accounts",discount:12}];customerStatuses=[{id:1,name:"Active",color:"#28a745"},{id:2,name:"Inactive",color:"#6c757d"},{id:3,name:"Pending",color:"#ffc107"},{id:4,name:"Blocked",color:"#dc3545"}];showModal=!1;modalType="";openModal(t){this.modalType=t,this.showModal=!0}closeModal(){this.showModal=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-customer-settings"]],standalone:!1,decls:57,vars:2,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger"],[1,"fas","fa-trash"],[1,"color-badge"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Customer Settings"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Customer"),s()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Customer Groups"),s(),o(21,"button",7),b("click",function(){return i.openModal("group")}),_(22,"i",8),l(23," Add Group "),s()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),s(),o(30,"th"),l(31,"Description"),s(),o(32,"th"),l(33,"Discount"),s(),o(34,"th"),l(35,"Actions"),s()()(),o(36,"tbody"),x(37,Vk,13,3,"tr",11),s()()()(),o(38,"div",5)(39,"div",6)(40,"h3"),l(41,"Customer Statuses"),s(),o(42,"button",7),b("click",function(){return i.openModal("status")}),_(43,"i",8),l(44," Add Status "),s()(),o(45,"div",9)(46,"table",10)(47,"thead")(48,"tr")(49,"th"),l(50,"Name"),s(),o(51,"th"),l(52,"Color"),s(),o(53,"th"),l(54,"Actions"),s()()(),o(55,"tbody"),x(56,jk,11,3,"tr",11),s()()()()()()),e&2&&(c(37),m("ngForOf",i.customerGroups),c(19),m("ngForOf",i.customerStatuses))},dependencies:[V,Q],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};function Bk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td")(6,"span",12),l(7),s()(),o(8,"td")(9,"div",13)(10,"button",14),_(11,"i",15),s(),o(12,"button",16),_(13,"i",17),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),g(e.duration),c(2),m("ngClass",e.renewable?"badge-success":"badge-info"),c(),T(" ",e.renewable?"Yes":"No"," ")}}function Wk(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),_(4,"span",18),s(),o(5,"td")(6,"div",13)(7,"button",14),_(8,"i",15),s(),o(9,"button",16),_(10,"i",17),s()()()()),n&2){let e=t.$implicit;c(2),g(e.name),c(2),bt("background",e.color)}}var Eu=class n{contractTypes=[{id:1,name:"Service Agreement",duration:12,renewable:!0},{id:2,name:"Maintenance Contract",duration:6,renewable:!0},{id:3,name:"One-time Project",duration:3,renewable:!1},{id:4,name:"Annual Subscription",duration:12,renewable:!0}];contractStatuses=[{id:1,name:"Draft",color:"#6c757d"},{id:2,name:"Active",color:"#28a745"},{id:3,name:"Expired",color:"#dc3545"},{id:4,name:"Pending Renewal",color:"#ffc107"}];showModal=!1;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-contract-settings"]],standalone:!1,decls:57,vars:2,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm"],[1,"fas","fa-plus"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger"],[1,"fas","fa-trash"],[1,"color-badge"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Settings"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Contract"),s()()()(),o(16,"div",4)(17,"div",5)(18,"div",6)(19,"h3"),l(20,"Contract Types"),s(),o(21,"button",7),_(22,"i",8),l(23," Add Type "),s()(),o(24,"div",9)(25,"table",10)(26,"thead")(27,"tr")(28,"th"),l(29,"Name"),s(),o(30,"th"),l(31,"Duration (Months)"),s(),o(32,"th"),l(33,"Renewable"),s(),o(34,"th"),l(35,"Actions"),s()()(),o(36,"tbody"),x(37,Bk,14,4,"tr",11),s()()()(),o(38,"div",5)(39,"div",6)(40,"h3"),l(41,"Contract Statuses"),s(),o(42,"button",7),_(43,"i",8),l(44," Add Status "),s()(),o(45,"div",9)(46,"table",10)(47,"thead")(48,"tr")(49,"th"),l(50,"Name"),s(),o(51,"th"),l(52,"Color"),s(),o(53,"th"),l(54,"Actions"),s()()(),o(55,"tbody"),x(56,Wk,11,3,"tr",11),s()()()()()()),e&2&&(c(37),m("ngForOf",i.contractTypes),c(19),m("ngForOf",i.contractStatuses))},dependencies:[se,V,Q],styles:[".settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.color-badge[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border-radius:4px}"]})};var qo=class n{constructor(t){this.http=t}apiUrl="/api/roles";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function Uk(n,t){n&1&&(o(0,"tr")(1,"td",27),l(2,"No roles found"),s()())}function Gk(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"div",28)(3,"strong"),l(4),s(),o(5,"span",29),l(6),s()()(),o(7,"td")(8,"div",30)(9,"button",31),b("click",function(){let r=v(e).$implicit,a=f();return y(a.editRole(r))}),_(10,"i",32),s(),o(11,"button",33),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteRole(r))}),_(12,"i",34),s()()()()}if(n&2){let e=t.$implicit;c(4),g(e.name),c(2),T("Total Users: ",e.totalUsers)}}var Mu=class n{constructor(t,e){this.router=t;this.roleService=e}roles=[];loading=!1;searchQuery="";pageSize=25;currentPage=1;ngOnInit(){this.loadRoles()}loadRoles(){this.loading=!0,this.roleService.getAll().subscribe({next:t=>{this.roles=t,this.loading=!1},error:t=>{console.error("Error loading roles:",t),this.loading=!1}})}get filteredRoles(){let t=this.roles;return this.searchQuery&&(t=t.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),t}get paginatedRoles(){let t=(this.currentPage-1)*this.pageSize;return this.filteredRoles.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredRoles.length/this.pageSize)||1}get startEntry(){return this.filteredRoles.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredRoles.length)}addRole(){this.router.navigate(["/app/settings/roles/add"])}editRole(t){this.router.navigate(["/app/settings/roles/edit",t.id])}deleteRole(t){confirm(`Are you sure you want to delete the role "${t.name}"?`)&&this.roleService.delete(t.id).subscribe({next:()=>{this.loadRoles()},error:e=>{alert(e.error?.error||"Error deleting role")}})}exportData(){console.log("Export roles data")}refresh(){this.loadRoles()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(I(pe),I(qo))};static \u0275cmp=F({type:n,selectors:[["app-roles-settings"]],standalone:!1,decls:47,vars:14,consts:[[1,"settings-page"],[1,"page-header-simple"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"sortable"],[1,"fas","fa-sort-up"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"page-number"],["colspan","2",1,"empty-state"],[1,"role-name-cell"],[1,"total-users"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-icon","btn-danger-icon",3,"click"],[1,"fas","fa-trash"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return i.addRole()}),_(3,"i",3),l(4," New Role "),s()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"select",7),E("ngModelChange",function(a){return M(i.pageSize,a)||(i.pageSize=a),a}),o(9,"option",8),l(10,"10"),s(),o(11,"option",8),l(12,"25"),s(),o(13,"option",8),l(14,"50"),s(),o(15,"option",8),l(16,"100"),s()(),o(17,"button",9),b("click",function(){return i.exportData()}),l(18,"Export"),s(),o(19,"button",10),b("click",function(){return i.refresh()}),_(20,"i",11),s()(),o(21,"div",12)(22,"div",13),_(23,"i",14),o(24,"input",15),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()()(),o(25,"div",16)(26,"table",17)(27,"thead")(28,"tr")(29,"th",18),l(30,"Role Name "),_(31,"i",19),s(),o(32,"th"),l(33,"Options"),s()()(),o(34,"tbody"),x(35,Uk,3,0,"tr",20)(36,Gk,13,2,"tr",21),s()()(),o(37,"div",22)(38,"div",23),l(39),s(),o(40,"div",24)(41,"button",25),b("click",function(){return i.previousPage()}),l(42,"Previous"),s(),o(43,"span",26),l(44),s(),o(45,"button",25),b("click",function(){return i.nextPage()}),l(46,"Next"),s()()()()()),e&2&&(c(8),S("ngModel",i.pageSize),c(),m("value",10),c(2),m("value",25),c(2),m("value",50),c(2),m("value",100),c(9),S("ngModel",i.searchQuery),c(11),m("ngIf",i.paginatedRoles.length===0),c(),m("ngForOf",i.paginatedRoles),c(3),vo(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredRoles.length," entries "),c(2),m("disabled",i.currentPage===1),c(3),g(i.currentPage),c(),m("disabled",i.currentPage>=i.totalPages))},dependencies:[V,j,Y,Z,$,K,q,H],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.page-header-simple[_ngcontent-%COMP%]{margin-bottom:20px}.btn-new-role[_ngcontent-%COMP%]{background:var(--primary-color);border:none;padding:10px 20px;font-weight:500}.btn-new-role[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.page-size-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;background:#fff;font-size:.9rem}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);color:var(--text-primary)}.btn-outline[_ngcontent-%COMP%]:hover{background:var(--bg-color)}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);padding:6px 10px}.btn-icon[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.btn-danger-icon[_ngcontent-%COMP%]{color:var(--danger-color)}.btn-danger-icon[_ngcontent-%COMP%]:hover{color:#c82333}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px 8px 36px;border:1px solid var(--border-color);border-radius:6px;width:200px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.role-name-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.role-name-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.role-name-cell[_ngcontent-%COMP%]   .total-users[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.sortable[_ngcontent-%COMP%]{cursor:pointer}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px;color:var(--primary-color)}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid var(--border-color)}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pagination[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;background:var(--primary-color);color:#fff;border-radius:4px;font-weight:500}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto}.permissions-section[_ngcontent-%COMP%]{margin-top:20px}.permissions-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permissions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-primary)}.permissions-table[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary);width:40%}.permissions-table[_ngcontent-%COMP%]   .capabilities-cell[_ngcontent-%COMP%]{width:60%}.capability-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:var(--text-primary)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:var(--primary-color)}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}']})};var zo=class n{constructor(t){this.http=t}apiUrl="/api/staff";getAll(){return this.http.get(this.apiUrl)}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}toggleActive(t){return this.http.post(`${this.apiUrl}/${t}/toggle-active`,{})}getRoles(){return this.http.get(`${this.apiUrl}/roles`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function Hk(n,t){n&1&&(o(0,"tr")(1,"td",27),l(2,"No staff members found"),s()())}function qk(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"div",28)(3,"div",29),l(4),s(),o(5,"span"),l(6),s()()(),o(7,"td")(8,"code"),l(9),s()(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td"),l(15),s(),o(16,"td")(17,"label",30)(18,"input",31),b("change",function(){let r=v(e).$implicit,a=f();return y(a.toggleActive(r))}),s(),_(19,"span",32),s()()()}if(n&2){let e=t.$implicit,i=f();c(4),g((e.firstName==null?null:e.firstName.charAt(0))||"?"),c(2),g(i.getFullName(e)),c(3),g(e.username),c(2),g(e.email),c(2),g(e.role),c(2),g(e.lastLogin),c(3),m("checked",e.active)}}var wu=class n{constructor(t,e){this.router=t;this.staffService=e}staff=[];loading=!1;searchQuery="";pageSize=25;currentPage=1;ngOnInit(){this.loadStaff()}loadStaff(){this.loading=!0,this.staffService.getAll().subscribe({next:t=>{this.staff=t,this.loading=!1},error:t=>{console.error("Error loading staff:",t),this.loading=!1}})}get filteredStaff(){return this.searchQuery?this.staff.filter(t=>(t.firstName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(t.lastName?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())||(t.email?.toLowerCase()||"").includes(this.searchQuery.toLowerCase())):this.staff}get paginatedStaff(){let t=(this.currentPage-1)*this.pageSize;return this.filteredStaff.slice(t,t+this.pageSize)}get totalPages(){return Math.ceil(this.filteredStaff.length/this.pageSize)||1}get startEntry(){return this.filteredStaff.length>0?(this.currentPage-1)*this.pageSize+1:0}get endEntry(){return Math.min(this.currentPage*this.pageSize,this.filteredStaff.length)}getFullName(t){return`${t.firstName||""} ${t.lastName||""}`.trim()}addStaff(){this.router.navigate(["/app/settings/staff/add"])}toggleActive(t){this.staffService.toggleActive(t.id).subscribe({next:()=>{t.active=!t.active},error:e=>{console.error("Error toggling active status:",e)}})}exportData(){console.log("Export staff data")}refresh(){this.loadStaff()}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}static \u0275fac=function(e){return new(e||n)(I(pe),I(zo))};static \u0275cmp=F({type:n,selectors:[["app-staff-management"]],standalone:!1,decls:55,vars:14,consts:[[1,"settings-page"],[1,"page-header-simple"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-toolbar"],[1,"toolbar-left"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"fas","fa-sync-alt"],[1,"toolbar-right"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"sortable"],[1,"fas","fa-sort-up"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"showing-entries"],[1,"pagination"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"page-number"],["colspan","6",1,"empty-state"],[1,"staff-cell"],[1,"avatar"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return i.addStaff()}),_(3,"i",3),l(4," New Staff Member "),s()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"select",7),E("ngModelChange",function(a){return M(i.pageSize,a)||(i.pageSize=a),a}),o(9,"option",8),l(10,"10"),s(),o(11,"option",8),l(12,"25"),s(),o(13,"option",8),l(14,"50"),s(),o(15,"option",8),l(16,"100"),s()(),o(17,"button",9),b("click",function(){return i.exportData()}),l(18,"Export"),s(),o(19,"button",10),b("click",function(){return i.refresh()}),_(20,"i",11),s()(),o(21,"div",12)(22,"div",13),_(23,"i",14),o(24,"input",15),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()()(),o(25,"div",16)(26,"table",17)(27,"thead")(28,"tr")(29,"th",18),l(30,"Full Name "),_(31,"i",19),s(),o(32,"th"),l(33,"Username"),s(),o(34,"th"),l(35,"Email"),s(),o(36,"th"),l(37,"Role"),s(),o(38,"th"),l(39,"Last Login"),s(),o(40,"th"),l(41,"Active"),s()()(),o(42,"tbody"),x(43,Hk,3,0,"tr",20)(44,qk,20,7,"tr",21),s()()(),o(45,"div",22)(46,"div",23),l(47),s(),o(48,"div",24)(49,"button",25),b("click",function(){return i.previousPage()}),l(50,"Previous"),s(),o(51,"span",26),l(52),s(),o(53,"button",25),b("click",function(){return i.nextPage()}),l(54,"Next"),s()()()()()),e&2&&(c(8),S("ngModel",i.pageSize),c(),m("value",10),c(2),m("value",25),c(2),m("value",50),c(2),m("value",100),c(9),S("ngModel",i.searchQuery),c(19),m("ngIf",i.paginatedStaff.length===0),c(),m("ngForOf",i.paginatedStaff),c(3),vo(" Showing ",i.startEntry," to ",i.endEntry," of ",i.filteredStaff.length," entries "),c(2),m("disabled",i.currentPage===1),c(3),g(i.currentPage),c(),m("disabled",i.currentPage>=i.totalPages))},dependencies:[V,j,Y,Z,$,K,q,H],styles:['.page-header-simple[_ngcontent-%COMP%]{margin-bottom:20px}.btn-new-staff[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5b6abf,#4a5ba8);border:none;padding:10px 20px;font-weight:500}.btn-new-staff[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4a5ba8,#3d4d8f)}.table-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.page-size-select[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;font-size:.9rem}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333}.btn-outline[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:#666;padding:6px 10px}.btn-icon[_ngcontent-%COMP%]:hover{color:#333}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px 8px 36px;border:1px solid #ddd;border-radius:4px;width:200px;font-size:.9rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5b6abf}.staff-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.staff-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#5b6abf,#4a5ba8);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.9rem}.sortable[_ngcontent-%COMP%]{cursor:pointer}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px;color:#5b6abf}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:26px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:26px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#5b6abf}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid #eee}.showing-entries[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pagination[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;background:#5b6abf;color:#fff;border-radius:4px;font-weight:500}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid #eee;margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:#666;font-size:.95rem;cursor:pointer;position:relative}.tab.active[_ngcontent-%COMP%]{color:#333;font-weight:600}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#5b6abf}.tab[_ngcontent-%COMP%]:hover:not(.active){color:#333}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:#f5f5f5;border:1px solid #ddd;border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#666;font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:#dc3545;margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:20px;padding:12px;background:#f8f9fa;border-radius:4px}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}}']})};function zk(n,t){n&1&&(o(0,"tr")(1,"td",13),_(2,"i",14),o(3,"p"),l(4,'No tax rates configured. Click "Add Tax Rate" to create one.'),s()()())}function $k(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td")(9,"span",15),l(10),s()(),o(11,"td")(12,"div",16)(13,"button",17),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(14,"i",18),s(),o(15,"button",19),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteTaxRate(r.id))}),_(16,"i",20),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.name),c(2),T("",e.rate,"%"),c(2),g(e.description),c(2),ne("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function Qk(n,t){if(n&1){let e=O();o(0,"div",21),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",22),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),s(),o(5,"button",24),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",25),s()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Tax Name"),s(),o(11,"input",28),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTaxRate.name,r)||(a.selectedTaxRate.name=r),y(r)}),s()(),o(12,"div",27)(13,"label"),l(14,"Rate (%)"),s(),o(15,"input",29),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTaxRate.rate,r)||(a.selectedTaxRate.rate=r),y(r)}),s()(),o(16,"div",27)(17,"label"),l(18,"Description"),s(),o(19,"textarea",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTaxRate.description,r)||(a.selectedTaxRate.description=r),y(r)}),s()(),o(20,"div",27)(21,"label"),l(22,"Status"),s(),o(23,"select",31),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTaxRate.status,r)||(a.selectedTaxRate.status=r),y(r)}),o(24,"option",32),l(25,"Active"),s(),o(26,"option",33),l(27,"Inactive"),s()()()(),o(28,"div",34)(29,"button",35),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(30,"Cancel"),s(),o(31,"button",5),b("click",function(){v(e);let r=f();return y(r.saveTaxRate())}),l(32),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Tax Rate":"Add Tax Rate"),c(7),S("ngModel",e.selectedTaxRate.name),c(4),S("ngModel",e.selectedTaxRate.rate),c(4),S("ngModel",e.selectedTaxRate.description),c(4),S("ngModel",e.selectedTaxRate.status),c(9),g(e.editMode?"Update":"Save")}}var Iu=class n{taxRates=[];showModal=!1;editMode=!1;selectedTaxRate=this.getEmptyTaxRate();loading=!1;ngOnInit(){this.loadTaxRates()}loadTaxRates(){this.loading=!1}getEmptyTaxRate(){return{name:"",rate:0,description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedTaxRate=R({},t)):(this.editMode=!1,this.selectedTaxRate=this.getEmptyTaxRate()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedTaxRate=this.getEmptyTaxRate()}saveTaxRate(){if(this.editMode){let t=this.taxRates.findIndex(e=>e.id===this.selectedTaxRate.id);t!==-1&&(this.taxRates[t]=R({},this.selectedTaxRate))}else this.selectedTaxRate.id=Date.now(),this.taxRates.push(R({},this.selectedTaxRate));this.closeModal()}deleteTaxRate(t){confirm("Are you sure you want to delete this tax rate?")&&(this.taxRates=this.taxRates.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-tax-rates"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-percent"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., VAT, GST",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Tax description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Tax Rates"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Tax Rates"),s()()(),o(16,"button",5),b("click",function(){return i.openModal()}),_(17,"i",6),l(18," Add Tax Rate "),s()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),s(),o(26,"th"),l(27,"Rate (%)"),s(),o(28,"th"),l(29,"Description"),s(),o(30,"th"),l(31,"Status"),s(),o(32,"th"),l(33,"Actions"),s()()(),o(34,"tbody"),x(35,zk,5,0,"tr",10)(36,$k,17,8,"tr",11),s()()()()(),x(37,Qk,33,6,"div",12)),e&2&&(c(35),m("ngIf",i.taxRates.length===0),c(),m("ngForOf",i.taxRates),c(),m("ngIf",i.showModal))},dependencies:[V,j,Y,Z,$,Oe,K,q,H,Q],encapsulation:2})};function Kk(n,t){n&1&&(o(0,"tr")(1,"td",13),_(2,"i",14),o(3,"p"),l(4,'No currencies configured. Click "Add Currency" to create one.'),s()()())}function Yk(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td")(11,"span",15),l(12),s()(),o(13,"td")(14,"span",15),l(15),s()(),o(16,"td")(17,"div",16)(18,"button",17),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(19,"i",18),s(),o(20,"button",19),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteCurrency(r.id))}),_(21,"i",20),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.symbol),c(2),g(e.exchangeRate),c(2),ne("badge-primary",e.isDefault),c(),g(e.isDefault?"Yes":"No"),c(2),ne("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function Zk(n,t){if(n&1){let e=O();o(0,"div",21),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",22),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),s(),o(5,"button",24),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",25),s()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Currency Code"),s(),o(12,"input",29),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.code,r)||(a.selectedCurrency.code=r),y(r)}),s()(),o(13,"div",28)(14,"label"),l(15,"Currency Name"),s(),o(16,"input",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.name,r)||(a.selectedCurrency.name=r),y(r)}),s()()(),o(17,"div",27)(18,"div",28)(19,"label"),l(20,"Symbol"),s(),o(21,"input",31),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.symbol,r)||(a.selectedCurrency.symbol=r),y(r)}),s()(),o(22,"div",28)(23,"label"),l(24,"Exchange Rate"),s(),o(25,"input",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.exchangeRate,r)||(a.selectedCurrency.exchangeRate=r),y(r)}),s()()(),o(26,"div",27)(27,"div",28)(28,"label"),l(29,"Default Currency"),s(),o(30,"select",33),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.isDefault,r)||(a.selectedCurrency.isDefault=r),y(r)}),o(31,"option",34),l(32,"Yes"),s(),o(33,"option",34),l(34,"No"),s()()(),o(35,"div",28)(36,"label"),l(37,"Status"),s(),o(38,"select",33),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCurrency.status,r)||(a.selectedCurrency.status=r),y(r)}),o(39,"option",35),l(40,"Active"),s(),o(41,"option",36),l(42,"Inactive"),s()()()()(),o(43,"div",37)(44,"button",38),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(45,"Cancel"),s(),o(46,"button",5),b("click",function(){v(e);let r=f();return y(r.saveCurrency())}),l(47),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Currency":"Add Currency"),c(8),S("ngModel",e.selectedCurrency.code),c(4),S("ngModel",e.selectedCurrency.name),c(5),S("ngModel",e.selectedCurrency.symbol),c(4),S("ngModel",e.selectedCurrency.exchangeRate),c(5),S("ngModel",e.selectedCurrency.isDefault),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(5),S("ngModel",e.selectedCurrency.status),c(9),g(e.editMode?"Update":"Save")}}var Du=class n{currencies=[];showModal=!1;editMode=!1;selectedCurrency=this.getEmptyCurrency();loading=!1;ngOnInit(){this.loadCurrencies()}loadCurrencies(){this.loading=!1}getEmptyCurrency(){return{code:"",name:"",symbol:"",exchangeRate:1,isDefault:!1,status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCurrency=R({},t)):(this.editMode=!1,this.selectedCurrency=this.getEmptyCurrency()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCurrency=this.getEmptyCurrency()}saveCurrency(){if(this.editMode){let t=this.currencies.findIndex(e=>e.id===this.selectedCurrency.id);t!==-1&&(this.currencies[t]=R({},this.selectedCurrency))}else this.selectedCurrency.id=Date.now(),this.currencies.push(R({},this.selectedCurrency));this.closeModal()}deleteCurrency(t){confirm("Are you sure you want to delete this currency?")&&(this.currencies=this.currencies.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-currencies"]],standalone:!1,decls:42,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., USD, EUR",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., US Dollar",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., $, \u20AC",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","1.00",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Currencies"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Currencies"),s()()(),o(16,"button",5),b("click",function(){return i.openModal()}),_(17,"i",6),l(18," Add Currency "),s()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),s(),o(26,"th"),l(27,"Name"),s(),o(28,"th"),l(29,"Symbol"),s(),o(30,"th"),l(31,"Exchange Rate"),s(),o(32,"th"),l(33,"Default"),s(),o(34,"th"),l(35,"Status"),s(),o(36,"th"),l(37,"Actions"),s()()(),o(38,"tbody"),x(39,Kk,5,0,"tr",10)(40,Yk,22,12,"tr",11),s()()()()(),x(41,Zk,48,10,"div",12)),e&2&&(c(39),m("ngIf",i.currencies.length===0),c(),m("ngForOf",i.currencies),c(),m("ngIf",i.showModal))},dependencies:[V,j,Y,Z,$,Oe,K,q,H,Q],encapsulation:2})};function Jk(n,t){n&1&&(o(0,"tr")(1,"td",13),_(2,"i",14),o(3,"p"),l(4,'No payment modes configured. Click "Add Payment Mode" to create one.'),s()()())}function Xk(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td")(7,"span",15),l(8),s()(),o(9,"td")(10,"div",16)(11,"button",17),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(12,"i",18),s(),o(13,"button",19),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deletePaymentMode(r.id))}),_(14,"i",20),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.name),c(2),g(e.description),c(2),ne("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function eR(n,t){if(n&1){let e=O();o(0,"div",21),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",22),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),s(),o(5,"button",24),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",25),s()(),o(7,"div",26)(8,"div",27)(9,"label"),l(10,"Payment Mode Name"),s(),o(11,"input",28),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPaymentMode.name,r)||(a.selectedPaymentMode.name=r),y(r)}),s()(),o(12,"div",27)(13,"label"),l(14,"Description"),s(),o(15,"textarea",29),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPaymentMode.description,r)||(a.selectedPaymentMode.description=r),y(r)}),s()(),o(16,"div",27)(17,"label"),l(18,"Status"),s(),o(19,"select",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPaymentMode.status,r)||(a.selectedPaymentMode.status=r),y(r)}),o(20,"option",31),l(21,"Active"),s(),o(22,"option",32),l(23,"Inactive"),s()()()(),o(24,"div",33)(25,"button",34),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(26,"Cancel"),s(),o(27,"button",5),b("click",function(){v(e);let r=f();return y(r.savePaymentMode())}),l(28),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Payment Mode":"Add Payment Mode"),c(7),S("ngModel",e.selectedPaymentMode.name),c(4),S("ngModel",e.selectedPaymentMode.description),c(4),S("ngModel",e.selectedPaymentMode.status),c(9),g(e.editMode?"Update":"Save")}}var Pu=class n{paymentModes=[];showModal=!1;editMode=!1;selectedPaymentMode=this.getEmptyPaymentMode();loading=!1;ngOnInit(){this.loadPaymentModes()}loadPaymentModes(){this.loading=!1}getEmptyPaymentMode(){return{name:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedPaymentMode=R({},t)):(this.editMode=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedPaymentMode=this.getEmptyPaymentMode()}savePaymentMode(){if(this.editMode){let t=this.paymentModes.findIndex(e=>e.id===this.selectedPaymentMode.id);t!==-1&&(this.paymentModes[t]=R({},this.selectedPaymentMode))}else this.selectedPaymentMode.id=Date.now(),this.paymentModes.push(R({},this.selectedPaymentMode));this.closeModal()}deletePaymentMode(t){confirm("Are you sure you want to delete this payment mode?")&&(this.paymentModes=this.paymentModes.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-payment-modes"]],standalone:!1,decls:36,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","4",1,"empty-state"],[1,"fas","fa-credit-card"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Cash, Credit Card, Bank Transfer",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Payment mode description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Payment Modes"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Payment Modes"),s()()(),o(16,"button",5),b("click",function(){return i.openModal()}),_(17,"i",6),l(18," Add Payment Mode "),s()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Name"),s(),o(26,"th"),l(27,"Description"),s(),o(28,"th"),l(29,"Status"),s(),o(30,"th"),l(31,"Actions"),s()()(),o(32,"tbody"),x(33,Jk,5,0,"tr",10)(34,Xk,15,7,"tr",11),s()()()()(),x(35,eR,29,5,"div",12)),e&2&&(c(33),m("ngIf",i.paymentModes.length===0),c(),m("ngForOf",i.paymentModes),c(),m("ngIf",i.showModal))},dependencies:[V,j,Y,Z,$,K,q,H,Q],encapsulation:2})};function tR(n,t){n&1&&(o(0,"tr")(1,"td",13),_(2,"i",14),o(3,"p"),l(4,'No expense categories configured. Click "Add Category" to create one.'),s()()())}function nR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td")(9,"span",15),l(10),s()(),o(11,"td")(12,"div",16)(13,"button",17),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(14,"i",18),s(),o(15,"button",19),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteCategory(r.id))}),_(16,"i",20),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.description),c(2),ne("badge-success",e.status==="Active")("badge-danger",e.status!=="Active"),c(),g(e.status)}}function iR(n,t){if(n&1){let e=O();o(0,"div",21),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",22),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),s(),o(5,"button",24),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",25),s()(),o(7,"div",26)(8,"div",27)(9,"div",28)(10,"label"),l(11,"Category Code"),s(),o(12,"input",29),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCategory.code,r)||(a.selectedCategory.code=r),y(r)}),s()(),o(13,"div",28)(14,"label"),l(15,"Category Name"),s(),o(16,"input",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCategory.name,r)||(a.selectedCategory.name=r),y(r)}),s()()(),o(17,"div",28)(18,"label"),l(19,"Description"),s(),o(20,"textarea",31),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCategory.description,r)||(a.selectedCategory.description=r),y(r)}),s()(),o(21,"div",28)(22,"label"),l(23,"Status"),s(),o(24,"select",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCategory.status,r)||(a.selectedCategory.status=r),y(r)}),o(25,"option",33),l(26,"Active"),s(),o(27,"option",34),l(28,"Inactive"),s()()()(),o(29,"div",35)(30,"button",36),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(31,"Cancel"),s(),o(32,"button",5),b("click",function(){v(e);let r=f();return y(r.saveCategory())}),l(33),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Expense Category":"Add Expense Category"),c(8),S("ngModel",e.selectedCategory.code),c(4),S("ngModel",e.selectedCategory.name),c(4),S("ngModel",e.selectedCategory.description),c(4),S("ngModel",e.selectedCategory.status),c(9),g(e.editMode?"Update":"Save")}}var Tu=class n{expenseCategories=[];showModal=!1;editMode=!1;selectedCategory=this.getEmptyCategory();loading=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!1}getEmptyCategory(){return{name:"",code:"",description:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCategory=R({},t)):(this.editMode=!1,this.selectedCategory=this.getEmptyCategory()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCategory=this.getEmptyCategory()}saveCategory(){if(this.editMode){let t=this.expenseCategories.findIndex(e=>e.id===this.selectedCategory.id);t!==-1&&(this.expenseCategories[t]=R({},this.selectedCategory))}else this.selectedCategory.id=Date.now(),this.expenseCategories.push(R({},this.selectedCategory));this.closeModal()}deleteCategory(t){confirm("Are you sure you want to delete this expense category?")&&(this.expenseCategories=this.expenseCategories.filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-expense-categories"]],standalone:!1,decls:38,vars:3,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/general"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-receipt"],[1,"badge"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","e.g., EXP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Office Supplies",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Category description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Expense Categories"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Settings"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Expense Categories"),s()()(),o(16,"button",5),b("click",function(){return i.openModal()}),_(17,"i",6),l(18," Add Category "),s()(),o(19,"div",7)(20,"div",8)(21,"table",9)(22,"thead")(23,"tr")(24,"th"),l(25,"Code"),s(),o(26,"th"),l(27,"Name"),s(),o(28,"th"),l(29,"Description"),s(),o(30,"th"),l(31,"Status"),s(),o(32,"th"),l(33,"Actions"),s()()(),o(34,"tbody"),x(35,tR,5,0,"tr",10)(36,nR,17,8,"tr",11),s()()()()(),x(37,iR,34,6,"div",12)),e&2&&(c(35),m("ngIf",i.expenseCategories.length===0),c(),m("ngForOf",i.expenseCategories),c(),m("ngIf",i.showModal))},dependencies:[V,j,Y,Z,$,K,q,H,Q],encapsulation:2})};var $o=class n{constructor(t){this.http=t}baseUrl="/api/customers";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function rR(n,t){n&1&&(o(0,"tr")(1,"td",28),_(2,"i",29),o(3,"p"),l(4,"Loading..."),s()()())}function oR(n,t){n&1&&(o(0,"tr")(1,"td",28),_(2,"i",9),o(3,"p"),l(4,'No customers found. Click "Add Customer" to create one.'),s()()())}function aR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"div",30)(3,"div",31),l(4),s(),o(5,"span"),l(6),s()()(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td")(12,"span",32),l(13),s()(),o(14,"td")(15,"span",33),l(16),s()(),o(17,"td")(18,"div",34)(19,"button",35),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(20,"i",36),s(),o(21,"button",37),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteCustomer(r.id))}),_(22,"i",38),s()()()()}if(n&2){let e=t.$implicit,i=f();c(4),g(e.name.charAt(0)),c(2),g(e.name),c(2),g(e.email),c(2),g(e.phone),c(3),g(e.customerGroup||"-"),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function sR(n,t){if(n&1){let e=O();o(0,"div",39),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",40),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",41)(3,"h2"),l(4),s(),o(5,"button",42),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",43),s()(),o(7,"div",44)(8,"div",45)(9,"label"),l(10,"Customer Name"),s(),o(11,"input",46),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.name,r)||(a.selectedCustomer.name=r),y(r)}),s()(),o(12,"div",45)(13,"label"),l(14,"Email"),s(),o(15,"input",47),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.email,r)||(a.selectedCustomer.email=r),y(r)}),s()(),o(16,"div",45)(17,"label"),l(18,"Phone"),s(),o(19,"input",48),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.phone,r)||(a.selectedCustomer.phone=r),y(r)}),s()(),o(20,"div",45)(21,"label"),l(22,"Address"),s(),o(23,"input",49),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.address,r)||(a.selectedCustomer.address=r),y(r)}),s()(),o(24,"div",45)(25,"label"),l(26,"Customer Group"),s(),o(27,"select",50),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.customerGroup,r)||(a.selectedCustomer.customerGroup=r),y(r)}),o(28,"option",51),l(29,"Select Group"),s(),o(30,"option",52),l(31,"Retail"),s(),o(32,"option",53),l(33,"Wholesale"),s(),o(34,"option",54),l(35,"VIP"),s(),o(36,"option",55),l(37,"Corporate"),s()()(),o(38,"div",45)(39,"label"),l(40,"Status"),s(),o(41,"select",50),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedCustomer.status,r)||(a.selectedCustomer.status=r),y(r)}),o(42,"option",56),l(43,"Active"),s(),o(44,"option",57),l(45,"Inactive"),s()()()(),o(46,"div",58)(47,"button",59),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(48,"Cancel"),s(),o(49,"button",4),b("click",function(){v(e);let r=f();return y(r.saveCustomer())}),l(50),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Customer":"Add Customer"),c(7),S("ngModel",e.selectedCustomer.name),c(4),S("ngModel",e.selectedCustomer.email),c(4),S("ngModel",e.selectedCustomer.phone),c(4),S("ngModel",e.selectedCustomer.address),c(4),S("ngModel",e.selectedCustomer.customerGroup),c(14),S("ngModel",e.selectedCustomer.status),c(9),g(e.editMode?"Update":"Save")}}var Ou=class n{constructor(t){this.customerService=t}customers=[];searchQuery="";showModal=!1;editMode=!1;selectedCustomer=this.getEmptyCustomer();loading=!1;ngOnInit(){this.loadCustomers()}loadCustomers(){this.loading=!0,this.customerService.getAll().subscribe({next:t=>{this.customers=t,this.loading=!1},error:t=>{console.error("Error loading customers",t),this.loading=!1}})}get filteredCustomers(){return this.searchQuery?this.customers.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())):this.customers}getEmptyCustomer(){return{name:"",email:"",phone:"",address:"",customerGroup:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedCustomer=R({},t)):(this.editMode=!1,this.selectedCustomer=this.getEmptyCustomer()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedCustomer=this.getEmptyCustomer()}saveCustomer(){this.editMode&&this.selectedCustomer.id?this.customerService.update(this.selectedCustomer.id,this.selectedCustomer).subscribe({next:()=>{this.loadCustomers(),this.closeModal()},error:t=>console.error("Error updating customer",t)}):this.customerService.create(this.selectedCustomer).subscribe({next:()=>{this.loadCustomers(),this.closeModal()},error:t=>console.error("Error creating customer",t)})}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&this.customerService.delete(t).subscribe({next:()=>this.loadCustomers(),error:e=>console.error("Error deleting customer",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}getActiveCount(){return this.customers.filter(t=>t.status==="Active").length}getInactiveCount(){return this.customers.filter(t=>t.status==="Inactive").length}static \u0275fac=function(e){return new(e||n)(I($o))};static \u0275cmp=F({type:n,selectors:[["app-customer-management"]],standalone:!1,decls:77,vars:11,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-users"],[1,"info"],[1,"icon","success"],[1,"fas","fa-user-check"],[1,"icon","warning"],[1,"fas","fa-user-times"],[1,"icon","info"],[1,"fas","fa-chart-line"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search customers...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table-footer"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","6",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"user-cell"],[1,"avatar"],[1,"badge","badge-info"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter customer name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter address",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Retail"],["value","Wholesale"],["value","VIP"],["value","Corporate"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Customer Management"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Customers"),s()()(),o(12,"button",4),b("click",function(){return i.openModal()}),_(13,"i",5),l(14," Add Customer "),s()(),o(15,"div",6)(16,"div",7)(17,"div",8),_(18,"i",9),s(),o(19,"div",10)(20,"h3"),l(21),s(),o(22,"p"),l(23,"Total Customers"),s()()(),o(24,"div",7)(25,"div",11),_(26,"i",12),s(),o(27,"div",10)(28,"h3"),l(29),s(),o(30,"p"),l(31,"Active Customers"),s()()(),o(32,"div",7)(33,"div",13),_(34,"i",14),s(),o(35,"div",10)(36,"h3"),l(37),s(),o(38,"p"),l(39,"Inactive Customers"),s()()(),o(40,"div",7)(41,"div",15),_(42,"i",16),s(),o(43,"div",10)(44,"h3"),l(45),s(),o(46,"p"),l(47,"Growth Rate"),s()()()(),o(48,"div",17)(49,"div",18)(50,"div",19),_(51,"i",20),o(52,"input",21),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(53,"div",22)(54,"table",23)(55,"thead")(56,"tr")(57,"th"),l(58,"Customer"),s(),o(59,"th"),l(60,"Email"),s(),o(61,"th"),l(62,"Phone"),s(),o(63,"th"),l(64,"Group"),s(),o(65,"th"),l(66,"Status"),s(),o(67,"th"),l(68,"Actions"),s()()(),o(69,"tbody"),x(70,rR,5,0,"tr",24)(71,oR,5,0,"tr",24)(72,aR,23,7,"tr",25),s()()(),o(73,"div",26)(74,"span"),l(75),s()()()(),x(76,sR,51,8,"div",27)),e&2&&(c(21),g(i.customers.length),c(8),g(i.getActiveCount()),c(8),g(i.getInactiveCount()),c(8),g(i.customers.length>0?"+12%":"0%"),c(7),S("ngModel",i.searchQuery),c(18),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredCustomers.length===0),c(),m("ngForOf",i.filteredCustomers),c(3),de("Showing ",i.filteredCustomers.length," of ",i.customers.length," customers"),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-cell[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.table-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;gap:8px}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:16px}}"]})};var ku=class n{constructor(t){this.http=t}baseUrl="/api/contracts";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function cR(n,t){n&1&&(o(0,"tr")(1,"td",27),_(2,"i",28),o(3,"p"),l(4,"Loading..."),s()()())}function dR(n,t){n&1&&(o(0,"tr")(1,"td",27),_(2,"i",9),o(3,"p"),l(4,'No contracts found. Click "New Contract" to create one.'),s()()())}function uR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),X(12,"number"),s(),o(13,"td")(14,"span",29),l(15),s()(),o(16,"td")(17,"div",30)(18,"button",31),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(19,"i",32),s(),o(20,"button",33),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteContract(r.id))}),_(21,"i",34),s()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.contractNumber||"C-"+e.id),c(2),g(e.title),c(2),g(e.startDate),c(2),g(e.endDate),c(2),T("$",Tc(12,7,e.value)),c(3),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function pR(n,t){if(n&1){let e=O();o(0,"div",35),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",36),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),s(),o(5,"button",38),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",39),s()(),o(7,"div",40)(8,"div",41)(9,"label"),l(10,"Title"),s(),o(11,"input",42),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.title,r)||(a.selectedContract.title=r),y(r)}),s()(),o(12,"div",41)(13,"label"),l(14,"Description"),s(),o(15,"textarea",43),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.description,r)||(a.selectedContract.description=r),y(r)}),s()(),o(16,"div",44)(17,"div",41)(18,"label"),l(19,"Start Date"),s(),o(20,"input",45),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.startDate,r)||(a.selectedContract.startDate=r),y(r)}),s()(),o(21,"div",41)(22,"label"),l(23,"End Date"),s(),o(24,"input",45),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.endDate,r)||(a.selectedContract.endDate=r),y(r)}),s()()(),o(25,"div",44)(26,"div",41)(27,"label"),l(28,"Value ($)"),s(),o(29,"input",46),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.value,r)||(a.selectedContract.value=r),y(r)}),s()(),o(30,"div",41)(31,"label"),l(32,"Status"),s(),o(33,"select",47),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.status,r)||(a.selectedContract.status=r),y(r)}),o(34,"option",48),l(35,"Active"),s(),o(36,"option",49),l(37,"Pending"),s(),o(38,"option",50),l(39,"Expired"),s(),o(40,"option",51),l(41,"Cancelled"),s()()()(),o(42,"div",41)(43,"label"),l(44,"Payment Terms"),s(),o(45,"input",52),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedContract.paymentTerms,r)||(a.selectedContract.paymentTerms=r),y(r)}),s()()(),o(46,"div",53)(47,"button",54),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(48,"Cancel"),s(),o(49,"button",4),b("click",function(){v(e);let r=f();return y(r.saveContract())}),l(50),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Contract":"New Contract"),c(7),S("ngModel",e.selectedContract.title),c(4),S("ngModel",e.selectedContract.description),c(5),S("ngModel",e.selectedContract.startDate),c(4),S("ngModel",e.selectedContract.endDate),c(5),S("ngModel",e.selectedContract.value),c(4),S("ngModel",e.selectedContract.status),c(12),S("ngModel",e.selectedContract.paymentTerms),c(5),g(e.editMode?"Update":"Save")}}var Ru=class n{constructor(t,e){this.contractService=t;this.customerService=e}contracts=[];customers=[];searchQuery="";showModal=!1;editMode=!1;selectedContract=this.getEmptyContract();loading=!1;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.contractService.getAll().subscribe({next:t=>{this.contracts=t,this.loading=!1},error:t=>{console.error("Error loading contracts",t),this.loading=!1}}),this.customerService.getAll().subscribe({next:t=>this.customers=t,error:t=>console.error("Error loading customers",t)})}get filteredContracts(){return this.searchQuery?this.contracts.filter(t=>t.contractNumber?.toLowerCase().includes(this.searchQuery.toLowerCase())||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())):this.contracts}getEmptyContract(){return{title:"",description:"",startDate:"",endDate:"",value:0,status:"Active",paymentTerms:""}}openModal(t){t?(this.editMode=!0,this.selectedContract=R({},t)):(this.editMode=!1,this.selectedContract=this.getEmptyContract()),this.showModal=!0}closeModal(){this.showModal=!1,this.selectedContract=this.getEmptyContract()}saveContract(){this.editMode&&this.selectedContract.id?this.contractService.update(this.selectedContract.id,this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error updating contract",t)}):this.contractService.create(this.selectedContract).subscribe({next:()=>{this.loadData(),this.closeModal()},error:t=>console.error("Error creating contract",t)})}deleteContract(t){confirm("Are you sure you want to delete this contract?")&&this.contractService.delete(t).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting contract",e)})}getStatusClass(t){return{Active:"badge-success",Pending:"badge-warning",Completed:"badge-info",Expired:"badge-danger",Cancelled:"badge-secondary"}[t]||"badge-info"}getTotalValue(){return this.contracts.reduce((t,e)=>t+(e.value||0),0)}getActiveCount(){return this.contracts.filter(t=>t.status==="Active").length}getPendingCount(){return this.contracts.filter(t=>t.status==="Pending").length}static \u0275fac=function(e){return new(e||n)(I(ku),I($o))};static \u0275cmp=F({type:n,selectors:[["app-contract-management"]],standalone:!1,decls:77,vars:11,consts:[[1,"management-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-contract"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search contracts...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Contract title",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Contract description",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Pending"],["value","Expired"],["value","Cancelled"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Contract Management"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Contracts"),s()()(),o(12,"button",4),b("click",function(){return i.openModal()}),_(13,"i",5),l(14," New Contract "),s()(),o(15,"div",6)(16,"div",7)(17,"div",8),_(18,"i",9),s(),o(19,"div",10)(20,"h3"),l(21),s(),o(22,"p"),l(23,"Total Contracts"),s()()(),o(24,"div",7)(25,"div",11),_(26,"i",12),s(),o(27,"div",10)(28,"h3"),l(29),s(),o(30,"p"),l(31,"Active Contracts"),s()()(),o(32,"div",7)(33,"div",13),_(34,"i",14),s(),o(35,"div",10)(36,"h3"),l(37),s(),o(38,"p"),l(39,"Pending"),s()()(),o(40,"div",7)(41,"div",15),_(42,"i",16),s(),o(43,"div",10)(44,"h3"),l(45),X(46,"number"),s(),o(47,"p"),l(48,"Total Value"),s()()()(),o(49,"div",17)(50,"div",18)(51,"div",19),_(52,"i",20),o(53,"input",21),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(54,"div",22)(55,"table",23)(56,"thead")(57,"tr")(58,"th"),l(59,"Contract #"),s(),o(60,"th"),l(61,"Title"),s(),o(62,"th"),l(63,"Start Date"),s(),o(64,"th"),l(65,"End Date"),s(),o(66,"th"),l(67,"Value"),s(),o(68,"th"),l(69,"Status"),s(),o(70,"th"),l(71,"Actions"),s()()(),o(72,"tbody"),x(73,cR,5,0,"tr",24)(74,dR,5,0,"tr",24)(75,uR,22,9,"tr",25),s()()()()(),x(76,pR,51,9,"div",26)),e&2&&(c(21),g(i.contracts.length),c(8),g(i.getActiveCount()),c(8),g(i.getPendingCount()),c(8),T("$",Tc(46,9,i.getTotalValue())),c(8),S("ngModel",i.searchQuery),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredContracts.length===0),c(),m("ngForOf",i.filteredContracts),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,H,Q,De],styles:[".management-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}@media(max-width:768px){.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}}"]})};var en=class n{constructor(t){this.http=t}baseUrl="/api/inventory/groups";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}canDeactivate(t){return this.http.get(`${this.baseUrl}/${t}/can-deactivate`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deactivate(t){return this.http.put(`${this.baseUrl}/${t}/deactivate`,{})}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function mR(n,t){n&1&&(o(0,"tr")(1,"td",16),_(2,"i",17),o(3,"p"),l(4,"Loading..."),s()()())}function fR(n,t){n&1&&(o(0,"tr")(1,"td",16),_(2,"i",18),o(3,"p"),l(4,'No groups found. Click "Add Group" to create one.'),s()()())}function gR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td")(9,"span",19),l(10),s()(),o(11,"td")(12,"div",20)(13,"button",21),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(14,"i",22),s(),o(15,"button",23),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteGroup(r.id))}),_(16,"i",24),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(2),g(e.name),c(2),g(e.description||"-"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),T(" ",e.status," ")}}function hR(n,t){if(n&1&&(o(0,"div",45),l(1),s()),n&2){let e=f(2);c(),T(" ",e.errorMessage," ")}}function _R(n,t){n&1&&(o(0,"small",46),l(1,"Unique identifier for this group"),s())}function vR(n,t){if(n&1&&(o(0,"small",47),l(1),s()),n&2){let e=f(2);c(),T(" Cannot set to Inactive: ",e.canDeactivateInfo.itemCount," item(s) linked to this group ")}}function yR(n,t){if(n&1){let e=O();o(0,"div",25),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",26),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",27)(3,"h2"),l(4),s(),o(5,"button",28),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",29),s()(),o(7,"div",30),x(8,hR,2,1,"div",31),o(9,"div",32)(10,"label"),l(11,"Group Code "),o(12,"span",33),l(13,"*"),s()(),o(14,"input",34),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGroup.code,r)||(a.selectedGroup.code=r),y(r)}),s(),x(15,_R,2,0,"small",35),s(),o(16,"div",32)(17,"label"),l(18,"Group Name "),o(19,"span",33),l(20,"*"),s()(),o(21,"input",36),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGroup.name,r)||(a.selectedGroup.name=r),y(r)}),s()(),o(22,"div",32)(23,"label"),l(24,"Description"),s(),o(25,"textarea",37),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGroup.description,r)||(a.selectedGroup.description=r),y(r)}),s()(),o(26,"div",32)(27,"label"),l(28,"Status"),s(),o(29,"select",38),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGroup.status,r)||(a.selectedGroup.status=r),y(r)}),o(30,"option",39),l(31,"Active"),s(),o(32,"option",40),l(33,"Inactive"),s()(),x(34,vR,2,1,"small",41),s()(),o(35,"div",42)(36,"button",43),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(37,"Cancel"),s(),o(38,"button",44),b("click",function(){v(e);let r=f();return y(r.saveGroup())}),l(39),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Group":"Add Group"),c(4),m("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedGroup.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),S("ngModel",e.selectedGroup.name),c(4),S("ngModel",e.selectedGroup.description),c(4),S("ngModel",e.selectedGroup.status),c(3),m("disabled",!e.canChangeToInactive()),c(2),m("ngIf",e.editMode&&e.canDeactivateInfo&&!e.canDeactivateInfo.canDeactivate),c(4),m("disabled",!e.isFormValid()),c(),T(" ",e.editMode?"Update":"Save"," ")}}var Nu=class n{constructor(t,e){this.groupService=t;this.settingsService=e}groups=[];searchQuery="";showModal=!1;editMode=!1;selectedGroup=this.getEmptyGroup();loading=!1;errorMessage="";canDeactivateInfo=null;ngOnInit(){this.loadGroups()}loadGroups(){this.loading=!0,this.groupService.getAll().subscribe({next:t=>{this.groups=t,this.loading=!1},error:t=>{console.error("Error loading groups",t),this.loading=!1}})}get filteredGroups(){return this.searchQuery?this.groups.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.groups}getEmptyGroup(){return{code:"",name:"",description:"",status:"Active"}}openModal(t){this.errorMessage="",this.canDeactivateInfo=null,t?(this.editMode=!0,this.selectedGroup=R({},t),this.checkCanDeactivate(t.id)):(this.editMode=!1,this.selectedGroup=this.getEmptyGroup(),this.generateGroupCode()),this.showModal=!0}generateGroupCode(){this.settingsService.generatePrefixId("group").subscribe({next:t=>{this.selectedGroup.code=t},error:t=>console.error("Error generating group code",t)})}checkCanDeactivate(t){this.groupService.canDeactivate(t).subscribe({next:e=>{this.canDeactivateInfo=e},error:e=>console.error("Error checking deactivate status",e)})}closeModal(){this.showModal=!1,this.selectedGroup=this.getEmptyGroup(),this.errorMessage="",this.canDeactivateInfo=null}isFormValid(){return this.selectedGroup.code.trim()!==""&&this.selectedGroup.name.trim()!==""}canChangeToInactive(){return!this.editMode||this.selectedGroup.status==="Active"||this.canDeactivateInfo===null?!0:this.canDeactivateInfo.canDeactivate}saveGroup(){if(!this.isFormValid()){this.errorMessage="Group Code and Name are required";return}if(this.editMode&&this.selectedGroup.status==="Inactive"&&this.canDeactivateInfo&&!this.canDeactivateInfo.canDeactivate){this.errorMessage=`Cannot deactivate: ${this.canDeactivateInfo.itemCount} item(s) are linked to this group`;return}this.editMode&&this.selectedGroup.id?this.groupService.update(this.selectedGroup.id,this.selectedGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error updating group"}}):this.groupService.create(this.selectedGroup).subscribe({next:()=>{this.loadGroups(),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error creating group"}})}deleteGroup(t){this.groupService.canDeactivate(t).subscribe({next:e=>{if(!e.canDeactivate){alert(`Cannot delete group: ${e.itemCount} item(s) are linked to this group. Please reassign or delete those items first.`);return}confirm("Are you sure you want to delete this group?")&&this.groupService.delete(t).subscribe({next:()=>this.loadGroups(),error:i=>{alert(i.error?.error||"Error deleting group")}})},error:e=>console.error("Error checking delete status",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(en),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-group-master"]],standalone:!1,decls:43,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search groups...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","5",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-layer-group"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., GRP-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","Enter group name",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive",3,"disabled"],["class","form-hint warning",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],[1,"form-hint","warning"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Group Master"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Groups"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," Add Group "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),o(23,"input",10),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Group Code"),s(),o(30,"th"),l(31,"Group Name"),s(),o(32,"th"),l(33,"Description"),s(),o(34,"th"),l(35,"Status"),s(),o(36,"th"),l(37,"Actions"),s()()(),o(38,"tbody"),x(39,mR,5,0,"tr",13)(40,fR,5,0,"tr",13)(41,gR,17,5,"tr",14),s()()()()(),x(42,yR,40,12,"div",15)),e&2&&(c(23),S("ngModel",i.searchQuery),c(16),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredGroups.length===0),c(),m("ngForOf",i.filteredGroups),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}"]})};var li=class n{constructor(t){this.http=t}baseUrl="/api/inventory/units";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(`${this.baseUrl}/active`)}getBaseUnits(){return this.http.get(`${this.baseUrl}/base`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nt=class n{constructor(t){this.http=t}baseUrl="/api/inventory/suppliers";getAll(){return this.http.get(this.baseUrl)}getActive(){return this.http.get(this.baseUrl).pipe(Ee(t=>t.filter(e=>e.status==="Active")))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function bR(n,t){n&1&&(o(0,"tr")(1,"td",27),_(2,"i",28),o(3,"p"),l(4,"Loading..."),s()()())}function CR(n,t){n&1&&(o(0,"tr")(1,"td",27),_(2,"i",9),o(3,"p"),l(4,'No items found. Click "Add Item" to create one.'),s()()())}function xR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td")(13,"span",29),l(14),s()(),o(15,"td"),l(16),s(),o(17,"td")(18,"span",29),l(19),s()(),o(20,"td")(21,"div",30)(22,"button",31),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(23,"i",32),s(),o(24,"button",33),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteItem(r.id))}),_(25,"i",34),s()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.code),c(2),g(e.name),c(2),g((e.group==null?null:e.group.name)||"-"),c(2),g((e.unitOfMeasure==null?null:e.unitOfMeasure.name)||"-"),c(2),g(i.formatCurrency(e.unitCost)),c(2),m("ngClass",e.taxable?"badge-success":"badge-secondary"),c(),T(" ",e.taxable?"Yes":"No"," "),c(2),g(e.currentStock),c(2),m("ngClass",i.getStockClass(e)),c(),g(i.getStockStatus(e))}}function SR(n,t){if(n&1&&(o(0,"div",60),l(1),s()),n&2){let e=f(2);c(),T(" ",e.errorMessage," ")}}function ER(n,t){if(n&1&&(o(0,"div",44)(1,"label"),l(2,"Item Code"),s(),_(3,"input",61),o(4,"small",55),l(5,"System generated - cannot be changed"),s()()),n&2){let e=f(2);c(3),m("value",e.selectedItem.code)}}function MR(n,t){if(n&1&&(o(0,"option",47),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function wR(n,t){if(n&1&&(o(0,"small",62),l(1),s()),n&2){let e=f(2);c(),g(e.nameValidationMessage)}}function IR(n,t){n&1&&(o(0,"small",55),l(1,"Must be unique within the selected group"),s())}function DR(n,t){if(n&1&&(o(0,"option",47),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.name," (",e.code,")")}}function PR(n,t){if(n&1&&(o(0,"option",47),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function TR(n,t){if(n&1){let e=O();o(0,"div",43)(1,"div",44)(2,"label"),l(3,"Status"),s(),o(4,"select",53),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedItem.status,r)||(a.selectedItem.status=r),y(r)}),o(5,"option",63),l(6,"Active"),s(),o(7,"option",64),l(8,"Inactive"),s()()(),o(9,"div",44)(10,"label"),l(11,"Reorder Level"),s(),o(12,"input",65),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedItem.reorderLevel,r)||(a.selectedItem.reorderLevel=r),y(r)}),s()()()}if(n&2){let e=f(2);c(4),S("ngModel",e.selectedItem.status),c(8),S("ngModel",e.selectedItem.reorderLevel)}}function OR(n,t){if(n&1){let e=O();o(0,"div",35),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",36),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",37)(3,"h2"),l(4),s(),o(5,"button",38),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",39),s()(),o(7,"div",40),x(8,SR,2,1,"div",41)(9,ER,6,1,"div",42),o(10,"div",43)(11,"div",44)(12,"label"),l(13,"Group "),o(14,"span",45),l(15,"*"),s()(),o(16,"select",46),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGroupId,r)||(a.selectedGroupId=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.validateItemName())}),o(17,"option",47),l(18,"Select a group..."),s(),x(19,MR,2,2,"option",48),s()(),o(20,"div",44)(21,"label"),l(22,"Item Name "),o(23,"span",45),l(24,"*"),s()(),o(25,"input",49),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedItem.name,r)||(a.selectedItem.name=r),y(r)}),b("blur",function(){v(e);let r=f();return y(r.validateItemName())}),s(),x(26,wR,2,1,"small",50)(27,IR,2,0,"small",51),s()(),o(28,"div",44)(29,"label"),l(30,"Item Description"),s(),o(31,"textarea",52),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedItem.description,r)||(a.selectedItem.description=r),y(r)}),s()(),o(32,"div",43)(33,"div",44)(34,"label"),l(35,"Units of Measure / Sold As "),o(36,"span",45),l(37,"*"),s()(),o(38,"select",53),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedUomId,r)||(a.selectedUomId=r),y(r)}),o(39,"option",47),l(40,"Select unit..."),s(),x(41,DR,2,3,"option",48),s()(),o(42,"div",44)(43,"label"),l(44,"Unit Cost"),s(),o(45,"input",54),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedItem.unitCost,r)||(a.selectedItem.unitCost=r),y(r)}),s()()(),o(46,"div",43)(47,"div",44)(48,"label"),l(49,"Supplier"),s(),o(50,"select",53),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplierId,r)||(a.selectedSupplierId=r),y(r)}),o(51,"option",47),l(52,"No supplier / Select later..."),s(),x(53,PR,2,2,"option",48),s()(),o(54,"div",44)(55,"label"),l(56,"Taxable"),s(),o(57,"select",53),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedItem.taxable,r)||(a.selectedItem.taxable=r),y(r)}),o(58,"option",47),l(59,"Yes"),s(),o(60,"option",47),l(61,"No"),s()(),o(62,"small",55),l(63,"Defaults to Yes for new items"),s()()(),x(64,TR,13,2,"div",56),s(),o(65,"div",57)(66,"button",58),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(67,"Cancel"),s(),o(68,"button",59),b("click",function(){v(e);let r=f();return y(r.saveItem())}),l(69),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Item":"Add Item"),c(4),m("ngIf",e.errorMessage),c(),m("ngIf",e.editMode),c(7),S("ngModel",e.selectedGroupId),c(),m("ngValue",null),c(2),m("ngForOf",e.groups),c(6),ne("is-invalid",e.nameValidationMessage),S("ngModel",e.selectedItem.name),c(),m("ngIf",e.nameValidationMessage),c(),m("ngIf",!e.nameValidationMessage),c(4),S("ngModel",e.selectedItem.description),c(7),S("ngModel",e.selectedUomId),c(),m("ngValue",null),c(2),m("ngForOf",e.units),c(4),S("ngModel",e.selectedItem.unitCost),c(5),S("ngModel",e.selectedSupplierId),c(),m("ngValue",null),c(2),m("ngForOf",e.suppliers),c(4),S("ngModel",e.selectedItem.taxable),c(),m("ngValue",!0),c(2),m("ngValue",!1),c(4),m("ngIf",e.editMode),c(4),m("disabled",!e.isFormValid()),c(),T(" ",e.editMode?"Update":"Save"," ")}}var Fu=class n{constructor(t,e,i,r,a){this.itemService=t;this.itemGroupService=e;this.unitOfMeasureService=i;this.supplierService=r;this.settingsService=a}items=[];groups=[];units=[];suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedItem=this.getEmptyItem();selectedGroupId=null;selectedUomId=null;selectedSupplierId=null;loading=!1;errorMessage="";nameValidationMessage="";ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{this.items=t,this.loading=!1},error:t=>{console.error("Error loading items",t),this.loading=!1}}),this.itemGroupService.getActive().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.unitOfMeasureService.getActive().subscribe({next:t=>this.units=t,error:t=>console.error("Error loading units",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t.filter(e=>e.status==="Active"),error:t=>console.error("Error loading suppliers",t)})}get filteredItems(){if(!this.searchQuery)return this.items;let t=this.searchQuery.toLowerCase();return this.items.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||(e.group?.name||"").toLowerCase().includes(t))}getEmptyItem(){return{code:"",name:"",description:"",taxable:!0,currentStock:0,status:"Active"}}openModal(t){this.errorMessage="",this.nameValidationMessage="",t?(this.editMode=!0,this.selectedItem=R({},t),this.selectedGroupId=t.group?.id||null,this.selectedUomId=t.unitOfMeasure?.id||null,this.selectedSupplierId=t.supplier?.id||null):(this.editMode=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.generateItemCode()),this.showModal=!0}generateItemCode(){this.settingsService.generatePrefixId("item").subscribe({next:t=>{this.selectedItem.code=t},error:t=>console.error("Error generating item code",t)})}closeModal(){this.showModal=!1,this.selectedItem=this.getEmptyItem(),this.selectedGroupId=null,this.selectedUomId=null,this.selectedSupplierId=null,this.errorMessage="",this.nameValidationMessage=""}validateItemName(){if(!this.selectedItem.name||!this.selectedGroupId){this.nameValidationMessage="";return}let t=this.editMode?this.selectedItem.id:void 0;this.itemService.validateName(this.selectedItem.name,this.selectedGroupId,t).subscribe({next:e=>{e.isUnique?this.nameValidationMessage="":this.nameValidationMessage="Item name already exists in this group"},error:()=>this.nameValidationMessage=""})}isFormValid(){return this.selectedItem.name.trim()!==""&&this.selectedGroupId!==null&&this.selectedUomId!==null&&this.nameValidationMessage===""}saveItem(){if(!this.isFormValid()){this.errorMessage="Please fill in all required fields";return}let t=me(R({},this.selectedItem),{group:this.groups.find(e=>e.id===this.selectedGroupId),unitOfMeasure:this.units.find(e=>e.id===this.selectedUomId),supplier:this.selectedSupplierId?this.suppliers.find(e=>e.id===this.selectedSupplierId):void 0});this.editMode&&this.selectedItem.id?this.itemService.update(this.selectedItem.id,t).subscribe({next:()=>{this.loadData(),this.closeModal()},error:e=>{this.errorMessage=e.error?.error||"Error updating item"}}):this.itemService.create(t).subscribe({next:()=>{this.loadData(),this.closeModal()},error:e=>{this.errorMessage=e.error?.error||"Error creating item"}})}deleteItem(t){confirm("Are you sure you want to delete this item?")&&this.itemService.delete(t).subscribe({next:()=>this.loadData(),error:e=>{alert(e.error?.error||"Error deleting item")}})}getStockClass(t){return t.currentStock<=0?"badge-danger":t.reorderLevel&&t.currentStock<=t.reorderLevel?"badge-warning":"badge-success"}getStockStatus(t){return t.currentStock<=0?"Out of Stock":t.reorderLevel&&t.currentStock<=t.reorderLevel?"Low Stock":"In Stock"}getInStockCount(){return this.items.filter(t=>!t.reorderLevel||t.currentStock>t.reorderLevel).length}getLowStockCount(){return this.items.filter(t=>t.reorderLevel&&t.currentStock<=t.reorderLevel&&t.currentStock>0).length}getOutOfStockCount(){return this.items.filter(t=>t.currentStock<=0).length}formatCurrency(t){return t==null?"-":"$"+t.toFixed(2)}static \u0275fac=function(e){return new(e||n)(I(Pe),I(en),I(li),I(Nt),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-item-master"]],standalone:!1,decls:84,vars:9,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-box"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-exclamation-triangle"],[1,"icon","danger"],[1,"fas","fa-times-circle"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search items...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal","modal-large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"grid-2"],[1,"form-group"],[1,"required"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter item name",1,"form-control",3,"ngModelChange","blur","ngModel"],["class","form-hint error",4,"ngIf"],["class","form-hint",4,"ngIf"],["placeholder","Optional description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","0.00","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-hint"],["class","grid-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],["type","text","readonly","",1,"form-control",3,"value"],[1,"form-hint","error"],["value","Active"],["value","Inactive"],["type","number","placeholder","Optional","min","0",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Item Master"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Items"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," Add Item "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),s(),o(23,"div",10)(24,"h3"),l(25),s(),o(26,"p"),l(27,"Total Items"),s()()(),o(28,"div",7)(29,"div",11),_(30,"i",12),s(),o(31,"div",10)(32,"h3"),l(33),s(),o(34,"p"),l(35,"In Stock"),s()()(),o(36,"div",7)(37,"div",13),_(38,"i",14),s(),o(39,"div",10)(40,"h3"),l(41),s(),o(42,"p"),l(43,"Low Stock"),s()()(),o(44,"div",7)(45,"div",15),_(46,"i",16),s(),o(47,"div",10)(48,"h3"),l(49),s(),o(50,"p"),l(51,"Out of Stock"),s()()()(),o(52,"div",17)(53,"div",18)(54,"div",19),_(55,"i",20),o(56,"input",21),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(57,"div",22)(58,"table",23)(59,"thead")(60,"tr")(61,"th"),l(62,"Item Code"),s(),o(63,"th"),l(64,"Item Name"),s(),o(65,"th"),l(66,"Group"),s(),o(67,"th"),l(68,"UOM"),s(),o(69,"th"),l(70,"Unit Cost"),s(),o(71,"th"),l(72,"Taxable"),s(),o(73,"th"),l(74,"Stock"),s(),o(75,"th"),l(76,"Status"),s(),o(77,"th"),l(78,"Actions"),s()()(),o(79,"tbody"),x(80,bR,5,0,"tr",24)(81,CR,5,0,"tr",24)(82,xR,26,10,"tr",25),s()()()()(),x(83,OR,70,25,"div",26)),e&2&&(c(25),g(i.items.length),c(8),g(i.getInStockCount()),c(8),g(i.getLowStockCount()),c(8),g(i.getOutOfStockCount()),c(7),S("ngModel",i.searchQuery),c(24),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredItems.length===0),c(),m("ngForOf",i.filteredItems),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q],styles:[".inventory-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}"]})};function kR(n,t){n&1&&(o(0,"tr")(1,"td",12),_(2,"i",13),o(3,"p"),l(4,"Loading..."),s()()())}function RR(n,t){n&1&&(o(0,"tr")(1,"td",12),_(2,"i",14),o(3,"p"),l(4,'No units found. Click "Add Unit" to create one.'),s()()())}function NR(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td")(9,"span",15),l(10),s()(),o(11,"td"),l(12),s(),o(13,"td"),l(14),s(),o(15,"td")(16,"span",15),l(17),s()(),o(18,"td")(19,"div",16)(20,"button",17),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(21,"i",18),s(),o(22,"button",19),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteUnit(r.id))}),_(23,"i",20),s()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.code),c(2),g(e.name),c(2),g(e.symbol||"-"),c(2),m("ngClass",e.baseUom?"badge-info":"badge-primary"),c(),T(" ",i.getUnitType(e)," "),c(2),g(e.conversionFactor||1),c(2),g((e.baseUom==null?null:e.baseUom.name)||"-"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),T(" ",e.status," ")}}function AR(n,t){if(n&1&&(o(0,"div",44),l(1),s()),n&2){let e=f(2);c(),T(" ",e.errorMessage," ")}}function FR(n,t){n&1&&(o(0,"small",37),l(1,"Unique identifier for this unit"),s())}function LR(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit,i=f(2);m("ngValue",e.id)("disabled",i.editMode&&e.id===i.selectedUnit.id),c(),de(" ",e.name," (",e.code,") ")}}function VR(n,t){if(n&1){let e=O();o(0,"div",28)(1,"label"),l(2,"Conversion Factor"),s(),o(3,"input",46),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedUnit.conversionFactor,r)||(a.selectedUnit.conversionFactor=r),y(r)}),s(),o(4,"small",37),l(5,"How many of this unit equals 1 base unit"),s()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedUnit.conversionFactor)}}function jR(n,t){if(n&1){let e=O();o(0,"div",21),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",22),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",23)(3,"h2"),l(4),s(),o(5,"button",24),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",25),s()(),o(7,"div",26),x(8,AR,2,1,"div",27),o(9,"div",28)(10,"label"),l(11,"UOM Code "),o(12,"span",29),l(13,"*"),s()(),o(14,"input",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedUnit.code,r)||(a.selectedUnit.code=r),y(r)}),s(),x(15,FR,2,0,"small",31),s(),o(16,"div",28)(17,"label"),l(18,"Name "),o(19,"span",29),l(20,"*"),s()(),o(21,"input",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedUnit.name,r)||(a.selectedUnit.name=r),y(r)}),s()(),o(22,"div",28)(23,"label"),l(24,"Symbol"),s(),o(25,"input",33),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedUnit.symbol,r)||(a.selectedUnit.symbol=r),y(r)}),s()(),o(26,"div",28)(27,"label"),l(28,"Base UOM"),s(),o(29,"select",34),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBaseUomId,r)||(a.selectedBaseUomId=r),y(r)}),o(30,"option",35),l(31,"None (this is a base unit)"),s(),x(32,LR,2,4,"option",36),s(),o(33,"small",37),l(34,"Select if this is an alternate unit that converts to a base unit"),s()(),x(35,VR,6,1,"div",38),o(36,"div",28)(37,"label"),l(38,"Status"),s(),o(39,"select",34),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedUnit.status,r)||(a.selectedUnit.status=r),y(r)}),o(40,"option",39),l(41,"Active"),s(),o(42,"option",40),l(43,"Inactive"),s()()()(),o(44,"div",41)(45,"button",42),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(46,"Cancel"),s(),o(47,"button",43),b("click",function(){v(e);let r=f();return y(r.saveUnit())}),l(48),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Unit":"Add Unit"),c(4),m("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedUnit.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),S("ngModel",e.selectedUnit.name),c(4),S("ngModel",e.selectedUnit.symbol),c(4),S("ngModel",e.selectedBaseUomId),c(),m("ngValue",null),c(2),m("ngForOf",e.baseUnits),c(3),m("ngIf",e.selectedBaseUomId),c(4),S("ngModel",e.selectedUnit.status),c(8),m("disabled",!e.isFormValid()),c(),T(" ",e.editMode?"Update":"Save"," ")}}var Lu=class n{constructor(t,e){this.unitService=t;this.settingsService=e}units=[];baseUnits=[];showModal=!1;editMode=!1;selectedUnit=this.getEmptyUnit();selectedBaseUomId=null;loading=!1;errorMessage="";ngOnInit(){this.loadUnits()}loadUnits(){this.loading=!0,this.unitService.getAll().subscribe({next:t=>{this.units=t,this.loading=!1},error:t=>{console.error("Error loading units",t),this.loading=!1}}),this.unitService.getBaseUnits().subscribe({next:t=>this.baseUnits=t,error:t=>console.error("Error loading base units",t)})}getEmptyUnit(){return{code:"",name:"",symbol:"",conversionFactor:1,status:"Active"}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedUnit=R({},t),this.selectedBaseUomId=t.baseUom?.id||null):(this.editMode=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.generateUnitCode()),this.showModal=!0}generateUnitCode(){this.settingsService.generatePrefixId("unit").subscribe({next:t=>{this.selectedUnit.code=t},error:t=>console.error("Error generating unit code",t)})}closeModal(){this.showModal=!1,this.selectedUnit=this.getEmptyUnit(),this.selectedBaseUomId=null,this.errorMessage=""}isFormValid(){return this.selectedUnit.code.trim()!==""&&this.selectedUnit.name.trim()!==""}isBaseUnit(){return this.selectedBaseUomId===null}saveUnit(){if(!this.isFormValid()){this.errorMessage="UOM Code and Name are required";return}let t=me(R({},this.selectedUnit),{baseUom:this.selectedBaseUomId?this.baseUnits.find(e=>e.id===this.selectedBaseUomId):void 0});this.editMode&&this.selectedUnit.id?this.unitService.update(this.selectedUnit.id,t).subscribe({next:()=>{this.loadUnits(),this.closeModal()},error:e=>{this.errorMessage=e.error?.error||"Error updating unit"}}):this.unitService.create(t).subscribe({next:()=>{this.loadUnits(),this.closeModal()},error:e=>{this.errorMessage=e.error?.error||"Error creating unit"}})}deleteUnit(t){confirm("Are you sure you want to delete this unit?")&&this.unitService.delete(t).subscribe({next:()=>this.loadUnits(),error:e=>{alert(e.error?.error||"Error deleting unit")}})}getUnitType(t){return t.baseUom?"Alternate":"Base"}static \u0275fac=function(e){return new(e||n)(I(li),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-units-of-measure"]],standalone:!1,decls:45,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","8",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-ruler"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., PCS, KG, LTR",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Pieces, Kilograms, Liters",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., pcs, kg, L (optional)",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-hint"],["class","form-group",4,"ngIf"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[3,"ngValue","disabled"],["type","number","placeholder","1","min","0.000001","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Units of Measure"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Units"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," Add Unit "),s()(),o(19,"div",6)(20,"div",7)(21,"table",8)(22,"thead")(23,"tr")(24,"th"),l(25,"UOM Code"),s(),o(26,"th"),l(27,"Name"),s(),o(28,"th"),l(29,"Symbol"),s(),o(30,"th"),l(31,"Type"),s(),o(32,"th"),l(33,"Conversion Factor"),s(),o(34,"th"),l(35,"Base UOM"),s(),o(36,"th"),l(37,"Status"),s(),o(38,"th"),l(39,"Actions"),s()()(),o(40,"tbody"),x(41,kR,5,0,"tr",9)(42,RR,5,0,"tr",9)(43,NR,24,9,"tr",10),s()()()()(),x(44,jR,49,14,"div",11)),e&2&&(c(41),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.units.length===0),c(),m("ngForOf",i.units),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q],styles:[".inventory-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var Ge=class n{constructor(t){this.http=t}warehouseUrl="/api/inventory/warehouses";binUrl="/api/inventory/bins";getAll(){return this.http.get(this.warehouseUrl)}getAllWarehouses(){return this.http.get(this.warehouseUrl)}getActiveWarehouses(){return this.http.get(`${this.warehouseUrl}/active`)}getWarehouseById(t){return this.http.get(`${this.warehouseUrl}/${t}`)}createWarehouse(t){return this.http.post(this.warehouseUrl,t)}updateWarehouse(t,e){return this.http.put(`${this.warehouseUrl}/${t}`,e)}deleteWarehouse(t){return this.http.delete(`${this.warehouseUrl}/${t}`)}getAllBins(){return this.http.get(this.binUrl)}getBinsByWarehouse(t){return this.http.get(`${this.binUrl}/warehouse/${t}`)}getBinById(t){return this.http.get(`${this.binUrl}/${t}`)}createBin(t){return this.http.post(this.binUrl,t)}updateBin(t,e){return this.http.put(`${this.binUrl}/${t}`,e)}deleteBin(t){return this.http.delete(`${this.binUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function BR(n,t){n&1&&(o(0,"div",11),_(1,"i",12),o(2,"p"),l(3,"Loading warehouses..."),s()())}function WR(n,t){n&1&&(o(0,"div",11),_(1,"i",13),o(2,"p"),l(3,'No warehouses found. Click "Add Warehouse" to create one.'),s()())}function UR(n,t){n&1&&(o(0,"div",31)(1,"p"),l(2,"No bins in this warehouse. Bins are optional for organizing items within a warehouse."),s()())}function GR(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(2).$implicit;c(),T("Zone: ",e.zone)}}function HR(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(2).$implicit;c(),T(" | Aisle: ",e.aisle)}}function qR(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(2).$implicit;c(),T(" | Rack: ",e.rack)}}function zR(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(2).$implicit;c(),T(" | Shelf: ",e.shelf)}}function $R(n,t){if(n&1&&(o(0,"div",41)(1,"small"),x(2,GR,2,1,"span",42)(3,HR,2,1,"span",42)(4,qR,2,1,"span",42)(5,zR,2,1,"span",42),s()()),n&2){let e=f().$implicit;c(2),m("ngIf",e.zone),c(),m("ngIf",e.aisle),c(),m("ngIf",e.rack),c(),m("ngIf",e.shelf)}}function QR(n,t){if(n&1){let e=O();o(0,"div",32)(1,"div",33)(2,"strong"),l(3),s(),o(4,"div",34)(5,"button",35),b("click",function(){let r=v(e).$implicit,a=f(3);return y(a.editBin(r))}),_(6,"i",26),s(),o(7,"button",36),b("click",function(){let r=v(e).$implicit,a=f(3);return y(a.deleteBin(r.id))}),_(8,"i",37),s()()(),o(9,"p",38),l(10),s(),x(11,$R,6,4,"div",39),o(12,"span",40),l(13),s()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(7),g(e.name),c(),m("ngIf",e.zone||e.aisle||e.rack||e.shelf),c(),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),T(" ",e.status," ")}}function KR(n,t){if(n&1){let e=O();o(0,"div",23)(1,"div",24)(2,"h4"),l(3),s(),o(4,"div",4)(5,"button",25),b("click",function(r){v(e);let a=f().$implicit;return f().openModal("warehouse",a),y(r.stopPropagation())}),_(6,"i",26),l(7," Edit Warehouse "),s(),o(8,"button",27),b("click",function(r){v(e);let a=f().$implicit;return f().openBinModal(a.id),y(r.stopPropagation())}),_(9,"i",6),l(10," Add Bin "),s()()(),o(11,"div",28),x(12,UR,3,0,"div",29)(13,QR,14,5,"div",30),s()()}if(n&2){let e=f().$implicit,i=f();c(3),T("Bins (",i.getBinsForWarehouse(e.id).length,")"),c(9),m("ngIf",i.getBinsForWarehouse(e.id).length===0),c(),m("ngForOf",i.getBinsForWarehouse(e.id))}}function YR(n,t){if(n&1){let e=O();o(0,"div",14)(1,"div",15),b("click",function(){let r=v(e).$implicit,a=f();return y(a.toggleWarehouse(r.id))}),o(2,"div",16)(3,"div",17),_(4,"i",13),s(),o(5,"div",18)(6,"h3"),l(7),s(),o(8,"p")(9,"strong"),l(10),s(),l(11),s()()(),o(12,"div",19)(13,"span",20),l(14),s(),_(15,"i",21),s()(),x(16,KR,14,3,"div",22),s()}if(n&2){let e=t.$implicit,i=f();c(7),g(e.name),c(3),g(e.code),c(),T(" - ",e.address||"No address"),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),T(" ",e.status," "),c(),ne("rotated",i.expandedWarehouse===e.id),c(),m("ngIf",i.expandedWarehouse===e.id)}}function ZR(n,t){if(n&1&&(o(0,"div",62),l(1),s()),n&2){let e=f(2);c(),T(" ",e.errorMessage," ")}}function JR(n,t){n&1&&(o(0,"small",63),l(1,"Unique identifier for this warehouse"),s())}function XR(n,t){if(n&1){let e=O();o(0,"div",43),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",44),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),s(),o(5,"button",46),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",47),s()(),o(7,"div",48),x(8,ZR,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Warehouse Code "),o(12,"span",51),l(13,"*"),s()(),o(14,"input",52),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedWarehouse.code,r)||(a.selectedWarehouse.code=r),y(r)}),s(),x(15,JR,2,0,"small",53),s(),o(16,"div",50)(17,"label"),l(18,"Warehouse Name "),o(19,"span",51),l(20,"*"),s()(),o(21,"input",54),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedWarehouse.name,r)||(a.selectedWarehouse.name=r),y(r)}),s()(),o(22,"div",50)(23,"label"),l(24,"Address"),s(),o(25,"textarea",55),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedWarehouse.address,r)||(a.selectedWarehouse.address=r),y(r)}),s()(),o(26,"div",50)(27,"label"),l(28,"Status"),s(),o(29,"select",56),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedWarehouse.status,r)||(a.selectedWarehouse.status=r),y(r)}),o(30,"option",57),l(31,"Active"),s(),o(32,"option",58),l(33,"Inactive"),s()()()(),o(34,"div",59)(35,"button",60),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(36,"Cancel"),s(),o(37,"button",61),b("click",function(){v(e);let r=f();return y(r.saveWarehouse())}),l(38),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Warehouse":"Add Warehouse"),c(4),m("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedWarehouse.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),S("ngModel",e.selectedWarehouse.name),c(4),S("ngModel",e.selectedWarehouse.address),c(4),S("ngModel",e.selectedWarehouse.status),c(8),m("disabled",!e.isWarehouseFormValid()),c(),T(" ",e.editMode?"Update":"Save"," ")}}function e3(n,t){if(n&1&&(o(0,"div",62),l(1),s()),n&2){let e=f(2);c(),T(" ",e.errorMessage," ")}}function t3(n,t){n&1&&(o(0,"small",63),l(1,"Unique within this warehouse"),s())}function n3(n,t){if(n&1){let e=O();o(0,"div",43),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",44),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",45)(3,"h2"),l(4),s(),o(5,"button",46),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",47),s()(),o(7,"div",48),x(8,e3,2,1,"div",49),o(9,"div",50)(10,"label"),l(11,"Bin Code "),o(12,"span",51),l(13,"*"),s()(),o(14,"input",64),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.code,r)||(a.selectedBin.code=r),y(r)}),s(),x(15,t3,2,0,"small",53),s(),o(16,"div",50)(17,"label"),l(18,"Bin Name "),o(19,"span",51),l(20,"*"),s()(),o(21,"input",65),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.name,r)||(a.selectedBin.name=r),y(r)}),s()(),o(22,"div",66)(23,"div",50)(24,"label"),l(25,"Zone"),s(),o(26,"input",67),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.zone,r)||(a.selectedBin.zone=r),y(r)}),s()(),o(27,"div",50)(28,"label"),l(29,"Aisle"),s(),o(30,"input",68),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.aisle,r)||(a.selectedBin.aisle=r),y(r)}),s()()(),o(31,"div",66)(32,"div",50)(33,"label"),l(34,"Rack"),s(),o(35,"input",69),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.rack,r)||(a.selectedBin.rack=r),y(r)}),s()(),o(36,"div",50)(37,"label"),l(38,"Shelf"),s(),o(39,"input",70),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.shelf,r)||(a.selectedBin.shelf=r),y(r)}),s()()(),o(40,"div",50)(41,"label"),l(42,"Status"),s(),o(43,"select",56),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedBin.status,r)||(a.selectedBin.status=r),y(r)}),o(44,"option",57),l(45,"Active"),s(),o(46,"option",58),l(47,"Inactive"),s()()()(),o(48,"div",59)(49,"button",60),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(50,"Cancel"),s(),o(51,"button",61),b("click",function(){v(e);let r=f();return y(r.saveBin())}),l(52),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Bin":"Add Bin"),c(4),m("ngIf",e.errorMessage),c(6),S("ngModel",e.selectedBin.code),m("readonly",e.editMode),c(),m("ngIf",!e.editMode),c(6),S("ngModel",e.selectedBin.name),c(5),S("ngModel",e.selectedBin.zone),c(4),S("ngModel",e.selectedBin.aisle),c(5),S("ngModel",e.selectedBin.rack),c(4),S("ngModel",e.selectedBin.shelf),c(4),S("ngModel",e.selectedBin.status),c(8),m("disabled",!e.isBinFormValid()),c(),T(" ",e.editMode?"Update":"Save"," ")}}var Vu=class n{constructor(t,e){this.warehouseService=t;this.settingsService=e}warehouses=[];warehouseBins={};expandedWarehouse=null;showModal=!1;modalType="";editMode=!1;selectedWarehouse=this.getEmptyWarehouse();selectedBin=this.getEmptyBin();loading=!1;errorMessage="";ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.loading=!0,this.warehouseService.getAllWarehouses().subscribe({next:t=>{this.warehouses=t,this.loading=!1},error:t=>{console.error("Error loading warehouses",t),this.loading=!1}})}loadBinsForWarehouse(t){this.warehouseService.getBinsByWarehouse(t).subscribe({next:e=>{this.warehouseBins[t]=e},error:e=>console.error("Error loading bins",e)})}getEmptyWarehouse(){return{code:"",name:"",address:"",status:"Active"}}getEmptyBin(){return{code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",status:"Active"}}toggleWarehouse(t){this.expandedWarehouse===t?this.expandedWarehouse=null:(this.expandedWarehouse=t,this.warehouseBins[t]||this.loadBinsForWarehouse(t))}openModal(t,e){this.modalType=t,this.errorMessage="",t==="warehouse"?e?(this.editMode=!0,this.selectedWarehouse=R({},e)):(this.editMode=!1,this.selectedWarehouse=this.getEmptyWarehouse(),this.generateWarehouseCode()):t==="bin"&&(e?(this.editMode=!0,this.selectedBin=R({},e)):(this.editMode=!1,this.selectedBin=this.getEmptyBin(),this.generateBinCode())),this.showModal=!0}generateWarehouseCode(){this.settingsService.generatePrefixId("warehouse").subscribe({next:t=>{this.selectedWarehouse.code=t},error:t=>console.error("Error generating warehouse code",t)})}generateBinCode(){this.settingsService.generatePrefixId("bin").subscribe({next:t=>{this.selectedBin.code=t},error:t=>console.error("Error generating bin code",t)})}closeModal(){this.showModal=!1,this.errorMessage=""}isWarehouseFormValid(){return this.selectedWarehouse.code.trim()!==""&&this.selectedWarehouse.name.trim()!==""}isBinFormValid(){return this.selectedBin.code.trim()!==""&&this.selectedBin.name.trim()!==""}saveWarehouse(){if(!this.isWarehouseFormValid()){this.errorMessage="Warehouse Code and Name are required";return}this.editMode&&this.selectedWarehouse.id?this.warehouseService.updateWarehouse(this.selectedWarehouse.id,this.selectedWarehouse).subscribe({next:()=>{this.loadWarehouses(),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error updating warehouse"}}):this.warehouseService.createWarehouse(this.selectedWarehouse).subscribe({next:()=>{this.loadWarehouses(),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error creating warehouse"}})}saveBin(){if(!this.isBinFormValid()){this.errorMessage="Bin Code and Name are required";return}this.editMode&&this.selectedBin.id?this.warehouseService.updateBin(this.selectedBin.id,this.selectedBin).subscribe({next:()=>{this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error updating bin"}}):(this.selectedBin.warehouseId=this.expandedWarehouse||void 0,this.warehouseService.createBin(this.selectedBin).subscribe({next:()=>{this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse),this.closeModal()},error:t=>{this.errorMessage=t.error?.error||"Error creating bin"}}))}deleteWarehouse(t){confirm("Are you sure you want to delete this warehouse? All bins inside will also be deleted.")&&this.warehouseService.deleteWarehouse(t).subscribe({next:()=>this.loadWarehouses(),error:e=>{alert(e.error?.error||"Error deleting warehouse")}})}deleteBin(t){confirm("Are you sure you want to delete this bin?")&&this.warehouseService.deleteBin(t).subscribe({next:()=>{this.expandedWarehouse&&this.loadBinsForWarehouse(this.expandedWarehouse)},error:e=>{alert(e.error?.error||"Error deleting bin")}})}getBinsForWarehouse(t){return this.warehouseBins[t]||[]}openBinModal(t){this.selectedBin=this.getEmptyBin(),this.selectedBin.warehouseId=t,this.modalType="bin",this.editMode=!1,this.errorMessage="",this.generateBinCode(),this.showModal=!0}editBin(t){this.modalType="bin",this.editMode=!0,this.selectedBin=R({},t),this.errorMessage="",this.showModal=!0}static \u0275fac=function(e){return new(e||n)(I(Ge),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-warehouse-bin"]],standalone:!1,decls:26,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"warehouse-list"],["class","empty-state",4,"ngIf"],["class","warehouse-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-warehouse"],[1,"warehouse-card"],[1,"warehouse-header",3,"click"],[1,"warehouse-info"],[1,"warehouse-icon"],[1,"warehouse-details"],[1,"warehouse-stats"],[1,"badge",3,"ngClass"],[1,"fas","fa-chevron-down","expand-icon"],["class","bins-section",4,"ngIf"],[1,"bins-section"],[1,"bins-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bins-grid"],["class","empty-bins",4,"ngIf"],["class","bin-card",4,"ngFor","ngForOf"],[1,"empty-bins"],[1,"bin-card"],[1,"bin-header"],[1,"bin-actions"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"bin-name"],["class","bin-location",4,"ngIf"],[1,"badge","badge-sm",3,"ngClass"],[1,"bin-location"],[4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","placeholder","e.g., WH-001",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","form-hint",4,"ngIf"],["type","text","placeholder","e.g., Main Warehouse",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address (optional)","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-danger"],[1,"form-hint"],["type","text","placeholder","e.g., BIN-A1",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","text","placeholder","e.g., Storage Bin A1",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., A, B, C (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., 1, 2, 3 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., R1, R2 (optional)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., S1, S2 (optional)",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Warehouse & Bin Management"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Warehouse"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.openModal("warehouse")}),_(18,"i",6),l(19," Add Warehouse "),s()()(),o(20,"div",7),x(21,BR,4,0,"div",8)(22,WR,4,0,"div",8)(23,YR,17,8,"div",9),s()(),x(24,XR,39,10,"div",10)(25,n3,53,13,"div",10)),e&2&&(c(21),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.warehouses.length===0),c(),m("ngForOf",i.warehouses),c(),m("ngIf",i.showModal&&i.modalType==="warehouse"),c(),m("ngIf",i.showModal&&i.modalType==="bin"))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.warehouse-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.warehouse-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 10px #00000014;overflow:hidden}.warehouse-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;cursor:pointer;transition:background .3s ease}.warehouse-header[_ngcontent-%COMP%]:hover{background:#f8f9fa}.warehouse-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.warehouse-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;background:#00796b1a;display:flex;align-items:center;justify-content:center;color:#00796b;font-size:1.5rem}.warehouse-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:4px}.warehouse-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.warehouse-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.usage-info[_ngcontent-%COMP%]{text-align:right}.usage-info[_ngcontent-%COMP%]   .usage-text[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;display:block;margin-bottom:8px}.usage-bar[_ngcontent-%COMP%]{width:150px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden}.usage-bar.small[_ngcontent-%COMP%]{width:100%;height:6px}.usage-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.usage-fill.normal[_ngcontent-%COMP%]{background:#28a745}.usage-fill.warning[_ngcontent-%COMP%]{background:#ffc107}.usage-fill.critical[_ngcontent-%COMP%]{background:#dc3545}.expand-icon[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;transition:transform .3s ease}.expand-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.bins-section[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding:20px;background:#f8f9fa}.bins-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.bins-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.bins-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px}.bin-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 1px 4px #0000000d}.bin-card[_ngcontent-%COMP%]   .bin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.bin-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:12px}.bin-card[_ngcontent-%COMP%]   .bin-usage[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;display:block;margin-bottom:6px}"]})};function i3(n,t){n&1&&(o(0,"tr")(1,"td",16),_(2,"i",17),o(3,"p"),l(4,"Loading..."),s()()())}function r3(n,t){n&1&&(o(0,"tr")(1,"td",16),_(2,"i",18),o(3,"p"),l(4,'No suppliers found. Click "Add Supplier" to create one.'),s()()())}function o3(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td")(5,"div",19)(6,"div",20),l(7),s(),o(8,"span"),l(9),s()()(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td"),l(15),s(),o(16,"td")(17,"span",21),l(18),s()(),o(19,"td")(20,"div",22)(21,"button",23),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(22,"i",24),s(),o(23,"button",25),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteSupplier(r.id))}),_(24,"i",26),s()()()()}if(n&2){let e=t.$implicit;c(3),g(e.code),c(4),g(e.name.charAt(0)),c(2),g(e.name),c(2),g(e.contactPerson),c(2),g(e.email),c(2),g(e.phone),c(2),m("ngClass",e.status==="Active"?"badge-success":"badge-danger"),c(),T(" ",e.status," ")}}function a3(n,t){if(n&1){let e=O();o(0,"div",27),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",28),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",29)(3,"h2"),l(4),s(),o(5,"button",30),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",31),s()(),o(7,"div",32)(8,"div",33)(9,"div",34)(10,"label"),l(11,"Supplier Code"),s(),o(12,"input",35),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.code,r)||(a.selectedSupplier.code=r),y(r)}),s()(),o(13,"div",34)(14,"label"),l(15,"Supplier Name"),s(),o(16,"input",36),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.name,r)||(a.selectedSupplier.name=r),y(r)}),s()()(),o(17,"div",34)(18,"label"),l(19,"Contact Person"),s(),o(20,"input",37),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.contactPerson,r)||(a.selectedSupplier.contactPerson=r),y(r)}),s()(),o(21,"div",33)(22,"div",34)(23,"label"),l(24,"Email"),s(),o(25,"input",38),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.email,r)||(a.selectedSupplier.email=r),y(r)}),s()(),o(26,"div",34)(27,"label"),l(28,"Phone"),s(),o(29,"input",39),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.phone,r)||(a.selectedSupplier.phone=r),y(r)}),s()()(),o(30,"div",34)(31,"label"),l(32,"Address"),s(),o(33,"textarea",40),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.address,r)||(a.selectedSupplier.address=r),y(r)}),s()(),o(34,"div",33)(35,"div",34)(36,"label"),l(37,"Payment Terms"),s(),o(38,"input",41),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.paymentTerms,r)||(a.selectedSupplier.paymentTerms=r),y(r)}),s()(),o(39,"div",34)(40,"label"),l(41,"Status"),s(),o(42,"select",42),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplier.status,r)||(a.selectedSupplier.status=r),y(r)}),o(43,"option",43),l(44,"Active"),s(),o(45,"option",44),l(46,"Inactive"),s()()()()(),o(47,"div",45)(48,"button",46),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(49,"Cancel"),s(),o(50,"button",4),b("click",function(){v(e);let r=f();return y(r.saveSupplier())}),l(51),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Supplier":"Add Supplier"),c(8),S("ngModel",e.selectedSupplier.code),c(4),S("ngModel",e.selectedSupplier.name),c(4),S("ngModel",e.selectedSupplier.contactPerson),c(5),S("ngModel",e.selectedSupplier.email),c(4),S("ngModel",e.selectedSupplier.phone),c(4),S("ngModel",e.selectedSupplier.address),c(5),S("ngModel",e.selectedSupplier.paymentTerms),c(4),S("ngModel",e.selectedSupplier.status),c(9),g(e.editMode?"Update":"Save")}}var ju=class n{constructor(t,e){this.supplierService=t;this.settingsService=e}suppliers=[];searchQuery="";showModal=!1;editMode=!1;selectedSupplier=this.getEmptySupplier();loading=!1;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.loading=!0,this.supplierService.getAll().subscribe({next:t=>{this.suppliers=t,this.loading=!1},error:t=>{console.error("Error loading suppliers",t),this.loading=!1}})}get filteredSuppliers(){return this.searchQuery?this.suppliers.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.code.toLowerCase().includes(this.searchQuery.toLowerCase())):this.suppliers}getEmptySupplier(){return{code:"",name:"",contactPerson:"",email:"",phone:"",address:"",paymentTerms:"",status:"Active"}}openModal(t){t?(this.editMode=!0,this.selectedSupplier=R({},t)):(this.editMode=!1,this.selectedSupplier=this.getEmptySupplier(),this.generateSupplierCode()),this.showModal=!0}generateSupplierCode(){this.settingsService.generatePrefixId("supplier").subscribe({next:t=>{this.selectedSupplier.code=t},error:t=>console.error("Error generating supplier code",t)})}closeModal(){this.showModal=!1,this.selectedSupplier=this.getEmptySupplier()}saveSupplier(){this.editMode&&this.selectedSupplier.id?this.supplierService.update(this.selectedSupplier.id,this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error updating supplier",t)}):this.supplierService.create(this.selectedSupplier).subscribe({next:()=>{this.loadSuppliers(),this.closeModal()},error:t=>console.error("Error creating supplier",t)})}deleteSupplier(t){confirm("Are you sure you want to delete this supplier?")&&this.supplierService.delete(t).subscribe({next:()=>this.loadSuppliers(),error:e=>console.error("Error deleting supplier",e)})}getStatusClass(t){return t==="Active"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(Nt),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-supplier"]],standalone:!1,decls:47,vars:5,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search suppliers...",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-truck"],[1,"supplier-info"],[1,"avatar"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"grid-2"],[1,"form-group"],["type","text","placeholder","SUP-001",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Company name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Contact name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","+1 234 567 890",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Full address",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Net 30",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Supplier Management"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Suppliers"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," Add Supplier "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),o(23,"input",10),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()(),o(24,"div",11)(25,"table",12)(26,"thead")(27,"tr")(28,"th"),l(29,"Code"),s(),o(30,"th"),l(31,"Supplier"),s(),o(32,"th"),l(33,"Contact Person"),s(),o(34,"th"),l(35,"Email"),s(),o(36,"th"),l(37,"Phone"),s(),o(38,"th"),l(39,"Status"),s(),o(40,"th"),l(41,"Actions"),s()()(),o(42,"tbody"),x(43,i3,5,0,"tr",13)(44,r3,5,0,"tr",13)(45,o3,25,8,"tr",14),s()()()()(),x(46,a3,52,10,"div",15)),e&2&&(c(23),S("ngModel",i.searchQuery),c(20),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.filteredSuppliers.length===0),c(),m("ngForOf",i.filteredSuppliers),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.supplier-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.supplier-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00796b,#004d40);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}.contact-info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e0e0e0;font-size:.8rem}.rating[_ngcontent-%COMP%]   i.filled[_ngcontent-%COMP%]{color:#ffc107}.rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-size:.875rem;color:#6c757d}"]})};function s3(n,t){n&1&&_(0,"span",26)}function l3(n,t){if(n&1){let e=O();o(0,"div",22),b("click",function(){let r=v(e).$implicit,a=f();return y(a.setValuationMethod(r.id))}),o(1,"div",23),x(2,s3,1,0,"span",24),s(),o(3,"div",25)(4,"h4"),l(5),s(),o(6,"p"),l(7),s()()()}if(n&2){let e=t.$implicit;ne("active",e.active),c(2),m("ngIf",e.active),c(3),g(e.name),c(2),g(e.description)}}function c3(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"strong"),l(9),s()(),o(10,"td")(11,"span",27),l(12),s()()()),n&2){let e=t.$implicit;c(2),g(e.item),c(2),g(e.quantity),c(2),T("$",e.avgCost),c(3),T("$",e.totalValue.toLocaleString()),c(3),g(e.method)}}var Bu=class n{valuationMethods=[{id:1,name:"FIFO",description:"First In First Out",active:!0},{id:2,name:"LIFO",description:"Last In First Out",active:!1},{id:3,name:"Weighted Average",description:"Average cost method",active:!1},{id:4,name:"Standard Cost",description:"Predetermined standard cost",active:!1}];valuationData=[{item:"Laptop Dell XPS",quantity:25,avgCost:800,totalValue:2e4,method:"FIFO"},{item:"Office Chair",quantity:40,avgCost:150,totalValue:6e3,method:"FIFO"},{item:"A4 Paper Ream",quantity:500,avgCost:5,totalValue:2500,method:"Weighted Avg"},{item:"Steel Sheet",quantity:1e3,avgCost:2,totalValue:2e3,method:"FIFO"},{item:"Cardboard Box",quantity:2e3,avgCost:.5,totalValue:1e3,method:"Weighted Avg"}];totalValue=31500;setValuationMethod(t){this.valuationMethods.forEach(e=>e.active=e.id===t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-inventory-valuation"]],standalone:!1,decls:78,vars:4,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"grid-2"],[1,"card"],[1,"card-title"],[1,"method-list"],["class","method-item",3,"active","click",4,"ngFor","ngForOf"],[1,"card","total-value-card"],[1,"total-value"],[1,"fas","fa-coins"],[1,"value-info"],[1,"value-breakdown"],[1,"breakdown-item"],[1,"card-header-row"],[1,"btn","btn-primary","btn-sm"],[1,"fas","fa-download"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"method-item",3,"click"],[1,"method-radio"],["class","radio-dot",4,"ngIf"],[1,"method-info"],[1,"radio-dot"],[1,"badge","badge-info"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Valuation Engine"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Valuation"),s()()()(),o(16,"div",4)(17,"div",5)(18,"h3",6),l(19,"Valuation Methods"),s(),o(20,"div",7),x(21,l3,8,5,"div",8),s()(),o(22,"div",9)(23,"div",10),_(24,"i",11),o(25,"div",12)(26,"span"),l(27,"Total Inventory Value"),s(),o(28,"h2"),l(29),s()()(),o(30,"div",13)(31,"div",14)(32,"span"),l(33,"Raw Materials"),s(),o(34,"strong"),l(35,"$3,000"),s()(),o(36,"div",14)(37,"span"),l(38,"Finished Goods"),s(),o(39,"strong"),l(40,"$26,000"),s()(),o(41,"div",14)(42,"span"),l(43,"Packaging"),s(),o(44,"strong"),l(45,"$2,500"),s()()()()(),o(46,"div",5)(47,"div",15)(48,"h3"),l(49,"Item Valuation Details"),s(),o(50,"button",16),_(51,"i",17),l(52," Export "),s()(),o(53,"div",18)(54,"table",19)(55,"thead")(56,"tr")(57,"th"),l(58,"Item"),s(),o(59,"th"),l(60,"Quantity"),s(),o(61,"th"),l(62,"Avg. Cost"),s(),o(63,"th"),l(64,"Total Value"),s(),o(65,"th"),l(66,"Method"),s()()(),o(67,"tbody"),x(68,c3,13,5,"tr",20),s(),o(69,"tfoot")(70,"tr")(71,"td",21)(72,"strong"),l(73,"Total"),s()(),o(74,"td")(75,"strong"),l(76),s()(),_(77,"td"),s()()()()()()),e&2&&(c(21),m("ngForOf",i.valuationMethods),c(8),T("$",i.totalValue.toLocaleString()),c(39),m("ngForOf",i.valuationData),c(8),T("$",i.totalValue.toLocaleString()))},dependencies:[V,j,Q],styles:[".card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px}.method-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.method-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .3s ease}.method-item[_ngcontent-%COMP%]:hover{border-color:#00796b}.method-item.active[_ngcontent-%COMP%]{border-color:#00796b;background:#00796b0d}.method-radio[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center}.method-item.active[_ngcontent-%COMP%]   .method-radio[_ngcontent-%COMP%]{border-color:#00796b}.method-radio[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:10px;height:10px;background:#00796b;border-radius:50%}.method-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;margin-bottom:4px}.method-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.total-value-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.total-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:24px;background:linear-gradient(135deg,#00796b,#004d40);border-radius:8px;color:#fff;margin-bottom:20px}.total-value[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.total-value[_ngcontent-%COMP%]   .value-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-top:4px}.value-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.breakdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #e0e0e0}.breakdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.breakdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}.breakdown-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;background:#f8f9fa}"]})};var ci=class n{constructor(t){this.http=t}baseUrl="/api/inventory/ledger";getAll(t){let e=new kt;return t&&(t.itemId&&(e=e.set("itemId",t.itemId.toString())),t.warehouseId&&(e=e.set("warehouseId",t.warehouseId.toString())),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(this.baseUrl,{params:e})}getByItem(t){return this.http.get(`${this.baseUrl}/item/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function d3(n,t){if(n&1&&(o(0,"option",10),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function u3(n,t){if(n&1&&(o(0,"option",10),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function p3(n,t){n&1&&(o(0,"div",24),_(1,"div",25),o(2,"span"),l(3,"Loading ledger entries..."),s()())}function m3(n,t){n&1&&(o(0,"tr")(1,"td",26),l(2,"No ledger entries found"),s()())}function f3(n,t){if(n&1){let e=O();o(0,"tr",27),b("click",function(){let r=v(e).$implicit,a=f();return y(a.drillDown(r))}),o(1,"td"),l(2),s(),o(3,"td")(4,"a",28),l(5),s()(),o(6,"td")(7,"div",29)(8,"span",30),l(9),s(),o(10,"span",31),l(11),s()()(),o(12,"td")(13,"span",32),l(14),s()(),o(15,"td",33),l(16),s(),o(17,"td",34),l(18),s(),o(19,"td",20)(20,"strong"),l(21),s()(),o(22,"td",20),l(23),s(),o(24,"td",20),l(25),s(),o(26,"td"),l(27),s(),o(28,"td"),l(29),s()()}if(n&2){let e=t.$implicit,i=f();c(2),g(i.formatDate(e.transactionDate)),c(3),g(e.referenceNumber),c(4),g(e.item==null?null:e.item.code),c(2),g(e.item==null?null:e.item.name),c(2),m("ngClass",i.getTypeClass(e.transactionType)),c(),T(" ",i.getTypeLabel(e.transactionType)," "),c(2),T(" ",e.quantityIn>0?"+"+e.quantityIn:"-"," "),c(2),T(" ",e.quantityOut>0?"-"+e.quantityOut:"-"," "),c(3),g(e.balanceQuantity),c(2),g(i.formatCurrency(e.unitValue)),c(),ne("positive",e.totalValue>0)("negative",e.totalValue<0),c(),T(" ",i.formatCurrency(e.totalValue)," "),c(2),g((e.warehouse==null?null:e.warehouse.name)||"-"),c(2),g(e.remarks||"-")}}function g3(n,t){if(n&1&&(o(0,"div",35)(1,"span",36)(2,"strong"),l(3,"Total Entries:"),s(),l(4),s()()),n&2){let e=f();c(4),T(" ",e.ledgerEntries.length," ")}}var Uu=class n{constructor(t,e,i,r){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.router=r}ledgerEntries=[];items=[];warehouses=[];loading=!1;selectedItemId=null;selectedWarehouseId=null;dateFrom="";dateTo="";ngOnInit(){this.loadItems(),this.loadWarehouses(),this.loadLedger()}loadItems(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)})}loadWarehouses(){this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadLedger(){this.loading=!0;let t={};this.selectedItemId&&(t.itemId=this.selectedItemId),this.selectedWarehouseId&&(t.warehouseId=this.selectedWarehouseId),this.dateFrom&&(t.startDate=this.dateFrom),this.dateTo&&(t.endDate=this.dateTo),this.ledgerService.getAll(t).subscribe({next:e=>{this.ledgerEntries=e,this.loading=!1},error:e=>{console.error("Error loading ledger",e),this.loading=!1}})}applyFilter(){this.loadLedger()}clearFilters(){this.selectedItemId=null,this.selectedWarehouseId=null,this.dateFrom="",this.dateTo="",this.loadLedger()}getTypeClass(t){return{GOODS_RECEIPT:"badge-success",GOODS_ISSUE:"badge-danger",TRANSFER_IN:"badge-info",TRANSFER_OUT:"badge-warning",ADJUSTMENT:"badge-secondary"}[t]||"badge-info"}getTypeLabel(t){return{GOODS_RECEIPT:"Goods Receipt",GOODS_ISSUE:"Goods Issue",TRANSFER_IN:"Transfer In",TRANSFER_OUT:"Transfer Out",ADJUSTMENT:"Adjustment"}[t]||t}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}formatCurrency(t){return t==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}drillDown(t){let e=t.referenceNumber;if(!e)return;let i={search:e};e.startsWith("GRN")?this.router.navigate(["/app/stock/grn"],{queryParams:i}):e.startsWith("ISS")||e.startsWith("GI")?this.router.navigate(["/app/stock/issue"],{queryParams:i}):e.startsWith("TRF")||e.startsWith("ST")?this.router.navigate(["/app/stock/transfer"],{queryParams:i}):(e.startsWith("ADJ")||e.startsWith("SA"))&&this.router.navigate(["/app/stock/adjustment"],{queryParams:i})}exportLedger(){let t=this.generateCSV(),e=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`inventory-ledger-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(i)}generateCSV(){let t=["Date","Document No","Item","Transaction Type","In Qty","Out Qty","Balance Qty","Rate","Value","Warehouse","Remarks"],e=this.ledgerEntries.map(i=>[this.formatDate(i.transactionDate),i.referenceNumber,i.item?.name||"-",this.getTypeLabel(i.transactionType),i.quantityIn||0,i.quantityOut||0,i.balanceQuantity||0,i.unitValue||0,i.totalValue||0,i.warehouse?.name||"-",i.remarks||""]);return[t,...e].map(i=>i.join(",")).join(`
`)}static \u0275fac=function(e){return new(e||n)(I(ci),I(Pe),I(Ge),I(pe))};static \u0275cmp=F({type:n,selectors:[["app-inventory-ledger"]],standalone:!1,decls:82,vars:12,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-download"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"filter-buttons"],[1,"fas","fa-filter"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","ledger-row",3,"click",4,"ngFor","ngForOf"],["class","ledger-summary",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],["colspan","11",1,"text-center","text-muted"],[1,"ledger-row",3,"click"],[1,"doc-link"],[1,"item-info"],[1,"item-code"],[1,"item-name"],[1,"badge",3,"ngClass"],[1,"text-right","qty-in"],[1,"text-right","qty-out"],[1,"ledger-summary"],[1,"summary-item"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Ledger"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Inventory"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Ledger"),s()()(),o(16,"button",4),b("click",function(){return i.exportLedger()}),_(17,"i",5),l(18," Export CSV "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"label"),l(23,"Item"),s(),o(24,"select",9),E("ngModelChange",function(a){return M(i.selectedItemId,a)||(i.selectedItemId=a),a}),o(25,"option",10),l(26,"All Items"),s(),x(27,d3,2,3,"option",11),s()(),o(28,"div",8)(29,"label"),l(30,"Warehouse"),s(),o(31,"select",9),E("ngModelChange",function(a){return M(i.selectedWarehouseId,a)||(i.selectedWarehouseId=a),a}),o(32,"option",10),l(33,"All Warehouses"),s(),x(34,u3,2,3,"option",11),s()(),o(35,"div",8)(36,"label"),l(37,"From Date"),s(),o(38,"input",12),E("ngModelChange",function(a){return M(i.dateFrom,a)||(i.dateFrom=a),a}),s()(),o(39,"div",8)(40,"label"),l(41,"To Date"),s(),o(42,"input",12),E("ngModelChange",function(a){return M(i.dateTo,a)||(i.dateTo=a),a}),s()(),o(43,"div",13)(44,"button",4),b("click",function(){return i.applyFilter()}),_(45,"i",14),l(46," Apply "),s(),o(47,"button",15),b("click",function(){return i.clearFilters()}),_(48,"i",16),l(49," Clear "),s()()()(),o(50,"div",6)(51,"div",17),x(52,p3,4,0,"div",18),o(53,"table",19)(54,"thead")(55,"tr")(56,"th"),l(57,"Date"),s(),o(58,"th"),l(59,"Document No."),s(),o(60,"th"),l(61,"Item"),s(),o(62,"th"),l(63,"Transaction Type"),s(),o(64,"th",20),l(65,"In Qty"),s(),o(66,"th",20),l(67,"Out Qty"),s(),o(68,"th",20),l(69,"Balance Qty"),s(),o(70,"th",20),l(71,"Rate"),s(),o(72,"th",20),l(73,"Value"),s(),o(74,"th"),l(75,"Warehouse"),s(),o(76,"th"),l(77,"Reference"),s()()(),o(78,"tbody"),x(79,m3,3,0,"tr",21)(80,f3,30,17,"tr",22),s()()(),x(81,g3,5,1,"div",23),s()()),e&2&&(c(24),S("ngModel",i.selectedItemId),c(),m("ngValue",null),c(2),m("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouseId),c(),m("ngValue",null),c(2),m("ngForOf",i.warehouses),c(4),S("ngModel",i.dateFrom),c(4),S("ngModel",i.dateTo),c(10),m("ngIf",i.loading),c(27),m("ngIf",i.ledgerEntries.length===0&&!i.loading),c(),m("ngForOf",i.ledgerEntries),c(),m("ngIf",i.ledgerEntries.length>0))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filters-row[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;height:46px;align-items:center}.qty-in[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.qty-out[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.positive[_ngcontent-%COMP%]{color:#28a745}.negative[_ngcontent-%COMP%]{color:#dc3545}.card[_ngcontent-%COMP%]{margin-bottom:24px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e0e0e0;border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.ledger-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .15s ease}.ledger-row[_ngcontent-%COMP%]:hover{background-color:#0080800d}.doc-link[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;text-decoration:none}.doc-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.item-info[_ngcontent-%COMP%]   .item-code[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.text-muted[_ngcontent-%COMP%]{color:var(--text-secondary);padding:40px 0}.ledger-summary[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:16px 0 0;border-top:1px solid var(--border-color);margin-top:16px}.ledger-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.badge-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}"]})};var In=class n{constructor(t){this.http=t}baseUrl="/api/stock-movement";getAllGRN(){return this.http.get(`${this.baseUrl}/grn`)}getGRNById(t){return this.http.get(`${this.baseUrl}/grn/${t}`)}createGRN(t){return this.http.post(`${this.baseUrl}/grn`,t)}deleteGRN(t){return this.http.delete(`${this.baseUrl}/grn/${t}`)}getAllIssues(){return this.http.get(`${this.baseUrl}/issues`)}getIssueById(t){return this.http.get(`${this.baseUrl}/issues/${t}`)}createIssue(t){return this.http.post(`${this.baseUrl}/issues`,t)}deleteIssue(t){return this.http.delete(`${this.baseUrl}/issues/${t}`)}getAllTransfers(){return this.http.get(`${this.baseUrl}/transfers`)}getTransferById(t){return this.http.get(`${this.baseUrl}/transfers/${t}`)}createTransfer(t){return this.http.post(`${this.baseUrl}/transfers`,t)}deleteTransfer(t){return this.http.delete(`${this.baseUrl}/transfers/${t}`)}getAllAdjustments(){return this.http.get(`${this.baseUrl}/adjustments`)}getAdjustmentById(t){return this.http.get(`${this.baseUrl}/adjustments/${t}`)}createAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments`,t)}deleteAdjustment(t){return this.http.delete(`${this.baseUrl}/adjustments/${t}`)}approveAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/approve`,{})}rejectAdjustment(t){return this.http.post(`${this.baseUrl}/adjustments/${t}/reject`,{})}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var ft=class n{constructor(t){this.http=t}baseUrl="/api/purchase/fulfillment";fulfillmentsSubject=new Ke([]);fulfillments$=this.fulfillmentsSubject.asObservable();getAll(){return this.http.get(this.baseUrl)}getAllPOs(){return this.http.get(`${this.baseUrl}/pos`)}getPOById(t){return this.http.get(`${this.baseUrl}/pos/${t}`)}getByPrId(t){return this.http.get(`${this.baseUrl}/pr/${t}`)}getFulfillmentHistory(t){return this.http.get(`${this.baseUrl}/pr/${t}/history`)}createPOFulfillment(t){return this.http.post(`${this.baseUrl}/convert-to-po`,t)}createStockIssueFulfillment(t){return this.http.post(`${this.baseUrl}/stock-issue`,t)}createMaterialTransferFulfillment(t){return this.http.post(`${this.baseUrl}/material-transfer`,t)}generatePONumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),a=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PO-${i}${r}${a}`}generateIssueNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),a=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`SI-${i}${r}${a}`}generateTransferNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),a=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`MT-${i}${r}${a}`}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function h3(n,t){n&1&&(o(0,"div",22),l(1,"Loading..."),s())}function _3(n,t){n&1&&(o(0,"tr")(1,"td",26),l(2,'No GRNs found. Click "New GRN" to create one.'),s()())}function v3(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td")(7,"span",27),l(8),s()(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td"),l(14),s(),o(15,"td"),l(16),X(17,"number"),s(),o(18,"td")(19,"span",27),l(20),s()(),o(21,"td")(22,"div",28)(23,"button",29),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.openModal(r))}),_(24,"i",30),s(),o(25,"button",31),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.deleteGRN(r.id))}),_(26,"i",32),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.grnNumber),c(2),g(e.receiptDate),c(2),m("ngClass",e.receiptType==="PO"?"badge-info":"badge-secondary"),c(),T(" ",e.receiptType==="PO"?"Purchase Order":"Direct"," "),c(2),g(e.supplier||"-"),c(2),g(e.warehouse||"-"),c(2),g(e.totalQty),c(2),T("$",ee(17,10,e.totalValue,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function y3(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"GRN No."),s(),o(5,"th"),l(6,"Date"),s(),o(7,"th"),l(8,"Type"),s(),o(9,"th"),l(10,"Supplier"),s(),o(11,"th"),l(12,"Warehouse"),s(),o(13,"th"),l(14,"Total Qty"),s(),o(15,"th"),l(16,"Total Value"),s(),o(17,"th"),l(18,"Status"),s(),o(19,"th"),l(20,"Actions"),s()()(),o(21,"tbody"),x(22,_3,3,0,"tr",24)(23,v3,27,13,"tr",25),s()()),n&2){let e=f();c(22),m("ngIf",e.grnList.length===0),c(),m("ngForOf",e.grnList)}}function b3(n,t){if(n&1&&(o(0,"div",59),l(1),s()),n&2){let e=f(2);c(),g(e.errorMessage)}}function C3(n,t){if(n&1&&(o(0,"option",48),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.referenceNumber," - ",e.supplierName||"No Supplier")}}function x3(n,t){n&1&&(o(0,"small",62),l(1,"No Purchase Orders available for receipt"),s())}function S3(n,t){if(n&1){let e=O();o(0,"div",40)(1,"label"),l(2,"Select Purchase Order *"),s(),o(3,"select",60),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedPOId,r)||(a.selectedPOId=r),y(r)}),b("change",function(){v(e);let r=f(2);return y(r.onPOSelect())}),o(4,"option",48),l(5,"-- Select PO --"),s(),x(6,C3,2,3,"option",49),s(),x(7,x3,2,0,"small",61),s()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedPOId),c(),m("ngValue",null),c(2),m("ngForOf",e.getPOsWithItems()),c(),m("ngIf",e.getPOsWithItems().length===0)}}function E3(n,t){if(n&1){let e=O();o(0,"div",40)(1,"label"),l(2,"PO Number"),s(),o(3,"input",41),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedGRN.poNumber,r)||(a.selectedGRN.poNumber=r),y(r)}),s()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedGRN.poNumber)}}function M3(n,t){if(n&1){let e=O();o(0,"div",40)(1,"label"),l(2,"Reference Number"),s(),o(3,"input",63),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.selectedGRN.referenceNumber,r)||(a.selectedGRN.referenceNumber=r),y(r)}),s()()}if(n&2){let e=f(2);c(3),S("ngModel",e.selectedGRN.referenceNumber),m("disabled",e.editMode)}}function w3(n,t){if(n&1&&(o(0,"option",48),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function I3(n,t){if(n&1&&(o(0,"option",48),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function D3(n,t){if(n&1){let e=O();o(0,"button",64),b("click",function(){v(e);let r=f(2);return y(r.addItem())}),_(1,"i",5),l(2," Add Item "),s()}}function P3(n,t){n&1&&(o(0,"th"),l(1,"Action"),s())}function T3(n,t){if(n&1&&(o(0,"option",48),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function O3(n,t){if(n&1){let e=O();o(0,"td")(1,"button",68),b("click",function(){v(e);let r=f().index,a=f(2);return y(a.removeItem(r))}),_(2,"i",32),s()()}if(n&2){let e=f(3);c(),m("disabled",e.selectedGRN.items.length===1)}}function k3(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"select",43),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemId,r)||(a.itemId=r),y(r)}),b("change",function(){let r=v(e).index,a=f(2);return y(a.onItemSelect(r))}),o(3,"option",48),l(4,"-- Select Item --"),s(),x(5,T3,2,3,"option",49),s()(),o(6,"td")(7,"input",65),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.quantity,r)||(a.quantity=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(8,"td")(9,"input",66),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.unitPrice,r)||(a.unitPrice=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(10,"td"),_(11,"input",67),X(12,"number"),s(),x(13,O3,3,1,"td",24),s()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),S("ngModel",e.quantity),m("disabled",i.editMode),c(2),S("ngModel",e.unitPrice),m("disabled",i.editMode),c(2),m("value",ee(12,10,e.amount,"1.2-2")),c(2),m("ngIf",!i.editMode)}}function R3(n,t){n&1&&_(0,"td")}function N3(n,t){n&1&&(o(0,"span"),l(1,"Saving..."),s())}function A3(n,t){n&1&&(o(0,"span"),l(1,"Save GRN"),s())}function F3(n,t){if(n&1){let e=O();o(0,"button",69),b("click",function(){v(e);let r=f(2);return y(r.saveGRN())}),x(1,N3,2,0,"span",24)(2,A3,2,0,"span",24),s()}if(n&2){let e=f(2);m("disabled",e.saving),c(),m("ngIf",e.saving),c(),m("ngIf",!e.saving)}}function L3(n,t){if(n&1){let e=O();o(0,"div",33),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",34),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",35)(3,"h2"),l(4),s(),o(5,"button",36),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(6,"\xD7"),s()(),o(7,"div",37),x(8,b3,2,1,"div",38),o(9,"div",39)(10,"div",40)(11,"label"),l(12,"GRN Number"),s(),o(13,"input",41),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.grnNumber,r)||(a.selectedGRN.grnNumber=r),y(r)}),s()(),o(14,"div",40)(15,"label"),l(16,"Receipt Date *"),s(),o(17,"input",42),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.receiptDate,r)||(a.selectedGRN.receiptDate=r),y(r)}),s()()(),o(18,"div",39)(19,"div",40)(20,"label"),l(21,"Receipt Type *"),s(),o(22,"select",43),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.receiptType,r)||(a.selectedGRN.receiptType=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.onReceiptTypeChange())}),o(23,"option",44),l(24,"Direct Receipt"),s(),o(25,"option",45),l(26,"From Purchase Order"),s()()(),x(27,S3,8,4,"div",46)(28,E3,4,1,"div",46)(29,M3,4,2,"div",46),s(),o(30,"div",39)(31,"div",40)(32,"label"),l(33,"Warehouse *"),s(),o(34,"select",47),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.warehouseId,r)||(a.selectedGRN.warehouseId=r),y(r)}),o(35,"option",48),l(36,"-- Select Warehouse --"),s(),x(37,w3,2,2,"option",49),s()(),o(38,"div",40)(39,"label"),l(40,"Supplier"),s(),o(41,"select",47),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.supplierId,r)||(a.selectedGRN.supplierId=r),y(r)}),o(42,"option",48),l(43,"-- Select Supplier --"),s(),x(44,I3,2,2,"option",49),s()()(),o(45,"div",39)(46,"div",40)(47,"label"),l(48,"Remarks"),s(),o(49,"input",50),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedGRN.remarks,r)||(a.selectedGRN.remarks=r),y(r)}),s()()(),o(50,"div",51)(51,"div",52)(52,"h3"),l(53,"Line Items"),s(),x(54,D3,3,0,"button",53),s(),o(55,"table",54)(56,"thead")(57,"tr")(58,"th"),l(59,"Item *"),s(),o(60,"th"),l(61,"Quantity *"),s(),o(62,"th"),l(63,"Unit Cost *"),s(),o(64,"th"),l(65,"Amount"),s(),x(66,P3,2,0,"th",24),s()(),o(67,"tbody"),x(68,k3,14,13,"tr",25),s(),o(69,"tfoot")(70,"tr",55)(71,"td")(72,"strong"),l(73,"Totals"),s()(),o(74,"td")(75,"strong"),l(76),s()(),_(77,"td"),o(78,"td")(79,"strong"),l(80),X(81,"number"),s()(),x(82,R3,1,0,"td",24),s()()()()(),o(83,"div",56)(84,"button",57),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(85),s(),x(86,F3,3,3,"button",58),s()()()}if(n&2){let e=f();c(4),T("",e.editMode?"View":"New"," Goods Receipt Note"),c(4),m("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedGRN.grnNumber),c(4),S("ngModel",e.selectedGRN.receiptDate),m("disabled",e.editMode),c(5),S("ngModel",e.selectedGRN.receiptType),m("disabled",e.editMode),c(5),m("ngIf",e.selectedGRN.receiptType==="PO"&&!e.editMode),c(),m("ngIf",e.selectedGRN.receiptType==="PO"&&e.editMode),c(),m("ngIf",e.selectedGRN.receiptType==="DIRECT"),c(5),S("ngModel",e.selectedGRN.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedGRN.supplierId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.suppliers),c(5),S("ngModel",e.selectedGRN.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(12),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedGRN.items),c(8),g(e.selectedGRN.totalQty),c(4),T("$",ee(81,28,e.selectedGRN.totalValue,"1.2-2")),c(2),m("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var Gu=class n{constructor(t,e,i,r,a,d){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r;this.supplierService=a;this.prFulfillmentService=d}grnList=[];showModal=!1;editMode=!1;selectedGRN=this.getEmptyGRN();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];suppliers=[];purchaseOrders=[];selectedPOId=null;ngOnInit(){this.loadGRNs(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)}),this.prFulfillmentService.getAllPOs().subscribe({next:t=>this.purchaseOrders=t,error:t=>console.error("Error loading POs",t)})}loadGRNs(){this.loading=!0,this.stockMovementService.getAllGRN().subscribe({next:t=>{this.grnList=t.map(e=>({id:e.id,grnNumber:e.grnNumber||"",receiptDate:e.receiptDate||"",receiptType:e.receiptType||"DIRECT",poNumber:e.poNumber||"",supplierId:e.supplierId,supplier:e.supplier||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading GRNs",t),this.grnList=[],this.loading=!1}})}getEmptyGRN(){return{grnNumber:"",receiptDate:new Date().toISOString().split("T")[0],receiptType:"DIRECT",poNumber:"",supplierId:void 0,supplier:"",warehouseId:void 0,warehouse:"",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",this.selectedPOId=null,t?(this.editMode=!0,this.selectedGRN=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedGRN=this.getEmptyGRN(),this.generateGRNNumber(),this.addItem()),this.showModal=!0}onReceiptTypeChange(){this.selectedGRN.receiptType==="DIRECT"&&(this.selectedPOId=null,this.selectedGRN.poNumber="",this.selectedGRN.items=[],this.addItem())}onPOSelect(){if(!this.selectedPOId)return;let t=this.purchaseOrders.find(e=>e.id===this.selectedPOId);t&&(this.selectedGRN.poNumber=t.referenceNumber,this.selectedGRN.supplierId=t.supplierId,this.errorMessage="",t.warehouseId&&(this.selectedGRN.warehouseId=t.warehouseId),this.selectedGRN.items=(t.items||[]).filter(e=>e.itemId&&e.fulfillQty&&e.fulfillQty>0).map(e=>({itemId:e.itemId,itemName:e.itemName||"",itemCode:e.itemCode||"",description:e.itemDescription||"",quantity:e.fulfillQty||0,unitPrice:e.rate||0,amount:(e.fulfillQty||0)*(e.rate||0)})),this.calculateTotals())}getPOsWithItems(){return this.purchaseOrders.filter(t=>!t.items||t.items.length===0?!1:t.items.filter(i=>i.itemId&&i.fulfillQty&&i.fulfillQty>0).length>0)}generateGRNNumber(){this.settingsService.generatePrefixId("grn").subscribe({next:t=>{this.selectedGRN.grnNumber=t},error:t=>console.error("Error generating GRN number",t)})}closeModal(){this.showModal=!1,this.selectedGRN=this.getEmptyGRN(),this.errorMessage=""}addItem(){this.selectedGRN.items.push(this.getEmptyItem())}removeItem(t){this.selectedGRN.items.length>1&&(this.selectedGRN.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedGRN.items[t].itemId);e&&(this.selectedGRN.items[t].itemName=e.name,this.selectedGRN.items[t].itemCode=e.code,this.selectedGRN.items[t].description=e.description||"",this.selectedGRN.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedGRN.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedGRN.totalQty=this.selectedGRN.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedGRN.totalValue=this.selectedGRN.items.reduce((t,e)=>t+(e.amount||0),0)}saveGRN(){this.calculateTotals();let t=this.selectedGRN.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.errorMessage="Please add at least one item with quantity.";return}if(!this.selectedGRN.warehouseId){this.errorMessage="Please select a warehouse.";return}this.saving=!0,this.errorMessage="";let e={receiptDate:this.selectedGRN.receiptDate,receiptType:this.selectedGRN.receiptType,poNumber:this.selectedGRN.poNumber,supplierId:this.selectedGRN.supplierId,warehouseId:this.selectedGRN.warehouseId,referenceNumber:this.selectedGRN.referenceNumber,remarks:this.selectedGRN.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createGRN(e).subscribe({next:()=>{this.saving=!1,this.loadGRNs(),this.closeModal()},error:i=>{this.saving=!1,this.errorMessage=i.error?.error||"Error saving GRN",console.error("Error saving GRN",i)}})}deleteGRN(t){confirm("Are you sure you want to delete this GRN?")&&this.stockMovementService.deleteGRN(t).subscribe({next:()=>this.loadGRNs(),error:e=>console.error("Error deleting GRN",e)})}getTotalValue(){return this.grnList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.grnList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.grnList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Me),I(In),I(Pe),I(Ge),I(Nt),I(ft))};static \u0275cmp=F({type:n,selectors:[["app-goods-receipt"]],standalone:!1,decls:58,vars:10,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-grid","grid-4"],[1,"stat-card"],[1,"icon","primary"],[1,"fas","fa-file-alt"],[1,"info"],[1,"icon","success"],[1,"fas","fa-check-circle"],[1,"icon","warning"],[1,"fas","fa-clock"],[1,"icon","info"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],["class","loading-spinner",4,"ngIf"],["class","table",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-spinner"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value","DIRECT"],["value","PO"],["class","form-group",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"items-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"totals-row"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel"],["class","text-warning",4,"ngIf"],[1,"text-warning"],["type","text","placeholder","e.g., Invoice #",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-secondary",3,"click"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","readonly","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Receipt Note (GRN)"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Stock Movement"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"GRN"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," New GRN "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),s(),o(23,"div",10)(24,"h3"),l(25),s(),o(26,"p"),l(27,"Total GRNs"),s()()(),o(28,"div",7)(29,"div",11),_(30,"i",12),s(),o(31,"div",10)(32,"h3"),l(33),s(),o(34,"p"),l(35,"Completed"),s()()(),o(36,"div",7)(37,"div",13),_(38,"i",14),s(),o(39,"div",10)(40,"h3"),l(41),s(),o(42,"p"),l(43,"Pending"),s()()(),o(44,"div",7)(45,"div",15),_(46,"i",16),s(),o(47,"div",10)(48,"h3"),l(49),X(50,"number"),s(),o(51,"p"),l(52,"Total Value"),s()()()(),o(53,"div",17)(54,"div",18),x(55,h3,2,0,"div",19)(56,y3,24,2,"table",20),s()()(),x(57,L3,87,31,"div",21)),e&2&&(c(25),g(i.grnList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getPendingCount()),c(8),T("$",ee(50,7,i.getTotalValue(),"1.2-2")),c(6),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q,De],styles:[".stock-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function V3(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),s()())}function j3(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",27),o(3,"p"),l(4,"No issues found"),s()()())}function B3(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td"),l(15),X(16,"number"),s(),o(17,"td")(18,"span",28),l(19),s()(),o(20,"td")(21,"div",29)(22,"button",30),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(23,"i",31),s(),o(24,"button",32),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteIssue(r.id))}),_(25,"i",33),s()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.issueNumber),c(2),g(e.issueDate),c(2),g(e.warehouse),c(2),g(e.issueType),c(2),T("",e.items.length," items"),c(2),g(e.totalQty),c(2),g(ee(16,9,e.totalValue,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function W3(n,t){if(n&1&&(o(0,"div",57),l(1),s()),n&2){let e=f(2);c(),g(e.errorMessage)}}function U3(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function G3(n,t){if(n&1&&(o(0,"option",58),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function H3(n,t){if(n&1){let e=O();o(0,"button",30),b("click",function(){v(e);let r=f(2);return y(r.addItem())}),_(1,"i",5),l(2," Add Item "),s()}}function q3(n,t){n&1&&(o(0,"th"),l(1,"Action"),s())}function z3(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function $3(n,t){if(n&1){let e=O();o(0,"td")(1,"button",62),b("click",function(){v(e);let r=f().index,a=f(2);return y(a.removeItem(r))}),_(2,"i",33),s()()}if(n&2){let e=f(3);c(),m("disabled",e.selectedIssue.items.length<=1)}}function Q3(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"select",59),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemId,r)||(a.itemId=r),y(r)}),b("change",function(){let r=v(e).index,a=f(2);return y(a.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),s(),x(5,z3,2,3,"option",46),s()(),o(6,"td")(7,"input",60),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.quantity,r)||(a.quantity=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(8,"td")(9,"input",61),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.unitPrice,r)||(a.unitPrice=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(10,"td"),l(11),X(12,"number"),s(),x(13,$3,3,1,"td",22),s()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),S("ngModel",e.quantity),m("disabled",i.editMode),c(2),S("ngModel",e.unitPrice),m("disabled",i.editMode),c(2),g(ee(12,10,e.amount,"1.2-2")),c(2),m("ngIf",!i.editMode)}}function K3(n,t){n&1&&_(0,"td")}function Y3(n,t){if(n&1){let e=O();o(0,"button",63),b("click",function(){v(e);let r=f(2);return y(r.saveIssue())}),l(1),s()}if(n&2){let e=f(2);m("disabled",e.saving),c(),T(" ",e.saving?"Saving...":"Save Issue"," ")}}function Z3(n,t){if(n&1){let e=O();o(0,"div",34),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",35),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),s(),o(5,"button",37),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(6,"\xD7"),s()(),o(7,"div",38),x(8,W3,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Issue Number"),s(),o(13,"input",42),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.issueNumber,r)||(a.selectedIssue.issueNumber=r),y(r)}),s()(),o(14,"div",41)(15,"label"),l(16,"Issue Date *"),s(),o(17,"input",43),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.issueDate,r)||(a.selectedIssue.issueDate=r),y(r)}),s()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"Warehouse *"),s(),o(22,"select",44),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.warehouseId,r)||(a.selectedIssue.warehouseId=r),y(r)}),o(23,"option",45),l(24,"Select Warehouse"),s(),x(25,U3,2,2,"option",46),s()(),o(26,"div",41)(27,"label"),l(28,"Issue Type"),s(),o(29,"select",44),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.issueType,r)||(a.selectedIssue.issueType=r),y(r)}),x(30,G3,2,2,"option",47),s()()(),o(31,"div",40)(32,"div",41)(33,"label"),l(34,"Reference Number"),s(),o(35,"input",48),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.referenceNumber,r)||(a.selectedIssue.referenceNumber=r),y(r)}),s()(),o(36,"div",41)(37,"label"),l(38,"Remarks"),s(),o(39,"input",48),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedIssue.remarks,r)||(a.selectedIssue.remarks=r),y(r)}),s()()(),o(40,"div",49)(41,"div",50)(42,"h3"),l(43,"Items"),s(),x(44,H3,3,0,"button",51),s(),o(45,"table",52)(46,"thead")(47,"tr")(48,"th"),l(49,"Item"),s(),o(50,"th"),l(51,"Quantity"),s(),o(52,"th"),l(53,"Unit Price"),s(),o(54,"th"),l(55,"Amount"),s(),x(56,q3,2,0,"th",22),s()(),o(57,"tbody"),x(58,Q3,14,13,"tr",23),s(),o(59,"tfoot")(60,"tr")(61,"td",53)(62,"strong"),l(63,"Totals:"),s()(),o(64,"td")(65,"strong"),l(66),s()(),o(67,"td")(68,"strong"),l(69),X(70,"number"),s()(),x(71,K3,1,0,"td",22),s()()()()(),o(72,"div",54)(73,"button",55),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(74),s(),x(75,Y3,2,2,"button",56),s()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Issue":"New Goods Issue"),c(4),m("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedIssue.issueNumber),c(4),S("ngModel",e.selectedIssue.issueDate),m("disabled",e.editMode),c(5),S("ngModel",e.selectedIssue.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedIssue.issueType),m("disabled",e.editMode),c(),m("ngForOf",e.issueTypes),c(5),S("ngModel",e.selectedIssue.referenceNumber),m("disabled",e.editMode),c(4),S("ngModel",e.selectedIssue.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(12),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedIssue.items),c(8),g(e.selectedIssue.totalQty),c(3),g(ee(70,24,e.selectedIssue.totalValue,"1.2-2")),c(2),m("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var Hu=class n{constructor(t,e,i,r){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r}issueList=[];showModal=!1;editMode=!1;selectedIssue=this.getEmptyIssue();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];issueTypes=["Internal Use","Sales","Return","Damaged","Other"];ngOnInit(){this.loadIssues(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadIssues(){this.loading=!0,this.stockMovementService.getAllIssues().subscribe({next:t=>{this.issueList=t.map(e=>({id:e.id,issueNumber:e.issueNumber||"",issueDate:e.issueDate||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",issueType:e.issueType||"",referenceNumber:e.referenceNumber||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,totalValue:e.totalValue||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,unitPrice:i.unitPrice||0,amount:i.lineTotal||0}))||[]})),this.loading=!1},error:t=>{console.error("Error loading issues",t),this.issueList=[],this.loading=!1}})}getEmptyIssue(){return{issueNumber:"",issueDate:new Date().toISOString().split("T")[0],warehouseId:void 0,warehouse:"",issueType:"Internal Use",referenceNumber:"",items:[],totalQty:0,totalValue:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0,unitPrice:0,amount:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedIssue=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedIssue=this.getEmptyIssue(),this.generateIssueNumber(),this.addItem()),this.showModal=!0}generateIssueNumber(){this.settingsService.generatePrefixId("issue").subscribe({next:t=>{this.selectedIssue.issueNumber=t},error:t=>console.error("Error generating issue number",t)})}closeModal(){this.showModal=!1,this.selectedIssue=this.getEmptyIssue(),this.errorMessage=""}addItem(){this.selectedIssue.items.push(this.getEmptyItem())}removeItem(t){this.selectedIssue.items.length>1&&(this.selectedIssue.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedIssue.items[t].itemId);e&&(this.selectedIssue.items[t].itemName=e.name,this.selectedIssue.items[t].itemCode=e.code,this.selectedIssue.items[t].description=e.description||"",this.selectedIssue.items[t].unitPrice=e.unitCost||0,this.calculateItemAmount(this.selectedIssue.items[t]))}calculateItemAmount(t){t.amount=t.quantity*t.unitPrice,this.calculateTotals()}calculateTotals(){this.selectedIssue.totalQty=this.selectedIssue.items.reduce((t,e)=>t+(e.quantity||0),0),this.selectedIssue.totalValue=this.selectedIssue.items.reduce((t,e)=>t+(e.amount||0),0)}saveIssue(){this.calculateTotals();let t=this.selectedIssue.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.errorMessage="Please add at least one item with quantity.";return}if(!this.selectedIssue.warehouseId){this.errorMessage="Please select a warehouse.";return}this.saving=!0,this.errorMessage="";let e={issueDate:this.selectedIssue.issueDate,warehouseId:this.selectedIssue.warehouseId,issueType:this.selectedIssue.issueType,referenceNumber:this.selectedIssue.referenceNumber,remarks:this.selectedIssue.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,unitPrice:i.unitPrice,binId:i.binId}))};this.stockMovementService.createIssue(e).subscribe({next:()=>{this.saving=!1,this.loadIssues(),this.closeModal()},error:i=>{this.saving=!1,this.errorMessage=i.error?.error||"Error saving issue",console.error("Error saving issue",i)}})}deleteIssue(t){confirm("Are you sure you want to delete this issue?")&&this.stockMovementService.deleteIssue(t).subscribe({next:()=>this.loadIssues(),error:e=>console.error("Error deleting issue",e)})}getTotalValue(){return this.issueList.reduce((t,e)=>t+(e.totalValue||0),0)}getCompletedCount(){return this.issueList.filter(t=>t.status==="Completed").length}getPendingCount(){return this.issueList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success",Pending:"badge-warning",Draft:"badge-info"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Me),I(In),I(Pe),I(Ge))};static \u0275cmp=F({type:n,selectors:[["app-goods-issue"]],standalone:!1,decls:81,vars:11,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-file-export"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"stat-icon","purple"],[1,"fas","fa-dollar-sign"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"text-center"],["colspan","9",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],["colspan","2"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Goods Issue"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Stock Movement"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Goods Issue"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," New Issue "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),s(),o(23,"div",10)(24,"span",11),l(25),s(),o(26,"span",12),l(27,"Total Issues"),s()()(),o(28,"div",7)(29,"div",13),_(30,"i",14),s(),o(31,"div",10)(32,"span",11),l(33),s(),o(34,"span",12),l(35,"Completed"),s()()(),o(36,"div",7)(37,"div",15),_(38,"i",16),s(),o(39,"div",10)(40,"span",11),l(41),s(),o(42,"span",12),l(43,"Pending"),s()()(),o(44,"div",7)(45,"div",17),_(46,"i",18),s(),o(47,"div",10)(48,"span",11),l(49),X(50,"number"),s(),o(51,"span",12),l(52,"Total Value"),s()()()(),o(53,"div",19)(54,"div",20)(55,"table",21)(56,"thead")(57,"tr")(58,"th"),l(59,"Issue No."),s(),o(60,"th"),l(61,"Date"),s(),o(62,"th"),l(63,"Warehouse"),s(),o(64,"th"),l(65,"Type"),s(),o(66,"th"),l(67,"Items"),s(),o(68,"th"),l(69,"Total Qty"),s(),o(70,"th"),l(71,"Total Value"),s(),o(72,"th"),l(73,"Status"),s(),o(74,"th"),l(75,"Actions"),s()()(),o(76,"tbody"),x(77,V3,3,0,"tr",22)(78,j3,5,0,"tr",22)(79,B3,26,12,"tr",23),s()()()()(),x(80,Z3,76,27,"div",24)),e&2&&(c(25),g(i.issueList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getPendingCount()),c(8),g(ee(50,8,i.getTotalValue(),"1.2-2")),c(28),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.issueList.length===0),c(),m("ngForOf",i.issueList),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q,De],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function J3(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),s()())}function X3(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",27),o(3,"p"),l(4,"No transfers found"),s()()())}function eN(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td")(15,"span",28),l(16),s()(),o(17,"td")(18,"div",29)(19,"button",30),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(20,"i",31),s(),o(21,"button",32),b("click",function(){let r=v(e).$implicit,a=f();return y(a.deleteTransfer(r.id))}),_(22,"i",33),s()()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.transferNumber),c(2),g(e.transferDate),c(2),g(e.fromWarehouse),c(2),g(e.toWarehouse),c(2),T("",e.items.length," items"),c(2),g(e.totalQty),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function tN(n,t){if(n&1&&(o(0,"div",55),l(1),s()),n&2){let e=f(2);c(),g(e.errorMessage)}}function nN(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function iN(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function rN(n,t){if(n&1){let e=O();o(0,"button",30),b("click",function(){v(e);let r=f(2);return y(r.addItem())}),_(1,"i",5),l(2," Add Item "),s()}}function oN(n,t){n&1&&(o(0,"th"),l(1,"Action"),s())}function aN(n,t){if(n&1&&(o(0,"option",45),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function sN(n,t){if(n&1){let e=O();o(0,"td")(1,"button",58),b("click",function(){v(e);let r=f().index,a=f(2);return y(a.removeItem(r))}),_(2,"i",33),s()()}if(n&2){let e=f(3);c(),m("disabled",e.selectedTransfer.items.length<=1)}}function lN(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"select",56),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemId,r)||(a.itemId=r),y(r)}),b("change",function(){let r=v(e).index,a=f(2);return y(a.onItemSelect(r))}),o(3,"option",45),l(4,"Select Item"),s(),x(5,aN,2,3,"option",46),s()(),o(6,"td")(7,"input",57),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.quantity,r)||(a.quantity=r),y(r)}),b("ngModelChange",function(){v(e);let r=f(2);return y(r.calculateTotals())}),s()(),x(8,sN,3,1,"td",22),s()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemId),m("disabled",i.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",i.items),c(2),S("ngModel",e.quantity),m("disabled",i.editMode),c(),m("ngIf",!i.editMode)}}function cN(n,t){n&1&&_(0,"td")}function dN(n,t){if(n&1){let e=O();o(0,"button",59),b("click",function(){v(e);let r=f(2);return y(r.saveTransfer())}),l(1),s()}if(n&2){let e=f(2);m("disabled",e.saving),c(),T(" ",e.saving?"Saving...":"Save Transfer"," ")}}function uN(n,t){if(n&1){let e=O();o(0,"div",34),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",35),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",36)(3,"h2"),l(4),s(),o(5,"button",37),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(6,"\xD7"),s()(),o(7,"div",38),x(8,tN,2,1,"div",39),o(9,"div",40)(10,"div",41)(11,"label"),l(12,"Transfer Number"),s(),o(13,"input",42),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTransfer.transferNumber,r)||(a.selectedTransfer.transferNumber=r),y(r)}),s()(),o(14,"div",41)(15,"label"),l(16,"Transfer Date *"),s(),o(17,"input",43),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTransfer.transferDate,r)||(a.selectedTransfer.transferDate=r),y(r)}),s()()(),o(18,"div",40)(19,"div",41)(20,"label"),l(21,"From Warehouse *"),s(),o(22,"select",44),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTransfer.fromWarehouseId,r)||(a.selectedTransfer.fromWarehouseId=r),y(r)}),o(23,"option",45),l(24,"Select Source Warehouse"),s(),x(25,nN,2,2,"option",46),s()(),o(26,"div",41)(27,"label"),l(28,"To Warehouse *"),s(),o(29,"select",44),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTransfer.toWarehouseId,r)||(a.selectedTransfer.toWarehouseId=r),y(r)}),o(30,"option",45),l(31,"Select Destination Warehouse"),s(),x(32,iN,2,2,"option",46),s()()(),o(33,"div",41)(34,"label"),l(35,"Remarks"),s(),o(36,"textarea",47),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedTransfer.remarks,r)||(a.selectedTransfer.remarks=r),y(r)}),s()(),o(37,"div",48)(38,"div",49)(39,"h3"),l(40,"Items to Transfer"),s(),x(41,rN,3,0,"button",50),s(),o(42,"table",51)(43,"thead")(44,"tr")(45,"th"),l(46,"Item"),s(),o(47,"th"),l(48,"Quantity"),s(),x(49,oN,2,0,"th",22),s()(),o(50,"tbody"),x(51,lN,9,7,"tr",23),s(),o(52,"tfoot")(53,"tr")(54,"td")(55,"strong"),l(56,"Total Quantity:"),s()(),o(57,"td")(58,"strong"),l(59),s()(),x(60,cN,1,0,"td",22),s()()()()(),o(61,"div",52)(62,"button",53),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(63),s(),x(64,dN,2,2,"button",54),s()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Transfer":"New Stock Transfer"),c(4),m("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedTransfer.transferNumber),c(4),S("ngModel",e.selectedTransfer.transferDate),m("disabled",e.editMode),c(5),S("ngModel",e.selectedTransfer.fromWarehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedTransfer.toWarehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(4),S("ngModel",e.selectedTransfer.remarks),m("disabled",e.editMode),c(5),m("ngIf",!e.editMode),c(8),m("ngIf",!e.editMode),c(2),m("ngForOf",e.selectedTransfer.items),c(8),g(e.selectedTransfer.totalQty),c(),m("ngIf",!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var qu=class n{constructor(t,e,i,r){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r}transferList=[];showModal=!1;editMode=!1;selectedTransfer=this.getEmptyTransfer();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];ngOnInit(){this.loadTransfers(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadTransfers(){this.loading=!0,this.stockMovementService.getAllTransfers().subscribe({next:t=>{this.transferList=t.map(e=>({id:e.id,transferNumber:e.transferNumber||"",transferDate:e.transferDate||"",fromWarehouseId:e.fromWarehouseId,fromWarehouse:e.fromWarehouse||"",toWarehouseId:e.toWarehouseId,toWarehouse:e.toWarehouse||"",totalQty:e.lines?.reduce((i,r)=>i+(r.quantity||0),0)||0,status:e.status||"Completed",remarks:e.remarks||"",items:e.lines?.map(i=>({itemId:i.itemId,itemName:i.itemName||"",itemCode:i.itemCode||"",description:"",quantity:i.quantity||0,fromBinId:i.fromBinId,toBinId:i.toBinId}))||[]})),this.loading=!1},error:t=>{console.error("Error loading transfers",t),this.transferList=[],this.loading=!1}})}getEmptyTransfer(){return{transferNumber:"",transferDate:new Date().toISOString().split("T")[0],fromWarehouseId:void 0,fromWarehouse:"",toWarehouseId:void 0,toWarehouse:"",items:[],totalQty:0,status:"Draft",remarks:""}}getEmptyItem(){return{itemId:void 0,itemName:"",itemCode:"",description:"",quantity:0}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedTransfer=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedTransfer=this.getEmptyTransfer(),this.generateTransferNumber(),this.addItem()),this.showModal=!0}generateTransferNumber(){this.settingsService.generatePrefixId("transfer").subscribe({next:t=>{this.selectedTransfer.transferNumber=t},error:t=>console.error("Error generating transfer number",t)})}closeModal(){this.showModal=!1,this.selectedTransfer=this.getEmptyTransfer(),this.errorMessage=""}addItem(){this.selectedTransfer.items.push(this.getEmptyItem())}removeItem(t){this.selectedTransfer.items.length>1&&(this.selectedTransfer.items.splice(t,1),this.calculateTotals())}onItemSelect(t){let e=this.items.find(i=>i.id===this.selectedTransfer.items[t].itemId);e&&(this.selectedTransfer.items[t].itemName=e.name,this.selectedTransfer.items[t].itemCode=e.code,this.selectedTransfer.items[t].description=e.description||"")}calculateTotals(){this.selectedTransfer.totalQty=this.selectedTransfer.items.reduce((t,e)=>t+(e.quantity||0),0)}saveTransfer(){this.calculateTotals();let t=this.selectedTransfer.items.filter(i=>i.itemId&&i.quantity>0);if(t.length===0){this.errorMessage="Please add at least one item with quantity.";return}if(!this.selectedTransfer.fromWarehouseId){this.errorMessage="Please select a source warehouse.";return}if(!this.selectedTransfer.toWarehouseId){this.errorMessage="Please select a destination warehouse.";return}if(this.selectedTransfer.fromWarehouseId===this.selectedTransfer.toWarehouseId){this.errorMessage="Source and destination warehouse cannot be the same.";return}this.saving=!0,this.errorMessage="";let e={transferDate:this.selectedTransfer.transferDate,fromWarehouseId:this.selectedTransfer.fromWarehouseId,toWarehouseId:this.selectedTransfer.toWarehouseId,remarks:this.selectedTransfer.remarks,lines:t.map(i=>({itemId:i.itemId,quantity:i.quantity,fromBinId:i.fromBinId,toBinId:i.toBinId}))};this.stockMovementService.createTransfer(e).subscribe({next:()=>{this.saving=!1,this.loadTransfers(),this.closeModal()},error:i=>{this.saving=!1,this.errorMessage=i.error?.error||"Error saving transfer",console.error("Error saving transfer",i)}})}deleteTransfer(t){confirm("Are you sure you want to delete this transfer?")&&this.stockMovementService.deleteTransfer(t).subscribe({next:()=>this.loadTransfers(),error:e=>console.error("Error deleting transfer",e)})}getCompletedCount(){return this.transferList.filter(t=>t.status==="Completed").length}getInTransitCount(){return this.transferList.filter(t=>t.status==="In Transit").length}getPendingCount(){return this.transferList.filter(t=>t.status==="Pending"||t.status==="Draft").length}getStatusClass(t){return{Completed:"badge-success","In Transit":"badge-info",Pending:"badge-warning",Draft:"badge-secondary"}[t]||"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Me),I(In),I(Pe),I(Ge))};static \u0275cmp=F({type:n,selectors:[["app-stock-transfer"]],standalone:!1,decls:78,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-exchange-alt"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-check-circle"],[1,"stat-icon","cyan"],[1,"fas","fa-truck"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","8",1,"text-center"],["colspan","8",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"items-section"],[1,"section-header"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"table","items-table"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Transfer"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Stock Movement"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Transfer"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," New Transfer "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),s(),o(23,"div",10)(24,"span",11),l(25),s(),o(26,"span",12),l(27,"Total Transfers"),s()()(),o(28,"div",7)(29,"div",13),_(30,"i",14),s(),o(31,"div",10)(32,"span",11),l(33),s(),o(34,"span",12),l(35,"Completed"),s()()(),o(36,"div",7)(37,"div",15),_(38,"i",16),s(),o(39,"div",10)(40,"span",11),l(41),s(),o(42,"span",12),l(43,"In Transit"),s()()(),o(44,"div",7)(45,"div",17),_(46,"i",18),s(),o(47,"div",10)(48,"span",11),l(49),s(),o(50,"span",12),l(51,"Pending"),s()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Transfer No."),s(),o(59,"th"),l(60,"Date"),s(),o(61,"th"),l(62,"From Warehouse"),s(),o(63,"th"),l(64,"To Warehouse"),s(),o(65,"th"),l(66,"Items"),s(),o(67,"th"),l(68,"Total Qty"),s(),o(69,"th"),l(70,"Status"),s(),o(71,"th"),l(72,"Actions"),s()()(),o(73,"tbody"),x(74,J3,3,0,"tr",22)(75,X3,5,0,"tr",22)(76,eN,23,8,"tr",23),s()()()()(),x(77,uN,65,22,"div",24)),e&2&&(c(25),g(i.transferList.length),c(8),g(i.getCompletedCount()),c(8),g(i.getInTransitCount()),c(8),g(i.getPendingCount()),c(25),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.transferList.length===0),c(),m("ngForOf",i.transferList),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function pN(n,t){n&1&&(o(0,"tr")(1,"td",25),l(2,"Loading..."),s()())}function mN(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",27),o(3,"p"),l(4,"No adjustments found"),s()()())}function fN(n,t){if(n&1){let e=O();o(0,"button",35),b("click",function(){v(e);let r=f().$implicit,a=f();return y(a.approveAdjustment(r.id))}),_(1,"i",36),s()}}function gN(n,t){if(n&1){let e=O();o(0,"button",37),b("click",function(){v(e);let r=f().$implicit,a=f();return y(a.rejectAdjustment(r.id))}),_(1,"i",38),s()}}function hN(n,t){if(n&1){let e=O();o(0,"button",39),b("click",function(){v(e);let r=f().$implicit,a=f();return y(a.deleteAdjustment(r.id))}),_(1,"i",40),s()}}function _N(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td")(9,"span",28),l(10),s()(),o(11,"td"),l(12),s(),o(13,"td"),l(14),s(),o(15,"td"),l(16),s(),o(17,"td"),l(18),s(),o(19,"td")(20,"span",28),l(21),s()(),o(22,"td")(23,"div",29)(24,"button",30),b("click",function(){let r=v(e).$implicit,a=f();return y(a.openModal(r))}),_(25,"i",31),s(),x(26,fN,2,0,"button",32)(27,gN,2,0,"button",33)(28,hN,2,0,"button",34),s()()()}if(n&2){let e=t.$implicit,i=f();c(3),g(e.adjustmentNumber),c(2),g(e.adjustmentDate),c(2),g(e.itemName),c(2),m("ngClass",i.getTypeClass(e.adjustmentType)),c(),g(e.adjustmentType),c(2),g(e.quantityBefore),c(2),g(e.quantityAdjusted),c(2),g(e.quantityAfter),c(2),g(e.reason),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(5),m("ngIf",e.status==="Pending"),c(),m("ngIf",e.status==="Pending"),c(),m("ngIf",e.status==="Pending")}}function vN(n,t){if(n&1&&(o(0,"div",63),l(1),s()),n&2){let e=f(2);c(),g(e.errorMessage)}}function yN(n,t){if(n&1&&(o(0,"option",52),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),de("",e.code," - ",e.name)}}function bN(n,t){if(n&1&&(o(0,"option",52),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function CN(n,t){if(n&1&&(o(0,"option",64),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function xN(n,t){if(n&1&&(o(0,"option",64),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function SN(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(3);c(),de(" Stock will increase from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function EN(n,t){if(n&1&&(o(0,"span"),l(1),s()),n&2){let e=f(3);c(),de(" Stock will decrease from ",e.selectedAdjustment.quantityBefore," to ",e.selectedAdjustment.quantityAfter," ")}}function MN(n,t){if(n&1&&(o(0,"div",65),_(1,"i",66),x(2,SN,2,2,"span",22)(3,EN,2,2,"span",22),s()),n&2){let e=f(2);c(2),m("ngIf",e.selectedAdjustment.adjustmentType==="INCREASE"),c(),m("ngIf",e.selectedAdjustment.adjustmentType==="DECREASE")}}function wN(n,t){if(n&1){let e=O();o(0,"button",67),b("click",function(){v(e);let r=f(2);return y(r.saveAdjustment())}),l(1),s()}if(n&2){let e=f(2);m("disabled",e.saving),c(),T(" ",e.saving?"Saving...":"Save Adjustment"," ")}}function IN(n,t){if(n&1){let e=O();o(0,"div",41),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",42),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",43)(3,"h2"),l(4),s(),o(5,"button",44),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(6,"\xD7"),s()(),o(7,"div",45),x(8,vN,2,1,"div",46),o(9,"div",47)(10,"div",48)(11,"label"),l(12,"Adjustment Number"),s(),o(13,"input",49),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.adjustmentNumber,r)||(a.selectedAdjustment.adjustmentNumber=r),y(r)}),s()(),o(14,"div",48)(15,"label"),l(16,"Date *"),s(),o(17,"input",50),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.adjustmentDate,r)||(a.selectedAdjustment.adjustmentDate=r),y(r)}),s()()(),o(18,"div",47)(19,"div",48)(20,"label"),l(21,"Item *"),s(),o(22,"select",51),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.itemId,r)||(a.selectedAdjustment.itemId=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.onItemSelect())}),o(23,"option",52),l(24,"Select Item"),s(),x(25,yN,2,3,"option",53),s()(),o(26,"div",48)(27,"label"),l(28,"Warehouse *"),s(),o(29,"select",54),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.warehouseId,r)||(a.selectedAdjustment.warehouseId=r),y(r)}),o(30,"option",52),l(31,"Select Warehouse"),s(),x(32,bN,2,2,"option",53),s()()(),o(33,"div",47)(34,"div",48)(35,"label"),l(36,"Adjustment Type *"),s(),o(37,"select",51),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.adjustmentType,r)||(a.selectedAdjustment.adjustmentType=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.calculateQuantityAfter())}),x(38,CN,2,2,"option",55),s()(),o(39,"div",48)(40,"label"),l(41,"Reason *"),s(),o(42,"select",54),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.reason,r)||(a.selectedAdjustment.reason=r),y(r)}),x(43,xN,2,2,"option",55),s()()(),o(44,"div",47)(45,"div",48)(46,"label"),l(47,"Current Stock"),s(),o(48,"input",56),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.quantityBefore,r)||(a.selectedAdjustment.quantityBefore=r),y(r)}),s()(),o(49,"div",48)(50,"label"),l(51,"Quantity to Adjust *"),s(),o(52,"input",57),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.quantityAdjusted,r)||(a.selectedAdjustment.quantityAdjusted=r),y(r)}),b("ngModelChange",function(){v(e);let r=f();return y(r.calculateQuantityAfter())}),s()(),o(53,"div",48)(54,"label"),l(55,"New Stock"),s(),o(56,"input",56),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.quantityAfter,r)||(a.selectedAdjustment.quantityAfter=r),y(r)}),s()()(),o(57,"div",48)(58,"label"),l(59,"Remarks"),s(),o(60,"textarea",58),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedAdjustment.remarks,r)||(a.selectedAdjustment.remarks=r),y(r)}),s()(),x(61,MN,4,2,"div",59),s(),o(62,"div",60)(63,"button",61),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(64),s(),x(65,wN,2,2,"button",62),s()()()}if(n&2){let e=f();c(4),g(e.editMode?"View Adjustment":"New Stock Adjustment"),c(4),m("ngIf",e.errorMessage),c(5),S("ngModel",e.selectedAdjustment.adjustmentNumber),c(4),S("ngModel",e.selectedAdjustment.adjustmentDate),m("disabled",e.editMode),c(5),S("ngModel",e.selectedAdjustment.itemId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.items),c(4),S("ngModel",e.selectedAdjustment.warehouseId),m("disabled",e.editMode),c(),m("ngValue",void 0),c(2),m("ngForOf",e.warehouses),c(5),S("ngModel",e.selectedAdjustment.adjustmentType),m("disabled",e.editMode),c(),m("ngForOf",e.adjustmentTypes),c(4),S("ngModel",e.selectedAdjustment.reason),m("disabled",e.editMode),c(),m("ngForOf",e.reasons),c(5),S("ngModel",e.selectedAdjustment.quantityBefore),c(4),S("ngModel",e.selectedAdjustment.quantityAdjusted),m("disabled",e.editMode),c(4),S("ngModel",e.selectedAdjustment.quantityAfter),c(4),S("ngModel",e.selectedAdjustment.remarks),m("disabled",e.editMode),c(),m("ngIf",e.selectedAdjustment.itemId&&!e.editMode),c(3),g(e.editMode?"Close":"Cancel"),c(),m("ngIf",!e.editMode)}}var zu=class n{constructor(t,e,i,r){this.settingsService=t;this.stockMovementService=e;this.itemService=i;this.warehouseService=r}adjustments=[];showModal=!1;editMode=!1;selectedAdjustment=this.getEmptyAdjustment();loading=!1;saving=!1;errorMessage="";items=[];warehouses=[];adjustmentTypes=["INCREASE","DECREASE"];reasons=["Inventory Count","Damaged Goods","Expired Items","Theft/Loss","Found Items","Return to Stock","Quality Issue","Administrative Correction","Other"];ngOnInit(){this.loadAdjustments(),this.loadMasterData()}loadMasterData(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadAdjustments(){this.loading=!0,this.stockMovementService.getAllAdjustments().subscribe({next:t=>{this.adjustments=t.map(e=>({id:e.id,adjustmentNumber:e.adjustmentNumber||"",adjustmentDate:e.adjustmentDate||"",adjustmentType:e.adjustmentType||"",itemId:e.itemId,itemName:e.item||"",itemCode:e.itemCode||"",warehouseId:e.warehouseId,warehouse:e.warehouse||"",binId:e.binId,bin:e.bin||"",quantityBefore:e.quantityBefore||0,quantityAdjusted:e.quantityAdjusted||0,quantityAfter:e.quantityAfter||0,valueDifference:e.valueDifference||0,reason:e.reason||"",status:e.status||"Pending",remarks:e.remarks||""})),this.loading=!1},error:t=>{console.error("Error loading adjustments",t),this.adjustments=[],this.loading=!1}})}getEmptyAdjustment(){return{adjustmentNumber:"",adjustmentDate:new Date().toISOString().split("T")[0],adjustmentType:"INCREASE",itemId:void 0,itemName:"",warehouseId:void 0,warehouse:"",quantityBefore:0,quantityAdjusted:0,quantityAfter:0,reason:"Inventory Count",status:"Pending",remarks:""}}openModal(t){this.errorMessage="",t?(this.editMode=!0,this.selectedAdjustment=JSON.parse(JSON.stringify(t))):(this.editMode=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.generateAdjustmentNumber()),this.showModal=!0}generateAdjustmentNumber(){this.settingsService.generatePrefixId("adjustment").subscribe({next:t=>{this.selectedAdjustment.adjustmentNumber=t},error:t=>console.error("Error generating adjustment number",t)})}closeModal(){this.showModal=!1,this.selectedAdjustment=this.getEmptyAdjustment(),this.errorMessage=""}onItemSelect(){let t=this.items.find(e=>e.id===this.selectedAdjustment.itemId);t&&(this.selectedAdjustment.itemName=t.name,this.selectedAdjustment.itemCode=t.code,this.selectedAdjustment.quantityBefore=t.currentStock||0,this.calculateQuantityAfter())}calculateQuantityAfter(){let t=this.selectedAdjustment.quantityBefore||0,e=this.selectedAdjustment.quantityAdjusted||0;this.selectedAdjustment.adjustmentType==="INCREASE"?this.selectedAdjustment.quantityAfter=t+e:this.selectedAdjustment.quantityAfter=t-e}saveAdjustment(){if(!this.selectedAdjustment.itemId){this.errorMessage="Please select an item.";return}if(!this.selectedAdjustment.warehouseId){this.errorMessage="Please select a warehouse.";return}if(!this.selectedAdjustment.quantityAdjusted||this.selectedAdjustment.quantityAdjusted<=0){this.errorMessage="Please enter a valid quantity to adjust.";return}if(!this.selectedAdjustment.reason){this.errorMessage="Please select a reason for adjustment.";return}this.saving=!0,this.errorMessage="";let t={adjustmentDate:this.selectedAdjustment.adjustmentDate,adjustmentType:this.selectedAdjustment.adjustmentType,itemId:this.selectedAdjustment.itemId,warehouseId:this.selectedAdjustment.warehouseId,binId:this.selectedAdjustment.binId,quantityAdjusted:this.selectedAdjustment.quantityAdjusted,reason:this.selectedAdjustment.reason,remarks:this.selectedAdjustment.remarks};this.stockMovementService.createAdjustment(t).subscribe({next:()=>{this.saving=!1,this.loadAdjustments(),this.closeModal()},error:e=>{this.saving=!1,this.errorMessage=e.error?.error||"Error saving adjustment",console.error("Error saving adjustment",e)}})}deleteAdjustment(t){confirm("Are you sure you want to delete this adjustment?")&&this.stockMovementService.deleteAdjustment(t).subscribe({next:()=>this.loadAdjustments(),error:e=>console.error("Error deleting adjustment",e)})}approveAdjustment(t){confirm("Are you sure you want to approve this adjustment? This will update the stock levels.")&&this.stockMovementService.approveAdjustment(t).subscribe({next:()=>{this.loadAdjustments()},error:e=>{console.error("Error approving adjustment",e),alert(e.error?.error||"Error approving adjustment")}})}rejectAdjustment(t){confirm("Are you sure you want to reject this adjustment?")&&this.stockMovementService.rejectAdjustment(t).subscribe({next:()=>{this.loadAdjustments()},error:e=>{console.error("Error rejecting adjustment",e),alert(e.error?.error||"Error rejecting adjustment")}})}getIncreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="INCREASE").length}getDecreaseCount(){return this.adjustments.filter(t=>t.adjustmentType==="DECREASE").length}getPendingCount(){return this.adjustments.filter(t=>t.status==="Pending").length}getApprovedCount(){return this.adjustments.filter(t=>t.status==="Approved"||t.status==="Completed").length}getStatusClass(t){return{Approved:"badge-success",Completed:"badge-success",Pending:"badge-warning",Rejected:"badge-danger",Draft:"badge-info"}[t]||"badge-info"}getTypeClass(t){return t==="INCREASE"?"badge-success":"badge-danger"}static \u0275fac=function(e){return new(e||n)(I(Me),I(In),I(Pe),I(Ge))};static \u0275cmp=F({type:n,selectors:[["app-stock-adjustments"]],standalone:!1,decls:82,vars:8,consts:[[1,"stock-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","blue"],[1,"fas","fa-sliders-h"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","green"],[1,"fas","fa-arrow-up"],[1,"stat-icon","red"],[1,"fas","fa-arrow-down"],[1,"stat-icon","orange"],[1,"fas","fa-clock"],[1,"card"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","10",1,"text-center"],["colspan","10",1,"empty-state"],[1,"fas","fa-inbox"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["class","btn btn-sm btn-success","title","Approve",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning","title","Reject",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Delete",3,"click",4,"ngIf"],["title","Approve",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-check"],["title","Reject",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-times"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["type","number","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["rows","2",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","info-box",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[1,"info-box"],[1,"fas","fa-info-circle"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Adjustments"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Stock Movement"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Adjustments"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," New Adjustment "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8),_(22,"i",9),s(),o(23,"div",10)(24,"span",11),l(25),s(),o(26,"span",12),l(27,"Total Adjustments"),s()()(),o(28,"div",7)(29,"div",13),_(30,"i",14),s(),o(31,"div",10)(32,"span",11),l(33),s(),o(34,"span",12),l(35,"Increases"),s()()(),o(36,"div",7)(37,"div",15),_(38,"i",16),s(),o(39,"div",10)(40,"span",11),l(41),s(),o(42,"span",12),l(43,"Decreases"),s()()(),o(44,"div",7)(45,"div",17),_(46,"i",18),s(),o(47,"div",10)(48,"span",11),l(49),s(),o(50,"span",12),l(51,"Pending Approval"),s()()()(),o(52,"div",19)(53,"div",20)(54,"table",21)(55,"thead")(56,"tr")(57,"th"),l(58,"Adjustment No."),s(),o(59,"th"),l(60,"Date"),s(),o(61,"th"),l(62,"Item"),s(),o(63,"th"),l(64,"Type"),s(),o(65,"th"),l(66,"Before"),s(),o(67,"th"),l(68,"Adjusted"),s(),o(69,"th"),l(70,"After"),s(),o(71,"th"),l(72,"Reason"),s(),o(73,"th"),l(74,"Status"),s(),o(75,"th"),l(76,"Actions"),s()()(),o(77,"tbody"),x(78,pN,3,0,"tr",22)(79,mN,5,0,"tr",22)(80,_N,29,14,"tr",23),s()()()()(),x(81,IN,66,28,"div",24)),e&2&&(c(25),g(i.adjustments.length),c(8),g(i.getIncreaseCount()),c(8),g(i.getDecreaseCount()),c(8),g(i.getPendingCount()),c(29),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.adjustments.length===0),c(),m("ngForOf",i.adjustments),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,qe,H,Q],styles:[".stock-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};var ke=class n{constructor(){}exportToCSV(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),a=[r.join(","),...t.map(d=>r.map(u=>{let p=d[u],h=p==null?"":String(p);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h}).join(","))].join(`
`);this.downloadFile(a,`${e}.csv`,"text/csv")}exportToExcel(t,e,i){if(!t||t.length===0){alert("No data to export");return}let r=i||Object.keys(t[0]),a='<table border="1">';a+="<tr>"+r.map(u=>`<th style="background:#008080;color:white;padding:8px">${this.formatHeader(u)}</th>`).join("")+"</tr>",t.forEach(u=>{a+="<tr>"+r.map(p=>{let h=u[p];return`<td style="padding:5px">${h??""}</td>`}).join("")+"</tr>"}),a+="</table>";let d=`
      <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head><meta charset="UTF-8"></head>
      <body>${a}</body></html>
    `;this.downloadFile(d,`${e}.xls`,"application/vnd.ms-excel")}exportToPDF(t,e,i,r){if(!t||t.length===0){alert("No data to export");return}let a=r||Object.keys(t[0]),d=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>${i}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #008080; text-align: center; margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #008080; color: white; padding: 10px; text-align: left; }
          td { padding: 8px; border-bottom: 1px solid #ddd; }
          tr:hover { background-color: #f5f5f5; }
          .report-date { text-align: right; color: #666; margin-bottom: 10px; }
        </style>
      </head>
      <body>
        <h1>${i}</h1>
        <div class="report-date">Generated: ${new Date().toLocaleString()}</div>
        <table>
          <thead>
            <tr>${a.map(p=>`<th>${this.formatHeader(p)}</th>`).join("")}</tr>
          </thead>
          <tbody>
            ${t.map(p=>"<tr>"+a.map(h=>{let C=p[h];return`<td>${C??""}</td>`}).join("")+"</tr>").join("")}
          </tbody>
        </table>
      </body>
      </html>
    `,u=window.open("","_blank");u&&(u.document.write(d),u.document.close(),u.focus(),setTimeout(()=>{u.print()},500))}formatHeader(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}downloadFile(t,e,i){let r=new Blob([t],{type:i}),a=window.URL.createObjectURL(r),d=document.createElement("a");d.href=a,d.download=e,d.click(),window.URL.revokeObjectURL(a)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function DN(n,t){if(n&1&&(o(0,"option",26),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function PN(n,t){if(n&1&&(o(0,"option",26),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),g(e.name)}}function TN(n,t){if(n&1&&(o(0,"option",26),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function ON(n,t){if(n&1&&(o(0,"div",11)(1,"div",27)(2,"div",28)(3,"span",29),l(4,"Total Opening:"),s(),o(5,"span",30),l(6),s()(),o(7,"div",28)(8,"span",29),l(9,"Total In:"),s(),o(10,"span",31),l(11),s()(),o(12,"div",28)(13,"span",29),l(14,"Total Out:"),s(),o(15,"span",32),l(16),s()(),o(17,"div",28)(18,"span",29),l(19,"Total Closing:"),s(),o(20,"span",30),l(21),s()()()()),n&2){let e=f();c(6),g(e.totalOpening),c(5),g(e.totalIn),c(5),g(e.totalOut),c(5),g(e.totalClosing)}}function kN(n,t){n&1&&(o(0,"tr")(1,"td",33),_(2,"i",34),o(3,"p"),l(4,"Generate report to view data"),s()()())}function RN(n,t){n&1&&(o(0,"tr")(1,"td",33),_(2,"i",35),o(3,"p"),l(4,"Loading..."),s()()())}function NN(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td",23),l(12),s(),o(13,"td",36),l(14),s(),o(15,"td",37),l(16),s(),o(17,"td",23),l(18),s(),o(19,"td",23),l(20),X(21,"number"),s(),o(22,"td",23),l(23),X(24,"number"),s()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.supplier),c(2),g(e.unit),c(2),g(e.opening),c(2),g(e.stockIn),c(2),g(e.stockOut),c(2),g(e.closing),c(2),g(ee(21,11,e.unitCost,"1.2-2")),c(3),g(ee(24,14,e.value,"1.2-2"))}}var $u=class n{constructor(t,e,i,r,a,d){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.supplierService=r;this.ledgerService=a;this.exportService=d}reportData=[];items=[];groups=[];warehouses=[];suppliers=[];selectedWarehouse="";selectedGroup="";selectedSupplier="";fromDate="";toDate="";loading=!1;totalOpening=0;totalIn=0;totalOut=0;totalClosing=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)}),this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}generateReport(){this.loading=!0,or({items:this.itemService.getAll(),ledger:this.ledgerService.getAll({warehouseId:this.selectedWarehouse?parseInt(this.selectedWarehouse):void 0,startDate:this.fromDate||void 0,endDate:this.toDate||void 0})}).subscribe({next:({items:t,ledger:e})=>{let i=t;this.selectedGroup&&(i=i.filter(a=>a.group?.name===this.selectedGroup)),this.selectedSupplier&&(i=i.filter(a=>a.supplier?.name===this.selectedSupplier));let r=new Map;e.forEach(a=>{let d=a.item?.id;if(d){r.has(d)||r.set(d,{stockIn:0,stockOut:0});let u=r.get(d);u.stockIn+=a.quantityIn||0,u.stockOut+=a.quantityOut||0}}),this.reportData=i.map(a=>{let d=r.get(a.id)||{stockIn:0,stockOut:0},u=a.currentStock||0,p=u-d.stockIn+d.stockOut;return{code:a.code,name:a.name,group:a.group?.name||"",unit:a.unitOfMeasure?.name||"",supplier:a.supplier?.name||"",opening:Math.max(0,p),stockIn:d.stockIn,stockOut:d.stockOut,closing:u,unitCost:a.unitCost||0,value:u*(a.unitCost||0)}}),this.calculateTotals(),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}calculateTotals(){this.totalOpening=this.reportData.reduce((t,e)=>t+e.opening,0),this.totalIn=this.reportData.reduce((t,e)=>t+e.stockIn,0),this.totalOut=this.reportData.reduce((t,e)=>t+e.stockOut,0),this.totalClosing=this.reportData.reduce((t,e)=>t+e.closing,0)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-summary-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-summary-report","Stock Summary Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-summary-report")}static \u0275fac=function(e){return new(e||n)(I(Pe),I(en),I(Ge),I(Nt),I(ci),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-stock-summary-report"]],standalone:!1,decls:92,vars:17,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","11",1,"empty-state"],[1,"fas","fa-chart-bar"],[1,"fas","fa-spinner","fa-spin"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Summary Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Stock Summary"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedGroup,a)||(i.selectedGroup=a),a}),o(32,"option",15),l(33,"All Groups"),s(),x(34,DN,2,2,"option",16),s()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),s(),o(38,"select",14),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(39,"option",15),l(40,"All Warehouses"),s(),x(41,PN,2,2,"option",16),s()(),o(42,"div",13)(43,"label"),l(44,"Supplier"),s(),o(45,"select",14),E("ngModelChange",function(a){return M(i.selectedSupplier,a)||(i.selectedSupplier=a),a}),o(46,"option",15),l(47,"All Suppliers"),s(),x(48,TN,2,2,"option",16),s()(),o(49,"div",13)(50,"label"),l(51,"From Date"),s(),o(52,"input",17),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(53,"div",13)(54,"label"),l(55,"To Date"),s(),o(56,"input",17),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(57,"button",18),b("click",function(){return i.generateReport()}),_(58,"i",19),l(59),s()()(),x(60,ON,22,4,"div",20),o(61,"div",11)(62,"div",21)(63,"table",22)(64,"thead")(65,"tr")(66,"th"),l(67,"Item Code"),s(),o(68,"th"),l(69,"Item Name"),s(),o(70,"th"),l(71,"Group"),s(),o(72,"th"),l(73,"Supplier"),s(),o(74,"th"),l(75,"Unit"),s(),o(76,"th",23),l(77,"Opening"),s(),o(78,"th",23),l(79,"In"),s(),o(80,"th",23),l(81,"Out"),s(),o(82,"th",23),l(83,"Closing"),s(),o(84,"th",23),l(85,"Unit Cost"),s(),o(86,"th",23),l(87,"Value"),s()()(),o(88,"tbody"),x(89,kN,5,0,"tr",24)(90,RN,5,0,"tr",24)(91,NN,25,17,"tr",25),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),S("ngModel",i.selectedSupplier),c(3),m("ngForOf",i.suppliers),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(29),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Y,Z,$,K,q,H,Q,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function AN(n,t){if(n&1&&(o(0,"option",31),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function FN(n,t){if(n&1&&(o(0,"option",31),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),g(e.name)}}function LN(n,t){if(n&1&&(o(0,"div",11)(1,"div",32)(2,"div",33)(3,"span",34),l(4,"Total Items:"),s(),o(5,"span",35),l(6),s()(),o(7,"div",33)(8,"span",34),l(9,"Valuation Method:"),s(),o(10,"span",35),l(11),s()(),o(12,"div",36)(13,"span",34),l(14,"Total Inventory Value:"),s(),o(15,"span",35),l(16),X(17,"number"),s()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(e.getValuationMethodDisplay()),c(5),g(ee(17,3,e.totalValue,"1.2-2"))}}function VN(n,t){n&1&&(o(0,"tr")(1,"td",37),_(2,"i",38),o(3,"p"),l(4,"Generate report to view inventory valuation"),s()()())}function jN(n,t){n&1&&(o(0,"tr")(1,"td",37),_(2,"i",39),o(3,"p"),l(4,"Loading..."),s()()())}function BN(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td",28),l(10),X(11,"number"),s(),o(12,"td",28),l(13),X(14,"number"),s(),o(15,"td",28),l(16),X(17,"number"),s()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.unit),c(2),g(ee(11,7,e.quantity,"1.0-2")),c(3),g(ee(14,10,e.unitCost,"1.2-2")),c(3),g(ee(17,13,e.totalValue,"1.2-2"))}}function WN(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",40)(2,"td",41)(3,"strong"),l(4,"Grand Total:"),s()(),o(5,"td",28)(6,"strong"),l(7),X(8,"number"),s()()()()),n&2){let e=f();c(7),g(ee(8,1,e.totalValue,"1.2-2"))}}var Qu=class n{constructor(t,e,i,r,a){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.settingsService=r;this.exportService=a}reportData=[];items=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";totalValue=0;loading=!1;valuationMethod="FIFO";asOfDate="";ngOnInit(){this.loadFilters(),this.loadValuationMethod()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}loadValuationMethod(){this.settingsService.getGeneralSettings().subscribe({next:t=>{this.valuationMethod=t.valuationMethod||"FIFO"},error:t=>{console.error("Error loading valuation method",t),this.valuationMethod="FIFO"}})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=t;this.selectedGroup&&(e=e.filter(i=>i.group?.name===this.selectedGroup)),this.reportData=e.map(i=>{let r=i.currentStock||0,a=i.unitCost||0,d=r*a;return{code:i.code,name:i.name,group:i.group?.name||"",unit:i.unitOfMeasure?.name||"",quantity:r,unitCost:a,totalValue:d,valuationMethod:this.getValuationMethodDisplay()}}),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}getValuationMethodDisplay(){return{FIFO:"First In, First Out",LIFO:"Last In, First Out",WEIGHTED_AVERAGE:"Weighted Average"}[this.valuationMethod]||this.valuationMethod}exportToExcel(){this.exportService.exportToExcel(this.reportData,"inventory-valuation-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"inventory-valuation-report",`Inventory Valuation Report (${this.getValuationMethodDisplay()})`)}exportToCSV(){this.exportService.exportToCSV(this.reportData,"inventory-valuation-report")}static \u0275fac=function(e){return new(e||n)(I(Pe),I(en),I(Ge),I(Me),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-inventory-valuation-report"]],standalone:!1,decls:86,vars:16,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",1,"form-control",3,"ngModelChange","ngModel"],["value","FIFO"],["value","LIFO"],["value","WEIGHTED_AVERAGE"],[1,"form-text","text-muted"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"summary-item","highlight"],["colspan","7",1,"empty-state"],[1,"fas","fa-coins"],[1,"fas","fa-spinner","fa-spin"],[1,"total-row"],["colspan","6",1,"text-right"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Inventory Valuation Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Valuation"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedGroup,a)||(i.selectedGroup=a),a}),o(32,"option",15),l(33,"All Groups"),s(),x(34,AN,2,2,"option",16),s()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),s(),o(38,"select",14),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(39,"option",15),l(40,"All Warehouses"),s(),x(41,FN,2,2,"option",16),s()(),o(42,"div",13)(43,"label"),l(44,"As of Date"),s(),o(45,"input",17),E("ngModelChange",function(a){return M(i.asOfDate,a)||(i.asOfDate=a),a}),s()(),o(46,"div",13)(47,"label"),l(48,"Valuation Method"),s(),o(49,"select",18),E("ngModelChange",function(a){return M(i.valuationMethod,a)||(i.valuationMethod=a),a}),o(50,"option",19),l(51,"FIFO (First In, First Out)"),s(),o(52,"option",20),l(53,"LIFO (Last In, First Out)"),s(),o(54,"option",21),l(55,"Weighted Average"),s()(),o(56,"small",22),l(57,"Set in General Settings"),s()(),o(58,"button",23),b("click",function(){return i.generateReport()}),_(59,"i",24),l(60),s()()(),x(61,LN,18,6,"div",25),o(62,"div",11)(63,"div",26)(64,"table",27)(65,"thead")(66,"tr")(67,"th"),l(68,"Item Code"),s(),o(69,"th"),l(70,"Item Name"),s(),o(71,"th"),l(72,"Group"),s(),o(73,"th"),l(74,"Unit"),s(),o(75,"th",28),l(76,"Quantity"),s(),o(77,"th",28),l(78,"Unit Cost"),s(),o(79,"th",28),l(80,"Total Value"),s()()(),o(81,"tbody"),x(82,VN,5,0,"tr",29)(83,jN,5,0,"tr",29)(84,BN,18,16,"tr",30),s(),x(85,WN,9,4,"tfoot",29),s()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),S("ngModel",i.asOfDate),c(4),S("ngModel",i.valuationMethod),c(9),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(21),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[V,j,Y,Z,$,K,q,H,Q,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function UN(n,t){if(n&1&&(o(0,"option",28),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),de("",e.name," (",e.code,")")}}function GN(n,t){if(n&1&&(o(0,"option",28),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),g(e.name)}}function HN(n,t){if(n&1&&(o(0,"div",11)(1,"div",29)(2,"div",30)(3,"span",31),l(4,"Item:"),s(),o(5,"span",32),l(6),s()(),o(7,"div",30)(8,"span",31),l(9,"Total In:"),s(),o(10,"span",33),l(11),s()(),o(12,"div",30)(13,"span",31),l(14,"Total Out:"),s(),o(15,"span",34),l(16),s()(),o(17,"div",30)(18,"span",31),l(19,"Net Movement:"),s(),o(20,"span",32),l(21),s()()()()),n&2){let e=f();c(6),g(e.getSelectedItemName()),c(5),g(e.totalIn),c(5),g(e.totalOut),c(4),ne("text-success",e.totalIn-e.totalOut>=0)("text-danger",e.totalIn-e.totalOut<0),c(),T(" ",e.totalIn-e.totalOut," ")}}function qN(n,t){n&1&&(o(0,"tr")(1,"td",35),_(2,"i",36),o(3,"p"),l(4,"Select an item and generate report to view movements"),s()()())}function zN(n,t){n&1&&(o(0,"tr")(1,"td",35),_(2,"i",37),o(3,"p"),l(4,"Loading..."),s()()())}function $N(n,t){if(n&1){let e=O();o(0,"tr",38),b("click",function(){let r=v(e).$implicit,a=f();return y(a.drillDown(r))}),o(1,"td"),l(2),X(3,"date"),s(),o(4,"td",39),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td",40),l(11),s(),o(12,"td",41),l(13),s(),o(14,"td",25),l(15),s(),o(16,"td",25),l(17),X(18,"number"),s(),o(19,"td",25),l(20),X(21,"number"),s()()}if(n&2){let e=t.$implicit;c(2),g(ee(3,9,e.date,"shortDate")),c(3),g(e.documentNo),c(2),g(e.transactionType),c(2),g(e.warehouse),c(2),g(e.quantityIn>0?e.quantityIn:""),c(2),g(e.quantityOut>0?e.quantityOut:""),c(2),g(e.balance),c(2),g(ee(18,12,e.rate,"1.2-2")),c(3),g(ee(21,15,e.value,"1.2-2"))}}var Ku=class n{constructor(t,e,i,r,a){this.itemService=t;this.warehouseService=e;this.ledgerService=i;this.exportService=r;this.router=a}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;totalIn=0;totalOut=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){if(!this.selectedItem){alert("Please select an item");return}this.loading=!0;let t={itemId:parseInt(this.selectedItem)};this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:this.formatTransactionType(i.transactionType),warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0})),this.totalIn=this.reportData.reduce((i,r)=>i+r.quantityIn,0),this.totalOut=this.reportData.reduce((i,r)=>i+r.quantityOut,0),this.loading=!1},error:e=>{console.error("Error generating report",e),this.loading=!1}})}formatTransactionType(t){return{GRN:"Goods Receipt",GOODS_RECEIPT:"Goods Receipt",ISSUE:"Goods Issue",GOODS_ISSUE:"Goods Issue",TRANSFER:"Stock Transfer",STOCK_TRANSFER:"Stock Transfer",ADJUSTMENT:"Stock Adjustment",STOCK_ADJUSTMENT:"Stock Adjustment"}[t]||t}drillDown(t){let e=t.transactionType,i="";e.includes("Receipt")?i="/app/stock-movement/goods-receipt":e.includes("Issue")?i="/app/stock-movement/goods-issue":e.includes("Transfer")?i="/app/stock-movement/stock-transfer":e.includes("Adjustment")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}getSelectedItemName(){let t=this.items.find(e=>e.id?.toString()===this.selectedItem);return t?`${t.code} - ${t.name}`:""}exportToExcel(){this.exportService.exportToExcel(this.reportData,"item-movement-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"item-movement-report","Item Movement Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"item-movement-report")}static \u0275fac=function(e){return new(e||n)(I(Pe),I(Ge),I(ci),I(ke),I(pe))};static \u0275cmp=F({type:n,selectors:[["app-item-movement-report"]],standalone:!1,decls:83,vars:15,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-chart-line"],[1,"fas","fa-spinner","fa-spin"],[1,"clickable-row",3,"click"],[1,"link-text"],[1,"text-right","text-success"],[1,"text-right","text-danger"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Item Movement Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Item Movement"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Item "),o(31,"span",14),l(32,"*"),s()(),o(33,"select",15),E("ngModelChange",function(a){return M(i.selectedItem,a)||(i.selectedItem=a),a}),o(34,"option",16),l(35,"Select Item"),s(),x(36,UN,2,3,"option",17),s()(),o(37,"div",13)(38,"label"),l(39,"Warehouse"),s(),o(40,"select",18),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(41,"option",16),l(42,"All Warehouses"),s(),x(43,GN,2,2,"option",17),s()(),o(44,"div",13)(45,"label"),l(46,"From Date"),s(),o(47,"input",19),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(48,"div",13)(49,"label"),l(50,"To Date"),s(),o(51,"input",19),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(52,"button",20),b("click",function(){return i.generateReport()}),_(53,"i",21),l(54),s()()(),x(55,HN,22,8,"div",22),o(56,"div",11)(57,"div",23)(58,"table",24)(59,"thead")(60,"tr")(61,"th"),l(62,"Date"),s(),o(63,"th"),l(64,"Document No"),s(),o(65,"th"),l(66,"Type"),s(),o(67,"th"),l(68,"Warehouse"),s(),o(69,"th",25),l(70,"In"),s(),o(71,"th",25),l(72,"Out"),s(),o(73,"th",25),l(74,"Balance"),s(),o(75,"th",25),l(76,"Rate"),s(),o(77,"th",25),l(78,"Value"),s()()(),o(79,"tbody"),x(80,qN,5,0,"tr",26)(81,zN,5,0,"tr",26)(82,$N,22,18,"tr",27),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(10),S("ngModel",i.selectedItem),c(3),m("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading||!i.selectedItem),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Y,Z,$,K,q,ln,H,Q,De,wr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function QN(n,t){if(n&1&&(o(0,"option",25),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),de("",e.name," (",e.code,")")}}function KN(n,t){if(n&1&&(o(0,"option",25),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),g(e.name)}}function YN(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",27),o(3,"p"),l(4,"Generate report to view data"),s()()())}function ZN(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",28),o(3,"p"),l(4,"Loading..."),s()()())}function JN(n,t){if(n&1){let e=O();o(0,"tr",29),b("click",function(){let r=v(e).$implicit,a=f();return y(a.drillDown(r))}),o(1,"td"),l(2),X(3,"date"),s(),o(4,"td",30),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td",22),l(13),s(),o(14,"td",22),l(15),s(),o(16,"td",22),l(17),s(),o(18,"td",22),l(19),X(20,"number"),s(),o(21,"td",22),l(22),X(23,"number"),s()()}if(n&2){let e=t.$implicit;c(2),g(ee(3,11,e.date,"shortDate")),c(3),g(e.documentNo),c(2),de("",e.itemCode," - ",e.itemName),c(2),g(e.transactionType),c(2),g(e.warehouse),c(2),g(e.quantityIn),c(2),g(e.quantityOut),c(2),g(e.balance),c(2),g(ee(20,14,e.rate,"1.2-2")),c(3),g(ee(23,17,e.value,"1.2-2"))}}var Yu=class n{constructor(t,e,i,r,a){this.ledgerService=t;this.itemService=e;this.warehouseService=i;this.exportService=r;this.router=a}reportData=[];items=[];warehouses=[];selectedItem="";selectedWarehouse="";fromDate="";toDate="";loading=!1;ngOnInit(){this.loadFilters()}loadFilters(){this.itemService.getAll().subscribe({next:t=>this.items=t,error:t=>console.error("Error loading items",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0;let t={};this.selectedItem&&(t.itemId=parseInt(this.selectedItem)),this.selectedWarehouse&&(t.warehouseId=parseInt(this.selectedWarehouse)),this.fromDate&&(t.startDate=this.fromDate),this.toDate&&(t.endDate=this.toDate),this.ledgerService.getAll(t).subscribe({next:e=>{this.reportData=e.map(i=>({id:i.id,date:i.transactionDate,documentNo:i.referenceNumber,transactionType:i.transactionType,itemCode:i.item?.code||"",itemName:i.item?.name||"",warehouse:i.warehouse?.name||"",quantityIn:i.quantityIn||0,quantityOut:i.quantityOut||0,balance:i.balanceQuantity||0,rate:i.unitValue||0,value:i.totalValue||0,remarks:i.remarks||""})),this.loading=!1},error:e=>{console.error("Error generating report",e),this.loading=!1}})}drillDown(t){let e=t.transactionType,i="";e==="GRN"||e==="GOODS_RECEIPT"?i="/app/stock-movement/goods-receipt":e==="ISSUE"||e==="GOODS_ISSUE"?i="/app/stock-movement/goods-issue":e==="TRANSFER"||e==="STOCK_TRANSFER"?i="/app/stock-movement/stock-transfer":(e==="ADJUSTMENT"||e==="STOCK_ADJUSTMENT")&&(i="/app/stock-movement/stock-adjustments"),i&&this.router.navigate([i],{queryParams:{referenceNumber:t.documentNo}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-ledger-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-ledger-report","Stock Ledger Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-ledger-report")}static \u0275fac=function(e){return new(e||n)(I(ci),I(Pe),I(Ge),I(ke),I(pe))};static \u0275cmp=F({type:n,selectors:[["app-stock-ledger-report"]],standalone:!1,decls:82,vars:14,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],[3,"value"],["colspan","10",1,"empty-state"],[1,"fas","fa-book-open"],[1,"fas","fa-spinner","fa-spin"],[1,"clickable-row",3,"click"],[1,"link-text"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Ledger Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Stock Ledger"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Item"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedItem,a)||(i.selectedItem=a),a}),o(32,"option",15),l(33,"All Items"),s(),x(34,QN,2,3,"option",16),s()(),o(35,"div",13)(36,"label"),l(37,"Warehouse"),s(),o(38,"select",14),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(39,"option",15),l(40,"All Warehouses"),s(),x(41,KN,2,2,"option",16),s()(),o(42,"div",13)(43,"label"),l(44,"From Date"),s(),o(45,"input",17),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(46,"div",13)(47,"label"),l(48,"To Date"),s(),o(49,"input",17),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(50,"button",18),b("click",function(){return i.generateReport()}),_(51,"i",19),l(52),s()()(),o(53,"div",11)(54,"div",20)(55,"table",21)(56,"thead")(57,"tr")(58,"th"),l(59,"Date"),s(),o(60,"th"),l(61,"Document No"),s(),o(62,"th"),l(63,"Item"),s(),o(64,"th"),l(65,"Type"),s(),o(66,"th"),l(67,"Warehouse"),s(),o(68,"th",22),l(69,"In"),s(),o(70,"th",22),l(71,"Out"),s(),o(72,"th",22),l(73,"Balance"),s(),o(74,"th",22),l(75,"Rate"),s(),o(76,"th",22),l(77,"Value"),s()()(),o(78,"tbody"),x(79,YN,5,0,"tr",23)(80,ZN,5,0,"tr",23)(81,JN,24,20,"tr",24),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedItem),c(3),m("ngForOf",i.items),c(4),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(27),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Y,Z,$,K,q,H,Q,De,wr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function XN(n,t){if(n&1&&(o(0,"option",24),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function eA(n,t){if(n&1&&(o(0,"div",11)(1,"div",25)(2,"div",26)(3,"span",27),l(4,"Total Groups:"),s(),o(5,"span",28),l(6),s()(),o(7,"div",26)(8,"span",27),l(9,"Total Quantity:"),s(),o(10,"span",28),l(11),X(12,"number"),s()(),o(13,"div",26)(14,"span",27),l(15,"Total Value:"),s(),o(16,"span",28),l(17),X(18,"number"),s()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(ee(12,3,e.totalQuantity,"1.0-2")),c(6),g(ee(18,6,e.totalValue,"1.2-2"))}}function tA(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),s()()())}function nA(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",31),o(3,"p"),l(4,"Loading..."),s()()())}function iA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),X(7,"number"),s(),o(8,"td"),l(9),X(10,"number"),s()()),n&2){let e=t.$implicit;c(2),g(e.group),c(2),g(e.itemsCount),c(2),g(ee(7,4,e.totalQuantity,"1.0-2")),c(3),g(ee(10,7,e.totalValue,"1.2-2"))}}var Zu=class n{constructor(t,e,i){this.itemGroupService=t;this.itemService=e;this.exportService=i}reportData=[];groups=[];selectedGroup="";loading=!1;totalQuantity=0;totalValue=0;ngOnInit(){this.loadGroups()}loadGroups(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Map;t.forEach(i=>{let r=i.group?.name||"Uncategorized",a=e.get(r)||{count:0,quantity:0,value:0};a.count++,a.quantity+=i.currentStock||0,a.value+=(i.currentStock||0)*(i.unitCost||0),e.set(r,a)}),this.reportData=Array.from(e.entries()).map(([i,r])=>({group:i,itemsCount:r.count,totalQuantity:r.quantity,totalValue:r.value})),this.totalQuantity=this.reportData.reduce((i,r)=>i+r.totalQuantity,0),this.totalValue=this.reportData.reduce((i,r)=>i+r.totalValue,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"group-wise-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"group-wise-stock-report","Group-wise Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"group-wise-stock-report")}static \u0275fac=function(e){return new(e||n)(I(en),I(Pe),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-group-wise-stock-report"]],standalone:!1,decls:56,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","4",1,"empty-state"],[1,"fas","fa-sitemap"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Group-wise Stock Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Group-wise"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Group"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedGroup,a)||(i.selectedGroup=a),a}),o(32,"option",15),l(33,"All Groups"),s(),x(34,XN,2,2,"option",16),s()(),o(35,"button",17),b("click",function(){return i.generateReport()}),_(36,"i",18),l(37),s()()(),x(38,eA,19,9,"div",19),o(39,"div",11)(40,"div",20)(41,"table",21)(42,"thead")(43,"tr")(44,"th"),l(45,"Group"),s(),o(46,"th"),l(47,"Items Count"),s(),o(48,"th"),l(49,"Total Quantity"),s(),o(50,"th"),l(51,"Total Value"),s()()(),o(52,"tbody"),x(53,tA,5,0,"tr",22)(54,nA,5,0,"tr",22)(55,iA,11,10,"tr",23),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(15),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Y,Z,K,q,H,Q,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function rA(n,t){if(n&1&&(o(0,"option",24),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function oA(n,t){if(n&1&&(o(0,"div",11)(1,"div",25)(2,"div",26)(3,"span",27),l(4,"Total Items:"),s(),o(5,"span",28),l(6),s()(),o(7,"div",26)(8,"span",27),l(9,"Total Value:"),s(),o(10,"span",28),l(11),X(12,"number"),s()()()()),n&2){let e=f();c(6),g(e.reportData.length),c(5),g(ee(12,2,e.totalValue,"1.2-2"))}}function aA(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),s()()())}function sA(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",31),o(3,"p"),l(4,"Loading..."),s()()())}function lA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),X(11,"number"),s(),o(12,"td"),l(13),X(14,"number"),s()()),n&2){let e=t.$implicit;c(2),g(e.warehouse),c(2),g(e.bin),c(2),g(e.itemCode),c(2),g(e.item),c(2),g(ee(11,6,e.quantity,"1.0-2")),c(3),g(ee(14,9,e.value,"1.2-2"))}}var Ju=class n{constructor(t,e,i){this.warehouseService=t;this.itemService=e;this.exportService=i}reportData=[];warehouses=[];selectedWarehouse="";loading=!1;totalValue=0;ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({warehouse:e.warehouse?.name||"Default",bin:e.bin?.code||"-",item:e.name,itemCode:e.code,quantity:e.currentStock||0,value:(e.currentStock||0)*(e.unitCost||0)})),this.selectedWarehouse&&(this.reportData=this.reportData.filter(e=>e.warehouse===this.selectedWarehouse)),this.totalValue=this.reportData.reduce((e,i)=>e+i.value,0),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"warehouse-stock-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"warehouse-stock-report","Warehouse Stock Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"warehouse-stock-report")}static \u0275fac=function(e){return new(e||n)(I(Ge),I(Pe),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-warehouse-stock-report"]],standalone:!1,decls:60,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],["colspan","6",1,"empty-state"],[1,"fas","fa-warehouse"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Warehouse Stock Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Warehouse Stock"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Warehouse"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(32,"option",15),l(33,"All Warehouses"),s(),x(34,rA,2,2,"option",16),s()(),o(35,"button",17),b("click",function(){return i.generateReport()}),_(36,"i",18),l(37),s()()(),x(38,oA,13,5,"div",19),o(39,"div",11)(40,"div",20)(41,"table",21)(42,"thead")(43,"tr")(44,"th"),l(45,"Warehouse"),s(),o(46,"th"),l(47,"Bin"),s(),o(48,"th"),l(49,"Item Code"),s(),o(50,"th"),l(51,"Item Name"),s(),o(52,"th"),l(53,"Quantity"),s(),o(54,"th"),l(55,"Value"),s()()(),o(56,"tbody"),x(57,aA,5,0,"tr",22)(58,sA,5,0,"tr",22)(59,lA,15,12,"tr",23),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(19),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Y,Z,K,q,H,Q,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function cA(n,t){n&1&&(o(0,"tr")(1,"td",19),_(2,"i",20),o(3,"p"),l(4,"No items below reorder level"),s()()())}function dA(n,t){n&1&&(o(0,"tr")(1,"td",19),_(2,"i",21),o(3,"p"),l(4,"Loading..."),s()()())}function uA(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td"),l(14),s(),o(15,"td")(16,"span",22),l(17),s()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.unit),c(2),g(e.currentStock),c(2),g(e.reorderLevel),c(2),g(e.shortage),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}var Xu=class n{constructor(t,e){this.itemService=t;this.exportService=e}reportData=[];loading=!1;ngOnInit(){this.generateReport()}generateReport(){this.loading=!0,this.itemService.getLowStock().subscribe({next:t=>{this.reportData=t.map(e=>({code:e.code,name:e.name,group:e.group?.name||"",unit:e.unitOfMeasure?.name||"",currentStock:e.currentStock||0,reorderLevel:e.reorderLevel||0,shortage:(e.reorderLevel||0)-(e.currentStock||0),status:(e.currentStock||0)<=0?"Out of Stock":(e.currentStock||0)<=(e.reorderLevel||0)/2?"Critical":"Low Stock"})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"reorder-level-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"reorder-level-report","Reorder Level Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"reorder-level-report")}getStatusClass(t){return t==="Out of Stock"?"badge-danger":t==="Critical"?"badge-warning":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Pe),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-reorder-level"]],standalone:!1,decls:56,vars:8,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-check-circle"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Reorder Level Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Reorder Level"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"button",13),b("click",function(){return i.generateReport()}),_(29,"i",14),l(30),s()()(),o(31,"div",11)(32,"div",15)(33,"table",16)(34,"thead")(35,"tr")(36,"th"),l(37,"Item Code"),s(),o(38,"th"),l(39,"Item Name"),s(),o(40,"th"),l(41,"Group"),s(),o(42,"th"),l(43,"Unit"),s(),o(44,"th"),l(45,"Current Stock"),s(),o(46,"th"),l(47,"Reorder Level"),s(),o(48,"th"),l(49,"Shortage"),s(),o(50,"th"),l(51,"Status"),s()()(),o(52,"tbody"),x(53,cA,5,0,"tr",17)(54,dA,5,0,"tr",17)(55,uA,18,9,"tr",18),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(5),m("disabled",i.loading),c(2),T(" ",i.loading?"Refreshing...":"Refresh"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[se,V,j,Q],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}"]})};function pA(n,t){if(n&1&&(o(0,"option",15),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function mA(n,t){if(n&1&&(o(0,"option",15),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function fA(n,t){if(n&1&&(o(0,"div",11)(1,"div",26)(2,"div",27)(3,"span",28),l(4,"Slow-Moving Items:"),s(),o(5,"span",29),l(6),s()(),o(7,"div",30)(8,"span",28),l(9,"Total Value at Risk:"),s(),o(10,"span",31),l(11),X(12,"number"),s()()()()),n&2){let e=f();c(6),g(e.totalItems),c(5),g(ee(12,2,e.totalValue,"1.2-2"))}}function gA(n,t){n&1&&(o(0,"tr")(1,"td",32),_(2,"i",33),o(3,"p"),l(4,"Generate report to view slow-moving items"),s()()())}function hA(n,t){n&1&&(o(0,"tr")(1,"td",32),_(2,"i",34),o(3,"p"),l(4,"Loading..."),s()()())}function _A(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td",23),l(12),s(),o(13,"td",23),l(14),X(15,"number"),s(),o(16,"td",23),l(17),X(18,"number"),s(),o(19,"td",23),l(20),X(21,"number"),s()()),n&2){let e=t.$implicit;c(2),g(e.code),c(2),g(e.name),c(2),g(e.group),c(2),g(e.warehouse),c(2),g(e.lastMovement),c(),ne("text-danger",e.daysIdle!=="N/A"&&e.daysIdle>90),c(),g(e.daysIdle),c(2),g(ee(15,11,e.currentStock,"1.0-2")),c(3),g(ee(18,14,e.unitCost,"1.2-2")),c(3),g(ee(21,17,e.value,"1.2-2"))}}function vA(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",35)(2,"td",36)(3,"strong"),l(4,"Total Value at Risk:"),s()(),o(5,"td",23)(6,"strong"),l(7),X(8,"number"),s()()()()),n&2){let e=f();c(7),g(ee(8,1,e.totalValue,"1.2-2"))}}var ep=class n{constructor(t,e,i,r){this.itemService=t;this.itemGroupService=e;this.warehouseService=i;this.exportService=r}reportData=[];groups=[];warehouses=[];selectedGroup="";selectedWarehouse="";daysWithoutMovement=30;loading=!1;totalValue=0;totalItems=0;ngOnInit(){this.loadFilters()}loadFilters(){this.itemGroupService.getAll().subscribe({next:t=>this.groups=t,error:t=>console.error("Error loading groups",t)}),this.warehouseService.getAllWarehouses().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error loading warehouses",t)})}generateReport(){this.loading=!0,this.itemService.getAll().subscribe({next:t=>{let e=new Date;e.setDate(e.getDate()-this.daysWithoutMovement);let i=t.filter(r=>{let a=r.lastMovementDate?new Date(r.lastMovementDate):null;return!a||a<e});this.selectedGroup&&(i=i.filter(r=>r.group?.name===this.selectedGroup)),this.selectedWarehouse&&(i=i.filter(r=>r.warehouse?.name===this.selectedWarehouse)),this.reportData=i.map(r=>({code:r.code,name:r.name,group:r.group?.name||"",warehouse:r.warehouse?.name||"Default",lastMovement:r.lastMovementDate?new Date(r.lastMovementDate).toLocaleDateString():"Never",daysIdle:r.lastMovementDate?Math.floor((new Date().getTime()-new Date(r.lastMovementDate).getTime())/(1e3*60*60*24)):"N/A",currentStock:r.currentStock||0,unitCost:r.unitCost||0,value:(r.currentStock||0)*(r.unitCost||0)})),this.totalValue=this.reportData.reduce((r,a)=>r+a.value,0),this.totalItems=this.reportData.length,this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"slow-moving-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"slow-moving-items-report","Slow / Non-Moving Items Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"slow-moving-items-report")}static \u0275fac=function(e){return new(e||n)(I(Pe),I(en),I(Ge),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-slow-moving-items-report"]],standalone:!1,decls:88,vars:20,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value","text-warning"],[1,"summary-item","highlight"],[1,"value","text-danger"],["colspan","9",1,"empty-state"],[1,"fas","fa-hourglass-half"],[1,"fas","fa-spinner","fa-spin"],[1,"total-row"],["colspan","8",1,"text-right"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Slow / Non-Moving Items Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Slow Moving"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Days Without Movement"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.daysWithoutMovement,a)||(i.daysWithoutMovement=a),a}),o(32,"option",15),l(33,"30 Days"),s(),o(34,"option",15),l(35,"60 Days"),s(),o(36,"option",15),l(37,"90 Days"),s(),o(38,"option",15),l(39,"180 Days"),s(),o(40,"option",15),l(41,"1 Year"),s()()(),o(42,"div",13)(43,"label"),l(44,"Group"),s(),o(45,"select",14),E("ngModelChange",function(a){return M(i.selectedGroup,a)||(i.selectedGroup=a),a}),o(46,"option",16),l(47,"All Groups"),s(),x(48,pA,2,2,"option",17),s()(),o(49,"div",13)(50,"label"),l(51,"Warehouse"),s(),o(52,"select",14),E("ngModelChange",function(a){return M(i.selectedWarehouse,a)||(i.selectedWarehouse=a),a}),o(53,"option",16),l(54,"All Warehouses"),s(),x(55,mA,2,2,"option",17),s()(),o(56,"button",18),b("click",function(){return i.generateReport()}),_(57,"i",19),l(58),s()()(),x(59,fA,13,5,"div",20),o(60,"div",11)(61,"div",21)(62,"table",22)(63,"thead")(64,"tr")(65,"th"),l(66,"Item Code"),s(),o(67,"th"),l(68,"Item Name"),s(),o(69,"th"),l(70,"Group"),s(),o(71,"th"),l(72,"Warehouse"),s(),o(73,"th"),l(74,"Last Movement"),s(),o(75,"th",23),l(76,"Days Idle"),s(),o(77,"th",23),l(78,"Current Stock"),s(),o(79,"th",23),l(80,"Unit Cost"),s(),o(81,"th",23),l(82,"Value"),s()()(),o(83,"tbody"),x(84,gA,5,0,"tr",24)(85,hA,5,0,"tr",24)(86,_A,22,20,"tr",25),s(),x(87,vA,9,4,"tfoot",24),s()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.daysWithoutMovement),c(),m("value",30),c(2),m("value",60),c(2),m("value",90),c(2),m("value",180),c(2),m("value",365),c(5),S("ngModel",i.selectedGroup),c(3),m("ngForOf",i.groups),c(4),S("ngModel",i.selectedWarehouse),c(3),m("ngForOf",i.warehouses),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[V,j,Y,Z,K,q,H,Q,De],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};function yA(n,t){if(n&1&&(o(0,"option",27),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function bA(n,t){if(n&1&&(o(0,"div",11)(1,"div",28)(2,"div",29)(3,"span",30),l(4,"Total PO Qty:"),s(),o(5,"span",31),l(6),s()(),o(7,"div",29)(8,"span",30),l(9,"Total GRN Qty:"),s(),o(10,"span",32),l(11),s()(),o(12,"div",29)(13,"span",30),l(14,"Pending Qty:"),s(),o(15,"span",33),l(16),s()(),o(17,"div",29)(18,"span",30),l(19,"Fulfillment Rate:"),s(),o(20,"span",31),l(21),X(22,"number"),s()()()()),n&2){let e=f();c(6),g(e.totalPOQty),c(5),g(e.totalGRNQty),c(5),g(e.totalPending),c(4),ne("text-success",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty>=.9)("text-warning",e.totalPOQty>0&&e.totalGRNQty/e.totalPOQty<.9),c(),T(" ",e.totalPOQty>0?ee(22,8,e.totalGRNQty/e.totalPOQty*100,"1.1-1"):0,"% ")}}function CA(n,t){n&1&&(o(0,"tr")(1,"td",34),_(2,"i",35),o(3,"p"),l(4,"Generate report to view purchase vs GRN comparison"),s()()())}function xA(n,t){n&1&&(o(0,"tr")(1,"td",34),_(2,"i",36),o(3,"p"),l(4,"Loading..."),s()()())}function SA(n,t){if(n&1){let e=O();o(0,"tr")(1,"td",37),b("click",function(){let r=v(e).$implicit,a=f();return y(a.drillDownToPO(r))}),l(2),s(),o(3,"td"),l(4),X(5,"date"),s(),o(6,"td"),l(7),s(),o(8,"td",23),l(9),s(),o(10,"td",38),l(11),s(),o(12,"td",23),l(13),s(),o(14,"td",24),l(15),s(),o(16,"td",24)(17,"span",39),l(18),s()(),o(19,"td",24)(20,"button",40),b("click",function(){let r=v(e).$implicit,a=f();return y(a.drillDownToGRN(r))}),_(21,"i",41),s()()()}if(n&2){let e=t.$implicit,i=f();c(2),g(e.poNumber),c(2),g(ee(5,11,e.poDate,"shortDate")),c(3),g(e.supplier),c(2),g(e.poQty),c(2),g(e.grnQty),c(),ne("text-warning",e.pendingQty>0),c(),g(e.pendingQty),c(2),g(e.grnCount),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}function EA(n,t){if(n&1&&(o(0,"tfoot")(1,"tr",42)(2,"td",43)(3,"strong"),l(4,"Totals:"),s()(),o(5,"td",23)(6,"strong"),l(7),s()(),o(8,"td",23)(9,"strong"),l(10),s()(),o(11,"td",23)(12,"strong"),l(13),s()(),_(14,"td",44),s()()),n&2){let e=f();c(7),g(e.totalPOQty),c(3),g(e.totalGRNQty),c(3),g(e.totalPending)}}var tp=class n{constructor(t,e,i,r,a){this.supplierService=t;this.prFulfillmentService=e;this.stockMovementService=i;this.exportService=r;this.router=a}reportData=[];suppliers=[];selectedSupplier="";fromDate="";toDate="";loading=!1;totalPOQty=0;totalGRNQty=0;totalPending=0;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.supplierService.getAll().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}generateReport(){this.loading=!0,or({pos:this.prFulfillmentService.getAllPOs(),grns:this.stockMovementService.getAllGRN()}).subscribe({next:({pos:t,grns:e})=>{let i=new Map;if(e.forEach(r=>{let a=r.referenceNumber||r.grnNumber||"";if(a){i.has(a)||i.set(a,{totalQty:0,grns:[]});let d=i.get(a);d.grns.push(r),d.totalQty+=r.lines?.reduce((u,p)=>u+(p.quantityReceived||p.quantity||0),0)||0}}),this.reportData=t.filter(r=>r.fulfillmentType==="PO").map(r=>{let a=r.referenceNumber||"",d=i.get(a)||{totalQty:0,grns:[]},u=r.items?.reduce((w,P)=>w+(P.quantity||0),0)||0,p=d.totalQty,h=Math.max(0,u-p),C="Pending";return p>=u?C="Complete":p>0&&(C="Partial"),{poNumber:a,poDate:r.createdAt,supplier:r.supplierName||"",poQty:u,grnQty:p,pendingQty:h,status:C,grnCount:d.grns.length}}),this.selectedSupplier&&(this.reportData=this.reportData.filter(r=>r.supplier===this.selectedSupplier)),this.fromDate){let r=new Date(this.fromDate);this.reportData=this.reportData.filter(a=>new Date(a.poDate)>=r)}if(this.toDate){let r=new Date(this.toDate);this.reportData=this.reportData.filter(a=>new Date(a.poDate)<=r)}this.calculateTotals(),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}calculateTotals(){this.totalPOQty=this.reportData.reduce((t,e)=>t+e.poQty,0),this.totalGRNQty=this.reportData.reduce((t,e)=>t+e.grnQty,0),this.totalPending=this.reportData.reduce((t,e)=>t+e.pendingQty,0)}drillDownToPO(t){this.router.navigate(["/app/purchase/pr-fulfillment"],{queryParams:{poNumber:t.poNumber}})}drillDownToGRN(t){this.router.navigate(["/app/stock-movement/goods-receipt"],{queryParams:{poNumber:t.poNumber}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"purchase-vs-grn-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"purchase-vs-grn-report","Purchase vs GRN Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"purchase-vs-grn-report")}getStatusClass(t){return t==="Pending"?"badge-warning":t==="Complete"?"badge-success":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(Nt),I(ft),I(In),I(ke),I(pe))};static \u0275cmp=F({type:n,selectors:[["app-purchase-vs-grn-report"]],standalone:!1,decls:75,vars:14,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],["class","card",4,"ngIf"],[1,"table-container"],[1,"table"],[1,"text-right"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"summary-row"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-warning"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"link-text",3,"click"],[1,"text-right","text-success"],[1,"badge",3,"ngClass"],["title","View GRNs",1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-eye"],[1,"total-row"],["colspan","3",1,"text-right"],["colspan","3"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase vs GRN Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Purchase vs GRN"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Supplier"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedSupplier,a)||(i.selectedSupplier=a),a}),o(32,"option",15),l(33,"All Suppliers"),s(),x(34,yA,2,2,"option",16),s()(),o(35,"div",13)(36,"label"),l(37,"From Date"),s(),o(38,"input",17),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(39,"div",13)(40,"label"),l(41,"To Date"),s(),o(42,"input",17),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(43,"button",18),b("click",function(){return i.generateReport()}),_(44,"i",19),l(45),s()()(),x(46,bA,23,11,"div",20),o(47,"div",11)(48,"div",21)(49,"table",22)(50,"thead")(51,"tr")(52,"th"),l(53,"PO Number"),s(),o(54,"th"),l(55,"PO Date"),s(),o(56,"th"),l(57,"Supplier"),s(),o(58,"th",23),l(59,"PO Qty"),s(),o(60,"th",23),l(61,"GRN Qty"),s(),o(62,"th",23),l(63,"Pending"),s(),o(64,"th",24),l(65,"GRNs"),s(),o(66,"th",24),l(67,"Status"),s(),o(68,"th",24),l(69,"Actions"),s()()(),o(70,"tbody"),x(71,CA,5,0,"tr",25)(72,xA,5,0,"tr",25)(73,SA,22,14,"tr",26),s(),x(74,EA,15,3,"tfoot",25),s()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedSupplier),c(3),m("ngForOf",i.suppliers),c(4),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(),m("ngIf",i.reportData.length>0),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData),c(),m("ngIf",i.reportData.length>0))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q,De,wr],styles:[".report-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:180px;margin-bottom:0}.filter-btn[_ngcontent-%COMP%]{height:46px}"]})};var At=class n{constructor(t){this.http=t}baseUrl="/api/purchase/requisitions";requisitionsSubject=new Ke([]);requisitions$=this.requisitionsSubject.asObservable();getAll(){return this.http.get(this.baseUrl).pipe(rt(t=>this.requisitionsSubject.next(t)))}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}submit(t){return this.http.post(`${this.baseUrl}/${t}/submit`,{})}approve(t){return this.http.post(`${this.baseUrl}/${t}/approve`,{})}reject(t,e){return this.http.post(`${this.baseUrl}/${t}/reject`,{reason:e})}getByStatus(t){return this.requisitions$.pipe(Ee(e=>e.filter(i=>i.status===t)))}generatePRNumber(){let e=new Date,i=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0"),a=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`PR-${i}${r}${a}`}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function MA(n,t){if(n&1){let e=O();o(0,"span",20),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.currentSort=r.value)}),l(1),s()}if(n&2){let e=t.$implicit,i=f(2);ne("active",i.currentSort===e.value),c(),T(" ",e.label," ")}}function wA(n,t){if(n&1&&(o(0,"div",18)(1,"span"),l(2,"Sort By:"),s(),x(3,MA,2,3,"span",19),s()),n&2){let e=f();c(3),m("ngForOf",e.sortOptions)}}function IA(n,t){if(n&1){let e=O();o(0,"div",36),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",39),l(5),s()(),o(6,"div",40),l(7),s(),o(8,"div",41)(9,"div",42)(10,"span",43),l(11,"Date:"),s(),o(12,"span",44),l(13),s()(),o(14,"div",42)(15,"span",43),l(16,"Required:"),s(),o(17,"span",44),l(18),s()()(),o(19,"div",45)(20,"span",46),_(21,"i",47),l(22),s(),o(23,"div",48)(24,"button",49),b("click",function(r){let a=v(e).$implicit;return f(2).printPR(a),y(r.stopPropagation())}),_(25,"i",50),s(),o(26,"button",51),b("click",function(r){let a=v(e).$implicit;return f(2).openEditModal(a),y(r.stopPropagation())}),_(27,"i",52),s(),o(28,"button",53),b("click",function(r){let a=v(e).$implicit;return f(2).deletePR(a),y(r.stopPropagation())}),_(29,"i",54),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(6),g(i.formatDate(e.prDate)),c(5),g(i.formatDate(e.requiredDate)),c(4),T(" Comments: ",e.commentsCount||0)}}function DA(n,t){n&1&&(o(0,"div",55),_(1,"i",56),o(2,"span"),l(3,"No Draft Requisitions"),s()())}function PA(n,t){if(n&1){let e=O();o(0,"div",58)(1,"button",59),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.approvePR(a,r))}),_(2,"i",60),l(3," Approve "),s(),o(4,"button",61),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.rejectPR(a,r))}),_(5,"i",62),l(6," Reject "),s()()}}function TA(n,t){if(n&1){let e=O();o(0,"div",36),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",39),l(5),s()(),o(6,"div",40),l(7),s(),o(8,"div",41)(9,"div",42)(10,"span",43),l(11,"Date:"),s(),o(12,"span",44),l(13),s()(),o(14,"div",42)(15,"span",43),l(16,"Required:"),s(),o(17,"span",44),l(18),s()()(),x(19,PA,7,0,"div",57),o(20,"div",45)(21,"span",46),_(22,"i",47),l(23),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(6),g(i.formatDate(e.prDate)),c(5),g(i.formatDate(e.requiredDate)),c(),m("ngIf",i.canApproveReject(e)),c(4),T(" Comments: ",e.commentsCount||0)}}function OA(n,t){n&1&&(o(0,"div",55),_(1,"i",63),o(2,"span"),l(3,"No Submitted Requisitions"),s()())}function kA(n,t){if(n&1){let e=O();o(0,"div",36),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",39),l(5),s()(),o(6,"div",40),l(7),s(),o(8,"div",64),_(9,"div",65),o(10,"span",66),l(11),s()(),o(12,"div",58)(13,"button",67),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.convertToPO(a,r))}),_(14,"i",68),s(),o(15,"button",69),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.fulfillFromStock(a,r))}),_(16,"i",70),s(),o(17,"button",71),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.materialTransfer(a,r))}),_(18,"i",72),s()(),o(19,"div",45)(20,"span",46),_(21,"i",47),l(22),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(2),bt("width",i.calculateFulfillmentProgress(e),"%"),c(2),T("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(11),T(" Comments: ",e.commentsCount||0)}}function RA(n,t){n&1&&(o(0,"div",55),_(1,"i",73),o(2,"span"),l(3,"No Approved Requisitions"),s()())}function NA(n,t){if(n&1){let e=O();o(0,"div",36),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",39),l(5),s()(),o(6,"div",40),l(7),s(),o(8,"div",64),_(9,"div",65),o(10,"span",66),l(11),s()(),o(12,"div",58)(13,"button",67),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.convertToPO(a,r))}),_(14,"i",68),s(),o(15,"button",69),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.fulfillFromStock(a,r))}),_(16,"i",70),s(),o(17,"button",71),b("click",function(r){let a=v(e).$implicit,d=f(2);return y(d.materialTransfer(a,r))}),_(18,"i",72),s()(),o(19,"div",45)(20,"span",46),_(21,"i",47),l(22),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(),m("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),g(e.department),c(2),bt("width",i.calculateFulfillmentProgress(e),"%"),c(2),T("",i.calculateFulfillmentProgress(e),"% Fulfilled"),c(11),T(" Comments: ",e.commentsCount||0)}}function AA(n,t){n&1&&(o(0,"div",55),_(1,"i",74),o(2,"span"),l(3,"No Partially Fulfilled"),s()())}function FA(n,t){if(n&1){let e=O();o(0,"div",75),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",76),_(5,"i",73),l(6," Completed"),s()(),o(7,"div",40),l(8),s(),o(9,"div",41)(10,"div",42)(11,"span",43),l(12,"Date:"),s(),o(13,"span",44),l(14),s()()(),o(15,"div",45)(16,"span",46),_(17,"i",47),l(18),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(5),g(e.department),c(6),g(i.formatDate(e.prDate)),c(4),T(" Comments: ",e.commentsCount||0)}}function LA(n,t){n&1&&(o(0,"div",55),_(1,"i",77),o(2,"span"),l(3,"No Fulfilled Requisitions"),s()())}function VA(n,t){if(n&1&&(o(0,"div",42)(1,"span",43),l(2,"Reason:"),s(),o(3,"span",83),l(4),s()()),n&2){let e=f().$implicit;c(4),g(e.rejectionReason)}}function jA(n,t){if(n&1&&(o(0,"span",84),l(1),s()),n&2){let e=f().$implicit;c(),T("By: ",e.rejectedBy)}}function BA(n,t){if(n&1){let e=O();o(0,"div",78),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"div",37)(2,"span",38),l(3),s(),o(4,"span",79),_(5,"i",80),l(6," Rejected"),s()(),o(7,"div",40),l(8),s(),o(9,"div",41),x(10,VA,5,1,"div",81),s(),o(11,"div",45),x(12,jA,2,1,"span",82),s()()}if(n&2){let e=t.$implicit;c(3),g(e.prNumber),c(5),g(e.department),c(2),m("ngIf",e.rejectionReason),c(2),m("ngIf",e.rejectedBy)}}function WA(n,t){n&1&&(o(0,"div",55),_(1,"i",85),o(2,"span"),l(3,"No Rejected Requisitions"),s()())}function UA(n,t){if(n&1&&(o(0,"div",21)(1,"div",22)(2,"div",23)(3,"span",24),l(4,"Draft"),s(),o(5,"span",25),l(6),s()(),o(7,"div",26),x(8,IA,30,7,"div",27)(9,DA,4,0,"div",28),s()(),o(10,"div",29)(11,"div",23)(12,"span",24),l(13,"Submitted"),s(),o(14,"span",25),l(15),s()(),o(16,"div",26),x(17,TA,24,8,"div",27)(18,OA,4,0,"div",28),s()(),o(19,"div",30)(20,"div",23)(21,"span",24),l(22,"Approved"),s(),o(23,"span",25),l(24),s()(),o(25,"div",26),x(26,kA,23,8,"div",27)(27,RA,4,0,"div",28),s()(),o(28,"div",31)(29,"div",23)(30,"span",24),l(31,"Partially Fulfilled"),s(),o(32,"span",25),l(33),s()(),o(34,"div",26),x(35,NA,23,8,"div",27)(36,AA,4,0,"div",28),s()(),o(37,"div",32)(38,"div",23)(39,"span",24),l(40,"Fully Fulfilled"),s(),o(41,"span",25),l(42),s()(),o(43,"div",26),x(44,FA,19,4,"div",33)(45,LA,4,0,"div",28),s()(),o(46,"div",34)(47,"div",23)(48,"span",24),l(49,"Rejected"),s(),o(50,"span",25),l(51),s()(),o(52,"div",26),x(53,BA,13,4,"div",35)(54,WA,4,0,"div",28),s()()()),n&2){let e=f();c(6),T("",e.getFilteredPRs(e.draftPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.draftPRs)),c(),m("ngIf",e.getFilteredPRs(e.draftPRs).length===0),c(6),T("",e.getFilteredPRs(e.submittedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.submittedPRs)),c(),m("ngIf",e.getFilteredPRs(e.submittedPRs).length===0),c(6),T("",e.getFilteredPRs(e.approvedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.approvedPRs)),c(),m("ngIf",e.getFilteredPRs(e.approvedPRs).length===0),c(6),T("",e.getFilteredPRs(e.partiallyFulfilledPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.partiallyFulfilledPRs)),c(),m("ngIf",e.getFilteredPRs(e.partiallyFulfilledPRs).length===0),c(6),T("",e.getFilteredPRs(e.fullyFulfilledPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.fullyFulfilledPRs)),c(),m("ngIf",e.getFilteredPRs(e.fullyFulfilledPRs).length===0),c(6),T("",e.getFilteredPRs(e.rejectedPRs).length," Requisitions"),c(2),m("ngForOf",e.getFilteredPRs(e.rejectedPRs)),c(),m("ngIf",e.getFilteredPRs(e.rejectedPRs).length===0)}}function GA(n,t){n&1&&(o(0,"tr")(1,"td",91),_(2,"i",56),o(3,"p"),l(4,"No requisitions found"),s()()())}function HA(n,t){if(n&1){let e=O();o(0,"button",51),b("click",function(r){v(e);let a=f().$implicit;return f(2).openEditModal(a),y(r.stopPropagation())}),_(1,"i",52),s()}}function qA(n,t){if(n&1){let e=O();o(0,"button",105),b("click",function(r){v(e);let a=f().$implicit;return f(2).viewPR(a),y(r.stopPropagation())}),_(1,"i",106),s()}}function zA(n,t){if(n&1){let e=O();o(0,"button",53),b("click",function(r){v(e);let a=f().$implicit;return f(2).deletePR(a),y(r.stopPropagation())}),_(1,"i",54),s()}}function $A(n,t){if(n&1){let e=O();o(0,"button",107),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.approvePR(a,r))}),_(1,"i",60),s()}}function QA(n,t){if(n&1){let e=O();o(0,"button",108),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.rejectPR(a,r))}),_(1,"i",62),s()}}function KA(n,t){if(n&1){let e=O();o(0,"button",109),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.convertToPO(a,r))}),_(1,"i",68),s()}}function YA(n,t){if(n&1){let e=O();o(0,"button",110),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.fulfillFromStock(a,r))}),_(1,"i",70),s()}}function ZA(n,t){if(n&1){let e=O();o(0,"button",111),b("click",function(r){v(e);let a=f().$implicit,d=f(2);return y(d.materialTransfer(a,r))}),_(1,"i",72),s()}}function JA(n,t){n&1&&(o(0,"span",112),_(1,"i",73),l(2," Completed "),s())}function XA(n,t){if(n&1){let e=O();o(0,"tr",92),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPR(r))}),o(1,"td")(2,"strong",93),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td")(13,"span",39),l(14),s()(),o(15,"td")(16,"span",94),l(17),s()(),o(18,"td")(19,"div",95)(20,"button",49),b("click",function(r){let a=v(e).$implicit;return f(2).printPR(a),y(r.stopPropagation())}),_(21,"i",50),s(),x(22,HA,2,0,"button",96)(23,qA,2,0,"button",97)(24,zA,2,0,"button",98)(25,$A,2,0,"button",99)(26,QA,2,0,"button",100)(27,KA,2,0,"button",101)(28,YA,2,0,"button",102)(29,ZA,2,0,"button",103)(30,JA,3,0,"span",104),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.prNumber),c(2),g(i.formatDate(e.prDate)),c(2),g(i.formatDate(e.requiredDate)),c(2),g(e.department),c(2),g(e.requestedBy),c(2),m("ngClass",i.getPriorityClass(e.priority)),c(),g(e.priority),c(2),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(5),m("ngIf",i.canEdit(e)),c(),m("ngIf",!i.canEdit(e)),c(),m("ngIf",i.canDelete(e)),c(),m("ngIf",i.canApproveReject(e)),c(),m("ngIf",i.canApproveReject(e)),c(),m("ngIf",i.canConvertToPO(e)),c(),m("ngIf",i.canFulfillFromStock(e)),c(),m("ngIf",i.canMaterialTransfer(e)),c(),m("ngIf",i.isCompleted(e))}}function e4(n,t){if(n&1&&(o(0,"div",86)(1,"div",87)(2,"table",88)(3,"thead")(4,"tr")(5,"th"),l(6,"PR Number"),s(),o(7,"th"),l(8,"PR Date"),s(),o(9,"th"),l(10,"Required Date"),s(),o(11,"th"),l(12,"Department"),s(),o(13,"th"),l(14,"Requested By"),s(),o(15,"th"),l(16,"Priority"),s(),o(17,"th"),l(18,"Status"),s(),o(19,"th"),l(20,"Actions"),s()()(),o(21,"tbody"),x(22,GA,5,0,"tr",89)(23,XA,31,18,"tr",90),s()()()()),n&2){let e=f();c(22),m("ngIf",e.getAllFilteredPRs().length===0),c(),m("ngForOf",e.getAllFilteredPRs())}}function t4(n,t){if(n&1&&(o(0,"div",154)(1,"span",155),l(2,"Fulfillment Progress:"),s(),o(3,"div",156),_(4,"div",65),s(),o(5,"span",157),l(6),s()()),n&2){let e=f(2);c(4),bt("width",e.calculateFulfillmentProgress(e.selectedPR),"%"),c(2),T("",e.calculateFulfillmentProgress(e.selectedPR),"%")}}function n4(n,t){if(n&1){let e=O();o(0,"button",147),b("click",function(){v(e);let r=f(2);return y(r.addItem())}),_(1,"i",3),l(2," Add Item "),s()}}function i4(n,t){n&1&&(o(0,"th",140),l(1,"Fulfilled"),s())}function r4(n,t){n&1&&(o(0,"th",142),l(1,"Status"),s())}function o4(n,t){n&1&&(o(0,"th",158),l(1,"Action"),s())}function a4(n,t){if(n&1&&(o(0,"option",166),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function s4(n,t){if(n&1&&(o(0,"td")(1,"span",167),l(2),s()()),n&2){let e=f().$implicit;c(2),de("",e.fulfilledQuantity||0," / ",e.quantity)}}function l4(n,t){if(n&1&&(o(0,"option",166),l(1),s()),n&2){let e=t.$implicit;m("value",e.symbol||e.code),c(),de("",e.name," (",e.symbol||e.code,")")}}function c4(n,t){if(n&1&&(o(0,"td")(1,"span",168),l(2),s()()),n&2){let e=f().$implicit,i=f(2);c(),m("ngClass",i.getItemStatusClass(e.status)),c(),T(" ",e.status||"Pending"," ")}}function d4(n,t){if(n&1){let e=O();o(0,"td")(1,"button",169),b("click",function(){v(e);let r=f().index,a=f(2);return y(a.removeItem(r))}),_(2,"i",54),s()()}if(n&2){let e=f(3);c(),m("disabled",e.selectedPR.items.length<=1)}}function u4(n,t){if(n&1){let e=O();o(0,"tr")(1,"td"),l(2),s(),o(3,"td")(4,"select",159),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemName,r)||(a.itemName=r),y(r)}),b("change",function(){let r=v(e).index,a=f(2);return y(a.onItemSelect(r))}),o(5,"option",160),l(6,"Select Item"),s(),x(7,a4,2,2,"option",161),s()(),o(8,"td")(9,"input",162),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemDescription,r)||(a.itemDescription=r),y(r)}),s()(),o(10,"td")(11,"input",163),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.quantity,r)||(a.quantity=r),y(r)}),s()(),x(12,s4,3,2,"td",89),o(13,"td")(14,"select",164),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.uom,r)||(a.uom=r),y(r)}),o(15,"option",160),l(16,"Select UOM"),s(),x(17,l4,2,3,"option",161),s()(),x(18,c4,3,2,"td",89),o(19,"td")(20,"input",165),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.remarks,r)||(a.remarks=r),y(r)}),s()(),x(21,d4,3,1,"td",89),s()}if(n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(2),S("ngModel",e.itemName),m("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),m("ngForOf",r.items),c(2),S("ngModel",e.itemDescription),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(2),S("ngModel",e.quantity),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),m("ngIf",r.selectedPR.status!=="Draft"),c(2),S("ngModel",e.uom),m("disabled",!r.canSubmit(r.selectedPR)&&r.isEditing),c(3),m("ngForOf",r.units),c(),m("ngIf",r.selectedPR.status!=="Draft"),c(2),S("ngModel",e.remarks),m("readonly",!r.canSubmit(r.selectedPR)&&r.isEditing),c(),m("ngIf",r.canSubmit(r.selectedPR))}}function p4(n,t){if(n&1){let e=O();o(0,"button",2),b("click",function(){v(e);let r=f(2);return y(r.saveDraft())}),_(1,"i",170),l(2," Save as Draft "),s()}}function m4(n,t){if(n&1){let e=O();o(0,"button",171),b("click",function(){v(e);let r=f(2);return y(r.submitPR())}),_(1,"i",63),l(2," Submit "),s()}}function f4(n,t){if(n&1){let e=O();o(0,"button",172),b("click",function(){v(e);let r=f(2);return y(r.approvePR(r.selectedPR))}),_(1,"i",60),l(2," Approve "),s()}}function g4(n,t){if(n&1){let e=O();o(0,"button",173),b("click",function(){v(e);let r=f(2);return y(r.rejectPR(r.selectedPR))}),_(1,"i",62),l(2," Reject "),s()}}function h4(n,t){if(n&1){let e=O();o(0,"button",2),b("click",function(){v(e);let r=f(2);return y(r.convertToPO(r.selectedPR))}),_(1,"i",68),l(2," Convert to PO "),s()}}function _4(n,t){if(n&1){let e=O();o(0,"button",147),b("click",function(){v(e);let r=f(2);return y(r.fulfillFromStock(r.selectedPR))}),_(1,"i",70),l(2," Fulfill from Stock "),s()}}function v4(n,t){if(n&1){let e=O();o(0,"button",147),b("click",function(){v(e);let r=f(2);return y(r.materialTransfer(r.selectedPR))}),_(1,"i",72),l(2," Material Transfer "),s()}}function y4(n,t){n&1&&(o(0,"span",174),_(1,"i",73),l(2," This requisition has been fully fulfilled "),s())}function b4(n,t){n&1&&(o(0,"span",175),_(1,"i",80),l(2," This requisition was rejected "),s())}function C4(n,t){if(n&1){let e=O();o(0,"div",113),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",114),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",115)(3,"h2"),l(4),s(),o(5,"button",116),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",62),s()(),o(7,"div",117)(8,"div",118)(9,"div",119)(10,"label"),l(11,"PR Number"),s(),o(12,"input",120),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.prNumber,r)||(a.selectedPR.prNumber=r),y(r)}),s()(),o(13,"div",119)(14,"label"),l(15,"PR Date *"),s(),o(16,"input",121),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.prDate,r)||(a.selectedPR.prDate=r),y(r)}),s()(),o(17,"div",119)(18,"label"),l(19,"Required Date *"),s(),o(20,"input",121),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.requiredDate,r)||(a.selectedPR.requiredDate=r),y(r)}),s()(),o(21,"div",119)(22,"label"),l(23,"Requested By"),s(),o(24,"input",120),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.requestedBy,r)||(a.selectedPR.requestedBy=r),y(r)}),s()(),o(25,"div",119)(26,"label"),l(27,"Department / Project *"),s(),o(28,"input",122),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.department,r)||(a.selectedPR.department=r),y(r)}),s()(),o(29,"div",119)(30,"label"),l(31,"Delivery Location"),s(),o(32,"input",123),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.deliveryLocation,r)||(a.selectedPR.deliveryLocation=r),y(r)}),s()(),o(33,"div",124)(34,"label"),l(35,"Purpose"),s(),o(36,"textarea",125),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.purpose,r)||(a.selectedPR.purpose=r),y(r)}),s()(),o(37,"div",119)(38,"label"),l(39,"Priority *"),s(),o(40,"select",126),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPR.priority,r)||(a.selectedPR.priority=r),y(r)}),o(41,"option",127),l(42,"Normal"),s(),o(43,"option",128),l(44,"Urgent"),s(),o(45,"option",129),l(46,"Critical"),s()()(),o(47,"div",119)(48,"label"),l(49,"Status"),s(),_(50,"input",130),s()(),o(51,"div",131)(52,"div",132)(53,"h3"),l(54,"Material List"),s(),o(55,"div",133),x(56,t4,7,3,"div",134)(57,n4,3,0,"button",135),s()(),o(58,"div",136)(59,"table",137)(60,"thead")(61,"tr")(62,"th",138),l(63,"#"),s(),o(64,"th",139),l(65,"Item Name *"),s(),o(66,"th"),l(67,"Item Description"),s(),o(68,"th",140),l(69,"Qty *"),s(),x(70,i4,2,0,"th",141),o(71,"th",142),l(72,"UOM"),s(),x(73,r4,2,0,"th",143),o(74,"th"),l(75,"Remarks"),s(),x(76,o4,2,0,"th",144),s()(),o(77,"tbody"),x(78,u4,22,16,"tr",145),s()()()()(),o(79,"div",146)(80,"button",147),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(81,"Cancel"),s(),x(82,p4,3,0,"button",148)(83,m4,3,0,"button",149)(84,f4,3,0,"button",150)(85,g4,3,0,"button",151)(86,h4,3,0,"button",148)(87,_4,3,0,"button",135)(88,v4,3,0,"button",135)(89,y4,3,0,"span",152)(90,b4,3,0,"span",153),s()()()}if(n&2){let e=f();c(4),g(e.isEditing?"Edit Requisition":"New Purchase Requisition"),c(8),S("ngModel",e.selectedPR.prNumber),c(4),S("ngModel",e.selectedPR.prDate),c(4),S("ngModel",e.selectedPR.requiredDate),c(4),S("ngModel",e.selectedPR.requestedBy),c(4),S("ngModel",e.selectedPR.department),c(4),S("ngModel",e.selectedPR.deliveryLocation),c(4),S("ngModel",e.selectedPR.purpose),c(4),S("ngModel",e.selectedPR.priority),c(10),m("value",e.selectedPR.status),c(6),m("ngIf",e.selectedPR.status!=="Draft"&&e.selectedPR.status!=="Submitted"&&e.selectedPR.status!=="Rejected"),c(),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(13),m("ngIf",e.selectedPR.status!=="Draft"),c(3),m("ngIf",e.selectedPR.status!=="Draft"),c(3),m("ngIf",e.canSubmit(e.selectedPR)),c(2),m("ngForOf",e.selectedPR.items),c(4),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),m("ngIf",e.canSubmit(e.selectedPR)||!e.isEditing),c(),m("ngIf",e.canApproveReject(e.selectedPR)),c(),m("ngIf",e.canApproveReject(e.selectedPR)),c(),m("ngIf",e.canConvertToPO(e.selectedPR)),c(),m("ngIf",e.canFulfillFromStock(e.selectedPR)),c(),m("ngIf",e.canMaterialTransfer(e.selectedPR)),c(),m("ngIf",e.isCompleted(e.selectedPR)),c(),m("ngIf",e.isRejected(e.selectedPR))}}var np=class n{constructor(t,e,i,r,a){this.prService=t;this.unitService=e;this.itemService=i;this.router=r;this.settingsService=a}requisitions=[];draftPRs=[];submittedPRs=[];approvedPRs=[];partiallyFulfilledPRs=[];fullyFulfilledPRs=[];rejectedPRs=[];isAdmin=!0;units=[];items=[];showModal=!1;isEditing=!1;searchTerm="";viewMode="kanban";selectedPR=this.getEmptyPR();sortOptions=[{value:"date-created",label:"Date Created"},{value:"pr-date",label:"PR Date"},{value:"priority",label:"Priority"}];currentSort="date-created";ngOnInit(){this.loadData()}loadData(){this.prService.getAll().subscribe({next:t=>{this.requisitions=t,this.filterByStatus()},error:()=>{this.requisitions=[],this.filterByStatus()}}),this.unitService.getActive().subscribe({next:t=>this.units=t,error:()=>this.units=[]}),this.itemService.getActive().subscribe({next:t=>this.items=t,error:()=>this.items=[]})}filterByStatus(){this.draftPRs=this.requisitions.filter(t=>t.status==="Draft"),this.submittedPRs=this.requisitions.filter(t=>t.status==="Submitted"),this.approvedPRs=this.requisitions.filter(t=>t.status==="Approved"),this.partiallyFulfilledPRs=this.requisitions.filter(t=>t.status==="Partially Fulfilled"),this.fullyFulfilledPRs=this.requisitions.filter(t=>t.status==="Fully Fulfilled"),this.rejectedPRs=this.requisitions.filter(t=>t.status==="Rejected")}getFilteredPRs(t){if(!this.searchTerm)return t;let e=this.searchTerm.toLowerCase();return t.filter(i=>i.prNumber?.toLowerCase().includes(e)||i.department?.toLowerCase().includes(e)||i.requestedBy?.toLowerCase().includes(e))}getEmptyPR(){return{prNumber:"",prDate:new Date().toISOString().split("T")[0],requiredDate:"",requestedBy:"Current User",department:"",deliveryLocation:"",purpose:"",priority:"Normal",status:"Draft",items:[this.getEmptyItem()],commentsCount:0}}getEmptyItem(){return{itemId:void 0,itemCode:"",itemName:"",itemDescription:"",quantity:0,fulfilledQuantity:0,uom:"",remarks:"",status:"Pending"}}openNewModal(){this.isEditing=!1,this.selectedPR=this.getEmptyPR(),this.generatePRNumber(),this.showModal=!0}generatePRNumber(){this.settingsService.generatePrefixId("pr").subscribe({next:t=>{this.selectedPR.prNumber=t},error:t=>{console.error("Error generating PR number",t),this.selectedPR.prNumber=this.prService.generatePRNumber()}})}openEditModal(t){this.isEditing=!0,this.selectedPR=JSON.parse(JSON.stringify(t)),(!this.selectedPR.items||this.selectedPR.items.length===0)&&(this.selectedPR.items=[this.getEmptyItem()]),this.showModal=!0}viewPR(t){this.openEditModal(t)}closeModal(){this.showModal=!1,this.selectedPR=this.getEmptyPR()}addItem(){this.selectedPR.items.push(this.getEmptyItem())}removeItem(t){this.selectedPR.items.length>1&&this.selectedPR.items.splice(t,1)}onItemSelect(t){let e=this.items.find(i=>i.name===this.selectedPR.items[t].itemName);e&&(this.selectedPR.items[t].itemId=e.id,this.selectedPR.items[t].itemCode=e.code||"",this.selectedPR.items[t].itemDescription=e.description||"",this.selectedPR.items[t].uom=e.unitOfMeasure?.symbol||e.unitOfMeasure?.code||"")}saveDraft(){this.selectedPR.status="Draft",this.saveRequisition()}submitPR(){this.selectedPR.status="Submitted",this.saveRequisition()}saveRequisition(){let t=this.selectedPR.items.filter(e=>e.itemName&&e.quantity>0);if(t.length===0){alert("Please add at least one item with name and quantity.");return}this.selectedPR.items=t,this.isEditing&&this.selectedPR.id?this.prService.update(this.selectedPR.id,this.selectedPR).subscribe({next:()=>{this.loadData(),this.closeModal()},error:e=>console.error("Error updating PR:",e)}):this.prService.create(this.selectedPR).subscribe({next:()=>{this.loadData(),this.closeModal()},error:e=>console.error("Error creating PR:",e)})}deletePR(t){if(t.status!=="Draft"){alert("Only Draft PRs can be deleted.");return}confirm(`Are you sure you want to delete ${t.prNumber}?`)&&t.id&&this.prService.delete(t.id).subscribe({next:()=>this.loadData(),error:e=>console.error("Error deleting PR:",e)})}getPriorityClass(t){switch(t){case"Critical":return"priority-critical";case"Urgent":return"priority-urgent";default:return"priority-normal"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""}canEdit(t){return t.status==="Draft"}canDelete(t){return t.status==="Draft"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}getAllFilteredPRs(){if(!this.searchTerm)return this.requisitions;let t=this.searchTerm.toLowerCase();return this.requisitions.filter(e=>e.prNumber?.toLowerCase().includes(t)||e.department?.toLowerCase().includes(t)||e.requestedBy?.toLowerCase().includes(t))}getStatusClass(t){switch(t){case"Draft":return"status-draft";case"Submitted":return"status-submitted";case"Approved":return"status-approved";case"Partially Fulfilled":return"status-partial";case"Fully Fulfilled":return"status-fulfilled";case"Rejected":return"status-rejected";default:return"status-default"}}canSubmit(t){return t.status==="Draft"}canApproveReject(t){return t.status==="Submitted"&&this.isAdmin}canConvertToPO(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canFulfillFromStock(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}canMaterialTransfer(t){return t.status==="Approved"||t.status==="Partially Fulfilled"}isCompleted(t){return t.status==="Fully Fulfilled"}isRejected(t){return t.status==="Rejected"}approvePR(t,e){e?.stopPropagation(),this.canApproveReject(t)&&confirm(`Are you sure you want to approve ${t.prNumber}?`)&&t.id&&this.prService.approve(t.id).subscribe({next:()=>this.loadData(),error:i=>console.error("Error approving PR:",i)})}rejectPR(t,e){if(e?.stopPropagation(),!this.canApproveReject(t))return;let i=prompt(`Enter rejection reason for ${t.prNumber}:`);i&&t.id&&this.prService.reject(t.id,i).subscribe({next:()=>{this.loadData(),this.closeModal()},error:r=>console.error("Error rejecting PR:",r)})}convertToPO(t,e){e?.stopPropagation(),this.canConvertToPO(t)&&this.router.navigate(["/app/purchase/fulfillment/convert-to-po"],{queryParams:{prId:t.id}})}fulfillFromStock(t,e){e?.stopPropagation(),this.canFulfillFromStock(t)&&this.router.navigate(["/app/purchase/fulfillment/stock-issue"],{queryParams:{prId:t.id}})}materialTransfer(t,e){e?.stopPropagation(),this.canMaterialTransfer(t)&&this.router.navigate(["/app/purchase/fulfillment/material-transfer"],{queryParams:{prId:t.id}})}getItemStatusClass(t){switch(t){case"Pending":return"item-pending";case"Partially Fulfilled":return"item-partial";case"Fully Fulfilled":return"item-fulfilled";default:return"item-pending"}}calculateFulfillmentProgress(t){if(!t.items||t.items.length===0)return 0;let e=t.items.reduce((r,a)=>r+a.quantity,0),i=t.items.reduce((r,a)=>r+(a.fulfilledQuantity||0),0);return e>0?Math.round(i/e*100):0}printPR(t){t.id&&this.router.navigate(["/app/purchase/requisition",t.id,"print"])}static \u0275fac=function(e){return new(e||n)(I(At),I(li),I(Pe),I(pe),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-purchase-requisition"]],standalone:!1,decls:21,vars:9,consts:[[1,"page-container"],[1,"page-header"],[1,"btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"toolbar"],[1,"search-box"],[1,"fa","fa-search"],["type","text","placeholder","Search Requisitions",3,"ngModelChange","ngModel"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fa","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fa","fa-table"],["class","sort-options",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","table-view",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"sort-options"],["class","sort-link",3,"active","click",4,"ngFor","ngForOf"],[1,"sort-link",3,"click"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","pr-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","submitted"],[1,"kanban-column","approved"],[1,"kanban-column","partial"],[1,"kanban-column","fulfilled"],["class","pr-card completed",3,"click",4,"ngFor","ngForOf"],[1,"kanban-column","rejected"],["class","pr-card rejected-card",3,"click",4,"ngFor","ngForOf"],[1,"pr-card",3,"click"],[1,"card-header"],[1,"pr-number"],[1,"priority-badge",3,"ngClass"],[1,"card-department"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"card-footer"],[1,"comments"],[1,"fa","fa-comments"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fa","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fa","fa-trash"],[1,"empty-column"],[1,"fa","fa-file-alt"],["class","card-actions-row",4,"ngIf"],[1,"card-actions-row"],["title","Approve",1,"btn-action","approve",3,"click"],[1,"fa","fa-check"],["title","Reject",1,"btn-action","reject",3,"click"],[1,"fa","fa-times"],[1,"fa","fa-paper-plane"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],["title","Convert to PO",1,"btn-action","convert",3,"click"],[1,"fa","fa-file-invoice"],["title","Fulfill from Stock",1,"btn-action","stock",3,"click"],[1,"fa","fa-box"],["title","Material Transfer",1,"btn-action","transfer",3,"click"],[1,"fa","fa-exchange-alt"],[1,"fa","fa-check-circle"],[1,"fa","fa-tasks"],[1,"pr-card","completed",3,"click"],[1,"completed-badge"],[1,"fa","fa-check-double"],[1,"pr-card","rejected-card",3,"click"],[1,"rejected-badge"],[1,"fa","fa-times-circle"],["class","detail-row",4,"ngIf"],["class","rejected-by",4,"ngIf"],[1,"value","rejection-reason"],[1,"rejected-by"],[1,"fa","fa-ban"],[1,"table-view"],[1,"table-container"],[1,"data-table"],[4,"ngIf"],["class","clickable-row",3,"click",4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"clickable-row",3,"click"],[1,"pr-link"],[1,"status-badge",3,"ngClass"],[1,"action-buttons"],["class","btn-icon","title","Edit",3,"click",4,"ngIf"],["class","btn-icon","title","View",3,"click",4,"ngIf"],["class","btn-icon delete","title","Delete",3,"click",4,"ngIf"],["class","btn-icon approve","title","Approve",3,"click",4,"ngIf"],["class","btn-icon reject","title","Reject",3,"click",4,"ngIf"],["class","btn-icon convert","title","Convert to PO",3,"click",4,"ngIf"],["class","btn-icon stock","title","Fulfill from Stock",3,"click",4,"ngIf"],["class","btn-icon transfer","title","Material Transfer",3,"click",4,"ngIf"],["class","completed-label",4,"ngIf"],["title","View",1,"btn-icon",3,"click"],[1,"fa","fa-eye"],["title","Approve",1,"btn-icon","approve",3,"click"],["title","Reject",1,"btn-icon","reject",3,"click"],["title","Convert to PO",1,"btn-icon","convert",3,"click"],["title","Fulfill from Stock",1,"btn-icon","stock",3,"click"],["title","Material Transfer",1,"btn-icon","transfer",3,"click"],[1,"completed-label"],[1,"modal-overlay",3,"click"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter department or project","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["placeholder","Enter purpose of requisition","rows","2",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Normal"],["value","Urgent"],["value","Critical"],["type","text","readonly","",1,"form-control",3,"value"],[1,"items-section"],[1,"section-header"],[1,"section-header-right"],["class","fulfillment-progress",4,"ngIf"],["class","btn-secondary",3,"click",4,"ngIf"],[1,"items-table-container"],[1,"items-table"],[2,"width","30px"],[2,"width","180px"],[2,"width","80px"],["style","width: 80px;",4,"ngIf"],[2,"width","100px"],["style","width: 100px;",4,"ngIf"],["style","width: 50px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],["class","btn-success",3,"click",4,"ngIf"],["class","btn-approve",3,"click",4,"ngIf"],["class","btn-reject",3,"click",4,"ngIf"],["class","completed-message",4,"ngIf"],["class","rejected-message",4,"ngIf"],[1,"fulfillment-progress"],[1,"progress-label"],[1,"progress-bar-inline"],[1,"progress-percent"],[2,"width","50px"],[1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel","readonly"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Remarks",1,"form-control",3,"ngModelChange","ngModel","readonly"],[3,"value"],[1,"fulfilled-qty"],[1,"item-status-badge",3,"ngClass"],["title","Remove",1,"btn-icon","delete",3,"click","disabled"],[1,"fa","fa-save"],[1,"btn-success",3,"click"],[1,"btn-approve",3,"click"],[1,"btn-reject",3,"click"],[1,"completed-message"],[1,"rejected-message"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Purchase Requisition"),s(),o(4,"button",2),b("click",function(){return i.openNewModal()}),_(5,"i",3),l(6," New Requisition "),s()(),o(7,"div",4)(8,"div",5),_(9,"i",6),o(10,"input",7),E("ngModelChange",function(a){return M(i.searchTerm,a)||(i.searchTerm=a),a}),s()(),o(11,"div",8)(12,"div",9)(13,"button",10),b("click",function(){return i.viewMode="kanban"}),_(14,"i",11),s(),o(15,"button",12),b("click",function(){return i.viewMode="table"}),_(16,"i",13),s()(),x(17,wA,4,1,"div",14),s()(),x(18,UA,55,18,"div",15)(19,e4,24,2,"div",16),s(),x(20,C4,91,25,"div",17)),e&2&&(c(10),S("ngModel",i.searchTerm),c(3),ne("active",i.viewMode==="kanban"),c(2),ne("active",i.viewMode==="table"),c(2),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.viewMode==="table"),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,ln,qe,H],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;background:#f5f5f5;min-height:calc(100vh - 64px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:teal;font-size:24px;font-weight:600;margin:0}.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:teal;border:1px solid #008080;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #ddd;border-radius:6px;padding:8px 12px;min-width:280px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;margin-right:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:14px;width:100%}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.table-view[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #00000014}.table-view[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .2s}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]:hover{background:#f8fafa}.data-table[_ngcontent-%COMP%]   .pr-link[_ngcontent-%COMP%]{color:teal}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;display:block;margin-bottom:12px}.data-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.status-badge.status-submitted[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.status-default[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]{color:teal;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s}.sort-options[_ngcontent-%COMP%]   .sort-link[_ngcontent-%COMP%]:hover{background:#0080801a}.sort-options[_ngcontent-%COMP%]   .sort-link.active[_ngcontent-%COMP%]{background:teal;color:#fff}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.submitted[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#007bff}.kanban-column.approved[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 300px);overflow-y:auto}.pr-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.pr-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.pr-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card-header[_ngcontent-%COMP%]   .pr-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.priority-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px;border-radius:12px;font-weight:500}.priority-badge.priority-normal[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.priority-badge.priority-urgent[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.priority-badge.priority-critical[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.card-department[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{font-size:12px;color:#666}.card-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:900px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-content.large[_ngcontent-%COMP%]{max-width:1100px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eee;background:teal;color:#fff}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;padding:4px 8px;opacity:.8;transition:opacity .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only, .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#666}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{margin-top:20px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;font-weight:600}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:6px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:800px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;font-size:13px;color:#333}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:8px 10px;font-size:13px}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #eee;background:#f8f9fa}.kanban-column.partial[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800)}.kanban-column.fulfilled[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.kanban-column.rejected[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.card-actions-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap}.btn-action[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:4px;transition:all .2s}.btn-action.convert[_ngcontent-%COMP%]{background:teal;color:#fff}.btn-action.convert[_ngcontent-%COMP%]:hover{background:#066}.btn-action.stock[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-action.stock[_ngcontent-%COMP%]:hover{background:#138496}.btn-action.transfer[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-action.transfer[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-action.approve[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-action.approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-action.reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-action.reject[_ngcontent-%COMP%]:hover{background:#c82333}.progress-bar[_ngcontent-%COMP%]{height:20px;background:#e9ecef;border-radius:10px;overflow:hidden;position:relative;margin:10px 0}.progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.progress-bar[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:11px;font-weight:600;color:#333}.completed-badge[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.completed-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.rejected-badge[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.rejected-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.pr-card.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fff8,#e8f5e9);border-left:4px solid #28a745}.pr-card.rejected-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff8f8,#ffebee);border-left:4px solid #dc3545}.rejection-reason[_ngcontent-%COMP%]{color:#dc3545;font-style:italic}.rejected-by[_ngcontent-%COMP%]{font-size:11px;color:#999}.status-partial[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-icon.approve[_ngcontent-%COMP%]{color:#28a745}.btn-icon.approve[_ngcontent-%COMP%]:hover{background:#d4edda}.btn-icon.reject[_ngcontent-%COMP%]{color:#dc3545}.btn-icon.reject[_ngcontent-%COMP%]:hover{background:#f8d7da}.btn-icon.convert[_ngcontent-%COMP%]{color:teal}.btn-icon.convert[_ngcontent-%COMP%]:hover{background:#e0f2f2}.btn-icon.stock[_ngcontent-%COMP%]{color:#17a2b8}.btn-icon.stock[_ngcontent-%COMP%]:hover{background:#d1ecf1}.btn-icon.transfer[_ngcontent-%COMP%]{color:#6c757d}.btn-icon.transfer[_ngcontent-%COMP%]:hover{background:#e9ecef}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.completed-label[_ngcontent-%COMP%]{color:#28a745;font-size:12px;font-weight:600;display:flex;align-items:center;gap:4px}.item-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.item-partial[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.item-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.btn-approve[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-approve[_ngcontent-%COMP%]:hover{background:#218838}.btn-reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:background .2s}.btn-reject[_ngcontent-%COMP%]:hover{background:#c82333}.completed-message[_ngcontent-%COMP%]{color:#28a745;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#d4edda;border-radius:6px}.rejected-message[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#f8d7da;border-radius:6px}.section-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.fulfillment-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.fulfillment-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]{width:120px;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden}.fulfillment-progress[_ngcontent-%COMP%]   .progress-bar-inline[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ffc107,#28a745);transition:width .3s ease}.fulfillment-progress[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:teal;min-width:35px}.fulfilled-qty[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666}.item-status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}@media(max-width:768px){.page-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:span 1}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}}"]})};function x4(n,t){n&1&&(o(0,"div",7),_(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),s()())}function S4(n,t){if(n&1&&(o(0,"option",21),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),g(e.name)}}function E4(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"input",46),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.selected,r)||(a.selected=r),y(r)}),b("change",function(){let r=v(e).$implicit,a=f(2);return y(a.onItemSelectionChange(r))}),s()(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td",47),l(8),s(),o(9,"td",47),l(10),s(),o(11,"td",48),l(12),s(),o(13,"td",47),l(14),s(),o(15,"td")(16,"input",49),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.fulfillQty,r)||(a.fulfillQty=r),y(r)}),b("input",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(17,"td")(18,"input",50),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.rate,r)||(a.rate=r),y(r)}),b("input",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(19,"td",51),l(20),X(21,"number"),s()()}if(n&2){let e=t.$implicit;ne("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty),c(2),S("ngModel",e.rate),m("disabled",!e.selected),c(2),T(" ",e.selected?ee(21,15,e.amount,"1.2-2"):"-"," ")}}function M4(n,t){n&1&&_(0,"i",52)}function w4(n,t){n&1&&_(0,"i",8)}function I4(n,t){if(n&1){let e=O();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),s(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),s(),o(9,"span",15),l(10),s()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),s(),o(14,"span",15),l(15),s()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),s(),o(19,"span",15),l(20),s()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),s(),o(24,"span",15),l(25),s()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),s(),o(29,"span",15),l(30),s()(),o(31,"div",13)(32,"span",14),l(33,"Purpose:"),s(),o(34,"span",15),l(35),s()()()(),o(36,"div",16)(37,"h3"),l(38,"Purchase Order Details"),s(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"PO Number"),s(),o(43,"input",19),E("ngModelChange",function(r){v(e);let a=f();return M(a.poNumber,r)||(a.poNumber=r),y(r)}),s()(),o(44,"div",18)(45,"label"),l(46,"Supplier *"),s(),o(47,"select",20),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedSupplierId,r)||(a.selectedSupplierId=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.onSupplierChange())}),o(48,"option",21),l(49,"Select Supplier"),s(),x(50,S4,2,2,"option",22),s()(),o(51,"div",18)(52,"label"),l(53,"Payment Terms"),s(),o(54,"input",23),E("ngModelChange",function(r){v(e);let a=f();return M(a.paymentTerms,r)||(a.paymentTerms=r),y(r)}),s()(),o(55,"div",18)(56,"label"),l(57,"Expected Delivery Date *"),s(),o(58,"input",24),E("ngModelChange",function(r){v(e);let a=f();return M(a.expectedDeliveryDate,r)||(a.expectedDeliveryDate=r),y(r)}),s()(),o(59,"div",25)(60,"label"),l(61,"Remarks"),s(),o(62,"textarea",26),E("ngModelChange",function(r){v(e);let a=f();return M(a.remarks,r)||(a.remarks=r),y(r)}),s()()()()(),o(63,"div",27)(64,"div",28)(65,"h3"),l(66,"Select Items for Purchase Order"),s(),o(67,"span",29),l(68),s()(),o(69,"div",30)(70,"table",31)(71,"thead")(72,"tr")(73,"th",32)(74,"input",33),b("change",function(r){v(e);let a=f();return y(a.toggleSelectAll(r))}),s()(),o(75,"th"),l(76,"Item Name"),s(),o(77,"th"),l(78,"Description"),s(),o(79,"th",34),l(80,"Requested"),s(),o(81,"th",34),l(82,"Fulfilled"),s(),o(83,"th",34),l(84,"Pending"),s(),o(85,"th",34),l(86,"UOM"),s(),o(87,"th",35),l(88,"Qty to Order *"),s(),o(89,"th",35),l(90,"Rate *"),s(),o(91,"th",36),l(92,"Amount"),s()()(),o(93,"tbody"),x(94,E4,22,18,"tr",37),s(),o(95,"tfoot")(96,"tr",38)(97,"td",39)(98,"strong"),l(99,"Total Amount:"),s()(),o(100,"td",40)(101,"strong"),l(102),X(103,"number"),s()()()()()()(),o(104,"div",41)(105,"button",42),b("click",function(){v(e);let r=f();return y(r.cancel())}),l(106,"Cancel"),s(),o(107,"button",43),b("click",function(){v(e);let r=f();return y(r.createPO())}),x(108,M4,1,0,"i",44)(109,w4,1,0,"i",45),l(110),s()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.purpose||"-"),c(8),S("ngModel",e.poNumber),c(4),S("ngModel",e.selectedSupplierId),c(),m("value",0),c(2),m("ngForOf",e.suppliers),c(4),S("ngModel",e.paymentTerms),c(4),S("ngModel",e.expectedDeliveryDate),c(4),S("ngModel",e.remarks),c(6),de("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(26),m("ngForOf",e.fulfillmentItems),c(8),g(ee(103,21,e.getTotalAmount(),"1.2-2")),c(5),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),T(" ",e.saving?"Creating PO...":"Create Purchase Order"," ")}}var ip=class n{constructor(t,e,i,r,a,d){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.supplierService=a;this.settingsService=d}prId=0;pr=null;suppliers=[];fulfillmentItems=[];poNumber="";selectedSupplierId=0;selectedSupplierName="";paymentTerms="";expectedDeliveryDate="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generatePONumber(),this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}}),this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers:",t)})}generatePONumber(){this.settingsService.generatePrefixId("po").subscribe({next:t=>{this.poNumber=t},error:()=>{this.poNumber=this.fulfillmentService.generatePONumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0,rate:0,amount:0})))}onSupplierChange(){let t=this.suppliers.find(e=>e.id===this.selectedSupplierId);this.selectedSupplierName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)}),this.calculateAmounts()}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty),this.calculateAmounts()}calculateItemAmount(t){t.amount=(t.fulfillQty||0)*(t.rate||0)}calculateAmounts(){this.fulfillmentItems.forEach(t=>{t.selected&&(t.amount=(t.fulfillQty||0)*(t.rate||0))})}getTotalAmount(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.amount||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedSupplierId||!this.expectedDeliveryDate)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty&&e.rate&&e.rate>0)}createPO(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"PO",referenceNumber:this.poNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",supplierId:this.selectedSupplierId,supplierName:this.selectedSupplierName,paymentTerms:this.paymentTerms,expectedDeliveryDate:this.expectedDeliveryDate,remarks:this.remarks,totalAmount:this.getTotalAmount(),items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createPOFulfillment(t).subscribe({next:()=>{this.saving=!1,alert("Purchase Order created successfully!"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating PO:",e),this.saving=!1,alert("PO creation saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Je),I(pe),I(At),I(ft),I(Nt),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-convert-to-po"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","po-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","100px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","9",1,"text-right"],[1,"text-right","total-amount"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-file-invoice",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","input","ngModel","disabled","max"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","input","ngModel","disabled"],[1,"text-right","amount"],[1,"fa","fa-file-invoice"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),b("click",function(){return i.cancel()}),_(4,"i",4),s(),o(5,"h1"),l(6,"Convert to Purchase Order"),s()()(),x(7,x4,4,0,"div",5)(8,I4,111,24,"div",6),s()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[V,j,Y,Z,$,Oe,sn,K,q,ln,qe,Rr,H,De],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:500;color:teal}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function D4(n,t){n&1&&(o(0,"div",7),_(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),s()())}function P4(n,t){if(n&1&&(o(0,"option",21),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),de("",e.name," (",e.code,")")}}function T4(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"input",43),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.selected,r)||(a.selected=r),y(r)}),b("change",function(){let r=v(e).$implicit,a=f(2);return y(a.onItemSelectionChange(r))}),s()(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td",44),l(8),s(),o(9,"td",44),l(10),s(),o(11,"td",45),l(12),s(),o(13,"td",44),l(14),s(),o(15,"td")(16,"input",46),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.fulfillQty,r)||(a.fulfillQty=r),y(r)}),s()()()}if(n&2){let e=t.$implicit;ne("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty)}}function O4(n,t){n&1&&_(0,"i",47)}function k4(n,t){n&1&&_(0,"i",8)}function R4(n,t){if(n&1){let e=O();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),s(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),s(),o(9,"span",15),l(10),s()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),s(),o(14,"span",15),l(15),s()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),s(),o(19,"span",15),l(20),s()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),s(),o(24,"span",15),l(25),s()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),s(),o(29,"span",15),l(30),s()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),s(),o(34,"span",15),l(35),s()()()(),o(36,"div",16)(37,"h3"),l(38,"Stock Issue Details"),s(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Issue Number"),s(),o(43,"input",19),E("ngModelChange",function(r){v(e);let a=f();return M(a.issueNumber,r)||(a.issueNumber=r),y(r)}),s()(),o(44,"div",18)(45,"label"),l(46,"Source Warehouse *"),s(),o(47,"select",20),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedWarehouseId,r)||(a.selectedWarehouseId=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.onWarehouseChange())}),o(48,"option",21),l(49,"Select Warehouse"),s(),x(50,P4,2,3,"option",22),s()(),o(51,"div",23)(52,"label"),l(53,"Remarks"),s(),o(54,"textarea",24),E("ngModelChange",function(r){v(e);let a=f();return M(a.remarks,r)||(a.remarks=r),y(r)}),s()()()()(),o(55,"div",25)(56,"div",26)(57,"h3"),l(58,"Select Items to Issue from Stock"),s(),o(59,"span",27),l(60),s()(),o(61,"div",28)(62,"table",29)(63,"thead")(64,"tr")(65,"th",30)(66,"input",31),b("change",function(r){v(e);let a=f();return y(a.toggleSelectAll(r))}),s()(),o(67,"th"),l(68,"Item Name"),s(),o(69,"th"),l(70,"Description"),s(),o(71,"th",32),l(72,"Requested"),s(),o(73,"th",32),l(74,"Fulfilled"),s(),o(75,"th",32),l(76,"Pending"),s(),o(77,"th",32),l(78,"UOM"),s(),o(79,"th",33),l(80,"Qty to Issue *"),s()()(),o(81,"tbody"),x(82,T4,17,12,"tr",34),s(),o(83,"tfoot")(84,"tr",35)(85,"td",36)(86,"strong"),l(87,"Total Issue Quantity:"),s()(),o(88,"td",37)(89,"strong"),l(90),s()()()()()()(),o(91,"div",38)(92,"button",39),b("click",function(){v(e);let r=f();return y(r.cancel())}),l(93,"Cancel"),s(),o(94,"button",40),b("click",function(){v(e);let r=f();return y(r.createStockIssue())}),x(95,O4,1,0,"i",41)(96,k4,1,0,"i",42),l(97),s()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.deliveryLocation||"-"),c(8),S("ngModel",e.issueNumber),c(4),S("ngModel",e.selectedWarehouseId),c(),m("value",0),c(2),m("ngForOf",e.warehouses),c(4),S("ngModel",e.remarks),c(6),de("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),m("ngForOf",e.fulfillmentItems),c(8),g(e.getTotalIssueQty()),c(4),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),T(" ",e.saving?"Creating Issue...":"Create Stock Issue"," ")}}var rp=class n{constructor(t,e,i,r,a){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=a}prId=0;pr=null;warehouses=[];fulfillmentItems=[];issueNumber="";selectedWarehouseId=0;selectedWarehouseName="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateIssueNumber(),this.warehouses=[{id:1,name:"Main Warehouse",code:"WH-001"},{id:2,name:"Secondary Warehouse",code:"WH-002"},{id:3,name:"Project Site A",code:"WH-003"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateIssueNumber(){this.settingsService.generatePrefixId("issue").subscribe({next:t=>{this.issueNumber=t},error:()=>{this.issueNumber=this.fulfillmentService.generateIssueNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onWarehouseChange(){let t=this.warehouses.find(e=>e.id===this.selectedWarehouseId);this.selectedWarehouseName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalIssueQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.selectedWarehouseId)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createStockIssue(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Stock Issue",referenceNumber:this.issueNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",warehouseId:this.selectedWarehouseId,warehouseName:this.selectedWarehouseName,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createStockIssueFulfillment(t).subscribe({next:()=>{this.saving=!1,alert("Stock Issue created successfully!"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating stock issue:",e),this.saving=!1,alert("Stock Issue saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Je),I(pe),I(At),I(ft),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-stock-issue-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","issue-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-box",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-box"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),b("click",function(){return i.cancel()}),_(4,"i",4),s(),o(5,"h1"),l(6,"Fulfill from Stock"),s()()(),x(7,D4,4,0,"div",5)(8,R4,98,19,"div",6),s()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[V,j,Y,Z,$,Oe,sn,K,q,ln,qe,Rr,H],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function N4(n,t){n&1&&(o(0,"div",7),_(1,"i",8),o(2,"span"),l(3,"Loading PR details..."),s()())}function A4(n,t){if(n&1&&(o(0,"option",21),l(1),s()),n&2){let e=t.$implicit;m("value",e.id),c(),de("",e.name," (",e.code,")")}}function F4(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"input",44),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.selected,r)||(a.selected=r),y(r)}),b("change",function(){let r=v(e).$implicit,a=f(2);return y(a.onItemSelectionChange(r))}),s()(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td",45),l(8),s(),o(9,"td",45),l(10),s(),o(11,"td",46),l(12),s(),o(13,"td",45),l(14),s(),o(15,"td")(16,"input",47),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.fulfillQty,r)||(a.fulfillQty=r),y(r)}),s()()()}if(n&2){let e=t.$implicit;ne("selected",e.selected),c(2),S("ngModel",e.selected),c(2),g(e.itemName),c(2),g(e.itemDescription||"-"),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(2),g(e.pendingQty),c(2),g(e.uom),c(2),S("ngModel",e.fulfillQty),m("disabled",!e.selected)("max",e.pendingQty)}}function L4(n,t){n&1&&_(0,"i",48)}function V4(n,t){n&1&&_(0,"i",8)}function j4(n,t){if(n&1){let e=O();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),l(4,"Purchase Requisition Details"),s(),o(5,"div",12)(6,"div",13)(7,"span",14),l(8,"PR Number:"),s(),o(9,"span",15),l(10),s()(),o(11,"div",13)(12,"span",14),l(13,"PR Date:"),s(),o(14,"span",15),l(15),s()(),o(16,"div",13)(17,"span",14),l(18,"Required Date:"),s(),o(19,"span",15),l(20),s()(),o(21,"div",13)(22,"span",14),l(23,"Department:"),s(),o(24,"span",15),l(25),s()(),o(26,"div",13)(27,"span",14),l(28,"Requested By:"),s(),o(29,"span",15),l(30),s()(),o(31,"div",13)(32,"span",14),l(33,"Delivery Location:"),s(),o(34,"span",15),l(35),s()()()(),o(36,"div",16)(37,"h3"),l(38,"Material Transfer Details"),s(),o(39,"div",17)(40,"div",18)(41,"label"),l(42,"Transfer Number"),s(),o(43,"input",19),E("ngModelChange",function(r){v(e);let a=f();return M(a.transferNumber,r)||(a.transferNumber=r),y(r)}),s()(),o(44,"div",18)(45,"label"),l(46,"Source Project / Location *"),s(),o(47,"select",20),E("ngModelChange",function(r){v(e);let a=f();return M(a.sourceLocationId,r)||(a.sourceLocationId=r),y(r)}),b("change",function(){v(e);let r=f();return y(r.onSourceLocationChange())}),o(48,"option",21),l(49,"Select Source Location"),s(),x(50,A4,2,3,"option",22),s()(),o(51,"div",18)(52,"label"),l(53,"Target Location *"),s(),o(54,"input",23),E("ngModelChange",function(r){v(e);let a=f();return M(a.targetLocation,r)||(a.targetLocation=r),y(r)}),s()(),o(55,"div",24)(56,"label"),l(57,"Remarks"),s(),o(58,"textarea",25),E("ngModelChange",function(r){v(e);let a=f();return M(a.remarks,r)||(a.remarks=r),y(r)}),s()()()()(),o(59,"div",26)(60,"div",27)(61,"h3"),l(62,"Select Items to Transfer"),s(),o(63,"span",28),l(64),s()(),o(65,"div",29)(66,"table",30)(67,"thead")(68,"tr")(69,"th",31)(70,"input",32),b("change",function(r){v(e);let a=f();return y(a.toggleSelectAll(r))}),s()(),o(71,"th"),l(72,"Item Name"),s(),o(73,"th"),l(74,"Description"),s(),o(75,"th",33),l(76,"Requested"),s(),o(77,"th",33),l(78,"Fulfilled"),s(),o(79,"th",33),l(80,"Pending"),s(),o(81,"th",33),l(82,"UOM"),s(),o(83,"th",34),l(84,"Qty to Transfer *"),s()()(),o(85,"tbody"),x(86,F4,17,12,"tr",35),s(),o(87,"tfoot")(88,"tr",36)(89,"td",37)(90,"strong"),l(91,"Total Transfer Quantity:"),s()(),o(92,"td",38)(93,"strong"),l(94),s()()()()()()(),o(95,"div",39)(96,"button",40),b("click",function(){v(e);let r=f();return y(r.cancel())}),l(97,"Cancel"),s(),o(98,"button",41),b("click",function(){v(e);let r=f();return y(r.createTransfer())}),x(99,L4,1,0,"i",42)(100,V4,1,0,"i",43),l(101),s()()()}if(n&2){let e=f();c(10),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.formatDate(e.pr.requiredDate)),c(5),g(e.pr.department),c(5),g(e.pr.requestedBy),c(5),g(e.pr.deliveryLocation||"-"),c(8),S("ngModel",e.transferNumber),c(4),S("ngModel",e.sourceLocationId),c(),m("value",0),c(2),m("ngForOf",e.locations),c(4),S("ngModel",e.targetLocation),c(4),S("ngModel",e.remarks),c(6),de("",e.getSelectedItemsCount()," of ",e.fulfillmentItems.length," items selected"),c(22),m("ngForOf",e.fulfillmentItems),c(8),g(e.getTotalTransferQty()),c(4),m("disabled",!e.isValid()||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving),c(),T(" ",e.saving?"Creating Transfer...":"Create Material Transfer"," ")}}var op=class n{constructor(t,e,i,r,a){this.route=t;this.router=e;this.prService=i;this.fulfillmentService=r;this.settingsService=a}prId=0;pr=null;locations=[];fulfillmentItems=[];transferNumber="";sourceLocationId=0;sourceLocationName="";targetLocation="";remarks="";loading=!1;saving=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{t.prId?(this.prId=+t.prId,this.loadData()):this.router.navigate(["/app/purchase/requisition"])})}loadData(){this.loading=!0,this.generateTransferNumber(),this.locations=[{id:1,name:"Project Site A",code:"PS-A"},{id:2,name:"Project Site B",code:"PS-B"},{id:3,name:"Central Store",code:"CS"},{id:4,name:"Regional Depot",code:"RD"}],this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.targetLocation=t.deliveryLocation||"",this.initializeFulfillmentItems(),this.loading=!1},error:t=>{console.error("Error loading PR:",t),this.loading=!1,this.router.navigate(["/app/purchase/requisition"])}})}generateTransferNumber(){this.settingsService.generatePrefixId("transfer").subscribe({next:t=>{this.transferNumber=t},error:()=>{this.transferNumber=this.fulfillmentService.generateTransferNumber()}})}initializeFulfillmentItems(){!this.pr||!this.pr.items||(this.fulfillmentItems=this.pr.items.filter(t=>t.quantity-(t.fulfilledQuantity||0)>0).map((t,e)=>({prItemId:t.id||e,itemId:t.itemId,itemCode:t.itemCode,itemName:t.itemName,itemDescription:t.itemDescription,requestedQty:t.quantity,fulfilledQty:t.fulfilledQuantity||0,pendingQty:t.quantity-(t.fulfilledQuantity||0),uom:t.uom,selected:!1,fulfillQty:0})))}onSourceLocationChange(){let t=this.locations.find(e=>e.id===this.sourceLocationId);this.sourceLocationName=t?t.name:""}toggleSelectAll(t){let e=t.target.checked;this.fulfillmentItems.forEach(i=>{i.selected=e,e&&!i.fulfillQty&&(i.fulfillQty=i.pendingQty)})}onItemSelectionChange(t){t.selected&&!t.fulfillQty&&(t.fulfillQty=t.pendingQty)}getTotalTransferQty(){return this.fulfillmentItems.filter(t=>t.selected).reduce((t,e)=>t+(e.fulfillQty||0),0)}getSelectedItemsCount(){return this.fulfillmentItems.filter(t=>t.selected).length}isValid(){if(!this.sourceLocationId||!this.targetLocation)return!1;let t=this.fulfillmentItems.filter(e=>e.selected);return t.length===0?!1:t.every(e=>e.fulfillQty&&e.fulfillQty>0&&e.fulfillQty<=e.pendingQty)}createTransfer(){if(!this.isValid()||!this.pr)return;this.saving=!0;let t={prId:this.prId,prNumber:this.pr.prNumber||"",fulfillmentType:"Material Transfer",referenceNumber:this.transferNumber,fulfillmentDate:new Date().toISOString().split("T")[0],performedBy:"Current User",sourceLocation:this.sourceLocationName,targetLocation:this.targetLocation,remarks:this.remarks,items:this.fulfillmentItems.filter(e=>e.selected)};this.fulfillmentService.createMaterialTransferFulfillment(t).subscribe({next:()=>{this.saving=!1,alert("Material Transfer created successfully!"),this.router.navigate(["/app/purchase/requisition"])},error:e=>{console.error("Error creating transfer:",e),this.saving=!1,alert("Material Transfer saved locally. Backend integration pending."),this.router.navigate(["/app/purchase/requisition"])}})}cancel(){this.router.navigate(["/app/purchase/requisition"])}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB"):""}static \u0275fac=function(e){return new(e||n)(I(Je),I(pe),I(At),I(ft),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-material-transfer-fulfillment"]],standalone:!1,decls:9,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"header-left"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],["class","loading-state",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-state"],[1,"fa","fa-spinner","fa-spin"],[1,"content"],[1,"info-cards"],[1,"info-card","pr-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-card","transfer-info"],[1,"form-grid"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Destination location","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["rows","2","placeholder","Additional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"items-section"],[1,"section-header"],[1,"selected-count"],[1,"items-table-container"],[1,"items-table"],[2,"width","40px"],["type","checkbox",3,"change"],[2,"width","80px"],[2,"width","120px"],[3,"selected",4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7",1,"text-right"],[1,"text-center","total-qty"],[1,"action-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","fa fa-exchange-alt",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"text-center","pending-qty"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel","disabled","max"],[1,"fa","fa-exchange-alt"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),b("click",function(){return i.cancel()}),_(4,"i",4),s(),o(5,"h1"),l(6,"Material Transfer"),s()()(),x(7,N4,4,0,"div",5)(8,j4,102,20,"div",6),s()),e&2&&(c(7),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.pr))},dependencies:[V,j,Y,Z,$,Oe,sn,K,q,ln,qe,Rr,H],styles:[".page-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:calc(100vh - 60px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin:0}.btn-back[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#fff;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:teal;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]:hover{background:teal;color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px;color:teal}.info-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:16px;color:teal;border-bottom:1px solid #eee;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.form-control[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.form-control[readonly][_ngcontent-%COMP%]{background:#f0f0f0}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.items-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000014;margin-bottom:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:teal}.section-header[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#f0f0f0;padding:5px 12px;border-radius:20px}.items-table-container[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555;font-size:13px;white-space:nowrap}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#0080800d}.items-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .pending-qty[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.items-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:right}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:teal}.items-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 10px;border-top:2px solid #008080}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-qty[_ngcontent-%COMP%]{color:teal;font-size:16px}.action-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#666;border:1px solid #ddd;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:teal;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:992px){.info-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Ko=class n{constructor(t){this.http=t}baseUrl="/api/purchase/direct";getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function B4(n,t){n&1&&(o(0,"tr")(1,"td",28),_(2,"i",29),o(3,"p"),l(4,"Loading..."),s()()())}function W4(n,t){n&1&&(o(0,"tr")(1,"td",28),_(2,"i",30),o(3,"p"),l(4,"No entries found"),s()()())}function U4(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"strong"),l(3),s()(),o(4,"td"),l(5),s(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td")(13,"span",31),l(14),s()(),o(15,"td")(16,"div",32)(17,"button",33),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPurchase(r))}),_(18,"i",34),s(),o(19,"button",35),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.deletePurchase(r.id))}),_(20,"i",36),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber||"Draft"),c(2),g(e.poType),c(2),g(e.supplierName),c(2),g(i.formatDate(e.createdDate)),c(2),g(i.formatDate(e.deliveryDate)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),T(" ",e.status," ")}}function G4(n,t){if(n&1&&(o(0,"div",24)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),l(5,"PO Number"),s(),o(6,"th"),l(7,"PO Type"),s(),o(8,"th"),l(9,"Supplier"),s(),o(10,"th"),l(11,"Created Date"),s(),o(12,"th"),l(13,"Deliver Date"),s(),o(14,"th"),l(15,"Status"),s(),o(16,"th"),l(17,"Options"),s()()(),o(18,"tbody"),x(19,B4,5,0,"tr",26)(20,W4,5,0,"tr",26)(21,U4,21,7,"tr",27),s()()()),n&2){let e=f();c(19),m("ngIf",e.loading),c(),m("ngIf",!e.loading&&e.filteredPurchases.length===0),c(),m("ngForOf",e.filteredPurchases)}}function H4(n,t){if(n&1&&(o(0,"div",52)(1,"span",53),l(2,"Amount:"),s(),o(3,"span",54),l(4),X(5,"number"),s()()),n&2){let e=f().$implicit;c(4),g(ee(5,1,e.totalAmount,"1.2-2"))}}function q4(n,t){if(n&1){let e=O();o(0,"div",47),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),s(),o(4,"span",31),l(5),s()(),o(6,"div",50),l(7),s(),o(8,"div",51)(9,"div",52)(10,"span",53),l(11,"Created:"),s(),o(12,"span",54),l(13),s()(),o(14,"div",52)(15,"span",53),l(16,"Deliver:"),s(),o(17,"span",54),l(18),s()(),x(19,H4,6,4,"div",55),s(),o(20,"div",56)(21,"div",57)(22,"button",58),b("click",function(r){let a=v(e).$implicit;return f(2).printPO(a),y(r.stopPropagation())}),_(23,"i",59),s(),o(24,"button",60),b("click",function(r){let a=v(e).$implicit;return f(2).openModal(a),y(r.stopPropagation())}),_(25,"i",61),s(),o(26,"button",62),b("click",function(r){let a=v(e).$implicit;return f(2).deletePurchase(a.id),y(r.stopPropagation())}),_(27,"i",36),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber||"Draft"),c(),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function z4(n,t){n&1&&(o(0,"div",63),_(1,"i",64),o(2,"span"),l(3,"No Draft Orders"),s()())}function $4(n,t){if(n&1&&(o(0,"div",52)(1,"span",53),l(2,"Amount:"),s(),o(3,"span",54),l(4),X(5,"number"),s()()),n&2){let e=f().$implicit;c(4),g(ee(5,1,e.totalAmount,"1.2-2"))}}function Q4(n,t){if(n&1){let e=O();o(0,"div",47),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),s(),o(4,"span",31),l(5),s()(),o(6,"div",50),l(7),s(),o(8,"div",51)(9,"div",52)(10,"span",53),l(11,"Created:"),s(),o(12,"span",54),l(13),s()(),o(14,"div",52)(15,"span",53),l(16,"Deliver:"),s(),o(17,"span",54),l(18),s()(),x(19,$4,6,4,"div",55),s(),o(20,"div",56)(21,"div",57)(22,"button",58),b("click",function(r){let a=v(e).$implicit;return f(2).printPO(a),y(r.stopPropagation())}),_(23,"i",59),s(),o(24,"button",65),b("click",function(r){let a=v(e).$implicit;return f(2).viewPurchase(a),y(r.stopPropagation())}),_(25,"i",34),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber),c(),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function K4(n,t){n&1&&(o(0,"div",63),_(1,"i",66),o(2,"span"),l(3,"No Pending Orders"),s()())}function Y4(n,t){if(n&1&&(o(0,"div",52)(1,"span",53),l(2,"Amount:"),s(),o(3,"span",54),l(4),X(5,"number"),s()()),n&2){let e=f().$implicit;c(4),g(ee(5,1,e.totalAmount,"1.2-2"))}}function Z4(n,t){if(n&1){let e=O();o(0,"div",47),b("click",function(){let r=v(e).$implicit,a=f(2);return y(a.viewPurchase(r))}),o(1,"div",48)(2,"span",49),l(3),s(),o(4,"span",31),l(5),s()(),o(6,"div",50),l(7),s(),o(8,"div",51)(9,"div",52)(10,"span",53),l(11,"Created:"),s(),o(12,"span",54),l(13),s()(),o(14,"div",52)(15,"span",53),l(16,"Deliver:"),s(),o(17,"span",54),l(18),s()(),x(19,Y4,6,4,"div",55),s(),o(20,"div",56)(21,"div",57)(22,"button",58),b("click",function(r){let a=v(e).$implicit;return f(2).printPO(a),y(r.stopPropagation())}),_(23,"i",59),s(),o(24,"button",65),b("click",function(r){let a=v(e).$implicit;return f(2).viewPurchase(a),y(r.stopPropagation())}),_(25,"i",34),s()()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g(e.poNumber),c(),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status),c(2),g(e.supplierName),c(6),g(i.formatDate(e.createdDate)),c(5),g(i.formatDate(e.deliveryDate)),c(),m("ngIf",e.totalAmount)}}function J4(n,t){n&1&&(o(0,"div",63),_(1,"i",67),o(2,"span"),l(3,"No Completed Orders"),s()())}function X4(n,t){if(n&1&&(o(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),l(4,"Draft"),s(),o(5,"span",41),l(6),s()(),o(7,"div",42),x(8,q4,28,7,"div",43)(9,z4,4,0,"div",44),s()(),o(10,"div",45)(11,"div",39)(12,"span",40),l(13,"Pending"),s(),o(14,"span",41),l(15),s()(),o(16,"div",42),x(17,Q4,26,7,"div",43)(18,K4,4,0,"div",44),s()(),o(19,"div",46)(20,"div",39)(21,"span",40),l(22,"Completed"),s(),o(23,"span",41),l(24),s()(),o(25,"div",42),x(26,Z4,26,7,"div",43)(27,J4,4,0,"div",44),s()()()),n&2){let e=f();c(6),T("",e.draftPurchases.length," Orders"),c(2),m("ngForOf",e.draftPurchases),c(),m("ngIf",e.draftPurchases.length===0),c(6),T("",e.pendingPurchases.length," Orders"),c(2),m("ngForOf",e.pendingPurchases),c(),m("ngIf",e.pendingPurchases.length===0),c(6),T("",e.completedPurchases.length," Orders"),c(2),m("ngForOf",e.completedPurchases),c(),m("ngIf",e.completedPurchases.length===0)}}function eF(n,t){if(n&1&&(o(0,"option",95),l(1),s()),n&2){let e=t.$implicit;m("ngValue",e.id),c(),g(e.name)}}function tF(n,t){if(n&1&&(o(0,"option",107),l(1),s()),n&2){let e=t.$implicit;m("value",e.code),c(),g(e.code)}}function nF(n,t){if(n&1){let e=O();o(0,"tr")(1,"td")(2,"input",96),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.itemName,r)||(a.itemName=r),y(r)}),s()(),o(3,"td")(4,"input",97),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.description,r)||(a.description=r),y(r)}),s()(),o(5,"td",98)(6,"input",99),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.quantity,r)||(a.quantity=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(7,"td",98)(8,"select",100),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.uom,r)||(a.uom=r),y(r)}),o(9,"option",101),l(10,"-"),s(),x(11,tF,2,2,"option",102),s()(),o(12,"td",98)(13,"input",103),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.rate,r)||(a.rate=r),y(r)}),b("ngModelChange",function(){let r=v(e).$implicit,a=f(2);return y(a.calculateItemAmount(r))}),s()(),o(14,"td",98),_(15,"input",104),s(),o(16,"td")(17,"input",105),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.remarks,r)||(a.remarks=r),y(r)}),s()(),o(18,"td")(19,"button",106),b("click",function(){let r=v(e).index,a=f(2);return y(a.removeItem(r))}),_(20,"i",72),s()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S("ngModel",e.itemName),c(2),S("ngModel",e.description),c(2),S("ngModel",e.quantity),c(2),S("ngModel",e.uom),c(3),m("ngForOf",i.units),c(2),S("ngModel",e.rate),c(2),m("value",e.amount),c(2),S("ngModel",e.remarks),c(2),m("disabled",i.selectedPurchase.items.length<=1)}}function iF(n,t){if(n&1){let e=O();o(0,"div",68),b("click",function(){v(e);let r=f();return y(r.closeModal())}),o(1,"div",69),b("click",function(r){return v(e),y(r.stopPropagation())}),o(2,"div",70)(3,"h2"),l(4),s(),o(5,"button",71),b("click",function(){v(e);let r=f();return y(r.closeModal())}),_(6,"i",72),s()(),o(7,"div",73)(8,"div",74)(9,"h3"),l(10,"Purchase Order Details"),s(),o(11,"div",75)(12,"div",76)(13,"label"),l(14,"PO Type"),s(),_(15,"input",77),s(),o(16,"div",78)(17,"label"),l(18,"Supplier *"),s(),o(19,"select",79),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPurchase.supplierId,r)||(a.selectedPurchase.supplierId=r),y(r)}),o(20,"option",80),l(21,"Select Supplier"),s(),x(22,eF,2,2,"option",81),s()(),o(23,"div",76)(24,"label"),l(25,"Delivery Location"),s(),o(26,"input",82),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPurchase.deliveryLocation,r)||(a.selectedPurchase.deliveryLocation=r),y(r)}),s()()(),o(27,"div",83)(28,"div",76)(29,"label"),l(30,"Payment Terms"),s(),o(31,"input",84),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPurchase.paymentTerms,r)||(a.selectedPurchase.paymentTerms=r),y(r)}),s()(),o(32,"div",76)(33,"label"),l(34,"Delivery Date"),s(),o(35,"input",85),E("ngModelChange",function(r){v(e);let a=f();return M(a.selectedPurchase.deliveryDate,r)||(a.selectedPurchase.deliveryDate=r),y(r)}),s()()()(),o(36,"div",74)(37,"div",86)(38,"h3"),l(39,"Item List"),s(),o(40,"button",87),b("click",function(){v(e);let r=f();return y(r.addItem())}),_(41,"i",5),l(42," Add Item "),s()(),o(43,"div",88)(44,"table",89)(45,"thead")(46,"tr")(47,"th"),l(48,"Item Name"),s(),o(49,"th"),l(50,"Description"),s(),o(51,"th"),l(52,"Qty"),s(),o(53,"th"),l(54,"UOM"),s(),o(55,"th"),l(56,"Rate"),s(),o(57,"th"),l(58,"Amount"),s(),o(59,"th"),l(60,"Remarks"),s(),_(61,"th"),s()(),o(62,"tbody"),x(63,nF,21,9,"tr",27),s(),o(64,"tfoot")(65,"tr")(66,"td",90)(67,"strong"),l(68,"Total Amount:"),s()(),o(69,"td",91)(70,"strong"),l(71),X(72,"number"),s()()()()()()()(),o(73,"div",92)(74,"button",93),b("click",function(){v(e);let r=f();return y(r.closeModal())}),l(75,"Cancel"),s(),o(76,"button",94),b("click",function(){v(e);let r=f();return y(r.savePurchase())}),l(77),s()()()()}if(n&2){let e=f();c(4),g(e.editMode?"Edit Direct PO":"Create Direct PO"),c(15),S("ngModel",e.selectedPurchase.supplierId),c(),m("ngValue",0),c(2),m("ngForOf",e.suppliers),c(4),S("ngModel",e.selectedPurchase.deliveryLocation),c(5),S("ngModel",e.selectedPurchase.paymentTerms),c(4),S("ngModel",e.selectedPurchase.deliveryDate),c(28),m("ngForOf",e.selectedPurchase.items),c(8),g(ee(72,11,e.getTotalAmount(),"1.2-2")),c(5),m("disabled",e.selectedPurchase.supplierId===0),c(),T(" ",e.editMode?"Update":"Save"," ")}}var ap=class n{constructor(t,e,i,r,a){this.directPurchaseService=t;this.supplierService=e;this.unitService=i;this.router=r;this.settingsService=a}purchases=[];suppliers=[];units=[];searchQuery="";showModal=!1;editMode=!1;viewMode="table";selectedPurchase=this.getEmptyPurchase();loading=!1;ngOnInit(){this.loadPurchases(),this.loadSuppliers(),this.loadUnits()}loadPurchases(){this.loading=!0,this.directPurchaseService.getAll().subscribe({next:t=>{this.purchases=t,this.loading=!1},error:t=>{console.error("Error loading direct purchases",t),this.loading=!1}})}loadSuppliers(){this.supplierService.getActive().subscribe({next:t=>this.suppliers=t,error:t=>console.error("Error loading suppliers",t)})}loadUnits(){this.unitService.getActive().subscribe({next:t=>this.units=t,error:t=>console.error("Error loading units",t)})}get filteredPurchases(){if(!this.searchQuery)return this.purchases;let t=this.searchQuery.toLowerCase();return this.purchases.filter(e=>e.poNumber?.toLowerCase().includes(t)||e.supplierName?.toLowerCase().includes(t))}getEmptyPurchase(){return{poType:"Direct Purchase",supplierId:0,supplierName:"",deliveryLocation:"",paymentTerms:"",deliveryDate:"",status:"Draft",items:[]}}getEmptyItem(){return{itemName:"",description:"",quantity:0,uom:"",rate:0,amount:0,remarks:""}}openModal(t){t?(this.editMode=!0,this.selectedPurchase=me(R({},t),{items:[...t.items]})):(this.editMode=!1,this.selectedPurchase=this.getEmptyPurchase(),this.generatePONumber(),this.addItem()),this.showModal=!0}generatePONumber(){this.settingsService.generatePrefixId("po").subscribe({next:t=>{this.selectedPurchase.poNumber=t},error:t=>console.error("Error generating PO number",t)})}closeModal(){this.showModal=!1,this.selectedPurchase=this.getEmptyPurchase()}addItem(){this.selectedPurchase.items.push(this.getEmptyItem())}removeItem(t){this.selectedPurchase.items.length>1&&this.selectedPurchase.items.splice(t,1)}calculateItemAmount(t){t.amount=t.quantity*t.rate}getTotalAmount(){return this.selectedPurchase.items.reduce((t,e)=>t+(e.amount||0),0)}getSupplierName(t){let e=this.suppliers.find(i=>i.id===t);return e?e.name:""}savePurchase(){this.selectedPurchase.totalAmount=this.getTotalAmount(),this.selectedPurchase.supplierName=this.getSupplierName(this.selectedPurchase.supplierId),this.editMode&&this.selectedPurchase.id?this.directPurchaseService.update(this.selectedPurchase.id,this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error updating purchase",t)}):this.directPurchaseService.create(this.selectedPurchase).subscribe({next:()=>{this.loadPurchases(),this.closeModal()},error:t=>console.error("Error creating purchase",t)})}deletePurchase(t){confirm("Are you sure you want to delete this purchase order?")&&this.directPurchaseService.delete(t).subscribe({next:()=>this.loadPurchases(),error:e=>console.error("Error deleting purchase",e)})}viewPurchase(t){this.openModal(t)}getStatusClass(t){switch(t){case"Completed":return"badge-success";case"Pending":return"badge-warning";case"Draft":return"badge-secondary";case"Cancelled":return"badge-danger";default:return"badge-info"}}formatDate(t){return t?new Date(t).toLocaleDateString():"-"}toggleViewMode(){this.viewMode=this.viewMode==="kanban"?"table":"kanban"}get draftPurchases(){return this.filteredPurchases.filter(t=>t.status==="Draft"||t.status?.toLowerCase().includes("draft"))}get pendingPurchases(){return this.filteredPurchases.filter(t=>t.status==="Pending"||t.status==="Pending Approval"||t.status?.toLowerCase().includes("pending"))}get completedPurchases(){return this.filteredPurchases.filter(t=>t.status==="Completed"||t.status==="Approved"||t.status?.toLowerCase().includes("complete"))}printPO(t){t.id&&this.router.navigate(["/app/purchase/direct",t.id,"print"])}static \u0275fac=function(e){return new(e||n)(I(Ko),I(Nt),I(li),I(pe),I(Me))};static \u0275cmp=F({type:n,selectors:[["app-direct-purchase"]],standalone:!1,decls:44,vars:8,consts:[[1,"inventory-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"card-header-row"],[1,"filter-group"],[1,"form-control"],[1,"btn","btn-secondary","btn-sm"],[1,"fas","fa-file-export"],[1,"toolbar-right"],[1,"view-toggle"],["title","Kanban View",1,"toggle-btn",3,"click"],[1,"fas","fa-columns"],["title","Table View",1,"toggle-btn",3,"click"],[1,"fas","fa-table"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search...",3,"ngModelChange","ngModel"],["class","table-container",4,"ngIf"],["class","kanban-board",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"empty-state"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-cart-plus"],[1,"badge",3,"ngClass"],[1,"action-buttons"],["title","View/Edit",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-eye"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"kanban-board"],[1,"kanban-column","draft"],[1,"column-header"],[1,"column-title"],[1,"column-count"],[1,"column-body"],["class","po-card",3,"click",4,"ngFor","ngForOf"],["class","empty-column",4,"ngIf"],[1,"kanban-column","pending"],[1,"kanban-column","completed"],[1,"po-card",3,"click"],[1,"card-header"],[1,"po-number"],[1,"card-supplier"],[1,"card-details"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"card-footer"],[1,"card-actions"],["title","Print",1,"btn-icon","print",3,"click"],[1,"fas","fa-print"],["title","Edit",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-column"],[1,"fas","fa-file-alt"],["title","View",1,"btn-icon",3,"click"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"modal-overlay",3,"click"],[1,"modal","modal-lg",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"form-section"],[1,"grid-3"],[1,"form-group"],["type","text","value","Direct Purchase","readonly","",1,"form-control"],[1,"form-group","required"],["required","",1,"form-control",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","placeholder","Enter delivery location",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-2"],["type","text","placeholder","e.g., Net 30",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"section-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"items-table"],[1,"table","table-compact"],["colspan","5",1,"text-right"],["colspan","3"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[3,"ngValue"],["type","text","placeholder","Item name",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","text","placeholder","Description",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-sm"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","step","0.01",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","readonly","",1,"form-control","form-control-sm",3,"value"],["type","text","placeholder","Remarks",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Direct Purchase"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Purchase Order Management"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Direct Purchase"),s()()(),o(16,"button",4),b("click",function(){return i.openModal()}),_(17,"i",5),l(18," New "),s()(),o(19,"div",6)(20,"div",7)(21,"div",8)(22,"select",9)(23,"option"),l(24,"25"),s(),o(25,"option"),l(26,"50"),s(),o(27,"option"),l(28,"100"),s()(),o(29,"button",10),_(30,"i",11),l(31," Export "),s()(),o(32,"div",12)(33,"div",13)(34,"button",14),b("click",function(){return i.viewMode="kanban"}),_(35,"i",15),s(),o(36,"button",16),b("click",function(){return i.viewMode="table"}),_(37,"i",17),s()(),o(38,"div",18),_(39,"i",19),o(40,"input",20),E("ngModelChange",function(a){return M(i.searchQuery,a)||(i.searchQuery=a),a}),s()()()(),x(41,G4,22,3,"div",21)(42,X4,28,9,"div",22),s()(),x(43,iF,78,14,"div",23)),e&2&&(c(34),ne("active",i.viewMode==="kanban"),c(2),ne("active",i.viewMode==="table"),c(4),S("ngModel",i.searchQuery),c(),m("ngIf",i.viewMode==="table"),c(),m("ngIf",i.viewMode==="kanban"),c(),m("ngIf",i.showModal))},dependencies:[se,V,j,Y,Z,$,Oe,K,q,ln,qe,H,Q,De],styles:['.card-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:80px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e9ecef}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:teal;margin-bottom:16px}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}@media(max-width:768px){.grid-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.items-table[_ngcontent-%COMP%]{overflow-x:auto}.items-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   .col-sm[_ngcontent-%COMP%]{width:80px}.items-table[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:.875rem}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background:#f8f9fa}.items-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.text-right[_ngcontent-%COMP%]{text-align:right}.modal-lg[_ngcontent-%COMP%]{max-width:900px;width:95%}.required[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";color:#dc3545}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #ddd;border-radius:6px;overflow:hidden}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:8px 12px;cursor:pointer;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:teal;color:#fff}.view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.kanban-column[_ngcontent-%COMP%]{background:#e8f4f4;border-radius:8px;overflow:hidden;min-height:400px}.kanban-column.draft[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#6c757d}.kanban-column.pending[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.kanban-column.completed[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{background:#28a745}.column-header[_ngcontent-%COMP%]{padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.column-header[_ngcontent-%COMP%]   .column-count[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.column-body[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 350px);overflow-y:auto}.po-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;box-shadow:0 2px 4px #00000014;transition:all .2s}.po-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.po-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.po-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .po-number[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:15px}.card-supplier[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;margin-bottom:12px}.card-details[_ngcontent-%COMP%]{margin-bottom:12px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-bottom:4px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;width:70px}.card-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.po-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding-top:12px;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#666;border-radius:4px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:teal}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#fee;color:#dc3545}.btn-icon.print[_ngcontent-%COMP%]{color:#6f42c1}.btn-icon.print[_ngcontent-%COMP%]:hover{background:#e2d9f3}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-column[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px;opacity:.5}.empty-column[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}@media(max-width:992px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr}.kanban-column[_ngcontent-%COMP%]{min-height:auto}.column-body[_ngcontent-%COMP%]{max-height:300px}}']})};function rF(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",30),o(3,"p"),l(4,"Generate report to view data"),s()()())}function oF(n,t){n&1&&(o(0,"tr")(1,"td",29),_(2,"i",31),o(3,"p"),l(4,"Loading..."),s()()())}function aF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td"),l(14),X(15,"number"),s(),o(16,"td")(17,"span",32),l(18),s()()()),n&2){let e=t.$implicit,i=f();c(2),g(e.prNumber),c(2),g(e.prDate),c(2),g(e.requiredDate),c(2),g(e.department),c(2),g(e.requestedBy),c(2),g(e.itemCount),c(2),g(ee(15,9,e.totalAmount,"1.2-2")),c(3),m("ngClass",i.getStatusClass(e.status)),c(),g(e.status)}}var sp=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;selectedStatus="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({prNumber:e.prNumber,prDate:e.prDate,requiredDate:e.requiredDate,department:e.department,requestedBy:e.requestedBy,status:e.status,itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedStatus&&(this.reportData=this.reportData.filter(e=>e.status===this.selectedStatus)),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-list-report","Purchase Requisition List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-list-report")}getStatusClass(t){switch(t){case"Draft":return"badge-secondary";case"Submitted":return"badge-info";case"Approved":return"badge-success";case"Rejected":return"badge-danger";case"Partially Fulfilled":return"badge-warning";case"Fully Fulfilled":return"badge-primary";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(I(At),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-pr-list-report"]],standalone:!1,decls:82,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Draft"],["value","Submitted"],["value","Approved"],["value","Rejected"],["value","Partially Fulfilled"],["value","Fully Fulfilled"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-file-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase Requisition List Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"PR List"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Status"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedStatus,a)||(i.selectedStatus=a),a}),o(32,"option",15),l(33,"All Statuses"),s(),o(34,"option",16),l(35,"Draft"),s(),o(36,"option",17),l(37,"Submitted"),s(),o(38,"option",18),l(39,"Approved"),s(),o(40,"option",19),l(41,"Rejected"),s(),o(42,"option",20),l(43,"Partially Fulfilled"),s(),o(44,"option",21),l(45,"Fully Fulfilled"),s()()(),o(46,"div",13)(47,"label"),l(48,"From Date"),s(),o(49,"input",22),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(50,"div",13)(51,"label"),l(52,"To Date"),s(),o(53,"input",22),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(54,"button",23),b("click",function(){return i.generateReport()}),_(55,"i",24),l(56),s()()(),o(57,"div",11)(58,"div",25)(59,"table",26)(60,"thead")(61,"tr")(62,"th"),l(63,"PR Number"),s(),o(64,"th"),l(65,"Date"),s(),o(66,"th"),l(67,"Required Date"),s(),o(68,"th"),l(69,"Department"),s(),o(70,"th"),l(71,"Requested By"),s(),o(72,"th"),l(73,"Items"),s(),o(74,"th"),l(75,"Amount"),s(),o(76,"th"),l(77,"Status"),s()()(),o(78,"tbody"),x(79,rF,5,0,"tr",27)(80,oF,5,0,"tr",27)(81,aF,19,12,"tr",28),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedStatus),c(18),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function sF(n,t){n&1&&(o(0,"tr")(1,"td",19),_(2,"i",20),o(3,"p"),l(4,"No pending PR items found"),s()()())}function lF(n,t){n&1&&(o(0,"tr")(1,"td",19),_(2,"i",21),o(3,"p"),l(4,"Loading..."),s()()())}function cF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td"),l(14),s(),o(15,"td")(16,"strong"),l(17),s()(),o(18,"td"),l(19),s()()),n&2){let e=t.$implicit;c(2),g(e.prNumber),c(2),g(e.prDate),c(2),g(e.itemCode),c(2),g(e.itemName),c(2),g(e.department),c(2),g(e.requestedQty),c(2),g(e.fulfilledQty),c(3),g(e.pendingQty),c(2),g(e.unit)}}var lp=class n{constructor(t,e){this.prService=t;this.exportService=e}reportData=[];loading=!1;ngOnInit(){}generateReport(){this.loading=!0,this.prService.getAll().subscribe({next:t=>{let e=[];t.forEach(i=>{(i.status==="Approved"||i.status==="Partially Fulfilled")&&i.items?.forEach(r=>{let a=(r.quantity||0)-(r.fulfilledQuantity||0);a>0&&e.push({prNumber:i.prNumber,prDate:i.prDate,itemName:r.itemName,itemCode:r.itemCode,requestedQty:r.quantity||0,fulfilledQty:r.fulfilledQuantity||0,pendingQty:a,unit:r.unit||"",department:i.department})})}),this.reportData=e,this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-pending-items-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-pending-items-report","PR Item Pending Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-pending-items-report")}static \u0275fac=function(e){return new(e||n)(I(At),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-pr-pending-report"]],standalone:!1,decls:58,vars:8,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-sync"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"empty-state"],[1,"fas","fa-check-circle"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"PR Item Pending Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"PR Pending"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"button",13),b("click",function(){return i.generateReport()}),_(29,"i",14),l(30),s()()(),o(31,"div",11)(32,"div",15)(33,"table",16)(34,"thead")(35,"tr")(36,"th"),l(37,"PR Number"),s(),o(38,"th"),l(39,"PR Date"),s(),o(40,"th"),l(41,"Item Code"),s(),o(42,"th"),l(43,"Item Name"),s(),o(44,"th"),l(45,"Department"),s(),o(46,"th"),l(47,"Requested"),s(),o(48,"th"),l(49,"Fulfilled"),s(),o(50,"th"),l(51,"Pending"),s(),o(52,"th"),l(53,"Unit"),s()()(),o(54,"tbody"),x(55,sF,5,0,"tr",17)(56,lF,5,0,"tr",17)(57,cF,20,9,"tr",18),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(5),m("disabled",i.loading),c(2),T(" ",i.loading?"Loading...":"Refresh"," "),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,Q],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function dF(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",27),o(3,"p"),l(4,"Generate report to view data"),s()()())}function uF(n,t){n&1&&(o(0,"tr")(1,"td",26),_(2,"i",28),o(3,"p"),l(4,"Loading..."),s()()())}function pF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"span",29),l(9),s()(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td"),l(15),s(),o(16,"td"),l(17),X(18,"number"),s()()),n&2){let e=t.$implicit,i=f();c(2),g(e.referenceNumber),c(2),g(e.prNumber),c(2),g(e.fulfillmentDate),c(2),m("ngClass",i.getTypeClass(e.fulfillmentType)),c(),g(e.fulfillmentType),c(2),g(e.performedBy),c(2),g(e.supplierName!=="-"?e.supplierName:e.warehouseName),c(2),g(e.itemCount),c(2),g(ee(18,9,e.totalAmount,"1.2-2"))}}var cp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.map(e=>({referenceNumber:e.referenceNumber,prNumber:e.prNumber,fulfillmentDate:e.fulfillmentDate,fulfillmentType:e.fulfillmentType,performedBy:e.performedBy,supplierName:e.supplierName||"-",warehouseName:e.warehouseName||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0})),this.selectedType&&(this.reportData=this.reportData.filter(e=>e.fulfillmentType===this.selectedType)),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"pr-fulfillment-history-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"pr-fulfillment-history-report","PR Fulfillment History Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"pr-fulfillment-history-report")}getTypeClass(t){switch(t){case"Convert to PO":return"badge-primary";case"Stock Issue":return"badge-success";case"Material Transfer":return"badge-info";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||n)(I(ft),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-pr-history-report"]],standalone:!1,decls:76,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Convert to PO"],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-history"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"PR Fulfillment History Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"PR History"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Fulfillment Type"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedType,a)||(i.selectedType=a),a}),o(32,"option",15),l(33,"All Types"),s(),o(34,"option",16),l(35,"Convert to PO"),s(),o(36,"option",17),l(37,"Stock Issue"),s(),o(38,"option",18),l(39,"Material Transfer"),s()()(),o(40,"div",13)(41,"label"),l(42,"From Date"),s(),o(43,"input",19),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(44,"div",13)(45,"label"),l(46,"To Date"),s(),o(47,"input",19),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(48,"button",20),b("click",function(){return i.generateReport()}),_(49,"i",21),l(50),s()()(),o(51,"div",11)(52,"div",22)(53,"table",23)(54,"thead")(55,"tr")(56,"th"),l(57,"Reference #"),s(),o(58,"th"),l(59,"PR Number"),s(),o(60,"th"),l(61,"Date"),s(),o(62,"th"),l(63,"Type"),s(),o(64,"th"),l(65,"Performed By"),s(),o(66,"th"),l(67,"Supplier/Warehouse"),s(),o(68,"th"),l(69,"Items"),s(),o(70,"th"),l(71,"Amount"),s()()(),o(72,"tbody"),x(73,dF,5,0,"tr",24)(74,uF,5,0,"tr",24)(75,pF,19,12,"tr",25),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedType),c(12),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function mF(n,t){n&1&&(o(0,"tr")(1,"td",21),_(2,"i",22),o(3,"p"),l(4,"Generate report to view data"),s()()())}function fF(n,t){n&1&&(o(0,"tr")(1,"td",21),_(2,"i",23),o(3,"p"),l(4,"Loading..."),s()()())}function gF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td"),l(14),X(15,"number"),s(),o(16,"td")(17,"span",24),l(18),s()()()),n&2){let e=t.$implicit;c(2),g(e.poNumber),c(2),g(e.poDate),c(2),g(e.prNumber),c(2),g(e.supplierName),c(2),g(e.expectedDelivery),c(2),g(e.itemCount),c(2),g(ee(15,8,e.totalAmount,"1.2-2")),c(4),g(e.status)}}var dp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>e.fulfillmentType==="Convert to PO"||e.fulfillmentType==="PO").map(e=>({poNumber:e.referenceNumber,poDate:e.fulfillmentDate,prNumber:e.prNumber,supplierName:e.supplierName||"-",expectedDelivery:e.expectedDeliveryDate||"-",itemCount:e.items?.length||0,totalAmount:e.totalAmount||0,status:"Created"})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"po-list-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"po-list-report","Purchase Order List Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"po-list-report")}static \u0275fac=function(e){return new(e||n)(I(ft),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-po-list-report"]],standalone:!1,decls:64,vars:10,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-cart"],[1,"fas","fa-spinner","fa-spin"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Purchase Order List Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"PO List"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"From Date"),s(),o(31,"input",14),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(32,"div",13)(33,"label"),l(34,"To Date"),s(),o(35,"input",14),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(36,"button",15),b("click",function(){return i.generateReport()}),_(37,"i",16),l(38),s()()(),o(39,"div",11)(40,"div",17)(41,"table",18)(42,"thead")(43,"tr")(44,"th"),l(45,"PO Number"),s(),o(46,"th"),l(47,"Date"),s(),o(48,"th"),l(49,"PR Number"),s(),o(50,"th"),l(51,"Supplier"),s(),o(52,"th"),l(53,"Expected Delivery"),s(),o(54,"th"),l(55,"Items"),s(),o(56,"th"),l(57,"Amount"),s(),o(58,"th"),l(59,"Status"),s()()(),o(60,"tbody"),x(61,mF,5,0,"tr",19)(62,fF,5,0,"tr",19)(63,gF,19,11,"tr",20),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,$,q,H,Q,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function hF(n,t){n&1&&(o(0,"tr")(1,"td",21),_(2,"i",22),o(3,"p"),l(4,"Generate report to view data"),s()()())}function _F(n,t){n&1&&(o(0,"tr")(1,"td",21),_(2,"i",23),o(3,"p"),l(4,"Loading..."),s()()())}function vF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),X(13,"number"),s(),o(14,"td"),l(15),X(16,"number"),s(),o(17,"td")(18,"span",24),l(19),s()()()),n&2){let e=t.$implicit;c(2),g(e.dpNumber),c(2),g(e.date),c(2),g(e.supplier),c(2),g(e.item),c(2),g(e.quantity),c(2),g(ee(13,8,e.rate,"1.2-2")),c(3),g(ee(16,11,e.amount,"1.2-2")),c(4),g(e.status)}}var up=class n{constructor(t){this.exportService=t}reportData=[];loading=!1;fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,setTimeout(()=>{this.reportData=[],this.loading=!1},500)}exportToExcel(){this.exportService.exportToExcel(this.reportData,"direct-purchase-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"direct-purchase-report","Direct Purchase Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"direct-purchase-report")}static \u0275fac=function(e){return new(e||n)(I(ke))};static \u0275cmp=F({type:n,selectors:[["app-direct-purchase-report"]],standalone:!1,decls:64,vars:10,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"empty-state"],[1,"fas","fa-shopping-bag"],[1,"fas","fa-spinner","fa-spin"],[1,"badge","badge-success"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Direct Purchase Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Direct Purchase"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"From Date"),s(),o(31,"input",14),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(32,"div",13)(33,"label"),l(34,"To Date"),s(),o(35,"input",14),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(36,"button",15),b("click",function(){return i.generateReport()}),_(37,"i",16),l(38),s()()(),o(39,"div",11)(40,"div",17)(41,"table",18)(42,"thead")(43,"tr")(44,"th"),l(45,"DP Number"),s(),o(46,"th"),l(47,"Date"),s(),o(48,"th"),l(49,"Supplier"),s(),o(50,"th"),l(51,"Item"),s(),o(52,"th"),l(53,"Quantity"),s(),o(54,"th"),l(55,"Rate"),s(),o(56,"th"),l(57,"Amount"),s(),o(58,"th"),l(59,"Status"),s()()(),o(60,"tbody"),x(61,hF,5,0,"tr",19)(62,_F,5,0,"tr",19)(63,vF,20,14,"tr",20),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(23),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[V,j,$,q,H,Q,De],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};function yF(n,t){n&1&&(o(0,"tr")(1,"td",25),_(2,"i",26),o(3,"p"),l(4,"Generate report to view data"),s()()())}function bF(n,t){n&1&&(o(0,"tr")(1,"td",25),_(2,"i",27),o(3,"p"),l(4,"Loading..."),s()()())}function CF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td")(6,"span",28),l(7),s()(),o(8,"td"),l(9),s(),o(10,"td"),l(11),s(),o(12,"td"),l(13),s(),o(14,"td"),l(15),s(),o(16,"td"),l(17),s(),o(18,"td"),l(19),s()()),n&2){let e=t.$implicit,i=f();c(2),g(e.referenceNumber),c(2),g(e.date),c(2),m("ngClass",i.getTypeClass(e.type)),c(),g(e.type),c(2),g(e.prNumber),c(2),g(e.warehouse),c(2),g(e.sourceLocation),c(2),g(e.targetLocation),c(2),g(e.performedBy),c(2),g(e.itemCount)}}var pp=class n{constructor(t,e){this.fulfillmentService=t;this.exportService=e}reportData=[];loading=!1;selectedType="";fromDate="";toDate="";ngOnInit(){}generateReport(){this.loading=!0,this.fulfillmentService.getAll().subscribe({next:t=>{this.reportData=t.filter(e=>this.selectedType==="Stock Issue"?e.fulfillmentType==="Stock Issue":this.selectedType==="Material Transfer"?e.fulfillmentType==="Material Transfer":e.fulfillmentType==="Stock Issue"||e.fulfillmentType==="Material Transfer").map(e=>({referenceNumber:e.referenceNumber,date:e.fulfillmentDate,type:e.fulfillmentType,prNumber:e.prNumber,warehouse:e.warehouseName||"-",sourceLocation:e.sourceLocation||"-",targetLocation:e.targetLocation||"-",performedBy:e.performedBy,itemCount:e.items?.length||0})),this.loading=!1},error:t=>{console.error("Error generating report",t),this.loading=!1}})}exportToExcel(){this.exportService.exportToExcel(this.reportData,"stock-issue-transfer-report")}exportToPDF(){this.exportService.exportToPDF(this.reportData,"stock-issue-transfer-report","Stock Issue / Transfer Report")}exportToCSV(){this.exportService.exportToCSV(this.reportData,"stock-issue-transfer-report")}getTypeClass(t){return t==="Stock Issue"?"badge-success":"badge-info"}static \u0275fac=function(e){return new(e||n)(I(ft),I(ke))};static \u0275cmp=F({type:n,selectors:[["app-stock-issue-transfer-report"]],standalone:!1,decls:76,vars:11,consts:[[1,"report-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],[1,"export-buttons"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-file-csv"],[1,"card"],[1,"filters-row"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Stock Issue"],["value","Material Transfer"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","filter-btn",3,"click","disabled"],[1,"fas","fa-filter"],[1,"table-container"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"empty-state"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-spinner","fa-spin"],[1,"badge",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Stock Issue / Transfer Report"),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"span"),l(11,"Reports"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15,"Stock Issue/Transfer"),s()()(),o(16,"div",4)(17,"button",5),b("click",function(){return i.exportToExcel()}),_(18,"i",6),l(19," Excel "),s(),o(20,"button",7),b("click",function(){return i.exportToPDF()}),_(21,"i",8),l(22," PDF "),s(),o(23,"button",9),b("click",function(){return i.exportToCSV()}),_(24,"i",10),l(25," CSV "),s()()(),o(26,"div",11)(27,"div",12)(28,"div",13)(29,"label"),l(30,"Type"),s(),o(31,"select",14),E("ngModelChange",function(a){return M(i.selectedType,a)||(i.selectedType=a),a}),o(32,"option",15),l(33,"All Types"),s(),o(34,"option",16),l(35,"Stock Issue"),s(),o(36,"option",17),l(37,"Material Transfer"),s()()(),o(38,"div",13)(39,"label"),l(40,"From Date"),s(),o(41,"input",18),E("ngModelChange",function(a){return M(i.fromDate,a)||(i.fromDate=a),a}),s()(),o(42,"div",13)(43,"label"),l(44,"To Date"),s(),o(45,"input",18),E("ngModelChange",function(a){return M(i.toDate,a)||(i.toDate=a),a}),s()(),o(46,"button",19),b("click",function(){return i.generateReport()}),_(47,"i",20),l(48),s()()(),o(49,"div",11)(50,"div",21)(51,"table",22)(52,"thead")(53,"tr")(54,"th"),l(55,"Reference #"),s(),o(56,"th"),l(57,"Date"),s(),o(58,"th"),l(59,"Type"),s(),o(60,"th"),l(61,"PR Number"),s(),o(62,"th"),l(63,"Warehouse"),s(),o(64,"th"),l(65,"Source"),s(),o(66,"th"),l(67,"Target"),s(),o(68,"th"),l(69,"Performed By"),s(),o(70,"th"),l(71,"Items"),s()()(),o(72,"tbody"),x(73,yF,5,0,"tr",23)(74,bF,5,0,"tr",23)(75,CF,20,10,"tr",24),s()()()()()),e&2&&(c(17),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(3),m("disabled",i.reportData.length===0),c(8),S("ngModel",i.selectedType),c(10),S("ngModel",i.fromDate),c(4),S("ngModel",i.toDate),c(),m("disabled",i.loading),c(2),T(" ",i.loading?"Generating...":"Generate"," "),c(25),m("ngIf",i.reportData.length===0&&!i.loading),c(),m("ngIf",i.loading),c(),m("ngForOf",i.reportData))},dependencies:[se,V,j,Y,Z,$,K,q,H,Q],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}"]})};var Zi=class n{constructor(t){this.http=t}apiUrl="/api/audit";getAll(t){let e=new kt;return t&&(t.module&&(e=e.set("module",t.module)),t.entityType&&(e=e.set("entityType",t.entityType)),t.action&&(e=e.set("action",t.action)),t.performedBy&&(e=e.set("performedBy",t.performedBy)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate)),t.searchTerm&&(e=e.set("search",t.searchTerm))),this.http.get(this.apiUrl,{params:e}).pipe(nn(()=>ce([])))}getByModule(t,e){let i=new kt().set("module",t);return e&&(e.entityType&&(i=i.set("entityType",e.entityType)),e.action&&(i=i.set("action",e.action)),e.performedBy&&(i=i.set("performedBy",e.performedBy)),e.startDate&&(i=i.set("startDate",e.startDate)),e.endDate&&(i=i.set("endDate",e.endDate)),e.searchTerm&&(i=i.set("search",e.searchTerm))),this.http.get(this.apiUrl,{params:i}).pipe(nn(()=>ce([])))}getSystemAudits(t){return this.getByModule("SYSTEM",t)}getInventoryAudits(t){let e=new kt().set("modules","INVENTORY,STOCK_MOVEMENT");return this.http.get(this.apiUrl,{params:e}).pipe(nn(()=>ce([])))}getPurchaseAudits(t){return this.getByModule("PURCHASE",t)}getByEntityId(t,e){return this.http.get(`${this.apiUrl}/entity/${t}/${e}`).pipe(nn(()=>ce([])))}exportToExcel(t){let e=new kt;return t&&(t.module&&(e=e.set("module",t.module)),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate))),this.http.get(`${this.apiUrl}/export`,{params:e,responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function xF(n,t){if(n&1&&(o(0,"option",20),l(1),s()),n&2){let e=t.$implicit,i=f();m("value",e),c(),g(i.formatAction(e))}}function SF(n,t){n&1&&(o(0,"div",21),_(1,"i",22),l(2," Loading... "),s())}function EF(n,t){if(n&1&&(o(0,"tr")(1,"td",26),l(2),s(),o(3,"td")(4,"span",27),l(5),s()(),o(6,"td"),l(7),s(),o(8,"td"),l(9),s(),o(10,"td",28),_(11,"i",29),l(12),s(),o(13,"td",30),l(14),s(),o(15,"td"),l(16),s()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),T(" ",i.formatAction(e.action)," "),c(2),g(e.entityType),c(2),g(e.entityName||"-"),c(3),T(" ",e.performedBy," "),c(2),g(e.details||"-"),c(2),g(e.ipAddress||"-")}}function MF(n,t){n&1&&(o(0,"tr")(1,"td",31),_(2,"i",32),o(3,"p"),l(4,"No audit records found"),s()()())}function wF(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),s(),o(5,"th"),l(6,"Action"),s(),o(7,"th"),l(8,"Entity Type"),s(),o(9,"th"),l(10,"Entity Name"),s(),o(11,"th"),l(12,"Performed By"),s(),o(13,"th"),l(14,"Details"),s(),o(15,"th"),l(16,"IP Address"),s()()(),o(17,"tbody"),x(18,EF,17,8,"tr",24)(19,MF,5,0,"tr",25),s()()),n&2){let e=f();c(18),m("ngForOf",e.filteredAudits),c(),m("ngIf",e.filteredAudits.length===0)}}function IF(n,t){if(n&1&&(o(0,"div",33),l(1),s()),n&2){let e=f();c(),de(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var mp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";startDate="";endDate="";actions=["LOGIN","LOGOUT","PASSWORD_CHANGED","SETTINGS_UPDATED","CREATED","UPDATED","DELETED"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getSystemAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=this.isWithinDateRange(t.timestamp);return e&&i&&r})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"LOGIN":return"badge-success";case"UPDATED":case"SETTINGS_UPDATED":return"badge-info";case"DELETED":case"LOGOUT":return"badge-warning";case"PASSWORD_CHANGED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}exportToExcel(){this.auditService.exportToExcel({module:"SYSTEM"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`system-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(Zi))};static \u0275cmp=F({type:n,selectors:[["app-system-audits"]],standalone:!1,decls:38,vars:8,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by user, entity, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],["colspan","7",1,"empty-state"],[1,"fas","fa-history"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"System Audits"),s(),o(4,"p",2),l(5,"Track system-level activities including logins, settings changes, and user management"),s()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),s(),o(11,"input",6),E("ngModelChange",function(a){return M(i.searchTerm,a)||(i.searchTerm=a),a}),b("input",function(){return i.applyFilters()}),s()(),o(12,"div",5)(13,"label"),l(14,"Action Type"),s(),o(15,"select",7),E("ngModelChange",function(a){return M(i.selectedAction,a)||(i.selectedAction=a),a}),b("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Actions"),s(),x(18,xF,2,2,"option",9),s()(),o(19,"div",5)(20,"label"),l(21,"Start Date"),s(),o(22,"input",10),E("ngModelChange",function(a){return M(i.startDate,a)||(i.startDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(23,"div",5)(24,"label"),l(25,"End Date"),s(),o(26,"input",10),E("ngModelChange",function(a){return M(i.endDate,a)||(i.endDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(27,"div",11)(28,"button",12),b("click",function(){return i.clearFilters()}),_(29,"i",13),l(30," Clear "),s(),o(31,"button",14),b("click",function(){return i.exportToExcel()}),_(32,"i",15),l(33," Export "),s()()()(),o(34,"div",16),x(35,SF,3,0,"div",17)(36,wF,20,2,"table",18),s(),x(37,IF,2,2,"div",19),s()),e&2&&(c(11),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",!i.loading))},dependencies:[se,V,j,Y,Z,$,K,q,H],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:180px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.details-cell[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function DF(n,t){if(n&1&&(o(0,"option",20),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function PF(n,t){if(n&1&&(o(0,"option",20),l(1),s()),n&2){let e=t.$implicit,i=f();m("value",e),c(),g(i.formatAction(e))}}function TF(n,t){n&1&&(o(0,"div",21),_(1,"i",22),l(2," Loading... "),s())}function OF(n,t){if(n&1&&(o(0,"span",35)(1,"span",36),l(2),s(),_(3,"i",37),o(4,"span",38),l(5),s()()),n&2){let e=f().$implicit;c(2),g(e.previousValue),c(3),g(e.newValue)}}function kF(n,t){n&1&&(o(0,"span"),l(1,"-"),s())}function RF(n,t){if(n&1&&(o(0,"tr")(1,"td",26),l(2),s(),o(3,"td")(4,"span",27),l(5),s()(),o(6,"td")(7,"span",28),_(8,"i",29),l(9),s()(),o(10,"td"),l(11),s(),o(12,"td",30),x(13,OF,6,2,"span",31)(14,kF,2,0,"span",25),s(),o(15,"td",32),_(16,"i",33),l(17),s(),o(18,"td",34),l(19),s()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),T(" ",i.formatAction(e.action)," "),c(4),T(" ",e.entityType," "),c(2),g(e.entityName||"-"),c(2),m("ngIf",e.previousValue&&e.newValue),c(),m("ngIf",!e.previousValue||!e.newValue),c(3),T(" ",e.performedBy," "),c(2),g(e.details||"-")}}function NF(n,t){n&1&&(o(0,"tr")(1,"td",39),_(2,"i",40),o(3,"p"),l(4,"No inventory audit records found"),s()()())}function AF(n,t){if(n&1&&(o(0,"table",23)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),s(),o(5,"th"),l(6,"Action"),s(),o(7,"th"),l(8,"Entity Type"),s(),o(9,"th"),l(10,"Entity Name"),s(),o(11,"th"),l(12,"Changes"),s(),o(13,"th"),l(14,"Performed By"),s(),o(15,"th"),l(16,"Details"),s()()(),o(17,"tbody"),x(18,RF,20,9,"tr",24)(19,NF,5,0,"tr",25),s()()),n&2){let e=f();c(18),m("ngForOf",e.filteredAudits),c(),m("ngIf",e.filteredAudits.length===0)}}function FF(n,t){if(n&1&&(o(0,"div",41),l(1),s()),n&2){let e=f();c(),de(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var fp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STOCK_ISSUED","STOCK_TRANSFERRED"];entityTypes=["Item","Group","Warehouse","Bin","Supplier","Unit","GRN","Stock Issue","Stock Transfer","Stock Adjustment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getInventoryAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,a=this.isWithinDateRange(t.timestamp);return e&&i&&r&&a})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"ITEM_ADDED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":return"badge-info";case"DELETED":case"ITEM_REMOVED":return"badge-danger";case"STOCK_ISSUED":return"badge-warning";case"STOCK_TRANSFERRED":return"badge-primary";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getChangeIndicator(t){return t.previousValue&&t.newValue?`${t.previousValue} \u2192 ${t.newValue}`:"-"}exportToExcel(){this.auditService.exportToExcel({module:"INVENTORY"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`inventory-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(Zi))};static \u0275cmp=F({type:n,selectors:[["app-inventory-audits"]],standalone:!1,decls:45,vars:10,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by item, user, or details...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"badge",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-box"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"fas","fa-arrow-right"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-boxes"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Inventory Audits"),s(),o(4,"p",2),l(5,"Track all inventory-related changes including items, stock movements, and warehouse operations"),s()(),o(6,"div",3)(7,"div",4)(8,"div",5)(9,"label"),l(10,"Search"),s(),o(11,"input",6),E("ngModelChange",function(a){return M(i.searchTerm,a)||(i.searchTerm=a),a}),b("input",function(){return i.applyFilters()}),s()(),o(12,"div",5)(13,"label"),l(14,"Entity Type"),s(),o(15,"select",7),E("ngModelChange",function(a){return M(i.selectedEntityType,a)||(i.selectedEntityType=a),a}),b("change",function(){return i.applyFilters()}),o(16,"option",8),l(17,"All Types"),s(),x(18,DF,2,2,"option",9),s()(),o(19,"div",5)(20,"label"),l(21,"Action"),s(),o(22,"select",7),E("ngModelChange",function(a){return M(i.selectedAction,a)||(i.selectedAction=a),a}),b("change",function(){return i.applyFilters()}),o(23,"option",8),l(24,"All Actions"),s(),x(25,PF,2,2,"option",9),s()(),o(26,"div",5)(27,"label"),l(28,"Start Date"),s(),o(29,"input",10),E("ngModelChange",function(a){return M(i.startDate,a)||(i.startDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(30,"div",5)(31,"label"),l(32,"End Date"),s(),o(33,"input",10),E("ngModelChange",function(a){return M(i.endDate,a)||(i.endDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(34,"div",11)(35,"button",12),b("click",function(){return i.clearFilters()}),_(36,"i",13),l(37," Clear "),s(),o(38,"button",14),b("click",function(){return i.exportToExcel()}),_(39,"i",15),l(40," Export "),s()()()(),o(41,"div",16),x(42,TF,3,0,"div",17)(43,AF,20,2,"table",18),s(),x(44,FF,2,2,"div",19),s()),e&2&&(c(11),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedEntityType),c(3),m("ngForOf",i.entityTypes),c(4),S("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",!i.loading))},dependencies:[se,V,j,Y,Z,$,K,q,H],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function LF(n,t){if(n&1&&(o(0,"option",31),l(1),s()),n&2){let e=t.$implicit;m("value",e),c(),g(e)}}function VF(n,t){if(n&1&&(o(0,"option",31),l(1),s()),n&2){let e=t.$implicit,i=f();m("value",e),c(),g(i.formatAction(e))}}function jF(n,t){n&1&&(o(0,"div",32),_(1,"i",33),l(2," Loading... "),s())}function BF(n,t){if(n&1&&(o(0,"span",48)(1,"span",49),l(2),s(),_(3,"i",12),o(4,"span",50),l(5),s()()),n&2){let e=f().$implicit;c(2),g(e.previousValue),c(3),g(e.newValue)}}function WF(n,t){n&1&&(o(0,"span"),l(1,"-"),s())}function UF(n,t){if(n&1&&(o(0,"tr")(1,"td",37),l(2),s(),o(3,"td")(4,"span",38),_(5,"i",39),l(6),s()(),o(7,"td")(8,"span",40),_(9,"i",41),l(10),s()(),o(11,"td",42),l(12),s(),o(13,"td",43),x(14,BF,6,2,"span",44)(15,WF,2,0,"span",36),s(),o(16,"td",45),_(17,"i",46),l(18),s(),o(19,"td",47),l(20),s()()),n&2){let e=t.$implicit,i=f(2);c(2),g(i.formatDate(e.timestamp)),c(2),m("ngClass",i.getActionClass(e.action)),c(),m("ngClass",i.getWorkflowIcon(e.action)),c(),T(" ",i.formatAction(e.action)," "),c(4),T(" ",e.entityType," "),c(2),g(e.entityName||"-"),c(2),m("ngIf",e.previousValue&&e.newValue),c(),m("ngIf",!e.previousValue||!e.newValue),c(3),T(" ",e.performedBy," "),c(2),g(e.details||"-")}}function GF(n,t){n&1&&(o(0,"tr")(1,"td",51),_(2,"i",52),o(3,"p"),l(4,"No purchase audit records found"),s()()())}function HF(n,t){if(n&1&&(o(0,"table",34)(1,"thead")(2,"tr")(3,"th"),l(4,"Timestamp"),s(),o(5,"th"),l(6,"Action"),s(),o(7,"th"),l(8,"Document Type"),s(),o(9,"th"),l(10,"Document No."),s(),o(11,"th"),l(12,"Changes"),s(),o(13,"th"),l(14,"Performed By"),s(),o(15,"th"),l(16,"Details"),s()()(),o(17,"tbody"),x(18,UF,21,10,"tr",35)(19,GF,5,0,"tr",36),s()()),n&2){let e=f();c(18),m("ngForOf",e.filteredAudits),c(),m("ngIf",e.filteredAudits.length===0)}}function qF(n,t){if(n&1&&(o(0,"div",53),l(1),s()),n&2){let e=f();c(),de(" Showing ",e.filteredAudits.length," of ",e.audits.length," records ")}}var gp=class n{constructor(t){this.auditService=t}audits=[];filteredAudits=[];loading=!1;searchTerm="";selectedAction="";selectedEntityType="";startDate="";endDate="";actions=["CREATED","UPDATED","DELETED","SUBMITTED","APPROVED","REJECTED","CONVERTED_TO_PO","STOCK_ISSUED","STOCK_TRANSFERRED","QUANTITY_MODIFIED","ITEM_ADDED","ITEM_REMOVED","STATUS_CHANGED"];entityTypes=["Purchase Requisition","Purchase Order","Direct Purchase","PR Fulfillment"];ngOnInit(){this.loadAudits()}loadAudits(){this.loading=!0,this.auditService.getPurchaseAudits().subscribe({next:t=>{this.audits=t,this.applyFilters(),this.loading=!1},error:()=>{this.audits=[],this.filteredAudits=[],this.loading=!1}})}applyFilters(){this.filteredAudits=this.audits.filter(t=>{let e=!this.searchTerm||t.entityName?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.performedBy?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.details?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=!this.selectedAction||t.action===this.selectedAction,r=!this.selectedEntityType||t.entityType===this.selectedEntityType,a=this.isWithinDateRange(t.timestamp);return e&&i&&r&&a})}isWithinDateRange(t){if(!this.startDate&&!this.endDate)return!0;let e=new Date(t);return!(this.startDate&&e<new Date(this.startDate)||this.endDate&&e>new Date(this.endDate+"T23:59:59"))}clearFilters(){this.searchTerm="",this.selectedAction="",this.selectedEntityType="",this.startDate="",this.endDate="",this.applyFilters()}getActionClass(t){switch(t){case"CREATED":case"APPROVED":return"badge-success";case"UPDATED":case"QUANTITY_MODIFIED":case"STATUS_CHANGED":return"badge-info";case"DELETED":case"REJECTED":return"badge-danger";case"SUBMITTED":return"badge-warning";case"CONVERTED_TO_PO":return"badge-primary";case"STOCK_ISSUED":case"STOCK_TRANSFERRED":return"badge-teal";default:return"badge-secondary"}}formatAction(t){return t.replace(/_/g," ")}formatDate(t){return t?new Date(t).toLocaleString():"-"}getWorkflowIcon(t){switch(t){case"CREATED":return"fa-plus-circle";case"SUBMITTED":return"fa-paper-plane";case"APPROVED":return"fa-check-circle";case"REJECTED":return"fa-times-circle";case"CONVERTED_TO_PO":return"fa-exchange-alt";case"STOCK_ISSUED":return"fa-arrow-right";case"STOCK_TRANSFERRED":return"fa-truck";case"QUANTITY_MODIFIED":return"fa-edit";default:return"fa-history"}}exportToExcel(){this.auditService.exportToExcel({module:"PURCHASE"}).subscribe(t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`purchase-audits-${new Date().toISOString().split("T")[0]}.xlsx`,i.click()})}static \u0275fac=function(e){return new(e||n)(I(Zi))};static \u0275cmp=F({type:n,selectors:[["app-purchase-audits"]],standalone:!1,decls:70,vars:10,consts:[[1,"audit-container"],[1,"page-header"],[1,"subtitle"],[1,"audit-legend"],[1,"legend-title"],[1,"legend-items"],[1,"legend-item"],[1,"fas","fa-plus-circle"],[1,"fas","fa-paper-plane"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-arrow-right"],[1,"fas","fa-truck"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by PR/PO number, user...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-excel"],[1,"table-container"],["class","loading-overlay",4,"ngIf"],["class","data-table",4,"ngIf"],["class","results-summary",4,"ngIf"],[3,"value"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp-cell"],[1,"action-badge",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"entity-type"],[1,"fas","fa-file-alt"],[1,"doc-number"],[1,"changes-cell"],["class","change-indicator",4,"ngIf"],[1,"user-cell"],[1,"fas","fa-user"],[1,"details-cell"],[1,"change-indicator"],[1,"old-value"],[1,"new-value"],["colspan","7",1,"empty-state"],[1,"fas","fa-clipboard-list"],[1,"results-summary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Purchase Audits"),s(),o(4,"p",2),l(5,"Complete audit trail for purchase requisitions, orders, and fulfillment workflows"),s()(),o(6,"div",3)(7,"div",4),l(8,"Workflow Tracking:"),s(),o(9,"div",5)(10,"span",6),_(11,"i",7),l(12," Created"),s(),o(13,"span",6),_(14,"i",8),l(15," Submitted"),s(),o(16,"span",6),_(17,"i",9),l(18," Approved"),s(),o(19,"span",6),_(20,"i",10),l(21," Rejected"),s(),o(22,"span",6),_(23,"i",11),l(24," Converted to PO"),s(),o(25,"span",6),_(26,"i",12),l(27," Stock Issued"),s(),o(28,"span",6),_(29,"i",13),l(30," Transferred"),s()()(),o(31,"div",14)(32,"div",15)(33,"div",16)(34,"label"),l(35,"Search"),s(),o(36,"input",17),E("ngModelChange",function(a){return M(i.searchTerm,a)||(i.searchTerm=a),a}),b("input",function(){return i.applyFilters()}),s()(),o(37,"div",16)(38,"label"),l(39,"Document Type"),s(),o(40,"select",18),E("ngModelChange",function(a){return M(i.selectedEntityType,a)||(i.selectedEntityType=a),a}),b("change",function(){return i.applyFilters()}),o(41,"option",19),l(42,"All Types"),s(),x(43,LF,2,2,"option",20),s()(),o(44,"div",16)(45,"label"),l(46,"Action"),s(),o(47,"select",18),E("ngModelChange",function(a){return M(i.selectedAction,a)||(i.selectedAction=a),a}),b("change",function(){return i.applyFilters()}),o(48,"option",19),l(49,"All Actions"),s(),x(50,VF,2,2,"option",20),s()(),o(51,"div",16)(52,"label"),l(53,"Start Date"),s(),o(54,"input",21),E("ngModelChange",function(a){return M(i.startDate,a)||(i.startDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(55,"div",16)(56,"label"),l(57,"End Date"),s(),o(58,"input",21),E("ngModelChange",function(a){return M(i.endDate,a)||(i.endDate=a),a}),b("change",function(){return i.applyFilters()}),s()(),o(59,"div",22)(60,"button",23),b("click",function(){return i.clearFilters()}),_(61,"i",24),l(62," Clear "),s(),o(63,"button",25),b("click",function(){return i.exportToExcel()}),_(64,"i",26),l(65," Export "),s()()()(),o(66,"div",27),x(67,jF,3,0,"div",28)(68,HF,20,2,"table",29),s(),x(69,qF,2,2,"div",30),s()),e&2&&(c(36),S("ngModel",i.searchTerm),c(4),S("ngModel",i.selectedEntityType),c(3),m("ngForOf",i.entityTypes),c(4),S("ngModel",i.selectedAction),c(3),m("ngForOf",i.actions),c(4),S("ngModel",i.startDate),c(4),S("ngModel",i.endDate),c(9),m("ngIf",i.loading),c(),m("ngIf",!i.loading),c(),m("ngIf",!i.loading))},dependencies:[se,V,j,Y,Z,$,K,q,H],styles:[".audit-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.95rem}.audit-legend[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f2f2,#f8f9fa);border:1px solid #b8d4d4;border-radius:8px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-title[_ngcontent-%COMP%]{font-weight:600;color:teal;font-size:.9rem}.audit-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:#555}.audit-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #00000014}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:.9rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#066}.btn.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden;position:relative}.loading-overlay[_ngcontent-%COMP%]{padding:60px;text-align:center;color:teal;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#333;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.timestamp-cell[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap}.user-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .entity-type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:teal;margin-right:6px}.doc-number[_ngcontent-%COMP%]{font-weight:600;color:teal}.action-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:600;display:inline-flex;align-items:center;gap:6px}.action-badge.badge-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.action-badge.badge-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.action-badge.badge-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.action-badge.badge-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.action-badge.badge-primary[_ngcontent-%COMP%]{background:#e0f2f2;color:teal}.action-badge.badge-teal[_ngcontent-%COMP%]{background:teal;color:#fff}.action-badge.badge-secondary[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .old-value[_ngcontent-%COMP%]{color:#dc3545;text-decoration:line-through}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:.75rem}.changes-cell[_ngcontent-%COMP%]   .change-indicator[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.details-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666;font-size:.9rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px!important;color:#999}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.results-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:6px;font-size:.9rem;color:#666}"]})};function zF(n,t){if(n&1&&(o(0,"div",45)(1,"label"),l(2,"Purpose:"),s(),o(3,"p",46),l(4),s()()),n&2){let e=f(2);c(4),g(e.pr.purpose)}}function $F(n,t){if(n&1&&(o(0,"tr")(1,"td",34),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td",34),l(8),s(),o(9,"td",34),l(10),s(),o(11,"td",34),l(12),s(),o(13,"td",34),l(14),s(),o(15,"td",34)(16,"span",47),l(17),s()()()),n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(2),g(e.itemName),c(2),g(e.itemDescription),c(2),g(e.quantity),c(2),g(e.fulfilledQuantity||0),c(2),g(r.getPendingQty(e)),c(2),g(e.uom),c(2),Cn((e.status||"Pending").toLowerCase().replace(" ","-")),c(),T(" ",e.status||"Pending"," ")}}function QF(n,t){if(n&1&&(o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td",34),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s()()),n&2){let e=t.$implicit;c(2),g(e.date),c(2),g(e.action),c(2),g(e.itemName),c(2),g(e.quantity),c(2),g(e.performedBy),c(2),g(e.reference)}}function KF(n,t){if(n&1&&(o(0,"div",48)(1,"h3",23),l(2,"Fulfillment History"),s(),o(3,"table",49)(4,"thead")(5,"tr")(6,"th"),l(7,"Date"),s(),o(8,"th"),l(9,"Action"),s(),o(10,"th"),l(11,"Item"),s(),o(12,"th"),l(13,"Quantity"),s(),o(14,"th"),l(15,"Performed By"),s(),o(16,"th"),l(17,"Reference"),s()()(),o(18,"tbody"),x(19,QF,13,6,"tr",31),s()()()),n&2){let e=f(2);c(19),m("ngForOf",e.fulfillmentHistory)}}function YF(n,t){if(n&1&&(o(0,"div",50)(1,"h3",23),l(2,"Remarks"),s(),o(3,"p",51),l(4),s()()),n&2){let e=f(2);c(4),g(e.pr.remarks)}}function ZF(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h1",11),l(5),s(),o(6,"p",12),l(7),s()(),o(8,"div",13)(9,"h2"),l(10,"PURCHASE REQUISITION"),s(),o(11,"span",14),l(12,"INTERNAL DOCUMENT"),s()()(),o(13,"div",15)(14,"div",16)(15,"div",17)(16,"label"),l(17,"PR Number:"),s(),o(18,"span",18),l(19),s()(),o(20,"div",17)(21,"label"),l(22,"PR Date:"),s(),o(23,"span",18),l(24),s()(),o(25,"div",17)(26,"label"),l(27,"Department:"),s(),o(28,"span",18),l(29),s()(),o(30,"div",17)(31,"label"),l(32,"Required Date:"),s(),o(33,"span",18),l(34),s()(),o(35,"div",17)(36,"label"),l(37,"Priority:"),s(),o(38,"span",19),l(39),s()(),o(40,"div",17)(41,"label"),l(42,"Status:"),s(),o(43,"span",20),l(44),s()()(),x(45,zF,5,1,"div",21),s(),o(46,"div",22)(47,"h3",23),l(48,"Material List"),s(),o(49,"table",24)(50,"thead")(51,"tr")(52,"th",25),l(53,"#"),s(),o(54,"th",26),l(55,"Item Name"),s(),o(56,"th",27),l(57,"Description"),s(),o(58,"th",28),l(59,"Requested Qty"),s(),o(60,"th",28),l(61,"Fulfilled Qty"),s(),o(62,"th",28),l(63,"Pending Qty"),s(),o(64,"th",29),l(65,"UOM"),s(),o(66,"th",30),l(67,"Status"),s()()(),o(68,"tbody"),x(69,$F,18,10,"tr",31),s(),o(70,"tfoot")(71,"tr",32)(72,"td",33)(73,"strong"),l(74,"Totals:"),s()(),o(75,"td",34)(76,"strong"),l(77),s()(),o(78,"td",34)(79,"strong"),l(80),s()(),o(81,"td",34)(82,"strong"),l(83),s()(),_(84,"td",35),s()()()(),x(85,KF,20,1,"div",36)(86,YF,5,1,"div",37),o(87,"div",38)(88,"div",39),_(89,"div",40),o(90,"p",41),l(91,"Requested By"),s(),o(92,"p",42),l(93),s(),o(94,"p",43),l(95,"Date: _______________"),s()(),o(96,"div",39),_(97,"div",40),o(98,"p",41),l(99,"Approved By"),s(),o(100,"p",42),l(101),s(),o(102,"p",43),l(103,"Date: _______________"),s()()(),o(104,"div",44)(105,"p"),l(106),s(),o(107,"p"),l(108,"Page 1 of 1"),s()()()()),n&2){let e=f();c(5),g(e.companyName),c(2),g(e.companyAddress),c(12),g(e.pr.prNumber),c(5),g(e.formatDate(e.pr.prDate)),c(5),g(e.pr.department),c(5),g(e.formatDate(e.pr.requiredDate)),c(4),Cn(e.pr.priority.toLowerCase()),c(),g(e.pr.priority),c(5),g(e.pr.status),c(),m("ngIf",e.pr.purpose),c(24),m("ngForOf",e.pr.items),c(8),g(e.getTotalRequested()),c(3),g(e.getTotalFulfilled()),c(3),g(e.getTotalPending()),c(2),m("ngIf",e.fulfillmentHistory.length>0),c(),m("ngIf",e.pr.remarks),c(7),g(e.pr.requestedBy||"_________________"),c(8),g(e.pr.approvedBy||"_________________"),c(5),T("This is an internal document. Printed on: ",e.formatDate(e.today))}}function JF(n,t){n&1&&(o(0,"div",52),_(1,"div",53),o(2,"p"),l(3,"Loading document..."),s()())}var hp=class n{constructor(t,e,i){this.route=t;this.router=e;this.prService=i}pr=null;prId=0;loading=!0;companyName="ERP System";companyAddress="123 Business Street, City, Country";fulfillmentHistory=[];today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.prId=+t.id,this.loadPR()})}loadPR(){this.prService.getById(this.prId).subscribe({next:t=>{this.pr=t,this.loadFulfillmentHistory(),this.loading=!1,setTimeout(()=>this.triggerPrint(),500)},error:t=>{console.error("Error loading PR:",t),this.loading=!1}})}loadFulfillmentHistory(){this.pr&&this.pr.items&&(this.fulfillmentHistory=this.pr.items.filter(t=>(t.fulfilledQuantity||0)>0).map(t=>({date:this.formatDate(new Date().toISOString()),action:t.status==="Fully Fulfilled"?"Stock Issue":"Partial Fulfillment",itemName:t.itemName,quantity:t.fulfilledQuantity||0,performedBy:"System",reference:this.pr?.prNumber||""})))}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""}getPendingQty(t){return Math.max(0,(t.quantity||0)-(t.fulfilledQuantity||0))}getTotalRequested(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.quantity||0),0)}getTotalFulfilled(){return!this.pr||!this.pr.items?0:this.pr.items.reduce((t,e)=>t+(e.fulfilledQuantity||0),0)}getTotalPending(){return this.getTotalRequested()-this.getTotalFulfilled()}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/requisition"])}static \u0275fac=function(e){return new(e||n)(I(Je),I(pe),I(At))};static \u0275cmp=F({type:n,selectors:[["app-pr-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-header"],[1,"company-info"],[1,"company-name"],[1,"company-address"],[1,"document-title"],[1,"internal-badge"],[1,"pr-info-section"],[1,"info-grid"],[1,"info-item"],[1,"value"],[1,"value","priority"],[1,"value","status"],["class","purpose-section",4,"ngIf"],[1,"materials-section"],[1,"section-title"],[1,"materials-table"],[1,"col-sno"],[1,"col-item"],[1,"col-desc"],[1,"col-qty"],[1,"col-uom"],[1,"col-status"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3",1,"right"],[1,"center"],["colspan","2"],["class","history-section",4,"ngIf"],["class","remarks-section",4,"ngIf"],[1,"signatures-section"],[1,"signature-box"],[1,"signature-line"],[1,"signature-label"],[1,"signature-name"],[1,"signature-date"],[1,"document-footer"],[1,"purpose-section"],[1,"purpose-text"],[1,"item-status"],[1,"history-section"],[1,"history-table"],[1,"remarks-section"],[1,"remarks-text"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),b("click",function(){return i.goBack()}),_(2,"i",2),l(3," Back "),s(),o(4,"button",3),b("click",function(){return i.triggerPrint()}),_(5,"i",4),l(6," Print "),s()(),x(7,ZF,109,20,"div",5)(8,JF,4,0,"div",6)),e&2&&(c(7),m("ngIf",i.pr),c(),m("ngIf",i.loading))},dependencies:[V,j],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:teal;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#066}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #008080;padding-bottom:15px;margin-bottom:20px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:teal;margin:0 0 5px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{text-align:right}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin:0 0 8px}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .internal-badge[_ngcontent-%COMP%]{display:inline-block;background:teal;color:#fff;padding:4px 12px;border-radius:4px;font-size:11px;font-weight:600}.pr-info-section[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:15px;margin-bottom:20px}.pr-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.urgent[_ngcontent-%COMP%]{color:#ff9800}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.critical[_ngcontent-%COMP%]{color:#dc3545}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.priority.normal[_ngcontent-%COMP%]{color:#28a745}.pr-info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.status[_ngcontent-%COMP%]{color:teal}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e9ecef}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.pr-info-section[_ngcontent-%COMP%]   .purpose-section[_ngcontent-%COMP%]   .purpose-text[_ngcontent-%COMP%]{font-size:13px;color:#333;margin:4px 0 0}.section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:teal;margin:0 0 10px;padding-bottom:5px;border-bottom:2px solid #008080}.materials-section[_ngcontent-%COMP%]{margin-bottom:20px}.materials-table[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .materials-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 6px;text-align:left}.materials-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;text-transform:uppercase;font-size:10px}.materials-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n), .history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.materials-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.materials-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.materials-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:30px}.materials-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%]{width:120px}.materials-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:80px}.materials-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-uom[_ngcontent-%COMP%]{width:60px}.materials-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .col-status[_ngcontent-%COMP%]{width:90px}.materials-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:10px;font-size:10px;font-weight:600}.materials-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.materials-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.partially-fulfilled[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.materials-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   .item-status.fully-fulfilled[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.materials-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%], .history-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:#e9ecef;font-weight:600}.history-section[_ngcontent-%COMP%], .remarks-section[_ngcontent-%COMP%]{margin-bottom:20px}.remarks-section[_ngcontent-%COMP%]   .remarks-text[_ngcontent-%COMP%]{font-size:12px;color:#333;margin:0;padding:10px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px}.signatures-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:40px;padding-top:20px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:200px;text-align:center}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:2px solid #333;margin-bottom:8px;height:40px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#333;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-name[_ngcontent-%COMP%]{font-size:11px;color:#666;margin:0 0 4px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-date[_ngcontent-%COMP%]{font-size:10px;color:#999;margin:0}.document-footer[_ngcontent-%COMP%]{margin-top:30px;padding-top:15px;border-top:1px solid #ddd;display:flex;justify-content:space-between;font-size:10px;color:#999}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function XF(n,t){if(n&1&&(o(0,"p"),l(1),s()),n&2){let e=f(2);c(),g(e.po.supplierAddress)}}function e5(n,t){if(n&1&&(o(0,"p"),l(1),s()),n&2){let e=f(2);c(),T("Contact: ",e.po.supplierContact)}}function t5(n,t){if(n&1&&(o(0,"span",53),_(1,"br"),l(2),s()),n&2){let e=f().$implicit;c(2),g(e.description)}}function n5(n,t){if(n&1&&(o(0,"tr")(1,"td",50),l(2),s(),o(3,"td")(4,"strong"),l(5),s(),x(6,t5,3,1,"span",51),s(),o(7,"td",50),l(8),s(),o(9,"td",50),l(10),s(),o(11,"td",52),l(12),s(),o(13,"td",52),l(14),s()()),n&2){let e=t.$implicit,i=t.index,r=f(2);c(2),g(i+1),c(3),g(e.itemName),c(),m("ngIf",e.description),c(2),g(e.quantity),c(2),g(e.unit||"PCS"),c(2),g(r.formatCurrency(e.rate)),c(2),g(r.formatCurrency(r.getItemAmount(e)))}}function i5(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h1",11),l(5),s(),o(6,"p",12),l(7),s(),o(8,"p",13),l(9),s()(),o(10,"div",14)(11,"h2"),l(12,"PURCHASE ORDER"),s(),o(13,"div",15)(14,"span",16),l(15,"PO Number"),s(),o(16,"span",17),l(17),s()()()(),o(18,"div",18)(19,"div",19)(20,"h3",20),l(21,"SUPPLIER"),s(),o(22,"div",21)(23,"p",22),l(24),s(),x(25,XF,2,1,"p",23)(26,e5,2,1,"p",23),s()(),o(27,"div",24)(28,"h3",20),l(29,"DELIVERY ADDRESS"),s(),o(30,"div",21)(31,"p"),l(32),s()()()(),o(33,"div",25)(34,"div",26)(35,"label"),l(36,"PO Date:"),s(),o(37,"span"),l(38),s()(),o(39,"div",26)(40,"label"),l(41,"Expected Delivery:"),s(),o(42,"span"),l(43),s()(),o(44,"div",26)(45,"label"),l(46,"Payment Terms:"),s(),o(47,"span"),l(48),s()()(),o(49,"div",27)(50,"table",28)(51,"thead")(52,"tr")(53,"th",29),l(54,"#"),s(),o(55,"th",30),l(56,"Item Description"),s(),o(57,"th",31),l(58,"Quantity"),s(),o(59,"th",32),l(60,"Unit"),s(),o(61,"th",33),l(62,"Rate"),s(),o(63,"th",34),l(64,"Amount"),s()()(),o(65,"tbody"),x(66,n5,15,7,"tr",35),s()()(),o(67,"div",36)(68,"div",37)(69,"div",38)(70,"span",16),l(71,"Subtotal:"),s(),o(72,"span",17),l(73),s()(),o(74,"div",38)(75,"span",16),l(76,"Tax (10%):"),s(),o(77,"span",17),l(78),s()(),o(79,"div",39)(80,"span",16),l(81,"TOTAL AMOUNT:"),s(),o(82,"span",17),l(83),s()()()(),o(84,"div",40)(85,"label"),l(86,"Amount in Words:"),s(),o(87,"p"),l(88),X(89,"currency"),s()(),o(90,"div",41)(91,"h3",42),l(92,"Terms & Conditions"),s(),o(93,"ol",43)(94,"li"),l(95,"Please quote the PO number on all correspondence and delivery documents."),s(),o(96,"li"),l(97,"Goods must be delivered in good condition within the specified time frame."),s(),o(98,"li"),l(99,"Payment will be made as per the payment terms mentioned above."),s(),o(100,"li"),l(101,"Any discrepancy in quality or quantity must be reported within 3 working days."),s()()(),o(102,"div",44)(103,"div",45),_(104,"div",46),o(105,"p",47),l(106,"Authorized Signatory"),s(),o(107,"p",48),l(108,"Procurement Manager"),s()(),o(109,"div",45),_(110,"div",46),o(111,"p",47),l(112,"Supplier Acknowledgment"),s(),o(113,"p",48),l(114,"Date & Stamp"),s()()(),o(115,"div",49)(116,"p"),l(117),s(),o(118,"p"),l(119,"Page 1 of 1"),s()()()()),n&2){let e=f();c(5),g(e.companyName),c(2),g(e.companyAddress),c(2),de("Tel: ",e.companyPhone," | Email: ",e.companyEmail),c(8),g(e.po.poNumber),c(7),g(e.po.supplierName),c(),m("ngIf",e.po.supplierAddress),c(),m("ngIf",e.po.supplierContact),c(6),g(e.deliveryAddress),c(6),g(e.formatDate(e.po.poDate||e.po.createdDate||"")),c(5),g(e.formatDate(e.po.expectedDate||e.po.deliveryDate||"")),c(5),g(e.po.paymentTerms||"Net 30 Days"),c(18),m("ngForOf",e.po.items),c(7),g(e.formatCurrency(e.getSubtotal())),c(5),g(e.formatCurrency(e.getTaxAmount())),c(5),g(e.formatCurrency(e.getTotal())),c(5),T("",cg(89,18,e.getTotal(),"USD","symbol","1.2-2")," Only"),c(29),T("This is an official Purchase Order document. Generated on: ",e.formatDate(e.today))}}function r5(n,t){n&1&&(o(0,"div",54),_(1,"div",55),o(2,"p"),l(3,"Loading document..."),s()())}var _p=class n{constructor(t,e,i){this.route=t;this.router=e;this.poService=i}po=null;poId=0;loading=!0;companyName="ERP System";companyAddress="123 Business Street, City, Country";companyPhone="+1 234 567 8900";companyEmail="procurement@erp-system.com";deliveryAddress="Main Warehouse, 456 Industrial Zone, City, Country";today=new Date().toISOString();ngOnInit(){this.route.params.subscribe(t=>{this.poId=+t.id,this.loadPO()})}loadPO(){this.poService.getById(this.poId).subscribe({next:t=>{this.po=t,this.loading=!1,setTimeout(()=>this.triggerPrint(),500)},error:t=>{console.error("Error loading PO:",t),this.loading=!1}})}formatDate(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}getItemAmount(t){return(t.quantity||0)*(t.rate||0)}getSubtotal(){return!this.po||!this.po.items?0:this.po.items.reduce((t,e)=>t+this.getItemAmount(e),0)}getTaxAmount(){return this.getSubtotal()*.1}getTotal(){return this.po?.totalAmount?this.po.totalAmount:this.getSubtotal()+this.getTaxAmount()}triggerPrint(){window.print()}goBack(){this.router.navigate(["/app/purchase/direct"])}static \u0275fac=function(e){return new(e||n)(I(Je),I(pe),I(Ko))};static \u0275cmp=F({type:n,selectors:[["app-po-print"]],standalone:!1,decls:9,vars:2,consts:[[1,"print-actions","no-print"],[1,"btn-back",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn-print",3,"click"],[1,"fa","fa-print"],["class","print-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"print-container"],[1,"a4-page"],[1,"document-header"],[1,"company-info"],[1,"company-name"],[1,"company-address"],[1,"company-contact"],[1,"document-title"],[1,"po-number-box"],[1,"label"],[1,"value"],[1,"info-row"],[1,"supplier-section"],[1,"section-label"],[1,"info-box"],[1,"supplier-name"],[4,"ngIf"],[1,"delivery-section"],[1,"order-info"],[1,"info-item"],[1,"items-section"],[1,"items-table"],[1,"col-sno"],[1,"col-item"],[1,"col-qty"],[1,"col-unit"],[1,"col-rate"],[1,"col-amount"],[4,"ngFor","ngForOf"],[1,"totals-section"],[1,"totals-box"],[1,"total-row"],[1,"total-row","grand-total"],[1,"amount-words"],[1,"terms-section"],[1,"section-title"],[1,"terms-list"],[1,"signatures-section"],[1,"signature-box"],[1,"signature-line"],[1,"signature-label"],[1,"signature-title"],[1,"document-footer"],[1,"center"],["class","item-desc",4,"ngIf"],[1,"right"],[1,"item-desc"],[1,"loading-container"],[1,"spinner"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),b("click",function(){return i.goBack()}),_(2,"i",2),l(3," Back "),s(),o(4,"button",3),b("click",function(){return i.triggerPrint()}),_(5,"i",4),l(6," Print "),s()(),x(7,i5,120,23,"div",5)(8,r5,4,0,"div",6)),e&2&&(c(7),m("ngIf",i.po),c(),m("ngIf",i.loading))},dependencies:[V,j,kg],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}body[_ngcontent-%COMP%]{margin:0;padding:0}.print-container[_ngcontent-%COMP%]{padding:0;background:#fff}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;margin:0;box-shadow:none;page-break-after:always}}@media screen{.print-actions[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;gap:10px;z-index:1000}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:8px;transition:all .2s}.print-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#5a6268}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background:teal;color:#fff;border:none}.print-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background:#066}.print-container[_ngcontent-%COMP%]{padding:40px;background:#f5f5f5;min-height:100vh;display:flex;justify-content:center}.a4-page[_ngcontent-%COMP%]{width:210mm;min-height:297mm;padding:15mm;background:#fff;box-shadow:0 4px 20px #00000026;margin-top:60px}}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #008080;padding-bottom:15px;margin-bottom:20px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:teal;margin:0 0 5px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-address[_ngcontent-%COMP%]{font-size:11px;color:#666;margin:0 0 2px}.document-header[_ngcontent-%COMP%]   .company-info[_ngcontent-%COMP%]   .company-contact[_ngcontent-%COMP%]{font-size:10px;color:#888;margin:0}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{text-align:right}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#333;margin:0 0 10px}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .po-number-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:teal;color:#fff;padding:8px 16px;border-radius:4px}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .po-number-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;opacity:.8}.document-header[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]   .po-number-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.info-row[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:20px}.info-row[_ngcontent-%COMP%]   .supplier-section[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   .delivery-section[_ngcontent-%COMP%]{flex:1}.info-row[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:teal;margin:0 0 8px;text-transform:uppercase;letter-spacing:1px}.info-row[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-left:3px solid #008080;padding:12px;min-height:60px}.info-row[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#333}.info-row[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p.supplier-name[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.info-row[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-info[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:20px;padding:12px;background:#e8f5f5;border-radius:4px}.order-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;gap:8px}.order-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:500}.order-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#333;font-weight:600}.items-section[_ngcontent-%COMP%]{margin-bottom:20px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:11px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px 8px;text-align:left}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:teal;color:#fff;font-weight:600;text-transform:uppercase;font-size:10px}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa}.items-table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.items-table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.items-table[_ngcontent-%COMP%]   .col-sno[_ngcontent-%COMP%]{width:30px}.items-table[_ngcontent-%COMP%]   .col-qty[_ngcontent-%COMP%]{width:70px}.items-table[_ngcontent-%COMP%]   .col-unit[_ngcontent-%COMP%]{width:60px}.items-table[_ngcontent-%COMP%]   .col-rate[_ngcontent-%COMP%]{width:90px}.items-table[_ngcontent-%COMP%]   .col-amount[_ngcontent-%COMP%]{width:100px}.items-table[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:10px;color:#666;font-weight:400}.totals-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:20px}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]{width:250px}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 12px;font-size:12px;border-bottom:1px solid #e9ecef}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#333}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{background:teal;color:#fff;border-bottom:none}.totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%]   .totals-box[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:14px}.amount-words[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px 12px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px}.amount-words[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:10px;color:#666;font-weight:500}.amount-words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#333;font-weight:600;margin:4px 0 0;font-style:italic}.terms-section[_ngcontent-%COMP%]{margin-bottom:25px}.terms-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:teal;margin:0 0 8px;text-transform:uppercase}.terms-section[_ngcontent-%COMP%]   .terms-list[_ngcontent-%COMP%]{margin:0;padding-left:20px}.terms-section[_ngcontent-%COMP%]   .terms-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:10px;color:#666;margin-bottom:4px}.signatures-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:40px;padding-top:20px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{width:180px;text-align:center}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-line[_ngcontent-%COMP%]{border-bottom:2px solid #333;margin-bottom:8px;height:50px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-label[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#333;margin:0 0 2px}.signatures-section[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-title[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:0}.document-footer[_ngcontent-%COMP%]{margin-top:30px;padding-top:15px;border-top:1px solid #ddd;display:flex;justify-content:space-between;font-size:10px;color:#999}.document-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e9ecef;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function o5(n,t){n&1&&(o(0,"div",5),_(1,"div",6),o(2,"p"),l(3,"Loading settings..."),s()())}function a5(n,t){if(n&1){let e=O();o(0,"form",7),b("ngSubmit",function(){v(e);let r=f();return y(r.saveSettings())}),o(1,"div",8)(2,"h3",9),_(3,"i",10),l(4," Inventory Prefixes "),s(),o(5,"div",11)(6,"div",12)(7,"label"),l(8,"Item Master"),s(),o(9,"div",13)(10,"input",14),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.itemPrefix,r)||(a.settings.itemPrefix=r),y(r)}),s(),o(11,"input",15),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.itemNextNumber,r)||(a.settings.itemNextNumber=r),y(r)}),s()(),o(12,"span",16),l(13),s()(),o(14,"div",12)(15,"label"),l(16,"Group Master"),s(),o(17,"div",13)(18,"input",17),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.groupPrefix,r)||(a.settings.groupPrefix=r),y(r)}),s(),o(19,"input",18),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.groupNextNumber,r)||(a.settings.groupNextNumber=r),y(r)}),s()(),o(20,"span",16),l(21),s()(),o(22,"div",12)(23,"label"),l(24,"Warehouse"),s(),o(25,"div",13)(26,"input",19),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.warehousePrefix,r)||(a.settings.warehousePrefix=r),y(r)}),s(),o(27,"input",20),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.warehouseNextNumber,r)||(a.settings.warehouseNextNumber=r),y(r)}),s()(),o(28,"span",16),l(29),s()(),o(30,"div",12)(31,"label"),l(32,"Bin Location"),s(),o(33,"div",13)(34,"input",21),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.binPrefix,r)||(a.settings.binPrefix=r),y(r)}),s(),o(35,"input",22),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.binNextNumber,r)||(a.settings.binNextNumber=r),y(r)}),s()(),o(36,"span",16),l(37),s()(),o(38,"div",12)(39,"label"),l(40,"Supplier"),s(),o(41,"div",13)(42,"input",23),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.supplierPrefix,r)||(a.settings.supplierPrefix=r),y(r)}),s(),o(43,"input",24),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.supplierNextNumber,r)||(a.settings.supplierNextNumber=r),y(r)}),s()(),o(44,"span",16),l(45),s()(),o(46,"div",12)(47,"label"),l(48,"Unit of Measure"),s(),o(49,"div",13)(50,"input",25),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.unitPrefix,r)||(a.settings.unitPrefix=r),y(r)}),s(),o(51,"input",26),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.unitNextNumber,r)||(a.settings.unitNextNumber=r),y(r)}),s()(),o(52,"span",16),l(53),s()()()(),o(54,"div",8)(55,"h3",9),_(56,"i",27),l(57," Purchase Prefixes "),s(),o(58,"div",11)(59,"div",12)(60,"label"),l(61,"Purchase Requisition"),s(),o(62,"div",13)(63,"input",28),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.prPrefix,r)||(a.settings.prPrefix=r),y(r)}),s(),o(64,"input",29),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.prNextNumber,r)||(a.settings.prNextNumber=r),y(r)}),s()(),o(65,"span",16),l(66),s()(),o(67,"div",12)(68,"label"),l(69,"Purchase Order"),s(),o(70,"div",13)(71,"input",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.poPrefix,r)||(a.settings.poPrefix=r),y(r)}),s(),o(72,"input",31),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.poNextNumber,r)||(a.settings.poNextNumber=r),y(r)}),s()(),o(73,"span",16),l(74),s()(),o(75,"div",12)(76,"label"),l(77,"Goods Receipt Note"),s(),o(78,"div",13)(79,"input",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.grnPrefix,r)||(a.settings.grnPrefix=r),y(r)}),s(),o(80,"input",33),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.grnNextNumber,r)||(a.settings.grnNextNumber=r),y(r)}),s()(),o(81,"span",16),l(82),s()()()(),o(83,"div",8)(84,"h3",9),_(85,"i",34),l(86," Stock Movement Prefixes "),s(),o(87,"div",11)(88,"div",12)(89,"label"),l(90,"Goods Issue"),s(),o(91,"div",13)(92,"input",35),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.issuePrefix,r)||(a.settings.issuePrefix=r),y(r)}),s(),o(93,"input",36),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.issueNextNumber,r)||(a.settings.issueNextNumber=r),y(r)}),s()(),o(94,"span",16),l(95),s()(),o(96,"div",12)(97,"label"),l(98,"Stock Transfer"),s(),o(99,"div",13)(100,"input",37),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.transferPrefix,r)||(a.settings.transferPrefix=r),y(r)}),s(),o(101,"input",38),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.transferNextNumber,r)||(a.settings.transferNextNumber=r),y(r)}),s()(),o(102,"span",16),l(103),s()(),o(104,"div",12)(105,"label"),l(106,"Stock Adjustment"),s(),o(107,"div",13)(108,"input",39),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.adjustmentPrefix,r)||(a.settings.adjustmentPrefix=r),y(r)}),s(),o(109,"input",40),E("ngModelChange",function(r){v(e);let a=f();return M(a.settings.adjustmentNextNumber,r)||(a.settings.adjustmentNextNumber=r),y(r)}),s()(),o(110,"span",16),l(111),s()()()(),o(112,"div",41)(113,"button",42),_(114,"i",43),l(115),s()()()}if(n&2){let e=f();c(10),S("ngModel",e.settings.itemPrefix),c(),S("ngModel",e.settings.itemNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.itemPrefix,e.settings.itemNextNumber)),c(5),S("ngModel",e.settings.groupPrefix),c(),S("ngModel",e.settings.groupNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.groupPrefix,e.settings.groupNextNumber)),c(5),S("ngModel",e.settings.warehousePrefix),c(),S("ngModel",e.settings.warehouseNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.warehousePrefix,e.settings.warehouseNextNumber)),c(5),S("ngModel",e.settings.binPrefix),c(),S("ngModel",e.settings.binNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.binPrefix,e.settings.binNextNumber)),c(5),S("ngModel",e.settings.supplierPrefix),c(),S("ngModel",e.settings.supplierNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.supplierPrefix,e.settings.supplierNextNumber)),c(5),S("ngModel",e.settings.unitPrefix),c(),S("ngModel",e.settings.unitNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.unitPrefix,e.settings.unitNextNumber)),c(10),S("ngModel",e.settings.prPrefix),c(),S("ngModel",e.settings.prNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.prPrefix,e.settings.prNextNumber)),c(5),S("ngModel",e.settings.poPrefix),c(),S("ngModel",e.settings.poNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.poPrefix,e.settings.poNextNumber)),c(5),S("ngModel",e.settings.grnPrefix),c(),S("ngModel",e.settings.grnNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.grnPrefix,e.settings.grnNextNumber)),c(10),S("ngModel",e.settings.issuePrefix),c(),S("ngModel",e.settings.issueNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.issuePrefix,e.settings.issueNextNumber)),c(5),S("ngModel",e.settings.transferPrefix),c(),S("ngModel",e.settings.transferNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.transferPrefix,e.settings.transferNextNumber)),c(5),S("ngModel",e.settings.adjustmentPrefix),c(),S("ngModel",e.settings.adjustmentNextNumber),c(2),T("Preview: ",e.formatPreview(e.settings.adjustmentPrefix,e.settings.adjustmentNextNumber)),c(2),m("disabled",e.saving),c(2),T(" ",e.saving?"Saving...":"Save Settings"," ")}}var vp=class n{constructor(t){this.settingsService=t}settings={itemPrefix:"ITM-",itemNextNumber:1,groupPrefix:"GRP-",groupNextNumber:1,warehousePrefix:"WH-",warehouseNextNumber:1,binPrefix:"BIN-",binNextNumber:1,supplierPrefix:"SUP-",supplierNextNumber:1,unitPrefix:"UOM-",unitNextNumber:1,prPrefix:"PR-",prNextNumber:1,poPrefix:"PO-",poNextNumber:1,grnPrefix:"GRN-",grnNextNumber:1,issuePrefix:"GI-",issueNextNumber:1,transferPrefix:"ST-",transferNextNumber:1,adjustmentPrefix:"ADJ-",adjustmentNextNumber:1};saving=!1;loading=!1;ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getPrefixSettings().subscribe({next:t=>{t&&(this.settings=t),this.loading=!1},error:t=>{console.error("Error loading prefix settings",t),this.loading=!1}})}saveSettings(){this.saving=!0,this.settingsService.savePrefixSettings(this.settings).subscribe({next:t=>{this.settings=t,this.saving=!1,alert("Prefix settings saved successfully!")},error:t=>{console.error("Error saving prefix settings",t),this.saving=!1,alert("Error saving prefix settings")}})}formatPreview(t,e){return`${t}${e.toString().padStart(4,"0")}`}static \u0275fac=function(e){return new(e||n)(I(Me))};static \u0275cmp=F({type:n,selectors:[["app-prefix-settings"]],standalone:!1,decls:8,vars:2,consts:[[1,"prefix-settings-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","settings-form",3,"ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"settings-form",3,"ngSubmit"],[1,"settings-section"],[1,"section-title"],[1,"fas","fa-boxes"],[1,"prefix-grid"],[1,"prefix-card"],[1,"prefix-inputs"],["type","text","name","itemPrefix","placeholder","ITM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","itemNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"preview"],["type","text","name","groupPrefix","placeholder","GRP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","groupNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","warehousePrefix","placeholder","WH-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","warehouseNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","binPrefix","placeholder","BIN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","binNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","supplierPrefix","placeholder","SUP-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","supplierNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","unitPrefix","placeholder","UOM-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","unitNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-shopping-cart"],["type","text","name","prPrefix","placeholder","PR-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","prNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","poPrefix","placeholder","PO-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","poNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","grnPrefix","placeholder","GRN-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","grnNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"fas","fa-exchange-alt"],["type","text","name","issuePrefix","placeholder","GI-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","issueNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","transferPrefix","placeholder","ST-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","transferNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],["type","text","name","adjustmentPrefix","placeholder","ADJ-",1,"prefix-input",3,"ngModelChange","ngModel"],["type","number","name","adjustmentNextNumber","min","1",1,"number-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-save"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Prefix Settings"),s(),o(4,"p",2),l(5,"Configure auto-generated ID prefixes for inventory and purchase modules"),s()(),x(6,o5,4,0,"div",3)(7,a5,116,38,"form",4),s()),e&2&&(c(6),m("ngIf",i.loading),c(),m("ngIf",!i.loading))},dependencies:[j,Ld,$,Oe,q,Rd,qe,H,Ms],styles:[".prefix-settings-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal;margin:0 0 8px;font-size:24px;font-weight:600}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e0e0e0;border-top-color:teal;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.settings-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 8px #00000014}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:teal;font-size:18px;font-weight:600;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #e0f2f1}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.prefix-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.prefix-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;border:1px solid #e0e0e0;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]:hover{border-color:teal;box-shadow:0 2px 8px #0080801a}.prefix-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:12px;font-size:14px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .prefix-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]{width:100px;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.prefix-card[_ngcontent-%COMP%]   .prefix-inputs[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]:focus{outline:none;border-color:teal;box-shadow:0 0 0 3px #0080801a}.prefix-card[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:block;font-size:12px;color:teal;font-weight:500;background:#e0f2f1;padding:6px 10px;border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:teal;color:#fff}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#066}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media(max-width:768px){.prefix-settings-container[_ngcontent-%COMP%]{padding:16px}.prefix-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.settings-section[_ngcontent-%COMP%]{padding:16px}}"]})};function s5(n,t){if(n&1){let e=O();o(0,"label",19)(1,"input",20),E("ngModelChange",function(r){let a=v(e).$implicit;return M(a.checked,r)||(a.checked=r),y(r)}),s(),o(2,"span"),l(3),s()()}if(n&2){let e=t.$implicit;c(),S("ngModel",e.checked),c(2),g(e.name)}}function l5(n,t){if(n&1&&(o(0,"tr")(1,"td",15),l(2),s(),o(3,"td",16)(4,"div",17),x(5,s5,4,2,"label",18),s()()()),n&2){let e=t.$implicit;c(2),g(e.feature),c(3),m("ngForOf",e.capabilities)}}var Us=class n{constructor(t,e,i){this.router=t;this.route=e;this.roleService=i}roleName="";roleDescription="";editMode=!1;roleId=null;saving=!1;featurePermissions=[{feature:"Dashboard",capabilities:[{name:"View",checked:!1}]},{feature:"Settings",capabilities:[{name:"View",checked:!1},{name:"Edit",checked:!1}]},{feature:"Customer Management",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Contract Management",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Group Master",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Item Master",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Units of Measure",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Warehouse & Bin",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Supplier",capabilities:[{name:"View",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Inventory - Valuation",capabilities:[{name:"View",checked:!1}]},{feature:"Inventory - Ledger",capabilities:[{name:"View",checked:!1}]},{feature:"Stock Movement - Goods Receipt (GRN)",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Goods Issue",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Stock Transfer",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Stock Movement - Stock Adjustments",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1},{name:"Approve",checked:!1}]},{feature:"Purchase - Requisition",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1},{name:"Approve",checked:!1}]},{feature:"Purchase - PR Fulfillment",capabilities:[{name:"View",checked:!1},{name:"Convert to PO",checked:!1},{name:"Stock Issue",checked:!1},{name:"Material Transfer",checked:!1}]},{feature:"Purchase - Direct Purchase",capabilities:[{name:"View (Own)",checked:!1},{name:"View (Global)",checked:!1},{name:"Create",checked:!1},{name:"Edit",checked:!1},{name:"Delete",checked:!1}]},{feature:"Reports - Inventory",capabilities:[{name:"View",checked:!1},{name:"Export",checked:!1}]},{feature:"Reports - Purchase",capabilities:[{name:"View",checked:!1},{name:"Export",checked:!1}]},{feature:"Audit Trails",capabilities:[{name:"View System Audits",checked:!1},{name:"View Inventory Audits",checked:!1},{name:"View Purchase Audits",checked:!1}]}];ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.editMode=!0,this.roleId=parseInt(t),this.loadRole())}loadRole(){this.roleId&&this.roleService.getById(this.roleId).subscribe({next:t=>{this.roleName=t.name,this.roleDescription=t.description||"",t.permissions&&this.parsePermissions(t.permissions)},error:t=>{console.error("Error loading role:",t)}})}parsePermissions(t){try{let e=JSON.parse(t);for(let i of this.featurePermissions){let r=e[i.feature];if(r)for(let a of i.capabilities)a.checked=r.includes(a.name)}}catch(e){console.error("Error parsing permissions:",e)}}getPermissionsJson(){let t={};for(let e of this.featurePermissions){let i=e.capabilities.filter(r=>r.checked).map(r=>r.name);i.length>0&&(t[e.feature]=i)}return JSON.stringify(t)}saveRole(){if(!this.roleName.trim()){alert("Role name is required");return}this.saving=!0;let t={name:this.roleName,description:this.roleDescription,permissions:this.getPermissionsJson()};this.editMode&&this.roleId?this.roleService.update(this.roleId,t).subscribe({next:()=>{this.router.navigate(["/app/settings/roles"])},error:e=>{alert(e.error?.error||"Error updating role"),this.saving=!1}}):this.roleService.create(t).subscribe({next:()=>{this.router.navigate(["/app/settings/roles"])},error:e=>{alert(e.error?.error||"Error creating role"),this.saving=!1}})}cancel(){this.router.navigate(["/app/settings/roles"])}static \u0275fac=function(e){return new(e||n)(I(pe),I(Je),I(qo))};static \u0275cmp=F({type:n,selectors:[["app-add-role"]],standalone:!1,decls:36,vars:5,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/roles"],[1,"card"],[1,"form-group"],[1,"required"],["type","text","placeholder","Enter role name",1,"form-control",3,"ngModelChange","ngModel"],[1,"permissions-section"],[1,"permissions-table"],[4,"ngFor","ngForOf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"feature-name"],[1,"capabilities-cell"],[1,"capability-list"],["class","checkbox-label",4,"ngFor","ngForOf"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Roles"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15),s()()()(),o(16,"div",5)(17,"div",6)(18,"label",7),l(19,"Role Name"),s(),o(20,"input",8),E("ngModelChange",function(a){return M(i.roleName,a)||(i.roleName=a),a}),s()(),o(21,"div",9)(22,"table",10)(23,"thead")(24,"tr")(25,"th"),l(26,"features"),s(),o(27,"th"),l(28,"Capabilities"),s()()(),o(29,"tbody"),x(30,l5,6,2,"tr",11),s()()(),o(31,"div",12)(32,"button",13),b("click",function(){return i.cancel()}),l(33,"Cancel"),s(),o(34,"button",14),b("click",function(){return i.saveRole()}),l(35),s()()()()),e&2&&(c(4),g(i.editMode?"Edit Role":"Add New Role"),c(11),g(i.editMode?"Edit":"Add New"),c(5),S("ngModel",i.roleName),c(10),m("ngForOf",i.featurePermissions),c(5),T(" ",i.editMode?"Update Role":"Save Role"," "))},dependencies:[V,$,sn,q,H,Q],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.permissions-section[_ngcontent-%COMP%]{margin-top:24px}.permissions-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permissions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border-color)}.permissions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-color);font-weight:600;color:var(--text-primary)}.permissions-table[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary);width:40%}.permissions-table[_ngcontent-%COMP%]   .capabilities-cell[_ngcontent-%COMP%]{width:60%}.capability-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:.9rem;color:var(--text-primary)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:var(--primary-color)}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border-color)}']})};function c5(n,t){if(n&1){let e=O();o(0,"div",17)(1,"label",23),l(2,"Password"),s(),o(3,"input",35),E("ngModelChange",function(r){v(e);let a=f(2);return M(a.password,r)||(a.password=r),y(r)}),s(),o(4,"small",36),l(5,"Minimum 6 characters"),s()()}if(n&2){let e=f(2);c(3),S("ngModel",e.password)}}function d5(n,t){if(n&1&&(o(0,"option",37),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function u5(n,t){if(n&1){let e=O();o(0,"div",12)(1,"div",13)(2,"label",14)(3,"input",15),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.isAdmin,r)||(a.staff.isAdmin=r),y(r)}),s(),o(4,"span"),l(5,"Administrator"),s()(),o(6,"label",14)(7,"input",16),b("change",function(){v(e);let r=f();return y(r.staff.isStaffMember=!r.staff.isStaffMember)}),s(),o(8,"span"),l(9,"Not Staff Member"),s()()(),o(10,"div",17)(11,"label"),l(12,"Profile Image"),s(),o(13,"div",18),_(14,"input",19),o(15,"label",20)(16,"span",21),l(17,"Choose File"),s(),o(18,"span",22),l(19,"No file chosen"),s()()()(),o(20,"div",17)(21,"label",23),l(22,"First Name"),s(),o(23,"input",24),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.firstName,r)||(a.staff.firstName=r),y(r)}),s()(),o(24,"div",17)(25,"label",23),l(26,"Last Name"),s(),o(27,"input",25),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.lastName,r)||(a.staff.lastName=r),y(r)}),s()(),o(28,"div",17)(29,"label",23),l(30,"Email"),s(),o(31,"input",26),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.email,r)||(a.staff.email=r),y(r)}),s()(),o(32,"div",17)(33,"label"),l(34,"Hourly Rate"),s(),o(35,"div",27)(36,"input",28),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.hourlyRate,r)||(a.staff.hourlyRate=r),y(r)}),s(),o(37,"span",29),l(38,"\u20B9"),s()()(),o(39,"div",17)(40,"label"),l(41,"Phone"),s(),o(42,"input",30),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.phone,r)||(a.staff.phone=r),y(r)}),s()(),x(43,c5,6,1,"div",31),o(44,"div",17)(45,"label"),l(46,"Role"),s(),o(47,"select",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.role,r)||(a.staff.role=r),y(r)}),o(48,"option",33),l(49,"Select Role"),s(),x(50,d5,2,2,"option",34),s()()()}if(n&2){let e=f();c(3),S("ngModel",e.staff.isAdmin),c(4),m("checked",!e.staff.isStaffMember),c(16),S("ngModel",e.staff.firstName),c(4),S("ngModel",e.staff.lastName),c(4),S("ngModel",e.staff.email),c(5),S("ngModel",e.staff.hourlyRate),c(6),S("ngModel",e.staff.phone),c(),m("ngIf",!e.editMode),c(4),S("ngModel",e.staff.role),c(3),m("ngForOf",e.roles)}}function p5(n,t){if(n&1&&(o(0,"option",37),l(1),s()),n&2){let e=t.$implicit;m("value",e.name),c(),g(e.name)}}function m5(n,t){if(n&1){let e=O();o(0,"div",12)(1,"p",38),l(2,"Permissions are managed through the role assigned to this staff member."),s(),o(3,"div",17)(4,"label"),l(5,"Assigned Role"),s(),o(6,"select",32),E("ngModelChange",function(r){v(e);let a=f();return M(a.staff.role,r)||(a.staff.role=r),y(r)}),o(7,"option",33),l(8,"Select Role"),s(),x(9,p5,2,2,"option",34),s()()()}if(n&2){let e=f();c(6),S("ngModel",e.staff.role),c(3),m("ngForOf",e.roles)}}var Gs=class n{constructor(t,e,i){this.router=t;this.route=e;this.staffService=i}editMode=!1;staffId=null;activeTab="profile";saving=!1;staff={firstName:"",lastName:"",email:"",role:"",isAdmin:!1,isStaffMember:!0,phone:"",hourlyRate:0,active:!0};password="";roles=[];ngOnInit(){this.loadRoles();let t=this.route.snapshot.paramMap.get("id");t&&(this.editMode=!0,this.staffId=parseInt(t),this.loadStaff())}loadRoles(){this.staffService.getRoles().subscribe({next:t=>{console.log("Roles loaded:",t),this.roles=t},error:t=>{console.error("Error loading roles:",t),this.roles=[]}})}loadStaff(){this.staffId&&this.staffService.getById(this.staffId).subscribe({next:t=>{this.staff=t},error:t=>{console.error("Error loading staff:",t)}})}setTab(t){this.activeTab=t}saveStaff(){if(!this.staff.firstName?.trim()||!this.staff.lastName?.trim()){alert("First name and last name are required");return}if(!this.staff.email?.trim()){alert("Email is required");return}if(!this.editMode&&(!this.password||this.password.length<6)){alert("Password must be at least 6 characters");return}this.saving=!0;let t=R({},this.staff);!this.editMode&&this.password&&(t.password=this.password),this.editMode&&this.staffId?this.staffService.update(this.staffId,this.staff).subscribe({next:()=>{this.router.navigate(["/app/settings/staff"])},error:e=>{alert(e.error?.error||"Error updating staff"),this.saving=!1}}):this.staffService.create(t).subscribe({next:()=>{this.router.navigate(["/app/settings/staff"])},error:e=>{alert(e.error?.error||"Error creating staff"),this.saving=!1}})}cancel(){this.router.navigate(["/app/settings/staff"])}static \u0275fac=function(e){return new(e||n)(I(pe),I(Je),I(zo))};static \u0275cmp=F({type:n,selectors:[["app-add-staff"]],standalone:!1,decls:29,vars:9,consts:[[1,"settings-page"],[1,"page-header"],[1,"breadcrumb"],["routerLink","/app"],["routerLink","/app/settings/staff"],[1,"card"],[1,"tabs"],[1,"tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"tab-content"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["type","checkbox",3,"change","checked"],[1,"form-group"],[1,"file-input"],["type","file","id","profileImage","accept","image/*"],["for","profileImage",1,"file-label"],[1,"choose-file"],[1,"file-name"],[1,"required"],["type","text","placeholder","Enter first name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-with-suffix"],["type","number","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"suffix"],["type","tel","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","password","placeholder","Enter password",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-text"],[3,"value"],[1,"permissions-note"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),s(),o(5,"div",2)(6,"a",3),l(7,"Home"),s(),o(8,"span"),l(9,"/"),s(),o(10,"a",4),l(11,"Staff Management"),s(),o(12,"span"),l(13,"/"),s(),o(14,"span"),l(15),s()()()(),o(16,"div",5)(17,"div",6)(18,"button",7),b("click",function(){return i.setTab("profile")}),l(19,"Profile"),s(),o(20,"button",7),b("click",function(){return i.setTab("permissions")}),l(21,"Permissions"),s()(),x(22,u5,51,10,"div",8)(23,m5,10,2,"div",8),o(24,"div",9)(25,"button",10),b("click",function(){return i.cancel()}),l(26,"Cancel"),s(),o(27,"button",11),b("click",function(){return i.saveStaff()}),l(28),s()()()()),e&2&&(c(4),g(i.editMode?"Edit Staff Member":"Add New Staff Member"),c(11),g(i.editMode?"Edit":"Add New"),c(3),ne("active",i.activeTab==="profile"),c(2),ne("active",i.activeTab==="permissions"),c(2),m("ngIf",i.activeTab==="profile"),c(),m("ngIf",i.activeTab==="permissions"),c(5),T(" ",i.editMode?"Update Staff":"Save Staff"," "))},dependencies:[V,j,Y,Z,$,Oe,sn,K,q,H,Q],styles:['.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:24px}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border-bottom:2px solid var(--border-color);margin-bottom:24px}.tab[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;color:var(--text-secondary);font-size:.95rem;cursor:pointer;position:relative;font-weight:500}.tab.active[_ngcontent-%COMP%]{color:var(--text-primary)}.tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--primary-color)}.tab[_ngcontent-%COMP%]:hover:not(.active){color:var(--text-primary)}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.95rem}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:var(--primary-color)}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;border:1px solid var(--border-color);border-radius:8px;cursor:pointer}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .choose-file[_ngcontent-%COMP%]{padding:6px 16px;background:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;font-size:.9rem}.file-input[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.input-with-suffix[_ngcontent-%COMP%]{position:relative}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary);font-size:1rem}.required[_ngcontent-%COMP%]:before{content:"*";color:var(--danger-color);margin-right:4px}.permissions-note[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin-bottom:20px;padding:12px;background:var(--bg-color);border-radius:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border-color)}']})};var f5=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:gu},{path:"app",component:vu,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:bu},{path:"settings/general",component:Cu},{path:"settings/finance",component:xu},{path:"settings/finance/tax-rates",component:Iu},{path:"settings/finance/currencies",component:Du},{path:"settings/finance/payment-modes",component:Pu},{path:"settings/finance/expense-categories",component:Tu},{path:"settings/customer",component:Su},{path:"settings/contract",component:Eu},{path:"settings/roles",component:Mu},{path:"settings/roles/add",component:Us},{path:"settings/roles/edit/:id",component:Us},{path:"settings/staff",component:wu},{path:"settings/staff/add",component:Gs},{path:"settings/staff/edit/:id",component:Gs},{path:"settings/prefixes",component:vp},{path:"customers",component:Ou},{path:"contracts",component:Ru},{path:"inventory/groups",component:Nu},{path:"inventory/items",component:Fu},{path:"inventory/units",component:Lu},{path:"inventory/warehouse",component:Vu},{path:"inventory/suppliers",component:ju},{path:"inventory/valuation",component:Bu},{path:"inventory/ledger",component:Uu},{path:"stock/grn",component:Gu},{path:"stock/issue",component:Hu},{path:"stock/transfer",component:qu},{path:"stock/adjustments",component:zu},{path:"reports/stock-summary",component:$u},{path:"reports/valuation",component:Qu},{path:"reports/item-movement",component:Ku},{path:"reports/stock-ledger",component:Yu},{path:"reports/group-wise",component:Zu},{path:"reports/warehouse-stock",component:Ju},{path:"reports/reorder-level",component:Xu},{path:"reports/slow-moving",component:ep},{path:"reports/purchase-grn",component:tp},{path:"purchase/requisition",component:np},{path:"purchase/fulfillment/convert-to-po",component:ip},{path:"purchase/fulfillment/stock-issue",component:rp},{path:"purchase/fulfillment/material-transfer",component:op},{path:"purchase/direct",component:ap},{path:"reports/purchase/pr-list",component:sp},{path:"reports/purchase/pr-pending",component:lp},{path:"reports/purchase/pr-history",component:cp},{path:"reports/purchase/po-list",component:dp},{path:"reports/purchase/direct-purchase",component:up},{path:"reports/purchase/stock-issue-transfer",component:pp},{path:"audit/system",component:mp},{path:"audit/inventory",component:fp},{path:"audit/purchase",component:gp},{path:"purchase/requisition/:id/print",component:hp},{path:"purchase/direct/:id/print",component:_p}]}],yp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({imports:[mu.forRoot(f5),mu]})};var bp=class n{title="ERP System";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&_(0,"router-outlet")},dependencies:[Wr],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})};var Cp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=nt({type:n,bootstrap:[bp]});static \u0275inj=tt({providers:[{provide:rd,useClass:fu,multi:!0}],imports:[ss,m1,es,j1,B1,Qg,yp]})};Bg().bootstrapModule(Cp,{}).catch(n=>console.error(n));
